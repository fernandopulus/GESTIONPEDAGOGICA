(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var cIe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function E5(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var PC={exports:{}},Wp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ak;function W9(){if(ak)return Wp;ak=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,s,a){var i=null;if(a!==void 0&&(i=""+a),s.key!==void 0&&(i=""+s.key),"key"in s){a={};for(var o in s)o!=="key"&&(a[o]=s[o])}else a=s;return s=a.ref,{$$typeof:t,type:n,key:i,ref:s!==void 0?s:null,props:a}}return Wp.Fragment=e,Wp.jsx=r,Wp.jsxs=r,Wp}var ik;function Y9(){return ik||(ik=1,PC.exports=W9()),PC.exports}var c=Y9(),jC={exports:{}},Hr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ok;function X9(){if(ok)return Hr;ok=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function m(W){return W===null||typeof W!="object"?null:(W=h&&W[h]||W["@@iterator"],typeof W=="function"?W:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,y={};function _(W,ie,P){this.props=W,this.context=ie,this.refs=y,this.updater=P||g}_.prototype.isReactComponent={},_.prototype.setState=function(W,ie){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,ie,"setState")},_.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function N(){}N.prototype=_.prototype;function k(W,ie,P){this.props=W,this.context=ie,this.refs=y,this.updater=P||g}var R=k.prototype=new N;R.constructor=k,b(R,_.prototype),R.isPureReactComponent=!0;var M=Array.isArray,j={H:null,A:null,T:null,S:null,V:null},L=Object.prototype.hasOwnProperty;function C(W,ie,P,Y,Z,te){return P=te.ref,{$$typeof:t,type:W,key:ie,ref:P!==void 0?P:null,props:te}}function E(W,ie){return C(W.type,ie,void 0,void 0,void 0,W.props)}function B(W){return typeof W=="object"&&W!==null&&W.$$typeof===t}function Q(W){var ie={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(P){return ie[P]})}var D=/\/+/g;function I(W,ie){return typeof W=="object"&&W!==null&&W.key!=null?Q(""+W.key):ie.toString(36)}function O(){}function G(W){switch(W.status){case"fulfilled":return W.value;case"rejected":throw W.reason;default:switch(typeof W.status=="string"?W.then(O,O):(W.status="pending",W.then(function(ie){W.status==="pending"&&(W.status="fulfilled",W.value=ie)},function(ie){W.status==="pending"&&(W.status="rejected",W.reason=ie)})),W.status){case"fulfilled":return W.value;case"rejected":throw W.reason}}throw W}function se(W,ie,P,Y,Z){var te=typeof W;(te==="undefined"||te==="boolean")&&(W=null);var ce=!1;if(W===null)ce=!0;else switch(te){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(W.$$typeof){case t:case e:ce=!0;break;case d:return ce=W._init,se(ce(W._payload),ie,P,Y,Z)}}if(ce)return Z=Z(W),ce=Y===""?"."+I(W,0):Y,M(Z)?(P="",ce!=null&&(P=ce.replace(D,"$&/")+"/"),se(Z,ie,P,"",function(fe){return fe})):Z!=null&&(B(Z)&&(Z=E(Z,P+(Z.key==null||W&&W.key===Z.key?"":(""+Z.key).replace(D,"$&/")+"/")+ce)),ie.push(Z)),1;ce=0;var Ee=Y===""?".":Y+":";if(M(W))for(var pe=0;pe<W.length;pe++)Y=W[pe],te=Ee+I(Y,pe),ce+=se(Y,ie,P,te,Z);else if(pe=m(W),typeof pe=="function")for(W=pe.call(W),pe=0;!(Y=W.next()).done;)Y=Y.value,te=Ee+I(Y,pe++),ce+=se(Y,ie,P,te,Z);else if(te==="object"){if(typeof W.then=="function")return se(G(W),ie,P,Y,Z);throw ie=String(W),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return ce}function J(W,ie,P){if(W==null)return W;var Y=[],Z=0;return se(W,Y,"","",function(te){return ie.call(P,te,Z++)}),Y}function re(W){if(W._status===-1){var ie=W._result;ie=ie(),ie.then(function(P){(W._status===0||W._status===-1)&&(W._status=1,W._result=P)},function(P){(W._status===0||W._status===-1)&&(W._status=2,W._result=P)}),W._status===-1&&(W._status=0,W._result=ie)}if(W._status===1)return W._result.default;throw W._result}var q=typeof reportError=="function"?reportError:function(W){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof W=="object"&&W!==null&&typeof W.message=="string"?String(W.message):String(W),error:W});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",W);return}console.error(W)};function z(){}return Hr.Children={map:J,forEach:function(W,ie,P){J(W,function(){ie.apply(this,arguments)},P)},count:function(W){var ie=0;return J(W,function(){ie++}),ie},toArray:function(W){return J(W,function(ie){return ie})||[]},only:function(W){if(!B(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},Hr.Component=_,Hr.Fragment=r,Hr.Profiler=s,Hr.PureComponent=k,Hr.StrictMode=n,Hr.Suspense=l,Hr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,Hr.__COMPILER_RUNTIME={__proto__:null,c:function(W){return j.H.useMemoCache(W)}},Hr.cache=function(W){return function(){return W.apply(null,arguments)}},Hr.cloneElement=function(W,ie,P){if(W==null)throw Error("The argument must be a React element, but you passed "+W+".");var Y=b({},W.props),Z=W.key,te=void 0;if(ie!=null)for(ce in ie.ref!==void 0&&(te=void 0),ie.key!==void 0&&(Z=""+ie.key),ie)!L.call(ie,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&ie.ref===void 0||(Y[ce]=ie[ce]);var ce=arguments.length-2;if(ce===1)Y.children=P;else if(1<ce){for(var Ee=Array(ce),pe=0;pe<ce;pe++)Ee[pe]=arguments[pe+2];Y.children=Ee}return C(W.type,Z,void 0,void 0,te,Y)},Hr.createContext=function(W){return W={$$typeof:i,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null},W.Provider=W,W.Consumer={$$typeof:a,_context:W},W},Hr.createElement=function(W,ie,P){var Y,Z={},te=null;if(ie!=null)for(Y in ie.key!==void 0&&(te=""+ie.key),ie)L.call(ie,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(Z[Y]=ie[Y]);var ce=arguments.length-2;if(ce===1)Z.children=P;else if(1<ce){for(var Ee=Array(ce),pe=0;pe<ce;pe++)Ee[pe]=arguments[pe+2];Z.children=Ee}if(W&&W.defaultProps)for(Y in ce=W.defaultProps,ce)Z[Y]===void 0&&(Z[Y]=ce[Y]);return C(W,te,void 0,void 0,null,Z)},Hr.createRef=function(){return{current:null}},Hr.forwardRef=function(W){return{$$typeof:o,render:W}},Hr.isValidElement=B,Hr.lazy=function(W){return{$$typeof:d,_payload:{_status:-1,_result:W},_init:re}},Hr.memo=function(W,ie){return{$$typeof:u,type:W,compare:ie===void 0?null:ie}},Hr.startTransition=function(W){var ie=j.T,P={};j.T=P;try{var Y=W(),Z=j.S;Z!==null&&Z(P,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(z,q)}catch(te){q(te)}finally{j.T=ie}},Hr.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},Hr.use=function(W){return j.H.use(W)},Hr.useActionState=function(W,ie,P){return j.H.useActionState(W,ie,P)},Hr.useCallback=function(W,ie){return j.H.useCallback(W,ie)},Hr.useContext=function(W){return j.H.useContext(W)},Hr.useDebugValue=function(){},Hr.useDeferredValue=function(W,ie){return j.H.useDeferredValue(W,ie)},Hr.useEffect=function(W,ie,P){var Y=j.H;if(typeof P=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Y.useEffect(W,ie)},Hr.useId=function(){return j.H.useId()},Hr.useImperativeHandle=function(W,ie,P){return j.H.useImperativeHandle(W,ie,P)},Hr.useInsertionEffect=function(W,ie){return j.H.useInsertionEffect(W,ie)},Hr.useLayoutEffect=function(W,ie){return j.H.useLayoutEffect(W,ie)},Hr.useMemo=function(W,ie){return j.H.useMemo(W,ie)},Hr.useOptimistic=function(W,ie){return j.H.useOptimistic(W,ie)},Hr.useReducer=function(W,ie,P){return j.H.useReducer(W,ie,P)},Hr.useRef=function(W){return j.H.useRef(W)},Hr.useState=function(W){return j.H.useState(W)},Hr.useSyncExternalStore=function(W,ie,P){return j.H.useSyncExternalStore(W,ie,P)},Hr.useTransition=function(){return j.H.useTransition()},Hr.version="19.1.1",Hr}var lk;function Hx(){return lk||(lk=1,jC.exports=X9()),jC.exports}var ee=Hx();const At=E5(ee);var OC={exports:{}},Yp={},QC={exports:{}},HC={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ck;function J9(){return ck||(ck=1,function(t){function e(J,re){var q=J.length;J.push(re);e:for(;0<q;){var z=q-1>>>1,W=J[z];if(0<s(W,re))J[z]=re,J[q]=W,q=z;else break e}}function r(J){return J.length===0?null:J[0]}function n(J){if(J.length===0)return null;var re=J[0],q=J.pop();if(q!==re){J[0]=q;e:for(var z=0,W=J.length,ie=W>>>1;z<ie;){var P=2*(z+1)-1,Y=J[P],Z=P+1,te=J[Z];if(0>s(Y,q))Z<W&&0>s(te,Y)?(J[z]=te,J[Z]=q,z=Z):(J[z]=Y,J[P]=q,z=P);else if(Z<W&&0>s(te,q))J[z]=te,J[Z]=q,z=Z;else break e}}return re}function s(J,re){var q=J.sortIndex-re.sortIndex;return q!==0?q:J.id-re.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var l=[],u=[],d=1,h=null,m=3,g=!1,b=!1,y=!1,_=!1,N=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function M(J){for(var re=r(u);re!==null;){if(re.callback===null)n(u);else if(re.startTime<=J)n(u),re.sortIndex=re.expirationTime,e(l,re);else break;re=r(u)}}function j(J){if(y=!1,M(J),!b)if(r(l)!==null)b=!0,L||(L=!0,I());else{var re=r(u);re!==null&&se(j,re.startTime-J)}}var L=!1,C=-1,E=5,B=-1;function Q(){return _?!0:!(t.unstable_now()-B<E)}function D(){if(_=!1,L){var J=t.unstable_now();B=J;var re=!0;try{e:{b=!1,y&&(y=!1,k(C),C=-1),g=!0;var q=m;try{t:{for(M(J),h=r(l);h!==null&&!(h.expirationTime>J&&Q());){var z=h.callback;if(typeof z=="function"){h.callback=null,m=h.priorityLevel;var W=z(h.expirationTime<=J);if(J=t.unstable_now(),typeof W=="function"){h.callback=W,M(J),re=!0;break t}h===r(l)&&n(l),M(J)}else n(l);h=r(l)}if(h!==null)re=!0;else{var ie=r(u);ie!==null&&se(j,ie.startTime-J),re=!1}}break e}finally{h=null,m=q,g=!1}re=void 0}}finally{re?I():L=!1}}}var I;if(typeof R=="function")I=function(){R(D)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,G=O.port2;O.port1.onmessage=D,I=function(){G.postMessage(null)}}else I=function(){N(D,0)};function se(J,re){C=N(function(){J(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(J){switch(m){case 1:case 2:case 3:var re=3;break;default:re=m}var q=m;m=re;try{return J()}finally{m=q}},t.unstable_requestPaint=function(){_=!0},t.unstable_runWithPriority=function(J,re){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var q=m;m=J;try{return re()}finally{m=q}},t.unstable_scheduleCallback=function(J,re,q){var z=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?z+q:z):q=z,J){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=q+W,J={id:d++,callback:re,priorityLevel:J,startTime:q,expirationTime:W,sortIndex:-1},q>z?(J.sortIndex=q,e(u,J),r(l)===null&&J===r(u)&&(y?(k(C),C=-1):y=!0,se(j,q-z))):(J.sortIndex=W,e(l,J),b||g||(b=!0,L||(L=!0,I()))),J},t.unstable_shouldYield=Q,t.unstable_wrapCallback=function(J){var re=m;return function(){var q=m;m=re;try{return J.apply(this,arguments)}finally{m=q}}}}(HC)),HC}var uk;function Z9(){return uk||(uk=1,QC.exports=J9()),QC.exports}var VC={exports:{}},Ti={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ak;function eV(){if(Ak)return Ti;Ak=1;var t=Hx();function e(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(l,u,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:h==null?null:""+h,children:l,containerInfo:u,implementation:d}}var i=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Ti.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Ti.createPortal=function(l,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return a(l,u,null,d)},Ti.flushSync=function(l){var u=i.T,d=n.p;try{if(i.T=null,n.p=2,l)return l()}finally{i.T=u,n.p=d,n.d.f()}},Ti.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,n.d.C(l,u))},Ti.prefetchDNS=function(l){typeof l=="string"&&n.d.D(l)},Ti.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin),m=typeof u.integrity=="string"?u.integrity:void 0,g=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?n.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:m,fetchPriority:g}):d==="script"&&n.d.X(l,{crossOrigin:h,integrity:m,fetchPriority:g,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Ti.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=o(u.as,u.crossOrigin);n.d.M(l,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&n.d.M(l)},Ti.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin);n.d.L(l,d,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Ti.preloadModule=function(l,u){if(typeof l=="string")if(u){var d=o(u.as,u.crossOrigin);n.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else n.d.m(l)},Ti.requestFormReset=function(l){n.d.r(l)},Ti.unstable_batchedUpdates=function(l,u){return l(u)},Ti.useFormState=function(l,u,d){return i.H.useFormState(l,u,d)},Ti.useFormStatus=function(){return i.H.useHostTransitionStatus()},Ti.version="19.1.1",Ti}var dk;function HL(){if(dk)return VC.exports;dk=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),VC.exports=eV(),VC.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fk;function tV(){if(fk)return Yp;fk=1;var t=Z9(),e=Hx(),r=HL();function n(A){var f="https://react.dev/errors/"+A;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+A+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function a(A){var f=A,p=A;if(A.alternate)for(;f.return;)f=f.return;else{A=f;do f=A,(f.flags&4098)!==0&&(p=f.return),A=f.return;while(A)}return f.tag===3?p:null}function i(A){if(A.tag===13){var f=A.memoizedState;if(f===null&&(A=A.alternate,A!==null&&(f=A.memoizedState)),f!==null)return f.dehydrated}return null}function o(A){if(a(A)!==A)throw Error(n(188))}function l(A){var f=A.alternate;if(!f){if(f=a(A),f===null)throw Error(n(188));return f!==A?null:A}for(var p=A,w=f;;){var F=p.return;if(F===null)break;var H=F.alternate;if(H===null){if(w=F.return,w!==null){p=w;continue}break}if(F.child===H.child){for(H=F.child;H;){if(H===p)return o(F),A;if(H===w)return o(F),f;H=H.sibling}throw Error(n(188))}if(p.return!==w.return)p=F,w=H;else{for(var le=!1,we=F.child;we;){if(we===p){le=!0,p=F,w=H;break}if(we===w){le=!0,w=F,p=H;break}we=we.sibling}if(!le){for(we=H.child;we;){if(we===p){le=!0,p=H,w=F;break}if(we===w){le=!0,w=H,p=F;break}we=we.sibling}if(!le)throw Error(n(189))}}if(p.alternate!==w)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?A:f}function u(A){var f=A.tag;if(f===5||f===26||f===27||f===6)return A;for(A=A.child;A!==null;){if(f=u(A),f!==null)return f;A=A.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),k=Symbol.for("react.consumer"),R=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function I(A){return A===null||typeof A!="object"?null:(A=D&&A[D]||A["@@iterator"],typeof A=="function"?A:null)}var O=Symbol.for("react.client.reference");function G(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===O?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case b:return"Fragment";case _:return"Profiler";case y:return"StrictMode";case j:return"Suspense";case L:return"SuspenseList";case B:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case g:return"Portal";case R:return(A.displayName||"Context")+".Provider";case k:return(A._context.displayName||"Context")+".Consumer";case M:var f=A.render;return A=A.displayName,A||(A=f.displayName||f.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case C:return f=A.displayName||null,f!==null?f:G(A.type)||"Memo";case E:f=A._payload,A=A._init;try{return G(A(f))}catch{}}return null}var se=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},z=[],W=-1;function ie(A){return{current:A}}function P(A){0>W||(A.current=z[W],z[W]=null,W--)}function Y(A,f){W++,z[W]=A.current,A.current=f}var Z=ie(null),te=ie(null),ce=ie(null),Ee=ie(null);function pe(A,f){switch(Y(ce,f),Y(te,A),Y(Z,null),f.nodeType){case 9:case 11:A=(A=f.documentElement)&&(A=A.namespaceURI)?DB(A):0;break;default:if(A=f.tagName,f=f.namespaceURI)f=DB(f),A=RB(f,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}P(Z),Y(Z,A)}function fe(){P(Z),P(te),P(ce)}function xe(A){A.memoizedState!==null&&Y(Ee,A);var f=Z.current,p=RB(f,A.type);f!==p&&(Y(te,A),Y(Z,p))}function de(A){te.current===A&&(P(Z),P(te)),Ee.current===A&&(P(Ee),Gp._currentValue=q)}var oe=Object.prototype.hasOwnProperty,Le=t.unstable_scheduleCallback,et=t.unstable_cancelCallback,Te=t.unstable_shouldYield,be=t.unstable_requestPaint,je=t.unstable_now,qe=t.unstable_getCurrentPriorityLevel,st=t.unstable_ImmediatePriority,mt=t.unstable_UserBlockingPriority,Et=t.unstable_NormalPriority,lt=t.unstable_LowPriority,kt=t.unstable_IdlePriority,Gt=t.log,Xt=t.unstable_setDisableYieldValue,It=null,Dt=null;function Wt(A){if(typeof Gt=="function"&&Xt(A),Dt&&typeof Dt.setStrictMode=="function")try{Dt.setStrictMode(It,A)}catch{}}var Lt=Math.clz32?Math.clz32:wr,Rt=Math.log,xt=Math.LN2;function wr(A){return A>>>=0,A===0?32:31-(Rt(A)/xt|0)|0}var Jt=256,dn=4194304;function gr(A){var f=A&42;if(f!==0)return f;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function Ur(A,f,p){var w=A.pendingLanes;if(w===0)return 0;var F=0,H=A.suspendedLanes,le=A.pingedLanes;A=A.warmLanes;var we=w&134217727;return we!==0?(w=we&~H,w!==0?F=gr(w):(le&=we,le!==0?F=gr(le):p||(p=we&~A,p!==0&&(F=gr(p))))):(we=w&~H,we!==0?F=gr(we):le!==0?F=gr(le):p||(p=w&~A,p!==0&&(F=gr(p)))),F===0?0:f!==0&&f!==F&&(f&H)===0&&(H=F&-F,p=f&-f,H>=p||H===32&&(p&4194048)!==0)?f:F}function Dn(A,f){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&f)===0}function Fr(A,f){switch(A){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function da(){var A=Jt;return Jt<<=1,(Jt&4194048)===0&&(Jt=256),A}function nn(){var A=dn;return dn<<=1,(dn&62914560)===0&&(dn=4194304),A}function ns(A){for(var f=[],p=0;31>p;p++)f.push(A);return f}function ps(A,f){A.pendingLanes|=f,f!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function Pr(A,f,p,w,F,H){var le=A.pendingLanes;A.pendingLanes=p,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=p,A.entangledLanes&=p,A.errorRecoveryDisabledLanes&=p,A.shellSuspendCounter=0;var we=A.entanglements,De=A.expirationTimes,tt=A.hiddenUpdates;for(p=le&~p;0<p;){var dt=31-Lt(p),wt=1<<dt;we[dt]=0,De[dt]=-1;var nt=tt[dt];if(nt!==null)for(tt[dt]=null,dt=0;dt<nt.length;dt++){var at=nt[dt];at!==null&&(at.lane&=-536870913)}p&=~wt}w!==0&&nr(A,w,0),H!==0&&F===0&&A.tag!==0&&(A.suspendedLanes|=H&~(le&~f))}function nr(A,f,p){A.pendingLanes|=f,A.suspendedLanes&=~f;var w=31-Lt(f);A.entangledLanes|=f,A.entanglements[w]=A.entanglements[w]|1073741824|p&4194090}function Gr(A,f){var p=A.entangledLanes|=f;for(A=A.entanglements;p;){var w=31-Lt(p),F=1<<w;F&f|A[w]&f&&(A[w]|=f),p&=~F}}function fa(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function Wn(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function Es(){var A=re.p;return A!==0?A:(A=window.event,A===void 0?32:ZB(A.type))}function Na(A,f){var p=re.p;try{return re.p=A,f()}finally{re.p=p}}var zt=Math.random().toString(36).slice(2),fn="__reactFiber$"+zt,sn="__reactProps$"+zt,Rn="__reactContainer$"+zt,jn="__reactEvents$"+zt,Yn="__reactListeners$"+zt,he="__reactHandles$"+zt,ke="__reactResources$"+zt,_e="__reactMarker$"+zt;function Se(A){delete A[fn],delete A[sn],delete A[jn],delete A[Yn],delete A[he]}function Ne(A){var f=A[fn];if(f)return f;for(var p=A.parentNode;p;){if(f=p[Rn]||p[fn]){if(p=f.alternate,f.child!==null||p!==null&&p.child!==null)for(A=PB(A);A!==null;){if(p=A[fn])return p;A=PB(A)}return f}A=p,p=A.parentNode}return null}function Ie(A){if(A=A[fn]||A[Rn]){var f=A.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return A}return null}function Ke(A){var f=A.tag;if(f===5||f===26||f===27||f===6)return A.stateNode;throw Error(n(33))}function rt(A){var f=A[ke];return f||(f=A[ke]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function He(A){A[_e]=!0}var We=new Set,Je={};function yt(A,f){Bt(A,f),Bt(A+"Capture",f)}function Bt(A,f){for(Je[A]=f,A=0;A<f.length;A++)We.add(f[A])}var Ot=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nt={},Ut={};function dr(A){return oe.call(Ut,A)?!0:oe.call(Nt,A)?!1:Ot.test(A)?Ut[A]=!0:(Nt[A]=!0,!1)}function jr(A,f,p){if(dr(f))if(p===null)A.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":A.removeAttribute(f);return;case"boolean":var w=f.toLowerCase().slice(0,5);if(w!=="data-"&&w!=="aria-"){A.removeAttribute(f);return}}A.setAttribute(f,""+p)}}function Or(A,f,p){if(p===null)A.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(f);return}A.setAttribute(f,""+p)}}function zr(A,f,p,w){if(w===null)A.removeAttribute(p);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(p);return}A.setAttributeNS(f,p,""+w)}}var Rs,pi;function Ls(A){if(Rs===void 0)try{throw Error()}catch(p){var f=p.stack.trim().match(/\n( *(at )?)/);Rs=f&&f[1]||"",pi=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Rs+A+pi}var ha=!1;function $s(A,f){if(!A||ha)return"";ha=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(f){var wt=function(){throw Error()};if(Object.defineProperty(wt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(wt,[])}catch(at){var nt=at}Reflect.construct(A,[],wt)}else{try{wt.call()}catch(at){nt=at}A.call(wt.prototype)}}else{try{throw Error()}catch(at){nt=at}(wt=A())&&typeof wt.catch=="function"&&wt.catch(function(){})}}catch(at){if(at&&nt&&typeof at.stack=="string")return[at.stack,nt.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var F=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");F&&F.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var H=w.DetermineComponentFrameRoot(),le=H[0],we=H[1];if(le&&we){var De=le.split(`
`),tt=we.split(`
`);for(F=w=0;w<De.length&&!De[w].includes("DetermineComponentFrameRoot");)w++;for(;F<tt.length&&!tt[F].includes("DetermineComponentFrameRoot");)F++;if(w===De.length||F===tt.length)for(w=De.length-1,F=tt.length-1;1<=w&&0<=F&&De[w]!==tt[F];)F--;for(;1<=w&&0<=F;w--,F--)if(De[w]!==tt[F]){if(w!==1||F!==1)do if(w--,F--,0>F||De[w]!==tt[F]){var dt=`
`+De[w].replace(" at new "," at ");return A.displayName&&dt.includes("<anonymous>")&&(dt=dt.replace("<anonymous>",A.displayName)),dt}while(1<=w&&0<=F);break}}}finally{ha=!1,Error.prepareStackTrace=p}return(p=A?A.displayName||A.name:"")?Ls(p):""}function Ba(A){switch(A.tag){case 26:case 27:case 5:return Ls(A.type);case 16:return Ls("Lazy");case 13:return Ls("Suspense");case 19:return Ls("SuspenseList");case 0:case 15:return $s(A.type,!1);case 11:return $s(A.type.render,!1);case 1:return $s(A.type,!0);case 31:return Ls("Activity");default:return""}}function Xn(A){try{var f="";do f+=Ba(A),A=A.return;while(A);return f}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function ma(A){switch(typeof A){case"bigint":case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function jc(A){var f=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function WA(A){var f=jc(A)?"checked":"value",p=Object.getOwnPropertyDescriptor(A.constructor.prototype,f),w=""+A[f];if(!A.hasOwnProperty(f)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var F=p.get,H=p.set;return Object.defineProperty(A,f,{configurable:!0,get:function(){return F.call(this)},set:function(le){w=""+le,H.call(this,le)}}),Object.defineProperty(A,f,{enumerable:p.enumerable}),{getValue:function(){return w},setValue:function(le){w=""+le},stopTracking:function(){A._valueTracker=null,delete A[f]}}}}function cl(A){A._valueTracker||(A._valueTracker=WA(A))}function Vu(A){if(!A)return!1;var f=A._valueTracker;if(!f)return!0;var p=f.getValue(),w="";return A&&(w=jc(A)?A.checked?"true":"false":A.value),A=w,A!==p?(f.setValue(A),!0):!1}function ka(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}var Oc=/[\n"\\]/g;function hn(A){return A.replace(Oc,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function Ia(A,f,p,w,F,H,le,we){A.name="",le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"?A.type=le:A.removeAttribute("type"),f!=null?le==="number"?(f===0&&A.value===""||A.value!=f)&&(A.value=""+ma(f)):A.value!==""+ma(f)&&(A.value=""+ma(f)):le!=="submit"&&le!=="reset"||A.removeAttribute("value"),f!=null?Al(A,le,ma(f)):p!=null?Al(A,le,ma(p)):w!=null&&A.removeAttribute("value"),F==null&&H!=null&&(A.defaultChecked=!!H),F!=null&&(A.checked=F&&typeof F!="function"&&typeof F!="symbol"),we!=null&&typeof we!="function"&&typeof we!="symbol"&&typeof we!="boolean"?A.name=""+ma(we):A.removeAttribute("name")}function ul(A,f,p,w,F,H,le,we){if(H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"&&(A.type=H),f!=null||p!=null){if(!(H!=="submit"&&H!=="reset"||f!=null))return;p=p!=null?""+ma(p):"",f=f!=null?""+ma(f):p,we||f===A.value||(A.value=f),A.defaultValue=f}w=w??F,w=typeof w!="function"&&typeof w!="symbol"&&!!w,A.checked=we?A.checked:!!w,A.defaultChecked=!!w,le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"&&(A.name=le)}function Al(A,f,p){f==="number"&&ka(A.ownerDocument)===A||A.defaultValue===""+p||(A.defaultValue=""+p)}function lo(A,f,p,w){if(A=A.options,f){f={};for(var F=0;F<p.length;F++)f["$"+p[F]]=!0;for(p=0;p<A.length;p++)F=f.hasOwnProperty("$"+A[p].value),A[p].selected!==F&&(A[p].selected=F),F&&w&&(A[p].defaultSelected=!0)}else{for(p=""+ma(p),f=null,F=0;F<A.length;F++){if(A[F].value===p){A[F].selected=!0,w&&(A[F].defaultSelected=!0);return}f!==null||A[F].disabled||(f=A[F])}f!==null&&(f.selected=!0)}}function _n(A,f,p){if(f!=null&&(f=""+ma(f),f!==A.value&&(A.value=f),p==null)){A.defaultValue!==f&&(A.defaultValue=f);return}A.defaultValue=p!=null?""+ma(p):""}function dl(A,f,p,w){if(f==null){if(w!=null){if(p!=null)throw Error(n(92));if(se(w)){if(1<w.length)throw Error(n(93));w=w[0]}p=w}p==null&&(p=""),f=p}p=ma(f),A.defaultValue=p,w=A.textContent,w===p&&w!==""&&w!==null&&(A.value=w)}function gi(A,f){if(f){var p=A.firstChild;if(p&&p===A.lastChild&&p.nodeType===3){p.nodeValue=f;return}}A.textContent=f}var Ro=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function YA(A,f,p){var w=f.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?w?A.setProperty(f,""):f==="float"?A.cssFloat="":A[f]="":w?A.setProperty(f,p):typeof p!="number"||p===0||Ro.has(f)?f==="float"?A.cssFloat=p:A[f]=(""+p).trim():A[f]=p+"px"}function Gu(A,f,p){if(f!=null&&typeof f!="object")throw Error(n(62));if(A=A.style,p!=null){for(var w in p)!p.hasOwnProperty(w)||f!=null&&f.hasOwnProperty(w)||(w.indexOf("--")===0?A.setProperty(w,""):w==="float"?A.cssFloat="":A[w]="");for(var F in f)w=f[F],f.hasOwnProperty(F)&&p[F]!==w&&YA(A,F,w)}else for(var H in f)f.hasOwnProperty(H)&&YA(A,H,f[H])}function zu(A){if(A.indexOf("-")===-1)return!1;switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Uo(A){return Qc.test(""+A)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":A}var co=null;function On(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var Mo=null,uo=null;function hr(A){var f=Ie(A);if(f&&(A=f.stateNode)){var p=A[sn]||null;e:switch(A=f.stateNode,f.type){case"input":if(Ia(A,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),f=p.name,p.type==="radio"&&f!=null){for(p=A;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+hn(""+f)+'"][type="radio"]'),f=0;f<p.length;f++){var w=p[f];if(w!==A&&w.form===A.form){var F=w[sn]||null;if(!F)throw Error(n(90));Ia(w,F.value,F.defaultValue,F.defaultValue,F.checked,F.defaultChecked,F.type,F.name)}}for(f=0;f<p.length;f++)w=p[f],w.form===A.form&&Vu(w)}break e;case"textarea":_n(A,p.value,p.defaultValue);break e;case"select":f=p.value,f!=null&&lo(A,!!p.multiple,f,!1)}}}var Ao=!1;function XA(A,f,p){if(Ao)return A(f,p);Ao=!0;try{var w=A(f);return w}finally{if(Ao=!1,(Mo!==null||uo!==null)&&(Z1(),Mo&&(f=Mo,A=uo,uo=Mo=null,hr(f),A)))for(f=0;f<A.length;f++)hr(A[f])}}function ja(A,f){var p=A.stateNode;if(p===null)return null;var w=p[sn]||null;if(w===null)return null;p=w[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(A=A.type,w=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!w;break e;default:A=!1}if(A)return null;if(p&&typeof p!="function")throw Error(n(231,f,typeof p));return p}var xi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ei=!1;if(xi)try{var fo={};Object.defineProperty(fo,"passive",{get:function(){ei=!0}}),window.addEventListener("test",fo,fo),window.removeEventListener("test",fo,fo)}catch{ei=!1}var vi=null,fl=null,Po=null;function qu(){if(Po)return Po;var A,f=fl,p=f.length,w,F="value"in vi?vi.value:vi.textContent,H=F.length;for(A=0;A<p&&f[A]===F[A];A++);var le=p-A;for(w=1;w<=le&&f[p-w]===F[H-w];w++);return Po=F.slice(A,1<w?1-w:void 0)}function yi(A){var f=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&f===13&&(A=13)):A=f,A===10&&(A=13),32<=A||A===13?A:0}function Oa(){return!0}function ho(){return!1}function Us(A){function f(p,w,F,H,le){this._reactName=p,this._targetInst=F,this.type=w,this.nativeEvent=H,this.target=le,this.currentTarget=null;for(var we in A)A.hasOwnProperty(we)&&(p=A[we],this[we]=p?p(H):H[we]);return this.isDefaultPrevented=(H.defaultPrevented!=null?H.defaultPrevented:H.returnValue===!1)?Oa:ho,this.isPropagationStopped=ho,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Oa)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Oa)},persist:function(){},isPersistent:Oa}),f}var Jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hl=Us(Jr),mo=d({},Jr,{view:0,detail:0}),Ku=Us(mo),Xl,Jl,Xi,Qa=d({},mo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xl,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==Xi&&(Xi&&A.type==="mousemove"?(Xl=A.screenX-Xi.screenX,Jl=A.screenY-Xi.screenY):Jl=Xl=0,Xi=A),Xl)},movementY:function(A){return"movementY"in A?A.movementY:Jl}}),Ms=Us(Qa),JA=d({},Qa,{dataTransfer:0}),ml=Us(JA),Fa=d({},mo,{relatedTarget:0}),pl=Us(Fa),jo=d({},Jr,{animationName:0,elapsedTime:0,pseudoElement:0}),Hc=Us(jo),Zl=d({},Jr,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),Vc=Us(Zl),$u=d({},Jr,{data:0}),ec=Us($u),gl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rc(A){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(A):(A=Gc[A])?!!f[A]:!1}function xl(){return rc}var ZA=d({},mo,{key:function(A){if(A.key){var f=gl[A.key]||A.key;if(f!=="Unidentified")return f}return A.type==="keypress"?(A=yi(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?tc[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xl,charCode:function(A){return A.type==="keypress"?yi(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?yi(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),Oo=Us(ZA),vl=d({},Qa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nc=Us(vl),Ha=d({},mo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xl}),zc=Us(Ha),V=d({},Jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ae=Us(V),Fe=d({},Qa,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),Re=Us(Fe),Ve=d({},Jr,{newState:0,oldState:0}),ot=Us(Ve),_t=[9,13,27,32],Qt=xi&&"CompositionEvent"in window,T=null;xi&&"documentMode"in document&&(T=document.documentMode);var X=xi&&"TextEvent"in window&&!T,ae=xi&&(!Qt||T&&8<T&&11>=T),ye=" ",Qe=!1;function Ze(A,f){switch(A){case"keyup":return _t.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function St(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var mr=!1;function Zr(A,f){switch(A){case"compositionend":return St(f);case"keypress":return f.which!==32?null:(Qe=!0,ye);case"textInput":return A=f.data,A===ye&&Qe?null:A;default:return null}}function kr(A,f){if(mr)return A==="compositionend"||!Qt&&Ze(A,f)?(A=qu(),Po=fl=vi=null,mr=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return ae&&f.locale!=="ko"?null:f.data;default:return null}}var Sn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ln(A){var f=A&&A.nodeName&&A.nodeName.toLowerCase();return f==="input"?!!Sn[A.type]:f==="textarea"}function po(A,f,p,w){Mo?uo?uo.push(w):uo=[w]:Mo=w,f=av(f,"onChange"),0<f.length&&(p=new hl("onChange","change",null,p,w),A.push({event:p,listeners:f}))}var _s=null,wi=null;function yl(A){NB(A,0)}function qc(A){var f=Ke(A);if(Vu(f))return A}function ed(A,f){if(A==="change")return f}var Wu=!1;if(xi){var Ws;if(xi){var Kc="oninput"in document;if(!Kc){var Yu=document.createElement("div");Yu.setAttribute("oninput","return;"),Kc=typeof Yu.oninput=="function"}Ws=Kc}else Ws=!1;Wu=Ws&&(!document.documentMode||9<document.documentMode)}function Xu(){_s&&(_s.detachEvent("onpropertychange",td),wi=_s=null)}function td(A){if(A.propertyName==="value"&&qc(wi)){var f=[];po(f,wi,A,On(A)),XA(yl,f)}}function bi(A,f,p){A==="focusin"?(Xu(),_s=f,wi=p,_s.attachEvent("onpropertychange",td)):A==="focusout"&&Xu()}function Ap(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return qc(wi)}function Df(A,f){if(A==="click")return qc(f)}function e0(A,f){if(A==="input"||A==="change")return qc(f)}function go(A,f){return A===f&&(A!==0||1/A===1/f)||A!==A&&f!==f}var pa=typeof Object.is=="function"?Object.is:go;function $c(A,f){if(pa(A,f))return!0;if(typeof A!="object"||A===null||typeof f!="object"||f===null)return!1;var p=Object.keys(A),w=Object.keys(f);if(p.length!==w.length)return!1;for(w=0;w<p.length;w++){var F=p[w];if(!oe.call(f,F)||!pa(A[F],f[F]))return!1}return!0}function Rf(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function sc(A,f){var p=Rf(A);A=0;for(var w;p;){if(p.nodeType===3){if(w=A+p.textContent.length,A<=f&&w>=f)return{node:p,offset:f-A};A=w}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=Rf(p)}}function Wc(A,f){return A&&f?A===f?!0:A&&A.nodeType===3?!1:f&&f.nodeType===3?Wc(A,f.parentNode):"contains"in A?A.contains(f):A.compareDocumentPosition?!!(A.compareDocumentPosition(f)&16):!1:!1}function ti(A){A=A!=null&&A.ownerDocument!=null&&A.ownerDocument.defaultView!=null?A.ownerDocument.defaultView:window;for(var f=ka(A.document);f instanceof A.HTMLIFrameElement;){try{var p=typeof f.contentWindow.location.href=="string"}catch{p=!1}if(p)A=f.contentWindow;else break;f=ka(A.document)}return f}function Da(A){var f=A&&A.nodeName&&A.nodeName.toLowerCase();return f&&(f==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||f==="textarea"||A.contentEditable==="true")}var Yc=xi&&"documentMode"in document&&11>=document.documentMode,Ci=null,Qo=null,wl=null,Ho=!1;function gs(A,f,p){var w=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Ho||Ci==null||Ci!==ka(w)||(w=Ci,"selectionStart"in w&&Da(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),wl&&$c(wl,w)||(wl=w,w=av(Qo,"onSelect"),0<w.length&&(f=new hl("onSelect","select",null,f,p),A.push({event:f,listeners:w}),f.target=Ci)))}function Vo(A,f){var p={};return p[A.toLowerCase()]=f.toLowerCase(),p["Webkit"+A]="webkit"+f,p["Moz"+A]="moz"+f,p}var Ps={animationend:Vo("Animation","AnimationEnd"),animationiteration:Vo("Animation","AnimationIteration"),animationstart:Vo("Animation","AnimationStart"),transitionrun:Vo("Transition","TransitionRun"),transitionstart:Vo("Transition","TransitionStart"),transitioncancel:Vo("Transition","TransitionCancel"),transitionend:Vo("Transition","TransitionEnd")},Ei={},Ju={};xi&&(Ju=document.createElement("div").style,"AnimationEvent"in window||(delete Ps.animationend.animation,delete Ps.animationiteration.animation,delete Ps.animationstart.animation),"TransitionEvent"in window||delete Ps.transitionend.transition);function bl(A){if(Ei[A])return Ei[A];if(!Ps[A])return A;var f=Ps[A],p;for(p in f)if(f.hasOwnProperty(p)&&p in Ju)return Ei[A]=f[p];return A}var rd=bl("animationend"),Xc=bl("animationiteration"),Jc=bl("animationstart"),Zc=bl("transitionrun"),Zu=bl("transitionstart"),nd=bl("transitioncancel"),eu=bl("transitionend"),ac=new Map,eA="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");eA.push("scrollEnd");function xs(A,f){ac.set(A,f),yt(f,[A])}var Ji=new WeakMap;function $r(A,f){if(typeof A=="object"&&A!==null){var p=Ji.get(A);return p!==void 0?p:(f={value:A,source:f,stack:Xn(f)},Ji.set(A,f),f)}return{value:A,source:f,stack:Xn(f)}}var Wr=[],Jn=0,Ss=0;function xo(){for(var A=Jn,f=Ss=Jn=0;f<A;){var p=Wr[f];Wr[f++]=null;var w=Wr[f];Wr[f++]=null;var F=Wr[f];Wr[f++]=null;var H=Wr[f];if(Wr[f++]=null,w!==null&&F!==null){var le=w.pending;le===null?F.next=F:(F.next=le.next,le.next=F),w.pending=F}H!==0&&t0(p,F,H)}}function tu(A,f,p,w){Wr[Jn++]=A,Wr[Jn++]=f,Wr[Jn++]=p,Wr[Jn++]=w,Ss|=w,A.lanes|=w,A=A.alternate,A!==null&&(A.lanes|=w)}function ru(A,f,p,w){return tu(A,f,p,w),tA(A)}function ic(A,f){return tu(A,null,null,f),tA(A)}function t0(A,f,p){A.lanes|=p;var w=A.alternate;w!==null&&(w.lanes|=p);for(var F=!1,H=A.return;H!==null;)H.childLanes|=p,w=H.alternate,w!==null&&(w.childLanes|=p),H.tag===22&&(A=H.stateNode,A===null||A._visibility&1||(F=!0)),A=H,H=H.return;return A.tag===3?(H=A.stateNode,F&&f!==null&&(F=31-Lt(p),A=H.hiddenUpdates,w=A[F],w===null?A[F]=[f]:w.push(f),f.lane=p|536870912),H):null}function tA(A){if(50<Up)throw Up=0,lC=null,Error(n(185));for(var f=A.return;f!==null;)A=f,f=A.return;return A.tag===3?A.stateNode:null}var ga={};function vo(A,f,p,w){this.tag=A,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Va(A,f,p,w){return new vo(A,f,p,w)}function sd(A){return A=A.prototype,!(!A||!A.isReactComponent)}function Cl(A,f){var p=A.alternate;return p===null?(p=Va(A.tag,f,A.key,A.mode),p.elementType=A.elementType,p.type=A.type,p.stateNode=A.stateNode,p.alternate=A,A.alternate=p):(p.pendingProps=f,p.type=A.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=A.flags&65011712,p.childLanes=A.childLanes,p.lanes=A.lanes,p.child=A.child,p.memoizedProps=A.memoizedProps,p.memoizedState=A.memoizedState,p.updateQueue=A.updateQueue,f=A.dependencies,p.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},p.sibling=A.sibling,p.index=A.index,p.ref=A.ref,p.refCleanup=A.refCleanup,p}function Lf(A,f){A.flags&=65011714;var p=A.alternate;return p===null?(A.childLanes=0,A.lanes=f,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=p.childLanes,A.lanes=p.lanes,A.child=p.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=p.memoizedProps,A.memoizedState=p.memoizedState,A.updateQueue=p.updateQueue,A.type=p.type,f=p.dependencies,A.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),A}function rA(A,f,p,w,F,H){var le=0;if(w=A,typeof A=="function")sd(A)&&(le=1);else if(typeof A=="string")le=U9(A,p,Z.current)?26:A==="html"||A==="head"||A==="body"?27:5;else e:switch(A){case B:return A=Va(31,p,f,F),A.elementType=B,A.lanes=H,A;case b:return oc(p.children,F,H,f);case y:le=8,F|=24;break;case _:return A=Va(12,p,f,F|2),A.elementType=_,A.lanes=H,A;case j:return A=Va(13,p,f,F),A.elementType=j,A.lanes=H,A;case L:return A=Va(19,p,f,F),A.elementType=L,A.lanes=H,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case N:case R:le=10;break e;case k:le=9;break e;case M:le=11;break e;case C:le=14;break e;case E:le=16,w=null;break e}le=29,p=Error(n(130,A===null?"null":typeof A,"")),w=null}return f=Va(le,p,f,F),f.elementType=A,f.type=w,f.lanes=H,f}function oc(A,f,p,w){return A=Va(7,A,w,f),A.lanes=p,A}function r0(A,f,p){return A=Va(6,A,null,f),A.lanes=p,A}function Uf(A,f,p){return f=Va(4,A.children!==null?A.children:[],A.key,f),f.lanes=p,f.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},f}var nu=[],lc=0,ad=null,n0=0,yo=[],Zi=0,nA=null,cc=1,uc="";function sA(A,f){nu[lc++]=n0,nu[lc++]=ad,ad=A,n0=f}function C1(A,f,p){yo[Zi++]=cc,yo[Zi++]=uc,yo[Zi++]=nA,nA=A;var w=cc;A=uc;var F=32-Lt(w)-1;w&=~(1<<F),p+=1;var H=32-Lt(f)+F;if(30<H){var le=F-F%5;H=(w&(1<<le)-1).toString(32),w>>=le,F-=le,cc=1<<32-Lt(f)+F|p<<F|w,uc=H+A}else cc=1<<H|p<<F|w,uc=A}function Mf(A){A.return!==null&&(sA(A,1),C1(A,1,0))}function Pf(A){for(;A===ad;)ad=nu[--lc],nu[lc]=null,n0=nu[--lc],nu[lc]=null;for(;A===nA;)nA=yo[--Zi],yo[Zi]=null,uc=yo[--Zi],yo[Zi]=null,cc=yo[--Zi],yo[Zi]=null}var Ys=null,vs=null,bn=!1,su=null,El=!1,dp=Error(n(519));function aA(A){var f=Error(n(418,""));throw id($r(f,A)),dp}function E1(A){var f=A.stateNode,p=A.type,w=A.memoizedProps;switch(f[fn]=A,f[sn]=w,p){case"dialog":on("cancel",f),on("close",f);break;case"iframe":case"object":case"embed":on("load",f);break;case"video":case"audio":for(p=0;p<Pp.length;p++)on(Pp[p],f);break;case"source":on("error",f);break;case"img":case"image":case"link":on("error",f),on("load",f);break;case"details":on("toggle",f);break;case"input":on("invalid",f),ul(f,w.value,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name,!0),cl(f);break;case"select":on("invalid",f);break;case"textarea":on("invalid",f),dl(f,w.value,w.defaultValue,w.children),cl(f)}p=w.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||f.textContent===""+p||w.suppressHydrationWarning===!0||FB(f.textContent,p)?(w.popover!=null&&(on("beforetoggle",f),on("toggle",f)),w.onScroll!=null&&on("scroll",f),w.onScrollEnd!=null&&on("scrollend",f),w.onClick!=null&&(f.onclick=iv),f=!0):f=!1,f||aA(A)}function Ac(A){for(Ys=A.return;Ys;)switch(Ys.tag){case 5:case 13:El=!1;return;case 27:case 3:El=!0;return;default:Ys=Ys.return}}function ri(A){if(A!==Ys)return!1;if(!bn)return Ac(A),bn=!0,!1;var f=A.tag,p;if((p=f!==3&&f!==27)&&((p=f===5)&&(p=A.type,p=!(p!=="form"&&p!=="button")||EC(A.type,A.memoizedProps)),p=!p),p&&vs&&aA(A),Ac(A),f===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));e:{for(A=A.nextSibling,f=0;A;){if(A.nodeType===8)if(p=A.data,p==="/$"){if(f===0){vs=vc(A.nextSibling);break e}f--}else p!=="$"&&p!=="$!"&&p!=="$?"||f++;A=A.nextSibling}vs=null}}else f===27?(f=vs,Cd(A.type)?(A=NC,NC=null,vs=A):vs=f):vs=Ys?vc(A.stateNode.nextSibling):null;return!0}function eo(){vs=Ys=null,bn=!1}function _1(){var A=su;return A!==null&&(Co===null?Co=A:Co.push.apply(Co,A),su=null),A}function id(A){su===null?su=[A]:su.push(A)}var _l=ie(null),xa=null,dc=null;function au(A,f,p){Y(_l,f._currentValue),f._currentValue=p}function Sl(A){A._currentValue=_l.current,P(_l)}function s0(A,f,p){for(;A!==null;){var w=A.alternate;if((A.childLanes&f)!==f?(A.childLanes|=f,w!==null&&(w.childLanes|=f)):w!==null&&(w.childLanes&f)!==f&&(w.childLanes|=f),A===p)break;A=A.return}}function a0(A,f,p,w){var F=A.child;for(F!==null&&(F.return=A);F!==null;){var H=F.dependencies;if(H!==null){var le=F.child;H=H.firstContext;e:for(;H!==null;){var we=H;H=F;for(var De=0;De<f.length;De++)if(we.context===f[De]){H.lanes|=p,we=H.alternate,we!==null&&(we.lanes|=p),s0(H.return,p,A),w||(le=null);break e}H=we.next}}else if(F.tag===18){if(le=F.return,le===null)throw Error(n(341));le.lanes|=p,H=le.alternate,H!==null&&(H.lanes|=p),s0(le,p,A),le=null}else le=F.child;if(le!==null)le.return=F;else for(le=F;le!==null;){if(le===A){le=null;break}if(F=le.sibling,F!==null){F.return=le.return,le=F;break}le=le.return}F=le}}function od(A,f,p,w){A=null;for(var F=f,H=!1;F!==null;){if(!H){if((F.flags&524288)!==0)H=!0;else if((F.flags&262144)!==0)break}if(F.tag===10){var le=F.alternate;if(le===null)throw Error(n(387));if(le=le.memoizedProps,le!==null){var we=F.type;pa(F.pendingProps.value,le.value)||(A!==null?A.push(we):A=[we])}}else if(F===Ee.current){if(le=F.alternate,le===null)throw Error(n(387));le.memoizedState.memoizedState!==F.memoizedState.memoizedState&&(A!==null?A.push(Gp):A=[Gp])}F=F.return}A!==null&&a0(f,A,p,w),f.flags|=262144}function i0(A){for(A=A.firstContext;A!==null;){if(!pa(A.context._currentValue,A.memoizedValue))return!0;A=A.next}return!1}function Tl(A){xa=A,dc=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function Xs(A){return o0(xa,A)}function iu(A,f){return xa===null&&Tl(A),o0(A,f)}function o0(A,f){var p=f._currentValue;if(f={context:f,memoizedValue:p,next:null},dc===null){if(A===null)throw Error(n(308));dc=f,A.dependencies={lanes:0,firstContext:f},A.flags|=524288}else dc=dc.next=f;return p}var Db=typeof AbortController<"u"?AbortController:function(){var A=[],f=this.signal={aborted:!1,addEventListener:function(p,w){A.push(w)}};this.abort=function(){f.aborted=!0,A.forEach(function(p){return p()})}},S1=t.unstable_scheduleCallback,Rb=t.unstable_NormalPriority,Js={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fp(){return{controller:new Db,data:new Map,refCount:0}}function jf(A){A.refCount--,A.refCount===0&&S1(Rb,function(){A.controller.abort()})}var Of=null,hp=0,iA=0,fc=null;function Lb(A,f){if(Of===null){var p=Of=[];hp=0,iA=mC(),fc={status:"pending",value:void 0,then:function(w){p.push(w)}}}return hp++,f.then(T1,T1),f}function T1(){if(--hp===0&&Of!==null){fc!==null&&(fc.status="fulfilled");var A=Of;Of=null,iA=0,fc=null;for(var f=0;f<A.length;f++)(0,A[f])()}}function N1(A,f){var p=[],w={status:"pending",value:null,reason:null,then:function(F){p.push(F)}};return A.then(function(){w.status="fulfilled",w.value=f;for(var F=0;F<p.length;F++)(0,p[F])(f)},function(F){for(w.status="rejected",w.reason=F,F=0;F<p.length;F++)(0,p[F])(void 0)}),w}var S=J.S;J.S=function(A,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&Lb(A,f),S!==null&&S(A,f)};var U=ie(null);function K(){var A=U.current;return A!==null?A:os.pooledCache}function ne(A,f){f===null?Y(U,U.current):Y(U,f.pool)}function ue(){var A=K();return A===null?null:{parent:Js._currentValue,pool:A}}var me=Error(n(460)),ge=Error(n(474)),ve=Error(n(542)),Ce={then:function(){}};function Be(A){return A=A.status,A==="fulfilled"||A==="rejected"}function Ue(){}function Xe(A,f,p){switch(p=A[p],p===void 0?A.push(f):p!==f&&(f.then(Ue,Ue),f=p),f.status){case"fulfilled":return f.value;case"rejected":throw A=f.reason,gt(A),A;default:if(typeof f.status=="string")f.then(Ue,Ue);else{if(A=os,A!==null&&100<A.shellSuspendCounter)throw Error(n(482));A=f,A.status="pending",A.then(function(w){if(f.status==="pending"){var F=f;F.status="fulfilled",F.value=w}},function(w){if(f.status==="pending"){var F=f;F.status="rejected",F.reason=w}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw A=f.reason,gt(A),A}throw $e=f,me}}var $e=null;function Ge(){if($e===null)throw Error(n(459));var A=$e;return $e=null,A}function gt(A){if(A===me||A===ve)throw Error(n(483))}var it=!1;function Me(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Oe(A,f){A=A.updateQueue,f.updateQueue===A&&(f.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function ut(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function vt(A,f,p){var w=A.updateQueue;if(w===null)return null;if(w=w.shared,(Hn&2)!==0){var F=w.pending;return F===null?f.next=f:(f.next=F.next,F.next=f),w.pending=f,f=tA(A),t0(A,null,p),f}return tu(A,w,f,p),tA(A)}function ft(A,f,p){if(f=f.updateQueue,f!==null&&(f=f.shared,(p&4194048)!==0)){var w=f.lanes;w&=A.pendingLanes,p|=w,f.lanes=p,Gr(A,p)}}function Kt(A,f){var p=A.updateQueue,w=A.alternate;if(w!==null&&(w=w.updateQueue,p===w)){var F=null,H=null;if(p=p.firstBaseUpdate,p!==null){do{var le={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};H===null?F=H=le:H=H.next=le,p=p.next}while(p!==null);H===null?F=H=f:H=H.next=f}else F=H=f;p={baseState:w.baseState,firstBaseUpdate:F,lastBaseUpdate:H,shared:w.shared,callbacks:w.callbacks},A.updateQueue=p;return}A=p.lastBaseUpdate,A===null?p.firstBaseUpdate=f:A.next=f,p.lastBaseUpdate=f}var jt=!1;function sr(){if(jt){var A=fc;if(A!==null)throw A}}function Ht(A,f,p,w){jt=!1;var F=A.updateQueue;it=!1;var H=F.firstBaseUpdate,le=F.lastBaseUpdate,we=F.shared.pending;if(we!==null){F.shared.pending=null;var De=we,tt=De.next;De.next=null,le===null?H=tt:le.next=tt,le=De;var dt=A.alternate;dt!==null&&(dt=dt.updateQueue,we=dt.lastBaseUpdate,we!==le&&(we===null?dt.firstBaseUpdate=tt:we.next=tt,dt.lastBaseUpdate=De))}if(H!==null){var wt=F.baseState;le=0,dt=tt=De=null,we=H;do{var nt=we.lane&-536870913,at=nt!==we.lane;if(at?(yn&nt)===nt:(w&nt)===nt){nt!==0&&nt===iA&&(jt=!0),dt!==null&&(dt=dt.next={lane:0,tag:we.tag,payload:we.payload,callback:null,next:null});e:{var Nr=A,pr=we;nt=f;var es=p;switch(pr.tag){case 1:if(Nr=pr.payload,typeof Nr=="function"){wt=Nr.call(es,wt,nt);break e}wt=Nr;break e;case 3:Nr.flags=Nr.flags&-65537|128;case 0:if(Nr=pr.payload,nt=typeof Nr=="function"?Nr.call(es,wt,nt):Nr,nt==null)break e;wt=d({},wt,nt);break e;case 2:it=!0}}nt=we.callback,nt!==null&&(A.flags|=64,at&&(A.flags|=8192),at=F.callbacks,at===null?F.callbacks=[nt]:at.push(nt))}else at={lane:nt,tag:we.tag,payload:we.payload,callback:we.callback,next:null},dt===null?(tt=dt=at,De=wt):dt=dt.next=at,le|=nt;if(we=we.next,we===null){if(we=F.shared.pending,we===null)break;at=we,we=at.next,at.next=null,F.lastBaseUpdate=at,F.shared.pending=null}}while(!0);dt===null&&(De=wt),F.baseState=De,F.firstBaseUpdate=tt,F.lastBaseUpdate=dt,H===null&&(F.shared.lanes=0),vd|=le,A.lanes=le,A.memoizedState=wt}}function xn(A,f){if(typeof A!="function")throw Error(n(191,A));A.call(f)}function Tn(A,f){var p=A.callbacks;if(p!==null)for(A.callbacks=null,A=0;A<p.length;A++)xn(p[A],f)}var qr=ie(null),Qr=ie(0);function Un(A,f){A=pA,Y(Qr,A),Y(qr,f),pA=A|f.baseLanes}function Nn(){Y(Qr,pA),Y(qr,qr.current)}function Ir(){pA=Qr.current,P(qr),P(Qr)}var Qn=0,fr=null,br=null,mn=null,vn=!1,va=!1,Zs=!1,Ts=0,Ns=0,js=null,wo=0;function Bn(){throw Error(n(321))}function Os(A,f){if(f===null)return!1;for(var p=0;p<f.length&&p<A.length;p++)if(!pa(A[p],f[p]))return!1;return!0}function Go(A,f,p,w,F,H){return Qn=H,fr=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,J.H=A===null||A.memoizedState===null?dN:fN,Zs=!1,H=p(w,F),Zs=!1,va&&(H=oA(f,p,w,F)),ou(A),H}function ou(A){J.H=O1;var f=br!==null&&br.next!==null;if(Qn=0,mn=br=fr=null,vn=!1,Ns=0,js=null,f)throw Error(n(300));A===null||Ga||(A=A.dependencies,A!==null&&i0(A)&&(Ga=!0))}function oA(A,f,p,w){fr=A;var F=0;do{if(va&&(js=null),Ns=0,va=!1,25<=F)throw Error(n(301));if(F+=1,mn=br=null,A.updateQueue!=null){var H=A.updateQueue;H.lastEffect=null,H.events=null,H.stores=null,H.memoCache!=null&&(H.memoCache.index=0)}J.H=KH,H=f(p,w)}while(va);return H}function lu(){var A=J.H,f=A.useState()[0];return f=typeof f.then=="function"?cu(f):f,A=A.useState()[0],(br!==null?br.memoizedState:null)!==A&&(fr.flags|=1024),f}function is(){var A=Ts!==0;return Ts=0,A}function Qf(A,f,p){f.updateQueue=A.updateQueue,f.flags&=-2053,A.lanes&=~p}function l0(A){if(vn){for(A=A.memoizedState;A!==null;){var f=A.queue;f!==null&&(f.pending=null),A=A.next}vn=!1}Qn=0,mn=br=fr=null,va=!1,Ns=Ts=0,js=null}function ni(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mn===null?fr.memoizedState=mn=A:mn=mn.next=A,mn}function us(){if(br===null){var A=fr.alternate;A=A!==null?A.memoizedState:null}else A=br.next;var f=mn===null?fr.memoizedState:mn.next;if(f!==null)mn=f,br=A;else{if(A===null)throw fr.alternate===null?Error(n(467)):Error(n(310));br=A,A={memoizedState:br.memoizedState,baseState:br.baseState,baseQueue:br.baseQueue,queue:br.queue,next:null},mn===null?fr.memoizedState=mn=A:mn=mn.next=A}return mn}function lA(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cu(A){var f=Ns;return Ns+=1,js===null&&(js=[]),A=Xe(js,A,f),f=fr,(mn===null?f.memoizedState:mn.next)===null&&(f=f.alternate,J.H=f===null||f.memoizedState===null?dN:fN),A}function _i(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return cu(A);if(A.$$typeof===R)return Xs(A)}throw Error(n(438,String(A)))}function uu(A){var f=null,p=fr.updateQueue;if(p!==null&&(f=p.memoCache),f==null){var w=fr.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(f={data:w.data.map(function(F){return F.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),p===null&&(p=lA(),fr.updateQueue=p),p.memoCache=f,p=f.data[f.index],p===void 0)for(p=f.data[f.index]=Array(A),w=0;w<A;w++)p[w]=Q;return f.index++,p}function Si(A,f){return typeof f=="function"?f(A):f}function Hf(A){var f=us();return ld(f,br,A)}function ld(A,f,p){var w=A.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=p;var F=A.baseQueue,H=w.pending;if(H!==null){if(F!==null){var le=F.next;F.next=H.next,H.next=le}f.baseQueue=F=H,w.pending=null}if(H=A.baseState,F===null)A.memoizedState=H;else{f=F.next;var we=le=null,De=null,tt=f,dt=!1;do{var wt=tt.lane&-536870913;if(wt!==tt.lane?(yn&wt)===wt:(Qn&wt)===wt){var nt=tt.revertLane;if(nt===0)De!==null&&(De=De.next={lane:0,revertLane:0,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null}),wt===iA&&(dt=!0);else if((Qn&nt)===nt){tt=tt.next,nt===iA&&(dt=!0);continue}else wt={lane:0,revertLane:tt.revertLane,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null},De===null?(we=De=wt,le=H):De=De.next=wt,fr.lanes|=nt,vd|=nt;wt=tt.action,Zs&&p(H,wt),H=tt.hasEagerState?tt.eagerState:p(H,wt)}else nt={lane:wt,revertLane:tt.revertLane,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null},De===null?(we=De=nt,le=H):De=De.next=nt,fr.lanes|=wt,vd|=wt;tt=tt.next}while(tt!==null&&tt!==f);if(De===null?le=H:De.next=we,!pa(H,A.memoizedState)&&(Ga=!0,dt&&(p=fc,p!==null)))throw p;A.memoizedState=H,A.baseState=le,A.baseQueue=De,w.lastRenderedState=H}return F===null&&(w.lanes=0),[A.memoizedState,w.dispatch]}function c0(A){var f=us(),p=f.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=A;var w=p.dispatch,F=p.pending,H=f.memoizedState;if(F!==null){p.pending=null;var le=F=F.next;do H=A(H,le.action),le=le.next;while(le!==F);pa(H,f.memoizedState)||(Ga=!0),f.memoizedState=H,f.baseQueue===null&&(f.baseState=H),p.lastRenderedState=H}return[H,w]}function Vf(A,f,p){var w=fr,F=us(),H=bn;if(H){if(p===void 0)throw Error(n(407));p=p()}else p=f();var le=!pa((br||F).memoizedState,p);le&&(F.memoizedState=p,Ga=!0),F=F.queue;var we=cd.bind(null,w,F,A);if(dd(2048,8,we,[A]),F.getSnapshot!==f||le||mn!==null&&mn.memoizedState.tag&1){if(w.flags|=2048,mc(9,Kf(),Gf.bind(null,w,F,p,f),null),os===null)throw Error(n(349));H||(Qn&124)!==0||u0(w,f,p)}return p}function u0(A,f,p){A.flags|=16384,A={getSnapshot:f,value:p},f=fr.updateQueue,f===null?(f=lA(),fr.updateQueue=f,f.stores=[A]):(p=f.stores,p===null?f.stores=[A]:p.push(A))}function Gf(A,f,p,w){f.value=p,f.getSnapshot=w,B1(f)&&k1(A)}function cd(A,f,p){return p(function(){B1(f)&&k1(A)})}function B1(A){var f=A.getSnapshot;A=A.value;try{var p=f();return!pa(A,p)}catch{return!0}}function k1(A){var f=ic(A,2);f!==null&&Yo(f,A,2)}function zf(A){var f=ni();if(typeof A=="function"){var p=A;if(A=p(),Zs){Wt(!0);try{p()}finally{Wt(!1)}}}return f.memoizedState=f.baseState=A,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Si,lastRenderedState:A},f}function hc(A,f,p,w){return A.baseState=p,ld(A,br,typeof w=="function"?w:Si)}function Ub(A,f,p,w,F){if(j1(A))throw Error(n(485));if(A=f.action,A!==null){var H={payload:F,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(le){H.listeners.push(le)}};J.T!==null?p(!0):H.isTransition=!1,w(H),p=f.pending,p===null?(H.next=f.pending=H,I1(f,H)):(H.next=p.next,f.pending=p.next=H)}}function I1(A,f){var p=f.action,w=f.payload,F=A.state;if(f.isTransition){var H=J.T,le={};J.T=le;try{var we=p(F,w),De=J.S;De!==null&&De(le,we),F1(A,f,we)}catch(tt){ud(A,f,tt)}finally{J.T=H}}else try{H=p(F,w),F1(A,f,H)}catch(tt){ud(A,f,tt)}}function F1(A,f,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(w){mp(A,f,w)},function(w){return ud(A,f,w)}):mp(A,f,p)}function mp(A,f,p){f.status="fulfilled",f.value=p,pp(f),A.state=p,f=A.pending,f!==null&&(p=f.next,p===f?A.pending=null:(p=p.next,f.next=p,I1(A,p)))}function ud(A,f,p){var w=A.pending;if(A.pending=null,w!==null){w=w.next;do f.status="rejected",f.reason=p,pp(f),f=f.next;while(f!==w)}A.action=null}function pp(A){A=A.listeners;for(var f=0;f<A.length;f++)(0,A[f])()}function gp(A,f){return f}function qf(A,f){if(bn){var p=os.formState;if(p!==null){e:{var w=fr;if(bn){if(vs){t:{for(var F=vs,H=El;F.nodeType!==8;){if(!H){F=null;break t}if(F=vc(F.nextSibling),F===null){F=null;break t}}H=F.data,F=H==="F!"||H==="F"?F:null}if(F){vs=vc(F.nextSibling),w=F.data==="F!";break e}}aA(w)}w=!1}w&&(f=p[0])}}return p=ni(),p.memoizedState=p.baseState=f,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gp,lastRenderedState:f},p.queue=w,p=cN.bind(null,fr,w),w.dispatch=p,w=zf(!1),H=Mb.bind(null,fr,!1,w.queue),w=ni(),F={state:f,dispatch:null,action:A,pending:null},w.queue=F,p=Ub.bind(null,fr,F,H,p),F.dispatch=p,w.memoizedState=A,[f,p,!1]}function A0(A){var f=us();return Ad(f,br,A)}function Ad(A,f,p){if(f=ld(A,f,gp)[0],A=Hf(Si)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var w=cu(f)}catch(le){throw le===me?ve:le}else w=f;f=us();var F=f.queue,H=F.dispatch;return p!==f.memoizedState&&(fr.flags|=2048,mc(9,Kf(),D1.bind(null,F,p),null)),[w,H,A]}function D1(A,f){A.action=f}function R1(A){var f=us(),p=br;if(p!==null)return Ad(f,p,A);us(),f=f.memoizedState,p=us();var w=p.queue.dispatch;return p.memoizedState=A,[f,w,!1]}function mc(A,f,p,w){return A={tag:A,create:p,deps:w,inst:f,next:null},f=fr.updateQueue,f===null&&(f=lA(),fr.updateQueue=f),p=f.lastEffect,p===null?f.lastEffect=A.next=A:(w=p.next,p.next=A,A.next=w,f.lastEffect=A),A}function Kf(){return{destroy:void 0,resource:void 0}}function d0(){return us().memoizedState}function zo(A,f,p,w){var F=ni();w=w===void 0?null:w,fr.flags|=A,F.memoizedState=mc(1|f,Kf(),p,w)}function dd(A,f,p,w){var F=us();w=w===void 0?null:w;var H=F.memoizedState.inst;br!==null&&w!==null&&Os(w,br.memoizedState.deps)?F.memoizedState=mc(f,H,p,w):(fr.flags|=A,F.memoizedState=mc(1|f,H,p,w))}function xp(A,f){zo(8390656,8,A,f)}function L1(A,f){dd(2048,8,A,f)}function vp(A,f){return dd(4,2,A,f)}function cA(A,f){return dd(4,4,A,f)}function U1(A,f){if(typeof f=="function"){A=A();var p=f(A);return function(){typeof p=="function"?p():f(null)}}if(f!=null)return A=A(),f.current=A,function(){f.current=null}}function yp(A,f,p){p=p!=null?p.concat([A]):null,dd(4,4,U1.bind(null,f,A),p)}function wp(){}function bp(A,f){var p=us();f=f===void 0?null:f;var w=p.memoizedState;return f!==null&&Os(f,w[1])?w[0]:(p.memoizedState=[A,f],A)}function M1(A,f){var p=us();f=f===void 0?null:f;var w=p.memoizedState;if(f!==null&&Os(f,w[1]))return w[0];if(w=A(),Zs){Wt(!0);try{A()}finally{Wt(!1)}}return p.memoizedState=[w,f],w}function uA(A,f,p){return p===void 0||(Qn&1073741824)!==0?A.memoizedState=f:(A.memoizedState=p,A=aB(),fr.lanes|=A,vd|=A,p)}function f0(A,f,p,w){return pa(p,f)?p:qr.current!==null?(A=uA(A,p,w),pa(A,f)||(Ga=!0),A):(Qn&42)===0?(Ga=!0,A.memoizedState=p):(A=aB(),fr.lanes|=A,vd|=A,f)}function $f(A,f,p,w,F){var H=re.p;re.p=H!==0&&8>H?H:8;var le=J.T,we={};J.T=we,Mb(A,!1,f,p);try{var De=F(),tt=J.S;if(tt!==null&&tt(we,De),De!==null&&typeof De=="object"&&typeof De.then=="function"){var dt=N1(De,w);Sp(A,f,dt,Wo(A))}else Sp(A,f,w,Wo(A))}catch(wt){Sp(A,f,{then:function(){},status:"rejected",reason:wt},Wo())}finally{re.p=H,J.T=le}}function pc(){}function Nl(A,f,p,w){if(A.tag!==5)throw Error(n(476));var F=gc(A).queue;$f(A,F,f,q,p===null?pc:function(){return Wf(A),p(w)})}function gc(A){var f=A.memoizedState;if(f!==null)return f;f={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Si,lastRenderedState:q},next:null};var p={};return f.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Si,lastRenderedState:p},next:null},A.memoizedState=f,A=A.alternate,A!==null&&(A.memoizedState=f),f}function Wf(A){var f=gc(A).next.queue;Sp(A,f,{},Wo())}function Yf(){return Xs(Gp)}function Cp(){return us().memoizedState}function P1(){return us().memoizedState}function Ep(A){for(var f=A.return;f!==null;){switch(f.tag){case 24:case 3:var p=Wo();A=ut(p);var w=vt(f,A,p);w!==null&&(Yo(w,f,p),ft(w,f,p)),f={cache:fp()},A.payload=f;return}f=f.return}}function _p(A,f,p){var w=Wo();p={lane:w,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},j1(A)?uN(f,p):(p=ru(A,f,p,w),p!==null&&(Yo(p,A,w),AN(p,f,w)))}function cN(A,f,p){var w=Wo();Sp(A,f,p,w)}function Sp(A,f,p,w){var F={lane:w,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(j1(A))uN(f,F);else{var H=A.alternate;if(A.lanes===0&&(H===null||H.lanes===0)&&(H=f.lastRenderedReducer,H!==null))try{var le=f.lastRenderedState,we=H(le,p);if(F.hasEagerState=!0,F.eagerState=we,pa(we,le))return tu(A,f,F,0),os===null&&xo(),!1}catch{}finally{}if(p=ru(A,f,F,w),p!==null)return Yo(p,A,w),AN(p,f,w),!0}return!1}function Mb(A,f,p,w){if(w={lane:2,revertLane:mC(),action:w,hasEagerState:!1,eagerState:null,next:null},j1(A)){if(f)throw Error(n(479))}else f=ru(A,p,w,2),f!==null&&Yo(f,A,2)}function j1(A){var f=A.alternate;return A===fr||f!==null&&f===fr}function uN(A,f){va=vn=!0;var p=A.pending;p===null?f.next=f:(f.next=p.next,p.next=f),A.pending=f}function AN(A,f,p){if((p&4194048)!==0){var w=f.lanes;w&=A.pendingLanes,p|=w,f.lanes=p,Gr(A,p)}}var O1={readContext:Xs,use:_i,useCallback:Bn,useContext:Bn,useEffect:Bn,useImperativeHandle:Bn,useLayoutEffect:Bn,useInsertionEffect:Bn,useMemo:Bn,useReducer:Bn,useRef:Bn,useState:Bn,useDebugValue:Bn,useDeferredValue:Bn,useTransition:Bn,useSyncExternalStore:Bn,useId:Bn,useHostTransitionStatus:Bn,useFormState:Bn,useActionState:Bn,useOptimistic:Bn,useMemoCache:Bn,useCacheRefresh:Bn},dN={readContext:Xs,use:_i,useCallback:function(A,f){return ni().memoizedState=[A,f===void 0?null:f],A},useContext:Xs,useEffect:xp,useImperativeHandle:function(A,f,p){p=p!=null?p.concat([A]):null,zo(4194308,4,U1.bind(null,f,A),p)},useLayoutEffect:function(A,f){return zo(4194308,4,A,f)},useInsertionEffect:function(A,f){zo(4,2,A,f)},useMemo:function(A,f){var p=ni();f=f===void 0?null:f;var w=A();if(Zs){Wt(!0);try{A()}finally{Wt(!1)}}return p.memoizedState=[w,f],w},useReducer:function(A,f,p){var w=ni();if(p!==void 0){var F=p(f);if(Zs){Wt(!0);try{p(f)}finally{Wt(!1)}}}else F=f;return w.memoizedState=w.baseState=F,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:F},w.queue=A,A=A.dispatch=_p.bind(null,fr,A),[w.memoizedState,A]},useRef:function(A){var f=ni();return A={current:A},f.memoizedState=A},useState:function(A){A=zf(A);var f=A.queue,p=cN.bind(null,fr,f);return f.dispatch=p,[A.memoizedState,p]},useDebugValue:wp,useDeferredValue:function(A,f){var p=ni();return uA(p,A,f)},useTransition:function(){var A=zf(!1);return A=$f.bind(null,fr,A.queue,!0,!1),ni().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,f,p){var w=fr,F=ni();if(bn){if(p===void 0)throw Error(n(407));p=p()}else{if(p=f(),os===null)throw Error(n(349));(yn&124)!==0||u0(w,f,p)}F.memoizedState=p;var H={value:p,getSnapshot:f};return F.queue=H,xp(cd.bind(null,w,H,A),[A]),w.flags|=2048,mc(9,Kf(),Gf.bind(null,w,H,p,f),null),p},useId:function(){var A=ni(),f=os.identifierPrefix;if(bn){var p=uc,w=cc;p=(w&~(1<<32-Lt(w)-1)).toString(32)+p,f="«"+f+"R"+p,p=Ts++,0<p&&(f+="H"+p.toString(32)),f+="»"}else p=wo++,f="«"+f+"r"+p.toString(32)+"»";return A.memoizedState=f},useHostTransitionStatus:Yf,useFormState:qf,useActionState:qf,useOptimistic:function(A){var f=ni();f.memoizedState=f.baseState=A;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=p,f=Mb.bind(null,fr,!0,p),p.dispatch=f,[A,f]},useMemoCache:uu,useCacheRefresh:function(){return ni().memoizedState=Ep.bind(null,fr)}},fN={readContext:Xs,use:_i,useCallback:bp,useContext:Xs,useEffect:L1,useImperativeHandle:yp,useInsertionEffect:vp,useLayoutEffect:cA,useMemo:M1,useReducer:Hf,useRef:d0,useState:function(){return Hf(Si)},useDebugValue:wp,useDeferredValue:function(A,f){var p=us();return f0(p,br.memoizedState,A,f)},useTransition:function(){var A=Hf(Si)[0],f=us().memoizedState;return[typeof A=="boolean"?A:cu(A),f]},useSyncExternalStore:Vf,useId:Cp,useHostTransitionStatus:Yf,useFormState:A0,useActionState:A0,useOptimistic:function(A,f){var p=us();return hc(p,br,A,f)},useMemoCache:uu,useCacheRefresh:P1},KH={readContext:Xs,use:_i,useCallback:bp,useContext:Xs,useEffect:L1,useImperativeHandle:yp,useInsertionEffect:vp,useLayoutEffect:cA,useMemo:M1,useReducer:c0,useRef:d0,useState:function(){return c0(Si)},useDebugValue:wp,useDeferredValue:function(A,f){var p=us();return br===null?uA(p,A,f):f0(p,br.memoizedState,A,f)},useTransition:function(){var A=c0(Si)[0],f=us().memoizedState;return[typeof A=="boolean"?A:cu(A),f]},useSyncExternalStore:Vf,useId:Cp,useHostTransitionStatus:Yf,useFormState:R1,useActionState:R1,useOptimistic:function(A,f){var p=us();return br!==null?hc(p,br,A,f):(p.baseState=A,[A,p.queue.dispatch])},useMemoCache:uu,useCacheRefresh:P1},h0=null,Tp=0;function Q1(A){var f=Tp;return Tp+=1,h0===null&&(h0=[]),Xe(h0,A,f)}function Np(A,f){f=f.props.ref,A.ref=f!==void 0?f:null}function H1(A,f){throw f.$$typeof===h?Error(n(525)):(A=Object.prototype.toString.call(f),Error(n(31,A==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":A)))}function hN(A){var f=A._init;return f(A._payload)}function mN(A){function f(ze,Pe){if(A){var Ye=ze.deletions;Ye===null?(ze.deletions=[Pe],ze.flags|=16):Ye.push(Pe)}}function p(ze,Pe){if(!A)return null;for(;Pe!==null;)f(ze,Pe),Pe=Pe.sibling;return null}function w(ze){for(var Pe=new Map;ze!==null;)ze.key!==null?Pe.set(ze.key,ze):Pe.set(ze.index,ze),ze=ze.sibling;return Pe}function F(ze,Pe){return ze=Cl(ze,Pe),ze.index=0,ze.sibling=null,ze}function H(ze,Pe,Ye){return ze.index=Ye,A?(Ye=ze.alternate,Ye!==null?(Ye=Ye.index,Ye<Pe?(ze.flags|=67108866,Pe):Ye):(ze.flags|=67108866,Pe)):(ze.flags|=1048576,Pe)}function le(ze){return A&&ze.alternate===null&&(ze.flags|=67108866),ze}function we(ze,Pe,Ye,pt){return Pe===null||Pe.tag!==6?(Pe=r0(Ye,ze.mode,pt),Pe.return=ze,Pe):(Pe=F(Pe,Ye),Pe.return=ze,Pe)}function De(ze,Pe,Ye,pt){var tr=Ye.type;return tr===b?dt(ze,Pe,Ye.props.children,pt,Ye.key):Pe!==null&&(Pe.elementType===tr||typeof tr=="object"&&tr!==null&&tr.$$typeof===E&&hN(tr)===Pe.type)?(Pe=F(Pe,Ye.props),Np(Pe,Ye),Pe.return=ze,Pe):(Pe=rA(Ye.type,Ye.key,Ye.props,null,ze.mode,pt),Np(Pe,Ye),Pe.return=ze,Pe)}function tt(ze,Pe,Ye,pt){return Pe===null||Pe.tag!==4||Pe.stateNode.containerInfo!==Ye.containerInfo||Pe.stateNode.implementation!==Ye.implementation?(Pe=Uf(Ye,ze.mode,pt),Pe.return=ze,Pe):(Pe=F(Pe,Ye.children||[]),Pe.return=ze,Pe)}function dt(ze,Pe,Ye,pt,tr){return Pe===null||Pe.tag!==7?(Pe=oc(Ye,ze.mode,pt,tr),Pe.return=ze,Pe):(Pe=F(Pe,Ye),Pe.return=ze,Pe)}function wt(ze,Pe,Ye){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return Pe=r0(""+Pe,ze.mode,Ye),Pe.return=ze,Pe;if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case m:return Ye=rA(Pe.type,Pe.key,Pe.props,null,ze.mode,Ye),Np(Ye,Pe),Ye.return=ze,Ye;case g:return Pe=Uf(Pe,ze.mode,Ye),Pe.return=ze,Pe;case E:var pt=Pe._init;return Pe=pt(Pe._payload),wt(ze,Pe,Ye)}if(se(Pe)||I(Pe))return Pe=oc(Pe,ze.mode,Ye,null),Pe.return=ze,Pe;if(typeof Pe.then=="function")return wt(ze,Q1(Pe),Ye);if(Pe.$$typeof===R)return wt(ze,iu(ze,Pe),Ye);H1(ze,Pe)}return null}function nt(ze,Pe,Ye,pt){var tr=Pe!==null?Pe.key:null;if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint")return tr!==null?null:we(ze,Pe,""+Ye,pt);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case m:return Ye.key===tr?De(ze,Pe,Ye,pt):null;case g:return Ye.key===tr?tt(ze,Pe,Ye,pt):null;case E:return tr=Ye._init,Ye=tr(Ye._payload),nt(ze,Pe,Ye,pt)}if(se(Ye)||I(Ye))return tr!==null?null:dt(ze,Pe,Ye,pt,null);if(typeof Ye.then=="function")return nt(ze,Pe,Q1(Ye),pt);if(Ye.$$typeof===R)return nt(ze,Pe,iu(ze,Ye),pt);H1(ze,Ye)}return null}function at(ze,Pe,Ye,pt,tr){if(typeof pt=="string"&&pt!==""||typeof pt=="number"||typeof pt=="bigint")return ze=ze.get(Ye)||null,we(Pe,ze,""+pt,tr);if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case m:return ze=ze.get(pt.key===null?Ye:pt.key)||null,De(Pe,ze,pt,tr);case g:return ze=ze.get(pt.key===null?Ye:pt.key)||null,tt(Pe,ze,pt,tr);case E:var en=pt._init;return pt=en(pt._payload),at(ze,Pe,Ye,pt,tr)}if(se(pt)||I(pt))return ze=ze.get(Ye)||null,dt(Pe,ze,pt,tr,null);if(typeof pt.then=="function")return at(ze,Pe,Ye,Q1(pt),tr);if(pt.$$typeof===R)return at(ze,Pe,Ye,iu(Pe,pt),tr);H1(Pe,pt)}return null}function Nr(ze,Pe,Ye,pt){for(var tr=null,en=null,ir=Pe,xr=Pe=0,qa=null;ir!==null&&xr<Ye.length;xr++){ir.index>xr?(qa=ir,ir=null):qa=ir.sibling;var kn=nt(ze,ir,Ye[xr],pt);if(kn===null){ir===null&&(ir=qa);break}A&&ir&&kn.alternate===null&&f(ze,ir),Pe=H(kn,Pe,xr),en===null?tr=kn:en.sibling=kn,en=kn,ir=qa}if(xr===Ye.length)return p(ze,ir),bn&&sA(ze,xr),tr;if(ir===null){for(;xr<Ye.length;xr++)ir=wt(ze,Ye[xr],pt),ir!==null&&(Pe=H(ir,Pe,xr),en===null?tr=ir:en.sibling=ir,en=ir);return bn&&sA(ze,xr),tr}for(ir=w(ir);xr<Ye.length;xr++)qa=at(ir,ze,xr,Ye[xr],pt),qa!==null&&(A&&qa.alternate!==null&&ir.delete(qa.key===null?xr:qa.key),Pe=H(qa,Pe,xr),en===null?tr=qa:en.sibling=qa,en=qa);return A&&ir.forEach(function(Nd){return f(ze,Nd)}),bn&&sA(ze,xr),tr}function pr(ze,Pe,Ye,pt){if(Ye==null)throw Error(n(151));for(var tr=null,en=null,ir=Pe,xr=Pe=0,qa=null,kn=Ye.next();ir!==null&&!kn.done;xr++,kn=Ye.next()){ir.index>xr?(qa=ir,ir=null):qa=ir.sibling;var Nd=nt(ze,ir,kn.value,pt);if(Nd===null){ir===null&&(ir=qa);break}A&&ir&&Nd.alternate===null&&f(ze,ir),Pe=H(Nd,Pe,xr),en===null?tr=Nd:en.sibling=Nd,en=Nd,ir=qa}if(kn.done)return p(ze,ir),bn&&sA(ze,xr),tr;if(ir===null){for(;!kn.done;xr++,kn=Ye.next())kn=wt(ze,kn.value,pt),kn!==null&&(Pe=H(kn,Pe,xr),en===null?tr=kn:en.sibling=kn,en=kn);return bn&&sA(ze,xr),tr}for(ir=w(ir);!kn.done;xr++,kn=Ye.next())kn=at(ir,ze,xr,kn.value,pt),kn!==null&&(A&&kn.alternate!==null&&ir.delete(kn.key===null?xr:kn.key),Pe=H(kn,Pe,xr),en===null?tr=kn:en.sibling=kn,en=kn);return A&&ir.forEach(function($9){return f(ze,$9)}),bn&&sA(ze,xr),tr}function es(ze,Pe,Ye,pt){if(typeof Ye=="object"&&Ye!==null&&Ye.type===b&&Ye.key===null&&(Ye=Ye.props.children),typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case m:e:{for(var tr=Ye.key;Pe!==null;){if(Pe.key===tr){if(tr=Ye.type,tr===b){if(Pe.tag===7){p(ze,Pe.sibling),pt=F(Pe,Ye.props.children),pt.return=ze,ze=pt;break e}}else if(Pe.elementType===tr||typeof tr=="object"&&tr!==null&&tr.$$typeof===E&&hN(tr)===Pe.type){p(ze,Pe.sibling),pt=F(Pe,Ye.props),Np(pt,Ye),pt.return=ze,ze=pt;break e}p(ze,Pe);break}else f(ze,Pe);Pe=Pe.sibling}Ye.type===b?(pt=oc(Ye.props.children,ze.mode,pt,Ye.key),pt.return=ze,ze=pt):(pt=rA(Ye.type,Ye.key,Ye.props,null,ze.mode,pt),Np(pt,Ye),pt.return=ze,ze=pt)}return le(ze);case g:e:{for(tr=Ye.key;Pe!==null;){if(Pe.key===tr)if(Pe.tag===4&&Pe.stateNode.containerInfo===Ye.containerInfo&&Pe.stateNode.implementation===Ye.implementation){p(ze,Pe.sibling),pt=F(Pe,Ye.children||[]),pt.return=ze,ze=pt;break e}else{p(ze,Pe);break}else f(ze,Pe);Pe=Pe.sibling}pt=Uf(Ye,ze.mode,pt),pt.return=ze,ze=pt}return le(ze);case E:return tr=Ye._init,Ye=tr(Ye._payload),es(ze,Pe,Ye,pt)}if(se(Ye))return Nr(ze,Pe,Ye,pt);if(I(Ye)){if(tr=I(Ye),typeof tr!="function")throw Error(n(150));return Ye=tr.call(Ye),pr(ze,Pe,Ye,pt)}if(typeof Ye.then=="function")return es(ze,Pe,Q1(Ye),pt);if(Ye.$$typeof===R)return es(ze,Pe,iu(ze,Ye),pt);H1(ze,Ye)}return typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint"?(Ye=""+Ye,Pe!==null&&Pe.tag===6?(p(ze,Pe.sibling),pt=F(Pe,Ye),pt.return=ze,ze=pt):(p(ze,Pe),pt=r0(Ye,ze.mode,pt),pt.return=ze,ze=pt),le(ze)):p(ze,Pe)}return function(ze,Pe,Ye,pt){try{Tp=0;var tr=es(ze,Pe,Ye,pt);return h0=null,tr}catch(ir){if(ir===me||ir===ve)throw ir;var en=Va(29,ir,null,ze.mode);return en.lanes=pt,en.return=ze,en}finally{}}}var m0=mN(!0),pN=mN(!1),Bl=ie(null),Au=null;function fd(A){var f=A.alternate;Y(Ra,Ra.current&1),Y(Bl,A),Au===null&&(f===null||qr.current!==null||f.memoizedState!==null)&&(Au=A)}function gN(A){if(A.tag===22){if(Y(Ra,Ra.current),Y(Bl,A),Au===null){var f=A.alternate;f!==null&&f.memoizedState!==null&&(Au=A)}}else hd()}function hd(){Y(Ra,Ra.current),Y(Bl,Bl.current)}function AA(A){P(Bl),Au===A&&(Au=null),P(Ra)}var Ra=ie(0);function V1(A){for(var f=A;f!==null;){if(f.tag===13){var p=f.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||TC(p)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===A)break;for(;f.sibling===null;){if(f.return===null||f.return===A)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function Pb(A,f,p,w){f=A.memoizedState,p=p(w,f),p=p==null?f:d({},f,p),A.memoizedState=p,A.lanes===0&&(A.updateQueue.baseState=p)}var jb={enqueueSetState:function(A,f,p){A=A._reactInternals;var w=Wo(),F=ut(w);F.payload=f,p!=null&&(F.callback=p),f=vt(A,F,w),f!==null&&(Yo(f,A,w),ft(f,A,w))},enqueueReplaceState:function(A,f,p){A=A._reactInternals;var w=Wo(),F=ut(w);F.tag=1,F.payload=f,p!=null&&(F.callback=p),f=vt(A,F,w),f!==null&&(Yo(f,A,w),ft(f,A,w))},enqueueForceUpdate:function(A,f){A=A._reactInternals;var p=Wo(),w=ut(p);w.tag=2,f!=null&&(w.callback=f),f=vt(A,w,p),f!==null&&(Yo(f,A,p),ft(f,A,p))}};function xN(A,f,p,w,F,H,le){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(w,H,le):f.prototype&&f.prototype.isPureReactComponent?!$c(p,w)||!$c(F,H):!0}function vN(A,f,p,w){A=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(p,w),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(p,w),f.state!==A&&jb.enqueueReplaceState(f,f.state,null)}function Xf(A,f){var p=f;if("ref"in f){p={};for(var w in f)w!=="ref"&&(p[w]=f[w])}if(A=A.defaultProps){p===f&&(p=d({},p));for(var F in A)p[F]===void 0&&(p[F]=A[F])}return p}var G1=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function yN(A){G1(A)}function wN(A){console.error(A)}function bN(A){G1(A)}function z1(A,f){try{var p=A.onUncaughtError;p(f.value,{componentStack:f.stack})}catch(w){setTimeout(function(){throw w})}}function CN(A,f,p){try{var w=A.onCaughtError;w(p.value,{componentStack:p.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(F){setTimeout(function(){throw F})}}function Ob(A,f,p){return p=ut(p),p.tag=3,p.payload={element:null},p.callback=function(){z1(A,f)},p}function EN(A){return A=ut(A),A.tag=3,A}function _N(A,f,p,w){var F=p.type.getDerivedStateFromError;if(typeof F=="function"){var H=w.value;A.payload=function(){return F(H)},A.callback=function(){CN(f,p,w)}}var le=p.stateNode;le!==null&&typeof le.componentDidCatch=="function"&&(A.callback=function(){CN(f,p,w),typeof F!="function"&&(yd===null?yd=new Set([this]):yd.add(this));var we=w.stack;this.componentDidCatch(w.value,{componentStack:we!==null?we:""})})}function $H(A,f,p,w,F){if(p.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(f=p.alternate,f!==null&&od(f,p,F,!0),p=Bl.current,p!==null){switch(p.tag){case 13:return Au===null?uC():p.alternate===null&&Qs===0&&(Qs=3),p.flags&=-257,p.flags|=65536,p.lanes=F,w===Ce?p.flags|=16384:(f=p.updateQueue,f===null?p.updateQueue=new Set([w]):f.add(w),dC(A,w,F)),!1;case 22:return p.flags|=65536,w===Ce?p.flags|=16384:(f=p.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([w])},p.updateQueue=f):(p=f.retryQueue,p===null?f.retryQueue=new Set([w]):p.add(w)),dC(A,w,F)),!1}throw Error(n(435,p.tag))}return dC(A,w,F),uC(),!1}if(bn)return f=Bl.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=F,w!==dp&&(A=Error(n(422),{cause:w}),id($r(A,p)))):(w!==dp&&(f=Error(n(423),{cause:w}),id($r(f,p))),A=A.current.alternate,A.flags|=65536,F&=-F,A.lanes|=F,w=$r(w,p),F=Ob(A.stateNode,w,F),Kt(A,F),Qs!==4&&(Qs=2)),!1;var H=Error(n(520),{cause:w});if(H=$r(H,p),Lp===null?Lp=[H]:Lp.push(H),Qs!==4&&(Qs=2),f===null)return!0;w=$r(w,p),p=f;do{switch(p.tag){case 3:return p.flags|=65536,A=F&-F,p.lanes|=A,A=Ob(p.stateNode,w,A),Kt(p,A),!1;case 1:if(f=p.type,H=p.stateNode,(p.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(yd===null||!yd.has(H))))return p.flags|=65536,F&=-F,p.lanes|=F,F=EN(F),_N(F,A,p,w),Kt(p,F),!1}p=p.return}while(p!==null);return!1}var SN=Error(n(461)),Ga=!1;function si(A,f,p,w){f.child=A===null?pN(f,null,p,w):m0(f,A.child,p,w)}function TN(A,f,p,w,F){p=p.render;var H=f.ref;if("ref"in w){var le={};for(var we in w)we!=="ref"&&(le[we]=w[we])}else le=w;return Tl(f),w=Go(A,f,p,le,H,F),we=is(),A!==null&&!Ga?(Qf(A,f,F),dA(A,f,F)):(bn&&we&&Mf(f),f.flags|=1,si(A,f,w,F),f.child)}function NN(A,f,p,w,F){if(A===null){var H=p.type;return typeof H=="function"&&!sd(H)&&H.defaultProps===void 0&&p.compare===null?(f.tag=15,f.type=H,BN(A,f,H,w,F)):(A=rA(p.type,null,w,f,f.mode,F),A.ref=f.ref,A.return=f,f.child=A)}if(H=A.child,!$b(A,F)){var le=H.memoizedProps;if(p=p.compare,p=p!==null?p:$c,p(le,w)&&A.ref===f.ref)return dA(A,f,F)}return f.flags|=1,A=Cl(H,w),A.ref=f.ref,A.return=f,f.child=A}function BN(A,f,p,w,F){if(A!==null){var H=A.memoizedProps;if($c(H,w)&&A.ref===f.ref)if(Ga=!1,f.pendingProps=w=H,$b(A,F))(A.flags&131072)!==0&&(Ga=!0);else return f.lanes=A.lanes,dA(A,f,F)}return Qb(A,f,p,w,F)}function kN(A,f,p){var w=f.pendingProps,F=w.children,H=A!==null?A.memoizedState:null;if(w.mode==="hidden"){if((f.flags&128)!==0){if(w=H!==null?H.baseLanes|p:p,A!==null){for(F=f.child=A.child,H=0;F!==null;)H=H|F.lanes|F.childLanes,F=F.sibling;f.childLanes=H&~w}else f.childLanes=0,f.child=null;return IN(A,f,w,p)}if((p&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},A!==null&&ne(f,H!==null?H.cachePool:null),H!==null?Un(f,H):Nn(),gN(f);else return f.lanes=f.childLanes=536870912,IN(A,f,H!==null?H.baseLanes|p:p,p)}else H!==null?(ne(f,H.cachePool),Un(f,H),hd(),f.memoizedState=null):(A!==null&&ne(f,null),Nn(),hd());return si(A,f,F,p),f.child}function IN(A,f,p,w){var F=K();return F=F===null?null:{parent:Js._currentValue,pool:F},f.memoizedState={baseLanes:p,cachePool:F},A!==null&&ne(f,null),Nn(),gN(f),A!==null&&od(A,f,w,!0),null}function q1(A,f){var p=f.ref;if(p===null)A!==null&&A.ref!==null&&(f.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(n(284));(A===null||A.ref!==p)&&(f.flags|=4194816)}}function Qb(A,f,p,w,F){return Tl(f),p=Go(A,f,p,w,void 0,F),w=is(),A!==null&&!Ga?(Qf(A,f,F),dA(A,f,F)):(bn&&w&&Mf(f),f.flags|=1,si(A,f,p,F),f.child)}function FN(A,f,p,w,F,H){return Tl(f),f.updateQueue=null,p=oA(f,w,p,F),ou(A),w=is(),A!==null&&!Ga?(Qf(A,f,H),dA(A,f,H)):(bn&&w&&Mf(f),f.flags|=1,si(A,f,p,H),f.child)}function DN(A,f,p,w,F){if(Tl(f),f.stateNode===null){var H=ga,le=p.contextType;typeof le=="object"&&le!==null&&(H=Xs(le)),H=new p(w,H),f.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,H.updater=jb,f.stateNode=H,H._reactInternals=f,H=f.stateNode,H.props=w,H.state=f.memoizedState,H.refs={},Me(f),le=p.contextType,H.context=typeof le=="object"&&le!==null?Xs(le):ga,H.state=f.memoizedState,le=p.getDerivedStateFromProps,typeof le=="function"&&(Pb(f,p,le,w),H.state=f.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(le=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),le!==H.state&&jb.enqueueReplaceState(H,H.state,null),Ht(f,w,H,F),sr(),H.state=f.memoizedState),typeof H.componentDidMount=="function"&&(f.flags|=4194308),w=!0}else if(A===null){H=f.stateNode;var we=f.memoizedProps,De=Xf(p,we);H.props=De;var tt=H.context,dt=p.contextType;le=ga,typeof dt=="object"&&dt!==null&&(le=Xs(dt));var wt=p.getDerivedStateFromProps;dt=typeof wt=="function"||typeof H.getSnapshotBeforeUpdate=="function",we=f.pendingProps!==we,dt||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(we||tt!==le)&&vN(f,H,w,le),it=!1;var nt=f.memoizedState;H.state=nt,Ht(f,w,H,F),sr(),tt=f.memoizedState,we||nt!==tt||it?(typeof wt=="function"&&(Pb(f,p,wt,w),tt=f.memoizedState),(De=it||xN(f,p,De,w,nt,tt,le))?(dt||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount()),typeof H.componentDidMount=="function"&&(f.flags|=4194308)):(typeof H.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=w,f.memoizedState=tt),H.props=w,H.state=tt,H.context=le,w=De):(typeof H.componentDidMount=="function"&&(f.flags|=4194308),w=!1)}else{H=f.stateNode,Oe(A,f),le=f.memoizedProps,dt=Xf(p,le),H.props=dt,wt=f.pendingProps,nt=H.context,tt=p.contextType,De=ga,typeof tt=="object"&&tt!==null&&(De=Xs(tt)),we=p.getDerivedStateFromProps,(tt=typeof we=="function"||typeof H.getSnapshotBeforeUpdate=="function")||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(le!==wt||nt!==De)&&vN(f,H,w,De),it=!1,nt=f.memoizedState,H.state=nt,Ht(f,w,H,F),sr();var at=f.memoizedState;le!==wt||nt!==at||it||A!==null&&A.dependencies!==null&&i0(A.dependencies)?(typeof we=="function"&&(Pb(f,p,we,w),at=f.memoizedState),(dt=it||xN(f,p,dt,w,nt,at,De)||A!==null&&A.dependencies!==null&&i0(A.dependencies))?(tt||typeof H.UNSAFE_componentWillUpdate!="function"&&typeof H.componentWillUpdate!="function"||(typeof H.componentWillUpdate=="function"&&H.componentWillUpdate(w,at,De),typeof H.UNSAFE_componentWillUpdate=="function"&&H.UNSAFE_componentWillUpdate(w,at,De)),typeof H.componentDidUpdate=="function"&&(f.flags|=4),typeof H.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof H.componentDidUpdate!="function"||le===A.memoizedProps&&nt===A.memoizedState||(f.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||le===A.memoizedProps&&nt===A.memoizedState||(f.flags|=1024),f.memoizedProps=w,f.memoizedState=at),H.props=w,H.state=at,H.context=De,w=dt):(typeof H.componentDidUpdate!="function"||le===A.memoizedProps&&nt===A.memoizedState||(f.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||le===A.memoizedProps&&nt===A.memoizedState||(f.flags|=1024),w=!1)}return H=w,q1(A,f),w=(f.flags&128)!==0,H||w?(H=f.stateNode,p=w&&typeof p.getDerivedStateFromError!="function"?null:H.render(),f.flags|=1,A!==null&&w?(f.child=m0(f,A.child,null,F),f.child=m0(f,null,p,F)):si(A,f,p,F),f.memoizedState=H.state,A=f.child):A=dA(A,f,F),A}function RN(A,f,p,w){return eo(),f.flags|=256,si(A,f,p,w),f.child}var Hb={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vb(A){return{baseLanes:A,cachePool:ue()}}function Gb(A,f,p){return A=A!==null?A.childLanes&~p:0,f&&(A|=kl),A}function LN(A,f,p){var w=f.pendingProps,F=!1,H=(f.flags&128)!==0,le;if((le=H)||(le=A!==null&&A.memoizedState===null?!1:(Ra.current&2)!==0),le&&(F=!0,f.flags&=-129),le=(f.flags&32)!==0,f.flags&=-33,A===null){if(bn){if(F?fd(f):hd(),bn){var we=vs,De;if(De=we){e:{for(De=we,we=El;De.nodeType!==8;){if(!we){we=null;break e}if(De=vc(De.nextSibling),De===null){we=null;break e}}we=De}we!==null?(f.memoizedState={dehydrated:we,treeContext:nA!==null?{id:cc,overflow:uc}:null,retryLane:536870912,hydrationErrors:null},De=Va(18,null,null,0),De.stateNode=we,De.return=f,f.child=De,Ys=f,vs=null,De=!0):De=!1}De||aA(f)}if(we=f.memoizedState,we!==null&&(we=we.dehydrated,we!==null))return TC(we)?f.lanes=32:f.lanes=536870912,null;AA(f)}return we=w.children,w=w.fallback,F?(hd(),F=f.mode,we=K1({mode:"hidden",children:we},F),w=oc(w,F,p,null),we.return=f,w.return=f,we.sibling=w,f.child=we,F=f.child,F.memoizedState=Vb(p),F.childLanes=Gb(A,le,p),f.memoizedState=Hb,w):(fd(f),zb(f,we))}if(De=A.memoizedState,De!==null&&(we=De.dehydrated,we!==null)){if(H)f.flags&256?(fd(f),f.flags&=-257,f=qb(A,f,p)):f.memoizedState!==null?(hd(),f.child=A.child,f.flags|=128,f=null):(hd(),F=w.fallback,we=f.mode,w=K1({mode:"visible",children:w.children},we),F=oc(F,we,p,null),F.flags|=2,w.return=f,F.return=f,w.sibling=F,f.child=w,m0(f,A.child,null,p),w=f.child,w.memoizedState=Vb(p),w.childLanes=Gb(A,le,p),f.memoizedState=Hb,f=F);else if(fd(f),TC(we)){if(le=we.nextSibling&&we.nextSibling.dataset,le)var tt=le.dgst;le=tt,w=Error(n(419)),w.stack="",w.digest=le,id({value:w,source:null,stack:null}),f=qb(A,f,p)}else if(Ga||od(A,f,p,!1),le=(p&A.childLanes)!==0,Ga||le){if(le=os,le!==null&&(w=p&-p,w=(w&42)!==0?1:fa(w),w=(w&(le.suspendedLanes|p))!==0?0:w,w!==0&&w!==De.retryLane))throw De.retryLane=w,ic(A,w),Yo(le,A,w),SN;we.data==="$?"||uC(),f=qb(A,f,p)}else we.data==="$?"?(f.flags|=192,f.child=A.child,f=null):(A=De.treeContext,vs=vc(we.nextSibling),Ys=f,bn=!0,su=null,El=!1,A!==null&&(yo[Zi++]=cc,yo[Zi++]=uc,yo[Zi++]=nA,cc=A.id,uc=A.overflow,nA=f),f=zb(f,w.children),f.flags|=4096);return f}return F?(hd(),F=w.fallback,we=f.mode,De=A.child,tt=De.sibling,w=Cl(De,{mode:"hidden",children:w.children}),w.subtreeFlags=De.subtreeFlags&65011712,tt!==null?F=Cl(tt,F):(F=oc(F,we,p,null),F.flags|=2),F.return=f,w.return=f,w.sibling=F,f.child=w,w=F,F=f.child,we=A.child.memoizedState,we===null?we=Vb(p):(De=we.cachePool,De!==null?(tt=Js._currentValue,De=De.parent!==tt?{parent:tt,pool:tt}:De):De=ue(),we={baseLanes:we.baseLanes|p,cachePool:De}),F.memoizedState=we,F.childLanes=Gb(A,le,p),f.memoizedState=Hb,w):(fd(f),p=A.child,A=p.sibling,p=Cl(p,{mode:"visible",children:w.children}),p.return=f,p.sibling=null,A!==null&&(le=f.deletions,le===null?(f.deletions=[A],f.flags|=16):le.push(A)),f.child=p,f.memoizedState=null,p)}function zb(A,f){return f=K1({mode:"visible",children:f},A.mode),f.return=A,A.child=f}function K1(A,f){return A=Va(22,A,null,f),A.lanes=0,A.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},A}function qb(A,f,p){return m0(f,A.child,null,p),A=zb(f,f.pendingProps.children),A.flags|=2,f.memoizedState=null,A}function UN(A,f,p){A.lanes|=f;var w=A.alternate;w!==null&&(w.lanes|=f),s0(A.return,f,p)}function Kb(A,f,p,w,F){var H=A.memoizedState;H===null?A.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:w,tail:p,tailMode:F}:(H.isBackwards=f,H.rendering=null,H.renderingStartTime=0,H.last=w,H.tail=p,H.tailMode=F)}function MN(A,f,p){var w=f.pendingProps,F=w.revealOrder,H=w.tail;if(si(A,f,w.children,p),w=Ra.current,(w&2)!==0)w=w&1|2,f.flags|=128;else{if(A!==null&&(A.flags&128)!==0)e:for(A=f.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&UN(A,p,f);else if(A.tag===19)UN(A,p,f);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===f)break e;for(;A.sibling===null;){if(A.return===null||A.return===f)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}w&=1}switch(Y(Ra,w),F){case"forwards":for(p=f.child,F=null;p!==null;)A=p.alternate,A!==null&&V1(A)===null&&(F=p),p=p.sibling;p=F,p===null?(F=f.child,f.child=null):(F=p.sibling,p.sibling=null),Kb(f,!1,F,p,H);break;case"backwards":for(p=null,F=f.child,f.child=null;F!==null;){if(A=F.alternate,A!==null&&V1(A)===null){f.child=F;break}A=F.sibling,F.sibling=p,p=F,F=A}Kb(f,!0,p,null,H);break;case"together":Kb(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function dA(A,f,p){if(A!==null&&(f.dependencies=A.dependencies),vd|=f.lanes,(p&f.childLanes)===0)if(A!==null){if(od(A,f,p,!1),(p&f.childLanes)===0)return null}else return null;if(A!==null&&f.child!==A.child)throw Error(n(153));if(f.child!==null){for(A=f.child,p=Cl(A,A.pendingProps),f.child=p,p.return=f;A.sibling!==null;)A=A.sibling,p=p.sibling=Cl(A,A.pendingProps),p.return=f;p.sibling=null}return f.child}function $b(A,f){return(A.lanes&f)!==0?!0:(A=A.dependencies,!!(A!==null&&i0(A)))}function WH(A,f,p){switch(f.tag){case 3:pe(f,f.stateNode.containerInfo),au(f,Js,A.memoizedState.cache),eo();break;case 27:case 5:xe(f);break;case 4:pe(f,f.stateNode.containerInfo);break;case 10:au(f,f.type,f.memoizedProps.value);break;case 13:var w=f.memoizedState;if(w!==null)return w.dehydrated!==null?(fd(f),f.flags|=128,null):(p&f.child.childLanes)!==0?LN(A,f,p):(fd(f),A=dA(A,f,p),A!==null?A.sibling:null);fd(f);break;case 19:var F=(A.flags&128)!==0;if(w=(p&f.childLanes)!==0,w||(od(A,f,p,!1),w=(p&f.childLanes)!==0),F){if(w)return MN(A,f,p);f.flags|=128}if(F=f.memoizedState,F!==null&&(F.rendering=null,F.tail=null,F.lastEffect=null),Y(Ra,Ra.current),w)break;return null;case 22:case 23:return f.lanes=0,kN(A,f,p);case 24:au(f,Js,A.memoizedState.cache)}return dA(A,f,p)}function PN(A,f,p){if(A!==null)if(A.memoizedProps!==f.pendingProps)Ga=!0;else{if(!$b(A,p)&&(f.flags&128)===0)return Ga=!1,WH(A,f,p);Ga=(A.flags&131072)!==0}else Ga=!1,bn&&(f.flags&1048576)!==0&&C1(f,n0,f.index);switch(f.lanes=0,f.tag){case 16:e:{A=f.pendingProps;var w=f.elementType,F=w._init;if(w=F(w._payload),f.type=w,typeof w=="function")sd(w)?(A=Xf(w,A),f.tag=1,f=DN(null,f,w,A,p)):(f.tag=0,f=Qb(null,f,w,A,p));else{if(w!=null){if(F=w.$$typeof,F===M){f.tag=11,f=TN(null,f,w,A,p);break e}else if(F===C){f.tag=14,f=NN(null,f,w,A,p);break e}}throw f=G(w)||w,Error(n(306,f,""))}}return f;case 0:return Qb(A,f,f.type,f.pendingProps,p);case 1:return w=f.type,F=Xf(w,f.pendingProps),DN(A,f,w,F,p);case 3:e:{if(pe(f,f.stateNode.containerInfo),A===null)throw Error(n(387));w=f.pendingProps;var H=f.memoizedState;F=H.element,Oe(A,f),Ht(f,w,null,p);var le=f.memoizedState;if(w=le.cache,au(f,Js,w),w!==H.cache&&a0(f,[Js],p,!0),sr(),w=le.element,H.isDehydrated)if(H={element:w,isDehydrated:!1,cache:le.cache},f.updateQueue.baseState=H,f.memoizedState=H,f.flags&256){f=RN(A,f,w,p);break e}else if(w!==F){F=$r(Error(n(424)),f),id(F),f=RN(A,f,w,p);break e}else{switch(A=f.stateNode.containerInfo,A.nodeType){case 9:A=A.body;break;default:A=A.nodeName==="HTML"?A.ownerDocument.body:A}for(vs=vc(A.firstChild),Ys=f,bn=!0,su=null,El=!0,p=pN(f,null,w,p),f.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(eo(),w===F){f=dA(A,f,p);break e}si(A,f,w,p)}f=f.child}return f;case 26:return q1(A,f),A===null?(p=HB(f.type,null,f.pendingProps,null))?f.memoizedState=p:bn||(p=f.type,A=f.pendingProps,w=ov(ce.current).createElement(p),w[fn]=f,w[sn]=A,ii(w,p,A),He(w),f.stateNode=w):f.memoizedState=HB(f.type,A.memoizedProps,f.pendingProps,A.memoizedState),null;case 27:return xe(f),A===null&&bn&&(w=f.stateNode=jB(f.type,f.pendingProps,ce.current),Ys=f,El=!0,F=vs,Cd(f.type)?(NC=F,vs=vc(w.firstChild)):vs=F),si(A,f,f.pendingProps.children,p),q1(A,f),A===null&&(f.flags|=4194304),f.child;case 5:return A===null&&bn&&((F=w=vs)&&(w=C9(w,f.type,f.pendingProps,El),w!==null?(f.stateNode=w,Ys=f,vs=vc(w.firstChild),El=!1,F=!0):F=!1),F||aA(f)),xe(f),F=f.type,H=f.pendingProps,le=A!==null?A.memoizedProps:null,w=H.children,EC(F,H)?w=null:le!==null&&EC(F,le)&&(f.flags|=32),f.memoizedState!==null&&(F=Go(A,f,lu,null,null,p),Gp._currentValue=F),q1(A,f),si(A,f,w,p),f.child;case 6:return A===null&&bn&&((A=p=vs)&&(p=E9(p,f.pendingProps,El),p!==null?(f.stateNode=p,Ys=f,vs=null,A=!0):A=!1),A||aA(f)),null;case 13:return LN(A,f,p);case 4:return pe(f,f.stateNode.containerInfo),w=f.pendingProps,A===null?f.child=m0(f,null,w,p):si(A,f,w,p),f.child;case 11:return TN(A,f,f.type,f.pendingProps,p);case 7:return si(A,f,f.pendingProps,p),f.child;case 8:return si(A,f,f.pendingProps.children,p),f.child;case 12:return si(A,f,f.pendingProps.children,p),f.child;case 10:return w=f.pendingProps,au(f,f.type,w.value),si(A,f,w.children,p),f.child;case 9:return F=f.type._context,w=f.pendingProps.children,Tl(f),F=Xs(F),w=w(F),f.flags|=1,si(A,f,w,p),f.child;case 14:return NN(A,f,f.type,f.pendingProps,p);case 15:return BN(A,f,f.type,f.pendingProps,p);case 19:return MN(A,f,p);case 31:return w=f.pendingProps,p=f.mode,w={mode:w.mode,children:w.children},A===null?(p=K1(w,p),p.ref=f.ref,f.child=p,p.return=f,f=p):(p=Cl(A.child,w),p.ref=f.ref,f.child=p,p.return=f,f=p),f;case 22:return kN(A,f,p);case 24:return Tl(f),w=Xs(Js),A===null?(F=K(),F===null&&(F=os,H=fp(),F.pooledCache=H,H.refCount++,H!==null&&(F.pooledCacheLanes|=p),F=H),f.memoizedState={parent:w,cache:F},Me(f),au(f,Js,F)):((A.lanes&p)!==0&&(Oe(A,f),Ht(f,null,null,p),sr()),F=A.memoizedState,H=f.memoizedState,F.parent!==w?(F={parent:w,cache:w},f.memoizedState=F,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=F),au(f,Js,w)):(w=H.cache,au(f,Js,w),w!==F.cache&&a0(f,[Js],p,!0))),si(A,f,f.pendingProps.children,p),f.child;case 29:throw f.pendingProps}throw Error(n(156,f.tag))}function fA(A){A.flags|=4}function jN(A,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)A.flags&=-16777217;else if(A.flags|=16777216,!KB(f)){if(f=Bl.current,f!==null&&((yn&4194048)===yn?Au!==null:(yn&62914560)!==yn&&(yn&536870912)===0||f!==Au))throw $e=Ce,ge;A.flags|=8192}}function $1(A,f){f!==null&&(A.flags|=4),A.flags&16384&&(f=A.tag!==22?nn():536870912,A.lanes|=f,v0|=f)}function Bp(A,f){if(!bn)switch(A.tailMode){case"hidden":f=A.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?A.tail=null:p.sibling=null;break;case"collapsed":p=A.tail;for(var w=null;p!==null;)p.alternate!==null&&(w=p),p=p.sibling;w===null?f||A.tail===null?A.tail=null:A.tail.sibling=null:w.sibling=null}}function Bs(A){var f=A.alternate!==null&&A.alternate.child===A.child,p=0,w=0;if(f)for(var F=A.child;F!==null;)p|=F.lanes|F.childLanes,w|=F.subtreeFlags&65011712,w|=F.flags&65011712,F.return=A,F=F.sibling;else for(F=A.child;F!==null;)p|=F.lanes|F.childLanes,w|=F.subtreeFlags,w|=F.flags,F.return=A,F=F.sibling;return A.subtreeFlags|=w,A.childLanes=p,f}function YH(A,f,p){var w=f.pendingProps;switch(Pf(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bs(f),null;case 1:return Bs(f),null;case 3:return p=f.stateNode,w=null,A!==null&&(w=A.memoizedState.cache),f.memoizedState.cache!==w&&(f.flags|=2048),Sl(Js),fe(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(A===null||A.child===null)&&(ri(f)?fA(f):A===null||A.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,_1())),Bs(f),null;case 26:return p=f.memoizedState,A===null?(fA(f),p!==null?(Bs(f),jN(f,p)):(Bs(f),f.flags&=-16777217)):p?p!==A.memoizedState?(fA(f),Bs(f),jN(f,p)):(Bs(f),f.flags&=-16777217):(A.memoizedProps!==w&&fA(f),Bs(f),f.flags&=-16777217),null;case 27:de(f),p=ce.current;var F=f.type;if(A!==null&&f.stateNode!=null)A.memoizedProps!==w&&fA(f);else{if(!w){if(f.stateNode===null)throw Error(n(166));return Bs(f),null}A=Z.current,ri(f)?E1(f):(A=jB(F,w,p),f.stateNode=A,fA(f))}return Bs(f),null;case 5:if(de(f),p=f.type,A!==null&&f.stateNode!=null)A.memoizedProps!==w&&fA(f);else{if(!w){if(f.stateNode===null)throw Error(n(166));return Bs(f),null}if(A=Z.current,ri(f))E1(f);else{switch(F=ov(ce.current),A){case 1:A=F.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:A=F.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":A=F.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":A=F.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":A=F.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof w.is=="string"?F.createElement("select",{is:w.is}):F.createElement("select"),w.multiple?A.multiple=!0:w.size&&(A.size=w.size);break;default:A=typeof w.is=="string"?F.createElement(p,{is:w.is}):F.createElement(p)}}A[fn]=f,A[sn]=w;e:for(F=f.child;F!==null;){if(F.tag===5||F.tag===6)A.appendChild(F.stateNode);else if(F.tag!==4&&F.tag!==27&&F.child!==null){F.child.return=F,F=F.child;continue}if(F===f)break e;for(;F.sibling===null;){if(F.return===null||F.return===f)break e;F=F.return}F.sibling.return=F.return,F=F.sibling}f.stateNode=A;e:switch(ii(A,p,w),p){case"button":case"input":case"select":case"textarea":A=!!w.autoFocus;break e;case"img":A=!0;break e;default:A=!1}A&&fA(f)}}return Bs(f),f.flags&=-16777217,null;case 6:if(A&&f.stateNode!=null)A.memoizedProps!==w&&fA(f);else{if(typeof w!="string"&&f.stateNode===null)throw Error(n(166));if(A=ce.current,ri(f)){if(A=f.stateNode,p=f.memoizedProps,w=null,F=Ys,F!==null)switch(F.tag){case 27:case 5:w=F.memoizedProps}A[fn]=f,A=!!(A.nodeValue===p||w!==null&&w.suppressHydrationWarning===!0||FB(A.nodeValue,p)),A||aA(f)}else A=ov(A).createTextNode(w),A[fn]=f,f.stateNode=A}return Bs(f),null;case 13:if(w=f.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(F=ri(f),w!==null&&w.dehydrated!==null){if(A===null){if(!F)throw Error(n(318));if(F=f.memoizedState,F=F!==null?F.dehydrated:null,!F)throw Error(n(317));F[fn]=f}else eo(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Bs(f),F=!1}else F=_1(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=F),F=!0;if(!F)return f.flags&256?(AA(f),f):(AA(f),null)}if(AA(f),(f.flags&128)!==0)return f.lanes=p,f;if(p=w!==null,A=A!==null&&A.memoizedState!==null,p){w=f.child,F=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(F=w.alternate.memoizedState.cachePool.pool);var H=null;w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(H=w.memoizedState.cachePool.pool),H!==F&&(w.flags|=2048)}return p!==A&&p&&(f.child.flags|=8192),$1(f,f.updateQueue),Bs(f),null;case 4:return fe(),A===null&&vC(f.stateNode.containerInfo),Bs(f),null;case 10:return Sl(f.type),Bs(f),null;case 19:if(P(Ra),F=f.memoizedState,F===null)return Bs(f),null;if(w=(f.flags&128)!==0,H=F.rendering,H===null)if(w)Bp(F,!1);else{if(Qs!==0||A!==null&&(A.flags&128)!==0)for(A=f.child;A!==null;){if(H=V1(A),H!==null){for(f.flags|=128,Bp(F,!1),A=H.updateQueue,f.updateQueue=A,$1(f,A),f.subtreeFlags=0,A=p,p=f.child;p!==null;)Lf(p,A),p=p.sibling;return Y(Ra,Ra.current&1|2),f.child}A=A.sibling}F.tail!==null&&je()>X1&&(f.flags|=128,w=!0,Bp(F,!1),f.lanes=4194304)}else{if(!w)if(A=V1(H),A!==null){if(f.flags|=128,w=!0,A=A.updateQueue,f.updateQueue=A,$1(f,A),Bp(F,!0),F.tail===null&&F.tailMode==="hidden"&&!H.alternate&&!bn)return Bs(f),null}else 2*je()-F.renderingStartTime>X1&&p!==536870912&&(f.flags|=128,w=!0,Bp(F,!1),f.lanes=4194304);F.isBackwards?(H.sibling=f.child,f.child=H):(A=F.last,A!==null?A.sibling=H:f.child=H,F.last=H)}return F.tail!==null?(f=F.tail,F.rendering=f,F.tail=f.sibling,F.renderingStartTime=je(),f.sibling=null,A=Ra.current,Y(Ra,w?A&1|2:A&1),f):(Bs(f),null);case 22:case 23:return AA(f),Ir(),w=f.memoizedState!==null,A!==null?A.memoizedState!==null!==w&&(f.flags|=8192):w&&(f.flags|=8192),w?(p&536870912)!==0&&(f.flags&128)===0&&(Bs(f),f.subtreeFlags&6&&(f.flags|=8192)):Bs(f),p=f.updateQueue,p!==null&&$1(f,p.retryQueue),p=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(p=A.memoizedState.cachePool.pool),w=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(w=f.memoizedState.cachePool.pool),w!==p&&(f.flags|=2048),A!==null&&P(U),null;case 24:return p=null,A!==null&&(p=A.memoizedState.cache),f.memoizedState.cache!==p&&(f.flags|=2048),Sl(Js),Bs(f),null;case 25:return null;case 30:return null}throw Error(n(156,f.tag))}function XH(A,f){switch(Pf(f),f.tag){case 1:return A=f.flags,A&65536?(f.flags=A&-65537|128,f):null;case 3:return Sl(Js),fe(),A=f.flags,(A&65536)!==0&&(A&128)===0?(f.flags=A&-65537|128,f):null;case 26:case 27:case 5:return de(f),null;case 13:if(AA(f),A=f.memoizedState,A!==null&&A.dehydrated!==null){if(f.alternate===null)throw Error(n(340));eo()}return A=f.flags,A&65536?(f.flags=A&-65537|128,f):null;case 19:return P(Ra),null;case 4:return fe(),null;case 10:return Sl(f.type),null;case 22:case 23:return AA(f),Ir(),A!==null&&P(U),A=f.flags,A&65536?(f.flags=A&-65537|128,f):null;case 24:return Sl(Js),null;case 25:return null;default:return null}}function ON(A,f){switch(Pf(f),f.tag){case 3:Sl(Js),fe();break;case 26:case 27:case 5:de(f);break;case 4:fe();break;case 13:AA(f);break;case 19:P(Ra);break;case 10:Sl(f.type);break;case 22:case 23:AA(f),Ir(),A!==null&&P(U);break;case 24:Sl(Js)}}function kp(A,f){try{var p=f.updateQueue,w=p!==null?p.lastEffect:null;if(w!==null){var F=w.next;p=F;do{if((p.tag&A)===A){w=void 0;var H=p.create,le=p.inst;w=H(),le.destroy=w}p=p.next}while(p!==F)}}catch(we){ss(f,f.return,we)}}function md(A,f,p){try{var w=f.updateQueue,F=w!==null?w.lastEffect:null;if(F!==null){var H=F.next;w=H;do{if((w.tag&A)===A){var le=w.inst,we=le.destroy;if(we!==void 0){le.destroy=void 0,F=f;var De=p,tt=we;try{tt()}catch(dt){ss(F,De,dt)}}}w=w.next}while(w!==H)}}catch(dt){ss(f,f.return,dt)}}function QN(A){var f=A.updateQueue;if(f!==null){var p=A.stateNode;try{Tn(f,p)}catch(w){ss(A,A.return,w)}}}function HN(A,f,p){p.props=Xf(A.type,A.memoizedProps),p.state=A.memoizedState;try{p.componentWillUnmount()}catch(w){ss(A,f,w)}}function Ip(A,f){try{var p=A.ref;if(p!==null){switch(A.tag){case 26:case 27:case 5:var w=A.stateNode;break;case 30:w=A.stateNode;break;default:w=A.stateNode}typeof p=="function"?A.refCleanup=p(w):p.current=w}}catch(F){ss(A,f,F)}}function du(A,f){var p=A.ref,w=A.refCleanup;if(p!==null)if(typeof w=="function")try{w()}catch(F){ss(A,f,F)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(F){ss(A,f,F)}else p.current=null}function VN(A){var f=A.type,p=A.memoizedProps,w=A.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":p.autoFocus&&w.focus();break e;case"img":p.src?w.src=p.src:p.srcSet&&(w.srcset=p.srcSet)}}catch(F){ss(A,A.return,F)}}function Wb(A,f,p){try{var w=A.stateNode;x9(w,A.type,p,f),w[sn]=f}catch(F){ss(A,A.return,F)}}function GN(A){return A.tag===5||A.tag===3||A.tag===26||A.tag===27&&Cd(A.type)||A.tag===4}function Yb(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||GN(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.tag===27&&Cd(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function Xb(A,f,p){var w=A.tag;if(w===5||w===6)A=A.stateNode,f?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(A,f):(f=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,f.appendChild(A),p=p._reactRootContainer,p!=null||f.onclick!==null||(f.onclick=iv));else if(w!==4&&(w===27&&Cd(A.type)&&(p=A.stateNode,f=null),A=A.child,A!==null))for(Xb(A,f,p),A=A.sibling;A!==null;)Xb(A,f,p),A=A.sibling}function W1(A,f,p){var w=A.tag;if(w===5||w===6)A=A.stateNode,f?p.insertBefore(A,f):p.appendChild(A);else if(w!==4&&(w===27&&Cd(A.type)&&(p=A.stateNode),A=A.child,A!==null))for(W1(A,f,p),A=A.sibling;A!==null;)W1(A,f,p),A=A.sibling}function zN(A){var f=A.stateNode,p=A.memoizedProps;try{for(var w=A.type,F=f.attributes;F.length;)f.removeAttributeNode(F[0]);ii(f,w,p),f[fn]=A,f[sn]=p}catch(H){ss(A,A.return,H)}}var hA=!1,ea=!1,Jb=!1,qN=typeof WeakSet=="function"?WeakSet:Set,za=null;function JH(A,f){if(A=A.containerInfo,bC=fv,A=ti(A),Da(A)){if("selectionStart"in A)var p={start:A.selectionStart,end:A.selectionEnd};else e:{p=(p=A.ownerDocument)&&p.defaultView||window;var w=p.getSelection&&p.getSelection();if(w&&w.rangeCount!==0){p=w.anchorNode;var F=w.anchorOffset,H=w.focusNode;w=w.focusOffset;try{p.nodeType,H.nodeType}catch{p=null;break e}var le=0,we=-1,De=-1,tt=0,dt=0,wt=A,nt=null;t:for(;;){for(var at;wt!==p||F!==0&&wt.nodeType!==3||(we=le+F),wt!==H||w!==0&&wt.nodeType!==3||(De=le+w),wt.nodeType===3&&(le+=wt.nodeValue.length),(at=wt.firstChild)!==null;)nt=wt,wt=at;for(;;){if(wt===A)break t;if(nt===p&&++tt===F&&(we=le),nt===H&&++dt===w&&(De=le),(at=wt.nextSibling)!==null)break;wt=nt,nt=wt.parentNode}wt=at}p=we===-1||De===-1?null:{start:we,end:De}}else p=null}p=p||{start:0,end:0}}else p=null;for(CC={focusedElem:A,selectionRange:p},fv=!1,za=f;za!==null;)if(f=za,A=f.child,(f.subtreeFlags&1024)!==0&&A!==null)A.return=f,za=A;else for(;za!==null;){switch(f=za,H=f.alternate,A=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((A&1024)!==0&&H!==null){A=void 0,p=f,F=H.memoizedProps,H=H.memoizedState,w=p.stateNode;try{var Nr=Xf(p.type,F,p.elementType===p.type);A=w.getSnapshotBeforeUpdate(Nr,H),w.__reactInternalSnapshotBeforeUpdate=A}catch(pr){ss(p,p.return,pr)}}break;case 3:if((A&1024)!==0){if(A=f.stateNode.containerInfo,p=A.nodeType,p===9)SC(A);else if(p===1)switch(A.nodeName){case"HEAD":case"HTML":case"BODY":SC(A);break;default:A.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((A&1024)!==0)throw Error(n(163))}if(A=f.sibling,A!==null){A.return=f.return,za=A;break}za=f.return}}function KN(A,f,p){var w=p.flags;switch(p.tag){case 0:case 11:case 15:pd(A,p),w&4&&kp(5,p);break;case 1:if(pd(A,p),w&4)if(A=p.stateNode,f===null)try{A.componentDidMount()}catch(le){ss(p,p.return,le)}else{var F=Xf(p.type,f.memoizedProps);f=f.memoizedState;try{A.componentDidUpdate(F,f,A.__reactInternalSnapshotBeforeUpdate)}catch(le){ss(p,p.return,le)}}w&64&&QN(p),w&512&&Ip(p,p.return);break;case 3:if(pd(A,p),w&64&&(A=p.updateQueue,A!==null)){if(f=null,p.child!==null)switch(p.child.tag){case 27:case 5:f=p.child.stateNode;break;case 1:f=p.child.stateNode}try{Tn(A,f)}catch(le){ss(p,p.return,le)}}break;case 27:f===null&&w&4&&zN(p);case 26:case 5:pd(A,p),f===null&&w&4&&VN(p),w&512&&Ip(p,p.return);break;case 12:pd(A,p);break;case 13:pd(A,p),w&4&&YN(A,p),w&64&&(A=p.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(p=o9.bind(null,p),_9(A,p))));break;case 22:if(w=p.memoizedState!==null||hA,!w){f=f!==null&&f.memoizedState!==null||ea,F=hA;var H=ea;hA=w,(ea=f)&&!H?gd(A,p,(p.subtreeFlags&8772)!==0):pd(A,p),hA=F,ea=H}break;case 30:break;default:pd(A,p)}}function $N(A){var f=A.alternate;f!==null&&(A.alternate=null,$N(f)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(f=A.stateNode,f!==null&&Se(f)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}var ys=null,bo=!1;function mA(A,f,p){for(p=p.child;p!==null;)WN(A,f,p),p=p.sibling}function WN(A,f,p){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(It,p)}catch{}switch(p.tag){case 26:ea||du(p,f),mA(A,f,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:ea||du(p,f);var w=ys,F=bo;Cd(p.type)&&(ys=p.stateNode,bo=!1),mA(A,f,p),Op(p.stateNode),ys=w,bo=F;break;case 5:ea||du(p,f);case 6:if(w=ys,F=bo,ys=null,mA(A,f,p),ys=w,bo=F,ys!==null)if(bo)try{(ys.nodeType===9?ys.body:ys.nodeName==="HTML"?ys.ownerDocument.body:ys).removeChild(p.stateNode)}catch(H){ss(p,f,H)}else try{ys.removeChild(p.stateNode)}catch(H){ss(p,f,H)}break;case 18:ys!==null&&(bo?(A=ys,MB(A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A,p.stateNode),$p(A)):MB(ys,p.stateNode));break;case 4:w=ys,F=bo,ys=p.stateNode.containerInfo,bo=!0,mA(A,f,p),ys=w,bo=F;break;case 0:case 11:case 14:case 15:ea||md(2,p,f),ea||md(4,p,f),mA(A,f,p);break;case 1:ea||(du(p,f),w=p.stateNode,typeof w.componentWillUnmount=="function"&&HN(p,f,w)),mA(A,f,p);break;case 21:mA(A,f,p);break;case 22:ea=(w=ea)||p.memoizedState!==null,mA(A,f,p),ea=w;break;default:mA(A,f,p)}}function YN(A,f){if(f.memoizedState===null&&(A=f.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{$p(A)}catch(p){ss(f,f.return,p)}}function ZH(A){switch(A.tag){case 13:case 19:var f=A.stateNode;return f===null&&(f=A.stateNode=new qN),f;case 22:return A=A.stateNode,f=A._retryCache,f===null&&(f=A._retryCache=new qN),f;default:throw Error(n(435,A.tag))}}function Zb(A,f){var p=ZH(A);f.forEach(function(w){var F=l9.bind(null,A,w);p.has(w)||(p.add(w),w.then(F,F))})}function qo(A,f){var p=f.deletions;if(p!==null)for(var w=0;w<p.length;w++){var F=p[w],H=A,le=f,we=le;e:for(;we!==null;){switch(we.tag){case 27:if(Cd(we.type)){ys=we.stateNode,bo=!1;break e}break;case 5:ys=we.stateNode,bo=!1;break e;case 3:case 4:ys=we.stateNode.containerInfo,bo=!0;break e}we=we.return}if(ys===null)throw Error(n(160));WN(H,le,F),ys=null,bo=!1,H=F.alternate,H!==null&&(H.return=null),F.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)XN(f,A),f=f.sibling}var xc=null;function XN(A,f){var p=A.alternate,w=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:qo(f,A),Ko(A),w&4&&(md(3,A,A.return),kp(3,A),md(5,A,A.return));break;case 1:qo(f,A),Ko(A),w&512&&(ea||p===null||du(p,p.return)),w&64&&hA&&(A=A.updateQueue,A!==null&&(w=A.callbacks,w!==null&&(p=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=p===null?w:p.concat(w))));break;case 26:var F=xc;if(qo(f,A),Ko(A),w&512&&(ea||p===null||du(p,p.return)),w&4){var H=p!==null?p.memoizedState:null;if(w=A.memoizedState,p===null)if(w===null)if(A.stateNode===null){e:{w=A.type,p=A.memoizedProps,F=F.ownerDocument||F;t:switch(w){case"title":H=F.getElementsByTagName("title")[0],(!H||H[_e]||H[fn]||H.namespaceURI==="http://www.w3.org/2000/svg"||H.hasAttribute("itemprop"))&&(H=F.createElement(w),F.head.insertBefore(H,F.querySelector("head > title"))),ii(H,w,p),H[fn]=A,He(H),w=H;break e;case"link":var le=zB("link","href",F).get(w+(p.href||""));if(le){for(var we=0;we<le.length;we++)if(H=le[we],H.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&H.getAttribute("rel")===(p.rel==null?null:p.rel)&&H.getAttribute("title")===(p.title==null?null:p.title)&&H.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){le.splice(we,1);break t}}H=F.createElement(w),ii(H,w,p),F.head.appendChild(H);break;case"meta":if(le=zB("meta","content",F).get(w+(p.content||""))){for(we=0;we<le.length;we++)if(H=le[we],H.getAttribute("content")===(p.content==null?null:""+p.content)&&H.getAttribute("name")===(p.name==null?null:p.name)&&H.getAttribute("property")===(p.property==null?null:p.property)&&H.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&H.getAttribute("charset")===(p.charSet==null?null:p.charSet)){le.splice(we,1);break t}}H=F.createElement(w),ii(H,w,p),F.head.appendChild(H);break;default:throw Error(n(468,w))}H[fn]=A,He(H),w=H}A.stateNode=w}else qB(F,A.type,A.stateNode);else A.stateNode=GB(F,w,A.memoizedProps);else H!==w?(H===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):H.count--,w===null?qB(F,A.type,A.stateNode):GB(F,w,A.memoizedProps)):w===null&&A.stateNode!==null&&Wb(A,A.memoizedProps,p.memoizedProps)}break;case 27:qo(f,A),Ko(A),w&512&&(ea||p===null||du(p,p.return)),p!==null&&w&4&&Wb(A,A.memoizedProps,p.memoizedProps);break;case 5:if(qo(f,A),Ko(A),w&512&&(ea||p===null||du(p,p.return)),A.flags&32){F=A.stateNode;try{gi(F,"")}catch(at){ss(A,A.return,at)}}w&4&&A.stateNode!=null&&(F=A.memoizedProps,Wb(A,F,p!==null?p.memoizedProps:F)),w&1024&&(Jb=!0);break;case 6:if(qo(f,A),Ko(A),w&4){if(A.stateNode===null)throw Error(n(162));w=A.memoizedProps,p=A.stateNode;try{p.nodeValue=w}catch(at){ss(A,A.return,at)}}break;case 3:if(uv=null,F=xc,xc=lv(f.containerInfo),qo(f,A),xc=F,Ko(A),w&4&&p!==null&&p.memoizedState.isDehydrated)try{$p(f.containerInfo)}catch(at){ss(A,A.return,at)}Jb&&(Jb=!1,JN(A));break;case 4:w=xc,xc=lv(A.stateNode.containerInfo),qo(f,A),Ko(A),xc=w;break;case 12:qo(f,A),Ko(A);break;case 13:qo(f,A),Ko(A),A.child.flags&8192&&A.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(aC=je()),w&4&&(w=A.updateQueue,w!==null&&(A.updateQueue=null,Zb(A,w)));break;case 22:F=A.memoizedState!==null;var De=p!==null&&p.memoizedState!==null,tt=hA,dt=ea;if(hA=tt||F,ea=dt||De,qo(f,A),ea=dt,hA=tt,Ko(A),w&8192)e:for(f=A.stateNode,f._visibility=F?f._visibility&-2:f._visibility|1,F&&(p===null||De||hA||ea||Jf(A)),p=null,f=A;;){if(f.tag===5||f.tag===26){if(p===null){De=p=f;try{if(H=De.stateNode,F)le=H.style,typeof le.setProperty=="function"?le.setProperty("display","none","important"):le.display="none";else{we=De.stateNode;var wt=De.memoizedProps.style,nt=wt!=null&&wt.hasOwnProperty("display")?wt.display:null;we.style.display=nt==null||typeof nt=="boolean"?"":(""+nt).trim()}}catch(at){ss(De,De.return,at)}}}else if(f.tag===6){if(p===null){De=f;try{De.stateNode.nodeValue=F?"":De.memoizedProps}catch(at){ss(De,De.return,at)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===A)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===A)break e;for(;f.sibling===null;){if(f.return===null||f.return===A)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}w&4&&(w=A.updateQueue,w!==null&&(p=w.retryQueue,p!==null&&(w.retryQueue=null,Zb(A,p))));break;case 19:qo(f,A),Ko(A),w&4&&(w=A.updateQueue,w!==null&&(A.updateQueue=null,Zb(A,w)));break;case 30:break;case 21:break;default:qo(f,A),Ko(A)}}function Ko(A){var f=A.flags;if(f&2){try{for(var p,w=A.return;w!==null;){if(GN(w)){p=w;break}w=w.return}if(p==null)throw Error(n(160));switch(p.tag){case 27:var F=p.stateNode,H=Yb(A);W1(A,H,F);break;case 5:var le=p.stateNode;p.flags&32&&(gi(le,""),p.flags&=-33);var we=Yb(A);W1(A,we,le);break;case 3:case 4:var De=p.stateNode.containerInfo,tt=Yb(A);Xb(A,tt,De);break;default:throw Error(n(161))}}catch(dt){ss(A,A.return,dt)}A.flags&=-3}f&4096&&(A.flags&=-4097)}function JN(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var f=A;JN(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),A=A.sibling}}function pd(A,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)KN(A,f.alternate,f),f=f.sibling}function Jf(A){for(A=A.child;A!==null;){var f=A;switch(f.tag){case 0:case 11:case 14:case 15:md(4,f,f.return),Jf(f);break;case 1:du(f,f.return);var p=f.stateNode;typeof p.componentWillUnmount=="function"&&HN(f,f.return,p),Jf(f);break;case 27:Op(f.stateNode);case 26:case 5:du(f,f.return),Jf(f);break;case 22:f.memoizedState===null&&Jf(f);break;case 30:Jf(f);break;default:Jf(f)}A=A.sibling}}function gd(A,f,p){for(p=p&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var w=f.alternate,F=A,H=f,le=H.flags;switch(H.tag){case 0:case 11:case 15:gd(F,H,p),kp(4,H);break;case 1:if(gd(F,H,p),w=H,F=w.stateNode,typeof F.componentDidMount=="function")try{F.componentDidMount()}catch(tt){ss(w,w.return,tt)}if(w=H,F=w.updateQueue,F!==null){var we=w.stateNode;try{var De=F.shared.hiddenCallbacks;if(De!==null)for(F.shared.hiddenCallbacks=null,F=0;F<De.length;F++)xn(De[F],we)}catch(tt){ss(w,w.return,tt)}}p&&le&64&&QN(H),Ip(H,H.return);break;case 27:zN(H);case 26:case 5:gd(F,H,p),p&&w===null&&le&4&&VN(H),Ip(H,H.return);break;case 12:gd(F,H,p);break;case 13:gd(F,H,p),p&&le&4&&YN(F,H);break;case 22:H.memoizedState===null&&gd(F,H,p),Ip(H,H.return);break;case 30:break;default:gd(F,H,p)}f=f.sibling}}function eC(A,f){var p=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(p=A.memoizedState.cachePool.pool),A=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(A=f.memoizedState.cachePool.pool),A!==p&&(A!=null&&A.refCount++,p!=null&&jf(p))}function tC(A,f){A=null,f.alternate!==null&&(A=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==A&&(f.refCount++,A!=null&&jf(A))}function fu(A,f,p,w){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)ZN(A,f,p,w),f=f.sibling}function ZN(A,f,p,w){var F=f.flags;switch(f.tag){case 0:case 11:case 15:fu(A,f,p,w),F&2048&&kp(9,f);break;case 1:fu(A,f,p,w);break;case 3:fu(A,f,p,w),F&2048&&(A=null,f.alternate!==null&&(A=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==A&&(f.refCount++,A!=null&&jf(A)));break;case 12:if(F&2048){fu(A,f,p,w),A=f.stateNode;try{var H=f.memoizedProps,le=H.id,we=H.onPostCommit;typeof we=="function"&&we(le,f.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(De){ss(f,f.return,De)}}else fu(A,f,p,w);break;case 13:fu(A,f,p,w);break;case 23:break;case 22:H=f.stateNode,le=f.alternate,f.memoizedState!==null?H._visibility&2?fu(A,f,p,w):Fp(A,f):H._visibility&2?fu(A,f,p,w):(H._visibility|=2,p0(A,f,p,w,(f.subtreeFlags&10256)!==0)),F&2048&&eC(le,f);break;case 24:fu(A,f,p,w),F&2048&&tC(f.alternate,f);break;default:fu(A,f,p,w)}}function p0(A,f,p,w,F){for(F=F&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var H=A,le=f,we=p,De=w,tt=le.flags;switch(le.tag){case 0:case 11:case 15:p0(H,le,we,De,F),kp(8,le);break;case 23:break;case 22:var dt=le.stateNode;le.memoizedState!==null?dt._visibility&2?p0(H,le,we,De,F):Fp(H,le):(dt._visibility|=2,p0(H,le,we,De,F)),F&&tt&2048&&eC(le.alternate,le);break;case 24:p0(H,le,we,De,F),F&&tt&2048&&tC(le.alternate,le);break;default:p0(H,le,we,De,F)}f=f.sibling}}function Fp(A,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var p=A,w=f,F=w.flags;switch(w.tag){case 22:Fp(p,w),F&2048&&eC(w.alternate,w);break;case 24:Fp(p,w),F&2048&&tC(w.alternate,w);break;default:Fp(p,w)}f=f.sibling}}var Dp=8192;function g0(A){if(A.subtreeFlags&Dp)for(A=A.child;A!==null;)eB(A),A=A.sibling}function eB(A){switch(A.tag){case 26:g0(A),A.flags&Dp&&A.memoizedState!==null&&P9(xc,A.memoizedState,A.memoizedProps);break;case 5:g0(A);break;case 3:case 4:var f=xc;xc=lv(A.stateNode.containerInfo),g0(A),xc=f;break;case 22:A.memoizedState===null&&(f=A.alternate,f!==null&&f.memoizedState!==null?(f=Dp,Dp=16777216,g0(A),Dp=f):g0(A));break;default:g0(A)}}function tB(A){var f=A.alternate;if(f!==null&&(A=f.child,A!==null)){f.child=null;do f=A.sibling,A.sibling=null,A=f;while(A!==null)}}function Rp(A){var f=A.deletions;if((A.flags&16)!==0){if(f!==null)for(var p=0;p<f.length;p++){var w=f[p];za=w,nB(w,A)}tB(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)rB(A),A=A.sibling}function rB(A){switch(A.tag){case 0:case 11:case 15:Rp(A),A.flags&2048&&md(9,A,A.return);break;case 3:Rp(A);break;case 12:Rp(A);break;case 22:var f=A.stateNode;A.memoizedState!==null&&f._visibility&2&&(A.return===null||A.return.tag!==13)?(f._visibility&=-3,Y1(A)):Rp(A);break;default:Rp(A)}}function Y1(A){var f=A.deletions;if((A.flags&16)!==0){if(f!==null)for(var p=0;p<f.length;p++){var w=f[p];za=w,nB(w,A)}tB(A)}for(A=A.child;A!==null;){switch(f=A,f.tag){case 0:case 11:case 15:md(8,f,f.return),Y1(f);break;case 22:p=f.stateNode,p._visibility&2&&(p._visibility&=-3,Y1(f));break;default:Y1(f)}A=A.sibling}}function nB(A,f){for(;za!==null;){var p=za;switch(p.tag){case 0:case 11:case 15:md(8,p,f);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var w=p.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:jf(p.memoizedState.cache)}if(w=p.child,w!==null)w.return=p,za=w;else e:for(p=A;za!==null;){w=za;var F=w.sibling,H=w.return;if($N(w),w===p){za=null;break e}if(F!==null){F.return=H,za=F;break e}za=H}}}var e9={getCacheForType:function(A){var f=Xs(Js),p=f.data.get(A);return p===void 0&&(p=A(),f.data.set(A,p)),p}},t9=typeof WeakMap=="function"?WeakMap:Map,Hn=0,os=null,an=null,yn=0,Vn=0,$o=null,xd=!1,x0=!1,rC=!1,pA=0,Qs=0,vd=0,Zf=0,nC=0,kl=0,v0=0,Lp=null,Co=null,sC=!1,aC=0,X1=1/0,J1=null,yd=null,ai=0,wd=null,y0=null,w0=0,iC=0,oC=null,sB=null,Up=0,lC=null;function Wo(){if((Hn&2)!==0&&yn!==0)return yn&-yn;if(J.T!==null){var A=iA;return A!==0?A:mC()}return Es()}function aB(){kl===0&&(kl=(yn&536870912)===0||bn?da():536870912);var A=Bl.current;return A!==null&&(A.flags|=32),kl}function Yo(A,f,p){(A===os&&(Vn===2||Vn===9)||A.cancelPendingCommit!==null)&&(b0(A,0),bd(A,yn,kl,!1)),ps(A,p),((Hn&2)===0||A!==os)&&(A===os&&((Hn&2)===0&&(Zf|=p),Qs===4&&bd(A,yn,kl,!1)),hu(A))}function iB(A,f,p){if((Hn&6)!==0)throw Error(n(327));var w=!p&&(f&124)===0&&(f&A.expiredLanes)===0||Dn(A,f),F=w?s9(A,f):AC(A,f,!0),H=w;do{if(F===0){x0&&!w&&bd(A,f,0,!1);break}else{if(p=A.current.alternate,H&&!r9(p)){F=AC(A,f,!1),H=!1;continue}if(F===2){if(H=f,A.errorRecoveryDisabledLanes&H)var le=0;else le=A.pendingLanes&-536870913,le=le!==0?le:le&536870912?536870912:0;if(le!==0){f=le;e:{var we=A;F=Lp;var De=we.current.memoizedState.isDehydrated;if(De&&(b0(we,le).flags|=256),le=AC(we,le,!1),le!==2){if(rC&&!De){we.errorRecoveryDisabledLanes|=H,Zf|=H,F=4;break e}H=Co,Co=F,H!==null&&(Co===null?Co=H:Co.push.apply(Co,H))}F=le}if(H=!1,F!==2)continue}}if(F===1){b0(A,0),bd(A,f,0,!0);break}e:{switch(w=A,H=F,H){case 0:case 1:throw Error(n(345));case 4:if((f&4194048)!==f)break;case 6:bd(w,f,kl,!xd);break e;case 2:Co=null;break;case 3:case 5:break;default:throw Error(n(329))}if((f&62914560)===f&&(F=aC+300-je(),10<F)){if(bd(w,f,kl,!xd),Ur(w,0,!0)!==0)break e;w.timeoutHandle=LB(oB.bind(null,w,p,Co,J1,sC,f,kl,Zf,v0,xd,H,2,-0,0),F);break e}oB(w,p,Co,J1,sC,f,kl,Zf,v0,xd,H,0,-0,0)}}break}while(!0);hu(A)}function oB(A,f,p,w,F,H,le,we,De,tt,dt,wt,nt,at){if(A.timeoutHandle=-1,wt=f.subtreeFlags,(wt&8192||(wt&16785408)===16785408)&&(Vp={stylesheets:null,count:0,unsuspend:M9},eB(f),wt=j9(),wt!==null)){A.cancelPendingCommit=wt(hB.bind(null,A,f,H,p,w,F,le,we,De,dt,1,nt,at)),bd(A,H,le,!tt);return}hB(A,f,H,p,w,F,le,we,De)}function r9(A){for(var f=A;;){var p=f.tag;if((p===0||p===11||p===15)&&f.flags&16384&&(p=f.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var w=0;w<p.length;w++){var F=p[w],H=F.getSnapshot;F=F.value;try{if(!pa(H(),F))return!1}catch{return!1}}if(p=f.child,f.subtreeFlags&16384&&p!==null)p.return=f,f=p;else{if(f===A)break;for(;f.sibling===null;){if(f.return===null||f.return===A)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function bd(A,f,p,w){f&=~nC,f&=~Zf,A.suspendedLanes|=f,A.pingedLanes&=~f,w&&(A.warmLanes|=f),w=A.expirationTimes;for(var F=f;0<F;){var H=31-Lt(F),le=1<<H;w[H]=-1,F&=~le}p!==0&&nr(A,p,f)}function Z1(){return(Hn&6)===0?(Mp(0),!1):!0}function cC(){if(an!==null){if(Vn===0)var A=an.return;else A=an,dc=xa=null,l0(A),h0=null,Tp=0,A=an;for(;A!==null;)ON(A.alternate,A),A=A.return;an=null}}function b0(A,f){var p=A.timeoutHandle;p!==-1&&(A.timeoutHandle=-1,y9(p)),p=A.cancelPendingCommit,p!==null&&(A.cancelPendingCommit=null,p()),cC(),os=A,an=p=Cl(A.current,null),yn=f,Vn=0,$o=null,xd=!1,x0=Dn(A,f),rC=!1,v0=kl=nC=Zf=vd=Qs=0,Co=Lp=null,sC=!1,(f&8)!==0&&(f|=f&32);var w=A.entangledLanes;if(w!==0)for(A=A.entanglements,w&=f;0<w;){var F=31-Lt(w),H=1<<F;f|=A[F],w&=~H}return pA=f,xo(),p}function lB(A,f){fr=null,J.H=O1,f===me||f===ve?(f=Ge(),Vn=3):f===ge?(f=Ge(),Vn=4):Vn=f===SN?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,$o=f,an===null&&(Qs=1,z1(A,$r(f,A.current)))}function cB(){var A=J.H;return J.H=O1,A===null?O1:A}function uB(){var A=J.A;return J.A=e9,A}function uC(){Qs=4,xd||(yn&4194048)!==yn&&Bl.current!==null||(x0=!0),(vd&134217727)===0&&(Zf&134217727)===0||os===null||bd(os,yn,kl,!1)}function AC(A,f,p){var w=Hn;Hn|=2;var F=cB(),H=uB();(os!==A||yn!==f)&&(J1=null,b0(A,f)),f=!1;var le=Qs;e:do try{if(Vn!==0&&an!==null){var we=an,De=$o;switch(Vn){case 8:cC(),le=6;break e;case 3:case 2:case 9:case 6:Bl.current===null&&(f=!0);var tt=Vn;if(Vn=0,$o=null,C0(A,we,De,tt),p&&x0){le=0;break e}break;default:tt=Vn,Vn=0,$o=null,C0(A,we,De,tt)}}n9(),le=Qs;break}catch(dt){lB(A,dt)}while(!0);return f&&A.shellSuspendCounter++,dc=xa=null,Hn=w,J.H=F,J.A=H,an===null&&(os=null,yn=0,xo()),le}function n9(){for(;an!==null;)AB(an)}function s9(A,f){var p=Hn;Hn|=2;var w=cB(),F=uB();os!==A||yn!==f?(J1=null,X1=je()+500,b0(A,f)):x0=Dn(A,f);e:do try{if(Vn!==0&&an!==null){f=an;var H=$o;t:switch(Vn){case 1:Vn=0,$o=null,C0(A,f,H,1);break;case 2:case 9:if(Be(H)){Vn=0,$o=null,dB(f);break}f=function(){Vn!==2&&Vn!==9||os!==A||(Vn=7),hu(A)},H.then(f,f);break e;case 3:Vn=7;break e;case 4:Vn=5;break e;case 7:Be(H)?(Vn=0,$o=null,dB(f)):(Vn=0,$o=null,C0(A,f,H,7));break;case 5:var le=null;switch(an.tag){case 26:le=an.memoizedState;case 5:case 27:var we=an;if(!le||KB(le)){Vn=0,$o=null;var De=we.sibling;if(De!==null)an=De;else{var tt=we.return;tt!==null?(an=tt,ev(tt)):an=null}break t}}Vn=0,$o=null,C0(A,f,H,5);break;case 6:Vn=0,$o=null,C0(A,f,H,6);break;case 8:cC(),Qs=6;break e;default:throw Error(n(462))}}a9();break}catch(dt){lB(A,dt)}while(!0);return dc=xa=null,J.H=w,J.A=F,Hn=p,an!==null?0:(os=null,yn=0,xo(),Qs)}function a9(){for(;an!==null&&!Te();)AB(an)}function AB(A){var f=PN(A.alternate,A,pA);A.memoizedProps=A.pendingProps,f===null?ev(A):an=f}function dB(A){var f=A,p=f.alternate;switch(f.tag){case 15:case 0:f=FN(p,f,f.pendingProps,f.type,void 0,yn);break;case 11:f=FN(p,f,f.pendingProps,f.type.render,f.ref,yn);break;case 5:l0(f);default:ON(p,f),f=an=Lf(f,pA),f=PN(p,f,pA)}A.memoizedProps=A.pendingProps,f===null?ev(A):an=f}function C0(A,f,p,w){dc=xa=null,l0(f),h0=null,Tp=0;var F=f.return;try{if($H(A,F,f,p,yn)){Qs=1,z1(A,$r(p,A.current)),an=null;return}}catch(H){if(F!==null)throw an=F,H;Qs=1,z1(A,$r(p,A.current)),an=null;return}f.flags&32768?(bn||w===1?A=!0:x0||(yn&536870912)!==0?A=!1:(xd=A=!0,(w===2||w===9||w===3||w===6)&&(w=Bl.current,w!==null&&w.tag===13&&(w.flags|=16384))),fB(f,A)):ev(f)}function ev(A){var f=A;do{if((f.flags&32768)!==0){fB(f,xd);return}A=f.return;var p=YH(f.alternate,f,pA);if(p!==null){an=p;return}if(f=f.sibling,f!==null){an=f;return}an=f=A}while(f!==null);Qs===0&&(Qs=5)}function fB(A,f){do{var p=XH(A.alternate,A);if(p!==null){p.flags&=32767,an=p;return}if(p=A.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!f&&(A=A.sibling,A!==null)){an=A;return}an=A=p}while(A!==null);Qs=6,an=null}function hB(A,f,p,w,F,H,le,we,De){A.cancelPendingCommit=null;do tv();while(ai!==0);if((Hn&6)!==0)throw Error(n(327));if(f!==null){if(f===A.current)throw Error(n(177));if(H=f.lanes|f.childLanes,H|=Ss,Pr(A,p,H,le,we,De),A===os&&(an=os=null,yn=0),y0=f,wd=A,w0=p,iC=H,oC=F,sB=w,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,c9(Et,function(){return vB(),null})):(A.callbackNode=null,A.callbackPriority=0),w=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||w){w=J.T,J.T=null,F=re.p,re.p=2,le=Hn,Hn|=4;try{JH(A,f,p)}finally{Hn=le,re.p=F,J.T=w}}ai=1,mB(),pB(),gB()}}function mB(){if(ai===1){ai=0;var A=wd,f=y0,p=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||p){p=J.T,J.T=null;var w=re.p;re.p=2;var F=Hn;Hn|=4;try{XN(f,A);var H=CC,le=ti(A.containerInfo),we=H.focusedElem,De=H.selectionRange;if(le!==we&&we&&we.ownerDocument&&Wc(we.ownerDocument.documentElement,we)){if(De!==null&&Da(we)){var tt=De.start,dt=De.end;if(dt===void 0&&(dt=tt),"selectionStart"in we)we.selectionStart=tt,we.selectionEnd=Math.min(dt,we.value.length);else{var wt=we.ownerDocument||document,nt=wt&&wt.defaultView||window;if(nt.getSelection){var at=nt.getSelection(),Nr=we.textContent.length,pr=Math.min(De.start,Nr),es=De.end===void 0?pr:Math.min(De.end,Nr);!at.extend&&pr>es&&(le=es,es=pr,pr=le);var ze=sc(we,pr),Pe=sc(we,es);if(ze&&Pe&&(at.rangeCount!==1||at.anchorNode!==ze.node||at.anchorOffset!==ze.offset||at.focusNode!==Pe.node||at.focusOffset!==Pe.offset)){var Ye=wt.createRange();Ye.setStart(ze.node,ze.offset),at.removeAllRanges(),pr>es?(at.addRange(Ye),at.extend(Pe.node,Pe.offset)):(Ye.setEnd(Pe.node,Pe.offset),at.addRange(Ye))}}}}for(wt=[],at=we;at=at.parentNode;)at.nodeType===1&&wt.push({element:at,left:at.scrollLeft,top:at.scrollTop});for(typeof we.focus=="function"&&we.focus(),we=0;we<wt.length;we++){var pt=wt[we];pt.element.scrollLeft=pt.left,pt.element.scrollTop=pt.top}}fv=!!bC,CC=bC=null}finally{Hn=F,re.p=w,J.T=p}}A.current=f,ai=2}}function pB(){if(ai===2){ai=0;var A=wd,f=y0,p=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||p){p=J.T,J.T=null;var w=re.p;re.p=2;var F=Hn;Hn|=4;try{KN(A,f.alternate,f)}finally{Hn=F,re.p=w,J.T=p}}ai=3}}function gB(){if(ai===4||ai===3){ai=0,be();var A=wd,f=y0,p=w0,w=sB;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?ai=5:(ai=0,y0=wd=null,xB(A,A.pendingLanes));var F=A.pendingLanes;if(F===0&&(yd=null),Wn(p),f=f.stateNode,Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(It,f,void 0,(f.current.flags&128)===128)}catch{}if(w!==null){f=J.T,F=re.p,re.p=2,J.T=null;try{for(var H=A.onRecoverableError,le=0;le<w.length;le++){var we=w[le];H(we.value,{componentStack:we.stack})}}finally{J.T=f,re.p=F}}(w0&3)!==0&&tv(),hu(A),F=A.pendingLanes,(p&4194090)!==0&&(F&42)!==0?A===lC?Up++:(Up=0,lC=A):Up=0,Mp(0)}}function xB(A,f){(A.pooledCacheLanes&=f)===0&&(f=A.pooledCache,f!=null&&(A.pooledCache=null,jf(f)))}function tv(A){return mB(),pB(),gB(),vB()}function vB(){if(ai!==5)return!1;var A=wd,f=iC;iC=0;var p=Wn(w0),w=J.T,F=re.p;try{re.p=32>p?32:p,J.T=null,p=oC,oC=null;var H=wd,le=w0;if(ai=0,y0=wd=null,w0=0,(Hn&6)!==0)throw Error(n(331));var we=Hn;if(Hn|=4,rB(H.current),ZN(H,H.current,le,p),Hn=we,Mp(0,!1),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(It,H)}catch{}return!0}finally{re.p=F,J.T=w,xB(A,f)}}function yB(A,f,p){f=$r(p,f),f=Ob(A.stateNode,f,2),A=vt(A,f,2),A!==null&&(ps(A,2),hu(A))}function ss(A,f,p){if(A.tag===3)yB(A,A,p);else for(;f!==null;){if(f.tag===3){yB(f,A,p);break}else if(f.tag===1){var w=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(yd===null||!yd.has(w))){A=$r(p,A),p=EN(2),w=vt(f,p,2),w!==null&&(_N(p,w,f,A),ps(w,2),hu(w));break}}f=f.return}}function dC(A,f,p){var w=A.pingCache;if(w===null){w=A.pingCache=new t9;var F=new Set;w.set(f,F)}else F=w.get(f),F===void 0&&(F=new Set,w.set(f,F));F.has(p)||(rC=!0,F.add(p),A=i9.bind(null,A,f,p),f.then(A,A))}function i9(A,f,p){var w=A.pingCache;w!==null&&w.delete(f),A.pingedLanes|=A.suspendedLanes&p,A.warmLanes&=~p,os===A&&(yn&p)===p&&(Qs===4||Qs===3&&(yn&62914560)===yn&&300>je()-aC?(Hn&2)===0&&b0(A,0):nC|=p,v0===yn&&(v0=0)),hu(A)}function wB(A,f){f===0&&(f=nn()),A=ic(A,f),A!==null&&(ps(A,f),hu(A))}function o9(A){var f=A.memoizedState,p=0;f!==null&&(p=f.retryLane),wB(A,p)}function l9(A,f){var p=0;switch(A.tag){case 13:var w=A.stateNode,F=A.memoizedState;F!==null&&(p=F.retryLane);break;case 19:w=A.stateNode;break;case 22:w=A.stateNode._retryCache;break;default:throw Error(n(314))}w!==null&&w.delete(f),wB(A,p)}function c9(A,f){return Le(A,f)}var rv=null,E0=null,fC=!1,nv=!1,hC=!1,eh=0;function hu(A){A!==E0&&A.next===null&&(E0===null?rv=E0=A:E0=E0.next=A),nv=!0,fC||(fC=!0,A9())}function Mp(A,f){if(!hC&&nv){hC=!0;do for(var p=!1,w=rv;w!==null;){if(A!==0){var F=w.pendingLanes;if(F===0)var H=0;else{var le=w.suspendedLanes,we=w.pingedLanes;H=(1<<31-Lt(42|A)+1)-1,H&=F&~(le&~we),H=H&201326741?H&201326741|1:H?H|2:0}H!==0&&(p=!0,_B(w,H))}else H=yn,H=Ur(w,w===os?H:0,w.cancelPendingCommit!==null||w.timeoutHandle!==-1),(H&3)===0||Dn(w,H)||(p=!0,_B(w,H));w=w.next}while(p);hC=!1}}function u9(){bB()}function bB(){nv=fC=!1;var A=0;eh!==0&&(v9()&&(A=eh),eh=0);for(var f=je(),p=null,w=rv;w!==null;){var F=w.next,H=CB(w,f);H===0?(w.next=null,p===null?rv=F:p.next=F,F===null&&(E0=p)):(p=w,(A!==0||(H&3)!==0)&&(nv=!0)),w=F}Mp(A)}function CB(A,f){for(var p=A.suspendedLanes,w=A.pingedLanes,F=A.expirationTimes,H=A.pendingLanes&-62914561;0<H;){var le=31-Lt(H),we=1<<le,De=F[le];De===-1?((we&p)===0||(we&w)!==0)&&(F[le]=Fr(we,f)):De<=f&&(A.expiredLanes|=we),H&=~we}if(f=os,p=yn,p=Ur(A,A===f?p:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),w=A.callbackNode,p===0||A===f&&(Vn===2||Vn===9)||A.cancelPendingCommit!==null)return w!==null&&w!==null&&et(w),A.callbackNode=null,A.callbackPriority=0;if((p&3)===0||Dn(A,p)){if(f=p&-p,f===A.callbackPriority)return f;switch(w!==null&&et(w),Wn(p)){case 2:case 8:p=mt;break;case 32:p=Et;break;case 268435456:p=kt;break;default:p=Et}return w=EB.bind(null,A),p=Le(p,w),A.callbackPriority=f,A.callbackNode=p,f}return w!==null&&w!==null&&et(w),A.callbackPriority=2,A.callbackNode=null,2}function EB(A,f){if(ai!==0&&ai!==5)return A.callbackNode=null,A.callbackPriority=0,null;var p=A.callbackNode;if(tv()&&A.callbackNode!==p)return null;var w=yn;return w=Ur(A,A===os?w:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),w===0?null:(iB(A,w,f),CB(A,je()),A.callbackNode!=null&&A.callbackNode===p?EB.bind(null,A):null)}function _B(A,f){if(tv())return null;iB(A,f,!0)}function A9(){w9(function(){(Hn&6)!==0?Le(st,u9):bB()})}function mC(){return eh===0&&(eh=da()),eh}function SB(A){return A==null||typeof A=="symbol"||typeof A=="boolean"?null:typeof A=="function"?A:Uo(""+A)}function TB(A,f){var p=f.ownerDocument.createElement("input");return p.name=f.name,p.value=f.value,A.id&&p.setAttribute("form",A.id),f.parentNode.insertBefore(p,f),A=new FormData(A),p.parentNode.removeChild(p),A}function d9(A,f,p,w,F){if(f==="submit"&&p&&p.stateNode===F){var H=SB((F[sn]||null).action),le=w.submitter;le&&(f=(f=le[sn]||null)?SB(f.formAction):le.getAttribute("formAction"),f!==null&&(H=f,le=null));var we=new hl("action","action",null,w,F);A.push({event:we,listeners:[{instance:null,listener:function(){if(w.defaultPrevented){if(eh!==0){var De=le?TB(F,le):new FormData(F);Nl(p,{pending:!0,data:De,method:F.method,action:H},null,De)}}else typeof H=="function"&&(we.preventDefault(),De=le?TB(F,le):new FormData(F),Nl(p,{pending:!0,data:De,method:F.method,action:H},H,De))},currentTarget:F}]})}}for(var pC=0;pC<eA.length;pC++){var gC=eA[pC],f9=gC.toLowerCase(),h9=gC[0].toUpperCase()+gC.slice(1);xs(f9,"on"+h9)}xs(rd,"onAnimationEnd"),xs(Xc,"onAnimationIteration"),xs(Jc,"onAnimationStart"),xs("dblclick","onDoubleClick"),xs("focusin","onFocus"),xs("focusout","onBlur"),xs(Zc,"onTransitionRun"),xs(Zu,"onTransitionStart"),xs(nd,"onTransitionCancel"),xs(eu,"onTransitionEnd"),Bt("onMouseEnter",["mouseout","mouseover"]),Bt("onMouseLeave",["mouseout","mouseover"]),Bt("onPointerEnter",["pointerout","pointerover"]),Bt("onPointerLeave",["pointerout","pointerover"]),yt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yt("onBeforeInput",["compositionend","keypress","textInput","paste"]),yt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),m9=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pp));function NB(A,f){f=(f&4)!==0;for(var p=0;p<A.length;p++){var w=A[p],F=w.event;w=w.listeners;e:{var H=void 0;if(f)for(var le=w.length-1;0<=le;le--){var we=w[le],De=we.instance,tt=we.currentTarget;if(we=we.listener,De!==H&&F.isPropagationStopped())break e;H=we,F.currentTarget=tt;try{H(F)}catch(dt){G1(dt)}F.currentTarget=null,H=De}else for(le=0;le<w.length;le++){if(we=w[le],De=we.instance,tt=we.currentTarget,we=we.listener,De!==H&&F.isPropagationStopped())break e;H=we,F.currentTarget=tt;try{H(F)}catch(dt){G1(dt)}F.currentTarget=null,H=De}}}}function on(A,f){var p=f[jn];p===void 0&&(p=f[jn]=new Set);var w=A+"__bubble";p.has(w)||(BB(f,A,2,!1),p.add(w))}function xC(A,f,p){var w=0;f&&(w|=4),BB(p,A,w,f)}var sv="_reactListening"+Math.random().toString(36).slice(2);function vC(A){if(!A[sv]){A[sv]=!0,We.forEach(function(p){p!=="selectionchange"&&(m9.has(p)||xC(p,!1,A),xC(p,!0,A))});var f=A.nodeType===9?A:A.ownerDocument;f===null||f[sv]||(f[sv]=!0,xC("selectionchange",!1,f))}}function BB(A,f,p,w){switch(ZB(f)){case 2:var F=H9;break;case 8:F=V9;break;default:F=DC}p=F.bind(null,f,p,A),F=void 0,!ei||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(F=!0),w?F!==void 0?A.addEventListener(f,p,{capture:!0,passive:F}):A.addEventListener(f,p,!0):F!==void 0?A.addEventListener(f,p,{passive:F}):A.addEventListener(f,p,!1)}function yC(A,f,p,w,F){var H=w;if((f&1)===0&&(f&2)===0&&w!==null)e:for(;;){if(w===null)return;var le=w.tag;if(le===3||le===4){var we=w.stateNode.containerInfo;if(we===F)break;if(le===4)for(le=w.return;le!==null;){var De=le.tag;if((De===3||De===4)&&le.stateNode.containerInfo===F)return;le=le.return}for(;we!==null;){if(le=Ne(we),le===null)return;if(De=le.tag,De===5||De===6||De===26||De===27){w=H=le;continue e}we=we.parentNode}}w=w.return}XA(function(){var tt=H,dt=On(p),wt=[];e:{var nt=ac.get(A);if(nt!==void 0){var at=hl,Nr=A;switch(A){case"keypress":if(yi(p)===0)break e;case"keydown":case"keyup":at=Oo;break;case"focusin":Nr="focus",at=pl;break;case"focusout":Nr="blur",at=pl;break;case"beforeblur":case"afterblur":at=pl;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":at=Ms;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":at=ml;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":at=zc;break;case rd:case Xc:case Jc:at=Hc;break;case eu:at=Ae;break;case"scroll":case"scrollend":at=Ku;break;case"wheel":at=Re;break;case"copy":case"cut":case"paste":at=Vc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":at=nc;break;case"toggle":case"beforetoggle":at=ot}var pr=(f&4)!==0,es=!pr&&(A==="scroll"||A==="scrollend"),ze=pr?nt!==null?nt+"Capture":null:nt;pr=[];for(var Pe=tt,Ye;Pe!==null;){var pt=Pe;if(Ye=pt.stateNode,pt=pt.tag,pt!==5&&pt!==26&&pt!==27||Ye===null||ze===null||(pt=ja(Pe,ze),pt!=null&&pr.push(jp(Pe,pt,Ye))),es)break;Pe=Pe.return}0<pr.length&&(nt=new at(nt,Nr,null,p,dt),wt.push({event:nt,listeners:pr}))}}if((f&7)===0){e:{if(nt=A==="mouseover"||A==="pointerover",at=A==="mouseout"||A==="pointerout",nt&&p!==co&&(Nr=p.relatedTarget||p.fromElement)&&(Ne(Nr)||Nr[Rn]))break e;if((at||nt)&&(nt=dt.window===dt?dt:(nt=dt.ownerDocument)?nt.defaultView||nt.parentWindow:window,at?(Nr=p.relatedTarget||p.toElement,at=tt,Nr=Nr?Ne(Nr):null,Nr!==null&&(es=a(Nr),pr=Nr.tag,Nr!==es||pr!==5&&pr!==27&&pr!==6)&&(Nr=null)):(at=null,Nr=tt),at!==Nr)){if(pr=Ms,pt="onMouseLeave",ze="onMouseEnter",Pe="mouse",(A==="pointerout"||A==="pointerover")&&(pr=nc,pt="onPointerLeave",ze="onPointerEnter",Pe="pointer"),es=at==null?nt:Ke(at),Ye=Nr==null?nt:Ke(Nr),nt=new pr(pt,Pe+"leave",at,p,dt),nt.target=es,nt.relatedTarget=Ye,pt=null,Ne(dt)===tt&&(pr=new pr(ze,Pe+"enter",Nr,p,dt),pr.target=Ye,pr.relatedTarget=es,pt=pr),es=pt,at&&Nr)t:{for(pr=at,ze=Nr,Pe=0,Ye=pr;Ye;Ye=_0(Ye))Pe++;for(Ye=0,pt=ze;pt;pt=_0(pt))Ye++;for(;0<Pe-Ye;)pr=_0(pr),Pe--;for(;0<Ye-Pe;)ze=_0(ze),Ye--;for(;Pe--;){if(pr===ze||ze!==null&&pr===ze.alternate)break t;pr=_0(pr),ze=_0(ze)}pr=null}else pr=null;at!==null&&kB(wt,nt,at,pr,!1),Nr!==null&&es!==null&&kB(wt,es,Nr,pr,!0)}}e:{if(nt=tt?Ke(tt):window,at=nt.nodeName&&nt.nodeName.toLowerCase(),at==="select"||at==="input"&&nt.type==="file")var tr=ed;else if(Ln(nt))if(Wu)tr=e0;else{tr=Ap;var en=bi}else at=nt.nodeName,!at||at.toLowerCase()!=="input"||nt.type!=="checkbox"&&nt.type!=="radio"?tt&&zu(tt.elementType)&&(tr=ed):tr=Df;if(tr&&(tr=tr(A,tt))){po(wt,tr,p,dt);break e}en&&en(A,nt,tt),A==="focusout"&&tt&&nt.type==="number"&&tt.memoizedProps.value!=null&&Al(nt,"number",nt.value)}switch(en=tt?Ke(tt):window,A){case"focusin":(Ln(en)||en.contentEditable==="true")&&(Ci=en,Qo=tt,wl=null);break;case"focusout":wl=Qo=Ci=null;break;case"mousedown":Ho=!0;break;case"contextmenu":case"mouseup":case"dragend":Ho=!1,gs(wt,p,dt);break;case"selectionchange":if(Yc)break;case"keydown":case"keyup":gs(wt,p,dt)}var ir;if(Qt)e:{switch(A){case"compositionstart":var xr="onCompositionStart";break e;case"compositionend":xr="onCompositionEnd";break e;case"compositionupdate":xr="onCompositionUpdate";break e}xr=void 0}else mr?Ze(A,p)&&(xr="onCompositionEnd"):A==="keydown"&&p.keyCode===229&&(xr="onCompositionStart");xr&&(ae&&p.locale!=="ko"&&(mr||xr!=="onCompositionStart"?xr==="onCompositionEnd"&&mr&&(ir=qu()):(vi=dt,fl="value"in vi?vi.value:vi.textContent,mr=!0)),en=av(tt,xr),0<en.length&&(xr=new ec(xr,A,null,p,dt),wt.push({event:xr,listeners:en}),ir?xr.data=ir:(ir=St(p),ir!==null&&(xr.data=ir)))),(ir=X?Zr(A,p):kr(A,p))&&(xr=av(tt,"onBeforeInput"),0<xr.length&&(en=new ec("onBeforeInput","beforeinput",null,p,dt),wt.push({event:en,listeners:xr}),en.data=ir)),d9(wt,A,tt,p,dt)}NB(wt,f)})}function jp(A,f,p){return{instance:A,listener:f,currentTarget:p}}function av(A,f){for(var p=f+"Capture",w=[];A!==null;){var F=A,H=F.stateNode;if(F=F.tag,F!==5&&F!==26&&F!==27||H===null||(F=ja(A,p),F!=null&&w.unshift(jp(A,F,H)),F=ja(A,f),F!=null&&w.push(jp(A,F,H))),A.tag===3)return w;A=A.return}return[]}function _0(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5&&A.tag!==27);return A||null}function kB(A,f,p,w,F){for(var H=f._reactName,le=[];p!==null&&p!==w;){var we=p,De=we.alternate,tt=we.stateNode;if(we=we.tag,De!==null&&De===w)break;we!==5&&we!==26&&we!==27||tt===null||(De=tt,F?(tt=ja(p,H),tt!=null&&le.unshift(jp(p,tt,De))):F||(tt=ja(p,H),tt!=null&&le.push(jp(p,tt,De)))),p=p.return}le.length!==0&&A.push({event:f,listeners:le})}var p9=/\r\n?/g,g9=/\u0000|\uFFFD/g;function IB(A){return(typeof A=="string"?A:""+A).replace(p9,`
`).replace(g9,"")}function FB(A,f){return f=IB(f),IB(A)===f}function iv(){}function Zn(A,f,p,w,F,H){switch(p){case"children":typeof w=="string"?f==="body"||f==="textarea"&&w===""||gi(A,w):(typeof w=="number"||typeof w=="bigint")&&f!=="body"&&gi(A,""+w);break;case"className":Or(A,"class",w);break;case"tabIndex":Or(A,"tabindex",w);break;case"dir":case"role":case"viewBox":case"width":case"height":Or(A,p,w);break;case"style":Gu(A,w,H);break;case"data":if(f!=="object"){Or(A,"data",w);break}case"src":case"href":if(w===""&&(f!=="a"||p!=="href")){A.removeAttribute(p);break}if(w==null||typeof w=="function"||typeof w=="symbol"||typeof w=="boolean"){A.removeAttribute(p);break}w=Uo(""+w),A.setAttribute(p,w);break;case"action":case"formAction":if(typeof w=="function"){A.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof H=="function"&&(p==="formAction"?(f!=="input"&&Zn(A,f,"name",F.name,F,null),Zn(A,f,"formEncType",F.formEncType,F,null),Zn(A,f,"formMethod",F.formMethod,F,null),Zn(A,f,"formTarget",F.formTarget,F,null)):(Zn(A,f,"encType",F.encType,F,null),Zn(A,f,"method",F.method,F,null),Zn(A,f,"target",F.target,F,null)));if(w==null||typeof w=="symbol"||typeof w=="boolean"){A.removeAttribute(p);break}w=Uo(""+w),A.setAttribute(p,w);break;case"onClick":w!=null&&(A.onclick=iv);break;case"onScroll":w!=null&&on("scroll",A);break;case"onScrollEnd":w!=null&&on("scrollend",A);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(n(61));if(p=w.__html,p!=null){if(F.children!=null)throw Error(n(60));A.innerHTML=p}}break;case"multiple":A.multiple=w&&typeof w!="function"&&typeof w!="symbol";break;case"muted":A.muted=w&&typeof w!="function"&&typeof w!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(w==null||typeof w=="function"||typeof w=="boolean"||typeof w=="symbol"){A.removeAttribute("xlink:href");break}p=Uo(""+w),A.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":w!=null&&typeof w!="function"&&typeof w!="symbol"?A.setAttribute(p,""+w):A.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":w&&typeof w!="function"&&typeof w!="symbol"?A.setAttribute(p,""):A.removeAttribute(p);break;case"capture":case"download":w===!0?A.setAttribute(p,""):w!==!1&&w!=null&&typeof w!="function"&&typeof w!="symbol"?A.setAttribute(p,w):A.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":w!=null&&typeof w!="function"&&typeof w!="symbol"&&!isNaN(w)&&1<=w?A.setAttribute(p,w):A.removeAttribute(p);break;case"rowSpan":case"start":w==null||typeof w=="function"||typeof w=="symbol"||isNaN(w)?A.removeAttribute(p):A.setAttribute(p,w);break;case"popover":on("beforetoggle",A),on("toggle",A),jr(A,"popover",w);break;case"xlinkActuate":zr(A,"http://www.w3.org/1999/xlink","xlink:actuate",w);break;case"xlinkArcrole":zr(A,"http://www.w3.org/1999/xlink","xlink:arcrole",w);break;case"xlinkRole":zr(A,"http://www.w3.org/1999/xlink","xlink:role",w);break;case"xlinkShow":zr(A,"http://www.w3.org/1999/xlink","xlink:show",w);break;case"xlinkTitle":zr(A,"http://www.w3.org/1999/xlink","xlink:title",w);break;case"xlinkType":zr(A,"http://www.w3.org/1999/xlink","xlink:type",w);break;case"xmlBase":zr(A,"http://www.w3.org/XML/1998/namespace","xml:base",w);break;case"xmlLang":zr(A,"http://www.w3.org/XML/1998/namespace","xml:lang",w);break;case"xmlSpace":zr(A,"http://www.w3.org/XML/1998/namespace","xml:space",w);break;case"is":jr(A,"is",w);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=Lo.get(p)||p,jr(A,p,w))}}function wC(A,f,p,w,F,H){switch(p){case"style":Gu(A,w,H);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(n(61));if(p=w.__html,p!=null){if(F.children!=null)throw Error(n(60));A.innerHTML=p}}break;case"children":typeof w=="string"?gi(A,w):(typeof w=="number"||typeof w=="bigint")&&gi(A,""+w);break;case"onScroll":w!=null&&on("scroll",A);break;case"onScrollEnd":w!=null&&on("scrollend",A);break;case"onClick":w!=null&&(A.onclick=iv);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Je.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(F=p.endsWith("Capture"),f=p.slice(2,F?p.length-7:void 0),H=A[sn]||null,H=H!=null?H[p]:null,typeof H=="function"&&A.removeEventListener(f,H,F),typeof w=="function")){typeof H!="function"&&H!==null&&(p in A?A[p]=null:A.hasAttribute(p)&&A.removeAttribute(p)),A.addEventListener(f,w,F);break e}p in A?A[p]=w:w===!0?A.setAttribute(p,""):jr(A,p,w)}}}function ii(A,f,p){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":on("error",A),on("load",A);var w=!1,F=!1,H;for(H in p)if(p.hasOwnProperty(H)){var le=p[H];if(le!=null)switch(H){case"src":w=!0;break;case"srcSet":F=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,f));default:Zn(A,f,H,le,p,null)}}F&&Zn(A,f,"srcSet",p.srcSet,p,null),w&&Zn(A,f,"src",p.src,p,null);return;case"input":on("invalid",A);var we=H=le=F=null,De=null,tt=null;for(w in p)if(p.hasOwnProperty(w)){var dt=p[w];if(dt!=null)switch(w){case"name":F=dt;break;case"type":le=dt;break;case"checked":De=dt;break;case"defaultChecked":tt=dt;break;case"value":H=dt;break;case"defaultValue":we=dt;break;case"children":case"dangerouslySetInnerHTML":if(dt!=null)throw Error(n(137,f));break;default:Zn(A,f,w,dt,p,null)}}ul(A,H,we,De,tt,le,F,!1),cl(A);return;case"select":on("invalid",A),w=le=H=null;for(F in p)if(p.hasOwnProperty(F)&&(we=p[F],we!=null))switch(F){case"value":H=we;break;case"defaultValue":le=we;break;case"multiple":w=we;default:Zn(A,f,F,we,p,null)}f=H,p=le,A.multiple=!!w,f!=null?lo(A,!!w,f,!1):p!=null&&lo(A,!!w,p,!0);return;case"textarea":on("invalid",A),H=F=w=null;for(le in p)if(p.hasOwnProperty(le)&&(we=p[le],we!=null))switch(le){case"value":w=we;break;case"defaultValue":F=we;break;case"children":H=we;break;case"dangerouslySetInnerHTML":if(we!=null)throw Error(n(91));break;default:Zn(A,f,le,we,p,null)}dl(A,w,F,H),cl(A);return;case"option":for(De in p)if(p.hasOwnProperty(De)&&(w=p[De],w!=null))switch(De){case"selected":A.selected=w&&typeof w!="function"&&typeof w!="symbol";break;default:Zn(A,f,De,w,p,null)}return;case"dialog":on("beforetoggle",A),on("toggle",A),on("cancel",A),on("close",A);break;case"iframe":case"object":on("load",A);break;case"video":case"audio":for(w=0;w<Pp.length;w++)on(Pp[w],A);break;case"image":on("error",A),on("load",A);break;case"details":on("toggle",A);break;case"embed":case"source":case"link":on("error",A),on("load",A);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(tt in p)if(p.hasOwnProperty(tt)&&(w=p[tt],w!=null))switch(tt){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,f));default:Zn(A,f,tt,w,p,null)}return;default:if(zu(f)){for(dt in p)p.hasOwnProperty(dt)&&(w=p[dt],w!==void 0&&wC(A,f,dt,w,p,void 0));return}}for(we in p)p.hasOwnProperty(we)&&(w=p[we],w!=null&&Zn(A,f,we,w,p,null))}function x9(A,f,p,w){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var F=null,H=null,le=null,we=null,De=null,tt=null,dt=null;for(at in p){var wt=p[at];if(p.hasOwnProperty(at)&&wt!=null)switch(at){case"checked":break;case"value":break;case"defaultValue":De=wt;default:w.hasOwnProperty(at)||Zn(A,f,at,null,w,wt)}}for(var nt in w){var at=w[nt];if(wt=p[nt],w.hasOwnProperty(nt)&&(at!=null||wt!=null))switch(nt){case"type":H=at;break;case"name":F=at;break;case"checked":tt=at;break;case"defaultChecked":dt=at;break;case"value":le=at;break;case"defaultValue":we=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(n(137,f));break;default:at!==wt&&Zn(A,f,nt,at,w,wt)}}Ia(A,le,we,De,tt,dt,H,F);return;case"select":at=le=we=nt=null;for(H in p)if(De=p[H],p.hasOwnProperty(H)&&De!=null)switch(H){case"value":break;case"multiple":at=De;default:w.hasOwnProperty(H)||Zn(A,f,H,null,w,De)}for(F in w)if(H=w[F],De=p[F],w.hasOwnProperty(F)&&(H!=null||De!=null))switch(F){case"value":nt=H;break;case"defaultValue":we=H;break;case"multiple":le=H;default:H!==De&&Zn(A,f,F,H,w,De)}f=we,p=le,w=at,nt!=null?lo(A,!!p,nt,!1):!!w!=!!p&&(f!=null?lo(A,!!p,f,!0):lo(A,!!p,p?[]:"",!1));return;case"textarea":at=nt=null;for(we in p)if(F=p[we],p.hasOwnProperty(we)&&F!=null&&!w.hasOwnProperty(we))switch(we){case"value":break;case"children":break;default:Zn(A,f,we,null,w,F)}for(le in w)if(F=w[le],H=p[le],w.hasOwnProperty(le)&&(F!=null||H!=null))switch(le){case"value":nt=F;break;case"defaultValue":at=F;break;case"children":break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(n(91));break;default:F!==H&&Zn(A,f,le,F,w,H)}_n(A,nt,at);return;case"option":for(var Nr in p)if(nt=p[Nr],p.hasOwnProperty(Nr)&&nt!=null&&!w.hasOwnProperty(Nr))switch(Nr){case"selected":A.selected=!1;break;default:Zn(A,f,Nr,null,w,nt)}for(De in w)if(nt=w[De],at=p[De],w.hasOwnProperty(De)&&nt!==at&&(nt!=null||at!=null))switch(De){case"selected":A.selected=nt&&typeof nt!="function"&&typeof nt!="symbol";break;default:Zn(A,f,De,nt,w,at)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pr in p)nt=p[pr],p.hasOwnProperty(pr)&&nt!=null&&!w.hasOwnProperty(pr)&&Zn(A,f,pr,null,w,nt);for(tt in w)if(nt=w[tt],at=p[tt],w.hasOwnProperty(tt)&&nt!==at&&(nt!=null||at!=null))switch(tt){case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(n(137,f));break;default:Zn(A,f,tt,nt,w,at)}return;default:if(zu(f)){for(var es in p)nt=p[es],p.hasOwnProperty(es)&&nt!==void 0&&!w.hasOwnProperty(es)&&wC(A,f,es,void 0,w,nt);for(dt in w)nt=w[dt],at=p[dt],!w.hasOwnProperty(dt)||nt===at||nt===void 0&&at===void 0||wC(A,f,dt,nt,w,at);return}}for(var ze in p)nt=p[ze],p.hasOwnProperty(ze)&&nt!=null&&!w.hasOwnProperty(ze)&&Zn(A,f,ze,null,w,nt);for(wt in w)nt=w[wt],at=p[wt],!w.hasOwnProperty(wt)||nt===at||nt==null&&at==null||Zn(A,f,wt,nt,w,at)}var bC=null,CC=null;function ov(A){return A.nodeType===9?A:A.ownerDocument}function DB(A){switch(A){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function RB(A,f){if(A===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return A===1&&f==="foreignObject"?0:A}function EC(A,f){return A==="textarea"||A==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var _C=null;function v9(){var A=window.event;return A&&A.type==="popstate"?A===_C?!1:(_C=A,!0):(_C=null,!1)}var LB=typeof setTimeout=="function"?setTimeout:void 0,y9=typeof clearTimeout=="function"?clearTimeout:void 0,UB=typeof Promise=="function"?Promise:void 0,w9=typeof queueMicrotask=="function"?queueMicrotask:typeof UB<"u"?function(A){return UB.resolve(null).then(A).catch(b9)}:LB;function b9(A){setTimeout(function(){throw A})}function Cd(A){return A==="head"}function MB(A,f){var p=f,w=0,F=0;do{var H=p.nextSibling;if(A.removeChild(p),H&&H.nodeType===8)if(p=H.data,p==="/$"){if(0<w&&8>w){p=w;var le=A.ownerDocument;if(p&1&&Op(le.documentElement),p&2&&Op(le.body),p&4)for(p=le.head,Op(p),le=p.firstChild;le;){var we=le.nextSibling,De=le.nodeName;le[_e]||De==="SCRIPT"||De==="STYLE"||De==="LINK"&&le.rel.toLowerCase()==="stylesheet"||p.removeChild(le),le=we}}if(F===0){A.removeChild(H),$p(f);return}F--}else p==="$"||p==="$?"||p==="$!"?F++:w=p.charCodeAt(0)-48;else w=0;p=H}while(p);$p(f)}function SC(A){var f=A.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var p=f;switch(f=f.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":SC(p),Se(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}A.removeChild(p)}}function C9(A,f,p,w){for(;A.nodeType===1;){var F=p;if(A.nodeName.toLowerCase()!==f.toLowerCase()){if(!w&&(A.nodeName!=="INPUT"||A.type!=="hidden"))break}else if(w){if(!A[_e])switch(f){case"meta":if(!A.hasAttribute("itemprop"))break;return A;case"link":if(H=A.getAttribute("rel"),H==="stylesheet"&&A.hasAttribute("data-precedence"))break;if(H!==F.rel||A.getAttribute("href")!==(F.href==null||F.href===""?null:F.href)||A.getAttribute("crossorigin")!==(F.crossOrigin==null?null:F.crossOrigin)||A.getAttribute("title")!==(F.title==null?null:F.title))break;return A;case"style":if(A.hasAttribute("data-precedence"))break;return A;case"script":if(H=A.getAttribute("src"),(H!==(F.src==null?null:F.src)||A.getAttribute("type")!==(F.type==null?null:F.type)||A.getAttribute("crossorigin")!==(F.crossOrigin==null?null:F.crossOrigin))&&H&&A.hasAttribute("async")&&!A.hasAttribute("itemprop"))break;return A;default:return A}}else if(f==="input"&&A.type==="hidden"){var H=F.name==null?null:""+F.name;if(F.type==="hidden"&&A.getAttribute("name")===H)return A}else return A;if(A=vc(A.nextSibling),A===null)break}return null}function E9(A,f,p){if(f==="")return null;for(;A.nodeType!==3;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!p||(A=vc(A.nextSibling),A===null))return null;return A}function TC(A){return A.data==="$!"||A.data==="$?"&&A.ownerDocument.readyState==="complete"}function _9(A,f){var p=A.ownerDocument;if(A.data!=="$?"||p.readyState==="complete")f();else{var w=function(){f(),p.removeEventListener("DOMContentLoaded",w)};p.addEventListener("DOMContentLoaded",w),A._reactRetry=w}}function vc(A){for(;A!=null;A=A.nextSibling){var f=A.nodeType;if(f===1||f===3)break;if(f===8){if(f=A.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return A}var NC=null;function PB(A){A=A.previousSibling;for(var f=0;A;){if(A.nodeType===8){var p=A.data;if(p==="$"||p==="$!"||p==="$?"){if(f===0)return A;f--}else p==="/$"&&f++}A=A.previousSibling}return null}function jB(A,f,p){switch(f=ov(p),A){case"html":if(A=f.documentElement,!A)throw Error(n(452));return A;case"head":if(A=f.head,!A)throw Error(n(453));return A;case"body":if(A=f.body,!A)throw Error(n(454));return A;default:throw Error(n(451))}}function Op(A){for(var f=A.attributes;f.length;)A.removeAttributeNode(f[0]);Se(A)}var Il=new Map,OB=new Set;function lv(A){return typeof A.getRootNode=="function"?A.getRootNode():A.nodeType===9?A:A.ownerDocument}var gA=re.d;re.d={f:S9,r:T9,D:N9,C:B9,L:k9,m:I9,X:D9,S:F9,M:R9};function S9(){var A=gA.f(),f=Z1();return A||f}function T9(A){var f=Ie(A);f!==null&&f.tag===5&&f.type==="form"?Wf(f):gA.r(A)}var S0=typeof document>"u"?null:document;function QB(A,f,p){var w=S0;if(w&&typeof f=="string"&&f){var F=hn(f);F='link[rel="'+A+'"][href="'+F+'"]',typeof p=="string"&&(F+='[crossorigin="'+p+'"]'),OB.has(F)||(OB.add(F),A={rel:A,crossOrigin:p,href:f},w.querySelector(F)===null&&(f=w.createElement("link"),ii(f,"link",A),He(f),w.head.appendChild(f)))}}function N9(A){gA.D(A),QB("dns-prefetch",A,null)}function B9(A,f){gA.C(A,f),QB("preconnect",A,f)}function k9(A,f,p){gA.L(A,f,p);var w=S0;if(w&&A&&f){var F='link[rel="preload"][as="'+hn(f)+'"]';f==="image"&&p&&p.imageSrcSet?(F+='[imagesrcset="'+hn(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(F+='[imagesizes="'+hn(p.imageSizes)+'"]')):F+='[href="'+hn(A)+'"]';var H=F;switch(f){case"style":H=T0(A);break;case"script":H=N0(A)}Il.has(H)||(A=d({rel:"preload",href:f==="image"&&p&&p.imageSrcSet?void 0:A,as:f},p),Il.set(H,A),w.querySelector(F)!==null||f==="style"&&w.querySelector(Qp(H))||f==="script"&&w.querySelector(Hp(H))||(f=w.createElement("link"),ii(f,"link",A),He(f),w.head.appendChild(f)))}}function I9(A,f){gA.m(A,f);var p=S0;if(p&&A){var w=f&&typeof f.as=="string"?f.as:"script",F='link[rel="modulepreload"][as="'+hn(w)+'"][href="'+hn(A)+'"]',H=F;switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":H=N0(A)}if(!Il.has(H)&&(A=d({rel:"modulepreload",href:A},f),Il.set(H,A),p.querySelector(F)===null)){switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(Hp(H)))return}w=p.createElement("link"),ii(w,"link",A),He(w),p.head.appendChild(w)}}}function F9(A,f,p){gA.S(A,f,p);var w=S0;if(w&&A){var F=rt(w).hoistableStyles,H=T0(A);f=f||"default";var le=F.get(H);if(!le){var we={loading:0,preload:null};if(le=w.querySelector(Qp(H)))we.loading=5;else{A=d({rel:"stylesheet",href:A,"data-precedence":f},p),(p=Il.get(H))&&BC(A,p);var De=le=w.createElement("link");He(De),ii(De,"link",A),De._p=new Promise(function(tt,dt){De.onload=tt,De.onerror=dt}),De.addEventListener("load",function(){we.loading|=1}),De.addEventListener("error",function(){we.loading|=2}),we.loading|=4,cv(le,f,w)}le={type:"stylesheet",instance:le,count:1,state:we},F.set(H,le)}}}function D9(A,f){gA.X(A,f);var p=S0;if(p&&A){var w=rt(p).hoistableScripts,F=N0(A),H=w.get(F);H||(H=p.querySelector(Hp(F)),H||(A=d({src:A,async:!0},f),(f=Il.get(F))&&kC(A,f),H=p.createElement("script"),He(H),ii(H,"link",A),p.head.appendChild(H)),H={type:"script",instance:H,count:1,state:null},w.set(F,H))}}function R9(A,f){gA.M(A,f);var p=S0;if(p&&A){var w=rt(p).hoistableScripts,F=N0(A),H=w.get(F);H||(H=p.querySelector(Hp(F)),H||(A=d({src:A,async:!0,type:"module"},f),(f=Il.get(F))&&kC(A,f),H=p.createElement("script"),He(H),ii(H,"link",A),p.head.appendChild(H)),H={type:"script",instance:H,count:1,state:null},w.set(F,H))}}function HB(A,f,p,w){var F=(F=ce.current)?lv(F):null;if(!F)throw Error(n(446));switch(A){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(f=T0(p.href),p=rt(F).hoistableStyles,w=p.get(f),w||(w={type:"style",instance:null,count:0,state:null},p.set(f,w)),w):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){A=T0(p.href);var H=rt(F).hoistableStyles,le=H.get(A);if(le||(F=F.ownerDocument||F,le={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},H.set(A,le),(H=F.querySelector(Qp(A)))&&!H._p&&(le.instance=H,le.state.loading=5),Il.has(A)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Il.set(A,p),H||L9(F,A,p,le.state))),f&&w===null)throw Error(n(528,""));return le}if(f&&w!==null)throw Error(n(529,""));return null;case"script":return f=p.async,p=p.src,typeof p=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=N0(p),p=rt(F).hoistableScripts,w=p.get(f),w||(w={type:"script",instance:null,count:0,state:null},p.set(f,w)),w):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,A))}}function T0(A){return'href="'+hn(A)+'"'}function Qp(A){return'link[rel="stylesheet"]['+A+"]"}function VB(A){return d({},A,{"data-precedence":A.precedence,precedence:null})}function L9(A,f,p,w){A.querySelector('link[rel="preload"][as="style"]['+f+"]")?w.loading=1:(f=A.createElement("link"),w.preload=f,f.addEventListener("load",function(){return w.loading|=1}),f.addEventListener("error",function(){return w.loading|=2}),ii(f,"link",p),He(f),A.head.appendChild(f))}function N0(A){return'[src="'+hn(A)+'"]'}function Hp(A){return"script[async]"+A}function GB(A,f,p){if(f.count++,f.instance===null)switch(f.type){case"style":var w=A.querySelector('style[data-href~="'+hn(p.href)+'"]');if(w)return f.instance=w,He(w),w;var F=d({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return w=(A.ownerDocument||A).createElement("style"),He(w),ii(w,"style",F),cv(w,p.precedence,A),f.instance=w;case"stylesheet":F=T0(p.href);var H=A.querySelector(Qp(F));if(H)return f.state.loading|=4,f.instance=H,He(H),H;w=VB(p),(F=Il.get(F))&&BC(w,F),H=(A.ownerDocument||A).createElement("link"),He(H);var le=H;return le._p=new Promise(function(we,De){le.onload=we,le.onerror=De}),ii(H,"link",w),f.state.loading|=4,cv(H,p.precedence,A),f.instance=H;case"script":return H=N0(p.src),(F=A.querySelector(Hp(H)))?(f.instance=F,He(F),F):(w=p,(F=Il.get(H))&&(w=d({},p),kC(w,F)),A=A.ownerDocument||A,F=A.createElement("script"),He(F),ii(F,"link",w),A.head.appendChild(F),f.instance=F);case"void":return null;default:throw Error(n(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(w=f.instance,f.state.loading|=4,cv(w,p.precedence,A));return f.instance}function cv(A,f,p){for(var w=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),F=w.length?w[w.length-1]:null,H=F,le=0;le<w.length;le++){var we=w[le];if(we.dataset.precedence===f)H=we;else if(H!==F)break}H?H.parentNode.insertBefore(A,H.nextSibling):(f=p.nodeType===9?p.head:p,f.insertBefore(A,f.firstChild))}function BC(A,f){A.crossOrigin==null&&(A.crossOrigin=f.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=f.referrerPolicy),A.title==null&&(A.title=f.title)}function kC(A,f){A.crossOrigin==null&&(A.crossOrigin=f.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=f.referrerPolicy),A.integrity==null&&(A.integrity=f.integrity)}var uv=null;function zB(A,f,p){if(uv===null){var w=new Map,F=uv=new Map;F.set(p,w)}else F=uv,w=F.get(p),w||(w=new Map,F.set(p,w));if(w.has(A))return w;for(w.set(A,null),p=p.getElementsByTagName(A),F=0;F<p.length;F++){var H=p[F];if(!(H[_e]||H[fn]||A==="link"&&H.getAttribute("rel")==="stylesheet")&&H.namespaceURI!=="http://www.w3.org/2000/svg"){var le=H.getAttribute(f)||"";le=A+le;var we=w.get(le);we?we.push(H):w.set(le,[H])}}return w}function qB(A,f,p){A=A.ownerDocument||A,A.head.insertBefore(p,f==="title"?A.querySelector("head > title"):null)}function U9(A,f,p){if(p===1||f.itemProp!=null)return!1;switch(A){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return A=f.disabled,typeof f.precedence=="string"&&A==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function KB(A){return!(A.type==="stylesheet"&&(A.state.loading&3)===0)}var Vp=null;function M9(){}function P9(A,f,p){if(Vp===null)throw Error(n(475));var w=Vp;if(f.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var F=T0(p.href),H=A.querySelector(Qp(F));if(H){A=H._p,A!==null&&typeof A=="object"&&typeof A.then=="function"&&(w.count++,w=Av.bind(w),A.then(w,w)),f.state.loading|=4,f.instance=H,He(H);return}H=A.ownerDocument||A,p=VB(p),(F=Il.get(F))&&BC(p,F),H=H.createElement("link"),He(H);var le=H;le._p=new Promise(function(we,De){le.onload=we,le.onerror=De}),ii(H,"link",p),f.instance=H}w.stylesheets===null&&(w.stylesheets=new Map),w.stylesheets.set(f,A),(A=f.state.preload)&&(f.state.loading&3)===0&&(w.count++,f=Av.bind(w),A.addEventListener("load",f),A.addEventListener("error",f))}}function j9(){if(Vp===null)throw Error(n(475));var A=Vp;return A.stylesheets&&A.count===0&&IC(A,A.stylesheets),0<A.count?function(f){var p=setTimeout(function(){if(A.stylesheets&&IC(A,A.stylesheets),A.unsuspend){var w=A.unsuspend;A.unsuspend=null,w()}},6e4);return A.unsuspend=f,function(){A.unsuspend=null,clearTimeout(p)}}:null}function Av(){if(this.count--,this.count===0){if(this.stylesheets)IC(this,this.stylesheets);else if(this.unsuspend){var A=this.unsuspend;this.unsuspend=null,A()}}}var dv=null;function IC(A,f){A.stylesheets=null,A.unsuspend!==null&&(A.count++,dv=new Map,f.forEach(O9,A),dv=null,Av.call(A))}function O9(A,f){if(!(f.state.loading&4)){var p=dv.get(A);if(p)var w=p.get(null);else{p=new Map,dv.set(A,p);for(var F=A.querySelectorAll("link[data-precedence],style[data-precedence]"),H=0;H<F.length;H++){var le=F[H];(le.nodeName==="LINK"||le.getAttribute("media")!=="not all")&&(p.set(le.dataset.precedence,le),w=le)}w&&p.set(null,w)}F=f.instance,le=F.getAttribute("data-precedence"),H=p.get(le)||w,H===w&&p.set(null,F),p.set(le,F),this.count++,w=Av.bind(this),F.addEventListener("load",w),F.addEventListener("error",w),H?H.parentNode.insertBefore(F,H.nextSibling):(A=A.nodeType===9?A.head:A,A.insertBefore(F,A.firstChild)),f.state.loading|=4}}var Gp={$$typeof:R,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function Q9(A,f,p,w,F,H,le,we){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ns(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ns(0),this.hiddenUpdates=ns(null),this.identifierPrefix=w,this.onUncaughtError=F,this.onCaughtError=H,this.onRecoverableError=le,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=we,this.incompleteTransitions=new Map}function $B(A,f,p,w,F,H,le,we,De,tt,dt,wt){return A=new Q9(A,f,p,le,we,De,tt,wt),f=1,H===!0&&(f|=24),H=Va(3,null,null,f),A.current=H,H.stateNode=A,f=fp(),f.refCount++,A.pooledCache=f,f.refCount++,H.memoizedState={element:w,isDehydrated:p,cache:f},Me(H),A}function WB(A){return A?(A=ga,A):ga}function YB(A,f,p,w,F,H){F=WB(F),w.context===null?w.context=F:w.pendingContext=F,w=ut(f),w.payload={element:p},H=H===void 0?null:H,H!==null&&(w.callback=H),p=vt(A,w,f),p!==null&&(Yo(p,A,f),ft(p,A,f))}function XB(A,f){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var p=A.retryLane;A.retryLane=p!==0&&p<f?p:f}}function FC(A,f){XB(A,f),(A=A.alternate)&&XB(A,f)}function JB(A){if(A.tag===13){var f=ic(A,67108864);f!==null&&Yo(f,A,67108864),FC(A,67108864)}}var fv=!0;function H9(A,f,p,w){var F=J.T;J.T=null;var H=re.p;try{re.p=2,DC(A,f,p,w)}finally{re.p=H,J.T=F}}function V9(A,f,p,w){var F=J.T;J.T=null;var H=re.p;try{re.p=8,DC(A,f,p,w)}finally{re.p=H,J.T=F}}function DC(A,f,p,w){if(fv){var F=RC(w);if(F===null)yC(A,f,w,hv,p),ek(A,w);else if(z9(F,A,f,p,w))w.stopPropagation();else if(ek(A,w),f&4&&-1<G9.indexOf(A)){for(;F!==null;){var H=Ie(F);if(H!==null)switch(H.tag){case 3:if(H=H.stateNode,H.current.memoizedState.isDehydrated){var le=gr(H.pendingLanes);if(le!==0){var we=H;for(we.pendingLanes|=2,we.entangledLanes|=2;le;){var De=1<<31-Lt(le);we.entanglements[1]|=De,le&=~De}hu(H),(Hn&6)===0&&(X1=je()+500,Mp(0))}}break;case 13:we=ic(H,2),we!==null&&Yo(we,H,2),Z1(),FC(H,2)}if(H=RC(w),H===null&&yC(A,f,w,hv,p),H===F)break;F=H}F!==null&&w.stopPropagation()}else yC(A,f,w,null,p)}}function RC(A){return A=On(A),LC(A)}var hv=null;function LC(A){if(hv=null,A=Ne(A),A!==null){var f=a(A);if(f===null)A=null;else{var p=f.tag;if(p===13){if(A=i(f),A!==null)return A;A=null}else if(p===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;A=null}else f!==A&&(A=null)}}return hv=A,null}function ZB(A){switch(A){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qe()){case st:return 2;case mt:return 8;case Et:case lt:return 32;case kt:return 268435456;default:return 32}default:return 32}}var UC=!1,Ed=null,_d=null,Sd=null,zp=new Map,qp=new Map,Td=[],G9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ek(A,f){switch(A){case"focusin":case"focusout":Ed=null;break;case"dragenter":case"dragleave":_d=null;break;case"mouseover":case"mouseout":Sd=null;break;case"pointerover":case"pointerout":zp.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":qp.delete(f.pointerId)}}function Kp(A,f,p,w,F,H){return A===null||A.nativeEvent!==H?(A={blockedOn:f,domEventName:p,eventSystemFlags:w,nativeEvent:H,targetContainers:[F]},f!==null&&(f=Ie(f),f!==null&&JB(f)),A):(A.eventSystemFlags|=w,f=A.targetContainers,F!==null&&f.indexOf(F)===-1&&f.push(F),A)}function z9(A,f,p,w,F){switch(f){case"focusin":return Ed=Kp(Ed,A,f,p,w,F),!0;case"dragenter":return _d=Kp(_d,A,f,p,w,F),!0;case"mouseover":return Sd=Kp(Sd,A,f,p,w,F),!0;case"pointerover":var H=F.pointerId;return zp.set(H,Kp(zp.get(H)||null,A,f,p,w,F)),!0;case"gotpointercapture":return H=F.pointerId,qp.set(H,Kp(qp.get(H)||null,A,f,p,w,F)),!0}return!1}function tk(A){var f=Ne(A.target);if(f!==null){var p=a(f);if(p!==null){if(f=p.tag,f===13){if(f=i(p),f!==null){A.blockedOn=f,Na(A.priority,function(){if(p.tag===13){var w=Wo();w=fa(w);var F=ic(p,w);F!==null&&Yo(F,p,w),FC(p,w)}});return}}else if(f===3&&p.stateNode.current.memoizedState.isDehydrated){A.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}A.blockedOn=null}function mv(A){if(A.blockedOn!==null)return!1;for(var f=A.targetContainers;0<f.length;){var p=RC(A.nativeEvent);if(p===null){p=A.nativeEvent;var w=new p.constructor(p.type,p);co=w,p.target.dispatchEvent(w),co=null}else return f=Ie(p),f!==null&&JB(f),A.blockedOn=p,!1;f.shift()}return!0}function rk(A,f,p){mv(A)&&p.delete(f)}function q9(){UC=!1,Ed!==null&&mv(Ed)&&(Ed=null),_d!==null&&mv(_d)&&(_d=null),Sd!==null&&mv(Sd)&&(Sd=null),zp.forEach(rk),qp.forEach(rk)}function pv(A,f){A.blockedOn===f&&(A.blockedOn=null,UC||(UC=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,q9)))}var gv=null;function nk(A){gv!==A&&(gv=A,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){gv===A&&(gv=null);for(var f=0;f<A.length;f+=3){var p=A[f],w=A[f+1],F=A[f+2];if(typeof w!="function"){if(LC(w||p)===null)continue;break}var H=Ie(p);H!==null&&(A.splice(f,3),f-=3,Nl(H,{pending:!0,data:F,method:p.method,action:w},w,F))}}))}function $p(A){function f(De){return pv(De,A)}Ed!==null&&pv(Ed,A),_d!==null&&pv(_d,A),Sd!==null&&pv(Sd,A),zp.forEach(f),qp.forEach(f);for(var p=0;p<Td.length;p++){var w=Td[p];w.blockedOn===A&&(w.blockedOn=null)}for(;0<Td.length&&(p=Td[0],p.blockedOn===null);)tk(p),p.blockedOn===null&&Td.shift();if(p=(A.ownerDocument||A).$$reactFormReplay,p!=null)for(w=0;w<p.length;w+=3){var F=p[w],H=p[w+1],le=F[sn]||null;if(typeof H=="function")le||nk(p);else if(le){var we=null;if(H&&H.hasAttribute("formAction")){if(F=H,le=H[sn]||null)we=le.formAction;else if(LC(F)!==null)continue}else we=le.action;typeof we=="function"?p[w+1]=we:(p.splice(w,3),w-=3),nk(p)}}}function MC(A){this._internalRoot=A}xv.prototype.render=MC.prototype.render=function(A){var f=this._internalRoot;if(f===null)throw Error(n(409));var p=f.current,w=Wo();YB(p,w,A,f,null,null)},xv.prototype.unmount=MC.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var f=A.containerInfo;YB(A.current,2,null,A,null,null),Z1(),f[Rn]=null}};function xv(A){this._internalRoot=A}xv.prototype.unstable_scheduleHydration=function(A){if(A){var f=Es();A={blockedOn:null,target:A,priority:f};for(var p=0;p<Td.length&&f!==0&&f<Td[p].priority;p++);Td.splice(p,0,A),p===0&&tk(A)}};var sk=e.version;if(sk!=="19.1.1")throw Error(n(527,sk,"19.1.1"));re.findDOMNode=function(A){var f=A._reactInternals;if(f===void 0)throw typeof A.render=="function"?Error(n(188)):(A=Object.keys(A).join(","),Error(n(268,A)));return A=l(f),A=A!==null?u(A):null,A=A===null?null:A.stateNode,A};var K9={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vv.isDisabled&&vv.supportsFiber)try{It=vv.inject(K9),Dt=vv}catch{}}return Yp.createRoot=function(A,f){if(!s(A))throw Error(n(299));var p=!1,w="",F=yN,H=wN,le=bN,we=null;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(w=f.identifierPrefix),f.onUncaughtError!==void 0&&(F=f.onUncaughtError),f.onCaughtError!==void 0&&(H=f.onCaughtError),f.onRecoverableError!==void 0&&(le=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(we=f.unstable_transitionCallbacks)),f=$B(A,1,!1,null,null,p,w,F,H,le,we,null),A[Rn]=f.current,vC(A),new MC(f)},Yp.hydrateRoot=function(A,f,p){if(!s(A))throw Error(n(299));var w=!1,F="",H=yN,le=wN,we=bN,De=null,tt=null;return p!=null&&(p.unstable_strictMode===!0&&(w=!0),p.identifierPrefix!==void 0&&(F=p.identifierPrefix),p.onUncaughtError!==void 0&&(H=p.onUncaughtError),p.onCaughtError!==void 0&&(le=p.onCaughtError),p.onRecoverableError!==void 0&&(we=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(De=p.unstable_transitionCallbacks),p.formState!==void 0&&(tt=p.formState)),f=$B(A,1,!0,f,p??null,w,F,H,le,we,De,tt),f.context=WB(null),p=f.current,w=Wo(),w=fa(w),F=ut(w),F.callback=null,vt(p,F,w),p=w,f.current.lanes=p,ps(f,p),hu(f),A[Rn]=f.current,vC(A),new xv(f)},Yp.version="19.1.1",Yp}var hk;function rV(){if(hk)return OC.exports;hk=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),OC.exports=tV(),OC.exports}var nV=rV();const sV=E5(nV),aV=()=>{};var mk={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},iV=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[r++];e[n++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[r++],i=t[r++],o=t[r++],l=((s&7)<<18|(a&63)<<12|(i&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const a=t[r++],i=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(a&63)<<6|i&63)}}return e.join("")},GL={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const a=t[s],i=s+1<t.length,o=i?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,d=a>>2,h=(a&3)<<4|o>>4;let m=(o&15)<<2|u>>6,g=u&63;l||(g=64,i||(m=64)),n.push(r[d],r[h],r[m],r[g])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(VL(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const a=r[t.charAt(s++)],o=s<t.length?r[t.charAt(s)]:0;++s;const u=s<t.length?r[t.charAt(s)]:64;++s;const h=s<t.length?r[t.charAt(s)]:64;if(++s,a==null||o==null||u==null||h==null)throw new oV;const m=a<<2|o>>4;if(n.push(m),u!==64){const g=o<<4&240|u>>2;if(n.push(g),h!==64){const b=u<<6&192|h;n.push(b)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class oV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lV=function(t){const e=VL(t);return GL.encodeByteArray(e,!0)},Jy=function(t){return lV(t).replace(/\./g,"")},zL=function(t){try{return GL.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uV=()=>cV().__FIREBASE_DEFAULTS__,AV=()=>{if(typeof process>"u"||typeof mk>"u")return;const t=mk.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},dV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&zL(t[1]);return e&&JSON.parse(e)},fw=()=>{try{return aV()||uV()||AV()||dV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},qL=t=>{var e,r;return(r=(e=fw())==null?void 0:e.emulatorHosts)==null?void 0:r[t]},KL=t=>{const e=qL(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},$L=()=>{var t;return(t=fw())==null?void 0:t.config},WL=t=>{var e;return(e=fw())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _5(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hV(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Jy(JSON.stringify(r)),Jy(JSON.stringify(i)),""].join(".")}const Dg={};function mV(){const t={prod:[],emulator:[]};for(const e of Object.keys(Dg))Dg[e]?t.emulator.push(e):t.prod.push(e);return t}function pV(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let pk=!1;function S5(t,e){if(typeof window>"u"||typeof document>"u"||!Qh(window.location.host)||Dg[t]===e||Dg[t]||pk)return;Dg[t]=e;function r(m){return`__firebase__banner__${m}`}const n="__firebase__banner",a=mV().prod.length>0;function i(){const m=document.getElementById(n);m&&m.remove()}function o(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,g){m.setAttribute("width","24"),m.setAttribute("id",g),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{pk=!0,i()},m}function d(m,g){m.setAttribute("id",g),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function h(){const m=pV(n),g=r("text"),b=document.getElementById(g)||document.createElement("span"),y=r("learnmore"),_=document.getElementById(y)||document.createElement("a"),N=r("preprendIcon"),k=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const R=m.element;o(R),d(_,y);const M=u();l(k,N),R.append(k,b,_,M),document.body.appendChild(R)}a?(b.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qi())}function xV(){var e;const t=(e=fw())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yV(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function wV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bV(){const t=qi();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function CV(){return!xV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function EV(){try{return typeof indexedDB=="object"}catch{return!1}}function _V(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV="FirebaseError";class Uu extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=SV,Object.setPrototypeOf(this,Uu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vx.prototype.create)}}class Vx{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,a=this.errors[e],i=a?TV(a,n):"Error",o=`${this.serviceName}: ${i} (${s}).`;return new Uu(s,o,n)}}function TV(t,e){return t.replace(NV,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const NV=/\{\$([^}]+)}/g;function BV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function df(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const a=t[s],i=e[s];if(gk(a)&&gk(i)){if(!df(a,i))return!1}else if(a!==i)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function gk(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function dg(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,a]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function fg(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function kV(t,e){const r=new IV(t,e);return r.subscribe.bind(r)}class IV{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");FV(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=GC),s.error===void 0&&(s.error=GC),s.complete===void 0&&(s.complete=GC);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function FV(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function GC(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bs(t){return t&&t._delegate?t._delegate:t}class ff{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DV=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new fV;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(LV(e))try{this.getOrInitializeService({instanceIdentifier:sh})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:s});n.resolve(a)}catch{}}}}clearInstance(e=sh){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=sh){return this.instances.has(e)}getOptions(e=sh){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[a,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);n===o&&i.resolve(s)}return s}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),s=this.onInitCallbacks.get(n)??new Set;s.add(e),this.onInitCallbacks.set(n,s);const a=this.instances.get(n);return a&&e(a,n),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:RV(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=sh){return this.component?this.component.multipleInstances?e:sh:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function RV(t){return t===sh?void 0:t}function LV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new DV(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(cn||(cn={}));const MV={debug:cn.DEBUG,verbose:cn.VERBOSE,info:cn.INFO,warn:cn.WARN,error:cn.ERROR,silent:cn.SILENT},PV=cn.INFO,jV={[cn.DEBUG]:"log",[cn.VERBOSE]:"log",[cn.INFO]:"info",[cn.WARN]:"warn",[cn.ERROR]:"error"},OV=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=jV[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let T5=class{constructor(e){this.name=e,this._logLevel=PV,this._logHandler=OV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in cn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?MV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,cn.DEBUG,...e),this._logHandler(this,cn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,cn.VERBOSE,...e),this._logHandler(this,cn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,cn.INFO,...e),this._logHandler(this,cn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,cn.WARN,...e),this._logHandler(this,cn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,cn.ERROR,...e),this._logHandler(this,cn.ERROR,...e)}};const QV=(t,e)=>e.some(r=>t instanceof r);let xk,vk;function HV(){return xk||(xk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VV(){return vk||(vk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const YL=new WeakMap,C_=new WeakMap,XL=new WeakMap,zC=new WeakMap,N5=new WeakMap;function GV(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",i)},a=()=>{r(ef(t.result)),s()},i=()=>{n(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",i)});return e.then(r=>{r instanceof IDBCursor&&YL.set(r,t)}).catch(()=>{}),N5.set(e,t),e}function zV(t){if(C_.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",i),t.removeEventListener("abort",i)},a=()=>{r(),s()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",i),t.addEventListener("abort",i)});C_.set(t,e)}let E_={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return C_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||XL.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return ef(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function qV(t){E_=t(E_)}function KV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(qC(this),e,...r);return XL.set(n,e.sort?e.sort():[e]),ef(n)}:VV().includes(t)?function(...e){return t.apply(qC(this),e),ef(YL.get(this))}:function(...e){return ef(t.apply(qC(this),e))}}function $V(t){return typeof t=="function"?KV(t):(t instanceof IDBTransaction&&zV(t),QV(t,HV())?new Proxy(t,E_):t)}function ef(t){if(t instanceof IDBRequest)return GV(t);if(zC.has(t))return zC.get(t);const e=$V(t);return e!==t&&(zC.set(t,e),N5.set(e,t)),e}const qC=t=>N5.get(t);function WV(t,e,{blocked:r,upgrade:n,blocking:s,terminated:a}={}){const i=indexedDB.open(t,e),o=ef(i);return n&&i.addEventListener("upgradeneeded",l=>{n(ef(i.result),l.oldVersion,l.newVersion,ef(i.transaction),l)}),r&&i.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{a&&l.addEventListener("close",()=>a()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const YV=["get","getKey","getAll","getAllKeys","count"],XV=["put","add","delete","clear"],KC=new Map;function yk(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(KC.get(e))return KC.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=XV.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||YV.includes(r)))return;const a=async function(i,...o){const l=this.transaction(i,s?"readwrite":"readonly");let u=l.store;return n&&(u=u.index(o.shift())),(await Promise.all([u[r](...o),s&&l.done]))[0]};return KC.set(e,a),a}qV(t=>({...t,get:(e,r,n)=>yk(e,r)||t.get(e,r,n),has:(e,r)=>!!yk(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(ZV(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function ZV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const __="@firebase/app",wk="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA=new T5("@firebase/app"),eG="@firebase/app-compat",tG="@firebase/analytics-compat",rG="@firebase/analytics",nG="@firebase/app-check-compat",sG="@firebase/app-check",aG="@firebase/auth",iG="@firebase/auth-compat",oG="@firebase/database",lG="@firebase/data-connect",cG="@firebase/database-compat",uG="@firebase/functions",AG="@firebase/functions-compat",dG="@firebase/installations",fG="@firebase/installations-compat",hG="@firebase/messaging",mG="@firebase/messaging-compat",pG="@firebase/performance",gG="@firebase/performance-compat",xG="@firebase/remote-config",vG="@firebase/remote-config-compat",yG="@firebase/storage",wG="@firebase/storage-compat",bG="@firebase/firestore",CG="@firebase/ai",EG="@firebase/firestore-compat",_G="firebase",SG="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_="[DEFAULT]",TG={[__]:"fire-core",[eG]:"fire-core-compat",[rG]:"fire-analytics",[tG]:"fire-analytics-compat",[sG]:"fire-app-check",[nG]:"fire-app-check-compat",[aG]:"fire-auth",[iG]:"fire-auth-compat",[oG]:"fire-rtdb",[lG]:"fire-data-connect",[cG]:"fire-rtdb-compat",[uG]:"fire-fn",[AG]:"fire-fn-compat",[dG]:"fire-iid",[fG]:"fire-iid-compat",[hG]:"fire-fcm",[mG]:"fire-fcm-compat",[pG]:"fire-perf",[gG]:"fire-perf-compat",[xG]:"fire-rc",[vG]:"fire-rc-compat",[yG]:"fire-gcs",[wG]:"fire-gcs-compat",[bG]:"fire-fst",[EG]:"fire-fst-compat",[CG]:"fire-vertex","fire-js":"fire-js",[_G]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx=new Map,NG=new Map,T_=new Map;function bk(t,e){try{t.container.addComponent(e)}catch(r){DA.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Th(t){const e=t.name;if(T_.has(e))return DA.debug(`There were multiple attempts to register component ${e}.`),!1;T_.set(e,t);for(const r of nx.values())bk(r,t);for(const r of NG.values())bk(r,t);return!0}function hw(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Ol(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BG={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},tf=new Vx("app","Firebase",BG);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kG{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ff("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw tf.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m=SG;function B5(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:S_,automaticDataCollectionEnabled:!0,...e},s=n.name;if(typeof s!="string"||!s)throw tf.create("bad-app-name",{appName:String(s)});if(r||(r=$L()),!r)throw tf.create("no-options");const a=nx.get(s);if(a){if(df(r,a.options)&&df(n,a.config))return a;throw tf.create("duplicate-app",{appName:s})}const i=new UV(s);for(const l of T_.values())i.addComponent(l);const o=new kG(r,n,i);return nx.set(s,o),o}function k5(t=S_){const e=nx.get(t);if(!e&&t===S_&&$L())return B5();if(!e)throw tf.create("no-app",{appName:t});return e}function Ck(){return Array.from(nx.values())}function _u(t,e,r){let n=TG[t]??t;r&&(n+=`-${r}`);const s=n.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const i=[`Unable to register library "${n}" with version "${e}":`];s&&i.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&a&&i.push("and"),a&&i.push(`version name "${e}" contains illegal characters (whitespace or "/")`),DA.warn(i.join(" "));return}Th(new ff(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IG="firebase-heartbeat-database",FG=1,sx="firebase-heartbeat-store";let $C=null;function JL(){return $C||($C=WV(IG,FG,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(sx)}catch(r){console.warn(r)}}}}).catch(t=>{throw tf.create("idb-open",{originalErrorMessage:t.message})})),$C}async function DG(t){try{const r=(await JL()).transaction(sx),n=await r.objectStore(sx).get(ZL(t));return await r.done,n}catch(e){if(e instanceof Uu)DA.warn(e.message);else{const r=tf.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});DA.warn(r.message)}}}async function Ek(t,e){try{const n=(await JL()).transaction(sx,"readwrite");await n.objectStore(sx).put(e,ZL(t)),await n.done}catch(r){if(r instanceof Uu)DA.warn(r.message);else{const n=tf.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});DA.warn(n.message)}}}function ZL(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RG=1024,LG=30;class UG{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new PG(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=_k();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(i=>i.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>LG){const i=jG(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){DA.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=_k(),{heartbeatsToSend:n,unsentEntries:s}=MG(this._heartbeatsCache.heartbeats),a=Jy(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(r){return DA.warn(r),""}}}function _k(){return new Date().toISOString().substring(0,10)}function MG(t,e=RG){const r=[];let n=t.slice();for(const s of t){const a=r.find(i=>i.agent===s.agent);if(a){if(a.dates.push(s.date),Sk(r)>e){a.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),Sk(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class PG{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return EV()?_V().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await DG(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Ek(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Ek(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function Sk(t){return Jy(JSON.stringify({version:2,heartbeats:t})).length}function jG(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OG(t){Th(new ff("platform-logger",e=>new JV(e),"PRIVATE")),Th(new ff("heartbeat",e=>new UG(e),"PRIVATE")),_u(__,wk,t),_u(__,wk,"esm2020"),_u("fire-js","")}OG("");function eU(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const QG=eU,tU=new Vx("auth","Firebase",eU());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy=new T5("@firebase/auth");function HG(t,...e){Zy.logLevel<=cn.WARN&&Zy.warn(`Auth (${$m}): ${t}`,...e)}function _y(t,...e){Zy.logLevel<=cn.ERROR&&Zy.error(`Auth (${$m}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(t,...e){throw I5(t,...e)}function Su(t,...e){return I5(t,...e)}function rU(t,e,r){const n={...QG(),[e]:r};return new Vx("auth","Firebase",n).create(e,{appName:t.name})}function rf(t){return rU(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function I5(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return tU.create(t,...e)}function _r(t,e,...r){if(!t)throw I5(e,...r)}function bA(t){const e="INTERNAL ASSERTION FAILED: "+t;throw _y(e),new Error(e)}function RA(t,e){t||bA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function VG(){return Tk()==="http:"||Tk()==="https:"}function Tk(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GG(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VG()||yV()||"connection"in navigator)?navigator.onLine:!0}function zG(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e,r){this.shortDelay=e,this.longDelay=r,RA(r>e,"Short delay should be less than long delay!"),this.isMobile=gV()||wV()}get(){return GG()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F5(t,e){RA(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;bA("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;bA("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;bA("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qG={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KG=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$G=new zx(3e4,6e4);function Tf(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function VA(t,e,r,n,s={}){return sU(t,s,async()=>{let a={},i={};n&&(e==="GET"?i=n:a={body:JSON.stringify(n)});const o=Gx({key:t.config.apiKey,...i}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...a};return vV()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Qh(t.emulatorConfig.host)&&(u.credentials="include"),nU.fetch()(await aU(t,t.config.apiHost,r,o),u)})}async function sU(t,e,r){t._canInitEmulator=!1;const n={...qG,...e};try{const s=new YG(t),a=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const i=await a.json();if("needConfirmation"in i)throw yv(t,"account-exists-with-different-credential",i);if(a.ok&&!("errorMessage"in i))return i;{const o=a.ok?i.errorMessage:i.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw yv(t,"credential-already-in-use",i);if(l==="EMAIL_EXISTS")throw yv(t,"email-already-in-use",i);if(l==="USER_DISABLED")throw yv(t,"user-disabled",i);const d=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw rU(t,d,u);Dc(t,d)}}catch(s){if(s instanceof Uu)throw s;Dc(t,"network-request-failed",{message:String(s)})}}async function mw(t,e,r,n,s={}){const a=await VA(t,e,r,n,s);return"mfaPendingCredential"in a&&Dc(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function aU(t,e,r,n){const s=`${e}${r}?${n}`,a=t,i=a.config.emulator?F5(t.config,s):`${t.config.apiScheme}://${s}`;return KG.includes(r)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(i).toString():i}function WG(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class YG{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Su(this.auth,"network-request-failed")),$G.get())})}}function yv(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=Su(t,e,n);return s.customData._tokenResponse=r,s}function Nk(t){return t!==void 0&&t.enterprise!==void 0}class XG{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return WG(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function JG(t,e){return VA(t,"GET","/v2/recaptchaConfig",Tf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZG(t,e){return VA(t,"POST","/v1/accounts:delete",e)}async function e2(t,e){return VA(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ez(t,e=!1){const r=bs(t),n=await r.getIdToken(e),s=D5(n);_r(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,i=a==null?void 0:a.sign_in_provider;return{claims:s,token:n,authTime:Rg(WC(s.auth_time)),issuedAtTime:Rg(WC(s.iat)),expirationTime:Rg(WC(s.exp)),signInProvider:i||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function WC(t){return Number(t)*1e3}function D5(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return _y("JWT malformed, contained fewer than 3 sections"),null;try{const s=zL(r);return s?JSON.parse(s):(_y("Failed to decode base64 JWT payload"),null)}catch(s){return _y("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Bk(t){const e=D5(t);return _r(e,"internal-error"),_r(typeof e.exp<"u","internal-error"),_r(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ax(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Uu&&tz(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function tz({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rz{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rg(this.lastLoginAt),this.creationTime=Rg(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t2(t){var h;const e=t.auth,r=await t.getIdToken(),n=await ax(t,e2(e,{idToken:r}));_r(n==null?void 0:n.users.length,e,"internal-error");const s=n.users[0];t._notifyReloadListener(s);const a=(h=s.providerUserInfo)!=null&&h.length?iU(s.providerUserInfo):[],i=sz(t.providerData,a),o=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(i!=null&&i.length),u=o?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new B_(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function nz(t){const e=bs(t);await t2(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sz(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function iU(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function az(t,e){const r=await sU(t,{},async()=>{const n=Gx({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,i=await aU(t,s,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:n};return t.emulatorConfig&&Qh(t.emulatorConfig.host)&&(l.credentials="include"),nU.fetch()(i,l)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function iz(t,e){return VA(t,"POST","/v2/accounts:revokeToken",Tf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_r(e.idToken,"internal-error"),_r(typeof e.idToken<"u","internal-error"),_r(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Bk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){_r(e.length!==0,"internal-error");const r=Bk(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(_r(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:a}=await az(e,r);this.updateTokensAndExpiration(n,s,Number(a))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:a}=r,i=new um;return n&&(_r(typeof n=="string","internal-error",{appName:e}),i.refreshToken=n),s&&(_r(typeof s=="string","internal-error",{appName:e}),i.accessToken=s),a&&(_r(typeof a=="number","internal-error",{appName:e}),i.expirationTime=a),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new um,this.toJSON())}_performRefresh(){return bA("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bd(t,e){_r(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Tc{constructor({uid:e,auth:r,stsTokenManager:n,...s}){this.providerId="firebase",this.proactiveRefresh=new rz(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new B_(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await ax(this,this.stsTokenManager.getToken(this.auth,e));return _r(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return ez(this,e)}reload(){return nz(this)}_assign(e){this!==e&&(_r(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Tc({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){_r(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await t2(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ol(this.auth.app))return Promise.reject(rf(this.auth));const e=await this.getIdToken();return await ax(this,ZG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const n=r.displayName??void 0,s=r.email??void 0,a=r.phoneNumber??void 0,i=r.photoURL??void 0,o=r.tenantId??void 0,l=r._redirectEventId??void 0,u=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:h,emailVerified:m,isAnonymous:g,providerData:b,stsTokenManager:y}=r;_r(h&&y,e,"internal-error");const _=um.fromJSON(this.name,y);_r(typeof h=="string",e,"internal-error"),Bd(n,e.name),Bd(s,e.name),_r(typeof m=="boolean",e,"internal-error"),_r(typeof g=="boolean",e,"internal-error"),Bd(a,e.name),Bd(i,e.name),Bd(o,e.name),Bd(l,e.name),Bd(u,e.name),Bd(d,e.name);const N=new Tc({uid:h,auth:e,email:s,emailVerified:m,displayName:n,isAnonymous:g,photoURL:i,phoneNumber:a,tenantId:o,stsTokenManager:_,createdAt:u,lastLoginAt:d});return b&&Array.isArray(b)&&(N.providerData=b.map(k=>({...k}))),l&&(N._redirectEventId=l),N}static async _fromIdTokenResponse(e,r,n=!1){const s=new um;s.updateFromServerResponse(r);const a=new Tc({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await t2(a),a}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];_r(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?iU(s.providerUserInfo):[],i=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),o=new um;o.updateFromIdToken(n);const l=new Tc({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:i}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new B_(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=new Map;function CA(t){RA(t instanceof Function,"Expected a class definition");let e=kk.get(t);return e?(RA(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,kk.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}oU.type="NONE";const Ik=oU;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(t,e,r){return`firebase:${t}:${e}:${r}`}class Am{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:a}=this.auth;this.fullUserKey=Sy(this.userKey,s.apiKey,a),this.fullPersistenceKey=Sy("persistence",s.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await e2(this.auth,{idToken:e}).catch(()=>{});return r?Tc._fromGetAccountInfoResponse(this.auth,r,e):null}return Tc._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Am(CA(Ik),e,n);const s=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=s[0]||CA(Ik);const i=Sy(n,e.config.apiKey,e.name);let o=null;for(const u of r)try{const d=await u._get(i);if(d){let h;if(typeof d=="string"){const m=await e2(e,{idToken:d}).catch(()=>{});if(!m)break;h=await Tc._fromGetAccountInfoResponse(e,m,d)}else h=Tc._fromJSON(e,d);u!==a&&(o=h),a=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!l.length?new Am(a,e,n):(a=l[0],o&&await a._set(i,o.toJSON()),await Promise.all(r.map(async u=>{if(u!==a)try{await u._remove(i)}catch{}})),new Am(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(AU(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lU(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fU(e))return"Blackberry";if(hU(e))return"Webos";if(cU(e))return"Safari";if((e.includes("chrome/")||uU(e))&&!e.includes("edge/"))return"Chrome";if(dU(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function lU(t=qi()){return/firefox\//i.test(t)}function cU(t=qi()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function uU(t=qi()){return/crios\//i.test(t)}function AU(t=qi()){return/iemobile/i.test(t)}function dU(t=qi()){return/android/i.test(t)}function fU(t=qi()){return/blackberry/i.test(t)}function hU(t=qi()){return/webos/i.test(t)}function R5(t=qi()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function oz(t=qi()){var e;return R5(t)&&!!((e=window.navigator)!=null&&e.standalone)}function lz(){return bV()&&document.documentMode===10}function mU(t=qi()){return R5(t)||dU(t)||hU(t)||fU(t)||/windows phone/i.test(t)||AU(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pU(t,e=[]){let r;switch(t){case"Browser":r=Fk(qi());break;case"Worker":r=`${Fk(qi())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${$m}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cz{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=a=>new Promise((i,o)=>{try{const l=e(a);i(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uz(t,e={}){return VA(t,"GET","/v2/passwordPolicy",Tf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Az=6;class dz{constructor(e){var n;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??Az,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fz{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dk(this),this.idTokenSubscription=new Dk(this),this.beforeStateQueue=new cz(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tU,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=CA(r)),this._initializationPromise=this.queue(async()=>{var n,s,a;if(!this._deleted&&(this.persistenceManager=await Am.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await e2(this,{idToken:e}),n=await Tc._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Ol(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(a=this.redirectUser)==null?void 0:a._redirectEventId,o=n==null?void 0:n._redirectEventId,l=await this.tryRedirectSignIn(e);(!i||i===o)&&(l!=null&&l.user)&&(n=l.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return _r(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await t2(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=zG()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ol(this.app))return Promise.reject(rf(this));const r=e?bs(e):null;return r&&_r(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&_r(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ol(this.app)?Promise.reject(rf(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ol(this.app)?Promise.reject(rf(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(CA(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await uz(this),r=new dz(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Vx("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await iz(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&CA(e)||this._popupRedirectResolver;_r(r,this,"argument-error"),this.redirectPersistenceManager=await Am.create(this,[CA(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(_r(o,this,"internal-error"),o.then(()=>{i||a(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,s);return()=>{i=!0,l()}}else{const l=e.addObserver(r);return()=>{i=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _r(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pU(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var r;if(Ol(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return e!=null&&e.error&&HG(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Hh(t){return bs(t)}class Dk{constructor(e){this.auth=e,this.observer=null,this.addObserver=kV(r=>this.observer=r)}get next(){return _r(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pw={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hz(t){pw=t}function gU(t){return pw.loadJS(t)}function mz(){return pw.recaptchaEnterpriseScript}function pz(){return pw.gapiScript}function gz(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class xz{constructor(){this.enterprise=new vz}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class vz{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const yz="recaptcha-enterprise",xU="NO_RECAPTCHA";class wz{constructor(e){this.type=yz,this.auth=Hh(e)}async verify(e="verify",r=!1){async function n(a){if(!r){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(i,o)=>{JG(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new XG(l);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,i(u.siteKey)}}).catch(l=>{o(l)})})}function s(a,i,o){const l=window.grecaptcha;Nk(l)?l.enterprise.ready(()=>{l.enterprise.execute(a,{action:e}).then(u=>{i(u)}).catch(()=>{i(xU)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new xz().execute("siteKey",{action:"verify"}):new Promise((a,i)=>{n(this.auth).then(o=>{if(!r&&Nk(window.grecaptcha))s(o,a,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let l=mz();l.length!==0&&(l+=o),gU(l).then(()=>{s(o,a,i)}).catch(u=>{i(u)})}}).catch(o=>{i(o)})})}}async function Rk(t,e,r,n=!1,s=!1){const a=new wz(t);let i;if(s)i=xU;else try{i=await a.verify(r)}catch{i=await a.verify(r,!0)}const o={...e};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function k_(t,e,r,n,s){var a;if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Rk(t,e,r,r==="getOobCode");return n(t,i)}else return n(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Rk(t,e,r,r==="getOobCode");return n(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bz(t,e){const r=hw(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),a=r.getOptions();if(df(a,e??{}))return s;Dc(s,"already-initialized")}return r.initialize({options:e})}function Cz(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(CA);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function Ez(t,e,r){const n=Hh(t);_r(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,a=vU(e),{host:i,port:o}=_z(e),l=o===null?"":`:${o}`,u={url:`${a}//${i}${l}/`},d=Object.freeze({host:i,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){_r(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),_r(df(u,n.config.emulator)&&df(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,Qh(i)?(_5(`${a}//${i}${l}`),S5("Auth",!0)):Sz()}function vU(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _z(t){const e=vU(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const a=s[1];return{host:a,port:Lk(n.substr(a.length+1))}}else{const[a,i]=n.split(":");return{host:a,port:Lk(i)}}}function Lk(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Sz(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return bA("not implemented")}_getIdTokenResponse(e){return bA("not implemented")}_linkToIdToken(e,r){return bA("not implemented")}_getReauthenticationResolver(e){return bA("not implemented")}}async function Tz(t,e){return VA(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nz(t,e){return mw(t,"POST","/v1/accounts:signInWithPassword",Tf(t,e))}async function Bz(t,e){return VA(t,"POST","/v1/accounts:sendOobCode",Tf(t,e))}async function kz(t,e){return Bz(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iz(t,e){return mw(t,"POST","/v1/accounts:signInWithEmailLink",Tf(t,e))}async function Fz(t,e){return mw(t,"POST","/v1/accounts:signInWithEmailLink",Tf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix extends L5{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new ix(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new ix(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return k_(e,r,"signInWithPassword",Nz);case"emailLink":return Iz(e,{email:this._email,oobCode:this._password});default:Dc(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return k_(e,n,"signUpPassword",Tz);case"emailLink":return Fz(e,{idToken:r,email:this._email,oobCode:this._password});default:Dc(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dm(t,e){return mw(t,"POST","/v1/accounts:signInWithIdp",Tf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dz="http://localhost";class Nh extends L5{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Nh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Dc("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s,...a}=r;if(!n||!s)return null;const i=new Nh(n,s);return i.idToken=a.idToken||void 0,i.accessToken=a.accessToken||void 0,i.secret=a.secret,i.nonce=a.nonce,i.pendingToken=a.pendingToken||null,i}_getIdTokenResponse(e){const r=this.buildRequest();return dm(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,dm(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,dm(e,r)}buildRequest(){const e={requestUri:Dz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Gx(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rz(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Lz(t){const e=dg(fg(t)).link,r=e?dg(fg(e)).deep_link_id:null,n=dg(fg(t)).deep_link_id;return(n?dg(fg(n)).link:null)||n||r||e||t}class U5{constructor(e){const r=dg(fg(e)),n=r.apiKey??null,s=r.oobCode??null,a=Rz(r.mode??null);_r(n&&s&&a,"argument-error"),this.apiKey=n,this.operation=a,this.code=s,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(e){const r=Lz(e);try{return new U5(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(){this.providerId=Wm.PROVIDER_ID}static credential(e,r){return ix._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=U5.parseLink(r);return _r(n,"argument-error"),ix._fromEmailAndCode(e,n.code,n.tenantId)}}Wm.PROVIDER_ID="password";Wm.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wm.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx extends yU{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd extends qx{constructor(){super("facebook.com")}static credential(e){return Nh._fromParams({providerId:Qd.PROVIDER_ID,signInMethod:Qd.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qd.credentialFromTaggedObject(e)}static credentialFromError(e){return Qd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qd.credential(e.oauthAccessToken)}catch{return null}}}Qd.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qd.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd extends qx{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Nh._fromParams({providerId:Hd.PROVIDER_ID,signInMethod:Hd.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Hd.credentialFromTaggedObject(e)}static credentialFromError(e){return Hd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Hd.credential(r,n)}catch{return null}}}Hd.GOOGLE_SIGN_IN_METHOD="google.com";Hd.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd extends qx{constructor(){super("github.com")}static credential(e){return Nh._fromParams({providerId:Vd.PROVIDER_ID,signInMethod:Vd.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vd.credentialFromTaggedObject(e)}static credentialFromError(e){return Vd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vd.credential(e.oauthAccessToken)}catch{return null}}}Vd.GITHUB_SIGN_IN_METHOD="github.com";Vd.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd extends qx{constructor(){super("twitter.com")}static credential(e,r){return Nh._fromParams({providerId:Gd.PROVIDER_ID,signInMethod:Gd.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Gd.credentialFromTaggedObject(e)}static credentialFromError(e){return Gd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Gd.credential(r,n)}catch{return null}}}Gd.TWITTER_SIGN_IN_METHOD="twitter.com";Gd.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const a=await Tc._fromIdTokenResponse(e,n,s),i=Uk(n);return new Im({user:a,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=Uk(n);return new Im({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function Uk(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2 extends Uu{constructor(e,r,n,s){super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,r2.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new r2(e,r,n,s)}}function wU(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?r2._fromErrorAndOperation(t,a,e,n):a})}async function Uz(t,e,r=!1){const n=await ax(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Im._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mz(t,e,r=!1){const{auth:n}=t;if(Ol(n.app))return Promise.reject(rf(n));const s="reauthenticate";try{const a=await ax(t,wU(n,s,e,t),r);_r(a.idToken,n,"internal-error");const i=D5(a.idToken);_r(i,n,"internal-error");const{sub:o}=i;return _r(t.uid===o,n,"user-mismatch"),Im._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Dc(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bU(t,e,r=!1){if(Ol(t.app))return Promise.reject(rf(t));const n="signIn",s=await wU(t,n,e),a=await Im._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(a.user),a}async function Pz(t,e){return bU(Hh(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jz(t){const e=Hh(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Oz(t,e,r){const n=Hh(t);await k_(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",kz)}function Qz(t,e,r){return Ol(t.app)?Promise.reject(rf(t)):Pz(bs(t),Wm.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&jz(t),n})}function Hz(t,e,r,n){return bs(t).onIdTokenChanged(e,r,n)}function Vz(t,e,r){return bs(t).beforeAuthStateChanged(e,r)}function Gz(t,e,r,n){return bs(t).onAuthStateChanged(e,r,n)}function zz(t){return bs(t).signOut()}const n2="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CU{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(n2,"1"),this.storage.removeItem(n2),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qz=1e3,Kz=10;class EU extends CU{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mU(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((i,o,l)=>{this.notifyListeners(i,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},a=this.storage.getItem(n);lz()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Kz):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},qz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}EU.type="LOCAL";const $z=EU;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U extends CU{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}_U.type="SESSION";const SU=_U;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wz(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new gw(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:a}=r.data,i=this.handlersMap[s];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const o=Array.from(i).map(async u=>u(r.origin,a)),l=await Wz(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gw.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M5(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yz{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,i;return new Promise((o,l)=>{const u=M5("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},n);i={messageChannel:s,onMessage(h){const m=h;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(m.data.response);break;default:clearTimeout(d),clearTimeout(a),l(new Error("invalid_response"));break}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tu(){return window}function Xz(t){Tu().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TU(){return typeof Tu().WorkerGlobalScope<"u"&&typeof Tu().importScripts=="function"}async function Jz(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Zz(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function eq(){return TU()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NU="firebaseLocalStorageDb",tq=1,s2="firebaseLocalStorage",BU="fbase_key";class Kx{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function xw(t,e){return t.transaction([s2],e?"readwrite":"readonly").objectStore(s2)}function rq(){const t=indexedDB.deleteDatabase(NU);return new Kx(t).toPromise()}function I_(){const t=indexedDB.open(NU,tq);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(s2,{keyPath:BU})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(s2)?e(n):(n.close(),await rq(),e(await I_()))})})}async function Mk(t,e,r){const n=xw(t,!0).put({[BU]:e,value:r});return new Kx(n).toPromise()}async function nq(t,e){const r=xw(t,!1).get(e),n=await new Kx(r).toPromise();return n===void 0?null:n.value}function Pk(t,e){const r=xw(t,!0).delete(e);return new Kx(r).toPromise()}const sq=800,aq=3;class kU{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await I_(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>aq)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TU()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gw._getInstance(eq()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await Jz(),!this.activeServiceWorker)return;this.sender=new Yz(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(r=e[0])!=null&&r.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Zz()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await I_();return await Mk(e,n2,"1"),await Pk(e,n2),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>Mk(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>nq(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>Pk(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=xw(s,!1).getAll();return new Kx(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}kU.type="LOCAL";const iq=kU;new zx(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oq(t,e){return e?CA(e):(_r(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5 extends L5{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return dm(e,this._buildIdpRequest())}_linkToIdToken(e,r){return dm(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return dm(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function lq(t){return bU(t.auth,new P5(t),t.bypassAuthState)}function cq(t){const{auth:e,user:r}=t;return _r(r,e,"internal-error"),Mz(r,new P5(t),t.bypassAuthState)}async function uq(t){const{auth:e,user:r}=t;return _r(r,e,"internal-error"),Uz(r,new P5(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IU{constructor(e,r,n,s,a=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:a,error:i,type:o}=e;if(i){this.reject(i);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lq;case"linkViaPopup":case"linkViaRedirect":return uq;case"reauthViaPopup":case"reauthViaRedirect":return cq;default:Dc(this.auth,"internal-error")}}resolve(e){RA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){RA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aq=new zx(2e3,1e4);class sm extends IU{constructor(e,r,n,s,a){super(e,r,s,a),this.provider=n,this.authWindow=null,this.pollId=null,sm.currentPopupAction&&sm.currentPopupAction.cancel(),sm.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _r(e,this.auth,"internal-error"),e}async onExecution(){RA(this.filter.length===1,"Popup operations only handle one event");const e=M5();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Su(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Su(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sm.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Su(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Aq.get())};e()}}sm.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dq="pendingRedirect",Ty=new Map;class fq extends IU{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Ty.get(this.auth._key());if(!e){try{const n=await hq(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Ty.set(this.auth._key(),e)}return this.bypassAuthState||Ty.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hq(t,e){const r=gq(e),n=pq(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function mq(t,e){Ty.set(t._key(),e)}function pq(t){return CA(t._redirectPersistence)}function gq(t){return Sy(dq,t.config.apiKey,t.name)}async function xq(t,e,r=!1){if(Ol(t.app))return Promise.reject(rf(t));const n=Hh(t),s=oq(n,e),i=await new fq(n,s,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vq=600*1e3;class yq{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wq(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!FU(e)){const s=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(Su(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vq&&this.cachedEventUids.clear(),this.cachedEventUids.has(jk(e))}saveEventToCache(e){this.cachedEventUids.add(jk(e)),this.lastProcessedEventTime=Date.now()}}function jk(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function FU({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wq(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FU(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bq(t,e={}){return VA(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Eq=/^https?/;async function _q(t){if(t.config.emulator)return;const{authorizedDomains:e}=await bq(t);for(const r of e)try{if(Sq(r))return}catch{}Dc(t,"unauthorized-domain")}function Sq(t){const e=N_(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!Eq.test(r))return!1;if(Cq.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tq=new zx(3e4,6e4);function Ok(){const t=Tu().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function Nq(t){return new Promise((e,r)=>{var s,a,i;function n(){Ok(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ok(),r(Su(t,"network-request-failed"))},timeout:Tq.get()})}if((a=(s=Tu().gapi)==null?void 0:s.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((i=Tu().gapi)!=null&&i.load)n();else{const o=gz("iframefcb");return Tu()[o]=()=>{gapi.load?n():r(Su(t,"network-request-failed"))},gU(`${pz()}?onload=${o}`).catch(l=>r(l))}}).catch(e=>{throw Ny=null,e})}let Ny=null;function Bq(t){return Ny=Ny||Nq(t),Ny}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kq=new zx(5e3,15e3),Iq="__/auth/iframe",Fq="emulator/auth/iframe",Dq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Rq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Lq(t){const e=t.config;_r(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?F5(e,Fq):`https://${t.config.authDomain}/${Iq}`,n={apiKey:e.apiKey,appName:t.name,v:$m},s=Rq.get(t.config.apiHost);s&&(n.eid=s);const a=t._getFrameworks();return a.length&&(n.fw=a.join(",")),`${r}?${Gx(n).slice(1)}`}async function Uq(t){const e=await Bq(t),r=Tu().gapi;return _r(r,t,"internal-error"),e.open({where:document.body,url:Lq(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Dq,dontclear:!0},n=>new Promise(async(s,a)=>{await n.restyle({setHideOnLeave:!1});const i=Su(t,"network-request-failed"),o=Tu().setTimeout(()=>{a(i)},kq.get());function l(){Tu().clearTimeout(o),s(n)}n.ping(l).then(l,()=>{a(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Pq=500,jq=600,Oq="_blank",Qq="http://localhost";class Qk{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Hq(t,e,r,n=Pq,s=jq){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l={...Mq,width:n.toString(),height:s.toString(),top:a,left:i},u=qi().toLowerCase();r&&(o=uU(u)?Oq:r),lU(u)&&(e=e||Qq,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[g,b])=>`${m}${g}=${b},`,"");if(oz(u)&&o!=="_self")return Vq(e||"",o),new Qk(null);const h=window.open(e||"",o,d);_r(h,t,"popup-blocked");try{h.focus()}catch{}return new Qk(h)}function Vq(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gq="__/auth/handler",zq="emulator/auth/handler",qq=encodeURIComponent("fac");async function Hk(t,e,r,n,s,a){_r(t.config.authDomain,t,"auth-domain-config-required"),_r(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:$m,eventId:s};if(e instanceof yU){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",BV(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))i[d]=h}if(e instanceof qx){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const o=i;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const l=await t._getAppCheckToken(),u=l?`#${qq}=${encodeURIComponent(l)}`:"";return`${Kq(t)}?${Gx(o).slice(1)}${u}`}function Kq({config:t}){return t.emulator?F5(t,zq):`https://${t.authDomain}/${Gq}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC="webStorageSupport";class $q{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=SU,this._completeRedirectFn=xq,this._overrideRedirectResult=mq}async _openPopup(e,r,n,s){var i;RA((i=this.eventManagers[e._key()])==null?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await Hk(e,r,n,N_(),s);return Hq(e,a,M5())}async _openRedirect(e,r,n,s){await this._originValidation(e);const a=await Hk(e,r,n,N_(),s);return Xz(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:a}=this.eventManagers[r];return s?Promise.resolve(s):(RA(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await Uq(e),n=new yq(e);return r.register("authEvent",s=>(_r(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(YC,{type:YC},s=>{var i;const a=(i=s==null?void 0:s[0])==null?void 0:i[YC];a!==void 0&&r(!!a),Dc(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=_q(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return mU()||cU()||R5()}}const Wq=$q;var Vk="@firebase/auth",Gk="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){_r(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xq(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Jq(t){Th(new ff("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=n.options;_r(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pU(t)},u=new fz(n,s,a,l);return Cz(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Th(new ff("auth-internal",e=>{const r=Hh(e.getProvider("auth").getImmediate());return(n=>new Yq(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),_u(Vk,Gk,Xq(t)),_u(Vk,Gk,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zq=300,eK=WL("authIdTokenMaxAge")||Zq;let zk=null;const tK=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>eK)return;const s=r==null?void 0:r.token;zk!==s&&(zk=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function DU(t=k5()){const e=hw(t,"auth");if(e.isInitialized())return e.getImmediate();const r=bz(t,{popupRedirectResolver:Wq,persistence:[iq,$z,SU]}),n=WL("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const i=tK(a.toString());Vz(r,i,()=>i(r.currentUser)),Hz(r,o=>i(o))}}const s=qL("auth");return s&&Ez(r,`http://${s}`),r}function rK(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}hz({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const a=Su("internal-error");a.customData=s,r(a)},n.type="text/javascript",n.charset="UTF-8",rK().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Jq("Browser");var nK="firebase",sK="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_u(nK,sK,"app");var qk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nf,RU;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,E){function B(){}B.prototype=E.prototype,C.D=E.prototype,C.prototype=new B,C.prototype.constructor=C,C.C=function(Q,D,I){for(var O=Array(arguments.length-2),G=2;G<arguments.length;G++)O[G-2]=arguments[G];return E.prototype[D].apply(Q,O)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,E,B){B||(B=0);var Q=Array(16);if(typeof E=="string")for(var D=0;16>D;++D)Q[D]=E.charCodeAt(B++)|E.charCodeAt(B++)<<8|E.charCodeAt(B++)<<16|E.charCodeAt(B++)<<24;else for(D=0;16>D;++D)Q[D]=E[B++]|E[B++]<<8|E[B++]<<16|E[B++]<<24;E=C.g[0],B=C.g[1],D=C.g[2];var I=C.g[3],O=E+(I^B&(D^I))+Q[0]+3614090360&4294967295;E=B+(O<<7&4294967295|O>>>25),O=I+(D^E&(B^D))+Q[1]+3905402710&4294967295,I=E+(O<<12&4294967295|O>>>20),O=D+(B^I&(E^B))+Q[2]+606105819&4294967295,D=I+(O<<17&4294967295|O>>>15),O=B+(E^D&(I^E))+Q[3]+3250441966&4294967295,B=D+(O<<22&4294967295|O>>>10),O=E+(I^B&(D^I))+Q[4]+4118548399&4294967295,E=B+(O<<7&4294967295|O>>>25),O=I+(D^E&(B^D))+Q[5]+1200080426&4294967295,I=E+(O<<12&4294967295|O>>>20),O=D+(B^I&(E^B))+Q[6]+2821735955&4294967295,D=I+(O<<17&4294967295|O>>>15),O=B+(E^D&(I^E))+Q[7]+4249261313&4294967295,B=D+(O<<22&4294967295|O>>>10),O=E+(I^B&(D^I))+Q[8]+1770035416&4294967295,E=B+(O<<7&4294967295|O>>>25),O=I+(D^E&(B^D))+Q[9]+2336552879&4294967295,I=E+(O<<12&4294967295|O>>>20),O=D+(B^I&(E^B))+Q[10]+4294925233&4294967295,D=I+(O<<17&4294967295|O>>>15),O=B+(E^D&(I^E))+Q[11]+2304563134&4294967295,B=D+(O<<22&4294967295|O>>>10),O=E+(I^B&(D^I))+Q[12]+1804603682&4294967295,E=B+(O<<7&4294967295|O>>>25),O=I+(D^E&(B^D))+Q[13]+4254626195&4294967295,I=E+(O<<12&4294967295|O>>>20),O=D+(B^I&(E^B))+Q[14]+2792965006&4294967295,D=I+(O<<17&4294967295|O>>>15),O=B+(E^D&(I^E))+Q[15]+1236535329&4294967295,B=D+(O<<22&4294967295|O>>>10),O=E+(D^I&(B^D))+Q[1]+4129170786&4294967295,E=B+(O<<5&4294967295|O>>>27),O=I+(B^D&(E^B))+Q[6]+3225465664&4294967295,I=E+(O<<9&4294967295|O>>>23),O=D+(E^B&(I^E))+Q[11]+643717713&4294967295,D=I+(O<<14&4294967295|O>>>18),O=B+(I^E&(D^I))+Q[0]+3921069994&4294967295,B=D+(O<<20&4294967295|O>>>12),O=E+(D^I&(B^D))+Q[5]+3593408605&4294967295,E=B+(O<<5&4294967295|O>>>27),O=I+(B^D&(E^B))+Q[10]+38016083&4294967295,I=E+(O<<9&4294967295|O>>>23),O=D+(E^B&(I^E))+Q[15]+3634488961&4294967295,D=I+(O<<14&4294967295|O>>>18),O=B+(I^E&(D^I))+Q[4]+3889429448&4294967295,B=D+(O<<20&4294967295|O>>>12),O=E+(D^I&(B^D))+Q[9]+568446438&4294967295,E=B+(O<<5&4294967295|O>>>27),O=I+(B^D&(E^B))+Q[14]+3275163606&4294967295,I=E+(O<<9&4294967295|O>>>23),O=D+(E^B&(I^E))+Q[3]+4107603335&4294967295,D=I+(O<<14&4294967295|O>>>18),O=B+(I^E&(D^I))+Q[8]+1163531501&4294967295,B=D+(O<<20&4294967295|O>>>12),O=E+(D^I&(B^D))+Q[13]+2850285829&4294967295,E=B+(O<<5&4294967295|O>>>27),O=I+(B^D&(E^B))+Q[2]+4243563512&4294967295,I=E+(O<<9&4294967295|O>>>23),O=D+(E^B&(I^E))+Q[7]+1735328473&4294967295,D=I+(O<<14&4294967295|O>>>18),O=B+(I^E&(D^I))+Q[12]+2368359562&4294967295,B=D+(O<<20&4294967295|O>>>12),O=E+(B^D^I)+Q[5]+4294588738&4294967295,E=B+(O<<4&4294967295|O>>>28),O=I+(E^B^D)+Q[8]+2272392833&4294967295,I=E+(O<<11&4294967295|O>>>21),O=D+(I^E^B)+Q[11]+1839030562&4294967295,D=I+(O<<16&4294967295|O>>>16),O=B+(D^I^E)+Q[14]+4259657740&4294967295,B=D+(O<<23&4294967295|O>>>9),O=E+(B^D^I)+Q[1]+2763975236&4294967295,E=B+(O<<4&4294967295|O>>>28),O=I+(E^B^D)+Q[4]+1272893353&4294967295,I=E+(O<<11&4294967295|O>>>21),O=D+(I^E^B)+Q[7]+4139469664&4294967295,D=I+(O<<16&4294967295|O>>>16),O=B+(D^I^E)+Q[10]+3200236656&4294967295,B=D+(O<<23&4294967295|O>>>9),O=E+(B^D^I)+Q[13]+681279174&4294967295,E=B+(O<<4&4294967295|O>>>28),O=I+(E^B^D)+Q[0]+3936430074&4294967295,I=E+(O<<11&4294967295|O>>>21),O=D+(I^E^B)+Q[3]+3572445317&4294967295,D=I+(O<<16&4294967295|O>>>16),O=B+(D^I^E)+Q[6]+76029189&4294967295,B=D+(O<<23&4294967295|O>>>9),O=E+(B^D^I)+Q[9]+3654602809&4294967295,E=B+(O<<4&4294967295|O>>>28),O=I+(E^B^D)+Q[12]+3873151461&4294967295,I=E+(O<<11&4294967295|O>>>21),O=D+(I^E^B)+Q[15]+530742520&4294967295,D=I+(O<<16&4294967295|O>>>16),O=B+(D^I^E)+Q[2]+3299628645&4294967295,B=D+(O<<23&4294967295|O>>>9),O=E+(D^(B|~I))+Q[0]+4096336452&4294967295,E=B+(O<<6&4294967295|O>>>26),O=I+(B^(E|~D))+Q[7]+1126891415&4294967295,I=E+(O<<10&4294967295|O>>>22),O=D+(E^(I|~B))+Q[14]+2878612391&4294967295,D=I+(O<<15&4294967295|O>>>17),O=B+(I^(D|~E))+Q[5]+4237533241&4294967295,B=D+(O<<21&4294967295|O>>>11),O=E+(D^(B|~I))+Q[12]+1700485571&4294967295,E=B+(O<<6&4294967295|O>>>26),O=I+(B^(E|~D))+Q[3]+2399980690&4294967295,I=E+(O<<10&4294967295|O>>>22),O=D+(E^(I|~B))+Q[10]+4293915773&4294967295,D=I+(O<<15&4294967295|O>>>17),O=B+(I^(D|~E))+Q[1]+2240044497&4294967295,B=D+(O<<21&4294967295|O>>>11),O=E+(D^(B|~I))+Q[8]+1873313359&4294967295,E=B+(O<<6&4294967295|O>>>26),O=I+(B^(E|~D))+Q[15]+4264355552&4294967295,I=E+(O<<10&4294967295|O>>>22),O=D+(E^(I|~B))+Q[6]+2734768916&4294967295,D=I+(O<<15&4294967295|O>>>17),O=B+(I^(D|~E))+Q[13]+1309151649&4294967295,B=D+(O<<21&4294967295|O>>>11),O=E+(D^(B|~I))+Q[4]+4149444226&4294967295,E=B+(O<<6&4294967295|O>>>26),O=I+(B^(E|~D))+Q[11]+3174756917&4294967295,I=E+(O<<10&4294967295|O>>>22),O=D+(E^(I|~B))+Q[2]+718787259&4294967295,D=I+(O<<15&4294967295|O>>>17),O=B+(I^(D|~E))+Q[9]+3951481745&4294967295,C.g[0]=C.g[0]+E&4294967295,C.g[1]=C.g[1]+(D+(O<<21&4294967295|O>>>11))&4294967295,C.g[2]=C.g[2]+D&4294967295,C.g[3]=C.g[3]+I&4294967295}n.prototype.u=function(C,E){E===void 0&&(E=C.length);for(var B=E-this.blockSize,Q=this.B,D=this.h,I=0;I<E;){if(D==0)for(;I<=B;)s(this,C,I),I+=this.blockSize;if(typeof C=="string"){for(;I<E;)if(Q[D++]=C.charCodeAt(I++),D==this.blockSize){s(this,Q),D=0;break}}else for(;I<E;)if(Q[D++]=C[I++],D==this.blockSize){s(this,Q),D=0;break}}this.h=D,this.o+=E},n.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var E=1;E<C.length-8;++E)C[E]=0;var B=8*this.o;for(E=C.length-8;E<C.length;++E)C[E]=B&255,B/=256;for(this.u(C),C=Array(16),E=B=0;4>E;++E)for(var Q=0;32>Q;Q+=8)C[B++]=this.g[E]>>>Q&255;return C};function a(C,E){var B=o;return Object.prototype.hasOwnProperty.call(B,C)?B[C]:B[C]=E(C)}function i(C,E){this.h=E;for(var B=[],Q=!0,D=C.length-1;0<=D;D--){var I=C[D]|0;Q&&I==E||(B[D]=I,Q=!1)}this.g=B}var o={};function l(C){return-128<=C&&128>C?a(C,function(E){return new i([E|0],0>E?-1:0)}):new i([C|0],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return h;if(0>C)return _(u(-C));for(var E=[],B=1,Q=0;C>=B;Q++)E[Q]=C/B|0,B*=4294967296;return new i(E,0)}function d(C,E){if(C.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(C.charAt(0)=="-")return _(d(C.substring(1),E));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var B=u(Math.pow(E,8)),Q=h,D=0;D<C.length;D+=8){var I=Math.min(8,C.length-D),O=parseInt(C.substring(D,D+I),E);8>I?(I=u(Math.pow(E,I)),Q=Q.j(I).add(u(O))):(Q=Q.j(B),Q=Q.add(u(O)))}return Q}var h=l(0),m=l(1),g=l(16777216);t=i.prototype,t.m=function(){if(y(this))return-_(this).m();for(var C=0,E=1,B=0;B<this.g.length;B++){var Q=this.i(B);C+=(0<=Q?Q:4294967296+Q)*E,E*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(b(this))return"0";if(y(this))return"-"+_(this).toString(C);for(var E=u(Math.pow(C,6)),B=this,Q="";;){var D=M(B,E).g;B=N(B,D.j(E));var I=((0<B.g.length?B.g[0]:B.h)>>>0).toString(C);if(B=D,b(B))return I+Q;for(;6>I.length;)I="0"+I;Q=I+Q}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function b(C){if(C.h!=0)return!1;for(var E=0;E<C.g.length;E++)if(C.g[E]!=0)return!1;return!0}function y(C){return C.h==-1}t.l=function(C){return C=N(this,C),y(C)?-1:b(C)?0:1};function _(C){for(var E=C.g.length,B=[],Q=0;Q<E;Q++)B[Q]=~C.g[Q];return new i(B,~C.h).add(m)}t.abs=function(){return y(this)?_(this):this},t.add=function(C){for(var E=Math.max(this.g.length,C.g.length),B=[],Q=0,D=0;D<=E;D++){var I=Q+(this.i(D)&65535)+(C.i(D)&65535),O=(I>>>16)+(this.i(D)>>>16)+(C.i(D)>>>16);Q=O>>>16,I&=65535,O&=65535,B[D]=O<<16|I}return new i(B,B[B.length-1]&-2147483648?-1:0)};function N(C,E){return C.add(_(E))}t.j=function(C){if(b(this)||b(C))return h;if(y(this))return y(C)?_(this).j(_(C)):_(_(this).j(C));if(y(C))return _(this.j(_(C)));if(0>this.l(g)&&0>C.l(g))return u(this.m()*C.m());for(var E=this.g.length+C.g.length,B=[],Q=0;Q<2*E;Q++)B[Q]=0;for(Q=0;Q<this.g.length;Q++)for(var D=0;D<C.g.length;D++){var I=this.i(Q)>>>16,O=this.i(Q)&65535,G=C.i(D)>>>16,se=C.i(D)&65535;B[2*Q+2*D]+=O*se,k(B,2*Q+2*D),B[2*Q+2*D+1]+=I*se,k(B,2*Q+2*D+1),B[2*Q+2*D+1]+=O*G,k(B,2*Q+2*D+1),B[2*Q+2*D+2]+=I*G,k(B,2*Q+2*D+2)}for(Q=0;Q<E;Q++)B[Q]=B[2*Q+1]<<16|B[2*Q];for(Q=E;Q<2*E;Q++)B[Q]=0;return new i(B,0)};function k(C,E){for(;(C[E]&65535)!=C[E];)C[E+1]+=C[E]>>>16,C[E]&=65535,E++}function R(C,E){this.g=C,this.h=E}function M(C,E){if(b(E))throw Error("division by zero");if(b(C))return new R(h,h);if(y(C))return E=M(_(C),E),new R(_(E.g),_(E.h));if(y(E))return E=M(C,_(E)),new R(_(E.g),E.h);if(30<C.g.length){if(y(C)||y(E))throw Error("slowDivide_ only works with positive integers.");for(var B=m,Q=E;0>=Q.l(C);)B=j(B),Q=j(Q);var D=L(B,1),I=L(Q,1);for(Q=L(Q,2),B=L(B,2);!b(Q);){var O=I.add(Q);0>=O.l(C)&&(D=D.add(B),I=O),Q=L(Q,1),B=L(B,1)}return E=N(C,D.j(E)),new R(D,E)}for(D=h;0<=C.l(E);){for(B=Math.max(1,Math.floor(C.m()/E.m())),Q=Math.ceil(Math.log(B)/Math.LN2),Q=48>=Q?1:Math.pow(2,Q-48),I=u(B),O=I.j(E);y(O)||0<O.l(C);)B-=Q,I=u(B),O=I.j(E);b(I)&&(I=m),D=D.add(I),C=N(C,O)}return new R(D,C)}t.A=function(C){return M(this,C).h},t.and=function(C){for(var E=Math.max(this.g.length,C.g.length),B=[],Q=0;Q<E;Q++)B[Q]=this.i(Q)&C.i(Q);return new i(B,this.h&C.h)},t.or=function(C){for(var E=Math.max(this.g.length,C.g.length),B=[],Q=0;Q<E;Q++)B[Q]=this.i(Q)|C.i(Q);return new i(B,this.h|C.h)},t.xor=function(C){for(var E=Math.max(this.g.length,C.g.length),B=[],Q=0;Q<E;Q++)B[Q]=this.i(Q)^C.i(Q);return new i(B,this.h^C.h)};function j(C){for(var E=C.g.length+1,B=[],Q=0;Q<E;Q++)B[Q]=C.i(Q)<<1|C.i(Q-1)>>>31;return new i(B,C.h)}function L(C,E){var B=E>>5;E%=32;for(var Q=C.g.length-B,D=[],I=0;I<Q;I++)D[I]=0<E?C.i(I+B)>>>E|C.i(I+B+1)<<32-E:C.i(I+B);return new i(D,C.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,RU=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=u,i.fromString=d,nf=i}).apply(typeof qk<"u"?qk:typeof self<"u"?self:typeof window<"u"?window:{});var wv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var LU,hg,UU,By,F_,MU,PU,jU;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(T,X,ae){return T==Array.prototype||T==Object.prototype||(T[X]=ae.value),T};function r(T){T=[typeof globalThis=="object"&&globalThis,T,typeof window=="object"&&window,typeof self=="object"&&self,typeof wv=="object"&&wv];for(var X=0;X<T.length;++X){var ae=T[X];if(ae&&ae.Math==Math)return ae}throw Error("Cannot find global object")}var n=r(this);function s(T,X){if(X)e:{var ae=n;T=T.split(".");for(var ye=0;ye<T.length-1;ye++){var Qe=T[ye];if(!(Qe in ae))break e;ae=ae[Qe]}T=T[T.length-1],ye=ae[T],X=X(ye),X!=ye&&X!=null&&e(ae,T,{configurable:!0,writable:!0,value:X})}}function a(T,X){T instanceof String&&(T+="");var ae=0,ye=!1,Qe={next:function(){if(!ye&&ae<T.length){var Ze=ae++;return{value:X(Ze,T[Ze]),done:!1}}return ye=!0,{done:!0,value:void 0}}};return Qe[Symbol.iterator]=function(){return Qe},Qe}s("Array.prototype.values",function(T){return T||function(){return a(this,function(X,ae){return ae})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(T){var X=typeof T;return X=X!="object"?X:T?Array.isArray(T)?"array":X:"null",X=="array"||X=="object"&&typeof T.length=="number"}function u(T){var X=typeof T;return X=="object"&&T!=null||X=="function"}function d(T,X,ae){return T.call.apply(T.bind,arguments)}function h(T,X,ae){if(!T)throw Error();if(2<arguments.length){var ye=Array.prototype.slice.call(arguments,2);return function(){var Qe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Qe,ye),T.apply(X,Qe)}}return function(){return T.apply(X,arguments)}}function m(T,X,ae){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,m.apply(null,arguments)}function g(T,X){var ae=Array.prototype.slice.call(arguments,1);return function(){var ye=ae.slice();return ye.push.apply(ye,arguments),T.apply(this,ye)}}function b(T,X){function ae(){}ae.prototype=X.prototype,T.aa=X.prototype,T.prototype=new ae,T.prototype.constructor=T,T.Qb=function(ye,Qe,Ze){for(var St=Array(arguments.length-2),mr=2;mr<arguments.length;mr++)St[mr-2]=arguments[mr];return X.prototype[Qe].apply(ye,St)}}function y(T){const X=T.length;if(0<X){const ae=Array(X);for(let ye=0;ye<X;ye++)ae[ye]=T[ye];return ae}return[]}function _(T,X){for(let ae=1;ae<arguments.length;ae++){const ye=arguments[ae];if(l(ye)){const Qe=T.length||0,Ze=ye.length||0;T.length=Qe+Ze;for(let St=0;St<Ze;St++)T[Qe+St]=ye[St]}else T.push(ye)}}class N{constructor(X,ae){this.i=X,this.j=ae,this.h=0,this.g=null}get(){let X;return 0<this.h?(this.h--,X=this.g,this.g=X.next,X.next=null):X=this.i(),X}}function k(T){return/^[\s\xa0]*$/.test(T)}function R(){var T=o.navigator;return T&&(T=T.userAgent)?T:""}function M(T){return M[" "](T),T}M[" "]=function(){};var j=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function L(T,X,ae){for(const ye in T)X.call(ae,T[ye],ye,T)}function C(T,X){for(const ae in T)X.call(void 0,T[ae],ae,T)}function E(T){const X={};for(const ae in T)X[ae]=T[ae];return X}const B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(T,X){let ae,ye;for(let Qe=1;Qe<arguments.length;Qe++){ye=arguments[Qe];for(ae in ye)T[ae]=ye[ae];for(let Ze=0;Ze<B.length;Ze++)ae=B[Ze],Object.prototype.hasOwnProperty.call(ye,ae)&&(T[ae]=ye[ae])}}function D(T){var X=1;T=T.split(":");const ae=[];for(;0<X&&T.length;)ae.push(T.shift()),X--;return T.length&&ae.push(T.join(":")),ae}function I(T){o.setTimeout(()=>{throw T},0)}function O(){var T=z;let X=null;return T.g&&(X=T.g,T.g=T.g.next,T.g||(T.h=null),X.next=null),X}class G{constructor(){this.h=this.g=null}add(X,ae){const ye=se.get();ye.set(X,ae),this.h?this.h.next=ye:this.g=ye,this.h=ye}}var se=new N(()=>new J,T=>T.reset());class J{constructor(){this.next=this.g=this.h=null}set(X,ae){this.h=X,this.g=ae,this.next=null}reset(){this.next=this.g=this.h=null}}let re,q=!1,z=new G,W=()=>{const T=o.Promise.resolve(void 0);re=()=>{T.then(ie)}};var ie=()=>{for(var T;T=O();){try{T.h.call(T.g)}catch(ae){I(ae)}var X=se;X.j(T),100>X.h&&(X.h++,T.next=X.g,X.g=T)}q=!1};function P(){this.s=this.s,this.C=this.C}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Y(T,X){this.type=T,this.g=this.target=X,this.defaultPrevented=!1}Y.prototype.h=function(){this.defaultPrevented=!0};var Z=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var T=!1,X=Object.defineProperty({},"passive",{get:function(){T=!0}});try{const ae=()=>{};o.addEventListener("test",ae,X),o.removeEventListener("test",ae,X)}catch{}return T}();function te(T,X){if(Y.call(this,T?T.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,T){var ae=this.type=T.type,ye=T.changedTouches&&T.changedTouches.length?T.changedTouches[0]:null;if(this.target=T.target||T.srcElement,this.g=X,X=T.relatedTarget){if(j){e:{try{M(X.nodeName);var Qe=!0;break e}catch{}Qe=!1}Qe||(X=null)}}else ae=="mouseover"?X=T.fromElement:ae=="mouseout"&&(X=T.toElement);this.relatedTarget=X,ye?(this.clientX=ye.clientX!==void 0?ye.clientX:ye.pageX,this.clientY=ye.clientY!==void 0?ye.clientY:ye.pageY,this.screenX=ye.screenX||0,this.screenY=ye.screenY||0):(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0),this.button=T.button,this.key=T.key||"",this.ctrlKey=T.ctrlKey,this.altKey=T.altKey,this.shiftKey=T.shiftKey,this.metaKey=T.metaKey,this.pointerId=T.pointerId||0,this.pointerType=typeof T.pointerType=="string"?T.pointerType:ce[T.pointerType]||"",this.state=T.state,this.i=T,T.defaultPrevented&&te.aa.h.call(this)}}b(te,Y);var ce={2:"touch",3:"pen",4:"mouse"};te.prototype.h=function(){te.aa.h.call(this);var T=this.i;T.preventDefault?T.preventDefault():T.returnValue=!1};var Ee="closure_listenable_"+(1e6*Math.random()|0),pe=0;function fe(T,X,ae,ye,Qe){this.listener=T,this.proxy=null,this.src=X,this.type=ae,this.capture=!!ye,this.ha=Qe,this.key=++pe,this.da=this.fa=!1}function xe(T){T.da=!0,T.listener=null,T.proxy=null,T.src=null,T.ha=null}function de(T){this.src=T,this.g={},this.h=0}de.prototype.add=function(T,X,ae,ye,Qe){var Ze=T.toString();T=this.g[Ze],T||(T=this.g[Ze]=[],this.h++);var St=Le(T,X,ye,Qe);return-1<St?(X=T[St],ae||(X.fa=!1)):(X=new fe(X,this.src,Ze,!!ye,Qe),X.fa=ae,T.push(X)),X};function oe(T,X){var ae=X.type;if(ae in T.g){var ye=T.g[ae],Qe=Array.prototype.indexOf.call(ye,X,void 0),Ze;(Ze=0<=Qe)&&Array.prototype.splice.call(ye,Qe,1),Ze&&(xe(X),T.g[ae].length==0&&(delete T.g[ae],T.h--))}}function Le(T,X,ae,ye){for(var Qe=0;Qe<T.length;++Qe){var Ze=T[Qe];if(!Ze.da&&Ze.listener==X&&Ze.capture==!!ae&&Ze.ha==ye)return Qe}return-1}var et="closure_lm_"+(1e6*Math.random()|0),Te={};function be(T,X,ae,ye,Qe){if(Array.isArray(X)){for(var Ze=0;Ze<X.length;Ze++)be(T,X[Ze],ae,ye,Qe);return null}return ae=Xt(ae),T&&T[Ee]?T.K(X,ae,u(ye)?!!ye.capture:!1,Qe):je(T,X,ae,!1,ye,Qe)}function je(T,X,ae,ye,Qe,Ze){if(!X)throw Error("Invalid event type");var St=u(Qe)?!!Qe.capture:!!Qe,mr=kt(T);if(mr||(T[et]=mr=new de(T)),ae=mr.add(X,ae,ye,St,Ze),ae.proxy)return ae;if(ye=qe(),ae.proxy=ye,ye.src=T,ye.listener=ae,T.addEventListener)Z||(Qe=St),Qe===void 0&&(Qe=!1),T.addEventListener(X.toString(),ye,Qe);else if(T.attachEvent)T.attachEvent(Et(X.toString()),ye);else if(T.addListener&&T.removeListener)T.addListener(ye);else throw Error("addEventListener and attachEvent are unavailable.");return ae}function qe(){function T(ae){return X.call(T.src,T.listener,ae)}const X=lt;return T}function st(T,X,ae,ye,Qe){if(Array.isArray(X))for(var Ze=0;Ze<X.length;Ze++)st(T,X[Ze],ae,ye,Qe);else ye=u(ye)?!!ye.capture:!!ye,ae=Xt(ae),T&&T[Ee]?(T=T.i,X=String(X).toString(),X in T.g&&(Ze=T.g[X],ae=Le(Ze,ae,ye,Qe),-1<ae&&(xe(Ze[ae]),Array.prototype.splice.call(Ze,ae,1),Ze.length==0&&(delete T.g[X],T.h--)))):T&&(T=kt(T))&&(X=T.g[X.toString()],T=-1,X&&(T=Le(X,ae,ye,Qe)),(ae=-1<T?X[T]:null)&&mt(ae))}function mt(T){if(typeof T!="number"&&T&&!T.da){var X=T.src;if(X&&X[Ee])oe(X.i,T);else{var ae=T.type,ye=T.proxy;X.removeEventListener?X.removeEventListener(ae,ye,T.capture):X.detachEvent?X.detachEvent(Et(ae),ye):X.addListener&&X.removeListener&&X.removeListener(ye),(ae=kt(X))?(oe(ae,T),ae.h==0&&(ae.src=null,X[et]=null)):xe(T)}}}function Et(T){return T in Te?Te[T]:Te[T]="on"+T}function lt(T,X){if(T.da)T=!0;else{X=new te(X,this);var ae=T.listener,ye=T.ha||T.src;T.fa&&mt(T),T=ae.call(ye,X)}return T}function kt(T){return T=T[et],T instanceof de?T:null}var Gt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xt(T){return typeof T=="function"?T:(T[Gt]||(T[Gt]=function(X){return T.handleEvent(X)}),T[Gt])}function It(){P.call(this),this.i=new de(this),this.M=this,this.F=null}b(It,P),It.prototype[Ee]=!0,It.prototype.removeEventListener=function(T,X,ae,ye){st(this,T,X,ae,ye)};function Dt(T,X){var ae,ye=T.F;if(ye)for(ae=[];ye;ye=ye.F)ae.push(ye);if(T=T.M,ye=X.type||X,typeof X=="string")X=new Y(X,T);else if(X instanceof Y)X.target=X.target||T;else{var Qe=X;X=new Y(ye,T),Q(X,Qe)}if(Qe=!0,ae)for(var Ze=ae.length-1;0<=Ze;Ze--){var St=X.g=ae[Ze];Qe=Wt(St,ye,!0,X)&&Qe}if(St=X.g=T,Qe=Wt(St,ye,!0,X)&&Qe,Qe=Wt(St,ye,!1,X)&&Qe,ae)for(Ze=0;Ze<ae.length;Ze++)St=X.g=ae[Ze],Qe=Wt(St,ye,!1,X)&&Qe}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var T=this.i,X;for(X in T.g){for(var ae=T.g[X],ye=0;ye<ae.length;ye++)xe(ae[ye]);delete T.g[X],T.h--}}this.F=null},It.prototype.K=function(T,X,ae,ye){return this.i.add(String(T),X,!1,ae,ye)},It.prototype.L=function(T,X,ae,ye){return this.i.add(String(T),X,!0,ae,ye)};function Wt(T,X,ae,ye){if(X=T.i.g[String(X)],!X)return!0;X=X.concat();for(var Qe=!0,Ze=0;Ze<X.length;++Ze){var St=X[Ze];if(St&&!St.da&&St.capture==ae){var mr=St.listener,Zr=St.ha||St.src;St.fa&&oe(T.i,St),Qe=mr.call(Zr,ye)!==!1&&Qe}}return Qe&&!ye.defaultPrevented}function Lt(T,X,ae){if(typeof T=="function")ae&&(T=m(T,ae));else if(T&&typeof T.handleEvent=="function")T=m(T.handleEvent,T);else throw Error("Invalid listener argument");return 2147483647<Number(X)?-1:o.setTimeout(T,X||0)}function Rt(T){T.g=Lt(()=>{T.g=null,T.i&&(T.i=!1,Rt(T))},T.l);const X=T.h;T.h=null,T.m.apply(null,X)}class xt extends P{constructor(X,ae){super(),this.m=X,this.l=ae,this.h=null,this.i=!1,this.g=null}j(X){this.h=arguments,this.g?this.i=!0:Rt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wr(T){P.call(this),this.h=T,this.g={}}b(wr,P);var Jt=[];function dn(T){L(T.g,function(X,ae){this.g.hasOwnProperty(ae)&&mt(X)},T),T.g={}}wr.prototype.N=function(){wr.aa.N.call(this),dn(this)},wr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gr=o.JSON.stringify,Ur=o.JSON.parse,Dn=class{stringify(T){return o.JSON.stringify(T,void 0)}parse(T){return o.JSON.parse(T,void 0)}};function Fr(){}Fr.prototype.h=null;function da(T){return T.h||(T.h=T.i())}function nn(){}var ns={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ps(){Y.call(this,"d")}b(ps,Y);function Pr(){Y.call(this,"c")}b(Pr,Y);var nr={},Gr=null;function fa(){return Gr=Gr||new It}nr.La="serverreachability";function Wn(T){Y.call(this,nr.La,T)}b(Wn,Y);function Es(T){const X=fa();Dt(X,new Wn(X))}nr.STAT_EVENT="statevent";function Na(T,X){Y.call(this,nr.STAT_EVENT,T),this.stat=X}b(Na,Y);function zt(T){const X=fa();Dt(X,new Na(X,T))}nr.Ma="timingevent";function fn(T,X){Y.call(this,nr.Ma,T),this.size=X}b(fn,Y);function sn(T,X){if(typeof T!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){T()},X)}function Rn(){this.g=!0}Rn.prototype.xa=function(){this.g=!1};function jn(T,X,ae,ye,Qe,Ze){T.info(function(){if(T.g)if(Ze)for(var St="",mr=Ze.split("&"),Zr=0;Zr<mr.length;Zr++){var kr=mr[Zr].split("=");if(1<kr.length){var Sn=kr[0];kr=kr[1];var Ln=Sn.split("_");St=2<=Ln.length&&Ln[1]=="type"?St+(Sn+"="+kr+"&"):St+(Sn+"=redacted&")}}else St=null;else St=Ze;return"XMLHTTP REQ ("+ye+") [attempt "+Qe+"]: "+X+`
`+ae+`
`+St})}function Yn(T,X,ae,ye,Qe,Ze,St){T.info(function(){return"XMLHTTP RESP ("+ye+") [ attempt "+Qe+"]: "+X+`
`+ae+`
`+Ze+" "+St})}function he(T,X,ae,ye){T.info(function(){return"XMLHTTP TEXT ("+X+"): "+_e(T,ae)+(ye?" "+ye:"")})}function ke(T,X){T.info(function(){return"TIMEOUT: "+X})}Rn.prototype.info=function(){};function _e(T,X){if(!T.g)return X;if(!X)return null;try{var ae=JSON.parse(X);if(ae){for(T=0;T<ae.length;T++)if(Array.isArray(ae[T])){var ye=ae[T];if(!(2>ye.length)){var Qe=ye[1];if(Array.isArray(Qe)&&!(1>Qe.length)){var Ze=Qe[0];if(Ze!="noop"&&Ze!="stop"&&Ze!="close")for(var St=1;St<Qe.length;St++)Qe[St]=""}}}}return gr(ae)}catch{return X}}var Se={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ne={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ie;function Ke(){}b(Ke,Fr),Ke.prototype.g=function(){return new XMLHttpRequest},Ke.prototype.i=function(){return{}},Ie=new Ke;function rt(T,X,ae,ye){this.j=T,this.i=X,this.l=ae,this.R=ye||1,this.U=new wr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new He}function He(){this.i=null,this.g="",this.h=!1}var We={},Je={};function yt(T,X,ae){T.L=1,T.v=dl(Ia(X)),T.m=ae,T.P=!0,Bt(T,null)}function Bt(T,X){T.F=Date.now(),Ut(T),T.A=Ia(T.v);var ae=T.A,ye=T.R;Array.isArray(ye)||(ye=[String(ye)]),hr(ae.i,"t",ye),T.C=0,ae=T.j.J,T.h=new He,T.g=Ae(T.j,ae?X:null,!T.m),0<T.O&&(T.M=new xt(m(T.Y,T,T.g),T.O)),X=T.U,ae=T.g,ye=T.ca;var Qe="readystatechange";Array.isArray(Qe)||(Qe&&(Jt[0]=Qe.toString()),Qe=Jt);for(var Ze=0;Ze<Qe.length;Ze++){var St=be(ae,Qe[Ze],ye||X.handleEvent,!1,X.h||X);if(!St)break;X.g[St.key]=St}X=T.H?E(T.H):{},T.m?(T.u||(T.u="POST"),X["Content-Type"]="application/x-www-form-urlencoded",T.g.ea(T.A,T.u,T.m,X)):(T.u="GET",T.g.ea(T.A,T.u,null,X)),Es(),jn(T.i,T.u,T.A,T.l,T.R,T.m)}rt.prototype.ca=function(T){T=T.target;const X=this.M;X&&Ms(T)==3?X.j():this.Y(T)},rt.prototype.Y=function(T){try{if(T==this.g)e:{const Ln=Ms(this.g);var X=this.g.Ba();const po=this.g.Z();if(!(3>Ln)&&(Ln!=3||this.g&&(this.h.h||this.g.oa()||JA(this.g)))){this.J||Ln!=4||X==7||(X==8||0>=po?Es(3):Es(2)),jr(this);var ae=this.g.Z();this.X=ae;t:if(Ot(this)){var ye=JA(this.g);T="";var Qe=ye.length,Ze=Ms(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zr(this),Or(this);var St="";break t}this.h.i=new o.TextDecoder}for(X=0;X<Qe;X++)this.h.h=!0,T+=this.h.i.decode(ye[X],{stream:!(Ze&&X==Qe-1)});ye.length=0,this.h.g+=T,this.C=0,St=this.h.g}else St=this.g.oa();if(this.o=ae==200,Yn(this.i,this.u,this.A,this.l,this.R,Ln,ae),this.o){if(this.T&&!this.K){t:{if(this.g){var mr,Zr=this.g;if((mr=Zr.g?Zr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(mr)){var kr=mr;break t}}kr=null}if(ae=kr)he(this.i,this.l,ae,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Rs(this,ae);else{this.o=!1,this.s=3,zt(12),zr(this),Or(this);break e}}if(this.P){ae=!0;let _s;for(;!this.J&&this.C<St.length;)if(_s=Nt(this,St),_s==Je){Ln==4&&(this.s=4,zt(14),ae=!1),he(this.i,this.l,null,"[Incomplete Response]");break}else if(_s==We){this.s=4,zt(15),he(this.i,this.l,St,"[Invalid Chunk]"),ae=!1;break}else he(this.i,this.l,_s,null),Rs(this,_s);if(Ot(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ln!=4||St.length!=0||this.h.h||(this.s=1,zt(16),ae=!1),this.o=this.o&&ae,!ae)he(this.i,this.l,St,"[Invalid Chunked Response]"),zr(this),Or(this);else if(0<St.length&&!this.W){this.W=!0;var Sn=this.j;Sn.g==this&&Sn.ba&&!Sn.M&&(Sn.j.info("Great, no buffering proxy detected. Bytes received: "+St.length),xl(Sn),Sn.M=!0,zt(11))}}else he(this.i,this.l,St,null),Rs(this,St);Ln==4&&zr(this),this.o&&!this.J&&(Ln==4?vl(this.j,this):(this.o=!1,Ut(this)))}else ml(this.g),ae==400&&0<St.indexOf("Unknown SID")?(this.s=3,zt(12)):(this.s=0,zt(13)),zr(this),Or(this)}}}catch{}finally{}};function Ot(T){return T.g?T.u=="GET"&&T.L!=2&&T.j.Ca:!1}function Nt(T,X){var ae=T.C,ye=X.indexOf(`
`,ae);return ye==-1?Je:(ae=Number(X.substring(ae,ye)),isNaN(ae)?We:(ye+=1,ye+ae>X.length?Je:(X=X.slice(ye,ye+ae),T.C=ye+ae,X)))}rt.prototype.cancel=function(){this.J=!0,zr(this)};function Ut(T){T.S=Date.now()+T.I,dr(T,T.I)}function dr(T,X){if(T.B!=null)throw Error("WatchDog timer not null");T.B=sn(m(T.ba,T),X)}function jr(T){T.B&&(o.clearTimeout(T.B),T.B=null)}rt.prototype.ba=function(){this.B=null;const T=Date.now();0<=T-this.S?(ke(this.i,this.A),this.L!=2&&(Es(),zt(17)),zr(this),this.s=2,Or(this)):dr(this,this.S-T)};function Or(T){T.j.G==0||T.J||vl(T.j,T)}function zr(T){jr(T);var X=T.M;X&&typeof X.ma=="function"&&X.ma(),T.M=null,dn(T.U),T.g&&(X=T.g,T.g=null,X.abort(),X.ma())}function Rs(T,X){try{var ae=T.j;if(ae.G!=0&&(ae.g==T||Ba(ae.h,T))){if(!T.K&&Ba(ae.h,T)&&ae.G==3){try{var ye=ae.Da.g.parse(X)}catch{ye=null}if(Array.isArray(ye)&&ye.length==3){var Qe=ye;if(Qe[0]==0){e:if(!ae.u){if(ae.g)if(ae.g.F+3e3<T.F)Oo(ae),Hc(ae);else break e;rc(ae),zt(18)}}else ae.za=Qe[1],0<ae.za-ae.T&&37500>Qe[2]&&ae.F&&ae.v==0&&!ae.C&&(ae.C=sn(m(ae.Za,ae),6e3));if(1>=$s(ae.h)&&ae.ca){try{ae.ca()}catch{}ae.ca=void 0}}else Ha(ae,11)}else if((T.K||ae.g==T)&&Oo(ae),!k(X))for(Qe=ae.Da.g.parse(X),X=0;X<Qe.length;X++){let kr=Qe[X];if(ae.T=kr[0],kr=kr[1],ae.G==2)if(kr[0]=="c"){ae.K=kr[1],ae.ia=kr[2];const Sn=kr[3];Sn!=null&&(ae.la=Sn,ae.j.info("VER="+ae.la));const Ln=kr[4];Ln!=null&&(ae.Aa=Ln,ae.j.info("SVER="+ae.Aa));const po=kr[5];po!=null&&typeof po=="number"&&0<po&&(ye=1.5*po,ae.L=ye,ae.j.info("backChannelRequestTimeoutMs_="+ye)),ye=ae;const _s=T.g;if(_s){const wi=_s.g?_s.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wi){var Ze=ye.h;Ze.g||wi.indexOf("spdy")==-1&&wi.indexOf("quic")==-1&&wi.indexOf("h2")==-1||(Ze.j=Ze.l,Ze.g=new Set,Ze.h&&(Xn(Ze,Ze.h),Ze.h=null))}if(ye.D){const yl=_s.g?_s.g.getResponseHeader("X-HTTP-Session-Id"):null;yl&&(ye.ya=yl,_n(ye.I,ye.D,yl))}}ae.G=3,ae.l&&ae.l.ua(),ae.ba&&(ae.R=Date.now()-T.F,ae.j.info("Handshake RTT: "+ae.R+"ms")),ye=ae;var St=T;if(ye.qa=V(ye,ye.J?ye.ia:null,ye.W),St.K){ma(ye.h,St);var mr=St,Zr=ye.L;Zr&&(mr.I=Zr),mr.B&&(jr(mr),Ut(mr)),ye.g=St}else Gc(ye);0<ae.i.length&&Vc(ae)}else kr[0]!="stop"&&kr[0]!="close"||Ha(ae,7);else ae.G==3&&(kr[0]=="stop"||kr[0]=="close"?kr[0]=="stop"?Ha(ae,7):jo(ae):kr[0]!="noop"&&ae.l&&ae.l.ta(kr),ae.v=0)}}Es(4)}catch{}}var pi=class{constructor(T,X){this.g=T,this.map=X}};function Ls(T){this.l=T||10,o.PerformanceNavigationTiming?(T=o.performance.getEntriesByType("navigation"),T=0<T.length&&(T[0].nextHopProtocol=="hq"||T[0].nextHopProtocol=="h2")):T=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=T?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ha(T){return T.h?!0:T.g?T.g.size>=T.j:!1}function $s(T){return T.h?1:T.g?T.g.size:0}function Ba(T,X){return T.h?T.h==X:T.g?T.g.has(X):!1}function Xn(T,X){T.g?T.g.add(X):T.h=X}function ma(T,X){T.h&&T.h==X?T.h=null:T.g&&T.g.has(X)&&T.g.delete(X)}Ls.prototype.cancel=function(){if(this.i=jc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const T of this.g.values())T.cancel();this.g.clear()}};function jc(T){if(T.h!=null)return T.i.concat(T.h.D);if(T.g!=null&&T.g.size!==0){let X=T.i;for(const ae of T.g.values())X=X.concat(ae.D);return X}return y(T.i)}function WA(T){if(T.V&&typeof T.V=="function")return T.V();if(typeof Map<"u"&&T instanceof Map||typeof Set<"u"&&T instanceof Set)return Array.from(T.values());if(typeof T=="string")return T.split("");if(l(T)){for(var X=[],ae=T.length,ye=0;ye<ae;ye++)X.push(T[ye]);return X}X=[],ae=0;for(ye in T)X[ae++]=T[ye];return X}function cl(T){if(T.na&&typeof T.na=="function")return T.na();if(!T.V||typeof T.V!="function"){if(typeof Map<"u"&&T instanceof Map)return Array.from(T.keys());if(!(typeof Set<"u"&&T instanceof Set)){if(l(T)||typeof T=="string"){var X=[];T=T.length;for(var ae=0;ae<T;ae++)X.push(ae);return X}X=[],ae=0;for(const ye in T)X[ae++]=ye;return X}}}function Vu(T,X){if(T.forEach&&typeof T.forEach=="function")T.forEach(X,void 0);else if(l(T)||typeof T=="string")Array.prototype.forEach.call(T,X,void 0);else for(var ae=cl(T),ye=WA(T),Qe=ye.length,Ze=0;Ze<Qe;Ze++)X.call(void 0,ye[Ze],ae&&ae[Ze],T)}var ka=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Oc(T,X){if(T){T=T.split("&");for(var ae=0;ae<T.length;ae++){var ye=T[ae].indexOf("="),Qe=null;if(0<=ye){var Ze=T[ae].substring(0,ye);Qe=T[ae].substring(ye+1)}else Ze=T[ae];X(Ze,Qe?decodeURIComponent(Qe.replace(/\+/g," ")):"")}}}function hn(T){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,T instanceof hn){this.h=T.h,ul(this,T.j),this.o=T.o,this.g=T.g,Al(this,T.s),this.l=T.l;var X=T.i,ae=new co;ae.i=X.i,X.g&&(ae.g=new Map(X.g),ae.h=X.h),lo(this,ae),this.m=T.m}else T&&(X=String(T).match(ka))?(this.h=!1,ul(this,X[1]||"",!0),this.o=gi(X[2]||""),this.g=gi(X[3]||"",!0),Al(this,X[4]),this.l=gi(X[5]||"",!0),lo(this,X[6]||"",!0),this.m=gi(X[7]||"")):(this.h=!1,this.i=new co(null,this.h))}hn.prototype.toString=function(){var T=[],X=this.j;X&&T.push(Ro(X,Gu,!0),":");var ae=this.g;return(ae||X=="file")&&(T.push("//"),(X=this.o)&&T.push(Ro(X,Gu,!0),"@"),T.push(encodeURIComponent(String(ae)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ae=this.s,ae!=null&&T.push(":",String(ae))),(ae=this.l)&&(this.g&&ae.charAt(0)!="/"&&T.push("/"),T.push(Ro(ae,ae.charAt(0)=="/"?Lo:zu,!0))),(ae=this.i.toString())&&T.push("?",ae),(ae=this.m)&&T.push("#",Ro(ae,Uo)),T.join("")};function Ia(T){return new hn(T)}function ul(T,X,ae){T.j=ae?gi(X,!0):X,T.j&&(T.j=T.j.replace(/:$/,""))}function Al(T,X){if(X){if(X=Number(X),isNaN(X)||0>X)throw Error("Bad port number "+X);T.s=X}else T.s=null}function lo(T,X,ae){X instanceof co?(T.i=X,XA(T.i,T.h)):(ae||(X=Ro(X,Qc)),T.i=new co(X,T.h))}function _n(T,X,ae){T.i.set(X,ae)}function dl(T){return _n(T,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),T}function gi(T,X){return T?X?decodeURI(T.replace(/%25/g,"%2525")):decodeURIComponent(T):""}function Ro(T,X,ae){return typeof T=="string"?(T=encodeURI(T).replace(X,YA),ae&&(T=T.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T):null}function YA(T){return T=T.charCodeAt(0),"%"+(T>>4&15).toString(16)+(T&15).toString(16)}var Gu=/[#\/\?@]/g,zu=/[#\?:]/g,Lo=/[#\?]/g,Qc=/[#\?@]/g,Uo=/#/g;function co(T,X){this.h=this.g=null,this.i=T||null,this.j=!!X}function On(T){T.g||(T.g=new Map,T.h=0,T.i&&Oc(T.i,function(X,ae){T.add(decodeURIComponent(X.replace(/\+/g," ")),ae)}))}t=co.prototype,t.add=function(T,X){On(this),this.i=null,T=Ao(this,T);var ae=this.g.get(T);return ae||this.g.set(T,ae=[]),ae.push(X),this.h+=1,this};function Mo(T,X){On(T),X=Ao(T,X),T.g.has(X)&&(T.i=null,T.h-=T.g.get(X).length,T.g.delete(X))}function uo(T,X){return On(T),X=Ao(T,X),T.g.has(X)}t.forEach=function(T,X){On(this),this.g.forEach(function(ae,ye){ae.forEach(function(Qe){T.call(X,Qe,ye,this)},this)},this)},t.na=function(){On(this);const T=Array.from(this.g.values()),X=Array.from(this.g.keys()),ae=[];for(let ye=0;ye<X.length;ye++){const Qe=T[ye];for(let Ze=0;Ze<Qe.length;Ze++)ae.push(X[ye])}return ae},t.V=function(T){On(this);let X=[];if(typeof T=="string")uo(this,T)&&(X=X.concat(this.g.get(Ao(this,T))));else{T=Array.from(this.g.values());for(let ae=0;ae<T.length;ae++)X=X.concat(T[ae])}return X},t.set=function(T,X){return On(this),this.i=null,T=Ao(this,T),uo(this,T)&&(this.h-=this.g.get(T).length),this.g.set(T,[X]),this.h+=1,this},t.get=function(T,X){return T?(T=this.V(T),0<T.length?String(T[0]):X):X};function hr(T,X,ae){Mo(T,X),0<ae.length&&(T.i=null,T.g.set(Ao(T,X),y(ae)),T.h+=ae.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const T=[],X=Array.from(this.g.keys());for(var ae=0;ae<X.length;ae++){var ye=X[ae];const Ze=encodeURIComponent(String(ye)),St=this.V(ye);for(ye=0;ye<St.length;ye++){var Qe=Ze;St[ye]!==""&&(Qe+="="+encodeURIComponent(String(St[ye]))),T.push(Qe)}}return this.i=T.join("&")};function Ao(T,X){return X=String(X),T.j&&(X=X.toLowerCase()),X}function XA(T,X){X&&!T.j&&(On(T),T.i=null,T.g.forEach(function(ae,ye){var Qe=ye.toLowerCase();ye!=Qe&&(Mo(this,ye),hr(this,Qe,ae))},T)),T.j=X}function ja(T,X){const ae=new Rn;if(o.Image){const ye=new Image;ye.onload=g(ei,ae,"TestLoadImage: loaded",!0,X,ye),ye.onerror=g(ei,ae,"TestLoadImage: error",!1,X,ye),ye.onabort=g(ei,ae,"TestLoadImage: abort",!1,X,ye),ye.ontimeout=g(ei,ae,"TestLoadImage: timeout",!1,X,ye),o.setTimeout(function(){ye.ontimeout&&ye.ontimeout()},1e4),ye.src=T}else X(!1)}function xi(T,X){const ae=new Rn,ye=new AbortController,Qe=setTimeout(()=>{ye.abort(),ei(ae,"TestPingServer: timeout",!1,X)},1e4);fetch(T,{signal:ye.signal}).then(Ze=>{clearTimeout(Qe),Ze.ok?ei(ae,"TestPingServer: ok",!0,X):ei(ae,"TestPingServer: server error",!1,X)}).catch(()=>{clearTimeout(Qe),ei(ae,"TestPingServer: error",!1,X)})}function ei(T,X,ae,ye,Qe){try{Qe&&(Qe.onload=null,Qe.onerror=null,Qe.onabort=null,Qe.ontimeout=null),ye(ae)}catch{}}function fo(){this.g=new Dn}function vi(T,X,ae){const ye=ae||"";try{Vu(T,function(Qe,Ze){let St=Qe;u(Qe)&&(St=gr(Qe)),X.push(ye+Ze+"="+encodeURIComponent(St))})}catch(Qe){throw X.push(ye+"type="+encodeURIComponent("_badmap")),Qe}}function fl(T){this.l=T.Ub||null,this.j=T.eb||!1}b(fl,Fr),fl.prototype.g=function(){return new Po(this.l,this.j)},fl.prototype.i=function(T){return function(){return T}}({});function Po(T,X){It.call(this),this.D=T,this.o=X,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Po,It),t=Po.prototype,t.open=function(T,X){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=T,this.A=X,this.readyState=1,Oa(this)},t.send=function(T){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const X={headers:this.u,method:this.B,credentials:this.m,cache:void 0};T&&(X.body=T),(this.D||o).fetch(new Request(this.A,X)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yi(this)),this.readyState=0},t.Sa=function(T){if(this.g&&(this.l=T,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=T.headers,this.readyState=2,Oa(this)),this.g&&(this.readyState=3,Oa(this),this.g)))if(this.responseType==="arraybuffer")T.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in T){if(this.j=T.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qu(this)}else T.text().then(this.Ra.bind(this),this.ga.bind(this))};function qu(T){T.j.read().then(T.Pa.bind(T)).catch(T.ga.bind(T))}t.Pa=function(T){if(this.g){if(this.o&&T.value)this.response.push(T.value);else if(!this.o){var X=T.value?T.value:new Uint8Array(0);(X=this.v.decode(X,{stream:!T.done}))&&(this.response=this.responseText+=X)}T.done?yi(this):Oa(this),this.readyState==3&&qu(this)}},t.Ra=function(T){this.g&&(this.response=this.responseText=T,yi(this))},t.Qa=function(T){this.g&&(this.response=T,yi(this))},t.ga=function(){this.g&&yi(this)};function yi(T){T.readyState=4,T.l=null,T.j=null,T.v=null,Oa(T)}t.setRequestHeader=function(T,X){this.u.append(T,X)},t.getResponseHeader=function(T){return this.h&&this.h.get(T.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const T=[],X=this.h.entries();for(var ae=X.next();!ae.done;)ae=ae.value,T.push(ae[0]+": "+ae[1]),ae=X.next();return T.join(`\r
`)};function Oa(T){T.onreadystatechange&&T.onreadystatechange.call(T)}Object.defineProperty(Po.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(T){this.m=T?"include":"same-origin"}});function ho(T){let X="";return L(T,function(ae,ye){X+=ye,X+=":",X+=ae,X+=`\r
`}),X}function Us(T,X,ae){e:{for(ye in ae){var ye=!1;break e}ye=!0}ye||(ae=ho(ae),typeof T=="string"?ae!=null&&encodeURIComponent(String(ae)):_n(T,X,ae))}function Jr(T){It.call(this),this.headers=new Map,this.o=T||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Jr,It);var hl=/^https?$/i,mo=["POST","PUT"];t=Jr.prototype,t.Ha=function(T){this.J=T},t.ea=function(T,X,ae,ye){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+T);X=X?X.toUpperCase():"GET",this.D=T,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ie.g(),this.v=this.o?da(this.o):da(Ie),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(X,String(T),!0),this.B=!1}catch(Ze){Ku(this,Ze);return}if(T=ae||"",ae=new Map(this.headers),ye)if(Object.getPrototypeOf(ye)===Object.prototype)for(var Qe in ye)ae.set(Qe,ye[Qe]);else if(typeof ye.keys=="function"&&typeof ye.get=="function")for(const Ze of ye.keys())ae.set(Ze,ye.get(Ze));else throw Error("Unknown input type for opt_headers: "+String(ye));ye=Array.from(ae.keys()).find(Ze=>Ze.toLowerCase()=="content-type"),Qe=o.FormData&&T instanceof o.FormData,!(0<=Array.prototype.indexOf.call(mo,X,void 0))||ye||Qe||ae.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ze,St]of ae)this.g.setRequestHeader(Ze,St);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Qa(this),this.u=!0,this.g.send(T),this.u=!1}catch(Ze){Ku(this,Ze)}};function Ku(T,X){T.h=!1,T.g&&(T.j=!0,T.g.abort(),T.j=!1),T.l=X,T.m=5,Xl(T),Xi(T)}function Xl(T){T.A||(T.A=!0,Dt(T,"complete"),Dt(T,"error"))}t.abort=function(T){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=T||7,Dt(this,"complete"),Dt(this,"abort"),Xi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xi(this,!0)),Jr.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Jl(this):this.bb())},t.bb=function(){Jl(this)};function Jl(T){if(T.h&&typeof i<"u"&&(!T.v[1]||Ms(T)!=4||T.Z()!=2)){if(T.u&&Ms(T)==4)Lt(T.Ea,0,T);else if(Dt(T,"readystatechange"),Ms(T)==4){T.h=!1;try{const St=T.Z();e:switch(St){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var X=!0;break e;default:X=!1}var ae;if(!(ae=X)){var ye;if(ye=St===0){var Qe=String(T.D).match(ka)[1]||null;!Qe&&o.self&&o.self.location&&(Qe=o.self.location.protocol.slice(0,-1)),ye=!hl.test(Qe?Qe.toLowerCase():"")}ae=ye}if(ae)Dt(T,"complete"),Dt(T,"success");else{T.m=6;try{var Ze=2<Ms(T)?T.g.statusText:""}catch{Ze=""}T.l=Ze+" ["+T.Z()+"]",Xl(T)}}finally{Xi(T)}}}}function Xi(T,X){if(T.g){Qa(T);const ae=T.g,ye=T.v[0]?()=>{}:null;T.g=null,T.v=null,X||Dt(T,"ready");try{ae.onreadystatechange=ye}catch{}}}function Qa(T){T.I&&(o.clearTimeout(T.I),T.I=null)}t.isActive=function(){return!!this.g};function Ms(T){return T.g?T.g.readyState:0}t.Z=function(){try{return 2<Ms(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(T){if(this.g){var X=this.g.responseText;return T&&X.indexOf(T)==0&&(X=X.substring(T.length)),Ur(X)}};function JA(T){try{if(!T.g)return null;if("response"in T.g)return T.g.response;switch(T.H){case"":case"text":return T.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in T.g)return T.g.mozResponseArrayBuffer}return null}catch{return null}}function ml(T){const X={};T=(T.g&&2<=Ms(T)&&T.g.getAllResponseHeaders()||"").split(`\r
`);for(let ye=0;ye<T.length;ye++){if(k(T[ye]))continue;var ae=D(T[ye]);const Qe=ae[0];if(ae=ae[1],typeof ae!="string")continue;ae=ae.trim();const Ze=X[Qe]||[];X[Qe]=Ze,Ze.push(ae)}C(X,function(ye){return ye.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fa(T,X,ae){return ae&&ae.internalChannelParams&&ae.internalChannelParams[T]||X}function pl(T){this.Aa=0,this.i=[],this.j=new Rn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fa("failFast",!1,T),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fa("baseRetryDelayMs",5e3,T),this.cb=Fa("retryDelaySeedMs",1e4,T),this.Wa=Fa("forwardChannelMaxRetries",2,T),this.wa=Fa("forwardChannelRequestTimeoutMs",2e4,T),this.pa=T&&T.xmlHttpFactory||void 0,this.Xa=T&&T.Tb||void 0,this.Ca=T&&T.useFetchStreams||!1,this.L=void 0,this.J=T&&T.supportsCrossDomainXhr||!1,this.K="",this.h=new Ls(T&&T.concurrentRequestLimit),this.Da=new fo,this.P=T&&T.fastHandshake||!1,this.O=T&&T.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=T&&T.Rb||!1,T&&T.xa&&this.j.xa(),T&&T.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&T&&T.detectBufferingProxy||!1,this.ja=void 0,T&&T.longPollingTimeout&&0<T.longPollingTimeout&&(this.ja=T.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=pl.prototype,t.la=8,t.G=1,t.connect=function(T,X,ae,ye){zt(0),this.W=T,this.H=X||{},ae&&ye!==void 0&&(this.H.OSID=ae,this.H.OAID=ye),this.F=this.X,this.I=V(this,null,this.W),Vc(this)};function jo(T){if(Zl(T),T.G==3){var X=T.U++,ae=Ia(T.I);if(_n(ae,"SID",T.K),_n(ae,"RID",X),_n(ae,"TYPE","terminate"),gl(T,ae),X=new rt(T,T.j,X),X.L=2,X.v=dl(Ia(ae)),ae=!1,o.navigator&&o.navigator.sendBeacon)try{ae=o.navigator.sendBeacon(X.v.toString(),"")}catch{}!ae&&o.Image&&(new Image().src=X.v,ae=!0),ae||(X.g=Ae(X.j,null),X.g.ea(X.v)),X.F=Date.now(),Ut(X)}zc(T)}function Hc(T){T.g&&(xl(T),T.g.cancel(),T.g=null)}function Zl(T){Hc(T),T.u&&(o.clearTimeout(T.u),T.u=null),Oo(T),T.h.cancel(),T.s&&(typeof T.s=="number"&&o.clearTimeout(T.s),T.s=null)}function Vc(T){if(!ha(T.h)&&!T.s){T.s=!0;var X=T.Ga;re||W(),q||(re(),q=!0),z.add(X,T),T.B=0}}function $u(T,X){return $s(T.h)>=T.h.j-(T.s?1:0)?!1:T.s?(T.i=X.D.concat(T.i),!0):T.G==1||T.G==2||T.B>=(T.Va?0:T.Wa)?!1:(T.s=sn(m(T.Ga,T,X),nc(T,T.B)),T.B++,!0)}t.Ga=function(T){if(this.s)if(this.s=null,this.G==1){if(!T){this.U=Math.floor(1e5*Math.random()),T=this.U++;const Qe=new rt(this,this.j,T);let Ze=this.o;if(this.S&&(Ze?(Ze=E(Ze),Q(Ze,this.S)):Ze=this.S),this.m!==null||this.O||(Qe.H=Ze,Ze=null),this.P)e:{for(var X=0,ae=0;ae<this.i.length;ae++){t:{var ye=this.i[ae];if("__data__"in ye.map&&(ye=ye.map.__data__,typeof ye=="string")){ye=ye.length;break t}ye=void 0}if(ye===void 0)break;if(X+=ye,4096<X){X=ae;break e}if(X===4096||ae===this.i.length-1){X=ae+1;break e}}X=1e3}else X=1e3;X=tc(this,Qe,X),ae=Ia(this.I),_n(ae,"RID",T),_n(ae,"CVER",22),this.D&&_n(ae,"X-HTTP-Session-Id",this.D),gl(this,ae),Ze&&(this.O?X="headers="+encodeURIComponent(String(ho(Ze)))+"&"+X:this.m&&Us(ae,this.m,Ze)),Xn(this.h,Qe),this.Ua&&_n(ae,"TYPE","init"),this.P?(_n(ae,"$req",X),_n(ae,"SID","null"),Qe.T=!0,yt(Qe,ae,null)):yt(Qe,ae,X),this.G=2}}else this.G==3&&(T?ec(this,T):this.i.length==0||ha(this.h)||ec(this))};function ec(T,X){var ae;X?ae=X.l:ae=T.U++;const ye=Ia(T.I);_n(ye,"SID",T.K),_n(ye,"RID",ae),_n(ye,"AID",T.T),gl(T,ye),T.m&&T.o&&Us(ye,T.m,T.o),ae=new rt(T,T.j,ae,T.B+1),T.m===null&&(ae.H=T.o),X&&(T.i=X.D.concat(T.i)),X=tc(T,ae,1e3),ae.I=Math.round(.5*T.wa)+Math.round(.5*T.wa*Math.random()),Xn(T.h,ae),yt(ae,ye,X)}function gl(T,X){T.H&&L(T.H,function(ae,ye){_n(X,ye,ae)}),T.l&&Vu({},function(ae,ye){_n(X,ye,ae)})}function tc(T,X,ae){ae=Math.min(T.i.length,ae);var ye=T.l?m(T.l.Na,T.l,T):null;e:{var Qe=T.i;let Ze=-1;for(;;){const St=["count="+ae];Ze==-1?0<ae?(Ze=Qe[0].g,St.push("ofs="+Ze)):Ze=0:St.push("ofs="+Ze);let mr=!0;for(let Zr=0;Zr<ae;Zr++){let kr=Qe[Zr].g;const Sn=Qe[Zr].map;if(kr-=Ze,0>kr)Ze=Math.max(0,Qe[Zr].g-100),mr=!1;else try{vi(Sn,St,"req"+kr+"_")}catch{ye&&ye(Sn)}}if(mr){ye=St.join("&");break e}}}return T=T.i.splice(0,ae),X.D=T,ye}function Gc(T){if(!T.g&&!T.u){T.Y=1;var X=T.Fa;re||W(),q||(re(),q=!0),z.add(X,T),T.v=0}}function rc(T){return T.g||T.u||3<=T.v?!1:(T.Y++,T.u=sn(m(T.Fa,T),nc(T,T.v)),T.v++,!0)}t.Fa=function(){if(this.u=null,ZA(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var T=2*this.R;this.j.info("BP detection timer enabled: "+T),this.A=sn(m(this.ab,this),T)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,zt(10),Hc(this),ZA(this))};function xl(T){T.A!=null&&(o.clearTimeout(T.A),T.A=null)}function ZA(T){T.g=new rt(T,T.j,"rpc",T.Y),T.m===null&&(T.g.H=T.o),T.g.O=0;var X=Ia(T.qa);_n(X,"RID","rpc"),_n(X,"SID",T.K),_n(X,"AID",T.T),_n(X,"CI",T.F?"0":"1"),!T.F&&T.ja&&_n(X,"TO",T.ja),_n(X,"TYPE","xmlhttp"),gl(T,X),T.m&&T.o&&Us(X,T.m,T.o),T.L&&(T.g.I=T.L);var ae=T.g;T=T.ia,ae.L=1,ae.v=dl(Ia(X)),ae.m=null,ae.P=!0,Bt(ae,T)}t.Za=function(){this.C!=null&&(this.C=null,Hc(this),rc(this),zt(19))};function Oo(T){T.C!=null&&(o.clearTimeout(T.C),T.C=null)}function vl(T,X){var ae=null;if(T.g==X){Oo(T),xl(T),T.g=null;var ye=2}else if(Ba(T.h,X))ae=X.D,ma(T.h,X),ye=1;else return;if(T.G!=0){if(X.o)if(ye==1){ae=X.m?X.m.length:0,X=Date.now()-X.F;var Qe=T.B;ye=fa(),Dt(ye,new fn(ye,ae)),Vc(T)}else Gc(T);else if(Qe=X.s,Qe==3||Qe==0&&0<X.X||!(ye==1&&$u(T,X)||ye==2&&rc(T)))switch(ae&&0<ae.length&&(X=T.h,X.i=X.i.concat(ae)),Qe){case 1:Ha(T,5);break;case 4:Ha(T,10);break;case 3:Ha(T,6);break;default:Ha(T,2)}}}function nc(T,X){let ae=T.Ta+Math.floor(Math.random()*T.cb);return T.isActive()||(ae*=2),ae*X}function Ha(T,X){if(T.j.info("Error code "+X),X==2){var ae=m(T.fb,T),ye=T.Xa;const Qe=!ye;ye=new hn(ye||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ul(ye,"https"),dl(ye),Qe?ja(ye.toString(),ae):xi(ye.toString(),ae)}else zt(2);T.G=0,T.l&&T.l.sa(X),zc(T),Zl(T)}t.fb=function(T){T?(this.j.info("Successfully pinged google.com"),zt(2)):(this.j.info("Failed to ping google.com"),zt(1))};function zc(T){if(T.G=0,T.ka=[],T.l){const X=jc(T.h);(X.length!=0||T.i.length!=0)&&(_(T.ka,X),_(T.ka,T.i),T.h.i.length=0,y(T.i),T.i.length=0),T.l.ra()}}function V(T,X,ae){var ye=ae instanceof hn?Ia(ae):new hn(ae);if(ye.g!="")X&&(ye.g=X+"."+ye.g),Al(ye,ye.s);else{var Qe=o.location;ye=Qe.protocol,X=X?X+"."+Qe.hostname:Qe.hostname,Qe=+Qe.port;var Ze=new hn(null);ye&&ul(Ze,ye),X&&(Ze.g=X),Qe&&Al(Ze,Qe),ae&&(Ze.l=ae),ye=Ze}return ae=T.D,X=T.ya,ae&&X&&_n(ye,ae,X),_n(ye,"VER",T.la),gl(T,ye),ye}function Ae(T,X,ae){if(X&&!T.J)throw Error("Can't create secondary domain capable XhrIo object.");return X=T.Ca&&!T.pa?new Jr(new fl({eb:ae})):new Jr(T.pa),X.Ha(T.J),X}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fe(){}t=Fe.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Re(){}Re.prototype.g=function(T,X){return new Ve(T,X)};function Ve(T,X){It.call(this),this.g=new pl(X),this.l=T,this.h=X&&X.messageUrlParams||null,T=X&&X.messageHeaders||null,X&&X.clientProtocolHeaderRequired&&(T?T["X-Client-Protocol"]="webchannel":T={"X-Client-Protocol":"webchannel"}),this.g.o=T,T=X&&X.initMessageHeaders||null,X&&X.messageContentType&&(T?T["X-WebChannel-Content-Type"]=X.messageContentType:T={"X-WebChannel-Content-Type":X.messageContentType}),X&&X.va&&(T?T["X-WebChannel-Client-Profile"]=X.va:T={"X-WebChannel-Client-Profile":X.va}),this.g.S=T,(T=X&&X.Sb)&&!k(T)&&(this.g.m=T),this.v=X&&X.supportsCrossDomainXhr||!1,this.u=X&&X.sendRawJson||!1,(X=X&&X.httpSessionIdParam)&&!k(X)&&(this.g.D=X,T=this.h,T!==null&&X in T&&(T=this.h,X in T&&delete T[X])),this.j=new Qt(this)}b(Ve,It),Ve.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ve.prototype.close=function(){jo(this.g)},Ve.prototype.o=function(T){var X=this.g;if(typeof T=="string"){var ae={};ae.__data__=T,T=ae}else this.u&&(ae={},ae.__data__=gr(T),T=ae);X.i.push(new pi(X.Ya++,T)),X.G==3&&Vc(X)},Ve.prototype.N=function(){this.g.l=null,delete this.j,jo(this.g),delete this.g,Ve.aa.N.call(this)};function ot(T){ps.call(this),T.__headers__&&(this.headers=T.__headers__,this.statusCode=T.__status__,delete T.__headers__,delete T.__status__);var X=T.__sm__;if(X){e:{for(const ae in X){T=ae;break e}T=void 0}(this.i=T)&&(T=this.i,X=X!==null&&T in X?X[T]:void 0),this.data=X}else this.data=T}b(ot,ps);function _t(){Pr.call(this),this.status=1}b(_t,Pr);function Qt(T){this.g=T}b(Qt,Fe),Qt.prototype.ua=function(){Dt(this.g,"a")},Qt.prototype.ta=function(T){Dt(this.g,new ot(T))},Qt.prototype.sa=function(T){Dt(this.g,new _t)},Qt.prototype.ra=function(){Dt(this.g,"b")},Re.prototype.createWebChannel=Re.prototype.g,Ve.prototype.send=Ve.prototype.o,Ve.prototype.open=Ve.prototype.m,Ve.prototype.close=Ve.prototype.close,jU=function(){return new Re},PU=function(){return fa()},MU=nr,F_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Se.NO_ERROR=0,Se.TIMEOUT=8,Se.HTTP_ERROR=6,By=Se,Ne.COMPLETE="complete",UU=Ne,nn.EventType=ns,ns.OPEN="a",ns.CLOSE="b",ns.ERROR="c",ns.MESSAGE="d",It.prototype.listen=It.prototype.K,hg=nn,Jr.prototype.listenOnce=Jr.prototype.L,Jr.prototype.getLastError=Jr.prototype.Ka,Jr.prototype.getLastErrorCode=Jr.prototype.Ba,Jr.prototype.getStatus=Jr.prototype.Z,Jr.prototype.getResponseJson=Jr.prototype.Oa,Jr.prototype.getResponseText=Jr.prototype.oa,Jr.prototype.send=Jr.prototype.ea,Jr.prototype.setWithCredentials=Jr.prototype.Ha,LU=Jr}).apply(typeof wv<"u"?wv:typeof self<"u"?self:typeof window<"u"?window:{});const Kk="@firebase/firestore",$k="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Li.UNAUTHENTICATED=new Li(null),Li.GOOGLE_CREDENTIALS=new Li("google-credentials-uid"),Li.FIRST_PARTY=new Li("first-party-uid"),Li.MOCK_USER=new Li("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ym="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh=new T5("@firebase/firestore");function W0(){return Bh.logLevel}function Zt(t,...e){if(Bh.logLevel<=cn.DEBUG){const r=e.map(j5);Bh.debug(`Firestore (${Ym}): ${t}`,...r)}}function LA(t,...e){if(Bh.logLevel<=cn.ERROR){const r=e.map(j5);Bh.error(`Firestore (${Ym}): ${t}`,...r)}}function Fm(t,...e){if(Bh.logLevel<=cn.WARN){const r=e.map(j5);Bh.warn(`Firestore (${Ym}): ${t}`,...r)}}function j5(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,OU(t,n,r)}function OU(t,e,r){let n=`FIRESTORE (${Ym}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw LA(n),new Error(n)}function Pn(t,e,r,n){let s="Unexpected state";typeof r=="string"?s=r:n=r,t||OU(e,s,n)}function Lr(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qt extends Uu{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aK{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Li.UNAUTHENTICATED))}shutdown(){}}class iK{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class oK{constructor(e){this.t=e,this.currentUser=Li.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Pn(this.o===void 0,42304);let n=this.i;const s=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let a=new TA;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new TA,e.enqueueRetryable(()=>s(this.currentUser))};const i=()=>{const l=a;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},o=l=>{Zt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Zt("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new TA)}},0),i()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Zt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Pn(typeof n.accessToken=="string",31837,{l:n}),new QU(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pn(e===null||typeof e=="string",2055,{h:e}),new Li(e)}}class lK{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=Li.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class cK{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new lK(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(Li.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Wk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uK{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ol(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){Pn(this.o===void 0,3512);const n=a=>{a.error!=null&&Zt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const i=a.token!==this.m;return this.m=a.token,Zt("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};const s=a=>{Zt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):Zt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Wk(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Pn(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new Wk(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AK(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=AK(40);for(let a=0;a<s.length;++a)n.length<20&&s[a]<r&&(n+=e.charAt(s[a]%62))}return n}}function un(t,e){return t<e?-1:t>e?1:0}function D_(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const s=t.charAt(n),a=e.charAt(n);if(s!==a)return XC(s)===XC(a)?un(s,a):XC(s)?1:-1}return un(t.length,e.length)}const dK=55296,fK=57343;function XC(t){const e=t.charCodeAt(0);return e>=dK&&e<=fK}function Dm(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk="__name__";class wu{constructor(e,r,n){r===void 0?r=0:r>e.length&&Sr(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&Sr(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return wu.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof wu?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const a=wu.compareSegments(e.get(s),r.get(s));if(a!==0)return a}return un(e.length,r.length)}static compareSegments(e,r){const n=wu.isNumericId(e),s=wu.isNumericId(r);return n&&!s?-1:!n&&s?1:n&&s?wu.extractNumericId(e).compare(wu.extractNumericId(r)):D_(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return nf.fromString(e.substring(4,e.length-2))}}class ls extends wu{construct(e,r,n){return new ls(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new qt(ht.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new ls(r)}static emptyPath(){return new ls([])}}const hK=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ai extends wu{construct(e,r,n){return new Ai(e,r,n)}static isValidIdentifier(e){return hK.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ai.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Yk}static keyField(){return new Ai([Yk])}static fromServerFormat(e){const r=[];let n="",s=0;const a=()=>{if(n.length===0)throw new qt(ht.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new qt(ht.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new qt(ht.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,s+=2}else o==="`"?(i=!i,s++):o!=="."||i?(n+=o,s++):(a(),s++)}if(a(),i)throw new qt(ht.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ai(r)}static emptyPath(){return new Ai([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this.path=e}static fromPath(e){return new Ar(ls.fromString(e))}static fromName(e){return new Ar(ls.fromString(e).popFirst(5))}static empty(){return new Ar(ls.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ls.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return ls.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ar(new ls(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HU(t,e,r){if(!r)throw new qt(ht.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function mK(t,e,r,n){if(e===!0&&n===!0)throw new qt(ht.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function Xk(t){if(!Ar.isDocumentKey(t))throw new qt(ht.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Jk(t){if(Ar.isDocumentKey(t))throw new qt(ht.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function VU(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function vw(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Sr(12329,{type:typeof t})}function so(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new qt(ht.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=vw(t);throw new qt(ht.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function pK(t,e){if(e<=0)throw new qt(ht.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sa(t,e){const r={typeString:t};return e&&(r.value=e),r}function $x(t,e){if(!VU(t))throw new qt(ht.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const s=e[n].typeString,a="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const i=t[n];if(s&&typeof i!==s){r=`JSON field '${n}' must be a ${s}.`;break}if(a!==void 0&&i!==a.value){r=`Expected '${n}' field to equal '${a.value}'`;break}}if(r)throw new qt(ht.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk=-62135596800,e3=1e6;class cr{static now(){return cr.fromMillis(Date.now())}static fromDate(e){return cr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*e3);return new cr(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new qt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new qt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<Zk)throw new qt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/e3}_compareTo(e){return this.seconds===e.seconds?un(this.nanoseconds,e.nanoseconds):un(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:cr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if($x(e,cr._jsonSchema))return new cr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Zk;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}cr._jsonSchemaVersion="firestore/timestamp/1.0",cr._jsonSchema={type:Sa("string",cr._jsonSchemaVersion),seconds:Sa("number"),nanoseconds:Sa("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{static fromTimestamp(e){return new Dr(e)}static min(){return new Dr(new cr(0,0))}static max(){return new Dr(new cr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox=-1;function gK(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=Dr.fromTimestamp(n===1e9?new cr(r+1,0):new cr(r,n));return new hf(s,Ar.empty(),e)}function xK(t){return new hf(t.readTime,t.key,ox)}class hf{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new hf(Dr.min(),Ar.empty(),ox)}static max(){return new hf(Dr.max(),Ar.empty(),ox)}}function vK(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Ar.comparator(t.documentKey,e.documentKey),r!==0?r:un(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yK="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wK{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xm(t){if(t.code!==ht.FAILED_PRECONDITION||t.message!==yK)throw t;Zt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Sr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new bt((n,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,s)},this.catchCallback=a=>{this.wrapFailure(r,a).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof bt?r:bt.resolve(r)}catch(r){return bt.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):bt.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):bt.reject(r)}static resolve(e){return new bt((r,n)=>{r(e)})}static reject(e){return new bt((r,n)=>{n(e)})}static waitFor(e){return new bt((r,n)=>{let s=0,a=0,i=!1;e.forEach(o=>{++s,o.next(()=>{++a,i&&a===s&&r()},l=>n(l))}),i=!0,a===s&&r()})}static or(e){let r=bt.resolve(!1);for(const n of e)r=r.next(s=>s?bt.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,a)=>{n.push(r.call(this,s,a))}),this.waitFor(n)}static mapArray(e,r){return new bt((n,s)=>{const a=e.length,i=new Array(a);let o=0;for(let l=0;l<a;l++){const u=l;r(e[u]).next(d=>{i[u]=d,++o,o===a&&n(i)},d=>s(d))}})}static doWhile(e,r){return new bt((n,s)=>{const a=()=>{e()===!0?r().next(()=>{a()},s):n()};a()})}}function bK(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Jm(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}yw.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q5=-1;function ww(t){return t==null}function a2(t){return t===0&&1/t==-1/0}function CK(t){return typeof t=="number"&&Number.isInteger(t)&&!a2(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GU="";function EK(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=t3(e)),e=_K(t.get(r),e);return t3(e)}function _K(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const a=t.charAt(s);switch(a){case"\0":r+="";break;case GU:r+="";break;default:r+=a}}return r}function t3(t){return t+GU+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r3(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Nf(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function zU(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,r){this.comparator=e,this.root=r||ci.EMPTY}insert(e,r){return new Fs(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,ci.BLACK,null,null))}remove(e){return new Fs(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ci.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bv(this.root,e,this.comparator,!1)}getReverseIterator(){return new bv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bv(this.root,e,this.comparator,!0)}}class bv{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?n(e.key,r):1,r&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ci{constructor(e,r,n,s,a){this.key=e,this.value=r,this.color=n??ci.RED,this.left=s??ci.EMPTY,this.right=a??ci.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,a){return new ci(e??this.key,r??this.value,n??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const a=n(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,r,n),null):a===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ci.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return ci.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ci.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ci.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Sr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Sr(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Sr(27949);return e+(this.isRed()?0:1)}}ci.EMPTY=null,ci.RED=!0,ci.BLACK=!1;ci.EMPTY=new class{constructor(){this.size=0}get key(){throw Sr(57766)}get value(){throw Sr(16141)}get color(){throw Sr(16727)}get left(){throw Sr(29726)}get right(){throw Sr(36894)}copy(e,r,n,s,a){return this}insert(e,r,n){return new ci(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e){this.comparator=e,this.data=new Fs(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new n3(this.data.getIterator())}getIteratorFrom(e){return new n3(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Ma)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,a=n.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Ma(this.comparator);return r.data=e,r}}class n3{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e){this.fields=e,e.sort(Ai.comparator)}static empty(){return new nl([])}unionWith(e){let r=new Ma(Ai.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new nl(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Dm(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new qU("Invalid base64 string: "+a):a}}(e);return new hi(r)}static fromUint8Array(e){const r=function(s){let a="";for(let i=0;i<s.length;++i)a+=String.fromCharCode(s[i]);return a}(e);return new hi(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return un(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hi.EMPTY_BYTE_STRING=new hi("");const SK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mf(t){if(Pn(!!t,39018),typeof t=="string"){let e=0;const r=SK.exec(t);if(Pn(!!r,46558,{timestamp:t}),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:sa(t.seconds),nanos:sa(t.nanos)}}function sa(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function pf(t){return typeof t=="string"?hi.fromBase64String(t):hi.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KU="server_timestamp",$U="__type__",WU="__previous_value__",YU="__local_write_time__";function H5(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[$U])==null?void 0:n.stringValue)===KU}function bw(t){const e=t.mapValue.fields[WU];return H5(e)?bw(e):e}function lx(t){const e=mf(t.mapValue.fields[YU].timestampValue);return new cr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TK{constructor(e,r,n,s,a,i,o,l,u,d){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=a,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=d}}const i2="(default)";class cx{constructor(e,r){this.projectId=e,this.database=r||i2}static empty(){return new cx("","")}get isDefaultDatabase(){return this.database===i2}isEqual(e){return e instanceof cx&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XU="__type__",NK="__max__",Cv={mapValue:{}},JU="__vector__",o2="value";function gf(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?H5(t)?4:kK(t)?9007199254740991:BK(t)?10:11:Sr(28295,{value:t})}function Ru(t,e){if(t===e)return!0;const r=gf(t);if(r!==gf(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return lx(t).isEqual(lx(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const i=mf(s.timestampValue),o=mf(a.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return pf(s.bytesValue).isEqual(pf(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return sa(s.geoPointValue.latitude)===sa(a.geoPointValue.latitude)&&sa(s.geoPointValue.longitude)===sa(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return sa(s.integerValue)===sa(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const i=sa(s.doubleValue),o=sa(a.doubleValue);return i===o?a2(i)===a2(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return Dm(t.arrayValue.values||[],e.arrayValue.values||[],Ru);case 10:case 11:return function(s,a){const i=s.mapValue.fields||{},o=a.mapValue.fields||{};if(r3(i)!==r3(o))return!1;for(const l in i)if(i.hasOwnProperty(l)&&(o[l]===void 0||!Ru(i[l],o[l])))return!1;return!0}(t,e);default:return Sr(52216,{left:t})}}function ux(t,e){return(t.values||[]).find(r=>Ru(r,e))!==void 0}function Rm(t,e){if(t===e)return 0;const r=gf(t),n=gf(e);if(r!==n)return un(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return un(t.booleanValue,e.booleanValue);case 2:return function(a,i){const o=sa(a.integerValue||a.doubleValue),l=sa(i.integerValue||i.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return s3(t.timestampValue,e.timestampValue);case 4:return s3(lx(t),lx(e));case 5:return D_(t.stringValue,e.stringValue);case 6:return function(a,i){const o=pf(a),l=pf(i);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(a,i){const o=a.split("/"),l=i.split("/");for(let u=0;u<o.length&&u<l.length;u++){const d=un(o[u],l[u]);if(d!==0)return d}return un(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,i){const o=un(sa(a.latitude),sa(i.latitude));return o!==0?o:un(sa(a.longitude),sa(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return a3(t.arrayValue,e.arrayValue);case 10:return function(a,i){var m,g,b,y;const o=a.fields||{},l=i.fields||{},u=(m=o[o2])==null?void 0:m.arrayValue,d=(g=l[o2])==null?void 0:g.arrayValue,h=un(((b=u==null?void 0:u.values)==null?void 0:b.length)||0,((y=d==null?void 0:d.values)==null?void 0:y.length)||0);return h!==0?h:a3(u,d)}(t.mapValue,e.mapValue);case 11:return function(a,i){if(a===Cv.mapValue&&i===Cv.mapValue)return 0;if(a===Cv.mapValue)return 1;if(i===Cv.mapValue)return-1;const o=a.fields||{},l=Object.keys(o),u=i.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const m=D_(l[h],d[h]);if(m!==0)return m;const g=Rm(o[l[h]],u[d[h]]);if(g!==0)return g}return un(l.length,d.length)}(t.mapValue,e.mapValue);default:throw Sr(23264,{he:r})}}function s3(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return un(t,e);const r=mf(t),n=mf(e),s=un(r.seconds,n.seconds);return s!==0?s:un(r.nanos,n.nanos)}function a3(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const a=Rm(r[s],n[s]);if(a)return a}return un(r.length,n.length)}function Lm(t){return R_(t)}function R_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=mf(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return pf(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Ar.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const a of r.values||[])s?s=!1:n+=",",n+=R_(a);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",a=!0;for(const i of n)a?a=!1:s+=",",s+=`${i}:${R_(r.fields[i])}`;return s+"}"}(t.mapValue):Sr(61005,{value:t})}function ky(t){switch(gf(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bw(t);return e?16+ky(e):16;case 5:return 2*t.stringValue.length;case 6:return pf(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,a)=>s+ky(a),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return Nf(n.fields,(a,i)=>{s+=a.length+ky(i)}),s}(t.mapValue);default:throw Sr(13486,{value:t})}}function i3(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function L_(t){return!!t&&"integerValue"in t}function V5(t){return!!t&&"arrayValue"in t}function o3(t){return!!t&&"nullValue"in t}function l3(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Iy(t){return!!t&&"mapValue"in t}function BK(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[XU])==null?void 0:n.stringValue)===JU}function Lg(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Nf(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Lg(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Lg(t.arrayValue.values[r]);return e}return{...t}}function kK(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===NK}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this.value=e}static empty(){return new To({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Iy(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lg(r)}setAll(e){let r=Ai.emptyPath(),n={},s=[];e.forEach((i,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,s),n={},s=[],r=o.popLast()}i?n[o.lastSegment()]=Lg(i):s.push(o.lastSegment())});const a=this.getFieldsMap(r);this.applyChanges(a,n,s)}delete(e){const r=this.field(e.popLast());Iy(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Ru(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];Iy(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){Nf(r,(s,a)=>e[s]=a);for(const s of n)delete e[s]}clone(){return new To(Lg(this.value))}}function ZU(t){const e=[];return Nf(t.fields,(r,n)=>{const s=new Ai([r]);if(Iy(n)){const a=ZU(n.mapValue).fields;if(a.length===0)e.push(s);else for(const i of a)e.push(s.child(i))}else e.push(s)}),new nl(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,r,n,s,a,i,o){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=a,this.data=i,this.documentState=o}static newInvalidDocument(e){return new ji(e,0,Dr.min(),Dr.min(),Dr.min(),To.empty(),0)}static newFoundDocument(e,r,n,s){return new ji(e,1,r,Dr.min(),n,s,0)}static newNoDocument(e,r){return new ji(e,2,r,Dr.min(),Dr.min(),To.empty(),0)}static newUnknownDocument(e,r){return new ji(e,3,r,Dr.min(),Dr.min(),To.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Dr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=To.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=To.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ji&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ji(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,r){this.position=e,this.inclusive=r}}function c3(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const a=e[s],i=t.position[s];if(a.field.isKeyField()?n=Ar.comparator(Ar.fromName(i.referenceValue),r.key):n=Rm(i,r.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function u3(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Ru(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,r="asc"){this.field=e,this.dir=r}}function IK(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8{}class _a extends e8{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new DK(e,r,n):r==="array-contains"?new UK(e,n):r==="in"?new MK(e,n):r==="not-in"?new PK(e,n):r==="array-contains-any"?new jK(e,n):new _a(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new RK(e,n):new LK(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Rm(r,this.value)):r!==null&&gf(this.value)===gf(r)&&this.matchesComparison(Rm(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Sr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Rc extends e8{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new Rc(e,r)}matches(e){return t8(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function t8(t){return t.op==="and"}function r8(t){return FK(t)&&t8(t)}function FK(t){for(const e of t.filters)if(e instanceof Rc)return!1;return!0}function U_(t){if(t instanceof _a)return t.field.canonicalString()+t.op.toString()+Lm(t.value);if(r8(t))return t.filters.map(e=>U_(e)).join(",");{const e=t.filters.map(r=>U_(r)).join(",");return`${t.op}(${e})`}}function n8(t,e){return t instanceof _a?function(n,s){return s instanceof _a&&n.op===s.op&&n.field.isEqual(s.field)&&Ru(n.value,s.value)}(t,e):t instanceof Rc?function(n,s){return s instanceof Rc&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((a,i,o)=>a&&n8(i,s.filters[o]),!0):!1}(t,e):void Sr(19439)}function s8(t){return t instanceof _a?function(r){return`${r.field.canonicalString()} ${r.op} ${Lm(r.value)}`}(t):t instanceof Rc?function(r){return r.op.toString()+" {"+r.getFilters().map(s8).join(" ,")+"}"}(t):"Filter"}class DK extends _a{constructor(e,r,n){super(e,r,n),this.key=Ar.fromName(n.referenceValue)}matches(e){const r=Ar.comparator(e.key,this.key);return this.matchesComparison(r)}}class RK extends _a{constructor(e,r){super(e,"in",r),this.keys=a8("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class LK extends _a{constructor(e,r){super(e,"not-in",r),this.keys=a8("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function a8(t,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(n=>Ar.fromName(n.referenceValue))}class UK extends _a{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return V5(r)&&ux(r.arrayValue,this.value)}}class MK extends _a{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&ux(this.value.arrayValue,r)}}class PK extends _a{constructor(e,r){super(e,"not-in",r)}matches(e){if(ux(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!ux(this.value.arrayValue,r)}}class jK extends _a{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!V5(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>ux(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OK{constructor(e,r=null,n=[],s=[],a=null,i=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=a,this.startAt=i,this.endAt=o,this.Te=null}}function A3(t,e=null,r=[],n=[],s=null,a=null,i=null){return new OK(t,e,r,n,s,a,i)}function G5(t){const e=Lr(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>U_(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(a){return a.field.canonicalString()+a.dir}(n)).join(","),ww(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Lm(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Lm(n)).join(",")),e.Te=r}return e.Te}function z5(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!IK(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!n8(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!u3(t.startAt,e.startAt)&&u3(t.endAt,e.endAt)}function M_(t){return Ar.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,r=null,n=[],s=[],a=null,i="F",o=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=a,this.limitType=i,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function QK(t,e,r,n,s,a,i,o){return new Zm(t,e,r,n,s,a,i,o)}function Cw(t){return new Zm(t)}function d3(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function i8(t){return t.collectionGroup!==null}function Ug(t){const e=Lr(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),r.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new Ma(Ai.comparator);return i.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(a=>{r.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Ax(a,n))}),r.has(Ai.keyField().canonicalString())||e.Ie.push(new Ax(Ai.keyField(),n))}return e.Ie}function Nu(t){const e=Lr(t);return e.Ee||(e.Ee=HK(e,Ug(t))),e.Ee}function HK(t,e){if(t.limitType==="F")return A3(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Ax(s.field,a)});const r=t.endAt?new l2(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new l2(t.startAt.position,t.startAt.inclusive):null;return A3(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function P_(t,e){const r=t.filters.concat([e]);return new Zm(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function c2(t,e,r){return new Zm(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Ew(t,e){return z5(Nu(t),Nu(e))&&t.limitType===e.limitType}function o8(t){return`${G5(Nu(t))}|lt:${t.limitType}`}function Y0(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>s8(s)).join(", ")}]`),ww(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>Lm(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>Lm(s)).join(",")),`Target(${n})`}(Nu(t))}; limitType=${t.limitType})`}function _w(t,e){return e.isFoundDocument()&&function(n,s){const a=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):Ar.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)}(t,e)&&function(n,s){for(const a of Ug(n))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const a of n.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(i,o,l){const u=c3(i,o,l);return i.inclusive?u<=0:u<0}(n.startAt,Ug(n),s)||n.endAt&&!function(i,o,l){const u=c3(i,o,l);return i.inclusive?u>=0:u>0}(n.endAt,Ug(n),s))}(t,e)}function VK(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function l8(t){return(e,r)=>{let n=!1;for(const s of Ug(t)){const a=GK(s,e,r);if(a!==0)return a;n=n||s.field.isKeyField()}return 0}}function GK(t,e,r){const n=t.field.isKeyField()?Ar.comparator(e.key,r.key):function(a,i,o){const l=i.data.field(a),u=o.data.field(a);return l!==null&&u!==null?Rm(l,u):Sr(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Sr(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,a]of n)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Nf(this.inner,(r,n)=>{for(const[s,a]of n)e(s,a)})}isEmpty(){return zU(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zK=new Fs(Ar.comparator);function UA(){return zK}const c8=new Fs(Ar.comparator);function mg(...t){let e=c8;for(const r of t)e=e.insert(r.key,r);return e}function u8(t){let e=c8;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Ah(){return Mg()}function A8(){return Mg()}function Mg(){return new Vh(t=>t.toString(),(t,e)=>t.isEqual(e))}const qK=new Fs(Ar.comparator),KK=new Ma(Ar.comparator);function An(...t){let e=KK;for(const r of t)e=e.add(r);return e}const $K=new Ma(un);function WK(){return $K}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q5(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:a2(e)?"-0":e}}function d8(t){return{integerValue:""+t}}function YK(t,e){return CK(e)?d8(e):q5(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(){this._=void 0}}function XK(t,e,r){return t instanceof u2?function(s,a){const i={fields:{[$U]:{stringValue:KU},[YU]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&H5(a)&&(a=bw(a)),a&&(i.fields[WU]=a),{mapValue:i}}(r,e):t instanceof Um?h8(t,e):t instanceof dx?m8(t,e):function(s,a){const i=f8(s,a),o=f3(i)+f3(s.Ae);return L_(i)&&L_(s.Ae)?d8(o):q5(s.serializer,o)}(t,e)}function JK(t,e,r){return t instanceof Um?h8(t,e):t instanceof dx?m8(t,e):r}function f8(t,e){return t instanceof A2?function(n){return L_(n)||function(a){return!!a&&"doubleValue"in a}(n)}(e)?e:{integerValue:0}:null}class u2 extends Sw{}class Um extends Sw{constructor(e){super(),this.elements=e}}function h8(t,e){const r=p8(e);for(const n of t.elements)r.some(s=>Ru(s,n))||r.push(n);return{arrayValue:{values:r}}}class dx extends Sw{constructor(e){super(),this.elements=e}}function m8(t,e){let r=p8(e);for(const n of t.elements)r=r.filter(s=>!Ru(s,n));return{arrayValue:{values:r}}}class A2 extends Sw{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function f3(t){return sa(t.integerValue||t.doubleValue)}function p8(t){return V5(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZK{constructor(e,r){this.field=e,this.transform=r}}function e$(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof Um&&s instanceof Um||n instanceof dx&&s instanceof dx?Dm(n.elements,s.elements,Ru):n instanceof A2&&s instanceof A2?Ru(n.Ae,s.Ae):n instanceof u2&&s instanceof u2}(t.transform,e.transform)}class t${constructor(e,r){this.version=e,this.transformResults=r}}class ao{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new ao}static exists(e){return new ao(void 0,e)}static updateTime(e){return new ao(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fy(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Tw{}function g8(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Nw(t.key,ao.none()):new Wx(t.key,t.data,ao.none());{const r=t.data,n=To.empty();let s=new Ma(Ai.comparator);for(let a of e.fields)if(!s.has(a)){let i=r.field(a);i===null&&a.length>1&&(a=a.popLast(),i=r.field(a)),i===null?n.delete(a):n.set(a,i),s=s.add(a)}return new Bf(t.key,n,new nl(s.toArray()),ao.none())}}function r$(t,e,r){t instanceof Wx?function(s,a,i){const o=s.value.clone(),l=m3(s.fieldTransforms,a,i.transformResults);o.setAll(l),a.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,r):t instanceof Bf?function(s,a,i){if(!Fy(s.precondition,a))return void a.convertToUnknownDocument(i.version);const o=m3(s.fieldTransforms,a,i.transformResults),l=a.data;l.setAll(x8(s)),l.setAll(o),a.convertToFoundDocument(i.version,l).setHasCommittedMutations()}(t,e,r):function(s,a,i){a.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,r)}function Pg(t,e,r,n){return t instanceof Wx?function(a,i,o,l){if(!Fy(a.precondition,i))return o;const u=a.value.clone(),d=p3(a.fieldTransforms,l,i);return u.setAll(d),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof Bf?function(a,i,o,l){if(!Fy(a.precondition,i))return o;const u=p3(a.fieldTransforms,l,i),d=i.data;return d.setAll(x8(a)),d.setAll(u),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(h=>h.field))}(t,e,r,n):function(a,i,o){return Fy(a.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,r)}function n$(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),a=f8(n.transform,s||null);a!=null&&(r===null&&(r=To.empty()),r.set(n.field,a))}return r||null}function h3(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Dm(n,s,(a,i)=>e$(a,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Wx extends Tw{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Bf extends Tw{constructor(e,r,n,s,a=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function x8(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function m3(t,e,r){const n=new Map;Pn(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let s=0;s<r.length;s++){const a=t[s],i=a.transform,o=e.data.field(a.field);n.set(a.field,JK(i,o,r[s]))}return n}function p3(t,e,r){const n=new Map;for(const s of t){const a=s.transform,i=r.data.field(s.field);n.set(s.field,XK(a,i,e))}return n}class Nw extends Tw{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class s$ extends Tw{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a${constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&r$(a,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Pg(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Pg(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=A8();return this.mutations.forEach(s=>{const a=e.get(s.key),i=a.overlayedDocument;let o=this.applyToLocalView(i,a.mutatedFields);o=r.has(s.key)?null:o;const l=g8(i,o);l!==null&&n.set(s.key,l),i.isValidDocument()||i.convertToNoDocument(Dr.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),An())}isEqual(e){return this.batchId===e.batchId&&Dm(this.mutations,e.mutations,(r,n)=>h3(r,n))&&Dm(this.baseMutations,e.baseMutations,(r,n)=>h3(r,n))}}class K5{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){Pn(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let s=function(){return qK}();const a=e.mutations;for(let i=0;i<a.length;i++)s=s.insert(a[i].key,n[i].version);return new K5(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i${constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o${constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wa,wn;function l$(t){switch(t){case ht.OK:return Sr(64938);case ht.CANCELLED:case ht.UNKNOWN:case ht.DEADLINE_EXCEEDED:case ht.RESOURCE_EXHAUSTED:case ht.INTERNAL:case ht.UNAVAILABLE:case ht.UNAUTHENTICATED:return!1;case ht.INVALID_ARGUMENT:case ht.NOT_FOUND:case ht.ALREADY_EXISTS:case ht.PERMISSION_DENIED:case ht.FAILED_PRECONDITION:case ht.ABORTED:case ht.OUT_OF_RANGE:case ht.UNIMPLEMENTED:case ht.DATA_LOSS:return!0;default:return Sr(15467,{code:t})}}function v8(t){if(t===void 0)return LA("GRPC error has no .code"),ht.UNKNOWN;switch(t){case wa.OK:return ht.OK;case wa.CANCELLED:return ht.CANCELLED;case wa.UNKNOWN:return ht.UNKNOWN;case wa.DEADLINE_EXCEEDED:return ht.DEADLINE_EXCEEDED;case wa.RESOURCE_EXHAUSTED:return ht.RESOURCE_EXHAUSTED;case wa.INTERNAL:return ht.INTERNAL;case wa.UNAVAILABLE:return ht.UNAVAILABLE;case wa.UNAUTHENTICATED:return ht.UNAUTHENTICATED;case wa.INVALID_ARGUMENT:return ht.INVALID_ARGUMENT;case wa.NOT_FOUND:return ht.NOT_FOUND;case wa.ALREADY_EXISTS:return ht.ALREADY_EXISTS;case wa.PERMISSION_DENIED:return ht.PERMISSION_DENIED;case wa.FAILED_PRECONDITION:return ht.FAILED_PRECONDITION;case wa.ABORTED:return ht.ABORTED;case wa.OUT_OF_RANGE:return ht.OUT_OF_RANGE;case wa.UNIMPLEMENTED:return ht.UNIMPLEMENTED;case wa.DATA_LOSS:return ht.DATA_LOSS;default:return Sr(39323,{code:t})}}(wn=wa||(wa={}))[wn.OK=0]="OK",wn[wn.CANCELLED=1]="CANCELLED",wn[wn.UNKNOWN=2]="UNKNOWN",wn[wn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wn[wn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wn[wn.NOT_FOUND=5]="NOT_FOUND",wn[wn.ALREADY_EXISTS=6]="ALREADY_EXISTS",wn[wn.PERMISSION_DENIED=7]="PERMISSION_DENIED",wn[wn.UNAUTHENTICATED=16]="UNAUTHENTICATED",wn[wn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wn[wn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wn[wn.ABORTED=10]="ABORTED",wn[wn.OUT_OF_RANGE=11]="OUT_OF_RANGE",wn[wn.UNIMPLEMENTED=12]="UNIMPLEMENTED",wn[wn.INTERNAL=13]="INTERNAL",wn[wn.UNAVAILABLE=14]="UNAVAILABLE",wn[wn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c$(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u$=new nf([4294967295,4294967295],0);function g3(t){const e=c$().encode(t),r=new RU;return r.update(e),new Uint8Array(r.digest())}function x3(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new nf([r,n],0),new nf([s,a],0)]}class $5{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new pg(`Invalid padding: ${r}`);if(n<0)throw new pg(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new pg(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new pg(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=nf.fromNumber(this.ge)}ye(e,r,n){let s=e.add(r.multiply(nf.fromNumber(n)));return s.compare(u$)===1&&(s=new nf([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=g3(e),[n,s]=x3(r);for(let a=0;a<this.hashCount;a++){const i=this.ye(n,s,a);if(!this.we(i))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),i=new $5(a,s,r);return n.forEach(o=>i.insert(o)),i}insert(e){if(this.ge===0)return;const r=g3(e),[n,s]=x3(r);for(let a=0;a<this.hashCount;a++){const i=this.ye(n,s,a);this.Se(i)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class pg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e,r,n,s,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,Yx.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Bw(Dr.min(),s,new Fs(un),UA(),An())}}class Yx{constructor(e,r,n,s,a){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Yx(n,r,An(),An(),An())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e,r,n,s){this.be=e,this.removedTargetIds=r,this.key=n,this.De=s}}class y8{constructor(e,r){this.targetId=e,this.Ce=r}}class w8{constructor(e,r,n=hi.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class v3{constructor(){this.ve=0,this.Fe=y3(),this.Me=hi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=An(),r=An(),n=An();return this.Fe.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:Sr(38017,{changeType:a})}}),new Yx(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=y3()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Pn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class A${constructor(e){this.Ge=e,this.ze=new Map,this.je=UA(),this.Je=Ev(),this.He=Ev(),this.Ye=new Fs(un)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:Sr(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((n,s)=>{this.rt(s)&&r(s)})}st(e){const r=e.targetId,n=e.Ce.count,s=this.ot(r);if(s){const a=s.target;if(M_(a))if(n===0){const i=new Ar(a.path);this.et(r,i,ji.newNoDocument(i,Dr.min()))}else Pn(n===1,20013,{expectedCount:n});else{const i=this._t(r);if(i!==n){const o=this.ut(e),l=o?this.ct(o,e,i):1;if(l!==0){this.it(r);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,u)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:a=0}=r;let i,o;try{i=pf(n).toUint8Array()}catch(l){if(l instanceof qU)return Fm("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new $5(i,s,a)}catch(l){return Fm(l instanceof pg?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let s=0;return n.forEach(a=>{const i=this.Ge.ht(),o=`projects/${i.projectId}/databases/${i.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.et(r,a,null),s++)}),s}Tt(e){const r=new Map;this.ze.forEach((a,i)=>{const o=this.ot(i);if(o){if(a.current&&M_(o.target)){const l=new Ar(o.target.path);this.It(l).has(i)||this.Et(i,l)||this.et(i,l,ji.newNoDocument(l,e))}a.Be&&(r.set(i,a.ke()),a.qe())}});let n=An();this.He.forEach((a,i)=>{let o=!0;i.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(a))}),this.je.forEach((a,i)=>i.setReadTime(e));const s=new Bw(e,r,this.Ye,this.je,n);return this.je=UA(),this.Je=Ev(),this.He=Ev(),this.Ye=new Fs(un),s}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,r)?s.Qe(r,1):s.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new v3,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new Ma(un),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new Ma(un),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||Zt("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new v3),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function Ev(){return new Fs(Ar.comparator)}function y3(){return new Fs(Ar.comparator)}const d$={asc:"ASCENDING",desc:"DESCENDING"},f$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},h$={and:"AND",or:"OR"};class m${constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function j_(t,e){return t.useProto3Json||ww(e)?e:{value:e}}function d2(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function b8(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function p$(t,e){return d2(t,e.toTimestamp())}function Bu(t){return Pn(!!t,49232),Dr.fromTimestamp(function(r){const n=mf(r);return new cr(n.seconds,n.nanos)}(t))}function W5(t,e){return O_(t,e).canonicalString()}function O_(t,e){const r=function(s){return new ls(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function C8(t){const e=ls.fromString(t);return Pn(N8(e),10190,{key:e.toString()}),e}function Q_(t,e){return W5(t.databaseId,e.path)}function JC(t,e){const r=C8(e);if(r.get(1)!==t.databaseId.projectId)throw new qt(ht.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new qt(ht.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Ar(_8(r))}function E8(t,e){return W5(t.databaseId,e)}function g$(t){const e=C8(t);return e.length===4?ls.emptyPath():_8(e)}function H_(t){return new ls(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _8(t){return Pn(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function w3(t,e,r){return{name:Q_(t,e),fields:r.value.mapValue.fields}}function x$(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Sr(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(u,d){return u.useProto3Json?(Pn(d===void 0||typeof d=="string",58123),hi.fromBase64String(d||"")):(Pn(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),hi.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,o=i&&function(u){const d=u.code===void 0?ht.UNKNOWN:v8(u.code);return new qt(d,u.message||"")}(i);r=new w8(n,s,a,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=JC(t,n.document.name),a=Bu(n.document.updateTime),i=n.document.createTime?Bu(n.document.createTime):Dr.min(),o=new To({mapValue:{fields:n.document.fields}}),l=ji.newFoundDocument(s,a,i,o),u=n.targetIds||[],d=n.removedTargetIds||[];r=new Dy(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=JC(t,n.document),a=n.readTime?Bu(n.readTime):Dr.min(),i=ji.newNoDocument(s,a),o=n.removedTargetIds||[];r=new Dy([],o,i.key,i)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=JC(t,n.document),a=n.removedTargetIds||[];r=new Dy([],a,s,null)}else{if(!("filter"in e))return Sr(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:a}=n,i=new o$(s,a),o=n.targetId;r=new y8(o,i)}}return r}function v$(t,e){let r;if(e instanceof Wx)r={update:w3(t,e.key,e.value)};else if(e instanceof Nw)r={delete:Q_(t,e.key)};else if(e instanceof Bf)r={update:w3(t,e.key,e.data),updateMask:N$(e.fieldMask)};else{if(!(e instanceof s$))return Sr(16599,{Vt:e.type});r={verify:Q_(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(a,i){const o=i.transform;if(o instanceof u2)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Um)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof dx)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof A2)return{fieldPath:i.field.canonicalString(),increment:o.Ae};throw Sr(20930,{transform:i.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:p$(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Sr(27497)}(t,e.precondition)),r}function y$(t,e){return t&&t.length>0?(Pn(e!==void 0,14353),t.map(r=>function(s,a){let i=s.updateTime?Bu(s.updateTime):Bu(a);return i.isEqual(Dr.min())&&(i=Bu(a)),new t$(i,s.transformResults||[])}(r,e))):[]}function w$(t,e){return{documents:[E8(t,e.path)]}}function b$(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=E8(t,s);const a=function(u){if(u.length!==0)return T8(Rc.create(u,"and"))}(e.filters);a&&(r.structuredQuery.where=a);const i=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:X0(m.field),direction:_$(m.dir)}}(d))}(e.orderBy);i&&(r.structuredQuery.orderBy=i);const o=j_(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:r,parent:s}}function C$(t){let e=g$(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){Pn(n===1,65062);const d=r.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let a=[];r.where&&(a=function(h){const m=S8(h);return m instanceof Rc&&r8(m)?m.getFilters():[m]}(r.where));let i=[];r.orderBy&&(i=function(h){return h.map(m=>function(b){return new Ax(J0(b.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(r.orderBy));let o=null;r.limit&&(o=function(h){let m;return m=typeof h=="object"?h.value:h,ww(m)?null:m}(r.limit));let l=null;r.startAt&&(l=function(h){const m=!!h.before,g=h.values||[];return new l2(g,m)}(r.startAt));let u=null;return r.endAt&&(u=function(h){const m=!h.before,g=h.values||[];return new l2(g,m)}(r.endAt)),QK(e,s,i,a,o,"F",l,u)}function E$(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Sr(28987,{purpose:s})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function S8(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=J0(r.unaryFilter.field);return _a.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=J0(r.unaryFilter.field);return _a.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=J0(r.unaryFilter.field);return _a.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=J0(r.unaryFilter.field);return _a.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Sr(61313);default:return Sr(60726)}}(t):t.fieldFilter!==void 0?function(r){return _a.create(J0(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Sr(58110);default:return Sr(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Rc.create(r.compositeFilter.filters.map(n=>S8(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Sr(1026)}}(r.compositeFilter.op))}(t):Sr(30097,{filter:t})}function _$(t){return d$[t]}function S$(t){return f$[t]}function T$(t){return h$[t]}function X0(t){return{fieldPath:t.canonicalString()}}function J0(t){return Ai.fromServerFormat(t.fieldPath)}function T8(t){return t instanceof _a?function(r){if(r.op==="=="){if(l3(r.value))return{unaryFilter:{field:X0(r.field),op:"IS_NAN"}};if(o3(r.value))return{unaryFilter:{field:X0(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(l3(r.value))return{unaryFilter:{field:X0(r.field),op:"IS_NOT_NAN"}};if(o3(r.value))return{unaryFilter:{field:X0(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:X0(r.field),op:S$(r.op),value:r.value}}}(t):t instanceof Rc?function(r){const n=r.getFilters().map(s=>T8(s));return n.length===1?n[0]:{compositeFilter:{op:T$(r.op),filters:n}}}(t):Sr(54877,{filter:t})}function N$(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function N8(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,r,n,s,a=Dr.min(),i=Dr.min(),o=hi.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Kd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Kd(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B${constructor(e){this.yt=e}}function k$(t){const e=C$({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?c2(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I${constructor(){this.Cn=new F$}addToCollectionParentIndex(e,r){return this.Cn.add(r),bt.resolve()}getCollectionParents(e,r){return bt.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return bt.resolve()}deleteFieldIndex(e,r){return bt.resolve()}deleteAllFieldIndexes(e){return bt.resolve()}createTargetIndexes(e,r){return bt.resolve()}getDocumentsMatchingTarget(e,r){return bt.resolve(null)}getIndexType(e,r){return bt.resolve(0)}getFieldIndexes(e,r){return bt.resolve([])}getNextCollectionGroupToUpdate(e){return bt.resolve(null)}getMinOffset(e,r){return bt.resolve(hf.min())}getMinOffsetFromCollectionGroup(e,r){return bt.resolve(hf.min())}updateCollectionGroup(e,r,n){return bt.resolve()}updateIndexEntries(e,r){return bt.resolve()}}class F${constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new Ma(ls.comparator),a=!s.has(n);return this.index[r]=s.add(n),a}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Ma(ls.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},B8=41943040;class _o{static withCacheSize(e){return new _o(e,_o.DEFAULT_COLLECTION_PERCENTILE,_o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_o.DEFAULT_COLLECTION_PERCENTILE=10,_o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_o.DEFAULT=new _o(B8,_o.DEFAULT_COLLECTION_PERCENTILE,_o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_o.DISABLED=new _o(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Mm(0)}static cr(){return new Mm(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3="LruGarbageCollector",D$=1048576;function E3([t,e],[r,n]){const s=un(t,r);return s===0?un(e,n):s}class R${constructor(e){this.Ir=e,this.buffer=new Ma(E3),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();E3(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class L${constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Zt(C3,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Jm(r)?Zt(C3,"Ignoring IndexedDB error during garbage collection: ",r):await Xm(r)}await this.Vr(3e5)})}}class U${constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return bt.resolve(yw.ce);const n=new R$(r);return this.mr.forEachTarget(e,s=>n.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>n.Ar(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Zt("LruGarbageCollector","Garbage collection skipped; disabled"),bt.resolve(b3)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Zt("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),b3):this.yr(e,r))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,s,a,i,o,l,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Zt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,i=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(n=h,o=Date.now(),this.removeTargets(e,n,r))).next(h=>(a=h,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(h=>(u=Date.now(),W0()<=cn.DEBUG&&Zt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${s} in `+(o-i)+`ms
	Removed ${a} targets in `+(l-o)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),bt.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:h})))}}function M$(t,e){return new U$(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P${constructor(){this.changes=new Vh(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,ji.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?bt.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j${constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O${constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&Pg(n.mutation,s,nl.empty(),cr.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,An()).next(()=>n))}getLocalViewOfDocuments(e,r,n=An()){const s=Ah();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(a=>{let i=mg();return a.forEach((o,l)=>{i=i.insert(o,l.overlayedDocument)}),i}))}getOverlayedDocuments(e,r){const n=Ah();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,An()))}populateOverlays(e,r,n){const s=[];return n.forEach(a=>{r.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((i,o)=>{r.set(i,o)})})}computeViews(e,r,n,s){let a=UA();const i=Mg(),o=function(){return Mg()}();return r.forEach((l,u)=>{const d=n.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof Bf)?a=a.insert(u.key,u):d!==void 0?(i.set(u.key,d.mutation.getFieldMask()),Pg(d.mutation,u,d.mutation.getFieldMask(),cr.now())):i.set(u.key,nl.empty())}),this.recalculateAndSaveOverlays(e,a).next(l=>(l.forEach((u,d)=>i.set(u,d)),r.forEach((u,d)=>o.set(u,new j$(d,i.get(u)??null))),o))}recalculateAndSaveOverlays(e,r){const n=Mg();let s=new Fs((i,o)=>i-o),a=An();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(i=>{for(const o of i)o.keys().forEach(l=>{const u=r.get(l);if(u===null)return;let d=n.get(l)||nl.empty();d=o.applyToLocalView(u,d),n.set(l,d);const h=(s.get(o.batchId)||An()).add(l);s=s.insert(o.batchId,h)})}).next(()=>{const i=[],o=s.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,d=l.value,h=A8();d.forEach(m=>{if(!a.has(m)){const g=g8(r.get(m),n.get(m));g!==null&&h.set(m,g),a=a.add(m)}}),i.push(this.documentOverlayCache.saveOverlays(e,u,h))}return bt.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(i){return Ar.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):i8(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(a=>{const i=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-a.size):bt.resolve(Ah());let o=ox,l=a;return i.next(u=>bt.forEach(u,(d,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),a.get(d)?bt.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,u,a)).next(()=>this.computeViews(e,l,u,An())).next(d=>({batchId:o,changes:u8(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Ar(r)).next(n=>{let s=mg();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const a=r.collectionGroup;let i=mg();return this.indexManager.getCollectionParents(e,a).next(o=>bt.forEach(o,l=>{const u=function(h,m){return new Zm(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,l.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,n,s).next(d=>{d.forEach((h,m)=>{i=i.insert(h,m)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,r,n,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(i=>(a=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,a,s))).next(i=>{a.forEach((l,u)=>{const d=u.getKey();i.get(d)===null&&(i=i.insert(d,ji.newInvalidDocument(d)))});let o=mg();return i.forEach((l,u)=>{const d=a.get(l);d!==void 0&&Pg(d.mutation,u,nl.empty(),cr.now()),_w(r,u)&&(o=o.insert(l,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q${constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return bt.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:Bu(s.createTime)}}(r)),bt.resolve()}getNamedQuery(e,r){return bt.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,function(s){return{name:s.name,query:k$(s.bundledQuery),readTime:Bu(s.readTime)}}(r)),bt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H${constructor(){this.overlays=new Fs(Ar.comparator),this.qr=new Map}getOverlay(e,r){return bt.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Ah();return bt.forEach(r,s=>this.getOverlay(e,s).next(a=>{a!==null&&n.set(s,a)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,a)=>{this.St(e,r,a)}),bt.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.qr.get(n);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(n)),bt.resolve()}getOverlaysForCollection(e,r,n){const s=Ah(),a=r.length+1,i=new Ar(r.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===a&&l.largestBatchId>n&&s.set(l.getKey(),l)}return bt.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let a=new Fs((u,d)=>u-d);const i=this.overlays.getIterator();for(;i.hasNext();){const u=i.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=a.get(u.largestBatchId);d===null&&(d=Ah(),a=a.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=Ah(),l=a.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>o.set(u,d)),!(o.size()>=s)););return bt.resolve(o)}St(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const i=this.qr.get(s.largestBatchId).delete(n.key);this.qr.set(s.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new i$(r,n));let a=this.qr.get(r);a===void 0&&(a=An(),this.qr.set(r,a)),this.qr.set(r,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V${constructor(){this.sessionToken=hi.EMPTY_BYTE_STRING}getSessionToken(e){return bt.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,bt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(){this.Qr=new Ma($a.$r),this.Ur=new Ma($a.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new $a(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Gr(new $a(e,r))}zr(e,r){e.forEach(n=>this.removeReference(n,r))}jr(e){const r=new Ar(new ls([])),n=new $a(r,e),s=new $a(r,e+1),a=[];return this.Ur.forEachInRange([n,s],i=>{this.Gr(i),a.push(i.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new Ar(new ls([])),n=new $a(r,e),s=new $a(r,e+1);let a=An();return this.Ur.forEachInRange([n,s],i=>{a=a.add(i.key)}),a}containsKey(e){const r=new $a(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class $a{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return Ar.comparator(e.key,r.key)||un(e.Yr,r.Yr)}static Kr(e,r){return un(e.Yr,r.Yr)||Ar.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G${constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Ma($a.$r)}checkEmpty(e){return bt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new a$(a,r,n,s);this.mutationQueue.push(i);for(const o of s)this.Zr=this.Zr.add(new $a(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return bt.resolve(i)}lookupMutationBatch(e,r){return bt.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.ei(n),a=s<0?0:s;return bt.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return bt.resolve(this.mutationQueue.length===0?Q5:this.tr-1)}getAllMutationBatches(e){return bt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new $a(r,0),s=new $a(r,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([n,s],i=>{const o=this.Xr(i.Yr);a.push(o)}),bt.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Ma(un);return r.forEach(s=>{const a=new $a(s,0),i=new $a(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,i],o=>{n=n.add(o.Yr)})}),bt.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let a=n;Ar.isDocumentKey(a)||(a=a.child(""));const i=new $a(new Ar(a),0);let o=new Ma(un);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!n.isPrefixOf(u)&&(u.length===s&&(o=o.add(l.Yr)),!0)},i),bt.resolve(this.ti(o))}ti(e){const r=[];return e.forEach(n=>{const s=this.Xr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){Pn(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return bt.forEach(r.mutations,s=>{const a=new $a(s.key,r.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,r){const n=new $a(r,0),s=this.Zr.firstAfterOrEqual(n);return bt.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,bt.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z${constructor(e){this.ri=e,this.docs=function(){return new Fs(Ar.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),a=s?s.size:0,i=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return bt.resolve(n?n.document.mutableCopy():ji.newInvalidDocument(r))}getEntries(e,r){let n=UA();return r.forEach(s=>{const a=this.docs.get(s);n=n.insert(s,a?a.document.mutableCopy():ji.newInvalidDocument(s))}),bt.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let a=UA();const i=r.path,o=new Ar(i.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!i.isPrefixOf(u.path))break;u.path.length>i.length+1||vK(xK(d),n)<=0||(s.has(d.key)||_w(r,d))&&(a=a.insert(d.key,d.mutableCopy()))}return bt.resolve(a)}getAllFromCollectionGroup(e,r,n,s){Sr(9500)}ii(e,r){return bt.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new q$(this)}getSize(e){return bt.resolve(this.size)}}class q$ extends P${constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(n)}),bt.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K${constructor(e){this.persistence=e,this.si=new Vh(r=>G5(r),z5),this.lastRemoteSnapshotVersion=Dr.min(),this.highestTargetId=0,this.oi=0,this._i=new Y5,this.targetCount=0,this.ai=Mm.ur()}forEachTarget(e,r){return this.si.forEach((n,s)=>r(s)),bt.resolve()}getLastRemoteSnapshotVersion(e){return bt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return bt.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),bt.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),bt.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new Mm(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,bt.resolve()}updateTargetData(e,r){return this.Pr(r),bt.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,bt.resolve()}removeTargets(e,r,n){let s=0;const a=[];return this.si.forEach((i,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.si.delete(i),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),bt.waitFor(a).next(()=>s)}getTargetCount(e){return bt.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return bt.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),bt.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const s=this.persistence.referenceDelegate,a=[];return s&&r.forEach(i=>{a.push(s.markPotentiallyOrphaned(e,i))}),bt.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),bt.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return bt.resolve(n)}containsKey(e,r){return bt.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k8{constructor(e,r){this.ui={},this.overlays={},this.ci=new yw(0),this.li=!1,this.li=!0,this.hi=new V$,this.referenceDelegate=e(this),this.Pi=new K$(this),this.indexManager=new I$,this.remoteDocumentCache=function(s){return new z$(s)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new B$(r),this.Ii=new Q$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new H$,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new G$(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){Zt("MemoryPersistence","Starting transaction:",e);const s=new $$(this.ci.next());return this.referenceDelegate.Ei(),n(s).next(a=>this.referenceDelegate.di(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ai(e,r){return bt.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,r)))}}class $$ extends wK{constructor(e){super(),this.currentSequenceNumber=e}}class X5{constructor(e){this.persistence=e,this.Ri=new Y5,this.Vi=null}static mi(e){return new X5(e)}get fi(){if(this.Vi)return this.Vi;throw Sr(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),bt.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),bt.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),bt.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach(s=>this.fi.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(a=>this.fi.add(a.toString()))}).next(()=>n.removeTargetData(e,r))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return bt.forEach(this.fi,n=>{const s=Ar.fromPath(n);return this.gi(e,s).next(a=>{a||r.removeEntry(s,Dr.min())})}).next(()=>(this.Vi=null,r.apply(e)))}updateLimboDocument(e,r){return this.gi(e,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(e){return 0}gi(e,r){return bt.or([()=>bt.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class f2{constructor(e,r){this.persistence=e,this.pi=new Vh(n=>EK(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=M$(this,r)}static mi(e,r){return new f2(e,r)}Ei(){}di(e){return bt.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}wr(e){let r=0;return this.pr(e,n=>{r++}).next(()=>r)}pr(e,r){return bt.forEach(this.pi,(n,s)=>this.br(e,n,s).next(a=>a?bt.resolve():r(s)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ii(e,i=>this.br(e,i,r).next(o=>{o||(n++,a.removeEntry(i,Dr.min()))})).next(()=>a.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),bt.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),bt.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),bt.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),bt.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=ky(e.data.value)),r}br(e,r,n){return bt.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.pi.get(r);return bt.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=s}static As(e,r){let n=An(),s=An();for(const a of r.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new J5(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y${constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return CV()?8:bK(qi())>0?6:4}()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,s){const a={result:null};return this.ys(e,r).next(i=>{a.result=i}).next(()=>{if(!a.result)return this.ws(e,r,s,n).next(i=>{a.result=i})}).next(()=>{if(a.result)return;const i=new W$;return this.Ss(e,r,i).next(o=>{if(a.result=o,this.Vs)return this.bs(e,r,i,o.size)})}).next(()=>a.result)}bs(e,r,n,s){return n.documentReadCount<this.fs?(W0()<=cn.DEBUG&&Zt("QueryEngine","SDK will not create cache indexes for query:",Y0(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),bt.resolve()):(W0()<=cn.DEBUG&&Zt("QueryEngine","Query:",Y0(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.gs*s?(W0()<=cn.DEBUG&&Zt("QueryEngine","The SDK decides to create cache indexes for query:",Y0(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nu(r))):bt.resolve())}ys(e,r){if(d3(r))return bt.resolve(null);let n=Nu(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=c2(r,null,"F"),n=Nu(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const i=An(...a);return this.ps.getDocuments(e,i).next(o=>this.indexManager.getMinOffset(e,n).next(l=>{const u=this.Ds(r,o);return this.Cs(r,u,i,l.readTime)?this.ys(e,c2(r,null,"F")):this.vs(e,u,r,l)}))})))}ws(e,r,n,s){return d3(r)||s.isEqual(Dr.min())?bt.resolve(null):this.ps.getDocuments(e,n).next(a=>{const i=this.Ds(r,a);return this.Cs(r,i,n,s)?bt.resolve(null):(W0()<=cn.DEBUG&&Zt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Y0(r)),this.vs(e,i,r,gK(s,ox)).next(o=>o))})}Ds(e,r){let n=new Ma(l8(e));return r.forEach((s,a)=>{_w(e,a)&&(n=n.add(a))}),n}Cs(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(e,r,n){return W0()<=cn.DEBUG&&Zt("QueryEngine","Using full collection scan to execute query:",Y0(r)),this.ps.getDocumentsMatchingQuery(e,r,hf.min(),n)}vs(e,r,n,s){return this.ps.getDocumentsMatchingQuery(e,n,s).next(a=>(r.forEach(i=>{a=a.insert(i.key,i)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z5="LocalStore",X$=3e8;class J${constructor(e,r,n,s){this.persistence=e,this.Fs=r,this.serializer=s,this.Ms=new Fs(un),this.xs=new Vh(a=>G5(a),z5),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new O$(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ms))}}function Z$(t,e,r,n){return new J$(t,e,r,n)}async function I8(t,e){const r=Lr(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(a=>(s=a,r.Bs(e),r.mutationQueue.getAllMutationBatches(n))).next(a=>{const i=[],o=[];let l=An();for(const u of s){i.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of a){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return r.localDocuments.getDocuments(n,l).next(u=>({Ls:u,removedBatchIds:i,addedBatchIds:o}))})})}function eW(t,e){const r=Lr(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),a=r.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,u,d){const h=u.batch,m=h.keys();let g=bt.resolve();return m.forEach(b=>{g=g.next(()=>d.getEntry(l,b)).next(y=>{const _=u.docVersions.get(b);Pn(_!==null,48541),y.version.compareTo(_)<0&&(h.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),d.addEntry(y)))})}),g.next(()=>o.mutationQueue.removeMutationBatch(l,h))}(r,n,e,a).next(()=>a.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=An();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function F8(t){const e=Lr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Pi.getLastRemoteSnapshotVersion(r))}function tW(t,e){const r=Lr(t),n=e.snapshotVersion;let s=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const i=r.Ns.newChangeBuffer({trackRemovals:!0});s=r.Ms;const o=[];e.targetChanges.forEach((d,h)=>{const m=s.get(h);if(!m)return;o.push(r.Pi.removeMatchingKeys(a,d.removedDocuments,h).next(()=>r.Pi.addMatchingKeys(a,d.addedDocuments,h)));let g=m.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(hi.EMPTY_BYTE_STRING,Dr.min()).withLastLimboFreeSnapshotVersion(Dr.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,n)),s=s.insert(h,g),function(y,_,N){return y.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=X$?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(m,g,d)&&o.push(r.Pi.updateTargetData(a,g))});let l=UA(),u=An();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(a,d))}),o.push(rW(a,i,e.documentUpdates).next(d=>{l=d.ks,u=d.qs})),!n.isEqual(Dr.min())){const d=r.Pi.getLastRemoteSnapshotVersion(a).next(h=>r.Pi.setTargetsMetadata(a,a.currentSequenceNumber,n));o.push(d)}return bt.waitFor(o).next(()=>i.apply(a)).next(()=>r.localDocuments.getLocalViewOfDocuments(a,l,u)).next(()=>l)}).then(a=>(r.Ms=s,a))}function rW(t,e,r){let n=An(),s=An();return r.forEach(a=>n=n.add(a)),e.getEntries(t,n).next(a=>{let i=UA();return r.forEach((o,l)=>{const u=a.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(o)),l.isNoDocument()&&l.version.isEqual(Dr.min())?(e.removeEntry(o,l.readTime),i=i.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),i=i.insert(o,l)):Zt(Z5,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)}),{ks:i,qs:s}})}function nW(t,e){const r=Lr(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=Q5),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function sW(t,e){const r=Lr(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Pi.getTargetData(n,e).next(a=>a?(s=a,bt.resolve(s)):r.Pi.allocateTargetId(n).next(i=>(s=new Kd(e,i,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.Ms.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n})}async function V_(t,e,r){const n=Lr(t),s=n.Ms.get(e),a=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",a,i=>n.persistence.referenceDelegate.removeTarget(i,s))}catch(i){if(!Jm(i))throw i;Zt(Z5,`Failed to update sequence numbers for target ${e}: ${i}`)}n.Ms=n.Ms.remove(e),n.xs.delete(s.target)}function _3(t,e,r){const n=Lr(t);let s=Dr.min(),a=An();return n.persistence.runTransaction("Execute query","readwrite",i=>function(l,u,d){const h=Lr(l),m=h.xs.get(d);return m!==void 0?bt.resolve(h.Ms.get(m)):h.Pi.getTargetData(u,d)}(n,i,Nu(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(i,o.targetId).next(l=>{a=l})}).next(()=>n.Fs.getDocumentsMatchingQuery(i,e,r?s:Dr.min(),r?a:An())).next(o=>(aW(n,VK(e),o),{documents:o,Qs:a})))}function aW(t,e,r){let n=t.Os.get(e)||Dr.min();r.forEach((s,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),t.Os.set(e,n)}class S3{constructor(){this.activeTargetIds=WK()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class iW{constructor(){this.Mo=new S3,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new S3,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oW{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3="ConnectivityMonitor";class N3{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Zt(T3,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Zt(T3,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _v=null;function G_(){return _v===null?_v=function(){return 268435456+Math.round(2147483648*Math.random())}():_v++,"0x"+_v.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC="RestConnection",lW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cW{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${s}`,this.Wo=this.databaseId.database===i2?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Go(e,r,n,s,a){const i=G_(),o=this.zo(e,r.toUriEncodedString());Zt(ZC,`Sending RPC '${e}' ${i}:`,o,n);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,a);const{host:u}=new URL(o),d=Qh(u);return this.Jo(e,o,l,n,d).then(h=>(Zt(ZC,`Received RPC '${e}' ${i}: `,h),h),h=>{throw Fm(ZC,`RPC '${e}' ${i} failed with error: `,h,"url: ",o,"request:",n),h})}Ho(e,r,n,s,a,i){return this.Go(e,r,n,s,a)}jo(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ym}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>e[a]=s),n&&n.headers.forEach((s,a)=>e[a]=s)}zo(e,r){const n=lW[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uW{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni="WebChannelConnection";class AW extends cW{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,s,a){const i=G_();return new Promise((o,l)=>{const u=new LU;u.setWithCredentials(!0),u.listenOnce(UU.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case By.NO_ERROR:const h=u.getResponseJson();Zt(Ni,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case By.TIMEOUT:Zt(Ni,`RPC '${e}' ${i} timed out`),l(new qt(ht.DEADLINE_EXCEEDED,"Request time out"));break;case By.HTTP_ERROR:const m=u.getStatus();if(Zt(Ni,`RPC '${e}' ${i} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const b=g==null?void 0:g.error;if(b&&b.status&&b.message){const y=function(N){const k=N.toLowerCase().replace(/_/g,"-");return Object.values(ht).indexOf(k)>=0?k:ht.UNKNOWN}(b.status);l(new qt(y,b.message))}else l(new qt(ht.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new qt(ht.UNAVAILABLE,"Connection failed."));break;default:Sr(9055,{l_:e,streamId:i,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Zt(Ni,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);Zt(Ni,`RPC '${e}' ${i} sending request:`,s),u.send(r,"POST",d,n,15)})}T_(e,r,n){const s=G_(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=jU(),o=PU(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const d=a.join("");Zt(Ni,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=i.createWebChannel(d,l);this.I_(h);let m=!1,g=!1;const b=new uW({Yo:_=>{g?Zt(Ni,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(m||(Zt(Ni,`Opening RPC '${e}' stream ${s} transport.`),h.open(),m=!0),Zt(Ni,`RPC '${e}' stream ${s} sending:`,_),h.send(_))},Zo:()=>h.close()}),y=(_,N,k)=>{_.listen(N,R=>{try{k(R)}catch(M){setTimeout(()=>{throw M},0)}})};return y(h,hg.EventType.OPEN,()=>{g||(Zt(Ni,`RPC '${e}' stream ${s} transport opened.`),b.o_())}),y(h,hg.EventType.CLOSE,()=>{g||(g=!0,Zt(Ni,`RPC '${e}' stream ${s} transport closed`),b.a_(),this.E_(h))}),y(h,hg.EventType.ERROR,_=>{g||(g=!0,Fm(Ni,`RPC '${e}' stream ${s} transport errored. Name:`,_.name,"Message:",_.message),b.a_(new qt(ht.UNAVAILABLE,"The operation could not be completed")))}),y(h,hg.EventType.MESSAGE,_=>{var N;if(!g){const k=_.data[0];Pn(!!k,16349);const R=k,M=(R==null?void 0:R.error)||((N=R[0])==null?void 0:N.error);if(M){Zt(Ni,`RPC '${e}' stream ${s} received error:`,M);const j=M.status;let L=function(B){const Q=wa[B];if(Q!==void 0)return v8(Q)}(j),C=M.message;L===void 0&&(L=ht.INTERNAL,C="Unknown error status: "+j+" with message "+M.message),g=!0,b.a_(new qt(L,C)),h.close()}else Zt(Ni,`RPC '${e}' stream ${s} received:`,k),b.u_(k)}}),y(o,MU.STAT_EVENT,_=>{_.stat===F_.PROXY?Zt(Ni,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===F_.NOPROXY&&Zt(Ni,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(r=>r===e)}}function eE(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(t){return new m$(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8{constructor(e,r,n=1e3,s=1.5,a=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),s=Math.max(0,r-n);s>0&&Zt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3="PersistentStream";class R8{constructor(e,r,n,s,a,i,o,l){this.Mi=e,this.S_=n,this.b_=s,this.connection=a,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new D8(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===ht.RESOURCE_EXHAUSTED?(LA(r.toString()),LA("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===ht.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.D_===r&&this.G_(n,s)},n=>{e(()=>{const s=new qt(ht.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(s)})})}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{n(()=>this.z_(s))}),this.stream.onMessage(s=>{n(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Zt(B3,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget(()=>this.D_===e?r():(Zt(B3,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dW extends R8{constructor(e,r,n,s,a,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,i),this.serializer=a}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=x$(this.serializer,e),n=function(a){if(!("targetChange"in a))return Dr.min();const i=a.targetChange;return i.targetIds&&i.targetIds.length?Dr.min():i.readTime?Bu(i.readTime):Dr.min()}(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=H_(this.serializer),r.addTarget=function(a,i){let o;const l=i.target;if(o=M_(l)?{documents:w$(a,l)}:{query:b$(a,l).ft},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=b8(a,i.resumeToken);const u=j_(a,i.expectedCount);u!==null&&(o.expectedCount=u)}else if(i.snapshotVersion.compareTo(Dr.min())>0){o.readTime=d2(a,i.snapshotVersion.toTimestamp());const u=j_(a,i.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const n=E$(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=H_(this.serializer),r.removeTarget=e,this.q_(r)}}class fW extends R8{constructor(e,r,n,s,a,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,i),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return Pn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Pn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=y$(e.writeResults,e.commitTime),n=Bu(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=H_(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>v$(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hW{}class mW extends hW{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new qt(ht.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,i])=>this.connection.Go(e,O_(r,n),s,a,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new qt(ht.UNKNOWN,a.toString())})}Ho(e,r,n,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Ho(e,O_(r,n),s,i,o,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new qt(ht.UNKNOWN,i.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class pW{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(LA(r),this.aa=!1):Zt("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh="RemoteStore";class gW{constructor(e,r,n,s,a){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(i=>{n.enqueueAndForget(async()=>{Gh(this)&&(Zt(kh,"Restarting streams for network reachability change."),await async function(l){const u=Lr(l);u.Ea.add(4),await Xx(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Iw(u)}(this))})}),this.Ra=new pW(n,s)}}async function Iw(t){if(Gh(t))for(const e of t.da)await e(!0)}async function Xx(t){for(const e of t.da)await e(!1)}function L8(t,e){const r=Lr(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),n4(r)?r4(r):ep(r).O_()&&t4(r,e))}function e4(t,e){const r=Lr(t),n=ep(r);r.Ia.delete(e),n.O_()&&U8(r,e),r.Ia.size===0&&(n.O_()?n.L_():Gh(r)&&r.Ra.set("Unknown"))}function t4(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Dr.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}ep(t).Y_(e)}function U8(t,e){t.Va.Ue(e),ep(t).Z_(e)}function r4(t){t.Va=new A$({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ep(t).start(),t.Ra.ua()}function n4(t){return Gh(t)&&!ep(t).x_()&&t.Ia.size>0}function Gh(t){return Lr(t).Ea.size===0}function M8(t){t.Va=void 0}async function xW(t){t.Ra.set("Online")}async function vW(t){t.Ia.forEach((e,r)=>{t4(t,e)})}async function yW(t,e){M8(t),n4(t)?(t.Ra.ha(e),r4(t)):t.Ra.set("Unknown")}async function wW(t,e,r){if(t.Ra.set("Online"),e instanceof w8&&e.state===2&&e.cause)try{await async function(s,a){const i=a.cause;for(const o of a.targetIds)s.Ia.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.Ia.delete(o),s.Va.removeTarget(o))}(t,e)}catch(n){Zt(kh,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await h2(t,n)}else if(e instanceof Dy?t.Va.Ze(e):e instanceof y8?t.Va.st(e):t.Va.tt(e),!r.isEqual(Dr.min()))try{const n=await F8(t.localStore);r.compareTo(n)>=0&&await function(a,i){const o=a.Va.Tt(i);return o.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=a.Ia.get(u);d&&a.Ia.set(u,d.withResumeToken(l.resumeToken,i))}}),o.targetMismatches.forEach((l,u)=>{const d=a.Ia.get(l);if(!d)return;a.Ia.set(l,d.withResumeToken(hi.EMPTY_BYTE_STRING,d.snapshotVersion)),U8(a,l);const h=new Kd(d.target,l,u,d.sequenceNumber);t4(a,h)}),a.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){Zt(kh,"Failed to raise snapshot:",n),await h2(t,n)}}async function h2(t,e,r){if(!Jm(e))throw e;t.Ea.add(1),await Xx(t),t.Ra.set("Offline"),r||(r=()=>F8(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Zt(kh,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await Iw(t)})}function P8(t,e){return e().catch(r=>h2(t,r,e))}async function Fw(t){const e=Lr(t),r=xf(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Q5;for(;bW(e);)try{const s=await nW(e.localStore,n);if(s===null){e.Ta.length===0&&r.L_();break}n=s.batchId,CW(e,s)}catch(s){await h2(e,s)}j8(e)&&O8(e)}function bW(t){return Gh(t)&&t.Ta.length<10}function CW(t,e){t.Ta.push(e);const r=xf(t);r.O_()&&r.X_&&r.ea(e.mutations)}function j8(t){return Gh(t)&&!xf(t).x_()&&t.Ta.length>0}function O8(t){xf(t).start()}async function EW(t){xf(t).ra()}async function _W(t){const e=xf(t);for(const r of t.Ta)e.ea(r.mutations)}async function SW(t,e,r){const n=t.Ta.shift(),s=K5.from(n,e,r);await P8(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Fw(t)}async function TW(t,e){e&&xf(t).X_&&await async function(n,s){if(function(i){return l$(i)&&i!==ht.ABORTED}(s.code)){const a=n.Ta.shift();xf(n).B_(),await P8(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Fw(n)}}(t,e),j8(t)&&O8(t)}async function k3(t,e){const r=Lr(t);r.asyncQueue.verifyOperationInProgress(),Zt(kh,"RemoteStore received new credentials");const n=Gh(r);r.Ea.add(3),await Xx(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await Iw(r)}async function NW(t,e){const r=Lr(t);e?(r.Ea.delete(2),await Iw(r)):e||(r.Ea.add(2),await Xx(r),r.Ra.set("Unknown"))}function ep(t){return t.ma||(t.ma=function(r,n,s){const a=Lr(r);return a.sa(),new dW(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Xo:xW.bind(null,t),t_:vW.bind(null,t),r_:yW.bind(null,t),H_:wW.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),n4(t)?r4(t):t.Ra.set("Unknown")):(await t.ma.stop(),M8(t))})),t.ma}function xf(t){return t.fa||(t.fa=function(r,n,s){const a=Lr(r);return a.sa(),new fW(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:EW.bind(null,t),r_:TW.bind(null,t),ta:_W.bind(null,t),na:SW.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Fw(t)):(await t.fa.stop(),t.Ta.length>0&&(Zt(kh,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e,r,n,s,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=a,this.deferred=new TA,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,a){const i=Date.now()+n,o=new s4(e,r,i,s,a);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new qt(ht.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function a4(t,e){if(LA("AsyncQueue",`${e}: ${t}`),Jm(t))return new qt(ht.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{static emptySet(e){return new fm(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||Ar.comparator(r.key,n.key):(r,n)=>Ar.comparator(r.key,n.key),this.keyedMap=mg(),this.sortedSet=new Fs(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof fm)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,a=n.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new fm;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(){this.ga=new Fs(Ar.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):Sr(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,n)=>{e.push(n)}),e}}class Pm{constructor(e,r,n,s,a,i,o,l,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=a,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,s,a){const i=[];return r.forEach(o=>{i.push({type:0,doc:o})}),new Pm(e,r,fm.emptySet(r),i,n,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ew(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BW{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class kW{constructor(){this.queries=F3(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const s=Lr(r),a=s.queries;s.queries=F3(),a.forEach((i,o)=>{for(const l of o.Sa)l.onError(n)})})(this,new qt(ht.ABORTED,"Firestore shutting down"))}}function F3(){return new Vh(t=>o8(t),Ew)}async function i4(t,e){const r=Lr(t);let n=3;const s=e.query;let a=r.queries.get(s);a?!a.ba()&&e.Da()&&(n=2):(a=new BW,n=e.Da()?0:1);try{switch(n){case 0:a.wa=await r.onListen(s,!0);break;case 1:a.wa=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(i){const o=a4(i,`Initialization of query '${Y0(e.query)}' failed`);return void e.onError(o)}r.queries.set(s,a),a.Sa.push(e),e.va(r.onlineState),a.wa&&e.Fa(a.wa)&&l4(r)}async function o4(t,e){const r=Lr(t),n=e.query;let s=3;const a=r.queries.get(n);if(a){const i=a.Sa.indexOf(e);i>=0&&(a.Sa.splice(i,1),a.Sa.length===0?s=e.Da()?0:1:!a.ba()&&e.Da()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function IW(t,e){const r=Lr(t);let n=!1;for(const s of e){const a=s.query,i=r.queries.get(a);if(i){for(const o of i.Sa)o.Fa(s)&&(n=!0);i.wa=s}}n&&l4(r)}function FW(t,e,r){const n=Lr(t),s=n.queries.get(e);if(s)for(const a of s.Sa)a.onError(r);n.queries.delete(e)}function l4(t){t.Ca.forEach(e=>{e.next()})}var z_,D3;(D3=z_||(z_={})).Ma="default",D3.Cache="cache";class c4{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Pm(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=Pm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==z_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q8{constructor(e){this.key=e}}class H8{constructor(e){this.key=e}}class DW{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=An(),this.mutatedKeys=An(),this.eu=l8(e),this.tu=new fm(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new I3,s=r?r.tu:this.tu;let a=r?r.mutatedKeys:this.mutatedKeys,i=s,o=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const m=s.get(d),g=_w(this.query,h)?h:null,b=!!m&&this.mutatedKeys.has(m.key),y=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let _=!1;m&&g?m.data.isEqual(g.data)?b!==y&&(n.track({type:3,doc:g}),_=!0):this.su(m,g)||(n.track({type:2,doc:g}),_=!0,(l&&this.eu(g,l)>0||u&&this.eu(g,u)<0)&&(o=!0)):!m&&g?(n.track({type:0,doc:g}),_=!0):m&&!g&&(n.track({type:1,doc:m}),_=!0,(l||u)&&(o=!0)),_&&(g?(i=i.add(g),a=y?a.add(d):a.delete(d)):(i=i.delete(d),a=a.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),a=a.delete(d.key),n.track({type:1,doc:d})}return{tu:i,iu:n,Cs:o,mutatedKeys:a}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const i=e.iu.ya();i.sort((d,h)=>function(g,b){const y=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Sr(20277,{Rt:_})}};return y(g)-y(b)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(n),s=s??!1;const o=r&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,u=l!==this.Za;return this.Za=l,i.length!==0||u?{snapshot:new Pm(this.query,e.tu,a,i,e.mutatedKeys,l===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new I3,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=An(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return e.forEach(n=>{this.Xa.has(n)||r.push(new H8(n))}),this.Xa.forEach(n=>{e.has(n)||r.push(new Q8(n))}),r}cu(e){this.Ya=e.Qs,this.Xa=An();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return Pm.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const u4="SyncEngine";class RW{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class LW{constructor(e){this.key=e,this.hu=!1}}class UW{constructor(e,r,n,s,a,i){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new Vh(o=>o8(o),Ew),this.Iu=new Map,this.Eu=new Set,this.du=new Fs(Ar.comparator),this.Au=new Map,this.Ru=new Y5,this.Vu={},this.mu=new Map,this.fu=Mm.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function MW(t,e,r=!0){const n=$8(t);let s;const a=n.Tu.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await V8(n,e,r,!0),s}async function PW(t,e){const r=$8(t);await V8(r,e,!0,!1)}async function V8(t,e,r,n){const s=await sW(t.localStore,Nu(e)),a=s.targetId,i=t.sharedClientState.addLocalQueryTarget(a,r);let o;return n&&(o=await jW(t,e,a,i==="current",s.resumeToken)),t.isPrimaryClient&&r&&L8(t.remoteStore,s),o}async function jW(t,e,r,n,s){t.pu=(h,m,g)=>async function(y,_,N,k){let R=_.view.ru(N);R.Cs&&(R=await _3(y.localStore,_.query,!1).then(({documents:C})=>_.view.ru(C,R)));const M=k&&k.targetChanges.get(_.targetId),j=k&&k.targetMismatches.get(_.targetId)!=null,L=_.view.applyChanges(R,y.isPrimaryClient,M,j);return L3(y,_.targetId,L.au),L.snapshot}(t,h,m,g);const a=await _3(t.localStore,e,!0),i=new DW(e,a.Qs),o=i.ru(a.documents),l=Yx.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),u=i.applyChanges(o,t.isPrimaryClient,l);L3(t,r,u.au);const d=new RW(e,r,i);return t.Tu.set(e,d),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),u.snapshot}async function OW(t,e,r){const n=Lr(t),s=n.Tu.get(e),a=n.Iu.get(s.targetId);if(a.length>1)return n.Iu.set(s.targetId,a.filter(i=>!Ew(i,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await V_(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&e4(n.remoteStore,s.targetId),q_(n,s.targetId)}).catch(Xm)):(q_(n,s.targetId),await V_(n.localStore,s.targetId,!0))}async function QW(t,e){const r=Lr(t),n=r.Tu.get(e),s=r.Iu.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),e4(r.remoteStore,n.targetId))}async function HW(t,e,r){const n=WW(t);try{const s=await function(i,o){const l=Lr(i),u=cr.now(),d=o.reduce((g,b)=>g.add(b.key),An());let h,m;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let b=UA(),y=An();return l.Ns.getEntries(g,d).next(_=>{b=_,b.forEach((N,k)=>{k.isValidDocument()||(y=y.add(N))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,b)).next(_=>{h=_;const N=[];for(const k of o){const R=n$(k,h.get(k.key).overlayedDocument);R!=null&&N.push(new Bf(k.key,R,ZU(R.value.mapValue),ao.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,N,o)}).next(_=>{m=_;const N=_.applyToLocalDocumentSet(h,y);return l.documentOverlayCache.saveOverlays(g,_.batchId,N)})}).then(()=>({batchId:m.batchId,changes:u8(h)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(i,o,l){let u=i.Vu[i.currentUser.toKey()];u||(u=new Fs(un)),u=u.insert(o,l),i.Vu[i.currentUser.toKey()]=u}(n,s.batchId,r),await Jx(n,s.changes),await Fw(n.remoteStore)}catch(s){const a=a4(s,"Failed to persist write");r.reject(a)}}async function G8(t,e){const r=Lr(t);try{const n=await tW(r.localStore,e);e.targetChanges.forEach((s,a)=>{const i=r.Au.get(a);i&&(Pn(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?i.hu=!0:s.modifiedDocuments.size>0?Pn(i.hu,14607):s.removedDocuments.size>0&&(Pn(i.hu,42227),i.hu=!1))}),await Jx(r,n,e)}catch(n){await Xm(n)}}function R3(t,e,r){const n=Lr(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Tu.forEach((a,i)=>{const o=i.view.va(e);o.snapshot&&s.push(o.snapshot)}),function(i,o){const l=Lr(i);l.onlineState=o;let u=!1;l.queries.forEach((d,h)=>{for(const m of h.Sa)m.va(o)&&(u=!0)}),u&&l4(l)}(n.eventManager,e),s.length&&n.Pu.H_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function VW(t,e,r){const n=Lr(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Au.get(e),a=s&&s.key;if(a){let i=new Fs(Ar.comparator);i=i.insert(a,ji.newNoDocument(a,Dr.min()));const o=An().add(a),l=new Bw(Dr.min(),new Map,new Fs(un),i,o);await G8(n,l),n.du=n.du.remove(a),n.Au.delete(e),A4(n)}else await V_(n.localStore,e,!1).then(()=>q_(n,e,r)).catch(Xm)}async function GW(t,e){const r=Lr(t),n=e.batch.batchId;try{const s=await eW(r.localStore,e);q8(r,n,null),z8(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Jx(r,s)}catch(s){await Xm(s)}}async function zW(t,e,r){const n=Lr(t);try{const s=await function(i,o){const l=Lr(i);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,o).next(h=>(Pn(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(n.localStore,e);q8(n,e,r),z8(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Jx(n,s)}catch(s){await Xm(s)}}function z8(t,e){(t.mu.get(e)||[]).forEach(r=>{r.resolve()}),t.mu.delete(e)}function q8(t,e,r){const n=Lr(t);let s=n.Vu[n.currentUser.toKey()];if(s){const a=s.get(e);a&&(r?a.reject(r):a.resolve(),s=s.remove(e)),n.Vu[n.currentUser.toKey()]=s}}function q_(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(n=>{t.Ru.containsKey(n)||K8(t,n)})}function K8(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(e4(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),A4(t))}function L3(t,e,r){for(const n of r)n instanceof Q8?(t.Ru.addReference(n.key,e),qW(t,n)):n instanceof H8?(Zt(u4,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||K8(t,n.key)):Sr(19791,{wu:n})}function qW(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||(Zt(u4,"New document in limbo: "+r),t.Eu.add(n),A4(t))}function A4(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new Ar(ls.fromString(e)),n=t.fu.next();t.Au.set(n,new LW(r)),t.du=t.du.insert(r,n),L8(t.remoteStore,new Kd(Nu(Cw(r.path)),n,"TargetPurposeLimboResolution",yw.ce))}}async function Jx(t,e,r){const n=Lr(t),s=[],a=[],i=[];n.Tu.isEmpty()||(n.Tu.forEach((o,l)=>{i.push(n.pu(l,e,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const h=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(l.targetId))==null?void 0:d.current;n.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){s.push(u);const h=J5.As(l.targetId,u);a.push(h)}}))}),await Promise.all(i),n.Pu.H_(s),await async function(l,u){const d=Lr(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>bt.forEach(u,m=>bt.forEach(m.Es,g=>d.persistence.referenceDelegate.addReference(h,m.targetId,g)).next(()=>bt.forEach(m.ds,g=>d.persistence.referenceDelegate.removeReference(h,m.targetId,g)))))}catch(h){if(!Jm(h))throw h;Zt(Z5,"Failed to update sequence numbers: "+h)}for(const h of u){const m=h.targetId;if(!h.fromCache){const g=d.Ms.get(m),b=g.snapshotVersion,y=g.withLastLimboFreeSnapshotVersion(b);d.Ms=d.Ms.insert(m,y)}}}(n.localStore,a))}async function KW(t,e){const r=Lr(t);if(!r.currentUser.isEqual(e)){Zt(u4,"User change. New user:",e.toKey());const n=await I8(r.localStore,e);r.currentUser=e,function(a,i){a.mu.forEach(o=>{o.forEach(l=>{l.reject(new qt(ht.CANCELLED,i))})}),a.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Jx(r,n.Ls)}}function $W(t,e){const r=Lr(t),n=r.Au.get(e);if(n&&n.hu)return An().add(n.key);{let s=An();const a=r.Iu.get(e);if(!a)return s;for(const i of a){const o=r.Tu.get(i);s=s.unionWith(o.view.nu)}return s}}function $8(t){const e=Lr(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=G8.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$W.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VW.bind(null,e),e.Pu.H_=IW.bind(null,e.eventManager),e.Pu.yu=FW.bind(null,e.eventManager),e}function WW(t){const e=Lr(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zW.bind(null,e),e}class m2{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kw(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return Z$(this.persistence,new Y$,e.initialUser,this.serializer)}Cu(e){return new k8(X5.mi,this.serializer)}Du(e){return new iW}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}m2.provider={build:()=>new m2};class YW extends m2{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){Pn(this.persistence.referenceDelegate instanceof f2,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new L$(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?_o.withCacheSize(this.cacheSizeBytes):_o.DEFAULT;return new k8(n=>f2.mi(n,r),this.serializer)}}class K_{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>R3(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=KW.bind(null,this.syncEngine),await NW(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new kW}()}createDatastore(e){const r=kw(e.databaseInfo.databaseId),n=function(a){return new AW(a)}(e.databaseInfo);return function(a,i,o,l){return new mW(a,i,o,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,a,i,o){return new gW(n,s,a,i,o)}(this.localStore,this.datastore,e.asyncQueue,r=>R3(this.syncEngine,r,0),function(){return N3.v()?new N3:new oW}())}createSyncEngine(e,r){return function(s,a,i,o,l,u,d){const h=new UW(s,a,i,o,l,u);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const a=Lr(s);Zt(kh,"RemoteStore shutting down."),a.Ea.add(5),await Xx(a),a.Aa.shutdown(),a.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}K_.provider={build:()=>new K_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):LA("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf="FirestoreClient";class XW{constructor(e,r,n,s,a){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=Li.UNAUTHENTICATED,this.clientId=O5.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,async i=>{Zt(vf,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(Zt(vf,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new TA;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=a4(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function tE(t,e){t.asyncQueue.verifyOperationInProgress(),Zt(vf,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await I8(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function U3(t,e){t.asyncQueue.verifyOperationInProgress();const r=await JW(t);Zt(vf,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>k3(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>k3(e.remoteStore,s)),t._onlineComponents=e}async function JW(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Zt(vf,"Using user provided OfflineComponentProvider");try{await tE(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===ht.FAILED_PRECONDITION||s.code===ht.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;Fm("Error using user provided cache. Falling back to memory cache: "+r),await tE(t,new m2)}}else Zt(vf,"Using default OfflineComponentProvider"),await tE(t,new YW(void 0));return t._offlineComponents}async function W8(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Zt(vf,"Using user provided OnlineComponentProvider"),await U3(t,t._uninitializedComponentsProvider._online)):(Zt(vf,"Using default OnlineComponentProvider"),await U3(t,new K_))),t._onlineComponents}function ZW(t){return W8(t).then(e=>e.syncEngine)}async function p2(t){const e=await W8(t),r=e.eventManager;return r.onListen=MW.bind(null,e.syncEngine),r.onUnlisten=OW.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=PW.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=QW.bind(null,e.syncEngine),r}function eY(t,e,r={}){const n=new TA;return t.asyncQueue.enqueueAndForget(async()=>function(a,i,o,l,u){const d=new d4({next:m=>{d.Nu(),i.enqueueAndForget(()=>o4(a,h));const g=m.docs.has(o);!g&&m.fromCache?u.reject(new qt(ht.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&l&&l.source==="server"?u.reject(new qt(ht.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new c4(Cw(o.path),d,{includeMetadataChanges:!0,qa:!0});return i4(a,h)}(await p2(t),t.asyncQueue,e,r,n)),n.promise}function tY(t,e,r={}){const n=new TA;return t.asyncQueue.enqueueAndForget(async()=>function(a,i,o,l,u){const d=new d4({next:m=>{d.Nu(),i.enqueueAndForget(()=>o4(a,h)),m.fromCache&&l.source==="server"?u.reject(new qt(ht.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new c4(o,d,{includeMetadataChanges:!0,qa:!0});return i4(a,h)}(await p2(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y8(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X8="firestore.googleapis.com",P3=!0;class j3{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new qt(ht.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=X8,this.ssl=P3}else this.host=e.host,this.ssl=e.ssl??P3;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=B8;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<D$)throw new qt(ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mK("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Y8(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new qt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new qt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new qt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dw{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new j3({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new qt(ht.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new qt(ht.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new j3(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new aK;switch(n.type){case"firstParty":return new cK(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new qt(ht.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=M3.get(r);n&&(Zt("ComponentProvider","Removing Datastore"),M3.delete(r),n.terminate())}(this),Promise.resolve()}}function rY(t,e,r,n={}){var u;t=so(t,Dw);const s=Qh(e),a=t._getSettings(),i={...a,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${r}`;s&&(_5(`https://${o}`),S5("Firestore",!0)),a.host!==X8&&a.host!==o&&Fm("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...a,host:o,ssl:s,emulatorOptions:n};if(!df(l,i)&&(t._setSettings(l),n.mockUserToken)){let d,h;if(typeof n.mockUserToken=="string")d=n.mockUserToken,h=Li.MOCK_USER;else{d=hV(n.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const m=n.mockUserToken.sub||n.mockUserToken.user_id;if(!m)throw new qt(ht.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Li(m)}t._authCredentials=new iK(new QU(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new GA(this.firestore,e,this._query)}}class Gs{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gs(this.firestore,e,this._key)}toJSON(){return{type:Gs._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if($x(r,Gs._jsonSchema))return new Gs(e,n||null,new Ar(ls.fromString(r.referencePath)))}}Gs._jsonSchemaVersion="firestore/documentReference/1.0",Gs._jsonSchema={type:Sa("string",Gs._jsonSchemaVersion),referencePath:Sa("string")};class sf extends GA{constructor(e,r,n){super(e,r,Cw(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gs(this.firestore,null,new Ar(e))}withConverter(e){return new sf(this.firestore,e,this._path)}}function Ft(t,e,...r){if(t=bs(t),HU("collection","path",e),t instanceof Dw){const n=ls.fromString(e,...r);return Jk(n),new sf(t,null,n)}{if(!(t instanceof Gs||t instanceof sf))throw new qt(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ls.fromString(e,...r));return Jk(n),new sf(t.firestore,null,n)}}function yr(t,e,...r){if(t=bs(t),arguments.length===1&&(e=O5.newId()),HU("doc","path",e),t instanceof Dw){const n=ls.fromString(e,...r);return Xk(n),new Gs(t,null,new Ar(n))}{if(!(t instanceof Gs||t instanceof sf))throw new qt(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ls.fromString(e,...r));return Xk(n),new Gs(t.firestore,t instanceof sf?t.converter:null,new Ar(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O3="AsyncQueue";class Q3{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new D8(this,"async_queue_retry"),this._c=()=>{const n=eE();n&&Zt(O3,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=eE();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=eE();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new TA;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Jm(e))throw e;Zt(O3,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,LA("INTERNAL UNHANDLED ERROR: ",H3(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const s=s4.createAndSchedule(this,e,r,n,a=>this.hc(a));return this.tc.push(s),s}uc(){this.nc&&Sr(47125,{Pc:H3(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function H3(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V3(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const a of n)if(a in s&&typeof s[a]=="function")return!0;return!1}(t,["next","error","complete"])}class Lu extends Dw{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new Q3,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Q3(e),this._firestoreClient=void 0,await e}}}function J8(t,e){const r=typeof t=="object"?t:k5(),n=typeof t=="string"?t:i2,s=hw(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const a=KL("firestore");a&&rY(s,...a)}return s}function Zx(t){if(t._terminated)throw new qt(ht.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||nY(t),t._firestoreClient}function nY(t){var n,s,a;const e=t._freezeSettings(),r=function(o,l,u,d){return new TK(o,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Y8(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((n=t._app)==null?void 0:n.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new XW(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ql(hi.fromBase64String(e))}catch(r){throw new qt(ht.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Ql(hi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ql._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if($x(e,Ql._jsonSchema))return Ql.fromBase64String(e.bytes)}}Ql._jsonSchemaVersion="firestore/bytes/1.0",Ql._jsonSchema={type:Sa("string",Ql._jsonSchemaVersion),bytes:Sa("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new qt(ht.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ai(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new qt(ht.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new qt(ht.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return un(this._lat,e._lat)||un(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ku._jsonSchemaVersion}}static fromJSON(e){if($x(e,ku._jsonSchema))return new ku(e.latitude,e.longitude)}}ku._jsonSchemaVersion="firestore/geoPoint/1.0",ku._jsonSchema={type:Sa("string",ku._jsonSchemaVersion),latitude:Sa("number"),longitude:Sa("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Iu._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if($x(e,Iu._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new Iu(e.vectorValues);throw new qt(ht.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Iu._jsonSchemaVersion="firestore/vectorValue/1.0",Iu._jsonSchema={type:Sa("string",Iu._jsonSchemaVersion),vectorValues:Sa("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sY=/^__.*__$/;class aY{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Bf(e,this.data,this.fieldMask,r,this.fieldTransforms):new Wx(e,this.data,r,this.fieldTransforms)}}class Z8{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Bf(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function eM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Sr(40011,{Ac:t})}}class Lw{constructor(e,r,n,s,a,i){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Lw({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const r=(s=this.path)==null?void 0:s.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){var s;const r=(s=this.path)==null?void 0:s.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return g2(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(eM(this.Ac)&&sY.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class iY{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||kw(e)}Cc(e,r,n,s=!1){return new Lw({Ac:e,methodName:r,Dc:n,path:Ai.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function t1(t){const e=t._freezeSettings(),r=kw(t._databaseId);return new iY(t._databaseId,!!e.ignoreUndefinedProperties,r)}function f4(t,e,r,n,s,a={}){const i=t.Cc(a.merge||a.mergeFields?2:0,e,r,s);m4("Data must be an object, but it was:",i,n);const o=nM(n,i);let l,u;if(a.merge)l=new nl(i.fieldMask),u=i.fieldTransforms;else if(a.mergeFields){const d=[];for(const h of a.mergeFields){const m=$_(e,h,r);if(!i.contains(m))throw new qt(ht.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);aM(d,m)||d.push(m)}l=new nl(d),u=i.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=i.fieldTransforms;return new aY(new To(o),l,u)}class Uw extends Rw{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Uw}}function oY(t,e,r){return new Lw({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class h4 extends Rw{constructor(e,r){super(e),this.vc=r}_toFieldTransform(e){const r=oY(this,e,!0),n=this.vc.map(a=>tp(a,r)),s=new Um(n);return new ZK(e.path,s)}isEqual(e){return e instanceof h4&&df(this.vc,e.vc)}}function tM(t,e,r,n){const s=t.Cc(1,e,r);m4("Data must be an object, but it was:",s,n);const a=[],i=To.empty();Nf(n,(l,u)=>{const d=p4(e,l,r);u=bs(u);const h=s.yc(d);if(u instanceof Uw)a.push(d);else{const m=tp(u,h);m!=null&&(a.push(d),i.set(d,m))}});const o=new nl(a);return new Z8(i,o,s.fieldTransforms)}function rM(t,e,r,n,s,a){const i=t.Cc(1,e,r),o=[$_(e,n,r)],l=[s];if(a.length%2!=0)throw new qt(ht.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<a.length;m+=2)o.push($_(e,a[m])),l.push(a[m+1]);const u=[],d=To.empty();for(let m=o.length-1;m>=0;--m)if(!aM(u,o[m])){const g=o[m];let b=l[m];b=bs(b);const y=i.yc(g);if(b instanceof Uw)u.push(g);else{const _=tp(b,y);_!=null&&(u.push(g),d.set(g,_))}}const h=new nl(u);return new Z8(d,h,i.fieldTransforms)}function lY(t,e,r,n=!1){return tp(r,t.Cc(n?4:3,e))}function tp(t,e){if(sM(t=bs(t)))return m4("Unsupported field value:",e,t),nM(t,e);if(t instanceof Rw)return function(n,s){if(!eM(s.Ac))throw s.Sc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,s){const a=[];let i=0;for(const o of n){let l=tp(o,s.wc(i));l==null&&(l={nullValue:"NULL_VALUE"}),a.push(l),i++}return{arrayValue:{values:a}}}(t,e)}return function(n,s){if((n=bs(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return YK(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=cr.fromDate(n);return{timestampValue:d2(s.serializer,a)}}if(n instanceof cr){const a=new cr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:d2(s.serializer,a)}}if(n instanceof ku)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ql)return{bytesValue:b8(s.serializer,n._byteString)};if(n instanceof Gs){const a=s.databaseId,i=n.firestore._databaseId;if(!i.isEqual(a))throw s.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:W5(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Iu)return function(i,o){return{mapValue:{fields:{[XU]:{stringValue:JU},[o2]:{arrayValue:{values:i.toArray().map(u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return q5(o.serializer,u)})}}}}}}(n,s);throw s.Sc(`Unsupported field value: ${vw(n)}`)}(t,e)}function nM(t,e){const r={};return zU(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Nf(t,(n,s)=>{const a=tp(s,e.mc(n));a!=null&&(r[n]=a)}),{mapValue:{fields:r}}}function sM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof cr||t instanceof ku||t instanceof Ql||t instanceof Gs||t instanceof Rw||t instanceof Iu)}function m4(t,e,r){if(!sM(r)||!VU(r)){const n=vw(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}function $_(t,e,r){if((e=bs(e))instanceof e1)return e._internalPath;if(typeof e=="string")return p4(t,e);throw g2("Field path arguments must be of type string or ",t,!1,void 0,r)}const cY=new RegExp("[~\\*/\\[\\]]");function p4(t,e,r){if(e.search(cY)>=0)throw g2(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new e1(...e.split("."))._internalPath}catch{throw g2(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function g2(t,e,r,n,s){const a=n&&!n.isEmpty(),i=s!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(a||i)&&(l+=" (found",a&&(l+=` in field ${n}`),i&&(l+=` in document ${s}`),l+=")"),new qt(ht.INVALID_ARGUMENT,o+t+l)}function aM(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,r,n,s,a){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Gs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uY(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Mw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class uY extends iM{data(){return super.data()}}function Mw(t,e){return typeof e=="string"?p4(t,e):e instanceof e1?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new qt(ht.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class g4{}class x4 extends g4{}function er(t,e,...r){let n=[];e instanceof g4&&n.push(e),n=n.concat(r),function(a){const i=a.filter(l=>l instanceof v4).length,o=a.filter(l=>l instanceof Pw).length;if(i>1||i>0&&o>0)throw new qt(ht.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class Pw extends x4{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Pw(e,r,n)}_apply(e){const r=this._parse(e);return lM(e._query,r),new GA(e.firestore,e.converter,P_(e._query,r))}_parse(e){const r=t1(e.firestore);return function(a,i,o,l,u,d,h){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new qt(ht.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){z3(h,d);const b=[];for(const y of h)b.push(G3(l,a,y));m={arrayValue:{values:b}}}else m=G3(l,a,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||z3(h,d),m=lY(o,i,h,d==="in"||d==="not-in");return _a.create(u,d,m)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Fn(t,e,r){const n=e,s=Mw("where",t);return Pw._create(s,n,r)}class v4 extends g4{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new v4(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Rc.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,a){let i=s;const o=a.getFlattenedFilters();for(const l of o)lM(i,l),i=P_(i,l)}(e._query,r),new GA(e.firestore,e.converter,P_(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class y4 extends x4{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new y4(e,r)}_apply(e){const r=function(s,a,i){if(s.startAt!==null)throw new qt(ht.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new qt(ht.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ax(a,i)}(e._query,this._field,this._direction);return new GA(e.firestore,e.converter,function(s,a){const i=s.explicitOrderBy.concat([a]);return new Zm(s.path,s.collectionGroup,i,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function gn(t,e="asc"){const r=e,n=Mw("orderBy",t);return y4._create(n,r)}class w4 extends x4{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new w4(e,r,n)}_apply(e){return new GA(e.firestore,e.converter,c2(e._query,this._limit,this._limitType))}}function NA(t){return pK("limit",t),w4._create("limit",t,"F")}function G3(t,e,r){if(typeof(r=bs(r))=="string"){if(r==="")throw new qt(ht.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!i8(e)&&r.indexOf("/")!==-1)throw new qt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(ls.fromString(r));if(!Ar.isDocumentKey(n))throw new qt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return i3(t,new Ar(n))}if(r instanceof Gs)return i3(t,r._key);throw new qt(ht.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vw(r)}.`)}function z3(t,e){if(!Array.isArray(t)||t.length===0)throw new qt(ht.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lM(t,e){const r=function(s,a){for(const i of s)for(const o of i.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new qt(ht.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new qt(ht.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class AY{convertValue(e,r="none"){switch(gf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sa(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(pf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Sr(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Nf(e,(s,a)=>{n[s]=this.convertValue(a,r)}),n}convertVectorValue(e){var n,s,a;const r=(a=(s=(n=e.fields)==null?void 0:n[o2].arrayValue)==null?void 0:s.values)==null?void 0:a.map(i=>sa(i.doubleValue));return new Iu(r)}convertGeoPoint(e){return new ku(sa(e.latitude),sa(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=bw(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(lx(e));default:return null}}convertTimestamp(e){const r=mf(e);return new cr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=ls.fromString(e);Pn(N8(n),9688,{name:e});const s=new cx(n.get(1),n.get(3)),a=new Ar(n.popFirst(5));return s.isEqual(r)||LA(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b4(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class gg{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ph extends iM{constructor(e,r,n,s,a,i){super(e,r,n,s,i),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Ry(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Mw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new qt(ht.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=ph._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}ph._jsonSchemaVersion="firestore/documentSnapshot/1.0",ph._jsonSchema={type:Sa("string",ph._jsonSchemaVersion),bundleSource:Sa("string","DocumentSnapshot"),bundleName:Sa("string"),bundle:Sa("string")};class Ry extends ph{data(e={}){return super.data(e)}}class gh{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new gg(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Ry(this._firestore,this._userDataWriter,n.key,n,new gg(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new qt(ht.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(o=>{const l=new Ry(s._firestore,s._userDataWriter,o.doc.key,o.doc,new gg(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>a||o.type!==3).map(o=>{const l=new Ry(s._firestore,s._userDataWriter,o.doc.key,o.doc,new gg(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return o.type!==0&&(u=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),d=i.indexOf(o.doc.key)),{type:dY(o.type),doc:l,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new qt(ht.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=gh._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=O5.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(r.push(a._document),n.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function dY(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Sr(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1(t){t=so(t,Gs);const e=so(t.firestore,Lu);return eY(Zx(e),t._key).then(r=>cM(e,t,r))}gh._jsonSchemaVersion="firestore/querySnapshot/1.0",gh._jsonSchema={type:Sa("string",gh._jsonSchemaVersion),bundleSource:Sa("string","QuerySnapshot"),bundleName:Sa("string"),bundle:Sa("string")};class C4 extends AY{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ql(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Gs(this.firestore,null,r)}}function ca(t){t=so(t,GA);const e=so(t.firestore,Lu),r=Zx(e),n=new C4(e);return oM(t._query),tY(r,t._query).then(s=>new gh(e,n,t,s))}function Wi(t,e,r){t=so(t,Gs);const n=so(t.firestore,Lu),s=b4(t.converter,e,r);return s1(n,[f4(t1(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,ao.none())])}function n1(t,e,r,...n){t=so(t,Gs);const s=so(t.firestore,Lu),a=t1(s);let i;return i=typeof(e=bs(e))=="string"||e instanceof e1?rM(a,"updateDoc",t._key,e,r,n):tM(a,"updateDoc",t._key,e),s1(s,[i.toMutation(t._key,ao.exists(!0))])}function mi(t){return s1(so(t.firestore,Lu),[new Nw(t._key,ao.none())])}function Cs(t,e){const r=so(t.firestore,Lu),n=yr(t),s=b4(t.converter,e);return s1(r,[f4(t1(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,ao.exists(!1))]).then(()=>n)}function Tr(t,...e){var l,u,d;t=bs(t);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||V3(e[n])||(r=e[n++]);const s={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(V3(e[n])){const h=e[n];e[n]=(l=h.next)==null?void 0:l.bind(h),e[n+1]=(u=h.error)==null?void 0:u.bind(h),e[n+2]=(d=h.complete)==null?void 0:d.bind(h)}let a,i,o;if(t instanceof Gs)i=so(t.firestore,Lu),o=Cw(t._key.path),a={next:h=>{e[n]&&e[n](cM(i,t,h))},error:e[n+1],complete:e[n+2]};else{const h=so(t,GA);i=so(h.firestore,Lu),o=h._query;const m=new C4(i);a={next:g=>{e[n]&&e[n](new gh(i,m,h,g))},error:e[n+1],complete:e[n+2]},oM(t._query)}return function(m,g,b,y){const _=new d4(y),N=new c4(g,_,b);return m.asyncQueue.enqueueAndForget(async()=>i4(await p2(m),N)),()=>{_.Nu(),m.asyncQueue.enqueueAndForget(async()=>o4(await p2(m),N))}}(Zx(i),o,s,a)}function s1(t,e){return function(n,s){const a=new TA;return n.asyncQueue.enqueueAndForget(async()=>HW(await ZW(n),s,a)),a.promise}(Zx(t),e)}function cM(t,e,r){const n=r.docs.get(e._key),s=new C4(t);return new ph(t,s,e._key,n,new gg(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fY{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=t1(e)}set(e,r,n){this._verifyNotCommitted();const s=rE(e,this._firestore),a=b4(s.converter,r,n),i=f4(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,n);return this._mutations.push(i.toMutation(s._key,ao.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const a=rE(e,this._firestore);let i;return i=typeof(r=bs(r))=="string"||r instanceof e1?rM(this._dataReader,"WriteBatch.update",a._key,r,n,s):tM(this._dataReader,"WriteBatch.update",a._key,r),this._mutations.push(i.toMutation(a._key,ao.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=rE(e,this._firestore);return this._mutations=this._mutations.concat(new Nw(r._key,ao.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new qt(ht.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function rE(t,e){if((t=bs(t)).firestore!==e)throw new qt(ht.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function hY(...t){return new h4("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E4(t){return Zx(t=so(t,Lu)),new fY(t,e=>s1(t,e))}(function(e,r=!0){(function(s){Ym=s})($m),Th(new ff("firestore",(n,{instanceIdentifier:s,options:a})=>{const i=n.getProvider("app").getImmediate(),o=new Lu(new oK(n.getProvider("auth-internal")),new uK(i,n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new qt(ht.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cx(u.options.projectId,d)}(i,s),i);return a={useFetchStreams:r,...a},o._setSettings(a),o},"PUBLIC").setMultipleInstances(!0)),_u(Kk,$k,e),_u(Kk,$k,"esm2020")})();const mY={apiKey:"AIzaSyAfL9dpeLfpWQPg4orpFSh3X5dzXrSsBwc",authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},uM=B5(mY),a1=DU(uM),Kr=J8(uM),pY=Object.freeze(Object.defineProperty({__proto__:null,auth:a1,db:Kr},Symbol.toStringTag,{value:"Module"})),gY=async(t,e)=>{try{return(await Qz(a1,t,e)).user}catch(r){throw console.error("Error en loginUser helper:",r),r}},nE=async()=>{try{await zz(a1)}catch(t){throw console.error("Error en logoutUser helper:",t),t}},xY=async t=>{try{await Oz(a1,t)}catch(e){throw console.error("Error en resetPassword helper:",e),e}},vY=async t=>{try{const e=yr(Kr,"usuarios",t),r=await r1(e);return r.exists()?{id:r.id,...r.data()}:(console.warn(`No se encontró perfil en Firestore para: ${t}`),null)}catch(e){throw console.error("Error en getUserProfile helper:",e),e}};var Vt=(t=>(t.SUBDIRECCION="SUBDIRECCION",t.PROFESORADO="PROFESORADO",t.COORDINACION_TP="COORDINACION_TP",t.ESTUDIANTE="ESTUDIANTE",t))(Vt||{}),Yr=(t=>(t.EVALUACION="Evaluación",t.ACTO="Acto",t.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",t.SALIDA_PEDAGOGICA="Salida Pedagógica",t))(Yr||{}),oh=(t=>(t.PRUEBA_PARCIAL="Prueba parcial",t.GUIA_APRENDIZAJE="Guía de Aprendizaje",t.RUBRICA="Rúbrica",t.PAUTA_COTEJO="Pauta de Cotejo",t))(oh||{});const Ta="w-6 h-6",jw="w-24 h-24",_4=()=>c.jsxs("svg",{className:"w-32 h-32 text-slate-700 dark:text-slate-300",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20V6.5A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v13Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("path",{d:"M16 4.5V17",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("path",{d:"M9 14V10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("path",{d:"M12 14V8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),yY=()=>c.jsxs("svg",{className:"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M9 18h6"}),c.jsx("path",{d:"M10 22h4"}),c.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),wY=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),bY=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ta,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),xg=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ta,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),vg=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ta,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),AM=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),CY=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:jw,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),EY=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:jw,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),_Y=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:jw,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 010 1.255c-.008.378.137.75.43.99l1.004.828c.421.346.564.95.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.68 6.68 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.68 6.68 0 01-.22-.127c-.325-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.369-.491l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 010-1.255c.008-.378-.137-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),SY=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:jw,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),TY=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ta,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),q3=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ta,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),Sv=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ta,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),sE=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ta,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Tv=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ta,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),aE=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ta,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),K3=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ta,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),NY=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ta,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),BY=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ta,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),kY=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ta,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),IY=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ta,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),$3=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ta,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),FY=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ta,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),iE=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ta,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),DY=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Ta,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.528-1.036.94-2.197 1.088-3.386l-.7M11.42 15.17l-1.06-1.06a4.5 4.5 0 01-5.656-5.656l-1.06 1.06c-1.37.66-2.58 1.6-3.58 2.75a4.5 4.5 0 00-1.06 5.656l1.06 1.06c1.15.998 2.52 1.93 3.99 2.58l1.06-1.06a4.5 4.5 0 015.656-5.656l3.032 2.496m-3.582-2.58a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06m-3.032-2.496a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06"})}),RY=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ta,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),W3=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Ta,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),LY=[{id:Vt.SUBDIRECCION,label:"Subdirección Pedagógica",icon:c.jsx(CY,{})},{id:Vt.PROFESORADO,label:"Profesorado",icon:c.jsx(EY,{})},{id:Vt.COORDINACION_TP,label:"Coordinación TP",icon:c.jsx(_Y,{})},{id:Vt.ESTUDIANTE,label:"Estudiantes",icon:c.jsx(SY,{})}],UY={[Vt.SUBDIRECCION]:[{name:"Dashboard",icon:c.jsx(TY,{})},{name:"Administración",icon:c.jsx(IY,{})},{name:"Seguimiento Curricular",icon:c.jsx(RY,{})},{name:"Acompañamiento docente",icon:c.jsx(kY,{})},{name:"Análisis Taxonómico",icon:c.jsx(W3,{})},{name:"Interdisciplinario",icon:c.jsx(iE,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:c.jsx(q3,{})},{name:"Crear horarios",icon:c.jsx(sE,{})},{name:"Seguimiento de acciones pedagógicas",icon:c.jsx(Tv,{})},{name:"Inclusión",icon:c.jsx($3,{})},{name:"Calendario Académico",icon:c.jsx(Sv,{})},{name:"Muro de Anuncios",icon:c.jsx(xg,{})},{name:"Mensajería Interna",icon:c.jsx(vg,{})},{name:"Generador de Actas",icon:c.jsx(aE,{})}],[Vt.PROFESORADO]:[{name:"Planificación",icon:c.jsx(K3,{})},{name:"Mis Acompañamientos",icon:c.jsx(FY,{})},{name:"Recursos de Aprendizaje",icon:c.jsx(NY,{})},{name:"Análisis Taxonómico",icon:c.jsx(W3,{})},{name:"Interdisciplinario",icon:c.jsx(iE,{})},{name:"Inclusión",icon:c.jsx($3,{})},{name:"Actividades Remotas",icon:c.jsx(BY,{})},{name:"Evaluación de Aprendizajes",icon:c.jsx(aE,{})},{name:"Evaluaciones Formativas",icon:c.jsx(Tv,{})},{name:"Calendario Académico",icon:c.jsx(Sv,{})},{name:"Muro de Anuncios",icon:c.jsx(xg,{})},{name:"Mensajería Interna",icon:c.jsx(vg,{})},{name:"Generador de Actas",icon:c.jsx(q3,{})}],[Vt.COORDINACION_TP]:[{name:"Seguimiento Dual",icon:c.jsx(Tv,{})},{name:"Asistencia Dual",icon:c.jsx(sE,{})},{name:"Pañol",icon:c.jsx(DY,{})},{name:"Calendario Académico",icon:c.jsx(Sv,{})},{name:"Muro de Anuncios",icon:c.jsx(xg,{})},{name:"Mensajería Interna",icon:c.jsx(vg,{})},{name:"Generador de Actas",icon:c.jsx(aE,{})}],[Vt.ESTUDIANTE]:[{name:"Auto-aprendizaje",icon:c.jsx(K3,{})},{name:"Evaluación Formativa",icon:c.jsx(Tv,{})},{name:"Tareas Interdisciplinarias",icon:c.jsx(iE,{})},{name:"Asistencia a Empresa",icon:c.jsx(sE,{})},{name:"Calendario Académico",icon:c.jsx(Sv,{})},{name:"Muro de Anuncios",icon:c.jsx(xg,{})},{name:"Mensajería Interna",icon:c.jsx(vg,{})}]},Y3=["Currículum y Evaluación","Convivencia Escolar","Orientación","Gestión Pedagógica General"],Xp=["Pendiente","En Proceso","Cumplida"],x2=["1º Medio","2º Medio","3º Medio","4º Medio"],il=["Lengua y Literatura","Matemática","Inglés","Filosofía","Historia y Geografía","Educación Ciudadana","Ciencias","Ciencias para la Ciudadanía","Artes","Música","Educación Física","Orientación","Mecánica Industrial","Mecánica Automotriz","Emprendimiento","Tecnología","Pensamiento Lógico","Competencia Lectora"],la=["1ºA","1ºB","1ºC","1ºD","1ºE","2ºA","2ºB","2ºC","2ºD","3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],W_=["Juan Pérez","María González","Carlos Soto","Ana Fernández","Luis Rojas","Laura Muñoz","Pedro Castillo","Sofía Reyes","Diego Flores","Valentina Castro"],Ly=["Lunes","Martes","Miércoles","Jueves","Viernes"],Y_=[{bloque:1,inicio:"08:00",fin:"08:40"},{bloque:2,inicio:"08:40",fin:"09:20"},{bloque:3,inicio:"09:35",fin:"10:15"},{bloque:4,inicio:"10:15",fin:"10:55"},{bloque:5,inicio:"11:10",fin:"11:50"},{bloque:6,inicio:"11:50",fin:"12:30"},{bloque:7,inicio:"12:30",fin:"13:10"},{bloque:8,inicio:"13:10",fin:"13:50"},{bloque:9,inicio:"14:30",fin:"15:10"},{bloque:10,inicio:"15:10",fin:"15:50"},{bloque:11,inicio:"16:00",fin:"16:40"},{bloque:12,inicio:"16:40",fin:"17:20"}],MY={"1º y 2º medio":{"Lengua y Literatura":6,Matemática:6,Inglés:3,"Historia y Geografía":4,"Educación Física":2,Ciencias:4,"Artes/Música":2,Tecnología:2,Orientación:1},"3º y 4º medio (Humanista-Científico)":{"Lengua y Literatura":4,Matemática:4,Inglés:2,"Historia y Geografía":3,"Educación Ciudadana":2,Filosofía:3,"Ciencias para la Ciudadanía":2,"Educación Física":2},"3º y 4º medio (Técnico-Profesional)":{"Lengua y Literatura":2,Matemática:2,Inglés:2,"Historia y Geografía":2,Filosofía:2,"Educación Física":2,"Módulo TP":18}},zd={[Yr.EVALUACION]:{label:"Evaluación",icon:"📝",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[Yr.ACTO]:{label:"Acto",icon:"🏛️",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[Yr.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"🎯",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[Yr.SALIDA_PEDAGOGICA]:{label:"Salida Pedagógica",icon:"🚌",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},PY=Object.values(oh),oE=["Humanidades","TP","Ciencias","Interdisciplinario","Gestión Pedagógica","Equipo Directivo","Equipo de Gestión","Consejo Escolar"],lE=["Vinculado","Desvinculado","En proceso","Empresa"],xh=["3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],jY=["Quiz","Comprensión de Lectura","Términos Pareados","Desarrollo"],v2=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limítrofe","Trastorno Déficit Atencional (TDA)","Trastorno Déficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Específica del Aprendizaje","Dificultad Específica de Aprendizaje en Matemáticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarización"],jg=[{domain:"Dominio A: Preparación de la Enseñanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que enseña, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que enseña, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemológicas o metodológicas en su área.","Conoce y comprende los principios y conceptos centrales de las disciplinas que enseña, atendiendo a la permanente actualización curricular en su área.","Conoce, comprende y cuestiona los principios centrales de la disciplina que enseña a la luz de nuevos paradigmas epistemológicos o teóricos, permitiendo que el trabajo o la exposición conceptual invite al desarrollo del pensamiento crítico o la investigación continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificación o gestión de la clase estándar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relación al contexto y características del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Selección de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las características de sus estudiantes y a la relación con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didácticos de aprendizaje, siendo congruentes al contenido pero no a las características de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejándose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didácticos de aprendizaje congruentes con la complejidad de los contenidos y las características de sus alumnos.","Conoce y selecciona distintos recursos didácticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisición de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluación",levels:["Establece estrategias de evaluación incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo además, las metodologías empleadas previamente en clases.","Establece estrategias de evaluación coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexión, y, la retroalimentación descriptiva."]},{name:"Estrategias de enseñanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes diseñan e implementan estrategias de enseñanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes diseñan e implementan estrategias efectivas de enseñanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes diseñan e implementan estrategias avanzadas de enseñanza-aprendizaje tales como (ABP, ABD, Gamificación, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creación de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empatía",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vínculos fundados en el respeto y/o en la empatía.","Establece un clima de relaciones interpersonales respetuosas y empáticas con la mayoría de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos, generando situaciones concretas de cooperación y ayuda mutua entre él/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Interés por las especialidades",levels:["No transmite interés por las especialidades, centrándose exclusivamente en su área de desempeño.","Transmite interés general por las especialidades, no obstante no es capaz de acercarse a las características concretas de los módulos.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha área de desempeño."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implícitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estándar que implican un desarrollo mecánico y que no tienden hacia la consolidación de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus características personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivación por el aprendizaje",levels:["No transmite motivación por el aprendizaje, la búsqueda o la indagación.","Transmite una motivación positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autónoma","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda.","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemático en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participación."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseñanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentación de objetivos",levels:["Al iniciar las clases no presenta el objetivo o sólo lo enuncia sin profundizar en él.","Al iniciar las clases presenta el objetivo de aprendizaje y el propósito, pero no logra dar cuenta de la relación con el futuro laboral de los estudiantes o con otras áreas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionándolo con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a través de la relación con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro."]},{name:"Clase en función de objetivos",levels:["No realiza su clase en función de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currículum nacional","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando sólo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional y en el PEI."]},{name:"Introducción de nueva información",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva información, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisión conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolación que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentación",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes sólo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal, a través de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensión y desempeño de sus estudiantes.","Monitorea parcialmente el grado de comprensión y desempeño de sus estudiantes, no siempre a través de evidencia.","Monitorea constantemente el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo."]},{name:"Orientación a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales, no obstante, la orientación es superficial y no predispone la construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores en consonancia a elementos propios del PEI."]},{name:"Conclusión de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicación que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora además preguntas de metacognición y/o autoevaluación."]},{name:"Abordaje de errores",levels:["No aborda los errores, únicamente los señala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a través de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogéneo, descuidando la diversidad y las características particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias según nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],dM=["Líder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],Nv=[{nombre:"Aprendiz Emergente",emoji:"🌱",promedioMin:1,promedioMax:3.9,mensaje:"¡Estás comenzando tu viaje de aprendizaje! Sigue esforzándote."},{nombre:"Explorador del Conocimiento",emoji:"🧭",promedioMin:4,promedioMax:4.9,mensaje:"¡Buen trabajo! Estás construyendo una base sólida."},{nombre:"Arquitecto de Ideas",emoji:"🏛️",promedioMin:5,promedioMax:5.9,mensaje:"¡Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"🎓",promedioMin:6,promedioMax:6.5,mensaje:"¡Impresionante! Tu dedicación te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"🌟",promedioMin:6.6,promedioMax:7,mensaje:"¡Extraordinario! Eres una inspiración para tus compañeros."}],OY=({onLoginAttempt:t,onForgotPasswordRequest:e,error:r})=>{const[n,s]=ee.useState(""),[a,i]=ee.useState(""),[o,l]=ee.useState("login"),u=m=>{m.preventDefault(),t(n,a)},d=m=>{m.preventDefault(),e(n),l("forgot_sent")},h=()=>o==="forgot"?c.jsxs("form",{onSubmit:d,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico Registrado"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:m=>s(m.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),c.jsx("div",{children:c.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperación"})}),c.jsx("div",{className:"text-sm text-center",children:c.jsx("button",{type:"button",onClick:()=>l("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesión"})})]}):o==="forgot_sent"?c.jsxs("div",{className:"text-center",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),c.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",c.jsx("strong",{children:n}),", hemos enviado un enlace para restablecer su contraseña."]}),c.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulación, revise la consola del navegador para ver el enlace)."}),c.jsx("button",{type:"button",onClick:()=>{l("login"),s("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:"← Volver a Iniciar Sesión"})]}):c.jsxs("form",{onSubmit:u,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:m=>s(m.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contraseña"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:a,onChange:m=>i(m.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),r&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:c.jsx("p",{children:r})}),c.jsx("div",{className:"text-sm text-center",children:c.jsx("button",{type:"button",onClick:()=>l("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"¿Olvidó su contraseña?"})}),c.jsx("div",{children:c.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return c.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("div",{className:"mb-4 flex justify-center items-center",children:c.jsx(_4,{})}),c.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:o==="login"?"Bienvenido/a, por favor inicie sesión":"Recuperación de Contraseña"})]}),c.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:h()}),c.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},cE=({trigger:t,children:e,onOpen:r})=>{const[n,s]=ee.useState(!1),a=ee.useRef(null),i=()=>{const l=!n;s(l),l&&r&&r()},o=l=>{a.current&&!a.current.contains(l.target)&&s(!1)};return ee.useEffect(()=>(document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}),[]),c.jsxs("div",{className:"relative",ref:a,children:[c.jsx("div",{onClick:i,children:t}),n&&c.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>s(!1),children:e})]})},X3="usuariosLiceo",QY=({user:t,onClose:e,onSave:r})=>{const[n,s]=ee.useState({nombreCompleto:t.nombreCompleto,email:t.email,fotoUrl:t.fotoUrl||""}),a=o=>{s({...n,[o.target.name]:o.target.value})},i=o=>{o.preventDefault();const l={...t,...n};try{const u=localStorage.getItem(X3);let d=u?JSON.parse(u):[];const h=d.findIndex(m=>m.id===t.id);h>-1?d[h]=l:d.push(l),localStorage.setItem(X3,JSON.stringify(d)),r(l),e()}catch(u){console.error("Failed to save user profile:",u),alert("No se pudo guardar el perfil.")}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:o=>o.stopPropagation(),children:c.jsxs("form",{onSubmit:i,children:[c.jsxs("div",{className:"p-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),c.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:n.fotoUrl,onChange:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),c.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:n.nombreCompleto,onChange:a,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrónico"}),c.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:a,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Función"}),c.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:t.profile})]})]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[c.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},J3="usuariosLiceo",HY=({user:t,onClose:e,onSave:r})=>{const[n,s]=ee.useState(""),[a,i]=ee.useState(""),[o,l]=ee.useState(null),u=d=>{if(d.preventDefault(),l(null),!n){l("La contraseña no puede estar en blanco.");return}if(n!==a){l("Las contraseñas no coinciden.");return}const h={...t,password:n};try{const m=localStorage.getItem(J3);let g=m?JSON.parse(m):[];const b=g.findIndex(y=>y.id===t.id);b>-1?g[b]=h:g.push(h),localStorage.setItem(J3,JSON.stringify(g)),r(h),e()}catch(m){console.error("Failed to save new password:",m),l("No se pudo guardar la nueva contraseña.")}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:d=>d.stopPropagation(),children:c.jsxs("form",{onSubmit:u,children:[c.jsxs("div",{className:"p-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuración de Cuenta"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),c.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:t.email})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contraseña"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:n,onChange:d=>s(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contraseña"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:a,onChange:d=>i(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),o&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:c.jsx("p",{children:o})})]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[c.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contraseña"})]})]})})})},Z3="anunciosMuro",eI="mensajesInternos",tI="lir-read-status",VY=({user:t})=>{if(t.fotoUrl)return c.jsx("img",{src:t.fotoUrl,alt:t.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const e=t.nombreCompleto||"",r=String(e).split(" ").filter(n=>n).map(n=>n[0]).join("").toUpperCase();return c.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:r.substring(0,2)})},GY=({currentUser:t,onLogout:e,onNavigate:r,onUserUpdate:n,onChangeProfile:s,canChangeProfile:a,toggleSidebar:i,unreadMessagesCount:o,refreshUnreadCount:l})=>{const[u,d]=ee.useState([]),[h,m]=ee.useState([]),[g,b]=ee.useState(!1),[y,_]=ee.useState(!1),N=ee.useCallback(()=>{try{const j=localStorage.getItem(`${tI}-${t.id}`);return j?JSON.parse(j):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[t.id]),k=ee.useCallback(j=>{try{localStorage.setItem(`${tI}-${t.id}`,JSON.stringify(j))}catch(L){console.error("Failed to set read status:",L)}},[t.id]);ee.useEffect(()=>{const j=JSON.parse(localStorage.getItem(Z3)||"[]"),L=N();d(j.filter(E=>!L.announcements.includes(E.id)));const C=JSON.parse(localStorage.getItem(eI)||"[]");m(C.filter(E=>E.para===t.email).sort((E,B)=>new Date(B.fecha).getTime()-new Date(E.fecha).getTime()).slice(0,5))},[t.id,N,o]);const R=()=>{const j=N(),L=JSON.parse(localStorage.getItem(Z3)||"[]").map(C=>C.id);j.announcements=L,k(j),d([])},M=()=>{const j=N(),C=JSON.parse(localStorage.getItem(eI)||"[]").filter(E=>E.para===t.email).map(E=>E.id);j.messages=[...new Set([...j.messages,...C])],k(j),l()};return c.jsxs(c.Fragment,{children:[c.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:c.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:i,children:c.jsx(wY,{})}),c.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>r("Dashboard"),children:[c.jsxs("svg",{className:"w-8 h-8 text-slate-700 dark:text-slate-200",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20V6.5A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v13Z",stroke:"currentColor",strokeWidth:"1.5"}),c.jsx("path",{d:"M16 4.5V17",stroke:"currentColor",strokeWidth:"1.5"})]}),c.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestión LIR"})]})]}),c.jsx("div",{className:"flex-1 flex justify-center",children:c.jsx("button",{onClick:()=>r("Calendario Académico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Académico",children:c.jsx(bY,{})})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(cE,{onOpen:R,trigger:c.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Notificaciones",children:[c.jsx(xg,{}),u.length>0&&c.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:u.length})]}),children:c.jsxs("div",{className:"p-2",children:[c.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),c.jsxs("ul",{className:"mt-1",children:[u.slice(0,3).map(j=>c.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[c.jsx("p",{className:"font-bold dark:text-slate-200",children:j.titulo}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:j.mensaje})]},j.id)),u.length===0&&c.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]}),c.jsx("button",{onClick:()=>r("Muro de Anuncios"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ver todo"})]})}),c.jsx(cE,{onOpen:M,trigger:c.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[c.jsx(vg,{}),o>0&&c.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:o})]}),children:c.jsxs("div",{className:"p-2",children:[c.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),c.jsxs("ul",{className:"mt-1",children:[h.slice(0,3).map(j=>c.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[c.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",j.de]}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:j.asunto})]},j.id)),h.length===0&&c.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]}),c.jsx("button",{onClick:()=>r("Mensajería Interna"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ir a la bandeja"})]})}),c.jsx(cE,{trigger:c.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:c.jsx(VY,{user:t})}),children:c.jsxs("div",{className:"p-2",children:[c.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:t.nombreCompleto}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:t.profile})]}),c.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[c.jsx("li",{children:c.jsx("button",{onClick:()=>b(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),c.jsx("li",{children:c.jsx("button",{onClick:()=>_(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuración"})}),a&&c.jsx("li",{children:c.jsx("button",{onClick:s,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"👑 Cambiar Vista"})}),c.jsx("li",{children:c.jsx("button",{onClick:e,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesión"})})]})]})})]})]})}),g&&c.jsx(QY,{user:t,onClose:()=>b(!1),onSave:n}),y&&c.jsx(HY,{user:t,onClose:()=>_(!1),onSave:n})]})};var th={};const zY={apiKey:th.NEXT_PUBLIC_FIREBASE_API_KEY||"tu-api-key",authDomain:th.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"tu-proyecto.firebaseapp.com",projectId:th.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"tu-proyecto-id",storageBucket:th.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"tu-proyecto.appspot.com",messagingSenderId:th.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"123456789",appId:th.NEXT_PUBLIC_FIREBASE_APP_ID||"1:123456789:web:abcdef",measurementId:th.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||"G-XXXXXXXXXX"},fM=Ck().length===0?B5(zY):Ck()[0],Tt=J8(fM);DU(fM);const i1="reemplazos_docentes",qY="usuarios",S4=t=>{var r,n,s,a;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion,fechaActualizacion:((a=(s=e.fechaActualizacion)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString())||e.fechaActualizacion}},KY=t=>{const e=t.data();return{id:t.id,...e}},$Y=async(t,e)=>{try{const r={...t,userId:e,fechaCreacion:cr.fromDate(new Date),fechaActualizacion:cr.fromDate(new Date)};return(await Cs(Ft(Tt,i1),r)).id}catch(r){throw console.error("Error al guardar reemplazo:",r),new Error("No se pudo guardar el reemplazo")}},WY=async(t,e)=>{try{const r=yr(Tt,i1,t),n=await r1(r);if(!n.exists()||n.data().userId!==e)throw new Error("No tienes permisos para eliminar este reemplazo");await mi(r)}catch(r){throw console.error("Error al eliminar reemplazo:",r),new Error("No se pudo eliminar el reemplazo")}},YY=(t,e,r=50)=>{try{const n=er(Ft(Tt,i1),Fn("userId","==",t),gn("diaAusencia","desc"),NA(r));return Tr(n,s=>{const a=s.docs.map(S4);e(a)},s=>{console.error("Error en suscripción a reemplazos:",s),e([])})}catch(n){return console.error("Error al crear la suscripción de reemplazos:",n),()=>{}}},XY=t=>{try{const e=er(Ft(Tt,qY),Fn("profile","==",Vt.PROFESORADO));return Tr(e,n=>{const s=n.docs.map(KY);t(s)},n=>{console.error("Error al obtener la lista de profesores:",n),t([])})}catch(e){return console.error("Error al crear la suscripción de profesores:",e),()=>{}}},JY=async t=>{try{const e=er(Ft(Tt,i1),Fn("userId","==",t)),n=(await ca(e)).docs.map(S4),s=n.length,a=n.filter(o=>o.resultado==="Hora realizada").length,i=n.filter(o=>o.resultado==="Hora cubierta, no realizada").length;return{totalReemplazos:s,horasRealizadas:a,horasCubiertas:i,porcentajeRealizadas:s>0?a/s*100:0}}catch(e){throw console.error("Error al obtener estadísticas:",e),new Error("No se pudieron obtener las estadísticas")}},ZY=async(t,e)=>{try{if(!e.trim())return[];const r=er(Ft(Tt,i1),Fn("userId","==",t),gn("diaAusencia","desc"),NA(100)),s=(await ca(r)).docs.map(S4),a=e.toLowerCase();return s.filter(i=>i.docenteAusente.toLowerCase().includes(a)||i.docenteReemplazante.toLowerCase().includes(a)||i.curso.toLowerCase().includes(a)||i.diaAusencia.includes(a)||i.asignaturaAusente.toLowerCase().includes(a)||i.asignaturaReemplazante.toLowerCase().includes(a))}catch(r){return console.error("Error en búsqueda de reemplazos:",r),[]}},eX=Array.from({length:12},(t,e)=>e+1),rI={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},tX=t=>{const[e,r]=ee.useState([]),[n,s]=ee.useState(!0),[a,i]=ee.useState(null);ee.useEffect(()=>t?YY(t,h=>{r(h),s(!1)}):void 0,[t]);const o=ee.useCallback(async d=>{try{return i(null),await $Y(d,t)}catch(h){throw i(h instanceof Error?h.message:"Error al guardar"),h}},[t]),l=ee.useCallback(async d=>{try{i(null),await WY(d,t)}catch(h){throw i(h instanceof Error?h.message:"Error al eliminar"),h}},[t]),u=ee.useCallback(async d=>{try{return i(null),d.trim()?await ZY(t,d):e}catch(h){return i(h instanceof Error?h.message:"Error en la búsqueda"),[]}},[t,e]);return{reemplazos:e,loading:n,error:a,save:o,remove:l,search:u}},rX=()=>{const[t,e]=ee.useState([]),[r,n]=ee.useState(!0);ee.useEffect(()=>XY(i=>{e(i),n(!1)}),[]);const s=ee.useMemo(()=>t.map(a=>a.nombreCompleto).sort(),[t]);return{profesores:t,profesorNames:s,loading:r}},nX=({selectedBlocks:t,onChange:e,legend:r,disabled:n=!1})=>c.jsxs("fieldset",{children:[c.jsx("legend",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:r}),c.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-2",children:eX.map(s=>c.jsxs("label",{className:`flex items-center space-x-2 p-2 border rounded-lg transition-colors ${n?"opacity-50 cursor-not-allowed":"hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-700"}`,children:[c.jsx("input",{type:"checkbox",value:s,checked:t.includes(s),onChange:e,disabled:n,className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500 disabled:opacity-50"}),c.jsx("span",{className:"text-slate-600 dark:text-slate-300 font-medium",children:s})]},s))})]}),sX=({userId:t})=>{const[e,r]=ee.useState(null),[n,s]=ee.useState(!1),a=ee.useCallback(async()=>{try{s(!0);const i=new Date,o=(i.getMonth()+1).toString(),l=i.getFullYear().toString(),u=await JY(t);r(u)}catch(i){console.error("Error al cargar estadísticas:",i)}finally{s(!1)}},[t]);return ee.useEffect(()=>{t&&a()},[t,a]),n?c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx("div",{className:"animate-pulse flex justify-center",children:c.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"})})}):e?c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:[c.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Estadísticas del Mes"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:e.totalReemplazos}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Total"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:e.horasRealizadas}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Realizadas"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:e.horasCubiertas}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Cubiertas"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[e.porcentajeRealizadas.toFixed(1),"%"]}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Efectividad"})]})]})]}):null},aX=({currentUser:t})=>{const e=t.email||t.id||"",{reemplazos:r,save:n,remove:s,search:a,loading:i,error:o}=tX(e),{profesorNames:l,loading:u}=rX(),[d,h]=ee.useState(rI),[m,g]=ee.useState(""),[b,y]=ee.useState([]),[_,N]=ee.useState(null),[k,R]=ee.useState(!1),[M,j]=ee.useState(!1);ee.useEffect(()=>{(async()=>{if(!m.trim()){y(r);return}j(!0);try{const I=await a(m);y(I)}catch(I){console.error("Error en búsqueda:",I),y(r)}finally{j(!1)}})()},[r,m,a]);const L=ee.useCallback(D=>{const{name:I,value:O}=D.target;h(G=>({...G,[I]:O}))},[]),C=ee.useCallback(D=>{const I=parseInt(D.target.value,10);h(O=>{const G=O.bloquesAfectados,se=G.includes(I)?G.filter(J=>J!==I):[...G,I].sort((J,re)=>J-re);return{...O,bloquesAfectados:se}})},[]),E=ee.useCallback(async D=>{D.preventDefault(),N(null),R(!0);const{docenteAusente:I,asignaturaAusente:O,curso:G,diaAusencia:se,bloquesAfectados:J,docenteReemplazante:re,asignaturaReemplazante:q}=d;if(!I||!O||!G||!se||!re||!q||J.length===0){N("Todos los campos son obligatorios y debe seleccionar al menos un bloque."),R(!1);return}if(I===re){N("El docente ausente y el reemplazante no pueden ser la misma persona."),R(!1);return}const z=new Date(se),W=new Date;if(W.setHours(0,0,0,0),z<W&&!window.confirm("La fecha seleccionada es anterior a hoy. ¿Desea continuar?")){R(!1);return}try{const ie=O.trim().toLowerCase()===q.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",P={...d,resultado:ie};await n(P),h(rI);const Y=ie==="Hora realizada"?"✅ Reemplazo registrado - Hora realizada":"⚠️ Reemplazo registrado - Hora cubierta, no realizada",Z=document.createElement("div");Z.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50",Z.textContent=Y,document.body.appendChild(Z),setTimeout(()=>{document.body.contains(Z)&&document.body.removeChild(Z)},3e3)}catch(ie){console.error("Error al guardar reemplazo:",ie),N("Error al guardar el reemplazo. Por favor, intente nuevamente.")}finally{R(!1)}},[d,n]),B=ee.useCallback(async D=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await s(D)}catch(I){console.error("Error al eliminar reemplazo:",I),alert("Error al eliminar el reemplazo. Por favor, intente nuevamente.")}},[s]),Q="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400 disabled:opacity-50 disabled:cursor-not-allowed";return!t||!t.email&&!t.id?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),c.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(t)]})]})}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx(sX,{userId:e}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Registro de Inasistencias y Reemplazos"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete el formulario para registrar una nueva suplencia."}),u?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando profesores..."})]}):c.jsxs("form",{onSubmit:E,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Ausente"}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"docenteAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),c.jsxs("select",{name:"docenteAusente",value:d.docenteAusente,onChange:L,className:Q,disabled:k,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un docente"}),l.map(D=>c.jsx("option",{value:D,children:D},D))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignaturaAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignaturaAusente",value:d.asignaturaAusente,onChange:L,className:Q,disabled:k,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione una asignatura"}),il.map(D=>c.jsx("option",{value:D,children:D},D))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:d.curso,onChange:L,className:Q,disabled:k,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un curso"}),la.map(D=>c.jsx("option",{value:D,children:D},D))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"diaAusencia",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Día Ausencia"}),c.jsx("input",{type:"date",name:"diaAusencia",value:d.diaAusencia,onChange:L,className:Q,disabled:k,required:!0})]}),c.jsx(nX,{legend:"Bloques Afectados",selectedBlocks:d.bloquesAfectados,onChange:C,disabled:k})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Reemplazante"}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"docenteReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),c.jsxs("select",{name:"docenteReemplazante",value:d.docenteReemplazante,onChange:L,className:Q,disabled:k,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un docente"}),l.map(D=>c.jsx("option",{value:D,children:D},D))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignaturaReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignaturaReemplazante",value:d.asignaturaReemplazante,onChange:L,className:Q,disabled:k,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione una asignatura"}),il.map(D=>c.jsx("option",{value:D,children:D},D))]})]}),d.asignaturaAusente&&d.asignaturaReemplazante&&c.jsxs("div",{className:"mt-6 p-4 rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-600",children:[c.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Vista Previa del Resultado:"}),c.jsx("div",{className:`px-3 py-2 rounded-full text-sm font-semibold inline-flex ${d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"}`,children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"✅ Hora realizada":"⚠️ Hora cubierta, no realizada"}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Las asignaturas coinciden - se considera hora realizada":"Las asignaturas no coinciden - se considera hora cubierta pero no realizada"})]})]})]}),(_||o)&&c.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:c.jsx("p",{className:"text-red-600 dark:text-red-400",children:_||o})}),c.jsx("div",{className:"pt-4 text-right",children:c.jsxs("button",{type:"submit",disabled:k||u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[k&&c.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),k?"Registrando...":"Registrar Reemplazo"]})})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Reemplazos"}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)...",value:m,onChange:D=>g(D.target.value),className:`${Q} md:w-1/2 pl-10`,disabled:M}),c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:M?c.jsx("div",{className:"w-4 h-4 border-2 border-slate-400 border-t-transparent rounded-full animate-spin"}):c.jsx("svg",{className:"h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),m&&c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:M?"Buscando...":`${b.length} resultado(s) encontrado(s)`})]}),i?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando reemplazos..."})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Ausente"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Reemplazante"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Bloques"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Resultado"}),c.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:b.length>0?b.map(D=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(D.diaAusencia+"T12:00:00").toLocaleDateString("es-CL")}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:D.curso}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[D.docenteAusente,c.jsx("br",{}),c.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:D.asignaturaAusente})]}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[D.docenteReemplazante,c.jsx("br",{}),c.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:D.asignaturaReemplazante})]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:D.bloquesAfectados.join(", ")}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:c.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${D.resultado==="Hora realizada"?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"}`,children:D.resultado})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm",children:c.jsx("button",{onClick:()=>B(D.id),title:"Eliminar registro",className:"p-1 text-red-600 hover:text-red-800 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors disabled:opacity-50",disabled:k,children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},D.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:m?"No se encontraron registros que coincidan con la búsqueda.":"No hay registros de reemplazos."})})})]})}),b.length>0&&!m&&c.jsxs("div",{className:"mt-4 text-sm text-slate-500 dark:text-slate-400 text-center",children:["Mostrando los últimos ",b.length," registros"]})]})]})},iX=t=>{console.log("🔄 Iniciando suscripción a todos los reemplazos...");try{const e=Ft(Kr,"reemplazos"),r=er(e,gn("fecha","desc"));return Tr(r,s=>{const a=[];s.forEach(i=>{const o=i.data();a.push({id:i.id,...o})}),console.log("✅ Reemplazos cargados para dashboard:",a.length),t(a)},s=>{throw console.error("❌ Error al cargar reemplazos:",s),s})}catch(e){throw console.error("❌ Error al configurar suscripción a reemplazos:",e),e}},oX=t=>{console.log("🔄 Iniciando suscripción a todos los acompañamientos...");try{const e=Ft(Kr,"acompanamientos"),r=er(e,gn("fecha","desc"));return Tr(r,s=>{const a=[];s.forEach(i=>{const o=i.data();a.push({id:i.id,...o})}),console.log("✅ Acompañamientos cargados para dashboard:",a.length),t(a)},s=>{throw console.error("❌ Error al cargar acompañamientos:",s),s})}catch(e){throw console.error("❌ Error al configurar suscripción a acompañamientos:",e),e}},lX=t=>{console.log("🔄 Iniciando suscripción a todos los eventos del calendario...");try{const e=Ft(Kr,"calendar_events"),r=er(e,gn("date","asc"));return Tr(r,s=>{const a=[];s.forEach(i=>{const o=i.data();a.push({id:i.id,...o})}),console.log("✅ Eventos del calendario cargados para dashboard:",a.length),t(a)},s=>{throw console.error("❌ Error al cargar eventos del calendario:",s),s})}catch(e){throw console.error("❌ Error al configurar suscripción a eventos del calendario:",e),e}},mu=({title:t,value:e,description:r,isLoading:n=!1})=>c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:t}),n?c.jsxs("div",{className:"flex items-center mt-2",children:[c.jsx("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:e}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]})]}),rh=({title:t,data:e,colorClass:r,valueFormatter:n=a=>String(a),isLoading:s=!1})=>{const a=ee.useMemo(()=>e.map(o=>typeof o.value=="number"?o.value:parseFloat(String(o.value))||0),[e]),i=ee.useMemo(()=>Math.max(...a,1),[a]);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:t}),s?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando datos..."})]}):c.jsx("div",{className:"space-y-4",children:e.length>0?e.sort((o,l)=>(typeof l.value=="number"?l.value:0)-(typeof o.value=="number"?o.value:0)).map((o,l)=>{const u=typeof o.value=="number"?o.value:parseFloat(String(o.value))||0;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:o.label}),c.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:n(o.value)})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:c.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${u/i*100}%`}})})]},o.label+l)}):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},cX=()=>{const[t,e]=ee.useState([]),[r,n]=ee.useState([]),[s,a]=ee.useState([]),[i,o]=ee.useState(!0),[l,u]=ee.useState(null);return ee.useEffect(()=>{console.log("🔄 Iniciando carga de datos del dashboard...");let d=0;const h=3,m=()=>{d++,d>=h&&(o(!1),console.log("✅ Todos los datos del dashboard cargados"))};try{const g=iX(_=>{e(_),m()}),b=oX(_=>{n(_),m()}),y=lX(_=>{a(_),m()});return()=>{g(),b(),y()}}catch(g){console.error("❌ Error al configurar suscripciones del dashboard:",g),u(g instanceof Error?g.message:"Error al cargar datos del dashboard"),o(!1)}},[]),{registros:t,acompanamientos:r,calendarEvents:s,loading:i,error:l}},uX=({currentUser:t})=>{var h,m;console.log("=== DASHBOARD SUBDIRECCION DEBUG ==="),console.log("🔍 Dashboard - currentUser completo:",t),console.log("🔍 Dashboard - currentUser.profile:",t==null?void 0:t.profile),console.log("🔍 Dashboard - Verificación de perfil:",(t==null?void 0:t.profile)==="SUBDIRECCION"),console.log("🔍 Dashboard - Typeof profile:",typeof(t==null?void 0:t.profile)),console.log("🔍 Dashboard - Profile length:",(h=t==null?void 0:t.profile)==null?void 0:h.length),console.log("🔍 Dashboard - Profile con comillas:",`"${t==null?void 0:t.profile}"`),console.log("🔍 Dashboard - Comparación con trim:",((m=t==null?void 0:t.profile)==null?void 0:m.trim())==="SUBDIRECCION"),console.log("=====================================");const{registros:e,acompanamientos:r,calendarEvents:n,loading:s,error:a}=cX(),[i,o]=ee.useState(jg);if(console.log("🔍 Dashboard - Datos recibidos:",{registros:e.length,acompanamientos:r.length,calendarEvents:n.length,loading:s,error:a,currentUser:t==null?void 0:t.profile}),ee.useEffect(()=>{try{const g=localStorage.getItem("acompanamientoDocenteCustomRubrica");o(g?JSON.parse(g):jg)}catch(g){console.error("Error al leer rúbrica personalizada",g),o(jg)}},[]),console.log("🔍 Dashboard - Verificando permisos..."),console.log("🔍 Dashboard - currentUser existe:",!!t),console.log("🔍 Dashboard - profile value:",`"${t==null?void 0:t.profile}"`),console.log("🔍 Dashboard - comparación exacta:",(t==null?void 0:t.profile)==="SUBDIRECCION"),!t)return console.log("❌ Dashboard - currentUser es null/undefined"),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando usuario..."}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Esperando datos del usuario autenticado..."})]});if(t.profile!=="SUBDIRECCION")return console.log("❌ Dashboard - Perfil no autorizado:",t.profile),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("span",{className:"text-6xl mb-4",children:"🚫"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acceso Restringido"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Este dashboard está disponible solo para usuarios con perfil de Subdirección."}),c.jsxs("div",{className:"mt-4 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs text-slate-600 dark:text-slate-400",children:[c.jsx("p",{children:c.jsx("strong",{children:"Debug Info:"})}),c.jsxs("p",{children:['Su perfil actual: "',t.profile,'"']}),c.jsx("p",{children:'Perfil requerido: "SUBDIRECCION"'}),c.jsxs("p",{children:["Usuario: ",t.email||t.nombreCompleto]})]})]});if(console.log("✅ Dashboard - Permisos verificados correctamente"),a)return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("span",{className:"text-6xl mb-4",children:"⚠️"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error al Cargar Datos"}),c.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg max-w-md mb-4",children:a}),c.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Recargar Página"})]});const l=ee.useMemo(()=>{const g=e.length;if(g===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const b=e.filter(j=>j.resultado==="Hora realizada").length,y=g-b,_=`${(b/g*100).toFixed(1)}%`,N=(j,L)=>j.reduce((C,E)=>{const B=E[L];return typeof B=="string"&&(C[B]=(C[B]||0)+1),C},{}),k=N(e,"docenteAusente"),R=N(e,"docenteReemplazante"),M=N(e,"curso");return{totalInasistencias:g,horasRealizadas:b,horasCubiertas:y,tasaCobertura:_,inasistenciasPorDocente:Object.entries(k).map(([j,L])=>({label:j,value:L})),reemplazosPorDocente:Object.entries(R).map(([j,L])=>({label:j,value:L})),inasistenciasPorCurso:Object.entries(M).map(([j,L])=>({label:j,value:L})),distribucionResultados:[{label:"Hora Realizada",value:b},{label:"Hora Cubierta",value:y}]}},[e]),u=ee.useMemo(()=>{const g=r.length;if(g===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const b=new Map;i.forEach(L=>{L.criteria.forEach(C=>{b.set(C.name,L.domain)})});let y=0,_=0;const N={},k={};r.forEach(L=>{N[L.docente]||(N[L.docente]={total:0,count:0}),Object.entries(L.rubricaResultados).forEach(([C,E])=>{y+=E,_++,N[L.docente].total+=E,N[L.docente].count++;const B=b.get(C);B&&(k[B]||(k[B]={total:0,count:0}),k[B].total+=E,k[B].count++)})});const R=_>0?(y/_).toFixed(2):"N/A",M=Object.entries(N).map(([L,C])=>({label:L,value:C.count>0?(C.total/C.count).toFixed(2):0})),j=Object.entries(k).map(([L,C])=>({label:L,value:C.count>0?(C.total/C.count).toFixed(2):0}));return{totalAcompanamientos:g,promedioGeneral:R,desempenoPorDocente:M,desempenoPorDominio:j}},[r,i]),d=ee.useMemo(()=>{const g={[Yr.EVALUACION]:0,[Yr.ACTO]:0,[Yr.ACTIVIDAD_FOCALIZADA]:0,[Yr.SALIDA_PEDAGOGICA]:0};for(const y of n)g.hasOwnProperty(y.type)&&g[y.type]++;const b=Object.entries(g).map(([y,_])=>({label:zd[y].label,value:_}));return{totalEvaluaciones:g[Yr.EVALUACION],totalActos:g[Yr.ACTO],totalActividadesFocalizadas:g[Yr.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:g[Yr.SALIDA_PEDAGOGICA],distribucionEventos:b}},[n]);return s?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando Dashboard"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Obteniendo datos desde la base de datos..."})]}):l.totalInasistencias===0&&u.totalAcompanamientos===0&&n.length===0?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("span",{className:"text-6xl mb-4",children:"📊"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdirección"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Aún no hay datos para mostrar. Comience por añadir registros en los módulos correspondientes."}),c.jsxs("div",{className:"text-sm text-slate-400 dark:text-slate-500",children:[c.jsx("p",{children:"• Módulo de Inasistencias y Reemplazos"}),c.jsx("p",{children:"• Módulo de Acompañamiento Docente"}),c.jsx("p",{children:"• Calendario Académico"})]})]}):c.jsxs("div",{className:"space-y-12 animate-fade-in",children:[c.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 text-white p-6 rounded-xl shadow-lg",children:[c.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Subdirección"}),c.jsx("p",{className:"text-amber-100",children:"Vista consolidada de datos institucionales"}),c.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["Última actualización: ",new Date().toLocaleString("es-CL")]})]}),e.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📋 Dashboard de Inasistencias y Reemplazos"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(mu,{title:"Total Inasistencias",value:l.totalInasistencias,description:"Registros totales",isLoading:s}),c.jsx(mu,{title:"Horas Realizadas",value:l.horasRealizadas,description:"Reemplazo con misma asignatura",isLoading:s}),c.jsx(mu,{title:"Horas Cubiertas",value:l.horasCubiertas,description:"Reemplazo con otra asignatura",isLoading:s}),c.jsx(mu,{title:"Tasa de Cobertura Efectiva",value:l.tasaCobertura,description:"% de horas realizadas",isLoading:s})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx(rh,{title:"Inasistencias por Docente",data:l.inasistenciasPorDocente,colorClass:"bg-red-400",isLoading:s}),c.jsx(rh,{title:"Reemplazos por Docente",data:l.reemplazosPorDocente,colorClass:"bg-sky-400",isLoading:s}),c.jsx(rh,{title:"Inasistencias por Curso",data:l.inasistenciasPorCurso,colorClass:"bg-amber-400",isLoading:s}),c.jsx(rh,{title:"Distribución de Resultados",data:l.distribucionResultados,colorClass:"bg-green-400",isLoading:s})]})]}),r.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"👥 Dashboard de Acompañamiento Docente"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(mu,{title:"Total Acompañamientos",value:u.totalAcompanamientos,description:"Registros realizados",isLoading:s}),c.jsx(mu,{title:"Promedio General",value:u.promedioGeneral,description:"Calificación promedio (1-4)",isLoading:s})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx(rh,{title:"Desempeño Promedio por Docente",data:u.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:g=>Number(g).toFixed(2),isLoading:s}),c.jsx(rh,{title:"Desempeño Promedio por Dominio",data:u.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:g=>Number(g).toFixed(2),isLoading:s})]})]}),n.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📅 Resumen del Calendario Académico"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(mu,{title:"Evaluaciones",value:d.totalEvaluaciones,description:"Eventos registrados",isLoading:s}),c.jsx(mu,{title:"Actos",value:d.totalActos,description:"Eventos registrados",isLoading:s}),c.jsx(mu,{title:"Act. Focalizadas",value:d.totalActividadesFocalizadas,description:"Eventos registrados",isLoading:s}),c.jsx(mu,{title:"Salidas Pedagógicas",value:d.totalSalidasPedagogicas,description:"Eventos registrados",isLoading:s})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx(rh,{title:"Distribución de Eventos del Calendario",data:d.distribucionEventos,colorClass:"bg-violet-400",isLoading:s}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Próximos Eventos"}),s?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando eventos..."})]}):c.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[n.filter(g=>new Date(g.date)>=new Date).slice(0,5).map((g,b)=>{var y,_;return c.jsx("div",{className:"p-3 border dark:border-slate-600 rounded-md",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:g.responsables||"Evento sin título"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(g.date).toLocaleDateString("es-CL")}),g.ubicacion&&c.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["📍 ",g.ubicacion]})]}),c.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${((y=zd[g.type])==null?void 0:y.color)||"bg-gray-100 text-gray-800"}`,children:((_=zd[g.type])==null?void 0:_.label)||g.type})]})},g.id||b)}),n.filter(g=>new Date(g.date)>=new Date).length===0&&c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay eventos próximos programados"})]})]})]})]}),c.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"📈 Resumen Ejecutivo"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:e.length+r.length+n.length}),c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Total de registros en el sistema"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:new Set([...e.map(g=>g.docenteAusente),...r.map(g=>g.docente)]).size}),c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Docentes con registros"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[Math.round(e.filter(g=>g.resultado==="Hora realizada").length/Math.max(e.length,1)*100),"%"]}),c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Efectividad en cobertura"})]})]})]}),c.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-6",children:[c.jsx("p",{children:"Dashboard de Subdirección - Sistema de Gestión Pedagógica"}),c.jsx("p",{children:"Los datos se actualizan en tiempo real desde la base de datos"})]})]})},T4="horario_asignaciones",hM="horarios_generados",AX="usuarios",mM=t=>{const e=t.data();return{id:t.id,...e}},dX=t=>{const e=er(Ft(Tt,T4));return Tr(e,n=>{const s=n.docs.map(a=>mM(a));t(s)},n=>{console.error("Error al suscribirse a las asignaciones:",n),t([])})},fX=async t=>{try{return(await Cs(Ft(Tt,T4),t)).id}catch(e){throw console.error("Error al agregar asignación:",e),new Error("No se pudo agregar la asignación.")}},hX=async t=>{try{const e=yr(Tt,T4,t);await mi(e)}catch(e){throw console.error("Error al eliminar asignación:",e),new Error("No se pudo eliminar la asignación.")}},nI=async t=>{try{const e=yr(Tt,hM,"global");await Wi(e,{data:t})}catch(e){throw console.error("Error al guardar los horarios:",e),new Error("No se pudieron guardar los horarios generados.")}},mX=t=>{const e=yr(Tt,hM,"global");return Tr(e,n=>{n.exists()?t(n.data().data||{}):t({})},n=>{console.error("Error al suscribirse a los horarios:",n),t({})})},pX=t=>{const e=er(Ft(Tt,AX),Fn("profile","==",Vt.PROFESORADO));return Tr(e,n=>{const s=n.docs.map(a=>mM(a));t(s)},n=>{console.error("Error al suscribirse a los profesores:",n),t([])})},gX=({horarios:t})=>Object.keys(t).length===0?c.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-800 rounded-lg",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:'Aún no se ha generado ningún horario. Utilice la pestaña de "Configuración" para generar uno.'})}):c.jsx("div",{className:"overflow-x-auto border border-slate-300 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full border-collapse",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 sticky top-0 z-10",children:c.jsxs("tr",{children:[c.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-16",children:"BLOQUE"}),c.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-24",children:"HORARIO"}),la.map(e=>c.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs whitespace-nowrap min-w-[120px]",children:e},e))]})}),c.jsx("tbody",{children:Ly.map(e=>c.jsxs(At.Fragment,{children:[c.jsx("tr",{className:"bg-slate-200 dark:bg-slate-800",children:c.jsx("th",{colSpan:2+la.length,className:"text-center font-bold text-slate-700 dark:text-slate-200 p-2 border-b border-slate-300 dark:border-slate-600",children:e.toUpperCase()})}),Y_.map(({bloque:r,inicio:n,fin:s})=>c.jsxs("tr",{className:"even:bg-white odd:bg-slate-50 dark:even:bg-slate-800/50 dark:odd:bg-slate-900/50",children:[c.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center font-bold text-slate-700 dark:text-slate-300 text-sm",children:r}),c.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center text-xs text-slate-500 dark:text-slate-400",children:`${n} - ${s}`}),la.map(a=>{var o,l;const i=(l=(o=t[a])==null?void 0:o[e])==null?void 0:l[r];return c.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center h-16",children:i!=null&&i.asignatura?c.jsxs("div",{className:"flex flex-col justify-center h-full",children:[c.jsx("p",{className:"font-semibold text-[11px] leading-tight text-slate-800 dark:text-slate-200 whitespace-normal",children:i.asignatura}),c.jsxs("p",{className:"text-[10px] leading-tight text-slate-500 dark:text-slate-400 whitespace-normal mt-0.5",children:["(",i.profesor,")"]})]}):c.jsx("span",{className:"text-slate-300 dark:text-slate-600 text-xs",children:"Libre"})},`${a}-${e}-${r}`)})]},`${e}-${r}`))]},e))})]})}),xX=()=>{const[t,e]=ee.useState([]),[r,n]=ee.useState({curso:"",asignatura:"",profesor:""}),[s,a]=ee.useState([]),[i,o]=ee.useState({}),[l,u]=ee.useState(la[0]),[d,h]=ee.useState(!1),[m,g]=ee.useState(!0),[b,y]=ee.useState(null),[_,N]=ee.useState(null),[k,R]=ee.useState(null),[M,j]=ee.useState({asignatura:"",profesor:""}),[L,C]=ee.useState("edicion"),[E,B]=ee.useState("");ee.useEffect(()=>{g(!0);const q=dX(e),z=mX(o),W=pX(ie=>{const P=ie.map(Y=>Y.nombreCompleto).sort();a(P),g(!1)});return()=>{q(),z(),W()}},[]);const Q=async q=>{if(q.preventDefault(),y(null),!r.curso||!r.asignatura||!r.profesor){y("Todos los campos de la asignación son obligatorios.");return}try{await fX({curso:r.curso,asignatura:r.asignatura,profesor:r.profesor}),n({curso:"",asignatura:"",profesor:""})}catch(z){y(z instanceof Error?z.message:"Error al guardar la asignación.")}},D=async q=>{try{await hX(q)}catch(z){y(z instanceof Error?z.message:"Error al eliminar la asignación.")}},I=async()=>{if(t.length===0){y("Debe agregar al menos una asignación de profesor antes de generar el horario.");return}h(!0),y(null),N(null);try{const z=new globalThis.GoogleGenerativeAI(""),W=`
                Eres un asistente experto en planificación de horarios escolares para un liceo técnico en Chile. 
                Tu tarea es generar un horario semanal completo (Lunes a Viernes) para todos los cursos proporcionados, siguiendo un conjunto estricto de reglas.

                **Contexto:**
                - Días de la semana: ${Ly.join(", ")}
                - Bloques horarios por día: 10 bloques con los siguientes horarios: ${JSON.stringify(Y_,null,2)}
                - Cursos del liceo: ${la.join(", ")}

                **Contexto Adicional de Especialidades (3º y 4º Medio):**
                - Los cursos que terminan en 'A' y 'B' pertenecen a la especialidad 'Mecánica Automotriz'.
                - Los cursos que terminan en 'C' y 'D' pertenecen a la especialidad 'Mecánica Industrial'.
                Utiliza este contexto para aplicar las reglas de "3°/4° Medio Automotriz" y "3°/4° Medio Industrial" correctamente.

                **Reglas de Asignación de Bloques por Asignatura:**
                Debes asignar la siguiente cantidad de bloques semanales para cada asignatura según el nivel del curso:
                ${JSON.stringify(MY,null,2)}
                Notas sobre las reglas:
                - '1º y 2º medio' aplica a cursos que empiezan con '1º' o '2º'.
                - '3º y 4º medio' aplica a cursos que empiezan con '3º' o '4º'.
                - Algunas reglas aplican a cursos específicos (ej. Mecánica).

                **Asignaciones de Profesores (Input):**
                Aquí está la lista de profesores asignados a cada curso y asignatura. Debes usar esta lista para poblar el horario.
                ${JSON.stringify(t,null,2)}

                **REGLA CRÍTICA INVIOLABLE:**
                La restricción más importante que NUNCA debe romperse es que un mismo profesor no puede ser asignado a dos cursos diferentes en el mismo día y mismo bloque horario. Es físicamente imposible para un profesor estar en dos lugares a la vez. Prioriza esta regla sobre todas las demás. No deben existir topes de horario para ningún profesor.

                **Instrucciones Adicionales del Usuario:**
                Considera las siguientes preferencias al organizar el horario: "${E||"No se proporcionaron instrucciones adicionales."}"

                **Objetivo Adicional:**
                Distribuye las asignaturas de la forma más balanceada posible durante la semana para cada curso. Evita agrupar todas las horas de una misma materia en un solo día si es posible, a menos que las instrucciones del usuario indiquen lo contrario.

                **Formato de Salida (Output):**
                Tu respuesta DEBE ser un único objeto JSON válido, sin texto adicional antes o después. La estructura del JSON debe ser la siguiente:
                {
                  "1ºA": {
                    "Lunes": { "1": { "asignatura": "Matemática", "profesor": "Nombre Profesor" }, "2": { "asignatura": "Matemática", "profesor": "Nombre Profesor" } },
                    "Martes": { ... },
                    ...
                  },
                  "1ºB": { ... }
                }
                Cada clave de primer nivel es un curso. Cada curso tiene claves para cada día de la semana. Cada día tiene claves para cada bloque del 1 al 10. Si un bloque está vacío, usa \`{ "asignatura": null, "profesor": null }\`.
            `,Z=(await(await z.getGenerativeModel({model:"gemini-pro"}).generateContent(W)).response).text(),te=JSON.parse(Z);await nI(te),N("¡Horario generado y guardado con éxito!")}catch(q){console.error("Error al generar horario con IA:",q),y("Ocurrió un error al contactar con la IA o al procesar la respuesta. Por favor, inténtelo de nuevo.")}finally{h(!1)}},O=(q,z,W)=>{R({dia:q,bloque:z}),j({asignatura:(W==null?void 0:W.asignatura)||"",profesor:(W==null?void 0:W.profesor)||""})},G=async()=>{if(!k)return;const{dia:q,bloque:z}=k,W=JSON.parse(JSON.stringify(i));W[l]||(W[l]={}),W[l][q]||(W[l][q]={}),W[l][q][z]={asignatura:M.asignatura||null,profesor:M.profesor||null};try{await nI(W),R(null)}catch(ie){y(ie instanceof Error?ie.message:"Error al guardar la edición.")}},se="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",J=()=>{const q=i[l]||{};return c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border-collapse border border-slate-300 dark:border-slate-700",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-slate-100 dark:bg-slate-700",children:[c.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:"Bloque"}),Ly.map(z=>c.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:z},z))]})}),c.jsx("tbody",{children:Y_.map(({bloque:z,inicio:W,fin:ie})=>c.jsxs("tr",{className:"text-center dark:bg-slate-800",children:[c.jsxs("td",{className:"border border-slate-300 dark:border-slate-700 p-2 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("p",{className:"font-bold text-slate-700 dark:text-slate-300",children:z}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:`${W} - ${ie}`})]}),Ly.map(P=>{var te;const Y=(k==null?void 0:k.dia)===P&&(k==null?void 0:k.bloque)===z,Z=(te=q[P])==null?void 0:te[z];return c.jsx("td",{className:"border border-slate-300 dark:border-slate-700 p-1 h-24 relative hover:bg-amber-50 dark:hover:bg-slate-700 cursor-pointer",onClick:()=>!Y&&O(P,z,Z),children:Y?c.jsxs("div",{className:"flex flex-col p-1 bg-white dark:bg-slate-800 h-full justify-center",children:[c.jsx("input",{type:"text",placeholder:"Asignatura",value:M.asignatura,onChange:ce=>j(Ee=>({...Ee,asignatura:ce.target.value})),className:se+" text-xs mb-1"}),c.jsx("input",{type:"text",placeholder:"Profesor",value:M.profesor,onChange:ce=>j(Ee=>({...Ee,profesor:ce.target.value})),className:se+" text-xs"}),c.jsxs("div",{className:"flex justify-end mt-1 space-x-1",children:[c.jsx("button",{onClick:()=>R(null),className:"text-xs bg-slate-200 dark:bg-slate-600 px-1 rounded",children:"Cancelar"}),c.jsx("button",{onClick:G,className:"text-xs bg-amber-500 text-white px-1 rounded",children:"Guardar"})]})]}):Z!=null&&Z.asignatura?c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-sm text-slate-800 dark:text-slate-200",children:Z.asignatura}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["(",Z.profesor,")"]})]}):c.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:"Libre"})},`${P}-${z}`)})]},z))})]})})},re=()=>c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Crear Horarios"}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🔧 1. Configuración de Asignaciones"}),c.jsxs("form",{onSubmit:Q,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end mb-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:r.curso,onChange:q=>n(z=>({...z,curso:q.target.value})),className:se,children:[c.jsx("option",{value:"",children:"Seleccione"}),la.map(q=>c.jsx("option",{value:q,children:q},q))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignatura",value:r.asignatura,onChange:q=>n(z=>({...z,asignatura:q.target.value})),className:se,children:[c.jsx("option",{value:"",children:"Seleccione"}),il.map(q=>c.jsx("option",{value:q,children:q},q))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"profesor",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor"}),c.jsxs("select",{name:"profesor",value:r.profesor,onChange:q=>n(z=>({...z,profesor:q.target.value})),className:se,children:[c.jsx("option",{value:"",children:"Seleccione"}),s.map(q=>c.jsx("option",{value:q,children:q},q))]})]}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 h-10",children:"Agregar"})]}),c.jsx("div",{className:"max-h-60 overflow-y-auto pr-2",children:c.jsx("ul",{className:"space-y-2",children:t.map(q=>c.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded-md",children:[c.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:[q.curso," - ",q.asignatura," - ",c.jsx("strong",{children:q.profesor})]}),c.jsx("button",{onClick:()=>D(q.id),className:"text-red-500 hover:text-red-700 font-bold text-xl",children:"×"})]},q.id))})})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🧠 2. Generación Automática con IA"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"aiInstructions",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Instrucciones para la IA (Opcional)"}),c.jsx("textarea",{id:"aiInstructions",name:"aiInstructions",value:E,onChange:q=>B(q.target.value),rows:3,placeholder:"Ej: Dejar los módulos teóricos en la mañana y los prácticos en la tarde. Evitar poner 2 bloques de matemática seguidos.",className:se})]}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("button",{onClick:I,disabled:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center",children:[d&&c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d?"Generando...":"Generar Horario Completo"]}),b&&c.jsx("p",{className:"text-red-600",children:b}),_&&c.jsx("p",{className:"text-green-600",children:_})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"📅 3. Visualización y Edición por Curso"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"selectCurso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione un curso para visualizar y editar:"}),c.jsx("select",{id:"selectCurso",value:l,onChange:q=>u(q.target.value),className:se+" md:w-1/3",children:la.map(q=>c.jsx("option",{value:q,children:q},q))})]}),Object.keys(i).length>0?J():c.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Aún no se ha generado ningún horario. Utilice el botón de generación con IA."})})]})]});return m?c.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>C("edicion"),className:`${L==="edicion"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Configuración y Edición por Curso"}),c.jsx("button",{onClick:()=>C("global"),className:`${L==="global"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Horario Global"})]})}),L==="edicion"?re():c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Horario Global de Cursos"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Vista consolidada de todos los horarios generados. La tabla es desplazable horizontalmente."}),c.jsx(gX,{horarios:i})]})]})},Ow="acciones",vX=async()=>{try{const t=er(Ft(Kr,Ow),gn("fechaRegistro","desc"));return(await ca(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener acciones:",t),new Error("No se pudieron cargar las acciones pedagógicas")}},yX=async t=>{try{return{id:(await Cs(Ft(Kr,Ow),{...t,fechaRegistro:t.fechaRegistro||new Date().toISOString().split("T")[0],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear acción:",e),new Error("No se pudo crear la acción pedagógica")}},sI=async(t,e)=>{try{const r=yr(Kr,Ow,t);await n1(r,{...e,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar acción:",r,"ID:",t),new Error("No se pudo actualizar la acción pedagógica")}},wX=async t=>{try{const e=yr(Kr,Ow,t);await mi(e)}catch(e){throw console.error("Error al eliminar acción:",e,"ID:",t),new Error("No se pudo eliminar la acción pedagógica")}},aI={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",area:"",descripcion:"",fechaCumplimiento:"",estado:"Pendiente"},bX={Pendiente:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En Proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Cumplida:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300"},CX=()=>{const[t,e]=ee.useState([]),[r,n]=ee.useState(!1),[s,a]=ee.useState(null),[i,o]=ee.useState(aI),[l,u]=ee.useState(null),[d,h]=ee.useState(""),[m,g]=ee.useState(""),[b,y]=ee.useState(""),_=ee.useCallback(async()=>{n(!0);try{const B=await vX();e(B),a(null)}catch(B){console.error("Error al cargar acciones desde Firestore",B),a("No se pudieron cargar las acciones pedagógicas desde la nube.")}finally{n(!1)}},[]);ee.useEffect(()=>{_()},[_]);const N=ee.useCallback(B=>{const{name:Q,value:D}=B.target;o(I=>({...I,[Q]:D}))},[]),k=ee.useCallback(()=>{o(aI),u(null),a(null)},[]),R=ee.useCallback(async B=>{B.preventDefault();const{fechaRegistro:Q,responsable:D,area:I,descripcion:O,fechaCumplimiento:G,estado:se}=i;if(!Q||!D||!I||!O||!G){a("Todos los campos son obligatorios.");return}try{l?await sI(l,i):await yX(i),await _(),k()}catch(J){console.error("Error al guardar acción:",J),a("Error al guardar la acción en la nube.")}},[i,l,_,k]),M=ee.useCallback(B=>{window.scrollTo({top:0,behavior:"smooth"}),u(B.id),o(B)},[]),j=ee.useCallback(async B=>{if(window.confirm("¿Está seguro de que desea eliminar esta acción?"))try{await wX(B),await _()}catch(Q){console.error("Error al eliminar acción:",Q),a("No se pudo eliminar la acción en la nube.")}},[_]),L=ee.useCallback(async B=>{try{const Q=t.find(D=>D.id===B);if(Q){const I=(Xp.indexOf(Q.estado)+1)%Xp.length,O=Xp[I];await sI(B,{estado:O}),await _()}}catch(Q){console.error("Error al cambiar estado:",Q),a("No se pudo cambiar el estado de la acción en la nube.")}},[t,_]),C=ee.useMemo(()=>t.filter(B=>{const Q=d===""||B.responsable.toLowerCase().includes(d.toLowerCase())||B.descripcion.toLowerCase().includes(d.toLowerCase()),D=m===""||B.area===m,I=b===""||B.estado===b;return Q&&D&&I}),[t,d,m,b]),E="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seguimiento de Acciones Pedagógicas"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:l?"Editando acción existente.":"Registre una nueva acción de seguimiento."}),r&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando acciones desde la nube..."}),s&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),c.jsxs("form",{onSubmit:R,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaRegistro",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Registro"}),c.jsx("input",{type:"date",name:"fechaRegistro",value:i.fechaRegistro,onChange:N,className:E})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),c.jsx("input",{type:"text",name:"responsable",value:i.responsable,onChange:N,placeholder:"Nombre del responsable",className:E})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"area",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Área Vinculada"}),c.jsxs("select",{name:"area",value:i.area,onChange:N,className:E,children:[c.jsx("option",{value:"",children:"Seleccione un área"}),Y3.map(B=>c.jsx("option",{value:B,children:B},B))]})]}),c.jsxs("div",{className:"lg:col-span-3",children:[c.jsx("label",{htmlFor:"descripcion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Descripción de la Acción"}),c.jsx("textarea",{name:"descripcion",value:i.descripcion,onChange:N,rows:3,placeholder:"Detalle de la acción a realizar...",className:E})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaCumplimiento",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Cumplimiento"}),c.jsx("input",{type:"date",name:"fechaCumplimiento",value:i.fechaCumplimiento,onChange:N,className:E})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"estado",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado de Avance"}),c.jsx("select",{name:"estado",value:i.estado,onChange:N,className:E,children:Xp.map(B=>c.jsx("option",{value:B,children:B},B))})]})]}),c.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4",children:[l&&c.jsx("button",{type:"button",onClick:k,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?"Actualizar Acción":"Registrar Acción"})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Tabla de Seguimiento"}),!r&&t.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-4",children:"No hay acciones pedagógicas registradas en la nube."}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[c.jsx("input",{type:"text",placeholder:"Buscar por responsable o palabra clave...",value:d,onChange:B=>h(B.target.value),className:E+" md:col-span-1"}),c.jsxs("select",{value:m,onChange:B=>g(B.target.value),className:E,children:[c.jsx("option",{value:"",children:"Filtrar por Área"}),Y3.map(B=>c.jsx("option",{value:B,children:B},B))]}),c.jsxs("select",{value:b,onChange:B=>y(B.target.value),className:E,children:[c.jsx("option",{value:"",children:"Filtrar por Estado"}),Xp.map(B=>c.jsx("option",{value:B,children:B},B))]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Responsable"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Área"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Descripción"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fechas"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&C.length>0?C.map(B=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:B.responsable}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:B.area}),c.jsx("td",{className:"px-4 py-4 text-sm text-slate-600 dark:text-slate-300 max-w-sm whitespace-normal",children:B.descripcion}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:c.jsxs("div",{className:"flex flex-col",children:[c.jsxs("span",{children:["Reg: ",B.fechaRegistro]}),c.jsxs("span",{className:"font-semibold",children:["Comp: ",B.fechaCumplimiento]})]})}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm",children:c.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${bX[B.estado]}`,children:B.estado})}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[c.jsx("button",{onClick:()=>L(B.id),title:"Cambiar Estado",className:"text-blue-600 hover:text-blue-800 p-1 rounded-full hover:bg-blue-100 dark:hover:bg-blue-900/40",children:"🔁"}),c.jsx("button",{onClick:()=>M(B),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),c.jsx("button",{onClick:()=>j(B.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},B.id)):!r&&c.jsx("tr",{children:c.jsx("td",{colSpan:6,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No se encontraron acciones con los filtros actuales."})})})]})})]})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let EX,_X;function SX(){return{geminiUrl:EX,vertexUrl:_X}}function TX(t,e,r,n){var s,a;if(!(t!=null&&t.baseUrl)){const i=SX();return e?(s=i.vertexUrl)!==null&&s!==void 0?s:r:(a=i.geminiUrl)!==null&&a!==void 0?a:n}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zh{}function ar(t,e){const r=/\{([^}]+)\}/g;return t.replace(r,(n,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const a=e[s];return a!=null?String(a):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function v(t,e,r){for(let a=0;a<e.length-1;a++){const i=e[a];if(i.endsWith("[]")){const o=i.slice(0,-2);if(!(o in t))if(Array.isArray(r))t[o]=Array.from({length:r.length},()=>({}));else throw new Error(`Value must be a list given an array path ${i}`);if(Array.isArray(t[o])){const l=t[o];if(Array.isArray(r))for(let u=0;u<l.length;u++){const d=l[u];v(d,e.slice(a+1),r[u])}else for(const u of l)v(u,e.slice(a+1),r)}return}else if(i.endsWith("[0]")){const o=i.slice(0,-3);o in t||(t[o]=[{}]);const l=t[o];v(l[0],e.slice(a+1),r);return}(!t[i]||typeof t[i]!="object")&&(t[i]={}),t=t[i]}const n=e[e.length-1],s=t[n];if(s!==void 0){if(!r||typeof r=="object"&&Object.keys(r).length===0||r===s)return;if(typeof s=="object"&&typeof r=="object"&&s!==null&&r!==null)Object.assign(s,r);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else t[n]=r}function x(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return;const n=e[r];if(n.endsWith("[]")){const s=n.slice(0,-2);if(s in t){const a=t[s];return Array.isArray(a)?a.map(i=>x(i,e.slice(r+1))):void 0}else return}else t=t[n]}return t}catch(r){if(r instanceof TypeError)return;throw r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function X_(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var iI;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(iI||(iI={}));var oI;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(oI||(oI={}));var pn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(pn||(pn={}));var lI;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(lI||(lI={}));var cI;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(cI||(cI={}));var uI;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(uI||(uI={}));var AI;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(AI||(AI={}));var dI;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(dI||(dI={}));var fI;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(fI||(fI={}));var hI;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(hI||(hI={}));var mI;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(mI||(mI={}));var pI;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(pI||(pI={}));var gI;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(gI||(gI={}));var xI;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(xI||(xI={}));var vI;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(vI||(vI={}));var yI;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(yI||(yI={}));var y2;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(y2||(y2={}));var wI;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(wI||(wI={}));var J_;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(J_||(J_={}));var bI;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(bI||(bI={}));var CI;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(CI||(CI={}));var EI;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(EI||(EI={}));var _I;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(_I||(_I={}));var SI;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(SI||(SI={}));var TI;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(TI||(TI={}));var NI;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(NI||(NI={}));var BI;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(BI||(BI={}));var kI;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(kI||(kI={}));var II;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(II||(II={}));var FI;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(FI||(FI={}));var DI;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(DI||(DI={}));var RI;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(RI||(RI={}));var LI;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(LI||(LI={}));var UI;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(UI||(UI={}));var MI;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(MI||(MI={}));var PI;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(PI||(PI={}));var jI;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(jI||(jI={}));var OI;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(OI||(OI={}));var QI;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(QI||(QI={}));var HI;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(HI||(HI={}));var VI;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(VI||(VI={}));var am;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(am||(am={}));class Z_{constructor(e){const r={};for(const n of e.headers.entries())r[n[0]]=n[1];this.headers=r,this.responseInternal=e}json(){return this.responseInternal.json()}}class Jp{get text(){var e,r,n,s,a,i,o,l;if(((s=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",d=!1;const h=[];for(const m of(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)!==null&&l!==void 0?l:[]){for(const[g,b]of Object.entries(m))g!=="text"&&g!=="thought"&&(b!==null||b!==void 0)&&h.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;d=!0,u+=m.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?u:void 0}get data(){var e,r,n,s,a,i,o,l;if(((s=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const d=[];for(const h of(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)!==null&&l!==void 0?l:[]){for(const[m,g]of Object.entries(h))m!=="inlineData"&&(g!==null||g!==void 0)&&d.push(m);h.inlineData&&typeof h.inlineData.data=="string"&&(u+=atob(h.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,r,n,s,a,i,o,l;if(((s=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,r,n,s,a,i,o,l,u;if(((s=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,r,n,s,a,i,o,l,u;if(((s=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.output}}class GI{}class zI{}class NX{}class BX{}class qI{}class KI{}class $I{}class kX{}class WI{}class YI{}class XI{}class JI{}class IX{}class FX{}class DX{}class ZI{}class RX{get text(){var e,r,n;let s="",a=!1;const i=[];for(const o of(n=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&n!==void 0?n:[]){for(const[l,u]of Object.entries(o))l!=="text"&&l!=="thought"&&u!==null&&i.push(l);if(typeof o.text=="string"){if(typeof o.thought=="boolean"&&o.thought)continue;a=!0,s+=o.text}}return i.length>0&&console.warn(`there are non-text parts ${i} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?s:void 0}get data(){var e,r,n;let s="";const a=[];for(const i of(n=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&n!==void 0?n:[]){for(const[o,l]of Object.entries(i))o!=="inlineData"&&l!==null&&a.push(o);i.inlineData&&typeof i.inlineData.data=="string"&&(s+=atob(i.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class w2{_fromAPIResponse({apiResponse:e,isVertexAI:r}){const n=new w2;if(n.name=e.name,n.metadata=e.metadata,n.done=e.done,n.error=e.error,r){const s=e.response;if(s){const a=new WI,i=s.videos;a.generatedVideos=i==null?void 0:i.map(o=>({video:{uri:o.gcsUri,videoBytes:o.bytesBase64Encoded?X_(o.bytesBase64Encoded):void 0,mimeType:o.mimeType}})),a.raiMediaFilteredCount=s.raiMediaFilteredCount,a.raiMediaFilteredReasons=s.raiMediaFilteredReasons,n.response=a}}else{const s=e.response;if(s){const a=new WI,i=s.generateVideoResponse,o=i==null?void 0:i.generatedSamples;a.generatedVideos=o==null?void 0:o.map(l=>{const u=l.video;return{video:{uri:u==null?void 0:u.uri,videoBytes:u!=null&&u.encodedVideo?X_(u==null?void 0:u.encodedVideo):void 0,mimeType:l.encoding}}}),a.raiMediaFilteredCount=i==null?void 0:i.raiMediaFilteredCount,a.raiMediaFilteredReasons=i==null?void 0:i.raiMediaFilteredReasons,n.response=a}}return n}}class LX{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $n(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const r=e.split("/",2);return`publishers/${r[0]}/models/${r[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function pM(t,e){const r=$n(t,e);return r?r.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}`:r.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${r}`:r:""}function gM(t){return Array.isArray(t)?t.map(e=>b2(e)):[b2(t)]}function b2(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function xM(t){const e=b2(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function vM(t){const e=b2(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function eF(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function yM(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>eF(e)):[eF(t)]}function eS(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function tF(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function rF(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Gi(t){if(t==null)throw new Error("ContentUnion is required");return eS(t)?t:{role:"user",parts:yM(t)}}function wM(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(r=>{const n=Gi(r);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(t.isVertexAI()){const r=Gi(e);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]}return Array.isArray(e)?e.map(r=>Gi(r)):[Gi(e)]}function ql(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(tF(t)||rF(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Gi(t)]}const e=[],r=[],n=eS(t[0]);for(const s of t){const a=eS(s);if(a!=n)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(s);else{if(tF(s)||rF(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");r.push(s)}}return n||e.push({role:"user",parts:yM(r)}),e}function UX(t,e){t.includes("null")&&(e.nullable=!0);const r=t.filter(n=>n!=="null");if(r.length===1)e.type=Object.values(pn).includes(r[0].toUpperCase())?r[0].toUpperCase():pn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const n of r)e.anyOf.push({type:Object.values(pn).includes(n.toUpperCase())?n.toUpperCase():pn.TYPE_UNSPECIFIED})}}function hm(t){const e={},r=["items"],n=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&UX(t.type,e);for(const[i,o]of Object.entries(t))if(o!=null)if(i=="type"){if(o==="null")throw new Error("type: null can not be the only possible type for the field.");if(o instanceof Array)continue;e.type=Object.values(pn).includes(o.toUpperCase())?o.toUpperCase():pn.TYPE_UNSPECIFIED}else if(r.includes(i))e[i]=hm(o);else if(n.includes(i)){const l=[];for(const u of o){if(u.type=="null"){e.nullable=!0;continue}l.push(hm(u))}e[i]=l}else if(s.includes(i)){const l={};for(const[u,d]of Object.entries(o))l[u]=hm(d);e[i]=l}else{if(i==="additionalProperties")continue;e[i]=o}return e}function N4(t){return hm(t)}function B4(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function k4(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function rp(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=hm(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=hm(e.response));return t}function np(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const r of t)e.push(r);return e}function MX(t,e,r,n=1){const s=!e.startsWith(`${r}/`)&&e.split("/").length===n;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${r}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}/${e}`:e:s?`${r}/${e}`:e}function zA(t,e){if(typeof e!="string")throw new Error("name must be a string");return MX(t,e,"cachedContents")}function bM(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function qh(t){return X_(t)}function PX(t){return t!=null&&typeof t=="object"&&"name"in t}function jX(t){return t!=null&&typeof t=="object"&&"video"in t}function OX(t){return t!=null&&typeof t=="object"&&"uri"in t}function CM(t){var e;let r;if(PX(t)&&(r=t.name),!(OX(t)&&(r=t.uri,r===void 0))&&!(jX(t)&&(r=(e=t.video)===null||e===void 0?void 0:e.uri,r===void 0))){if(typeof t=="string"&&(r=t),r===void 0)throw new Error("Could not extract file name from the provided input.");if(r.startsWith("https://")){const s=r.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${r}`);r=s[0]}else r.startsWith("files/")&&(r=r.split("files/")[1]);return r}}function EM(t,e){let r;return t.isVertexAI()?r=e?"publishers/google/models":"models":r=e?"models":"tunedModels",r}function _M(t){for(const e of["models","tunedModels","publisherModels"])if(QX(t,e))return t[e];return[]}function QX(t,e){return t!==null&&typeof t=="object"&&e in t}function HX(t,e={}){const r=t,n={name:r.name,description:r.description,parametersJsonSchema:r.inputSchema};return e.behavior&&(n.behavior=e.behavior),{functionDeclarations:[n]}}function VX(t,e={}){const r=[],n=new Set;for(const s of t){const a=s.name;if(n.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);n.add(a);const i=HX(s,e);i.functionDeclarations&&r.push(...i.functionDeclarations)}return{functionDeclarations:r}}function SM(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function GX(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function sp(t,e){const r=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(r))return r.split("/").pop();throw new Error(`Invalid batch job name: ${r}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(r))return r.split("/").pop();if(/^\d+$/.test(r))return r;throw new Error(`Invalid batch job name: ${r}.`)}function TM(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zX(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function qX(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function KX(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function $X(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],zX(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],qX(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],KX(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function NM(t){const e={},r=x(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>$X(a))),v(e,["parts"],s)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function WX(t){const e={},r=x(t,["anyOf"]);r!=null&&v(e,["anyOf"],r);const n=x(t,["default"]);n!=null&&v(e,["default"],n);const s=x(t,["description"]);s!=null&&v(e,["description"],s);const a=x(t,["enum"]);a!=null&&v(e,["enum"],a);const i=x(t,["example"]);i!=null&&v(e,["example"],i);const o=x(t,["format"]);o!=null&&v(e,["format"],o);const l=x(t,["items"]);l!=null&&v(e,["items"],l);const u=x(t,["maxItems"]);u!=null&&v(e,["maxItems"],u);const d=x(t,["maxLength"]);d!=null&&v(e,["maxLength"],d);const h=x(t,["maxProperties"]);h!=null&&v(e,["maxProperties"],h);const m=x(t,["maximum"]);m!=null&&v(e,["maximum"],m);const g=x(t,["minItems"]);g!=null&&v(e,["minItems"],g);const b=x(t,["minLength"]);b!=null&&v(e,["minLength"],b);const y=x(t,["minProperties"]);y!=null&&v(e,["minProperties"],y);const _=x(t,["minimum"]);_!=null&&v(e,["minimum"],_);const N=x(t,["nullable"]);N!=null&&v(e,["nullable"],N);const k=x(t,["pattern"]);k!=null&&v(e,["pattern"],k);const R=x(t,["properties"]);R!=null&&v(e,["properties"],R);const M=x(t,["propertyOrdering"]);M!=null&&v(e,["propertyOrdering"],M);const j=x(t,["required"]);j!=null&&v(e,["required"],j);const L=x(t,["title"]);L!=null&&v(e,["title"],L);const C=x(t,["type"]);return C!=null&&v(e,["type"],C),e}function YX(t){const e={};if(x(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=x(t,["category"]);r!=null&&v(e,["category"],r);const n=x(t,["threshold"]);return n!=null&&v(e,["threshold"],n),e}function XX(t){const e={},r=x(t,["behavior"]);r!=null&&v(e,["behavior"],r);const n=x(t,["description"]);n!=null&&v(e,["description"],n);const s=x(t,["name"]);s!=null&&v(e,["name"],s);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function JX(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function ZX(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],JX(r)),e}function eJ(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function tJ(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],eJ(r)),e}function rJ(){return{}}function nJ(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>XX(u))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["googleSearch"]);n!=null&&v(e,["googleSearch"],ZX(n));const s=x(t,["googleSearchRetrieval"]);if(s!=null&&v(e,["googleSearchRetrieval"],tJ(s)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],rJ());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function sJ(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["allowedFunctionNames"]);return n!=null&&v(e,["allowedFunctionNames"],n),e}function aJ(t){const e={},r=x(t,["latitude"]);r!=null&&v(e,["latitude"],r);const n=x(t,["longitude"]);return n!=null&&v(e,["longitude"],n),e}function iJ(t){const e={},r=x(t,["latLng"]);r!=null&&v(e,["latLng"],aJ(r));const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function oJ(t){const e={},r=x(t,["functionCallingConfig"]);r!=null&&v(e,["functionCallingConfig"],sJ(r));const n=x(t,["retrievalConfig"]);return n!=null&&v(e,["retrievalConfig"],iJ(n)),e}function lJ(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function BM(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],lJ(r)),e}function cJ(t){const e={},r=x(t,["speaker"]);r!=null&&v(e,["speaker"],r);const n=x(t,["voiceConfig"]);return n!=null&&v(e,["voiceConfig"],BM(n)),e}function uJ(t){const e={},r=x(t,["speakerVoiceConfigs"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>cJ(s))),v(e,["speakerVoiceConfigs"],n)}return e}function AJ(t){const e={},r=x(t,["voiceConfig"]);r!=null&&v(e,["voiceConfig"],BM(r));const n=x(t,["multiSpeakerVoiceConfig"]);n!=null&&v(e,["multiSpeakerVoiceConfig"],uJ(n));const s=x(t,["languageCode"]);return s!=null&&v(e,["languageCode"],s),e}function dJ(t){const e={},r=x(t,["includeThoughts"]);r!=null&&v(e,["includeThoughts"],r);const n=x(t,["thinkingBudget"]);return n!=null&&v(e,["thinkingBudget"],n),e}function fJ(t,e,r){const n={},s=x(e,["systemInstruction"]);r!==void 0&&s!=null&&v(r,["systemInstruction"],NM(Gi(s)));const a=x(e,["temperature"]);a!=null&&v(n,["temperature"],a);const i=x(e,["topP"]);i!=null&&v(n,["topP"],i);const o=x(e,["topK"]);o!=null&&v(n,["topK"],o);const l=x(e,["candidateCount"]);l!=null&&v(n,["candidateCount"],l);const u=x(e,["maxOutputTokens"]);u!=null&&v(n,["maxOutputTokens"],u);const d=x(e,["stopSequences"]);d!=null&&v(n,["stopSequences"],d);const h=x(e,["responseLogprobs"]);h!=null&&v(n,["responseLogprobs"],h);const m=x(e,["logprobs"]);m!=null&&v(n,["logprobs"],m);const g=x(e,["presencePenalty"]);g!=null&&v(n,["presencePenalty"],g);const b=x(e,["frequencyPenalty"]);b!=null&&v(n,["frequencyPenalty"],b);const y=x(e,["seed"]);y!=null&&v(n,["seed"],y);const _=x(e,["responseMimeType"]);_!=null&&v(n,["responseMimeType"],_);const N=x(e,["responseSchema"]);N!=null&&v(n,["responseSchema"],WX(N4(N)));const k=x(e,["responseJsonSchema"]);if(k!=null&&v(n,["responseJsonSchema"],k),x(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(x(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const R=x(e,["safetySettings"]);if(r!==void 0&&R!=null){let D=R;Array.isArray(D)&&(D=D.map(I=>YX(I))),v(r,["safetySettings"],D)}const M=x(e,["tools"]);if(r!==void 0&&M!=null){let D=np(M);Array.isArray(D)&&(D=D.map(I=>nJ(rp(I)))),v(r,["tools"],D)}const j=x(e,["toolConfig"]);if(r!==void 0&&j!=null&&v(r,["toolConfig"],oJ(j)),x(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const L=x(e,["cachedContent"]);r!==void 0&&L!=null&&v(r,["cachedContent"],zA(t,L));const C=x(e,["responseModalities"]);C!=null&&v(n,["responseModalities"],C);const E=x(e,["mediaResolution"]);E!=null&&v(n,["mediaResolution"],E);const B=x(e,["speechConfig"]);if(B!=null&&v(n,["speechConfig"],AJ(B4(B))),x(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Q=x(e,["thinkingConfig"]);return Q!=null&&v(n,["thinkingConfig"],dJ(Q)),n}function hJ(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["request","model"],$n(t,n));const s=x(e,["contents"]);if(s!=null){let i=ql(s);Array.isArray(i)&&(i=i.map(o=>NM(o))),v(r,["request","contents"],i)}const a=x(e,["config"]);return a!=null&&v(r,["request","generationConfig"],fJ(t,a,r)),r}function mJ(t,e){const r={};if(x(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(x(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(x(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const n=x(e,["fileName"]);n!=null&&v(r,["fileName"],n);const s=x(e,["inlinedRequests"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>hJ(t,i))),v(r,["requests","requests"],a)}return r}function pJ(t,e){const r={},n=x(t,["displayName"]);if(e!==void 0&&n!=null&&v(e,["batch","displayName"],n),x(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return r}function gJ(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const s=x(e,["src"]);s!=null&&v(r,["batch","inputConfig"],mJ(t,SM(t,s)));const a=x(e,["config"]);return a!=null&&v(r,["config"],pJ(a,r)),r}function xJ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],sp(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],s),r}function vJ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],sp(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],s),r}function yJ(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const s=x(t,["pageToken"]);if(e!==void 0&&s!=null&&v(e,["_query","pageToken"],s),x(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return r}function wJ(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],yJ(r,e)),e}function bJ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],sp(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],s),r}function CJ(t){const e={},r=x(t,["format"]);r!=null&&v(e,["instancesFormat"],r);const n=x(t,["gcsUri"]);n!=null&&v(e,["gcsSource","uris"],n);const s=x(t,["bigqueryUri"]);if(s!=null&&v(e,["bigquerySource","inputUri"],s),x(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(x(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function EJ(t){const e={},r=x(t,["format"]);r!=null&&v(e,["predictionsFormat"],r);const n=x(t,["gcsUri"]);n!=null&&v(e,["gcsDestination","outputUriPrefix"],n);const s=x(t,["bigqueryUri"]);if(s!=null&&v(e,["bigqueryDestination","outputUri"],s),x(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(x(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function _J(t,e){const r={},n=x(t,["displayName"]);e!==void 0&&n!=null&&v(e,["displayName"],n);const s=x(t,["dest"]);return e!==void 0&&s!=null&&v(e,["outputConfig"],EJ(GX(s))),r}function SJ(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["model"],$n(t,n));const s=x(e,["src"]);s!=null&&v(r,["inputConfig"],CJ(SM(t,s)));const a=x(e,["config"]);return a!=null&&v(r,["config"],_J(a,r)),r}function TJ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],sp(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],s),r}function NJ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],sp(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],s),r}function BJ(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const s=x(t,["pageToken"]);e!==void 0&&s!=null&&v(e,["_query","pageToken"],s);const a=x(t,["filter"]);return e!==void 0&&a!=null&&v(e,["_query","filter"],a),r}function kJ(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],BJ(r,e)),e}function IJ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],sp(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],s),r}function FJ(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function DJ(t){const e={},r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function RJ(t){const e={},r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function LJ(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],FJ(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],DJ(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],RJ(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function UJ(t){const e={},r=x(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>LJ(a))),v(e,["parts"],s)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function MJ(t){const e={},r=x(t,["citationSources"]);return r!=null&&v(e,["citations"],r),e}function PJ(t){const e={},r=x(t,["retrievedUrl"]);r!=null&&v(e,["retrievedUrl"],r);const n=x(t,["urlRetrievalStatus"]);return n!=null&&v(e,["urlRetrievalStatus"],n),e}function jJ(t){const e={},r=x(t,["urlMetadata"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>PJ(s))),v(e,["urlMetadata"],n)}return e}function OJ(t){const e={},r=x(t,["content"]);r!=null&&v(e,["content"],UJ(r));const n=x(t,["citationMetadata"]);n!=null&&v(e,["citationMetadata"],MJ(n));const s=x(t,["tokenCount"]);s!=null&&v(e,["tokenCount"],s);const a=x(t,["finishReason"]);a!=null&&v(e,["finishReason"],a);const i=x(t,["urlContextMetadata"]);i!=null&&v(e,["urlContextMetadata"],jJ(i));const o=x(t,["avgLogprobs"]);o!=null&&v(e,["avgLogprobs"],o);const l=x(t,["groundingMetadata"]);l!=null&&v(e,["groundingMetadata"],l);const u=x(t,["index"]);u!=null&&v(e,["index"],u);const d=x(t,["logprobsResult"]);d!=null&&v(e,["logprobsResult"],d);const h=x(t,["safetyRatings"]);return h!=null&&v(e,["safetyRatings"],h),e}function QJ(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["candidates"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>OJ(l))),v(e,["candidates"],o)}const s=x(t,["modelVersion"]);s!=null&&v(e,["modelVersion"],s);const a=x(t,["promptFeedback"]);a!=null&&v(e,["promptFeedback"],a);const i=x(t,["usageMetadata"]);return i!=null&&v(e,["usageMetadata"],i),e}function kM(t){const e={},r=x(t,["details"]);r!=null&&v(e,["details"],r);const n=x(t,["code"]);n!=null&&v(e,["code"],n);const s=x(t,["message"]);return s!=null&&v(e,["message"],s),e}function HJ(t){const e={},r=x(t,["response"]);r!=null&&v(e,["response"],QJ(r));const n=x(t,["error"]);return n!=null&&v(e,["error"],kM(n)),e}function VJ(t){const e={},r=x(t,["responsesFile"]);r!=null&&v(e,["fileName"],r);const n=x(t,["inlinedResponses","inlinedResponses"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>HJ(a))),v(e,["inlinedResponses"],s)}return e}function tS(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["metadata","displayName"]);n!=null&&v(e,["displayName"],n);const s=x(t,["metadata","state"]);s!=null&&v(e,["state"],TM(s));const a=x(t,["metadata","createTime"]);a!=null&&v(e,["createTime"],a);const i=x(t,["metadata","endTime"]);i!=null&&v(e,["endTime"],i);const o=x(t,["metadata","updateTime"]);o!=null&&v(e,["updateTime"],o);const l=x(t,["metadata","model"]);l!=null&&v(e,["model"],l);const u=x(t,["metadata","output"]);return u!=null&&v(e,["dest"],VJ(u)),e}function GJ(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const s=x(t,["operations"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>tS(i))),v(e,["batchJobs"],a)}return e}function zJ(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["done"]);n!=null&&v(e,["done"],n);const s=x(t,["error"]);return s!=null&&v(e,["error"],kM(s)),e}function IM(t){const e={},r=x(t,["details"]);r!=null&&v(e,["details"],r);const n=x(t,["code"]);n!=null&&v(e,["code"],n);const s=x(t,["message"]);return s!=null&&v(e,["message"],s),e}function qJ(t){const e={},r=x(t,["instancesFormat"]);r!=null&&v(e,["format"],r);const n=x(t,["gcsSource","uris"]);n!=null&&v(e,["gcsUri"],n);const s=x(t,["bigquerySource","inputUri"]);return s!=null&&v(e,["bigqueryUri"],s),e}function KJ(t){const e={},r=x(t,["predictionsFormat"]);r!=null&&v(e,["format"],r);const n=x(t,["gcsDestination","outputUriPrefix"]);n!=null&&v(e,["gcsUri"],n);const s=x(t,["bigqueryDestination","outputUri"]);return s!=null&&v(e,["bigqueryUri"],s),e}function rS(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const s=x(t,["state"]);s!=null&&v(e,["state"],TM(s));const a=x(t,["error"]);a!=null&&v(e,["error"],IM(a));const i=x(t,["createTime"]);i!=null&&v(e,["createTime"],i);const o=x(t,["startTime"]);o!=null&&v(e,["startTime"],o);const l=x(t,["endTime"]);l!=null&&v(e,["endTime"],l);const u=x(t,["updateTime"]);u!=null&&v(e,["updateTime"],u);const d=x(t,["model"]);d!=null&&v(e,["model"],d);const h=x(t,["inputConfig"]);h!=null&&v(e,["src"],qJ(h));const m=x(t,["outputConfig"]);return m!=null&&v(e,["dest"],KJ(m)),e}function $J(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const s=x(t,["batchPredictionJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>rS(i))),v(e,["batchJobs"],a)}return e}function WJ(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["done"]);n!=null&&v(e,["done"],n);const s=x(t,["error"]);return s!=null&&v(e,["error"],IM(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ih;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Ih||(Ih={}));class o1{constructor(e,r,n,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=r,this.init(e,n,s)}init(e,r,n){var s,a;this.nameInternal=e,this.pageInternal=r[this.nameInternal]||[],this.sdkHttpResponseInternal=r==null?void 0:r.sdkHttpResponse,this.idxInternal=0;let i={config:{}};!n||Object.keys(n).length===0?i={config:{}}:typeof n=="object"?i=Object.assign({},n):i=n,i.config&&(i.config.pageToken=r.nextPageToken),this.paramsInternal=i,this.pageInternalSize=(a=(s=i.config)===null||s===void 0?void 0:s.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YJ extends zh{constructor(e){super(),this.apiClient=e,this.create=async r=>{if(this.apiClient.isVertexAI()){const s=Date.now().toString();if(Array.isArray(r.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(r.config=r.config||{},r.config.displayName===void 0&&(r.config.displayName="genaiBatchJob_${timestampStr}"),r.config.dest===void 0&&typeof r.src=="string")if(r.src.startsWith("gs://")&&r.src.endsWith(".jsonl"))r.config.dest=`${r.src.slice(0,-6)}/dest`;else if(r.src.startsWith("bq://"))r.config.dest=`${r.src}_dest_${s}`;else throw new Error("Unsupported source:"+r.src)}return await this.createInternal(r)},this.list=async(r={})=>new o1(Ih.PAGED_ITEM_BATCH_JOBS,n=>this.listInternal(n),await this.listInternal(r),r)}async createInternal(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=SJ(this.apiClient,e);return o=ar("batchPredictionJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>rS(d))}else{const u=gJ(this.apiClient,e);return o=ar("{model}:batchGenerateContent",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>tS(d))}}async get(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=TJ(this.apiClient,e);return o=ar("batchPredictionJobs/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>rS(d))}else{const u=xJ(this.apiClient,e);return o=ar("batches/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>tS(d))}}async cancel(e){var r,n,s,a;let i="",o={};if(this.apiClient.isVertexAI()){const l=NJ(this.apiClient,e);i=ar("batchPredictionJobs/{name}:cancel",l._url),o=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}else{const l=vJ(this.apiClient,e);i=ar("batches/{name}:cancel",l._url),o=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=kJ(e);return o=ar("batchPredictionJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=$J(d),m=new ZI;return Object.assign(m,h),m})}else{const u=wJ(e);return o=ar("batches",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=GJ(d),m=new ZI;return Object.assign(m,h),m})}}async delete(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=IJ(this.apiClient,e);return o=ar("batchPredictionJobs/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>WJ(d))}else{const u=bJ(this.apiClient,e);return o=ar("batches/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>zJ(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XJ(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function JJ(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function ZJ(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function eZ(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],XJ(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],JJ(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],ZJ(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function nF(t){const e={},r=x(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>eZ(a))),v(e,["parts"],s)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function tZ(t){const e={},r=x(t,["behavior"]);r!=null&&v(e,["behavior"],r);const n=x(t,["description"]);n!=null&&v(e,["description"],n);const s=x(t,["name"]);s!=null&&v(e,["name"],s);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function rZ(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function nZ(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],rZ(r)),e}function sZ(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function aZ(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],sZ(r)),e}function iZ(){return{}}function oZ(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>tZ(u))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["googleSearch"]);n!=null&&v(e,["googleSearch"],nZ(n));const s=x(t,["googleSearchRetrieval"]);if(s!=null&&v(e,["googleSearchRetrieval"],aZ(s)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],iZ());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function lZ(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["allowedFunctionNames"]);return n!=null&&v(e,["allowedFunctionNames"],n),e}function cZ(t){const e={},r=x(t,["latitude"]);r!=null&&v(e,["latitude"],r);const n=x(t,["longitude"]);return n!=null&&v(e,["longitude"],n),e}function uZ(t){const e={},r=x(t,["latLng"]);r!=null&&v(e,["latLng"],cZ(r));const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function AZ(t){const e={},r=x(t,["functionCallingConfig"]);r!=null&&v(e,["functionCallingConfig"],lZ(r));const n=x(t,["retrievalConfig"]);return n!=null&&v(e,["retrievalConfig"],uZ(n)),e}function dZ(t,e){const r={},n=x(t,["ttl"]);e!==void 0&&n!=null&&v(e,["ttl"],n);const s=x(t,["expireTime"]);e!==void 0&&s!=null&&v(e,["expireTime"],s);const a=x(t,["displayName"]);e!==void 0&&a!=null&&v(e,["displayName"],a);const i=x(t,["contents"]);if(e!==void 0&&i!=null){let d=ql(i);Array.isArray(d)&&(d=d.map(h=>nF(h))),v(e,["contents"],d)}const o=x(t,["systemInstruction"]);e!==void 0&&o!=null&&v(e,["systemInstruction"],nF(Gi(o)));const l=x(t,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>oZ(h))),v(e,["tools"],d)}const u=x(t,["toolConfig"]);if(e!==void 0&&u!=null&&v(e,["toolConfig"],AZ(u)),x(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return r}function fZ(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["model"],pM(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],dZ(s,r)),r}function hZ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],zA(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],s),r}function mZ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],zA(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],s),r}function pZ(t,e){const r={},n=x(t,["ttl"]);e!==void 0&&n!=null&&v(e,["ttl"],n);const s=x(t,["expireTime"]);return e!==void 0&&s!=null&&v(e,["expireTime"],s),r}function gZ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],zA(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],pZ(s,r)),r}function xZ(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const s=x(t,["pageToken"]);return e!==void 0&&s!=null&&v(e,["_query","pageToken"],s),r}function vZ(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],xZ(r,e)),e}function yZ(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function wZ(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["data"]);n!=null&&v(e,["data"],n);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function bZ(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function CZ(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],yZ(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],wZ(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],bZ(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function sF(t){const e={},r=x(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>CZ(a))),v(e,["parts"],s)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function EZ(t){const e={};if(x(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=x(t,["description"]);r!=null&&v(e,["description"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const a=x(t,["parametersJsonSchema"]);a!=null&&v(e,["parametersJsonSchema"],a);const i=x(t,["response"]);i!=null&&v(e,["response"],i);const o=x(t,["responseJsonSchema"]);return o!=null&&v(e,["responseJsonSchema"],o),e}function _Z(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function SZ(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],_Z(r)),e}function TZ(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function NZ(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],TZ(r)),e}function BZ(){return{}}function kZ(t){const e={},r=x(t,["apiKeyString"]);return r!=null&&v(e,["apiKeyString"],r),e}function IZ(t){const e={},r=x(t,["apiKeyConfig"]);r!=null&&v(e,["apiKeyConfig"],kZ(r));const n=x(t,["authType"]);n!=null&&v(e,["authType"],n);const s=x(t,["googleServiceAccountConfig"]);s!=null&&v(e,["googleServiceAccountConfig"],s);const a=x(t,["httpBasicAuthConfig"]);a!=null&&v(e,["httpBasicAuthConfig"],a);const i=x(t,["oauthConfig"]);i!=null&&v(e,["oauthConfig"],i);const o=x(t,["oidcConfig"]);return o!=null&&v(e,["oidcConfig"],o),e}function FZ(t){const e={},r=x(t,["authConfig"]);return r!=null&&v(e,["authConfig"],IZ(r)),e}function DZ(){return{}}function RZ(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(m=>EZ(m))),v(e,["functionDeclarations"],h)}const n=x(t,["retrieval"]);n!=null&&v(e,["retrieval"],n);const s=x(t,["googleSearch"]);s!=null&&v(e,["googleSearch"],SZ(s));const a=x(t,["googleSearchRetrieval"]);a!=null&&v(e,["googleSearchRetrieval"],NZ(a)),x(t,["enterpriseWebSearch"])!=null&&v(e,["enterpriseWebSearch"],BZ());const o=x(t,["googleMaps"]);o!=null&&v(e,["googleMaps"],FZ(o)),x(t,["urlContext"])!=null&&v(e,["urlContext"],DZ());const u=x(t,["codeExecution"]);u!=null&&v(e,["codeExecution"],u);const d=x(t,["computerUse"]);return d!=null&&v(e,["computerUse"],d),e}function LZ(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["allowedFunctionNames"]);return n!=null&&v(e,["allowedFunctionNames"],n),e}function UZ(t){const e={},r=x(t,["latitude"]);r!=null&&v(e,["latitude"],r);const n=x(t,["longitude"]);return n!=null&&v(e,["longitude"],n),e}function MZ(t){const e={},r=x(t,["latLng"]);r!=null&&v(e,["latLng"],UZ(r));const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function PZ(t){const e={},r=x(t,["functionCallingConfig"]);r!=null&&v(e,["functionCallingConfig"],LZ(r));const n=x(t,["retrievalConfig"]);return n!=null&&v(e,["retrievalConfig"],MZ(n)),e}function jZ(t,e){const r={},n=x(t,["ttl"]);e!==void 0&&n!=null&&v(e,["ttl"],n);const s=x(t,["expireTime"]);e!==void 0&&s!=null&&v(e,["expireTime"],s);const a=x(t,["displayName"]);e!==void 0&&a!=null&&v(e,["displayName"],a);const i=x(t,["contents"]);if(e!==void 0&&i!=null){let h=ql(i);Array.isArray(h)&&(h=h.map(m=>sF(m))),v(e,["contents"],h)}const o=x(t,["systemInstruction"]);e!==void 0&&o!=null&&v(e,["systemInstruction"],sF(Gi(o)));const l=x(t,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(m=>RZ(m))),v(e,["tools"],h)}const u=x(t,["toolConfig"]);e!==void 0&&u!=null&&v(e,["toolConfig"],PZ(u));const d=x(t,["kmsKeyName"]);return e!==void 0&&d!=null&&v(e,["encryption_spec","kmsKeyName"],d),r}function OZ(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["model"],pM(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],jZ(s,r)),r}function QZ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],zA(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],s),r}function HZ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],zA(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],s),r}function VZ(t,e){const r={},n=x(t,["ttl"]);e!==void 0&&n!=null&&v(e,["ttl"],n);const s=x(t,["expireTime"]);return e!==void 0&&s!=null&&v(e,["expireTime"],s),r}function GZ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],zA(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],VZ(s,r)),r}function zZ(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const s=x(t,["pageToken"]);return e!==void 0&&s!=null&&v(e,["_query","pageToken"],s),r}function qZ(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],zZ(r,e)),e}function Uy(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const s=x(t,["model"]);s!=null&&v(e,["model"],s);const a=x(t,["createTime"]);a!=null&&v(e,["createTime"],a);const i=x(t,["updateTime"]);i!=null&&v(e,["updateTime"],i);const o=x(t,["expireTime"]);o!=null&&v(e,["expireTime"],o);const l=x(t,["usageMetadata"]);return l!=null&&v(e,["usageMetadata"],l),e}function KZ(){return{}}function $Z(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const s=x(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>Uy(i))),v(e,["cachedContents"],a)}return e}function My(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const s=x(t,["model"]);s!=null&&v(e,["model"],s);const a=x(t,["createTime"]);a!=null&&v(e,["createTime"],a);const i=x(t,["updateTime"]);i!=null&&v(e,["updateTime"],i);const o=x(t,["expireTime"]);o!=null&&v(e,["expireTime"],o);const l=x(t,["usageMetadata"]);return l!=null&&v(e,["usageMetadata"],l),e}function WZ(){return{}}function YZ(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const s=x(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>My(i))),v(e,["cachedContents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XZ extends zh{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new o1(Ih.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(r),r)}async create(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=OZ(this.apiClient,e);return o=ar("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>My(d))}else{const u=fZ(this.apiClient,e);return o=ar("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>Uy(d))}}async get(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=QZ(this.apiClient,e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>My(d))}else{const u=hZ(this.apiClient,e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>Uy(d))}}async delete(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=HZ(this.apiClient,e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(()=>{const d=WZ(),h=new XI;return Object.assign(h,d),h})}else{const u=mZ(this.apiClient,e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(()=>{const d=KZ(),h=new XI;return Object.assign(h,d),h})}}async update(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=GZ(this.apiClient,e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>My(d))}else{const u=gZ(this.apiClient,e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>Uy(d))}}async listInternal(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=qZ(e);return o=ar("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=YZ(d),m=new JI;return Object.assign(m,h),m})}else{const u=vZ(e);return o=ar("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=$Z(d),m=new JI;return Object.assign(m,h),m})}}}function aF(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function As(t){return this instanceof As?(this.v=t,this):new As(t)}function mm(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",i),s[Symbol.asyncIterator]=function(){return this},s;function i(g){return function(b){return Promise.resolve(b).then(g,h)}}function o(g,b){n[g]&&(s[g]=function(y){return new Promise(function(_,N){a.push([g,y,_,N])>1||l(g,y)})},b&&(s[g]=b(s[g])))}function l(g,b){try{u(n[g](b))}catch(y){m(a[0][3],y)}}function u(g){g.value instanceof As?Promise.resolve(g.value.v).then(d,h):m(a[0][2],g)}function d(g){l("next",g)}function h(g){l("throw",g)}function m(g,b){g(b),a.shift(),a.length&&l(a[0][0],a[0][1])}}function Og(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof aF=="function"?aF(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(a){r[a]=t[a]&&function(i){return new Promise(function(o,l){i=t[a](i),s(o,l,i.done,i.value)})}}function s(a,i,o,l){Promise.resolve(l).then(function(u){a({value:u,done:o})},i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JZ(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const r=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return r===void 0?!1:FM(r)}function FM(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function ZZ(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function iF(t){if(t===void 0||t.length===0)return[];const e=[],r=t.length;let n=0;for(;n<r;)if(t[n].role==="user")e.push(t[n]),n++;else{const s=[];let a=!0;for(;n<r&&t[n].role==="model";)s.push(t[n]),a&&!FM(t[n])&&(a=!1),n++;a?e.push(...s):e.pop()}return e}class eee{constructor(e,r){this.modelsModule=e,this.apiClient=r}create(e){return new tee(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class tee{constructor(e,r,n,s={},a=[]){this.apiClient=e,this.modelsModule=r,this.model=n,this.config=s,this.history=a,this.sendPromise=Promise.resolve(),ZZ(a)}async sendMessage(e){var r;await this.sendPromise;const n=Gi(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(r=e.config)!==null&&r!==void 0?r:this.config});return this.sendPromise=(async()=>{var a,i,o;const l=await s,u=(i=(a=l.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content,d=l.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let m=[];d!=null&&(m=(o=d.slice(h))!==null&&o!==void 0?o:[]);const g=u?[u]:[];this.recordHistory(n,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var r;await this.sendPromise;const n=Gi(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(r=e.config)!==null&&r!==void 0?r:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const a=await s;return this.processStreamResponse(a,n)}getHistory(e=!1){const r=e?iF(this.history):this.history;return structuredClone(r)}processStreamResponse(e,r){var n,s;return mm(this,arguments,function*(){var i,o,l,u;const d=[];try{for(var h=!0,m=Og(e),g;g=yield As(m.next()),i=g.done,!i;h=!0){u=g.value,h=!1;const b=u;if(JZ(b)){const y=(s=(n=b.candidates)===null||n===void 0?void 0:n[0])===null||s===void 0?void 0:s.content;y!==void 0&&d.push(y)}yield yield As(b)}}catch(b){o={error:b}}finally{try{!h&&!i&&(l=m.return)&&(yield As(l.call(m)))}finally{if(o)throw o.error}}this.recordHistory(r,d)})}recordHistory(e,r,n){let s=[];r.length>0&&r.every(a=>a.role!==void 0)?s=r:s.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...iF(n)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qw extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Qw.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ree(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const s=x(t,["pageToken"]);return e!==void 0&&s!=null&&v(e,["_query","pageToken"],s),r}function nee(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],ree(r,e)),e}function see(t){const e={},r=x(t,["details"]);r!=null&&v(e,["details"],r);const n=x(t,["message"]);n!=null&&v(e,["message"],n);const s=x(t,["code"]);return s!=null&&v(e,["code"],s),e}function aee(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const s=x(t,["mimeType"]);s!=null&&v(e,["mimeType"],s);const a=x(t,["sizeBytes"]);a!=null&&v(e,["sizeBytes"],a);const i=x(t,["createTime"]);i!=null&&v(e,["createTime"],i);const o=x(t,["expirationTime"]);o!=null&&v(e,["expirationTime"],o);const l=x(t,["updateTime"]);l!=null&&v(e,["updateTime"],l);const u=x(t,["sha256Hash"]);u!=null&&v(e,["sha256Hash"],u);const d=x(t,["uri"]);d!=null&&v(e,["uri"],d);const h=x(t,["downloadUri"]);h!=null&&v(e,["downloadUri"],h);const m=x(t,["state"]);m!=null&&v(e,["state"],m);const g=x(t,["source"]);g!=null&&v(e,["source"],g);const b=x(t,["videoMetadata"]);b!=null&&v(e,["videoMetadata"],b);const y=x(t,["error"]);return y!=null&&v(e,["error"],see(y)),e}function iee(t){const e={},r=x(t,["file"]);r!=null&&v(e,["file"],aee(r));const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function oee(t){const e={},r=x(t,["name"]);r!=null&&v(e,["_url","file"],CM(r));const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function lee(t){const e={},r=x(t,["name"]);r!=null&&v(e,["_url","file"],CM(r));const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function cee(t){const e={},r=x(t,["details"]);r!=null&&v(e,["details"],r);const n=x(t,["message"]);n!=null&&v(e,["message"],n);const s=x(t,["code"]);return s!=null&&v(e,["code"],s),e}function nS(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const s=x(t,["mimeType"]);s!=null&&v(e,["mimeType"],s);const a=x(t,["sizeBytes"]);a!=null&&v(e,["sizeBytes"],a);const i=x(t,["createTime"]);i!=null&&v(e,["createTime"],i);const o=x(t,["expirationTime"]);o!=null&&v(e,["expirationTime"],o);const l=x(t,["updateTime"]);l!=null&&v(e,["updateTime"],l);const u=x(t,["sha256Hash"]);u!=null&&v(e,["sha256Hash"],u);const d=x(t,["uri"]);d!=null&&v(e,["uri"],d);const h=x(t,["downloadUri"]);h!=null&&v(e,["downloadUri"],h);const m=x(t,["state"]);m!=null&&v(e,["state"],m);const g=x(t,["source"]);g!=null&&v(e,["source"],g);const b=x(t,["videoMetadata"]);b!=null&&v(e,["videoMetadata"],b);const y=x(t,["error"]);return y!=null&&v(e,["error"],cee(y)),e}function uee(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const s=x(t,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>nS(i))),v(e,["files"],a)}return e}function Aee(t){const e={},r=x(t,["sdkHttpResponse"]);return r!=null&&v(e,["sdkHttpResponse"],r),e}function dee(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fee extends zh{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new o1(Ih.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(r),r)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(r=>nS(r))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var r,n;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=nee(e);return a=ar("files",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const u=uee(l),d=new IX;return Object.assign(d,u),d})}}async createInternal(e){var r,n;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=iee(e);return a=ar("upload/v1beta/files",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),s.then(l=>{const u=Aee(l),d=new FX;return Object.assign(d,u),d})}}async get(e){var r,n;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=oee(e);return a=ar("files/{file}",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),s.then(l=>nS(l))}}async delete(e){var r,n;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=lee(e);return a=ar("files/{file}",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),s.then(()=>{const l=dee(),u=new DX;return Object.assign(u,l),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hee(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function DM(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],hee(r)),e}function mee(t){const e={},r=x(t,["speaker"]);r!=null&&v(e,["speaker"],r);const n=x(t,["voiceConfig"]);return n!=null&&v(e,["voiceConfig"],DM(n)),e}function pee(t){const e={},r=x(t,["speakerVoiceConfigs"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>mee(s))),v(e,["speakerVoiceConfigs"],n)}return e}function gee(t){const e={},r=x(t,["voiceConfig"]);r!=null&&v(e,["voiceConfig"],DM(r));const n=x(t,["multiSpeakerVoiceConfig"]);n!=null&&v(e,["multiSpeakerVoiceConfig"],pee(n));const s=x(t,["languageCode"]);return s!=null&&v(e,["languageCode"],s),e}function xee(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function vee(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function yee(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function wee(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],xee(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],vee(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],yee(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function bee(t){const e={},r=x(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>wee(a))),v(e,["parts"],s)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function Cee(t){const e={},r=x(t,["behavior"]);r!=null&&v(e,["behavior"],r);const n=x(t,["description"]);n!=null&&v(e,["description"],n);const s=x(t,["name"]);s!=null&&v(e,["name"],s);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function Eee(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function _ee(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],Eee(r)),e}function See(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function Tee(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],See(r)),e}function Nee(){return{}}function Bee(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>Cee(u))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["googleSearch"]);n!=null&&v(e,["googleSearch"],_ee(n));const s=x(t,["googleSearchRetrieval"]);if(s!=null&&v(e,["googleSearchRetrieval"],Tee(s)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],Nee());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function kee(t){const e={},r=x(t,["handle"]);if(r!=null&&v(e,["handle"],r),x(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function oF(){return{}}function Iee(t){const e={},r=x(t,["disabled"]);r!=null&&v(e,["disabled"],r);const n=x(t,["startOfSpeechSensitivity"]);n!=null&&v(e,["startOfSpeechSensitivity"],n);const s=x(t,["endOfSpeechSensitivity"]);s!=null&&v(e,["endOfSpeechSensitivity"],s);const a=x(t,["prefixPaddingMs"]);a!=null&&v(e,["prefixPaddingMs"],a);const i=x(t,["silenceDurationMs"]);return i!=null&&v(e,["silenceDurationMs"],i),e}function Fee(t){const e={},r=x(t,["automaticActivityDetection"]);r!=null&&v(e,["automaticActivityDetection"],Iee(r));const n=x(t,["activityHandling"]);n!=null&&v(e,["activityHandling"],n);const s=x(t,["turnCoverage"]);return s!=null&&v(e,["turnCoverage"],s),e}function Dee(t){const e={},r=x(t,["targetTokens"]);return r!=null&&v(e,["targetTokens"],r),e}function Ree(t){const e={},r=x(t,["triggerTokens"]);r!=null&&v(e,["triggerTokens"],r);const n=x(t,["slidingWindow"]);return n!=null&&v(e,["slidingWindow"],Dee(n)),e}function Lee(t){const e={},r=x(t,["proactiveAudio"]);return r!=null&&v(e,["proactiveAudio"],r),e}function Uee(t,e){const r={},n=x(t,["generationConfig"]);e!==void 0&&n!=null&&v(e,["setup","generationConfig"],n);const s=x(t,["responseModalities"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","responseModalities"],s);const a=x(t,["temperature"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","temperature"],a);const i=x(t,["topP"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig","topP"],i);const o=x(t,["topK"]);e!==void 0&&o!=null&&v(e,["setup","generationConfig","topK"],o);const l=x(t,["maxOutputTokens"]);e!==void 0&&l!=null&&v(e,["setup","generationConfig","maxOutputTokens"],l);const u=x(t,["mediaResolution"]);e!==void 0&&u!=null&&v(e,["setup","generationConfig","mediaResolution"],u);const d=x(t,["seed"]);e!==void 0&&d!=null&&v(e,["setup","generationConfig","seed"],d);const h=x(t,["speechConfig"]);e!==void 0&&h!=null&&v(e,["setup","generationConfig","speechConfig"],gee(k4(h)));const m=x(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=x(t,["systemInstruction"]);e!==void 0&&g!=null&&v(e,["setup","systemInstruction"],bee(Gi(g)));const b=x(t,["tools"]);if(e!==void 0&&b!=null){let j=np(b);Array.isArray(j)&&(j=j.map(L=>Bee(rp(L)))),v(e,["setup","tools"],j)}const y=x(t,["sessionResumption"]);e!==void 0&&y!=null&&v(e,["setup","sessionResumption"],kee(y));const _=x(t,["inputAudioTranscription"]);e!==void 0&&_!=null&&v(e,["setup","inputAudioTranscription"],oF());const N=x(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&v(e,["setup","outputAudioTranscription"],oF());const k=x(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&v(e,["setup","realtimeInputConfig"],Fee(k));const R=x(t,["contextWindowCompression"]);e!==void 0&&R!=null&&v(e,["setup","contextWindowCompression"],Ree(R));const M=x(t,["proactivity"]);return e!==void 0&&M!=null&&v(e,["setup","proactivity"],Lee(M)),r}function Mee(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["setup","model"],$n(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],Uee(s,r)),r}function Pee(){return{}}function jee(){return{}}function Oee(t){const e={},r=x(t,["media"]);r!=null&&v(e,["mediaChunks"],gM(r));const n=x(t,["audio"]);n!=null&&v(e,["audio"],vM(n));const s=x(t,["audioStreamEnd"]);s!=null&&v(e,["audioStreamEnd"],s);const a=x(t,["video"]);a!=null&&v(e,["video"],xM(a));const i=x(t,["text"]);return i!=null&&v(e,["text"],i),x(t,["activityStart"])!=null&&v(e,["activityStart"],Pee()),x(t,["activityEnd"])!=null&&v(e,["activityEnd"],jee()),e}function RM(t){const e={},r=x(t,["text"]);r!=null&&v(e,["text"],r);const n=x(t,["weight"]);return n!=null&&v(e,["weight"],n),e}function Qee(t){const e={},r=x(t,["weightedPrompts"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>RM(s))),v(e,["weightedPrompts"],n)}return e}function LM(t){const e={},r=x(t,["temperature"]);r!=null&&v(e,["temperature"],r);const n=x(t,["topK"]);n!=null&&v(e,["topK"],n);const s=x(t,["seed"]);s!=null&&v(e,["seed"],s);const a=x(t,["guidance"]);a!=null&&v(e,["guidance"],a);const i=x(t,["bpm"]);i!=null&&v(e,["bpm"],i);const o=x(t,["density"]);o!=null&&v(e,["density"],o);const l=x(t,["brightness"]);l!=null&&v(e,["brightness"],l);const u=x(t,["scale"]);u!=null&&v(e,["scale"],u);const d=x(t,["muteBass"]);d!=null&&v(e,["muteBass"],d);const h=x(t,["muteDrums"]);h!=null&&v(e,["muteDrums"],h);const m=x(t,["onlyBassAndDrums"]);return m!=null&&v(e,["onlyBassAndDrums"],m),e}function Hee(t){const e={},r=x(t,["musicGenerationConfig"]);return r!=null&&v(e,["musicGenerationConfig"],LM(r)),e}function UM(t){const e={},r=x(t,["model"]);return r!=null&&v(e,["model"],r),e}function MM(t){const e={},r=x(t,["weightedPrompts"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>RM(s))),v(e,["weightedPrompts"],n)}return e}function sS(t){const e={},r=x(t,["setup"]);r!=null&&v(e,["setup"],UM(r));const n=x(t,["clientContent"]);n!=null&&v(e,["clientContent"],MM(n));const s=x(t,["musicGenerationConfig"]);s!=null&&v(e,["musicGenerationConfig"],LM(s));const a=x(t,["playbackControl"]);return a!=null&&v(e,["playbackControl"],a),e}function Vee(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function Gee(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],Vee(r)),e}function zee(t){const e={},r=x(t,["voiceConfig"]);if(r!=null&&v(e,["voiceConfig"],Gee(r)),x(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function qee(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function Kee(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["data"]);n!=null&&v(e,["data"],n);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function $ee(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function Wee(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],qee(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],Kee(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],$ee(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function Yee(t){const e={},r=x(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Wee(a))),v(e,["parts"],s)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function Xee(t){const e={};if(x(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=x(t,["description"]);r!=null&&v(e,["description"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const a=x(t,["parametersJsonSchema"]);a!=null&&v(e,["parametersJsonSchema"],a);const i=x(t,["response"]);i!=null&&v(e,["response"],i);const o=x(t,["responseJsonSchema"]);return o!=null&&v(e,["responseJsonSchema"],o),e}function Jee(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function Zee(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],Jee(r)),e}function ete(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function tte(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],ete(r)),e}function rte(){return{}}function nte(t){const e={},r=x(t,["apiKeyString"]);return r!=null&&v(e,["apiKeyString"],r),e}function ste(t){const e={},r=x(t,["apiKeyConfig"]);r!=null&&v(e,["apiKeyConfig"],nte(r));const n=x(t,["authType"]);n!=null&&v(e,["authType"],n);const s=x(t,["googleServiceAccountConfig"]);s!=null&&v(e,["googleServiceAccountConfig"],s);const a=x(t,["httpBasicAuthConfig"]);a!=null&&v(e,["httpBasicAuthConfig"],a);const i=x(t,["oauthConfig"]);i!=null&&v(e,["oauthConfig"],i);const o=x(t,["oidcConfig"]);return o!=null&&v(e,["oidcConfig"],o),e}function ate(t){const e={},r=x(t,["authConfig"]);return r!=null&&v(e,["authConfig"],ste(r)),e}function ite(){return{}}function ote(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(m=>Xee(m))),v(e,["functionDeclarations"],h)}const n=x(t,["retrieval"]);n!=null&&v(e,["retrieval"],n);const s=x(t,["googleSearch"]);s!=null&&v(e,["googleSearch"],Zee(s));const a=x(t,["googleSearchRetrieval"]);a!=null&&v(e,["googleSearchRetrieval"],tte(a)),x(t,["enterpriseWebSearch"])!=null&&v(e,["enterpriseWebSearch"],rte());const o=x(t,["googleMaps"]);o!=null&&v(e,["googleMaps"],ate(o)),x(t,["urlContext"])!=null&&v(e,["urlContext"],ite());const u=x(t,["codeExecution"]);u!=null&&v(e,["codeExecution"],u);const d=x(t,["computerUse"]);return d!=null&&v(e,["computerUse"],d),e}function lte(t){const e={},r=x(t,["handle"]);r!=null&&v(e,["handle"],r);const n=x(t,["transparent"]);return n!=null&&v(e,["transparent"],n),e}function lF(){return{}}function cte(t){const e={},r=x(t,["disabled"]);r!=null&&v(e,["disabled"],r);const n=x(t,["startOfSpeechSensitivity"]);n!=null&&v(e,["startOfSpeechSensitivity"],n);const s=x(t,["endOfSpeechSensitivity"]);s!=null&&v(e,["endOfSpeechSensitivity"],s);const a=x(t,["prefixPaddingMs"]);a!=null&&v(e,["prefixPaddingMs"],a);const i=x(t,["silenceDurationMs"]);return i!=null&&v(e,["silenceDurationMs"],i),e}function ute(t){const e={},r=x(t,["automaticActivityDetection"]);r!=null&&v(e,["automaticActivityDetection"],cte(r));const n=x(t,["activityHandling"]);n!=null&&v(e,["activityHandling"],n);const s=x(t,["turnCoverage"]);return s!=null&&v(e,["turnCoverage"],s),e}function Ate(t){const e={},r=x(t,["targetTokens"]);return r!=null&&v(e,["targetTokens"],r),e}function dte(t){const e={},r=x(t,["triggerTokens"]);r!=null&&v(e,["triggerTokens"],r);const n=x(t,["slidingWindow"]);return n!=null&&v(e,["slidingWindow"],Ate(n)),e}function fte(t){const e={},r=x(t,["proactiveAudio"]);return r!=null&&v(e,["proactiveAudio"],r),e}function hte(t,e){const r={},n=x(t,["generationConfig"]);e!==void 0&&n!=null&&v(e,["setup","generationConfig"],n);const s=x(t,["responseModalities"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","responseModalities"],s);const a=x(t,["temperature"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","temperature"],a);const i=x(t,["topP"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig","topP"],i);const o=x(t,["topK"]);e!==void 0&&o!=null&&v(e,["setup","generationConfig","topK"],o);const l=x(t,["maxOutputTokens"]);e!==void 0&&l!=null&&v(e,["setup","generationConfig","maxOutputTokens"],l);const u=x(t,["mediaResolution"]);e!==void 0&&u!=null&&v(e,["setup","generationConfig","mediaResolution"],u);const d=x(t,["seed"]);e!==void 0&&d!=null&&v(e,["setup","generationConfig","seed"],d);const h=x(t,["speechConfig"]);e!==void 0&&h!=null&&v(e,["setup","generationConfig","speechConfig"],zee(k4(h)));const m=x(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=x(t,["systemInstruction"]);e!==void 0&&g!=null&&v(e,["setup","systemInstruction"],Yee(Gi(g)));const b=x(t,["tools"]);if(e!==void 0&&b!=null){let j=np(b);Array.isArray(j)&&(j=j.map(L=>ote(rp(L)))),v(e,["setup","tools"],j)}const y=x(t,["sessionResumption"]);e!==void 0&&y!=null&&v(e,["setup","sessionResumption"],lte(y));const _=x(t,["inputAudioTranscription"]);e!==void 0&&_!=null&&v(e,["setup","inputAudioTranscription"],lF());const N=x(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&v(e,["setup","outputAudioTranscription"],lF());const k=x(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&v(e,["setup","realtimeInputConfig"],ute(k));const R=x(t,["contextWindowCompression"]);e!==void 0&&R!=null&&v(e,["setup","contextWindowCompression"],dte(R));const M=x(t,["proactivity"]);return e!==void 0&&M!=null&&v(e,["setup","proactivity"],fte(M)),r}function mte(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["setup","model"],$n(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],hte(s,r)),r}function pte(){return{}}function gte(){return{}}function xte(t){const e={},r=x(t,["media"]);r!=null&&v(e,["mediaChunks"],gM(r));const n=x(t,["audio"]);n!=null&&v(e,["audio"],vM(n));const s=x(t,["audioStreamEnd"]);s!=null&&v(e,["audioStreamEnd"],s);const a=x(t,["video"]);a!=null&&v(e,["video"],xM(a));const i=x(t,["text"]);return i!=null&&v(e,["text"],i),x(t,["activityStart"])!=null&&v(e,["activityStart"],pte()),x(t,["activityEnd"])!=null&&v(e,["activityEnd"],gte()),e}function vte(){return{}}function yte(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function wte(t){const e={},r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function bte(t){const e={},r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function Cte(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],yte(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],wte(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],bte(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function Ete(t){const e={},r=x(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Cte(a))),v(e,["parts"],s)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function cF(t){const e={},r=x(t,["text"]);r!=null&&v(e,["text"],r);const n=x(t,["finished"]);return n!=null&&v(e,["finished"],n),e}function _te(t){const e={},r=x(t,["retrievedUrl"]);r!=null&&v(e,["retrievedUrl"],r);const n=x(t,["urlRetrievalStatus"]);return n!=null&&v(e,["urlRetrievalStatus"],n),e}function Ste(t){const e={},r=x(t,["urlMetadata"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>_te(s))),v(e,["urlMetadata"],n)}return e}function Tte(t){const e={},r=x(t,["modelTurn"]);r!=null&&v(e,["modelTurn"],Ete(r));const n=x(t,["turnComplete"]);n!=null&&v(e,["turnComplete"],n);const s=x(t,["interrupted"]);s!=null&&v(e,["interrupted"],s);const a=x(t,["groundingMetadata"]);a!=null&&v(e,["groundingMetadata"],a);const i=x(t,["generationComplete"]);i!=null&&v(e,["generationComplete"],i);const o=x(t,["inputTranscription"]);o!=null&&v(e,["inputTranscription"],cF(o));const l=x(t,["outputTranscription"]);l!=null&&v(e,["outputTranscription"],cF(l));const u=x(t,["urlContextMetadata"]);return u!=null&&v(e,["urlContextMetadata"],Ste(u)),e}function Nte(t){const e={},r=x(t,["id"]);r!=null&&v(e,["id"],r);const n=x(t,["args"]);n!=null&&v(e,["args"],n);const s=x(t,["name"]);return s!=null&&v(e,["name"],s),e}function Bte(t){const e={},r=x(t,["functionCalls"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>Nte(s))),v(e,["functionCalls"],n)}return e}function kte(t){const e={},r=x(t,["ids"]);return r!=null&&v(e,["ids"],r),e}function Bv(t){const e={},r=x(t,["modality"]);r!=null&&v(e,["modality"],r);const n=x(t,["tokenCount"]);return n!=null&&v(e,["tokenCount"],n),e}function Ite(t){const e={},r=x(t,["promptTokenCount"]);r!=null&&v(e,["promptTokenCount"],r);const n=x(t,["cachedContentTokenCount"]);n!=null&&v(e,["cachedContentTokenCount"],n);const s=x(t,["responseTokenCount"]);s!=null&&v(e,["responseTokenCount"],s);const a=x(t,["toolUsePromptTokenCount"]);a!=null&&v(e,["toolUsePromptTokenCount"],a);const i=x(t,["thoughtsTokenCount"]);i!=null&&v(e,["thoughtsTokenCount"],i);const o=x(t,["totalTokenCount"]);o!=null&&v(e,["totalTokenCount"],o);const l=x(t,["promptTokensDetails"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(g=>Bv(g))),v(e,["promptTokensDetails"],m)}const u=x(t,["cacheTokensDetails"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(g=>Bv(g))),v(e,["cacheTokensDetails"],m)}const d=x(t,["responseTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>Bv(g))),v(e,["responseTokensDetails"],m)}const h=x(t,["toolUsePromptTokensDetails"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>Bv(g))),v(e,["toolUsePromptTokensDetails"],m)}return e}function Fte(t){const e={},r=x(t,["timeLeft"]);return r!=null&&v(e,["timeLeft"],r),e}function Dte(t){const e={},r=x(t,["newHandle"]);r!=null&&v(e,["newHandle"],r);const n=x(t,["resumable"]);n!=null&&v(e,["resumable"],n);const s=x(t,["lastConsumedClientMessageIndex"]);return s!=null&&v(e,["lastConsumedClientMessageIndex"],s),e}function Rte(t){const e={};x(t,["setupComplete"])!=null&&v(e,["setupComplete"],vte());const n=x(t,["serverContent"]);n!=null&&v(e,["serverContent"],Tte(n));const s=x(t,["toolCall"]);s!=null&&v(e,["toolCall"],Bte(s));const a=x(t,["toolCallCancellation"]);a!=null&&v(e,["toolCallCancellation"],kte(a));const i=x(t,["usageMetadata"]);i!=null&&v(e,["usageMetadata"],Ite(i));const o=x(t,["goAway"]);o!=null&&v(e,["goAway"],Fte(o));const l=x(t,["sessionResumptionUpdate"]);return l!=null&&v(e,["sessionResumptionUpdate"],Dte(l)),e}function Lte(){return{}}function Ute(t){const e={},r=x(t,["text"]);r!=null&&v(e,["text"],r);const n=x(t,["weight"]);return n!=null&&v(e,["weight"],n),e}function Mte(t){const e={},r=x(t,["weightedPrompts"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>Ute(s))),v(e,["weightedPrompts"],n)}return e}function Pte(t){const e={},r=x(t,["temperature"]);r!=null&&v(e,["temperature"],r);const n=x(t,["topK"]);n!=null&&v(e,["topK"],n);const s=x(t,["seed"]);s!=null&&v(e,["seed"],s);const a=x(t,["guidance"]);a!=null&&v(e,["guidance"],a);const i=x(t,["bpm"]);i!=null&&v(e,["bpm"],i);const o=x(t,["density"]);o!=null&&v(e,["density"],o);const l=x(t,["brightness"]);l!=null&&v(e,["brightness"],l);const u=x(t,["scale"]);u!=null&&v(e,["scale"],u);const d=x(t,["muteBass"]);d!=null&&v(e,["muteBass"],d);const h=x(t,["muteDrums"]);h!=null&&v(e,["muteDrums"],h);const m=x(t,["onlyBassAndDrums"]);return m!=null&&v(e,["onlyBassAndDrums"],m),e}function jte(t){const e={},r=x(t,["clientContent"]);r!=null&&v(e,["clientContent"],Mte(r));const n=x(t,["musicGenerationConfig"]);return n!=null&&v(e,["musicGenerationConfig"],Pte(n)),e}function Ote(t){const e={},r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);n!=null&&v(e,["mimeType"],n);const s=x(t,["sourceMetadata"]);return s!=null&&v(e,["sourceMetadata"],jte(s)),e}function Qte(t){const e={},r=x(t,["audioChunks"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>Ote(s))),v(e,["audioChunks"],n)}return e}function Hte(t){const e={},r=x(t,["text"]);r!=null&&v(e,["text"],r);const n=x(t,["filteredReason"]);return n!=null&&v(e,["filteredReason"],n),e}function Vte(t){const e={};x(t,["setupComplete"])!=null&&v(e,["setupComplete"],Lte());const n=x(t,["serverContent"]);n!=null&&v(e,["serverContent"],Qte(n));const s=x(t,["filteredPrompt"]);return s!=null&&v(e,["filteredPrompt"],Hte(s)),e}function Gte(t){const e={},r=x(t,["sessionId"]);return r!=null&&v(e,["sessionId"],r),e}function zte(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function qte(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["data"]);n!=null&&v(e,["data"],n);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function Kte(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function $te(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],zte(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],qte(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],Kte(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function Wte(t){const e={},r=x(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>$te(a))),v(e,["parts"],s)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function uF(t){const e={},r=x(t,["text"]);r!=null&&v(e,["text"],r);const n=x(t,["finished"]);return n!=null&&v(e,["finished"],n),e}function Yte(t){const e={},r=x(t,["modelTurn"]);r!=null&&v(e,["modelTurn"],Wte(r));const n=x(t,["turnComplete"]);n!=null&&v(e,["turnComplete"],n);const s=x(t,["interrupted"]);s!=null&&v(e,["interrupted"],s);const a=x(t,["groundingMetadata"]);a!=null&&v(e,["groundingMetadata"],a);const i=x(t,["generationComplete"]);i!=null&&v(e,["generationComplete"],i);const o=x(t,["inputTranscription"]);o!=null&&v(e,["inputTranscription"],uF(o));const l=x(t,["outputTranscription"]);return l!=null&&v(e,["outputTranscription"],uF(l)),e}function Xte(t){const e={},r=x(t,["args"]);r!=null&&v(e,["args"],r);const n=x(t,["name"]);return n!=null&&v(e,["name"],n),e}function Jte(t){const e={},r=x(t,["functionCalls"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>Xte(s))),v(e,["functionCalls"],n)}return e}function Zte(t){const e={},r=x(t,["ids"]);return r!=null&&v(e,["ids"],r),e}function kv(t){const e={},r=x(t,["modality"]);r!=null&&v(e,["modality"],r);const n=x(t,["tokenCount"]);return n!=null&&v(e,["tokenCount"],n),e}function ere(t){const e={},r=x(t,["promptTokenCount"]);r!=null&&v(e,["promptTokenCount"],r);const n=x(t,["cachedContentTokenCount"]);n!=null&&v(e,["cachedContentTokenCount"],n);const s=x(t,["candidatesTokenCount"]);s!=null&&v(e,["responseTokenCount"],s);const a=x(t,["toolUsePromptTokenCount"]);a!=null&&v(e,["toolUsePromptTokenCount"],a);const i=x(t,["thoughtsTokenCount"]);i!=null&&v(e,["thoughtsTokenCount"],i);const o=x(t,["totalTokenCount"]);o!=null&&v(e,["totalTokenCount"],o);const l=x(t,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(b=>kv(b))),v(e,["promptTokensDetails"],g)}const u=x(t,["cacheTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(b=>kv(b))),v(e,["cacheTokensDetails"],g)}const d=x(t,["candidatesTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(b=>kv(b))),v(e,["responseTokensDetails"],g)}const h=x(t,["toolUsePromptTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(b=>kv(b))),v(e,["toolUsePromptTokensDetails"],g)}const m=x(t,["trafficType"]);return m!=null&&v(e,["trafficType"],m),e}function tre(t){const e={},r=x(t,["timeLeft"]);return r!=null&&v(e,["timeLeft"],r),e}function rre(t){const e={},r=x(t,["newHandle"]);r!=null&&v(e,["newHandle"],r);const n=x(t,["resumable"]);n!=null&&v(e,["resumable"],n);const s=x(t,["lastConsumedClientMessageIndex"]);return s!=null&&v(e,["lastConsumedClientMessageIndex"],s),e}function nre(t){const e={},r=x(t,["setupComplete"]);r!=null&&v(e,["setupComplete"],Gte(r));const n=x(t,["serverContent"]);n!=null&&v(e,["serverContent"],Yte(n));const s=x(t,["toolCall"]);s!=null&&v(e,["toolCall"],Jte(s));const a=x(t,["toolCallCancellation"]);a!=null&&v(e,["toolCallCancellation"],Zte(a));const i=x(t,["usageMetadata"]);i!=null&&v(e,["usageMetadata"],ere(i));const o=x(t,["goAway"]);o!=null&&v(e,["goAway"],tre(o));const l=x(t,["sessionResumptionUpdate"]);return l!=null&&v(e,["sessionResumptionUpdate"],rre(l)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sre(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function are(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function ire(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function ore(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],sre(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],are(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],ire(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function Hw(t){const e={},r=x(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>ore(a))),v(e,["parts"],s)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function lre(t){const e={},r=x(t,["anyOf"]);r!=null&&v(e,["anyOf"],r);const n=x(t,["default"]);n!=null&&v(e,["default"],n);const s=x(t,["description"]);s!=null&&v(e,["description"],s);const a=x(t,["enum"]);a!=null&&v(e,["enum"],a);const i=x(t,["example"]);i!=null&&v(e,["example"],i);const o=x(t,["format"]);o!=null&&v(e,["format"],o);const l=x(t,["items"]);l!=null&&v(e,["items"],l);const u=x(t,["maxItems"]);u!=null&&v(e,["maxItems"],u);const d=x(t,["maxLength"]);d!=null&&v(e,["maxLength"],d);const h=x(t,["maxProperties"]);h!=null&&v(e,["maxProperties"],h);const m=x(t,["maximum"]);m!=null&&v(e,["maximum"],m);const g=x(t,["minItems"]);g!=null&&v(e,["minItems"],g);const b=x(t,["minLength"]);b!=null&&v(e,["minLength"],b);const y=x(t,["minProperties"]);y!=null&&v(e,["minProperties"],y);const _=x(t,["minimum"]);_!=null&&v(e,["minimum"],_);const N=x(t,["nullable"]);N!=null&&v(e,["nullable"],N);const k=x(t,["pattern"]);k!=null&&v(e,["pattern"],k);const R=x(t,["properties"]);R!=null&&v(e,["properties"],R);const M=x(t,["propertyOrdering"]);M!=null&&v(e,["propertyOrdering"],M);const j=x(t,["required"]);j!=null&&v(e,["required"],j);const L=x(t,["title"]);L!=null&&v(e,["title"],L);const C=x(t,["type"]);return C!=null&&v(e,["type"],C),e}function cre(t){const e={};if(x(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=x(t,["category"]);r!=null&&v(e,["category"],r);const n=x(t,["threshold"]);return n!=null&&v(e,["threshold"],n),e}function ure(t){const e={},r=x(t,["behavior"]);r!=null&&v(e,["behavior"],r);const n=x(t,["description"]);n!=null&&v(e,["description"],n);const s=x(t,["name"]);s!=null&&v(e,["name"],s);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function Are(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function dre(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],Are(r)),e}function fre(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function hre(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],fre(r)),e}function mre(){return{}}function pre(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>ure(u))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["googleSearch"]);n!=null&&v(e,["googleSearch"],dre(n));const s=x(t,["googleSearchRetrieval"]);if(s!=null&&v(e,["googleSearchRetrieval"],hre(s)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],mre());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function gre(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["allowedFunctionNames"]);return n!=null&&v(e,["allowedFunctionNames"],n),e}function xre(t){const e={},r=x(t,["latitude"]);r!=null&&v(e,["latitude"],r);const n=x(t,["longitude"]);return n!=null&&v(e,["longitude"],n),e}function vre(t){const e={},r=x(t,["latLng"]);r!=null&&v(e,["latLng"],xre(r));const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function yre(t){const e={},r=x(t,["functionCallingConfig"]);r!=null&&v(e,["functionCallingConfig"],gre(r));const n=x(t,["retrievalConfig"]);return n!=null&&v(e,["retrievalConfig"],vre(n)),e}function wre(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function PM(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],wre(r)),e}function bre(t){const e={},r=x(t,["speaker"]);r!=null&&v(e,["speaker"],r);const n=x(t,["voiceConfig"]);return n!=null&&v(e,["voiceConfig"],PM(n)),e}function Cre(t){const e={},r=x(t,["speakerVoiceConfigs"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>bre(s))),v(e,["speakerVoiceConfigs"],n)}return e}function Ere(t){const e={},r=x(t,["voiceConfig"]);r!=null&&v(e,["voiceConfig"],PM(r));const n=x(t,["multiSpeakerVoiceConfig"]);n!=null&&v(e,["multiSpeakerVoiceConfig"],Cre(n));const s=x(t,["languageCode"]);return s!=null&&v(e,["languageCode"],s),e}function _re(t){const e={},r=x(t,["includeThoughts"]);r!=null&&v(e,["includeThoughts"],r);const n=x(t,["thinkingBudget"]);return n!=null&&v(e,["thinkingBudget"],n),e}function Sre(t,e,r){const n={},s=x(e,["systemInstruction"]);r!==void 0&&s!=null&&v(r,["systemInstruction"],Hw(Gi(s)));const a=x(e,["temperature"]);a!=null&&v(n,["temperature"],a);const i=x(e,["topP"]);i!=null&&v(n,["topP"],i);const o=x(e,["topK"]);o!=null&&v(n,["topK"],o);const l=x(e,["candidateCount"]);l!=null&&v(n,["candidateCount"],l);const u=x(e,["maxOutputTokens"]);u!=null&&v(n,["maxOutputTokens"],u);const d=x(e,["stopSequences"]);d!=null&&v(n,["stopSequences"],d);const h=x(e,["responseLogprobs"]);h!=null&&v(n,["responseLogprobs"],h);const m=x(e,["logprobs"]);m!=null&&v(n,["logprobs"],m);const g=x(e,["presencePenalty"]);g!=null&&v(n,["presencePenalty"],g);const b=x(e,["frequencyPenalty"]);b!=null&&v(n,["frequencyPenalty"],b);const y=x(e,["seed"]);y!=null&&v(n,["seed"],y);const _=x(e,["responseMimeType"]);_!=null&&v(n,["responseMimeType"],_);const N=x(e,["responseSchema"]);N!=null&&v(n,["responseSchema"],lre(N4(N)));const k=x(e,["responseJsonSchema"]);if(k!=null&&v(n,["responseJsonSchema"],k),x(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(x(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const R=x(e,["safetySettings"]);if(r!==void 0&&R!=null){let D=R;Array.isArray(D)&&(D=D.map(I=>cre(I))),v(r,["safetySettings"],D)}const M=x(e,["tools"]);if(r!==void 0&&M!=null){let D=np(M);Array.isArray(D)&&(D=D.map(I=>pre(rp(I)))),v(r,["tools"],D)}const j=x(e,["toolConfig"]);if(r!==void 0&&j!=null&&v(r,["toolConfig"],yre(j)),x(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const L=x(e,["cachedContent"]);r!==void 0&&L!=null&&v(r,["cachedContent"],zA(t,L));const C=x(e,["responseModalities"]);C!=null&&v(n,["responseModalities"],C);const E=x(e,["mediaResolution"]);E!=null&&v(n,["mediaResolution"],E);const B=x(e,["speechConfig"]);if(B!=null&&v(n,["speechConfig"],Ere(B4(B))),x(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Q=x(e,["thinkingConfig"]);return Q!=null&&v(n,["thinkingConfig"],_re(Q)),n}function AF(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const s=x(e,["contents"]);if(s!=null){let i=ql(s);Array.isArray(i)&&(i=i.map(o=>Hw(o))),v(r,["contents"],i)}const a=x(e,["config"]);return a!=null&&v(r,["generationConfig"],Sre(t,a,r)),r}function Tre(t,e){const r={},n=x(t,["taskType"]);e!==void 0&&n!=null&&v(e,["requests[]","taskType"],n);const s=x(t,["title"]);e!==void 0&&s!=null&&v(e,["requests[]","title"],s);const a=x(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&v(e,["requests[]","outputDimensionality"],a),x(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(x(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function Nre(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const s=x(e,["contents"]);s!=null&&v(r,["requests[]","content"],wM(t,s));const a=x(e,["config"]);a!=null&&v(r,["config"],Tre(a,r));const i=x(e,["model"]);return i!==void 0&&v(r,["requests[]","model"],$n(t,i)),r}function Bre(t,e){const r={};if(x(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const n=x(t,["numberOfImages"]);e!==void 0&&n!=null&&v(e,["parameters","sampleCount"],n);const s=x(t,["aspectRatio"]);e!==void 0&&s!=null&&v(e,["parameters","aspectRatio"],s);const a=x(t,["guidanceScale"]);if(e!==void 0&&a!=null&&v(e,["parameters","guidanceScale"],a),x(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=x(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&v(e,["parameters","safetySetting"],i);const o=x(t,["personGeneration"]);e!==void 0&&o!=null&&v(e,["parameters","personGeneration"],o);const l=x(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&v(e,["parameters","includeSafetyAttributes"],l);const u=x(t,["includeRaiReason"]);e!==void 0&&u!=null&&v(e,["parameters","includeRaiReason"],u);const d=x(t,["language"]);e!==void 0&&d!=null&&v(e,["parameters","language"],d);const h=x(t,["outputMimeType"]);e!==void 0&&h!=null&&v(e,["parameters","outputOptions","mimeType"],h);const m=x(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&v(e,["parameters","outputOptions","compressionQuality"],m),x(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(x(t,["imageSize"])!==void 0)throw new Error("imageSize parameter is not supported in Gemini API.");if(x(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function kre(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const s=x(e,["prompt"]);s!=null&&v(r,["instances[0]","prompt"],s);const a=x(e,["config"]);return a!=null&&v(r,["config"],Bre(a,r)),r}function Ire(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","name"],$n(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],s),r}function Fre(t,e,r){const n={},s=x(e,["pageSize"]);r!==void 0&&s!=null&&v(r,["_query","pageSize"],s);const a=x(e,["pageToken"]);r!==void 0&&a!=null&&v(r,["_query","pageToken"],a);const i=x(e,["filter"]);r!==void 0&&i!=null&&v(r,["_query","filter"],i);const o=x(e,["queryBase"]);return r!==void 0&&o!=null&&v(r,["_url","models_url"],EM(t,o)),n}function Dre(t,e){const r={},n=x(e,["config"]);return n!=null&&v(r,["config"],Fre(t,n,r)),r}function Rre(t,e){const r={},n=x(t,["displayName"]);e!==void 0&&n!=null&&v(e,["displayName"],n);const s=x(t,["description"]);e!==void 0&&s!=null&&v(e,["description"],s);const a=x(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&v(e,["defaultCheckpointId"],a),r}function Lre(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","name"],$n(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],Rre(s,r)),r}function Ure(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","name"],$n(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],s),r}function Mre(t){const e={};if(x(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(x(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(x(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Pre(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const s=x(e,["contents"]);if(s!=null){let i=ql(s);Array.isArray(i)&&(i=i.map(o=>Hw(o))),v(r,["contents"],i)}const a=x(e,["config"]);return a!=null&&v(r,["config"],Mre(a)),r}function jre(t){const e={};if(x(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=x(t,["imageBytes"]);r!=null&&v(e,["bytesBase64Encoded"],qh(r));const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function Ore(t,e){const r={},n=x(t,["numberOfVideos"]);if(e!==void 0&&n!=null&&v(e,["parameters","sampleCount"],n),x(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=x(t,["durationSeconds"]);if(e!==void 0&&s!=null&&v(e,["parameters","durationSeconds"],s),x(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=x(t,["aspectRatio"]);if(e!==void 0&&a!=null&&v(e,["parameters","aspectRatio"],a),x(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const i=x(t,["personGeneration"]);if(e!==void 0&&i!=null&&v(e,["parameters","personGeneration"],i),x(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const o=x(t,["negativePrompt"]);e!==void 0&&o!=null&&v(e,["parameters","negativePrompt"],o);const l=x(t,["enhancePrompt"]);if(e!==void 0&&l!=null&&v(e,["parameters","enhancePrompt"],l),x(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(x(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(x(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return r}function Qre(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const s=x(e,["prompt"]);s!=null&&v(r,["instances[0]","prompt"],s);const a=x(e,["image"]);if(a!=null&&v(r,["instances[0]","image"],jre(a)),x(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const i=x(e,["config"]);return i!=null&&v(r,["config"],Ore(i,r)),r}function Hre(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function Vre(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["data"]);n!=null&&v(e,["data"],n);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function Gre(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function zre(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],Hre(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],Vre(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],Gre(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function ap(t){const e={},r=x(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>zre(a))),v(e,["parts"],s)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function qre(t){const e={},r=x(t,["anyOf"]);r!=null&&v(e,["anyOf"],r);const n=x(t,["default"]);n!=null&&v(e,["default"],n);const s=x(t,["description"]);s!=null&&v(e,["description"],s);const a=x(t,["enum"]);a!=null&&v(e,["enum"],a);const i=x(t,["example"]);i!=null&&v(e,["example"],i);const o=x(t,["format"]);o!=null&&v(e,["format"],o);const l=x(t,["items"]);l!=null&&v(e,["items"],l);const u=x(t,["maxItems"]);u!=null&&v(e,["maxItems"],u);const d=x(t,["maxLength"]);d!=null&&v(e,["maxLength"],d);const h=x(t,["maxProperties"]);h!=null&&v(e,["maxProperties"],h);const m=x(t,["maximum"]);m!=null&&v(e,["maximum"],m);const g=x(t,["minItems"]);g!=null&&v(e,["minItems"],g);const b=x(t,["minLength"]);b!=null&&v(e,["minLength"],b);const y=x(t,["minProperties"]);y!=null&&v(e,["minProperties"],y);const _=x(t,["minimum"]);_!=null&&v(e,["minimum"],_);const N=x(t,["nullable"]);N!=null&&v(e,["nullable"],N);const k=x(t,["pattern"]);k!=null&&v(e,["pattern"],k);const R=x(t,["properties"]);R!=null&&v(e,["properties"],R);const M=x(t,["propertyOrdering"]);M!=null&&v(e,["propertyOrdering"],M);const j=x(t,["required"]);j!=null&&v(e,["required"],j);const L=x(t,["title"]);L!=null&&v(e,["title"],L);const C=x(t,["type"]);return C!=null&&v(e,["type"],C),e}function Kre(t){const e={},r=x(t,["featureSelectionPreference"]);return r!=null&&v(e,["featureSelectionPreference"],r),e}function $re(t){const e={},r=x(t,["method"]);r!=null&&v(e,["method"],r);const n=x(t,["category"]);n!=null&&v(e,["category"],n);const s=x(t,["threshold"]);return s!=null&&v(e,["threshold"],s),e}function Wre(t){const e={};if(x(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=x(t,["description"]);r!=null&&v(e,["description"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const a=x(t,["parametersJsonSchema"]);a!=null&&v(e,["parametersJsonSchema"],a);const i=x(t,["response"]);i!=null&&v(e,["response"],i);const o=x(t,["responseJsonSchema"]);return o!=null&&v(e,["responseJsonSchema"],o),e}function Yre(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function Xre(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],Yre(r)),e}function Jre(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function Zre(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],Jre(r)),e}function ene(){return{}}function tne(t){const e={},r=x(t,["apiKeyString"]);return r!=null&&v(e,["apiKeyString"],r),e}function rne(t){const e={},r=x(t,["apiKeyConfig"]);r!=null&&v(e,["apiKeyConfig"],tne(r));const n=x(t,["authType"]);n!=null&&v(e,["authType"],n);const s=x(t,["googleServiceAccountConfig"]);s!=null&&v(e,["googleServiceAccountConfig"],s);const a=x(t,["httpBasicAuthConfig"]);a!=null&&v(e,["httpBasicAuthConfig"],a);const i=x(t,["oauthConfig"]);i!=null&&v(e,["oauthConfig"],i);const o=x(t,["oidcConfig"]);return o!=null&&v(e,["oidcConfig"],o),e}function nne(t){const e={},r=x(t,["authConfig"]);return r!=null&&v(e,["authConfig"],rne(r)),e}function sne(){return{}}function jM(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(m=>Wre(m))),v(e,["functionDeclarations"],h)}const n=x(t,["retrieval"]);n!=null&&v(e,["retrieval"],n);const s=x(t,["googleSearch"]);s!=null&&v(e,["googleSearch"],Xre(s));const a=x(t,["googleSearchRetrieval"]);a!=null&&v(e,["googleSearchRetrieval"],Zre(a)),x(t,["enterpriseWebSearch"])!=null&&v(e,["enterpriseWebSearch"],ene());const o=x(t,["googleMaps"]);o!=null&&v(e,["googleMaps"],nne(o)),x(t,["urlContext"])!=null&&v(e,["urlContext"],sne());const u=x(t,["codeExecution"]);u!=null&&v(e,["codeExecution"],u);const d=x(t,["computerUse"]);return d!=null&&v(e,["computerUse"],d),e}function ane(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["allowedFunctionNames"]);return n!=null&&v(e,["allowedFunctionNames"],n),e}function ine(t){const e={},r=x(t,["latitude"]);r!=null&&v(e,["latitude"],r);const n=x(t,["longitude"]);return n!=null&&v(e,["longitude"],n),e}function one(t){const e={},r=x(t,["latLng"]);r!=null&&v(e,["latLng"],ine(r));const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function lne(t){const e={},r=x(t,["functionCallingConfig"]);r!=null&&v(e,["functionCallingConfig"],ane(r));const n=x(t,["retrievalConfig"]);return n!=null&&v(e,["retrievalConfig"],one(n)),e}function cne(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function une(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],cne(r)),e}function Ane(t){const e={},r=x(t,["voiceConfig"]);if(r!=null&&v(e,["voiceConfig"],une(r)),x(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function dne(t){const e={},r=x(t,["includeThoughts"]);r!=null&&v(e,["includeThoughts"],r);const n=x(t,["thinkingBudget"]);return n!=null&&v(e,["thinkingBudget"],n),e}function fne(t,e,r){const n={},s=x(e,["systemInstruction"]);r!==void 0&&s!=null&&v(r,["systemInstruction"],ap(Gi(s)));const a=x(e,["temperature"]);a!=null&&v(n,["temperature"],a);const i=x(e,["topP"]);i!=null&&v(n,["topP"],i);const o=x(e,["topK"]);o!=null&&v(n,["topK"],o);const l=x(e,["candidateCount"]);l!=null&&v(n,["candidateCount"],l);const u=x(e,["maxOutputTokens"]);u!=null&&v(n,["maxOutputTokens"],u);const d=x(e,["stopSequences"]);d!=null&&v(n,["stopSequences"],d);const h=x(e,["responseLogprobs"]);h!=null&&v(n,["responseLogprobs"],h);const m=x(e,["logprobs"]);m!=null&&v(n,["logprobs"],m);const g=x(e,["presencePenalty"]);g!=null&&v(n,["presencePenalty"],g);const b=x(e,["frequencyPenalty"]);b!=null&&v(n,["frequencyPenalty"],b);const y=x(e,["seed"]);y!=null&&v(n,["seed"],y);const _=x(e,["responseMimeType"]);_!=null&&v(n,["responseMimeType"],_);const N=x(e,["responseSchema"]);N!=null&&v(n,["responseSchema"],qre(N4(N)));const k=x(e,["responseJsonSchema"]);k!=null&&v(n,["responseJsonSchema"],k);const R=x(e,["routingConfig"]);R!=null&&v(n,["routingConfig"],R);const M=x(e,["modelSelectionConfig"]);M!=null&&v(n,["modelConfig"],Kre(M));const j=x(e,["safetySettings"]);if(r!==void 0&&j!=null){let se=j;Array.isArray(se)&&(se=se.map(J=>$re(J))),v(r,["safetySettings"],se)}const L=x(e,["tools"]);if(r!==void 0&&L!=null){let se=np(L);Array.isArray(se)&&(se=se.map(J=>jM(rp(J)))),v(r,["tools"],se)}const C=x(e,["toolConfig"]);r!==void 0&&C!=null&&v(r,["toolConfig"],lne(C));const E=x(e,["labels"]);r!==void 0&&E!=null&&v(r,["labels"],E);const B=x(e,["cachedContent"]);r!==void 0&&B!=null&&v(r,["cachedContent"],zA(t,B));const Q=x(e,["responseModalities"]);Q!=null&&v(n,["responseModalities"],Q);const D=x(e,["mediaResolution"]);D!=null&&v(n,["mediaResolution"],D);const I=x(e,["speechConfig"]);I!=null&&v(n,["speechConfig"],Ane(B4(I)));const O=x(e,["audioTimestamp"]);O!=null&&v(n,["audioTimestamp"],O);const G=x(e,["thinkingConfig"]);return G!=null&&v(n,["thinkingConfig"],dne(G)),n}function dF(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const s=x(e,["contents"]);if(s!=null){let i=ql(s);Array.isArray(i)&&(i=i.map(o=>ap(o))),v(r,["contents"],i)}const a=x(e,["config"]);return a!=null&&v(r,["generationConfig"],fne(t,a,r)),r}function hne(t,e){const r={},n=x(t,["taskType"]);e!==void 0&&n!=null&&v(e,["instances[]","task_type"],n);const s=x(t,["title"]);e!==void 0&&s!=null&&v(e,["instances[]","title"],s);const a=x(t,["outputDimensionality"]);e!==void 0&&a!=null&&v(e,["parameters","outputDimensionality"],a);const i=x(t,["mimeType"]);e!==void 0&&i!=null&&v(e,["instances[]","mimeType"],i);const o=x(t,["autoTruncate"]);return e!==void 0&&o!=null&&v(e,["parameters","autoTruncate"],o),r}function mne(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const s=x(e,["contents"]);s!=null&&v(r,["instances[]","content"],wM(t,s));const a=x(e,["config"]);return a!=null&&v(r,["config"],hne(a,r)),r}function pne(t,e){const r={},n=x(t,["outputGcsUri"]);e!==void 0&&n!=null&&v(e,["parameters","storageUri"],n);const s=x(t,["negativePrompt"]);e!==void 0&&s!=null&&v(e,["parameters","negativePrompt"],s);const a=x(t,["numberOfImages"]);e!==void 0&&a!=null&&v(e,["parameters","sampleCount"],a);const i=x(t,["aspectRatio"]);e!==void 0&&i!=null&&v(e,["parameters","aspectRatio"],i);const o=x(t,["guidanceScale"]);e!==void 0&&o!=null&&v(e,["parameters","guidanceScale"],o);const l=x(t,["seed"]);e!==void 0&&l!=null&&v(e,["parameters","seed"],l);const u=x(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&v(e,["parameters","safetySetting"],u);const d=x(t,["personGeneration"]);e!==void 0&&d!=null&&v(e,["parameters","personGeneration"],d);const h=x(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&v(e,["parameters","includeSafetyAttributes"],h);const m=x(t,["includeRaiReason"]);e!==void 0&&m!=null&&v(e,["parameters","includeRaiReason"],m);const g=x(t,["language"]);e!==void 0&&g!=null&&v(e,["parameters","language"],g);const b=x(t,["outputMimeType"]);e!==void 0&&b!=null&&v(e,["parameters","outputOptions","mimeType"],b);const y=x(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&v(e,["parameters","outputOptions","compressionQuality"],y);const _=x(t,["addWatermark"]);e!==void 0&&_!=null&&v(e,["parameters","addWatermark"],_);const N=x(t,["imageSize"]);e!==void 0&&N!=null&&v(e,["parameters","sampleImageSize"],N);const k=x(t,["enhancePrompt"]);return e!==void 0&&k!=null&&v(e,["parameters","enhancePrompt"],k),r}function gne(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const s=x(e,["prompt"]);s!=null&&v(r,["instances[0]","prompt"],s);const a=x(e,["config"]);return a!=null&&v(r,["config"],pne(a,r)),r}function Vw(t){const e={},r=x(t,["gcsUri"]);r!=null&&v(e,["gcsUri"],r);const n=x(t,["imageBytes"]);n!=null&&v(e,["bytesBase64Encoded"],qh(n));const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function xne(t){const e={},r=x(t,["maskMode"]);r!=null&&v(e,["maskMode"],r);const n=x(t,["segmentationClasses"]);n!=null&&v(e,["maskClasses"],n);const s=x(t,["maskDilation"]);return s!=null&&v(e,["dilation"],s),e}function vne(t){const e={},r=x(t,["controlType"]);r!=null&&v(e,["controlType"],r);const n=x(t,["enableControlImageComputation"]);return n!=null&&v(e,["computeControl"],n),e}function yne(t){const e={},r=x(t,["styleDescription"]);return r!=null&&v(e,["styleDescription"],r),e}function wne(t){const e={},r=x(t,["subjectType"]);r!=null&&v(e,["subjectType"],r);const n=x(t,["subjectDescription"]);return n!=null&&v(e,["subjectDescription"],n),e}function bne(t){const e={},r=x(t,["referenceImage"]);r!=null&&v(e,["referenceImage"],Vw(r));const n=x(t,["referenceId"]);n!=null&&v(e,["referenceId"],n);const s=x(t,["referenceType"]);s!=null&&v(e,["referenceType"],s);const a=x(t,["maskImageConfig"]);a!=null&&v(e,["maskImageConfig"],xne(a));const i=x(t,["controlImageConfig"]);i!=null&&v(e,["controlImageConfig"],vne(i));const o=x(t,["styleImageConfig"]);o!=null&&v(e,["styleImageConfig"],yne(o));const l=x(t,["subjectImageConfig"]);return l!=null&&v(e,["subjectImageConfig"],wne(l)),e}function Cne(t,e){const r={},n=x(t,["outputGcsUri"]);e!==void 0&&n!=null&&v(e,["parameters","storageUri"],n);const s=x(t,["negativePrompt"]);e!==void 0&&s!=null&&v(e,["parameters","negativePrompt"],s);const a=x(t,["numberOfImages"]);e!==void 0&&a!=null&&v(e,["parameters","sampleCount"],a);const i=x(t,["aspectRatio"]);e!==void 0&&i!=null&&v(e,["parameters","aspectRatio"],i);const o=x(t,["guidanceScale"]);e!==void 0&&o!=null&&v(e,["parameters","guidanceScale"],o);const l=x(t,["seed"]);e!==void 0&&l!=null&&v(e,["parameters","seed"],l);const u=x(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&v(e,["parameters","safetySetting"],u);const d=x(t,["personGeneration"]);e!==void 0&&d!=null&&v(e,["parameters","personGeneration"],d);const h=x(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&v(e,["parameters","includeSafetyAttributes"],h);const m=x(t,["includeRaiReason"]);e!==void 0&&m!=null&&v(e,["parameters","includeRaiReason"],m);const g=x(t,["language"]);e!==void 0&&g!=null&&v(e,["parameters","language"],g);const b=x(t,["outputMimeType"]);e!==void 0&&b!=null&&v(e,["parameters","outputOptions","mimeType"],b);const y=x(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&v(e,["parameters","outputOptions","compressionQuality"],y);const _=x(t,["addWatermark"]);e!==void 0&&_!=null&&v(e,["parameters","addWatermark"],_);const N=x(t,["editMode"]);e!==void 0&&N!=null&&v(e,["parameters","editMode"],N);const k=x(t,["baseSteps"]);return e!==void 0&&k!=null&&v(e,["parameters","editConfig","baseSteps"],k),r}function Ene(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const s=x(e,["prompt"]);s!=null&&v(r,["instances[0]","prompt"],s);const a=x(e,["referenceImages"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>bne(l))),v(r,["instances[0]","referenceImages"],o)}const i=x(e,["config"]);return i!=null&&v(r,["config"],Cne(i,r)),r}function _ne(t,e){const r={},n=x(t,["includeRaiReason"]);e!==void 0&&n!=null&&v(e,["parameters","includeRaiReason"],n);const s=x(t,["outputMimeType"]);e!==void 0&&s!=null&&v(e,["parameters","outputOptions","mimeType"],s);const a=x(t,["outputCompressionQuality"]);e!==void 0&&a!=null&&v(e,["parameters","outputOptions","compressionQuality"],a);const i=x(t,["enhanceInputImage"]);e!==void 0&&i!=null&&v(e,["parameters","upscaleConfig","enhanceInputImage"],i);const o=x(t,["imagePreservationFactor"]);e!==void 0&&o!=null&&v(e,["parameters","upscaleConfig","imagePreservationFactor"],o);const l=x(t,["numberOfImages"]);e!==void 0&&l!=null&&v(e,["parameters","sampleCount"],l);const u=x(t,["mode"]);return e!==void 0&&u!=null&&v(e,["parameters","mode"],u),r}function Sne(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const s=x(e,["image"]);s!=null&&v(r,["instances[0]","image"],Vw(s));const a=x(e,["upscaleFactor"]);a!=null&&v(r,["parameters","upscaleConfig","upscaleFactor"],a);const i=x(e,["config"]);return i!=null&&v(r,["config"],_ne(i,r)),r}function Tne(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","name"],$n(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],s),r}function Nne(t,e,r){const n={},s=x(e,["pageSize"]);r!==void 0&&s!=null&&v(r,["_query","pageSize"],s);const a=x(e,["pageToken"]);r!==void 0&&a!=null&&v(r,["_query","pageToken"],a);const i=x(e,["filter"]);r!==void 0&&i!=null&&v(r,["_query","filter"],i);const o=x(e,["queryBase"]);return r!==void 0&&o!=null&&v(r,["_url","models_url"],EM(t,o)),n}function Bne(t,e){const r={},n=x(e,["config"]);return n!=null&&v(r,["config"],Nne(t,n,r)),r}function kne(t,e){const r={},n=x(t,["displayName"]);e!==void 0&&n!=null&&v(e,["displayName"],n);const s=x(t,["description"]);e!==void 0&&s!=null&&v(e,["description"],s);const a=x(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&v(e,["defaultCheckpointId"],a),r}function Ine(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],kne(s,r)),r}function Fne(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","name"],$n(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],s),r}function Dne(t,e){const r={},n=x(t,["systemInstruction"]);e!==void 0&&n!=null&&v(e,["systemInstruction"],ap(Gi(n)));const s=x(t,["tools"]);if(e!==void 0&&s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>jM(o))),v(e,["tools"],i)}const a=x(t,["generationConfig"]);return e!==void 0&&a!=null&&v(e,["generationConfig"],a),r}function Rne(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const s=x(e,["contents"]);if(s!=null){let i=ql(s);Array.isArray(i)&&(i=i.map(o=>ap(o))),v(r,["contents"],i)}const a=x(e,["config"]);return a!=null&&v(r,["config"],Dne(a,r)),r}function Lne(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const s=x(e,["contents"]);if(s!=null){let i=ql(s);Array.isArray(i)&&(i=i.map(o=>ap(o))),v(r,["contents"],i)}const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function Une(t){const e={},r=x(t,["uri"]);r!=null&&v(e,["gcsUri"],r);const n=x(t,["videoBytes"]);n!=null&&v(e,["bytesBase64Encoded"],qh(n));const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function Mne(t,e){const r={},n=x(t,["numberOfVideos"]);e!==void 0&&n!=null&&v(e,["parameters","sampleCount"],n);const s=x(t,["outputGcsUri"]);e!==void 0&&s!=null&&v(e,["parameters","storageUri"],s);const a=x(t,["fps"]);e!==void 0&&a!=null&&v(e,["parameters","fps"],a);const i=x(t,["durationSeconds"]);e!==void 0&&i!=null&&v(e,["parameters","durationSeconds"],i);const o=x(t,["seed"]);e!==void 0&&o!=null&&v(e,["parameters","seed"],o);const l=x(t,["aspectRatio"]);e!==void 0&&l!=null&&v(e,["parameters","aspectRatio"],l);const u=x(t,["resolution"]);e!==void 0&&u!=null&&v(e,["parameters","resolution"],u);const d=x(t,["personGeneration"]);e!==void 0&&d!=null&&v(e,["parameters","personGeneration"],d);const h=x(t,["pubsubTopic"]);e!==void 0&&h!=null&&v(e,["parameters","pubsubTopic"],h);const m=x(t,["negativePrompt"]);e!==void 0&&m!=null&&v(e,["parameters","negativePrompt"],m);const g=x(t,["enhancePrompt"]);e!==void 0&&g!=null&&v(e,["parameters","enhancePrompt"],g);const b=x(t,["generateAudio"]);e!==void 0&&b!=null&&v(e,["parameters","generateAudio"],b);const y=x(t,["lastFrame"]);e!==void 0&&y!=null&&v(e,["instances[0]","lastFrame"],Vw(y));const _=x(t,["compressionQuality"]);return e!==void 0&&_!=null&&v(e,["parameters","compressionQuality"],_),r}function Pne(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const s=x(e,["prompt"]);s!=null&&v(r,["instances[0]","prompt"],s);const a=x(e,["image"]);a!=null&&v(r,["instances[0]","image"],Vw(a));const i=x(e,["video"]);i!=null&&v(r,["instances[0]","video"],Une(i));const o=x(e,["config"]);return o!=null&&v(r,["config"],Mne(o,r)),r}function jne(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function One(t){const e={},r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function Qne(t){const e={},r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function Hne(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],jne(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],One(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],Qne(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function Vne(t){const e={},r=x(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Hne(a))),v(e,["parts"],s)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function Gne(t){const e={},r=x(t,["citationSources"]);return r!=null&&v(e,["citations"],r),e}function zne(t){const e={},r=x(t,["retrievedUrl"]);r!=null&&v(e,["retrievedUrl"],r);const n=x(t,["urlRetrievalStatus"]);return n!=null&&v(e,["urlRetrievalStatus"],n),e}function qne(t){const e={},r=x(t,["urlMetadata"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>zne(s))),v(e,["urlMetadata"],n)}return e}function Kne(t){const e={},r=x(t,["content"]);r!=null&&v(e,["content"],Vne(r));const n=x(t,["citationMetadata"]);n!=null&&v(e,["citationMetadata"],Gne(n));const s=x(t,["tokenCount"]);s!=null&&v(e,["tokenCount"],s);const a=x(t,["finishReason"]);a!=null&&v(e,["finishReason"],a);const i=x(t,["urlContextMetadata"]);i!=null&&v(e,["urlContextMetadata"],qne(i));const o=x(t,["avgLogprobs"]);o!=null&&v(e,["avgLogprobs"],o);const l=x(t,["groundingMetadata"]);l!=null&&v(e,["groundingMetadata"],l);const u=x(t,["index"]);u!=null&&v(e,["index"],u);const d=x(t,["logprobsResult"]);d!=null&&v(e,["logprobsResult"],d);const h=x(t,["safetyRatings"]);return h!=null&&v(e,["safetyRatings"],h),e}function fF(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["candidates"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>Kne(l))),v(e,["candidates"],o)}const s=x(t,["modelVersion"]);s!=null&&v(e,["modelVersion"],s);const a=x(t,["promptFeedback"]);a!=null&&v(e,["promptFeedback"],a);const i=x(t,["usageMetadata"]);return i!=null&&v(e,["usageMetadata"],i),e}function $ne(t){const e={},r=x(t,["values"]);return r!=null&&v(e,["values"],r),e}function Wne(){return{}}function Yne(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["embeddings"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>$ne(i))),v(e,["embeddings"],a)}return x(t,["metadata"])!=null&&v(e,["metadata"],Wne()),e}function Xne(t){const e={},r=x(t,["bytesBase64Encoded"]);r!=null&&v(e,["imageBytes"],qh(r));const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function OM(t){const e={},r=x(t,["safetyAttributes","categories"]);r!=null&&v(e,["categories"],r);const n=x(t,["safetyAttributes","scores"]);n!=null&&v(e,["scores"],n);const s=x(t,["contentType"]);return s!=null&&v(e,["contentType"],s),e}function Jne(t){const e={},r=x(t,["_self"]);r!=null&&v(e,["image"],Xne(r));const n=x(t,["raiFilteredReason"]);n!=null&&v(e,["raiFilteredReason"],n);const s=x(t,["_self"]);return s!=null&&v(e,["safetyAttributes"],OM(s)),e}function Zne(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["predictions"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>Jne(i))),v(e,["generatedImages"],a)}const s=x(t,["positivePromptSafetyAttributes"]);return s!=null&&v(e,["positivePromptSafetyAttributes"],OM(s)),e}function ese(t){const e={},r=x(t,["baseModel"]);r!=null&&v(e,["baseModel"],r);const n=x(t,["createTime"]);n!=null&&v(e,["createTime"],n);const s=x(t,["updateTime"]);return s!=null&&v(e,["updateTime"],s),e}function aS(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const s=x(t,["description"]);s!=null&&v(e,["description"],s);const a=x(t,["version"]);a!=null&&v(e,["version"],a);const i=x(t,["_self"]);i!=null&&v(e,["tunedModelInfo"],ese(i));const o=x(t,["inputTokenLimit"]);o!=null&&v(e,["inputTokenLimit"],o);const l=x(t,["outputTokenLimit"]);l!=null&&v(e,["outputTokenLimit"],l);const u=x(t,["supportedGenerationMethods"]);return u!=null&&v(e,["supportedActions"],u),e}function tse(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const s=x(t,["_self"]);if(s!=null){let a=_M(s);Array.isArray(a)&&(a=a.map(i=>aS(i))),v(e,["models"],a)}return e}function rse(){return{}}function nse(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["totalTokens"]);n!=null&&v(e,["totalTokens"],n);const s=x(t,["cachedContentTokenCount"]);return s!=null&&v(e,["cachedContentTokenCount"],s),e}function sse(t){const e={},r=x(t,["video","uri"]);r!=null&&v(e,["uri"],r);const n=x(t,["video","encodedVideo"]);n!=null&&v(e,["videoBytes"],qh(n));const s=x(t,["encoding"]);return s!=null&&v(e,["mimeType"],s),e}function ase(t){const e={},r=x(t,["_self"]);return r!=null&&v(e,["video"],sse(r)),e}function ise(t){const e={},r=x(t,["generatedSamples"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>ase(i))),v(e,["generatedVideos"],a)}const n=x(t,["raiMediaFilteredCount"]);n!=null&&v(e,["raiMediaFilteredCount"],n);const s=x(t,["raiMediaFilteredReasons"]);return s!=null&&v(e,["raiMediaFilteredReasons"],s),e}function ose(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["metadata"]);n!=null&&v(e,["metadata"],n);const s=x(t,["done"]);s!=null&&v(e,["done"],s);const a=x(t,["error"]);a!=null&&v(e,["error"],a);const i=x(t,["response","generateVideoResponse"]);return i!=null&&v(e,["response"],ise(i)),e}function lse(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function cse(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["data"]);n!=null&&v(e,["data"],n);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function use(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function Ase(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],lse(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],cse(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],use(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function dse(t){const e={},r=x(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Ase(a))),v(e,["parts"],s)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function fse(t){const e={},r=x(t,["citations"]);return r!=null&&v(e,["citations"],r),e}function hse(t){const e={},r=x(t,["retrievedUrl"]);r!=null&&v(e,["retrievedUrl"],r);const n=x(t,["urlRetrievalStatus"]);return n!=null&&v(e,["urlRetrievalStatus"],n),e}function mse(t){const e={},r=x(t,["urlMetadata"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>hse(s))),v(e,["urlMetadata"],n)}return e}function pse(t){const e={},r=x(t,["content"]);r!=null&&v(e,["content"],dse(r));const n=x(t,["citationMetadata"]);n!=null&&v(e,["citationMetadata"],fse(n));const s=x(t,["finishMessage"]);s!=null&&v(e,["finishMessage"],s);const a=x(t,["finishReason"]);a!=null&&v(e,["finishReason"],a);const i=x(t,["urlContextMetadata"]);i!=null&&v(e,["urlContextMetadata"],mse(i));const o=x(t,["avgLogprobs"]);o!=null&&v(e,["avgLogprobs"],o);const l=x(t,["groundingMetadata"]);l!=null&&v(e,["groundingMetadata"],l);const u=x(t,["index"]);u!=null&&v(e,["index"],u);const d=x(t,["logprobsResult"]);d!=null&&v(e,["logprobsResult"],d);const h=x(t,["safetyRatings"]);return h!=null&&v(e,["safetyRatings"],h),e}function hF(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["candidates"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>pse(d))),v(e,["candidates"],u)}const s=x(t,["createTime"]);s!=null&&v(e,["createTime"],s);const a=x(t,["responseId"]);a!=null&&v(e,["responseId"],a);const i=x(t,["modelVersion"]);i!=null&&v(e,["modelVersion"],i);const o=x(t,["promptFeedback"]);o!=null&&v(e,["promptFeedback"],o);const l=x(t,["usageMetadata"]);return l!=null&&v(e,["usageMetadata"],l),e}function gse(t){const e={},r=x(t,["truncated"]);r!=null&&v(e,["truncated"],r);const n=x(t,["token_count"]);return n!=null&&v(e,["tokenCount"],n),e}function xse(t){const e={},r=x(t,["values"]);r!=null&&v(e,["values"],r);const n=x(t,["statistics"]);return n!=null&&v(e,["statistics"],gse(n)),e}function vse(t){const e={},r=x(t,["billableCharacterCount"]);return r!=null&&v(e,["billableCharacterCount"],r),e}function yse(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["predictions[]","embeddings"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>xse(i))),v(e,["embeddings"],a)}const s=x(t,["metadata"]);return s!=null&&v(e,["metadata"],vse(s)),e}function wse(t){const e={},r=x(t,["gcsUri"]);r!=null&&v(e,["gcsUri"],r);const n=x(t,["bytesBase64Encoded"]);n!=null&&v(e,["imageBytes"],qh(n));const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function QM(t){const e={},r=x(t,["safetyAttributes","categories"]);r!=null&&v(e,["categories"],r);const n=x(t,["safetyAttributes","scores"]);n!=null&&v(e,["scores"],n);const s=x(t,["contentType"]);return s!=null&&v(e,["contentType"],s),e}function I4(t){const e={},r=x(t,["_self"]);r!=null&&v(e,["image"],wse(r));const n=x(t,["raiFilteredReason"]);n!=null&&v(e,["raiFilteredReason"],n);const s=x(t,["_self"]);s!=null&&v(e,["safetyAttributes"],QM(s));const a=x(t,["prompt"]);return a!=null&&v(e,["enhancedPrompt"],a),e}function bse(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["predictions"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>I4(i))),v(e,["generatedImages"],a)}const s=x(t,["positivePromptSafetyAttributes"]);return s!=null&&v(e,["positivePromptSafetyAttributes"],QM(s)),e}function Cse(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>I4(a))),v(e,["generatedImages"],s)}return e}function Ese(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>I4(a))),v(e,["generatedImages"],s)}return e}function _se(t){const e={},r=x(t,["endpoint"]);r!=null&&v(e,["name"],r);const n=x(t,["deployedModelId"]);return n!=null&&v(e,["deployedModelId"],n),e}function Sse(t){const e={},r=x(t,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&v(e,["baseModel"],r);const n=x(t,["createTime"]);n!=null&&v(e,["createTime"],n);const s=x(t,["updateTime"]);return s!=null&&v(e,["updateTime"],s),e}function Tse(t){const e={},r=x(t,["checkpointId"]);r!=null&&v(e,["checkpointId"],r);const n=x(t,["epoch"]);n!=null&&v(e,["epoch"],n);const s=x(t,["step"]);return s!=null&&v(e,["step"],s),e}function iS(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const s=x(t,["description"]);s!=null&&v(e,["description"],s);const a=x(t,["versionId"]);a!=null&&v(e,["version"],a);const i=x(t,["deployedModels"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(m=>_se(m))),v(e,["endpoints"],h)}const o=x(t,["labels"]);o!=null&&v(e,["labels"],o);const l=x(t,["_self"]);l!=null&&v(e,["tunedModelInfo"],Sse(l));const u=x(t,["defaultCheckpointId"]);u!=null&&v(e,["defaultCheckpointId"],u);const d=x(t,["checkpoints"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(m=>Tse(m))),v(e,["checkpoints"],h)}return e}function Nse(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const s=x(t,["_self"]);if(s!=null){let a=_M(s);Array.isArray(a)&&(a=a.map(i=>iS(i))),v(e,["models"],a)}return e}function Bse(){return{}}function kse(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["totalTokens"]);return n!=null&&v(e,["totalTokens"],n),e}function Ise(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["tokensInfo"]);return n!=null&&v(e,["tokensInfo"],n),e}function Fse(t){const e={},r=x(t,["gcsUri"]);r!=null&&v(e,["uri"],r);const n=x(t,["bytesBase64Encoded"]);n!=null&&v(e,["videoBytes"],qh(n));const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function Dse(t){const e={},r=x(t,["_self"]);return r!=null&&v(e,["video"],Fse(r)),e}function Rse(t){const e={},r=x(t,["videos"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>Dse(i))),v(e,["generatedVideos"],a)}const n=x(t,["raiMediaFilteredCount"]);n!=null&&v(e,["raiMediaFilteredCount"],n);const s=x(t,["raiMediaFilteredReasons"]);return s!=null&&v(e,["raiMediaFilteredReasons"],s),e}function Lse(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["metadata"]);n!=null&&v(e,["metadata"],n);const s=x(t,["done"]);s!=null&&v(e,["done"],s);const a=x(t,["error"]);a!=null&&v(e,["error"],a);const i=x(t,["response"]);return i!=null&&v(e,["response"],Rse(i)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Use="Content-Type",Mse="X-Server-Timeout",Pse="User-Agent",oS="x-goog-api-client",jse="1.12.0",Ose=`google-genai-sdk/${jse}`,Qse="v1beta1",Hse="v1beta",mF=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Vse{constructor(e){var r,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:Qse,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Hse,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&n.push(e.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),r=new URL(e);return r.protocol=r.protocol=="http:"?"ws":"wss",r.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,r,n){const s=[this.getRequestUrlInternal(r)];return n&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,r,n);if(e.queryParams)for(const[i,o]of Object.entries(e.queryParams))s.searchParams.append(i,String(o));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,r,e.abortSignal),this.unaryApiCall(s,a,e.httpMethod)}patchHttpOptions(e,r){const n=JSON.parse(JSON.stringify(e));for(const[s,a]of Object.entries(r))typeof a=="object"?n[s]=Object.assign(Object.assign({},n[s]),a):a!==void 0&&(n[s]=a);return n}async requestStream(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,r,n);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,r,e.abortSignal),this.streamApiCall(s,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,r,n){if(r&&r.timeout||n){const s=new AbortController,a=s.signal;if(r.timeout&&(r==null?void 0:r.timeout)>0){const i=setTimeout(()=>s.abort(),r.timeout);i&&typeof i.unref=="function"&&i.unref()}n&&n.addEventListener("abort",()=>{s.abort()}),e.signal=a}return r&&r.extraBody!==null&&Gse(e,r.extraBody),e.headers=await this.getHeadersInternal(r),e}async unaryApiCall(e,r,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:n})).then(async s=>(await pF(s),new Z_(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,r,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:n})).then(async s=>(await pF(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var r;return mm(this,arguments,function*(){const s=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),a=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let i="";for(;;){const{done:o,value:l}=yield As(s.read());if(o){if(i.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=a.decode(l,{stream:!0});try{const h=JSON.parse(u);if("error"in h){const m=JSON.parse(JSON.stringify(h.error)),g=m.status,b=m.code,y=`got status: ${g}. ${JSON.stringify(h)}`;if(b>=400&&b<600)throw new Qw({message:y,status:b})}}catch(h){if(h.name==="ApiError")throw h}i+=u;let d=i.match(mF);for(;d;){const h=d[1];try{const m=new Response(h,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield As(new Z_(m)),i=i.slice(d[0].length),d=i.match(mF)}catch(m){throw new Error(`exception parsing stream chunk ${h}. ${m}`)}}}}finally{s.releaseLock()}})}async apiCall(e,r){return fetch(e,r).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){const e={},r=Ose+" "+this.clientOptions.userAgentExtra;return e[Pse]=r,e[oS]=r,e[Use]="application/json",e}async getHeadersInternal(e){const r=new Headers;if(e&&e.headers){for(const[n,s]of Object.entries(e.headers))r.append(n,s);e.timeout&&e.timeout>0&&r.append(Mse,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r),r}async uploadFile(e,r){var n;const s={};r!=null&&(s.mimeType=r.mimeType,s.name=r.name,s.displayName=r.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const a=this.clientOptions.uploader,i=await a.stat(e);s.sizeBytes=String(i.size);const o=(n=r==null?void 0:r.mimeType)!==null&&n!==void 0?n:i.type;if(o===void 0||o==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=o;const l=await this.fetchUploadUrl(s,r);return a.upload(e,l,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,r){var n;let s={};r!=null&&r.httpOptions?s=r.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const a={file:e},i=await this.request({path:ar("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:s});if(!i||!(i!=null&&i.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const o=(n=i==null?void 0:i.headers)===null||n===void 0?void 0:n["x-goog-upload-url"];if(o===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return o}}async function pF(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const r=t.status;let n;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?n=await t.json():n={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(n);throw r>=400&&r<600?new Qw({message:s,status:r}):new Error(s)}}function Gse(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let r={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))r=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function n(a,i){const o=Object.assign({},a);for(const l in i)if(Object.prototype.hasOwnProperty.call(i,l)){const u=i[l],d=o[l];u&&typeof u=="object"&&!Array.isArray(u)&&d&&typeof d=="object"&&!Array.isArray(d)?o[l]=n(d,u):(d&&u&&typeof d!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof d}, New type: ${typeof u}. Overwriting.`),o[l]=u)}return o}const s=n(r,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zse="mcp_used/unknown";let qse=!1;function HM(t){for(const e of t)if(Kse(e)||typeof e=="object"&&"inputSchema"in e)return!0;return qse}function VM(t){var e;const r=(e=t[oS])!==null&&e!==void 0?e:"";t[oS]=(r+` ${zse}`).trimStart()}function Kse(t){return t!==null&&typeof t=="object"&&t instanceof F4}function $se(t,e=100){return mm(this,arguments,function*(){let n,s=0;for(;s<e;){const a=yield As(t.listTools({cursor:n}));for(const i of a.tools)yield yield As(i),s++;if(!a.nextCursor)break;n=a.nextCursor}})}class F4{constructor(e=[],r){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=r}static create(e,r){return new F4(e,r)}async initialize(){var e,r,n,s;if(this.mcpTools.length>0)return;const a={},i=[];for(const d of this.mcpClients)try{for(var o=!0,l=(r=void 0,Og($se(d))),u;u=await l.next(),e=u.done,!e;o=!0){s=u.value,o=!1;const h=s;i.push(h);const m=h.name;if(a[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);a[m]=d}}catch(h){r={error:h}}finally{try{!o&&!e&&(n=l.return)&&await n.call(l)}finally{if(r)throw r.error}}this.mcpTools=i,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),VX(this.mcpTools,this.config)}async callTool(e){await this.initialize();const r=[];for(const n of e)if(n.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[n.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const i=await s.callTool({name:n.name,arguments:n.args},void 0,a);r.push({functionResponse:{name:n.name,response:i.isError?{error:i}:i}})}return r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Wse(t,e,r){const n=new LX;let s;r.data instanceof Blob?s=JSON.parse(await r.data.text()):s=JSON.parse(r.data);const a=Vte(s);Object.assign(n,a),e(n)}class Yse{constructor(e,r,n){this.apiClient=e,this.auth=r,this.webSocketFactory=n}async connect(e){var r,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),i=Zse(this.apiClient.getDefaultHeaders()),o=this.apiClient.getApiKey(),l=`${s}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${o}`;let u=()=>{};const d=new Promise(R=>{u=R}),h=e.callbacks,m=function(){u({})},g=this.apiClient,b={onopen:m,onmessage:R=>{Wse(g,h.onmessage,R)},onerror:(r=h==null?void 0:h.onerror)!==null&&r!==void 0?r:function(R){},onclose:(n=h==null?void 0:h.onclose)!==null&&n!==void 0?n:function(R){}},y=this.webSocketFactory.create(l,Jse(i),b);y.connect(),await d;const _=$n(this.apiClient,e.model),N=UM({model:_}),k=sS({setup:N});return y.send(JSON.stringify(k)),new Xse(y,this.apiClient)}}class Xse{constructor(e,r){this.conn=e,this.apiClient=r}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const r=Qee(e),n=MM(r);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const r=Hee(e),n=sS(r);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const r=sS({playbackControl:e});this.conn.send(JSON.stringify(r))}play(){this.sendPlaybackControl(am.PLAY)}pause(){this.sendPlaybackControl(am.PAUSE)}stop(){this.sendPlaybackControl(am.STOP)}resetContext(){this.sendPlaybackControl(am.RESET_CONTEXT)}close(){this.conn.close()}}function Jse(t){const e={};return t.forEach((r,n)=>{e[n]=r}),e}function Zse(t){const e=new Headers;for(const[r,n]of Object.entries(t))e.append(r,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eae="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function tae(t,e,r){const n=new RX;let s;r.data instanceof Blob?s=await r.data.text():r.data instanceof ArrayBuffer?s=new TextDecoder().decode(r.data):s=r.data;const a=JSON.parse(s);if(t.isVertexAI()){const i=nre(a);Object.assign(n,i)}else{const i=Rte(a);Object.assign(n,i)}e(n)}class rae{constructor(e,r,n){this.apiClient=e,this.auth=r,this.webSocketFactory=n,this.music=new Yse(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var r,n,s,a,i,o;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let d;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&HM(e.config.tools)&&VM(h);const m=iae(h);if(this.apiClient.isVertexAI())d=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m);else{const B=this.apiClient.getApiKey();let Q="BidiGenerateContent",D="key";B!=null&&B.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),Q="BidiGenerateContentConstrained",D="access_token"),d=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.${Q}?${D}=${B}`}let g=()=>{};const b=new Promise(B=>{g=B}),y=e.callbacks,_=function(){var B;(B=y==null?void 0:y.onopen)===null||B===void 0||B.call(y),g({})},N=this.apiClient,k={onopen:_,onmessage:B=>{tae(N,y.onmessage,B)},onerror:(r=y==null?void 0:y.onerror)!==null&&r!==void 0?r:function(B){},onclose:(n=y==null?void 0:y.onclose)!==null&&n!==void 0?n:function(B){}},R=this.webSocketFactory.create(d,aae(m),k);R.connect(),await b;let M=$n(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&M.startsWith("publishers/")){const B=this.apiClient.getProject(),Q=this.apiClient.getLocation();M=`projects/${B}/locations/${Q}/`+M}let j={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[y2.AUDIO]}:e.config.responseModalities=[y2.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const L=(o=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[],C=[];for(const B of L)if(this.isCallableTool(B)){const Q=B;C.push(await Q.tool())}else C.push(B);C.length>0&&(e.config.tools=C);const E={model:M,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?j=mte(this.apiClient,E):j=Mee(this.apiClient,E),delete j.config,R.send(JSON.stringify(j)),new sae(R,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const nae={turnComplete:!0};class sae{constructor(e,r){this.conn=e,this.apiClient=r}tLiveClientContent(e,r){if(r.turns!==null&&r.turns!==void 0){let n=[];try{n=ql(r.turns),e.isVertexAI()?n=n.map(s=>ap(s)):n=n.map(s=>Hw(s))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof r.turns}'`)}return{clientContent:{turns:n,turnComplete:r.turnComplete}}}return{clientContent:{turnComplete:r.turnComplete}}}tLiveClienttToolResponse(e,r){let n=[];if(r.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(r.functionResponses)?n=r.functionResponses:n=[r.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const a of n){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(eae)}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},nae),e);const r=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(r))}sendRealtimeInput(e){let r={};this.apiClient.isVertexAI()?r={realtimeInput:xte(e)}:r={realtimeInput:Oee(e)},this.conn.send(JSON.stringify(r))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const r=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(r))}close(){this.conn.close()}}function aae(t){const e={};return t.forEach((r,n)=>{e[n]=r}),e}function iae(t){const e=new Headers;for(const[r,n]of Object.entries(t))e.append(r,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gF=10;function xF(t){var e,r,n;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const i of(r=t==null?void 0:t.tools)!==null&&r!==void 0?r:[])if(pm(i)){s=!0;break}if(!s)return!0;const a=(n=t==null?void 0:t.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function pm(t){return"callTool"in t&&typeof t.callTool=="function"}function oae(t){var e,r,n;return(n=(r=(e=t.config)===null||e===void 0?void 0:e.tools)===null||r===void 0?void 0:r.some(s=>pm(s)))!==null&&n!==void 0?n:!1}function lae(t){var e,r,n;return(n=(r=(e=t.config)===null||e===void 0?void 0:e.tools)===null||r===void 0?void 0:r.some(s=>!pm(s)))!==null&&n!==void 0?n:!1}function vF(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cae extends zh{constructor(e){super(),this.apiClient=e,this.generateContent=async r=>{var n,s,a,i,o;const l=await this.processParamsMaybeAddMcpUsage(r);if(this.maybeMoveToResponseJsonSchem(r),!oae(r)||xF(r.config))return await this.generateContentInternal(l);if(lae(r))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let u,d;const h=ql(l.contents),m=(a=(s=(n=l.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:gF;let g=0;for(;g<m&&(u=await this.generateContentInternal(l),!(!u.functionCalls||u.functionCalls.length===0));){const b=u.candidates[0].content,y=[];for(const _ of(o=(i=r.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[])if(pm(_)){const k=await _.callTool(u.functionCalls);y.push(...k)}g++,d={role:"user",parts:y},l.contents=ql(l.contents),l.contents.push(b),l.contents.push(d),vF(l.config)&&(h.push(b),h.push(d))}return vF(l.config)&&(u.automaticFunctionCallingHistory=h),u},this.generateContentStream=async r=>{if(this.maybeMoveToResponseJsonSchem(r),xF(r.config)){const n=await this.processParamsMaybeAddMcpUsage(r);return await this.generateContentStreamInternal(n)}else return await this.processAfcStream(r)},this.generateImages=async r=>await this.generateImagesInternal(r).then(n=>{var s;let a;const i=[];if(n!=null&&n.generatedImages)for(const l of n.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((s=l==null?void 0:l.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?a=l==null?void 0:l.safetyAttributes:i.push(l);let o;return a?o={generatedImages:i,positivePromptSafetyAttributes:a,sdkHttpResponse:n.sdkHttpResponse}:o={generatedImages:i,sdkHttpResponse:n.sdkHttpResponse},o}),this.list=async r=>{var n;const i={config:Object.assign(Object.assign({},{queryBase:!0}),r==null?void 0:r.config)};if(this.apiClient.isVertexAI()&&!i.config.queryBase){if(!((n=i.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");i.config.filter="labels.tune-type:*"}return new o1(Ih.PAGED_ITEM_MODELS,o=>this.listInternal(o),await this.listInternal(i),i)},this.editImage=async r=>{const n={model:r.model,prompt:r.prompt,referenceImages:[],config:r.config};return r.referenceImages&&r.referenceImages&&(n.referenceImages=r.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async r=>{let n={numberOfImages:1,mode:"upscale"};r.config&&(n=Object.assign(Object.assign({},n),r.config));const s={model:r.model,image:r.image,upscaleFactor:r.upscaleFactor,config:n};return await this.upscaleImageInternal(s)},this.generateVideos=async r=>await this.generateVideosInternal(r)}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var r,n,s;const a=(r=e.config)===null||r===void 0?void 0:r.tools;if(!a)return e;const i=await Promise.all(a.map(async l=>pm(l)?await l.tool():l)),o={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:i})};if(o.config.tools=i,e.config&&e.config.tools&&HM(e.config.tools)){const l=(s=(n=e.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&s!==void 0?s:{};let u=Object.assign({},l);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),VM(u),o.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return o}async initAfcToolsMap(e){var r,n,s;const a=new Map;for(const i of(n=(r=e.config)===null||r===void 0?void 0:r.tools)!==null&&n!==void 0?n:[])if(pm(i)){const o=i,l=await o.tool();for(const u of(s=l.functionDeclarations)!==null&&s!==void 0?s:[]){if(!u.name)throw new Error("Function declaration name is required.");if(a.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);a.set(u.name,o)}}return a}async processAfcStream(e){var r,n,s;const a=(s=(n=(r=e.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&s!==void 0?s:gF;let i=!1,o=0;const l=await this.initAfcToolsMap(e);return function(u,d,h){var m,g;return mm(this,arguments,function*(){for(var b,y,_,N;o<a;){i&&(o++,i=!1);const j=yield As(u.processParamsMaybeAddMcpUsage(h)),L=yield As(u.generateContentStreamInternal(j)),C=[],E=[];try{for(var k=!0,R=(y=void 0,Og(L)),M;M=yield As(R.next()),b=M.done,!b;k=!0){N=M.value,k=!1;const B=N;if(yield yield As(B),B.candidates&&(!((m=B.candidates[0])===null||m===void 0)&&m.content)){E.push(B.candidates[0].content);for(const Q of(g=B.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(o<a&&Q.functionCall){if(!Q.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(Q.functionCall.name)){const D=yield As(d.get(Q.functionCall.name).callTool([Q.functionCall]));C.push(...D)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${Q.functionCall.name}`)}}}}catch(B){y={error:B}}finally{try{!k&&!b&&(_=R.return)&&(yield As(_.call(R)))}finally{if(y)throw y.error}}if(C.length>0){i=!0;const B=new Jp;B.candidates=[{content:{role:"user",parts:C}}],yield yield As(B);const Q=[];Q.push(...E),Q.push({role:"user",parts:C});const D=ql(h.contents).concat(Q);h.contents=D}else break}})}(this,l,e)}async generateContentInternal(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=dF(this.apiClient,e);return o=ar("{model}:generateContent",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=hF(d),m=new Jp;return Object.assign(m,h),m})}else{const u=AF(this.apiClient,e);return o=ar("{model}:generateContent",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=fF(d),m=new Jp;return Object.assign(m,h),m})}}async generateContentStreamInternal(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=dF(this.apiClient,e);return o=ar("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.requestStream({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}),i.then(function(h){return mm(this,arguments,function*(){var m,g,b,y;try{for(var _=!0,N=Og(h),k;k=yield As(N.next()),m=k.done,!m;_=!0){y=k.value,_=!1;const R=y,M=hF(yield As(R.json()));M.sdkHttpResponse={headers:R.headers};const j=new Jp;Object.assign(j,M),yield yield As(j)}}catch(R){g={error:R}}finally{try{!_&&!m&&(b=N.return)&&(yield As(b.call(N)))}finally{if(g)throw g.error}}})})}else{const u=AF(this.apiClient,e);return o=ar("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.requestStream({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),i.then(function(h){return mm(this,arguments,function*(){var m,g,b,y;try{for(var _=!0,N=Og(h),k;k=yield As(N.next()),m=k.done,!m;_=!0){y=k.value,_=!1;const R=y,M=fF(yield As(R.json()));M.sdkHttpResponse={headers:R.headers};const j=new Jp;Object.assign(j,M),yield yield As(j)}}catch(R){g={error:R}}finally{try{!_&&!m&&(b=N.return)&&(yield As(b.call(N)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=mne(this.apiClient,e);return o=ar("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=yse(d),m=new GI;return Object.assign(m,h),m})}else{const u=Nre(this.apiClient,e);return o=ar("{model}:batchEmbedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Yne(d),m=new GI;return Object.assign(m,h),m})}}async generateImagesInternal(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=gne(this.apiClient,e);return o=ar("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=bse(d),m=new zI;return Object.assign(m,h),m})}else{const u=kre(this.apiClient,e);return o=ar("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Zne(d),m=new zI;return Object.assign(m,h),m})}}async editImageInternal(e){var r,n;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=Ene(this.apiClient,e);return a=ar("{model}:predict",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const u=Cse(l),d=new NX;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var r,n;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=Sne(this.apiClient,e);return a=ar("{model}:predict",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const u=Ese(l),d=new BX;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Tne(this.apiClient,e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>iS(d))}else{const u=Ire(this.apiClient,e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>aS(d))}}async listInternal(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Bne(this.apiClient,e);return o=ar("{models_url}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Nse(d),m=new qI;return Object.assign(m,h),m})}else{const u=Dre(this.apiClient,e);return o=ar("{models_url}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=tse(d),m=new qI;return Object.assign(m,h),m})}}async update(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Ine(this.apiClient,e);return o=ar("{model}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>iS(d))}else{const u=Lre(this.apiClient,e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>aS(d))}}async delete(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Fne(this.apiClient,e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(()=>{const d=Bse(),h=new KI;return Object.assign(h,d),h})}else{const u=Ure(this.apiClient,e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(()=>{const d=rse(),h=new KI;return Object.assign(h,d),h})}}async countTokens(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Rne(this.apiClient,e);return o=ar("{model}:countTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=kse(d),m=new $I;return Object.assign(m,h),m})}else{const u=Pre(this.apiClient,e);return o=ar("{model}:countTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=nse(d),m=new $I;return Object.assign(m,h),m})}}async computeTokens(e){var r,n;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=Lne(this.apiClient,e);return a=ar("{model}:computeTokens",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const u=Ise(l),d=new kX;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Pne(this.apiClient,e);return o=ar("{model}:predictLongRunning",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>{const h=Lse(d),m=new w2;return Object.assign(m,h),m})}else{const u=Qre(this.apiClient,e);return o=ar("{model}:predictLongRunning",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>{const h=ose(d),m=new w2;return Object.assign(m,h),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uae(t){const e={},r=x(t,["operationName"]);r!=null&&v(e,["_url","operationName"],r);const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function Aae(t){const e={},r=x(t,["operationName"]);r!=null&&v(e,["_url","operationName"],r);const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function dae(t){const e={},r=x(t,["operationName"]);r!=null&&v(e,["operationName"],r);const n=x(t,["resourceName"]);n!=null&&v(e,["_url","resourceName"],n);const s=x(t,["config"]);return s!=null&&v(e,["config"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fae extends zh{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const r=e.operation,n=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=r.name.split("/operations/")[0];let a;n&&"httpOptions"in n&&(a=n.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:s,config:{httpOptions:a}});return r._fromAPIResponse({apiResponse:i,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:r.name,config:n});return r._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async get(e){const r=e.operation,n=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=r.name.split("/operations/")[0];let a;n&&"httpOptions"in n&&(a=n.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:s,config:{httpOptions:a}});return r._fromAPIResponse({apiResponse:i,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:r.name,config:n});return r._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async getVideosOperationInternal(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Aae(e);return o=ar("{operationName}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i}else{const u=uae(e);return o=ar("{operationName}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i}}async fetchPredictVideosOperationInternal(e){var r,n;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=dae(e);return a=ar("{resourceName}:fetchPredictOperation",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hae(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function GM(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],hae(r)),e}function mae(t){const e={},r=x(t,["speaker"]);r!=null&&v(e,["speaker"],r);const n=x(t,["voiceConfig"]);return n!=null&&v(e,["voiceConfig"],GM(n)),e}function pae(t){const e={},r=x(t,["speakerVoiceConfigs"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>mae(s))),v(e,["speakerVoiceConfigs"],n)}return e}function gae(t){const e={},r=x(t,["voiceConfig"]);r!=null&&v(e,["voiceConfig"],GM(r));const n=x(t,["multiSpeakerVoiceConfig"]);n!=null&&v(e,["multiSpeakerVoiceConfig"],pae(n));const s=x(t,["languageCode"]);return s!=null&&v(e,["languageCode"],s),e}function xae(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function vae(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function yae(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function wae(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],xae(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],vae(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],yae(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function bae(t){const e={},r=x(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>wae(a))),v(e,["parts"],s)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function Cae(t){const e={},r=x(t,["behavior"]);r!=null&&v(e,["behavior"],r);const n=x(t,["description"]);n!=null&&v(e,["description"],n);const s=x(t,["name"]);s!=null&&v(e,["name"],s);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function Eae(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function _ae(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],Eae(r)),e}function Sae(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function Tae(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],Sae(r)),e}function Nae(){return{}}function Bae(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>Cae(u))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["googleSearch"]);n!=null&&v(e,["googleSearch"],_ae(n));const s=x(t,["googleSearchRetrieval"]);if(s!=null&&v(e,["googleSearchRetrieval"],Tae(s)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],Nae());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function kae(t){const e={},r=x(t,["handle"]);if(r!=null&&v(e,["handle"],r),x(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function yF(){return{}}function Iae(t){const e={},r=x(t,["disabled"]);r!=null&&v(e,["disabled"],r);const n=x(t,["startOfSpeechSensitivity"]);n!=null&&v(e,["startOfSpeechSensitivity"],n);const s=x(t,["endOfSpeechSensitivity"]);s!=null&&v(e,["endOfSpeechSensitivity"],s);const a=x(t,["prefixPaddingMs"]);a!=null&&v(e,["prefixPaddingMs"],a);const i=x(t,["silenceDurationMs"]);return i!=null&&v(e,["silenceDurationMs"],i),e}function Fae(t){const e={},r=x(t,["automaticActivityDetection"]);r!=null&&v(e,["automaticActivityDetection"],Iae(r));const n=x(t,["activityHandling"]);n!=null&&v(e,["activityHandling"],n);const s=x(t,["turnCoverage"]);return s!=null&&v(e,["turnCoverage"],s),e}function Dae(t){const e={},r=x(t,["targetTokens"]);return r!=null&&v(e,["targetTokens"],r),e}function Rae(t){const e={},r=x(t,["triggerTokens"]);r!=null&&v(e,["triggerTokens"],r);const n=x(t,["slidingWindow"]);return n!=null&&v(e,["slidingWindow"],Dae(n)),e}function Lae(t){const e={},r=x(t,["proactiveAudio"]);return r!=null&&v(e,["proactiveAudio"],r),e}function Uae(t,e){const r={},n=x(t,["generationConfig"]);e!==void 0&&n!=null&&v(e,["setup","generationConfig"],n);const s=x(t,["responseModalities"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","responseModalities"],s);const a=x(t,["temperature"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","temperature"],a);const i=x(t,["topP"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig","topP"],i);const o=x(t,["topK"]);e!==void 0&&o!=null&&v(e,["setup","generationConfig","topK"],o);const l=x(t,["maxOutputTokens"]);e!==void 0&&l!=null&&v(e,["setup","generationConfig","maxOutputTokens"],l);const u=x(t,["mediaResolution"]);e!==void 0&&u!=null&&v(e,["setup","generationConfig","mediaResolution"],u);const d=x(t,["seed"]);e!==void 0&&d!=null&&v(e,["setup","generationConfig","seed"],d);const h=x(t,["speechConfig"]);e!==void 0&&h!=null&&v(e,["setup","generationConfig","speechConfig"],gae(k4(h)));const m=x(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=x(t,["systemInstruction"]);e!==void 0&&g!=null&&v(e,["setup","systemInstruction"],bae(Gi(g)));const b=x(t,["tools"]);if(e!==void 0&&b!=null){let j=np(b);Array.isArray(j)&&(j=j.map(L=>Bae(rp(L)))),v(e,["setup","tools"],j)}const y=x(t,["sessionResumption"]);e!==void 0&&y!=null&&v(e,["setup","sessionResumption"],kae(y));const _=x(t,["inputAudioTranscription"]);e!==void 0&&_!=null&&v(e,["setup","inputAudioTranscription"],yF());const N=x(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&v(e,["setup","outputAudioTranscription"],yF());const k=x(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&v(e,["setup","realtimeInputConfig"],Fae(k));const R=x(t,["contextWindowCompression"]);e!==void 0&&R!=null&&v(e,["setup","contextWindowCompression"],Rae(R));const M=x(t,["proactivity"]);return e!==void 0&&M!=null&&v(e,["setup","proactivity"],Lae(M)),r}function Mae(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["setup","model"],$n(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],Uae(s,r)),r}function Pae(t,e,r){const n={},s=x(e,["expireTime"]);r!==void 0&&s!=null&&v(r,["expireTime"],s);const a=x(e,["newSessionExpireTime"]);r!==void 0&&a!=null&&v(r,["newSessionExpireTime"],a);const i=x(e,["uses"]);r!==void 0&&i!=null&&v(r,["uses"],i);const o=x(e,["liveConnectConstraints"]);r!==void 0&&o!=null&&v(r,["bidiGenerateContentSetup"],Mae(t,o));const l=x(e,["lockAdditionalFields"]);return r!==void 0&&l!=null&&v(r,["fieldMask"],l),n}function jae(t,e){const r={},n=x(e,["config"]);return n!=null&&v(r,["config"],Pae(t,n,r)),r}function Oae(t){const e={},r=x(t,["name"]);return r!=null&&v(e,["name"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qae(t){const e=[];for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const n=t[r];if(typeof n=="object"&&n!=null&&Object.keys(n).length>0){const s=Object.keys(n).map(a=>`${r}.${a}`);e.push(...s)}else e.push(r)}return e.join(",")}function Hae(t,e){let r=null;const n=t.bidiGenerateContentSetup;if(typeof n=="object"&&n!==null&&"setup"in n){const a=n.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,r=a):delete t.bidiGenerateContentSetup}else n!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(r){const a=Qae(r);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const i=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let o=[];s.length>0&&(o=s.map(u=>i.includes(u)?`generationConfig.${u}`:u));const l=[];a&&l.push(a),o.length>0&&l.push(...o),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class Vae extends zh{constructor(e){super(),this.apiClient=e}async create(e){var r,n;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const o=jae(this.apiClient,e);a=ar("auth_tokens",o._url),i=o._query,delete o.config,delete o._url,delete o._query;const l=Hae(o,e.config);return s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),s.then(u=>Oae(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gae(t){const e={},r=x(t,["name"]);r!=null&&v(e,["_url","name"],r);const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function zae(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const s=x(t,["pageToken"]);e!==void 0&&s!=null&&v(e,["_query","pageToken"],s);const a=x(t,["filter"]);return e!==void 0&&a!=null&&v(e,["_query","filter"],a),r}function qae(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],zae(r,e)),e}function Kae(t){const e={},r=x(t,["textInput"]);r!=null&&v(e,["textInput"],r);const n=x(t,["output"]);return n!=null&&v(e,["output"],n),e}function $ae(t){const e={};if(x(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(x(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=x(t,["examples"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>Kae(s))),v(e,["examples","examples"],n)}return e}function Wae(t,e){const r={};if(x(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const n=x(t,["tunedModelDisplayName"]);if(e!==void 0&&n!=null&&v(e,["displayName"],n),x(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=x(t,["epochCount"]);e!==void 0&&s!=null&&v(e,["tuningTask","hyperparameters","epochCount"],s);const a=x(t,["learningRateMultiplier"]);if(a!=null&&v(r,["tuningTask","hyperparameters","learningRateMultiplier"],a),x(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(x(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const i=x(t,["batchSize"]);e!==void 0&&i!=null&&v(e,["tuningTask","hyperparameters","batchSize"],i);const o=x(t,["learningRate"]);return e!==void 0&&o!=null&&v(e,["tuningTask","hyperparameters","learningRate"],o),r}function Yae(t){const e={},r=x(t,["baseModel"]);r!=null&&v(e,["baseModel"],r);const n=x(t,["trainingDataset"]);n!=null&&v(e,["tuningTask","trainingData"],$ae(n));const s=x(t,["config"]);return s!=null&&v(e,["config"],Wae(s,e)),e}function Xae(t){const e={},r=x(t,["name"]);r!=null&&v(e,["_url","name"],r);const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function Jae(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const s=x(t,["pageToken"]);e!==void 0&&s!=null&&v(e,["_query","pageToken"],s);const a=x(t,["filter"]);return e!==void 0&&a!=null&&v(e,["_query","filter"],a),r}function Zae(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],Jae(r,e)),e}function eie(t,e){const r={},n=x(t,["gcsUri"]);e!==void 0&&n!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],n);const s=x(t,["vertexDatasetResource"]);if(e!==void 0&&s!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],s),x(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function tie(t,e){const r={},n=x(t,["gcsUri"]);n!=null&&v(r,["validationDatasetUri"],n);const s=x(t,["vertexDatasetResource"]);return e!==void 0&&s!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],s),r}function rie(t,e){const r={},n=x(t,["validationDataset"]);e!==void 0&&n!=null&&v(e,["supervisedTuningSpec"],tie(n,r));const s=x(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&v(e,["tunedModelDisplayName"],s);const a=x(t,["description"]);e!==void 0&&a!=null&&v(e,["description"],a);const i=x(t,["epochCount"]);e!==void 0&&i!=null&&v(e,["supervisedTuningSpec","hyperParameters","epochCount"],i);const o=x(t,["learningRateMultiplier"]);e!==void 0&&o!=null&&v(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],o);const l=x(t,["exportLastCheckpointOnly"]);e!==void 0&&l!=null&&v(e,["supervisedTuningSpec","exportLastCheckpointOnly"],l);const u=x(t,["adapterSize"]);if(e!==void 0&&u!=null&&v(e,["supervisedTuningSpec","hyperParameters","adapterSize"],u),x(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(x(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return r}function nie(t){const e={},r=x(t,["baseModel"]);r!=null&&v(e,["baseModel"],r);const n=x(t,["trainingDataset"]);n!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],eie(n,e));const s=x(t,["config"]);return s!=null&&v(e,["config"],rie(s,e)),e}function sie(t){const e={},r=x(t,["name"]);r!=null&&v(e,["model"],r);const n=x(t,["name"]);return n!=null&&v(e,["endpoint"],n),e}function zM(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const s=x(t,["state"]);s!=null&&v(e,["state"],bM(s));const a=x(t,["createTime"]);a!=null&&v(e,["createTime"],a);const i=x(t,["tuningTask","startTime"]);i!=null&&v(e,["startTime"],i);const o=x(t,["tuningTask","completeTime"]);o!=null&&v(e,["endTime"],o);const l=x(t,["updateTime"]);l!=null&&v(e,["updateTime"],l);const u=x(t,["description"]);u!=null&&v(e,["description"],u);const d=x(t,["baseModel"]);d!=null&&v(e,["baseModel"],d);const h=x(t,["_self"]);h!=null&&v(e,["tunedModel"],sie(h));const m=x(t,["distillationSpec"]);m!=null&&v(e,["distillationSpec"],m);const g=x(t,["experiment"]);g!=null&&v(e,["experiment"],g);const b=x(t,["labels"]);b!=null&&v(e,["labels"],b);const y=x(t,["pipelineJob"]);y!=null&&v(e,["pipelineJob"],y);const _=x(t,["satisfiesPzi"]);_!=null&&v(e,["satisfiesPzi"],_);const N=x(t,["satisfiesPzs"]);N!=null&&v(e,["satisfiesPzs"],N);const k=x(t,["serviceAccount"]);k!=null&&v(e,["serviceAccount"],k);const R=x(t,["tunedModelDisplayName"]);return R!=null&&v(e,["tunedModelDisplayName"],R),e}function aie(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const s=x(t,["tunedModels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>zM(i))),v(e,["tuningJobs"],a)}return e}function iie(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const s=x(t,["metadata"]);s!=null&&v(e,["metadata"],s);const a=x(t,["done"]);a!=null&&v(e,["done"],a);const i=x(t,["error"]);return i!=null&&v(e,["error"],i),e}function oie(t){const e={},r=x(t,["checkpointId"]);r!=null&&v(e,["checkpointId"],r);const n=x(t,["epoch"]);n!=null&&v(e,["epoch"],n);const s=x(t,["step"]);s!=null&&v(e,["step"],s);const a=x(t,["endpoint"]);return a!=null&&v(e,["endpoint"],a),e}function lie(t){const e={},r=x(t,["model"]);r!=null&&v(e,["model"],r);const n=x(t,["endpoint"]);n!=null&&v(e,["endpoint"],n);const s=x(t,["checkpoints"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>oie(i))),v(e,["checkpoints"],a)}return e}function lS(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const s=x(t,["state"]);s!=null&&v(e,["state"],bM(s));const a=x(t,["createTime"]);a!=null&&v(e,["createTime"],a);const i=x(t,["startTime"]);i!=null&&v(e,["startTime"],i);const o=x(t,["endTime"]);o!=null&&v(e,["endTime"],o);const l=x(t,["updateTime"]);l!=null&&v(e,["updateTime"],l);const u=x(t,["error"]);u!=null&&v(e,["error"],u);const d=x(t,["description"]);d!=null&&v(e,["description"],d);const h=x(t,["baseModel"]);h!=null&&v(e,["baseModel"],h);const m=x(t,["tunedModel"]);m!=null&&v(e,["tunedModel"],lie(m));const g=x(t,["supervisedTuningSpec"]);g!=null&&v(e,["supervisedTuningSpec"],g);const b=x(t,["tuningDataStats"]);b!=null&&v(e,["tuningDataStats"],b);const y=x(t,["encryptionSpec"]);y!=null&&v(e,["encryptionSpec"],y);const _=x(t,["partnerModelTuningSpec"]);_!=null&&v(e,["partnerModelTuningSpec"],_);const N=x(t,["distillationSpec"]);N!=null&&v(e,["distillationSpec"],N);const k=x(t,["experiment"]);k!=null&&v(e,["experiment"],k);const R=x(t,["labels"]);R!=null&&v(e,["labels"],R);const M=x(t,["pipelineJob"]);M!=null&&v(e,["pipelineJob"],M);const j=x(t,["satisfiesPzi"]);j!=null&&v(e,["satisfiesPzi"],j);const L=x(t,["satisfiesPzs"]);L!=null&&v(e,["satisfiesPzs"],L);const C=x(t,["serviceAccount"]);C!=null&&v(e,["serviceAccount"],C);const E=x(t,["tunedModelDisplayName"]);return E!=null&&v(e,["tunedModelDisplayName"],E),e}function cie(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const s=x(t,["tuningJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>lS(i))),v(e,["tuningJobs"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uie extends zh{constructor(e){super(),this.apiClient=e,this.get=async r=>await this.getInternal(r),this.list=async(r={})=>new o1(Ih.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(r),r),this.tune=async r=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(r);{const n=await this.tuneMldevInternal(r);let s="";return n.metadata!==void 0&&n.metadata.tunedModel!==void 0?s=n.metadata.tunedModel:n.name!==void 0&&n.name.includes("/operations/")&&(s=n.name.split("/operations/")[0]),{name:s,state:J_.JOB_STATE_QUEUED}}}}async getInternal(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Xae(e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>lS(d))}else{const u=Gae(e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>zM(d))}}async listInternal(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Zae(e);return o=ar("tuningJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=cie(d),m=new YI;return Object.assign(m,h),m})}else{const u=qae(e);return o=ar("tunedModels",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=aie(d),m=new YI;return Object.assign(m,h),m})}}async tuneInternal(e){var r,n;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=nie(e);return a=ar("tuningJobs",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>lS(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var r,n;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Yae(e);return a=ar("tunedModels",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>iie(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Aie{async download(e,r){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const die=1024*1024*8,fie=3,hie=1e3,mie=2,uE="x-goog-upload-status";async function pie(t,e,r){var n,s,a;let i=0,o=0,l=new Z_(new Response),u="upload";for(i=t.size;o<i;){const h=Math.min(die,i-o),m=t.slice(o,o+h);o+h>=i&&(u+=", finalize");let g=0,b=hie;for(;g<fie&&(l=await r.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(o),"Content-Length":String(h)}}}),!(!((n=l==null?void 0:l.headers)===null||n===void 0)&&n[uE]));)g++,await xie(b),b=b*mie;if(o+=h,((s=l==null?void 0:l.headers)===null||s===void 0?void 0:s[uE])!=="active")break;if(i<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const d=await(l==null?void 0:l.json());if(((a=l==null?void 0:l.headers)===null||a===void 0?void 0:a[uE])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function gie(t){return{size:t.size,type:t.type}}function xie(t){return new Promise(e=>setTimeout(e,t))}class vie{async upload(e,r,n){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await pie(e,r,n)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await gie(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yie{create(e,r,n){return new wie(e,r,n)}}class wie{constructor(e,r,n){this.url=e,this.headers=r,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wF="x-goog-api-key";class bie{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(wF)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(wF,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cie="gl-node/";class fx{constructor(e){var r;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(r=e.vertexai)!==null&&r!==void 0?r:!1,this.apiKey=e.apiKey;const n=TX(e.httpOptions,e.vertexai,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion;const s=new bie(this.apiKey);this.apiClient=new Vse({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Cie+"web",uploader:new vie,downloader:new Aie}),this.models=new cae(this.apiClient),this.live=new rae(this.apiClient,s,new yie),this.batches=new YJ(this.apiClient),this.chats=new eee(this.models,this.apiClient),this.caches=new XZ(this.apiClient),this.files=new fee(this.apiClient),this.operations=new fae(this.apiClient),this.authTokens=new Vae(this.apiClient),this.tunings=new uie(this.apiClient)}}const bF="apiCallLogs",Eie="lir-sessionUser",$l=t=>{try{const e=localStorage.getItem(Eie);if(!e){console.warn("No se pudo registrar la llamada a la API: no hay usuario en sesión.");return}const r=JSON.parse(e),n=localStorage.getItem(bF),s=n?JSON.parse(n):[],i=[{id:crypto.randomUUID(),timestamp:new Date().toISOString(),userId:r.id,userEmail:r.email,module:t},...s].slice(0,2e3);localStorage.setItem(bF,JSON.stringify(i)),window.dispatchEvent(new Event("storage"))}catch(e){console.error("Error al registrar la llamada a la API:",e)}},Gw="planificaciones",qM="actividades_calendario",KM="eventos_calendario",$M=t=>{var r,n,s;const e=t.data();return{id:t.id,...e,fechaCreacion:((s=(n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r))==null?void 0:s.toISOString())||e.fechaCreacion}},_ie=async(t,e)=>{try{const r={...t,userId:e,fechaCreacion:cr.fromDate(new Date),fechaActualizacion:cr.fromDate(new Date)};return(await Cs(Ft(Tt,Gw),r)).id}catch(r){throw console.error("Error al guardar planificación:",r),new Error("No se pudo guardar la planificación")}},Sie=async(t,e,r)=>{try{const n=yr(Tt,Gw,t),s=await r1(n);if(!s.exists()||s.data().userId!==r)throw new Error("No tienes permisos para actualizar esta planificación");await n1(n,{...e,fechaActualizacion:cr.fromDate(new Date)})}catch(n){throw console.error("Error al actualizar planificación:",n),new Error("No se pudo actualizar la planificación")}},Tie=async(t,e)=>{try{const r=yr(Tt,Gw,t),n=await r1(r);if(!n.exists()||n.data().userId!==e)throw new Error("No tienes permisos para eliminar esta planificación");await mi(r)}catch(r){throw console.error("Error al eliminar planificación:",r),new Error("No se pudo eliminar la planificación")}},Nie=(t,e)=>{const r=er(Ft(Tt,Gw),Fn("userId","==",t),gn("fechaCreacion","desc"));return Tr(r,n=>{const s=n.docs.map($M);e(s)},n=>{console.error("Error en suscripción a planificaciones:",n)})},Bie=async(t,e)=>{try{const r={...t,userId:e,fechaCreacion:cr.fromDate(new Date),fechaActualizacion:cr.fromDate(new Date)};return(await Cs(Ft(Tt,qM),r)).id}catch(r){throw console.error("Error al guardar actividad:",r),new Error("No se pudo guardar la actividad")}},kie=(t,e)=>{const r=er(Ft(Tt,qM),Fn("userId","==",t),gn("fecha","desc"));return Tr(r,n=>{const s=n.docs.map($M);e(s)},n=>{console.error("Error en suscripción a actividades:",n)})},Iie=async(t,e)=>{try{const r={...t,userId:e,fechaCreacion:cr.fromDate(new Date)};return(await Cs(Ft(Tt,KM),r)).id}catch(r){throw console.error("Error al guardar evento:",r),new Error("No se pudo guardar el evento")}},Fie=async(t,e,r,n)=>{try{const s=er(Ft(Tt,KM),Fn("userId","==",t),Fn("date","==",e),Fn("type","==",Yr.ACTIVIDAD_FOCALIZADA),NA(1));return(await ca(s)).docs.some(i=>{const o=i.data();return o.responsables===r&&o.ubicacion===n})}catch(s){return console.error("Error al verificar evento existente:",s),!1}},Die={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_APP_ID:"1:1022861144167:web:7c277dd701dad5986864c2",VITE_FIREBASE_AUTH_DOMAIN:"planificador-145df.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-LKJRFMVC9F",VITE_FIREBASE_MESSAGING_SENDER_ID:"1022861144167",VITE_FIREBASE_PROJECT_ID:"planificador-145df",VITE_FIREBASE_STORAGE_BUCKET:"planificador-145df.appspot.com",VITE_GEMINI_API_KEY:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",VITE_GOOGLE_AI_API_KEY:void 0},Rie=t=>{const[e,r]=ee.useState([]),[n,s]=ee.useState(!0),[a,i]=ee.useState(null);ee.useEffect(()=>t?Nie(t,h=>{r(h),s(!1)}):void 0,[t]);const o=ee.useCallback(async d=>{try{i(null),await _ie(d,t)}catch(h){throw i(h instanceof Error?h.message:"Error al guardar"),h}},[t]),l=ee.useCallback(async(d,h)=>{try{i(null),await Sie(d,h,t)}catch(m){throw i(m instanceof Error?m.message:"Error al actualizar"),m}},[t]),u=ee.useCallback(async d=>{try{i(null),await Tie(d,t)}catch(h){throw i(h instanceof Error?h.message:"Error al eliminar"),h}},[t]);return{planificaciones:e,loading:n,error:a,save:o,update:l,remove:u}},Lie=t=>{const[e,r]=ee.useState([]),[n,s]=ee.useState(!0),[a,i]=ee.useState(null);ee.useEffect(()=>t?kie(t,u=>{r(u),s(!1)}):void 0,[t]);const o=ee.useCallback(async l=>{try{return i(null),await Bie(l,t)}catch(u){throw i(u instanceof Error?u.message:"Error al guardar actividad"),u}},[t]);return{actividades:e,loading:n,error:a,save:o}},Uie=({lesson:t,onClose:e,onSave:r,isLoading:n=!1})=>{const[s,a]=ee.useState(t),i=l=>{a({...s,[l.target.name]:l.target.value})},o=async()=>{try{await r(s),e()}catch(l){console.error("Error al guardar lección:",l)}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:l=>l.stopPropagation(),children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Lección"}),c.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(s).map(([l,u])=>c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:l.replace(/([A-Z])/g," $1")}),c.jsx("textarea",{name:l,value:u,onChange:i,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:n})]},l))}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[c.jsx("button",{onClick:e,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Cancelar"}),c.jsxs("button",{onClick:o,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:n,children:[n&&c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})]})})},Mie=({plan:t,onEditLesson:e,onUseLesson:r,isLoading:n=!1})=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",t.objetivosAprendizaje]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Indicadores de Evaluación:"})," ",t.indicadoresEvaluacion]})]}),c.jsx("div",{className:"space-y-4",children:t.detallesLeccion.map((s,a)=>c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[c.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",a+1,": ",s.actividades]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo:"})," ",s.objetivosAprendizaje]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Contenidos:"})," ",s.contenidosConceptuales]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Habilidad (Bloom):"})," ",s.habilidadesBloom]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Perfil de Egreso:"})," ",s.perfilEgreso]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Interdisciplinariedad:"})," ",s.asignaturasInterdisciplinariedad]})]}),c.jsxs("div",{className:"flex gap-2 mt-4",children:[c.jsx("button",{onClick:()=>e(a,s),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Editar"}),c.jsx("button",{onClick:()=>r(s,t),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200 disabled:opacity-50",disabled:n,children:"Usar para Plan de Clase"})]})]},a))})]}),Pie=({plan:t,onBack:e,onSave:r,isLoading:n=!1})=>{const[s,a]=ee.useState(t),[i,o]=ee.useState(!1),l=d=>{const{name:h,value:m}=d.target,[g,b]=h.split(".");a(g==="momentosClase"?y=>({...y,momentosClase:{...y.momentosClase,[b]:m}}):y=>({...y,[h]:m}))},u=async()=>{o(!0);try{await r(s)}catch(d){console.error("Error al guardar plan de clase:",d)}finally{o(!1)}};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:t.nombreClase}),c.jsx("button",{onClick:e,className:"text-slate-600 hover:text-slate-900 font-semibold disabled:opacity-50",disabled:n||i,children:"← Volver"})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Inicio"}),c.jsx("textarea",{name:"momentosClase.inicio",value:s.momentosClase.inicio,onChange:l,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:n||i})]}),c.jsxs("div",{children:[c.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Desarrollo"}),c.jsx("textarea",{name:"momentosClase.desarrollo",value:s.momentosClase.desarrollo,onChange:l,rows:8,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:n||i})]}),c.jsxs("div",{children:[c.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Cierre"}),c.jsx("textarea",{name:"momentosClase.cierre",value:s.momentosClase.cierre,onChange:l,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:n||i})]})]}),c.jsx("div",{className:"text-right mt-6",children:c.jsxs("button",{onClick:u,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2 ml-auto",disabled:n||i,children:[i&&c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})})]})},jie=({userId:t})=>{const{actividades:e,save:r}=Lie(t),[n,s]=ee.useState("list"),[a,i]=ee.useState(null),[o,l]=ee.useState(!1),[u,d]=ee.useState(!1),h={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[m,g]=ee.useState(h);ee.useEffect(()=>{n==="summary"&&a&&b()},[n,a,t]);const b=async()=>{if(a)try{const L=await Fie(t,a.fecha,a.nombre,a.ubicacion);d(L)}catch(L){console.error("Error al verificar evento en calendario:",L)}},y=L=>{const{name:C,value:E}=L.target;g(B=>({...B,[C]:E}))},_=(L,C,E)=>{g(B=>({...B,tareas:B.tareas.map(Q=>Q.id===L?{...Q,[C]:E}:Q)}))},N=()=>{g(L=>({...L,tareas:[...L.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},k=L=>{g(C=>({...C,tareas:C.tareas.filter(E=>E.id!==L)}))},R=async L=>{L.preventDefault(),l(!0);const C=`Basado en la siguiente información de una actividad, genera un objetivo claro y conciso para esta.
    - Nombre: ${m.nombre}
    - Descripción: ${m.descripcion}
    - Tareas: ${m.tareas.map(E=>E.descripcion).join(", ")}
    El objetivo debe ser breve, empezar con un verbo en infinitivo y enfocarse en el propósito principal de la actividad.`;try{$l("Planificación - Actividad Calendario");const B=await new fx({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).models.generateContent({model:"gemini-2.5-flash",contents:C}),Q={...m,objetivo:B.text.replace(/(\*\*|\*)/g,"")},D=await r(Q),I={...Q,id:D};i(I),s("summary")}catch(E){console.error("Error al generar objetivo con IA:",E),alert("Hubo un error al generar el objetivo. La actividad se guardará sin él.");try{const B={...m,objetivo:"No generado"},Q=await r(B),D={...B,id:Q};i(D),s("summary")}catch(B){console.error("Error al guardar actividad:",B),alert("Error al guardar la actividad. Por favor, intente nuevamente.")}}finally{l(!1)}},M=async L=>{if(!L)return;const C={date:L.fecha,type:Yr.ACTIVIDAD_FOCALIZADA,responsables:L.nombre,ubicacion:L.ubicacion,horario:L.hora};try{await Iie(C,t),d(!0),alert("Actividad añadida al Calendario Académico.")}catch(E){console.error("Error adding to calendar:",E),alert("Hubo un error al agregar la actividad al calendario.")}},j="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white";return n==="form"?c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:c.jsxs("form",{onSubmit:R,className:"space-y-8",children:[c.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[c.jsx("h3",{className:"text-lg font-bold mb-4",children:"Información General"}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("input",{name:"nombre",value:m.nombre,onChange:y,placeholder:"Nombre de la Actividad",className:j,required:!0,disabled:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("input",{name:"fecha",type:"date",value:m.fecha,onChange:y,className:j,required:!0,disabled:o}),c.jsx("input",{name:"hora",type:"time",value:m.hora,onChange:y,className:j,required:!0,disabled:o})]}),c.jsx("textarea",{name:"descripcion",value:m.descripcion,onChange:y,placeholder:"Descripción (objetivos, contenidos, metodología)",rows:4,className:j,required:!0,disabled:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("input",{name:"ubicacion",value:m.ubicacion,onChange:y,placeholder:"Ubicación",className:j,required:!0,disabled:o}),c.jsx("input",{name:"participantes",value:m.participantes,onChange:y,placeholder:"Participantes",className:j,required:!0,disabled:o})]}),c.jsx("textarea",{name:"recursosGenerales",value:m.recursosGenerales,onChange:y,placeholder:"Recursos Generales Necesarios",rows:2,className:j,disabled:o})]})]}),c.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),c.jsx("button",{type:"button",onClick:N,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md disabled:opacity-50",disabled:o,children:"+ Agregar Tarea"})]}),c.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:m.tareas.map((L,C)=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[c.jsx("button",{type:"button",onClick:()=>k(L.id),className:"absolute top-1 right-1 text-red-500 text-lg disabled:opacity-50",disabled:o,children:"×"}),c.jsx("textarea",{value:L.descripcion,onChange:E=>_(L.id,"descripcion",E.target.value),placeholder:`Descripción de la Tarea ${C+1}`,rows:2,className:j,required:!0,disabled:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[c.jsx("input",{value:L.responsable,onChange:E=>_(L.id,"responsable",E.target.value),placeholder:"Responsable",className:j,required:!0,disabled:o}),c.jsx("input",{value:L.recursos,onChange:E=>_(L.id,"recursos",E.target.value),placeholder:"Recursos Necesarios",className:j,disabled:o})]})]},L.id))})]}),c.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[c.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),c.jsx("p",{className:"text-sm",children:"Este objetivo se generará automáticamente a partir de la descripción y las tareas ingresadas. Una vez guardada la actividad, podrá revisar y ajustar el objetivo propuesto por el sistema."})]}),c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{type:"button",onClick:()=>s("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg disabled:opacity-50",disabled:o,children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:o,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center disabled:opacity-50",children:o?c.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):n==="summary"&&a?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[c.jsx("span",{className:"text-2xl",children:"✓"}),c.jsxs("div",{children:[c.jsx("h2",{className:"font-bold text-lg",children:"¡Actividad Planificada con Éxito!"}),c.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuación."})]})]}),c.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),c.jsxs("div",{className:"space-y-4 text-sm",children:[c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Nombre:"}),c.jsx("span",{children:a.nombre})]}),c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"}),c.jsx("span",{children:new Date(`${a.fecha}T${a.hora}`).toLocaleString("es-CL")})]}),c.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-500",children:"Descripción:"}),c.jsx("p",{children:a.descripcion})]}),c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Ubicación:"}),c.jsx("span",{children:a.ubicacion})]}),c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Participantes:"}),c.jsx("span",{children:a.participantes})]}),c.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),c.jsx("p",{children:a.recursosGenerales})]}),c.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),c.jsx("p",{children:a.objetivo})]})]}),c.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[c.jsx("p",{className:"text-sm",children:"¿Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),c.jsx("button",{onClick:()=>M(a),disabled:u,className:`font-bold px-4 py-2 rounded-lg transition-colors ${u?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:u?"✓ Añadido al Calendario":"Añadir al Calendario"})]})]}),c.jsx("button",{onClick:()=>{s("list"),i(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),c.jsx("button",{onClick:()=>{s("form"),g(h)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),c.jsx("div",{className:"space-y-3",children:e.length>0?e.map(L=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:L.nombre}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(L.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",L.ubicacion]})]},L.id)):c.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},Oie=({currentUser:t})=>{const e=t.email||t.id||"",{planificaciones:r,save:n,update:s,remove:a,loading:i}=Rie(e),o={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[l,u]=ee.useState(o),[d,h]=ee.useState(null),[m,g]=ee.useState(!1),[b,y]=ee.useState(null),[_,N]=ee.useState("unidad"),[k,R]=ee.useState(null),[M,j]=ee.useState(null),L=ee.useMemo(()=>t.asignaturas||[],[t.asignaturas]),C=ee.useMemo(()=>{const z=t.cursos||[],W=new Set;return z.forEach(ie=>{ie.startsWith("1º")?W.add("1º Medio"):ie.startsWith("2º")?W.add("2º Medio"):ie.startsWith("3º")?W.add("3º Medio"):ie.startsWith("4º")&&W.add("4º Medio")}),Array.from(W)},[t.cursos]);ee.useEffect(()=>{u(z=>({...z,asignatura:L[0]||"",nivel:C[0]||""}))},[L,C]);const E=z=>{const{name:W,value:ie}=z.target;u(P=>({...P,[W]:W==="cantidadClases"?parseInt(ie,10):ie}))},B=()=>{const{asignatura:z,nivel:W,nombreUnidad:ie,contenidos:P,cantidadClases:Y,observaciones:Z,ideasParaUnidad:te}=l;return`Eres un experto diseñador curricular para la educación media técnico profesional en Chile. Tu tarea es generar una planificación de unidad didáctica completa en formato JSON estructurado, basándote en la información proporcionada.

    **Información Base:**
    - Asignatura: ${z}
    - Nivel: ${W}
    - Nombre de la Unidad: "${ie}"
    - Contenidos clave a trabajar (insumo principal): "${P}"
    - Cantidad de clases para la unidad: ${Y}
    - Ideas y perspectiva del docente para la unidad: "${te||"Ninguna. Sé creativo."}"
    - Observaciones y énfasis del docente: "${Z||"Ninguna"}"

    Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
    1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
    2.  **indicadoresEvaluacion**: Un indicador de evaluación general y observable para la unidad.
    3.  **detallesLeccion**: Un array con EXACTAMENTE ${Y} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
        - **objetivosAprendizaje**: Un objetivo de aprendizaje específico para la lección, redactado en infinitivo.
        - **contenidosConceptuales**: Los conceptos clave que se abordarán en la lección.
        - **habilidadesBloom**: La habilidad principal de la Taxonomía de Bloom que se trabajará (ej: Analizar, Crear, Evaluar).
        - **perfilEgreso**: Conecta la lección con una habilidad del perfil de egreso (ej: "Pensamiento crítico", "Colaboración").
        - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el número de clase entre paréntesis (ej: "Debate grupal (Clase 1)").
        - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podría realizar un trabajo interdisciplinario.

    Asegúrate de que el contenido generado sea coherente, pedagógicamente sólido y esté directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.`},Q=async z=>{if(z.preventDefault(),g(!0),y(null),console.log("🔍 Debug API Key:"),console.log("VITE_GOOGLE_AI_API_KEY:",void 0),console.log("VITE_GEMINI_API_KEY:","AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"),console.log("Todas las variables env:",Die),!l.contenidos||!l.nombreUnidad){y("Los campos 'Nombre de Unidad' y 'Contenidos Clave' son obligatorios."),g(!1);return}try{$l("Planificación - Unidad");const W=new fx({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),ie=B(),P={type:pn.OBJECT,properties:{objetivosAprendizaje:{type:pn.STRING},indicadoresEvaluacion:{type:pn.STRING},detallesLeccion:{type:pn.ARRAY,items:{type:pn.OBJECT,properties:{objetivosAprendizaje:{type:pn.STRING},contenidosConceptuales:{type:pn.STRING},habilidadesBloom:{type:pn.STRING},perfilEgreso:{type:pn.STRING},actividades:{type:pn.STRING},asignaturasInterdisciplinariedad:{type:pn.STRING}},required:["objetivosAprendizaje","contenidosConceptuales","habilidadesBloom","perfilEgreso","actividades","asignaturasInterdisciplinariedad"]}}},required:["objetivosAprendizaje","indicadoresEvaluacion","detallesLeccion"]},Y=await W.models.generateContent({model:"gemini-2.5-flash",contents:ie,config:{responseMimeType:"application/json",responseSchema:P}}),Z=JSON.parse(Y.text),te={fechaCreacion:new Date().toISOString(),autor:t.nombreCompleto,tipo:"Unidad",asignatura:l.asignatura,nivel:l.nivel,nombreUnidad:l.nombreUnidad,contenidos:l.contenidos,cantidadClases:l.cantidadClases,observaciones:l.observaciones,ideasParaUnidad:l.ideasParaUnidad,objetivosAprendizaje:Z.objetivosAprendizaje,indicadoresEvaluacion:Z.indicadoresEvaluacion,detallesLeccion:Z.detallesLeccion};if(d)await s(d.id,te),h({...te,id:d.id});else{const ce=await n(te);h({...te,id:ce})}}catch(W){console.error("Error al generar planificación con IA",W),y("Ocurrió un error al contactar con la IA. Verifique la configuración y reintente.")}finally{g(!1)}},D=async(z,W)=>{g(!0),y(null);const ie=`A partir de la siguiente información de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
    
    - Asignatura: ${W.asignatura}
    - Nivel: ${W.nivel}
    - Objetivo de la clase: ${z.objetivosAprendizaje}
    - Contenidos: ${z.contenidosConceptuales}
    - Actividades sugeridas: ${z.actividades}
    
    Responde SÓLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{$l("Planificación - Utilizar Clase");const P=new fx({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),Y={type:pn.OBJECT,properties:{inicio:{type:pn.STRING},desarrollo:{type:pn.STRING},cierre:{type:pn.STRING}},required:["inicio","desarrollo","cierre"]},Z=await P.models.generateContent({model:"gemini-2.5-flash",contents:ie,config:{responseMimeType:"application/json",responseSchema:Y}}),te=JSON.parse(Z.text),ce={fechaCreacion:new Date().toISOString(),autor:t.nombreCompleto,tipo:"Clase",asignatura:W.asignatura,nivel:W.nivel,contenidos:z.contenidosConceptuales,observaciones:"",nombreClase:z.actividades,duracionClase:80,momentosClase:te,detalleLeccionOrigen:z};await n(ce),alert('¡Plan de clase generado y guardado en la pestaña "Clase"!'),N("clase")}catch(P){console.error("Error al generar plan de clase con IA",P),y("No se pudo generar el plan de clase. Inténtelo de nuevo.")}finally{g(!1)}},I=z=>{z.tipo==="Unidad"&&(u({asignatura:z.asignatura,nivel:z.nivel,nombreUnidad:z.nombreUnidad,contenidos:z.contenidos,cantidadClases:z.cantidadClases,observaciones:z.observaciones,ideasParaUnidad:z.ideasParaUnidad||""}),h(z),window.scrollTo({top:0,behavior:"smooth"}))},O=async z=>{if(window.confirm("¿Está seguro de que desea eliminar esta planificación?"))try{await a(z),(d==null?void 0:d.id)===z&&(h(null),u(o))}catch(W){console.error("Error al eliminar planificación:",W),alert("Error al eliminar la planificación. Por favor, intente nuevamente.")}},G=(z,W)=>{d&&j({planId:d.id,lessonIndex:z,lessonData:W})},se=async z=>{if(M)try{const{planId:W,lessonIndex:ie}=M,P=r.find(te=>te.id===W&&te.tipo==="Unidad");if(!P)return;const Y=[...P.detallesLeccion];Y[ie]=z;const Z={...P,detallesLeccion:Y};await s(W,Z),h(Z),j(null)}catch(W){console.error("Error al actualizar lección:",W),alert("Error al actualizar la lección. Por favor, intente nuevamente.")}},J="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",re=()=>c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete los campos y use la IA para crear una planificación de unidad estructurada."}),i?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):c.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsx("select",{name:"asignatura",value:l.asignatura,onChange:E,className:J,disabled:m,children:L.length>0?L.map(z=>c.jsx("option",{value:z,children:z},z)):c.jsx("option",{disabled:!0,children:"No tiene asignaturas asignadas"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),c.jsx("select",{name:"nivel",value:l.nivel,onChange:E,className:J,disabled:m,children:C.length>0?C.map(z=>c.jsx("option",{value:z,children:z},z)):c.jsx("option",{disabled:!0,children:"No tiene cursos/niveles asignados"})})]}),c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Nombre de Unidad ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"nombreUnidad",value:l.nombreUnidad,onChange:E,className:J,placeholder:"Ej: La Célula y sus procesos",disabled:m})]}),c.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[c.jsxs("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Contenidos Clave ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{name:"contenidos",value:l.contenidos,onChange:E,rows:3,placeholder:"Ingrese los temas, conceptos clave o unidades que la planificación debe abordar.",className:J,disabled:m})]}),c.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[c.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),c.jsx("textarea",{name:"ideasParaUnidad",value:l.ideasParaUnidad,onChange:E,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificación (ej: enfocar en trabajo colaborativo, usar casos prácticos, conectar con la actualidad).",className:J,disabled:m})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),c.jsx("input",{type:"number",name:"cantidadClases",value:l.cantidadClases,onChange:E,className:J,min:"1",max:"20",disabled:m})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (Énfasis)"}),c.jsx("textarea",{name:"observaciones",value:l.observaciones,onChange:E,rows:1,placeholder:"Ej: clase práctica, modelo ABP, juego, reforzamiento...",className:J,disabled:m})]})]}),c.jsx("div",{className:"pt-4 text-right",children:c.jsx("button",{type:"submit",disabled:m||i,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[150px] dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:m?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):d?"Regenerar":"Generar Plan"})}),b&&c.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:b})]})]}),d&&c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisión y Edición"}),c.jsx(Mie,{plan:d,onEditLesson:G,onUseLesson:D,isLoading:m})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),i?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):c.jsx("div",{className:"space-y-4",children:r.filter(z=>z.tipo==="Unidad").length>0?r.filter(z=>z.tipo==="Unidad").map(z=>c.jsx("div",{className:`p-4 border rounded-lg ${(d==null?void 0:d.id)===z.id?"bg-amber-50 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700"}`,children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:z.nombreUnidad}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(z.fechaCreacion).toLocaleString("es-CL")]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",z.contenidos]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>I(z),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm disabled:opacity-50",disabled:m,children:"Ver y Editar"}),c.jsx("button",{onClick:()=>O(z.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 disabled:opacity-50",disabled:m,children:"🗑️"})]})]})},z.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})})]})]}),q=()=>{const z=r.filter(W=>W.tipo==="Clase").sort((W,ie)=>new Date(ie.fechaCreacion).getTime()-new Date(W.fechaCreacion).getTime());return k?c.jsx(Pie,{plan:k,onBack:()=>R(null),onSave:async W=>{try{await s(W.id,W),R(W)}catch(ie){console.error("Error al actualizar plan de clase:",ie),alert("Error al actualizar el plan de clase. Por favor, intente nuevamente.")}},isLoading:m}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Planes de Clase Guardados"}),i?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):c.jsx("div",{className:"space-y-4",children:z.length>0?z.map(W=>c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:W.nombreClase}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(W.fechaCreacion).toLocaleString("es-CL")]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",W.contenidos]})]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("button",{onClick:()=>R(W),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},W.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaña 'Unidad'."})})]})};return!t||!t.email&&!t.id?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),c.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(t)]})]})}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificación"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>N("unidad"),className:`${_==="unidad"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Unidad"}),c.jsx("button",{onClick:()=>N("clase"),className:`${_==="clase"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Clase"}),c.jsx("button",{onClick:()=>N("calendario"),className:`${_==="calendario"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Actividades Calendario"})]})}),_==="unidad"&&re(),_==="clase"&&q(),_==="calendario"&&c.jsx(jie,{userId:e}),M&&c.jsx(Uie,{lesson:M.lessonData,onClose:()=>j(null),onSave:se,isLoading:m})]})},zw="events",Qie=async()=>{try{const t=er(Ft(Kr,zw),gn("date","asc"));return(await ca(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener eventos:",t),new Error("No se pudieron cargar los eventos del calendario")}},Hie=async t=>{try{return{id:(await Cs(Ft(Kr,zw),{...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear evento:",e),new Error("No se pudo crear el evento del calendario")}},Vie=async(t,e)=>{try{const r=yr(Kr,zw,t);await n1(r,{...e,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar evento:",r,"ID:",t),new Error("No se pudo actualizar el evento del calendario")}},Gie=async t=>{try{const e=yr(Kr,zw,t);await mi(e)}catch(e){throw console.error("Error al eliminar evento:",e,"ID:",t),new Error("No se pudo eliminar el evento del calendario")}},zie=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],qie=t=>{switch(t.type){case Yr.EVALUACION:return`${t.subtype} - ${t.asignatura}`;case Yr.ACTO:return`Acto: ${t.ubicacion}`;case Yr.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case Yr.SALIDA_PEDAGOGICA:return`Salida: ${t.ubicacion}`;default:return"Evento"}},Kie=({isOpen:t,onClose:e,onSave:r,onDelete:n,event:s,date:a,isLoading:i})=>{const[o,l]=ee.useState({});ee.useEffect(()=>{l(s||{type:Yr.EVALUACION,subtype:oh.PRUEBA_PARCIAL,asignatura:il[0],curso:la[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[s,t]);const u="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",d=y=>{const{name:_,value:N}=y.target;l(k=>({...k,[_]:N}))},h=y=>{l(_=>{if(_.type===Yr.SALIDA_PEDAGOGICA){const N=_.cursos||[],k=N.includes(y)?N.filter(R=>R!==y):[...N,y];return{..._,cursos:k.sort()}}return _})},m=y=>{var N;y.preventDefault();let _;switch(o.type){case Yr.EVALUACION:const k={date:a,type:Yr.EVALUACION,subtype:o.subtype,asignatura:o.asignatura,curso:o.curso,contenidos:o.contenidos};(o.subtype===oh.RUBRICA||o.subtype===oh.PAUTA_COTEJO)&&((N=o.enlace)!=null&&N.trim())&&(k.enlace=o.enlace.trim()),_=k;break;case Yr.ACTO:_={date:a,type:Yr.ACTO,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case Yr.ACTIVIDAD_FOCALIZADA:_={date:a,type:Yr.ACTIVIDAD_FOCALIZADA,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case Yr.SALIDA_PEDAGOGICA:_={date:a,type:Yr.SALIDA_PEDAGOGICA,responsable:o.responsable,ubicacion:o.ubicacion,cursos:o.cursos};break;default:console.error("Tipo de evento no reconocido");return}r(_)};if(!t)return null;const g=new Date(`${a}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),b=()=>{switch(o.type){case Yr.EVALUACION:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subtipo"}),c.jsx("select",{id:"subtype",name:"subtype",value:o.subtype,onChange:d,required:!0,className:u,children:PY.map(y=>c.jsx("option",{value:y,children:y},y))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsx("select",{id:"asignatura",name:"asignatura",value:o.asignatura,onChange:d,required:!0,className:u,children:il.map(y=>c.jsx("option",{value:y,children:y},y))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsx("select",{id:"curso",name:"curso",value:o.curso,onChange:d,required:!0,className:u,children:la.map(y=>c.jsx("option",{value:y,children:y},y))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenidos"}),c.jsx("textarea",{id:"contenidos",name:"contenidos",value:o.contenidos||"",onChange:d,required:!0,rows:3,className:u})]}),(o.subtype===oh.RUBRICA||o.subtype===oh.PAUTA_COTEJO)&&c.jsxs("div",{children:[c.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),c.jsx("input",{id:"enlace",name:"enlace",type:"url",value:o.enlace||"",onChange:d,placeholder:"https://...",className:u})]})]});case Yr.ACTO:case Yr.ACTIVIDAD_FOCALIZADA:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsables"}),c.jsx("input",{id:"responsables",name:"responsables",type:"text",value:o.responsables||"",onChange:d,required:!0,className:u})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ubicación"}),c.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:u})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Horario"}),c.jsx("input",{id:"horario",name:"horario",type:"text",value:o.horario||"",onChange:d,required:!0,className:u})]})]});case Yr.SALIDA_PEDAGOGICA:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),c.jsx("input",{id:"responsable",name:"responsable",type:"text",value:o.responsable||"",onChange:d,required:!0,className:u})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ubicación/Destino"}),c.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:u})]}),c.jsxs("fieldset",{children:[c.jsx("legend",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),c.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border p-2 rounded-md dark:border-slate-600 text-slate-700 dark:text-slate-300",children:la.map(y=>c.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[c.jsx("input",{type:"checkbox",checked:(o.cursos||[]).includes(y),onChange:()=>h(y),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{children:y})]},y))})]})]});default:return null}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:e,children:c.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg animate-fade-in-up",onClick:y=>y.stopPropagation(),children:c.jsxs("form",{onSubmit:m,children:[c.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:s?"Editar Evento":"Agregar Evento"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6 font-semibold",children:g}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),c.jsx("select",{id:"type",name:"type",value:o.type,onChange:d,className:u,children:Object.values(Yr).map(y=>c.jsx("option",{value:y,children:y},y))})]}),b()]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 px-6 py-4 rounded-b-xl flex justify-between items-center",children:[c.jsx("div",{children:s&&n&&c.jsx("button",{type:"button",onClick:n,disabled:i,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:i?"Eliminando...":"Eliminar"})}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{type:"button",onClick:e,disabled:i,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 disabled:opacity-50",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:i,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 disabled:opacity-50",children:i?"Guardando...":"Guardar"})]})]})]})})})},$ie=({profile:t})=>{const[e,r]=ee.useState(new Date),[n,s]=ee.useState([]),[a,i]=ee.useState(!1),[o,l]=ee.useState(null),[u,d]=ee.useState(!1),[h,m]=ee.useState(Object.values(Yr)),[g,b]=ee.useState(!1),[y,_]=ee.useState(null),[N,k]=ee.useState(null),R=ee.useCallback(async()=>{i(!0);try{const D=await Qie();s(D),l(null)}catch(D){console.error("Error al cargar eventos desde Firestore",D),l("No se pudieron cargar los eventos desde la nube.")}finally{i(!1)}},[]);ee.useEffect(()=>{R()},[R]);const M=ee.useMemo(()=>{const D=e.getFullYear(),I=e.getMonth(),O=new Date(D,I,1).getDay(),G=new Date(D,I+1,0).getDate(),se=[];let J=1;for(let re=0;re<6;re++){const q=[];for(let z=0;z<7;z++)re===0&&z<O||J>G?q.push(null):(q.push(new Date(D,I,J)),J++);if(se.push(q),J>G)break}return se},[e]),j=D=>{m(I=>I.includes(D)?I.filter(O=>O!==D):[...I,D])},L=()=>{h.length===Object.values(Yr).length?m([]):m(Object.values(Yr))},C=D=>{t!==Vt.ESTUDIANTE&&(_(D.toISOString().split("T")[0]),k(null),b(!0))},E=(D,I)=>{I.stopPropagation(),t!==Vt.ESTUDIANTE&&(_(D.date),k(D),b(!0))},B=async D=>{d(!0);try{N?await Vie(N.id,D):await Hie(D),await R(),b(!1)}catch(I){console.error("Error al guardar evento:",I);const O=I instanceof Error?I.message:"Error desconocido";l(`Error al guardar el evento: ${O}`)}finally{d(!1)}},Q=async()=>{if(N){d(!0);try{await Gie(N.id),await R(),b(!1)}catch(D){console.error("Error al eliminar evento:",D);const I=D instanceof Error?D.message:"Error desconocido";l(`No se pudo eliminar el evento: ${I}`)}finally{d(!1)}}};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Calendario Académico"}),a&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando eventos desde la nube..."}),o&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:o}),!a&&n.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay eventos registrados en la nube."}),c.jsx("div",{className:"mb-4 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsx("p",{className:"text-sm",children:"Recuerda que el calendario escolar completo se encuentra disponible en la intranet. Este calendario es de exclusivo uso evaluativo y académico."})})]})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Filtrar por tipo de evento:"}),c.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[c.jsx("button",{onClick:L,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-slate-700 text-white hover:bg-slate-600 dark:bg-slate-600 dark:hover:bg-slate-500 transition-colors",children:h.length===Object.values(Yr).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(Yr).map(D=>c.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2 ${h.includes(D)?`shadow-sm ${zd[D].color}`:"bg-slate-100 text-slate-600 hover:bg-slate-200 opacity-70 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600 dark:opacity-60"}`,children:[c.jsx("input",{type:"checkbox",checked:h.includes(D),onChange:()=>j(D),className:"hidden"}),c.jsx("span",{children:zd[D].icon}),c.jsx("span",{children:zd[D].label})]},D))]})]}),c.jsxs("div",{className:"border dark:border-slate-700 rounded-lg overflow-hidden",children:[c.jsxs("header",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-700/50 border-b dark:border-slate-700",children:[c.jsx("button",{onClick:()=>r(new Date(e.setMonth(e.getMonth()-1))),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300",children:"<"}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize",children:e.toLocaleString("es-CL",{month:"long",year:"numeric"})}),c.jsx("button",{onClick:()=>r(new Date(e.setMonth(e.getMonth()+1))),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300",children:">"}),c.jsx("button",{onClick:()=>r(new Date),className:"ml-4 bg-slate-800 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Hoy"})]}),c.jsx("div",{className:"grid grid-cols-7",children:zie.map(D=>c.jsx("div",{className:"text-center font-semibold text-slate-500 dark:text-slate-400 text-sm py-3 bg-slate-50 dark:bg-slate-700/50 border-b border-r dark:border-slate-700",children:D},D))}),c.jsx("div",{className:"grid grid-cols-7 grid-rows-6",children:M.flat().map((D,I)=>{const O=D&&D.toDateString()===new Date().toDateString(),G=D==null?void 0:D.toISOString().split("T")[0],se=G?n.filter(J=>J.date===G&&h.includes(J.type)):[];return c.jsx("div",{onClick:()=>D&&C(D),className:`border-b border-r dark:border-slate-700 p-2 h-36 flex flex-col overflow-hidden relative group ${D?t!==Vt.ESTUDIANTE?"cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50":"":"bg-slate-50 dark:bg-slate-800/50"}`,children:D&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:`self-end text-sm font-semibold ${O?"bg-amber-400 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-600 dark:text-slate-300"}`,children:D.getDate()}),c.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:se.map(J=>c.jsxs("div",{onClick:re=>E(J,re),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${zd[J.type].color}`,children:[c.jsx("span",{children:zd[J.type].icon}),c.jsx("span",{className:"truncate",children:qie(J)})]},J.id))}),t!==Vt.ESTUDIANTE&&c.jsx("button",{className:"absolute bottom-1 right-1 bg-amber-400 text-white rounded-full h-6 w-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity text-lg font-bold",children:"+"})]})},I)})})]}),g&&c.jsx(Kie,{isOpen:g,onClose:()=>b(!1),onSave:B,onDelete:Q,event:N,date:y,isLoading:u})]})},qw="anuncios",Wie=async()=>{try{const t=er(Ft(Kr,qw),gn("fechaPublicacion","desc"));return(await ca(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener anuncios:",t),new Error("No se pudieron cargar los anuncios")}},Yie=async t=>{try{return{id:(await Cs(Ft(Kr,qw),{...t,fechaPublicacion:t.fechaPublicacion||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear anuncio:",e),new Error("No se pudo crear el anuncio")}},Xie=async(t,e)=>{try{const r=yr(Kr,qw,t);await n1(r,{...e,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar anuncio:",r,"ID:",t),new Error("No se pudo actualizar el anuncio")}},Jie=async t=>{try{const e=yr(Kr,qw,t);await mi(e)}catch(e){throw console.error("Error al eliminar anuncio:",e,"ID:",t),new Error("No se pudo eliminar el anuncio")}},CF=[{bg:"bg-yellow-200 dark:bg-yellow-800/50",rotate:"transform -rotate-2"},{bg:"bg-lime-200 dark:bg-lime-800/50",rotate:"transform rotate-1"},{bg:"bg-sky-200 dark:bg-sky-800/50",rotate:"transform rotate-2"},{bg:"bg-red-200 dark:bg-red-800/50",rotate:"transform -rotate-1"},{bg:"bg-violet-200 dark:bg-violet-800/50",rotate:"transform rotate-1"}],Zie=({currentUser:t})=>{const[e,r]=ee.useState([]),[n,s]=ee.useState(!1),[a,i]=ee.useState(null),[o,l]=ee.useState({titulo:"",mensaje:"",adjunto:""}),[u,d]=ee.useState({tipo:"Todos",cursos:[]}),h=ee.useCallback(async()=>{s(!0);try{const C=await Wie();r(C),i(null)}catch(C){console.error("Error al cargar anuncios desde Firestore",C),i("No se pudieron cargar los anuncios desde la nube.")}finally{s(!1)}},[]);ee.useEffect(()=>{h()},[h]);const m=C=>{const{name:E,value:B}=C.target;l(Q=>({...Q,[E]:B}))},g=C=>{d({tipo:C,cursos:C==="Cursos"?[]:void 0})},b=C=>{d(E=>{var Q;if(E.tipo!=="Cursos")return E;const B=(Q=E.cursos)!=null&&Q.includes(C)?E.cursos.filter(D=>D!==C):[...E.cursos||[],C];return{...E,cursos:B}})},y=async C=>{if(C.preventDefault(),!o.titulo||!o.mensaje){alert("Título y mensaje son obligatorios.");return}if(u.tipo==="Cursos"&&(!u.cursos||u.cursos.length===0)){alert('Debe seleccionar al menos un curso para el destinatario "Cursos".');return}try{const E={fechaPublicacion:new Date().toISOString(),destacado:!1,autor:t.nombreCompleto,profileCreador:t.profile,destinatarios:u,...o};await Yie(E),await h(),l({titulo:"",mensaje:"",adjunto:""}),d({tipo:"Todos",cursos:[]})}catch(E){console.error("Error al crear anuncio:",E),i("Error al publicar el anuncio en la nube.")}},_=async C=>{if(window.confirm("¿Está seguro de que desea eliminar este anuncio?"))try{await Jie(C),await h()}catch(E){console.error("Error al eliminar anuncio:",E),i("No se pudo eliminar el anuncio en la nube.")}},N=async C=>{try{const E=e.find(B=>B.id===C);E&&(await Xie(C,{destacado:!E.destacado}),await h())}catch(E){console.error("Error al actualizar anuncio:",E),i("No se pudo actualizar el estado del anuncio en la nube.")}},k=ee.useMemo(()=>[...e].sort((C,E)=>C.destacado&&!E.destacado?-1:!C.destacado&&E.destacado?1:new Date(E.fechaPublicacion).getTime()-new Date(C.fechaPublicacion).getTime()),[e]),R=ee.useMemo(()=>{const C=t.profile,E=t.curso;return k.filter(B=>{if(C===Vt.SUBDIRECCION)return!0;if(!B.destinatarios)return C!==Vt.ESTUDIANTE;const{tipo:Q,cursos:D}=B.destinatarios;return Q==="Todos"||Q==="Profesores"&&C===Vt.PROFESORADO||Q==="Coordinación TP"&&C===Vt.COORDINACION_TP?!0:Q==="Cursos"?C===Vt.ESTUDIANTE?D==null?void 0:D.includes(E||""):!0:!1})},[k,t]),M=C=>t.profile===Vt.ESTUDIANTE?!1:t.profile===Vt.SUBDIRECCION||t.profile===C.profileCreador,j=()=>t.profile===Vt.SUBDIRECCION||t.profile===Vt.PROFESORADO,L="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Muro de Anuncios"}),n&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anuncios desde la nube..."}),a&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),t.profile!==Vt.ESTUDIANTE?c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Publique un nuevo anuncio para toda la comunidad escolar."}),c.jsxs("form",{onSubmit:y,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Título"}),c.jsx("input",{type:"text",name:"titulo",value:o.titulo,onChange:m,required:!0,className:L})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Mensaje"}),c.jsx("textarea",{name:"mensaje",value:o.mensaje,onChange:m,required:!0,rows:4,className:L})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Destinatarios"}),c.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:["Todos","Cursos","Profesores","Coordinación TP"].map(C=>c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"destinatarioTipo",value:C,checked:u.tipo===C,onChange:()=>g(C),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-slate-300"}),c.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:C.replace("Coordinación TP","Coord. TP")})]},C))})]}),u.tipo==="Cursos"&&c.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Cursos"}),c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-48 overflow-y-auto",children:la.map(C=>{var E;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(E=u.cursos)==null?void 0:E.includes(C),onChange:()=>b(C),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300 bg-slate-100"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:C})]},C)})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"adjunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace adjunto (Opcional)"}),c.jsx("input",{type:"url",name:"adjunto",value:o.adjunto,onChange:m,placeholder:"https://ejemplo.com/documento.pdf",className:L})]}),c.jsx("div",{className:"pt-2 text-right",children:c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Publicar Anuncio"})})]})]}):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Anuncios de la comunidad escolar. Este módulo es de solo lectura."})]}),!n&&R.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay anuncios para mostrar en la nube."}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 py-4",children:!n&&R.length>0&&R.map((C,E)=>{const B=CF[E%CF.length];return c.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${B.bg} ${B.rotate}`,children:[C.destacado&&c.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:c.jsx("span",{className:"text-5xl",role:"img","aria-label":"Anuncio destacado",children:"📌"})}),c.jsx("h2",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-4 break-words",children:C.titulo}),c.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[100px]",children:C.mensaje}),C.adjunto&&c.jsx("div",{className:"font-sans text-sm mb-4",children:c.jsxs("a",{href:C.adjunto,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-semibold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Ver Adjunto"]})}),c.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold",children:C.autor}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(C.fechaPublicacion).toLocaleString("es-CL")})]}),c.jsxs("div",{className:"flex items-center",children:[j()&&c.jsx("button",{onClick:()=>N(C.id),title:C.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:c.jsx("span",{className:`text-xl transition-opacity ${C.destacado?"opacity-100":"opacity-30"}`,children:"📌"})}),M(C)&&c.jsx("button",{onClick:()=>_(C.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},C.id)})})]})},D4="actas_de_reunion",eoe=t=>{var r,n;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion}},toe=t=>{const e=er(Ft(Tt,D4),gn("fechaCreacion","desc"));return Tr(e,n=>{const s=n.docs.map(a=>eoe(a));t(s)},n=>{console.error("Error al suscribirse a las actas:",n),t([])})},roe=async(t,e)=>{try{const r={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,fechaCreacion:cr.fromDate(new Date(t.fechaCreacion))};return(await Cs(Ft(Tt,D4),r)).id}catch(r){throw console.error("Error al crear el acta:",r),new Error("No se pudo crear el acta.")}},noe=async t=>{try{const e=yr(Tt,D4,t);await mi(e)}catch(e){throw console.error("Error al eliminar el acta:",e),new Error("No se pudo eliminar el acta.")}},WM=window.SpeechRecognition||window.webkitSpeechRecognition,EF=!!WM,soe=({isListening:t})=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),aoe=({currentUser:t})=>{const[e,r]=ee.useState([]),[n,s]=ee.useState(null),[a,i]=ee.useState({tipoReunion:oE[0],asistentes:"",textoReunion:""}),[o,l]=ee.useState(!1),[u,d]=ee.useState(!1),[h,m]=ee.useState(!0),[g,b]=ee.useState(null),y=ee.useRef(null);ee.useEffect(()=>{m(!0);const C=toe(E=>{r(E),!n&&E.length>0&&s(E[0]),m(!1)});return()=>C()},[n]);const _=C=>{const{name:E,value:B}=C.target;i(Q=>({...Q,[E]:B}))},N=ee.useCallback(()=>{var C;if(!EF){b("El reconocimiento de voz no es compatible con este navegador.");return}o?(C=y.current)==null||C.stop():(y.current=new WM,y.current.lang="es-CL",y.current.continuous=!0,y.current.interimResults=!0,y.current.onresult=E=>{let B="";for(let Q=E.resultIndex;Q<E.results.length;++Q)E.results[Q].isFinal&&(B+=E.results[Q][0].transcript+". ");i(Q=>({...Q,textoReunion:Q.textoReunion+B}))},y.current.onstart=()=>l(!0),y.current.onend=()=>l(!1),y.current.onerror=E=>{console.error("Speech recognition error",E.error),b(`Error de reconocimiento: ${E.error}`),l(!1)},y.current.start())},[o]),k=async C=>{C.preventDefault();const{tipoReunion:E,asistentes:B,textoReunion:Q}=a;if(!E||!B.trim()||!Q.trim()){b("Todos los campos son obligatorios.");return}d(!0),b(null);try{$l("Generador de Actas");const D="",O=new globalThis.GoogleGenerativeAI(D).getGenerativeModel({model:"gemini-pro"}),G=`
                Analiza el siguiente texto de un acta de reunión y extrae la información clave.
                El texto es una transcripción de lo hablado.
                - Identifica los temas principales discutidos.
                - Extrae un resumen de los acuerdos o decisiones específicas tomadas.
                - Lista cualquier plazo o fecha límite mencionada.
                - Identifica los nombres de las personas a las que se les asignaron responsabilidades o tareas.
                
                Texto del acta:
                "${Q}"
                
                Asistentes a la reunión para referencia de nombres: ${B}
            `,q=(await(await O.generateContent(G)).response).text().replace(/^```json\s*|```\s*$/g,""),z=JSON.parse(q),W={fechaCreacion:new Date().toISOString(),...a,...z},ie=await roe(W,t);i({tipoReunion:oE[0],asistentes:"",textoReunion:""})}catch(D){console.error("Error al analizar acta con IA:",D),b("Ocurrió un error al procesar el acta con la IA. Por favor, revise el texto e inténtelo de nuevo.")}finally{d(!1)}},R=async C=>{if(window.confirm("¿Está seguro de que desea eliminar esta acta?"))try{await noe(C),(n==null?void 0:n.id)===C&&s(e.length>1?e[1]:null)}catch(E){console.error("Error deleting acta:",E),alert("No se pudo eliminar el acta.")}},M=C=>{s(C)},j=C=>C.temas||C.acuerdos||C.plazos||C.responsables?c.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Análisis con IA"}),C.temas&&C.temas.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Temas Tratados"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:C.temas.map((B,Q)=>c.jsx("li",{children:B},Q))})]}),C.acuerdos&&C.acuerdos.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Acuerdos"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:C.acuerdos.map((B,Q)=>c.jsx("li",{children:B},Q))})]}),C.plazos&&C.plazos.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Plazos"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:C.plazos.map((B,Q)=>c.jsx("li",{children:B},Q))})]}),C.responsables&&C.responsables.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Responsables"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:C.responsables.map((B,Q)=>c.jsx("li",{children:B},Q))})]})]}):null,L="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return h?c.jsx("div",{className:"text-center py-10",children:"Cargando actas..."}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in",children:[c.jsxs("div",{className:"md:col-span-1 space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generador de Actas"}),c.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsxs("p",{className:"text-sm",children:["Recuerda que las actas debes subirlas por intranet en ",c.jsx("strong",{className:"font-semibold",children:"www.industrialderecoleta.cl"}),". Esta es sólo una herramienta para agilizar redacción."]})})]})}),c.jsxs("form",{onSubmit:k,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"tipoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Reunión"}),c.jsx("select",{name:"tipoReunion",value:a.tipoReunion,onChange:_,required:!0,className:L,children:oE.map(C=>c.jsx("option",{value:C,children:C},C))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asistentes",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asistentes"}),c.jsx("textarea",{name:"asistentes",value:a.asistentes,onChange:_,required:!0,rows:3,placeholder:"Nombres, separados por comas...",className:L})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"textoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Texto de la Reunión"}),c.jsxs("div",{className:"relative",children:[c.jsx("textarea",{name:"textoReunion",value:a.textoReunion,onChange:_,required:!0,rows:6,placeholder:"Escriba o use el micrófono para dictar...",className:L}),EF&&c.jsx("button",{type:"button",onClick:N,title:o?"Detener grabación":"Iniciar grabación",className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${o?"bg-red-500 text-white animate-pulse":"bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500"}`,children:c.jsx(soe,{isListening:o})})]})]}),g&&c.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:g}),c.jsx("div",{className:"pt-2 text-right",children:c.jsx("button",{type:"submit",disabled:u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 flex items-center justify-center min-w-[120px] disabled:bg-slate-400 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:u?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Crear Acta"})})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Actas"}),c.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:e.length>0?e.map(C=>c.jsxs("button",{onClick:()=>M(C),className:`w-full text-left p-3 rounded-lg border transition-colors ${(n==null?void 0:n.id)===C.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 hover:bg-slate-100 border-transparent dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:C.tipoReunion}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(C.fechaCreacion).toLocaleDateString("es-CL")})]},C.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay actas guardadas."})})]})]}),c.jsx("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:n?c.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsx("h1",{className:"text-3xl font-bold mt-0",children:`Acta de Reunión: ${n.tipoReunion}`}),c.jsx("button",{onClick:()=>R(n.id),title:"Eliminar Acta",className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 -mt-2 -mr-2",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[c.jsx("strong",{children:"Fecha:"})," ",new Date(n.fechaCreacion).toLocaleString("es-CL")]}),c.jsx("h2",{children:"Asistentes"}),c.jsx("ul",{className:"list-disc pl-5",children:String(n.asistentes||"").split(",").map((C,E)=>C.trim()&&c.jsx("li",{children:C.trim()},E))}),j(n),c.jsx("h2",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:"Transcripción Original"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-md whitespace-pre-wrap",children:c.jsx("p",{children:n.textoReunion})})]}):c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[c.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📄"}),c.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:"Seleccione un Acta"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Elija un acta del historial para ver sus detalles aquí, o cree una nueva usando el formulario."})]})})]})},ioe="modulepreload",ooe=function(t){return"/"+t},_F={},C2=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){let i=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=i(r.map(u=>{if(u=ooe(u),u in _F)return;_F[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":ioe,d||(m.as="script"),m.crossOrigin="",m.href=u,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((g,b)=>{m.addEventListener("load",g),m.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return s.then(i=>{for(const o of i||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};function qn(t){"@babel/helpers - typeof";return qn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qn(t)}var Qi=Uint8Array,sl=Uint16Array,R4=Int32Array,Kw=new Qi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),$w=new Qi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),cS=new Qi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),YM=function(t,e){for(var r=new sl(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var s=new R4(r[30]),n=1;n<30;++n)for(var a=r[n];a<r[n+1];++a)s[a]=a-r[n]<<5|n;return{b:r,r:s}},XM=YM(Kw,2),JM=XM.b,uS=XM.r;JM[28]=258,uS[258]=28;var ZM=YM($w,0),loe=ZM.b,SF=ZM.r,AS=new sl(32768);for(var fs=0;fs<32768;++fs){var kd=(fs&43690)>>1|(fs&21845)<<1;kd=(kd&52428)>>2|(kd&13107)<<2,kd=(kd&61680)>>4|(kd&3855)<<4,AS[fs]=((kd&65280)>>8|(kd&255)<<8)>>1}var Fu=function(t,e,r){for(var n=t.length,s=0,a=new sl(e);s<n;++s)t[s]&&++a[t[s]-1];var i=new sl(e);for(s=1;s<e;++s)i[s]=i[s-1]+a[s-1]<<1;var o;if(r){o=new sl(1<<e);var l=15-e;for(s=0;s<n;++s)if(t[s])for(var u=s<<4|t[s],d=e-t[s],h=i[t[s]-1]++<<d,m=h|(1<<d)-1;h<=m;++h)o[AS[h]>>l]=u}else for(o=new sl(n),s=0;s<n;++s)t[s]&&(o[s]=AS[i[t[s]-1]++]>>15-t[s]);return o},yf=new Qi(288);for(var fs=0;fs<144;++fs)yf[fs]=8;for(var fs=144;fs<256;++fs)yf[fs]=9;for(var fs=256;fs<280;++fs)yf[fs]=7;for(var fs=280;fs<288;++fs)yf[fs]=8;var hx=new Qi(32);for(var fs=0;fs<32;++fs)hx[fs]=5;var coe=Fu(yf,9,0),uoe=Fu(yf,9,1),Aoe=Fu(hx,5,0),doe=Fu(hx,5,1),AE=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},yc=function(t,e,r){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&r},dE=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},L4=function(t){return(t+7)/8|0},eP=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new Qi(t.subarray(e,r))},foe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ec=function(t,e,r){var n=new Error(e||foe[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,Ec),!r)throw n;return n},hoe=function(t,e,r,n){var s=t.length,a=0;if(!s||e.f&&!e.l)return r||new Qi(0);var i=!r,o=i||e.i!=2,l=e.i;i&&(r=new Qi(s*3));var u=function(de){var oe=r.length;if(de>oe){var Le=new Qi(Math.max(oe*2,de));Le.set(r),r=Le}},d=e.f||0,h=e.p||0,m=e.b||0,g=e.l,b=e.d,y=e.m,_=e.n,N=s*8;do{if(!g){d=yc(t,h,1);var k=yc(t,h+1,3);if(h+=3,k)if(k==1)g=uoe,b=doe,y=9,_=5;else if(k==2){var L=yc(t,h,31)+257,C=yc(t,h+10,15)+4,E=L+yc(t,h+5,31)+1;h+=14;for(var B=new Qi(E),Q=new Qi(19),D=0;D<C;++D)Q[cS[D]]=yc(t,h+D*3,7);h+=C*3;for(var I=AE(Q),O=(1<<I)-1,G=Fu(Q,I,1),D=0;D<E;){var se=G[yc(t,h,O)];h+=se&15;var R=se>>4;if(R<16)B[D++]=R;else{var J=0,re=0;for(R==16?(re=3+yc(t,h,3),h+=2,J=B[D-1]):R==17?(re=3+yc(t,h,7),h+=3):R==18&&(re=11+yc(t,h,127),h+=7);re--;)B[D++]=J}}var q=B.subarray(0,L),z=B.subarray(L);y=AE(q),_=AE(z),g=Fu(q,y,1),b=Fu(z,_,1)}else Ec(1);else{var R=L4(h)+4,M=t[R-4]|t[R-3]<<8,j=R+M;if(j>s){l&&Ec(0);break}o&&u(m+M),r.set(t.subarray(R,j),m),e.b=m+=M,e.p=h=j*8,e.f=d;continue}if(h>N){l&&Ec(0);break}}o&&u(m+131072);for(var W=(1<<y)-1,ie=(1<<_)-1,P=h;;P=h){var J=g[dE(t,h)&W],Y=J>>4;if(h+=J&15,h>N){l&&Ec(0);break}if(J||Ec(2),Y<256)r[m++]=Y;else if(Y==256){P=h,g=null;break}else{var Z=Y-254;if(Y>264){var D=Y-257,te=Kw[D];Z=yc(t,h,(1<<te)-1)+JM[D],h+=te}var ce=b[dE(t,h)&ie],Ee=ce>>4;ce||Ec(3),h+=ce&15;var z=loe[Ee];if(Ee>3){var te=$w[Ee];z+=dE(t,h)&(1<<te)-1,h+=te}if(h>N){l&&Ec(0);break}o&&u(m+131072);var pe=m+Z;if(m<z){var fe=a-z,xe=Math.min(z,pe);for(fe+m<0&&Ec(3);m<xe;++m)r[m]=n[fe+m]}for(;m<pe;++m)r[m]=r[m-z]}}e.l=g,e.p=P,e.b=m,e.f=d,g&&(d=1,e.m=y,e.d=b,e.n=_)}while(!d);return m!=r.length&&i?eP(r,0,m):r.subarray(0,m)},xA=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},Zp=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},fE=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var s=r.length,a=r.slice();if(!s)return{t:rP,l:0};if(s==1){var i=new Qi(r[0].s+1);return i[r[0].s]=1,{t:i,l:1}}r.sort(function(j,L){return j.f-L.f}),r.push({s:-1,f:25001});var o=r[0],l=r[1],u=0,d=1,h=2;for(r[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=s-1;)o=r[r[u].f<r[h].f?u++:h++],l=r[u!=d&&r[u].f<r[h].f?u++:h++],r[d++]={s:-1,f:o.f+l.f,l:o,r:l};for(var m=a[0].s,n=1;n<s;++n)a[n].s>m&&(m=a[n].s);var g=new sl(m+1),b=dS(r[d-1],g,0);if(b>e){var n=0,y=0,_=b-e,N=1<<_;for(a.sort(function(L,C){return g[C.s]-g[L.s]||L.f-C.f});n<s;++n){var k=a[n].s;if(g[k]>e)y+=N-(1<<b-g[k]),g[k]=e;else break}for(y>>=_;y>0;){var R=a[n].s;g[R]<e?y-=1<<e-g[R]++-1:++n}for(;n>=0&&y;--n){var M=a[n].s;g[M]==e&&(--g[M],++y)}b=e}return{t:new Qi(g),l:b}},dS=function(t,e,r){return t.s==-1?Math.max(dS(t.l,e,r+1),dS(t.r,e,r+1)):e[t.s]=r},TF=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new sl(++e),n=0,s=t[0],a=1,i=function(l){r[n++]=l},o=1;o<=e;++o)if(t[o]==s&&o!=e)++a;else{if(!s&&a>2){for(;a>138;a-=138)i(32754);a>2&&(i(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(i(s),--a;a>6;a-=6)i(8304);a>2&&(i(a-3<<5|8208),a=0)}for(;a--;)i(s);a=1,s=t[o]}return{c:r.subarray(0,n),n:e}},eg=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},tP=function(t,e,r){var n=r.length,s=L4(e+2);t[s]=n&255,t[s+1]=n>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var a=0;a<n;++a)t[s+a+4]=r[a];return(s+4+n)*8},NF=function(t,e,r,n,s,a,i,o,l,u,d){xA(e,d++,r),++s[256];for(var h=fE(s,15),m=h.t,g=h.l,b=fE(a,15),y=b.t,_=b.l,N=TF(m),k=N.c,R=N.n,M=TF(y),j=M.c,L=M.n,C=new sl(19),E=0;E<k.length;++E)++C[k[E]&31];for(var E=0;E<j.length;++E)++C[j[E]&31];for(var B=fE(C,7),Q=B.t,D=B.l,I=19;I>4&&!Q[cS[I-1]];--I);var O=u+5<<3,G=eg(s,yf)+eg(a,hx)+i,se=eg(s,m)+eg(a,y)+i+14+3*I+eg(C,Q)+2*C[16]+3*C[17]+7*C[18];if(l>=0&&O<=G&&O<=se)return tP(e,d,t.subarray(l,l+u));var J,re,q,z;if(xA(e,d,1+(se<G)),d+=2,se<G){J=Fu(m,g,0),re=m,q=Fu(y,_,0),z=y;var W=Fu(Q,D,0);xA(e,d,R-257),xA(e,d+5,L-1),xA(e,d+10,I-4),d+=14;for(var E=0;E<I;++E)xA(e,d+3*E,Q[cS[E]]);d+=3*I;for(var ie=[k,j],P=0;P<2;++P)for(var Y=ie[P],E=0;E<Y.length;++E){var Z=Y[E]&31;xA(e,d,W[Z]),d+=Q[Z],Z>15&&(xA(e,d,Y[E]>>5&127),d+=Y[E]>>12)}}else J=coe,re=yf,q=Aoe,z=hx;for(var E=0;E<o;++E){var te=n[E];if(te>255){var Z=te>>18&31;Zp(e,d,J[Z+257]),d+=re[Z+257],Z>7&&(xA(e,d,te>>23&31),d+=Kw[Z]);var ce=te&31;Zp(e,d,q[ce]),d+=z[ce],ce>3&&(Zp(e,d,te>>5&8191),d+=$w[ce])}else Zp(e,d,J[te]),d+=re[te]}return Zp(e,d,J[256]),d+re[256]},moe=new R4([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),rP=new Qi(0),poe=function(t,e,r,n,s,a){var i=a.z||t.length,o=new Qi(n+i+5*(1+Math.ceil(i/7e3))+s),l=o.subarray(n,o.length-s),u=a.l,d=(a.r||0)&7;if(e){d&&(l[0]=a.r>>3);for(var h=moe[e-1],m=h>>13,g=h&8191,b=(1<<r)-1,y=a.p||new sl(32768),_=a.h||new sl(b+1),N=Math.ceil(r/3),k=2*N,R=function(et){return(t[et]^t[et+1]<<N^t[et+2]<<k)&b},M=new R4(25e3),j=new sl(288),L=new sl(32),C=0,E=0,B=a.i||0,Q=0,D=a.w||0,I=0;B+2<i;++B){var O=R(B),G=B&32767,se=_[O];if(y[G]=se,_[O]=G,D<=B){var J=i-B;if((C>7e3||Q>24576)&&(J>423||!u)){d=NF(t,l,0,M,j,L,E,Q,I,B-I,d),Q=C=E=0,I=B;for(var re=0;re<286;++re)j[re]=0;for(var re=0;re<30;++re)L[re]=0}var q=2,z=0,W=g,ie=G-se&32767;if(J>2&&O==R(B-ie))for(var P=Math.min(m,J)-1,Y=Math.min(32767,B),Z=Math.min(258,J);ie<=Y&&--W&&G!=se;){if(t[B+q]==t[B+q-ie]){for(var te=0;te<Z&&t[B+te]==t[B+te-ie];++te);if(te>q){if(q=te,z=ie,te>P)break;for(var ce=Math.min(ie,te-2),Ee=0,re=0;re<ce;++re){var pe=B-ie+re&32767,fe=y[pe],xe=pe-fe&32767;xe>Ee&&(Ee=xe,se=pe)}}}G=se,se=y[G],ie+=G-se&32767}if(z){M[Q++]=268435456|uS[q]<<18|SF[z];var de=uS[q]&31,oe=SF[z]&31;E+=Kw[de]+$w[oe],++j[257+de],++L[oe],D=B+q,++C}else M[Q++]=t[B],++j[t[B]]}}for(B=Math.max(B,D);B<i;++B)M[Q++]=t[B],++j[t[B]];d=NF(t,l,u,M,j,L,E,Q,I,B-I,d),u||(a.r=d&7|l[d/8|0]<<3,d-=7,a.h=_,a.p=y,a.i=B,a.w=D)}else{for(var B=a.w||0;B<i+u;B+=65535){var Le=B+65535;Le>=i&&(l[d/8|0]=u,Le=i),d=tP(l,d+1,t.subarray(B,Le))}a.i=i}return eP(o,0,n+L4(d)+s)},nP=function(){var t=1,e=0;return{p:function(r){for(var n=t,s=e,a=r.length|0,i=0;i!=a;){for(var o=Math.min(i+2655,a);i<o;++i)s+=n+=r[i];n=(n&65535)+15*(n>>16),s=(s&65535)+15*(s>>16)}t=n,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},goe=function(t,e,r,n,s){if(!s&&(s={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),i=new Qi(a.length+t.length);i.set(a),i.set(t,a.length),t=i,s.w=a.length}return poe(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,s)},sP=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},xoe=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=nP();s.p(e.dictionary),sP(t,2,s.d())}},voe=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Ec(6,"invalid zlib data"),(t[1]>>5&1)==1&&Ec(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function fS(t,e){e||(e={});var r=nP();r.p(t);var n=goe(t,e,e.dictionary?6:2,4);return xoe(n,e),sP(n,n.length-4,r.d()),n}function yoe(t,e){return hoe(t.subarray(voe(t),-4),{i:2},e,e)}var woe=typeof TextDecoder<"u"&&new TextDecoder,boe=0;try{woe.decode(rP,{stream:!0}),boe=1}catch{}var Cr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function hE(){Cr.console&&typeof Cr.console.log=="function"&&Cr.console.log.apply(Cr.console,arguments)}var as={log:hE,warn:function(t){Cr.console&&(typeof Cr.console.warn=="function"?Cr.console.warn.apply(Cr.console,arguments):hE.call(null,arguments))},error:function(t){Cr.console&&(typeof Cr.console.error=="function"?Cr.console.error.apply(Cr.console,arguments):hE(t))}};function mE(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){ah(n.response,e,r)},n.onerror=function(){as.error("could not download file")},n.send()}function BF(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Iv(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Qg,hS,ah=Cr.saveAs||((typeof window>"u"?"undefined":qn(window))!=="object"||window!==Cr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=Cr.URL||Cr.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?BF(s.href)?mE(t,e,r):Iv(s,s.target="_blank"):Iv(s)):(s.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){Iv(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(BF(t))mE(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){Iv(n)})}else navigator.msSaveOrOpenBlob(function(s,a){return a===void 0?a={autoBom:!1}:qn(a)!=="object"&&(as.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return mE(t,e,r);var s=t.type==="application/octet-stream",a=/constructor/i.test(Cr.HTMLElement)||Cr.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||s&&a)&&(typeof FileReader>"u"?"undefined":qn(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=i?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},o.readAsDataURL(t)}else{var l=Cr.URL||Cr.webkitURL,u=l.createObjectURL(t);n?n.location=u:location.href=u,n=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function aP(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var s=r[n].re,a=r[n].process,i=s.exec(t);i&&(e=a(i),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+o+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function pE(t,e){var r=t[0],n=t[1],s=t[2],a=t[3];r=Bi(r,n,s,a,e[0],7,-680876936),a=Bi(a,r,n,s,e[1],12,-389564586),s=Bi(s,a,r,n,e[2],17,606105819),n=Bi(n,s,a,r,e[3],22,-1044525330),r=Bi(r,n,s,a,e[4],7,-176418897),a=Bi(a,r,n,s,e[5],12,1200080426),s=Bi(s,a,r,n,e[6],17,-1473231341),n=Bi(n,s,a,r,e[7],22,-45705983),r=Bi(r,n,s,a,e[8],7,1770035416),a=Bi(a,r,n,s,e[9],12,-1958414417),s=Bi(s,a,r,n,e[10],17,-42063),n=Bi(n,s,a,r,e[11],22,-1990404162),r=Bi(r,n,s,a,e[12],7,1804603682),a=Bi(a,r,n,s,e[13],12,-40341101),s=Bi(s,a,r,n,e[14],17,-1502002290),r=ki(r,n=Bi(n,s,a,r,e[15],22,1236535329),s,a,e[1],5,-165796510),a=ki(a,r,n,s,e[6],9,-1069501632),s=ki(s,a,r,n,e[11],14,643717713),n=ki(n,s,a,r,e[0],20,-373897302),r=ki(r,n,s,a,e[5],5,-701558691),a=ki(a,r,n,s,e[10],9,38016083),s=ki(s,a,r,n,e[15],14,-660478335),n=ki(n,s,a,r,e[4],20,-405537848),r=ki(r,n,s,a,e[9],5,568446438),a=ki(a,r,n,s,e[14],9,-1019803690),s=ki(s,a,r,n,e[3],14,-187363961),n=ki(n,s,a,r,e[8],20,1163531501),r=ki(r,n,s,a,e[13],5,-1444681467),a=ki(a,r,n,s,e[2],9,-51403784),s=ki(s,a,r,n,e[7],14,1735328473),r=Ii(r,n=ki(n,s,a,r,e[12],20,-1926607734),s,a,e[5],4,-378558),a=Ii(a,r,n,s,e[8],11,-2022574463),s=Ii(s,a,r,n,e[11],16,1839030562),n=Ii(n,s,a,r,e[14],23,-35309556),r=Ii(r,n,s,a,e[1],4,-1530992060),a=Ii(a,r,n,s,e[4],11,1272893353),s=Ii(s,a,r,n,e[7],16,-155497632),n=Ii(n,s,a,r,e[10],23,-1094730640),r=Ii(r,n,s,a,e[13],4,681279174),a=Ii(a,r,n,s,e[0],11,-358537222),s=Ii(s,a,r,n,e[3],16,-722521979),n=Ii(n,s,a,r,e[6],23,76029189),r=Ii(r,n,s,a,e[9],4,-640364487),a=Ii(a,r,n,s,e[12],11,-421815835),s=Ii(s,a,r,n,e[15],16,530742520),r=Fi(r,n=Ii(n,s,a,r,e[2],23,-995338651),s,a,e[0],6,-198630844),a=Fi(a,r,n,s,e[7],10,1126891415),s=Fi(s,a,r,n,e[14],15,-1416354905),n=Fi(n,s,a,r,e[5],21,-57434055),r=Fi(r,n,s,a,e[12],6,1700485571),a=Fi(a,r,n,s,e[3],10,-1894986606),s=Fi(s,a,r,n,e[10],15,-1051523),n=Fi(n,s,a,r,e[1],21,-2054922799),r=Fi(r,n,s,a,e[8],6,1873313359),a=Fi(a,r,n,s,e[15],10,-30611744),s=Fi(s,a,r,n,e[6],15,-1560198380),n=Fi(n,s,a,r,e[13],21,1309151649),r=Fi(r,n,s,a,e[4],6,-145523070),a=Fi(a,r,n,s,e[11],10,-1120210379),s=Fi(s,a,r,n,e[2],15,718787259),n=Fi(n,s,a,r,e[9],21,-343485551),t[0]=$d(r,t[0]),t[1]=$d(n,t[1]),t[2]=$d(s,t[2]),t[3]=$d(a,t[3])}function Ww(t,e,r,n,s,a){return e=$d($d(e,t),$d(n,a)),$d(e<<s|e>>>32-s,r)}function Bi(t,e,r,n,s,a,i){return Ww(e&r|~e&n,t,e,s,a,i)}function ki(t,e,r,n,s,a,i){return Ww(e&n|r&~n,t,e,s,a,i)}function Ii(t,e,r,n,s,a,i){return Ww(e^r^n,t,e,s,a,i)}function Fi(t,e,r,n,s,a,i){return Ww(r^(e|~n),t,e,s,a,i)}function iP(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)pE(n,Coe(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(pE(n,s),e=0;e<16;e++)s[e]=0;return s[14]=8*r,pE(n,s),n}function Coe(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}Qg=Cr.atob.bind(Cr),hS=Cr.btoa.bind(Cr);var kF="0123456789abcdef".split("");function Eoe(t){for(var e="",r=0;r<4;r++)e+=kF[t>>8*r+4&15]+kF[t>>8*r&15];return e}function _oe(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function mS(t){return iP(t).map(_oe).join("")}var Soe=function(t){for(var e=0;e<t.length;e++)t[e]=Eoe(t[e]);return t.join("")}(iP("hello"))!="5d41402abc4b2a76b9719d911017c592";function $d(t,e){if(Soe){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function pS(t,e){var r,n,s,a;if(t!==r){for(var i=(s=t,a=1+(256/t.length>>0),new Array(a+1).join(s)),o=[],l=0;l<256;l++)o[l]=l;var u=0;for(l=0;l<256;l++){var d=o[l];u=(u+d+i.charCodeAt(l))%256,o[l]=o[u],o[u]=d}r=t,n=o}else o=n;var h=e.length,m=0,g=0,b="";for(l=0;l<h;l++)g=(g+(d=o[m=(m+1)%256]))%256,o[m]=o[g],o[g]=d,i=o[(o[m]+o[g])%256],b+=String.fromCharCode(e.charCodeAt(l)^i);return b}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var IF={print:4,modify:8,copy:16,"annot-forms":32};function Z0(t,e,r,n){this.v=1,this.r=2;var s=192;t.forEach(function(o){if(IF.perm!==void 0)throw new Error("Invalid permission: "+o);s+=IF[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var a=(e+this.padding).substr(0,32),i=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,i),this.P=-(1+(255^s)),this.encryptionKey=mS(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=pS(this.encryptionKey,this.padding)}function em(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var s=t.charCodeAt(n);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=t[n]}return e}function FF(t){if(qn(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,s){if(s=s||!1,typeof r!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var a=Math.random().toString(35);return e[r][a]=[n,!!s],a},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var a in e[r]){var i=e[r][a];try{i[0].apply(t,n)}catch(o){Cr.console&&as.error("jsPDF PubSub Error",o.message,o)}i[1]&&s.push(a)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function E2(t){if(!(this instanceof E2))return new E2(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function oP(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function lh(t,e,r,n,s){if(!(this instanceof lh))return new lh(t,e,r,n,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,oP.call(this,n,s)}function im(t,e,r,n,s){if(!(this instanceof im))return new im(t,e,r,n,s);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,oP.call(this,n,s)}function or(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],a=arguments[3],i=[],o=1,l=16,u="S",d=null;qn(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,s=t.format||s,a=t.compress||t.compressPdf||a,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),u=t.defaultPathOperation||"S"),i=t.filters||(a===!0?["FlateEncode"]:i),n=n||"mm",r=(""+(r||"P")).toLowerCase();var h=t.putOnlyUsedFonts||!1,m={},g={internal:{},__private__:{}};g.__private__.PubSub=FF;var b="1.3",y=g.__private__.getPdfVersion=function(){return b};g.__private__.setPdfVersion=function(V){b=V};var _={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return _};var N=g.__private__.getPageFormat=function(V){return _[V]};s=s||"a4";var k={COMPAT:"compat",ADVANCED:"advanced"},R=k.COMPAT;function M(){this.saveGraphicsState(),be(new zt(xt,0,0,-xt,0,Ha()*xt).toString()+" cm"),this.setFontSize(this.getFontSize()/xt),u="n",R=k.ADVANCED}function j(){this.restoreGraphicsState(),u="S",R=k.COMPAT}var L=g.__private__.combineFontStyleAndFontWeight=function(V,Ae){if(V=="bold"&&Ae=="normal"||V=="bold"&&Ae==400||V=="normal"&&Ae=="italic"||V=="bold"&&Ae=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ae&&(V=Ae==400||Ae==="normal"?V==="italic"?"italic":"normal":Ae!=700&&Ae!=="bold"||V!=="normal"?(Ae==700?"bold":Ae)+""+V:"bold"),V};g.advancedAPI=function(V){var Ae=R===k.COMPAT;return Ae&&M.call(this),typeof V!="function"||(V(this),Ae&&j.call(this)),this},g.compatAPI=function(V){var Ae=R===k.ADVANCED;return Ae&&j.call(this),typeof V!="function"||(V(this),Ae&&M.call(this)),this},g.isAdvancedAPI=function(){return R===k.ADVANCED};var C,E=function(V){if(R!==k.ADVANCED)throw new Error(V+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},B=g.roundToPrecision=g.__private__.roundToPrecision=function(V,Ae){var Fe=e||Ae;if(isNaN(V)||isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return V.toFixed(Fe).replace(/0+$/,"")};C=g.hpf=g.__private__.hpf=typeof l=="number"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return B(V,l)}:l==="smart"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return B(V,V>-1&&V<1?16:5)}:function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return B(V,16)};var Q=g.f2=g.__private__.f2=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f2");return B(V,2)},D=g.__private__.f3=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f3");return B(V,3)},I=g.scale=g.__private__.scale=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.scale");return R===k.COMPAT?V*xt:R===k.ADVANCED?V:void 0},O=function(V){return R===k.COMPAT?Ha()-V:R===k.ADVANCED?V:void 0},G=function(V){return I(O(V))};g.__private__.setPrecision=g.setPrecision=function(V){typeof parseInt(V,10)=="number"&&(e=parseInt(V,10))};var se,J="00000000000000000000000000000000",re=g.__private__.getFileId=function(){return J},q=g.__private__.setFileId=function(V){return J=V!==void 0&&/^[a-fA-F0-9]{32}$/.test(V)?V.toUpperCase():J.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(On=new Z0(d.userPermissions,d.userPassword,d.ownerPassword,J)),J};g.setFileId=function(V){return q(V),this},g.getFileId=function(){return re()};var z=g.__private__.convertDateToPDFDate=function(V){var Ae=V.getTimezoneOffset(),Fe=Ae<0?"+":"-",Re=Math.floor(Math.abs(Ae/60)),Ve=Math.abs(Ae%60),ot=[Fe,Z(Re),"'",Z(Ve),"'"].join("");return["D:",V.getFullYear(),Z(V.getMonth()+1),Z(V.getDate()),Z(V.getHours()),Z(V.getMinutes()),Z(V.getSeconds()),ot].join("")},W=g.__private__.convertPDFDateToDate=function(V){var Ae=parseInt(V.substr(2,4),10),Fe=parseInt(V.substr(6,2),10)-1,Re=parseInt(V.substr(8,2),10),Ve=parseInt(V.substr(10,2),10),ot=parseInt(V.substr(12,2),10),_t=parseInt(V.substr(14,2),10);return new Date(Ae,Fe,Re,Ve,ot,_t,0)},ie=g.__private__.setCreationDate=function(V){var Ae;if(V===void 0&&(V=new Date),V instanceof Date)Ae=z(V);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(V))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ae=V}return se=Ae},P=g.__private__.getCreationDate=function(V){var Ae=se;return V==="jsDate"&&(Ae=W(se)),Ae};g.setCreationDate=function(V){return ie(V),this},g.getCreationDate=function(V){return P(V)};var Y,Z=g.__private__.padd2=function(V){return("0"+parseInt(V)).slice(-2)},te=g.__private__.padd2Hex=function(V){return("00"+(V=V.toString())).substr(V.length)},ce=0,Ee=[],pe=[],fe=0,xe=[],de=[],oe=!1,Le=pe,et=function(){ce=0,fe=0,pe=[],Ee=[],xe=[],_e=Yn(),Se=Yn()};g.__private__.setCustomOutputDestination=function(V){oe=!0,Le=V};var Te=function(V){oe||(Le=V)};g.__private__.resetCustomOutputDestination=function(){oe=!1,Le=pe};var be=g.__private__.out=function(V){return V=V.toString(),fe+=V.length+1,Le.push(V),Le},je=g.__private__.write=function(V){return be(arguments.length===1?V.toString():Array.prototype.join.call(arguments," "))},qe=g.__private__.getArrayBuffer=function(V){for(var Ae=V.length,Fe=new ArrayBuffer(Ae),Re=new Uint8Array(Fe);Ae--;)Re[Ae]=V.charCodeAt(Ae);return Fe},st=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return st};var mt=t.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(V){return mt=R===k.ADVANCED?V/xt:V,this};var Et,lt=g.__private__.getFontSize=g.getFontSize=function(){return R===k.COMPAT?mt:mt*xt},kt=t.R2L||!1;g.__private__.setR2L=g.setR2L=function(V){return kt=V,this},g.__private__.getR2L=g.getR2L=function(){return kt};var Gt,Xt=g.__private__.setZoomMode=function(V){var Ae=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(V))Et=V;else if(isNaN(V)){if(Ae.indexOf(V)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+V+'" is not recognized.');Et=V}else Et=parseInt(V,10)};g.__private__.getZoomMode=function(){return Et};var It,Dt=g.__private__.setPageMode=function(V){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(V)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+V+'" is not recognized.');Gt=V};g.__private__.getPageMode=function(){return Gt};var Wt=g.__private__.setLayoutMode=function(V){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(V)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+V+'" is not recognized.');It=V};g.__private__.getLayoutMode=function(){return It},g.__private__.setDisplayMode=g.setDisplayMode=function(V,Ae,Fe){return Xt(V),Wt(Ae),Dt(Fe),this};var Lt={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(V){if(Object.keys(Lt).indexOf(V)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Lt[V]},g.__private__.getDocumentProperties=function(){return Lt},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(V){for(var Ae in Lt)Lt.hasOwnProperty(Ae)&&V[Ae]&&(Lt[Ae]=V[Ae]);return this},g.__private__.setDocumentProperty=function(V,Ae){if(Object.keys(Lt).indexOf(V)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Lt[V]=Ae};var Rt,xt,wr,Jt,dn,gr={},Ur={},Dn=[],Fr={},da={},nn={},ns={},ps=null,Pr=0,nr=[],Gr=new FF(g),fa=t.hotfixes||[],Wn={},Es={},Na=[],zt=function V(Ae,Fe,Re,Ve,ot,_t){if(!(this instanceof V))return new V(Ae,Fe,Re,Ve,ot,_t);isNaN(Ae)&&(Ae=1),isNaN(Fe)&&(Fe=0),isNaN(Re)&&(Re=0),isNaN(Ve)&&(Ve=1),isNaN(ot)&&(ot=0),isNaN(_t)&&(_t=0),this._matrix=[Ae,Fe,Re,Ve,ot,_t]};Object.defineProperty(zt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(zt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(zt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(zt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(zt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(zt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(zt.prototype,"a",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(zt.prototype,"b",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(zt.prototype,"c",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(zt.prototype,"d",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(zt.prototype,"e",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(zt.prototype,"f",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(zt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(zt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(zt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(zt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),zt.prototype.join=function(V){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(C).join(V)},zt.prototype.multiply=function(V){var Ae=V.sx*this.sx+V.shy*this.shx,Fe=V.sx*this.shy+V.shy*this.sy,Re=V.shx*this.sx+V.sy*this.shx,Ve=V.shx*this.shy+V.sy*this.sy,ot=V.tx*this.sx+V.ty*this.shx+this.tx,_t=V.tx*this.shy+V.ty*this.sy+this.ty;return new zt(Ae,Fe,Re,Ve,ot,_t)},zt.prototype.decompose=function(){var V=this.sx,Ae=this.shy,Fe=this.shx,Re=this.sy,Ve=this.tx,ot=this.ty,_t=Math.sqrt(V*V+Ae*Ae),Qt=(V/=_t)*Fe+(Ae/=_t)*Re;Fe-=V*Qt,Re-=Ae*Qt;var T=Math.sqrt(Fe*Fe+Re*Re);return Qt/=T,V*(Re/=T)<Ae*(Fe/=T)&&(V=-V,Ae=-Ae,Qt=-Qt,_t=-_t),{scale:new zt(_t,0,0,T,0,0),translate:new zt(1,0,0,1,Ve,ot),rotate:new zt(V,Ae,-Ae,V,0,0),skew:new zt(1,0,Qt,1,0,0)}},zt.prototype.toString=function(V){return this.join(" ")},zt.prototype.inversed=function(){var V=this.sx,Ae=this.shy,Fe=this.shx,Re=this.sy,Ve=this.tx,ot=this.ty,_t=1/(V*Re-Ae*Fe),Qt=Re*_t,T=-Ae*_t,X=-Fe*_t,ae=V*_t;return new zt(Qt,T,X,ae,-Qt*Ve-X*ot,-T*Ve-ae*ot)},zt.prototype.applyToPoint=function(V){var Ae=V.x*this.sx+V.y*this.shx+this.tx,Fe=V.x*this.shy+V.y*this.sy+this.ty;return new tc(Ae,Fe)},zt.prototype.applyToRectangle=function(V){var Ae=this.applyToPoint(V),Fe=this.applyToPoint(new tc(V.x+V.w,V.y+V.h));return new Gc(Ae.x,Ae.y,Fe.x-Ae.x,Fe.y-Ae.y)},zt.prototype.clone=function(){var V=this.sx,Ae=this.shy,Fe=this.shx,Re=this.sy,Ve=this.tx,ot=this.ty;return new zt(V,Ae,Fe,Re,Ve,ot)},g.Matrix=zt;var fn=g.matrixMult=function(V,Ae){return Ae.multiply(V)},sn=new zt(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=sn;var Rn=function(V,Ae){if(!da[V]){var Fe=(Ae instanceof lh?"Sh":"P")+(Object.keys(Fr).length+1).toString(10);Ae.id=Fe,da[V]=Fe,Fr[Fe]=Ae,Gr.publish("addPattern",Ae)}};g.ShadingPattern=lh,g.TilingPattern=im,g.addShadingPattern=function(V,Ae){return E("addShadingPattern()"),Rn(V,Ae),this},g.beginTilingPattern=function(V){E("beginTilingPattern()"),xl(V.boundingBox[0],V.boundingBox[1],V.boundingBox[2]-V.boundingBox[0],V.boundingBox[3]-V.boundingBox[1],V.matrix)},g.endTilingPattern=function(V,Ae){E("endTilingPattern()"),Ae.stream=de[Y].join(`
`),Rn(V,Ae),Gr.publish("endTilingPattern",Ae),Na.pop().restore()};var jn=g.__private__.newObject=function(){var V=Yn();return he(V,!0),V},Yn=g.__private__.newObjectDeferred=function(){return ce++,Ee[ce]=function(){return fe},ce},he=function(V,Ae){return Ae=typeof Ae=="boolean"&&Ae,Ee[V]=fe,Ae&&be(V+" 0 obj"),V},ke=g.__private__.newAdditionalObject=function(){var V={objId:Yn(),content:""};return xe.push(V),V},_e=Yn(),Se=Yn(),Ne=g.__private__.decodeColorString=function(V){var Ae=V.split(" ");if(Ae.length!==2||Ae[1]!=="g"&&Ae[1]!=="G")Ae.length===5&&(Ae[4]==="k"||Ae[4]==="K")&&(Ae=[(1-Ae[0])*(1-Ae[3]),(1-Ae[1])*(1-Ae[3]),(1-Ae[2])*(1-Ae[3]),"r"]);else{var Fe=parseFloat(Ae[0]);Ae=[Fe,Fe,Fe,"r"]}for(var Re="#",Ve=0;Ve<3;Ve++)Re+=("0"+Math.floor(255*parseFloat(Ae[Ve])).toString(16)).slice(-2);return Re},Ie=g.__private__.encodeColorString=function(V){var Ae;typeof V=="string"&&(V={ch1:V});var Fe=V.ch1,Re=V.ch2,Ve=V.ch3,ot=V.ch4,_t=V.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Fe=="string"&&Fe.charAt(0)!=="#"){var Qt=new aP(Fe);if(Qt.ok)Fe=Qt.toHex();else if(!/^\d*\.?\d*$/.test(Fe))throw new Error('Invalid color "'+Fe+'" passed to jsPDF.encodeColorString.')}if(typeof Fe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Fe)&&(Fe="#"+Fe[1]+Fe[1]+Fe[2]+Fe[2]+Fe[3]+Fe[3]),typeof Fe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Fe)){var T=parseInt(Fe.substr(1),16);Fe=T>>16&255,Re=T>>8&255,Ve=255&T}if(Re===void 0||ot===void 0&&Fe===Re&&Re===Ve)if(typeof Fe=="string")Ae=Fe+" "+_t[0];else switch(V.precision){case 2:Ae=Q(Fe/255)+" "+_t[0];break;case 3:default:Ae=D(Fe/255)+" "+_t[0]}else if(ot===void 0||qn(ot)==="object"){if(ot&&!isNaN(ot.a)&&ot.a===0)return Ae=["1.","1.","1.",_t[1]].join(" ");if(typeof Fe=="string")Ae=[Fe,Re,Ve,_t[1]].join(" ");else switch(V.precision){case 2:Ae=[Q(Fe/255),Q(Re/255),Q(Ve/255),_t[1]].join(" ");break;default:case 3:Ae=[D(Fe/255),D(Re/255),D(Ve/255),_t[1]].join(" ")}}else if(typeof Fe=="string")Ae=[Fe,Re,Ve,ot,_t[2]].join(" ");else switch(V.precision){case 2:Ae=[Q(Fe),Q(Re),Q(Ve),Q(ot),_t[2]].join(" ");break;case 3:default:Ae=[D(Fe),D(Re),D(Ve),D(ot),_t[2]].join(" ")}return Ae},Ke=g.__private__.getFilters=function(){return i},rt=g.__private__.putStream=function(V){var Ae=(V=V||{}).data||"",Fe=V.filters||Ke(),Re=V.alreadyAppliedFilters||[],Ve=V.addLength1||!1,ot=Ae.length,_t=V.objectId,Qt=function(mr){return mr};if(d!==null&&_t===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Qt=On.encryptor(_t,0));var T={};Fe===!0&&(Fe=["FlateEncode"]);var X=V.additionalKeyValues||[],ae=(T=or.API.processDataByFilters!==void 0?or.API.processDataByFilters(Ae,Fe):{data:Ae,reverseChain:[]}).reverseChain+(Array.isArray(Re)?Re.join(" "):Re.toString());if(T.data.length!==0&&(X.push({key:"Length",value:T.data.length}),Ve===!0&&X.push({key:"Length1",value:ot})),ae.length!=0)if(ae.split("/").length-1==1)X.push({key:"Filter",value:ae});else{X.push({key:"Filter",value:"["+ae+"]"});for(var ye=0;ye<X.length;ye+=1)if(X[ye].key==="DecodeParms"){for(var Qe=[],Ze=0;Ze<T.reverseChain.split("/").length-1;Ze+=1)Qe.push("null");Qe.push(X[ye].value),X[ye].value="["+Qe.join(" ")+"]"}}be("<<");for(var St=0;St<X.length;St++)be("/"+X[St].key+" "+X[St].value);be(">>"),T.data.length!==0&&(be("stream"),be(Qt(T.data)),be("endstream"))},He=g.__private__.putPage=function(V){var Ae=V.number,Fe=V.data,Re=V.objId,Ve=V.contentsObjId;he(Re,!0),be("<</Type /Page"),be("/Parent "+V.rootDictionaryObjId+" 0 R"),be("/Resources "+V.resourceDictionaryObjId+" 0 R"),be("/MediaBox ["+parseFloat(C(V.mediaBox.bottomLeftX))+" "+parseFloat(C(V.mediaBox.bottomLeftY))+" "+C(V.mediaBox.topRightX)+" "+C(V.mediaBox.topRightY)+"]"),V.cropBox!==null&&be("/CropBox ["+C(V.cropBox.bottomLeftX)+" "+C(V.cropBox.bottomLeftY)+" "+C(V.cropBox.topRightX)+" "+C(V.cropBox.topRightY)+"]"),V.bleedBox!==null&&be("/BleedBox ["+C(V.bleedBox.bottomLeftX)+" "+C(V.bleedBox.bottomLeftY)+" "+C(V.bleedBox.topRightX)+" "+C(V.bleedBox.topRightY)+"]"),V.trimBox!==null&&be("/TrimBox ["+C(V.trimBox.bottomLeftX)+" "+C(V.trimBox.bottomLeftY)+" "+C(V.trimBox.topRightX)+" "+C(V.trimBox.topRightY)+"]"),V.artBox!==null&&be("/ArtBox ["+C(V.artBox.bottomLeftX)+" "+C(V.artBox.bottomLeftY)+" "+C(V.artBox.topRightX)+" "+C(V.artBox.topRightY)+"]"),typeof V.userUnit=="number"&&V.userUnit!==1&&be("/UserUnit "+V.userUnit),Gr.publish("putPage",{objId:Re,pageContext:nr[Ae],pageNumber:Ae,page:Fe}),be("/Contents "+Ve+" 0 R"),be(">>"),be("endobj");var ot=Fe.join(`
`);return R===k.ADVANCED&&(ot+=`
Q`),he(Ve,!0),rt({data:ot,filters:Ke(),objectId:Ve}),be("endobj"),Re},We=g.__private__.putPages=function(){var V,Ae,Fe=[];for(V=1;V<=Pr;V++)nr[V].objId=Yn(),nr[V].contentsObjId=Yn();for(V=1;V<=Pr;V++)Fe.push(He({number:V,data:de[V],objId:nr[V].objId,contentsObjId:nr[V].contentsObjId,mediaBox:nr[V].mediaBox,cropBox:nr[V].cropBox,bleedBox:nr[V].bleedBox,trimBox:nr[V].trimBox,artBox:nr[V].artBox,userUnit:nr[V].userUnit,rootDictionaryObjId:_e,resourceDictionaryObjId:Se}));he(_e,!0),be("<</Type /Pages");var Re="/Kids [";for(Ae=0;Ae<Pr;Ae++)Re+=Fe[Ae]+" 0 R ";be(Re+"]"),be("/Count "+Pr),be(">>"),be("endobj"),Gr.publish("postPutPages")},Je=function(V){Gr.publish("putFont",{font:V,out:be,newObject:jn,putStream:rt}),V.isAlreadyPutted!==!0&&(V.objectNumber=jn(),be("<<"),be("/Type /Font"),be("/BaseFont /"+em(V.postScriptName)),be("/Subtype /Type1"),typeof V.encoding=="string"&&be("/Encoding /"+V.encoding),be("/FirstChar 32"),be("/LastChar 255"),be(">>"),be("endobj"))},yt=function(){for(var V in gr)gr.hasOwnProperty(V)&&(h===!1||h===!0&&m.hasOwnProperty(V))&&Je(gr[V])},Bt=function(V){V.objectNumber=jn();var Ae=[];Ae.push({key:"Type",value:"/XObject"}),Ae.push({key:"Subtype",value:"/Form"}),Ae.push({key:"BBox",value:"["+[C(V.x),C(V.y),C(V.x+V.width),C(V.y+V.height)].join(" ")+"]"}),Ae.push({key:"Matrix",value:"["+V.matrix.toString()+"]"});var Fe=V.pages[1].join(`
`);rt({data:Fe,additionalKeyValues:Ae,objectId:V.objectNumber}),be("endobj")},Ot=function(){for(var V in Wn)Wn.hasOwnProperty(V)&&Bt(Wn[V])},Nt=function(V,Ae){var Fe,Re=[],Ve=1/(Ae-1);for(Fe=0;Fe<1;Fe+=Ve)Re.push(Fe);if(Re.push(1),V[0].offset!=0){var ot={offset:0,color:V[0].color};V.unshift(ot)}if(V[V.length-1].offset!=1){var _t={offset:1,color:V[V.length-1].color};V.push(_t)}for(var Qt="",T=0,X=0;X<Re.length;X++){for(Fe=Re[X];Fe>V[T+1].offset;)T++;var ae=V[T].offset,ye=(Fe-ae)/(V[T+1].offset-ae),Qe=V[T].color,Ze=V[T+1].color;Qt+=te(Math.round((1-ye)*Qe[0]+ye*Ze[0]).toString(16))+te(Math.round((1-ye)*Qe[1]+ye*Ze[1]).toString(16))+te(Math.round((1-ye)*Qe[2]+ye*Ze[2]).toString(16))}return Qt.trim()},Ut=function(V,Ae){Ae||(Ae=21);var Fe=jn(),Re=Nt(V.colors,Ae),Ve=[];Ve.push({key:"FunctionType",value:"0"}),Ve.push({key:"Domain",value:"[0.0 1.0]"}),Ve.push({key:"Size",value:"["+Ae+"]"}),Ve.push({key:"BitsPerSample",value:"8"}),Ve.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ve.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),rt({data:Re,additionalKeyValues:Ve,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Fe}),be("endobj"),V.objectNumber=jn(),be("<< /ShadingType "+V.type),be("/ColorSpace /DeviceRGB");var ot="/Coords ["+C(parseFloat(V.coords[0]))+" "+C(parseFloat(V.coords[1]))+" ";V.type===2?ot+=C(parseFloat(V.coords[2]))+" "+C(parseFloat(V.coords[3])):ot+=C(parseFloat(V.coords[2]))+" "+C(parseFloat(V.coords[3]))+" "+C(parseFloat(V.coords[4]))+" "+C(parseFloat(V.coords[5])),be(ot+="]"),V.matrix&&be("/Matrix ["+V.matrix.toString()+"]"),be("/Function "+Fe+" 0 R"),be("/Extend [true true]"),be(">>"),be("endobj")},dr=function(V,Ae){var Fe=Yn(),Re=jn();Ae.push({resourcesOid:Fe,objectOid:Re}),V.objectNumber=Re;var Ve=[];Ve.push({key:"Type",value:"/Pattern"}),Ve.push({key:"PatternType",value:"1"}),Ve.push({key:"PaintType",value:"1"}),Ve.push({key:"TilingType",value:"1"}),Ve.push({key:"BBox",value:"["+V.boundingBox.map(C).join(" ")+"]"}),Ve.push({key:"XStep",value:C(V.xStep)}),Ve.push({key:"YStep",value:C(V.yStep)}),Ve.push({key:"Resources",value:Fe+" 0 R"}),V.matrix&&Ve.push({key:"Matrix",value:"["+V.matrix.toString()+"]"}),rt({data:V.stream,additionalKeyValues:Ve,objectId:V.objectNumber}),be("endobj")},jr=function(V){var Ae;for(Ae in Fr)Fr.hasOwnProperty(Ae)&&(Fr[Ae]instanceof lh?Ut(Fr[Ae]):Fr[Ae]instanceof im&&dr(Fr[Ae],V))},Or=function(V){for(var Ae in V.objectNumber=jn(),be("<<"),V)switch(Ae){case"opacity":be("/ca "+Q(V[Ae]));break;case"stroke-opacity":be("/CA "+Q(V[Ae]))}be(">>"),be("endobj")},zr=function(){var V;for(V in nn)nn.hasOwnProperty(V)&&Or(nn[V])},Rs=function(){for(var V in be("/XObject <<"),Wn)Wn.hasOwnProperty(V)&&Wn[V].objectNumber>=0&&be("/"+V+" "+Wn[V].objectNumber+" 0 R");Gr.publish("putXobjectDict"),be(">>")},pi=function(){On.oid=jn(),be("<<"),be("/Filter /Standard"),be("/V "+On.v),be("/R "+On.r),be("/U <"+On.toHexString(On.U)+">"),be("/O <"+On.toHexString(On.O)+">"),be("/P "+On.P),be(">>"),be("endobj")},Ls=function(){for(var V in be("/Font <<"),gr)gr.hasOwnProperty(V)&&(h===!1||h===!0&&m.hasOwnProperty(V))&&be("/"+V+" "+gr[V].objectNumber+" 0 R");be(">>")},ha=function(){if(Object.keys(Fr).length>0){for(var V in be("/Shading <<"),Fr)Fr.hasOwnProperty(V)&&Fr[V]instanceof lh&&Fr[V].objectNumber>=0&&be("/"+V+" "+Fr[V].objectNumber+" 0 R");Gr.publish("putShadingPatternDict"),be(">>")}},$s=function(V){if(Object.keys(Fr).length>0){for(var Ae in be("/Pattern <<"),Fr)Fr.hasOwnProperty(Ae)&&Fr[Ae]instanceof g.TilingPattern&&Fr[Ae].objectNumber>=0&&Fr[Ae].objectNumber<V&&be("/"+Ae+" "+Fr[Ae].objectNumber+" 0 R");Gr.publish("putTilingPatternDict"),be(">>")}},Ba=function(){if(Object.keys(nn).length>0){var V;for(V in be("/ExtGState <<"),nn)nn.hasOwnProperty(V)&&nn[V].objectNumber>=0&&be("/"+V+" "+nn[V].objectNumber+" 0 R");Gr.publish("putGStateDict"),be(">>")}},Xn=function(V){he(V.resourcesOid,!0),be("<<"),be("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Ls(),ha(),$s(V.objectOid),Ba(),Rs(),be(">>"),be("endobj")},ma=function(){var V=[];yt(),zr(),Ot(),jr(V),Gr.publish("putResources"),V.forEach(Xn),Xn({resourcesOid:Se,objectOid:Number.MAX_SAFE_INTEGER}),Gr.publish("postPutResources")},jc=function(){Gr.publish("putAdditionalObjects");for(var V=0;V<xe.length;V++){var Ae=xe[V];he(Ae.objId,!0),be(Ae.content),be("endobj")}Gr.publish("postPutAdditionalObjects")},WA=function(V){Ur[V.fontName]=Ur[V.fontName]||{},Ur[V.fontName][V.fontStyle]=V.id},cl=function(V,Ae,Fe,Re,Ve){var ot={id:"F"+(Object.keys(gr).length+1).toString(10),postScriptName:V,fontName:Ae,fontStyle:Fe,encoding:Re,isStandardFont:Ve||!1,metadata:{}};return Gr.publish("addFont",{font:ot,instance:this}),gr[ot.id]=ot,WA(ot),ot.id},Vu=function(V){for(var Ae=0,Fe=st.length;Ae<Fe;Ae++){var Re=cl.call(this,V[Ae][0],V[Ae][1],V[Ae][2],st[Ae][3],!0);h===!1&&(m[Re]=!0);var Ve=V[Ae][0].split("-");WA({id:Re,fontName:Ve[0],fontStyle:Ve[1]||""})}Gr.publish("addFonts",{fonts:gr,dictionary:Ur})},ka=function(V){return V.foo=function(){try{return V.apply(this,arguments)}catch(Re){var Ae=Re.stack||"";~Ae.indexOf(" at ")&&(Ae=Ae.split(" at ")[1]);var Fe="Error in function "+Ae.split(`
`)[0].split("<")[0]+": "+Re.message;if(!Cr.console)throw new Error(Fe);Cr.console.error(Fe,Re),Cr.alert&&alert(Fe)}},V.foo.bar=V,V.foo},Oc=function(V,Ae){var Fe,Re,Ve,ot,_t,Qt,T,X,ae;if(Ve=(Ae=Ae||{}).sourceEncoding||"Unicode",_t=Ae.outputEncoding,(Ae.autoencode||_t)&&gr[Rt].metadata&&gr[Rt].metadata[Ve]&&gr[Rt].metadata[Ve].encoding&&(ot=gr[Rt].metadata[Ve].encoding,!_t&&gr[Rt].encoding&&(_t=gr[Rt].encoding),!_t&&ot.codePages&&(_t=ot.codePages[0]),typeof _t=="string"&&(_t=ot[_t]),_t)){for(T=!1,Qt=[],Fe=0,Re=V.length;Fe<Re;Fe++)(X=_t[V.charCodeAt(Fe)])?Qt.push(String.fromCharCode(X)):Qt.push(V[Fe]),Qt[Fe].charCodeAt(0)>>8&&(T=!0);V=Qt.join("")}for(Fe=V.length;T===void 0&&Fe!==0;)V.charCodeAt(Fe-1)>>8&&(T=!0),Fe--;if(!T)return V;for(Qt=Ae.noBOM?[]:[254,255],Fe=0,Re=V.length;Fe<Re;Fe++){if((ae=(X=V.charCodeAt(Fe))>>8)>>8)throw new Error("Character at position "+Fe+" of string '"+V+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Qt.push(ae),Qt.push(X-(ae<<8))}return String.fromCharCode.apply(void 0,Qt)},hn=g.__private__.pdfEscape=g.pdfEscape=function(V,Ae){return Oc(V,Ae).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ia=g.__private__.beginPage=function(V){de[++Pr]=[],nr[Pr]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(V[0]),topRightY:Number(V[1])}},lo(Pr),Te(de[Y])},ul=function(V,Ae){var Fe,Re,Ve;switch(r=Ae||r,typeof V=="string"&&(Fe=N(V.toLowerCase()),Array.isArray(Fe)&&(Re=Fe[0],Ve=Fe[1])),Array.isArray(V)&&(Re=V[0]*xt,Ve=V[1]*xt),isNaN(Re)&&(Re=s[0],Ve=s[1]),(Re>14400||Ve>14400)&&(as.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Re=Math.min(14400,Re),Ve=Math.min(14400,Ve)),s=[Re,Ve],r.substr(0,1)){case"l":Ve>Re&&(s=[Ve,Re]);break;case"p":Re>Ve&&(s=[Ve,Re])}Ia(s),Ku(hl),be(Fa),$u!==0&&be($u+" J"),ec!==0&&be(ec+" j"),Gr.publish("addPage",{pageNumber:Pr})},Al=function(V){V>0&&V<=Pr&&(de.splice(V,1),nr.splice(V,1),Pr--,Y>Pr&&(Y=Pr),this.setPage(Y))},lo=function(V){V>0&&V<=Pr&&(Y=V)},_n=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return de.length-1},dl=function(V,Ae,Fe){var Re,Ve=void 0;return Fe=Fe||{},V=V!==void 0?V:gr[Rt].fontName,Ae=Ae!==void 0?Ae:gr[Rt].fontStyle,Re=V.toLowerCase(),Ur[Re]!==void 0&&Ur[Re][Ae]!==void 0?Ve=Ur[Re][Ae]:Ur[V]!==void 0&&Ur[V][Ae]!==void 0?Ve=Ur[V][Ae]:Fe.disableWarning===!1&&as.warn("Unable to look up font label for font '"+V+"', '"+Ae+"'. Refer to getFontList() for available fonts."),Ve||Fe.noFallback||(Ve=Ur.times[Ae])==null&&(Ve=Ur.times.normal),Ve},gi=g.__private__.putInfo=function(){var V=jn(),Ae=function(Re){return Re};for(var Fe in d!==null&&(Ae=On.encryptor(V,0)),be("<<"),be("/Producer ("+hn(Ae("jsPDF "+or.version))+")"),Lt)Lt.hasOwnProperty(Fe)&&Lt[Fe]&&be("/"+Fe.substr(0,1).toUpperCase()+Fe.substr(1)+" ("+hn(Ae(Lt[Fe]))+")");be("/CreationDate ("+hn(Ae(se))+")"),be(">>"),be("endobj")},Ro=g.__private__.putCatalog=function(V){var Ae=(V=V||{}).rootDictionaryObjId||_e;switch(jn(),be("<<"),be("/Type /Catalog"),be("/Pages "+Ae+" 0 R"),Et||(Et="fullwidth"),Et){case"fullwidth":be("/OpenAction [3 0 R /FitH null]");break;case"fullheight":be("/OpenAction [3 0 R /FitV null]");break;case"fullpage":be("/OpenAction [3 0 R /Fit]");break;case"original":be("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Fe=""+Et;Fe.substr(Fe.length-1)==="%"&&(Et=parseInt(Et)/100),typeof Et=="number"&&be("/OpenAction [3 0 R /XYZ null null "+Q(Et)+"]")}switch(It||(It="continuous"),It){case"continuous":be("/PageLayout /OneColumn");break;case"single":be("/PageLayout /SinglePage");break;case"two":case"twoleft":be("/PageLayout /TwoColumnLeft");break;case"tworight":be("/PageLayout /TwoColumnRight")}Gt&&be("/PageMode /"+Gt),Gr.publish("putCatalog"),be(">>"),be("endobj")},YA=g.__private__.putTrailer=function(){be("trailer"),be("<<"),be("/Size "+(ce+1)),be("/Root "+ce+" 0 R"),be("/Info "+(ce-1)+" 0 R"),d!==null&&be("/Encrypt "+On.oid+" 0 R"),be("/ID [ <"+J+"> <"+J+"> ]"),be(">>")},Gu=g.__private__.putHeader=function(){be("%PDF-"+b),be("%ºß¬à")},zu=g.__private__.putXRef=function(){var V="0000000000";be("xref"),be("0 "+(ce+1)),be("0000000000 65535 f ");for(var Ae=1;Ae<=ce;Ae++)typeof Ee[Ae]=="function"?be((V+Ee[Ae]()).slice(-10)+" 00000 n "):Ee[Ae]!==void 0?be((V+Ee[Ae]).slice(-10)+" 00000 n "):be("0000000000 00000 n ")},Lo=g.__private__.buildDocument=function(){et(),Te(pe),Gr.publish("buildDocument"),Gu(),We(),jc(),ma(),d!==null&&pi(),gi(),Ro();var V=fe;return zu(),YA(),be("startxref"),be(""+V),be("%%EOF"),Te(de[Y]),pe.join(`
`)},Qc=g.__private__.getBlob=function(V){return new Blob([qe(V)],{type:"application/pdf"})},Uo=g.output=g.__private__.output=ka(function(V,Ae){switch(typeof(Ae=Ae||{})=="string"?Ae={filename:Ae}:Ae.filename=Ae.filename||"generated.pdf",V){case void 0:return Lo();case"save":g.save(Ae.filename);break;case"arraybuffer":return qe(Lo());case"blob":return Qc(Lo());case"bloburi":case"bloburl":if(Cr.URL!==void 0&&typeof Cr.URL.createObjectURL=="function")return Cr.URL&&Cr.URL.createObjectURL(Qc(Lo()))||void 0;as.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Fe="",Re=Lo();try{Fe=hS(Re)}catch{Fe=hS(unescape(encodeURIComponent(Re)))}return"data:application/pdf;filename="+Ae.filename+";base64,"+Fe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Cr)==="[object Window]"){var Ve="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ot=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ae.pdfObjectUrl&&(Ve=Ae.pdfObjectUrl,ot="");var _t='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ve+'"'+ot+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ae)+");<\/script></body></html>",Qt=Cr.open();return Qt!==null&&Qt.document.write(_t),Qt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Cr)==="[object Window]"){var T='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ae.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ae.filename+'" width="500px" height="400px" /></body></html>',X=Cr.open();if(X!==null){X.document.write(T);var ae=this;X.document.documentElement.querySelector("#pdfViewer").onload=function(){X.document.title=Ae.filename,X.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ae.output("bloburl"))}}return X}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Cr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ye='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ae)+'"></iframe></body></html>',Qe=Cr.open();if(Qe!==null&&(Qe.document.write(ye),Qe.document.title=Ae.filename),Qe||typeof safari>"u")return Qe;break;case"datauri":case"dataurl":return Cr.document.location.href=this.output("datauristring",Ae);default:return null}}),co=function(V){return Array.isArray(fa)===!0&&fa.indexOf(V)>-1};switch(n){case"pt":xt=1;break;case"mm":xt=72/25.4;break;case"cm":xt=72/2.54;break;case"in":xt=72;break;case"px":xt=co("px_scaling")==1?.75:96/72;break;case"pc":case"em":xt=12;break;case"ex":xt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);xt=n}var On=null;ie(),q();var Mo=function(V){return d!==null?On.encryptor(V,0):function(Ae){return Ae}},uo=g.__private__.getPageInfo=g.getPageInfo=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:nr[V].objId,pageNumber:V,pageContext:nr[V]}},hr=g.__private__.getPageInfoByObjId=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ae in nr)if(nr[Ae].objId===V)break;return uo(Ae)},Ao=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:nr[Y].objId,pageNumber:Y,pageContext:nr[Y]}};g.addPage=function(){return ul.apply(this,arguments),this},g.setPage=function(){return lo.apply(this,arguments),Te.call(this,de[Y]),this},g.insertPage=function(V){return this.addPage(),this.movePage(Y,V),this},g.movePage=function(V,Ae){var Fe,Re;if(V>Ae){Fe=de[V],Re=nr[V];for(var Ve=V;Ve>Ae;Ve--)de[Ve]=de[Ve-1],nr[Ve]=nr[Ve-1];de[Ae]=Fe,nr[Ae]=Re,this.setPage(Ae)}else if(V<Ae){Fe=de[V],Re=nr[V];for(var ot=V;ot<Ae;ot++)de[ot]=de[ot+1],nr[ot]=nr[ot+1];de[Ae]=Fe,nr[Ae]=Re,this.setPage(Ae)}return this},g.deletePage=function(){return Al.apply(this,arguments),this},g.__private__.text=g.text=function(V,Ae,Fe,Re,Ve){var ot,_t,Qt,T,X,ae,ye,Qe,Ze,St=(Re=Re||{}).scope||this;if(typeof V=="number"&&typeof Ae=="number"&&(typeof Fe=="string"||Array.isArray(Fe))){var mr=Fe;Fe=Ae,Ae=V,V=mr}if(arguments[3]instanceof zt?(E("The transform parameter of text() with a Matrix value"),Ze=Ve):(Qt=arguments[4],T=arguments[5],qn(ye=arguments[3])==="object"&&ye!==null||(typeof Qt=="string"&&(T=Qt,Qt=null),typeof ye=="string"&&(T=ye,ye=null),typeof ye=="number"&&(Qt=ye,ye=null),Re={flags:ye,angle:Qt,align:T})),isNaN(Ae)||isNaN(Fe)||V==null)throw new Error("Invalid arguments passed to jsPDF.text");if(V.length===0)return St;var Zr="",kr=!1,Sn=typeof Re.lineHeightFactor=="number"?Re.lineHeightFactor:Jr,Ln=St.internal.scaleFactor;function po($r){return $r=$r.split("	").join(Array(Re.TabLen||9).join(" ")),hn($r,ye)}function _s($r){for(var Wr,Jn=$r.concat(),Ss=[],xo=Jn.length;xo--;)typeof(Wr=Jn.shift())=="string"?Ss.push(Wr):Array.isArray($r)&&(Wr.length===1||Wr[1]===void 0&&Wr[2]===void 0)?Ss.push(Wr[0]):Ss.push([Wr[0],Wr[1],Wr[2]]);return Ss}function wi($r,Wr){var Jn;if(typeof $r=="string")Jn=Wr($r)[0];else if(Array.isArray($r)){for(var Ss,xo,tu=$r.concat(),ru=[],ic=tu.length;ic--;)typeof(Ss=tu.shift())=="string"?ru.push(Wr(Ss)[0]):Array.isArray(Ss)&&typeof Ss[0]=="string"&&(xo=Wr(Ss[0],Ss[1],Ss[2]),ru.push([xo[0],xo[1],xo[2]]));Jn=ru}return Jn}var yl=!1,qc=!0;if(typeof V=="string")yl=!0;else if(Array.isArray(V)){var ed=V.concat();_t=[];for(var Wu,Ws=ed.length;Ws--;)(typeof(Wu=ed.shift())!="string"||Array.isArray(Wu)&&typeof Wu[0]!="string")&&(qc=!1);yl=qc}if(yl===!1)throw new Error('Type of text must be string or Array. "'+V+'" is not recognized.');typeof V=="string"&&(V=V.match(/[\r?\n]/)?V.split(/\r\n|\r|\n/g):[V]);var Kc=mt/St.internal.scaleFactor,Yu=Kc*(Sn-1);switch(Re.baseline){case"bottom":Fe-=Yu;break;case"top":Fe+=Kc-Yu;break;case"hanging":Fe+=Kc-2*Yu;break;case"middle":Fe+=Kc/2-Yu}if((ae=Re.maxWidth||0)>0&&(typeof V=="string"?V=St.splitTextToSize(V,ae):Object.prototype.toString.call(V)==="[object Array]"&&(V=V.reduce(function($r,Wr){return $r.concat(St.splitTextToSize(Wr,ae))},[]))),ot={text:V,x:Ae,y:Fe,options:Re,mutex:{pdfEscape:hn,activeFontKey:Rt,fonts:gr,activeFontSize:mt}},Gr.publish("preProcessText",ot),V=ot.text,Qt=(Re=ot.options).angle,!(Ze instanceof zt)&&Qt&&typeof Qt=="number"){Qt*=Math.PI/180,Re.rotationDirection===0&&(Qt=-Qt),R===k.ADVANCED&&(Qt=-Qt);var Xu=Math.cos(Qt),td=Math.sin(Qt);Ze=new zt(Xu,td,-td,Xu,0,0)}else Qt&&Qt instanceof zt&&(Ze=Qt);R!==k.ADVANCED||Ze||(Ze=sn),(X=Re.charSpace||Zl)!==void 0&&(Zr+=C(I(X))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Qe=Re.horizontalScale)!==void 0&&(Zr+=C(100*Qe)+` Tz
`),Re.lang;var bi=-1,Ap=Re.renderingMode!==void 0?Re.renderingMode:Re.stroke,Df=St.internal.getCurrentPageInfo().pageContext;switch(Ap){case 0:case!1:case"fill":bi=0;break;case 1:case!0:case"stroke":bi=1;break;case 2:case"fillThenStroke":bi=2;break;case 3:case"invisible":bi=3;break;case 4:case"fillAndAddForClipping":bi=4;break;case 5:case"strokeAndAddPathForClipping":bi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":bi=6;break;case 7:case"addToPathForClipping":bi=7}var e0=Df.usedRenderingMode!==void 0?Df.usedRenderingMode:-1;bi!==-1?Zr+=bi+` Tr
`:e0!==-1&&(Zr+=`0 Tr
`),bi!==-1&&(Df.usedRenderingMode=bi),T=Re.align||"left";var go,pa=mt*Sn,$c=St.internal.pageSize.getWidth(),Rf=gr[Rt];X=Re.charSpace||Zl,ae=Re.maxWidth||0,ye=Object.assign({autoencode:!0,noBOM:!0},Re.flags);var sc=[],Wc=function($r){return St.getStringUnitWidth($r,{font:Rf,charSpace:X,fontSize:mt,doKerning:!1})*mt/Ln};if(Object.prototype.toString.call(V)==="[object Array]"){var ti;_t=_s(V),T!=="left"&&(go=_t.map(Wc));var Da,Yc=0;if(T==="right"){Ae-=go[0],V=[],Ws=_t.length;for(var Ci=0;Ci<Ws;Ci++)Ci===0?(Da=Qa(Ae),ti=Ms(Fe)):(Da=I(Yc-go[Ci]),ti=-pa),V.push([_t[Ci],Da,ti]),Yc=go[Ci]}else if(T==="center"){Ae-=go[0]/2,V=[],Ws=_t.length;for(var Qo=0;Qo<Ws;Qo++)Qo===0?(Da=Qa(Ae),ti=Ms(Fe)):(Da=I((Yc-go[Qo])/2),ti=-pa),V.push([_t[Qo],Da,ti]),Yc=go[Qo]}else if(T==="left"){V=[],Ws=_t.length;for(var wl=0;wl<Ws;wl++)V.push(_t[wl])}else if(T==="justify"&&Rf.encoding==="Identity-H"){V=[],Ws=_t.length,ae=ae!==0?ae:$c;for(var Ho=0,gs=0;gs<Ws;gs++)if(ti=gs===0?Ms(Fe):-pa,Da=gs===0?Qa(Ae):Ho,gs<Ws-1){var Vo=I((ae-go[gs])/(_t[gs].split(" ").length-1)),Ps=_t[gs].split(" ");V.push([Ps[0]+" ",Da,ti]),Ho=0;for(var Ei=1;Ei<Ps.length;Ei++){var Ju=(Wc(Ps[Ei-1]+" "+Ps[Ei])-Wc(Ps[Ei]))*Ln+Vo;Ei==Ps.length-1?V.push([Ps[Ei],Ju,0]):V.push([Ps[Ei]+" ",Ju,0]),Ho-=Ju}}else V.push([_t[gs],Da,ti]);V.push(["",Ho,0])}else{if(T!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(V=[],Ws=_t.length,ae=ae!==0?ae:$c,gs=0;gs<Ws;gs++)ti=gs===0?Ms(Fe):-pa,Da=gs===0?Qa(Ae):0,gs<Ws-1?sc.push(C(I((ae-go[gs])/(_t[gs].split(" ").length-1)))):sc.push(0),V.push([_t[gs],Da,ti])}}var bl=typeof Re.R2L=="boolean"?Re.R2L:kt;bl===!0&&(V=wi(V,function($r,Wr,Jn){return[$r.split("").reverse().join(""),Wr,Jn]})),ot={text:V,x:Ae,y:Fe,options:Re,mutex:{pdfEscape:hn,activeFontKey:Rt,fonts:gr,activeFontSize:mt}},Gr.publish("postProcessText",ot),V=ot.text,kr=ot.mutex.isHex||!1;var rd=gr[Rt].encoding;rd!=="WinAnsiEncoding"&&rd!=="StandardEncoding"||(V=wi(V,function($r,Wr,Jn){return[po($r),Wr,Jn]})),_t=_s(V),V=[];for(var Xc,Jc,Zc,Zu=0,nd=1,eu=Array.isArray(_t[0])?nd:Zu,ac="",eA=function($r,Wr,Jn){var Ss="";return Jn instanceof zt?(Jn=typeof Re.angle=="number"?fn(Jn,new zt(1,0,0,1,$r,Wr)):fn(new zt(1,0,0,1,$r,Wr),Jn),R===k.ADVANCED&&(Jn=fn(new zt(1,0,0,-1,0,0),Jn)),Ss=Jn.join(" ")+` Tm
`):Ss=C($r)+" "+C(Wr)+` Td
`,Ss},xs=0;xs<_t.length;xs++){switch(ac="",eu){case nd:Zc=(kr?"<":"(")+_t[xs][0]+(kr?">":")"),Xc=parseFloat(_t[xs][1]),Jc=parseFloat(_t[xs][2]);break;case Zu:Zc=(kr?"<":"(")+_t[xs]+(kr?">":")"),Xc=Qa(Ae),Jc=Ms(Fe)}sc!==void 0&&sc[xs]!==void 0&&(ac=sc[xs]+` Tw
`),xs===0?V.push(ac+eA(Xc,Jc,Ze)+Zc):eu===Zu?V.push(ac+Zc):eu===nd&&V.push(ac+eA(Xc,Jc,Ze)+Zc)}V=eu===Zu?V.join(` Tj
T* `):V.join(` Tj
`),V+=` Tj
`;var Ji=`BT
/`;return Ji+=Rt+" "+mt+` Tf
`,Ji+=C(mt*Sn)+` TL
`,Ji+=jo+`
`,Ji+=Zr,Ji+=V,be(Ji+="ET"),m[Rt]=!0,St};var XA=g.__private__.clip=g.clip=function(V){return be(V==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return XA("evenodd")},g.__private__.discardPath=g.discardPath=function(){return be("n"),this};var ja=g.__private__.isValidStyle=function(V){var Ae=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(V)!==-1&&(Ae=!0),Ae};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(V){return ja(V)&&(u=V),this};var xi=g.__private__.getStyle=g.getStyle=function(V){var Ae=u;switch(V){case"D":case"S":Ae="S";break;case"F":Ae="f";break;case"FD":case"DF":Ae="B";break;case"f":case"f*":case"B":case"B*":Ae=V}return Ae},ei=g.close=function(){return be("h"),this};g.stroke=function(){return be("S"),this},g.fill=function(V){return fo("f",V),this},g.fillEvenOdd=function(V){return fo("f*",V),this},g.fillStroke=function(V){return fo("B",V),this},g.fillStrokeEvenOdd=function(V){return fo("B*",V),this};var fo=function(V,Ae){qn(Ae)==="object"?Po(Ae,V):be(V)},vi=function(V){V===null||R===k.ADVANCED&&V===void 0||(V=xi(V),be(V))};function fl(V,Ae,Fe,Re,Ve){var ot=new im(Ae||this.boundingBox,Fe||this.xStep,Re||this.yStep,this.gState,Ve||this.matrix);ot.stream=this.stream;var _t=V+"$$"+this.cloneIndex+++"$$";return Rn(_t,ot),ot}var Po=function(V,Ae){var Fe=da[V.key],Re=Fr[Fe];if(Re instanceof lh)be("q"),be(qu(Ae)),Re.gState&&g.setGState(Re.gState),be(V.matrix.toString()+" cm"),be("/"+Fe+" sh"),be("Q");else if(Re instanceof im){var Ve=new zt(1,0,0,-1,0,Ha());V.matrix&&(Ve=Ve.multiply(V.matrix||sn),Fe=fl.call(Re,V.key,V.boundingBox,V.xStep,V.yStep,Ve).id),be("q"),be("/Pattern cs"),be("/"+Fe+" scn"),Re.gState&&g.setGState(Re.gState),be(Ae),be("Q")}},qu=function(V){switch(V){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},yi=g.moveTo=function(V,Ae){return be(C(I(V))+" "+C(G(Ae))+" m"),this},Oa=g.lineTo=function(V,Ae){return be(C(I(V))+" "+C(G(Ae))+" l"),this},ho=g.curveTo=function(V,Ae,Fe,Re,Ve,ot){return be([C(I(V)),C(G(Ae)),C(I(Fe)),C(G(Re)),C(I(Ve)),C(G(ot)),"c"].join(" ")),this};g.__private__.line=g.line=function(V,Ae,Fe,Re,Ve){if(isNaN(V)||isNaN(Ae)||isNaN(Fe)||isNaN(Re)||!ja(Ve))throw new Error("Invalid arguments passed to jsPDF.line");return R===k.COMPAT?this.lines([[Fe-V,Re-Ae]],V,Ae,[1,1],Ve||"S"):this.lines([[Fe-V,Re-Ae]],V,Ae,[1,1]).stroke()},g.__private__.lines=g.lines=function(V,Ae,Fe,Re,Ve,ot){var _t,Qt,T,X,ae,ye,Qe,Ze,St,mr,Zr,kr;if(typeof V=="number"&&(kr=Fe,Fe=Ae,Ae=V,V=kr),Re=Re||[1,1],ot=ot||!1,isNaN(Ae)||isNaN(Fe)||!Array.isArray(V)||!Array.isArray(Re)||!ja(Ve)||typeof ot!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(yi(Ae,Fe),_t=Re[0],Qt=Re[1],X=V.length,mr=Ae,Zr=Fe,T=0;T<X;T++)(ae=V[T]).length===2?(mr=ae[0]*_t+mr,Zr=ae[1]*Qt+Zr,Oa(mr,Zr)):(ye=ae[0]*_t+mr,Qe=ae[1]*Qt+Zr,Ze=ae[2]*_t+mr,St=ae[3]*Qt+Zr,mr=ae[4]*_t+mr,Zr=ae[5]*Qt+Zr,ho(ye,Qe,Ze,St,mr,Zr));return ot&&ei(),vi(Ve),this},g.path=function(V){for(var Ae=0;Ae<V.length;Ae++){var Fe=V[Ae],Re=Fe.c;switch(Fe.op){case"m":yi(Re[0],Re[1]);break;case"l":Oa(Re[0],Re[1]);break;case"c":ho.apply(this,Re);break;case"h":ei()}}return this},g.__private__.rect=g.rect=function(V,Ae,Fe,Re,Ve){if(isNaN(V)||isNaN(Ae)||isNaN(Fe)||isNaN(Re)||!ja(Ve))throw new Error("Invalid arguments passed to jsPDF.rect");return R===k.COMPAT&&(Re=-Re),be([C(I(V)),C(G(Ae)),C(I(Fe)),C(I(Re)),"re"].join(" ")),vi(Ve),this},g.__private__.triangle=g.triangle=function(V,Ae,Fe,Re,Ve,ot,_t){if(isNaN(V)||isNaN(Ae)||isNaN(Fe)||isNaN(Re)||isNaN(Ve)||isNaN(ot)||!ja(_t))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Fe-V,Re-Ae],[Ve-Fe,ot-Re],[V-Ve,Ae-ot]],V,Ae,[1,1],_t,!0),this},g.__private__.roundedRect=g.roundedRect=function(V,Ae,Fe,Re,Ve,ot,_t){if(isNaN(V)||isNaN(Ae)||isNaN(Fe)||isNaN(Re)||isNaN(Ve)||isNaN(ot)||!ja(_t))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Qt=4/3*(Math.SQRT2-1);return Ve=Math.min(Ve,.5*Fe),ot=Math.min(ot,.5*Re),this.lines([[Fe-2*Ve,0],[Ve*Qt,0,Ve,ot-ot*Qt,Ve,ot],[0,Re-2*ot],[0,ot*Qt,-Ve*Qt,ot,-Ve,ot],[2*Ve-Fe,0],[-Ve*Qt,0,-Ve,-ot*Qt,-Ve,-ot],[0,2*ot-Re],[0,-ot*Qt,Ve*Qt,-ot,Ve,-ot]],V+Ve,Ae,[1,1],_t,!0),this},g.__private__.ellipse=g.ellipse=function(V,Ae,Fe,Re,Ve){if(isNaN(V)||isNaN(Ae)||isNaN(Fe)||isNaN(Re)||!ja(Ve))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ot=4/3*(Math.SQRT2-1)*Fe,_t=4/3*(Math.SQRT2-1)*Re;return yi(V+Fe,Ae),ho(V+Fe,Ae-_t,V+ot,Ae-Re,V,Ae-Re),ho(V-ot,Ae-Re,V-Fe,Ae-_t,V-Fe,Ae),ho(V-Fe,Ae+_t,V-ot,Ae+Re,V,Ae+Re),ho(V+ot,Ae+Re,V+Fe,Ae+_t,V+Fe,Ae),vi(Ve),this},g.__private__.circle=g.circle=function(V,Ae,Fe,Re){if(isNaN(V)||isNaN(Ae)||isNaN(Fe)||!ja(Re))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(V,Ae,Fe,Fe,Re)},g.setFont=function(V,Ae,Fe){return Fe&&(Ae=L(Ae,Fe)),Rt=dl(V,Ae,{disableWarning:!1}),this};var Us=g.__private__.getFont=g.getFont=function(){return gr[dl.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var V,Ae,Fe={};for(V in Ur)if(Ur.hasOwnProperty(V))for(Ae in Fe[V]=[],Ur[V])Ur[V].hasOwnProperty(Ae)&&Fe[V].push(Ae);return Fe},g.addFont=function(V,Ae,Fe,Re,Ve){var ot=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ot.indexOf(arguments[3])!==-1?Ve=arguments[3]:arguments[3]&&ot.indexOf(arguments[3])==-1&&(Fe=L(Fe,Re)),Ve=Ve||"Identity-H",cl.call(this,V,Ae,Fe,Ve)};var Jr,hl=t.lineWidth||.200025,mo=g.__private__.getLineWidth=g.getLineWidth=function(){return hl},Ku=g.__private__.setLineWidth=g.setLineWidth=function(V){return hl=V,be(C(I(V))+" w"),this};g.__private__.setLineDash=or.API.setLineDash=or.API.setLineDashPattern=function(V,Ae){if(V=V||[],Ae=Ae||0,isNaN(Ae)||!Array.isArray(V))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return V=V.map(function(Fe){return C(I(Fe))}).join(" "),Ae=C(I(Ae)),be("["+V+"] "+Ae+" d"),this};var Xl=g.__private__.getLineHeight=g.getLineHeight=function(){return mt*Jr};g.__private__.getLineHeight=g.getLineHeight=function(){return mt*Jr};var Jl=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(V){return typeof(V=V||1.15)=="number"&&(Jr=V),this},Xi=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return Jr};Jl(t.lineHeight);var Qa=g.__private__.getHorizontalCoordinate=function(V){return I(V)},Ms=g.__private__.getVerticalCoordinate=function(V){return R===k.ADVANCED?V:nr[Y].mediaBox.topRightY-nr[Y].mediaBox.bottomLeftY-I(V)},JA=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(V){return C(Qa(V))},ml=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(V){return C(Ms(V))},Fa=t.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return Ne(Fa)},g.__private__.setStrokeColor=g.setDrawColor=function(V,Ae,Fe,Re){return Fa=Ie({ch1:V,ch2:Ae,ch3:Fe,ch4:Re,pdfColorType:"draw",precision:2}),be(Fa),this};var pl=t.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return Ne(pl)},g.__private__.setFillColor=g.setFillColor=function(V,Ae,Fe,Re){return pl=Ie({ch1:V,ch2:Ae,ch3:Fe,ch4:Re,pdfColorType:"fill",precision:2}),be(pl),this};var jo=t.textColor||"0 g",Hc=g.__private__.getTextColor=g.getTextColor=function(){return Ne(jo)};g.__private__.setTextColor=g.setTextColor=function(V,Ae,Fe,Re){return jo=Ie({ch1:V,ch2:Ae,ch3:Fe,ch4:Re,pdfColorType:"text",precision:3}),this};var Zl=t.charSpace,Vc=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(Zl||0)};g.__private__.setCharSpace=g.setCharSpace=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Zl=V,this};var $u=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(V){var Ae=g.CapJoinStyles[V];if(Ae===void 0)throw new Error("Line cap style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $u=Ae,be(Ae+" J"),this};var ec=0;g.__private__.setLineJoin=g.setLineJoin=function(V){var Ae=g.CapJoinStyles[V];if(Ae===void 0)throw new Error("Line join style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ec=Ae,be(Ae+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(V){if(V=V||0,isNaN(V))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return be(C(I(V))+" M"),this},g.GState=E2,g.setGState=function(V){(V=typeof V=="string"?nn[ns[V]]:gl(null,V)).equals(ps)||(be("/"+V.id+" gs"),ps=V)};var gl=function(V,Ae){if(!V||!ns[V]){var Fe=!1;for(var Re in nn)if(nn.hasOwnProperty(Re)&&nn[Re].equals(Ae)){Fe=!0;break}if(Fe)Ae=nn[Re];else{var Ve="GS"+(Object.keys(nn).length+1).toString(10);nn[Ve]=Ae,Ae.id=Ve}return V&&(ns[V]=Ae.id),Gr.publish("addGState",Ae),Ae}};g.addGState=function(V,Ae){return gl(V,Ae),this},g.saveGraphicsState=function(){return be("q"),Dn.push({key:Rt,size:mt,color:jo}),this},g.restoreGraphicsState=function(){be("Q");var V=Dn.pop();return Rt=V.key,mt=V.size,jo=V.color,ps=null,this},g.setCurrentTransformationMatrix=function(V){return be(V.toString()+" cm"),this},g.comment=function(V){return be("#"+V),this};var tc=function(V,Ae){var Fe=V||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Fe},set:function(ot){isNaN(ot)||(Fe=parseFloat(ot))}});var Re=Ae||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Re},set:function(ot){isNaN(ot)||(Re=parseFloat(ot))}});var Ve="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ve},set:function(ot){Ve=ot.toString()}}),this},Gc=function(V,Ae,Fe,Re){tc.call(this,V,Ae),this.type="rect";var Ve=Fe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ve},set:function(_t){isNaN(_t)||(Ve=parseFloat(_t))}});var ot=Re||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ot},set:function(_t){isNaN(_t)||(ot=parseFloat(_t))}}),this},rc=function(){this.page=Pr,this.currentPage=Y,this.pages=de.slice(0),this.pagesContext=nr.slice(0),this.x=wr,this.y=Jt,this.matrix=dn,this.width=vl(Y),this.height=Ha(Y),this.outputDestination=Le,this.id="",this.objectNumber=-1};rc.prototype.restore=function(){Pr=this.page,Y=this.currentPage,nr=this.pagesContext,de=this.pages,wr=this.x,Jt=this.y,dn=this.matrix,nc(Y,this.width),zc(Y,this.height),Le=this.outputDestination};var xl=function(V,Ae,Fe,Re,Ve){Na.push(new rc),Pr=Y=0,de=[],wr=V,Jt=Ae,dn=Ve,Ia([Fe,Re])},ZA=function(V){if(Es[V])Na.pop().restore();else{var Ae=new rc,Fe="Xo"+(Object.keys(Wn).length+1).toString(10);Ae.id=Fe,Es[V]=Fe,Wn[Fe]=Ae,Gr.publish("addFormObject",Ae),Na.pop().restore()}};for(var Oo in g.beginFormObject=function(V,Ae,Fe,Re,Ve){return xl(V,Ae,Fe,Re,Ve),this},g.endFormObject=function(V){return ZA(V),this},g.doFormObject=function(V,Ae){var Fe=Wn[Es[V]];return be("q"),be(Ae.toString()+" cm"),be("/"+Fe.id+" Do"),be("Q"),this},g.getFormObject=function(V){var Ae=Wn[Es[V]];return{x:Ae.x,y:Ae.y,width:Ae.width,height:Ae.height,matrix:Ae.matrix}},g.save=function(V,Ae){return V=V||"generated.pdf",(Ae=Ae||{}).returnPromise=Ae.returnPromise||!1,Ae.returnPromise===!1?(ah(Qc(Lo()),V),typeof ah.unload=="function"&&Cr.setTimeout&&setTimeout(ah.unload,911),this):new Promise(function(Fe,Re){try{var Ve=ah(Qc(Lo()),V);typeof ah.unload=="function"&&Cr.setTimeout&&setTimeout(ah.unload,911),Fe(Ve)}catch(ot){Re(ot.message)}})},or.API)or.API.hasOwnProperty(Oo)&&(Oo==="events"&&or.API.events.length?function(V,Ae){var Fe,Re,Ve;for(Ve=Ae.length-1;Ve!==-1;Ve--)Fe=Ae[Ve][0],Re=Ae[Ve][1],V.subscribe.apply(V,[Fe].concat(typeof Re=="function"?[Re]:Re))}(Gr,or.API.events):g[Oo]=or.API[Oo]);var vl=g.getPageWidth=function(V){return(nr[V=V||Y].mediaBox.topRightX-nr[V].mediaBox.bottomLeftX)/xt},nc=g.setPageWidth=function(V,Ae){nr[V].mediaBox.topRightX=Ae*xt+nr[V].mediaBox.bottomLeftX},Ha=g.getPageHeight=function(V){return(nr[V=V||Y].mediaBox.topRightY-nr[V].mediaBox.bottomLeftY)/xt},zc=g.setPageHeight=function(V,Ae){nr[V].mediaBox.topRightY=Ae*xt+nr[V].mediaBox.bottomLeftY};return g.internal={pdfEscape:hn,getStyle:xi,getFont:Us,getFontSize:lt,getCharSpace:Vc,getTextColor:Hc,getLineHeight:Xl,getLineHeightFactor:Xi,getLineWidth:mo,write:je,getHorizontalCoordinate:Qa,getVerticalCoordinate:Ms,getCoordinateString:JA,getVerticalCoordinateString:ml,collections:{},newObject:jn,newAdditionalObject:ke,newObjectDeferred:Yn,newObjectDeferredBegin:he,getFilters:Ke,putStream:rt,events:Gr,scaleFactor:xt,pageSize:{getWidth:function(){return vl(Y)},setWidth:function(V){nc(Y,V)},getHeight:function(){return Ha(Y)},setHeight:function(V){zc(Y,V)}},encryptionOptions:d,encryption:On,getEncryptor:Mo,output:Uo,getNumberOfPages:_n,pages:de,out:be,f2:Q,f3:D,getPageInfo:uo,getPageInfoByObjId:hr,getCurrentPageInfo:Ao,getPDFVersion:y,Point:tc,Rectangle:Gc,Matrix:zt,hasHotfix:co},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return vl(Y)},set:function(V){nc(Y,V)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return Ha(Y)},set:function(V){zc(Y,V)},enumerable:!0,configurable:!0}),Vu.call(g,st),Rt="F1",ul(s,r),Gr.publish("initialized"),g}Z0.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Z0.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Z0.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},Z0.prototype.processOwnerPassword=function(t,e){return pS(mS(e).substr(0,5),t)},Z0.prototype.encryptor=function(t,e){var r=mS(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return pS(r,n)}},E2.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||qn(t)!==qn(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},or.API={events:[]},or.version="2.5.2";var Hs=or.API,U4=1,Kh=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},B0=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Rr=function(t){return t.toFixed(2)},Id=function(t){return t.toFixed(5)};Hs.__acroform__={};var Do=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},DF=function(t){return t*U4},xu=function(t){var e=new cP,r=rr.internal.getHeight(t)||0,n=rr.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Rr(n)),Number(Rr(r))],e},Toe=Hs.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},Noe=Hs.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},Boe=Hs.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},aa=Hs.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Boe(t,e-1)},ia=Hs.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Toe(t,e-1)},oa=Hs.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Noe(t,e-1)},koe=Hs.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,s=t[0],a=t[1],i=t[2],o=t[3],l={};return l.lowerLeft_X=r(s)||0,l.lowerLeft_Y=n(a+o)||0,l.upperRight_X=r(s+i)||0,l.upperRight_Y=n(a)||0,[Number(Rr(l.lowerLeft_X)),Number(Rr(l.lowerLeft_Y)),Number(Rr(l.upperRight_X)),Number(Rr(l.upperRight_Y))]},Ioe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=gS(t,r),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+Rr(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=xu(t);return a.scope=t.scope,a.stream=e.join(`
`),a}},gS=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(D){return D.split(`
`)}):s.map(function(D){return[D]});var a=r,i=rr.internal.getHeight(t)||0;i=i<0?-i:i;var o=rr.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(D,I,O){if(D+1<s.length){var G=I+" "+s[D+1][0];return Fv(G,t,O).width<=o-4}return!1};a++;e:for(;a>0;){e="",a--;var u,d,h=Fv("3",t,a).height,m=t.multiline?i-a:(i-h)/2,g=m+=2,b=0,y=0,_=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+Fv(e,t,a=12).width+", FieldWidth:"+o+`
`;break}for(var N="",k=0,R=0;R<s.length;R++)if(s.hasOwnProperty(R)){var M=!1;if(s[R].length!==1&&_!==s[R].length-1){if((h+2)*(k+2)+2>i)continue e;N+=s[R][_],M=!0,y=R,R--}else{N=(N+=s[R][_]+" ").substr(N.length-1)==" "?N.substr(0,N.length-1):N;var j=parseInt(R),L=l(j,N,a),C=R>=s.length-1;if(L&&!C){N+=" ",_=0;continue}if(L||C){if(C)y=j;else if(t.multiline&&(h+2)*(k+2)+2>i)continue e}else{if(!t.multiline||(h+2)*(k+2)+2>i)continue e;y=j}}for(var E="",B=b;B<=y;B++){var Q=s[B];if(t.multiline){if(B===y){E+=Q[_]+" ",_=(_+1)%Q.length;continue}if(B===b){E+=Q[Q.length-1]+" ";continue}}E+=Q[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,d=Fv(E,t,a).width,t.textAlign){case"right":u=o-d-2;break;case"center":u=(o-d)/2;break;case"left":default:u=2}e+=Rr(u)+" "+Rr(g)+` Td
`,e+="("+Kh(E)+`) Tj
`,e+=-Rr(u)+` 0 Td
`,g=-(a+2),d=0,b=M?y:y+1,k++,N=""}break}return n.text=e,n.fontSize=a,n},Fv=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},Foe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Doe=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},Roe=function(t,e){for(var r in t)if(t.hasOwnProperty(r)){var n=r,s=t[r];e.internal.newObjectDeferredBegin(s.objId,!0),qn(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete t[n]}},Loe=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Lc.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Foe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");U4=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new uP,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var a=n[s];a.objId=void 0,a.hasAnnotation&&Doe(a,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,s){var a=!n;for(var i in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(i)){var o=n[i],l=[],u=o.Rect;if(o.Rect&&(o.Rect=koe(o.Rect,s)),s.internal.newObjectDeferredBegin(o.objId,!0),o.DA=rr.createDefaultAppearanceStream(o),qn(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=Ioe(o);l.push({key:"AP",value:"<</N "+d+">>"}),s.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var h="";for(var m in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(m)){var g=o.appearanceStreamContent[m];if(h+="/"+m+" ",h+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var i in g)if(g.hasOwnProperty(i)){var b=g[i];typeof b=="function"&&(b=b.call(s,o)),h+="/"+i+" "+b+" ",s.internal.acroformPlugin.xForms.indexOf(b)>=0||s.internal.acroformPlugin.xForms.push(b)}}else typeof(b=g)=="function"&&(b=b.call(s,o)),h+="/"+i+" "+b,s.internal.acroformPlugin.xForms.indexOf(b)>=0||s.internal.acroformPlugin.xForms.push(b);h+=">>"}l.push({key:"AP",value:`<<
`+h+">>"})}s.internal.putStream({additionalKeyValues:l,objectId:o.objId}),s.internal.out("endobj")}a&&Roe(s.internal.acroformPlugin.xForms,s)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},lP=Hs.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(i){return i};if(Array.isArray(t)){for(var s="[",a=0;a<t.length;a++)switch(a!==0&&(s+=" "),qn(t[a])){case"boolean":case"number":case"object":s+=t[a].toString();break;case"string":t[a].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),s+="("+Kh(n(t[a].toString()))+")"):s+=t[a].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},gE=function(t,e,r){var n=function(s){return s};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Kh(n(t))+")"},Cu=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Cu.prototype.toString=function(){return this.objId+" 0 R"},Cu.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Cu.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],s=this[n];s&&(Array.isArray(s)?t.push({key:n,value:lP(s,this.objId,this.scope)}):s instanceof Cu?(s.scope=this.scope,t.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:n,value:s}))}return t};var cP=function(){Cu.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};Do(cP,Cu);var uP=function(){Cu.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Kh(r(t))+")"}},set:function(r){t=r}})};Do(uP,Cu);var Lc=function t(){Cu.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute F supplied.');e=N}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!aa(e,3)},set:function(N){N?this.F=ia(e,3):this.F=oa(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute Ff supplied.');r=N}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(N){n=N!==void 0?N:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(N){n[0]=N}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(N){n[1]=N}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(N){n[2]=N}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(N){n[3]=N}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(N){switch(N){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=N;break;default:throw new Error('Invalid value "'+N+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof _2)return;a="FieldObject"+t.FieldNum++}var N=function(k){return k};return this.scope&&(N=this.scope.internal.getEncryptor(this.objId)),"("+Kh(N(a))+")"},set:function(N){a=N.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(N){a=N}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(N){i=N}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(N){o=N}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(N){l=N}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/U4:u},set:function(N){u=N}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(N){d=N}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof _2||this instanceof vh))return gE(h,this.objId,this.scope)},set:function(N){N=N.toString(),h=N}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Ya?m:gE(m,this.objId,this.scope)},set:function(N){N=N.toString(),m=this instanceof Ya?N:N.substr(0,1)==="("?B0(N.substr(1,N.length-2)):B0(N)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ya?B0(m.substr(1,m.length-1)):m},set:function(N){N=N.toString(),m=this instanceof Ya?"/"+N:N}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(N){this.V=N}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Ya?g:gE(g,this.objId,this.scope)},set:function(N){N=N.toString(),g=this instanceof Ya?N:N.substr(0,1)==="("?B0(N.substr(1,N.length-2)):B0(N)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ya?B0(g.substr(1,g.length-1)):g},set:function(N){N=N.toString(),g=this instanceof Ya?"/"+N:N}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(N){N=!!N,y=N}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(N){b=N}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,1)},set:function(N){N?this.Ff=ia(this.Ff,1):this.Ff=oa(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,2)},set:function(N){N?this.Ff=ia(this.Ff,2):this.Ff=oa(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,3)},set:function(N){N?this.Ff=ia(this.Ff,3):this.Ff=oa(this.Ff,3)}});var _=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(_!==null)return _},set:function(N){if([0,1,2].indexOf(N)===-1)throw new Error('Invalid value "'+N+'" for attribute Q supplied.');_=N}}),Object.defineProperty(this,"textAlign",{get:function(){var N;switch(_){case 0:default:N="left";break;case 1:N="center";break;case 2:N="right"}return N},configurable:!0,enumerable:!0,set:function(N){switch(N){case"right":case 2:_=2;break;case"center":case 1:_=1;break;case"left":case 0:default:_=0}}})};Do(Lc,Cu);var gm=function(){Lc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return lP(e,this.objId,this.scope)},set:function(r){var n,s;s=[],typeof(n=r)=="string"&&(s=function(a,i,o){o||(o=1);for(var l,u=[];l=i.exec(a);)u.push(l[o]);return u}(n,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,18)},set:function(r){r?this.Ff=ia(this.Ff,18):this.Ff=oa(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=ia(this.Ff,19):this.Ff=oa(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,20)},set:function(r){r?(this.Ff=ia(this.Ff,20),e.sort()):this.Ff=oa(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,22)},set:function(r){r?this.Ff=ia(this.Ff,22):this.Ff=oa(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,23)},set:function(r){r?this.Ff=ia(this.Ff,23):this.Ff=oa(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,27)},set:function(r){r?this.Ff=ia(this.Ff,27):this.Ff=oa(this.Ff,27)}}),this.hasAppearanceStream=!1};Do(gm,Lc);var xm=function(){gm.call(this),this.fontName="helvetica",this.combo=!1};Do(xm,gm);var vm=function(){xm.call(this),this.combo=!0};Do(vm,xm);var Py=function(){vm.call(this),this.edit=!0};Do(Py,vm);var Ya=function(){Lc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,15)},set:function(r){r?this.Ff=ia(this.Ff,15):this.Ff=oa(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,16)},set:function(r){r?this.Ff=ia(this.Ff,16):this.Ff=oa(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,17)},set:function(r){r?this.Ff=ia(this.Ff,17):this.Ff=oa(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,26)},set:function(r){r?this.Ff=ia(this.Ff,26):this.Ff=oa(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(a){return a};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,s=[];for(n in s.push("<<"),e)s.push("/"+n+" ("+Kh(r(e[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){qn(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};Do(Ya,Lc);var jy=function(){Ya.call(this),this.pushButton=!0};Do(jy,Ya);var ym=function(){Ya.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Do(ym,Ya);var _2=function(){var t,e;Lc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(o){return o};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var a,i=[];for(a in i.push("<<"),n)i.push("/"+a+" ("+Kh(s(n[a]))+")");return i.push(">>"),i.join(`
`)},set:function(s){qn(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=rr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Do(_2,Lc),ym.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},ym.prototype.createOption=function(t){var e=new _2;return e.Parent=this,e.optionName=t,this.Kids.push(e),Uoe.call(this.scope,e),e};var Oy=function(){Ya.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=rr.CheckBox.createAppearanceStream()};Do(Oy,Ya);var vh=function(){Lc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,13)},set:function(e){e?this.Ff=ia(this.Ff,13):this.Ff=oa(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,21)},set:function(e){e?this.Ff=ia(this.Ff,21):this.Ff=oa(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,23)},set:function(e){e?this.Ff=ia(this.Ff,23):this.Ff=oa(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,24)},set:function(e){e?this.Ff=ia(this.Ff,24):this.Ff=oa(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,25)},set:function(e){e?this.Ff=ia(this.Ff,25):this.Ff=oa(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,26)},set:function(e){e?this.Ff=ia(this.Ff,26):this.Ff=oa(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Do(vh,Lc);var Qy=function(){vh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,14)},set:function(t){t?this.Ff=ia(this.Ff,14):this.Ff=oa(this.Ff,14)}}),this.password=!0};Do(Qy,vh);var rr={CheckBox:{createAppearanceStream:function(){return{N:{On:rr.CheckBox.YesNormal},D:{On:rr.CheckBox.YesPushDown,Off:rr.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=xu(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),a=gS(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Rr(rr.internal.getWidth(t))+" "+Rr(rr.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Rr(a.fontSize)+" Tf "+s),r.push("BT"),r.push(a.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=xu(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),s=[],a=rr.internal.getHeight(t),i=rr.internal.getWidth(t),o=gS(t,t.caption);return s.push("1 g"),s.push("0 0 "+Rr(i)+" "+Rr(a)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Rr(i-1)+" "+Rr(a-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+Rr(o.fontSize)+" Tf "+n),s.push(o.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=xu(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Rr(rr.internal.getWidth(t))+" "+Rr(rr.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:rr.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=rr.RadioButton.Circle.YesNormal,e.D[t]=rr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=xu(t);e.scope=t.scope;var r=[],n=rr.internal.getWidth(t)<=rr.internal.getHeight(t)?rr.internal.getWidth(t)/4:rr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=rr.internal.Bezier_C,a=Number((n*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Id(rr.internal.getWidth(t)/2)+" "+Id(rr.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=xu(t);e.scope=t.scope;var r=[],n=rr.internal.getWidth(t)<=rr.internal.getHeight(t)?rr.internal.getWidth(t)/4:rr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),a=Number((s*rr.internal.Bezier_C).toFixed(5)),i=Number((n*rr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Id(rr.internal.getWidth(t)/2)+" "+Id(rr.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),r.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),r.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),r.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Id(rr.internal.getWidth(t)/2)+" "+Id(rr.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=xu(t);e.scope=t.scope;var r=[],n=rr.internal.getWidth(t)<=rr.internal.getHeight(t)?rr.internal.getWidth(t)/4:rr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),a=Number((s*rr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Id(rr.internal.getWidth(t)/2)+" "+Id(rr.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),r.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),r.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),r.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:rr.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=rr.RadioButton.Cross.YesNormal,e.D[t]=rr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=xu(t);e.scope=t.scope;var r=[],n=rr.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Rr(rr.internal.getWidth(t)-2)+" "+Rr(rr.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Rr(n.x1.x)+" "+Rr(n.x1.y)+" m"),r.push(Rr(n.x2.x)+" "+Rr(n.x2.y)+" l"),r.push(Rr(n.x4.x)+" "+Rr(n.x4.y)+" m"),r.push(Rr(n.x3.x)+" "+Rr(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=xu(t);e.scope=t.scope;var r=rr.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Rr(rr.internal.getWidth(t))+" "+Rr(rr.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Rr(rr.internal.getWidth(t)-2)+" "+Rr(rr.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Rr(r.x1.x)+" "+Rr(r.x1.y)+" m"),n.push(Rr(r.x2.x)+" "+Rr(r.x2.y)+" l"),n.push(Rr(r.x4.x)+" "+Rr(r.x4.y)+" m"),n.push(Rr(r.x3.x)+" "+Rr(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=xu(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Rr(rr.internal.getWidth(t))+" "+Rr(rr.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};rr.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=rr.internal.getWidth(t),r=rr.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},rr.internal.getWidth=function(t){var e=0;return qn(t)==="object"&&(e=DF(t.Rect[2])),e},rr.internal.getHeight=function(t){var e=0;return qn(t)==="object"&&(e=DF(t.Rect[3])),e};var Uoe=Hs.addField=function(t){if(Loe(this,t),!(t instanceof Lc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Hs.AcroFormChoiceField=gm,Hs.AcroFormListBox=xm,Hs.AcroFormComboBox=vm,Hs.AcroFormEditBox=Py,Hs.AcroFormButton=Ya,Hs.AcroFormPushButton=jy,Hs.AcroFormRadioButton=ym,Hs.AcroFormCheckBox=Oy,Hs.AcroFormTextField=vh,Hs.AcroFormPasswordField=Qy,Hs.AcroFormAppearance=rr,Hs.AcroForm={ChoiceField:gm,ListBox:xm,ComboBox:vm,EditBox:Py,Button:Ya,PushButton:jy,RadioButton:ym,CheckBox:Oy,TextField:vh,PasswordField:Qy,Appearance:rr},or.AcroForm={ChoiceField:gm,ListBox:xm,ComboBox:vm,EditBox:Py,Button:Ya,PushButton:jy,RadioButton:ym,CheckBox:Oy,TextField:vh,PasswordField:Qy,Appearance:rr};or.AcroForm;function AP(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=t.__addimage__.getImageFileTypeByImageData=function(D,I){var O,G,se,J,re,q=e;if((I=I||e)==="RGBA"||D.data!==void 0&&D.data instanceof Uint8ClampedArray&&"height"in D&&"width"in D)return"RGBA";if(L(D))for(re in r)for(se=r[re],O=0;O<se.length;O+=1){for(J=!0,G=0;G<se[O].length;G+=1)if(se[O][G]!==void 0&&se[O][G]!==D[G]){J=!1;break}if(J===!0){q=re;break}}else for(re in r)for(se=r[re],O=0;O<se.length;O+=1){for(J=!0,G=0;G<se[O].length;G+=1)if(se[O][G]!==void 0&&se[O][G]!==D.charCodeAt(G)){J=!1;break}if(J===!0){q=re;break}}return q===e&&I!==e&&(q=I),q},s=function D(I){for(var O=this.internal.write,G=this.internal.putStream,se=(0,this.internal.getFilters)();se.indexOf("FlateEncode")!==-1;)se.splice(se.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var J=[];if(J.push({key:"Type",value:"/XObject"}),J.push({key:"Subtype",value:"/Image"}),J.push({key:"Width",value:I.width}),J.push({key:"Height",value:I.height}),I.colorSpace===_.INDEXED?J.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(J.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===_.DEVICE_CMYK&&J.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),J.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&J.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)){for(var re="",q=0,z=I.transparency.length;q<z;q++)re+=I.transparency[q]+" "+I.transparency[q]+" ";J.push({key:"Mask",value:"["+re+"]"})}I.sMask!==void 0&&J.push({key:"SMask",value:I.objectId+1+" 0 R"});var W=I.filter!==void 0?["/"+I.filter]:void 0;if(G({data:I.data,additionalKeyValues:J,alreadyAppliedFilters:W,objectId:I.objectId}),O("endobj"),"sMask"in I&&I.sMask!==void 0){var ie="/Predictor "+I.predictor+" /Colors 1 /BitsPerComponent "+I.bitsPerComponent+" /Columns "+I.width,P={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:I.bitsPerComponent,decodeParameters:ie,data:I.sMask};"filter"in I&&(P.filter=I.filter),D.call(this,P)}if(I.colorSpace===_.INDEXED){var Y=this.internal.newObject();G({data:E(new Uint8Array(I.palette)),objectId:Y}),O("endobj")}},a=function(){var D=this.internal.collections.addImage_images;for(var I in D)s.call(this,D[I])},i=function(){var D,I=this.internal.collections.addImage_images,O=this.internal.write;for(var G in I)O("/I"+(D=I[G]).index,D.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",i))},l=function(){var D=this.internal.collections.addImage_images;return o.call(this),D},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(D){return typeof t["process"+D.toUpperCase()]=="function"},h=function(D){return qn(D)==="object"&&D.nodeType===1},m=function(D,I){if(D.nodeName==="IMG"&&D.hasAttribute("src")){var O=""+D.getAttribute("src");if(O.indexOf("data:image/")===0)return Qg(unescape(O).split("base64,").pop());var G=t.loadFile(O,!0);if(G!==void 0)return G}if(D.nodeName==="CANVAS"){if(D.width===0||D.height===0)throw new Error("Given canvas must have data. Canvas width: "+D.width+", height: "+D.height);var se;switch(I){case"PNG":se="image/png";break;case"WEBP":se="image/webp";break;case"JPEG":case"JPG":default:se="image/jpeg"}return Qg(D.toDataURL(se,1).split("base64,").pop())}},g=function(D){var I=this.internal.collections.addImage_images;if(I){for(var O in I)if(D===I[O].alias)return I[O]}},b=function(D,I,O){return D||I||(D=-96,I=-96),D<0&&(D=-1*O.width*72/D/this.internal.scaleFactor),I<0&&(I=-1*O.height*72/I/this.internal.scaleFactor),D===0&&(D=I*O.width/O.height),I===0&&(I=D*O.height/O.width),[D,I]},y=function(D,I,O,G,se,J){var re=b.call(this,O,G,se),q=this.internal.getCoordinateString,z=this.internal.getVerticalCoordinateString,W=l.call(this);if(O=re[0],G=re[1],W[se.index]=se,J){J*=Math.PI/180;var ie=Math.cos(J),P=Math.sin(J),Y=function(te){return te.toFixed(4)},Z=[Y(ie),Y(P),Y(-1*P),Y(ie),0,0,"cm"]}this.internal.write("q"),J?(this.internal.write([1,"0","0",1,q(D),z(I+G),"cm"].join(" ")),this.internal.write(Z.join(" ")),this.internal.write([q(O),"0","0",q(G),"0","0","cm"].join(" "))):this.internal.write([q(O),"0","0",q(G),q(D),z(I+G),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+se.index+" Do"),this.internal.write("Q")},_=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var N=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},k=t.__addimage__.sHashCode=function(D){var I,O,G=0;if(typeof D=="string")for(O=D.length,I=0;I<O;I++)G=(G<<5)-G+D.charCodeAt(I),G|=0;else if(L(D))for(O=D.byteLength/2,I=0;I<O;I++)G=(G<<5)-G+D[I],G|=0;return G},R=t.__addimage__.validateStringAsBase64=function(D){(D=D||"").toString().trim();var I=!0;return D.length===0&&(I=!1),D.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(D.substr(0,D.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(D.substr(-2))===!1&&(I=!1),I},M=t.__addimage__.extractImageFromDataUrl=function(D){var I=(D=D||"").split("base64,"),O=null;if(I.length===2){var G=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(I[0]);Array.isArray(G)&&(O={mimeType:G[1],charset:G[2],data:I[1]})}return O},j=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(D){return j()&&D instanceof ArrayBuffer};var L=t.__addimage__.isArrayBufferView=function(D){return j()&&typeof Uint32Array<"u"&&(D instanceof Int8Array||D instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&D instanceof Uint8ClampedArray||D instanceof Int16Array||D instanceof Uint16Array||D instanceof Int32Array||D instanceof Uint32Array||D instanceof Float32Array||D instanceof Float64Array)},C=t.__addimage__.binaryStringToUint8Array=function(D){for(var I=D.length,O=new Uint8Array(I),G=0;G<I;G++)O[G]=D.charCodeAt(G);return O},E=t.__addimage__.arrayBufferToBinaryString=function(D){for(var I="",O=L(D)?D:new Uint8Array(D),G=0;G<O.length;G+=8192)I+=String.fromCharCode.apply(null,O.subarray(G,G+8192));return I};t.addImage=function(){var D,I,O,G,se,J,re,q,z;if(typeof arguments[1]=="number"?(I=e,O=arguments[1],G=arguments[2],se=arguments[3],J=arguments[4],re=arguments[5],q=arguments[6],z=arguments[7]):(I=arguments[1],O=arguments[2],G=arguments[3],se=arguments[4],J=arguments[5],re=arguments[6],q=arguments[7],z=arguments[8]),qn(D=arguments[0])==="object"&&!h(D)&&"imageData"in D){var W=D;D=W.imageData,I=W.format||I||e,O=W.x||O||0,G=W.y||G||0,se=W.w||W.width||se,J=W.h||W.height||J,re=W.alias||re,q=W.compression||q,z=W.rotation||W.angle||z}var ie=this.internal.getFilters();if(q===void 0&&ie.indexOf("FlateEncode")!==-1&&(q="SLOW"),isNaN(O)||isNaN(G))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var P=B.call(this,D,I,re,q);return y.call(this,O,G,se,J,P,z),this};var B=function(D,I,O,G){var se,J,re;if(typeof D=="string"&&n(D)===e){D=unescape(D);var q=Q(D,!1);(q!==""||(q=t.loadFile(D,!0))!==void 0)&&(D=q)}if(h(D)&&(D=m(D,I)),I=n(D,I),!d(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((re=O)==null||re.length===0)&&(O=function(z){return typeof z=="string"||L(z)?k(z):L(z.data)?k(z.data):null}(D)),(se=g.call(this,O))||(j()&&(D instanceof Uint8Array||I==="RGBA"||(J=D,D=C(D))),se=this["process"+I.toUpperCase()](D,u.call(this),O,function(z){return z&&typeof z=="string"&&(z=z.toUpperCase()),z in t.image_compression?z:N.NONE}(G),J)),!se)throw new Error("An unknown error occurred whilst processing the image.");return se},Q=t.__addimage__.convertBase64ToBinaryString=function(D,I){var O;I=typeof I!="boolean"||I;var G,se="";if(typeof D=="string"){G=(O=M(D))!==null?O.data:D;try{se=Qg(G)}catch(J){if(I)throw R(G)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+J.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return se};t.getImageProperties=function(D){var I,O,G="";if(h(D)&&(D=m(D)),typeof D=="string"&&n(D)===e&&((G=Q(D,!1))===""&&(G=t.loadFile(D)||""),D=G),O=n(D),!d(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(!j()||D instanceof Uint8Array||(D=C(D)),!(I=this["process"+O.toUpperCase()](D)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=O,I}})(or.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};or.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,s,a,i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,h=0;h<u.length&&!d;h++)switch((n=u[h]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var m=0;m<u.length;m++){n=u[m];var g=this.internal.pdfEscape,b=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),_=this.internal.newAdditionalObject(),N=this.internal.getEncryptor(y.objId),k=n.title||"Note";a="<</Type /Annot /Subtype /Text "+(s="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+g(N(n.contents))+")",a+=" /Popup "+_.objId+" 0 R",a+=" /P "+l.objId+" 0 R",a+=" /T ("+g(N(k))+") >>",y.content=a;var R=y.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+i(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+R,n.open&&(a+=" /Open true"),a+=" >>",_.content=a,this.internal.write(y.objId,"0 R",_.objId,"0 R");break;case"freetext":s="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var M=n.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+g(b(n.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+M+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(n.options.name){var j=this.annotations._nameMap[n.options.name];n.options.pageNumber=j.page,n.options.top=j.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",a="",n.options.url)a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+g(b(n.options.url))+") >>";else if(n.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,a+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var L=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),a+=" /XYZ "+n.options.left+" "+L+" "+n.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,s,a,i){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(r),y:u(n),w:l(r+s),h:u(n+a)},options:i,type:"link"})},t.textWithLink=function(r,n,s,a){var i,o,l=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){o=a.maxWidth;var d=this.splitTextToSize(r,o).length;i=Math.ceil(u*d)}else o=l,i=u;return this.text(r,n,s,a),s+=.2*u,a.align==="center"&&(n-=l/2),a.align==="right"&&(n-=l),this.link(n,s-u,o,i,a),l},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(or.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var a=t.__arabicParser__.isInArabicSubstitutionA=function(y){return e[y.charCodeAt(0)]!==void 0},i=t.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},o=t.__arabicParser__.isArabicEndLetter=function(y){return i(y)&&a(y)&&e[y.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(y){return i(y)&&s.indexOf(y.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return i(y)&&a(y)&&e[y.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(y){return i(y)&&a(y)&&e[y.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(y){return i(y)&&a(y)&&e[y.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(y){return i(y)&&a(y)&&e[y.charCodeAt(0)].length==4},h=t.__arabicParser__.resolveLigatures=function(y){var _=0,N=r,k="",R=0;for(_=0;_<y.length;_+=1)N[y.charCodeAt(_)]!==void 0?(R++,typeof(N=N[y.charCodeAt(_)])=="number"&&(k+=String.fromCharCode(N),N=r,R=0),_===y.length-1&&(N=r,k+=y.charAt(_-(R-1)),_-=R-1,R=0)):(N=r,k+=y.charAt(_-R),_-=R,R=0);return k};t.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&n[y.charCodeAt(0)]!==void 0};var m=t.__arabicParser__.getCorrectForm=function(y,_,N){return i(y)?a(y)===!1?-1:!u(y)||!i(_)&&!i(N)||!i(N)&&o(_)||o(y)&&!i(_)||o(y)&&l(_)||o(y)&&o(_)?0:d(y)&&i(_)&&!o(_)&&i(N)&&u(N)?3:o(y)||!i(N)?1:2:-1},g=function(y){var _=0,N=0,k=0,R="",M="",j="",L=(y=y||"").split("\\s+"),C=[];for(_=0;_<L.length;_+=1){for(C.push(""),N=0;N<L[_].length;N+=1)R=L[_][N],M=L[_][N-1],j=L[_][N+1],i(R)?(k=m(R,M,j),C[_]+=k!==-1?String.fromCharCode(e[R.charCodeAt(0)][k]):R):C[_]+=R;C[_]=h(C[_])}return C.join(" ")},b=t.__arabicParser__.processArabic=t.processArabic=function(){var y,_=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,N=[];if(Array.isArray(_)){var k=0;for(N=[],k=0;k<_.length;k+=1)Array.isArray(_[k])?N.push([g(_[k][0]),_[k][1],_[k][2]]):N.push([g(_[k])]);y=N}else y=g(_);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};t.events.push(["preProcessText",b])}(or.API),or.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(o){a=o}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(o){i=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var s;if((r=r||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(or.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(y){l=y}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(y){u=y}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(y){d=y}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(y){h=y}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(y){m=y}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(y){g=y}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(y){b=y}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),h=u.font||this.getFont(),m=u.scaleFactor||this.internal.scaleFactor,g=0,b=0,y=0,_=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var N=u.maxWidth;N>0?typeof l=="string"?l=this.splitTextToSize(l,N):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(R,M){return R.concat(_.splitTextToSize(M,N))},[])):l=Array.isArray(l)?l:[l];for(var k=0;k<l.length;k++)g<(y=this.getStringUnitWidth(l[k],{font:h})*d)&&(g=y);return g!==0&&(b=l.length),{w:g/=m,h:Math.max((b*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/m,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=t.cell=function(){var l;l=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=h.top,g&&m&&(this.printHeaderRow(l.lineNumber,!0),l.y+=m[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,r===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};t.table=function(l,u,d,h,m){if(n.call(this),!d)throw new Error("No data for PDF table.");var g,b,y,_,N=[],k=[],R=[],M={},j={},L=[],C=[],E=(m=m||{}).autoSize||!1,B=m.printHeaders!==!1,Q=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,D=m.margins||Object.assign({width:this.getPageWidth()},e),I=typeof m.padding=="number"?m.padding:3,O=m.headerBackgroundColor||"#c8c8c8",G=m.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=B,this.internal.__cell__.margins=D,this.internal.__cell__.table_font_size=Q,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=O,this.internal.__cell__.headerTextColor=G,this.setFontSize(Q),h==null)k=N=Object.keys(d[0]),R=N.map(function(){return"left"});else if(Array.isArray(h)&&qn(h[0])==="object")for(N=h.map(function(W){return W.name}),k=h.map(function(W){return W.prompt||W.name||""}),R=h.map(function(W){return W.align||"left"}),g=0;g<h.length;g+=1)j[h[g].name]=h[g].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(k=N=h,R=N.map(function(){return"left"}));if(E||Array.isArray(h)&&typeof h[0]=="string")for(g=0;g<N.length;g+=1){for(M[_=N[g]]=d.map(function(W){return W[_]}),this.setFont(void 0,"bold"),L.push(this.getTextDimensions(k[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=M[_],this.setFont(void 0,"normal"),y=0;y<b.length;y+=1)L.push(this.getTextDimensions(b[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);j[_]=Math.max.apply(null,L)+I+I,L=[]}if(B){var se={};for(g=0;g<N.length;g+=1)se[N[g]]={},se[N[g]].text=k[g],se[N[g]].align=R[g];var J=o.call(this,se,j);C=N.map(function(W){return new a(l,u,j[W],J,se[W].text,void 0,se[W].align)}),this.setTableHeaderRow(C),this.printHeaderRow(1,!1)}var re=h.reduce(function(W,ie){return W[ie.name]=ie.align,W},{});for(g=0;g<d.length;g+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:g,data:d[g]},this);var q=o.call(this,d[g],j);for(y=0;y<N.length;y+=1){var z=d[g][N[y]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:g,col:y,data:z},this),i.call(this,new a(l,u,j[N[y]],q,z,g+2,re[N[y]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var o=function(l,u){var d=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(l).map(function(g){var b=l[g];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,u[g]-d-d)},this).map(function(g){return this.getLineHeightFactor()*g.length*h/m+d+d},this).reduce(function(g,b){return Math.max(g,b)},0)};t.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){d=this.internal.__cell__.tableHeaderRow[g].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,m.push(d)),d.lineNumber=l;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,d),this.setTextColor(b)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),r=!1}}(or.API);var dP={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},fP=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],xS=AP(fP),hP=[100,200,300,400,500,600,700,800,900],Moe=AP(hP);function vS(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(a){return dP[a=a||"normal"]?a:"normal"}(t.style),n=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(t.weight),s=function(a){return typeof xS[a=a||"normal"]=="number"?a:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,r,n].join(" ")}}}function RF(t,e,r,n){var s;for(s=r;s>=0&&s<e.length;s+=n)if(t[e[s]])return t[e[s]];for(s=r;s>=0&&s<e.length;s-=n)if(t[e[s]])return t[e[s]]}var Poe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},LF={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function UF(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function joe(t,e,r){for(var n=(r=r||{}).defaultFontFamily||"times",s=Object.assign({},Poe,r.genericFontFamilies||{}),a=null,i=null,o=0;o<e.length;++o)if(s[(a=vS(e[o])).family]&&(a.family=s[a.family]),t.hasOwnProperty(a.family)){i=t[a.family];break}if(!(i=i||t[n]))throw new Error("Could not find a font-family for the rule '"+UF(a)+"' and default family '"+n+"'.");if(i=function(l,u){if(u[l])return u[l];var d=xS[l],h=d<=xS.normal?-1:1,m=RF(u,fP,d,h);if(!m)throw new Error("Could not find a matching font-stretch value for "+l);return m}(a.stretch,i),i=function(l,u){if(u[l])return u[l];for(var d=dP[l],h=0;h<d.length;++h)if(u[d[h]])return u[d[h]];throw new Error("Could not find a matching font-style for "+l)}(a.style,i),!(i=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var d=Moe[l],h=RF(u,hP,d,l<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+l);return h}(a.weight,i)))throw new Error("Failed to resolve a font for the rule '"+UF(a)+"'.");return i}function MF(t){return t.trimLeft()}function Ooe(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function Qoe(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Dv,PF,jF,xE=["times"];(function(t){var e,r,n,s,a,i,o,l,u,d=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new l,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new i,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new i,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,i=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,u=new d}]);var h=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Y=P;Object.defineProperty(this,"pdf",{get:function(){return Y}});var Z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Z},set:function(Te){Z=!!Te}});var te=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return te},set:function(Te){te=!!Te}});var ce=0;Object.defineProperty(this,"posX",{get:function(){return ce},set:function(Te){isNaN(Te)||(ce=Te)}});var Ee=0;Object.defineProperty(this,"posY",{get:function(){return Ee},set:function(Te){isNaN(Te)||(Ee=Te)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Te){var be;typeof Te=="number"?be=[Te,Te,Te,Te]:((be=new Array(4))[0]=Te[0],be[1]=Te.length>=2?Te[1]:be[0],be[2]=Te.length>=3?Te[2]:be[0],be[3]=Te.length>=4?Te[3]:be[1]),u.margin=be}});var pe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return pe},set:function(Te){pe=Te}});var fe=0;Object.defineProperty(this,"lastBreak",{get:function(){return fe},set:function(Te){fe=Te}});var xe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return xe},set:function(Te){xe=Te}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Te){Te instanceof d&&(u=Te)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Te){u.path=Te}});var de=[];Object.defineProperty(this,"ctxStack",{get:function(){return de},set:function(Te){de=Te}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Te){var be;be=m(Te),this.ctx.fillStyle=be.style,this.ctx.isFillTransparent=be.a===0,this.ctx.fillOpacity=be.a,this.pdf.setFillColor(be.r,be.g,be.b,{a:be.a}),this.pdf.setTextColor(be.r,be.g,be.b,{a:be.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Te){var be=m(Te);this.ctx.strokeStyle=be.style,this.ctx.isStrokeTransparent=be.a===0,this.ctx.strokeOpacity=be.a,be.a===0?this.pdf.setDrawColor(255,255,255):(be.a,this.pdf.setDrawColor(be.r,be.g,be.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Te){["butt","round","square"].indexOf(Te)!==-1&&(this.ctx.lineCap=Te,this.pdf.setLineCap(Te))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Te){isNaN(Te)||(this.ctx.lineWidth=Te,this.pdf.setLineWidth(Te))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Te){["bevel","round","miter"].indexOf(Te)!==-1&&(this.ctx.lineJoin=Te,this.pdf.setLineJoin(Te))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Te){isNaN(Te)||(this.ctx.miterLimit=Te,this.pdf.setMiterLimit(Te))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Te){this.ctx.textBaseline=Te}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Te){["right","end","center","left","start"].indexOf(Te)!==-1&&(this.ctx.textAlign=Te)}});var oe=null;function Le(Te,be){if(oe===null){var je=function(qe){var st=[];return Object.keys(qe).forEach(function(mt){qe[mt].forEach(function(Et){var lt=null;switch(Et){case"bold":lt={family:mt,weight:"bold"};break;case"italic":lt={family:mt,style:"italic"};break;case"bolditalic":lt={family:mt,weight:"bold",style:"italic"};break;case"":case"normal":lt={family:mt}}lt!==null&&(lt.ref={name:mt,style:Et},st.push(lt))})}),st}(Te.getFontList());oe=function(qe){for(var st={},mt=0;mt<qe.length;++mt){var Et=vS(qe[mt]),lt=Et.family,kt=Et.stretch,Gt=Et.style,Xt=Et.weight;st[lt]=st[lt]||{},st[lt][kt]=st[lt][kt]||{},st[lt][kt][Gt]=st[lt][kt][Gt]||{},st[lt][kt][Gt][Xt]=Et}return st}(je.concat(be))}return oe}var et=null;Object.defineProperty(this,"fontFaces",{get:function(){return et},set:function(Te){oe=null,et=Te}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Te){var be;if(this.ctx.font=Te,(be=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Te))!==null){var je=be[1],qe=(be[2],be[3]),st=be[4],mt=(be[5],be[6]),Et=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(st)[2];st=Math.floor(Et==="px"?parseFloat(st)*this.pdf.internal.scaleFactor:Et==="em"?parseFloat(st)*this.pdf.getFontSize():parseFloat(st)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(st);var lt=function(Lt){var Rt,xt,wr=[],Jt=Lt.trim();if(Jt==="")return xE;if(Jt in LF)return[LF[Jt]];for(;Jt!=="";){switch(xt=null,Rt=(Jt=MF(Jt)).charAt(0)){case'"':case"'":xt=Ooe(Jt.substring(1),Rt);break;default:xt=Qoe(Jt)}if(xt===null||(wr.push(xt[0]),(Jt=MF(xt[1]))!==""&&Jt.charAt(0)!==","))return xE;Jt=Jt.replace(/^,/,"")}return wr}(mt);if(this.fontFaces){var kt=joe(Le(this.pdf,this.fontFaces),lt.map(function(Lt){return{family:Lt,stretch:"normal",weight:qe,style:je}}));this.pdf.setFont(kt.ref.name,kt.ref.style)}else{var Gt="";(qe==="bold"||parseInt(qe,10)>=700||je==="bold")&&(Gt="bold"),je==="italic"&&(Gt+="italic"),Gt.length===0&&(Gt="normal");for(var Xt="",It={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Dt=0;Dt<lt.length;Dt++){if(this.pdf.internal.getFont(lt[Dt],Gt,{noFallback:!0,disableWarning:!0})!==void 0){Xt=lt[Dt];break}if(Gt==="bolditalic"&&this.pdf.internal.getFont(lt[Dt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Xt=lt[Dt],Gt="bold";else if(this.pdf.internal.getFont(lt[Dt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Xt=lt[Dt],Gt="normal";break}}if(Xt===""){for(var Wt=0;Wt<lt.length;Wt++)if(It[lt[Wt]]){Xt=It[lt[Wt]];break}}Xt=Xt===""?"Times":Xt,this.pdf.setFont(Xt,Gt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Te){this.ctx.globalCompositeOperation=Te}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Te){this.ctx.globalAlpha=Te}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Te){this.ctx.lineDashOffset=Te,ie.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Te){this.ctx.lineDash=Te,ie.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Te){this.ctx.ignoreClearRect=!!Te}})};h.prototype.setLineDash=function(P){this.lineDash=P},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){M.call(this,"fill",!1)},h.prototype.stroke=function(){M.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(P,Y){if(isNaN(P)||isNaN(Y))throw as.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Z=this.ctx.transform.applyToPoint(new i(P,Y));this.path.push({type:"mt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new i(P,Y)},h.prototype.closePath=function(){var P=new i(0,0),Y=0;for(Y=this.path.length-1;Y!==-1;Y--)if(this.path[Y].type==="begin"&&qn(this.path[Y+1])==="object"&&typeof this.path[Y+1].x=="number"){P=new i(this.path[Y+1].x,this.path[Y+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(P.x,P.y)},h.prototype.lineTo=function(P,Y){if(isNaN(P)||isNaN(Y))throw as.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Z=this.ctx.transform.applyToPoint(new i(P,Y));this.path.push({type:"lt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new i(Z.x,Z.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),M.call(this,null,!0)},h.prototype.quadraticCurveTo=function(P,Y,Z,te){if(isNaN(Z)||isNaN(te)||isNaN(P)||isNaN(Y))throw as.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ce=this.ctx.transform.applyToPoint(new i(Z,te)),Ee=this.ctx.transform.applyToPoint(new i(P,Y));this.path.push({type:"qct",x1:Ee.x,y1:Ee.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new i(ce.x,ce.y)},h.prototype.bezierCurveTo=function(P,Y,Z,te,ce,Ee){if(isNaN(ce)||isNaN(Ee)||isNaN(P)||isNaN(Y)||isNaN(Z)||isNaN(te))throw as.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var pe=this.ctx.transform.applyToPoint(new i(ce,Ee)),fe=this.ctx.transform.applyToPoint(new i(P,Y)),xe=this.ctx.transform.applyToPoint(new i(Z,te));this.path.push({type:"bct",x1:fe.x,y1:fe.y,x2:xe.x,y2:xe.y,x:pe.x,y:pe.y}),this.ctx.lastPoint=new i(pe.x,pe.y)},h.prototype.arc=function(P,Y,Z,te,ce,Ee){if(isNaN(P)||isNaN(Y)||isNaN(Z)||isNaN(te)||isNaN(ce))throw as.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ee=!!Ee,!this.ctx.transform.isIdentity){var pe=this.ctx.transform.applyToPoint(new i(P,Y));P=pe.x,Y=pe.y;var fe=this.ctx.transform.applyToPoint(new i(0,Z)),xe=this.ctx.transform.applyToPoint(new i(0,0));Z=Math.sqrt(Math.pow(fe.x-xe.x,2)+Math.pow(fe.y-xe.y,2))}Math.abs(ce-te)>=2*Math.PI&&(te=0,ce=2*Math.PI),this.path.push({type:"arc",x:P,y:Y,radius:Z,startAngle:te,endAngle:ce,counterclockwise:Ee})},h.prototype.arcTo=function(P,Y,Z,te,ce){throw new Error("arcTo not implemented.")},h.prototype.rect=function(P,Y,Z,te){if(isNaN(P)||isNaN(Y)||isNaN(Z)||isNaN(te))throw as.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,Y),this.lineTo(P+Z,Y),this.lineTo(P+Z,Y+te),this.lineTo(P,Y+te),this.lineTo(P,Y),this.lineTo(P+Z,Y),this.lineTo(P,Y)},h.prototype.fillRect=function(P,Y,Z,te){if(isNaN(P)||isNaN(Y)||isNaN(Z)||isNaN(te))throw as.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var ce={};this.lineCap!=="butt"&&(ce.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ce.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,Y,Z,te),this.fill(),ce.hasOwnProperty("lineCap")&&(this.lineCap=ce.lineCap),ce.hasOwnProperty("lineJoin")&&(this.lineJoin=ce.lineJoin)}},h.prototype.strokeRect=function(P,Y,Z,te){if(isNaN(P)||isNaN(Y)||isNaN(Z)||isNaN(te))throw as.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(P,Y,Z,te),this.stroke())},h.prototype.clearRect=function(P,Y,Z,te){if(isNaN(P)||isNaN(Y)||isNaN(Z)||isNaN(te))throw as.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,Y,Z,te))},h.prototype.save=function(P){P=typeof P!="boolean"||P;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("q");if(this.pdf.setPage(Y),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var te=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=te}},h.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("Q");this.pdf.setPage(Y),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(P){var Y,Z,te,ce;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))Y=0,Z=0,te=0,ce=0;else{var Ee=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(Ee!==null)Y=parseInt(Ee[1]),Z=parseInt(Ee[2]),te=parseInt(Ee[3]),ce=1;else if((Ee=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)Y=parseInt(Ee[1]),Z=parseInt(Ee[2]),te=parseInt(Ee[3]),ce=parseFloat(Ee[4]);else{if(ce=1,typeof P=="string"&&P.charAt(0)!=="#"){var pe=new aP(P);P=pe.ok?pe.toHex():"#000000"}P.length===4?(Y=P.substring(1,2),Y+=Y,Z=P.substring(2,3),Z+=Z,te=P.substring(3,4),te+=te):(Y=P.substring(1,3),Z=P.substring(3,5),te=P.substring(5,7)),Y=parseInt(Y,16),Z=parseInt(Z,16),te=parseInt(te,16)}}return{r:Y,g:Z,b:te,a:ce,style:P}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(P,Y,Z,te){if(isNaN(Y)||isNaN(Z)||typeof P!="string")throw as.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(te=isNaN(te)?void 0:te,!g.call(this)){var ce=q(this.ctx.transform.rotation),Ee=this.ctx.transform.scaleX;I.call(this,{text:P,x:Y,y:Z,scale:Ee,angle:ce,align:this.textAlign,maxWidth:te})}},h.prototype.strokeText=function(P,Y,Z,te){if(isNaN(Y)||isNaN(Z)||typeof P!="string")throw as.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){te=isNaN(te)?void 0:te;var ce=q(this.ctx.transform.rotation),Ee=this.ctx.transform.scaleX;I.call(this,{text:P,x:Y,y:Z,scale:Ee,renderingMode:"stroke",angle:ce,align:this.textAlign,maxWidth:te})}},h.prototype.measureText=function(P){if(typeof P!="string")throw as.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Y=this.pdf,Z=this.pdf.internal.scaleFactor,te=Y.internal.getFontSize(),ce=Y.getStringUnitWidth(P)*te/Y.internal.scaleFactor,Ee=function(pe){var fe=(pe=pe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return fe}}),this};return new Ee({width:ce*=Math.round(96*Z/72*1e4)/1e4})},h.prototype.scale=function(P,Y){if(isNaN(P)||isNaN(Y))throw as.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Z=new l(P,0,0,Y,0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},h.prototype.rotate=function(P){if(isNaN(P))throw as.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Y=new l(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},h.prototype.translate=function(P,Y){if(isNaN(P)||isNaN(Y))throw as.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Z=new l(1,0,0,1,P,Y);this.ctx.transform=this.ctx.transform.multiply(Z)},h.prototype.transform=function(P,Y,Z,te,ce,Ee){if(isNaN(P)||isNaN(Y)||isNaN(Z)||isNaN(te)||isNaN(ce)||isNaN(Ee))throw as.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var pe=new l(P,Y,Z,te,ce,Ee);this.ctx.transform=this.ctx.transform.multiply(pe)},h.prototype.setTransform=function(P,Y,Z,te,ce,Ee){P=isNaN(P)?1:P,Y=isNaN(Y)?0:Y,Z=isNaN(Z)?0:Z,te=isNaN(te)?1:te,ce=isNaN(ce)?0:ce,Ee=isNaN(Ee)?0:Ee,this.ctx.transform=new l(P,Y,Z,te,ce,Ee)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(P,Y,Z,te,ce,Ee,pe,fe,xe){var de=this.pdf.getImageProperties(P),oe=1,Le=1,et=1,Te=1;te!==void 0&&fe!==void 0&&(et=fe/te,Te=xe/ce,oe=de.width/te*fe/te,Le=de.height/ce*xe/ce),Ee===void 0&&(Ee=Y,pe=Z,Y=0,Z=0),te!==void 0&&fe===void 0&&(fe=te,xe=ce),te===void 0&&fe===void 0&&(fe=de.width,xe=de.height);for(var be,je=this.ctx.transform.decompose(),qe=q(je.rotate.shx),st=new l,mt=(st=(st=(st=st.multiply(je.translate)).multiply(je.skew)).multiply(je.scale)).applyToRectangle(new o(Ee-Y*et,pe-Z*Te,te*oe,ce*Le)),Et=_.call(this,mt),lt=[],kt=0;kt<Et.length;kt+=1)lt.indexOf(Et[kt])===-1&&lt.push(Et[kt]);if(R(lt),this.autoPaging)for(var Gt=lt[0],Xt=lt[lt.length-1],It=Gt;It<Xt+1;It++){this.pdf.setPage(It);var Dt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Wt=It===1?this.posY+this.margin[0]:this.margin[0],Lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Rt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],xt=It===1?0:Lt+(It-2)*Rt;if(this.ctx.clip_path.length!==0){var wr=this.path;be=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(be,this.posX+this.margin[3],-xt+Wt+this.ctx.prevPageLastElemOffset),j.call(this,"fill",!0),this.path=wr}var Jt=JSON.parse(JSON.stringify(mt));Jt=k([Jt],this.posX+this.margin[3],-xt+Wt+this.ctx.prevPageLastElemOffset)[0];var dn=(It>Gt||It<Xt)&&y.call(this);dn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Dt,Rt,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",Jt.x,Jt.y,Jt.w,Jt.h,null,null,qe),dn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",mt.x,mt.y,mt.w,mt.h,null,null,qe)};var _=function(P,Y,Z){var te=[];Y=Y||this.pdf.internal.pageSize.width,Z=Z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ce=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":te.push(Math.floor((P.y+ce)/Z)+1);break;case"arc":te.push(Math.floor((P.y+ce-P.radius)/Z)+1),te.push(Math.floor((P.y+ce+P.radius)/Z)+1);break;case"qct":var Ee=z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);te.push(Math.floor((Ee.y+ce)/Z)+1),te.push(Math.floor((Ee.y+Ee.h+ce)/Z)+1);break;case"bct":var pe=W(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);te.push(Math.floor((pe.y+ce)/Z)+1),te.push(Math.floor((pe.y+pe.h+ce)/Z)+1);break;case"rect":te.push(Math.floor((P.y+ce)/Z)+1),te.push(Math.floor((P.y+P.h+ce)/Z)+1)}for(var fe=0;fe<te.length;fe+=1)for(;this.pdf.internal.getNumberOfPages()<te[fe];)N.call(this);return te},N=function(){var P=this.fillStyle,Y=this.strokeStyle,Z=this.font,te=this.lineCap,ce=this.lineWidth,Ee=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=Y,this.font=Z,this.lineCap=te,this.lineWidth=ce,this.lineJoin=Ee},k=function(P,Y,Z){for(var te=0;te<P.length;te++)switch(P[te].type){case"bct":P[te].x2+=Y,P[te].y2+=Z;case"qct":P[te].x1+=Y,P[te].y1+=Z;case"mt":case"lt":case"arc":default:P[te].x+=Y,P[te].y+=Z}return P},R=function(P){return P.sort(function(Y,Z){return Y-Z})},M=function(P,Y){for(var Z,te,ce=this.fillStyle,Ee=this.strokeStyle,pe=this.lineCap,fe=this.lineWidth,xe=Math.abs(fe*this.ctx.transform.scaleX),de=this.lineJoin,oe=JSON.parse(JSON.stringify(this.path)),Le=JSON.parse(JSON.stringify(this.path)),et=[],Te=0;Te<Le.length;Te++)if(Le[Te].x!==void 0)for(var be=_.call(this,Le[Te]),je=0;je<be.length;je+=1)et.indexOf(be[je])===-1&&et.push(be[je]);for(var qe=0;qe<et.length;qe++)for(;this.pdf.internal.getNumberOfPages()<et[qe];)N.call(this);if(R(et),this.autoPaging)for(var st=et[0],mt=et[et.length-1],Et=st;Et<mt+1;Et++){this.pdf.setPage(Et),this.fillStyle=ce,this.strokeStyle=Ee,this.lineCap=pe,this.lineWidth=xe,this.lineJoin=de;var lt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],kt=Et===1?this.posY+this.margin[0]:this.margin[0],Gt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Xt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],It=Et===1?0:Gt+(Et-2)*Xt;if(this.ctx.clip_path.length!==0){var Dt=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(Z,this.posX+this.margin[3],-It+kt+this.ctx.prevPageLastElemOffset),j.call(this,P,!0),this.path=Dt}if(te=JSON.parse(JSON.stringify(oe)),this.path=k(te,this.posX+this.margin[3],-It+kt+this.ctx.prevPageLastElemOffset),Y===!1||Et===0){var Wt=(Et>st||Et<mt)&&y.call(this);Wt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],lt,Xt,null).clip().discardPath()),j.call(this,P,Y),Wt&&this.pdf.restoreGraphicsState()}this.lineWidth=fe}else this.lineWidth=xe,j.call(this,P,Y),this.lineWidth=fe;this.path=oe},j=function(P,Y){if((P!=="stroke"||Y||!b.call(this))&&(P==="stroke"||Y||!g.call(this))){for(var Z,te,ce=[],Ee=this.path,pe=0;pe<Ee.length;pe++){var fe=Ee[pe];switch(fe.type){case"begin":ce.push({begin:!0});break;case"close":ce.push({close:!0});break;case"mt":ce.push({start:fe,deltas:[],abs:[]});break;case"lt":var xe=ce.length;if(Ee[pe-1]&&!isNaN(Ee[pe-1].x)&&(Z=[fe.x-Ee[pe-1].x,fe.y-Ee[pe-1].y],xe>0)){for(;xe>=0;xe--)if(ce[xe-1].close!==!0&&ce[xe-1].begin!==!0){ce[xe-1].deltas.push(Z),ce[xe-1].abs.push(fe);break}}break;case"bct":Z=[fe.x1-Ee[pe-1].x,fe.y1-Ee[pe-1].y,fe.x2-Ee[pe-1].x,fe.y2-Ee[pe-1].y,fe.x-Ee[pe-1].x,fe.y-Ee[pe-1].y],ce[ce.length-1].deltas.push(Z);break;case"qct":var de=Ee[pe-1].x+2/3*(fe.x1-Ee[pe-1].x),oe=Ee[pe-1].y+2/3*(fe.y1-Ee[pe-1].y),Le=fe.x+2/3*(fe.x1-fe.x),et=fe.y+2/3*(fe.y1-fe.y),Te=fe.x,be=fe.y;Z=[de-Ee[pe-1].x,oe-Ee[pe-1].y,Le-Ee[pe-1].x,et-Ee[pe-1].y,Te-Ee[pe-1].x,be-Ee[pe-1].y],ce[ce.length-1].deltas.push(Z);break;case"arc":ce.push({deltas:[],abs:[],arc:!0}),Array.isArray(ce[ce.length-1].abs)&&ce[ce.length-1].abs.push(fe)}}te=Y?null:P==="stroke"?"stroke":"fill";for(var je=!1,qe=0;qe<ce.length;qe++)if(ce[qe].arc)for(var st=ce[qe].abs,mt=0;mt<st.length;mt++){var Et=st[mt];Et.type==="arc"?E.call(this,Et.x,Et.y,Et.radius,Et.startAngle,Et.endAngle,Et.counterclockwise,void 0,Y,!je):O.call(this,Et.x,Et.y),je=!0}else if(ce[qe].close===!0)this.pdf.internal.out("h"),je=!1;else if(ce[qe].begin!==!0){var lt=ce[qe].start.x,kt=ce[qe].start.y;G.call(this,ce[qe].deltas,lt,kt),je=!0}te&&B.call(this,te),Y&&Q.call(this)}},L=function(P){var Y=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Z=Y*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-Z;case"top":return P+Y-Z;case"hanging":return P+Y-2*Z;case"middle":return P+Y/2-Z;case"ideographic":return P;case"alphabetic":default:return P}},C=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(Y,Z){this.colorStops.push([Y,Z])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(P,Y,Z,te,ce,Ee,pe,fe,xe){for(var de=J.call(this,Z,te,ce,Ee),oe=0;oe<de.length;oe++){var Le=de[oe];oe===0&&(xe?D.call(this,Le.x1+P,Le.y1+Y):O.call(this,Le.x1+P,Le.y1+Y)),se.call(this,P,Y,Le.x2,Le.y2,Le.x3,Le.y3,Le.x4,Le.y4)}fe?Q.call(this):B.call(this,pe)},B=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Q=function(){this.pdf.clip(),this.pdf.discardPath()},D=function(P,Y){this.pdf.internal.out(r(P)+" "+n(Y)+" m")},I=function(P){var Y;switch(P.align){case"right":case"end":Y="right";break;case"center":Y="center";break;case"left":case"start":default:Y="left"}var Z=this.pdf.getTextDimensions(P.text),te=L.call(this,P.y),ce=C.call(this,te)-Z.h,Ee=this.ctx.transform.applyToPoint(new i(P.x,te)),pe=this.ctx.transform.decompose(),fe=new l;fe=(fe=(fe=fe.multiply(pe.translate)).multiply(pe.skew)).multiply(pe.scale);for(var xe,de,oe,Le=this.ctx.transform.applyToRectangle(new o(P.x,te,Z.w,Z.h)),et=fe.applyToRectangle(new o(P.x,ce,Z.w,Z.h)),Te=_.call(this,et),be=[],je=0;je<Te.length;je+=1)be.indexOf(Te[je])===-1&&be.push(Te[je]);if(R(be),this.autoPaging)for(var qe=be[0],st=be[be.length-1],mt=qe;mt<st+1;mt++){this.pdf.setPage(mt);var Et=mt===1?this.posY+this.margin[0]:this.margin[0],lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],kt=this.pdf.internal.pageSize.height-this.margin[2],Gt=kt-this.margin[0],Xt=this.pdf.internal.pageSize.width-this.margin[1],It=Xt-this.margin[3],Dt=mt===1?0:lt+(mt-2)*Gt;if(this.ctx.clip_path.length!==0){var Wt=this.path;xe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(xe,this.posX+this.margin[3],-1*Dt+Et),j.call(this,"fill",!0),this.path=Wt}var Lt=k([JSON.parse(JSON.stringify(et))],this.posX+this.margin[3],-Dt+Et+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(de=this.pdf.internal.getFontSize(),this.pdf.setFontSize(de*P.scale),oe=this.lineWidth,this.lineWidth=oe*P.scale);var Rt=this.autoPaging!=="text";if(Rt||Lt.y+Lt.h<=kt){if(Rt||Lt.y>=Et&&Lt.x<=Xt){var xt=Rt?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||Xt-Lt.x)[0],wr=k([JSON.parse(JSON.stringify(Le))],this.posX+this.margin[3],-Dt+Et+this.ctx.prevPageLastElemOffset)[0],Jt=Rt&&(mt>qe||mt<st)&&y.call(this);Jt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],It,Gt,null).clip().discardPath()),this.pdf.text(xt,wr.x,wr.y,{angle:P.angle,align:Y,renderingMode:P.renderingMode}),Jt&&this.pdf.restoreGraphicsState()}}else Lt.y<kt&&(this.ctx.prevPageLastElemOffset+=kt-Lt.y);P.scale>=.01&&(this.pdf.setFontSize(de),this.lineWidth=oe)}else P.scale>=.01&&(de=this.pdf.internal.getFontSize(),this.pdf.setFontSize(de*P.scale),oe=this.lineWidth,this.lineWidth=oe*P.scale),this.pdf.text(P.text,Ee.x+this.posX,Ee.y+this.posY,{angle:P.angle,align:Y,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(de),this.lineWidth=oe)},O=function(P,Y,Z,te){Z=Z||0,te=te||0,this.pdf.internal.out(r(P+Z)+" "+n(Y+te)+" l")},G=function(P,Y,Z){return this.pdf.lines(P,Y,Z,null,null)},se=function(P,Y,Z,te,ce,Ee,pe,fe){this.pdf.internal.out([e(s(Z+P)),e(a(te+Y)),e(s(ce+P)),e(a(Ee+Y)),e(s(pe+P)),e(a(fe+Y)),"c"].join(" "))},J=function(P,Y,Z,te){for(var ce=2*Math.PI,Ee=Math.PI/2;Y>Z;)Y-=ce;var pe=Math.abs(Z-Y);pe<ce&&te&&(pe=ce-pe);for(var fe=[],xe=te?-1:1,de=Y;pe>1e-5;){var oe=de+xe*Math.min(pe,Ee);fe.push(re.call(this,P,de,oe)),pe-=Math.abs(oe-de),de=oe}return fe},re=function(P,Y,Z){var te=(Z-Y)/2,ce=P*Math.cos(te),Ee=P*Math.sin(te),pe=ce,fe=-Ee,xe=pe*pe+fe*fe,de=xe+pe*ce+fe*Ee,oe=4/3*(Math.sqrt(2*xe*de)-de)/(pe*Ee-fe*ce),Le=pe-oe*fe,et=fe+oe*pe,Te=Le,be=-et,je=te+Y,qe=Math.cos(je),st=Math.sin(je);return{x1:P*Math.cos(Y),y1:P*Math.sin(Y),x2:Le*qe-et*st,y2:Le*st+et*qe,x3:Te*qe-be*st,y3:Te*st+be*qe,x4:P*Math.cos(Z),y4:P*Math.sin(Z)}},q=function(P){return 180*P/Math.PI},z=function(P,Y,Z,te,ce,Ee){var pe=P+.5*(Z-P),fe=Y+.5*(te-Y),xe=ce+.5*(Z-ce),de=Ee+.5*(te-Ee),oe=Math.min(P,ce,pe,xe),Le=Math.max(P,ce,pe,xe),et=Math.min(Y,Ee,fe,de),Te=Math.max(Y,Ee,fe,de);return new o(oe,et,Le-oe,Te-et)},W=function(P,Y,Z,te,ce,Ee,pe,fe){var xe,de,oe,Le,et,Te,be,je,qe,st,mt,Et,lt,kt,Gt=Z-P,Xt=te-Y,It=ce-Z,Dt=Ee-te,Wt=pe-ce,Lt=fe-Ee;for(de=0;de<41;de++)qe=(be=(oe=P+(xe=de/40)*Gt)+xe*((et=Z+xe*It)-oe))+xe*(et+xe*(ce+xe*Wt-et)-be),st=(je=(Le=Y+xe*Xt)+xe*((Te=te+xe*Dt)-Le))+xe*(Te+xe*(Ee+xe*Lt-Te)-je),de==0?(mt=qe,Et=st,lt=qe,kt=st):(mt=Math.min(mt,qe),Et=Math.min(Et,st),lt=Math.max(lt,qe),kt=Math.max(kt,st));return new o(Math.round(mt),Math.round(Et),Math.round(lt-mt),Math.round(kt-Et))},ie=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,Y,Z=(P=this.ctx.lineDash,Y=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:Y}));this.prevLineDash!==Z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Z)}}})(or.API),function(t){var e=function(a){var i,o,l,u,d,h,m,g,b,y;for(o=[],l=0,u=(a+=i="\0\0\0\0".slice(a.length%4||4)).length;u>l;l+=4)(d=(a.charCodeAt(l)<<24)+(a.charCodeAt(l+1)<<16)+(a.charCodeAt(l+2)<<8)+a.charCodeAt(l+3))!==0?(h=(d=((d=((d=((d=(d-(y=d%85))/85)-(b=d%85))/85)-(g=d%85))/85)-(m=d%85))/85)%85,o.push(h+33,m+33,g+33,b+33,y+33)):o.push(122);return function(_,N){for(var k=N;k>0;k--)_.pop()}(o,i.length),String.fromCharCode.apply(String,o)+"~>"},r=function(a){var i,o,l,u,d,h=String,m="length",g=255,b="charCodeAt",y="slice",_="replace";for(a[y](-2),a=a[y](0,-2)[_](/\s/g,"")[_]("z","!!!!!"),l=[],u=0,d=(a+=i="uuuuu"[y](a[m]%5||5))[m];d>u;u+=5)o=52200625*(a[b](u)-33)+614125*(a[b](u+1)-33)+7225*(a[b](u+2)-33)+85*(a[b](u+3)-33)+(a[b](u+4)-33),l.push(g&o>>24,g&o>>16,g&o>>8,g&o);return function(N,k){for(var R=k;R>0;R--)N.pop()}(l,i[m]),h.fromCharCode.apply(h,l)},n=function(a){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),i.test(a)===!1)return"";for(var o="",l=0;l<a.length;l+=2)o+=String.fromCharCode("0x"+(a[l]+a[l+1]));return o},s=function(a){for(var i=new Uint8Array(a.length),o=a.length;o--;)i[o]=a.charCodeAt(o);return a=(i=fS(i)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};t.processDataByFilters=function(a,i){var o=0,l=a||"",u=[];for(typeof(i=i||[])=="string"&&(i=[i]),o=0;o<i.length;o+=1)switch(i[o]){case"ASCII85Decode":case"/ASCII85Decode":l=r(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=n(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=s(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[o]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(or.API),function(t){t.loadFile=function(e,r,n){return function(s,a,i){a=a!==!1,i=typeof i=="function"?i:function(){};var o=void 0;try{o=function(l,u,d){var h=new XMLHttpRequest,m=0,g=function(b){var y=b.length,_=[],N=String.fromCharCode;for(m=0;m<y;m+=1)_.push(N(255&b.charCodeAt(m)));return _.join("")};if(h.open("GET",l,!u),h.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(h.onload=function(){h.status===200?d(g(this.responseText)):d(void 0)}),h.send(null),u&&h.status===200)return g(h.responseText)}(s,a,i)}catch{}return o}(e,r,n)},t.loadImageFile=t.loadFile}(or.API),function(t){function e(){return(Cr.html2canvas?Promise.resolve(Cr.html2canvas):C2(()=>Promise.resolve().then(()=>Z_e),void 0)).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function r(){return(Cr.DOMPurify?Promise.resolve(Cr.DOMPurify):C2(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var n=function(i){var o=qn(i);return o==="undefined"?"undefined":o==="string"||i instanceof String?"string":o==="number"||i instanceof Number?"number":o==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":o==="object"?"object":"unknown"},s=function(i,o){var l=document.createElement(i);for(var u in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[u]=o.style[u];return l},a=function i(o){var l=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),u=i.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,i,1,[i])).set(o)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(i,o){return i.__proto__=o||a.prototype,i},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(i,o){return this.then(function(){switch(o=o||function(l){switch(n(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(r).then(function(l){return this.set({src:s("div",{innerHTML:i,dompurify:l})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},a.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(u,d){for(var h=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),m=u.firstChild;m;m=m.nextSibling)d!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||h.appendChild(l(m,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(h.width=u.width,h.height=u.height,h.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(h.value=u.value),h.addEventListener("load",function(){h.scrollTop=u.scrollTop,h.scrollLeft=u.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(o){var l=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var m=0;m<u.length;++m){var g=u[m],b=g.src.find(function(y){return y.format==="truetype"});b&&l.addFont(b.url,g.ref.name,g.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,l.context2d.save(!0),o(this.prop.container,h)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(i,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(i,o):this.outputPdf(i,o)},a.prototype.outputPdf=function(i,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,o)})},a.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},a.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(i){if(n(i)!=="object")return this;var o=Object.keys(i||{}).map(function(l){if(l in a.template.prop)return function(){this.prop[l]=i[l]};switch(l){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[l]=i[l]}}},this);return this.then(function(){return this.thenList(o)})},a.prototype.get=function(i,o){return this.then(function(){var l=i in a.template.prop?this.prop[i]:this.opt[i];return o?o(l):l})},a.prototype.setMargin=function(i){return this.then(function(){switch(n(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},a.prototype.setPageSize=function(i){function o(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(i=i||or.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:o(i.inner.width,i.k),height:o(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},a.prototype.setProgress=function(i,o,l,u){return i!=null&&(this.progress.val=i),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(i,o,l,u){return this.setProgress(i?this.progress.val+i:null,o||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},a.prototype.then=function(i,o){var l=this;return this.thenCore(i,o,function(u,d){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(h){return l.updateProgress(null,u),h}).then(u,d).then(function(h){return l.updateProgress(1),h})})},a.prototype.thenCore=function(i,o,l){l=l||Promise.prototype.then,i&&(i=i.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),d=l.call(u,i,o);return a.convert(d,this.__proto__)},a.prototype.thenExternal=function(i,o){return Promise.prototype.then.call(this,i,o)},a.prototype.thenList=function(i){var o=this;return i.forEach(function(l){o=o.thenCore(l)}),o},a.prototype.catch=function(i){i&&(i=i.bind(this));var o=Promise.prototype.catch.call(this,i);return a.convert(o,this)},a.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},a.prototype.error=function(i){return this.then(function(){throw new Error(i)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,or.getPageSize=function(i,o,l){if(qn(i)==="object"){var u=i;i=u.orientation,o=u.unit||o,l=u.format||l}o=o||"mm",l=l||"a4",i=(""+(i||"P")).toLowerCase();var d,h=(""+l).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+o}var g,b=0,y=0;if(m.hasOwnProperty(h))b=m[h][1]/d,y=m[h][0]/d;else try{b=l[1],y=l[0]}catch{throw new Error("Invalid format: "+l)}if(i==="p"||i==="portrait")i="p",y>b&&(g=y,y=b,b=g);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",b>y&&(g=y,y=b,b=g)}return{width:y,height:b,unit:o,k:d,orientation:i}},t.html=function(i,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(vS):null;var l=new a(o);return o.worker?l:l.from(i).doCallback()}}(or.API),or.API.addJS=function(t){return jF=t,this.internal.events.subscribe("postPutResources",function(){Dv=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Dv+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),PF=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+jF+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Dv!==void 0&&PF!==void 0&&this.internal.out("/Names <</JavaScript "+Dv+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),a=0;a<s.length;a++){var i=s[a],o=n.exec(i);if(o!=null){var l=o[1];r.internal.newObjectDeferredBegin(l,!1)}r.internal.write(i)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(a=0;a<u;a++){var h=r.internal.newObject();d.push(h);var m=r.internal.getPageInfo(a+1);r.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var g=r.internal.newObject();for(r.internal.write("<< /Names [ "),a=0;a<d.length;a++)r.internal.write("(page_"+(a+1)+")"+d[a]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+g+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,s,a){var i={title:s,options:a,children:[]};return n==null&&(n=this.root),n.children.push(i),i},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<n.children.length;a++){var i=n.children[a];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(n)),a>0&&this.line("/Prev "+this.makeRef(n.children[a-1])),a<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[a+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var l=r.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,s){for(var a=0;a<s.children.length;a++)n.count++,this.count_r(n,s.children[a]);return n.count}}])}(or.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,s,a,i,o){var l,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=i||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(l=function(h){for(var m,g=256*h.charCodeAt(4)+h.charCodeAt(5),b=h.length,y={width:0,height:0,numcomponents:1},_=4;_<b;_+=2){if(_+=g,e.indexOf(h.charCodeAt(_+1))!==-1){m=256*h.charCodeAt(_+5)+h.charCodeAt(_+6),y={width:256*h.charCodeAt(_+7)+h.charCodeAt(_+8),height:m,numcomponents:h.charCodeAt(_+9)};break}g=256*h.charCodeAt(_+2)+h.charCodeAt(_+3)}return y}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:r,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:u,index:n,alias:s}}return d}}(or.API);var k0,Rv,OF,QF,HF,Hoe=function(){var t,e,r;function n(a){var i,o,l,u,d,h,m,g,b,y,_,N,k,R;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(i=this.readUInt32(),b=(function(){var M,j;for(j=[],M=0;M<4;++M)j.push(String.fromCharCode(this.data[this.pos++]));return j}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,h.delay=1e3*d/u,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(b==="fdAT"&&(this.pos+=4,i-=4),a=(h!=null?h.data:void 0)||this.imgData,N=0;0<=i?N<i:N>i;0<=i?++N:--N)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((y=l-this.transparency.indexed.length)>0)for(k=0;0<=y?k<y:k>y;0<=y?++k:--k)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":m=(_=this.read(i)).indexOf(0),g=String.fromCharCode.apply(String,_.slice(0,m)),this.text[g]=String.fromCharCode.apply(String,_.slice(m+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(R=this.colorType)===4||R===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(a){var i,o;for(o=[],i=0;0<=a?i<a:i>a;0<=a?++i:--i)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(a){var i=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*i),l=0,u=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function d(h,m,g,b){var y,_,N,k,R,M,j,L,C,E,B,Q,D,I,O,G,se,J,re,q,z,W=Math.ceil((u.width-h)/g),ie=Math.ceil((u.height-m)/b),P=u.width==W&&u.height==ie;for(I=i*W,Q=P?o:new Uint8Array(I*ie),M=a.length,D=0,_=0;D<ie&&l<M;){switch(a[l++]){case 0:for(k=se=0;se<I;k=se+=1)Q[_++]=a[l++];break;case 1:for(k=J=0;J<I;k=J+=1)y=a[l++],R=k<i?0:Q[_-i],Q[_++]=(y+R)%256;break;case 2:for(k=re=0;re<I;k=re+=1)y=a[l++],N=(k-k%i)/i,O=D&&Q[(D-1)*I+N*i+k%i],Q[_++]=(O+y)%256;break;case 3:for(k=q=0;q<I;k=q+=1)y=a[l++],N=(k-k%i)/i,R=k<i?0:Q[_-i],O=D&&Q[(D-1)*I+N*i+k%i],Q[_++]=(y+Math.floor((R+O)/2))%256;break;case 4:for(k=z=0;z<I;k=z+=1)y=a[l++],N=(k-k%i)/i,R=k<i?0:Q[_-i],D===0?O=G=0:(O=Q[(D-1)*I+N*i+k%i],G=N&&Q[(D-1)*I+(N-1)*i+k%i]),j=R+O-G,L=Math.abs(j-R),E=Math.abs(j-O),B=Math.abs(j-G),C=L<=E&&L<=B?R:E<=B?O:G,Q[_++]=(y+C)%256;break;default:throw new Error("Invalid filter algorithm: "+a[l-1])}if(!P){var Y=((m+D*b)*u.width+h)*i,Z=D*I;for(k=0;k<W;k+=1){for(var te=0;te<i;te+=1)o[Y++]=Q[Z++];Y+=(g-1)*i}}D++}}return a=yoe(a),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),o},n.prototype.decodePalette=function(){var a,i,o,l,u,d,h,m,g;for(o=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+o.length),l=0,a=0,i=h=0,m=o.length;h<m;i=h+=3)u[l++]=o[i],u[l++]=o[i+1],u[l++]=o[i+2],u[l++]=(g=d[a++])!=null?g:255;return u},n.prototype.copyToImageData=function(a,i){var o,l,u,d,h,m,g,b,y,_,N;if(l=this.colors,y=null,o=this.hasAlphaChannel,this.palette.length&&(y=(N=this._decodedPalette)!=null?N:this._decodedPalette=this.decodePalette(),l=4,o=!0),b=(u=a.data||a).length,h=y||i,d=m=0,l===1)for(;d<b;)g=y?4*i[d/4]:m,_=h[g++],u[d++]=_,u[d++]=_,u[d++]=_,u[d++]=o?h[g++]:255,m=g;else for(;d<b;)g=y?4*i[d/4]:m,u[d++]=h[g++],u[d++]=h[g++],u[d++]=h[g++],u[d++]=o?h[g++]:255,m=g},n.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var s=function(){if(Object.prototype.toString.call(Cr)==="[object Window]"){try{e=Cr.document.createElement("canvas"),r=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),t=function(a){var i;if(s()===!0)return r.width=a.width,r.height=a.height,r.clearRect(0,0,a.width,a.height),r.putImageData(a,0,0),(i=new Image).src=e.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(a){var i,o,l,u,d,h,m,g;if(this.animation){for(g=[],o=d=0,h=(m=this.animation.frames).length;d<h;o=++d)i=m[o],l=a.createImageData(i.width,i.height),u=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(l,u),i.imageData=l,g.push(i.image=t(l));return g}},n.prototype.renderFrame=function(a,i){var o,l,u;return o=(l=this.animation.frames)[i],u=l[i-1],i===0&&a.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?a.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&a.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&a.clearRect(o.xOffset,o.yOffset,o.width,o.height),a.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(a){var i,o,l,u,d,h,m=this;return o=0,h=this.animation,u=h.numFrames,l=h.frames,d=h.numPlays,(i=function(){var g,b;if(g=o++%u,b=l[g],m.renderFrame(a,g),u>1&&o/u<d)return m.animation._timeout=setTimeout(i,b.delay)})()},n.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},n.prototype.render=function(a){var i,o;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,i=a.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(o=i.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),i.putImageData(o,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Voe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,s=t[e++],a=s>>7,i=1<<(7&s)+1;t[e++],t[e++];var o=null,l=null;a&&(o=e,l=i,e+=3*i);var u=!0,d=[],h=0,m=null,g=0,b=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,b=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((D=t[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var y=t[e++];h=t[e++]|t[e++]<<8,m=t[e++],(1&y)==0&&(m=null),g=y>>2&7,e++;break;case 254:for(;;){if(!((D=t[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var _=t[e++]|t[e++]<<8,N=t[e++]|t[e++]<<8,k=t[e++]|t[e++]<<8,R=t[e++]|t[e++]<<8,M=t[e++],j=M>>6&1,L=1<<(7&M)+1,C=o,E=l,B=!1;M>>7&&(B=!0,C=e,E=L,e+=3*L);var Q=e;for(e++;;){var D;if(!((D=t[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}d.push({x:_,y:N,width:k,height:R,has_local_palette:B,palette_offset:C,palette_size:E,data_offset:Q,data_length:e-Q,transparent_index:m,interlaced:!!j,delay:h,disposal:g});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return b},this.frameInfo=function(I){if(I<0||I>=d.length)throw new Error("Frame index out of range.");return d[I]},this.decodeAndBlitFrameBGRA=function(I,O){var G=this.frameInfo(I),se=G.width*G.height,J=new Uint8Array(se);VF(t,G.data_offset,J,se);var re=G.palette_offset,q=G.transparent_index;q===null&&(q=256);var z=G.width,W=r-z,ie=z,P=4*(G.y*r+G.x),Y=4*((G.y+G.height)*r+G.x),Z=P,te=4*W;G.interlaced===!0&&(te+=4*r*7);for(var ce=8,Ee=0,pe=J.length;Ee<pe;++Ee){var fe=J[Ee];if(ie===0&&(ie=z,(Z+=te)>=Y&&(te=4*W+4*r*(ce-1),Z=P+(z+W)*(ce<<1),ce>>=1)),fe===q)Z+=4;else{var xe=t[re+3*fe],de=t[re+3*fe+1],oe=t[re+3*fe+2];O[Z++]=oe,O[Z++]=de,O[Z++]=xe,O[Z++]=255}--ie}},this.decodeAndBlitFrameRGBA=function(I,O){var G=this.frameInfo(I),se=G.width*G.height,J=new Uint8Array(se);VF(t,G.data_offset,J,se);var re=G.palette_offset,q=G.transparent_index;q===null&&(q=256);var z=G.width,W=r-z,ie=z,P=4*(G.y*r+G.x),Y=4*((G.y+G.height)*r+G.x),Z=P,te=4*W;G.interlaced===!0&&(te+=4*r*7);for(var ce=8,Ee=0,pe=J.length;Ee<pe;++Ee){var fe=J[Ee];if(ie===0&&(ie=z,(Z+=te)>=Y&&(te=4*W+4*r*(ce-1),Z=P+(z+W)*(ce<<1),ce>>=1)),fe===q)Z+=4;else{var xe=t[re+3*fe],de=t[re+3*fe+1],oe=t[re+3*fe+2];O[Z++]=xe,O[Z++]=de,O[Z++]=oe,O[Z++]=255}--ie}}}function VF(t,e,r,n){for(var s=t[e++],a=1<<s,i=a+1,o=i+1,l=s+1,u=(1<<l)-1,d=0,h=0,m=0,g=t[e++],b=new Int32Array(4096),y=null;;){for(;d<16&&g!==0;)h|=t[e++]<<d,d+=8,g===1?g=t[e++]:--g;if(d<l)break;var _=h&u;if(h>>=l,d-=l,_!==a){if(_===i)break;for(var N=_<o?_:y,k=0,R=N;R>a;)R=b[R]>>8,++k;var M=R;if(m+k+(N!==_?1:0)>n)return void as.log("Warning, gif stream longer than expected.");r[m++]=M;var j=m+=k;for(N!==_&&(r[m++]=M),R=N;k--;)R=b[R],r[--j]=255&R,R>>=8;y!==null&&o<4096&&(b[o++]=y<<8|M,o>=u+1&&l<12&&(++l,u=u<<1|1)),y=_}else o=i+1,u=(1<<(l=s+1))-1,y=null}return m!==n&&as.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function vE(t){var e,r,n,s,a,i=Math.floor,o=new Array(64),l=new Array(64),u=new Array(64),d=new Array(64),h=new Array(65535),m=new Array(65535),g=new Array(64),b=new Array(64),y=[],_=0,N=7,k=new Array(64),R=new Array(64),M=new Array(64),j=new Array(256),L=new Array(2048),C=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],Q=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],G=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],se=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function J(P,Y){for(var Z=0,te=0,ce=new Array,Ee=1;Ee<=16;Ee++){for(var pe=1;pe<=P[Ee];pe++)ce[Y[te]]=[],ce[Y[te]][0]=Z,ce[Y[te]][1]=Ee,te++,Z++;Z*=2}return ce}function re(P){for(var Y=P[0],Z=P[1]-1;Z>=0;)Y&1<<Z&&(_|=1<<N),Z--,--N<0&&(_==255?(q(255),q(0)):q(_),N=7,_=0)}function q(P){y.push(P)}function z(P){q(P>>8&255),q(255&P)}function W(P,Y,Z,te,ce){for(var Ee,pe=ce[0],fe=ce[240],xe=function(st,mt){var Et,lt,kt,Gt,Xt,It,Dt,Wt,Lt,Rt,xt=0;for(Lt=0;Lt<8;++Lt){Et=st[xt],lt=st[xt+1],kt=st[xt+2],Gt=st[xt+3],Xt=st[xt+4],It=st[xt+5],Dt=st[xt+6];var wr=Et+(Wt=st[xt+7]),Jt=Et-Wt,dn=lt+Dt,gr=lt-Dt,Ur=kt+It,Dn=kt-It,Fr=Gt+Xt,da=Gt-Xt,nn=wr+Fr,ns=wr-Fr,ps=dn+Ur,Pr=dn-Ur;st[xt]=nn+ps,st[xt+4]=nn-ps;var nr=.707106781*(Pr+ns);st[xt+2]=ns+nr,st[xt+6]=ns-nr;var Gr=.382683433*((nn=da+Dn)-(Pr=gr+Jt)),fa=.5411961*nn+Gr,Wn=1.306562965*Pr+Gr,Es=.707106781*(ps=Dn+gr),Na=Jt+Es,zt=Jt-Es;st[xt+5]=zt+fa,st[xt+3]=zt-fa,st[xt+1]=Na+Wn,st[xt+7]=Na-Wn,xt+=8}for(xt=0,Lt=0;Lt<8;++Lt){Et=st[xt],lt=st[xt+8],kt=st[xt+16],Gt=st[xt+24],Xt=st[xt+32],It=st[xt+40],Dt=st[xt+48];var fn=Et+(Wt=st[xt+56]),sn=Et-Wt,Rn=lt+Dt,jn=lt-Dt,Yn=kt+It,he=kt-It,ke=Gt+Xt,_e=Gt-Xt,Se=fn+ke,Ne=fn-ke,Ie=Rn+Yn,Ke=Rn-Yn;st[xt]=Se+Ie,st[xt+32]=Se-Ie;var rt=.707106781*(Ke+Ne);st[xt+16]=Ne+rt,st[xt+48]=Ne-rt;var He=.382683433*((Se=_e+he)-(Ke=jn+sn)),We=.5411961*Se+He,Je=1.306562965*Ke+He,yt=.707106781*(Ie=he+jn),Bt=sn+yt,Ot=sn-yt;st[xt+40]=Ot+We,st[xt+24]=Ot-We,st[xt+8]=Bt+Je,st[xt+56]=Bt-Je,xt++}for(Lt=0;Lt<64;++Lt)Rt=st[Lt]*mt[Lt],g[Lt]=Rt>0?Rt+.5|0:Rt-.5|0;return g}(P,Y),de=0;de<64;++de)b[C[de]]=xe[de];var oe=b[0]-Z;Z=b[0],oe==0?re(te[0]):(re(te[m[Ee=32767+oe]]),re(h[Ee]));for(var Le=63;Le>0&&b[Le]==0;)Le--;if(Le==0)return re(pe),Z;for(var et,Te=1;Te<=Le;){for(var be=Te;b[Te]==0&&Te<=Le;)++Te;var je=Te-be;if(je>=16){et=je>>4;for(var qe=1;qe<=et;++qe)re(fe);je&=15}Ee=32767+b[Te],re(ce[(je<<4)+m[Ee]]),re(h[Ee]),Te++}return Le!=63&&re(pe),Z}function ie(P){P=Math.min(Math.max(P,1),100),a!=P&&(function(Y){for(var Z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],te=0;te<64;te++){var ce=i((Z[te]*Y+50)/100);ce=Math.min(Math.max(ce,1),255),o[C[te]]=ce}for(var Ee=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],pe=0;pe<64;pe++){var fe=i((Ee[pe]*Y+50)/100);fe=Math.min(Math.max(fe,1),255),l[C[pe]]=fe}for(var xe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],de=0,oe=0;oe<8;oe++)for(var Le=0;Le<8;Le++)u[de]=1/(o[C[de]]*xe[oe]*xe[Le]*8),d[de]=1/(l[C[de]]*xe[oe]*xe[Le]*8),de++}(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),a=P)}this.encode=function(P,Y){Y&&ie(Y),y=new Array,_=0,N=7,z(65496),z(65504),z(16),q(74),q(70),q(73),q(70),q(0),q(1),q(1),q(0),z(1),z(1),q(0),q(0),function(){z(65499),z(132),q(0);for(var lt=0;lt<64;lt++)q(o[lt]);q(1);for(var kt=0;kt<64;kt++)q(l[kt])}(),function(lt,kt){z(65472),z(17),q(8),z(kt),z(lt),q(3),q(1),q(17),q(0),q(2),q(17),q(1),q(3),q(17),q(1)}(P.width,P.height),function(){z(65476),z(418),q(0);for(var lt=0;lt<16;lt++)q(E[lt+1]);for(var kt=0;kt<=11;kt++)q(B[kt]);q(16);for(var Gt=0;Gt<16;Gt++)q(Q[Gt+1]);for(var Xt=0;Xt<=161;Xt++)q(D[Xt]);q(1);for(var It=0;It<16;It++)q(I[It+1]);for(var Dt=0;Dt<=11;Dt++)q(O[Dt]);q(17);for(var Wt=0;Wt<16;Wt++)q(G[Wt+1]);for(var Lt=0;Lt<=161;Lt++)q(se[Lt])}(),z(65498),z(12),q(3),q(1),q(0),q(2),q(17),q(3),q(17),q(0),q(63),q(0);var Z=0,te=0,ce=0;_=0,N=7,this.encode.displayName="_encode_";for(var Ee,pe,fe,xe,de,oe,Le,et,Te,be=P.data,je=P.width,qe=P.height,st=4*je,mt=0;mt<qe;){for(Ee=0;Ee<st;){for(de=st*mt+Ee,Le=-1,et=0,Te=0;Te<64;Te++)oe=de+(et=Te>>3)*st+(Le=4*(7&Te)),mt+et>=qe&&(oe-=st*(mt+1+et-qe)),Ee+Le>=st&&(oe-=Ee+Le-st+4),pe=be[oe++],fe=be[oe++],xe=be[oe++],k[Te]=(L[pe]+L[fe+256>>0]+L[xe+512>>0]>>16)-128,R[Te]=(L[pe+768>>0]+L[fe+1024>>0]+L[xe+1280>>0]>>16)-128,M[Te]=(L[pe+1280>>0]+L[fe+1536>>0]+L[xe+1792>>0]>>16)-128;Z=W(k,u,Z,e,n),te=W(R,d,te,r,s),ce=W(M,d,ce,r,s),Ee+=32}mt+=8}if(N>=0){var Et=[];Et[1]=N+1,Et[0]=(1<<N+1)-1,re(Et)}return z(65497),new Uint8Array(y)},t=t||50,function(){for(var P=String.fromCharCode,Y=0;Y<256;Y++)j[Y]=P(Y)}(),e=J(E,B),r=J(I,O),n=J(Q,D),s=J(G,se),function(){for(var P=1,Y=2,Z=1;Z<=15;Z++){for(var te=P;te<Y;te++)m[32767+te]=Z,h[32767+te]=[],h[32767+te][1]=Z,h[32767+te][0]=te;for(var ce=-(Y-1);ce<=-P;ce++)m[32767+ce]=Z,h[32767+ce]=[],h[32767+ce][1]=Z,h[32767+ce][0]=Y-1+ce;P<<=1,Y<<=1}}(),function(){for(var P=0;P<256;P++)L[P]=19595*P,L[P+256>>0]=38470*P,L[P+512>>0]=7471*P+32768,L[P+768>>0]=-11059*P,L[P+1024>>0]=-21709*P,L[P+1280>>0]=32768*P+8421375,L[P+1536>>0]=-27439*P,L[P+1792>>0]=-5329*P}(),ie(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function wc(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function GF(t){function e(E){if(!E)throw Error("assert :P")}function r(E,B,Q){for(var D=0;4>D;D++)if(E[B+D]!=Q.charCodeAt(D))return!0;return!1}function n(E,B,Q,D,I){for(var O=0;O<I;O++)E[B+O]=Q[D+O]}function s(E,B,Q,D){for(var I=0;I<D;I++)E[B+I]=Q}function a(E){return new Int32Array(E)}function i(E,B){for(var Q=[],D=0;D<E;D++)Q.push(new B);return Q}function o(E,B){var Q=[];return function D(I,O,G){for(var se=G[O],J=0;J<se&&(I.push(G.length>O+1?[]:new B),!(G.length<O+1));J++)D(I[J],O+1,G)}(Q,0,E),Q}var l=function(){var E=this;function B(S,U){for(var K=1<<U-1>>>0;S&K;)K>>>=1;return K?(S&K-1)+K:S}function Q(S,U,K,ne,ue){e(!(ne%K));do S[U+(ne-=K)]=ue;while(0<ne)}function D(S,U,K,ne,ue){if(e(2328>=ue),512>=ue)var me=a(512);else if((me=a(ue))==null)return 0;return function(ge,ve,Ce,Be,Ue,Xe){var $e,Ge,gt=ve,it=1<<Ce,Me=a(16),Oe=a(16);for(e(Ue!=0),e(Be!=null),e(ge!=null),e(0<Ce),Ge=0;Ge<Ue;++Ge){if(15<Be[Ge])return 0;++Me[Be[Ge]]}if(Me[0]==Ue)return 0;for(Oe[1]=0,$e=1;15>$e;++$e){if(Me[$e]>1<<$e)return 0;Oe[$e+1]=Oe[$e]+Me[$e]}for(Ge=0;Ge<Ue;++Ge)$e=Be[Ge],0<Be[Ge]&&(Xe[Oe[$e]++]=Ge);if(Oe[15]==1)return(Be=new I).g=0,Be.value=Xe[0],Q(ge,gt,1,it,Be),it;var ut,vt=-1,ft=it-1,Kt=0,jt=1,sr=1,Ht=1<<Ce;for(Ge=0,$e=1,Ue=2;$e<=Ce;++$e,Ue<<=1){if(jt+=sr<<=1,0>(sr-=Me[$e]))return 0;for(;0<Me[$e];--Me[$e])(Be=new I).g=$e,Be.value=Xe[Ge++],Q(ge,gt+Kt,Ue,Ht,Be),Kt=B(Kt,$e)}for($e=Ce+1,Ue=2;15>=$e;++$e,Ue<<=1){if(jt+=sr<<=1,0>(sr-=Me[$e]))return 0;for(;0<Me[$e];--Me[$e]){if(Be=new I,(Kt&ft)!=vt){for(gt+=Ht,ut=1<<(vt=$e)-Ce;15>vt&&!(0>=(ut-=Me[vt]));)++vt,ut<<=1;it+=Ht=1<<(ut=vt-Ce),ge[ve+(vt=Kt&ft)].g=ut+Ce,ge[ve+vt].value=gt-ve-vt}Be.g=$e-Ce,Be.value=Xe[Ge++],Q(ge,gt+(Kt>>Ce),Ue,Ht,Be),Kt=B(Kt,$e)}}return jt!=2*Oe[15]-1?0:it}(S,U,K,ne,ue,me)}function I(){this.value=this.g=0}function O(){this.value=this.g=0}function G(){this.G=i(5,I),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(Ws,O)}function se(S,U,K,ne){e(S!=null),e(U!=null),e(2147483648>ne),S.Ca=254,S.I=0,S.b=-8,S.Ka=0,S.oa=U,S.pa=K,S.Jd=U,S.Yc=K+ne,S.Zc=4<=ne?K+ne-4+1:K,Ee(S)}function J(S,U){for(var K=0;0<U--;)K|=fe(S,128)<<U;return K}function re(S,U){var K=J(S,U);return pe(S)?-K:K}function q(S,U,K,ne){var ue,me=0;for(e(S!=null),e(U!=null),e(4294967288>ne),S.Sb=ne,S.Ra=0,S.u=0,S.h=0,4<ne&&(ne=4),ue=0;ue<ne;++ue)me+=U[K+ue]<<8*ue;S.Ra=me,S.bb=ne,S.oa=U,S.pa=K}function z(S){for(;8<=S.u&&S.bb<S.Sb;)S.Ra>>>=8,S.Ra+=S.oa[S.pa+S.bb]<<Xu-8>>>0,++S.bb,S.u-=8;Z(S)&&(S.h=1,S.u=0)}function W(S,U){if(e(0<=U),!S.h&&U<=Yu){var K=Y(S)&Kc[U];return S.u+=U,z(S),K}return S.h=1,S.u=0}function ie(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function P(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Y(S){return S.Ra>>>(S.u&Xu-1)>>>0}function Z(S){return e(S.bb<=S.Sb),S.h||S.bb==S.Sb&&S.u>Xu}function te(S,U){S.u=U,S.h=Z(S)}function ce(S){S.u>=td&&(e(S.u>=td),z(S))}function Ee(S){e(S!=null&&S.oa!=null),S.pa<S.Zc?(S.I=(S.oa[S.pa++]|S.I<<8)>>>0,S.b+=8):(e(S!=null&&S.oa!=null),S.pa<S.Yc?(S.b+=8,S.I=S.oa[S.pa++]|S.I<<8):S.Ka?S.b=0:(S.I<<=8,S.b+=8,S.Ka=1))}function pe(S){return J(S,1)}function fe(S,U){var K=S.Ca;0>S.b&&Ee(S);var ne=S.b,ue=K*U>>>8,me=(S.I>>>ne>ue)+0;for(me?(K-=ue,S.I-=ue+1<<ne>>>0):K=ue+1,ne=K,ue=0;256<=ne;)ue+=8,ne>>=8;return ne=7^ue+bi[ne],S.b-=ne,S.Ca=(K<<ne)-1,me}function xe(S,U,K){S[U+0]=K>>24&255,S[U+1]=K>>16&255,S[U+2]=K>>8&255,S[U+3]=K>>0&255}function de(S,U){return S[U+0]<<0|S[U+1]<<8}function oe(S,U){return de(S,U)|S[U+2]<<16}function Le(S,U){return de(S,U)|de(S,U+2)<<16}function et(S,U){var K=1<<U;return e(S!=null),e(0<U),S.X=a(K),S.X==null?0:(S.Mb=32-U,S.Xa=U,1)}function Te(S,U){e(S!=null),e(U!=null),e(S.Xa==U.Xa),n(U.X,0,S.X,0,1<<U.Xa)}function be(){this.X=[],this.Xa=this.Mb=0}function je(S,U,K,ne){e(K!=null),e(ne!=null);var ue=K[0],me=ne[0];return ue==0&&(ue=(S*me+U/2)/U),me==0&&(me=(U*ue+S/2)/S),0>=ue||0>=me?0:(K[0]=ue,ne[0]=me,1)}function qe(S,U){return S+(1<<U)-1>>>U}function st(S,U){return((4278255360&S)+(4278255360&U)>>>0&4278255360)+((16711935&S)+(16711935&U)>>>0&16711935)>>>0}function mt(S,U){E[U]=function(K,ne,ue,me,ge,ve,Ce){var Be;for(Be=0;Be<ge;++Be){var Ue=E[S](ve[Ce+Be-1],ue,me+Be);ve[Ce+Be]=st(K[ne+Be],Ue)}}}function Et(){this.ud=this.hd=this.jd=0}function lt(S,U){return((4278124286&(S^U))>>>1)+(S&U)>>>0}function kt(S){return 0<=S&&256>S?S:0>S?0:255<S?255:void 0}function Gt(S,U){return kt(S+(S-U+.5>>1))}function Xt(S,U,K){return Math.abs(U-K)-Math.abs(S-K)}function It(S,U,K,ne,ue,me,ge){for(ne=me[ge-1],K=0;K<ue;++K)me[ge+K]=ne=st(S[U+K],ne)}function Dt(S,U,K,ne,ue){var me;for(me=0;me<K;++me){var ge=S[U+me],ve=ge>>8&255,Ce=16711935&(Ce=(Ce=16711935&ge)+((ve<<16)+ve));ne[ue+me]=(4278255360&ge)+Ce>>>0}}function Wt(S,U){U.jd=S>>0&255,U.hd=S>>8&255,U.ud=S>>16&255}function Lt(S,U,K,ne,ue,me){var ge;for(ge=0;ge<ne;++ge){var ve=U[K+ge],Ce=ve>>>8,Be=ve,Ue=255&(Ue=(Ue=ve>>>16)+((S.jd<<24>>24)*(Ce<<24>>24)>>>5));Be=255&(Be=(Be=Be+((S.hd<<24>>24)*(Ce<<24>>24)>>>5))+((S.ud<<24>>24)*(Ue<<24>>24)>>>5)),ue[me+ge]=(4278255360&ve)+(Ue<<16)+Be}}function Rt(S,U,K,ne,ue){E[U]=function(me,ge,ve,Ce,Be,Ue,Xe,$e,Ge){for(Ce=Xe;Ce<$e;++Ce)for(Xe=0;Xe<Ge;++Xe)Be[Ue++]=ue(ve[ne(me[ge++])])},E[S]=function(me,ge,ve,Ce,Be,Ue,Xe){var $e=8>>me.b,Ge=me.Ea,gt=me.K[0],it=me.w;if(8>$e)for(me=(1<<me.b)-1,it=(1<<$e)-1;ge<ve;++ge){var Me,Oe=0;for(Me=0;Me<Ge;++Me)Me&me||(Oe=ne(Ce[Be++])),Ue[Xe++]=ue(gt[Oe&it]),Oe>>=$e}else E["VP8LMapColor"+K](Ce,Be,gt,it,Ue,Xe,ge,ve,Ge)}}function xt(S,U,K,ne,ue){for(K=U+K;U<K;){var me=S[U++];ne[ue++]=me>>16&255,ne[ue++]=me>>8&255,ne[ue++]=me>>0&255}}function wr(S,U,K,ne,ue){for(K=U+K;U<K;){var me=S[U++];ne[ue++]=me>>16&255,ne[ue++]=me>>8&255,ne[ue++]=me>>0&255,ne[ue++]=me>>24&255}}function Jt(S,U,K,ne,ue){for(K=U+K;U<K;){var me=(ge=S[U++])>>16&240|ge>>12&15,ge=ge>>0&240|ge>>28&15;ne[ue++]=me,ne[ue++]=ge}}function dn(S,U,K,ne,ue){for(K=U+K;U<K;){var me=(ge=S[U++])>>16&248|ge>>13&7,ge=ge>>5&224|ge>>3&31;ne[ue++]=me,ne[ue++]=ge}}function gr(S,U,K,ne,ue){for(K=U+K;U<K;){var me=S[U++];ne[ue++]=me>>0&255,ne[ue++]=me>>8&255,ne[ue++]=me>>16&255}}function Ur(S,U,K,ne,ue,me){if(me==0)for(K=U+K;U<K;)xe(ne,((me=S[U++])[0]>>24|me[1]>>8&65280|me[2]<<8&16711680|me[3]<<24)>>>0),ue+=32;else n(ne,ue,S,U,K)}function Dn(S,U){E[U][0]=E[S+"0"],E[U][1]=E[S+"1"],E[U][2]=E[S+"2"],E[U][3]=E[S+"3"],E[U][4]=E[S+"4"],E[U][5]=E[S+"5"],E[U][6]=E[S+"6"],E[U][7]=E[S+"7"],E[U][8]=E[S+"8"],E[U][9]=E[S+"9"],E[U][10]=E[S+"10"],E[U][11]=E[S+"11"],E[U][12]=E[S+"12"],E[U][13]=E[S+"13"],E[U][14]=E[S+"0"],E[U][15]=E[S+"0"]}function Fr(S){return S==Uf||S==nu||S==lc||S==ad}function da(){this.eb=[],this.size=this.A=this.fb=0}function nn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ns(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new da,this.f.kb=new nn,this.sd=null}function ps(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Pr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function nr(S){return alert("todo:WebPSamplerProcessPlane"),S.T}function Gr(S,U){var K=S.T,ne=U.ba.f.RGBA,ue=ne.eb,me=ne.fb+S.ka*ne.A,ge=xa[U.ba.S],ve=S.y,Ce=S.O,Be=S.f,Ue=S.N,Xe=S.ea,$e=S.W,Ge=U.cc,gt=U.dc,it=U.Mc,Me=U.Nc,Oe=S.ka,ut=S.ka+S.T,vt=S.U,ft=vt+1>>1;for(Oe==0?ge(ve,Ce,null,null,Be,Ue,Xe,$e,Be,Ue,Xe,$e,ue,me,null,null,vt):(ge(U.ec,U.fc,ve,Ce,Ge,gt,it,Me,Be,Ue,Xe,$e,ue,me-ne.A,ue,me,vt),++K);Oe+2<ut;Oe+=2)Ge=Be,gt=Ue,it=Xe,Me=$e,Ue+=S.Rc,$e+=S.Rc,me+=2*ne.A,ge(ve,(Ce+=2*S.fa)-S.fa,ve,Ce,Ge,gt,it,Me,Be,Ue,Xe,$e,ue,me-ne.A,ue,me,vt);return Ce+=S.fa,S.j+ut<S.o?(n(U.ec,U.fc,ve,Ce,vt),n(U.cc,U.dc,Be,Ue,ft),n(U.Mc,U.Nc,Xe,$e,ft),K--):1&ut||ge(ve,Ce,null,null,Be,Ue,Xe,$e,Be,Ue,Xe,$e,ue,me+ne.A,null,null,vt),K}function fa(S,U,K){var ne=S.F,ue=[S.J];if(ne!=null){var me=S.U,ge=U.ba.S,ve=ge==rA||ge==lc;U=U.ba.f.RGBA;var Ce=[0],Be=S.ka;Ce[0]=S.T,S.Kb&&(Be==0?--Ce[0]:(--Be,ue[0]-=S.width),S.j+S.ka+S.T==S.o&&(Ce[0]=S.o-S.j-Be));var Ue=U.eb;Be=U.fb+Be*U.A,S=Wr(ne,ue[0],S.width,me,Ce,Ue,Be+(ve?0:3),U.A),e(K==Ce),S&&Fr(ge)&&Ji(Ue,Be,ve,me,Ce,U.A)}return 0}function Wn(S){var U=S.ma,K=U.ba.S,ne=11>K,ue=K==sd||K==Lf||K==rA||K==oc||K==12||Fr(K);if(U.memory=null,U.Ib=null,U.Jb=null,U.Nd=null,!qc(U.Oa,S,ue?11:12))return 0;if(ue&&Fr(K)&&_t(),S.da)alert("todo:use_scaling");else{if(ne){if(U.Ib=nr,S.Kb){if(K=S.U+1>>1,U.memory=a(S.U+2*K),U.memory==null)return 0;U.ec=U.memory,U.fc=0,U.cc=U.ec,U.dc=U.fc+S.U,U.Mc=U.cc,U.Nc=U.dc+K,U.Ib=Gr,_t()}}else alert("todo:EmitYUV");ue&&(U.Jb=fa,ne&&Ve())}if(ne&&!S1){for(S=0;256>S;++S)Rb[S]=89858*(S-128)+Xs>>Tl,jf[S]=-22014*(S-128)+Xs,fp[S]=-45773*(S-128),Js[S]=113618*(S-128)+Xs>>Tl;for(S=iu;S<o0;++S)U=76283*(S-16)+Xs>>Tl,Of[S-iu]=Sn(U,255),hp[S-iu]=Sn(U+8>>4,15);S1=1}return 1}function Es(S){var U=S.ma,K=S.U,ne=S.T;return e(!(1&S.ka)),0>=K||0>=ne?0:(K=U.Ib(S,U),U.Jb!=null&&U.Jb(S,U,K),U.Dc+=K,1)}function Na(S){S.ma.memory=null}function zt(S,U,K,ne){return W(S,8)!=47?0:(U[0]=W(S,14)+1,K[0]=W(S,14)+1,ne[0]=W(S,1),W(S,3)!=0?0:!S.h)}function fn(S,U){if(4>S)return S+1;var K=S-2>>1;return(2+(1&S)<<K)+W(U,K)+1}function sn(S,U){return 120<U?U-120:1<=(K=((K=uc[U-1])>>4)*S+(8-(15&K)))?K:1;var K}function Rn(S,U,K){var ne=Y(K),ue=S[U+=255&ne].g-8;return 0<ue&&(te(K,K.u+8),ne=Y(K),U+=S[U].value,U+=ne&(1<<ue)-1),te(K,K.u+S[U].g),S[U].value}function jn(S,U,K){return K.g+=S.g,K.value+=S.value<<U>>>0,e(8>=K.g),S.g}function Yn(S,U,K){var ne=S.xc;return e((U=ne==0?0:S.vc[S.md*(K>>ne)+(U>>ne)])<S.Wb),S.Ya[U]}function he(S,U,K,ne){var ue=S.ab,me=S.c*U,ge=S.C;U=ge+U;var ve=K,Ce=ne;for(ne=S.Ta,K=S.Ua;0<ue--;){var Be=S.gc[ue],Ue=ge,Xe=U,$e=ve,Ge=Ce,gt=(Ce=ne,ve=K,Be.Ea);switch(e(Ue<Xe),e(Xe<=Be.nc),Be.hc){case 2:e0($e,Ge,(Xe-Ue)*gt,Ce,ve);break;case 0:var it=Ue,Me=Xe,Oe=Ce,ut=ve,vt=(Ht=Be).Ea;it==0&&(Ap($e,Ge,null,null,1,Oe,ut),It($e,Ge+1,0,0,vt-1,Oe,ut+1),Ge+=vt,ut+=vt,++it);for(var ft=1<<Ht.b,Kt=ft-1,jt=qe(vt,Ht.b),sr=Ht.K,Ht=Ht.w+(it>>Ht.b)*jt;it<Me;){var xn=sr,Tn=Ht,qr=1;for(Df($e,Ge,Oe,ut-vt,1,Oe,ut);qr<vt;){var Qr=(qr&~Kt)+ft;Qr>vt&&(Qr=vt),(0,sc[xn[Tn++]>>8&15])($e,Ge+ +qr,Oe,ut+qr-vt,Qr-qr,Oe,ut+qr),qr=Qr}Ge+=vt,ut+=vt,++it&Kt||(Ht+=jt)}Xe!=Be.nc&&n(Ce,ve-gt,Ce,ve+(Xe-Ue-1)*gt,gt);break;case 1:for(gt=$e,Me=Ge,vt=($e=Be.Ea)-(ut=$e&~(Oe=(Ge=1<<Be.b)-1)),it=qe($e,Be.b),ft=Be.K,Be=Be.w+(Ue>>Be.b)*it;Ue<Xe;){for(Kt=ft,jt=Be,sr=new Et,Ht=Me+ut,xn=Me+$e;Me<Ht;)Wt(Kt[jt++],sr),Wc(sr,gt,Me,Ge,Ce,ve),Me+=Ge,ve+=Ge;Me<xn&&(Wt(Kt[jt++],sr),Wc(sr,gt,Me,vt,Ce,ve),Me+=vt,ve+=vt),++Ue&Oe||(Be+=it)}break;case 3:if($e==Ce&&Ge==ve&&0<Be.b){for(Me=Ce,$e=gt=ve+(Xe-Ue)*gt-(ut=(Xe-Ue)*qe(Be.Ea,Be.b)),Ge=Ce,Oe=ve,it=[],ut=(vt=ut)-1;0<=ut;--ut)it[ut]=Ge[Oe+ut];for(ut=vt-1;0<=ut;--ut)Me[$e+ut]=it[ut];go(Be,Ue,Xe,Ce,gt,Ce,ve)}else go(Be,Ue,Xe,$e,Ge,Ce,ve)}ve=ne,Ce=K}Ce!=K&&n(ne,K,ve,Ce,me)}function ke(S,U){var K=S.V,ne=S.Ba+S.c*S.C,ue=U-S.C;if(e(U<=S.l.o),e(16>=ue),0<ue){var me=S.l,ge=S.Ta,ve=S.Ua,Ce=me.width;if(he(S,ue,K,ne),ue=ve=[ve],e((K=S.C)<(ne=U)),e(me.v<me.va),ne>me.o&&(ne=me.o),K<me.j){var Be=me.j-K;K=me.j,ue[0]+=Be*Ce}if(K>=ne?K=0:(ue[0]+=4*me.v,me.ka=K-me.j,me.U=me.va-me.v,me.T=ne-K,K=1),K){if(ve=ve[0],11>(K=S.ca).S){var Ue=K.f.RGBA,Xe=(ne=K.S,ue=me.U,me=me.T,Be=Ue.eb,Ue.A),$e=me;for(Ue=Ue.fb+S.Ma*Ue.A;0<$e--;){var Ge=ge,gt=ve,it=ue,Me=Be,Oe=Ue;switch(ne){case Va:ti(Ge,gt,it,Me,Oe);break;case sd:Da(Ge,gt,it,Me,Oe);break;case Uf:Da(Ge,gt,it,Me,Oe),Ji(Me,Oe,0,it,1,0);break;case Cl:Qo(Ge,gt,it,Me,Oe);break;case Lf:Ur(Ge,gt,it,Me,Oe,1);break;case nu:Ur(Ge,gt,it,Me,Oe,1),Ji(Me,Oe,0,it,1,0);break;case rA:Ur(Ge,gt,it,Me,Oe,0);break;case lc:Ur(Ge,gt,it,Me,Oe,0),Ji(Me,Oe,1,it,1,0);break;case oc:Yc(Ge,gt,it,Me,Oe);break;case ad:Yc(Ge,gt,it,Me,Oe),$r(Me,Oe,it,1,0);break;case r0:Ci(Ge,gt,it,Me,Oe);break;default:e(0)}ve+=Ce,Ue+=Xe}S.Ma+=me}else alert("todo:EmitRescaledRowsYUVA");e(S.Ma<=K.height)}}S.C=U,e(S.C<=S.i)}function _e(S){var U;if(0<S.ua)return 0;for(U=0;U<S.Wb;++U){var K=S.Ya[U].G,ne=S.Ya[U].H;if(0<K[1][ne[1]+0].g||0<K[2][ne[2]+0].g||0<K[3][ne[3]+0].g)return 0}return 1}function Se(S,U,K,ne,ue,me){if(S.Z!=0){var ge=S.qd,ve=S.rd;for(e(_l[S.Z]!=null);U<K;++U)_l[S.Z](ge,ve,ne,ue,ne,ue,me),ge=ne,ve=ue,ue+=me;S.qd=ge,S.rd=ve}}function Ne(S,U){var K=S.l.ma,ne=K.Z==0||K.Z==1?S.l.j:S.C;if(ne=S.C<ne?ne:S.C,e(U<=S.l.o),U>ne){var ue=S.l.width,me=K.ca,ge=K.tb+ue*ne,ve=S.V,Ce=S.Ba+S.c*ne,Be=S.gc;e(S.ab==1),e(Be[0].hc==3),$c(Be[0],ne,U,ve,Ce,me,ge),Se(K,ne,U,me,ge,ue)}S.C=S.Ma=U}function Ie(S,U,K,ne,ue,me,ge){var ve=S.$/ne,Ce=S.$%ne,Be=S.m,Ue=S.s,Xe=K+S.$,$e=Xe;ue=K+ne*ue;var Ge=K+ne*me,gt=280+Ue.ua,it=S.Pb?ve:16777216,Me=0<Ue.ua?Ue.Wa:null,Oe=Ue.wc,ut=Xe<Ge?Yn(Ue,Ce,ve):null;e(S.C<me),e(Ge<=ue);var vt=!1;e:for(;;){for(;vt||Xe<Ge;){var ft=0;if(ve>=it){var Kt=Xe-K;e((it=S).Pb),it.wd=it.m,it.xd=Kt,0<it.s.ua&&Te(it.s.Wa,it.s.vb),it=ve+C1}if(Ce&Oe||(ut=Yn(Ue,Ce,ve)),e(ut!=null),ut.Qb&&(U[Xe]=ut.qb,vt=!0),!vt)if(ce(Be),ut.jc){ft=Be,Kt=U;var jt=Xe,sr=ut.pd[Y(ft)&Ws-1];e(ut.jc),256>sr.g?(te(ft,ft.u+sr.g),Kt[jt]=sr.value,ft=0):(te(ft,ft.u+sr.g-256),e(256<=sr.value),ft=sr.value),ft==0&&(vt=!0)}else ft=Rn(ut.G[0],ut.H[0],Be);if(Be.h)break;if(vt||256>ft){if(!vt)if(ut.nd)U[Xe]=(ut.qb|ft<<8)>>>0;else{if(ce(Be),vt=Rn(ut.G[1],ut.H[1],Be),ce(Be),Kt=Rn(ut.G[2],ut.H[2],Be),jt=Rn(ut.G[3],ut.H[3],Be),Be.h)break;U[Xe]=(jt<<24|vt<<16|ft<<8|Kt)>>>0}if(vt=!1,++Xe,++Ce>=ne&&(Ce=0,++ve,ge!=null&&ve<=me&&!(ve%16)&&ge(S,ve),Me!=null))for(;$e<Xe;)ft=U[$e++],Me.X[(506832829*ft&4294967295)>>>Me.Mb]=ft}else if(280>ft){if(ft=fn(ft-256,Be),Kt=Rn(ut.G[4],ut.H[4],Be),ce(Be),Kt=sn(ne,Kt=fn(Kt,Be)),Be.h)break;if(Xe-K<Kt||ue-Xe<ft)break e;for(jt=0;jt<ft;++jt)U[Xe+jt]=U[Xe+jt-Kt];for(Xe+=ft,Ce+=ft;Ce>=ne;)Ce-=ne,++ve,ge!=null&&ve<=me&&!(ve%16)&&ge(S,ve);if(e(Xe<=ue),Ce&Oe&&(ut=Yn(Ue,Ce,ve)),Me!=null)for(;$e<Xe;)ft=U[$e++],Me.X[(506832829*ft&4294967295)>>>Me.Mb]=ft}else{if(!(ft<gt))break e;for(vt=ft-280,e(Me!=null);$e<Xe;)ft=U[$e++],Me.X[(506832829*ft&4294967295)>>>Me.Mb]=ft;ft=Xe,e(!(vt>>>(Kt=Me).Xa)),U[ft]=Kt.X[vt],vt=!0}vt||e(Be.h==Z(Be))}if(S.Pb&&Be.h&&Xe<ue)e(S.m.h),S.a=5,S.m=S.wd,S.$=S.xd,0<S.s.ua&&Te(S.s.vb,S.s.Wa);else{if(Be.h)break e;ge!=null&&ge(S,ve>me?me:ve),S.a=0,S.$=Xe-K}return 1}return S.a=3,0}function Ke(S){e(S!=null),S.vc=null,S.yc=null,S.Ya=null;var U=S.Wa;U!=null&&(U.X=null),S.vb=null,e(S!=null)}function rt(){var S=new ZA;return S==null?null:(S.a=0,S.xb=id,Dn("Predictor","VP8LPredictors"),Dn("Predictor","VP8LPredictors_C"),Dn("PredictorAdd","VP8LPredictorsAdd"),Dn("PredictorAdd","VP8LPredictorsAdd_C"),e0=Dt,Wc=Lt,ti=xt,Da=wr,Yc=Jt,Ci=dn,Qo=gr,E.VP8LMapColor32b=pa,E.VP8LMapColor8b=Rf,S)}function He(S,U,K,ne,ue){var me=1,ge=[S],ve=[U],Ce=ne.m,Be=ne.s,Ue=null,Xe=0;e:for(;;){if(K)for(;me&&W(Ce,1);){var $e=ge,Ge=ve,gt=ne,it=1,Me=gt.m,Oe=gt.gc[gt.ab],ut=W(Me,2);if(gt.Oc&1<<ut)me=0;else{switch(gt.Oc|=1<<ut,Oe.hc=ut,Oe.Ea=$e[0],Oe.nc=Ge[0],Oe.K=[null],++gt.ab,e(4>=gt.ab),ut){case 0:case 1:Oe.b=W(Me,3)+2,it=He(qe(Oe.Ea,Oe.b),qe(Oe.nc,Oe.b),0,gt,Oe.K),Oe.K=Oe.K[0];break;case 3:var vt,ft=W(Me,8)+1,Kt=16<ft?0:4<ft?1:2<ft?2:3;if($e[0]=qe(Oe.Ea,Kt),Oe.b=Kt,vt=it=He(ft,1,0,gt,Oe.K)){var jt,sr=ft,Ht=Oe,xn=1<<(8>>Ht.b),Tn=a(xn);if(Tn==null)vt=0;else{var qr=Ht.K[0],Qr=Ht.w;for(Tn[0]=Ht.K[0][0],jt=1;jt<1*sr;++jt)Tn[jt]=st(qr[Qr+jt],Tn[jt-1]);for(;jt<4*xn;++jt)Tn[jt]=0;Ht.K[0]=null,Ht.K[0]=Tn,vt=1}}it=vt;break;case 2:break;default:e(0)}me=it}}if(ge=ge[0],ve=ve[0],me&&W(Ce,1)&&!(me=1<=(Xe=W(Ce,4))&&11>=Xe)){ne.a=3;break e}var Un;if(Un=me)t:{var Nn,Ir,Qn,fr=ne,br=ge,mn=ve,vn=Xe,va=K,Zs=fr.m,Ts=fr.s,Ns=[null],js=1,wo=0,Bn=sA[vn];r:for(;;){if(va&&W(Zs,1)){var Os=W(Zs,3)+2,Go=qe(br,Os),ou=qe(mn,Os),oA=Go*ou;if(!He(Go,ou,0,fr,Ns))break r;for(Ns=Ns[0],Ts.xc=Os,Nn=0;Nn<oA;++Nn){var lu=Ns[Nn]>>8&65535;Ns[Nn]=lu,lu>=js&&(js=lu+1)}}if(Zs.h)break r;for(Ir=0;5>Ir;++Ir){var is=Zi[Ir];!Ir&&0<vn&&(is+=1<<vn),wo<is&&(wo=is)}var Qf=i(js*Bn,I),l0=js,ni=i(l0,G);if(ni==null)var us=null;else e(65536>=l0),us=ni;var lA=a(wo);if(us==null||lA==null||Qf==null){fr.a=1;break r}var cu=Qf;for(Nn=Qn=0;Nn<js;++Nn){var _i=us[Nn],uu=_i.G,Si=_i.H,Hf=0,ld=1,c0=0;for(Ir=0;5>Ir;++Ir){is=Zi[Ir],uu[Ir]=cu,Si[Ir]=Qn,!Ir&&0<vn&&(is+=1<<vn);s:{var Vf,u0=is,Gf=fr,cd=lA,B1=cu,k1=Qn,zf=0,hc=Gf.m,Ub=W(hc,1);if(s(cd,0,0,u0),Ub){var I1=W(hc,1)+1,F1=W(hc,1),mp=W(hc,F1==0?1:8);cd[mp]=1,I1==2&&(cd[mp=W(hc,8)]=1);var ud=1}else{var pp=a(19),gp=W(hc,4)+4;if(19<gp){Gf.a=3;var qf=0;break s}for(Vf=0;Vf<gp;++Vf)pp[cc[Vf]]=W(hc,3);var A0=void 0,Ad=void 0,D1=Gf,R1=pp,mc=u0,Kf=cd,d0=0,zo=D1.m,dd=8,xp=i(128,I);n:for(;D(xp,0,7,R1,19);){if(W(zo,1)){var L1=2+2*W(zo,3);if((A0=2+W(zo,L1))>mc)break n}else A0=mc;for(Ad=0;Ad<mc&&A0--;){ce(zo);var vp=xp[0+(127&Y(zo))];te(zo,zo.u+vp.g);var cA=vp.value;if(16>cA)Kf[Ad++]=cA,cA!=0&&(dd=cA);else{var U1=cA==16,yp=cA-16,wp=yo[yp],bp=W(zo,n0[yp])+wp;if(Ad+bp>mc)break n;for(var M1=U1?dd:0;0<bp--;)Kf[Ad++]=M1}}d0=1;break n}d0||(D1.a=3),ud=d0}(ud=ud&&!hc.h)&&(zf=D(B1,k1,8,cd,u0)),ud&&zf!=0?qf=zf:(Gf.a=3,qf=0)}if(qf==0)break r;if(ld&&nA[Ir]==1&&(ld=cu[Qn].g==0),Hf+=cu[Qn].g,Qn+=qf,3>=Ir){var uA,f0=lA[0];for(uA=1;uA<is;++uA)lA[uA]>f0&&(f0=lA[uA]);c0+=f0}}if(_i.nd=ld,_i.Qb=0,ld&&(_i.qb=(uu[3][Si[3]+0].value<<24|uu[1][Si[1]+0].value<<16|uu[2][Si[2]+0].value)>>>0,Hf==0&&256>uu[0][Si[0]+0].value&&(_i.Qb=1,_i.qb+=uu[0][Si[0]+0].value<<8)),_i.jc=!_i.Qb&&6>c0,_i.jc){var $f,pc=_i;for($f=0;$f<Ws;++$f){var Nl=$f,gc=pc.pd[Nl],Wf=pc.G[0][pc.H[0]+Nl];256<=Wf.value?(gc.g=Wf.g+256,gc.value=Wf.value):(gc.g=0,gc.value=0,Nl>>=jn(Wf,8,gc),Nl>>=jn(pc.G[1][pc.H[1]+Nl],16,gc),Nl>>=jn(pc.G[2][pc.H[2]+Nl],0,gc),jn(pc.G[3][pc.H[3]+Nl],24,gc))}}}Ts.vc=Ns,Ts.Wb=js,Ts.Ya=us,Ts.yc=Qf,Un=1;break t}Un=0}if(!(me=Un)){ne.a=3;break e}if(0<Xe){if(Be.ua=1<<Xe,!et(Be.Wa,Xe)){ne.a=1,me=0;break e}}else Be.ua=0;var Yf=ne,Cp=ge,P1=ve,Ep=Yf.s,_p=Ep.xc;if(Yf.c=Cp,Yf.i=P1,Ep.md=qe(Cp,_p),Ep.wc=_p==0?-1:(1<<_p)-1,K){ne.xb=_1;break e}if((Ue=a(ge*ve))==null){ne.a=1,me=0;break e}me=(me=Ie(ne,Ue,0,ge,ve,ve,null))&&!Ce.h;break e}return me?(ue!=null?ue[0]=Ue:(e(Ue==null),e(K)),ne.$=0,K||Ke(Be)):Ke(Be),me}function We(S,U){var K=S.c*S.i,ne=K+U+16*U;return e(S.c<=U),S.V=a(ne),S.V==null?(S.Ta=null,S.Ua=0,S.a=1,0):(S.Ta=S.V,S.Ua=S.Ba+K+U,1)}function Je(S,U){var K=S.C,ne=U-K,ue=S.V,me=S.Ba+S.c*K;for(e(U<=S.l.o);0<ne;){var ge=16<ne?16:ne,ve=S.l.ma,Ce=S.l.width,Be=Ce*ge,Ue=ve.ca,Xe=ve.tb+Ce*K,$e=S.Ta,Ge=S.Ua;he(S,ge,ue,me),Jn($e,Ge,Ue,Xe,Be),Se(ve,K,K+ge,Ue,Xe,Ce),ne-=ge,ue+=ge*S.c,K+=ge}e(K==U),S.C=S.Ma=U}function yt(){this.ub=this.yd=this.td=this.Rb=0}function Bt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ot(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function Nt(){this.Yb=function(){var S=[];return function U(K,ne,ue){for(var me=ue[ne],ge=0;ge<me&&(K.push(ue.length>ne+1?[]:0),!(ue.length<ne+1));ge++)U(K[ge],ne+1,ue)}(S,0,[3,11]),S}()}function Ut(){this.jb=a(3),this.Wc=o([4,8],Nt),this.Xc=o([4,17],Nt)}function dr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function jr(){this.ld=this.La=this.dd=this.tc=0}function Or(){this.Na=this.la=0}function zr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Rs(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function pi(){this.uc=this.M=this.Nb=0,this.wa=Array(new jr),this.Y=0,this.ya=Array(new Rs),this.aa=0,this.l=new $s}function Ls(){this.y=a(16),this.f=a(8),this.ea=a(8)}function ha(){this.cb=this.a=0,this.sc="",this.m=new ie,this.Od=new yt,this.Kc=new Bt,this.ed=new dr,this.Qa=new Ot,this.Ic=this.$c=this.Aa=0,this.D=new pi,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,ie),this.ia=0,this.pb=i(4,zr),this.Pa=new Ut,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ls),this.Hd=0,this.rb=Array(new Or),this.sb=0,this.wa=Array(new jr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Rs),this.L=this.aa=0,this.gd=o([4,2],jr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function $s(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ba(){var S=new ha;return S!=null&&(S.a=0,S.sc="OK",S.cb=0,S.Xb=0,Ys||(Ys=WA)),S}function Xn(S,U,K){return S.a==0&&(S.a=U,S.sc=K,S.cb=0),0}function ma(S,U,K){return 3<=K&&S[U+0]==157&&S[U+1]==1&&S[U+2]==42}function jc(S,U){if(S==null)return 0;if(S.a=0,S.sc="OK",U==null)return Xn(S,2,"null VP8Io passed to VP8GetHeaders()");var K=U.data,ne=U.w,ue=U.ha;if(4>ue)return Xn(S,7,"Truncated header.");var me=K[ne+0]|K[ne+1]<<8|K[ne+2]<<16,ge=S.Od;if(ge.Rb=!(1&me),ge.td=me>>1&7,ge.yd=me>>4&1,ge.ub=me>>5,3<ge.td)return Xn(S,3,"Incorrect keyframe parameters.");if(!ge.yd)return Xn(S,4,"Frame not displayable.");ne+=3,ue-=3;var ve=S.Kc;if(ge.Rb){if(7>ue)return Xn(S,7,"cannot parse picture header");if(!ma(K,ne,ue))return Xn(S,3,"Bad code word");ve.c=16383&(K[ne+4]<<8|K[ne+3]),ve.Td=K[ne+4]>>6,ve.i=16383&(K[ne+6]<<8|K[ne+5]),ve.Ud=K[ne+6]>>6,ne+=7,ue-=7,S.za=ve.c+15>>4,S.Ub=ve.i+15>>4,U.width=ve.c,U.height=ve.i,U.Da=0,U.j=0,U.v=0,U.va=U.width,U.o=U.height,U.da=0,U.ib=U.width,U.hb=U.height,U.U=U.width,U.T=U.height,s((me=S.Pa).jb,0,255,me.jb.length),e((me=S.Qa)!=null),me.Cb=0,me.Bb=0,me.Fb=1,s(me.Zb,0,0,me.Zb.length),s(me.Lb,0,0,me.Lb)}if(ge.ub>ue)return Xn(S,7,"bad partition length");se(me=S.m,K,ne,ge.ub),ne+=ge.ub,ue-=ge.ub,ge.Rb&&(ve.Ld=pe(me),ve.Kd=pe(me)),ve=S.Qa;var Ce,Be=S.Pa;if(e(me!=null),e(ve!=null),ve.Cb=pe(me),ve.Cb){if(ve.Bb=pe(me),pe(me)){for(ve.Fb=pe(me),Ce=0;4>Ce;++Ce)ve.Zb[Ce]=pe(me)?re(me,7):0;for(Ce=0;4>Ce;++Ce)ve.Lb[Ce]=pe(me)?re(me,6):0}if(ve.Bb)for(Ce=0;3>Ce;++Ce)Be.jb[Ce]=pe(me)?J(me,8):255}else ve.Bb=0;if(me.Ka)return Xn(S,3,"cannot parse segment header");if((ve=S.ed).zd=pe(me),ve.Tb=J(me,6),ve.wb=J(me,3),ve.Pc=pe(me),ve.Pc&&pe(me)){for(Be=0;4>Be;++Be)pe(me)&&(ve.vd[Be]=re(me,6));for(Be=0;4>Be;++Be)pe(me)&&(ve.od[Be]=re(me,6))}if(S.L=ve.Tb==0?0:ve.zd?1:2,me.Ka)return Xn(S,3,"cannot parse filter header");var Ue=ue;if(ue=Ce=ne,ne=Ce+Ue,ve=Ue,S.Xb=(1<<J(S.m,2))-1,Ue<3*(Be=S.Xb))K=7;else{for(Ce+=3*Be,ve-=3*Be,Ue=0;Ue<Be;++Ue){var Xe=K[ue+0]|K[ue+1]<<8|K[ue+2]<<16;Xe>ve&&(Xe=ve),se(S.Jc[+Ue],K,Ce,Xe),Ce+=Xe,ve-=Xe,ue+=3}se(S.Jc[+Be],K,Ce,ve),K=Ce<ne?0:5}if(K!=0)return Xn(S,K,"cannot parse partitions");for(K=J(Ce=S.m,7),ue=pe(Ce)?re(Ce,4):0,ne=pe(Ce)?re(Ce,4):0,ve=pe(Ce)?re(Ce,4):0,Be=pe(Ce)?re(Ce,4):0,Ce=pe(Ce)?re(Ce,4):0,Ue=S.Qa,Xe=0;4>Xe;++Xe){if(Ue.Cb){var $e=Ue.Zb[Xe];Ue.Fb||($e+=K)}else{if(0<Xe){S.pb[Xe]=S.pb[0];continue}$e=K}var Ge=S.pb[Xe];Ge.Sc[0]=Mf[Sn($e+ue,127)],Ge.Sc[1]=Pf[Sn($e+0,127)],Ge.Eb[0]=2*Mf[Sn($e+ne,127)],Ge.Eb[1]=101581*Pf[Sn($e+ve,127)]>>16,8>Ge.Eb[1]&&(Ge.Eb[1]=8),Ge.Qc[0]=Mf[Sn($e+Be,117)],Ge.Qc[1]=Pf[Sn($e+Ce,127)],Ge.lc=$e+Ce}if(!ge.Rb)return Xn(S,4,"Not a key frame.");for(pe(me),ge=S.Pa,K=0;4>K;++K){for(ue=0;8>ue;++ue)for(ne=0;3>ne;++ne)for(ve=0;11>ve;++ve)Be=fe(me,aA[K][ue][ne][ve])?J(me,8):El[K][ue][ne][ve],ge.Wc[K][ue].Yb[ne][ve]=Be;for(ue=0;17>ue;++ue)ge.Xc[K][ue]=ge.Wc[K][E1[ue]]}return S.kc=pe(me),S.kc&&(S.Bd=J(me,8)),S.cb=1}function WA(S,U,K,ne,ue,me,ge){var ve=U[ue].Yb[K];for(K=0;16>ue;++ue){if(!fe(S,ve[K+0]))return ue;for(;!fe(S,ve[K+1]);)if(ve=U[++ue].Yb[0],K=0,ue==16)return 16;var Ce=U[ue+1].Yb;if(fe(S,ve[K+2])){var Be=S,Ue=0;if(fe(Be,($e=ve)[(Xe=K)+3]))if(fe(Be,$e[Xe+6])){for(ve=0,Xe=2*(Ue=fe(Be,$e[Xe+8]))+($e=fe(Be,$e[Xe+9+Ue])),Ue=0,$e=vs[Xe];$e[ve];++ve)Ue+=Ue+fe(Be,$e[ve]);Ue+=3+(8<<Xe)}else fe(Be,$e[Xe+7])?(Ue=7+2*fe(Be,165),Ue+=fe(Be,145)):Ue=5+fe(Be,159);else Ue=fe(Be,$e[Xe+4])?3+fe(Be,$e[Xe+5]):2;ve=Ce[2]}else Ue=1,ve=Ce[1];Ce=ge+bn[ue],0>(Be=S).b&&Ee(Be);var Xe,$e=Be.b,Ge=(Xe=Be.Ca>>1)-(Be.I>>$e)>>31;--Be.b,Be.Ca+=Ge,Be.Ca|=1,Be.I-=(Xe+1&Ge)<<$e,me[Ce]=((Ue^Ge)-Ge)*ne[(0<ue)+0]}return 16}function cl(S){var U=S.rb[S.sb-1];U.la=0,U.Na=0,s(S.zc,0,0,S.zc.length),S.ja=0}function Vu(S,U){if(S==null)return 0;if(U==null)return Xn(S,2,"NULL VP8Io parameter in VP8Decode().");if(!S.cb&&!jc(S,U))return 0;if(e(S.cb),U.ac==null||U.ac(U)){U.ob&&(S.L=0);var K=fc[S.L];if(S.L==2?(S.yb=0,S.zb=0):(S.yb=U.v-K>>4,S.zb=U.j-K>>4,0>S.yb&&(S.yb=0),0>S.zb&&(S.zb=0)),S.Va=U.o+15+K>>4,S.Hb=U.va+15+K>>4,S.Hb>S.za&&(S.Hb=S.za),S.Va>S.Ub&&(S.Va=S.Ub),0<S.L){var ne=S.ed;for(K=0;4>K;++K){var ue;if(S.Qa.Cb){var me=S.Qa.Lb[K];S.Qa.Fb||(me+=ne.Tb)}else me=ne.Tb;for(ue=0;1>=ue;++ue){var ge=S.gd[K][ue],ve=me;if(ne.Pc&&(ve+=ne.vd[0],ue&&(ve+=ne.od[0])),0<(ve=0>ve?0:63<ve?63:ve)){var Ce=ve;0<ne.wb&&(Ce=4<ne.wb?Ce>>2:Ce>>1)>9-ne.wb&&(Ce=9-ne.wb),1>Ce&&(Ce=1),ge.dd=Ce,ge.tc=2*ve+Ce,ge.ld=40<=ve?2:15<=ve?1:0}else ge.tc=0;ge.La=ue}}}K=0}else Xn(S,6,"Frame setup failed"),K=S.a;if(K=K==0){if(K){S.$c=0,0<S.Aa||(S.Ic=T1);e:{K=S.Ic,ne=4*(Ce=S.za);var Be=32*Ce,Ue=Ce+1,Xe=0<S.L?Ce*(0<S.Aa?2:1):0,$e=(S.Aa==2?2:1)*Ce;if((ge=ne+832+(ue=3*(16*K+fc[S.L])/2*Be)+(me=S.Fa!=null&&0<S.Fa.length?S.Kc.c*S.Kc.i:0))!=ge)K=0;else{if(ge>S.Vb){if(S.Vb=0,S.Ec=a(ge),S.Fc=0,S.Ec==null){K=Xn(S,1,"no memory during frame initialization.");break e}S.Vb=ge}ge=S.Ec,ve=S.Fc,S.Ac=ge,S.Bc=ve,ve+=ne,S.Gd=i(Be,Ls),S.Hd=0,S.rb=i(Ue+1,Or),S.sb=1,S.wa=Xe?i(Xe,jr):null,S.Y=0,S.D.Nb=0,S.D.wa=S.wa,S.D.Y=S.Y,0<S.Aa&&(S.D.Y+=Ce),e(!0),S.oc=ge,S.pc=ve,ve+=832,S.ya=i($e,Rs),S.aa=0,S.D.ya=S.ya,S.D.aa=S.aa,S.Aa==2&&(S.D.aa+=Ce),S.R=16*Ce,S.B=8*Ce,Ce=(Be=fc[S.L])*S.R,Be=Be/2*S.B,S.sa=ge,S.ta=ve+Ce,S.qa=S.sa,S.ra=S.ta+16*K*S.R+Be,S.Ha=S.qa,S.Ia=S.ra+8*K*S.B+Be,S.$c=0,ve+=ue,S.mb=me?ge:null,S.nb=me?ve:null,e(ve+me<=S.Fc+S.Vb),cl(S),s(S.Ac,S.Bc,0,ne),K=1}}if(K){if(U.ka=0,U.y=S.sa,U.O=S.ta,U.f=S.qa,U.N=S.ra,U.ea=S.Ha,U.Vd=S.Ia,U.fa=S.R,U.Rc=S.B,U.F=null,U.J=0,!ic){for(K=-255;255>=K;++K)Ss[255+K]=0>K?-K:K;for(K=-1020;1020>=K;++K)xo[1020+K]=-128>K?-128:127<K?127:K;for(K=-112;112>=K;++K)tu[112+K]=-16>K?-16:15<K?15:K;for(K=-255;510>=K;++K)ru[255+K]=0>K?0:255<K?255:K;ic=1}wl=gi,Ho=Al,Vo=lo,Ps=_n,Ei=dl,gs=ul,Ju=pl,bl=jo,rd=Vc,Xc=$u,Jc=Hc,Zc=Zl,Zu=ec,nd=gl,eu=Xi,ac=Qa,eA=Ms,xs=JA,ri[0]=ja,ri[1]=YA,ri[2]=Ao,ri[3]=XA,ri[4]=xi,ri[5]=fo,ri[6]=ei,ri[7]=vi,ri[8]=Po,ri[9]=fl,Ac[0]=co,Ac[1]=zu,Ac[2]=Lo,Ac[3]=Qc,Ac[4]=On,Ac[5]=Mo,Ac[6]=uo,eo[0]=ho,eo[1]=Gu,eo[2]=qu,eo[3]=yi,eo[4]=Jr,eo[5]=Us,eo[6]=hl,K=1}else K=0}K&&(K=function(Ge,gt){for(Ge.M=0;Ge.M<Ge.Va;++Ge.M){var it,Me=Ge.Jc[Ge.M&Ge.Xb],Oe=Ge.m,ut=Ge;for(it=0;it<ut.za;++it){var vt=Oe,ft=ut,Kt=ft.Ac,jt=ft.Bc+4*it,sr=ft.zc,Ht=ft.ya[ft.aa+it];if(ft.Qa.Bb?Ht.$b=fe(vt,ft.Pa.jb[0])?2+fe(vt,ft.Pa.jb[2]):fe(vt,ft.Pa.jb[1]):Ht.$b=0,ft.kc&&(Ht.Ad=fe(vt,ft.Bd)),Ht.Za=!fe(vt,145)+0,Ht.Za){var xn=Ht.Ob,Tn=0;for(ft=0;4>ft;++ft){var qr,Qr=sr[0+ft];for(qr=0;4>qr;++qr){Qr=dp[Kt[jt+qr]][Qr];for(var Un=su[fe(vt,Qr[0])];0<Un;)Un=su[2*Un+fe(vt,Qr[Un])];Qr=-Un,Kt[jt+qr]=Qr}n(xn,Tn,Kt,jt,4),Tn+=4,sr[0+ft]=Qr}}else Qr=fe(vt,156)?fe(vt,128)?1:3:fe(vt,163)?2:0,Ht.Ob[0]=Qr,s(Kt,jt,Qr,4),s(sr,0,Qr,4);Ht.Dd=fe(vt,142)?fe(vt,114)?fe(vt,183)?1:3:2:0}if(ut.m.Ka)return Xn(Ge,7,"Premature end-of-partition0 encountered.");for(;Ge.ja<Ge.za;++Ge.ja){if(ut=Me,vt=(Oe=Ge).rb[Oe.sb-1],Kt=Oe.rb[Oe.sb+Oe.ja],it=Oe.ya[Oe.aa+Oe.ja],jt=Oe.kc?it.Ad:0)vt.la=Kt.la=0,it.Za||(vt.Na=Kt.Na=0),it.Hc=0,it.Gc=0,it.ia=0;else{var Nn,Ir;if(vt=Kt,Kt=ut,jt=Oe.Pa.Xc,sr=Oe.ya[Oe.aa+Oe.ja],Ht=Oe.pb[sr.$b],ft=sr.ad,xn=0,Tn=Oe.rb[Oe.sb-1],Qr=qr=0,s(ft,xn,0,384),sr.Za)var Qn=0,fr=jt[3];else{Un=a(16);var br=vt.Na+Tn.Na;if(br=Ys(Kt,jt[1],br,Ht.Eb,0,Un,0),vt.Na=Tn.Na=(0<br)+0,1<br)wl(Un,0,ft,xn);else{var mn=Un[0]+3>>3;for(Un=0;256>Un;Un+=16)ft[xn+Un]=mn}Qn=1,fr=jt[0]}var vn=15&vt.la,va=15&Tn.la;for(Un=0;4>Un;++Un){var Zs=1&va;for(mn=Ir=0;4>mn;++mn)vn=vn>>1|(Zs=(br=Ys(Kt,fr,br=Zs+(1&vn),Ht.Sc,Qn,ft,xn))>Qn)<<7,Ir=Ir<<2|(3<br?3:1<br?2:ft[xn+0]!=0),xn+=16;vn>>=4,va=va>>1|Zs<<7,qr=(qr<<8|Ir)>>>0}for(fr=vn,Qn=va>>4,Nn=0;4>Nn;Nn+=2){for(Ir=0,vn=vt.la>>4+Nn,va=Tn.la>>4+Nn,Un=0;2>Un;++Un){for(Zs=1&va,mn=0;2>mn;++mn)br=Zs+(1&vn),vn=vn>>1|(Zs=0<(br=Ys(Kt,jt[2],br,Ht.Qc,0,ft,xn)))<<3,Ir=Ir<<2|(3<br?3:1<br?2:ft[xn+0]!=0),xn+=16;vn>>=2,va=va>>1|Zs<<5}Qr|=Ir<<4*Nn,fr|=vn<<4<<Nn,Qn|=(240&va)<<Nn}vt.la=fr,Tn.la=Qn,sr.Hc=qr,sr.Gc=Qr,sr.ia=43690&Qr?0:Ht.ia,jt=!(qr|Qr)}if(0<Oe.L&&(Oe.wa[Oe.Y+Oe.ja]=Oe.gd[it.$b][it.Za],Oe.wa[Oe.Y+Oe.ja].La|=!jt),ut.Ka)return Xn(Ge,7,"Premature end-of-file encountered.")}if(cl(Ge),Oe=gt,ut=1,it=(Me=Ge).D,vt=0<Me.L&&Me.M>=Me.zb&&Me.M<=Me.Va,Me.Aa==0)e:{if(it.M=Me.M,it.uc=vt,wi(Me,it),ut=1,it=(Ir=Me.D).Nb,vt=(Qr=fc[Me.L])*Me.R,Kt=Qr/2*Me.B,Un=16*it*Me.R,mn=8*it*Me.B,jt=Me.sa,sr=Me.ta-vt+Un,Ht=Me.qa,ft=Me.ra-Kt+mn,xn=Me.Ha,Tn=Me.Ia-Kt+mn,va=(vn=Ir.M)==0,qr=vn>=Me.Va-1,Me.Aa==2&&wi(Me,Ir),Ir.uc)for(Zs=(br=Me).D.M,e(br.D.uc),Ir=br.yb;Ir<br.Hb;++Ir){Qn=Ir,fr=Zs;var Ts=(Ns=(is=br).D).Nb;Nn=is.R;var Ns=Ns.wa[Ns.Y+Qn],js=is.sa,wo=is.ta+16*Ts*Nn+16*Qn,Bn=Ns.dd,Os=Ns.tc;if(Os!=0)if(e(3<=Os),is.L==1)0<Qn&&ac(js,wo,Nn,Os+4),Ns.La&&xs(js,wo,Nn,Os),0<fr&&eu(js,wo,Nn,Os+4),Ns.La&&eA(js,wo,Nn,Os);else{var Go=is.B,ou=is.qa,oA=is.ra+8*Ts*Go+8*Qn,lu=is.Ha,is=is.Ia+8*Ts*Go+8*Qn;Ts=Ns.ld,0<Qn&&(bl(js,wo,Nn,Os+4,Bn,Ts),Xc(ou,oA,lu,is,Go,Os+4,Bn,Ts)),Ns.La&&(Zc(js,wo,Nn,Os,Bn,Ts),nd(ou,oA,lu,is,Go,Os,Bn,Ts)),0<fr&&(Ju(js,wo,Nn,Os+4,Bn,Ts),rd(ou,oA,lu,is,Go,Os+4,Bn,Ts)),Ns.La&&(Jc(js,wo,Nn,Os,Bn,Ts),Zu(ou,oA,lu,is,Go,Os,Bn,Ts))}}if(Me.ia&&alert("todo:DitherRow"),Oe.put!=null){if(Ir=16*vn,vn=16*(vn+1),va?(Oe.y=Me.sa,Oe.O=Me.ta+Un,Oe.f=Me.qa,Oe.N=Me.ra+mn,Oe.ea=Me.Ha,Oe.W=Me.Ia+mn):(Ir-=Qr,Oe.y=jt,Oe.O=sr,Oe.f=Ht,Oe.N=ft,Oe.ea=xn,Oe.W=Tn),qr||(vn-=Qr),vn>Oe.o&&(vn=Oe.o),Oe.F=null,Oe.J=null,Me.Fa!=null&&0<Me.Fa.length&&Ir<vn&&(Oe.J=zc(Me,Oe,Ir,vn-Ir),Oe.F=Me.mb,Oe.F==null&&Oe.F.length==0)){ut=Xn(Me,3,"Could not decode alpha data.");break e}Ir<Oe.j&&(Qr=Oe.j-Ir,Ir=Oe.j,e(!(1&Qr)),Oe.O+=Me.R*Qr,Oe.N+=Me.B*(Qr>>1),Oe.W+=Me.B*(Qr>>1),Oe.F!=null&&(Oe.J+=Oe.width*Qr)),Ir<vn&&(Oe.O+=Oe.v,Oe.N+=Oe.v>>1,Oe.W+=Oe.v>>1,Oe.F!=null&&(Oe.J+=Oe.v),Oe.ka=Ir-Oe.j,Oe.U=Oe.va-Oe.v,Oe.T=vn-Ir,ut=Oe.put(Oe))}it+1!=Me.Ic||qr||(n(Me.sa,Me.ta-vt,jt,sr+16*Me.R,vt),n(Me.qa,Me.ra-Kt,Ht,ft+8*Me.B,Kt),n(Me.Ha,Me.Ia-Kt,xn,Tn+8*Me.B,Kt))}if(!ut)return Xn(Ge,6,"Output aborted.")}return 1}(S,U)),U.bc!=null&&U.bc(U),K&=1}return K?(S.cb=0,K):0}function ka(S,U,K,ne,ue){ue=S[U+K+32*ne]+(ue>>3),S[U+K+32*ne]=-256&ue?0>ue?0:255:ue}function Oc(S,U,K,ne,ue,me){ka(S,U,0,K,ne+ue),ka(S,U,1,K,ne+me),ka(S,U,2,K,ne-me),ka(S,U,3,K,ne-ue)}function hn(S){return(20091*S>>16)+S}function Ia(S,U,K,ne){var ue,me=0,ge=a(16);for(ue=0;4>ue;++ue){var ve=S[U+0]+S[U+8],Ce=S[U+0]-S[U+8],Be=(35468*S[U+4]>>16)-hn(S[U+12]),Ue=hn(S[U+4])+(35468*S[U+12]>>16);ge[me+0]=ve+Ue,ge[me+1]=Ce+Be,ge[me+2]=Ce-Be,ge[me+3]=ve-Ue,me+=4,U++}for(ue=me=0;4>ue;++ue)ve=(S=ge[me+0]+4)+ge[me+8],Ce=S-ge[me+8],Be=(35468*ge[me+4]>>16)-hn(ge[me+12]),ka(K,ne,0,0,ve+(Ue=hn(ge[me+4])+(35468*ge[me+12]>>16))),ka(K,ne,1,0,Ce+Be),ka(K,ne,2,0,Ce-Be),ka(K,ne,3,0,ve-Ue),me++,ne+=32}function ul(S,U,K,ne){var ue=S[U+0]+4,me=35468*S[U+4]>>16,ge=hn(S[U+4]),ve=35468*S[U+1]>>16;Oc(K,ne,0,ue+ge,S=hn(S[U+1]),ve),Oc(K,ne,1,ue+me,S,ve),Oc(K,ne,2,ue-me,S,ve),Oc(K,ne,3,ue-ge,S,ve)}function Al(S,U,K,ne,ue){Ia(S,U,K,ne),ue&&Ia(S,U+16,K,ne+4)}function lo(S,U,K,ne){Ho(S,U+0,K,ne,1),Ho(S,U+32,K,ne+128,1)}function _n(S,U,K,ne){var ue;for(S=S[U+0]+4,ue=0;4>ue;++ue)for(U=0;4>U;++U)ka(K,ne,U,ue,S)}function dl(S,U,K,ne){S[U+0]&&Ps(S,U+0,K,ne),S[U+16]&&Ps(S,U+16,K,ne+4),S[U+32]&&Ps(S,U+32,K,ne+128),S[U+48]&&Ps(S,U+48,K,ne+128+4)}function gi(S,U,K,ne){var ue,me=a(16);for(ue=0;4>ue;++ue){var ge=S[U+0+ue]+S[U+12+ue],ve=S[U+4+ue]+S[U+8+ue],Ce=S[U+4+ue]-S[U+8+ue],Be=S[U+0+ue]-S[U+12+ue];me[0+ue]=ge+ve,me[8+ue]=ge-ve,me[4+ue]=Be+Ce,me[12+ue]=Be-Ce}for(ue=0;4>ue;++ue)ge=(S=me[0+4*ue]+3)+me[3+4*ue],ve=me[1+4*ue]+me[2+4*ue],Ce=me[1+4*ue]-me[2+4*ue],Be=S-me[3+4*ue],K[ne+0]=ge+ve>>3,K[ne+16]=Be+Ce>>3,K[ne+32]=ge-ve>>3,K[ne+48]=Be-Ce>>3,ne+=64}function Ro(S,U,K){var ne,ue=U-32,me=ga,ge=255-S[ue-1];for(ne=0;ne<K;++ne){var ve,Ce=me,Be=ge+S[U-1];for(ve=0;ve<K;++ve)S[U+ve]=Ce[Be+S[ue+ve]];U+=32}}function YA(S,U){Ro(S,U,4)}function Gu(S,U){Ro(S,U,8)}function zu(S,U){Ro(S,U,16)}function Lo(S,U){var K;for(K=0;16>K;++K)n(S,U+32*K,S,U-32,16)}function Qc(S,U){var K;for(K=16;0<K;--K)s(S,U,S[U-1],16),U+=32}function Uo(S,U,K){var ne;for(ne=0;16>ne;++ne)s(U,K+32*ne,S,16)}function co(S,U){var K,ne=16;for(K=0;16>K;++K)ne+=S[U-1+32*K]+S[U+K-32];Uo(ne>>5,S,U)}function On(S,U){var K,ne=8;for(K=0;16>K;++K)ne+=S[U-1+32*K];Uo(ne>>4,S,U)}function Mo(S,U){var K,ne=8;for(K=0;16>K;++K)ne+=S[U+K-32];Uo(ne>>4,S,U)}function uo(S,U){Uo(128,S,U)}function hr(S,U,K){return S+2*U+K+2>>2}function Ao(S,U){var K,ne=U-32;for(ne=new Uint8Array([hr(S[ne-1],S[ne+0],S[ne+1]),hr(S[ne+0],S[ne+1],S[ne+2]),hr(S[ne+1],S[ne+2],S[ne+3]),hr(S[ne+2],S[ne+3],S[ne+4])]),K=0;4>K;++K)n(S,U+32*K,ne,0,ne.length)}function XA(S,U){var K=S[U-1],ne=S[U-1+32],ue=S[U-1+64],me=S[U-1+96];xe(S,U+0,16843009*hr(S[U-1-32],K,ne)),xe(S,U+32,16843009*hr(K,ne,ue)),xe(S,U+64,16843009*hr(ne,ue,me)),xe(S,U+96,16843009*hr(ue,me,me))}function ja(S,U){var K,ne=4;for(K=0;4>K;++K)ne+=S[U+K-32]+S[U-1+32*K];for(ne>>=3,K=0;4>K;++K)s(S,U+32*K,ne,4)}function xi(S,U){var K=S[U-1+0],ne=S[U-1+32],ue=S[U-1+64],me=S[U-1-32],ge=S[U+0-32],ve=S[U+1-32],Ce=S[U+2-32],Be=S[U+3-32];S[U+0+96]=hr(ne,ue,S[U-1+96]),S[U+1+96]=S[U+0+64]=hr(K,ne,ue),S[U+2+96]=S[U+1+64]=S[U+0+32]=hr(me,K,ne),S[U+3+96]=S[U+2+64]=S[U+1+32]=S[U+0+0]=hr(ge,me,K),S[U+3+64]=S[U+2+32]=S[U+1+0]=hr(ve,ge,me),S[U+3+32]=S[U+2+0]=hr(Ce,ve,ge),S[U+3+0]=hr(Be,Ce,ve)}function ei(S,U){var K=S[U+1-32],ne=S[U+2-32],ue=S[U+3-32],me=S[U+4-32],ge=S[U+5-32],ve=S[U+6-32],Ce=S[U+7-32];S[U+0+0]=hr(S[U+0-32],K,ne),S[U+1+0]=S[U+0+32]=hr(K,ne,ue),S[U+2+0]=S[U+1+32]=S[U+0+64]=hr(ne,ue,me),S[U+3+0]=S[U+2+32]=S[U+1+64]=S[U+0+96]=hr(ue,me,ge),S[U+3+32]=S[U+2+64]=S[U+1+96]=hr(me,ge,ve),S[U+3+64]=S[U+2+96]=hr(ge,ve,Ce),S[U+3+96]=hr(ve,Ce,Ce)}function fo(S,U){var K=S[U-1+0],ne=S[U-1+32],ue=S[U-1+64],me=S[U-1-32],ge=S[U+0-32],ve=S[U+1-32],Ce=S[U+2-32],Be=S[U+3-32];S[U+0+0]=S[U+1+64]=me+ge+1>>1,S[U+1+0]=S[U+2+64]=ge+ve+1>>1,S[U+2+0]=S[U+3+64]=ve+Ce+1>>1,S[U+3+0]=Ce+Be+1>>1,S[U+0+96]=hr(ue,ne,K),S[U+0+64]=hr(ne,K,me),S[U+0+32]=S[U+1+96]=hr(K,me,ge),S[U+1+32]=S[U+2+96]=hr(me,ge,ve),S[U+2+32]=S[U+3+96]=hr(ge,ve,Ce),S[U+3+32]=hr(ve,Ce,Be)}function vi(S,U){var K=S[U+0-32],ne=S[U+1-32],ue=S[U+2-32],me=S[U+3-32],ge=S[U+4-32],ve=S[U+5-32],Ce=S[U+6-32],Be=S[U+7-32];S[U+0+0]=K+ne+1>>1,S[U+1+0]=S[U+0+64]=ne+ue+1>>1,S[U+2+0]=S[U+1+64]=ue+me+1>>1,S[U+3+0]=S[U+2+64]=me+ge+1>>1,S[U+0+32]=hr(K,ne,ue),S[U+1+32]=S[U+0+96]=hr(ne,ue,me),S[U+2+32]=S[U+1+96]=hr(ue,me,ge),S[U+3+32]=S[U+2+96]=hr(me,ge,ve),S[U+3+64]=hr(ge,ve,Ce),S[U+3+96]=hr(ve,Ce,Be)}function fl(S,U){var K=S[U-1+0],ne=S[U-1+32],ue=S[U-1+64],me=S[U-1+96];S[U+0+0]=K+ne+1>>1,S[U+2+0]=S[U+0+32]=ne+ue+1>>1,S[U+2+32]=S[U+0+64]=ue+me+1>>1,S[U+1+0]=hr(K,ne,ue),S[U+3+0]=S[U+1+32]=hr(ne,ue,me),S[U+3+32]=S[U+1+64]=hr(ue,me,me),S[U+3+64]=S[U+2+64]=S[U+0+96]=S[U+1+96]=S[U+2+96]=S[U+3+96]=me}function Po(S,U){var K=S[U-1+0],ne=S[U-1+32],ue=S[U-1+64],me=S[U-1+96],ge=S[U-1-32],ve=S[U+0-32],Ce=S[U+1-32],Be=S[U+2-32];S[U+0+0]=S[U+2+32]=K+ge+1>>1,S[U+0+32]=S[U+2+64]=ne+K+1>>1,S[U+0+64]=S[U+2+96]=ue+ne+1>>1,S[U+0+96]=me+ue+1>>1,S[U+3+0]=hr(ve,Ce,Be),S[U+2+0]=hr(ge,ve,Ce),S[U+1+0]=S[U+3+32]=hr(K,ge,ve),S[U+1+32]=S[U+3+64]=hr(ne,K,ge),S[U+1+64]=S[U+3+96]=hr(ue,ne,K),S[U+1+96]=hr(me,ue,ne)}function qu(S,U){var K;for(K=0;8>K;++K)n(S,U+32*K,S,U-32,8)}function yi(S,U){var K;for(K=0;8>K;++K)s(S,U,S[U-1],8),U+=32}function Oa(S,U,K){var ne;for(ne=0;8>ne;++ne)s(U,K+32*ne,S,8)}function ho(S,U){var K,ne=8;for(K=0;8>K;++K)ne+=S[U+K-32]+S[U-1+32*K];Oa(ne>>4,S,U)}function Us(S,U){var K,ne=4;for(K=0;8>K;++K)ne+=S[U+K-32];Oa(ne>>3,S,U)}function Jr(S,U){var K,ne=4;for(K=0;8>K;++K)ne+=S[U-1+32*K];Oa(ne>>3,S,U)}function hl(S,U){Oa(128,S,U)}function mo(S,U,K){var ne=S[U-K],ue=S[U+0],me=3*(ue-ne)+t0[1020+S[U-2*K]-S[U+K]],ge=tA[112+(me+4>>3)];S[U-K]=ga[255+ne+tA[112+(me+3>>3)]],S[U+0]=ga[255+ue-ge]}function Ku(S,U,K,ne){var ue=S[U+0],me=S[U+K];return vo[255+S[U-2*K]-S[U-K]]>ne||vo[255+me-ue]>ne}function Xl(S,U,K,ne){return 4*vo[255+S[U-K]-S[U+0]]+vo[255+S[U-2*K]-S[U+K]]<=ne}function Jl(S,U,K,ne,ue){var me=S[U-3*K],ge=S[U-2*K],ve=S[U-K],Ce=S[U+0],Be=S[U+K],Ue=S[U+2*K],Xe=S[U+3*K];return 4*vo[255+ve-Ce]+vo[255+ge-Be]>ne?0:vo[255+S[U-4*K]-me]<=ue&&vo[255+me-ge]<=ue&&vo[255+ge-ve]<=ue&&vo[255+Xe-Ue]<=ue&&vo[255+Ue-Be]<=ue&&vo[255+Be-Ce]<=ue}function Xi(S,U,K,ne){var ue=2*ne+1;for(ne=0;16>ne;++ne)Xl(S,U+ne,K,ue)&&mo(S,U+ne,K)}function Qa(S,U,K,ne){var ue=2*ne+1;for(ne=0;16>ne;++ne)Xl(S,U+ne*K,1,ue)&&mo(S,U+ne*K,1)}function Ms(S,U,K,ne){var ue;for(ue=3;0<ue;--ue)Xi(S,U+=4*K,K,ne)}function JA(S,U,K,ne){var ue;for(ue=3;0<ue;--ue)Qa(S,U+=4,K,ne)}function ml(S,U,K,ne,ue,me,ge,ve){for(me=2*me+1;0<ue--;){if(Jl(S,U,K,me,ge))if(Ku(S,U,K,ve))mo(S,U,K);else{var Ce=S,Be=U,Ue=K,Xe=Ce[Be-2*Ue],$e=Ce[Be-Ue],Ge=Ce[Be+0],gt=Ce[Be+Ue],it=Ce[Be+2*Ue],Me=27*(ut=t0[1020+3*(Ge-$e)+t0[1020+Xe-gt]])+63>>7,Oe=18*ut+63>>7,ut=9*ut+63>>7;Ce[Be-3*Ue]=ga[255+Ce[Be-3*Ue]+ut],Ce[Be-2*Ue]=ga[255+Xe+Oe],Ce[Be-Ue]=ga[255+$e+Me],Ce[Be+0]=ga[255+Ge-Me],Ce[Be+Ue]=ga[255+gt-Oe],Ce[Be+2*Ue]=ga[255+it-ut]}U+=ne}}function Fa(S,U,K,ne,ue,me,ge,ve){for(me=2*me+1;0<ue--;){if(Jl(S,U,K,me,ge))if(Ku(S,U,K,ve))mo(S,U,K);else{var Ce=S,Be=U,Ue=K,Xe=Ce[Be-Ue],$e=Ce[Be+0],Ge=Ce[Be+Ue],gt=tA[112+((it=3*($e-Xe))+4>>3)],it=tA[112+(it+3>>3)],Me=gt+1>>1;Ce[Be-2*Ue]=ga[255+Ce[Be-2*Ue]+Me],Ce[Be-Ue]=ga[255+Xe+it],Ce[Be+0]=ga[255+$e-gt],Ce[Be+Ue]=ga[255+Ge-Me]}U+=ne}}function pl(S,U,K,ne,ue,me){ml(S,U,K,1,16,ne,ue,me)}function jo(S,U,K,ne,ue,me){ml(S,U,1,K,16,ne,ue,me)}function Hc(S,U,K,ne,ue,me){var ge;for(ge=3;0<ge;--ge)Fa(S,U+=4*K,K,1,16,ne,ue,me)}function Zl(S,U,K,ne,ue,me){var ge;for(ge=3;0<ge;--ge)Fa(S,U+=4,1,K,16,ne,ue,me)}function Vc(S,U,K,ne,ue,me,ge,ve){ml(S,U,ue,1,8,me,ge,ve),ml(K,ne,ue,1,8,me,ge,ve)}function $u(S,U,K,ne,ue,me,ge,ve){ml(S,U,1,ue,8,me,ge,ve),ml(K,ne,1,ue,8,me,ge,ve)}function ec(S,U,K,ne,ue,me,ge,ve){Fa(S,U+4*ue,ue,1,8,me,ge,ve),Fa(K,ne+4*ue,ue,1,8,me,ge,ve)}function gl(S,U,K,ne,ue,me,ge,ve){Fa(S,U+4,1,ue,8,me,ge,ve),Fa(K,ne+4,1,ue,8,me,ge,ve)}function tc(){this.ba=new ns,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Pr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Gc(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function rc(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function xl(){this.ua=0,this.Wa=new be,this.vb=new be,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new G,this.yc=new I}function ZA(){this.xb=this.a=0,this.l=new $s,this.ca=new ns,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new P,this.Pb=0,this.wd=new P,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new xl,this.ab=0,this.gc=i(4,rc),this.Oc=0}function Oo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new $s,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function vl(S,U,K,ne,ue,me,ge){for(S=S==null?0:S[U+0],U=0;U<ge;++U)ue[me+U]=S+K[ne+U]&255,S=ue[me+U]}function nc(S,U,K,ne,ue,me,ge){var ve;if(S==null)vl(null,null,K,ne,ue,me,ge);else for(ve=0;ve<ge;++ve)ue[me+ve]=S[U+ve]+K[ne+ve]&255}function Ha(S,U,K,ne,ue,me,ge){if(S==null)vl(null,null,K,ne,ue,me,ge);else{var ve,Ce=S[U+0],Be=Ce,Ue=Ce;for(ve=0;ve<ge;++ve)Be=Ue+(Ce=S[U+ve])-Be,Ue=K[ne+ve]+(-256&Be?0>Be?0:255:Be)&255,Be=Ce,ue[me+ve]=Ue}}function zc(S,U,K,ne){var ue=U.width,me=U.o;if(e(S!=null&&U!=null),0>K||0>=ne||K+ne>me)return null;if(!S.Cc){if(S.ga==null){var ge;if(S.ga=new Oo,(ge=S.ga==null)||(ge=U.width*U.o,e(S.Gb.length==0),S.Gb=a(ge),S.Uc=0,S.Gb==null?ge=0:(S.mb=S.Gb,S.nb=S.Uc,S.rc=null,ge=1),ge=!ge),!ge){ge=S.ga;var ve=S.Fa,Ce=S.P,Be=S.qc,Ue=S.mb,Xe=S.nb,$e=Ce+1,Ge=Be-1,gt=ge.l;if(e(ve!=null&&Ue!=null&&U!=null),_l[0]=null,_l[1]=vl,_l[2]=nc,_l[3]=Ha,ge.ca=Ue,ge.tb=Xe,ge.c=U.width,ge.i=U.height,e(0<ge.c&&0<ge.i),1>=Be)U=0;else if(ge.$a=ve[Ce+0]>>0&3,ge.Z=ve[Ce+0]>>2&3,ge.Lc=ve[Ce+0]>>4&3,Ce=ve[Ce+0]>>6&3,0>ge.$a||1<ge.$a||4<=ge.Z||1<ge.Lc||Ce)U=0;else if(gt.put=Es,gt.ac=Wn,gt.bc=Na,gt.ma=ge,gt.width=U.width,gt.height=U.height,gt.Da=U.Da,gt.v=U.v,gt.va=U.va,gt.j=U.j,gt.o=U.o,ge.$a)e:{e(ge.$a==1),U=rt();t:for(;;){if(U==null){U=0;break e}if(e(ge!=null),ge.mc=U,U.c=ge.c,U.i=ge.i,U.l=ge.l,U.l.ma=ge,U.l.width=ge.c,U.l.height=ge.i,U.a=0,q(U.m,ve,$e,Ge),!He(ge.c,ge.i,1,U,null)||(U.ab==1&&U.gc[0].hc==3&&_e(U.s)?(ge.ic=1,ve=U.c*U.i,U.Ta=null,U.Ua=0,U.V=a(ve),U.Ba=0,U.V==null?(U.a=1,U=0):U=1):(ge.ic=0,U=We(U,ge.c)),!U))break t;U=1;break e}ge.mc=null,U=0}else U=Ge>=ge.c*ge.i;ge=!U}if(ge)return null;S.ga.Lc!=1?S.Ga=0:ne=me-K}e(S.ga!=null),e(K+ne<=me);e:{if(U=(ve=S.ga).c,me=ve.l.o,ve.$a==0){if($e=S.rc,Ge=S.Vc,gt=S.Fa,Ce=S.P+1+K*U,Be=S.mb,Ue=S.nb+K*U,e(Ce<=S.P+S.qc),ve.Z!=0)for(e(_l[ve.Z]!=null),ge=0;ge<ne;++ge)_l[ve.Z]($e,Ge,gt,Ce,Be,Ue,U),$e=Be,Ge=Ue,Ue+=U,Ce+=U;else for(ge=0;ge<ne;++ge)n(Be,Ue,gt,Ce,U),$e=Be,Ge=Ue,Ue+=U,Ce+=U;S.rc=$e,S.Vc=Ge}else{if(e(ve.mc!=null),U=K+ne,e((ge=ve.mc)!=null),e(U<=ge.i),ge.C>=U)U=1;else if(ve.ic||Ve(),ve.ic){ve=ge.V,$e=ge.Ba,Ge=ge.c;var it=ge.i,Me=(gt=1,Ce=ge.$/Ge,Be=ge.$%Ge,Ue=ge.m,Xe=ge.s,ge.$),Oe=Ge*it,ut=Ge*U,vt=Xe.wc,ft=Me<ut?Yn(Xe,Be,Ce):null;e(Me<=Oe),e(U<=it),e(_e(Xe));t:for(;;){for(;!Ue.h&&Me<ut;){if(Be&vt||(ft=Yn(Xe,Be,Ce)),e(ft!=null),ce(Ue),256>(it=Rn(ft.G[0],ft.H[0],Ue)))ve[$e+Me]=it,++Me,++Be>=Ge&&(Be=0,++Ce<=U&&!(Ce%16)&&Ne(ge,Ce));else{if(!(280>it)){gt=0;break t}it=fn(it-256,Ue);var Kt,jt=Rn(ft.G[4],ft.H[4],Ue);if(ce(Ue),!(Me>=(jt=sn(Ge,jt=fn(jt,Ue)))&&Oe-Me>=it)){gt=0;break t}for(Kt=0;Kt<it;++Kt)ve[$e+Me+Kt]=ve[$e+Me+Kt-jt];for(Me+=it,Be+=it;Be>=Ge;)Be-=Ge,++Ce<=U&&!(Ce%16)&&Ne(ge,Ce);Me<ut&&Be&vt&&(ft=Yn(Xe,Be,Ce))}e(Ue.h==Z(Ue))}Ne(ge,Ce>U?U:Ce);break t}!gt||Ue.h&&Me<Oe?(gt=0,ge.a=Ue.h?5:3):ge.$=Me,U=gt}else U=Ie(ge,ge.V,ge.Ba,ge.c,ge.i,U,Je);if(!U){ne=0;break e}}K+ne>=me&&(S.Cc=1),ne=1}if(!ne)return null;if(S.Cc&&((ne=S.ga)!=null&&(ne.mc=null),S.ga=null,0<S.Ga))return alert("todo:WebPDequantizeLevels"),null}return S.nb+K*ue}function V(S,U,K,ne,ue,me){for(;0<ue--;){var ge,ve=S,Ce=U+(K?1:0),Be=S,Ue=U+(K?0:3);for(ge=0;ge<ne;++ge){var Xe=Be[Ue+4*ge];Xe!=255&&(Xe*=32897,ve[Ce+4*ge+0]=ve[Ce+4*ge+0]*Xe>>23,ve[Ce+4*ge+1]=ve[Ce+4*ge+1]*Xe>>23,ve[Ce+4*ge+2]=ve[Ce+4*ge+2]*Xe>>23)}U+=me}}function Ae(S,U,K,ne,ue){for(;0<ne--;){var me;for(me=0;me<K;++me){var ge=S[U+2*me+0],ve=15&(Be=S[U+2*me+1]),Ce=4369*ve,Be=(240&Be|Be>>4)*Ce>>16;S[U+2*me+0]=(240&ge|ge>>4)*Ce>>16&240|(15&ge|ge<<4)*Ce>>16>>4&15,S[U+2*me+1]=240&Be|ve}U+=ue}}function Fe(S,U,K,ne,ue,me,ge,ve){var Ce,Be,Ue=255;for(Be=0;Be<ue;++Be){for(Ce=0;Ce<ne;++Ce){var Xe=S[U+Ce];me[ge+4*Ce]=Xe,Ue&=Xe}U+=K,ge+=ve}return Ue!=255}function Re(S,U,K,ne,ue){var me;for(me=0;me<ue;++me)K[ne+me]=S[U+me]>>8}function Ve(){Ji=V,$r=Ae,Wr=Fe,Jn=Re}function ot(S,U,K){E[S]=function(ne,ue,me,ge,ve,Ce,Be,Ue,Xe,$e,Ge,gt,it,Me,Oe,ut,vt){var ft,Kt=vt-1>>1,jt=ve[Ce+0]|Be[Ue+0]<<16,sr=Xe[$e+0]|Ge[gt+0]<<16;e(ne!=null);var Ht=3*jt+sr+131074>>2;for(U(ne[ue+0],255&Ht,Ht>>16,it,Me),me!=null&&(Ht=3*sr+jt+131074>>2,U(me[ge+0],255&Ht,Ht>>16,Oe,ut)),ft=1;ft<=Kt;++ft){var xn=ve[Ce+ft]|Be[Ue+ft]<<16,Tn=Xe[$e+ft]|Ge[gt+ft]<<16,qr=jt+xn+sr+Tn+524296,Qr=qr+2*(xn+sr)>>3;Ht=Qr+jt>>1,jt=(qr=qr+2*(jt+Tn)>>3)+xn>>1,U(ne[ue+2*ft-1],255&Ht,Ht>>16,it,Me+(2*ft-1)*K),U(ne[ue+2*ft-0],255&jt,jt>>16,it,Me+(2*ft-0)*K),me!=null&&(Ht=qr+sr>>1,jt=Qr+Tn>>1,U(me[ge+2*ft-1],255&Ht,Ht>>16,Oe,ut+(2*ft-1)*K),U(me[ge+2*ft+0],255&jt,jt>>16,Oe,ut+(2*ft+0)*K)),jt=xn,sr=Tn}1&vt||(Ht=3*jt+sr+131074>>2,U(ne[ue+vt-1],255&Ht,Ht>>16,it,Me+(vt-1)*K),me!=null&&(Ht=3*sr+jt+131074>>2,U(me[ge+vt-1],255&Ht,Ht>>16,Oe,ut+(vt-1)*K)))}}function _t(){xa[Va]=dc,xa[sd]=Sl,xa[Cl]=au,xa[Lf]=s0,xa[rA]=a0,xa[oc]=od,xa[r0]=i0,xa[Uf]=Sl,xa[nu]=s0,xa[lc]=a0,xa[ad]=od}function Qt(S){return S&-16384?0>S?0:255:S>>Db}function T(S,U){return Qt((19077*S>>8)+(26149*U>>8)-14234)}function X(S,U,K){return Qt((19077*S>>8)-(6419*U>>8)-(13320*K>>8)+8708)}function ae(S,U){return Qt((19077*S>>8)+(33050*U>>8)-17685)}function ye(S,U,K,ne,ue){ne[ue+0]=T(S,K),ne[ue+1]=X(S,U,K),ne[ue+2]=ae(S,U)}function Qe(S,U,K,ne,ue){ne[ue+0]=ae(S,U),ne[ue+1]=X(S,U,K),ne[ue+2]=T(S,K)}function Ze(S,U,K,ne,ue){var me=X(S,U,K);U=me<<3&224|ae(S,U)>>3,ne[ue+0]=248&T(S,K)|me>>5,ne[ue+1]=U}function St(S,U,K,ne,ue){var me=240&ae(S,U)|15;ne[ue+0]=240&T(S,K)|X(S,U,K)>>4,ne[ue+1]=me}function mr(S,U,K,ne,ue){ne[ue+0]=255,ye(S,U,K,ne,ue+1)}function Zr(S,U,K,ne,ue){Qe(S,U,K,ne,ue),ne[ue+3]=255}function kr(S,U,K,ne,ue){ye(S,U,K,ne,ue),ne[ue+3]=255}function Sn(S,U){return 0>S?0:S>U?U:S}function Ln(S,U,K){E[S]=function(ne,ue,me,ge,ve,Ce,Be,Ue,Xe){for(var $e=Ue+(-2&Xe)*K;Ue!=$e;)U(ne[ue+0],me[ge+0],ve[Ce+0],Be,Ue),U(ne[ue+1],me[ge+0],ve[Ce+0],Be,Ue+K),ue+=2,++ge,++Ce,Ue+=2*K;1&Xe&&U(ne[ue+0],me[ge+0],ve[Ce+0],Be,Ue)}}function po(S,U,K){return K==0?S==0?U==0?6:5:U==0?4:0:K}function _s(S,U,K,ne,ue){switch(S>>>30){case 3:Ho(U,K,ne,ue,0);break;case 2:gs(U,K,ne,ue);break;case 1:Ps(U,K,ne,ue)}}function wi(S,U){var K,ne,ue=U.M,me=U.Nb,ge=S.oc,ve=S.pc+40,Ce=S.oc,Be=S.pc+584,Ue=S.oc,Xe=S.pc+600;for(K=0;16>K;++K)ge[ve+32*K-1]=129;for(K=0;8>K;++K)Ce[Be+32*K-1]=129,Ue[Xe+32*K-1]=129;for(0<ue?ge[ve-1-32]=Ce[Be-1-32]=Ue[Xe-1-32]=129:(s(ge,ve-32-1,127,21),s(Ce,Be-32-1,127,9),s(Ue,Xe-32-1,127,9)),ne=0;ne<S.za;++ne){var $e=U.ya[U.aa+ne];if(0<ne){for(K=-1;16>K;++K)n(ge,ve+32*K-4,ge,ve+32*K+12,4);for(K=-1;8>K;++K)n(Ce,Be+32*K-4,Ce,Be+32*K+4,4),n(Ue,Xe+32*K-4,Ue,Xe+32*K+4,4)}var Ge=S.Gd,gt=S.Hd+ne,it=$e.ad,Me=$e.Hc;if(0<ue&&(n(ge,ve-32,Ge[gt].y,0,16),n(Ce,Be-32,Ge[gt].f,0,8),n(Ue,Xe-32,Ge[gt].ea,0,8)),$e.Za){var Oe=ge,ut=ve-32+16;for(0<ue&&(ne>=S.za-1?s(Oe,ut,Ge[gt].y[15],4):n(Oe,ut,Ge[gt+1].y,0,4)),K=0;4>K;K++)Oe[ut+128+K]=Oe[ut+256+K]=Oe[ut+384+K]=Oe[ut+0+K];for(K=0;16>K;++K,Me<<=2)Oe=ge,ut=ve+iA[K],ri[$e.Ob[K]](Oe,ut),_s(Me,it,16*+K,Oe,ut)}else if(Oe=po(ne,ue,$e.Ob[0]),Ac[Oe](ge,ve),Me!=0)for(K=0;16>K;++K,Me<<=2)_s(Me,it,16*+K,ge,ve+iA[K]);for(K=$e.Gc,Oe=po(ne,ue,$e.Dd),eo[Oe](Ce,Be),eo[Oe](Ue,Xe),Me=it,Oe=Ce,ut=Be,255&($e=K>>0)&&(170&$e?Vo(Me,256,Oe,ut):Ei(Me,256,Oe,ut)),$e=Ue,Me=Xe,255&(K>>=8)&&(170&K?Vo(it,320,$e,Me):Ei(it,320,$e,Me)),ue<S.Ub-1&&(n(Ge[gt].y,0,ge,ve+480,16),n(Ge[gt].f,0,Ce,Be+224,8),n(Ge[gt].ea,0,Ue,Xe+224,8)),K=8*me*S.B,Ge=S.sa,gt=S.ta+16*ne+16*me*S.R,it=S.qa,$e=S.ra+8*ne+K,Me=S.Ha,Oe=S.Ia+8*ne+K,K=0;16>K;++K)n(Ge,gt+K*S.R,ge,ve+32*K,16);for(K=0;8>K;++K)n(it,$e+K*S.B,Ce,Be+32*K,8),n(Me,Oe+K*S.B,Ue,Xe+32*K,8)}}function yl(S,U,K,ne,ue,me,ge,ve,Ce){var Be=[0],Ue=[0],Xe=0,$e=Ce!=null?Ce.kd:0,Ge=Ce??new Gc;if(S==null||12>K)return 7;Ge.data=S,Ge.w=U,Ge.ha=K,U=[U],K=[K],Ge.gb=[Ge.gb];e:{var gt=U,it=K,Me=Ge.gb;if(e(S!=null),e(it!=null),e(Me!=null),Me[0]=0,12<=it[0]&&!r(S,gt[0],"RIFF")){if(r(S,gt[0]+8,"WEBP")){Me=3;break e}var Oe=Le(S,gt[0]+4);if(12>Oe||4294967286<Oe){Me=3;break e}if($e&&Oe>it[0]-8){Me=7;break e}Me[0]=Oe,gt[0]+=12,it[0]-=12}Me=0}if(Me!=0)return Me;for(Oe=0<Ge.gb[0],K=K[0];;){e:{var ut=S;it=U,Me=K;var vt=Be,ft=Ue,Kt=gt=[0];if((Ht=Xe=[Xe])[0]=0,8>Me[0])Me=7;else{if(!r(ut,it[0],"VP8X")){if(Le(ut,it[0]+4)!=10){Me=3;break e}if(18>Me[0]){Me=7;break e}var jt=Le(ut,it[0]+8),sr=1+oe(ut,it[0]+12);if(2147483648<=sr*(ut=1+oe(ut,it[0]+15))){Me=3;break e}Kt!=null&&(Kt[0]=jt),vt!=null&&(vt[0]=sr),ft!=null&&(ft[0]=ut),it[0]+=18,Me[0]-=18,Ht[0]=1}Me=0}}if(Xe=Xe[0],gt=gt[0],Me!=0)return Me;if(it=!!(2&gt),!Oe&&Xe)return 3;if(me!=null&&(me[0]=!!(16&gt)),ge!=null&&(ge[0]=it),ve!=null&&(ve[0]=0),ge=Be[0],gt=Ue[0],Xe&&it&&Ce==null){Me=0;break}if(4>K){Me=7;break}if(Oe&&Xe||!Oe&&!Xe&&!r(S,U[0],"ALPH")){K=[K],Ge.na=[Ge.na],Ge.P=[Ge.P],Ge.Sa=[Ge.Sa];e:{jt=S,Me=U,Oe=K;var Ht=Ge.gb;vt=Ge.na,ft=Ge.P,Kt=Ge.Sa,sr=22,e(jt!=null),e(Oe!=null),ut=Me[0];var xn=Oe[0];for(e(vt!=null),e(Kt!=null),vt[0]=null,ft[0]=null,Kt[0]=0;;){if(Me[0]=ut,Oe[0]=xn,8>xn){Me=7;break e}var Tn=Le(jt,ut+4);if(4294967286<Tn){Me=3;break e}var qr=8+Tn+1&-2;if(sr+=qr,0<Ht&&sr>Ht){Me=3;break e}if(!r(jt,ut,"VP8 ")||!r(jt,ut,"VP8L")){Me=0;break e}if(xn[0]<qr){Me=7;break e}r(jt,ut,"ALPH")||(vt[0]=jt,ft[0]=ut+8,Kt[0]=Tn),ut+=qr,xn-=qr}}if(K=K[0],Ge.na=Ge.na[0],Ge.P=Ge.P[0],Ge.Sa=Ge.Sa[0],Me!=0)break}K=[K],Ge.Ja=[Ge.Ja],Ge.xa=[Ge.xa];e:if(Ht=S,Me=U,Oe=K,vt=Ge.gb[0],ft=Ge.Ja,Kt=Ge.xa,jt=Me[0],ut=!r(Ht,jt,"VP8 "),sr=!r(Ht,jt,"VP8L"),e(Ht!=null),e(Oe!=null),e(ft!=null),e(Kt!=null),8>Oe[0])Me=7;else{if(ut||sr){if(Ht=Le(Ht,jt+4),12<=vt&&Ht>vt-12){Me=3;break e}if($e&&Ht>Oe[0]-8){Me=7;break e}ft[0]=Ht,Me[0]+=8,Oe[0]-=8,Kt[0]=sr}else Kt[0]=5<=Oe[0]&&Ht[jt+0]==47&&!(Ht[jt+4]>>5),ft[0]=Oe[0];Me=0}if(K=K[0],Ge.Ja=Ge.Ja[0],Ge.xa=Ge.xa[0],U=U[0],Me!=0)break;if(4294967286<Ge.Ja)return 3;if(ve==null||it||(ve[0]=Ge.xa?2:1),ge=[ge],gt=[gt],Ge.xa){if(5>K){Me=7;break}ve=ge,$e=gt,it=me,S==null||5>K?S=0:5<=K&&S[U+0]==47&&!(S[U+4]>>5)?(Oe=[0],Ht=[0],vt=[0],q(ft=new P,S,U,K),zt(ft,Oe,Ht,vt)?(ve!=null&&(ve[0]=Oe[0]),$e!=null&&($e[0]=Ht[0]),it!=null&&(it[0]=vt[0]),S=1):S=0):S=0}else{if(10>K){Me=7;break}ve=gt,S==null||10>K||!ma(S,U+3,K-3)?S=0:($e=S[U+0]|S[U+1]<<8|S[U+2]<<16,it=16383&(S[U+7]<<8|S[U+6]),S=16383&(S[U+9]<<8|S[U+8]),1&$e||3<($e>>1&7)||!($e>>4&1)||$e>>5>=Ge.Ja||!it||!S?S=0:(ge&&(ge[0]=it),ve&&(ve[0]=S),S=1))}if(!S||(ge=ge[0],gt=gt[0],Xe&&(Be[0]!=ge||Ue[0]!=gt)))return 3;Ce!=null&&(Ce[0]=Ge,Ce.offset=U-Ce.w,e(4294967286>U-Ce.w),e(Ce.offset==Ce.ha-K));break}return Me==0||Me==7&&Xe&&Ce==null?(me!=null&&(me[0]|=Ge.na!=null&&0<Ge.na.length),ne!=null&&(ne[0]=ge),ue!=null&&(ue[0]=gt),0):Me}function qc(S,U,K){var ne=U.width,ue=U.height,me=0,ge=0,ve=ne,Ce=ue;if(U.Da=S!=null&&0<S.Da,U.Da&&(ve=S.cd,Ce=S.bd,me=S.v,ge=S.j,11>K||(me&=-2,ge&=-2),0>me||0>ge||0>=ve||0>=Ce||me+ve>ne||ge+Ce>ue))return 0;if(U.v=me,U.j=ge,U.va=me+ve,U.o=ge+Ce,U.U=ve,U.T=Ce,U.da=S!=null&&0<S.da,U.da){if(!je(ve,Ce,K=[S.ib],me=[S.hb]))return 0;U.ib=K[0],U.hb=me[0]}return U.ob=S!=null&&S.ob,U.Kb=S==null||!S.Sd,U.da&&(U.ob=U.ib<3*ne/4&&U.hb<3*ue/4,U.Kb=0),1}function ed(S){if(S==null)return 2;if(11>S.S){var U=S.f.RGBA;U.fb+=(S.height-1)*U.A,U.A=-U.A}else U=S.f.kb,S=S.height,U.O+=(S-1)*U.fa,U.fa=-U.fa,U.N+=(S-1>>1)*U.Ab,U.Ab=-U.Ab,U.W+=(S-1>>1)*U.Db,U.Db=-U.Db,U.F!=null&&(U.J+=(S-1)*U.lb,U.lb=-U.lb);return 0}function Wu(S,U,K,ne){if(ne==null||0>=S||0>=U)return 2;if(K!=null){if(K.Da){var ue=K.cd,me=K.bd,ge=-2&K.v,ve=-2&K.j;if(0>ge||0>ve||0>=ue||0>=me||ge+ue>S||ve+me>U)return 2;S=ue,U=me}if(K.da){if(!je(S,U,ue=[K.ib],me=[K.hb]))return 2;S=ue[0],U=me[0]}}ne.width=S,ne.height=U;e:{var Ce=ne.width,Be=ne.height;if(S=ne.S,0>=Ce||0>=Be||!(S>=Va&&13>S))S=2;else{if(0>=ne.Rd&&ne.sd==null){ge=me=ue=U=0;var Ue=(ve=Ce*N1[S])*Be;if(11>S||(me=(Be+1)/2*(U=(Ce+1)/2),S==12&&(ge=(ue=Ce)*Be)),(Be=a(Ue+2*me+ge))==null){S=1;break e}ne.sd=Be,11>S?((Ce=ne.f.RGBA).eb=Be,Ce.fb=0,Ce.A=ve,Ce.size=Ue):((Ce=ne.f.kb).y=Be,Ce.O=0,Ce.fa=ve,Ce.Fd=Ue,Ce.f=Be,Ce.N=0+Ue,Ce.Ab=U,Ce.Cd=me,Ce.ea=Be,Ce.W=0+Ue+me,Ce.Db=U,Ce.Ed=me,S==12&&(Ce.F=Be,Ce.J=0+Ue+2*me),Ce.Tc=ge,Ce.lb=ue)}if(U=1,ue=ne.S,me=ne.width,ge=ne.height,ue>=Va&&13>ue)if(11>ue)S=ne.f.RGBA,U&=(ve=Math.abs(S.A))*(ge-1)+me<=S.size,U&=ve>=me*N1[ue],U&=S.eb!=null;else{S=ne.f.kb,ve=(me+1)/2,Ue=(ge+1)/2,Ce=Math.abs(S.fa),Be=Math.abs(S.Ab);var Xe=Math.abs(S.Db),$e=Math.abs(S.lb),Ge=$e*(ge-1)+me;U&=Ce*(ge-1)+me<=S.Fd,U&=Be*(Ue-1)+ve<=S.Cd,U=(U&=Xe*(Ue-1)+ve<=S.Ed)&Ce>=me&Be>=ve&Xe>=ve,U&=S.y!=null,U&=S.f!=null,U&=S.ea!=null,ue==12&&(U&=$e>=me,U&=Ge<=S.Tc,U&=S.F!=null)}else U=0;S=U?0:2}}return S!=0||K!=null&&K.fd&&(S=ed(ne)),S}var Ws=64,Kc=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Yu=24,Xu=32,td=8,bi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];mt("Predictor0","PredictorAdd0"),E.Predictor0=function(){return 4278190080},E.Predictor1=function(S){return S},E.Predictor2=function(S,U,K){return U[K+0]},E.Predictor3=function(S,U,K){return U[K+1]},E.Predictor4=function(S,U,K){return U[K-1]},E.Predictor5=function(S,U,K){return lt(lt(S,U[K+1]),U[K+0])},E.Predictor6=function(S,U,K){return lt(S,U[K-1])},E.Predictor7=function(S,U,K){return lt(S,U[K+0])},E.Predictor8=function(S,U,K){return lt(U[K-1],U[K+0])},E.Predictor9=function(S,U,K){return lt(U[K+0],U[K+1])},E.Predictor10=function(S,U,K){return lt(lt(S,U[K-1]),lt(U[K+0],U[K+1]))},E.Predictor11=function(S,U,K){var ne=U[K+0];return 0>=Xt(ne>>24&255,S>>24&255,(U=U[K-1])>>24&255)+Xt(ne>>16&255,S>>16&255,U>>16&255)+Xt(ne>>8&255,S>>8&255,U>>8&255)+Xt(255&ne,255&S,255&U)?ne:S},E.Predictor12=function(S,U,K){var ne=U[K+0];return(kt((S>>24&255)+(ne>>24&255)-((U=U[K-1])>>24&255))<<24|kt((S>>16&255)+(ne>>16&255)-(U>>16&255))<<16|kt((S>>8&255)+(ne>>8&255)-(U>>8&255))<<8|kt((255&S)+(255&ne)-(255&U)))>>>0},E.Predictor13=function(S,U,K){var ne=U[K-1];return(Gt((S=lt(S,U[K+0]))>>24&255,ne>>24&255)<<24|Gt(S>>16&255,ne>>16&255)<<16|Gt(S>>8&255,ne>>8&255)<<8|Gt(S>>0&255,ne>>0&255))>>>0};var Ap=E.PredictorAdd0;E.PredictorAdd1=It,mt("Predictor2","PredictorAdd2"),mt("Predictor3","PredictorAdd3"),mt("Predictor4","PredictorAdd4"),mt("Predictor5","PredictorAdd5"),mt("Predictor6","PredictorAdd6"),mt("Predictor7","PredictorAdd7"),mt("Predictor8","PredictorAdd8"),mt("Predictor9","PredictorAdd9"),mt("Predictor10","PredictorAdd10"),mt("Predictor11","PredictorAdd11"),mt("Predictor12","PredictorAdd12"),mt("Predictor13","PredictorAdd13");var Df=E.PredictorAdd2;Rt("ColorIndexInverseTransform","MapARGB","32b",function(S){return S>>8&255},function(S){return S}),Rt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(S){return S},function(S){return S>>8&255});var e0,go=E.ColorIndexInverseTransform,pa=E.MapARGB,$c=E.VP8LColorIndexInverseTransformAlpha,Rf=E.MapAlpha,sc=E.VP8LPredictorsAdd=[];sc.length=16,(E.VP8LPredictors=[]).length=16,(E.VP8LPredictorsAdd_C=[]).length=16,(E.VP8LPredictors_C=[]).length=16;var Wc,ti,Da,Yc,Ci,Qo,wl,Ho,gs,Vo,Ps,Ei,Ju,bl,rd,Xc,Jc,Zc,Zu,nd,eu,ac,eA,xs,Ji,$r,Wr,Jn,Ss=a(511),xo=a(2041),tu=a(225),ru=a(767),ic=0,t0=xo,tA=tu,ga=ru,vo=Ss,Va=0,sd=1,Cl=2,Lf=3,rA=4,oc=5,r0=6,Uf=7,nu=8,lc=9,ad=10,n0=[2,3,7],yo=[3,3,11],Zi=[280,256,256,256,40],nA=[0,1,1,1,0],cc=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],uc=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],sA=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],C1=8,Mf=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Pf=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ys=null,vs=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],bn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],su=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],El=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],dp=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],aA=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],E1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ac=[],ri=[],eo=[],_1=1,id=2,_l=[],xa=[];ot("UpsampleRgbLinePair",ye,3),ot("UpsampleBgrLinePair",Qe,3),ot("UpsampleRgbaLinePair",kr,4),ot("UpsampleBgraLinePair",Zr,4),ot("UpsampleArgbLinePair",mr,4),ot("UpsampleRgba4444LinePair",St,2),ot("UpsampleRgb565LinePair",Ze,2);var dc=E.UpsampleRgbLinePair,au=E.UpsampleBgrLinePair,Sl=E.UpsampleRgbaLinePair,s0=E.UpsampleBgraLinePair,a0=E.UpsampleArgbLinePair,od=E.UpsampleRgba4444LinePair,i0=E.UpsampleRgb565LinePair,Tl=16,Xs=1<<Tl-1,iu=-227,o0=482,Db=6,S1=0,Rb=a(256),Js=a(256),fp=a(256),jf=a(256),Of=a(o0-iu),hp=a(o0-iu);Ln("YuvToRgbRow",ye,3),Ln("YuvToBgrRow",Qe,3),Ln("YuvToRgbaRow",kr,4),Ln("YuvToBgraRow",Zr,4),Ln("YuvToArgbRow",mr,4),Ln("YuvToRgba4444Row",St,2),Ln("YuvToRgb565Row",Ze,2);var iA=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],fc=[0,2,8],Lb=[8,7,6,4,4,2,2,2,1,1,1,1],T1=1;this.WebPDecodeRGBA=function(S,U,K,ne,ue){var me=sd,ge=new tc,ve=new ns;ge.ba=ve,ve.S=me,ve.width=[ve.width],ve.height=[ve.height];var Ce=ve.width,Be=ve.height,Ue=new ps;if(Ue==null||S==null)var Xe=2;else e(Ue!=null),Xe=yl(S,U,K,Ue.width,Ue.height,Ue.Pd,Ue.Qd,Ue.format,null);if(Xe!=0?Ce=0:(Ce!=null&&(Ce[0]=Ue.width[0]),Be!=null&&(Be[0]=Ue.height[0]),Ce=1),Ce){ve.width=ve.width[0],ve.height=ve.height[0],ne!=null&&(ne[0]=ve.width),ue!=null&&(ue[0]=ve.height);e:{if(ne=new $s,(ue=new Gc).data=S,ue.w=U,ue.ha=K,ue.kd=1,U=[0],e(ue!=null),((S=yl(ue.data,ue.w,ue.ha,null,null,null,U,null,ue))==0||S==7)&&U[0]&&(S=4),(U=S)==0){if(e(ge!=null),ne.data=ue.data,ne.w=ue.w+ue.offset,ne.ha=ue.ha-ue.offset,ne.put=Es,ne.ac=Wn,ne.bc=Na,ne.ma=ge,ue.xa){if((S=rt())==null){ge=1;break e}if(function($e,Ge){var gt=[0],it=[0],Me=[0];t:for(;;){if($e==null)return 0;if(Ge==null)return $e.a=2,0;if($e.l=Ge,$e.a=0,q($e.m,Ge.data,Ge.w,Ge.ha),!zt($e.m,gt,it,Me)){$e.a=3;break t}if($e.xb=id,Ge.width=gt[0],Ge.height=it[0],!He(gt[0],it[0],1,$e,null))break t;return 1}return e($e.a!=0),0}(S,ne)){if(ne=(U=Wu(ne.width,ne.height,ge.Oa,ge.ba))==0){t:{ne=S;r:for(;;){if(ne==null){ne=0;break t}if(e(ne.s.yc!=null),e(ne.s.Ya!=null),e(0<ne.s.Wb),e((K=ne.l)!=null),e((ue=K.ma)!=null),ne.xb!=0){if(ne.ca=ue.ba,ne.tb=ue.tb,e(ne.ca!=null),!qc(ue.Oa,K,Lf)){ne.a=2;break r}if(!We(ne,K.width)||K.da)break r;if((K.da||Fr(ne.ca.S))&&Ve(),11>ne.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ne.ca.f.kb.F!=null&&Ve()),ne.Pb&&0<ne.s.ua&&ne.s.vb.X==null&&!et(ne.s.vb,ne.s.Wa.Xa)){ne.a=1;break r}ne.xb=0}if(!Ie(ne,ne.V,ne.Ba,ne.c,ne.i,K.o,ke))break r;ue.Dc=ne.Ma,ne=1;break t}e(ne.a!=0),ne=0}ne=!ne}ne&&(U=S.a)}else U=S.a}else{if((S=new Ba)==null){ge=1;break e}if(S.Fa=ue.na,S.P=ue.P,S.qc=ue.Sa,jc(S,ne)){if((U=Wu(ne.width,ne.height,ge.Oa,ge.ba))==0){if(S.Aa=0,K=ge.Oa,e((ue=S)!=null),K!=null){if(0<(Ce=0>(Ce=K.Md)?0:100<Ce?255:255*Ce/100)){for(Be=Ue=0;4>Be;++Be)12>(Xe=ue.pb[Be]).lc&&(Xe.ia=Ce*Lb[0>Xe.lc?0:Xe.lc]>>3),Ue|=Xe.ia;Ue&&(alert("todo:VP8InitRandom"),ue.ia=1)}ue.Ga=K.Id,100<ue.Ga?ue.Ga=100:0>ue.Ga&&(ue.Ga=0)}Vu(S,ne)||(U=S.a)}}else U=S.a}U==0&&ge.Oa!=null&&ge.Oa.fd&&(U=ed(ge.ba))}ge=U}me=ge!=0?null:11>me?ve.f.RGBA.eb:ve.f.kb.y}else me=null;return me};var N1=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(E,B){for(var Q="",D=0;D<4;D++)Q+=String.fromCharCode(E[B++]);return Q}function d(E,B){return(E[B+0]<<0|E[B+1]<<8|E[B+2]<<16)>>>0}function h(E,B){return(E[B+0]<<0|E[B+1]<<8|E[B+2]<<16|E[B+3]<<24)>>>0}new l;var m=[0],g=[0],b=[],y=new l,_=t,N=function(E,B){var Q={},D=0,I=!1,O=0,G=0;if(Q.frames=[],!function(Y,Z,te,ce){for(var Ee=0;Ee<ce;Ee++)if(Y[Z+Ee]!=te.charCodeAt(Ee))return!0;return!1}(E,B,"RIFF",4)){var se,J;for(h(E,B+=4),B+=8;B<E.length;){var re=u(E,B),q=h(E,B+=4);B+=4;var z=q+(1&q);switch(re){case"VP8 ":case"VP8L":Q.frames[D]===void 0&&(Q.frames[D]={}),(P=Q.frames[D]).src_off=I?G:B-8,P.src_size=O+q+8,D++,I&&(I=!1,O=0,G=0);break;case"VP8X":(P=Q.header={}).feature_flags=E[B];var W=B+4;P.canvas_width=1+d(E,W),W+=3,P.canvas_height=1+d(E,W),W+=3;break;case"ALPH":I=!0,O=z+8,G=B-8;break;case"ANIM":(P=Q.header).bgcolor=h(E,B),W=B+4,P.loop_count=(se=E)[(J=W)+0]<<0|se[J+1]<<8,W+=2;break;case"ANMF":var ie,P;(P=Q.frames[D]={}).offset_x=2*d(E,B),B+=3,P.offset_y=2*d(E,B),B+=3,P.width=1+d(E,B),B+=3,P.height=1+d(E,B),B+=3,P.duration=d(E,B),B+=3,ie=E[B++],P.dispose=1&ie,P.blend=ie>>1&1}re!="ANMF"&&(B+=z)}return Q}}(_,0);N.response=_,N.rgbaoutput=!0,N.dataurl=!1;var k=N.header?N.header:null,R=N.frames?N.frames:null;if(k){k.loop_counter=k.loop_count,m=[k.canvas_height],g=[k.canvas_width];for(var M=0;M<R.length&&R[M].blend!=0;M++);}var j=R[0],L=y.WebPDecodeRGBA(_,j.src_off,j.src_size,g,m);j.rgba=L,j.imgwidth=g[0],j.imgheight=m[0];for(var C=0;C<g[0]*m[0]*4;C++)b[C]=L[C];return this.width=g,this.height=m,this.data=b,this}(function(t){var e=function(){return typeof fS=="function"},r=function(m,g,b,y){var _=4,N=i;switch(y){case t.image_compression.FAST:_=1,N=a;break;case t.image_compression.MEDIUM:_=6,N=o;break;case t.image_compression.SLOW:_=9,N=l}m=n(m,g,b,N);var k=fS(m,{level:_});return t.__addimage__.arrayBufferToBinaryString(k)},n=function(m,g,b,y){for(var _,N,k,R=m.length/g,M=new Uint8Array(m.length+R),j=d(),L=0;L<R;L+=1){if(k=L*g,_=m.subarray(k,k+g),y)M.set(y(_,b,N),k+L);else{for(var C,E=j.length,B=[];C<E;C+=1)B[C]=j[C](_,b,N);var Q=h(B.concat());M.set(B[Q],k+L)}N=_}return M},s=function(m){var g=Array.apply([],m);return g.unshift(0),g},a=function(m,g){var b,y=[],_=m.length;y[0]=1;for(var N=0;N<_;N+=1)b=m[N-g]||0,y[N+1]=m[N]-b+256&255;return y},i=function(m,g,b){var y,_=[],N=m.length;_[0]=2;for(var k=0;k<N;k+=1)y=b&&b[k]||0,_[k+1]=m[k]-y+256&255;return _},o=function(m,g,b){var y,_,N=[],k=m.length;N[0]=3;for(var R=0;R<k;R+=1)y=m[R-g]||0,_=b&&b[R]||0,N[R+1]=m[R]+256-(y+_>>>1)&255;return N},l=function(m,g,b){var y,_,N,k,R=[],M=m.length;R[0]=4;for(var j=0;j<M;j+=1)y=m[j-g]||0,_=b&&b[j]||0,N=b&&b[j-g]||0,k=u(y,_,N),R[j+1]=m[j]-k+256&255;return R},u=function(m,g,b){if(m===g&&g===b)return m;var y=Math.abs(g-b),_=Math.abs(m-b),N=Math.abs(m+g-b-b);return y<=_&&y<=N?m:_<=N?g:b},d=function(){return[s,a,i,o,l]},h=function(m){var g=m.map(function(b){return b.reduce(function(y,_){return y+Math.abs(_)},0)});return g.indexOf(Math.min.apply(null,g))};t.processPNG=function(m,g,b,y){var _,N,k,R,M,j,L,C,E,B,Q,D,I,O,G,se=this.decode.FLATE_DECODE,J="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(k=new Hoe(m)).imgData,N=k.bits,_=k.colorSpace,M=k.colors,[4,6].indexOf(k.colorType)!==-1){if(k.bits===8){E=(C=k.pixelBitlength==32?new Uint32Array(k.decodePixels().buffer):k.pixelBitlength==16?new Uint16Array(k.decodePixels().buffer):new Uint8Array(k.decodePixels().buffer)).length,Q=new Uint8Array(E*k.colors),B=new Uint8Array(E);var re,q=k.pixelBitlength-k.bits;for(O=0,G=0;O<E;O++){for(I=C[O],re=0;re<q;)Q[G++]=I>>>re&255,re+=k.bits;B[O]=I>>>re&255}}if(k.bits===16){E=(C=new Uint32Array(k.decodePixels().buffer)).length,Q=new Uint8Array(E*(32/k.pixelBitlength)*k.colors),B=new Uint8Array(E*(32/k.pixelBitlength)),D=k.colors>1,O=0,G=0;for(var z=0;O<E;)I=C[O++],Q[G++]=I>>>0&255,D&&(Q[G++]=I>>>16&255,I=C[O++],Q[G++]=I>>>0&255),B[z++]=I>>>16&255;N=8}y!==t.image_compression.NONE&&e()?(m=r(Q,k.width*k.colors,k.colors,y),L=r(B,k.width,1,y)):(m=Q,L=B,se=void 0)}if(k.colorType===3&&(_=this.color_spaces.INDEXED,j=k.palette,k.transparency.indexed)){var W=k.transparency.indexed,ie=0;for(O=0,E=W.length;O<E;++O)ie+=W[O];if((ie/=255)===E-1&&W.indexOf(0)!==-1)R=[W.indexOf(0)];else if(ie!==E){for(C=k.decodePixels(),B=new Uint8Array(C.length),O=0,E=C.length;O<E;O++)B[O]=W[C[O]];L=r(B,k.width,1)}}var P=function(Y){var Z;switch(Y){case t.image_compression.FAST:Z=11;break;case t.image_compression.MEDIUM:Z=13;break;case t.image_compression.SLOW:Z=14;break;default:Z=12}return Z}(y);return se===this.decode.FLATE_DECODE&&(J="/Predictor "+P+" "),J+="/Colors "+M+" /BitsPerComponent "+N+" /Columns "+k.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(L&&this.__addimage__.isArrayBuffer(L)||this.__addimage__.isArrayBufferView(L))&&(L=this.__addimage__.arrayBufferToBinaryString(L)),{alias:b,data:m,index:g,filter:se,decodeParameters:J,transparency:R,palette:j,sMask:L,predictor:P,width:k.width,height:k.height,bitsPerComponent:N,colorSpace:_}}}})(or.API),function(t){t.processGIF89A=function(e,r,n,s){var a=new Voe(e),i=a.width,o=a.height,l=[];a.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:i,height:o},d=new vE(100).encode(u,100);return t.processJPEG.call(this,d,r,n,s)},t.processGIF87A=t.processGIF89A}(or.API),wc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:n,blue:r,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},wc.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){as.log("bit decode error:"+r)}},wc.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var a=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+8*s*4,o=0;o<8&&8*s+o<this.width;o++){var l=this.palette[a>>7-o&1];this.data[i+4*o]=l.blue,this.data[i+4*o+1]=l.green,this.data[i+4*o+2]=l.red,this.data[i+4*o+3]=255}r!==0&&(this.pos+=4-r)}},wc.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<t;s++){var a=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+2*s*4,o=a>>4,l=15&a,u=this.palette[o];if(this.data[i]=u.blue,this.data[i+1]=u.green,this.data[i+2]=u.red,this.data[i+3]=255,2*s+1>=this.width)break;u=this.palette[l],this.data[i+4]=u.blue,this.data[i+4+1]=u.green,this.data[i+4+2]=u.red,this.data[i+4+3]=255}e!==0&&(this.pos+=4-e)}},wc.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+4*n;if(s<this.palette.length){var i=this.palette[s];this.data[a]=i.red,this.data[a+1]=i.green,this.data[a+2]=i.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}t!==0&&(this.pos+=4-t)}},wc.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(a&e)/e*255|0,o=(a>>5&e)/e*255|0,l=(a>>10&e)/e*255|0,u=a>>15?255:0,d=n*this.width*4+4*s;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=i,this.data[d+3]=u}this.pos+=t}},wc.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&e)/e*255|0,l=(i>>5&r)/r*255|0,u=(i>>11)/e*255|0,d=s*this.width*4+4*a;this.data[d]=u,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=t}},wc.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=e*this.width*4+4*r;this.data[i]=a,this.data[i+1]=s,this.data[i+2]=n,this.data[i+3]=255}this.pos+=this.width%4}},wc.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=a,this.data[o+1]=s,this.data[o+2]=n,this.data[o+3]=i}},wc.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,s){var a=new wc(e,!1),i=a.width,o=a.height,l={data:a.getData(),width:i,height:o},u=new vE(100).encode(l,100);return t.processJPEG.call(this,u,r,n,s)}}(or.API),GF.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,s){var a=new GF(e),i=a.width,o=a.height,l={data:a.getData(),width:i,height:o},u=new vE(100).encode(l,100);return t.processJPEG.call(this,u,r,n,s)}}(or.API),or.API.processRGBA=function(t,e,r){for(var n=t.data,s=n.length,a=new Uint8Array(s/4*3),i=new Uint8Array(s/4),o=0,l=0,u=0;u<s;u+=4){var d=n[u],h=n[u+1],m=n[u+2],g=n[u+3];a[o++]=d,a[o++]=h,a[o++]=m,i[l++]=g}var b=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:b,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},or.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},k0=or.API,Rv=k0.getCharWidthsArray=function(t,e){var r,n,s=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),i=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:s.metadata.Unicode.widths,l=o.fof?o.fof:1,u=e.kerning?e.kerning:s.metadata.Unicode.kerning,d=u.fof?u.fof:1,h=e.doKerning!==!1,m=0,g=t.length,b=0,y=o[0]||l,_=[];for(r=0;r<g;r++)n=t.charCodeAt(r),typeof s.metadata.widthOfString=="function"?_.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+i*(1e3/a)||0)/1e3):(m=h&&qn(u[n])==="object"&&!isNaN(parseInt(u[n][b],10))?u[n][b]/d:0,_.push((o[n]||y)/l+m)),b=n;return _},OF=k0.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return k0.processArabic&&(t=k0.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,s)/r:Rv.apply(this,arguments).reduce(function(a,i){return a+i},0)},QF=function(t,e,r,n){for(var s=[],a=0,i=t.length,o=0;a!==i&&o+e[a]<r;)o+=e[a],a++;s.push(t.slice(0,a));var l=a;for(o=0;a!==i;)o+e[a]>n&&(s.push(t.slice(l,a)),o=0,l=a),o+=e[a],a++;return l!==a&&s.push(t.slice(l,a)),s},HF=function(t,e,r){r||(r={});var n,s,a,i,o,l,u,d=[],h=[d],m=r.textIndent||0,g=0,b=0,y=t.split(" "),_=Rv.apply(this,[" ",r])[0];if(l=r.lineIndent===-1?y[0].length+2:r.lineIndent||0){var N=Array(l).join(" "),k=[];y.map(function(M){(M=M.split(/\s*\n/)).length>1?k=k.concat(M.map(function(j,L){return(L&&j.length?`
`:"")+j})):k.push(M[0])}),y=k,l=OF.apply(this,[N,r])}for(a=0,i=y.length;a<i;a++){var R=0;if(n=y[a],l&&n[0]==`
`&&(n=n.substr(1),R=1),m+g+(b=(s=Rv.apply(this,[n,r])).reduce(function(M,j){return M+j},0))>e||R){if(b>e){for(o=QF.apply(this,[n,s,e-(m+g),e]),d.push(o.shift()),d=[o.pop()];o.length;)h.push([o.shift()]);b=s.slice(n.length-(d[0]?d[0].length:0)).reduce(function(M,j){return M+j},0)}else d=[n];h.push(d),m=b+l,g=_}else d.push(n),m+=g+b,g=_}return u=l?function(M,j){return(j?N:"")+M.join(" ")}:function(M){return M.join(" ")},h.map(u)},k0.splitTextToSize=function(t,e,r){var n,s=(r=r||{}).fontSize||this.internal.getFontSize(),a=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var h=this.internal.getFont(d.fontName,d.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var i=1*this.internal.scaleFactor*e/s;a.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,a.lineIndent=r.lineIndent;var o,l,u=[];for(o=0,l=n.length;o<l;o++)u=u.concat(HF.apply(this,[n[o],i,a]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",r={},n={},s=0;s<e.length;s++)r[e[s]]="0123456789abcdef"[s],n["0123456789abcdef"[s]]=e[s];var a=function(h){return"0x"+parseInt(h,10).toString(16)},i=t.__fontmetrics__.compress=function(h){var m,g,b,y,_=["{"];for(var N in h){if(m=h[N],isNaN(parseInt(N,10))?g="'"+N+"'":(N=parseInt(N,10),g=(g=a(N).slice(2)).slice(0,-1)+n[g.slice(-1)]),typeof m=="number")m<0?(b=a(m).slice(3),y="-"):(b=a(m).slice(2),y=""),b=y+b.slice(0,-1)+n[b.slice(-1)];else{if(qn(m)!=="object")throw new Error("Don't know what to do with value type "+qn(m)+".");b=i(m)}_.push(g+b)}return _.push("}"),_.join("")},o=t.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,g,b,y,_={},N=1,k=_,R=[],M="",j="",L=h.length-1,C=1;C<L;C+=1)(y=h[C])=="'"?m?(b=m.join(""),m=void 0):m=[]:m?m.push(y):y=="{"?(R.push([k,b]),k={},b=void 0):y=="}"?((g=R.pop())[0][g[1]]=k,b=void 0,k=g[0]):y=="-"?N=-1:b===void 0?r.hasOwnProperty(y)?(M+=r[y],b=parseInt(M,16)*N,N=1,M=""):M+=y:r.hasOwnProperty(y)?(j+=r[y],k[b]=parseInt(j,16)*N,N=1,b=void 0,j=""):j+=y;return _},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(h){var m=h.font,g=d.Unicode[m.postScriptName];g&&(m.metadata.Unicode={},m.metadata.Unicode.widths=g.widths,m.metadata.Unicode.kerning=g.kerning);var b=u.Unicode[m.postScriptName];b&&(m.metadata.Unicode.encoding=b,m.encoding=b.codePages[0])}])}(or.API),function(t){var e=function(r){for(var n=r.length,s=new Uint8Array(n),a=0;a<n;a++)s[a]=r.charCodeAt(a);return s};t.API.events.push(["addFont",function(r){var n=void 0,s=r.font,a=r.instance;if(!s.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=a.existsFileInVFS(s.postScriptName)===!1?a.loadFile(s.postScriptName):a.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(i,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Qg(o)),i.metadata=t.API.TTFFont.open(o),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(s,n)}}])}(or),function(t){function e(){return(Cr.canvg?Promise.resolve(Cr.canvg):C2(()=>import("./index.es-CnaoY-JB.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}or.API.addSvgAsImage=function(r,n,s,a,i,o,l,u){if(isNaN(n)||isNaN(s))throw as.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(i))throw as.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=a,d.height=i;var h=d.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,d.width,d.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return e().then(function(b){return b.fromString(h,r,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(b){return b.render(m)}).then(function(){g.addImage(d.toDataURL("image/jpeg",1),n,s,a,i,l,u)})}}(),or.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(e,r);return this},or.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,s,a,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(i),l=[],u=0,d=0,h=0;function m(b,y){var _,N=!1;for(_=0;_<b.length;_+=1)b[_]===y&&(N=!0);return N}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var g=o.length;for(h=0;h<g;h+=1)r[o[h]].value=r[o[h]].defaultValue,r[o[h]].explicitSet=!1}if(qn(t)==="object"){for(s in t)if(a=t[s],m(o,s)&&a!==void 0){if(r[s].type==="boolean"&&typeof a=="boolean")r[s].value=a;else if(r[s].type==="name"&&m(r[s].valueSet,a))r[s].value=a;else if(r[s].type==="integer"&&Number.isInteger(a))r[s].value=a;else if(r[s].type==="array"){for(u=0;u<a.length;u+=1)if(n=!0,a[u].length===1&&typeof a[u][0]=="number")l.push(String(a[u]-1));else if(a[u].length>1){for(d=0;d<a[u].length;d+=1)typeof a[u][d]!="number"&&(n=!1);n===!0&&l.push([a[u][0]-1,a[u][1]-1].join(" "))}r[s].value="["+l.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,y=[];for(b in r)r[b].explicitSet===!0&&(r[b].type==="name"?y.push("/"+b+" /"+r[b].value):y.push("/"+b+" "+r[b].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(n)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=a.length+i.length+o.length+s.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(s+a+i+o+l),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(or.API),function(t){var e=t.API,r=e.pdfEscape16=function(a,i){for(var o,l=i.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],h=0,m=a.length;h<m;++h){if(o=i.metadata.characterToGlyph(a.charCodeAt(h)),i.metadata.glyIdsUsed.push(o),i.metadata.toUnicode[o]=a.charCodeAt(h),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(i.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(u[4-o.length],o)}return d.join("")},n=function(a){var i,o,l,u,d,h,m;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],h=0,m=(o=Object.keys(a).sort(function(g,b){return g-b})).length;h<m;h++)i=o[h],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),a[i]!==void 0&&a[i]!==null&&typeof a[i].toString=="function"&&(u=("0000"+a[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),l.push("<"+i+"><"+u+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(i){var o=i.font,l=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var h=o.metadata.Unicode.widths,m=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),g="",b=0;b<m.length;b++)g+=String.fromCharCode(m[b]);var y=u();d({data:g,addLength1:!0,objectId:y}),l("endobj");var _=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:_}),l("endobj");var N=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+em(o.fontName)),l("/FontFile2 "+y+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var k=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+em(o.fontName)),l("/FontDescriptor "+N+" 0 R"),l("/W "+t.API.PDFObject.convert(h)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+_+" 0 R"),l("/BaseFont /"+em(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+k+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(i){var o=i.font,l=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var h=o.metadata.rawData,m="",g=0;g<h.length;g++)m+=String.fromCharCode(h[g]);var b=u();d({data:m,addLength1:!0,objectId:b}),l("endobj");var y=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var _=u();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+b+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+em(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=u();for(var N=0;N<o.metadata.hmtx.widths.length;N++)o.metadata.hmtx.widths[N]=parseInt(o.metadata.hmtx.widths[N]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+em(o.fontName)+"/FontDescriptor "+_+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]);var s=function(a){var i,o=a.text||"",l=a.x,u=a.y,d=a.options||{},h=a.mutex||{},m=h.pdfEscape,g=h.activeFontKey,b=h.fonts,y=g,_="",N=0,k="",R=b[y].encoding;if(b[y].encoding!=="Identity-H")return{text:o,x:l,y:u,options:d,mutex:h};for(k=o,y=g,Array.isArray(o)&&(k=o[0]),N=0;N<k.length;N+=1)b[y].metadata.hasOwnProperty("cmap")&&(i=b[y].metadata.cmap.unicode.codeMap[k[N].charCodeAt(0)]),i||k[N].charCodeAt(0)<256&&b[y].metadata.hasOwnProperty("Unicode")?_+=k[N]:_+="";var M="";return parseInt(y.slice(1))<14||R==="WinAnsiEncoding"?M=m(_,y).split("").map(function(j){return j.charCodeAt(0).toString(16)}).join(""):R==="Identity-H"&&(M=r(_,b[y])),h.isHex=!0,{text:M,x:l,y:u,options:d,mutex:h}};e.events.push(["postProcessText",function(a){var i=a.text||"",o=[],l={text:i,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(i)){var u=0;for(u=0;u<i.length;u+=1)Array.isArray(i[u])&&i[u].length===3?o.push([s(Object.assign({},l,{text:i[u][0]})).text,i[u][1],i[u][2]]):o.push(s(Object.assign({},l,{text:i[u]})).text);a.text=o}else a.text=s(Object.assign({},l,{text:i})).text}])}(or),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(or.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var s,a,i,o,l,u,d,h=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},_=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],N=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),k=!1,R=0;this.__bidiEngine__={};var M=function(D){var I=D.charCodeAt(),O=I>>8,G=y[O];return G!==void 0?h[256*G+(255&I)]:O===252||O===253?"AL":N.test(O)?"L":O===8?"R":"N"},j=function(D){for(var I,O=0;O<D.length;O++){if((I=M(D.charAt(O)))==="L")return!1;if(I==="R")return!0}return!1},L=function(D,I,O,G){var se,J,re,q,z=I[G];switch(z){case"L":case"R":k=!1;break;case"N":case"AN":break;case"EN":k&&(z="AN");break;case"AL":k=!0,z="R";break;case"WS":z="N";break;case"CS":G<1||G+1>=I.length||(se=O[G-1])!=="EN"&&se!=="AN"||(J=I[G+1])!=="EN"&&J!=="AN"?z="N":k&&(J="AN"),z=J===se?J:"N";break;case"ES":z=(se=G>0?O[G-1]:"B")==="EN"&&G+1<I.length&&I[G+1]==="EN"?"EN":"N";break;case"ET":if(G>0&&O[G-1]==="EN"){z="EN";break}if(k){z="N";break}for(re=G+1,q=I.length;re<q&&I[re]==="ET";)re++;z=re<q&&I[re]==="EN"?"EN":"N";break;case"NSM":if(i&&!o){for(q=I.length,re=G+1;re<q&&I[re]==="NSM";)re++;if(re<q){var W=D[G],ie=W>=1425&&W<=2303||W===64286;if(se=I[re],ie&&(se==="R"||se==="AL")){z="R";break}}}z=G<1||(se=I[G-1])==="B"?"N":O[G-1];break;case"B":k=!1,s=!0,z=R;break;case"S":a=!0,z="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":k=!1;break;case"BN":z="N"}return z},C=function(D,I,O){var G=D.split("");return O&&E(G,O,{hiLevel:R}),G.reverse(),I&&I.reverse(),G.join("")},E=function(D,I,O){var G,se,J,re,q,z=-1,W=D.length,ie=0,P=[],Y=R?g:m,Z=[];for(k=!1,s=!1,a=!1,se=0;se<W;se++)Z[se]=M(D[se]);for(J=0;J<W;J++){if(q=ie,P[J]=L(D,Z,P,J),G=240&(ie=Y[q][b[P[J]]]),ie&=15,I[J]=re=Y[ie][5],G>0)if(G===16){for(se=z;se<J;se++)I[se]=1;z=-1}else z=-1;if(Y[ie][6])z===-1&&(z=J);else if(z>-1){for(se=z;se<J;se++)I[se]=re;z=-1}Z[J]==="B"&&(I[J]=0),O.hiLevel|=re}a&&function(te,ce,Ee){for(var pe=0;pe<Ee;pe++)if(te[pe]==="S"){ce[pe]=R;for(var fe=pe-1;fe>=0&&te[fe]==="WS";fe--)ce[fe]=R}}(Z,I,W)},B=function(D,I,O,G,se){if(!(se.hiLevel<D)){if(D===1&&R===1&&!s)return I.reverse(),void(O&&O.reverse());for(var J,re,q,z,W=I.length,ie=0;ie<W;){if(G[ie]>=D){for(q=ie+1;q<W&&G[q]>=D;)q++;for(z=ie,re=q-1;z<re;z++,re--)J=I[z],I[z]=I[re],I[re]=J,O&&(J=O[z],O[z]=O[re],O[re]=J);ie=q}ie++}}},Q=function(D,I,O){var G=D.split(""),se={hiLevel:R};return O||(O=[]),E(G,O,se),function(J,re,q){if(q.hiLevel!==0&&d)for(var z,W=0;W<J.length;W++)re[W]===1&&(z=_.indexOf(J[W]))>=0&&(J[W]=_[z+1])}(G,O,se),B(2,G,I,O,se),B(1,G,I,O,se),G.join("")};return this.__bidiEngine__.doBidiReorder=function(D,I,O){if(function(se,J){if(J)for(var re=0;re<se.length;re++)J[re]=re;o===void 0&&(o=j(se)),u===void 0&&(u=j(se))}(D,I),i||!l||u)if(i&&l&&o^u)R=o?1:0,D=C(D,I,O);else if(!i&&l&&u)R=o?1:0,D=Q(D,I,O),D=C(D,I);else if(!i||o||l||u){if(i&&!l&&o^u)D=C(D,I),o?(R=0,D=Q(D,I,O)):(R=1,D=Q(D,I,O),D=C(D,I));else if(i&&o&&!l&&u)R=1,D=Q(D,I,O),D=C(D,I);else if(!i&&!l&&o^u){var G=d;o?(R=1,D=Q(D,I,O),R=0,d=!1,D=Q(D,I,O),d=G):(R=0,D=Q(D,I,O),D=C(D,I),R=1,d=!1,D=Q(D,I,O),d=G,D=C(D,I))}}else R=0,D=Q(D,I,O);else R=o?1:0,D=Q(D,I,O);return D},this.__bidiEngine__.setOptions=function(D){D&&(i=D.isInputVisual,l=D.isOutputVisual,o=D.isInputRtl,u=D.isOutputRtl,d=D.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var s=n.text,a=(n.x,n.y,n.options||{}),i=(n.mutex,a.lang,[]);if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,r.setOptions(a),Object.prototype.toString.call(s)==="[object Array]"){var o=0;for(i=[],o=0;o<s.length;o+=1)Object.prototype.toString.call(s[o])==="[object Array]"?i.push([r.doBidiReorder(s[o][0]),s[o][1],s[o][2]]):i.push([r.doBidiReorder(s[o])]);n.text=i}else n.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])}(or),or.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new wf(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new sle(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new Goe(this.contents),this.head=new qoe(this),this.name=new Xoe(this),this.cmap=new mP(this),this.toUnicode={},this.hhea=new Koe(this),this.maxp=new Joe(this),this.hmtx=new Zoe(this),this.post=new Woe(this),this.os2=new $oe(this),this.loca=new nle(this),this.glyf=new ele(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,s,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,o,l,u;for(u=[],i=0,o=(l=this.bbox).length;i<o;i++)e=l[i],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),(32768&(r=s>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var s,a,i,o;for(i=0,a=0,o=(e=""+e).length;0<=o?a<o:a>o;a=0<=o?++a:--a)s=e.charCodeAt(a),i+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/r)||0;return i*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var Uc,wf=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,s;for(s=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)s.push(this.writeByte(e.charCodeAt(r)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,s,a,i,o,l;return e=this.readByte(),r=this.readByte(),n=this.readByte(),s=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^a)+65536*(255^i)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*s+16777216*a+65536*i+256*o+l},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,s,a;for(a=[],n=0,s=e.length;n<s;n++)r=e[n],a.push(this.writeByte(r));return a},t}(),Goe=function(){var t;function e(r){var n,s,a;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,a=this.tableCount;0<=a?s<a:s>a;s=0<=a?++s:--s)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,s,a,i,o,l,u,d,h,m,g,b,y;for(y in g=Object.keys(r).length,l=Math.log(2),h=16*Math.floor(Math.log(g)/l),i=Math.floor(h/l),d=16*g-h,(s=new wf).writeInt(this.scalarType),s.writeShort(g),s.writeShort(h),s.writeShort(i),s.writeShort(d),a=16*g,u=s.pos+a,o=null,b=[],r)for(m=r[y],s.writeString(y),s.writeInt(t(m)),s.writeInt(u),s.writeInt(m.length),b=b.concat(m),y==="head"&&(o=u),u+=m.length;u%4;)b.push(0),u++;return s.write(b),n=2981146554-t(s.data),s.pos=o+8,s.writeUInt32(n),s.data},t=function(r){var n,s,a,i;for(r=pP.call(r);r.length%4;)r.push(0);for(a=new wf(r),s=0,n=0,i=r.length;n<i;n=n+=4)s+=a.readUInt32();return 4294967295&s},e}(),zoe={}.hasOwnProperty,Mu=function(t,e){for(var r in e)zoe.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Uc=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var qoe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Mu(e,Uc),e.prototype.tag="head",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},e.prototype.encode=function(r){var n;return(n=new wf).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},e}(),zF=function(){function t(e,r){var n,s,a,i,o,l,u,d,h,m,g,b,y,_,N,k,R;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(g=e.readUInt16(),m=g/2,e.pos+=6,a=function(){var M,j;for(j=[],l=M=0;0<=m?M<m:M>m;l=0<=m?++M:--M)j.push(e.readUInt16());return j}(),e.pos+=2,y=function(){var M,j;for(j=[],l=M=0;0<=m?M<m:M>m;l=0<=m?++M:--M)j.push(e.readUInt16());return j}(),u=function(){var M,j;for(j=[],l=M=0;0<=m?M<m:M>m;l=0<=m?++M:--M)j.push(e.readUInt16());return j}(),d=function(){var M,j;for(j=[],l=M=0;0<=m?M<m:M>m;l=0<=m?++M:--M)j.push(e.readUInt16());return j}(),s=(this.length-e.pos+this.offset)/2,o=function(){var M,j;for(j=[],l=M=0;0<=s?M<s:M>s;l=0<=s?++M:--M)j.push(e.readUInt16());return j}(),l=N=0,R=a.length;N<R;l=++N)for(_=a[l],n=k=b=y[l];b<=_?k<=_:k>=_;n=b<=_?++k:--k)d[l]===0?i=n+u[l]:(i=o[d[l]/2+(n-b)-(m-l)]||0)!==0&&(i+=u[l]),this.codeMap[n]=65535&i}e.pos=h}return t.encode=function(e,r){var n,s,a,i,o,l,u,d,h,m,g,b,y,_,N,k,R,M,j,L,C,E,B,Q,D,I,O,G,se,J,re,q,z,W,ie,P,Y,Z,te,ce,Ee,pe,fe,xe,de,oe;switch(G=new wf,i=Object.keys(e).sort(function(Le,et){return Le-et}),r){case"macroman":for(y=0,_=function(){var Le=[];for(b=0;b<256;++b)Le.push(0);return Le}(),k={0:0},a={},se=0,z=i.length;se<z;se++)k[fe=e[s=i[se]]]==null&&(k[fe]=++y),a[s]={old:e[s],new:k[e[s]]},_[s]=k[e[s]];return G.writeUInt16(1),G.writeUInt16(0),G.writeUInt32(12),G.writeUInt16(0),G.writeUInt16(262),G.writeUInt16(0),G.write(_),{charMap:a,subtable:G.data,maxGlyphID:y+1};case"unicode":for(I=[],h=[],R=0,k={},n={},N=u=null,J=0,W=i.length;J<W;J++)k[j=e[s=i[J]]]==null&&(k[j]=++R),n[s]={old:j,new:k[j]},o=k[j]-s,N!=null&&o===u||(N&&h.push(N),I.push(s),u=o),N=s;for(N&&h.push(N),h.push(65535),I.push(65535),Q=2*(B=I.length),E=2*Math.pow(Math.log(B)/Math.LN2,2),m=Math.log(E/2)/Math.LN2,C=2*B-E,l=[],L=[],g=[],b=re=0,ie=I.length;re<ie;b=++re){if(D=I[b],d=h[b],D===65535){l.push(0),L.push(0);break}if(D-(O=n[D].new)>=32768)for(l.push(0),L.push(2*(g.length+B-b)),s=q=D;D<=d?q<=d:q>=d;s=D<=d?++q:--q)g.push(n[s].new);else l.push(O-D),L.push(0)}for(G.writeUInt16(3),G.writeUInt16(1),G.writeUInt32(12),G.writeUInt16(4),G.writeUInt16(16+8*B+2*g.length),G.writeUInt16(0),G.writeUInt16(Q),G.writeUInt16(E),G.writeUInt16(m),G.writeUInt16(C),Ee=0,P=h.length;Ee<P;Ee++)s=h[Ee],G.writeUInt16(s);for(G.writeUInt16(0),pe=0,Y=I.length;pe<Y;pe++)s=I[pe],G.writeUInt16(s);for(xe=0,Z=l.length;xe<Z;xe++)o=l[xe],G.writeUInt16(o);for(de=0,te=L.length;de<te;de++)M=L[de],G.writeUInt16(M);for(oe=0,ce=g.length;oe<ce;oe++)y=g[oe],G.writeUInt16(y);return{charMap:n,subtable:G.data,maxGlyphID:R+1}}},t}(),mP=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Mu(e,Uc),e.prototype.tag="cmap",e.prototype.parse=function(r){var n,s,a;for(r.pos=this.offset,this.version=r.readUInt16(),a=r.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)n=new zF(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(r,n){var s,a;return n==null&&(n="macroman"),s=zF.encode(r,n),(a=new wf).writeUInt16(0),a.writeUInt16(1),s.table=a.data.concat(s.subtable),s},e}(),Koe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Mu(e,Uc),e.prototype.tag="hhea",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},e}(),$oe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Mu(e,Uc),e.prototype.tag="OS/2",e.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,s;for(s=[],n=0;n<10;++n)s.push(r.readByte());return s}(),this.charRange=function(){var n,s;for(s=[],n=0;n<4;++n)s.push(r.readInt());return s}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,s;for(s=[],n=0;n<2;n=++n)s.push(r.readInt());return s}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},e}(),Woe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Mu(e,Uc),e.prototype.tag="post",e.prototype.parse=function(r){var n,s,a;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var i;for(s=r.readUInt16(),this.glyphNameIndex=[],i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],a=[];r.pos<this.offset+this.length;)n=r.readByte(),a.push(this.names.push(r.readString(n)));return a;case 151552:return s=r.readUInt16(),this.offsets=r.read(s);case 196608:break;case 262144:return this.map=(function(){var o,l,u;for(u=[],i=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;i=0<=l?++o:--o)u.push(r.readUInt32());return u}).call(this)}},e}(),Yoe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Xoe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Mu(e,Uc),e.prototype.tag="name",e.prototype.parse=function(r){var n,s,a,i,o,l,u,d,h,m,g;for(r.pos=this.offset,r.readShort(),n=r.readShort(),l=r.readShort(),s=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)s.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+l+r.readShort()});for(u={},i=h=0,m=s.length;h<m;i=++h)a=s[i],r.pos=a.offset,d=r.readString(a.length),o=new Yoe(d,a),u[g=a.nameID]==null&&(u[g]=[]),u[a.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),Joe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Mu(e,Uc),e.prototype.tag="maxp",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},e}(),Zoe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Mu(e,Uc),e.prototype.tag="hmtx",e.prototype.parse=function(r){var n,s,a,i,o,l,u;for(r.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,h;for(h=[],n=d=0;0<=a?d<a:d>a;n=0<=a?++d:--d)h.push(r.readInt16());return h}(),this.widths=(function(){var d,h,m,g;for(g=[],d=0,h=(m=this.metrics).length;d<h;d++)i=m[d],g.push(i.advance);return g}).call(this),s=this.widths[this.widths.length-1],u=[],n=o=0;0<=a?o<a:o>a;n=0<=a?++o:--o)u.push(this.widths.push(s));return u},e.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},e}(),pP=[].slice,ele=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Mu(e,Uc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(r){var n,s,a,i,o,l,u,d,h,m;return r in this.cache?this.cache[r]:(i=this.file.loca,n=this.file.contents,s=i.indexOf(r),(a=i.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+s,o=(l=new wf(n.read(a))).readShort(),d=l.readShort(),m=l.readShort(),u=l.readShort(),h=l.readShort(),this.cache[r]=o===-1?new rle(l,d,m,u,h):new tle(l,o,d,m,u,h),this.cache[r]))},e.prototype.encode=function(r,n,s){var a,i,o,l,u;for(o=[],i=[],l=0,u=n.length;l<u;l++)a=r[n[l]],i.push(o.length),a&&(o=o.concat(a.encode(s)));return i.push(o.length),{table:o,offsets:i}},e}(),tle=function(){function t(e,r,n,s,a,i){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=s,this.xMax=a,this.yMax=i,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),rle=function(){function t(e,r,n,s,a){var i,o;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=s,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;o=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&o;)i.pos+=1&o?4:2,128&o?i.pos+=8:64&o?i.pos+=4:8&o&&(i.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new wf(pP.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),nle=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Mu(e,Uc),e.prototype.tag="loca",e.prototype.parse=function(r){var n,s;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var a,i;for(i=[],s=0,a=this.length;s<a;s+=2)i.push(2*r.readUInt16());return i}).call(this):(function(){var a,i;for(i=[],s=0,a=this.length;s<a;s+=4)i.push(r.readUInt32());return i}).call(this)},e.prototype.indexOf=function(r){return this.offsets[r]},e.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},e.prototype.encode=function(r,n){for(var s=new Uint32Array(this.offsets.length),a=0,i=0,o=0;o<s.length;++o)if(s[o]=a,i<n.length&&n[i]==o){++i,s[o]=a;var l=this.offsets[o],u=this.offsets[o+1]-l;u>0&&(a+=u)}for(var d=new Array(4*s.length),h=0;h<s.length;++h)d[4*h+3]=255&s[h],d[4*h+2]=(65280&s[h])>>8,d[4*h+1]=(16711680&s[h])>>16,d[4*h]=(4278190080&s[h])>>24;return d},e}(),sle=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,s,a;for(r in s=this.font.cmap.tables[0].codeMap,e={},a=this.subset)n=a[r],e[r]=s[n];return e},t.prototype.glyphsFor=function(e){var r,n,s,a,i,o,l;for(s={},i=0,o=e.length;i<o;i++)s[a=e[i]]=this.font.glyf.glyphFor(a);for(a in r=[],s)(n=s[a])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(a in l=this.glyphsFor(r))n=l[a],s[a]=n;return s},t.prototype.encode=function(e,r){var n,s,a,i,o,l,u,d,h,m,g,b,y,_,N;for(s in n=mP.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(e),g={0:0},N=n.charMap)g[(l=N[s]).old]=l.new;for(b in m=n.maxGlyphID,i)b in g||(g[b]=m++);return d=function(k){var R,M;for(R in M={},k)M[k[R]]=R;return M}(g),h=Object.keys(d).sort(function(k,R){return k-R}),y=function(){var k,R,M;for(M=[],k=0,R=h.length;k<R;k++)o=h[k],M.push(d[o]);return M}(),a=this.font.glyf.encode(i,y,g),u=this.font.loca.encode(a.offsets,y),_={cmap:this.font.cmap.raw(),glyf:a.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(_["OS/2"]=this.font.os2.raw()),this.font.directory.encode(_)},t}();or.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,s,a,i;if(Array.isArray(r))return"["+function(){var o,l,u;for(u=[],o=0,l=r.length;o<l;o++)n=r[o],u.push(e.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in a=["<<"],r)i=r[s],a.push("/"+s+" "+e.convert(i));return a.push(">>"),a.join(`
`)}return""+r},e}();function gP(t,e,r,n,s){n=n||{};var a=1.15,i=s.internal.scaleFactor,o=s.internal.getFontSize()/i,l=s.getLineHeightFactor?s.getLineHeightFactor():a,u=o*l,d=/\r\n|\r|\n/g,h="",m=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(h=typeof t=="string"?t.split(d):t,m=h.length||1),r+=o*(2-a),n.valign==="middle"?r-=m/2*u:n.valign==="bottom"&&(r-=m*u),n.halign==="center"||n.halign==="right"){var g=o;if(n.halign==="center"&&(g*=.5),h&&m>=1){for(var b=0;b<h.length;b++)s.text(h[b],e-s.getStringUnitWidth(h[b])*g,r),r+=u;return s}e-=s.getStringUnitWidth(t)*g}return n.halign==="justify"?s.text(t,e,r,{maxWidth:n.maxWidth||100,align:"justify"}):s.text(t,e,r),s}var qF={},wm=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=e:qF=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,r){var n,s,a;r===void 0&&(r=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var i=this.jsPDFDocument.internal.getFont(),o=i.fontStyle,l=i.fontName;if(e.font&&(l=e.font),e.fontStyle){o=e.fontStyle;var u=this.getFontList()[l];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(l,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!r){var d=t.unifyColor(e.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=t.unifyColor(e.textColor),d&&(s=this.jsPDFDocument).setTextColor.apply(s,d),d=t.unifyColor(e.lineColor),d&&(a=this.jsPDFDocument).setDrawColor.apply(a,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,r,n){return this.jsPDFDocument.splitTextToSize(e,r,n)},t.prototype.rect=function(e,r,n,s,a){return this.jsPDFDocument.rect(e,r,n,s,a)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return qF||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),yS=function(t,e){return yS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},yS(t,e)};function xP(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");yS(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var vP=function(t){xP(e,t);function e(r){var n=t.call(this)||this;return n._element=r,n}return e}(Array);function ale(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function ile(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function S2(t,e,r){r.applyStyles(e,!0);var n=Array.isArray(t)?t:[t],s=n.map(function(a){return r.getTextWidth(a)}).reduce(function(a,i){return Math.max(a,i)},0);return s}function yP(t,e,r,n){var s=e.settings.tableLineWidth,a=e.settings.tableLineColor;t.applyStyles({lineWidth:s,lineColor:a});var i=wP(s,!1);i&&t.rect(r.x,r.y,e.getWidth(t.pageSize().width),n.y-r.y,i)}function wP(t,e){var r=t>0,n=e||e===0;return r&&n?"DF":r?"S":n?"F":null}function Yw(t,e){var r,n,s,a;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(r=t.left)!==null&&r!==void 0?r:e,top:(n=t.top)!==null&&n!==void 0?n:e,right:(s=t.right)!==null&&s!==void 0?s:e,bottom:(a=t.bottom)!==null&&a!==void 0?a:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function bP(t,e){var r=Yw(e.settings.margin,0);return t.pageSize().width-(r.left+r.right)}function ole(t,e,r,n,s){var a={},i=1.3333333333333333,o=yE(e,function(R){return s.getComputedStyle(R).backgroundColor});o!=null&&(a.fillColor=o);var l=yE(e,function(R){return s.getComputedStyle(R).color});l!=null&&(a.textColor=l);var u=cle(n,r);u&&(a.cellPadding=u);var d="borderTopColor",h=i*r,m=n.borderTopWidth;if(n.borderBottomWidth===m&&n.borderRightWidth===m&&n.borderLeftWidth===m){var g=(parseFloat(m)||0)/h;g&&(a.lineWidth=g)}else a.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/h,right:(parseFloat(n.borderRightWidth)||0)/h,bottom:(parseFloat(n.borderBottomWidth)||0)/h,left:(parseFloat(n.borderLeftWidth)||0)/h},a.lineWidth.top||(a.lineWidth.right?d="borderRightColor":a.lineWidth.bottom?d="borderBottomColor":a.lineWidth.left&&(d="borderLeftColor"));var b=yE(e,function(R){return s.getComputedStyle(R)[d]});b!=null&&(a.lineColor=b);var y=["left","right","center","justify"];y.indexOf(n.textAlign)!==-1&&(a.halign=n.textAlign),y=["middle","bottom","top"],y.indexOf(n.verticalAlign)!==-1&&(a.valign=n.verticalAlign);var _=parseInt(n.fontSize||"");isNaN(_)||(a.fontSize=_/i);var N=lle(n);N&&(a.fontStyle=N);var k=(n.fontFamily||"").toLowerCase();return t.indexOf(k)!==-1&&(a.font=k),a}function lle(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function yE(t,e){var r=CP(t,e);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var s=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],a=parseInt(n[4]);return a===0||isNaN(s[0])||isNaN(s[1])||isNaN(s[2])?null:s}function CP(t,e){var r=e(t);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?t.parentElement==null?null:CP(t.parentElement,e):r}function cle(t,e){var r=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],n=96/(72/e),s=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,a=r.map(function(o){return parseInt(o||"0")/n}),i=Yw(a,0);return s>i.top&&(i.top=s),s>i.bottom&&(i.bottom=s),i}function EP(t,e,r,n,s){var a,i;n===void 0&&(n=!1),s===void 0&&(s=!1);var o;typeof e=="string"?o=r.document.querySelector(e):o=e;var l=Object.keys(t.getFontList()),u=t.scaleFactor(),d=[],h=[],m=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:d,body:h,foot:m};for(var g=0;g<o.rows.length;g++){var b=o.rows[g],y=(i=(a=b==null?void 0:b.parentElement)===null||a===void 0?void 0:a.tagName)===null||i===void 0?void 0:i.toLowerCase(),_=ule(l,u,r,b,n,s);_&&(y==="thead"?d.push(_):y==="tfoot"?m.push(_):h.push(_))}return{head:d,body:h,foot:m}}function ule(t,e,r,n,s,a){for(var i=new vP(n),o=0;o<n.cells.length;o++){var l=n.cells[o],u=r.getComputedStyle(l);if(s||u.display!=="none"){var d=void 0;a&&(d=ole(t,l,e,u,r)),i.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:d,_element:l,content:Ale(l)})}}var h=r.getComputedStyle(n);if(i.length>0&&(s||h.display!=="none"))return i}function Ale(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),e.innerText||e.textContent||""}function dle(t,e,r){for(var n=0,s=[t,e,r];n<s.length;n++){var a=s[n];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function EA(t,e,r,n,s){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(t),i=1;i<arguments.length;i++){var o=arguments[i];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])}return a}function _P(t,e){var r=new wm(t),n=r.getDocumentOptions(),s=r.getGlobalOptions();dle(s,n,e);var a=EA({},s,n,e),i;typeof window<"u"&&(i=window);var o=fle(s,n,e),l=hle(s,n,e),u=mle(r,a),d=gle(r,a,i);return{id:e.tableId,content:d,hooks:l,styles:o,settings:u}}function fle(t,e,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},s=function(l){if(l==="columnStyles"){var u=t[l],d=e[l],h=r[l];n.columnStyles=EA({},u,d,h)}else{var m=[t,e,r],g=m.map(function(b){return b[l]||{}});n[l]=EA({},g[0],g[1],g[2])}},a=0,i=Object.keys(n);a<i.length;a++){var o=i[a];s(o)}return n}function hle(t,e,r){for(var n=[t,e,r],s={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,i=n;a<i.length;a++){var o=i[a];o.didParseCell&&s.didParseCell.push(o.didParseCell),o.willDrawCell&&s.willDrawCell.push(o.willDrawCell),o.didDrawCell&&s.didDrawCell.push(o.didDrawCell),o.willDrawPage&&s.willDrawPage.push(o.willDrawPage),o.didDrawPage&&s.didDrawPage.push(o.didDrawPage)}return s}function mle(t,e){var r,n,s,a,i,o,l,u,d,h,m,g,b=Yw(e.margin,40/t.scaleFactor()),y=(r=ple(t,e.startY))!==null&&r!==void 0?r:b.top,_;e.showFoot===!0?_="everyPage":e.showFoot===!1?_="never":_=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var N;e.showHead===!0?N="everyPage":e.showHead===!1?N="never":N=(s=e.showHead)!==null&&s!==void 0?s:"everyPage";var k=(a=e.useCss)!==null&&a!==void 0?a:!1,R=e.theme||(k?"plain":"striped"),M=!!e.horizontalPageBreak,j=(i=e.horizontalPageBreakRepeat)!==null&&i!==void 0?i:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:k,theme:R,startY:y,margin:b,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:N,showFoot:_,tableLineWidth:(h=e.tableLineWidth)!==null&&h!==void 0?h:0,tableLineColor:(m=e.tableLineColor)!==null&&m!==void 0?m:200,horizontalPageBreak:M,horizontalPageBreakRepeat:j,horizontalPageBreakBehaviour:(g=e.horizontalPageBreakBehaviour)!==null&&g!==void 0?g:"afterAllRows"}}function ple(t,e){var r=t.getLastAutoTable(),n=t.scaleFactor(),s=t.pageNumber(),a=!1;if(r&&r.startPageNumber){var i=r.startPageNumber+r.pageNumber-1;a=i===s}return typeof e=="number"?e:(e==null||e===!1)&&a&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function gle(t,e,r){var n=e.head||[],s=e.body||[],a=e.foot||[];if(e.html){var i=e.includeHiddenHtml;if(r){var o=EP(t,e.html,r,i,e.useCss)||{};n=o.head||n,s=o.body||n,a=o.foot||n}else console.error("Cannot parse html in non browser environment")}var l=e.columns||xle(n,s,a);return{columns:l,head:n,body:s,foot:a}}function xle(t,e,r){var n=t[0]||e[0]||r[0]||[],s=[];return Object.keys(n).filter(function(a){return a!=="_element"}).forEach(function(a){var i=1,o;Array.isArray(n)?o=n[parseInt(a)]:o=n[a],typeof o=="object"&&!Array.isArray(o)&&(i=(o==null?void 0:o.colSpan)||1);for(var l=0;l<i;l++){var u=void 0;Array.isArray(n)?u=s.length:u=a+(l>0?"_".concat(l):"");var d={dataKey:u};s.push(d)}}),s}var wS=function(){function t(e,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=e.getDocument()}return t}(),vle=function(t){xP(e,t);function e(r,n,s,a,i,o){var l=t.call(this,r,n,o)||this;return l.cell=s,l.row=a,l.column=i,l.section=a.section,l}return e}(wS),yle=function(){function t(e,r){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,r,n,s,a,i){for(var o=0,l=r;o<l.length;o++){var u=l[o],d=new vle(e,this,n,s,a,i),h=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],h)return!1}return!0},t.prototype.callEndPageHooks=function(e,r){e.applyStyles(e.userStyles);for(var n=0,s=this.hooks.didDrawPage;n<s.length;n++){var a=s[n];a(new wS(e,this,r))}},t.prototype.callWillDrawPageHooks=function(e,r){for(var n=0,s=this.hooks.willDrawPage;n<s.length;n++){var a=s[n];a(new wS(e,this,r))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(s,a){return s+a.wrappedWidth},0);return r}else{var n=this.settings.margin;return e-n.left-n.right}},t}(),SP=function(){function t(e,r,n,s,a){a===void 0&&(a=!1),this.height=0,this.raw=e,e instanceof vP&&(this.raw=e._element,this.element=e._element),this.index=r,this.section=n,this.cells=s,this.spansMultiplePages=a}return t.prototype.getMaxCellHeight=function(e){var r=this;return e.reduce(function(n,s){var a;return Math.max(n,((a=r.cells[s.index])===null||a===void 0?void 0:a.height)||0)},0)},t.prototype.hasRowSpan=function(e){var r=this;return e.filter(function(n){var s=r.cells[n.index];return s?s.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,r){return this.getMaxCellHeight(r)<=e},t.prototype.getMinimumRowHeight=function(e,r){var n=this;return e.reduce(function(s,a){var i=n.cells[a.index];if(!i)return 0;var o=r.getLineHeight(i.styles.fontSize),l=i.padding("vertical"),u=l+o;return u>s?u:s},0)},t}(),TP=function(){function t(e,r,n){var s;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=e;var a=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,a=(s=e.content)!==null&&s!==void 0?s:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var i=a!=null?""+a:"",o=/\r\n|\r|\n/g;this.text=i.split(o)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");e=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var s=this.width-this.padding("horizontal");n=this.x+s/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},t.prototype.getContentHeight=function(e,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,s=this.styles.fontSize/e*r,a=n*s+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},t.prototype.padding=function(e){var r=Yw(this.styles.cellPadding,0);return e==="vertical"?r.top+r.bottom:e==="horizontal"?r.left+r.right:r[e]},t}(),wle=function(){function t(e,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=r,this.index=n}return t.prototype.getMaxCustomCellWidth=function(e){for(var r=0,n=0,s=e.allRows();n<s.length;n++){var a=s[n],i=a.cells[this.index];i&&typeof i.styles.cellWidth=="number"&&(r=Math.max(r,i.styles.cellWidth))}return r},t}();function ble(t,e){Cle(t,e);var r=[],n=0;e.columns.forEach(function(a){var i=a.getMaxCustomCellWidth(e);i?a.width=i:(a.width=a.wrappedWidth,r.push(a)),n+=a.width});var s=e.getWidth(t.pageSize().width)-n;s&&(s=bS(r,s,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),s&&(s=bS(r,s,function(a){return a.minWidth})),s=Math.abs(s),!e.settings.horizontalPageBreak&&s>.1/t.scaleFactor()&&(s=s<1?s:Math.round(s),console.warn("Of the table content, ".concat(s," units width could not fit page"))),_le(e),Sle(e,t),Ele(e)}function Cle(t,e){var r=t.scaleFactor(),n=e.settings.horizontalPageBreak,s=bP(t,e);e.allRows().forEach(function(a){for(var i=0,o=e.columns;i<o.length;i++){var l=o[i],u=a.cells[l.index];if(u){var d=e.hooks.didParseCell;e.callCellHooks(t,d,u,a,l,null);var h=u.padding("horizontal");u.contentWidth=S2(u.text,u.styles,t)+h;var m=S2(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,t);if(u.minReadableWidth=m+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>s?(u.minWidth=s,u.wrappedWidth=s):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var g=10/r;u.minWidth=u.styles.minCellWidth||g,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(a){for(var i=0,o=e.columns;i<o.length;i++){var l=o[i],u=a.cells[l.index];if(u&&u.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,u.wrappedWidth),l.minWidth=Math.max(l.minWidth,u.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,u.minReadableWidth);else{var d=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},h=d.cellWidth||d.minCellWidth;h&&typeof h=="number"&&(l.minWidth=h,l.wrappedWidth=h)}u&&(u.colSpan>1&&!l.minWidth&&(l.minWidth=u.minWidth),u.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=u.minWidth))}})}function bS(t,e,r){for(var n=e,s=t.reduce(function(g,b){return g+b.wrappedWidth},0),a=0;a<t.length;a++){var i=t[a],o=i.wrappedWidth/s,l=n*o,u=i.width+l,d=r(i),h=u<d?d:u;e-=h-i.width,i.width=h}if(e=Math.round(e*1e10)/1e10,e){var m=t.filter(function(g){return e<0?g.width>r(g):!0});m.length&&(e=bS(m,e,r))}return e}function Ele(t){for(var e={},r=1,n=t.allRows(),s=0;s<n.length;s++)for(var a=n[s],i=0,o=t.columns;i<o.length;i++){var l=o[i],u=e[l.index];if(r>1)r--,delete a.cells[l.index];else if(u)u.cell.height+=a.height,r=u.cell.colSpan,delete a.cells[l.index],u.left--,u.left<=1&&delete e[l.index];else{var d=a.cells[l.index];if(!d)continue;if(d.height=a.height,d.rowSpan>1){var h=n.length-s,m=d.rowSpan>h?h:d.rowSpan;e[l.index]={cell:d,left:m,row:a}}}}}function _le(t){for(var e=t.allRows(),r=0;r<e.length;r++)for(var n=e[r],s=null,a=0,i=0,o=0;o<t.columns.length;o++){var l=t.columns[o];if(i-=1,i>1&&t.columns[o+1])a+=l.width,delete n.cells[l.index];else if(s){var u=s;delete n.cells[l.index],s=null,u.width=l.width+a}else{var u=n.cells[l.index];if(!u)continue;if(i=u.colSpan,a=0,u.colSpan>1){s=u,a+=l.width;continue}u.width=l.width+a}}}function Sle(t,e){for(var r={count:0,height:0},n=0,s=t.allRows();n<s.length;n++){for(var a=s[n],i=0,o=t.columns;i<o.length;i++){var l=o[i],u=a.cells[l.index];if(u){e.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,d+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=KF(u.text,d,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=KF(u.text,d,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var h=u.styles.overflow(u.text,d);typeof h=="string"?u.text=[h]:u.text=h}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var m=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<m*u.rowSpan?r={height:m,count:u.rowSpan}:r&&r.count>0&&r.height>m&&(m=r.height),m>a.height&&(a.height=m)}}r.count--}}function KF(t,e,r,n,s){return t.map(function(a){return Tle(a,e,r,n,s)})}function Tle(t,e,r,n,s){var a=1e4*n.scaleFactor();if(e=Math.ceil(e*a)/a,e>=S2(t,r,n))return t;for(;e<S2(t+s,r,n)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+s}function NP(t,e){var r=new wm(t),n=Nle(e,r.scaleFactor()),s=new yle(e,n);return ble(r,s),r.applyStyles(r.userStyles),s}function Nle(t,e){var r=t.content,n=kle(r.columns);if(r.head.length===0){var s=$F(n,"head");s&&r.head.push(s)}if(r.foot.length===0){var s=$F(n,"foot");s&&r.foot.push(s)}var a=t.settings.theme,i=t.styles;return{columns:n,head:wE("head",r.head,n,i,a,e),body:wE("body",r.body,n,i,a,e),foot:wE("foot",r.foot,n,i,a,e)}}function wE(t,e,r,n,s,a){var i={},o=e.map(function(l,u){for(var d=0,h={},m=0,g=0,b=0,y=r;b<y.length;b++){var _=y[b];if(i[_.index]==null||i[_.index].left===0)if(g===0){var N=void 0;Array.isArray(l)?N=l[_.index-m-d]:N=l[_.dataKey];var k={};typeof N=="object"&&!Array.isArray(N)&&(k=(N==null?void 0:N.styles)||{});var R=Ile(t,_,u,s,n,a,k),M=new TP(N,R,t);h[_.dataKey]=M,h[_.index]=M,g=M.colSpan-1,i[_.index]={left:M.rowSpan-1,times:g}}else g--,m++;else i[_.index].left--,g=i[_.index].times,d++}return new SP(l,u,t,h)});return o}function $F(t,e){var r={};return t.forEach(function(n){if(n.raw!=null){var s=Ble(e,n.raw);s!=null&&(r[n.dataKey]=s)}}),Object.keys(r).length>0?r:null}function Ble(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function kle(t){return t.map(function(e,r){var n,s;return typeof e=="object"?s=(n=e.dataKey)!==null&&n!==void 0?n:r:s=r,new wle(s,e,r)})}function Ile(t,e,r,n,s,a,i){var o=ile(n),l;t==="head"?l=s.headStyles:t==="body"?l=s.bodyStyles:t==="foot"&&(l=s.footStyles);var u=EA({},o.table,o[t],s.styles,l),d=s.columnStyles[e.dataKey]||s.columnStyles[e.index]||{},h=t==="body"?d:{},m=t==="body"&&r%2===0?EA({},o.alternateRow,s.alternateRowStyles):{},g=ale(a),b=EA({},g,u,m,h);return EA(b,i)}function Fle(t,e,r){var n;r===void 0&&(r={});var s=bP(t,e),a=new Map,i=[],o=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(m){var g=e.columns.find(function(b){return b.dataKey===m||b.index===m});g&&!a.has(g.index)&&(a.set(g.index,!0),i.push(g.index),o.push(e.columns[g.index]),s-=g.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<e.columns.length;){if(a.has(d)){d++;continue}var h=e.columns[d].wrappedWidth;if(u||s>=h)u=!1,i.push(d),o.push(e.columns[d]),s-=h;else break;d++}return{colIndexes:i,columns:o,lastIndex:d-1}}function Dle(t,e){for(var r=[],n=0;n<e.columns.length;n++){var s=Fle(t,e,{start:n});s.columns.length&&(r.push(s),n=s.lastIndex)}return r}function BP(t,e){var r=e.settings,n=r.startY,s=r.margin,a={x:s.left,y:n},i=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=n+s.bottom+i;if(r.pageBreak==="avoid"){var l=e.body,u=l.reduce(function(m,g){return m+g.height},0);o+=u}var d=new wm(t);(r.pageBreak==="always"||r.startY!=null&&o>d.pageSize().height)&&(IP(d),a.y=s.top),e.callWillDrawPageHooks(d,a);var h=EA({},a);e.startPageNumber=d.pageNumber(),r.horizontalPageBreak?Rle(d,e,h,a):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&e.head.forEach(function(m){return MA(d,e,m,a,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(m,g){var b=g===e.body.length-1;T2(d,e,m,b,h,a,e.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&e.foot.forEach(function(m){return MA(d,e,m,a,e.columns)})),yP(d,e,h,a),e.callEndPageHooks(d,a),e.finalY=a.y,t.lastAutoTable=e,d.applyStyles(d.userStyles)}function Rle(t,e,r,n){var s=Dle(t,e),a=e.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")s.forEach(function(u,d){t.applyStyles(t.userStyles),d>0?Hg(t,e,r,n,u.columns,!0):WF(t,e,n,u.columns),Lle(t,e,r,n,u.columns),bE(t,e,n,u.columns)});else for(var i=-1,o=s[0],l=function(){var u=i;if(o){t.applyStyles(t.userStyles);var d=o.columns;i>=0?Hg(t,e,r,n,d,!0):WF(t,e,n,d),u=YF(t,e,i+1,n,d),bE(t,e,n,d)}var h=u-i;s.slice(1).forEach(function(m){t.applyStyles(t.userStyles),Hg(t,e,r,n,m.columns,!0),YF(t,e,i+1,n,m.columns,h),bE(t,e,n,m.columns)}),i=u};i<e.body.length-1;)l()}function WF(t,e,r,n){var s=e.settings;t.applyStyles(t.userStyles),(s.showHead==="firstPage"||s.showHead==="everyPage")&&e.head.forEach(function(a){return MA(t,e,a,r,n)})}function Lle(t,e,r,n,s){t.applyStyles(t.userStyles),e.body.forEach(function(a,i){var o=i===e.body.length-1;T2(t,e,a,o,r,n,s)})}function YF(t,e,r,n,s,a){t.applyStyles(t.userStyles),a=a??e.body.length;var i=Math.min(r+a,e.body.length),o=-1;return e.body.slice(r,i).forEach(function(l,u){var d=r+u===e.body.length-1,h=kP(t,e,d,n);l.canEntireRowFit(h,s)&&(MA(t,e,l,n,s),o=r+u)}),o}function bE(t,e,r,n){var s=e.settings;t.applyStyles(t.userStyles),(s.showFoot==="lastPage"||s.showFoot==="everyPage")&&e.foot.forEach(function(a){return MA(t,e,a,r,n)})}function Ule(t,e,r){var n=r.getLineHeight(t.styles.fontSize),s=t.padding("vertical"),a=Math.floor((e-s)/n);return Math.max(0,a)}function Mle(t,e,r,n){var s={};t.spansMultiplePages=!0,t.height=0;for(var a=0,i=0,o=r.columns;i<o.length;i++){var l=o[i],u=t.cells[l.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new TP(u.raw,u.styles,u.section);d=EA(d,u),d.text=[];var h=Ule(u,e,n);u.text.length>h&&(d.text=u.text.splice(h,u.text.length));var m=n.scaleFactor(),g=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(m,g),u.contentHeight>=e&&(u.contentHeight=e,d.styles.minCellHeight-=e),u.contentHeight>t.height&&(t.height=u.contentHeight),d.contentHeight=d.getContentHeight(m,g),d.contentHeight>a&&(a=d.contentHeight),s[l.index]=d}}var b=new SP(t.raw,-1,t.section,s,!0);b.height=a;for(var y=0,_=r.columns;y<_.length;y++){var l=_[y],d=b.cells[l.index];d&&(d.height=b.height);var u=t.cells[l.index];u&&(u.height=t.height)}return b}function Ple(t,e,r,n){var s=t.pageSize().height,a=n.settings.margin,i=a.top+a.bottom,o=s-i;e.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var l=e.getMinimumRowHeight(n.columns,t),u=l<r;if(l>o)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=e.hasRowSpan(n.columns),h=e.getMaxCellHeight(n.columns)>o;return h?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function T2(t,e,r,n,s,a,i){var o=kP(t,e,n,a);if(r.canEntireRowFit(o,i))MA(t,e,r,a,i);else if(Ple(t,r,o,e)){var l=Mle(r,o,e,t);MA(t,e,r,a,i),Hg(t,e,s,a,i),T2(t,e,l,n,s,a,i)}else Hg(t,e,s,a,i),T2(t,e,r,n,s,a,i)}function MA(t,e,r,n,s){n.x=e.settings.margin.left;for(var a=0,i=s;a<i.length;a++){var o=i[a],l=r.cells[o.index];if(!l){n.x+=o.width;continue}t.applyStyles(l.styles),l.x=n.x,l.y=n.y;var u=e.callCellHooks(t,e.hooks.willDrawCell,l,r,o,n);if(u===!1){n.x+=o.width;continue}jle(t,l,n);var d=l.getTextPos();gP(l.text,d.x,d.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,l,r,o,n),n.x+=o.width}n.y+=r.height}function jle(t,e,r){var n=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof n.lineWidth=="number"){var s=wP(n.lineWidth,n.fillColor);s&&t.rect(e.x,r.y,e.width,e.height,s)}else typeof n.lineWidth=="object"&&(n.fillColor&&t.rect(e.x,r.y,e.width,e.height,"F"),Ole(t,e,r,n.lineWidth))}function Ole(t,e,r,n){var s,a,i,o;n.top&&(s=r.x,a=r.y,i=r.x+e.width,o=r.y,n.right&&(i+=.5*n.right),n.left&&(s-=.5*n.left),l(n.top,s,a,i,o)),n.bottom&&(s=r.x,a=r.y+e.height,i=r.x+e.width,o=r.y+e.height,n.right&&(i+=.5*n.right),n.left&&(s-=.5*n.left),l(n.bottom,s,a,i,o)),n.left&&(s=r.x,a=r.y,i=r.x,o=r.y+e.height,n.top&&(a-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.left,s,a,i,o)),n.right&&(s=r.x+e.width,a=r.y,i=r.x+e.width,o=r.y+e.height,n.top&&(a-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.right,s,a,i,o));function l(u,d,h,m,g){t.getDocument().setLineWidth(u),t.getDocument().line(d,h,m,g,"S")}}function kP(t,e,r,n){var s=e.settings.margin.bottom,a=e.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&r)&&(s+=e.getFootHeight(e.columns)),t.pageSize().height-n.y-s}function Hg(t,e,r,n,s,a){s===void 0&&(s=[]),a===void 0&&(a=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!a&&e.foot.forEach(function(o){return MA(t,e,o,n,s)}),e.callEndPageHooks(t,n);var i=e.settings.margin;yP(t,e,r,n),IP(t),e.pageNumber++,n.x=i.left,n.y=i.top,r.y=i.top,e.callWillDrawPageHooks(t,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return MA(t,e,o,n,s)}),t.applyStyles(t.userStyles))}function IP(t){var e=t.pageNumber();t.setPage(e+1);var r=t.pageNumber();return r===e?(t.addPage(),!0):!1}function Qle(t){t.API.autoTable=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e[0],s=_P(this,n),a=NP(this,s);return BP(this,a),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,r,n,s){gP(e,r,n,s,this)},t.API.autoTableSetDefaults=function(e){return wm.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,r){wm.setDefaults(e,r)},t.API.autoTableHtmlToJson=function(e,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var s=new wm(this),a=EP(s,e,window,r,!1),i=a.head,o=a.body,l=((n=i[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:l,rows:o,data:o}}}var CE;function al(t,e){var r=_P(t,e),n=NP(t,r);BP(t,n)}try{if(typeof window<"u"&&window){var XF=window,JF=XF.jsPDF||((CE=XF.jspdf)===null||CE===void 0?void 0:CE.jsPDF);JF&&Qle(JF)}}catch(t){console.error("Could not apply autoTable plugin",t)}const M4="evaluaciones_pruebas",P4="evaluaciones_rubricas_estaticas",j4="evaluaciones_rubricas_interactivas",Hle="usuarios",Xw=t=>{var r,n;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion}},Vle=t=>{const e=er(Ft(Tt,M4),gn("fechaCreacion","desc"));return Tr(e,n=>{t(n.docs.map(s=>Xw(s)))},n=>{console.error("Error al suscribirse a las pruebas:",n),t([])})},Gle=async t=>{try{const{id:e,...r}=t,n=yr(Tt,M4,e);await Wi(n,{...r,fechaCreacion:cr.fromDate(new Date(r.fechaCreacion))})}catch(e){throw console.error("Error al guardar la prueba:",e),new Error("No se pudo guardar la prueba.")}},zle=async t=>{try{await mi(yr(Tt,M4,t))}catch(e){throw console.error("Error al eliminar la prueba:",e),new Error("No se pudo eliminar la prueba.")}},qle=t=>{const e=er(Ft(Tt,P4),gn("fechaCreacion","desc"));return Tr(e,n=>{t(n.docs.map(s=>Xw(s)))},n=>{console.error("Error al suscribirse a las rúbricas estáticas:",n),t([])})},Kle=async t=>{try{const{id:e,...r}=t,n=yr(Tt,P4,e);await Wi(n,{...r,fechaCreacion:cr.fromDate(new Date(r.fechaCreacion))})}catch(e){throw console.error("Error al guardar la rúbrica estática:",e),new Error("No se pudo guardar la rúbrica.")}},$le=async t=>{try{await mi(yr(Tt,P4,t))}catch(e){throw console.error("Error al eliminar la rúbrica estática:",e),new Error("No se pudo eliminar la rúbrica.")}},Wle=t=>{const e=er(Ft(Tt,j4));return Tr(e,n=>{t(n.docs.map(s=>Xw(s)))},n=>{console.error("Error al suscribirse a las rúbricas interactivas:",n),t([])})},Yle=async t=>{try{const{id:e,...r}=t,n=yr(Tt,j4,e);await Wi(n,r)}catch(e){throw console.error("Error al guardar la rúbrica interactiva:",e),new Error("No se pudo guardar la rúbrica interactiva.")}},Xle=async t=>{try{return(await Cs(Ft(Tt,j4),t)).id}catch(e){throw console.error("Error al crear la rúbrica interactiva:",e),new Error("No se pudo crear la rúbrica interactiva.")}},Jle=t=>{const e=er(Ft(Tt,Hle));return Tr(e,n=>{t(n.docs.map(s=>Xw(s)))},n=>{console.error("Error al suscribirse a los usuarios:",n),t([])})};var ZF;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(ZF||(ZF={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var e6;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(e6||(e6={}));var t6;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(t6||(t6={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6=["user","model","function","system"];var n6;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(n6||(n6={}));var s6;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(s6||(s6={}));var a6;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(a6||(a6={}));var i6;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(i6||(i6={}));var Vg;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.OTHER="OTHER"})(Vg||(Vg={}));var o6;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(o6||(o6={}));var l6;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(l6||(l6={}));var c6;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(c6||(c6={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class I0 extends Hi{constructor(e,r){super(e),this.response=r}}class FP extends Hi{constructor(e,r,n,s){super(e),this.status=r,this.statusText=n,this.errorDetails=s}}class af extends Hi{}class DP extends Hi{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zle="https://generativelanguage.googleapis.com",ece="v1beta",tce="0.24.1",rce="genai-js";var Fh;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Fh||(Fh={}));class nce{constructor(e,r,n,s,a){this.model=e,this.task=r,this.apiKey=n,this.stream=s,this.requestOptions=a}toString(){var e,r;const n=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||ece;let a=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||Zle}/${n}/${this.model}:${this.task}`;return this.stream&&(a+="?alt=sse"),a}}function sce(t){const e=[];return t!=null&&t.apiClient&&e.push(t.apiClient),e.push(`${rce}/${tce}`),e.join(" ")}async function ace(t){var e;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",sce(t.requestOptions)),r.append("x-goog-api-key",t.apiKey);let n=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(s){throw new af(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${s.message}`)}for(const[s,a]of n.entries()){if(s==="x-goog-api-key")throw new af(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new af(`Header name ${s} can only be set using the apiClient field`);r.append(s,a)}}return r}async function ice(t,e,r,n,s,a){const i=new nce(t,e,r,n,a);return{url:i.toString(),fetchOptions:Object.assign(Object.assign({},uce(a)),{method:"POST",headers:await ace(i),body:s})}}async function l1(t,e,r,n,s,a={},i=fetch){const{url:o,fetchOptions:l}=await ice(t,e,r,n,s,a);return oce(o,l,i)}async function oce(t,e,r=fetch){let n;try{n=await r(t,e)}catch(s){lce(s,t)}return n.ok||await cce(n,t),n}function lce(t,e){let r=t;throw r.name==="AbortError"?(r=new DP(`Request aborted when fetching ${e.toString()}: ${t.message}`),r.stack=t.stack):t instanceof FP||t instanceof af||(r=new Hi(`Error fetching from ${e.toString()}: ${t.message}`),r.stack=t.stack),r}async function cce(t,e){let r="",n;try{const s=await t.json();r=s.error.message,s.error.details&&(r+=` ${JSON.stringify(s.error.details)}`,n=s.error.details)}catch{}throw new FP(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${r}`,t.status,t.statusText,n)}function uce(t){const e={};if((t==null?void 0:t.signal)!==void 0||(t==null?void 0:t.timeout)>=0){const r=new AbortController;(t==null?void 0:t.timeout)>=0&&setTimeout(()=>r.abort(),t.timeout),t!=null&&t.signal&&t.signal.addEventListener("abort",()=>{r.abort()}),e.signal=r.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O4(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Hy(t.candidates[0]))throw new I0(`${Md(t)}`,t);return Ace(t)}else if(t.promptFeedback)throw new I0(`Text not available. ${Md(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Hy(t.candidates[0]))throw new I0(`${Md(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),u6(t)[0]}else if(t.promptFeedback)throw new I0(`Function call not available. ${Md(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Hy(t.candidates[0]))throw new I0(`${Md(t)}`,t);return u6(t)}else if(t.promptFeedback)throw new I0(`Function call not available. ${Md(t)}`,t)},t}function Ace(t){var e,r,n,s;const a=[];if(!((r=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||r===void 0)&&r.parts)for(const i of(s=(n=t.candidates)===null||n===void 0?void 0:n[0].content)===null||s===void 0?void 0:s.parts)i.text&&a.push(i.text),i.executableCode&&a.push("\n```"+i.executableCode.language+`
`+i.executableCode.code+"\n```\n"),i.codeExecutionResult&&a.push("\n```\n"+i.codeExecutionResult.output+"\n```\n");return a.length>0?a.join(""):""}function u6(t){var e,r,n,s;const a=[];if(!((r=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||r===void 0)&&r.parts)for(const i of(s=(n=t.candidates)===null||n===void 0?void 0:n[0].content)===null||s===void 0?void 0:s.parts)i.functionCall&&a.push(i.functionCall);if(a.length>0)return a}const dce=[Vg.RECITATION,Vg.SAFETY,Vg.LANGUAGE];function Hy(t){return!!t.finishReason&&dce.includes(t.finishReason)}function Md(t){var e,r,n;let s="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)s+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${t.promptFeedback.blockReason}`),!((r=t.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(s+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((n=t.candidates)===null||n===void 0)&&n[0]){const a=t.candidates[0];Hy(a)&&(s+=`Candidate was blocked due to ${a.finishReason}`,a.finishMessage&&(s+=`: ${a.finishMessage}`))}return s}function mx(t){return this instanceof mx?(this.v=t,this):new mx(t)}function fce(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,a=[];return s={},i("next"),i("throw"),i("return"),s[Symbol.asyncIterator]=function(){return this},s;function i(m){n[m]&&(s[m]=function(g){return new Promise(function(b,y){a.push([m,g,b,y])>1||o(m,g)})})}function o(m,g){try{l(n[m](g))}catch(b){h(a[0][3],b)}}function l(m){m.value instanceof mx?Promise.resolve(m.value.v).then(u,d):h(a[0][2],m)}function u(m){o("next",m)}function d(m){o("throw",m)}function h(m,g){m(g),a.shift(),a.length&&o(a[0][0],a[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A6=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function hce(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=gce(e),[n,s]=r.tee();return{stream:pce(n),response:mce(s)}}async function mce(t){const e=[],r=t.getReader();for(;;){const{done:n,value:s}=await r.read();if(n)return O4(xce(e));e.push(s)}}function pce(t){return fce(this,arguments,function*(){const r=t.getReader();for(;;){const{value:n,done:s}=yield mx(r.read());if(s)break;yield yield mx(O4(n))}})}function gce(t){const e=t.getReader();return new ReadableStream({start(n){let s="";return a();function a(){return e.read().then(({value:i,done:o})=>{if(o){if(s.trim()){n.error(new Hi("Failed to parse stream"));return}n.close();return}s+=i;let l=s.match(A6),u;for(;l;){try{u=JSON.parse(l[1])}catch{n.error(new Hi(`Error parsing JSON response: "${l[1]}"`));return}n.enqueue(u),s=s.substring(l[0].length),l=s.match(A6)}return a()}).catch(i=>{let o=i;throw o.stack=i.stack,o.name==="AbortError"?o=new DP("Request aborted when reading from the stream"):o=new Hi("Error reading from the stream"),o})}}})}function xce(t){const e=t[t.length-1],r={promptFeedback:e==null?void 0:e.promptFeedback};for(const n of t){if(n.candidates){let s=0;for(const a of n.candidates)if(r.candidates||(r.candidates=[]),r.candidates[s]||(r.candidates[s]={index:s}),r.candidates[s].citationMetadata=a.citationMetadata,r.candidates[s].groundingMetadata=a.groundingMetadata,r.candidates[s].finishReason=a.finishReason,r.candidates[s].finishMessage=a.finishMessage,r.candidates[s].safetyRatings=a.safetyRatings,a.content&&a.content.parts){r.candidates[s].content||(r.candidates[s].content={role:a.content.role||"user",parts:[]});const i={};for(const o of a.content.parts)o.text&&(i.text=o.text),o.functionCall&&(i.functionCall=o.functionCall),o.executableCode&&(i.executableCode=o.executableCode),o.codeExecutionResult&&(i.codeExecutionResult=o.codeExecutionResult),Object.keys(i).length===0&&(i.text=""),r.candidates[s].content.parts.push(i)}s++}n.usageMetadata&&(r.usageMetadata=n.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RP(t,e,r,n){const s=await l1(e,Fh.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(r),n);return hce(s)}async function LP(t,e,r,n){const a=await(await l1(e,Fh.GENERATE_CONTENT,t,!1,JSON.stringify(r),n)).json();return{response:O4(a)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function px(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const r of t)typeof r=="string"?e.push({text:r}):e.push(r);return vce(e)}function vce(t){const e={role:"user",parts:[]},r={role:"function",parts:[]};let n=!1,s=!1;for(const a of t)"functionResponse"in a?(r.parts.push(a),s=!0):(e.parts.push(a),n=!0);if(n&&s)throw new Hi("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!s)throw new Hi("No content is provided for sending chat message.");return n?e:r}function yce(t,e){var r;let n={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(r=e==null?void 0:e.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const s=t.generateContentRequest!=null;if(t.contents){if(s)throw new af("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=t.contents}else if(s)n=Object.assign(Object.assign({},n),t.generateContentRequest);else{const a=px(t);n.contents=[a]}return{generateContentRequest:n}}function d6(t){let e;return t.contents?e=t:e={contents:[px(t)]},t.systemInstruction&&(e.systemInstruction=UP(t.systemInstruction)),e}function wce(t){return typeof t=="string"||Array.isArray(t)?{content:px(t)}:t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],bce={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Cce(t){let e=!1;for(const r of t){const{role:n,parts:s}=r;if(!e&&n!=="user")throw new Hi(`First content should be with role 'user', got ${n}`);if(!r6.includes(n))throw new Hi(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(r6)}`);if(!Array.isArray(s))throw new Hi("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new Hi("Each Content should have at least one part");const a={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const o of s)for(const l of f6)l in o&&(a[l]+=1);const i=bce[n];for(const o of f6)if(!i.includes(o)&&a[o]>0)throw new Hi(`Content with role '${n}' can't contain '${o}' part`);e=!0}}function h6(t){var e;if(t.candidates===void 0||t.candidates.length===0)return!1;const r=(e=t.candidates[0])===null||e===void 0?void 0:e.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const n of r.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6="SILENT_ERROR";class Ece{constructor(e,r,n,s={}){this.model=r,this.params=n,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,n!=null&&n.history&&(Cce(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,r={}){var n,s,a,i,o,l;await this._sendPromise;const u=px(e),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,u]},h=Object.assign(Object.assign({},this._requestOptions),r);let m;return this._sendPromise=this._sendPromise.then(()=>LP(this._apiKey,this.model,d,h)).then(g=>{var b;if(h6(g.response)){this._history.push(u);const y=Object.assign({parts:[],role:"model"},(b=g.response.candidates)===null||b===void 0?void 0:b[0].content);this._history.push(y)}else{const y=Md(g.response);y&&console.warn(`sendMessage() was unsuccessful. ${y}. Inspect response object for details.`)}m=g}).catch(g=>{throw this._sendPromise=Promise.resolve(),g}),await this._sendPromise,m}async sendMessageStream(e,r={}){var n,s,a,i,o,l;await this._sendPromise;const u=px(e),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,u]},h=Object.assign(Object.assign({},this._requestOptions),r),m=RP(this._apiKey,this.model,d,h);return this._sendPromise=this._sendPromise.then(()=>m).catch(g=>{throw new Error(m6)}).then(g=>g.response).then(g=>{if(h6(g)){this._history.push(u);const b=Object.assign({},g.candidates[0].content);b.role||(b.role="model"),this._history.push(b)}else{const b=Md(g);b&&console.warn(`sendMessageStream() was unsuccessful. ${b}. Inspect response object for details.`)}}).catch(g=>{g.message!==m6&&console.error(g)}),m}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _ce(t,e,r,n){return(await l1(e,Fh.COUNT_TOKENS,t,!1,JSON.stringify(r),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sce(t,e,r,n){return(await l1(e,Fh.EMBED_CONTENT,t,!1,JSON.stringify(r),n)).json()}async function Tce(t,e,r,n){const s=r.requests.map(i=>Object.assign(Object.assign({},i),{model:e}));return(await l1(e,Fh.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:s}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{constructor(e,r,n={}){this.apiKey=e,this._requestOptions=n,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=UP(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(e,r={}){var n;const s=d6(e),a=Object.assign(Object.assign({},this._requestOptions),r);return LP(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},s),a)}async generateContentStream(e,r={}){var n;const s=d6(e),a=Object.assign(Object.assign({},this._requestOptions),r);return RP(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},s),a)}startChat(e){var r;return new Ece(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},e),this._requestOptions)}async countTokens(e,r={}){const n=yce(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),r);return _ce(this.apiKey,this.model,n,s)}async embedContent(e,r={}){const n=wce(e),s=Object.assign(Object.assign({},this._requestOptions),r);return Sce(this.apiKey,this.model,n,s)}async batchEmbedContents(e,r={}){const n=Object.assign(Object.assign({},this._requestOptions),r);return Tce(this.apiKey,this.model,e,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e){this.apiKey=e}getGenerativeModel(e,r){if(!e.model)throw new Hi("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new p6(this.apiKey,e,r)}getGenerativeModelFromCachedContent(e,r,n){if(!e.name)throw new af("Cached content must contain a `name` field.");if(!e.model)throw new af("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const i of s)if(r!=null&&r[i]&&e[i]&&(r==null?void 0:r[i])!==e[i]){if(i==="model"){const o=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,l=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(o===l)continue}throw new af(`Different value for "${i}" specified in modelParams (${r[i]}) and cachedContent (${e[i]})`)}const a=Object.assign(Object.assign({},r),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new p6(this.apiKey,a,n)}}const Nce=["Selección múltiple","Verdadero o Falso","Desarrollo","Términos pareados","Comprensión de lectura"],g6={"Selección múltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Términos pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de lectura":[1,2,3]},Vy=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},Bce=({open:t})=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59"}):c.jsxs(c.Fragment,{children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),kce=({item:t,index:e,showAnswers:r})=>{const n=ee.useMemo(()=>t.tipo==="Términos pareados"?[...t.pares.map(s=>s.definicion)].sort(()=>Math.random()-.5):[],[t]);return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[e+1,". ",t.pregunta," (",t.puntaje," pts)"]}),t.habilidadBloom&&c.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:t.habilidadBloom})]}),t.tipo==="Selección múltiple"&&c.jsx("div",{className:"ml-4 mt-2 space-y-2",children:t.opciones.map((s,a)=>{const i=r&&a===t.respuestaCorrecta;return c.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${i?"bg-green-100 dark:bg-green-900/50":""}`,children:[c.jsx("div",{className:"w-5 h-5 border rounded-full"}),c.jsxs("span",{children:[String.fromCharCode(65+a),") ",s]})]},a)})}),t.tipo==="Desarrollo"&&c.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"}),t.tipo==="Verdadero o Falso"&&c.jsxs("div",{className:"mt-2 ml-4 flex items-center gap-4",children:[c.jsx("span",{children:"V ___ F ___"}),r&&c.jsxs("span",{className:"font-bold p-1 rounded bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300",children:["Respuesta: ",t.respuestaCorrecta?"VERDADERO":"FALSO"]})]}),t.tipo==="Términos pareados"&&c.jsxs("div",{className:"mt-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna A: Concepto"}),c.jsx("div",{className:"space-y-2",children:t.pares.map((s,a)=>c.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-3 rounded-lg min-h-[50px] flex items-center",children:[a+1,". ",s.concepto]},a))})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna B: Definición"}),c.jsx("div",{className:"space-y-2",children:n.map((s,a)=>c.jsx("div",{className:"bg-sky-100 dark:bg-sky-900/50 p-3 rounded-lg min-h-[50px] flex items-center",children:s},a))})]})]}),r&&c.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-700",children:[c.jsx("h4",{className:"font-bold text-green-800 dark:text-green-200",children:"Respuestas Correctas:"}),c.jsx("ul",{className:"list-disc list-inside mt-2 text-sm text-slate-700 dark:text-slate-300",children:t.pares.map((s,a)=>c.jsxs("li",{children:[c.jsx("strong",{children:s.concepto})," → ",s.definicion]},a))})]})]}),t.tipo==="Comprensión de lectura"&&c.jsxs("div",{className:"ml-4 mt-2 space-y-4",children:[c.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700/50 rounded-md whitespace-pre-wrap",children:t.texto}),t.preguntas.map((s,a)=>{if(s.tipo==="Selección múltiple"){const i=s;return c.jsxs("div",{className:"pt-2",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[a+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&c.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),c.jsx("div",{className:"ml-4 mt-2 space-y-2",children:i.opciones.map((o,l)=>{const u=r&&l===i.respuestaCorrecta;return c.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${u?"bg-green-100 dark:bg-green-900/50":""}`,children:[c.jsx("div",{className:"w-5 h-5 border rounded-full"}),c.jsxs("span",{children:[String.fromCharCode(65+l),") ",o]})]},l)})})]},s.id)}if(s.tipo==="Desarrollo"){const i=s;return c.jsxs("div",{className:"pt-2",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[a+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&c.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),c.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"})]},s.id)}return null})]})]},t.id)},Ice=()=>{const[t,e]=ee.useState([]),[r,n]=ee.useState(null),[s,a]=ee.useState(!1),[i,o]=ee.useState(!1),[l,u]=ee.useState(null),[d,h]=ee.useState(!1),m={nombre:"",asignatura:il[0],nivel:x2[0],contenido:"",tiposActividad:{},dificultad:"Intermedio",isNee:!1,selectedNee:[]},[g,b]=ee.useState(m);ee.useEffect(()=>{const C=Vle(e);return()=>C()},[]);const y=C=>{const{name:E,value:B}=C.target;b(Q=>({...Q,[E]:B}))},_=C=>{b(E=>{const B={...E.tiposActividad};return B[C]?delete B[C]:B[C]=g6[C][0],{...E,tiposActividad:B}})},N=(C,E)=>{b(B=>({...B,tiposActividad:{...B.tiposActividad,[C]:E}}))},k=C=>{b(E=>{const B=E.selectedNee.includes(C)?E.selectedNee.filter(Q=>Q!==C):[...E.selectedNee,C];return{...E,selectedNee:B}})},R=async C=>{if(C.preventDefault(),!g.nombre.trim()||!g.contenido.trim()||Object.keys(g.tiposActividad).length===0){u("Nombre, Contenido y al menos un tipo de actividad son obligatorios.");return}a(!0),u(null);const E=Object.entries(g.tiposActividad).map(([D,I])=>`- ${I} ítem(s) de tipo '${D}'`).join(`
`),B=g.isNee&&g.selectedNee.length>0?`
            **Adaptación CRÍTICA para Necesidades Educativas Especiales (NEE):**
            Adapta esta prueba para estudiantes con las siguientes características: ${g.selectedNee.join(", ")}.
            Esto implica las siguientes modificaciones OBLIGATORIAS:
            - Usa un lenguaje claro, simple y directo en todas las preguntas e instrucciones.
            - Evita preguntas con doble negación o estructuras gramaticales complejas.
            - En preguntas de desarrollo, desglosa la pregunta en partes más pequeñas si es posible.
            - Para 'Comprensión de Lectura', usa textos más cortos (100-150 palabras) y con vocabulario accesible.
            - Para 'Selección Múltiple', asegúrate de que los distractores sean claramente incorrectos y no ambiguos.`:"",Q=`
            Eres un experto en evaluación educativa para la educación media en Chile.
            Genera una prueba o guía de trabajo completa en formato JSON estructurado.
            
            Información base:
            - Nombre de la prueba: ${g.nombre}
            - Asignatura: ${g.asignatura}
            - Nivel: ${g.nivel}
            - Contenido a evaluar: "${g.contenido}"
            - Tipos y cantidad de ítems solicitados:
              ${E}
            - Nivel de Dificultad General: ${g.dificultad}. 'Fácil' implica preguntas directas y de recuerdo. 'Intermedio' incluye aplicación y análisis simple. 'Avanzado' requiere síntesis, evaluación y resolución de problemas complejos.
            
            ${B}

            Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json. El objeto debe contener:
            1. 'objetivo': Un objetivo de aprendizaje claro para la evaluación.
            2. 'instruccionesGenerales': Instrucciones claras para el estudiante.
            3. 'actividades': Un array de objetos, donde cada objeto es una actividad por cada tipo de ítem solicitado. Cada actividad debe tener:
               - 'id': Un UUID generado por ti.
               - 'titulo': Un título descriptivo (ej: "Actividad 1: Selección Múltiple").
               - 'instrucciones': Instrucciones para esa actividad específica.
               - 'items': Un array de preguntas con la cantidad exacta solicitada. Cada pregunta (item) debe tener:
                   - 'id': Un UUID generado por ti.
                   - 'tipo': El tipo de ítem.
                   - 'pregunta': El enunciado de la pregunta.
                   - 'puntaje': Un puntaje numérico.
                   - 'habilidadBloom': La habilidad principal de la Taxonomía de Bloom que se trabaja (ej: Analizar, Crear, Evaluar).
                   - Campos adicionales según el tipo:
                       - Para 'Selección múltiple': 'opciones' (array de EXACTAMENTE 4 strings sin la letra de la alternativa) y 'respuestaCorrecta' (índice numérico de la respuesta correcta, de 0 a 3).
                       - Para 'Verdadero o Falso': 'respuestaCorrecta' (booleano).
                       - Para 'Términos pareados': 'pares' (array de objetos con 'concepto' y 'definicion').
                       - Para 'Comprensión de lectura': 'texto' (un string que DEBE contener un texto original y coherente de 150 a 250 palabras, generado por ti, sobre el contenido a evaluar) y 'preguntas' (un array de sub-preguntas basadas en el texto que acabas de generar, las cuales pueden ser 'Selección múltiple' o 'Desarrollo', y cada una debe tener su propia 'id', 'pregunta', 'puntaje', 'habilidadBloom', etc.).
                       - Para 'Desarrollo': no necesita campos adicionales.
        `;try{$l("Evaluación - Pruebas");const D="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",re=(await(await new PA(D).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(Q)).response).text().replace(/^```json\s*|```\s*$/g,""),q=JSON.parse(re);let z=0;q.actividades.forEach(ie=>{ie.items.forEach(P=>{z+=P.puntaje||0,P.tipo==="Comprensión de lectura"&&P.preguntas&&P.preguntas.forEach(Y=>{z+=Y.puntaje||0})})});const W={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:g.nombre,asignatura:g.asignatura,nivel:g.nivel,contenidoOriginal:g.contenido,tiposActividadOriginal:g.tiposActividad,objetivo:q.objetivo,instruccionesGenerales:q.instruccionesGenerales,puntajeIdeal:z,actividades:q.actividades,dificultad:g.dificultad,...g.isNee&&{adaptacionNEE:g.selectedNee}};n(W),h(!1)}catch(D){console.error(D),u("Error al generar la prueba con IA. Revisa la consola para más detalles.")}finally{a(!1)}},M=async()=>{if(r)try{await Gle(r),alert("Prueba guardada con éxito.")}catch(C){console.error(C),alert("No se pudo guardar la prueba.")}},j=async C=>{if(window.confirm("¿Eliminar esta prueba?"))try{await zle(C),(r==null?void 0:r.id)===C&&n(null)}catch(E){console.error(E),alert("No se pudo eliminar la prueba.")}},L=async C=>{o(!0);const E=new or("p","mm","a4"),B=20,Q=E.internal.pageSize.getHeight(),D=E.internal.pageSize.getWidth(),I=D-B*2;let O=B;const G=re=>{re.setFillColor(230,230,230),re.rect(0,0,D,25,"F"),re.setFontSize(9),re.setTextColor(0,0,0),re.text("LICEO INDUSTRIAL DE RECOLETA",B,15,{align:"left"}),re.text("SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA",D-B,15,{align:"right"})};G(E),O=30,E.setTextColor(0,0,0),E.setFont("helvetica","bold"),E.setFontSize(16),E.text(C.nombre,D/2,O,{align:"center"}),O+=10,al(E,{startY:O,body:[[{content:"Asignatura:",styles:{fontStyle:"bold"}},C.asignatura,{content:"Puntaje Ideal:",styles:{fontStyle:"bold"}},C.puntajeIdeal.toString()],[{content:"Nivel:",styles:{fontStyle:"bold"}},C.nivel,"",""],[{content:"OA:",styles:{fontStyle:"bold",valign:"top"}},{content:C.objetivo,colSpan:3}],[{content:"Instrucciones:",styles:{fontStyle:"bold",valign:"top"}},{content:C.instruccionesGenerales,colSpan:3}]],theme:"grid",styles:{fontSize:10,cellPadding:2,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},columnStyles:{0:{cellWidth:30},2:{cellWidth:30}},didDrawPage:re=>{G(E)}}),O=E.lastAutoTable.finalY+10;const se=re=>{O+re>Q-B&&(E.addPage(),G(E),O=B+15,E.setTextColor(0,0,0))},J=(re,q)=>{E.setFont("helvetica",q.isBold?"bold":"normal"),E.setFontSize(q.fontSize);const z=Array.isArray(re)?re.join(`
`):re;return E.getTextDimensions(z,{maxWidth:q.width}).h};for(const re of C.actividades){let q=J(re.titulo,{fontSize:12,width:I,isBold:!0})+J(re.instrucciones,{fontSize:10,width:I})+12;se(q),E.setFont("helvetica","bold"),E.setFontSize(12),E.setTextColor(0,0,0),E.text(re.titulo,B,O),O+=8,E.setFont("helvetica","normal"),E.setFontSize(10);const z=E.splitTextToSize(re.instrucciones,I);E.text(z,B,O),O+=z.length*(10*.35*1.15)+4;for(const[W,ie]of re.items.entries()){let P=0;const Y=`${W+1}. ${ie.pregunta} (${ie.puntaje} pts)`;switch(P+=J(Y,{fontSize:10,width:I,isBold:!0}),ie.tipo){case"Selección múltiple":ie.opciones.forEach(ce=>{P+=J(ce,{fontSize:10,width:I-5})+3}),P+=7;break;case"Verdadero o Falso":P+=10;break;case"Desarrollo":P+=30;break;case"Términos pareados":P+=ie.pares.length*12+20;break;case"Comprensión de lectura":const te=ie;P+=J(te.texto,{fontSize:10,width:I-10})+10,te.preguntas.forEach(ce=>{const Ee=`${ce.pregunta} (${ce.puntaje} pts)`;P+=J(Ee,{fontSize:10,width:I-5,isBold:!0}),ce.tipo==="Selección múltiple"?(ce.opciones.forEach(pe=>{P+=J(pe,{fontSize:10,width:I-10})+3}),P+=7):ce.tipo==="Desarrollo"&&(P+=30),P+=5}),P+=15;break}se(P),E.setFont("helvetica","bold"),E.setFontSize(10),E.setTextColor(0,0,0);const Z=E.splitTextToSize(Y,I);if(E.text(Z,B,O),O+=Z.length*5+4,E.setFont("helvetica","normal"),ie.tipo==="Selección múltiple")ie.opciones.forEach((te,ce)=>{E.text(`${String.fromCharCode(65+ce)}) ${te}`,B+5,O),O+=7});else if(ie.tipo==="Verdadero o Falso")E.text("V ______    F ______",B+5,O),O+=10;else if(ie.tipo==="Desarrollo")E.setDrawColor(200,200,200),E.setFillColor(245,245,245),E.rect(B,O,I,25,"FD"),O+=30;else if(ie.tipo==="Términos pareados"){const te=[...ie.pares.map(Ee=>Ee.definicion)].sort(()=>Math.random()-.5),ce=ie.pares.map((Ee,pe)=>[`${pe+1}. ${Ee.concepto}`,`(   ) ${te[pe]}`]);al(E,{startY:O,head:[["Columna A: Concepto","Columna B: Definición"]],body:ce,theme:"grid",styles:{fontSize:9,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},headStyles:{fontStyle:"bold",fillColor:[230,230,230],textColor:[0,0,0]},didDrawPage:Ee=>G(E)}),O=E.lastAutoTable.finalY+10}else if(ie.tipo==="Comprensión de lectura"){const te=ie;E.setFillColor(240,240,240),E.setDrawColor(200,200,200);const ce=E.splitTextToSize(te.texto,I-10),Ee=ce.length*(10*.35*1.15)+8;E.rect(B,O,I,Ee,"FD"),O+=4,E.setFont("helvetica","normal"),E.setFontSize(10),E.setTextColor(0,0,0),E.text(ce,B+5,O),O+=Ee;for(const[pe,fe]of te.preguntas.entries()){const xe=`${pe+1}. ${fe.pregunta} (${fe.puntaje} pts)`;E.setFont("helvetica","bold");const de=E.splitTextToSize(xe,I-5);E.text(de,B+5,O),O+=de.length*5+4,E.setFont("helvetica","normal"),fe.tipo==="Selección múltiple"?fe.opciones.forEach((oe,Le)=>{E.text(`${String.fromCharCode(65+Le)}) ${oe}`,B+10,O),O+=7}):fe.tipo==="Desarrollo"&&(E.setDrawColor(200,200,200),E.setFillColor(245,245,245),E.rect(B+5,O,I-5,25,"FD"),O+=30)}}O+=5}}E.save(`${C.nombre.replace(/\s/g,"_")}.pdf`),o(!1)};return r?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("button",{onClick:()=>n(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>h(!d),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[c.jsx(Bce,{open:!d})," ",c.jsxs("span",{children:[d?"Ocultar":"Mostrar"," Respuestas"]})]}),c.jsx("button",{onClick:M,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),c.jsxs("button",{onClick:()=>L(r),disabled:i,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[i?"...":c.jsx(AM,{})," PDF"]})]})]}),c.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[c.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[c.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),c.jsx("span",{children:"SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA"})]}),c.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:r.nombre}),c.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Asignatura:"})," ",r.asignatura]}),c.jsxs("p",{className:"text-right",children:[c.jsx("strong",{children:"Puntaje Ideal:"})," ",r.puntajeIdeal]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Nivel:"})," ",r.nivel]})]}),c.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[c.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",r.dificultad||"Intermedio"]}),r.adaptacionNEE&&r.adaptacionNEE.length>0&&c.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",r.adaptacionNEE.join(", ")]})]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",r.objetivo]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Instrucciones Generales:"})," ",r.instruccionesGenerales]})]}),r.actividades.map(C=>c.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[c.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:C.titulo}),c.jsx("p",{className:"italic text-sm mb-4",children:C.instrucciones}),c.jsx("div",{className:"space-y-6",children:C.items.map((E,B)=>c.jsx(kce,{item:E,index:B,showAnswers:d},E.id))})]},C.id))]})]}):c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Guía"}),c.jsxs("form",{onSubmit:R,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Guía ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"nombre",value:g.nombre,onChange:y,placeholder:"Ej: Guía N°1 - La Célula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),c.jsx("div",{}),c.jsx("select",{name:"asignatura",value:g.asignatura,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:il.map(C=>c.jsx("option",{children:C},C))}),c.jsx("select",{name:"nivel",value:g.nivel,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:x2.map(C=>c.jsx("option",{children:C},C))})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),c.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fácil","Intermedio","Avanzado"].map((C,E)=>c.jsx("button",{type:"button",onClick:()=>b(B=>({...B,dificultad:C})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50
                                            ${E===0?"rounded-l-lg":""} ${E===2?"rounded-r-lg":""}
                                            ${g.dificultad===C?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:C},C))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:g.isNee,onChange:C=>b(E=>({...E,isNee:C.target.checked,selectedNee:C.target.checked?E.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),g.isNee&&c.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:v2.map(C=>c.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:g.selectedNee.includes(C),onChange:()=>k(C),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:C})]},C))})]})]})]}),c.jsx("textarea",{name:"contenido",value:g.contenido,onChange:y,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("div",{className:"space-y-3",children:Nce.map(C=>c.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:!!g.tiposActividad[C],onChange:()=>_(C),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:C})]}),g.tiposActividad[C]&&c.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[c.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),g6[C].map(E=>c.jsx("button",{type:"button",onClick:()=>N(C,E),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${g.tiposActividad[C]===E?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:E},E))]})]},C))}),l&&c.jsx("p",{className:"text-red-500 text-sm",children:l}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",disabled:s,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:s?"Generando...":"Generar Prueba"})})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),c.jsx("div",{className:"space-y-2",children:t.length>0?t.map(C=>c.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:C.nombre}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[C.asignatura," - ",C.nivel," (",new Date(C.fechaCreacion).toLocaleDateString(),")"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>n(C),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),c.jsx("button",{onClick:()=>j(C.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},C.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},Fce=({rubricas:t,onSave:e,onDelete:r,onCreate:n})=>{const[s,a]=ee.useState(null),[i,o]=ee.useState("list"),[l,u]=ee.useState(!1),[d,h]=ee.useState(""),m=async(j,L)=>{if(!j.trim()||!L.trim()){alert("El título y la descripción son obligatorios.");return}u(!0);const C=`Crea una rúbrica de evaluación detallada sobre "${j}" con el propósito de "${L}". Genera entre 3 y 5 dimensiones de evaluación. Para cada dimensión, crea un descriptor para 4 niveles: Insuficiente, Suficiente, Competente, y Avanzado. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,E={type:"ARRAY",items:{type:"OBJECT",properties:{dimension:{type:"STRING"},insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["dimension","insuficiente","suficiente","competente","avanzado"]}};try{$l("Evaluación - Rúbricas");const B="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",G=(await(await new PA(B).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:C}]}],generationConfig:{responseMimeType:"application/json",responseSchema:E}})).response).text(),se=JSON.parse(G),J={id:crypto.randomUUID(),titulo:j,descripcion:L,fechaCreacion:new Date().toISOString(),dimensiones:se.map(re=>({id:crypto.randomUUID(),nombre:re.dimension,niveles:{insuficiente:re.insuficiente,suficiente:re.suficiente,competente:re.competente,avanzado:re.avanzado}}))};a(J)}catch(B){console.error(B),alert("Error al generar la rúbrica con IA.")}finally{u(!1)}},g=async()=>{if(!d.trim()||!s)return;const j=crypto.randomUUID(),L={id:j,nombre:d,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0};a(B=>B?{...B,dimensiones:[...B.dimensiones,L]}:null),h("");const C=`Para una rúbrica sobre "${s.titulo}", genera los descriptores para los 4 niveles de logro (Insuficiente, Suficiente, Competente, Avanzado) para la nueva dimensión: "${d}". Considera las dimensiones existentes como contexto: ${s.dimensiones.map(B=>B.nombre).join(", ")}. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,E={type:"OBJECT",properties:{insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["insuficiente","suficiente","competente","avanzado"]};try{$l("Evaluación - Rúbricas (Añadir Dimensión)");const B="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",G=(await(await new PA(B).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:C}]}],generationConfig:{responseMimeType:"application/json",responseSchema:E}})).response).text(),se=JSON.parse(G);a(J=>J?{...J,dimensiones:J.dimensiones.map(re=>re.id===j?{...re,niveles:se,isLoading:!1}:re)}:null)}catch(B){console.error("Error generating dimension descriptors:",B),alert("No se pudieron generar los descriptores."),a(Q=>Q?{...Q,dimensiones:Q.dimensiones.filter(D=>D.id!==j)}:null)}},b=()=>{if(!s)return;t.some(L=>L.id===s.id)?e(s):n(s),o("list"),a(null)},y=j=>{a(j),o("form")},_=()=>{a({id:crypto.randomUUID(),titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),o("form")},N=(j,L,C)=>{s&&a(E=>E?{...E,dimensiones:E.dimensiones.map(B=>B.id!==j?B:L==="nombre"?{...B,nombre:C}:{...B,niveles:{...B.niveles,[L]:C}})}:null)},k=(j,L)=>{a(C=>C?{...C,[j]:L}:null)},R=j=>{s&&a(L=>L?{...L,dimensiones:L.dimensiones.filter(C=>C.id!==j)}:null)},M=()=>{if(!s)return null;const j="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",L=`${j} resize-none text-sm`;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rúbrica de Aprendizaje"}),c.jsx("button",{onClick:()=>o("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Título de la Rúbrica"}),c.jsx("input",{value:s.titulo,onChange:C=>k("titulo",C.target.value),placeholder:"Ej. Rúbrica de Presentaciones Orales",className:`${j} mt-1`})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripción de la Rúbrica"}),c.jsx("textarea",{value:s.descripcion,onChange:C=>k("descripcion",C.target.value),placeholder:"Describe el propósito y los criterios de evaluación de esta rúbrica.",rows:3,className:`${j} mt-1`})]})]}),s.dimensiones.length===0&&c.jsx("div",{className:"text-center py-4",children:c.jsx("button",{onClick:()=>m(s.titulo,s.descripcion),disabled:l||!s.titulo||!s.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:l?"Generando...":"✨ Generar Rúbrica con IA"})}),s.dimensiones.length>0&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),c.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full text-sm",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:c.jsx("tr",{children:["Dimensión","Insuficiente","Suficiente","Competente","Avanzado",""].map(C=>c.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:C},C))})}),c.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:s.dimensiones.map(C=>c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 w-1/5",children:c.jsx("textarea",{value:C.nombre,onChange:E=>N(C.id,"nombre",E.target.value),rows:4,className:L})}),Object.keys(C.niveles).map(E=>c.jsx("td",{className:"p-2 w-1/5",children:C.isLoading?c.jsx("div",{className:"flex justify-center items-center h-full",children:c.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):c.jsx("textarea",{value:C.niveles[E],onChange:B=>N(C.id,E,B.target.value),rows:4,className:L})},E)),c.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:c.jsx("button",{onClick:()=>R(C.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:"🗑️"})})]},C.id))})]})}),c.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("label",{className:"text-sm font-medium",children:"Añadir Dimensión"}),c.jsx("input",{value:d,onChange:C=>h(C.target.value),placeholder:"Escribe el nombre de la nueva dimensión...",className:`${j} mt-1`})]}),c.jsx("button",{onClick:g,disabled:!d.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]})]}),c.jsx("div",{className:"flex justify-end pt-6 border-t dark:border-slate-700",children:c.jsx("button",{onClick:b,className:"bg-amber-500 text-white font-bold py-2.5 px-6 rounded-lg hover:bg-amber-600",children:"Guardar Rúbrica"})})]})};return i==="list"?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rúbricas"}),c.jsx("button",{onClick:_,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),t.length>0?t.map(j=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:j.titulo}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:j.descripcion})]}),c.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[c.jsx("button",{onClick:()=>y(j),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),c.jsx("button",{onClick:()=>r(j.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},j.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rúbricas guardadas."})]}):M()},Dce=({allUsers:t,rubricasEstaticas:e})=>{const[r,n]=ee.useState([]),[s,a]=ee.useState(null),[i,o]=ee.useState(null),[l,u]=ee.useState({rubricaEstaticaId:"",curso:""}),[d,h]=ee.useState(null);ee.useEffect(()=>{const k=Wle(n);return()=>k()},[]);const m=async k=>{k.preventDefault();const R=e.find(j=>j.id===l.rubricaEstaticaId);if(!R||!l.curso){alert("Debe seleccionar una rúbrica y un curso.");return}const M={nombre:R.titulo,curso:l.curso,asignatura:"N/A",rubricaEstaticaId:R.id,resultados:{}};try{await Xle(M),u({rubricaEstaticaId:"",curso:""})}catch(j){console.error(j),alert("No se pudo crear la evaluación con rúbrica.")}},g=k=>{a(k),o(JSON.parse(JSON.stringify(k)))},b=(k,R,M)=>{i&&o(j=>{if(!j)return null;const L=JSON.parse(JSON.stringify(j));return L.resultados[k]||(L.resultados[k]={puntajes:{},feedback:""}),L.resultados[k].puntajes[R]=M,L})},y=async()=>{if(i)try{await Yle(i),a(i),alert("Cambios guardados.")}catch(k){console.error(k),alert("No se pudieron guardar los cambios.")}},_=ee.useCallback(k=>{const R=i,M=e.find(Q=>Q.id===(R==null?void 0:R.rubricaEstaticaId));if(!R||!M)return{score:0,maxScore:0,grade:"N/A"};const j=M.dimensiones.length*4,L=R.resultados[k];if(!L)return{score:0,maxScore:j,grade:"1.0"};const C=Object.values(L.puntajes).reduce((Q,D)=>Q+D,0),E=1+6*(C/j),B=j>0?E.toFixed(1):"1.0";return{score:C,maxScore:j,grade:B}},[i,e]),N=async k=>{if(!i)return;const R=e.find(C=>C.id===i.rubricaEstaticaId),M=i.resultados[k];if(!R||!M||Object.keys(M.puntajes).length===0){alert("El estudiante no tiene puntajes para generar feedback.");return}h(k);const L=`Genera una retroalimentación constructiva para un estudiante basada en estos puntajes de rúbrica (de 1 a 4): ${R.dimensiones.map(C=>`${C.nombre}: ${M.puntajes[C.id]||"N/A"}/4`).join("; ")}. El nombre de la evaluación es "${R.titulo}". Destaca fortalezas y sugiere 1-2 áreas de mejora concretas. Sé breve y motivador.`;try{$l("Evaluación - Rúbricas Interactivas (Feedback)");const C="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",I=(await(await new PA(C).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(L)).response).text();o(O=>{if(!O)return null;const G=JSON.parse(JSON.stringify(O));return G.resultados[k].feedback=I.replace(/(\*\*|\*)/g,""),G})}catch(C){console.error(C),alert("Error al generar feedback.")}finally{h(null)}};if(s&&i){const k=e.find(M=>M.id===s.rubricaEstaticaId),R=t.filter(M=>M.profile===Vt.ESTUDIANTE&&Vy(M.curso||"")===s.curso).map(M=>M.nombreCompleto).sort();return k?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:s.nombre}),c.jsx("p",{className:"text-slate-500",children:s.curso})]}),c.jsx("button",{onClick:()=>a(null),className:"font-semibold text-slate-600",children:"← Volver"})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border-collapse",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2 border dark:border-slate-600 sticky left-0 bg-slate-100 dark:bg-slate-700 z-10 w-48",children:"Estudiante"}),k.dimensiones.map(M=>c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:M.nombre},M.id)),c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Puntaje"}),c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Nota"}),c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm w-64",children:"Retroalimentación"})]})}),c.jsx("tbody",{children:R.map(M=>{var E;const{score:j,maxScore:L,grade:C}=_(M);return c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[c.jsx("td",{className:"p-2 border dark:border-slate-600 font-semibold sticky left-0 bg-white dark:bg-slate-800 w-48",children:M}),k.dimensiones.map(B=>c.jsx("td",{className:"p-2 border dark:border-slate-600 text-center",children:c.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3,4].map(Q=>{var D;return c.jsx("button",{onClick:()=>b(M,B.id,Q),className:`w-7 h-7 rounded-md font-semibold transition-colors ${((D=i.resultados[M])==null?void 0:D.puntajes[B.id])===Q?"bg-amber-400 text-white":"bg-slate-200 dark:bg-slate-600 hover:bg-slate-300"}`,children:Q},Q)})})},B.id)),c.jsxs("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:[j,"/",L]}),c.jsx("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:C}),c.jsx("td",{className:"p-2 border dark:border-slate-600 text-sm",children:c.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[c.jsx("p",{className:"text-xs w-full",children:((E=i.resultados[M])==null?void 0:E.feedback)||"Sin generar"}),c.jsx("button",{onClick:()=>N(M),disabled:d===M,className:"text-xs bg-sky-100 text-sky-700 font-semibold px-2 py-1 rounded-md w-full disabled:opacity-50",children:d===M?"...":"Generar IA"})]})})]},M)})})]})}),c.jsx("div",{className:"mt-6 flex justify-end",children:c.jsx("button",{onClick:y,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})})]}):c.jsxs("div",{children:["Error: Rúbrica base no encontrada. ",c.jsx("button",{onClick:()=>a(null),children:"Volver"})]})}return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear Evaluación con Rúbrica"}),c.jsxs("form",{onSubmit:m,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[c.jsxs("select",{value:l.rubricaEstaticaId,onChange:k=>u({...l,rubricaEstaticaId:k.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[c.jsx("option",{value:"",children:"Seleccione una Rúbrica Guardada"}),e.map(k=>c.jsx("option",{value:k.id,children:k.titulo},k.id))]}),c.jsxs("select",{value:l.curso,onChange:k=>u({...l,curso:k.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un Curso"}),la.map(k=>c.jsx("option",{value:k,children:k},k))]}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear Evaluación"})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones Creadas"}),c.jsx("div",{className:"space-y-2",children:r.map(k=>c.jsxs("button",{onClick:()=>g(k),className:"w-full text-left p-3 rounded-md bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600",children:[c.jsx("p",{className:"font-semibold",children:k.nombre}),c.jsx("p",{className:"text-sm text-slate-500",children:k.curso})]},k.id))})]})]})},Rce=({allUsers:t})=>{const[e,r]=ee.useState(""),n=ee.useMemo(()=>Array.from(new Set(t.filter(a=>a.profile===Vt.ESTUDIANTE&&a.curso).map(a=>Vy(a.curso)))).sort(),[t]),s=ee.useMemo(()=>{const a=t.filter(i=>i.profile===Vt.ESTUDIANTE);return e?a.filter(i=>Vy(i.curso||"")===e).sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto)):a.sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto))},[t,e]);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nóminas de Cursos"}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Este es un visor de las nóminas de estudiantes. Para agregar, editar o eliminar estudiantes, utilice el módulo de ",c.jsx("strong",{className:"font-semibold",children:"Administración"}),"."]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Curso"}),c.jsxs("select",{id:"curso-filter",value:e,onChange:a=>r(a.target.value),className:"w-full max-w-xs border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Mostrar Todos los Estudiantes"}),n.map(a=>c.jsx("option",{value:a,children:a},a))]})]}),c.jsx("div",{className:"overflow-x-auto border rounded-lg dark:border-slate-700 max-h-[60vh]",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nombre Completo"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Curso"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Email"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:s.length>0?s.map(a=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:a.nombreCompleto}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:Vy(a.curso||"")}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:a.email})]},a.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No hay estudiantes que coincidan con el filtro."})})})]})})]})},Lce=()=>{const[t,e]=ee.useState("pruebas"),[r,n]=ee.useState([]),[s,a]=ee.useState([]),[i,o]=ee.useState(!0);ee.useEffect(()=>{o(!0);const h=Jle(n),m=qle(g=>{a(g),o(!1)});return()=>{h(),m()}},[]);const l=async h=>{try{await Kle(h)}catch(m){console.error(m),alert("No se pudo guardar la rúbrica.")}},u=async h=>{try{await $le(h)}catch(m){console.error(m),alert("No se pudo eliminar la rúbrica.")}},d=({tabName:h,label:m})=>c.jsx("button",{onClick:()=>e(h),className:`${t===h?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:m});return i?c.jsx("div",{className:"text-center py-10",children:"Cargando módulo de evaluaciones..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluación de Aprendizajes"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx(d,{tabName:"pruebas",label:"Pruebas y Guías"}),c.jsx(d,{tabName:"rubricas",label:"Generador de Rúbricas"}),c.jsx(d,{tabName:"rubricasInteractivas",label:"Rúbricas Interactivas"}),c.jsx(d,{tabName:"nominas",label:"Gestión de Nóminas"})]})}),c.jsxs("div",{className:"mt-6",children:[t==="pruebas"&&c.jsx(Ice,{}),t==="rubricas"&&c.jsx(Fce,{rubricas:s,onSave:l,onDelete:u,onCreate:l}),t==="rubricasInteractivas"&&c.jsx(Dce,{allUsers:r,rubricasEstaticas:s}),t==="nominas"&&c.jsx(Rce,{allUsers:r})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var N2={};N2.version="0.18.5";var MP=1252,Uce=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],Q4={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},H4=function(t){Uce.indexOf(t)!=-1&&(MP=Q4[0]=t)};function Mce(){H4(1252)}var Nc=function(t){H4(t)};function V4(){Nc(1200),Mce()}function x6(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function Pce(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function PP(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var yg=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?Pce(t.slice(2)):e==254&&r==255?PP(t.slice(2)):e==65279?t.slice(1):t},Lv=function(e){return String.fromCharCode(e)},v6=function(e){return String.fromCharCode(e)},gx,Wd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function xx(t){for(var e="",r=0,n=0,s=0,a=0,i=0,o=0,l=0,u=0;u<t.length;)r=t.charCodeAt(u++),a=r>>2,n=t.charCodeAt(u++),i=(r&3)<<4|n>>4,s=t.charCodeAt(u++),o=(n&15)<<2|s>>6,l=s&63,isNaN(n)?o=l=64:isNaN(s)&&(l=64),e+=Wd.charAt(a)+Wd.charAt(i)+Wd.charAt(o)+Wd.charAt(l);return e}function ol(t){var e="",r=0,n=0,s=0,a=0,i=0,o=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<t.length;)a=Wd.indexOf(t.charAt(u++)),i=Wd.indexOf(t.charAt(u++)),r=a<<2|i>>4,e+=String.fromCharCode(r),o=Wd.indexOf(t.charAt(u++)),n=(i&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(n)),l=Wd.indexOf(t.charAt(u++)),s=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(s));return e}var Xr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),qA=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function bf(t){return Xr?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function y6(t){return Xr?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var tl=function(e){return Xr?qA(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function Jw(t){if(typeof ArrayBuffer>"u")return tl(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function kf(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function jce(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function G4(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return G4(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var Xa=Xr?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:qA(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),s=0;for(e=0,r=0;e<t.length;r+=s,++e)if(s=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function Oce(t){for(var e=[],r=0,n=t.length+250,s=bf(t.length+255),a=0;a<t.length;++a){var i=t.charCodeAt(a);if(i<128)s[r++]=i;else if(i<2048)s[r++]=192|i>>6&31,s[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=t.charCodeAt(++a)&1023;s[r++]=240|i>>8&7,s[r++]=128|i>>2&63,s[r++]=128|o>>6&15|(i&3)<<4,s[r++]=128|o&63}else s[r++]=224|i>>12&15,s[r++]=128|i>>6&63,s[r++]=128|i&63;r>n&&(e.push(s.slice(0,r)),r=0,s=bf(65535),n=65530)}return e.push(s.slice(0,r)),Xa(e)}var io=/\u0000/g,wg=/[\u0001-\u0006]/g;function bm(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function Bc(t,e){var r=""+t;return r.length>=e?r:Vs("0",e-r.length)+r}function z4(t,e){var r=""+t;return r.length>=e?r:Vs(" ",e-r.length)+r}function B2(t,e){var r=""+t;return r.length>=e?r:r+Vs(" ",e-r.length)}function Qce(t,e){var r=""+Math.round(t);return r.length>=e?r:Vs("0",e-r.length)+r}function Hce(t,e){var r=""+t;return r.length>=e?r:Vs("0",e-r.length)+r}var w6=Math.pow(2,32);function F0(t,e){if(t>w6||t<-w6)return Qce(t,e);var r=Math.round(t);return Hce(r,e)}function k2(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var b6=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],EE=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Vce(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',t}var vr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},C6={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Gce={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function I2(t,e,r){for(var n=t<0?-1:1,s=t*n,a=0,i=1,o=0,l=1,u=0,d=0,h=Math.floor(s);u<e&&(h=Math.floor(s),o=h*i+a,d=h*u+l,!(s-h<5e-8));)s=1/(s-h),a=i,i=o,l=u,u=d;if(d>e&&(u>e?(d=l,o=a):(d=u,o=i)),!r)return[0,n*o,d];var m=Math.floor(n*o/d);return[m,n*o-m*d,d]}function dh(t,e,r){if(t>2958465||t<0)return null;var n=t|0,s=Math.floor(86400*(t-n)),a=0,i=[],o={D:n,T:s,u:86400*(t-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++s==86400&&(o.T=s=0,++n,++o.D)),n===60)i=r?[1317,10,29]:[1900,2,29],a=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],a=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),i=[l.getFullYear(),l.getMonth()+1,l.getDate()],a=l.getDay(),n<60&&(a=(a+6)%7),r&&(a=Yce(l,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=a,o}var jP=new Date(1899,11,31,0,0,0),zce=jP.getTime(),qce=new Date(1900,2,1,0,0,0);function OP(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=qce&&(r+=1440*60*1e3),(r-(zce+(t.getTimezoneOffset()-jP.getTimezoneOffset())*6e4))/(1440*60*1e3)}function q4(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Kce(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function $ce(t){var e=t<0?12:11,r=q4(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function Wce(t){var e=q4(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function vx(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=$ce(t):e===10?r=t.toFixed(10).substr(0,12):r=Wce(t),q4(Kce(r.toUpperCase()))}function Dh(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):vx(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Wl(14,OP(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function Yce(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function Xce(t,e,r,n){var s="",a=0,i=0,o=r.y,l,u=0;switch(t){case 98:o=r.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,u=2;break;default:l=o%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:l=r.m,u=e.length;break;case 3:return EE[r.m-1][1];case 5:return EE[r.m-1][0];default:return EE[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=r.d,u=e.length;break;case 3:return b6[r.q][0];default:return b6[r.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(r.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=r.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=r.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?Bc(r.S,e.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,a=Math.round(i*(r.S+r.u)),a>=60*i&&(a=0),e==="s"?a===0?"0":""+a/i:(s=Bc(a,2+n),e==="ss"?s.substr(0,2):"."+s.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:l=o,u=1;break}var d=u>0?Bc(l,u):"";return d}function Yd(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var QP=/%/g;function Jce(t,e,r){var n=e.replace(QP,""),s=e.length-n.length;return BA(t,n,r*Math.pow(10,2*s))+Vs("%",s)}function Zce(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return BA(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function HP(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+HP(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%s;if(a<0&&(a+=s),r=(e/Math.pow(10,a)).toPrecision(n+1+(s+a)%s),r.indexOf("e")===-1){var i=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+a):r+="E+"+(i-a);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var VP=/# (\?+)( ?)\/( ?)(\d+)/;function eue(t,e,r){var n=parseInt(t[4],10),s=Math.round(e*n),a=Math.floor(s/n),i=s-a*n,o=n;return r+(a===0?"":""+a)+" "+(i===0?Vs(" ",t[1].length+1+t[4].length):z4(i,t[1].length)+t[2]+"/"+t[3]+Bc(o,t[4].length))}function tue(t,e,r){return r+(e===0?"":""+e)+Vs(" ",t[1].length+2+t[4].length)}var GP=/^#*0*\.([0#]+)/,zP=/\).*[0#]/,qP=/\(###\) ###\\?-####/;function ro(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function E6(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function _6(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function rue(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function nue(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Dl(t,e,r){if(t.charCodeAt(0)===40&&!e.match(zP)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Dl("n",n,r):"("+Dl("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return Zce(t,e,r);if(e.indexOf("%")!==-1)return Jce(t,e,r);if(e.indexOf("E")!==-1)return HP(e,r);if(e.charCodeAt(0)===36)return"$"+Dl(t,e.substr(e.charAt(1)==" "?2:1),r);var s,a,i,o,l=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+F0(l,e.length);if(e.match(/^[#?]+$/))return s=F0(r,0),s==="0"&&(s=""),s.length>e.length?s:ro(e.substr(0,e.length-s.length))+s;if(a=e.match(VP))return eue(a,l,u);if(e.match(/^#+0+$/))return u+F0(l,e.length-e.indexOf("0"));if(a=e.match(GP))return s=E6(r,a[1].length).replace(/^([^\.]+)$/,"$1."+ro(a[1])).replace(/\.$/,"."+ro(a[1])).replace(/\.(\d*)$/,function(b,y){return"."+y+Vs("0",ro(a[1]).length-y.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return u+E6(l,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return u+Yd(F0(l,0));if(a=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Dl(t,e,-r):Yd(""+(Math.floor(r)+rue(r,a[1].length)))+"."+Bc(_6(r,a[1].length),a[1].length);if(a=e.match(/^#,#*,#0/))return Dl(t,e.replace(/^#,#*,/,""),r);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=bm(Dl(t,e.replace(/[\\-]/g,""),r)),i=0,bm(bm(e.replace(/\\/g,"")).replace(/[0#]/g,function(b){return i<s.length?s.charAt(i++):b==="0"?"0":""}));if(e.match(qP))return s=Dl(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=I2(l,Math.pow(10,i)-1,!1),s=""+u,d=BA("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=B2(o[2],i),d.length<a[4].length&&(d=ro(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=I2(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?z4(o[1],i)+a[2]+"/"+a[3]+B2(o[2],i):Vs(" ",2*i+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return s=F0(r,0),e.length<=s.length?s:ro(e.substr(0,e.length-s.length))+s;if(a=e.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var h=e.indexOf(".")-i,m=e.length-s.length-h;return ro(e.substr(0,h)+s+e.substr(e.length-m))}if(a=e.match(/^00,000\.([#0]*0)$/))return i=_6(r,a[1].length),r<0?"-"+Dl(t,e,-r):Yd(nue(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?Bc(0,3-b.length):"")+b})+"."+Bc(i,a[1].length);switch(e){case"###,##0.00":return Dl(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var g=Yd(F0(l,0));return g!=="0"?u+g:"";case"###,###.00":return Dl(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Dl(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function sue(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return BA(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function aue(t,e,r){var n=e.replace(QP,""),s=e.length-n.length;return BA(t,n,r*Math.pow(10,2*s))+Vs("%",s)}function KP(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+KP(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%s;if(a<0&&(a+=s),r=(e/Math.pow(10,a)).toPrecision(n+1+(s+a)%s),!r.match(/[Ee]/)){var i=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+a):r+="E+"+(i-a),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function vu(t,e,r){if(t.charCodeAt(0)===40&&!e.match(zP)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?vu("n",n,r):"("+vu("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return sue(t,e,r);if(e.indexOf("%")!==-1)return aue(t,e,r);if(e.indexOf("E")!==-1)return KP(e,r);if(e.charCodeAt(0)===36)return"$"+vu(t,e.substr(e.charAt(1)==" "?2:1),r);var s,a,i,o,l=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+Bc(l,e.length);if(e.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>e.length?s:ro(e.substr(0,e.length-s.length))+s;if(a=e.match(VP))return tue(a,l,u);if(e.match(/^#+0+$/))return u+Bc(l,e.length-e.indexOf("0"));if(a=e.match(GP))return s=(""+r).replace(/^([^\.]+)$/,"$1."+ro(a[1])).replace(/\.$/,"."+ro(a[1])),s=s.replace(/\.(\d*)$/,function(b,y){return"."+y+Vs("0",ro(a[1]).length-y.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return u+Yd(""+l);if(a=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+vu(t,e,-r):Yd(""+r)+"."+Vs("0",a[1].length);if(a=e.match(/^#,#*,#0/))return vu(t,e.replace(/^#,#*,/,""),r);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=bm(vu(t,e.replace(/[\\-]/g,""),r)),i=0,bm(bm(e.replace(/\\/g,"")).replace(/[0#]/g,function(b){return i<s.length?s.charAt(i++):b==="0"?"0":""}));if(e.match(qP))return s=vu(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=I2(l,Math.pow(10,i)-1,!1),s=""+u,d=BA("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=B2(o[2],i),d.length<a[4].length&&(d=ro(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=I2(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?z4(o[1],i)+a[2]+"/"+a[3]+B2(o[2],i):Vs(" ",2*i+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return s=""+r,e.length<=s.length?s:ro(e.substr(0,e.length-s.length))+s;if(a=e.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var h=e.indexOf(".")-i,m=e.length-s.length-h;return ro(e.substr(0,h)+s+e.substr(e.length-m))}if(a=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+vu(t,e,-r):Yd(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?Bc(0,3-b.length):"")+b})+"."+Bc(0,a[1].length);switch(e){case"###,###":case"##,###":case"#,###":var g=Yd(""+l);return g!=="0"?u+g:"";default:if(e.match(/\.[0#?]*$/))return vu(t,e.slice(0,e.lastIndexOf(".")),r)+ro(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function BA(t,e,r){return(r|0)===r?vu(t,e,r):Dl(t,e,r)}function iue(t){for(var e=[],r=!1,n=0,s=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(s,n-s),s=n+1}if(e[e.length]=t.substr(s),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var $P=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function ip(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":k2(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="上午/下午")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match($P))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function oue(t,e,r,n){for(var s=[],a="",i=0,o="",l="t",u,d,h,m="H";i<t.length;)switch(o=t.charAt(i)){case"G":if(!k2(t,i))throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"G",v:"General"},i+=7;break;case'"':for(a="";(h=t.charCodeAt(++i))!==34&&i<t.length;)a+=String.fromCharCode(h);s[s.length]={t:"t",v:a},++i;break;case"\\":var g=t.charAt(++i),b=g==="("||g===")"?g:"t";s[s.length]={t:b,v:g},++i;break;case"_":s[s.length]={t:"t",v:" "},i+=2;break;case"@":s[s.length]={t:"T",v:e},++i;break;case"B":case"b":if(t.charAt(i+1)==="1"||t.charAt(i+1)==="2"){if(u==null&&(u=dh(e,r,t.charAt(i+1)==="2"),u==null))return"";s[s.length]={t:"X",v:t.substr(i,2)},l=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=dh(e,r),u==null))return"";for(a=o;++i<t.length&&t.charAt(i).toLowerCase()===o;)a+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=m),s[s.length]={t:o,v:a},l=o;break;case"A":case"a":case"上":var y={t:o,v:o};if(u==null&&(u=dh(e,r)),t.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(y.v=u.H>=12?"P":"A"),y.t="T",m="h",i+=3):t.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(y.v=u.H>=12?"PM":"AM"),y.t="T",i+=5,m="h"):t.substr(i,5).toUpperCase()==="上午/下午"?(u!=null&&(y.v=u.H>=12?"下午":"上午"),y.t="T",i+=5,m="h"):(y.t="t",++i),u==null&&y.t==="T")return"";s[s.length]=y,l=o;break;case"[":for(a=o;t.charAt(i++)!=="]"&&i<t.length;)a+=t.charAt(i);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match($P)){if(u==null&&(u=dh(e,r),u==null))return"";s[s.length]={t:"Z",v:a.toLowerCase()},l=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",ip(t)||(s[s.length]={t:"t",v:a}));break;case".":if(u!=null){for(a=o;++i<t.length&&(o=t.charAt(i))==="0";)a+=o;s[s.length]={t:"s",v:a};break}case"0":case"#":for(a=o;++i<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(i))>-1;)a+=o;s[s.length]={t:"n",v:a};break;case"?":for(a=o;t.charAt(++i)===o;)a+=o;s[s.length]={t:o,v:a},l=o;break;case"*":++i,(t.charAt(i)==" "||t.charAt(i)=="*")&&++i;break;case"(":case")":s[s.length]={t:n===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=o;i<t.length&&"0123456789".indexOf(t.charAt(++i))>-1;)a+=t.charAt(i);s[s.length]={t:"D",v:a};break;case" ":s[s.length]={t:o,v:o},++i;break;case"$":s[s.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"t",v:o},++i;break}var _=0,N=0,k;for(i=s.length-1,l="t";i>=0;--i)switch(s[i].t){case"h":case"H":s[i].t=m,l="h",_<1&&(_=1);break;case"s":(k=s[i].v.match(/\.0+$/))&&(N=Math.max(N,k[0].length-1)),_<3&&(_=3);case"d":case"y":case"M":case"e":l=s[i].t;break;case"m":l==="s"&&(s[i].t="M",_<2&&(_=2));break;case"X":break;case"Z":_<1&&s[i].v.match(/[Hh]/)&&(_=1),_<2&&s[i].v.match(/[Mm]/)&&(_=2),_<3&&s[i].v.match(/[Ss]/)&&(_=3)}switch(_){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var R="",M;for(i=0;i<s.length;++i)switch(s[i].t){case"t":case"T":case" ":case"D":break;case"X":s[i].v="",s[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[i].v=Xce(s[i].t.charCodeAt(0),s[i].v,u,N),s[i].t="t";break;case"n":case"?":for(M=i+1;s[M]!=null&&((o=s[M].t)==="?"||o==="D"||(o===" "||o==="t")&&s[M+1]!=null&&(s[M+1].t==="?"||s[M+1].t==="t"&&s[M+1].v==="/")||s[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(s[M].v==="/"||s[M].v===" "&&s[M+1]!=null&&s[M+1].t=="?"));)s[i].v+=s[M].v,s[M]={v:"",t:";"},++M;R+=s[i].v,i=M-1;break;case"G":s[i].t="t",s[i].v=Dh(e,r);break}var j="",L,C;if(R.length>0){R.charCodeAt(0)==40?(L=e<0&&R.charCodeAt(0)===45?-e:e,C=BA("n",R,L)):(L=e<0&&n>1?-e:e,C=BA("n",R,L),L<0&&s[0]&&s[0].t=="t"&&(C=C.substr(1),s[0].v="-"+s[0].v)),M=C.length-1;var E=s.length;for(i=0;i<s.length;++i)if(s[i]!=null&&s[i].t!="t"&&s[i].v.indexOf(".")>-1){E=i;break}var B=s.length;if(E===s.length&&C.indexOf("E")===-1){for(i=s.length-1;i>=0;--i)s[i]==null||"n?".indexOf(s[i].t)===-1||(M>=s[i].v.length-1?(M-=s[i].v.length,s[i].v=C.substr(M+1,s[i].v.length)):M<0?s[i].v="":(s[i].v=C.substr(0,M+1),M=-1),s[i].t="t",B=i);M>=0&&B<s.length&&(s[B].v=C.substr(0,M+1)+s[B].v)}else if(E!==s.length&&C.indexOf("E")===-1){for(M=C.indexOf(".")-1,i=E;i>=0;--i)if(!(s[i]==null||"n?".indexOf(s[i].t)===-1)){for(d=s[i].v.indexOf(".")>-1&&i===E?s[i].v.indexOf(".")-1:s[i].v.length-1,j=s[i].v.substr(d+1);d>=0;--d)M>=0&&(s[i].v.charAt(d)==="0"||s[i].v.charAt(d)==="#")&&(j=C.charAt(M--)+j);s[i].v=j,s[i].t="t",B=i}for(M>=0&&B<s.length&&(s[B].v=C.substr(0,M+1)+s[B].v),M=C.indexOf(".")+1,i=E;i<s.length;++i)if(!(s[i]==null||"n?(".indexOf(s[i].t)===-1&&i!==E)){for(d=s[i].v.indexOf(".")>-1&&i===E?s[i].v.indexOf(".")+1:0,j=s[i].v.substr(0,d);d<s[i].v.length;++d)M<C.length&&(j+=C.charAt(M++));s[i].v=j,s[i].t="t",B=i}}}for(i=0;i<s.length;++i)s[i]!=null&&"n?".indexOf(s[i].t)>-1&&(L=n>1&&e<0&&i>0&&s[i-1].v==="-"?-e:e,s[i].v=BA(s[i].t,s[i].v,L),s[i].t="t");var Q="";for(i=0;i!==s.length;++i)s[i]!=null&&(Q+=s[i].v);return Q}var S6=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function T6(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function lue(t,e){var r=iue(t),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var a=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,a];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(S6),o=r[1].match(S6);return T6(e,i)?[n,r[0]]:T6(e,o)?[n,r[1]]:[n,r[i!=null&&o!=null?2:1]]}return[n,a]}function Wl(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:vr)[t],n==null&&(n=r.table&&r.table[C6[t]]||vr[C6[t]]),n==null&&(n=Gce[t]||"General");break}if(k2(n,0))return Dh(e,r);e instanceof Date&&(e=OP(e,r.date1904));var s=lue(n,e);if(k2(s[1]))return Dh(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return oue(s[1],e,r,s[0])}function kA(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(vr[r]==null){e<0&&(e=r);continue}if(vr[r]==t){e=r;break}}e<0&&(e=391)}return vr[e]=t,e}function Zw(t){for(var e=0;e!=392;++e)t[e]!==void 0&&kA(t[e],e)}function op(){vr=Vce()}var cue={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},WP=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function uue(t){var e=typeof t=="number"?vr[t]:t;return e=e.replace(WP,"(\\d+)"),new RegExp("^"+e+"$")}function Aue(t,e,r){var n=-1,s=-1,a=-1,i=-1,o=-1,l=-1;(e.match(WP)||[]).forEach(function(h,m){var g=parseInt(r[m+1],10);switch(h.toLowerCase().charAt(0)){case"y":n=g;break;case"d":a=g;break;case"h":i=g;break;case"s":l=g;break;case"m":i>=0?o=g:s=g;break}}),l>=0&&o==-1&&s>=0&&(o=s,s=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return i==-1&&o==-1&&l==-1?u:n==-1&&s==-1&&a==-1?d:u+"T"+d}var due=function(){var t={};t.version="1.2.0";function e(){for(var C=0,E=new Array(256),B=0;B!=256;++B)C=B,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,E[B]=C;return typeof Int32Array<"u"?new Int32Array(E):E}var r=e();function n(C){var E=0,B=0,Q=0,D=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(Q=0;Q!=256;++Q)D[Q]=C[Q];for(Q=0;Q!=256;++Q)for(B=C[Q],E=256+Q;E<4096;E+=256)B=D[E]=B>>>8^C[B&255];var I=[];for(Q=1;Q!=16;++Q)I[Q-1]=typeof Int32Array<"u"?D.subarray(Q*256,Q*256+256):D.slice(Q*256,Q*256+256);return I}var s=n(r),a=s[0],i=s[1],o=s[2],l=s[3],u=s[4],d=s[5],h=s[6],m=s[7],g=s[8],b=s[9],y=s[10],_=s[11],N=s[12],k=s[13],R=s[14];function M(C,E){for(var B=E^-1,Q=0,D=C.length;Q<D;)B=B>>>8^r[(B^C.charCodeAt(Q++))&255];return~B}function j(C,E){for(var B=E^-1,Q=C.length-15,D=0;D<Q;)B=R[C[D++]^B&255]^k[C[D++]^B>>8&255]^N[C[D++]^B>>16&255]^_[C[D++]^B>>>24]^y[C[D++]]^b[C[D++]]^g[C[D++]]^m[C[D++]]^h[C[D++]]^d[C[D++]]^u[C[D++]]^l[C[D++]]^o[C[D++]]^i[C[D++]]^a[C[D++]]^r[C[D++]];for(Q+=15;D<Q;)B=B>>>8^r[(B^C[D++])&255];return~B}function L(C,E){for(var B=E^-1,Q=0,D=C.length,I=0,O=0;Q<D;)I=C.charCodeAt(Q++),I<128?B=B>>>8^r[(B^I)&255]:I<2048?(B=B>>>8^r[(B^(192|I>>6&31))&255],B=B>>>8^r[(B^(128|I&63))&255]):I>=55296&&I<57344?(I=(I&1023)+64,O=C.charCodeAt(Q++)&1023,B=B>>>8^r[(B^(240|I>>8&7))&255],B=B>>>8^r[(B^(128|I>>2&63))&255],B=B>>>8^r[(B^(128|O>>6&15|(I&3)<<4))&255],B=B>>>8^r[(B^(128|O&63))&255]):(B=B>>>8^r[(B^(224|I>>12&15))&255],B=B>>>8^r[(B^(128|I>>6&63))&255],B=B>>>8^r[(B^(128|I&63))&255]);return~B}return t.table=r,t.bstr=M,t.buf=j,t.str=L,t}(),ur=function(){var e={};e.version="1.2.1";function r(he,ke){for(var _e=he.split("/"),Se=ke.split("/"),Ne=0,Ie=0,Ke=Math.min(_e.length,Se.length);Ne<Ke;++Ne){if(Ie=_e[Ne].length-Se[Ne].length)return Ie;if(_e[Ne]!=Se[Ne])return _e[Ne]<Se[Ne]?-1:1}return _e.length-Se.length}function n(he){if(he.charAt(he.length-1)=="/")return he.slice(0,-1).indexOf("/")===-1?he:n(he.slice(0,-1));var ke=he.lastIndexOf("/");return ke===-1?he:he.slice(0,ke+1)}function s(he){if(he.charAt(he.length-1)=="/")return s(he.slice(0,-1));var ke=he.lastIndexOf("/");return ke===-1?he:he.slice(ke+1)}function a(he,ke){typeof ke=="string"&&(ke=new Date(ke));var _e=ke.getHours();_e=_e<<6|ke.getMinutes(),_e=_e<<5|ke.getSeconds()>>>1,he.write_shift(2,_e);var Se=ke.getFullYear()-1980;Se=Se<<4|ke.getMonth()+1,Se=Se<<5|ke.getDate(),he.write_shift(2,Se)}function i(he){var ke=he.read_shift(2)&65535,_e=he.read_shift(2)&65535,Se=new Date,Ne=_e&31;_e>>>=5;var Ie=_e&15;_e>>>=4,Se.setMilliseconds(0),Se.setFullYear(_e+1980),Se.setMonth(Ie-1),Se.setDate(Ne);var Ke=ke&31;ke>>>=5;var rt=ke&63;return ke>>>=6,Se.setHours(ke),Se.setMinutes(rt),Se.setSeconds(Ke<<1),Se}function o(he){ui(he,0);for(var ke={},_e=0;he.l<=he.length-4;){var Se=he.read_shift(2),Ne=he.read_shift(2),Ie=he.l+Ne,Ke={};switch(Se){case 21589:_e=he.read_shift(1),_e&1&&(Ke.mtime=he.read_shift(4)),Ne>5&&(_e&2&&(Ke.atime=he.read_shift(4)),_e&4&&(Ke.ctime=he.read_shift(4))),Ke.mtime&&(Ke.mt=new Date(Ke.mtime*1e3));break}he.l=Ie,ke[Se]=Ke}return ke}var l;function u(){return l||(l={})}function d(he,ke){if(he[0]==80&&he[1]==75)return nn(he,ke);if((he[0]|32)==109&&(he[1]|32)==105)return Na(he,ke);if(he.length<512)throw new Error("CFB file size "+he.length+" < 512");var _e=3,Se=512,Ne=0,Ie=0,Ke=0,rt=0,He=0,We=[],Je=he.slice(0,512);ui(Je,0);var yt=h(Je);switch(_e=yt[0],_e){case 3:Se=512;break;case 4:Se=4096;break;case 0:if(yt[1]==0)return nn(he,ke);default:throw new Error("Major Version: Expected 3 or 4 saw "+_e)}Se!==512&&(Je=he.slice(0,Se),ui(Je,28));var Bt=he.slice(0,Se);m(Je,_e);var Ot=Je.read_shift(4,"i");if(_e===3&&Ot!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ot);Je.l+=4,Ke=Je.read_shift(4,"i"),Je.l+=4,Je.chk("00100000","Mini Stream Cutoff Size: "),rt=Je.read_shift(4,"i"),Ne=Je.read_shift(4,"i"),He=Je.read_shift(4,"i"),Ie=Je.read_shift(4,"i");for(var Nt=-1,Ut=0;Ut<109&&(Nt=Je.read_shift(4,"i"),!(Nt<0));++Ut)We[Ut]=Nt;var dr=g(he,Se);_(He,Ie,dr,Se,We);var jr=k(dr,Ke,We,Se);jr[Ke].name="!Directory",Ne>0&&rt!==O&&(jr[rt].name="!MiniFAT"),jr[We[0]].name="!FAT",jr.fat_addrs=We,jr.ssz=Se;var Or={},zr=[],Rs=[],pi=[];R(Ke,jr,dr,zr,Ne,Or,Rs,rt),b(Rs,pi,zr),zr.shift();var Ls={FileIndex:Rs,FullPaths:pi};return ke&&ke.raw&&(Ls.raw={header:Bt,sectors:dr}),Ls}function h(he){if(he[he.l]==80&&he[he.l+1]==75)return[0,0];he.chk(G,"Header Signature: "),he.l+=16;var ke=he.read_shift(2,"u");return[he.read_shift(2,"u"),ke]}function m(he,ke){var _e=9;switch(he.l+=2,_e=he.read_shift(2)){case 9:if(ke!=3)throw new Error("Sector Shift: Expected 9 saw "+_e);break;case 12:if(ke!=4)throw new Error("Sector Shift: Expected 12 saw "+_e);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+_e)}he.chk("0600","Mini Sector Shift: "),he.chk("000000000000","Reserved: ")}function g(he,ke){for(var _e=Math.ceil(he.length/ke)-1,Se=[],Ne=1;Ne<_e;++Ne)Se[Ne-1]=he.slice(Ne*ke,(Ne+1)*ke);return Se[_e-1]=he.slice(_e*ke),Se}function b(he,ke,_e){for(var Se=0,Ne=0,Ie=0,Ke=0,rt=0,He=_e.length,We=[],Je=[];Se<He;++Se)We[Se]=Je[Se]=Se,ke[Se]=_e[Se];for(;rt<Je.length;++rt)Se=Je[rt],Ne=he[Se].L,Ie=he[Se].R,Ke=he[Se].C,We[Se]===Se&&(Ne!==-1&&We[Ne]!==Ne&&(We[Se]=We[Ne]),Ie!==-1&&We[Ie]!==Ie&&(We[Se]=We[Ie])),Ke!==-1&&(We[Ke]=Se),Ne!==-1&&Se!=We[Se]&&(We[Ne]=We[Se],Je.lastIndexOf(Ne)<rt&&Je.push(Ne)),Ie!==-1&&Se!=We[Se]&&(We[Ie]=We[Se],Je.lastIndexOf(Ie)<rt&&Je.push(Ie));for(Se=1;Se<He;++Se)We[Se]===Se&&(Ie!==-1&&We[Ie]!==Ie?We[Se]=We[Ie]:Ne!==-1&&We[Ne]!==Ne&&(We[Se]=We[Ne]));for(Se=1;Se<He;++Se)if(he[Se].type!==0){if(rt=Se,rt!=We[rt])do rt=We[rt],ke[Se]=ke[rt]+"/"+ke[Se];while(rt!==0&&We[rt]!==-1&&rt!=We[rt]);We[Se]=-1}for(ke[0]+="/",Se=1;Se<He;++Se)he[Se].type!==2&&(ke[Se]+="/")}function y(he,ke,_e){for(var Se=he.start,Ne=he.size,Ie=[],Ke=Se;_e&&Ne>0&&Ke>=0;)Ie.push(ke.slice(Ke*I,Ke*I+I)),Ne-=I,Ke=ch(_e,Ke*4);return Ie.length===0?ct(0):Xa(Ie).slice(0,he.size)}function _(he,ke,_e,Se,Ne){var Ie=O;if(he===O){if(ke!==0)throw new Error("DIFAT chain shorter than expected")}else if(he!==-1){var Ke=_e[he],rt=(Se>>>2)-1;if(!Ke)return;for(var He=0;He<rt&&(Ie=ch(Ke,He*4))!==O;++He)Ne.push(Ie);_(ch(Ke,Se-4),ke-1,_e,Se,Ne)}}function N(he,ke,_e,Se,Ne){var Ie=[],Ke=[];Ne||(Ne=[]);var rt=Se-1,He=0,We=0;for(He=ke;He>=0;){Ne[He]=!0,Ie[Ie.length]=He,Ke.push(he[He]);var Je=_e[Math.floor(He*4/Se)];if(We=He*4&rt,Se<4+We)throw new Error("FAT boundary crossed: "+He+" 4 "+Se);if(!he[Je])break;He=ch(he[Je],We)}return{nodes:Ie,data:j6([Ke])}}function k(he,ke,_e,Se){var Ne=he.length,Ie=[],Ke=[],rt=[],He=[],We=Se-1,Je=0,yt=0,Bt=0,Ot=0;for(Je=0;Je<Ne;++Je)if(rt=[],Bt=Je+ke,Bt>=Ne&&(Bt-=Ne),!Ke[Bt]){He=[];var Nt=[];for(yt=Bt;yt>=0;){Nt[yt]=!0,Ke[yt]=!0,rt[rt.length]=yt,He.push(he[yt]);var Ut=_e[Math.floor(yt*4/Se)];if(Ot=yt*4&We,Se<4+Ot)throw new Error("FAT boundary crossed: "+yt+" 4 "+Se);if(!he[Ut]||(yt=ch(he[Ut],Ot),Nt[yt]))break}Ie[Bt]={nodes:rt,data:j6([He])}}return Ie}function R(he,ke,_e,Se,Ne,Ie,Ke,rt){for(var He=0,We=Se.length?2:0,Je=ke[he].data,yt=0,Bt=0,Ot;yt<Je.length;yt+=128){var Nt=Je.slice(yt,yt+128);ui(Nt,64),Bt=Nt.read_shift(2),Ot=Z4(Nt,0,Bt-We),Se.push(Ot);var Ut={name:Ot,type:Nt.read_shift(1),color:Nt.read_shift(1),L:Nt.read_shift(4,"i"),R:Nt.read_shift(4,"i"),C:Nt.read_shift(4,"i"),clsid:Nt.read_shift(16),state:Nt.read_shift(4,"i"),start:0,size:0},dr=Nt.read_shift(2)+Nt.read_shift(2)+Nt.read_shift(2)+Nt.read_shift(2);dr!==0&&(Ut.ct=M(Nt,Nt.l-8));var jr=Nt.read_shift(2)+Nt.read_shift(2)+Nt.read_shift(2)+Nt.read_shift(2);jr!==0&&(Ut.mt=M(Nt,Nt.l-8)),Ut.start=Nt.read_shift(4,"i"),Ut.size=Nt.read_shift(4,"i"),Ut.size<0&&Ut.start<0&&(Ut.size=Ut.type=0,Ut.start=O,Ut.name=""),Ut.type===5?(He=Ut.start,Ne>0&&He!==O&&(ke[He].name="!StreamData")):Ut.size>=4096?(Ut.storage="fat",ke[Ut.start]===void 0&&(ke[Ut.start]=N(_e,Ut.start,ke.fat_addrs,ke.ssz)),ke[Ut.start].name=Ut.name,Ut.content=ke[Ut.start].data.slice(0,Ut.size)):(Ut.storage="minifat",Ut.size<0?Ut.size=0:He!==O&&Ut.start!==O&&ke[He]&&(Ut.content=y(Ut,ke[He].data,(ke[rt]||{}).data))),Ut.content&&ui(Ut.content,0),Ie[Ot]=Ut,Ke.push(Ut)}}function M(he,ke){return new Date((el(he,ke+4)/1e7*Math.pow(2,32)+el(he,ke)/1e7-11644473600)*1e3)}function j(he,ke){return u(),d(l.readFileSync(he),ke)}function L(he,ke){var _e=ke&&ke.type;switch(_e||Xr&&Buffer.isBuffer(he)&&(_e="buffer"),_e||"base64"){case"file":return j(he,ke);case"base64":return d(tl(ol(he)),ke);case"binary":return d(tl(he),ke)}return d(he,ke)}function C(he,ke){var _e=ke||{},Se=_e.root||"Root Entry";if(he.FullPaths||(he.FullPaths=[]),he.FileIndex||(he.FileIndex=[]),he.FullPaths.length!==he.FileIndex.length)throw new Error("inconsistent CFB structure");he.FullPaths.length===0&&(he.FullPaths[0]=Se+"/",he.FileIndex[0]={name:Se,type:5}),_e.CLSID&&(he.FileIndex[0].clsid=_e.CLSID),E(he)}function E(he){var ke="Sh33tJ5";if(!ur.find(he,"/"+ke)){var _e=ct(4);_e[0]=55,_e[1]=_e[3]=50,_e[2]=54,he.FileIndex.push({name:ke,type:2,content:_e,size:4,L:69,R:69,C:69}),he.FullPaths.push(he.FullPaths[0]+ke),B(he)}}function B(he,ke){C(he);for(var _e=!1,Se=!1,Ne=he.FullPaths.length-1;Ne>=0;--Ne){var Ie=he.FileIndex[Ne];switch(Ie.type){case 0:Se?_e=!0:(he.FileIndex.pop(),he.FullPaths.pop());break;case 1:case 2:case 5:Se=!0,isNaN(Ie.R*Ie.L*Ie.C)&&(_e=!0),Ie.R>-1&&Ie.L>-1&&Ie.R==Ie.L&&(_e=!0);break;default:_e=!0;break}}if(!(!_e&&!ke)){var Ke=new Date(1987,1,19),rt=0,He=Object.create?Object.create(null):{},We=[];for(Ne=0;Ne<he.FullPaths.length;++Ne)He[he.FullPaths[Ne]]=!0,he.FileIndex[Ne].type!==0&&We.push([he.FullPaths[Ne],he.FileIndex[Ne]]);for(Ne=0;Ne<We.length;++Ne){var Je=n(We[Ne][0]);Se=He[Je],Se||(We.push([Je,{name:s(Je).replace("/",""),type:1,clsid:J,ct:Ke,mt:Ke,content:null}]),He[Je]=!0)}for(We.sort(function(Ot,Nt){return r(Ot[0],Nt[0])}),he.FullPaths=[],he.FileIndex=[],Ne=0;Ne<We.length;++Ne)he.FullPaths[Ne]=We[Ne][0],he.FileIndex[Ne]=We[Ne][1];for(Ne=0;Ne<We.length;++Ne){var yt=he.FileIndex[Ne],Bt=he.FullPaths[Ne];if(yt.name=s(Bt).replace("/",""),yt.L=yt.R=yt.C=-(yt.color=1),yt.size=yt.content?yt.content.length:0,yt.start=0,yt.clsid=yt.clsid||J,Ne===0)yt.C=We.length>1?1:-1,yt.size=0,yt.type=5;else if(Bt.slice(-1)=="/"){for(rt=Ne+1;rt<We.length&&n(he.FullPaths[rt])!=Bt;++rt);for(yt.C=rt>=We.length?-1:rt,rt=Ne+1;rt<We.length&&n(he.FullPaths[rt])!=n(Bt);++rt);yt.R=rt>=We.length?-1:rt,yt.type=1}else n(he.FullPaths[Ne+1]||"")==n(Bt)&&(yt.R=Ne+1),yt.type=2}}}function Q(he,ke){var _e=ke||{};if(_e.fileType=="mad")return zt(he,_e);switch(B(he),_e.fileType){case"zip":return ps(he,_e)}var Se=function(Ot){for(var Nt=0,Ut=0,dr=0;dr<Ot.FileIndex.length;++dr){var jr=Ot.FileIndex[dr];if(jr.content){var Or=jr.content.length;Or>0&&(Or<4096?Nt+=Or+63>>6:Ut+=Or+511>>9)}}for(var zr=Ot.FullPaths.length+3>>2,Rs=Nt+7>>3,pi=Nt+127>>7,Ls=Rs+Ut+zr+pi,ha=Ls+127>>7,$s=ha<=109?0:Math.ceil((ha-109)/127);Ls+ha+$s+127>>7>ha;)$s=++ha<=109?0:Math.ceil((ha-109)/127);var Ba=[1,$s,ha,pi,zr,Ut,Nt,0];return Ot.FileIndex[0].size=Nt<<6,Ba[7]=(Ot.FileIndex[0].start=Ba[0]+Ba[1]+Ba[2]+Ba[3]+Ba[4]+Ba[5])+(Ba[6]+7>>3),Ba}(he),Ne=ct(Se[7]<<9),Ie=0,Ke=0;{for(Ie=0;Ie<8;++Ie)Ne.write_shift(1,se[Ie]);for(Ie=0;Ie<8;++Ie)Ne.write_shift(2,0);for(Ne.write_shift(2,62),Ne.write_shift(2,3),Ne.write_shift(2,65534),Ne.write_shift(2,9),Ne.write_shift(2,6),Ie=0;Ie<3;++Ie)Ne.write_shift(2,0);for(Ne.write_shift(4,0),Ne.write_shift(4,Se[2]),Ne.write_shift(4,Se[0]+Se[1]+Se[2]+Se[3]-1),Ne.write_shift(4,0),Ne.write_shift(4,4096),Ne.write_shift(4,Se[3]?Se[0]+Se[1]+Se[2]-1:O),Ne.write_shift(4,Se[3]),Ne.write_shift(-4,Se[1]?Se[0]-1:O),Ne.write_shift(4,Se[1]),Ie=0;Ie<109;++Ie)Ne.write_shift(-4,Ie<Se[2]?Se[1]+Ie:-1)}if(Se[1])for(Ke=0;Ke<Se[1];++Ke){for(;Ie<236+Ke*127;++Ie)Ne.write_shift(-4,Ie<Se[2]?Se[1]+Ie:-1);Ne.write_shift(-4,Ke===Se[1]-1?O:Ke+1)}var rt=function(Ot){for(Ke+=Ot;Ie<Ke-1;++Ie)Ne.write_shift(-4,Ie+1);Ot&&(++Ie,Ne.write_shift(-4,O))};for(Ke=Ie=0,Ke+=Se[1];Ie<Ke;++Ie)Ne.write_shift(-4,re.DIFSECT);for(Ke+=Se[2];Ie<Ke;++Ie)Ne.write_shift(-4,re.FATSECT);rt(Se[3]),rt(Se[4]);for(var He=0,We=0,Je=he.FileIndex[0];He<he.FileIndex.length;++He)Je=he.FileIndex[He],Je.content&&(We=Je.content.length,!(We<4096)&&(Je.start=Ke,rt(We+511>>9)));for(rt(Se[6]+7>>3);Ne.l&511;)Ne.write_shift(-4,re.ENDOFCHAIN);for(Ke=Ie=0,He=0;He<he.FileIndex.length;++He)Je=he.FileIndex[He],Je.content&&(We=Je.content.length,!(!We||We>=4096)&&(Je.start=Ke,rt(We+63>>6)));for(;Ne.l&511;)Ne.write_shift(-4,re.ENDOFCHAIN);for(Ie=0;Ie<Se[4]<<2;++Ie){var yt=he.FullPaths[Ie];if(!yt||yt.length===0){for(He=0;He<17;++He)Ne.write_shift(4,0);for(He=0;He<3;++He)Ne.write_shift(4,-1);for(He=0;He<12;++He)Ne.write_shift(4,0);continue}Je=he.FileIndex[Ie],Ie===0&&(Je.start=Je.size?Je.start-1:O);var Bt=Ie===0&&_e.root||Je.name;if(We=2*(Bt.length+1),Ne.write_shift(64,Bt,"utf16le"),Ne.write_shift(2,We),Ne.write_shift(1,Je.type),Ne.write_shift(1,Je.color),Ne.write_shift(-4,Je.L),Ne.write_shift(-4,Je.R),Ne.write_shift(-4,Je.C),Je.clsid)Ne.write_shift(16,Je.clsid,"hex");else for(He=0;He<4;++He)Ne.write_shift(4,0);Ne.write_shift(4,Je.state||0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,Je.start),Ne.write_shift(4,Je.size),Ne.write_shift(4,0)}for(Ie=1;Ie<he.FileIndex.length;++Ie)if(Je=he.FileIndex[Ie],Je.size>=4096)if(Ne.l=Je.start+1<<9,Xr&&Buffer.isBuffer(Je.content))Je.content.copy(Ne,Ne.l,0,Je.size),Ne.l+=Je.size+511&-512;else{for(He=0;He<Je.size;++He)Ne.write_shift(1,Je.content[He]);for(;He&511;++He)Ne.write_shift(1,0)}for(Ie=1;Ie<he.FileIndex.length;++Ie)if(Je=he.FileIndex[Ie],Je.size>0&&Je.size<4096)if(Xr&&Buffer.isBuffer(Je.content))Je.content.copy(Ne,Ne.l,0,Je.size),Ne.l+=Je.size+63&-64;else{for(He=0;He<Je.size;++He)Ne.write_shift(1,Je.content[He]);for(;He&63;++He)Ne.write_shift(1,0)}if(Xr)Ne.l=Ne.length;else for(;Ne.l<Ne.length;)Ne.write_shift(1,0);return Ne}function D(he,ke){var _e=he.FullPaths.map(function(He){return He.toUpperCase()}),Se=_e.map(function(He){var We=He.split("/");return We[We.length-(He.slice(-1)=="/"?2:1)]}),Ne=!1;ke.charCodeAt(0)===47?(Ne=!0,ke=_e[0].slice(0,-1)+ke):Ne=ke.indexOf("/")!==-1;var Ie=ke.toUpperCase(),Ke=Ne===!0?_e.indexOf(Ie):Se.indexOf(Ie);if(Ke!==-1)return he.FileIndex[Ke];var rt=!Ie.match(wg);for(Ie=Ie.replace(io,""),rt&&(Ie=Ie.replace(wg,"!")),Ke=0;Ke<_e.length;++Ke)if((rt?_e[Ke].replace(wg,"!"):_e[Ke]).replace(io,"")==Ie||(rt?Se[Ke].replace(wg,"!"):Se[Ke]).replace(io,"")==Ie)return he.FileIndex[Ke];return null}var I=64,O=-2,G="d0cf11e0a1b11ae1",se=[208,207,17,224,161,177,26,225],J="00000000000000000000000000000000",re={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:O,FREESECT:-1,HEADER_SIGNATURE:G,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:J,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function q(he,ke,_e){u();var Se=Q(he,_e);l.writeFileSync(ke,Se)}function z(he){for(var ke=new Array(he.length),_e=0;_e<he.length;++_e)ke[_e]=String.fromCharCode(he[_e]);return ke.join("")}function W(he,ke){var _e=Q(he,ke);switch(ke&&ke.type||"buffer"){case"file":return u(),l.writeFileSync(ke.filename,_e),_e;case"binary":return typeof _e=="string"?_e:z(_e);case"base64":return xx(typeof _e=="string"?_e:z(_e));case"buffer":if(Xr)return Buffer.isBuffer(_e)?_e:qA(_e);case"array":return typeof _e=="string"?tl(_e):_e}return _e}var ie;function P(he){try{var ke=he.InflateRaw,_e=new ke;if(_e._processChunk(new Uint8Array([3,0]),_e._finishFlushFlag),_e.bytesRead)ie=he;else throw new Error("zlib does not expose bytesRead")}catch(Se){console.error("cannot use native zlib: "+(Se.message||Se))}}function Y(he,ke){if(!ie)return Fr(he,ke);var _e=ie.InflateRaw,Se=new _e,Ne=Se._processChunk(he.slice(he.l),Se._finishFlushFlag);return he.l+=Se.bytesRead,Ne}function Z(he){return ie?ie.deflateRawSync(he):Rt(he)}var te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ce=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Ee=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function pe(he){var ke=(he<<1|he<<11)&139536|(he<<5|he<<15)&558144;return(ke>>16|ke>>8|ke)&255}for(var fe=typeof Uint8Array<"u",xe=fe?new Uint8Array(256):[],de=0;de<256;++de)xe[de]=pe(de);function oe(he,ke){var _e=xe[he&255];return ke<=8?_e>>>8-ke:(_e=_e<<8|xe[he>>8&255],ke<=16?_e>>>16-ke:(_e=_e<<8|xe[he>>16&255],_e>>>24-ke))}function Le(he,ke){var _e=ke&7,Se=ke>>>3;return(he[Se]|(_e<=6?0:he[Se+1]<<8))>>>_e&3}function et(he,ke){var _e=ke&7,Se=ke>>>3;return(he[Se]|(_e<=5?0:he[Se+1]<<8))>>>_e&7}function Te(he,ke){var _e=ke&7,Se=ke>>>3;return(he[Se]|(_e<=4?0:he[Se+1]<<8))>>>_e&15}function be(he,ke){var _e=ke&7,Se=ke>>>3;return(he[Se]|(_e<=3?0:he[Se+1]<<8))>>>_e&31}function je(he,ke){var _e=ke&7,Se=ke>>>3;return(he[Se]|(_e<=1?0:he[Se+1]<<8))>>>_e&127}function qe(he,ke,_e){var Se=ke&7,Ne=ke>>>3,Ie=(1<<_e)-1,Ke=he[Ne]>>>Se;return _e<8-Se||(Ke|=he[Ne+1]<<8-Se,_e<16-Se)||(Ke|=he[Ne+2]<<16-Se,_e<24-Se)||(Ke|=he[Ne+3]<<24-Se),Ke&Ie}function st(he,ke,_e){var Se=ke&7,Ne=ke>>>3;return Se<=5?he[Ne]|=(_e&7)<<Se:(he[Ne]|=_e<<Se&255,he[Ne+1]=(_e&7)>>8-Se),ke+3}function mt(he,ke,_e){var Se=ke&7,Ne=ke>>>3;return _e=(_e&1)<<Se,he[Ne]|=_e,ke+1}function Et(he,ke,_e){var Se=ke&7,Ne=ke>>>3;return _e<<=Se,he[Ne]|=_e&255,_e>>>=8,he[Ne+1]=_e,ke+8}function lt(he,ke,_e){var Se=ke&7,Ne=ke>>>3;return _e<<=Se,he[Ne]|=_e&255,_e>>>=8,he[Ne+1]=_e&255,he[Ne+2]=_e>>>8,ke+16}function kt(he,ke){var _e=he.length,Se=2*_e>ke?2*_e:ke+5,Ne=0;if(_e>=ke)return he;if(Xr){var Ie=y6(Se);if(he.copy)he.copy(Ie);else for(;Ne<he.length;++Ne)Ie[Ne]=he[Ne];return Ie}else if(fe){var Ke=new Uint8Array(Se);if(Ke.set)Ke.set(he);else for(;Ne<_e;++Ne)Ke[Ne]=he[Ne];return Ke}return he.length=Se,he}function Gt(he){for(var ke=new Array(he),_e=0;_e<he;++_e)ke[_e]=0;return ke}function Xt(he,ke,_e){var Se=1,Ne=0,Ie=0,Ke=0,rt=0,He=he.length,We=fe?new Uint16Array(32):Gt(32);for(Ie=0;Ie<32;++Ie)We[Ie]=0;for(Ie=He;Ie<_e;++Ie)he[Ie]=0;He=he.length;var Je=fe?new Uint16Array(He):Gt(He);for(Ie=0;Ie<He;++Ie)We[Ne=he[Ie]]++,Se<Ne&&(Se=Ne),Je[Ie]=0;for(We[0]=0,Ie=1;Ie<=Se;++Ie)We[Ie+16]=rt=rt+We[Ie-1]<<1;for(Ie=0;Ie<He;++Ie)rt=he[Ie],rt!=0&&(Je[Ie]=We[rt+16]++);var yt=0;for(Ie=0;Ie<He;++Ie)if(yt=he[Ie],yt!=0)for(rt=oe(Je[Ie],Se)>>Se-yt,Ke=(1<<Se+4-yt)-1;Ke>=0;--Ke)ke[rt|Ke<<yt]=yt&15|Ie<<4;return Se}var It=fe?new Uint16Array(512):Gt(512),Dt=fe?new Uint16Array(32):Gt(32);if(!fe){for(var Wt=0;Wt<512;++Wt)It[Wt]=0;for(Wt=0;Wt<32;++Wt)Dt[Wt]=0}(function(){for(var he=[],ke=0;ke<32;ke++)he.push(5);Xt(he,Dt,32);var _e=[];for(ke=0;ke<=143;ke++)_e.push(8);for(;ke<=255;ke++)_e.push(9);for(;ke<=279;ke++)_e.push(7);for(;ke<=287;ke++)_e.push(8);Xt(_e,It,288)})();var Lt=function(){for(var ke=fe?new Uint8Array(32768):[],_e=0,Se=0;_e<Ee.length-1;++_e)for(;Se<Ee[_e+1];++Se)ke[Se]=_e;for(;Se<32768;++Se)ke[Se]=29;var Ne=fe?new Uint8Array(259):[];for(_e=0,Se=0;_e<ce.length-1;++_e)for(;Se<ce[_e+1];++Se)Ne[Se]=_e;function Ie(rt,He){for(var We=0;We<rt.length;){var Je=Math.min(65535,rt.length-We),yt=We+Je==rt.length;for(He.write_shift(1,+yt),He.write_shift(2,Je),He.write_shift(2,~Je&65535);Je-- >0;)He[He.l++]=rt[We++]}return He.l}function Ke(rt,He){for(var We=0,Je=0,yt=fe?new Uint16Array(32768):[];Je<rt.length;){var Bt=Math.min(65535,rt.length-Je);if(Bt<10){for(We=st(He,We,+(Je+Bt==rt.length)),We&7&&(We+=8-(We&7)),He.l=We/8|0,He.write_shift(2,Bt),He.write_shift(2,~Bt&65535);Bt-- >0;)He[He.l++]=rt[Je++];We=He.l*8;continue}We=st(He,We,+(Je+Bt==rt.length)+2);for(var Ot=0;Bt-- >0;){var Nt=rt[Je];Ot=(Ot<<5^Nt)&32767;var Ut=-1,dr=0;if((Ut=yt[Ot])&&(Ut|=Je&-32768,Ut>Je&&(Ut-=32768),Ut<Je))for(;rt[Ut+dr]==rt[Je+dr]&&dr<250;)++dr;if(dr>2){Nt=Ne[dr],Nt<=22?We=Et(He,We,xe[Nt+1]>>1)-1:(Et(He,We,3),We+=5,Et(He,We,xe[Nt-23]>>5),We+=3);var jr=Nt<8?0:Nt-4>>2;jr>0&&(lt(He,We,dr-ce[Nt]),We+=jr),Nt=ke[Je-Ut],We=Et(He,We,xe[Nt]>>3),We-=3;var Or=Nt<4?0:Nt-2>>1;Or>0&&(lt(He,We,Je-Ut-Ee[Nt]),We+=Or);for(var zr=0;zr<dr;++zr)yt[Ot]=Je&32767,Ot=(Ot<<5^rt[Je])&32767,++Je;Bt-=dr-1}else Nt<=143?Nt=Nt+48:We=mt(He,We,1),We=Et(He,We,xe[Nt]),yt[Ot]=Je&32767,++Je}We=Et(He,We,0)-1}return He.l=(We+7)/8|0,He.l}return function(He,We){return He.length<8?Ie(He,We):Ke(He,We)}}();function Rt(he){var ke=ct(50+Math.floor(he.length*1.1)),_e=Lt(he,ke);return ke.slice(0,_e)}var xt=fe?new Uint16Array(32768):Gt(32768),wr=fe?new Uint16Array(32768):Gt(32768),Jt=fe?new Uint16Array(128):Gt(128),dn=1,gr=1;function Ur(he,ke){var _e=be(he,ke)+257;ke+=5;var Se=be(he,ke)+1;ke+=5;var Ne=Te(he,ke)+4;ke+=4;for(var Ie=0,Ke=fe?new Uint8Array(19):Gt(19),rt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],He=1,We=fe?new Uint8Array(8):Gt(8),Je=fe?new Uint8Array(8):Gt(8),yt=Ke.length,Bt=0;Bt<Ne;++Bt)Ke[te[Bt]]=Ie=et(he,ke),He<Ie&&(He=Ie),We[Ie]++,ke+=3;var Ot=0;for(We[0]=0,Bt=1;Bt<=He;++Bt)Je[Bt]=Ot=Ot+We[Bt-1]<<1;for(Bt=0;Bt<yt;++Bt)(Ot=Ke[Bt])!=0&&(rt[Bt]=Je[Ot]++);var Nt=0;for(Bt=0;Bt<yt;++Bt)if(Nt=Ke[Bt],Nt!=0){Ot=xe[rt[Bt]]>>8-Nt;for(var Ut=(1<<7-Nt)-1;Ut>=0;--Ut)Jt[Ot|Ut<<Nt]=Nt&7|Bt<<3}var dr=[];for(He=1;dr.length<_e+Se;)switch(Ot=Jt[je(he,ke)],ke+=Ot&7,Ot>>>=3){case 16:for(Ie=3+Le(he,ke),ke+=2,Ot=dr[dr.length-1];Ie-- >0;)dr.push(Ot);break;case 17:for(Ie=3+et(he,ke),ke+=3;Ie-- >0;)dr.push(0);break;case 18:for(Ie=11+je(he,ke),ke+=7;Ie-- >0;)dr.push(0);break;default:dr.push(Ot),He<Ot&&(He=Ot);break}var jr=dr.slice(0,_e),Or=dr.slice(_e);for(Bt=_e;Bt<286;++Bt)jr[Bt]=0;for(Bt=Se;Bt<30;++Bt)Or[Bt]=0;return dn=Xt(jr,xt,286),gr=Xt(Or,wr,30),ke}function Dn(he,ke){if(he[0]==3&&!(he[1]&3))return[bf(ke),2];for(var _e=0,Se=0,Ne=y6(ke||1<<18),Ie=0,Ke=Ne.length>>>0,rt=0,He=0;(Se&1)==0;){if(Se=et(he,_e),_e+=3,Se>>>1)Se>>1==1?(rt=9,He=5):(_e=Ur(he,_e),rt=dn,He=gr);else{_e&7&&(_e+=8-(_e&7));var We=he[_e>>>3]|he[(_e>>>3)+1]<<8;if(_e+=32,We>0)for(!ke&&Ke<Ie+We&&(Ne=kt(Ne,Ie+We),Ke=Ne.length);We-- >0;)Ne[Ie++]=he[_e>>>3],_e+=8;continue}for(;;){!ke&&Ke<Ie+32767&&(Ne=kt(Ne,Ie+32767),Ke=Ne.length);var Je=qe(he,_e,rt),yt=Se>>>1==1?It[Je]:xt[Je];if(_e+=yt&15,yt>>>=4,(yt>>>8&255)===0)Ne[Ie++]=yt;else{if(yt==256)break;yt-=257;var Bt=yt<8?0:yt-4>>2;Bt>5&&(Bt=0);var Ot=Ie+ce[yt];Bt>0&&(Ot+=qe(he,_e,Bt),_e+=Bt),Je=qe(he,_e,He),yt=Se>>>1==1?Dt[Je]:wr[Je],_e+=yt&15,yt>>>=4;var Nt=yt<4?0:yt-2>>1,Ut=Ee[yt];for(Nt>0&&(Ut+=qe(he,_e,Nt),_e+=Nt),!ke&&Ke<Ot&&(Ne=kt(Ne,Ot+100),Ke=Ne.length);Ie<Ot;)Ne[Ie]=Ne[Ie-Ut],++Ie}}}return ke?[Ne,_e+7>>>3]:[Ne.slice(0,Ie),_e+7>>>3]}function Fr(he,ke){var _e=he.slice(he.l||0),Se=Dn(_e,ke);return he.l+=Se[1],Se[0]}function da(he,ke){if(he)typeof console<"u"&&console.error(ke);else throw new Error(ke)}function nn(he,ke){var _e=he;ui(_e,0);var Se=[],Ne=[],Ie={FileIndex:Se,FullPaths:Ne};C(Ie,{root:ke.root});for(var Ke=_e.length-4;(_e[Ke]!=80||_e[Ke+1]!=75||_e[Ke+2]!=5||_e[Ke+3]!=6)&&Ke>=0;)--Ke;_e.l=Ke+4,_e.l+=4;var rt=_e.read_shift(2);_e.l+=6;var He=_e.read_shift(4);for(_e.l=He,Ke=0;Ke<rt;++Ke){_e.l+=20;var We=_e.read_shift(4),Je=_e.read_shift(4),yt=_e.read_shift(2),Bt=_e.read_shift(2),Ot=_e.read_shift(2);_e.l+=8;var Nt=_e.read_shift(4),Ut=o(_e.slice(_e.l+yt,_e.l+yt+Bt));_e.l+=yt+Bt+Ot;var dr=_e.l;_e.l=Nt+4,ns(_e,We,Je,Ie,Ut),_e.l=dr}return Ie}function ns(he,ke,_e,Se,Ne){he.l+=2;var Ie=he.read_shift(2),Ke=he.read_shift(2),rt=i(he);if(Ie&8257)throw new Error("Unsupported ZIP encryption");for(var He=he.read_shift(4),We=he.read_shift(4),Je=he.read_shift(4),yt=he.read_shift(2),Bt=he.read_shift(2),Ot="",Nt=0;Nt<yt;++Nt)Ot+=String.fromCharCode(he[he.l++]);if(Bt){var Ut=o(he.slice(he.l,he.l+Bt));(Ut[21589]||{}).mt&&(rt=Ut[21589].mt),((Ne||{})[21589]||{}).mt&&(rt=Ne[21589].mt)}he.l+=Bt;var dr=he.slice(he.l,he.l+We);switch(Ke){case 8:dr=Y(he,Je);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ke)}var jr=!1;Ie&8&&(He=he.read_shift(4),He==134695760&&(He=he.read_shift(4),jr=!0),We=he.read_shift(4),Je=he.read_shift(4)),We!=ke&&da(jr,"Bad compressed size: "+ke+" != "+We),Je!=_e&&da(jr,"Bad uncompressed size: "+_e+" != "+Je),sn(Se,Ot,dr,{unsafe:!0,mt:rt})}function ps(he,ke){var _e=ke||{},Se=[],Ne=[],Ie=ct(1),Ke=_e.compression?8:0,rt=0,He=0,We=0,Je=0,yt=0,Bt=he.FullPaths[0],Ot=Bt,Nt=he.FileIndex[0],Ut=[],dr=0;for(He=1;He<he.FullPaths.length;++He)if(Ot=he.FullPaths[He].slice(Bt.length),Nt=he.FileIndex[He],!(!Nt.size||!Nt.content||Ot=="Sh33tJ5")){var jr=Je,Or=ct(Ot.length);for(We=0;We<Ot.length;++We)Or.write_shift(1,Ot.charCodeAt(We)&127);Or=Or.slice(0,Or.l),Ut[yt]=due.buf(Nt.content,0);var zr=Nt.content;Ke==8&&(zr=Z(zr)),Ie=ct(30),Ie.write_shift(4,67324752),Ie.write_shift(2,20),Ie.write_shift(2,rt),Ie.write_shift(2,Ke),Nt.mt?a(Ie,Nt.mt):Ie.write_shift(4,0),Ie.write_shift(-4,Ut[yt]),Ie.write_shift(4,zr.length),Ie.write_shift(4,Nt.content.length),Ie.write_shift(2,Or.length),Ie.write_shift(2,0),Je+=Ie.length,Se.push(Ie),Je+=Or.length,Se.push(Or),Je+=zr.length,Se.push(zr),Ie=ct(46),Ie.write_shift(4,33639248),Ie.write_shift(2,0),Ie.write_shift(2,20),Ie.write_shift(2,rt),Ie.write_shift(2,Ke),Ie.write_shift(4,0),Ie.write_shift(-4,Ut[yt]),Ie.write_shift(4,zr.length),Ie.write_shift(4,Nt.content.length),Ie.write_shift(2,Or.length),Ie.write_shift(2,0),Ie.write_shift(2,0),Ie.write_shift(2,0),Ie.write_shift(2,0),Ie.write_shift(4,0),Ie.write_shift(4,jr),dr+=Ie.l,Ne.push(Ie),dr+=Or.length,Ne.push(Or),++yt}return Ie=ct(22),Ie.write_shift(4,101010256),Ie.write_shift(2,0),Ie.write_shift(2,0),Ie.write_shift(2,yt),Ie.write_shift(2,yt),Ie.write_shift(4,dr),Ie.write_shift(4,Je),Ie.write_shift(2,0),Xa([Xa(Se),Xa(Ne),Ie])}var Pr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function nr(he,ke){if(he.ctype)return he.ctype;var _e=he.name||"",Se=_e.match(/\.([^\.]+)$/);return Se&&Pr[Se[1]]||ke&&(Se=(_e=ke).match(/[\.\\]([^\.\\])+$/),Se&&Pr[Se[1]])?Pr[Se[1]]:"application/octet-stream"}function Gr(he){for(var ke=xx(he),_e=[],Se=0;Se<ke.length;Se+=76)_e.push(ke.slice(Se,Se+76));return _e.join(`\r
`)+`\r
`}function fa(he){var ke=he.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(We){var Je=We.charCodeAt(0).toString(16).toUpperCase();return"="+(Je.length==1?"0"+Je:Je)});ke=ke.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ke.charAt(0)==`
`&&(ke="=0D"+ke.slice(1)),ke=ke.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var _e=[],Se=ke.split(`\r
`),Ne=0;Ne<Se.length;++Ne){var Ie=Se[Ne];if(Ie.length==0){_e.push("");continue}for(var Ke=0;Ke<Ie.length;){var rt=76,He=Ie.slice(Ke,Ke+rt);He.charAt(rt-1)=="="?rt--:He.charAt(rt-2)=="="?rt-=2:He.charAt(rt-3)=="="&&(rt-=3),He=Ie.slice(Ke,Ke+rt),Ke+=rt,Ke<Ie.length&&(He+="="),_e.push(He)}}return _e.join(`\r
`)}function Wn(he){for(var ke=[],_e=0;_e<he.length;++_e){for(var Se=he[_e];_e<=he.length&&Se.charAt(Se.length-1)=="=";)Se=Se.slice(0,Se.length-1)+he[++_e];ke.push(Se)}for(var Ne=0;Ne<ke.length;++Ne)ke[Ne]=ke[Ne].replace(/[=][0-9A-Fa-f]{2}/g,function(Ie){return String.fromCharCode(parseInt(Ie.slice(1),16))});return tl(ke.join(`\r
`))}function Es(he,ke,_e){for(var Se="",Ne="",Ie="",Ke,rt=0;rt<10;++rt){var He=ke[rt];if(!He||He.match(/^\s*$/))break;var We=He.match(/^(.*?):\s*([^\s].*)$/);if(We)switch(We[1].toLowerCase()){case"content-location":Se=We[2].trim();break;case"content-type":Ie=We[2].trim();break;case"content-transfer-encoding":Ne=We[2].trim();break}}switch(++rt,Ne.toLowerCase()){case"base64":Ke=tl(ol(ke.slice(rt).join("")));break;case"quoted-printable":Ke=Wn(ke.slice(rt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Ne)}var Je=sn(he,Se.slice(_e.length),Ke,{unsafe:!0});Ie&&(Je.ctype=Ie)}function Na(he,ke){if(z(he.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var _e=ke&&ke.root||"",Se=(Xr&&Buffer.isBuffer(he)?he.toString("binary"):z(he)).split(`\r
`),Ne=0,Ie="";for(Ne=0;Ne<Se.length;++Ne)if(Ie=Se[Ne],!!/^Content-Location:/i.test(Ie)&&(Ie=Ie.slice(Ie.indexOf("file")),_e||(_e=Ie.slice(0,Ie.lastIndexOf("/")+1)),Ie.slice(0,_e.length)!=_e))for(;_e.length>0&&(_e=_e.slice(0,_e.length-1),_e=_e.slice(0,_e.lastIndexOf("/")+1),Ie.slice(0,_e.length)!=_e););var Ke=(Se[1]||"").match(/boundary="(.*?)"/);if(!Ke)throw new Error("MAD cannot find boundary");var rt="--"+(Ke[1]||""),He=[],We=[],Je={FileIndex:He,FullPaths:We};C(Je);var yt,Bt=0;for(Ne=0;Ne<Se.length;++Ne){var Ot=Se[Ne];Ot!==rt&&Ot!==rt+"--"||(Bt++&&Es(Je,Se.slice(yt,Ne),_e),yt=Ne)}return Je}function zt(he,ke){var _e=ke||{},Se=_e.boundary||"SheetJS";Se="------="+Se;for(var Ne=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Se.slice(2)+'"',"","",""],Ie=he.FullPaths[0],Ke=Ie,rt=he.FileIndex[0],He=1;He<he.FullPaths.length;++He)if(Ke=he.FullPaths[He].slice(Ie.length),rt=he.FileIndex[He],!(!rt.size||!rt.content||Ke=="Sh33tJ5")){Ke=Ke.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(dr){return"_x"+dr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(dr){return"_u"+dr.charCodeAt(0).toString(16)+"_"});for(var We=rt.content,Je=Xr&&Buffer.isBuffer(We)?We.toString("binary"):z(We),yt=0,Bt=Math.min(1024,Je.length),Ot=0,Nt=0;Nt<=Bt;++Nt)(Ot=Je.charCodeAt(Nt))>=32&&Ot<128&&++yt;var Ut=yt>=Bt*4/5;Ne.push(Se),Ne.push("Content-Location: "+(_e.root||"file:///C:/SheetJS/")+Ke),Ne.push("Content-Transfer-Encoding: "+(Ut?"quoted-printable":"base64")),Ne.push("Content-Type: "+nr(rt,Ke)),Ne.push(""),Ne.push(Ut?fa(Je):Gr(Je))}return Ne.push(Se+`--\r
`),Ne.join(`\r
`)}function fn(he){var ke={};return C(ke,he),ke}function sn(he,ke,_e,Se){var Ne=Se&&Se.unsafe;Ne||C(he);var Ie=!Ne&&ur.find(he,ke);if(!Ie){var Ke=he.FullPaths[0];ke.slice(0,Ke.length)==Ke?Ke=ke:(Ke.slice(-1)!="/"&&(Ke+="/"),Ke=(Ke+ke).replace("//","/")),Ie={name:s(ke),type:2},he.FileIndex.push(Ie),he.FullPaths.push(Ke),Ne||ur.utils.cfb_gc(he)}return Ie.content=_e,Ie.size=_e?_e.length:0,Se&&(Se.CLSID&&(Ie.clsid=Se.CLSID),Se.mt&&(Ie.mt=Se.mt),Se.ct&&(Ie.ct=Se.ct)),Ie}function Rn(he,ke){C(he);var _e=ur.find(he,ke);if(_e){for(var Se=0;Se<he.FileIndex.length;++Se)if(he.FileIndex[Se]==_e)return he.FileIndex.splice(Se,1),he.FullPaths.splice(Se,1),!0}return!1}function jn(he,ke,_e){C(he);var Se=ur.find(he,ke);if(Se){for(var Ne=0;Ne<he.FileIndex.length;++Ne)if(he.FileIndex[Ne]==Se)return he.FileIndex[Ne].name=s(_e),he.FullPaths[Ne]=_e,!0}return!1}function Yn(he){B(he,!0)}return e.find=D,e.read=L,e.parse=d,e.write=W,e.writeFile=q,e.utils={cfb_new:fn,cfb_add:sn,cfb_del:Rn,cfb_mov:jn,cfb_gc:Yn,ReadShift:Gg,CheckField:gj,prep_blob:ui,bconcat:Xa,use_zlib:P,_deflateRaw:Rt,_inflateRaw:Fr,consts:re},e}();function fue(t){return typeof t=="string"?Jw(t):Array.isArray(t)?jce(t):t}function c1(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=Jw(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?Eu(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var s=new Blob([fue(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,t);if(typeof saveAs<"u")return saveAs(s,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),chrome.downloads.download({url:a,filename:t,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=t,i.href=a,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),a}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(t);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=kf(e)),o.write(e),o.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+t)}function hue(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function Ks(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function N6(t,e){for(var r=[],n=Ks(t),s=0;s!==n.length;++s)r[t[n[s]][e]]==null&&(r[t[n[s]][e]]=n[s]);return r}function eb(t){for(var e=[],r=Ks(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function tb(t){for(var e=[],r=Ks(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function mue(t){for(var e=[],r=Ks(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var F2=new Date(1899,11,30,0,0,0);function Pa(t,e){var r=t.getTime(),n=F2.getTime()+(t.getTimezoneOffset()-F2.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var YP=new Date,pue=F2.getTime()+(YP.getTimezoneOffset()-F2.getTimezoneOffset())*6e4,B6=YP.getTimezoneOffset();function rb(t){var e=new Date;return e.setTime(t*24*60*60*1e3+pue),e.getTimezoneOffset()!==B6&&e.setTime(e.getTime()+(e.getTimezoneOffset()-B6)*6e4),e}function gue(t){var e=0,r=0,n=!1,s=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var a=1;a!=s.length;++a)if(s[a]){switch(r=1,a>3&&(n=!0),s[a].slice(s[a].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[a].slice(s[a].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(s[a],10)}return e}var k6=new Date("2017-02-19T19:06:09.000Z"),XP=isNaN(k6.getFullYear())?new Date("2/19/17"):k6,xue=XP.getFullYear()==2017;function hs(t,e){var r=new Date(t);if(xue)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(XP.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=t.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return t.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function Rh(t,e){if(Xr&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return Eu(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return Eu(PP(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return Eu(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return Eu(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(a){return r[a]||a})}catch{}for(var n=[],s=0;s!=t.length;++s)n.push(String.fromCharCode(t[s]));return n.join("")}function ms(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=ms(t[r]));return e}function Vs(t,e){for(var r="";r.length<e;)r+=t;return r}function kc(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,a){return r=-r,a}),!isNaN(e=Number(n)))?e/r:e}var vue=["january","february","march","april","may","june","july","august","september","october","november","december"];function jm(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),s=e.getMonth(),a=e.getDate();if(isNaN(a))return r;var i=t.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&vue.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||a>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var yue=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(t||typeof n=="string")return r.split(n);for(var a=r.split(n),i=[a[0]],o=1;o<a.length;++o)i.push(s),i.push(a[o]);return i}}();function JP(t){return t?t.content&&t.type?Rh(t.content,!0):t.data?yg(t.data):t.asNodeBuffer&&Xr?yg(t.asNodeBuffer().toString("binary")):t.asBinary?yg(t.asBinary()):t._data&&t._data.getContent?yg(Rh(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function ZP(t){if(!t)return null;if(t.data)return x6(t.data);if(t.asNodeBuffer&&Xr)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?x6(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function wue(t){return t&&t.name.slice(-4)===".bin"?ZP(t):JP(t)}function Ul(t,e){for(var r=t.FullPaths||Ks(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),a=0;a<r.length;++a){var i=r[a].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||s==i)return t.files?t.files[r[a]]:t.FileIndex[a]}return null}function K4(t,e){var r=Ul(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function ba(t,e,r){if(!r)return wue(K4(t,e));if(!e)return null;try{return ba(t,e)}catch{return null}}function rl(t,e,r){if(!r)return JP(K4(t,e));if(!e)return null;try{return rl(t,e)}catch{return null}}function bue(t,e,r){return ZP(K4(t,e))}function I6(t){for(var e=t.FullPaths||Ks(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function Vr(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return Xr?n=qA(r):n=Oce(r),ur.utils.cfb_add(t,e,n)}ur.utils.cfb_add(t,e,r)}else t.file(e,r)}function $4(){return ur.utils.cfb_new()}function ej(t,e){switch(e.type){case"base64":return ur.read(t,{type:"base64"});case"binary":return ur.read(t,{type:"binary"});case"buffer":case"array":return ur.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function bg(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var Aa=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Cue=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,F6=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,Eue=/<[^>]*>/g,Yi=Aa.match(F6)?F6:Eue,_ue=/<\w*:/,Sue=/<(\/?)\w+:/;function Br(t,e,r){for(var n={},s=0,a=0;s!==t.length&&!((a=t.charCodeAt(s))===32||a===10||a===13);++s);if(e||(n[0]=t.slice(0,s)),s===t.length)return n;var i=t.match(Cue),o=0,l="",u=0,d="",h="",m=1;if(i)for(u=0;u!=i.length;++u){for(h=i[u],a=0;a!=h.length&&h.charCodeAt(a)!==61;++a);for(d=h.slice(0,a).trim();h.charCodeAt(a+1)==32;)++a;for(m=(s=h.charCodeAt(a+1))==34||s==39?1:0,l=h.slice(a+1+m,h.length-m),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=l,n[d.toLowerCase()]=l;else{var g=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(n[g]&&d.slice(o-3,o)=="ext")continue;n[g]=l,n[g.toLowerCase()]=l}}return n}function Pu(t){return t.replace(Sue,"<$1")}var tj={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},W4=eb(tj),Cn=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",a=s.indexOf("<![CDATA[");if(a==-1)return s.replace(t,function(o,l){return tj[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(e,function(o,l){return String.fromCharCode(parseInt(l,16))});var i=s.indexOf("]]>");return r(s.slice(0,a))+s.slice(a+9,i)+r(s.slice(i+3))}}(),Y4=/[&<>'"]/g,Tue=/[\u0000-\u0008\u000b-\u001f]/g;function Kn(t){var e=t+"";return e.replace(Y4,function(r){return W4[r]}).replace(Tue,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function D6(t){return Kn(t).replace(/ /g,"_x0020_")}var rj=/[\u0000-\u001f]/g;function X4(t){var e=t+"";return e.replace(Y4,function(r){return W4[r]}).replace(/\n/g,"<br/>").replace(rj,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function Nue(t){var e=t+"";return e.replace(Y4,function(r){return W4[r]}).replace(rj,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var R6=function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}}();function Bue(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function ds(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function _E(t){for(var e="",r=0,n=0,s=0,a=0,i=0,o=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(s=t.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=s&63,e+=String.fromCharCode(i);continue}if(a=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(s&63)<<6|a&63);continue}i=t.charCodeAt(r++),o=((n&7)<<18|(s&63)<<12|(a&63)<<6|i&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function L6(t){var e=bf(2*t.length),r,n,s=1,a=0,i=0,o;for(n=0;n<t.length;n+=s)s=1,(o=t.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(n+1)&63),s=2):o<240?(r=(o&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),s=3):(s=4,r=(o&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(e[a++]=i&255,e[a++]=i>>>8,i=0),e[a++]=r%256,e[a++]=r>>>8;return e.slice(0,a).toString("ucs2")}function U6(t){return qA(t,"binary").toString("utf8")}var Uv="foo bar bazâð£",rs=Xr&&(U6(Uv)==_E(Uv)&&U6||L6(Uv)==_E(Uv)&&L6)||_E,Eu=Xr?function(t){return qA(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,s=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(s>>18&7))),e.push(String.fromCharCode(144+(s>>12&63))),e.push(String.fromCharCode(128+(s>>6&63))),e.push(String.fromCharCode(128+(s&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},yx=function(){var t={};return function(r,n){var s=r+"|"+(n||"");return t[s]?t[s]:t[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),nj=function(){var t=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<t.length;++s)n=n.replace(t[s][0],t[s][1]);return n}}(),kue=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),Iue=/<\/?(?:vt:)?variant>/g,Fue=/<(?:vt:)([^>]*)>([\s\S]*)</;function M6(t,e){var r=Br(t),n=t.match(kue(r.baseType))||[],s=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(a){var i=a.replace(Iue,"").match(Fue);i&&s.push({v:rs(i[2]),t:i[1]})}),s}var sj=/(^\s|\s$|\n)/;function di(t,e){return"<"+t+(e.match(sj)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function wx(t){return Ks(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Mt(t,e,r){return"<"+t+(r!=null?wx(r):"")+(e!=null?(e.match(sj)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function CS(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function Due(t,e){switch(typeof t){case"string":var r=Mt("vt:lpwstr",Kn(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Mt((t|0)==t?"vt:i4":"vt:r8",Kn(String(t)));case"boolean":return Mt("vt:bool",t?"true":"false")}if(t instanceof Date)return Mt("vt:filetime",CS(t));throw new Error("Unable to serialize "+t)}function J4(t){if(Xr&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return rs(kf(G4(t)));throw new Error("Bad input format: expected Buffer or string")}var bx=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Ua={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},$h=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Zo={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Rue(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),s=t[e+6]&15,a=5;a>=0;--a)s=s*256+t[e+a];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function Lue(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,s=0,a=0,i=n?-e:e;isFinite(i)?i==0?s=a=0:(s=Math.floor(Math.log(i)/Math.LN2),a=i*Math.pow(2,52-s),s<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?s=-1022:(a-=Math.pow(2,52),s+=1023)):(s=2047,a=isNaN(e)?26985:0);for(var o=0;o<=5;++o,a/=256)t[r+o]=a&255;t[r+6]=(s&15)<<4|a&15,t[r+7]=s>>4|n}var P6=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var s=0,a=t[0][n].length;s<a;s+=r)e.push.apply(e,t[0][n].slice(s,s+r));return e},j6=Xr?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:qA(e)})):P6(t)}:P6,O6=function(t,e,r){for(var n=[],s=e;s<r;s+=2)n.push(String.fromCharCode(_A(t,s)));return n.join("").replace(io,"")},Z4=Xr?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(io,""):O6(t,e,r)}:O6,Q6=function(t,e,r){for(var n=[],s=e;s<e+r;++s)n.push(("0"+t[s].toString(16)).slice(-2));return n.join("")},aj=Xr?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):Q6(t,e,r)}:Q6,H6=function(t,e,r){for(var n=[],s=e;s<r;s++)n.push(String.fromCharCode(tm(t,s)));return n.join("")},u1=Xr?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):H6(e,r,n)}:H6,ij=function(t,e){var r=el(t,e);return r>0?u1(t,e+4,e+4+r-1):""},oj=ij,lj=function(t,e){var r=el(t,e);return r>0?u1(t,e+4,e+4+r-1):""},cj=lj,uj=function(t,e){var r=2*el(t,e);return r>0?u1(t,e+4,e+4+r-1):""},Aj=uj,dj=function(e,r){var n=el(e,r);return n>0?Z4(e,r+4,r+4+n):""},fj=dj,hj=function(t,e){var r=el(t,e);return r>0?u1(t,e+4,e+4+r):""},mj=hj,pj=function(t,e){return Rue(t,e)},D2=pj,eT=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Xr&&(oj=function(e,r){if(!Buffer.isBuffer(e))return ij(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},cj=function(e,r){if(!Buffer.isBuffer(e))return lj(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},Aj=function(e,r){if(!Buffer.isBuffer(e))return uj(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},fj=function(e,r){if(!Buffer.isBuffer(e))return dj(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},mj=function(e,r){if(!Buffer.isBuffer(e))return hj(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},D2=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):pj(e,r)},eT=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var tm=function(t,e){return t[e]},_A=function(t,e){return t[e+1]*256+t[e]},Uue=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},el=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},ch=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},Mue=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function Gg(t,e){var r="",n,s,a=[],i,o,l,u;switch(e){case"dbcs":if(u=this.l,Xr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)r+=String.fromCharCode(_A(this,u)),u+=2;t*=2;break;case"utf8":r=u1(this,this.l,this.l+t);break;case"utf16le":t*=2,r=Z4(this,this.l,this.l+t);break;case"wstr":return Gg.call(this,t,"dbcs");case"lpstr-ansi":r=oj(this,this.l),t=4+el(this,this.l);break;case"lpstr-cp":r=cj(this,this.l),t=4+el(this,this.l);break;case"lpwstr":r=Aj(this,this.l),t=4+2*el(this,this.l);break;case"lpp4":t=4+el(this,this.l),r=fj(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+el(this,this.l),r=mj(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(i=tm(this,this.l+t++))!==0;)a.push(Lv(i));r=a.join("");break;case"_wstr":for(t=0,r="";(i=_A(this,this.l+t))!==0;)a.push(Lv(i)),t+=2;t+=2,r=a.join("");break;case"dbcs-cont":for(r="",u=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=tm(this,u),this.l=u+1,o=Gg.call(this,t-l,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(Lv(_A(this,u))),u+=2}r=a.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=tm(this,u),this.l=u+1,o=Gg.call(this,t-l,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(Lv(tm(this,u))),u+=1}r=a.join("");break;default:switch(t){case 1:return n=tm(this,this.l),this.l++,n;case 2:return n=(e==="i"?Uue:_A)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(n=(t>0?ch:Mue)(this,this.l),this.l+=4,n):(s=el(this,this.l),this.l+=4,s);case 8:case-8:if(e==="f")return t==8?s=D2(this,this.l):s=D2([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;t=8;case 16:r=aj(this,this.l,t);break}}return this.l+=t,r}var Pue=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},jue=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},Oue=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function Que(t,e,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=e.length;++s)Oue(this,e.charCodeAt(s),this.l+2*s);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=e.length;++s)this[this.l+s]=e.charCodeAt(s)&255;n=e.length}else if(r==="hex"){for(;s<t;++s)this[this.l++]=parseInt(e.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var a=Math.min(this.l+t,this.length);for(s=0;s<Math.min(e.length,t);++s){var i=e.charCodeAt(s);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,Pue(this,e,this.l);break;case 8:if(n=8,r==="f"){Lue(this,e,this.l);break}case 16:break;case-4:n=4,jue(this,e,this.l);break}return this.l+=n,this}function gj(t,e){var r=aj(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function ui(t,e){t.l=e,t.read_shift=Gg,t.chk=gj,t.write_shift=Que}function Ki(t,e){t.l+=e}function ct(t){var e=bf(t);return ui(e,0),e}function KA(t,e,r){if(t){var n,s,a;ui(t,t.l||0);for(var i=t.length,o=0,l=0;t.l<i;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var u=Nx[o]||Nx[65535];for(n=t.read_shift(1),a=n&127,s=1;s<4&&n&128;++s)a+=((n=t.read_shift(1))&127)<<7*s;l=t.l+a;var d=u.f&&u.f(t,a,r);if(t.l=l,e(d,u,o))return}}}function ko(){var t=[],e=Xr?256:2048,r=function(u){var d=ct(u);return ui(d,0),d},n=r(e),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},a=function(u){return n&&u<n.length-n.l?n:(s(),n=r(Math.max(u+1,e)))},i=function(){return s(),Xa(t)},o=function(u){s(),n=u,n.l==null&&(n.l=n.length),a(e)};return{next:a,push:o,end:i,_bufs:t}}function Ct(t,e,r,n){var s=+e,a;if(!isNaN(s)){n||(n=Nx[s].p||(r||[]).length||0),a=1+(s>=128?1:0)+1,n>=128&&++a,n>=16384&&++a,n>=2097152&&++a;var i=t.next(a);s<=127?i.write_shift(1,s):(i.write_shift(1,(s&127)+128),i.write_shift(1,s>>7));for(var o=0;o!=4;++o)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&eT(r)&&t.push(r)}}function zg(t,e,r){var n=ms(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function V6(t,e,r){var n=ms(t);return n.s=zg(n.s,e.s,r),n.e=zg(n.e,e.s,r),n}function qg(t,e){if(t.cRel&&t.c<0)for(t=ms(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=ms(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=Er(t);return!t.cRel&&t.cRel!=null&&(r=Gue(r)),!t.rRel&&t.rRel!=null&&(r=Hue(r)),r}function SE(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+ks(t.s.c)+":"+(t.e.cRel?"":"$")+ks(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+ua(t.s.r)+":"+(t.e.rRel?"":"$")+ua(t.e.r):qg(t.s,e.biff)+":"+qg(t.e,e.biff)}function tT(t){return parseInt(Vue(t),10)-1}function ua(t){return""+(t+1)}function Hue(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Vue(t){return t.replace(/\$(\d+)$/,"$1")}function rT(t){for(var e=zue(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function ks(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function Gue(t){return t.replace(/^([A-Z])/,"$$$1")}function zue(t){return t.replace(/^\$([A-Z])/,"$1")}function que(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Is(t){for(var e=0,r=0,n=0;n<t.length;++n){var s=t.charCodeAt(n);s>=48&&s<=57?e=10*e+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:e-1}}function Er(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function Fo(t){var e=t.indexOf(":");return e==-1?{s:Is(t),e:Is(t)}:{s:Is(t.slice(0,e)),e:Is(t.slice(e+1))}}function Mr(t,e){return typeof e>"u"||typeof e=="number"?Mr(t.s,t.e):(typeof t!="string"&&(t=Er(t)),typeof e!="string"&&(e=Er(e)),t==e?t:t+":"+e)}function En(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,a=t.length;for(r=0;n<a&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.s.c=--r,r=0;n<a&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(e.s.r=--r,n===a||s!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=a&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.e.c=--r,r=0;n!=a&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return e.e.r=--r,e}function G6(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Wl(t.z,r?Pa(e):e)}catch{}try{return t.w=Wl((t.XF||{}).numFmtId||(r?14:0),r?Pa(e):e)}catch{return""+e}}function jA(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?$A[t.v]||t.v:e==null?G6(t,t.v):G6(t,e))}function If(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function xj(t,e,r){var n=r||{},s=t?Array.isArray(t):n.dense,a=t||(s?[]:{}),i=0,o=0;if(a&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var l=typeof n.origin=="string"?Is(n.origin):n.origin;i=l.r,o=l.c}a["!ref"]||(a["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var d=En(a["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var h=0;h!=e.length;++h)if(e[h]){if(!Array.isArray(e[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=e[h].length;++m)if(!(typeof e[h][m]>"u")){var g={v:e[h][m]},b=i+h,y=o+m;if(u.s.r>b&&(u.s.r=b),u.s.c>y&&(u.s.c=y),u.e.r<b&&(u.e.r=b),u.e.c<y&&(u.e.c=y),e[h][m]&&typeof e[h][m]=="object"&&!Array.isArray(e[h][m])&&!(e[h][m]instanceof Date))g=e[h][m];else if(Array.isArray(g.v)&&(g.f=e[h][m][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(n.nullError)g.t="e",g.v=0;else if(n.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=n.dateNF||vr[14],n.cellDates?(g.t="d",g.w=Wl(g.z,Pa(g.v))):(g.t="n",g.v=Pa(g.v),g.w=Wl(g.z,g.v))):g.t="s";if(s)a[b]||(a[b]=[]),a[b][y]&&a[b][y].z&&(g.z=a[b][y].z),a[b][y]=g;else{var _=Er({c:y,r:b});a[_]&&a[_].z&&(g.z=a[_].z),a[_]=g}}}return u.s.c<1e7&&(a["!ref"]=Mr(u)),a}function lp(t,e){return xj(null,t,e)}function Kue(t){return t.read_shift(4,"i")}function Ic(t,e){return e||(e=ct(4)),e.write_shift(4,t),e}function zi(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function Ja(t,e){var r=!1;return e==null&&(r=!0,e=ct(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function $ue(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function Wue(t,e){return e||(e=ct(4)),e.write_shift(2,0),e.write_shift(2,0),e}function nT(t,e){var r=t.l,n=t.read_shift(1),s=zi(t),a=[],i={t:s,h:s};if((n&1)!==0){for(var o=t.read_shift(4),l=0;l!=o;++l)a.push($ue(t));i.r=a}else i.r=[{ich:0,ifnt:0}];return t.l=r+e,i}function Yue(t,e){var r=!1;return e==null&&(r=!0,e=ct(15+4*t.t.length)),e.write_shift(1,0),Ja(t.t,e),r?e.slice(0,e.l):e}var Xue=nT;function Jue(t,e){var r=!1;return e==null&&(r=!0,e=ct(23+4*t.t.length)),e.write_shift(1,1),Ja(t.t,e),e.write_shift(4,1),Wue({},e),r?e.slice(0,e.l):e}function Yl(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function Wh(t,e){return e==null&&(e=ct(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function Yh(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function Xh(t,e){return e==null&&(e=ct(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var Zue=zi,vj=Ja;function sT(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function R2(t,e){var r=!1;return e==null&&(r=!0,e=ct(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var eAe=zi,ES=sT,aT=R2;function iT(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var s=n===0?D2([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):ch(e,0)>>2;return r?s/100:s}function yj(t,e){e==null&&(e=ct(4));var r=0,n=0,s=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?s:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function wj(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function tAe(t,e){return e||(e=ct(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var Jh=wj,cp=tAe;function Vi(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function Lh(t,e){return(e||ct(8)).write_shift(8,t,"f")}function rAe(t){var e={},r=t.read_shift(1),n=r>>>1,s=t.read_shift(1),a=t.read_shift(2,"i"),i=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=s;var u=yh[s];u&&(e.rgb=Ex(u));break;case 2:e.rgb=Ex([i,o,l]);break;case 3:e.theme=s;break}return a!=0&&(e.tint=a>0?a/32767:a/32768),e}function L2(t,e){if(e||(e=ct(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function nAe(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function sAe(t,e){e||(e=ct(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}function bj(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function aAe(t){return bj(t,1)}function iAe(t){return bj(t,2)}var oT=2,Eo=3,Mv=11,z6=12,U2=19,Pv=64,oAe=65,lAe=71,cAe=4108,uAe=4126,Wa=80,Cj=81,AAe=[Wa,Cj],_S={1:{n:"CodePage",t:oT},2:{n:"Category",t:Wa},3:{n:"PresentationFormat",t:Wa},4:{n:"ByteCount",t:Eo},5:{n:"LineCount",t:Eo},6:{n:"ParagraphCount",t:Eo},7:{n:"SlideCount",t:Eo},8:{n:"NoteCount",t:Eo},9:{n:"HiddenCount",t:Eo},10:{n:"MultimediaClipCount",t:Eo},11:{n:"ScaleCrop",t:Mv},12:{n:"HeadingPairs",t:cAe},13:{n:"TitlesOfParts",t:uAe},14:{n:"Manager",t:Wa},15:{n:"Company",t:Wa},16:{n:"LinksUpToDate",t:Mv},17:{n:"CharacterCount",t:Eo},19:{n:"SharedDoc",t:Mv},22:{n:"HyperlinksChanged",t:Mv},23:{n:"AppVersion",t:Eo,p:"version"},24:{n:"DigSig",t:oAe},26:{n:"ContentType",t:Wa},27:{n:"ContentStatus",t:Wa},28:{n:"Language",t:Wa},29:{n:"Version",t:Wa},255:{},2147483648:{n:"Locale",t:U2},2147483651:{n:"Behavior",t:U2},1919054434:{}},SS={1:{n:"CodePage",t:oT},2:{n:"Title",t:Wa},3:{n:"Subject",t:Wa},4:{n:"Author",t:Wa},5:{n:"Keywords",t:Wa},6:{n:"Comments",t:Wa},7:{n:"Template",t:Wa},8:{n:"LastAuthor",t:Wa},9:{n:"RevNumber",t:Wa},10:{n:"EditTime",t:Pv},11:{n:"LastPrinted",t:Pv},12:{n:"CreatedDate",t:Pv},13:{n:"ModifiedDate",t:Pv},14:{n:"PageCount",t:Eo},15:{n:"WordCount",t:Eo},16:{n:"CharCount",t:Eo},17:{n:"Thumbnail",t:lAe},18:{n:"Application",t:Wa},19:{n:"DocSecurity",t:Eo},255:{},2147483648:{n:"Locale",t:U2},2147483651:{n:"Behavior",t:U2},1919054434:{}},q6={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},dAe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function fAe(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var hAe=fAe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),yh=ms(hAe),$A={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Ej={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},TS={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},jv={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function lT(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function mAe(t){var e=lT();if(!t||!t.match)return e;var r={};if((t.match(Yi)||[]).forEach(function(n){var s=Br(n);switch(s[0].replace(_ue,"<")){case"<?xml":break;case"<Types":e.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":e[TS[s.ContentType]]!==void 0&&e[TS[s.ContentType]].push(s.PartName);break}}),e.xmlns!==Ua.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}function _j(t,e){var r=mue(TS),n=[],s;n[n.length]=Aa,n[n.length]=Mt("Types",null,{xmlns:Ua.CT,"xmlns:xsd":Ua.xsd,"xmlns:xsi":Ua.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Mt("Default",null,{Extension:l[0],ContentType:l[1]})}));var a=function(l){t[l]&&t[l].length>0&&(s=t[l][0],n[n.length]=Mt("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:jv[l][e.bookType]||jv[l].xlsx}))},i=function(l){(t[l]||[]).forEach(function(u){n[n.length]=Mt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:jv[l][e.bookType]||jv[l].xlsx})})},o=function(l){(t[l]||[]).forEach(function(u){n[n.length]=Mt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[l][0]})})};return a("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var rn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Cx(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Kg(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(Yi)||[]).forEach(function(s){var a=Br(s);if(a[0]==="<Relationship"){var i={};i.Type=a.Type,i.Target=a.Target,i.Id=a.Id,a.TargetMode&&(i.TargetMode=a.TargetMode);var o=a.TargetMode==="External"?a.Target:bg(a.Target,e);r[o]=i,n[a.Id]=i}}),r["!id"]=n,r}function Cm(t){var e=[Aa,Mt("Relationships",null,{xmlns:Ua.RELS})];return Ks(t["!id"]).forEach(function(r){e[e.length]=Mt("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function zn(t,e,r,n,s,a){if(s||(s={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,s.Id="rId"+e,s.Type=n,s.Target=r,[rn.HLINK,rn.XPATH,rn.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),t["!id"][s.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][s.Id]=s,t[("/"+s.Target).replace("//","/")]=s,e}var pAe="application/vnd.oasis.opendocument.spreadsheet";function gAe(t,e){for(var r=J4(t),n,s;n=bx.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=Br(n[0],!1),s.path=="/"&&s.type!==pAe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}function xAe(t){var e=[Aa];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function K6(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function vAe(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function yAe(t){var e=[Aa];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(K6(t[r][0],t[r][1])),e.push(vAe("",t[r][0]));return e.push(K6("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function Sj(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+N2.version+"</meta:generator></office:meta></office:document-meta>"}var Kl=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],wAe=function(){for(var t=new Array(Kl.length),e=0;e<Kl.length;++e){var r=Kl[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t}();function Tj(t){var e={};t=rs(t);for(var r=0;r<Kl.length;++r){var n=Kl[r],s=t.match(wAe[r]);s!=null&&s.length>0&&(e[n[1]]=Cn(s[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=hs(e[n[1]]))}return e}function TE(t,e,r,n,s){s[t]!=null||e==null||e===""||(s[t]=e,e=Kn(e),n[n.length]=r?Mt(t,e,r):di(t,e))}function Nj(t,e){var r=e||{},n=[Aa,Mt("cp:coreProperties",null,{"xmlns:cp":Ua.CORE_PROPS,"xmlns:dc":Ua.dc,"xmlns:dcterms":Ua.dcterms,"xmlns:dcmitype":Ua.dcmitype,"xmlns:xsi":Ua.xsi})],s={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&TE("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:CS(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s),t.ModifiedDate!=null&&TE("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:CS(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s));for(var a=0;a!=Kl.length;++a){var i=Kl[a],o=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:t?t[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&TE(i[0],o,null,n,s)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var wh=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Bj=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function kj(t,e,r,n){var s=[];if(typeof t=="string")s=M6(t,n);else for(var a=0;a<t.length;++a)s=s.concat(t[a].map(function(d){return{v:d}}));var i=typeof e=="string"?M6(e,n).map(function(d){return d.v}):e,o=0,l=0;if(i.length>0)for(var u=0;u!==s.length;u+=2){switch(l=+s[u+1].v,s[u].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=i.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":r.NamedRanges=l,r.DefinedNames=i.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=i.slice(o,o+l);break}o+=l}}function bAe(t,e,r){var n={};return e||(e={}),t=rs(t),wh.forEach(function(s){var a=(t.match(yx(s[0]))||[])[1];switch(s[2]){case"string":a&&(e[s[1]]=Cn(a));break;case"bool":e[s[1]]=a==="true";break;case"raw":var i=t.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));i&&i.length>0&&(n[s[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&kj(n.HeadingPairs,n.TitlesOfParts,e,r),e}function Ij(t){var e=[],r=Mt;return t||(t={}),t.Application="SheetJS",e[e.length]=Aa,e[e.length]=Mt("Properties",null,{xmlns:Ua.EXT_PROPS,"xmlns:vt":Ua.vt}),wh.forEach(function(n){if(t[n[1]]!==void 0){var s;switch(n[2]){case"string":s=Kn(String(t[n[1]]));break;case"bool":s=t[n[1]]?"true":"false";break}s!==void 0&&(e[e.length]=r(n[0],s))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+Kn(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var CAe=/<[^>]+>[^<]*/g;function EAe(t,e){var r={},n="",s=t.match(CAe);if(s)for(var a=0;a!=s.length;++a){var i=s[a],o=Br(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Cn(o.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var l=i.split(">"),u=l[0].slice(4),d=l[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=Cn(d);break;case"bool":r[n]=ds(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=hs(d);break;case"cy":case"error":r[n]=Cn(d);break;default:if(u.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,l)}}else if(i.slice(0,2)!=="</"){if(e.WTF)throw new Error(i)}}}return r}function Fj(t){var e=[Aa,Mt("Properties",null,{xmlns:Ua.CUST_PROPS,"xmlns:vt":Ua.vt})];if(!t)return e.join("");var r=1;return Ks(t).forEach(function(s){++r,e[e.length]=Mt("property",Due(t[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Kn(s)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var NS={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},NE;function _Ae(t,e,r){NE||(NE=eb(NS)),e=NE[e]||e,t[e]=r}function SAe(t,e){var r=[];return Ks(NS).map(function(n){for(var s=0;s<Kl.length;++s)if(Kl[s][1]==n)return Kl[s];for(s=0;s<wh.length;++s)if(wh[s][1]==n)return wh[s];throw n}).forEach(function(n){if(t[n[1]]!=null){var s=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(di(NS[n[1]]||n[1],s))}}),Mt("DocumentProperties",r.join(""),{xmlns:Zo.o})}function TAe(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",s=[];return t&&Ks(t).forEach(function(a){if(Object.prototype.hasOwnProperty.call(t,a)){for(var i=0;i<Kl.length;++i)if(a==Kl[i][1])return;for(i=0;i<wh.length;++i)if(a==wh[i][1])return;for(i=0;i<r.length;++i)if(a==r[i])return;var o=t[a],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),s.push(Mt(D6(a),o,{"dt:dt":l}))}}),e&&Ks(e).forEach(function(a){if(Object.prototype.hasOwnProperty.call(e,a)&&!(t&&Object.prototype.hasOwnProperty.call(t,a))){var i=e[a],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),s.push(Mt(D6(a),i,{"dt:dt":o}))}}),"<"+n+' xmlns="'+Zo.o+'">'+s.join("")+"</"+n+">"}function cT(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function NAe(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),s=(r-n)/Math.pow(2,32);n*=1e7,s*=1e7;var a=n/Math.pow(2,32)|0;a>0&&(n=n%Math.pow(2,32),s+=a);var i=ct(8);return i.write_shift(4,n),i.write_shift(4,s),i}function Dj(t,e,r){var n=t.l,s=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return s}function Rj(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function Lj(t,e,r){return e===31?Rj(t):Dj(t,e,r)}function BS(t,e,r){return Lj(t,e,r===!1?0:4)}function BAe(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return Lj(t,e,0)}function kAe(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var s=t.l;r[n]=t.read_shift(0,"lpwstr").replace(io,""),t.l-s&2&&(t.l+=2)}return r}function IAe(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(io,"");return r}function FAe(t){var e=t.l,r=M2(t,Cj);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=M2(t,Eo);return[r,n]}function DAe(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(FAe(t));return r}function $6(t,e){for(var r=t.read_shift(4),n={},s=0;s!=r;++s){var a=t.read_shift(4),i=t.read_shift(4);n[a]=t.read_shift(i,e===1200?"utf16le":"utf8").replace(io,"").replace(wg,"!"),e===1200&&i%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function Uj(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function RAe(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function M2(t,e,r){var n=t.read_shift(2),s,a=r||{};if(t.l+=2,e!==z6&&n!==e&&AAe.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===z6?n:e){case 2:return s=t.read_shift(2,"i"),a.raw||(t.l+=2),s;case 3:return s=t.read_shift(4,"i"),s;case 11:return t.read_shift(4)!==0;case 19:return s=t.read_shift(4),s;case 30:return Dj(t,n,4).replace(io,"");case 31:return Rj(t);case 64:return cT(t);case 65:return Uj(t);case 71:return RAe(t);case 80:return BS(t,n,!a.raw).replace(io,"");case 81:return BAe(t,n).replace(io,"");case 4108:return DAe(t);case 4126:case 4127:return n==4127?kAe(t):IAe(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function W6(t,e){var r=ct(4),n=ct(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=ct(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=NAe(e);break;case 31:case 80:for(n=ct(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return Xa([r,n])}function Y6(t,e){var r=t.l,n=t.read_shift(4),s=t.read_shift(4),a=[],i=0,o=0,l=-1,u={};for(i=0;i!=s;++i){var d=t.read_shift(4),h=t.read_shift(4);a[i]=[d,h+r]}a.sort(function(k,R){return k[1]-R[1]});var m={};for(i=0;i!=s;++i){if(t.l!==a[i][1]){var g=!0;if(i>0&&e)switch(e[a[i-1][0]].t){case 2:t.l+2===a[i][1]&&(t.l+=2,g=!1);break;case 80:t.l<=a[i][1]&&(t.l=a[i][1],g=!1);break;case 4108:t.l<=a[i][1]&&(t.l=a[i][1],g=!1);break}if((!e||i==0)&&t.l<=a[i][1]&&(g=!1,t.l=a[i][1]),g)throw new Error("Read Error: Expected address "+a[i][1]+" at "+t.l+" :"+i)}if(e){var b=e[a[i][0]];if(m[b.n]=M2(t,b.t,{raw:!0}),b.p==="version"&&(m[b.n]=String(m[b.n]>>16)+"."+("0000"+String(m[b.n]&65535)).slice(-4)),b.n=="CodePage")switch(m[b.n]){case 0:m[b.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Nc(o=m[b.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+m[b.n])}}else if(a[i][0]===1){if(o=m.CodePage=M2(t,oT),Nc(o),l!==-1){var y=t.l;t.l=a[l][1],u=$6(t,o),t.l=y}}else if(a[i][0]===0){if(o===0){l=i,t.l=a[i+1][1];continue}u=$6(t,o)}else{var _=u[a[i][0]],N;switch(t[t.l]){case 65:t.l+=4,N=Uj(t);break;case 30:t.l+=4,N=BS(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,N=BS(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,N=t.read_shift(4,"i");break;case 19:t.l+=4,N=t.read_shift(4);break;case 5:t.l+=4,N=t.read_shift(8,"f");break;case 11:t.l+=4,N=ra(t,4);break;case 64:t.l+=4,N=hs(cT(t));break;default:throw new Error("unparsed value: "+t[t.l])}m[_]=N}}return t.l=r+n,m}var Mj=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function LAe(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function X6(t,e,r){var n=ct(8),s=[],a=[],i=8,o=0,l=ct(8),u=ct(8);if(l.write_shift(4,2),l.write_shift(4,1200),u.write_shift(4,1),a.push(l),s.push(u),i+=8+l.length,!e){u=ct(8),u.write_shift(4,0),s.unshift(u);var d=[ct(4)];for(d[0].write_shift(4,t.length),o=0;o<t.length;++o){var h=t[o][0];for(l=ct(8+2*(h.length+1)+(h.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,h.length+1),l.write_shift(0,h,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=Xa(d),a.unshift(l),i+=8+l.length}for(o=0;o<t.length;++o)if(!(e&&!e[t[o][0]])&&!(Mj.indexOf(t[o][0])>-1||Bj.indexOf(t[o][0])>-1)&&t[o][1]!=null){var m=t[o][1],g=0;if(e){g=+e[t[o][0]];var b=r[g];if(b.p=="version"&&typeof m=="string"){var y=m.split(".");m=(+y[0]<<16)+(+y[1]||0)}l=W6(b.t,m)}else{var _=LAe(m);_==-1&&(_=31,m=String(m)),l=W6(_,m)}a.push(l),u=ct(8),u.write_shift(4,e?g:2+o),s.push(u),i+=8+l.length}var N=8*(a.length+1);for(o=0;o<a.length;++o)s[o].write_shift(4,N),N+=a[o].length;return n.write_shift(4,i),n.write_shift(4,a.length),Xa([n].concat(s).concat(a))}function J6(t,e,r){var n=t.content;if(!n)return{};ui(n,0);var s,a,i,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==ur.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(a=n.read_shift(16),o=n.read_shift(4),s===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);s===2&&(i=n.read_shift(16),l=n.read_shift(4));var h=Y6(n,e),m={SystemIdentifier:u};for(var g in h)m[g]=h[g];if(m.FMTID=a,s===1)return m;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var b;try{b=Y6(n,null)}catch{}for(g in b)m[g]=b[g];return m.FMTID=[a,i],m}function Z6(t,e,r,n,s,a){var i=ct(s?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,ur.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,s?2:1),i.write_shift(16,e,"hex"),i.write_shift(4,s?68:48);var l=X6(t,r,n);if(o.push(l),s){var u=X6(s,null,null);i.write_shift(16,a,"hex"),i.write_shift(4,68+l.length),o.push(u)}return Xa(o)}function Fd(t,e){return t.read_shift(e),null}function UAe(t,e){e||(e=ct(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function MAe(t,e,r){for(var n=[],s=t.l+e;t.l<s;)n.push(r(t,s-t.l));if(s!==t.l)throw new Error("Slurp error");return n}function ra(t,e){return t.read_shift(e)===1}function no(t,e){return e||(e=ct(2)),e.write_shift(2,+!!t),e}function Ca(t){return t.read_shift(2,"u")}function Pl(t,e){return e||(e=ct(2)),e.write_shift(2,t),e}function Pj(t,e){return MAe(t,e,Ca)}function PAe(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function jj(t,e,r){return r||(r=ct(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function A1(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var a=t.read_shift(1);a&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var i=n?t.read_shift(n,s):"";return i}function jAe(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,s=r&8,a=1+(r&1),i=0,o,l={};s&&(i=t.read_shift(2)),n&&(o=t.read_shift(4));var u=a==2?"dbcs-cont":"sbcs-cont",d=e===0?"":t.read_shift(e,u);return s&&(t.l+=4*i),n&&(t.l+=o),l.t=d,s||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function OAe(t){var e=t.t||"",r=ct(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=ct(2*e.length);n.write_shift(2*e.length,e,"utf16le");var s=[r,n];return Xa(s)}function Uh(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var s=t.read_shift(1);return s===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function d1(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):Uh(t,n,r)}function Zh(t,e,r){if(r.biff>5)return d1(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function Oj(t,e,r){return r||(r=ct(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function QAe(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function HAe(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var s=t.read_shift((n?e-24:e)>>1,"utf16le").replace(io,"");return n&&(t.l+=24),s}function VAe(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=t.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var a=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=t.read_shift(a>>1,"utf16le").replace(io,"");return r+i}function GAe(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return HAe(t);case"0303000000000000c000000000000046":return VAe(t);default:throw new Error("Unsupported Moniker "+r)}}function Ov(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(io,""):"";return r}function eD(t,e){e||(e=ct(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function zAe(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=t.read_shift(2);t.l+=2;var a,i,o,l,u="",d,h;s&16&&(a=Ov(t,r-t.l)),s&128&&(i=Ov(t,r-t.l)),(s&257)===257&&(o=Ov(t,r-t.l)),(s&257)===1&&(l=GAe(t,r-t.l)),s&8&&(u=Ov(t,r-t.l)),s&32&&(d=t.read_shift(16)),s&64&&(h=cT(t)),t.l=r;var m=i||o||l||"";m&&u&&(m+="#"+u),m||(m="#"+u),s&2&&m.charAt(0)=="/"&&m.charAt(1)!="/"&&(m="file://"+m);var g={Target:m};return d&&(g.guid=d),h&&(g.time=h),a&&(g.Tooltip=a),g}function qAe(t){var e=ct(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var s=n.indexOf("#"),a=s>-1?31:23;switch(n.charAt(0)){case"#":a=28;break;case".":a&=-3;break}e.write_shift(4,2),e.write_shift(4,a);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)e.write_shift(4,i[r]);if(a==28)n=n.slice(1),eD(n,e);else if(a&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)e.write_shift(1,parseInt(i[r],16));var o=s>-1?n.slice(0,s):n;for(e.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)e.write_shift(2,o.charCodeAt(r));e.write_shift(2,0),a&8&&eD(s>-1?n.slice(s+1):"",e)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)e.write_shift(1,parseInt(i[r],16));for(var l=0;n.slice(l*3,l*3+3)=="../"||n.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)e.write_shift(1,n.charCodeAt(r+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function Qj(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),s=t.read_shift(1);return[e,r,n,s]}function Hj(t,e){var r=Qj(t);return r[3]=0,r}function ju(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function Mh(t,e,r,n){return n||(n=ct(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function KAe(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function $Ae(t,e,r){return e===0?"":Zh(t,e,r)}function WAe(t,e,r){var n=r.biff>8?4:2,s=t.read_shift(n),a=t.read_shift(n,"i"),i=t.read_shift(n,"i");return[s,a,i]}function Vj(t){var e=t.read_shift(2),r=iT(t);return[e,r]}function YAe(t,e,r){t.l+=4,e-=4;var n=t.l+e,s=A1(t,e,r),a=t.read_shift(2);if(n-=t.l,a!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+a);return t.l+=a,s}function nb(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),s=t.read_shift(2);return{s:{c:n,r:e},e:{c:s,r}}}function Gj(t,e){return e||(e=ct(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function zj(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),s=t.read_shift(1);return{s:{c:n,r:e},e:{c:s,r}}}var XAe=zj;function qj(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function JAe(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function ZAe(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function Di(t){t.l+=2,t.l+=t.read_shift(2)}var ede={0:Di,4:Di,5:Di,6:Di,7:ZAe,8:Di,9:Di,10:Di,11:Di,12:Di,13:JAe,14:Di,15:Di,16:Di,17:Di,18:Di,19:Di,20:Di,21:qj};function tde(t,e){for(var r=t.l+e,n=[];t.l<r;){var s=t.read_shift(2);t.l-=2;try{n.push(ede[s](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function Qv(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function uT(t,e,r){var n=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,s=8;break;case"biff4":n=4,s=6;break;case"biff3":n=3,s=6;break;case"biff2":n=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var a=ct(s);return a.write_shift(2,n),a.write_shift(2,e),s>4&&a.write_shift(2,29282),s>6&&a.write_shift(2,1997),s>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function rde(t,e){return e===0||t.read_shift(2),1200}function nde(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,s=Zh(t,0,r);return t.read_shift(e+n-t.l),s}function sde(t,e){var r=!e||e.biff==8,n=ct(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function ade(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function ide(t,e,r){var n=t.read_shift(4),s=t.read_shift(1)&3,a=t.read_shift(1);switch(a){case 0:a="Worksheet";break;case 1:a="Macrosheet";break;case 2:a="Chartsheet";break;case 6:a="VBAModule";break}var i=A1(t,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:s,dt:a,name:i}}function ode(t,e){var r=!e||e.biff>=8?2:1,n=ct(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var s=n.slice(0,n.l);return s.l=n.l,s}function lde(t,e){for(var r=t.l+e,n=t.read_shift(4),s=t.read_shift(4),a=[],i=0;i!=s&&t.l<r;++i)a.push(jAe(t));return a.Count=n,a.Unique=s,a}function cde(t,e){var r=ct(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],s=0;s<t.length;++s)n[s]=OAe(t[s]);var a=Xa([r].concat(n));return a.parts=[r.length].concat(n.map(function(i){return i.length})),a}function ude(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function Ade(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function dde(t){var e=KAe(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function fde(t){return t.read_shift(2),t.read_shift(4)}function tD(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var s=t.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var a={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[a,s]}function hde(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2),i=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),u=t.read_shift(2);return{Pos:[e,r],Dim:[n,s],Flags:a,CurTab:i,FirstTab:o,Selected:l,TabRatio:u}}function mde(){var t=ct(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function pde(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function gde(t){var e=ct(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function xde(){}function vde(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=A1(t,0,r),n}function yde(t,e){var r=t.name||"Arial",n=e&&e.biff==5,s=n?15+r.length:16+2*r.length,a=ct(s);return a.write_shift(2,t.sz*20),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,r.length),n||a.write_shift(1,1),a.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),a}function wde(t){var e=ju(t);return e.isst=t.read_shift(4),e}function bde(t,e,r,n){var s=ct(10);return Mh(t,e,n,s),s.write_shift(4,r),s}function Cde(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,s=ju(t);r.biff==2&&t.l++;var a=d1(t,n-t.l,r);return s.val=a,s}function Ede(t,e,r,n,s){var a=!s||s.biff==8,i=ct(8+ +a+(1+a)*r.length);return Mh(t,e,n,i),i.write_shift(2,r.length),a&&i.write_shift(1,1),i.write_shift((1+a)*r.length,r,a?"utf16le":"sbcs"),i}function _de(t,e,r){var n=t.read_shift(2),s=Zh(t,0,r);return[n,s]}function Sde(t,e,r,n){var s=r&&r.biff==5;n||(n=ct(s?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(s?1:2,e.length),s||n.write_shift(1,1),n.write_shift((s?1:2)*e.length,e,s?"sbcs":"utf16le");var a=n.length>n.l?n.slice(0,n.l):n;return a.l==null&&(a.l=a.length),a}var Tde=Zh;function rD(t,e,r){var n=t.l+e,s=r.biff==8||!r.biff?4:2,a=t.read_shift(s),i=t.read_shift(s),o=t.read_shift(2),l=t.read_shift(2);return t.l=n,{s:{r:a,c:o},e:{r:i,c:l}}}function Nde(t,e){var r=e.biff==8||!e.biff?4:2,n=ct(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function Bde(t){var e=t.read_shift(2),r=t.read_shift(2),n=Vj(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function kde(t,e){for(var r=t.l+e-2,n=t.read_shift(2),s=t.read_shift(2),a=[];t.l<r;)a.push(Vj(t));if(t.l!==r)throw new Error("MulRK read error");var i=t.read_shift(2);if(a.length!=i-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:i,rkrec:a}}function Ide(t,e){for(var r=t.l+e-2,n=t.read_shift(2),s=t.read_shift(2),a=[];t.l<r;)a.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var i=t.read_shift(2);if(a.length!=i-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:i,ixfe:a}}function Fde(t,e,r,n){var s={},a=t.read_shift(4),i=t.read_shift(4),o=t.read_shift(4),l=t.read_shift(2);return s.patternType=dAe[o>>26],n.cellStyles&&(s.alc=a&7,s.fWrap=a>>3&1,s.alcV=a>>4&7,s.fJustLast=a>>7&1,s.trot=a>>8&255,s.cIndent=a>>16&15,s.fShrinkToFit=a>>20&1,s.iReadOrder=a>>22&2,s.fAtrNum=a>>26&1,s.fAtrFnt=a>>27&1,s.fAtrAlc=a>>28&1,s.fAtrBdr=a>>29&1,s.fAtrPat=a>>30&1,s.fAtrProt=a>>31&1,s.dgLeft=i&15,s.dgRight=i>>4&15,s.dgTop=i>>8&15,s.dgBottom=i>>12&15,s.icvLeft=i>>16&127,s.icvRight=i>>23&127,s.grbitDiag=i>>30&3,s.icvTop=o&127,s.icvBottom=o>>7&127,s.icvDiag=o>>14&127,s.dgDiag=o>>21&15,s.icvFore=l&127,s.icvBack=l>>7&127,s.fsxButton=l>>14&1),s}function Dde(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=Fde(t,e,n.fStyle,r),n}function nD(t,e,r,n){var s=r&&r.biff==5;n||(n=ct(s?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var a=0;return t.numFmtId>0&&s&&(a|=1024),n.write_shift(4,a),n.write_shift(4,0),s||n.write_shift(4,0),n.write_shift(2,0),n}function Rde(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function Lde(t){var e=ct(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function sD(t,e,r){var n=ju(t);(r.biff==2||e==9)&&++t.l;var s=PAe(t);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function Ude(t,e,r,n,s,a){var i=ct(8);return Mh(t,e,n,i),jj(r,a,i),i}function Mde(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=ju(t),s=Vi(t);return n.val=s,n}function Pde(t,e,r,n){var s=ct(14);return Mh(t,e,n,s),Lh(r,s),s}var aD=$Ae;function jde(t,e,r){var n=t.l+e,s=t.read_shift(2),a=t.read_shift(2);if(r.sbcch=a,a==1025||a==14849)return[a,s];if(a<1||a>255)throw new Error("Unexpected SupBook type: "+a);for(var i=Uh(t,a),o=[];n>t.l;)o.push(d1(t));return[a,s,i,o]}function iD(t,e,r){var n=t.read_shift(2),s,a={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=YAe(t,e-2,r)),a.body=s||t.read_shift(e-2),typeof s=="string"&&(a.Name=s),a}var Ode=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function oD(t,e,r){var n=t.l+e,s=t.read_shift(2),a=t.read_shift(1),i=t.read_shift(1),o=t.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),l=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var u=Uh(t,i,r);s&32&&(u=Ode[u.charCodeAt(0)]);var d=n-t.l;r&&r.biff==2&&--d;var h=n==t.l||o===0||!(d>0)?[]:tpe(t,d,r,o);return{chKey:a,Name:u,itab:l,rgce:h}}function Kj(t,e,r){if(r.biff<8)return Qde(t,e,r);for(var n=[],s=t.l+e,a=t.read_shift(r.biff>8?4:2);a--!==0;)n.push(WAe(t,r.biff>8?12:6,r));if(t.l!=s)throw new Error("Bad ExternSheet: "+t.l+" != "+s);return n}function Qde(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=A1(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function Hde(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),s=t.read_shift(2),a=Uh(t,n,r),i=Uh(t,s,r);return[a,i]}function Vde(t,e,r){var n=zj(t);t.l++;var s=t.read_shift(1);return e-=8,[rpe(t,e,r),s,n]}function lD(t,e,r){var n=XAe(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,Zme(t,e,r)]}function Gde(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function zde(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2),i=t.read_shift(2),o=Zh(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:s},o,i,a]}}function qde(t,e,r){return zde(t,e,r)}function Kde(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(nb(t));return r}function $de(t){var e=ct(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)Gj(t[r],e);return e}function Wde(t,e,r){if(r&&r.biff<8)return Xde(t,e,r);var n=qj(t),s=tde(t,e-22,n[1]);return{cmo:n,ft:s}}var Yde={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var s=t.read_shift(1);return t.l+=s,t.l=r,{fmt:n}}};function Xde(t,e,r){t.l+=4;var n=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var i=[];return i.push((Yde[n]||Ki)(t,e,r)),{cmo:[s,n,a],ft:i}}function Jde(t,e,r){var n=t.l,s="";try{t.l+=4;var a=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(a)==-1?t.l+=6:i=QAe(t,6,r);var o=t.read_shift(2);t.read_shift(2),Ca(t,2);var l=t.read_shift(2);t.l+=l;for(var u=1;u<t.lens.length-1;++u){if(t.l-n!=t.lens[u])throw new Error("TxO: bad continue record");var d=t[t.l],h=Uh(t,t.lens[u+1]-t.lens[u]-1);if(s+=h,s.length>=(d?o:2*o))break}if(s.length!==o&&s.length!==o*2)throw new Error("cchText: "+o+" != "+s.length);return t.l=n+e,{t:s}}catch{return t.l=n+e,{t:s}}}function Zde(t,e){var r=nb(t);t.l+=16;var n=zAe(t,e-24);return[r,n]}function efe(t){var e=ct(24),r=Is(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)e.write_shift(1,parseInt(n[s],16));return Xa([e,qAe(t[1])])}function tfe(t,e){t.read_shift(2);var r=nb(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(io,""),[r,n]}function rfe(t){var e=t[1].Tooltip,r=ct(10+2*(e.length+1));r.write_shift(2,2048);var n=Is(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var s=0;s<e.length;++s)r.write_shift(2,e.charCodeAt(s));return r.write_shift(2,0),r}function nfe(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=q6[r]||r,r=t.read_shift(2),e[1]=q6[r]||r,e}function sfe(t){return t||(t=ct(4)),t.write_shift(2,1),t.write_shift(2,1),t}function afe(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(Hj(t));return r}function ife(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(Hj(t));return r}function ofe(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function $j(t,e,r){if(!r.cellStyles)return Ki(t,e);var n=r&&r.biff>=12?4:2,s=t.read_shift(n),a=t.read_shift(n),i=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(2);n==2&&(t.l+=2);var u={s,e:a,w:i,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(u.level=l>>8&7),u}function lfe(t,e){var r=ct(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function cfe(t,e){var r={};return e<32||(t.l+=16,r.header=Vi(t),r.footer=Vi(t),t.l+=2),r}function ufe(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var s=t.read_shift(1);return t.l+=3,s&16&&(n.area=!0),n}function Afe(t){for(var e=ct(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}var dfe=ju,ffe=Pj,hfe=d1;function mfe(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),s={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,s}function pfe(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=ju(t);++t.l;var s=Zh(t,e-7,r);return n.t="str",n.val=s,n}function gfe(t){var e=ju(t);++t.l;var r=Vi(t);return e.t="n",e.val=r,e}function xfe(t,e,r){var n=ct(15);return p1(n,t,e),n.write_shift(8,r,"f"),n}function vfe(t){var e=ju(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function yfe(t,e,r){var n=ct(9);return p1(n,t,e),n.write_shift(2,r),n}function wfe(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function bfe(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function Cfe(t,e,r){var n=t.l+e,s=ju(t),a=t.read_shift(2),i=Uh(t,a,r);return t.l=n,s.t="str",s.val=i,s}var Efe=[2,3,48,49,131,139,140,245],kS=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=eb({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var u=[],d=bf(1);switch(l.type){case"base64":d=tl(ol(o));break;case"binary":d=tl(o);break;case"buffer":case"array":d=o;break}ui(d,0);var h=d.read_shift(1),m=!!(h&136),g=!1,b=!1;switch(h){case 2:break;case 3:break;case 48:g=!0,m=!0;break;case 49:g=!0,m=!0;break;case 131:break;case 139:break;case 140:b=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+h.toString(16))}var y=0,_=521;h==2&&(y=d.read_shift(2)),d.l+=3,h!=2&&(y=d.read_shift(4)),y>1048576&&(y=1e6),h!=2&&(_=d.read_shift(2));var N=d.read_shift(2),k=l.codepage||1252;h!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(k=t[d[d.l]]),d.l+=1,d.l+=2),b&&(d.l+=36);for(var R=[],M={},j=Math.min(d.length,h==2?521:_-10-(g?264:0)),L=b?32:11;d.l<j&&d[d.l]!=13;)switch(M={},M.name=gx.utils.decode(k,d.slice(d.l,d.l+L)).replace(/[\u0000\r\n].*$/g,""),d.l+=L,M.type=String.fromCharCode(d.read_shift(1)),h!=2&&!b&&(M.offset=d.read_shift(4)),M.len=d.read_shift(1),h==2&&(M.offset=d.read_shift(2)),M.dec=d.read_shift(1),M.name.length&&R.push(M),h!=2&&(d.l+=b?13:14),M.type){case"B":(!g||M.len!=8)&&l.WTF&&console.log("Skipping "+M.name+":"+M.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+M.name+":"+M.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+M.type)}if(d[d.l]!==13&&(d.l=_-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=_;var C=0,E=0;for(u[0]=[],E=0;E!=R.length;++E)u[0][E]=R[E].name;for(;y-- >0;){if(d[d.l]===42){d.l+=N;continue}for(++d.l,u[++C]=[],E=0,E=0;E!=R.length;++E){var B=d.slice(d.l,d.l+R[E].len);d.l+=R[E].len,ui(B,0);var Q=gx.utils.decode(k,B);switch(R[E].type){case"C":Q.trim().length&&(u[C][E]=Q.replace(/\s+$/,""));break;case"D":Q.length===8?u[C][E]=new Date(+Q.slice(0,4),+Q.slice(4,6)-1,+Q.slice(6,8)):u[C][E]=Q;break;case"F":u[C][E]=parseFloat(Q.trim());break;case"+":case"I":u[C][E]=b?B.read_shift(-4,"i")^2147483648:B.read_shift(4,"i");break;case"L":switch(Q.trim().toUpperCase()){case"Y":case"T":u[C][E]=!0;break;case"N":case"F":u[C][E]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+Q+"|")}break;case"M":if(!m)throw new Error("DBF Unexpected MEMO for type "+h.toString(16));u[C][E]="##MEMO##"+(b?parseInt(Q.trim(),10):B.read_shift(4));break;case"N":Q=Q.replace(/\u0000/g,"").trim(),Q&&Q!="."&&(u[C][E]=+Q||0);break;case"@":u[C][E]=new Date(B.read_shift(-8,"f")-621356832e5);break;case"T":u[C][E]=new Date((B.read_shift(4)-2440588)*864e5+B.read_shift(4));break;case"Y":u[C][E]=B.read_shift(4,"i")/1e4+B.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[C][E]=-B.read_shift(-8,"f");break;case"B":if(g&&R[E].len==8){u[C][E]=B.read_shift(8,"f");break}case"G":case"P":B.l+=R[E].len;break;case"0":if(R[E].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+R[E].type)}}}if(h!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return l&&l.sheetRows&&(u=u.slice(0,l.sheetRows)),l.DBF=R,u}function n(o,l){var u=l||{};u.dateNF||(u.dateNF="yyyymmdd");var d=lp(r(o,u),u);return d["!cols"]=u.DBF.map(function(h){return{wch:h.len,DBF:h}}),delete u.DBF,d}function s(o,l){try{return If(n(o,l),l)}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,l){var u=l||{};if(+u.codepage>=0&&Nc(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=ko(),h=O2(o,{header:1,raw:!0,cellDates:!0}),m=h[0],g=h.slice(1),b=o["!cols"]||[],y=0,_=0,N=0,k=1;for(y=0;y<m.length;++y){if(((b[y]||{}).DBF||{}).name){m[y]=b[y].DBF.name,++N;continue}if(m[y]!=null){if(++N,typeof m[y]=="number"&&(m[y]=m[y].toString(10)),typeof m[y]!="string")throw new Error("DBF Invalid column name "+m[y]+" |"+typeof m[y]+"|");if(m.indexOf(m[y])!==y){for(_=0;_<1024;++_)if(m.indexOf(m[y]+"_"+_)==-1){m[y]+="_"+_;break}}}}var R=En(o["!ref"]),M=[],j=[],L=[];for(y=0;y<=R.e.c-R.s.c;++y){var C="",E="",B=0,Q=[];for(_=0;_<g.length;++_)g[_][y]!=null&&Q.push(g[_][y]);if(Q.length==0||m[y]==null){M[y]="?";continue}for(_=0;_<Q.length;++_){switch(typeof Q[_]){case"number":E="B";break;case"string":E="C";break;case"boolean":E="L";break;case"object":E=Q[_]instanceof Date?"D":"C";break;default:E="C"}B=Math.max(B,String(Q[_]).length),C=C&&C!=E?"C":E}B>250&&(B=250),E=((b[y]||{}).DBF||{}).type,E=="C"&&b[y].DBF.len>B&&(B=b[y].DBF.len),C=="B"&&E=="N"&&(C="N",L[y]=b[y].DBF.dec,B=b[y].DBF.len),j[y]=C=="C"||E=="N"?B:a[C]||0,k+=j[y],M[y]=C}var D=d.next(32);for(D.write_shift(4,318902576),D.write_shift(4,g.length),D.write_shift(2,296+32*N),D.write_shift(2,k),y=0;y<4;++y)D.write_shift(4,0);for(D.write_shift(4,0|(+e[MP]||3)<<8),y=0,_=0;y<m.length;++y)if(m[y]!=null){var I=d.next(32),O=(m[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);I.write_shift(1,O,"sbcs"),I.write_shift(1,M[y]=="?"?"C":M[y],"sbcs"),I.write_shift(4,_),I.write_shift(1,j[y]||a[M[y]]||0),I.write_shift(1,L[y]||0),I.write_shift(1,2),I.write_shift(4,0),I.write_shift(1,0),I.write_shift(4,0),I.write_shift(4,0),_+=j[y]||a[M[y]]||0}var G=d.next(264);for(G.write_shift(4,13),y=0;y<65;++y)G.write_shift(4,0);for(y=0;y<g.length;++y){var se=d.next(k);for(se.write_shift(1,0),_=0;_<m.length;++_)if(m[_]!=null)switch(M[_]){case"L":se.write_shift(1,g[y][_]==null?63:g[y][_]?84:70);break;case"B":se.write_shift(8,g[y][_]||0,"f");break;case"N":var J="0";for(typeof g[y][_]=="number"&&(J=g[y][_].toFixed(L[_]||0)),N=0;N<j[_]-J.length;++N)se.write_shift(1,32);se.write_shift(1,J,"sbcs");break;case"D":g[y][_]?(se.write_shift(4,("0000"+g[y][_].getFullYear()).slice(-4),"sbcs"),se.write_shift(2,("00"+(g[y][_].getMonth()+1)).slice(-2),"sbcs"),se.write_shift(2,("00"+g[y][_].getDate()).slice(-2),"sbcs")):se.write_shift(8,"00000000","sbcs");break;case"C":var re=String(g[y][_]!=null?g[y][_]:"").slice(0,j[_]);for(se.write_shift(1,re,"sbcs"),N=0;N<j[_]-re.length;++N)se.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:s,to_sheet:n,from_sheet:i}}(),Wj=function(){var t={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Ks(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(m,g){var b=t[g];return typeof b=="number"?v6(b):b},n=function(m,g,b){var y=g.charCodeAt(0)-32<<4|b.charCodeAt(0)-48;return y==59?m:v6(y)};t["|"]=254;function s(m,g){switch(g.type){case"base64":return a(ol(m),g);case"binary":return a(m,g);case"buffer":return a(Xr&&Buffer.isBuffer(m)?m.toString("binary"):kf(m),g);case"array":return a(Rh(m),g)}throw new Error("Unrecognized type "+g.type)}function a(m,g){var b=m.split(/[\n\r]+/),y=-1,_=-1,N=0,k=0,R=[],M=[],j=null,L={},C=[],E=[],B=[],Q=0,D;for(+g.codepage>=0&&Nc(+g.codepage);N!==b.length;++N){Q=0;var I=b[N].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),O=I.replace(/;;/g,"\0").split(";").map(function(te){return te.replace(/\u0000/g,";")}),G=O[0],se;if(I.length>0)switch(G){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":O[1].charAt(0)=="P"&&M.push(I.slice(3).replace(/;;/g,";"));break;case"C":var J=!1,re=!1,q=!1,z=!1,W=-1,ie=-1;for(k=1;k<O.length;++k)switch(O[k].charAt(0)){case"A":break;case"X":_=parseInt(O[k].slice(1))-1,re=!0;break;case"Y":for(y=parseInt(O[k].slice(1))-1,re||(_=0),D=R.length;D<=y;++D)R[D]=[];break;case"K":se=O[k].slice(1),se.charAt(0)==='"'?se=se.slice(1,se.length-1):se==="TRUE"?se=!0:se==="FALSE"?se=!1:isNaN(kc(se))?isNaN(jm(se).getDate())||(se=hs(se)):(se=kc(se),j!==null&&ip(j)&&(se=rb(se))),J=!0;break;case"E":z=!0;var P=Em(O[k].slice(1),{r:y,c:_});R[y][_]=[R[y][_],P];break;case"S":q=!0,R[y][_]=[R[y][_],"S5S"];break;case"G":break;case"R":W=parseInt(O[k].slice(1))-1;break;case"C":ie=parseInt(O[k].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+I)}if(J&&(R[y][_]&&R[y][_].length==2?R[y][_][0]=se:R[y][_]=se,j=null),q){if(z)throw new Error("SYLK shared formula cannot have own formula");var Y=W>-1&&R[W][ie];if(!Y||!Y[1])throw new Error("SYLK shared formula cannot find base");R[y][_][1]=fO(Y[1],{r:y-W,c:_-ie})}break;case"F":var Z=0;for(k=1;k<O.length;++k)switch(O[k].charAt(0)){case"X":_=parseInt(O[k].slice(1))-1,++Z;break;case"Y":for(y=parseInt(O[k].slice(1))-1,D=R.length;D<=y;++D)R[D]=[];break;case"M":Q=parseInt(O[k].slice(1))/20;break;case"F":break;case"G":break;case"P":j=M[parseInt(O[k].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(B=O[k].slice(1).split(" "),D=parseInt(B[0],10);D<=parseInt(B[1],10);++D)Q=parseInt(B[2],10),E[D-1]=Q===0?{hidden:!0}:{wch:Q},Cf(E[D-1]);break;case"C":_=parseInt(O[k].slice(1))-1,E[_]||(E[_]={});break;case"R":y=parseInt(O[k].slice(1))-1,C[y]||(C[y]={}),Q>0?(C[y].hpt=Q,C[y].hpx=Qm(Q)):Q===0&&(C[y].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+I)}Z<1&&(j=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+I)}}return C.length>0&&(L["!rows"]=C),E.length>0&&(L["!cols"]=E),g&&g.sheetRows&&(R=R.slice(0,g.sheetRows)),[R,L]}function i(m,g){var b=s(m,g),y=b[0],_=b[1],N=lp(y,g);return Ks(_).forEach(function(k){N[k]=_[k]}),N}function o(m,g){return If(i(m,g),g)}function l(m,g,b,y){var _="C;Y"+(b+1)+";X"+(y+1)+";K";switch(m.t){case"n":_+=m.v||0,m.f&&!m.F&&(_+=";E"+pT(m.f,{r:b,c:y}));break;case"b":_+=m.v?"TRUE":"FALSE";break;case"e":_+=m.w||m.v;break;case"d":_+='"'+(m.w||m.v)+'"';break;case"s":_+='"'+m.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return _}function u(m,g){g.forEach(function(b,y){var _="F;W"+(y+1)+" "+(y+1)+" ";b.hidden?_+="0":(typeof b.width=="number"&&!b.wpx&&(b.wpx=_x(b.width)),typeof b.wpx=="number"&&!b.wch&&(b.wch=Sx(b.wpx)),typeof b.wch=="number"&&(_+=Math.round(b.wch))),_.charAt(_.length-1)!=" "&&m.push(_)})}function d(m,g){g.forEach(function(b,y){var _="F;";b.hidden?_+="M0;":b.hpt?_+="M"+20*b.hpt+";":b.hpx&&(_+="M"+20*Tx(b.hpx)+";"),_.length>2&&m.push(_+"R"+(y+1))})}function h(m,g){var b=["ID;PWXL;N;E"],y=[],_=En(m["!ref"]),N,k=Array.isArray(m),R=`\r
`;b.push("P;PGeneral"),b.push("F;P0;DG0G8;M255"),m["!cols"]&&u(b,m["!cols"]),m["!rows"]&&d(b,m["!rows"]),b.push("B;Y"+(_.e.r-_.s.r+1)+";X"+(_.e.c-_.s.c+1)+";D"+[_.s.c,_.s.r,_.e.c,_.e.r].join(" "));for(var M=_.s.r;M<=_.e.r;++M)for(var j=_.s.c;j<=_.e.c;++j){var L=Er({r:M,c:j});N=k?(m[M]||[])[j]:m[L],!(!N||N.v==null&&(!N.f||N.F))&&y.push(l(N,m,M,j))}return b.join(R)+R+y.join(R)+R+"E"+R}return{to_workbook:o,to_sheet:i,from_sheet:h}}(),Yj=function(){function t(a,i){switch(i.type){case"base64":return e(ol(a),i);case"binary":return e(a,i);case"buffer":return e(Xr&&Buffer.isBuffer(a)?a.toString("binary"):kf(a),i);case"array":return e(Rh(a),i)}throw new Error("Unrecognized type "+i.type)}function e(a,i){for(var o=a.split(`
`),l=-1,u=-1,d=0,h=[];d!==o.length;++d){if(o[d].trim()==="BOT"){h[++l]=[],u=0;continue}if(!(l<0)){var m=o[d].trim().split(","),g=m[0],b=m[1];++d;for(var y=o[d]||"";(y.match(/["]/g)||[]).length&1&&d<o.length-1;)y+=`
`+o[++d];switch(y=y.trim(),+g){case-1:if(y==="BOT"){h[++l]=[],u=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?h[l][u]=!0:y==="FALSE"?h[l][u]=!1:isNaN(kc(b))?isNaN(jm(b).getDate())?h[l][u]=b:h[l][u]=hs(b):h[l][u]=kc(b),++u;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),h[l][u++]=y!==""?y:null;break}if(y==="EOD")break}}return i&&i.sheetRows&&(h=h.slice(0,i.sheetRows)),h}function r(a,i){return lp(t(a,i),i)}function n(a,i){return If(r(a,i),i)}var s=function(){var a=function(l,u,d,h,m){l.push(u),l.push(d+","+h),l.push('"'+m.replace(/"/g,'""')+'"')},i=function(l,u,d,h){l.push(u+","+d),l.push(u==1?'"'+h.replace(/"/g,'""')+'"':h)};return function(l){var u=[],d=En(l["!ref"]),h,m=Array.isArray(l);a(u,"TABLE",0,1,"sheetjs"),a(u,"VECTORS",0,d.e.r-d.s.r+1,""),a(u,"TUPLES",0,d.e.c-d.s.c+1,""),a(u,"DATA",0,0,"");for(var g=d.s.r;g<=d.e.r;++g){i(u,-1,0,"BOT");for(var b=d.s.c;b<=d.e.c;++b){var y=Er({r:g,c:b});if(h=m?(l[g]||[])[b]:l[y],!h){i(u,1,0,"");continue}switch(h.t){case"n":var _=h.w;!_&&h.v!=null&&(_=h.v),_==null?h.f&&!h.F?i(u,1,0,"="+h.f):i(u,1,0,""):i(u,0,_,"V");break;case"b":i(u,0,h.v?1:0,h.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=Wl(h.z||vr[14],Pa(hs(h.v)))),i(u,0,h.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var N=`\r
`,k=u.join(N);return k}}();return{to_workbook:n,to_sheet:r,from_sheet:s}}(),Xj=function(){function t(h){return h.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(h){return h.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(h,m){for(var g=h.split(`
`),b=-1,y=-1,_=0,N=[];_!==g.length;++_){var k=g[_].trim().split(":");if(k[0]==="cell"){var R=Is(k[1]);if(N.length<=R.r)for(b=N.length;b<=R.r;++b)N[b]||(N[b]=[]);switch(b=R.r,y=R.c,k[2]){case"t":N[b][y]=t(k[3]);break;case"v":N[b][y]=+k[3];break;case"vtf":var M=k[k.length-1];case"vtc":switch(k[3]){case"nl":N[b][y]=!!+k[4];break;default:N[b][y]=+k[4];break}k[2]=="vtf"&&(N[b][y]=[N[b][y],M])}}}return m&&m.sheetRows&&(N=N.slice(0,m.sheetRows)),N}function n(h,m){return lp(r(h,m),m)}function s(h,m){return If(n(h,m),m)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function u(h){if(!h||!h["!ref"])return"";for(var m=[],g=[],b,y="",_=Fo(h["!ref"]),N=Array.isArray(h),k=_.s.r;k<=_.e.r;++k)for(var R=_.s.c;R<=_.e.c;++R)if(y=Er({r:k,c:R}),b=N?(h[k]||[])[R]:h[y],!(!b||b.v==null||b.t==="z")){switch(g=["cell",y,"t"],b.t){case"s":case"str":g.push(e(b.v));break;case"n":b.f?(g[2]="vtf",g[3]="n",g[4]=b.v,g[5]=e(b.f)):(g[2]="v",g[3]=b.v);break;case"b":g[2]="vt"+(b.f?"f":"c"),g[3]="nl",g[4]=b.v?"1":"0",g[5]=e(b.f||(b.v?"TRUE":"FALSE"));break;case"d":var M=Pa(hs(b.v));g[2]="vtc",g[3]="nd",g[4]=""+M,g[5]=b.w||Wl(b.z||vr[14],M);break;case"e":continue}m.push(g.join(":"))}return m.push("sheet:c:"+(_.e.c-_.s.c+1)+":r:"+(_.e.r-_.s.r+1)+":tvf:1"),m.push("valueformat:1:text-wiki"),m.join(`
`)}function d(h){return[a,i,o,i,u(h),l].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:d}}(),Om=function(){function t(d,h,m,g,b){b.raw?h[m][g]=d:d===""||(d==="TRUE"?h[m][g]=!0:d==="FALSE"?h[m][g]=!1:isNaN(kc(d))?isNaN(jm(d).getDate())?h[m][g]=d:h[m][g]=hs(d):h[m][g]=kc(d))}function e(d,h){var m=h||{},g=[];if(!d||d.length===0)return g;for(var b=d.split(/[\r\n]/),y=b.length-1;y>=0&&b[y].length===0;)--y;for(var _=10,N=0,k=0;k<=y;++k)N=b[k].indexOf(" "),N==-1?N=b[k].length:N++,_=Math.max(_,N);for(k=0;k<=y;++k){g[k]=[];var R=0;for(t(b[k].slice(0,_).trim(),g,k,R,m),R=1;R<=(b[k].length-_)/10+1;++R)t(b[k].slice(_+(R-1)*10,_+R*10).trim(),g,k,R,m)}return m.sheetRows&&(g=g.slice(0,m.sheetRows)),g}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(d){for(var h={},m=!1,g=0,b=0;g<d.length;++g)(b=d.charCodeAt(g))==34?m=!m:!m&&b in r&&(h[b]=(h[b]||0)+1);b=[];for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&b.push([h[g],g]);if(!b.length){h=n;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&b.push([h[g],g])}return b.sort(function(y,_){return y[0]-_[0]||n[y[1]]-n[_[1]]}),r[b.pop()[1]]||44}function a(d,h){var m=h||{},g="",b=m.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(g=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(g=d.charAt(4),d=d.slice(6)):g=s(d.slice(0,1024)):m&&m.FS?g=m.FS:g=s(d.slice(0,1024));var _=0,N=0,k=0,R=0,M=0,j=g.charCodeAt(0),L=!1,C=0,E=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var B=m.dateNF!=null?uue(m.dateNF):null;function Q(){var D=d.slice(R,M),I={};if(D.charAt(0)=='"'&&D.charAt(D.length-1)=='"'&&(D=D.slice(1,-1).replace(/""/g,'"')),D.length===0)I.t="z";else if(m.raw)I.t="s",I.v=D;else if(D.trim().length===0)I.t="s",I.v=D;else if(D.charCodeAt(0)==61)D.charCodeAt(1)==34&&D.charCodeAt(D.length-1)==34?(I.t="s",I.v=D.slice(2,-1).replace(/""/g,'"')):j0e(D)?(I.t="n",I.f=D.slice(1)):(I.t="s",I.v=D);else if(D=="TRUE")I.t="b",I.v=!0;else if(D=="FALSE")I.t="b",I.v=!1;else if(!isNaN(k=kc(D)))I.t="n",m.cellText!==!1&&(I.w=D),I.v=k;else if(!isNaN(jm(D).getDate())||B&&D.match(B)){I.z=m.dateNF||vr[14];var O=0;B&&D.match(B)&&(D=Aue(D,m.dateNF,D.match(B)||[]),O=1),m.cellDates?(I.t="d",I.v=hs(D,O)):(I.t="n",I.v=Pa(hs(D,O))),m.cellText!==!1&&(I.w=Wl(I.z,I.v instanceof Date?Pa(I.v):I.v)),m.cellNF||delete I.z}else I.t="s",I.v=D;if(I.t=="z"||(m.dense?(b[_]||(b[_]=[]),b[_][N]=I):b[Er({c:N,r:_})]=I),R=M+1,E=d.charCodeAt(R),y.e.c<N&&(y.e.c=N),y.e.r<_&&(y.e.r=_),C==j)++N;else if(N=0,++_,m.sheetRows&&m.sheetRows<=_)return!0}e:for(;M<d.length;++M)switch(C=d.charCodeAt(M)){case 34:E===34&&(L=!L);break;case j:case 10:case 13:if(!L&&Q())break e;break}return M-R>0&&Q(),b["!ref"]=Mr(y),b}function i(d,h){return!(h&&h.PRN)||h.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?a(d,h):lp(e(d,h),h)}function o(d,h){var m="",g=h.type=="string"?[0,0,0,0]:ET(d,h);switch(h.type){case"base64":m=ol(d);break;case"binary":m=d;break;case"buffer":h.codepage==65001?m=d.toString("utf8"):h.codepage&&typeof gx<"u"||(m=Xr&&Buffer.isBuffer(d)?d.toString("binary"):kf(d));break;case"array":m=Rh(d);break;case"string":m=d;break;default:throw new Error("Unrecognized type "+h.type)}return g[0]==239&&g[1]==187&&g[2]==191?m=rs(m.slice(3)):h.type!="string"&&h.type!="buffer"&&h.codepage==65001?m=rs(m):h.type=="binary"&&typeof gx<"u",m.slice(0,19)=="socialcalc:version:"?Xj.to_sheet(h.type=="string"?m:rs(m),h):i(m,h)}function l(d,h){return If(o(d,h),h)}function u(d){for(var h=[],m=En(d["!ref"]),g,b=Array.isArray(d),y=m.s.r;y<=m.e.r;++y){for(var _=[],N=m.s.c;N<=m.e.c;++N){var k=Er({r:y,c:N});if(g=b?(d[y]||[])[N]:d[k],!g||g.v==null){_.push("          ");continue}for(var R=(g.w||(jA(g),g.w)||"").slice(0,10);R.length<10;)R+=" ";_.push(R+(N===0?" ":""))}h.push(_.join(""))}return h.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:u}}();function _fe(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var s=Wj.to_workbook(t,r);return r.WTF=n,s}catch(a){if(r.WTF=n,!a.message.match(/SYLK bad record ID/)&&n)throw a;return Om.to_workbook(t,e)}}var bh=function(){function t(P,Y,Z){if(P){ui(P,P.l||0);for(var te=Z.Enum||W;P.l<P.length;){var ce=P.read_shift(2),Ee=te[ce]||te[65535],pe=P.read_shift(2),fe=P.l+pe,xe=Ee.f&&Ee.f(P,pe,Z);if(P.l=fe,Y(xe,Ee,ce))return}}}function e(P,Y){switch(Y.type){case"base64":return r(tl(ol(P)),Y);case"binary":return r(tl(P),Y);case"buffer":case"array":return r(P,Y)}throw"Unsupported type "+Y.type}function r(P,Y){if(!P)return P;var Z=Y||{},te=Z.dense?[]:{},ce="Sheet1",Ee="",pe=0,fe={},xe=[],de=[],oe={s:{r:0,c:0},e:{r:0,c:0}},Le=Z.sheetRows||0;if(P[2]==0&&(P[3]==8||P[3]==9)&&P.length>=16&&P[14]==5&&P[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(P[2]==2)Z.Enum=W,t(P,function(je,qe,st){switch(st){case 0:Z.vers=je,je>=4096&&(Z.qpro=!0);break;case 6:oe=je;break;case 204:je&&(Ee=je);break;case 222:Ee=je;break;case 15:case 51:Z.qpro||(je[1].v=je[1].v.slice(1));case 13:case 14:case 16:st==14&&(je[2]&112)==112&&(je[2]&15)>1&&(je[2]&15)<15&&(je[1].z=Z.dateNF||vr[14],Z.cellDates&&(je[1].t="d",je[1].v=rb(je[1].v))),Z.qpro&&je[3]>pe&&(te["!ref"]=Mr(oe),fe[ce]=te,xe.push(ce),te=Z.dense?[]:{},oe={s:{r:0,c:0},e:{r:0,c:0}},pe=je[3],ce=Ee||"Sheet"+(pe+1),Ee="");var mt=Z.dense?(te[je[0].r]||[])[je[0].c]:te[Er(je[0])];if(mt){mt.t=je[1].t,mt.v=je[1].v,je[1].z!=null&&(mt.z=je[1].z),je[1].f!=null&&(mt.f=je[1].f);break}Z.dense?(te[je[0].r]||(te[je[0].r]=[]),te[je[0].r][je[0].c]=je[1]):te[Er(je[0])]=je[1];break}},Z);else if(P[2]==26||P[2]==14)Z.Enum=ie,P[2]==14&&(Z.qpro=!0,P.l=0),t(P,function(je,qe,st){switch(st){case 204:ce=je;break;case 22:je[1].v=je[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(je[3]>pe&&(te["!ref"]=Mr(oe),fe[ce]=te,xe.push(ce),te=Z.dense?[]:{},oe={s:{r:0,c:0},e:{r:0,c:0}},pe=je[3],ce="Sheet"+(pe+1)),Le>0&&je[0].r>=Le)break;Z.dense?(te[je[0].r]||(te[je[0].r]=[]),te[je[0].r][je[0].c]=je[1]):te[Er(je[0])]=je[1],oe.e.c<je[0].c&&(oe.e.c=je[0].c),oe.e.r<je[0].r&&(oe.e.r=je[0].r);break;case 27:je[14e3]&&(de[je[14e3][0]]=je[14e3][1]);break;case 1537:de[je[0]]=je[1],je[0]==pe&&(ce=je[1]);break}},Z);else throw new Error("Unrecognized LOTUS BOF "+P[2]);if(te["!ref"]=Mr(oe),fe[Ee||ce]=te,xe.push(Ee||ce),!de.length)return{SheetNames:xe,Sheets:fe};for(var et={},Te=[],be=0;be<de.length;++be)fe[xe[be]]?(Te.push(de[be]||xe[be]),et[de[be]]=fe[de[be]]||fe[xe[be]]):(Te.push(de[be]),et[de[be]]={"!ref":"A1"});return{SheetNames:Te,Sheets:et}}function n(P,Y){var Z=Y||{};if(+Z.codepage>=0&&Nc(+Z.codepage),Z.type=="string")throw new Error("Cannot write WK1 to JS string");var te=ko(),ce=En(P["!ref"]),Ee=Array.isArray(P),pe=[];Pt(te,0,a(1030)),Pt(te,6,l(ce));for(var fe=Math.min(ce.e.r,8191),xe=ce.s.r;xe<=fe;++xe)for(var de=ua(xe),oe=ce.s.c;oe<=ce.e.c;++oe){xe===ce.s.r&&(pe[oe]=ks(oe));var Le=pe[oe]+de,et=Ee?(P[xe]||[])[oe]:P[Le];if(!(!et||et.t=="z"))if(et.t=="n")(et.v|0)==et.v&&et.v>=-32768&&et.v<=32767?Pt(te,13,g(xe,oe,et.v)):Pt(te,14,y(xe,oe,et.v));else{var Te=jA(et);Pt(te,15,h(xe,oe,Te.slice(0,239)))}}return Pt(te,1),te.end()}function s(P,Y){var Z=Y||{};if(+Z.codepage>=0&&Nc(+Z.codepage),Z.type=="string")throw new Error("Cannot write WK3 to JS string");var te=ko();Pt(te,0,i(P));for(var ce=0,Ee=0;ce<P.SheetNames.length;++ce)(P.Sheets[P.SheetNames[ce]]||{})["!ref"]&&Pt(te,27,z(P.SheetNames[ce],Ee++));var pe=0;for(ce=0;ce<P.SheetNames.length;++ce){var fe=P.Sheets[P.SheetNames[ce]];if(!(!fe||!fe["!ref"])){for(var xe=En(fe["!ref"]),de=Array.isArray(fe),oe=[],Le=Math.min(xe.e.r,8191),et=xe.s.r;et<=Le;++et)for(var Te=ua(et),be=xe.s.c;be<=xe.e.c;++be){et===xe.s.r&&(oe[be]=ks(be));var je=oe[be]+Te,qe=de?(fe[et]||[])[be]:fe[je];if(!(!qe||qe.t=="z"))if(qe.t=="n")Pt(te,23,Q(et,be,pe,qe.v));else{var st=jA(qe);Pt(te,22,C(et,be,pe,st.slice(0,239)))}}++pe}}return Pt(te,1),te.end()}function a(P){var Y=ct(2);return Y.write_shift(2,P),Y}function i(P){var Y=ct(26);Y.write_shift(2,4096),Y.write_shift(2,4),Y.write_shift(4,0);for(var Z=0,te=0,ce=0,Ee=0;Ee<P.SheetNames.length;++Ee){var pe=P.SheetNames[Ee],fe=P.Sheets[pe];if(!(!fe||!fe["!ref"])){++ce;var xe=Fo(fe["!ref"]);Z<xe.e.r&&(Z=xe.e.r),te<xe.e.c&&(te=xe.e.c)}}return Z>8191&&(Z=8191),Y.write_shift(2,Z),Y.write_shift(1,ce),Y.write_shift(1,te),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(1,1),Y.write_shift(1,2),Y.write_shift(4,0),Y.write_shift(4,0),Y}function o(P,Y,Z){var te={s:{c:0,r:0},e:{c:0,r:0}};return Y==8&&Z.qpro?(te.s.c=P.read_shift(1),P.l++,te.s.r=P.read_shift(2),te.e.c=P.read_shift(1),P.l++,te.e.r=P.read_shift(2),te):(te.s.c=P.read_shift(2),te.s.r=P.read_shift(2),Y==12&&Z.qpro&&(P.l+=2),te.e.c=P.read_shift(2),te.e.r=P.read_shift(2),Y==12&&Z.qpro&&(P.l+=2),te.s.c==65535&&(te.s.c=te.e.c=te.s.r=te.e.r=0),te)}function l(P){var Y=ct(8);return Y.write_shift(2,P.s.c),Y.write_shift(2,P.s.r),Y.write_shift(2,P.e.c),Y.write_shift(2,P.e.r),Y}function u(P,Y,Z){var te=[{c:0,r:0},{t:"n",v:0},0,0];return Z.qpro&&Z.vers!=20768?(te[0].c=P.read_shift(1),te[3]=P.read_shift(1),te[0].r=P.read_shift(2),P.l+=2):(te[2]=P.read_shift(1),te[0].c=P.read_shift(2),te[0].r=P.read_shift(2)),te}function d(P,Y,Z){var te=P.l+Y,ce=u(P,Y,Z);if(ce[1].t="s",Z.vers==20768){P.l++;var Ee=P.read_shift(1);return ce[1].v=P.read_shift(Ee,"utf8"),ce}return Z.qpro&&P.l++,ce[1].v=P.read_shift(te-P.l,"cstr"),ce}function h(P,Y,Z){var te=ct(7+Z.length);te.write_shift(1,255),te.write_shift(2,Y),te.write_shift(2,P),te.write_shift(1,39);for(var ce=0;ce<te.length;++ce){var Ee=Z.charCodeAt(ce);te.write_shift(1,Ee>=128?95:Ee)}return te.write_shift(1,0),te}function m(P,Y,Z){var te=u(P,Y,Z);return te[1].v=P.read_shift(2,"i"),te}function g(P,Y,Z){var te=ct(7);return te.write_shift(1,255),te.write_shift(2,Y),te.write_shift(2,P),te.write_shift(2,Z,"i"),te}function b(P,Y,Z){var te=u(P,Y,Z);return te[1].v=P.read_shift(8,"f"),te}function y(P,Y,Z){var te=ct(13);return te.write_shift(1,255),te.write_shift(2,Y),te.write_shift(2,P),te.write_shift(8,Z,"f"),te}function _(P,Y,Z){var te=P.l+Y,ce=u(P,Y,Z);if(ce[1].v=P.read_shift(8,"f"),Z.qpro)P.l=te;else{var Ee=P.read_shift(2);M(P.slice(P.l,P.l+Ee),ce),P.l+=Ee}return ce}function N(P,Y,Z){var te=Y&32768;return Y&=-32769,Y=(te?P:0)+(Y>=8192?Y-16384:Y),(te?"":"$")+(Z?ks(Y):ua(Y))}var k={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},R=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function M(P,Y){ui(P,0);for(var Z=[],te=0,ce="",Ee="",pe="",fe="";P.l<P.length;){var xe=P[P.l++];switch(xe){case 0:Z.push(P.read_shift(8,"f"));break;case 1:Ee=N(Y[0].c,P.read_shift(2),!0),ce=N(Y[0].r,P.read_shift(2),!1),Z.push(Ee+ce);break;case 2:{var de=N(Y[0].c,P.read_shift(2),!0),oe=N(Y[0].r,P.read_shift(2),!1);Ee=N(Y[0].c,P.read_shift(2),!0),ce=N(Y[0].r,P.read_shift(2),!1),Z.push(de+oe+":"+Ee+ce)}break;case 3:if(P.l<P.length){console.error("WK1 premature formula end");return}break;case 4:Z.push("("+Z.pop()+")");break;case 5:Z.push(P.read_shift(2));break;case 6:{for(var Le="";xe=P[P.l++];)Le+=String.fromCharCode(xe);Z.push('"'+Le.replace(/"/g,'""')+'"')}break;case 8:Z.push("-"+Z.pop());break;case 23:Z.push("+"+Z.pop());break;case 22:Z.push("NOT("+Z.pop()+")");break;case 20:case 21:fe=Z.pop(),pe=Z.pop(),Z.push(["AND","OR"][xe-20]+"("+pe+","+fe+")");break;default:if(xe<32&&R[xe])fe=Z.pop(),pe=Z.pop(),Z.push(pe+R[xe]+fe);else if(k[xe]){if(te=k[xe][1],te==69&&(te=P[P.l++]),te>Z.length){console.error("WK1 bad formula parse 0x"+xe.toString(16)+":|"+Z.join("|")+"|");return}var et=Z.slice(-te);Z.length-=te,Z.push(k[xe][0]+"("+et.join(",")+")")}else return xe<=7?console.error("WK1 invalid opcode "+xe.toString(16)):xe<=24?console.error("WK1 unsupported op "+xe.toString(16)):xe<=30?console.error("WK1 invalid opcode "+xe.toString(16)):xe<=115?console.error("WK1 unsupported function opcode "+xe.toString(16)):console.error("WK1 unrecognized opcode "+xe.toString(16))}}Z.length==1?Y[1].f=""+Z[0]:console.error("WK1 bad formula parse |"+Z.join("|")+"|")}function j(P){var Y=[{c:0,r:0},{t:"n",v:0},0];return Y[0].r=P.read_shift(2),Y[3]=P[P.l++],Y[0].c=P[P.l++],Y}function L(P,Y){var Z=j(P);return Z[1].t="s",Z[1].v=P.read_shift(Y-4,"cstr"),Z}function C(P,Y,Z,te){var ce=ct(6+te.length);ce.write_shift(2,P),ce.write_shift(1,Z),ce.write_shift(1,Y),ce.write_shift(1,39);for(var Ee=0;Ee<te.length;++Ee){var pe=te.charCodeAt(Ee);ce.write_shift(1,pe>=128?95:pe)}return ce.write_shift(1,0),ce}function E(P,Y){var Z=j(P);Z[1].v=P.read_shift(2);var te=Z[1].v>>1;if(Z[1].v&1)switch(te&7){case 0:te=(te>>3)*5e3;break;case 1:te=(te>>3)*500;break;case 2:te=(te>>3)/20;break;case 3:te=(te>>3)/200;break;case 4:te=(te>>3)/2e3;break;case 5:te=(te>>3)/2e4;break;case 6:te=(te>>3)/16;break;case 7:te=(te>>3)/64;break}return Z[1].v=te,Z}function B(P,Y){var Z=j(P),te=P.read_shift(4),ce=P.read_shift(4),Ee=P.read_shift(2);if(Ee==65535)return te===0&&ce===3221225472?(Z[1].t="e",Z[1].v=15):te===0&&ce===3489660928?(Z[1].t="e",Z[1].v=42):Z[1].v=0,Z;var pe=Ee&32768;return Ee=(Ee&32767)-16446,Z[1].v=(1-pe*2)*(ce*Math.pow(2,Ee+32)+te*Math.pow(2,Ee)),Z}function Q(P,Y,Z,te){var ce=ct(14);if(ce.write_shift(2,P),ce.write_shift(1,Z),ce.write_shift(1,Y),te==0)return ce.write_shift(4,0),ce.write_shift(4,0),ce.write_shift(2,65535),ce;var Ee=0,pe=0,fe=0,xe=0;return te<0&&(Ee=1,te=-te),pe=Math.log2(te)|0,te/=Math.pow(2,pe-31),xe=te>>>0,(xe&2147483648)==0&&(te/=2,++pe,xe=te>>>0),te-=xe,xe|=2147483648,xe>>>=0,te*=Math.pow(2,32),fe=te>>>0,ce.write_shift(4,fe),ce.write_shift(4,xe),pe+=16383+(Ee?32768:0),ce.write_shift(2,pe),ce}function D(P,Y){var Z=B(P);return P.l+=Y-14,Z}function I(P,Y){var Z=j(P),te=P.read_shift(4);return Z[1].v=te>>6,Z}function O(P,Y){var Z=j(P),te=P.read_shift(8,"f");return Z[1].v=te,Z}function G(P,Y){var Z=O(P);return P.l+=Y-10,Z}function se(P,Y){return P[P.l+Y-1]==0?P.read_shift(Y,"cstr"):""}function J(P,Y){var Z=P[P.l++];Z>Y-1&&(Z=Y-1);for(var te="";te.length<Z;)te+=String.fromCharCode(P[P.l++]);return te}function re(P,Y,Z){if(!(!Z.qpro||Y<21)){var te=P.read_shift(1);P.l+=17,P.l+=1,P.l+=2;var ce=P.read_shift(Y-21,"cstr");return[te,ce]}}function q(P,Y){for(var Z={},te=P.l+Y;P.l<te;){var ce=P.read_shift(2);if(ce==14e3){for(Z[ce]=[0,""],Z[ce][0]=P.read_shift(2);P[P.l];)Z[ce][1]+=String.fromCharCode(P[P.l]),P.l++;P.l++}}return Z}function z(P,Y){var Z=ct(5+P.length);Z.write_shift(2,14e3),Z.write_shift(2,Y);for(var te=0;te<P.length;++te){var ce=P.charCodeAt(te);Z[Z.l++]=ce>127?95:ce}return Z[Z.l++]=0,Z}var W={0:{n:"BOF",f:Ca},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:m},14:{n:"NUMBER",f:b},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:_},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:se},222:{n:"SHEETNAMELP",f:J},65535:{n:""}},ie={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:L},23:{n:"NUMBER17",f:B},24:{n:"NUMBER18",f:E},25:{n:"FORMULA19",f:D},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:q},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:I},38:{n:"??"},39:{n:"NUMBER27",f:O},40:{n:"FORMULA28",f:G},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:se},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:re},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:e}}();function Sfe(t){var e={},r=t.match(Yi),n=0,s=!1;if(r)for(;n!=r.length;++n){var a=Br(r[n]);switch(a[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!a.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(a.val=="1")break;e.cp=Q4[parseInt(a.val,10)];break;case"<outline":if(!a.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=a.val;break;case"<sz":e.sz=a.val;break;case"<strike":if(!a.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!a.val)break;switch(a.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(a.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(a.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":a.rgb&&(e.color=a.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=a.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=a.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+a[0])}}return e}var Tfe=function(){var t=yx("t"),e=yx("rPr");function r(a){var i=a.match(t);if(!i)return{t:"s",v:""};var o={t:"s",v:Cn(i[1])},l=a.match(e);return l&&(o.s=Sfe(l[1])),o}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(s).map(r).filter(function(o){return o.v})}}(),Nfe=function(){var e=/(\r\n|\n)/g;function r(s,a,i){var o=[];s.u&&o.push("text-decoration: underline;"),s.uval&&o.push("text-underline-style:"+s.uval+";"),s.sz&&o.push("font-size:"+s.sz+"pt;"),s.outline&&o.push("text-effect: outline;"),s.shadow&&o.push("text-shadow: auto;"),a.push('<span style="'+o.join("")+'">'),s.b&&(a.push("<b>"),i.push("</b>")),s.i&&(a.push("<i>"),i.push("</i>")),s.strike&&(a.push("<s>"),i.push("</s>"));var l=s.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(a.push("<"+l+">"),i.push("</"+l+">")),i.push("</span>"),s}function n(s){var a=[[],s.v,[]];return s.v?(s.s&&r(s.s,a[0],a[2]),a[0].join("")+a[1].replace(e,"<br/>")+a[2].join("")):""}return function(a){return a.map(n).join("")}}(),Bfe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,kfe=/<(?:\w+:)?r>/,Ife=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function AT(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Cn(rs(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=rs(t),r&&(n.h=X4(n.t))):t.match(kfe)&&(n.r=rs(t),n.t=Cn(rs((t.replace(Ife,"").match(Bfe)||[]).join("").replace(Yi,""))),r&&(n.h=Nfe(Tfe(n.r)))),n):{t:""}}var Ffe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,Dfe=/<(?:\w+:)?(?:si|sstItem)>/g,Rfe=/<\/(?:\w+:)?(?:si|sstItem)>/;function Lfe(t,e){var r=[],n="";if(!t)return r;var s=t.match(Ffe);if(s){n=s[2].replace(Dfe,"").split(Rfe);for(var a=0;a!=n.length;++a){var i=AT(n[a].trim(),e);i!=null&&(r[r.length]=i)}s=Br(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}var Ufe=/^\s|\s$|[\t\n\r]/;function Jj(t,e){if(!e.bookSST)return"";var r=[Aa];r[r.length]=Mt("sst",null,{xmlns:$h[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var s=t[n],a="<si>";s.r?a+=s.r:(a+="<t",s.t||(s.t=""),s.t.match(Ufe)&&(a+=' xml:space="preserve"'),a+=">"+Kn(s.t)+"</t>"),a+="</si>",r[r.length]=a}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function Mfe(t){return[t.read_shift(4),t.read_shift(4)]}function Pfe(t,e){var r=[],n=!1;return KA(t,function(a,i,o){switch(o){case 159:r.Count=a[0],r.Unique=a[1];break;case 19:r.push(a);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function jfe(t,e){return e||(e=ct(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var Ofe=Yue;function Qfe(t){var e=ko();Ct(e,159,jfe(t));for(var r=0;r<t.length;++r)Ct(e,19,Ofe(t[r]));return Ct(e,160),e.end()}function Zj(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function IA(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function Hfe(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=IA(t,4),e.U=IA(t,4),e.W=IA(t,4),e}function Vfe(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},s=t.read_shift(4),a=[];s-- >0;)a.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=a,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function Gfe(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(Vfe(t));return e}function zfe(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function qfe(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=IA(t,4),e.U=IA(t,4),e.W=IA(t,4),e}function Kfe(t){var e=qfe(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function eO(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function tO(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function $fe(t){var e=IA(t);switch(e.Minor){case 2:return[e.Minor,Wfe(t)];case 3:return[e.Minor,Yfe()];case 4:return[e.Minor,Xfe(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function Wfe(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=eO(t,r),s=tO(t,t.length-t.l);return{t:"Std",h:n,v:s}}function Yfe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function Xfe(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(Yi,function(a){var i=Br(a);switch(Pu(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(o){n[o]=i[o]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function Jfe(t,e){var r={},n=r.EncryptionVersionInfo=IA(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var s=t.read_shift(4);return e-=4,r.EncryptionHeader=eO(t,s),e-=s,r.EncryptionVerifier=tO(t,e),r}function Zfe(t){var e={},r=e.EncryptionVersionInfo=IA(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function dT(t){var e=0,r,n=Zj(t),s=n.length+1,a,i,o,l,u;for(r=bf(s),r[0]=n.length,a=1;a!=s;++a)r[a]=n[a-1];for(a=s-1;a>=0;--a)i=r[a],o=(e&16384)===0?0:1,l=e<<1&32767,u=o|l,e=u^i;return e^52811}var rO=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},s=function(i,o){return n(i^o)},a=function(i){for(var o=e[i.length-1],l=104,u=i.length-1;u>=0;--u)for(var d=i[u],h=0;h!=7;++h)d&64&&(o^=r[l]),d*=2,--l;return o};return function(i){for(var o=Zj(i),l=a(o),u=o.length,d=bf(16),h=0;h!=16;++h)d[h]=0;var m,g,b;for((u&1)===1&&(m=l>>8,d[u]=s(t[0],m),--u,m=l&255,g=o[o.length-1],d[u]=s(g,m));u>0;)--u,m=l>>8,d[u]=s(o[u],m),--u,m=l&255,d[u]=s(o[u],m);for(u=15,b=15-o.length;b>0;)m=l>>8,d[u]=s(t[b],m),--u,--b,m=l&255,d[u]=s(o[u],m),--u,--b;return d}}(),ehe=function(t,e,r,n,s){s||(s=e),n||(n=rO(t));var a,i;for(a=0;a!=e.length;++a)i=e[a],i^=n[r],i=(i>>5|i<<3)&255,s[a]=i,++r;return[s,r,n]},the=function(t){var e=0,r=rO(t);return function(n){var s=ehe("",n,e,r);return e=s[1],s[0]}};function rhe(t,e,r,n){var s={key:Ca(t),verificationBytes:Ca(t)};return r.password&&(s.verifier=dT(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=the(r.password)),s}function nhe(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=Zfe(t):n.Data=Jfe(t,e),n}function she(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?nhe(t,e-2,n):rhe(t,r.biff>=8?e:e-2,r,n),n}var nO=function(){function t(s,a){switch(a.type){case"base64":return e(ol(s),a);case"binary":return e(s,a);case"buffer":return e(Xr&&Buffer.isBuffer(s)?s.toString("binary"):kf(s),a);case"array":return e(Rh(s),a)}throw new Error("Unrecognized type "+a.type)}function e(s,a){var i=a||{},o=i.dense?[]:{},l=s.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(d,h){Array.isArray(o)&&(o[h]=[]);for(var m=/\\\w+\b/g,g=0,b,y=-1;b=m.exec(d);){switch(b[0]){case"\\cell":var _=d.slice(g,m.lastIndex-b[0].length);if(_[0]==" "&&(_=_.slice(1)),++y,_.length){var N={v:_,t:"s"};Array.isArray(o)?o[h][y]=N:o[Er({r:h,c:y})]=N}break}g=m.lastIndex}y>u.e.c&&(u.e.c=y)}),o["!ref"]=Mr(u),o}function r(s,a){return If(t(s,a),a)}function n(s){for(var a=["{\\rtf1\\ansi"],i=En(s["!ref"]),o,l=Array.isArray(s),u=i.s.r;u<=i.e.r;++u){a.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)a.push("\\cellx"+(d+1));for(a.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var h=Er({r:u,c:d});o=l?(s[u]||[])[d]:s[h],!(!o||o.v==null&&(!o.f||o.F))&&(a.push(" "+(o.w||(jA(o),o.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function ahe(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function Ex(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function ihe(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,s=Math.max(e,r,n),a=Math.min(e,r,n),i=s-a;if(i===0)return[0,0,e];var o=0,l=0,u=s+a;switch(l=i/(u>1?2-u:u),s){case e:o=((r-n)/i+6)%6;break;case r:o=(n-e)/i+2;break;case n:o=(e-r)/i+4;break}return[o/6,l,u/2]}function ohe(t){var e=t[0],r=t[1],n=t[2],s=r*2*(n<.5?n:1-n),a=n-s/2,i=[a,a,a],o=6*e,l;if(r!==0)switch(o|0){case 0:case 6:l=s*o,i[0]+=s,i[1]+=l;break;case 1:l=s*(2-o),i[0]+=l,i[1]+=s;break;case 2:l=s*(o-2),i[1]+=s,i[2]+=l;break;case 3:l=s*(4-o),i[1]+=l,i[2]+=s;break;case 4:l=s*(o-4),i[2]+=s,i[0]+=l;break;case 5:l=s*(6-o),i[2]+=l,i[0]+=s;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function P2(t,e){if(e===0)return t;var r=ihe(ahe(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),Ex(ohe(r))}var sO=6,lhe=15,che=1,Oi=sO;function _x(t){return Math.floor((t+Math.round(128/Oi)/256)*Oi)}function Sx(t){return Math.floor((t-5)/Oi*100+.5)/100}function j2(t){return Math.round((t*Oi+5)/Oi*256)/256}function BE(t){return j2(Sx(_x(t)))}function fT(t){var e=Math.abs(t-BE(t)),r=Oi;if(e>.005)for(Oi=che;Oi<lhe;++Oi)Math.abs(t-BE(t))<=e&&(e=Math.abs(t-BE(t)),r=Oi);Oi=r}function Cf(t){t.width?(t.wpx=_x(t.width),t.wch=Sx(t.wpx),t.MDW=Oi):t.wpx?(t.wch=Sx(t.wpx),t.width=j2(t.wch),t.MDW=Oi):typeof t.wch=="number"&&(t.width=j2(t.wch),t.wpx=_x(t.width),t.MDW=Oi),t.customWidth&&delete t.customWidth}var uhe=96,aO=uhe;function Tx(t){return t*96/aO}function Qm(t){return t*aO/96}var Ahe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function dhe(t,e,r,n){e.Borders=[];var s={},a=!1;(t[0].match(Yi)||[]).forEach(function(i){var o=Br(i);switch(Pu(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},o.diagonalUp&&(s.diagonalUp=ds(o.diagonalUp)),o.diagonalDown&&(s.diagonalDown=ds(o.diagonalDown)),e.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in borders")}})}function fhe(t,e,r,n){e.Fills=[];var s={},a=!1;(t[0].match(Yi)||[]).forEach(function(i){var o=Br(i);switch(Pu(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},e.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":o.patternType&&(s.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),o.indexed&&(s.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(s.bgColor.theme=parseInt(o.theme,10)),o.tint&&(s.bgColor.tint=parseFloat(o.tint)),o.rgb&&(s.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),o.theme&&(s.fgColor.theme=parseInt(o.theme,10)),o.tint&&(s.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(s.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fills")}})}function hhe(t,e,r,n){e.Fonts=[];var s={},a=!1;(t[0].match(Yi)||[]).forEach(function(i){var o=Br(i);switch(Pu(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(s),s={};break;case"<name":o.val&&(s.name=rs(o.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=o.val?ds(o.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=o.val?ds(o.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(o.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=o.val?ds(o.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=o.val?ds(o.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=o.val?ds(o.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=o.val?ds(o.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=o.val?ds(o.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":o.val&&(s.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(s.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(s.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(s.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=Q4[parseInt(o.val,10)];break;case"<color":if(s.color||(s.color={}),o.auto&&(s.color.auto=ds(o.auto)),o.rgb)s.color.rgb=o.rgb.slice(-6);else if(o.indexed){s.color.index=parseInt(o.indexed,10);var l=yh[s.color.index];s.color.index==81&&(l=yh[1]),l||(l=yh[1]),s.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(s.color.theme=parseInt(o.theme,10),o.tint&&(s.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=P2(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fonts")}})}function mhe(t,e,r){e.NumberFmt=[];for(var n=Ks(vr),s=0;s<n.length;++s)e.NumberFmt[n[s]]=vr[n[s]];var a=t[0].match(Yi);if(a)for(s=0;s<a.length;++s){var i=Br(a[s]);switch(Pu(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Cn(rs(i.formatCode)),l=parseInt(i.numFmtId,10);if(e.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&e.NumberFmt[l]!=null;--l);e.NumberFmt[l]=o}kA(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function phe(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=Mt("numFmt",null,{numFmtId:n,formatCode:Kn(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Mt("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var Hv=["numFmtId","fillId","fontId","borderId","xfId"],Vv=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function ghe(t,e,r){e.CellXf=[];var n,s=!1;(t[0].match(Yi)||[]).forEach(function(a){var i=Br(a),o=0;switch(Pu(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],o=0;o<Hv.length;++o)n[Hv[o]]&&(n[Hv[o]]=parseInt(n[Hv[o]],10));for(o=0;o<Vv.length;++o)n[Vv[o]]&&(n[Vv[o]]=ds(n[Vv[o]]));if(e.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[o]){n.numFmtId=o;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};i.vertical&&(l.vertical=i.vertical),i.horizontal&&(l.horizontal=i.horizontal),i.textRotation!=null&&(l.textRotation=i.textRotation),i.indent&&(l.indent=i.indent),i.wrapText&&(l.wrapText=ds(i.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function xhe(t){var e=[];return e[e.length]=Mt("cellXfs",null),t.forEach(function(r){e[e.length]=Mt("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Mt("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var vhe=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,a=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,u){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var h;return(h=o.match(e))&&mhe(h,d,u),(h=o.match(s))&&hhe(h,d,l,u),(h=o.match(n))&&fhe(h,d,l,u),(h=o.match(a))&&dhe(h,d,l,u),(h=o.match(r))&&ghe(h,d,u),d}}();function iO(t,e){var r=[Aa,Mt("styleSheet",null,{xmlns:$h[0],"xmlns:vt":Ua.vt})],n;return t.SSF&&(n=phe(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=xhe(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function yhe(t,e){var r=t.read_shift(2),n=zi(t);return[r,n]}function whe(t,e,r){r||(r=ct(6+4*e.length)),r.write_shift(2,t),Ja(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function bhe(t,e,r){var n={};n.sz=t.read_shift(2)/20;var s=nAe(t);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var a=t.read_shift(2);switch(a===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=t.read_shift(1);i!=0&&(n.underline=i);var o=t.read_shift(1);o>0&&(n.family=o);var l=t.read_shift(1);switch(l>0&&(n.charset=l),t.l++,n.color=rAe(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=zi(t),n}function Che(t,e){e||(e=ct(153)),e.write_shift(2,t.sz*20),sAe(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),L2(t.color,e);var n=0;return n=2,e.write_shift(1,n),Ja(t.name,e),e.length>e.l?e.slice(0,e.l):e}var Ehe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],kE,_he=Ki;function cD(t,e){e||(e=ct(84)),kE||(kE=eb(Ehe));var r=kE[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(L2({auto:1},e),L2({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function She(t,e){var r=t.l+e,n=t.read_shift(2),s=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:s}}function oO(t,e,r){r||(r=ct(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function tg(t,e){return e||(e=ct(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var The=Ki;function Nhe(t,e){return e||(e=ct(51)),e.write_shift(1,0),tg(null,e),tg(null,e),tg(null,e),tg(null,e),tg(null,e),e.length>e.l?e.slice(0,e.l):e}function Bhe(t,e){return e||(e=ct(52)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),R2(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function khe(t,e,r){var n=ct(2052);return n.write_shift(4,t),R2(e,n),R2(r,n),n.length>n.l?n.slice(0,n.l):n}function Ihe(t,e,r){var n={};n.NumberFmt=[];for(var s in vr)n.NumberFmt[s]=vr[s];n.CellXf=[],n.Fonts=[];var a=[],i=!1;return KA(t,function(l,u,d){switch(d){case 44:n.NumberFmt[l[0]]=l[1],kA(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(l.color.rgb=P2(e.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:a[a.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:a.push(d),i=!0;break;case 38:a.pop(),i=!1;break;default:if(u.T>0)a.push(d);else if(u.T<0)a.pop();else if(!i||r.WTF&&a[a.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function Fhe(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&++r}),r!=0&&(Ct(t,615,Ic(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&Ct(t,44,whe(s,e[s]))}),Ct(t,616))}}function Dhe(t){var e=1;Ct(t,611,Ic(e)),Ct(t,43,Che({sz:12,color:{theme:1},name:"Calibri",family:2})),Ct(t,612)}function Rhe(t){var e=2;Ct(t,603,Ic(e)),Ct(t,45,cD({patternType:"none"})),Ct(t,45,cD({patternType:"gray125"})),Ct(t,604)}function Lhe(t){var e=1;Ct(t,613,Ic(e)),Ct(t,46,Nhe()),Ct(t,614)}function Uhe(t){var e=1;Ct(t,626,Ic(e)),Ct(t,47,oO({numFmtId:0},65535)),Ct(t,627)}function Mhe(t,e){Ct(t,617,Ic(e.length)),e.forEach(function(r){Ct(t,47,oO(r,0))}),Ct(t,618)}function Phe(t){var e=1;Ct(t,619,Ic(e)),Ct(t,48,Bhe({xfId:0,name:"Normal"})),Ct(t,620)}function jhe(t){var e=0;Ct(t,505,Ic(e)),Ct(t,506)}function Ohe(t){var e=0;Ct(t,508,khe(e,"TableStyleMedium9","PivotStyleMedium4")),Ct(t,509)}function Qhe(t,e){var r=ko();return Ct(r,278),Fhe(r,t.SSF),Dhe(r),Rhe(r),Lhe(r),Uhe(r),Mhe(r,e.cellXfs),Phe(r),jhe(r),Ohe(r),Ct(r,279),r.end()}var Hhe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Vhe(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(Yi)||[]).forEach(function(s){var a=Br(s);switch(a[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=a.val;break;case"<a:sysClr":n.rgb=a.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":a[0].charAt(1)==="/"?(e.themeElements.clrScheme[Hhe.indexOf(a[0])]=n,n={}):n.name=a[0].slice(3,a[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+a[0]+" in clrScheme")}})}function Ghe(){}function zhe(){}var qhe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,Khe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,$he=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function Whe(t,e,r){e.themeElements={};var n;[["clrScheme",qhe,Vhe],["fontScheme",Khe,Ghe],["fmtScheme",$he,zhe]].forEach(function(s){if(!(n=t.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,e,r)})}var Yhe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function lO(t,e){(!t||t.length===0)&&(t=hT());var r,n={};if(!(r=t.match(Yhe)))throw new Error("themeElements not found in theme");return Whe(r[0],n,e),n.raw=t,n}function hT(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[Aa];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function Xhe(t,e,r){var n=t.l+e,s=t.read_shift(4);if(s!==124226){if(!r.cellStyles){t.l=n;return}var a=t.slice(t.l);t.l=n;var i;try{i=ej(a,{type:"array"})}catch{return}var o=rl(i,"theme/theme/theme1.xml",!0);if(o)return lO(o,r)}}function Jhe(t){return t.read_shift(4)}function Zhe(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=e0e(t,4);break;case 2:e.xclrValue=Qj(t);break;case 3:e.xclrValue=Jhe(t);break;case 4:t.l+=4;break}return t.l+=8,e}function e0e(t,e){return Ki(t,e)}function t0e(t,e){return Ki(t,e)}function r0e(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=Zhe(t);break;case 6:n[1]=t0e(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function n0e(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var s=t.read_shift(2),a=[];s-- >0;)a.push(r0e(t,r-t.l));return{ixfe:n,ext:a}}function s0e(t,e){e.forEach(function(r){r[0]})}function a0e(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:zi(t)}}function i0e(t){var e=ct(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),Ja(t.name,e),e.slice(0,e.l)}function o0e(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function l0e(t){var e=ct(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function c0e(t,e){var r=ct(8+2*e.length);return r.write_shift(4,t),Ja(e,r),r.slice(0,r.l)}function u0e(t){return t.l+=4,t.read_shift(4)!=0}function A0e(t,e){var r=ct(8);return r.write_shift(4,t),r.write_shift(4,1),r}function d0e(t,e,r){var n={Types:[],Cell:[],Value:[]},s=r||{},a=[],i=!1,o=2;return KA(t,function(l,u,d){switch(d){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(h){o==1?n.Cell.push({type:n.Types[h[0]-1].name,index:h[1]}):o==0&&n.Value.push({type:n.Types[h[0]-1].name,index:h[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:a.push(d),i=!0;break;case 36:a.pop(),i=!1;break;default:if(!u.T){if(!i||s.WTF&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function f0e(){var t=ko();return Ct(t,332),Ct(t,334,Ic(1)),Ct(t,335,i0e({name:"XLDAPR",version:12e4,flags:3496657072})),Ct(t,336),Ct(t,339,c0e(1,"XLDAPR")),Ct(t,52),Ct(t,35,Ic(514)),Ct(t,4096,Ic(0)),Ct(t,4097,Pl(1)),Ct(t,36),Ct(t,53),Ct(t,340),Ct(t,337,A0e(1)),Ct(t,51,l0e([[1,0]])),Ct(t,338),Ct(t,333),t.end()}function h0e(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var s=!1,a=2,i;return t.replace(Yi,function(o){var l=Br(o);switch(Pu(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==l.name&&(i=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":a==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):a==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":a=1;break;case"</cellMetadata>":a=2;break;case"<valueMetadata":a=0;break;case"</valueMetadata>":a=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+l.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function cO(){var t=[Aa];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function m0e(t){var e=[];if(!t)return e;var r=1;return(t.match(Yi)||[]).forEach(function(n){var s=Br(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,e.push(s);break}}),e}function p0e(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=Er(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function g0e(t,e,r){var n=[];return KA(t,function(a,i,o){switch(o){case 63:n.push(a);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function x0e(t,e,r,n){if(!t)return t;var s=n||{},a=!1;KA(t,function(o,l,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:a=!0;break;case 36:a=!1;break;default:if(!l.T){if(!a||s.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},s)}function v0e(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}var om=1024;function uO(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[Mt("xml",null,{"xmlns:v":Zo.v,"xmlns:o":Zo.o,"xmlns:x":Zo.x,"xmlns:mv":Zo.mv}).replace(/\/>/,">"),Mt("o:shapelayout",Mt("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),Mt("v:shapetype",[Mt("v:stroke",null,{joinstyle:"miter"}),Mt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];om<t*1e3;)om+=1e3;return e.forEach(function(a){var i=Is(a[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?Mt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Mt("v:fill",l,o),d={on:"t",obscured:"t"};++om,s=s.concat(["<v:shape"+wx({id:"_x0000_s"+om,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(a[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Mt("v:shadow",null,d),Mt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",di("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),di("x:AutoFill","False"),di("x:Row",String(i.r)),di("x:Column",String(i.c)),a[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function uD(t,e,r,n){var s=Array.isArray(t),a;e.forEach(function(i){var o=Is(i.ref);if(s?(t[o.r]||(t[o.r]=[]),a=t[o.r][o.c]):a=t[i.ref],!a){a={t:"z"},s?t[o.r][o.c]=a:t[i.ref]=a;var l=En(t["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var u=Mr(l);u!==t["!ref"]&&(t["!ref"]=u)}a.c||(a.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var h=a.c.length-1;h>=0;--h){if(!r&&a.c[h].T)return;r&&!a.c[h].T&&a.c.splice(h,1)}if(r&&n){for(h=0;h<n.length;++h)if(d.a==n[h].id){d.a=n[h].name||d.a;break}}a.c.push(d)})}function y0e(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var a=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return a&&a[1]&&a[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=Br(o[0]),u={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},d=Is(l.ref);if(!(e.sheetRows&&e.sheetRows<=d.r)){var h=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),m=!!h&&!!h[1]&&AT(h[1])||{r:"",t:"",h:""};u.r=m.r,m.r=="<t></t>"&&(m.t=m.h=""),u.t=(m.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(u.h=m.h),n.push(u)}}}}),n}function AO(t){var e=[Aa,Mt("comments",null,{xmlns:$h[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(s){var a=Kn(s.a);r.indexOf(a)==-1&&(r.push(a),e.push("<author>"+a+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),e.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var s=0,a=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?s=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(l){l.a&&(s=r.indexOf(Kn(l.a))),a.push(l.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+s+'"><text>'),a.length<=1)e.push(di("t",Kn(a[0]||"")));else{for(var i=`Comment:
    `+a[0]+`
`,o=1;o<a.length;++o)i+=`Reply:
    `+a[o]+`
`;e.push(di("t",Kn(i)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function w0e(t,e){var r=[],n=!1,s={},a=0;return t.replace(Yi,function(o,l){var u=Br(o);switch(Pu(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":a=l+o.length;break;case"</text>":s.t=t.slice(a,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),r}function b0e(t,e,r){var n=[Aa,Mt("ThreadedComments",null,{xmlns:Ua.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(s){var a="";(s[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&e.indexOf(i.a)==-1&&e.push(i.a);var l={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?a=l.id:l.parentId=a,i.ID=l.id,i.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(i.a)).slice(-12)+"}"),n.push(Mt("threadedComment",di("text",i.t||""),l))})}),n.push("</ThreadedComments>"),n.join("")}function C0e(t,e){var r=[],n=!1;return t.replace(Yi,function(a){var i=Br(a);switch(Pu(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return a}),r}function E0e(t){var e=[Aa,Mt("personList",null,{xmlns:Ua.TCMNT,"xmlns:x":$h[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(Mt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function _0e(t){var e={};e.iauthor=t.read_shift(4);var r=Jh(t);return e.rfx=r.s,e.ref=Er(r.s),t.l+=16,e}function S0e(t,e){return e==null&&(e=ct(36)),e.write_shift(4,t[1].iauthor),cp(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var T0e=zi;function N0e(t){return Ja(t.slice(0,54))}function B0e(t,e){var r=[],n=[],s={},a=!1;return KA(t,function(o,l,u){switch(u){case 632:n.push(o);break;case 635:s=o;break;case 637:s.t=o.t,s.h=o.h,s.r=o.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,e.sheetRows&&s.rfx&&e.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!a||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function k0e(t){var e=ko(),r=[];return Ct(e,628),Ct(e,630),t.forEach(function(n){n[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),Ct(e,632,N0e(s.a)))})}),Ct(e,631),Ct(e,633),t.forEach(function(n){n[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var a={s:Is(n[0]),e:Is(n[0])};Ct(e,635,S0e([a,s])),s.t&&s.t.length>0&&Ct(e,637,Jue(s)),Ct(e,636),delete s.iauthor})}),Ct(e,634),Ct(e,629),e.end()}var I0e="application/vnd.ms-office.vbaProject";function F0e(t){var e=ur.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");ur.utils.cfb_add(e,s,t.FileIndex[n].content)}}),ur.write(e)}function D0e(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&ur.utils.cfb_add(t,s,e.FileIndex[n].content)}})}var dO=["xlsb","xlsm","xlam","biff8","xla"];function R0e(){return{"!type":"dialog"}}function L0e(){return{"!type":"dialog"}}function U0e(){return{"!type":"macro"}}function M0e(){return{"!type":"macro"}}var Em=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,s,a,i){var o=!1,l=!1;a.length==0?l=!0:a.charAt(0)=="["&&(l=!0,a=a.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var u=a.length>0?parseInt(a,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return o?d+=e.c:--d,l?u+=e.r:--u,s+(o?"":"$")+ks(d)+(l?"":"$")+ua(u)}return function(s,a){return e=a,s.replace(t,r)}}(),mT=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,pT=function(){return function(e,r){return e.replace(mT,function(n,s,a,i,o,l){var u=rT(i)-(a?0:r.c),d=tT(l)-(o?0:r.r),h=d==0?"":o?d+1:"["+d+"]",m=u==0?"":a?u+1:"["+u+"]";return s+"R"+h+"C"+m})}}();function fO(t,e){return t.replace(mT,function(r,n,s,a,i,o){return n+(s=="$"?s+a:ks(rT(a)+e.c))+(i=="$"?i+o:ua(tT(o)+e.r))})}function P0e(t,e,r){var n=Fo(e),s=n.s,a=Is(r),i={r:a.r-s.r,c:a.c-s.c};return fO(t,i)}function j0e(t){return t.length!=1}function AD(t){return t.replace(/_xlfn\./g,"")}function ya(t){t.l+=1}function Ef(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function hO(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return mO(t);r.biff==12&&(n=4)}var s=t.read_shift(n),a=t.read_shift(n),i=Ef(t),o=Ef(t);return{s:{r:s,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function mO(t){var e=Ef(t),r=Ef(t),n=t.read_shift(1),s=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function O0e(t,e,r){if(r.biff<8)return mO(t);var n=t.read_shift(r.biff==12?4:2),s=t.read_shift(r.biff==12?4:2),a=Ef(t),i=Ef(t);return{s:{r:n,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:i[0],cRel:i[1],rRel:i[2]}}}function pO(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return Q0e(t);var n=t.read_shift(r&&r.biff==12?4:2),s=Ef(t);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function Q0e(t){var e=Ef(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function H0e(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function V0e(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return G0e(t);var s=t.read_shift(n>=12?4:2),a=t.read_shift(2),i=(a&16384)>>14,o=(a&32768)>>15;if(a&=16383,o==1)for(;s>524287;)s-=1048576;if(i==1)for(;a>8191;)a=a-16384;return{r:s,c:a,cRel:i,rRel:o}}function G0e(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,s=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),s==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:s,rRel:n}}function z0e(t,e,r){var n=(t[t.l++]&96)>>5,s=hO(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function q0e(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2,"i"),a=8;if(r)switch(r.biff){case 5:t.l+=12,a=6;break;case 12:a=12;break}var i=hO(t,a,r);return[n,s,i]}function K0e(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function $0e(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),a=8;if(r)switch(r.biff){case 5:t.l+=12,a=6;break;case 12:a=12;break}return t.l+=a,[n,s]}function W0e(t,e,r){var n=(t[t.l++]&96)>>5,s=O0e(t,e-1,r);return[n,s]}function Y0e(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function dD(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function X0e(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),s=[],a=0;a<=n;++a)s.push(t.read_shift(r&&r.biff==2?1:2));return s}function J0e(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function Z0e(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function eme(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function tme(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function gO(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function rme(t){return t.read_shift(2),gO(t)}function nme(t){return t.read_shift(2),gO(t)}function sme(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=pO(t,0,r);return[n,s]}function ame(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=V0e(t,0,r);return[n,s]}function ime(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var a=pO(t,0,r);return[n,s,a]}function ome(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(r&&r.biff<=3?1:2);return[upe[s],yO[s],n]}function lme(t,e,r){var n=t[t.l++],s=t.read_shift(1),a=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:cme(t);return[s,(a[0]===0?yO:cpe)[a[1]]]}function cme(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function ume(t,e,r){t.l+=r&&r.biff==2?3:4}function Ame(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function dme(t){return t.l++,$A[t.read_shift(1)]}function fme(t){return t.l++,t.read_shift(2)}function hme(t){return t.l++,t.read_shift(1)!==0}function mme(t){return t.l++,Vi(t)}function pme(t,e,r){return t.l++,A1(t,e-1,r)}function gme(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=ra(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=$A[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=Vi(t);break;case 2:r[1]=Zh(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function xme(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),s=[],a=0;a!=n;++a)s.push((r.biff==12?Jh:nb)(t));return s}function vme(t,e,r){var n=0,s=0;r.biff==12?(n=t.read_shift(4),s=t.read_shift(4)):(s=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var a=0,i=[];a!=n&&(i[a]=[]);++a)for(var o=0;o!=s;++o)i[a][o]=gme(t,r.biff);return i}function yme(t,e,r){var n=t.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,a=t.read_shift(s);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,a]}function wme(t,e,r){if(r.biff==5)return bme(t);var n=t.read_shift(1)>>>5&3,s=t.read_shift(2),a=t.read_shift(4);return[n,s,a]}function bme(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function Cme(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function Eme(t,e,r){var n=t.read_shift(1)>>>5&3,s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function _me(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function Sme(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),a=4;if(r)switch(r.biff){case 5:a=15;break;case 12:a=6;break}return t.l+=a,[n,s]}var Tme=Ki,Nme=Ki,Bme=Ki;function f1(t,e,r){return t.l+=2,[H0e(t)]}function gT(t){return t.l+=6,[]}var kme=f1,Ime=gT,Fme=gT,Dme=f1;function xO(t){return t.l+=2,[Ca(t),t.read_shift(2)&1]}var Rme=f1,Lme=xO,Ume=gT,Mme=f1,Pme=f1,jme=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Ome(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),s=t.read_shift(2),a=t.read_shift(2),i=jme[r>>2&31];return{ixti:e,coltype:r&3,rt:i,idx:n,c:s,C:a}}function Qme(t){return t.l+=2,[t.read_shift(4)]}function Hme(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function Vme(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function Gme(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function zme(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function qme(t){return t.l+=4,[0,0]}var fD={1:{n:"PtgExp",f:Ame},2:{n:"PtgTbl",f:Bme},3:{n:"PtgAdd",f:ya},4:{n:"PtgSub",f:ya},5:{n:"PtgMul",f:ya},6:{n:"PtgDiv",f:ya},7:{n:"PtgPower",f:ya},8:{n:"PtgConcat",f:ya},9:{n:"PtgLt",f:ya},10:{n:"PtgLe",f:ya},11:{n:"PtgEq",f:ya},12:{n:"PtgGe",f:ya},13:{n:"PtgGt",f:ya},14:{n:"PtgNe",f:ya},15:{n:"PtgIsect",f:ya},16:{n:"PtgUnion",f:ya},17:{n:"PtgRange",f:ya},18:{n:"PtgUplus",f:ya},19:{n:"PtgUminus",f:ya},20:{n:"PtgPercent",f:ya},21:{n:"PtgParen",f:ya},22:{n:"PtgMissArg",f:ya},23:{n:"PtgStr",f:pme},26:{n:"PtgSheet",f:Hme},27:{n:"PtgEndSheet",f:Vme},28:{n:"PtgErr",f:dme},29:{n:"PtgBool",f:hme},30:{n:"PtgInt",f:fme},31:{n:"PtgNum",f:mme},32:{n:"PtgArray",f:Y0e},33:{n:"PtgFunc",f:ome},34:{n:"PtgFuncVar",f:lme},35:{n:"PtgName",f:yme},36:{n:"PtgRef",f:sme},37:{n:"PtgArea",f:z0e},38:{n:"PtgMemArea",f:Cme},39:{n:"PtgMemErr",f:Tme},40:{n:"PtgMemNoMem",f:Nme},41:{n:"PtgMemFunc",f:Eme},42:{n:"PtgRefErr",f:_me},43:{n:"PtgAreaErr",f:K0e},44:{n:"PtgRefN",f:ame},45:{n:"PtgAreaN",f:W0e},46:{n:"PtgMemAreaN",f:Gme},47:{n:"PtgMemNoMemN",f:zme},57:{n:"PtgNameX",f:wme},58:{n:"PtgRef3d",f:ime},59:{n:"PtgArea3d",f:q0e},60:{n:"PtgRefErr3d",f:Sme},61:{n:"PtgAreaErr3d",f:$0e},255:{}},Kme={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},$me={1:{n:"PtgElfLel",f:xO},2:{n:"PtgElfRw",f:Mme},3:{n:"PtgElfCol",f:kme},6:{n:"PtgElfRwV",f:Pme},7:{n:"PtgElfColV",f:Dme},10:{n:"PtgElfRadical",f:Rme},11:{n:"PtgElfRadicalS",f:Ume},13:{n:"PtgElfColS",f:Ime},15:{n:"PtgElfColSV",f:Fme},16:{n:"PtgElfRadicalLel",f:Lme},25:{n:"PtgList",f:Ome},29:{n:"PtgSxName",f:Qme},255:{}},Wme={0:{n:"PtgAttrNoop",f:qme},1:{n:"PtgAttrSemi",f:tme},2:{n:"PtgAttrIf",f:Z0e},4:{n:"PtgAttrChoose",f:X0e},8:{n:"PtgAttrGoto",f:J0e},16:{n:"PtgAttrSum",f:ume},32:{n:"PtgAttrBaxcel",f:dD},33:{n:"PtgAttrBaxcel",f:dD},64:{n:"PtgAttrSpace",f:rme},65:{n:"PtgAttrSpaceSemi",f:nme},128:{n:"PtgAttrIfError",f:eme},255:{}};function h1(t,e,r,n){if(n.biff<8)return Ki(t,e);for(var s=t.l+e,a=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=vme(t,0,n),a.push(r[i][1]);break;case"PtgMemArea":r[i][2]=xme(t,r[i][1],n),a.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=t.read_shift(4),a.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return e=s-t.l,e!==0&&a.push(Ki(t,e)),a}function m1(t,e,r){for(var n=t.l+e,s,a,i=[];n!=t.l;)e=n-t.l,a=t[t.l],s=fD[a]||fD[Kme[a]],(a===24||a===25)&&(s=(a===24?$me:Wme)[t[t.l+1]]),!s||!s.f?Ki(t,e):i.push([s.n,s.f(t,e,r)]);return i}function Yme(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],s=[],a=0;a<n.length;++a){var i=n[a];if(i)switch(i[0]){case 2:s.push('"'+i[1].replace(/"/g,'""')+'"');break;default:s.push(i[1])}else s.push("")}e.push(s.join(","))}return e.join(";")}var Xme={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Jme(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function vO(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(t[n[0]][0]){case 357:return s=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return t[n[0]][0][3]?(s=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function hD(t,e,r){var n=vO(t,e,r);return n=="#REF"?n:Jme(n,r)}function Mi(t,e,r,n,s){var a=s&&s.biff||8,i={s:{c:0,r:0}},o=[],l,u,d,h=0,m=0,g,b="";if(!t[0]||!t[0][0])return"";for(var y=-1,_="",N=0,k=t[0].length;N<k;++N){var R=t[0][N];switch(R[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),u=o.pop(),y>=0){switch(t[0][y][1][0]){case 0:_=Vs(" ",t[0][y][1][1]);break;case 1:_=Vs("\r",t[0][y][1][1]);break;default:if(_="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][y][1][0])}u=u+_,y=-1}o.push(u+Xme[R[0]]+l);break;case"PtgIsect":l=o.pop(),u=o.pop(),o.push(u+" "+l);break;case"PtgUnion":l=o.pop(),u=o.pop(),o.push(u+","+l);break;case"PtgRange":l=o.pop(),u=o.pop(),o.push(u+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=zg(R[1][1],i,s),o.push(qg(d,a));break;case"PtgRefN":d=r?zg(R[1][1],r,s):R[1][1],o.push(qg(d,a));break;case"PtgRef3d":h=R[1][1],d=zg(R[1][2],i,s),b=hD(n,h,s),o.push(b+"!"+qg(d,a));break;case"PtgFunc":case"PtgFuncVar":var M=R[1][0],j=R[1][1];M||(M=0),M&=127;var L=M==0?[]:o.slice(-M);o.length-=M,j==="User"&&(j=L.shift()),o.push(j+"("+L.join(",")+")");break;case"PtgBool":o.push(R[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(R[1]);break;case"PtgNum":o.push(String(R[1]));break;case"PtgStr":o.push('"'+R[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(R[1]);break;case"PtgAreaN":g=V6(R[1][1],r?{s:r}:i,s),o.push(SE(g,s));break;case"PtgArea":g=V6(R[1][1],i,s),o.push(SE(g,s));break;case"PtgArea3d":h=R[1][1],g=R[1][2],b=hD(n,h,s),o.push(b+"!"+SE(g,s));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":m=R[1][2];var C=(n.names||[])[m-1]||(n[0]||[])[m],E=C?C.Name:"SH33TJSNAME"+String(m);E&&E.slice(0,6)=="_xlfn."&&!s.xlfn&&(E=E.slice(6)),o.push(E);break;case"PtgNameX":var B=R[1][1];m=R[1][2];var Q;if(s.biff<=5)B<0&&(B=-B),n[B]&&(Q=n[B][m]);else{var D="";if(((n[B]||[])[0]||[])[0]==14849||(((n[B]||[])[0]||[])[0]==1025?n[B][m]&&n[B][m].itab>0&&(D=n.SheetNames[n[B][m].itab-1]+"!"):D=n.SheetNames[m-1]+"!"),n[B]&&n[B][m])D+=n[B][m].Name;else if(n[0]&&n[0][m])D+=n[0][m].Name;else{var I=(vO(n,B,s)||"").split(";;");I[m-1]?D=I[m-1]:D+="SH33TJSERRX"}o.push(D);break}Q||(Q={Name:"SH33TJSERRY"}),o.push(Q.Name);break;case"PtgParen":var O="(",G=")";if(y>=0){switch(_="",t[0][y][1][0]){case 2:O=Vs(" ",t[0][y][1][1])+O;break;case 3:O=Vs("\r",t[0][y][1][1])+O;break;case 4:G=Vs(" ",t[0][y][1][1])+G;break;case 5:G=Vs("\r",t[0][y][1][1])+G;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][y][1][0])}y=-1}o.push(O+o.pop()+G);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:R[1][1],r:R[1][0]};var se={c:r.c,r:r.r};if(n.sharedf[Er(d)]){var J=n.sharedf[Er(d)];o.push(Mi(J,i,se,n,s))}else{var re=!1;for(l=0;l!=n.arrayf.length;++l)if(u=n.arrayf[l],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push(Mi(u[1],i,se,n,s)),re=!0;break}re||o.push(R[1])}break;case"PtgArray":o.push("{"+Yme(R[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=N;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+R[1].idx+"[#"+R[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(R));default:throw new Error("Unrecognized Formula Token: "+String(R))}var q=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&y>=0&&q.indexOf(t[0][N][0])==-1){R=t[0][y];var z=!0;switch(R[1][0]){case 4:z=!1;case 0:_=Vs(" ",R[1][1]);break;case 5:z=!1;case 1:_=Vs("\r",R[1][1]);break;default:if(_="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+R[1][0])}o.push((z?_:"")+o.pop()+(z?"":_)),y=-1}}if(o.length>1&&s.WTF)throw new Error("bad formula stack");return o[0]}function Zme(t,e,r){var n=t.l+e,s=r.biff==2?1:2,a,i=t.read_shift(s);if(i==65535)return[[],Ki(t,e-2)];var o=m1(t,i,r);return e!==i+s&&(a=h1(t,e-i-s,o,r)),t.l=n,[o,a]}function epe(t,e,r){var n=t.l+e,s=r.biff==2?1:2,a,i=t.read_shift(s);if(i==65535)return[[],Ki(t,e-2)];var o=m1(t,i,r);return e!==i+s&&(a=h1(t,e-i-s,o,r)),t.l=n,[o,a]}function tpe(t,e,r,n){var s=t.l+e,a=m1(t,n,r),i;return s!==t.l&&(i=h1(t,s-t.l,a,r)),[a,i]}function rpe(t,e,r){var n=t.l+e,s,a=t.read_shift(2),i=m1(t,a,r);return a==65535?[[],Ki(t,e-2)]:(e!==a+2&&(s=h1(t,n-a-2,i,r)),[i,s])}function npe(t){var e;if(_A(t,t.l+6)!==65535)return[Vi(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function spe(t){if(t==null){var e=ct(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return Lh(t);return Lh(0)}function IE(t,e,r){var n=t.l+e,s=ju(t);r.biff==2&&++t.l;var a=npe(t),i=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var o=epe(t,n-t.l,r);return{cell:s,val:a[0],formula:o,shared:i>>3&1,tt:a[1]}}function ape(t,e,r,n,s){var a=Mh(e,r,s),i=spe(t.v),o=ct(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var u=ct(t.bf.length),d=0;d<t.bf.length;++d)u[d]=t.bf[d];var h=Xa([a,i,o,u]);return h}function sb(t,e,r){var n=t.read_shift(4),s=m1(t,n,r),a=t.read_shift(4),i=a>0?h1(t,a,s,r):null;return[s,i]}var ipe=sb,ab=sb,ope=sb,lpe=sb,cpe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},yO={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},upe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function mD(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function Ape(t){var e="of:="+t.replace(mT,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function FE(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function dpe(t){return t.replace(/\./,"!")}var $g={},_m={},Wg=typeof Map<"u";function xT(t,e,r){var n=0,s=t.length;if(r){if(Wg?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var a=Wg?r.get(e):r[e];n<a.length;++n)if(t[a[n]].t===e)return t.Count++,a[n]}}else for(;n<s;++n)if(t[n].t===e)return t.Count++,n;return t[s]={t:e},t.Count++,t.Unique++,r&&(Wg?(r.has(e)||r.set(e,[]),r.get(e).push(s)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(s))),s}function ib(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(Oi=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=Sx(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=j2(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function Ch(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function Ff(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],s=60,a=t.length;if(n==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){kA(e.z,s),r.ssf[s]=e.z,r.revssf[e.z]=n=s;break}}for(s=0;s!=a;++s)if(t[s].numFmtId===n)return s;return t[a]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function wO(t,e,r,n,s,a){try{n.cellNF&&(t.z=vr[e])}catch(o){if(n.WTF)throw o}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=hs(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(vr[e]==null&&kA(cue[e]||"General",e),t.t==="e")t.w=t.w||$A[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=vx(t.v);else if(t.t==="d"){var i=Pa(t.v);(i|0)===i?t.w=i.toString(10):t.w=vx(i)}else{if(t.v===void 0)return"";t.w=Dh(t.v,_m)}else t.t==="d"?t.w=Wl(e,Pa(t.v),_m):t.w=Wl(e,t.v,_m)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{t.s=a.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=P2(s.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=s.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=P2(s.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=s.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&a.Fills)throw o}}}function fpe(t,e,r){if(t&&t["!ref"]){var n=En(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function hpe(t,e){var r=En(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=Mr(r))}var mpe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,ppe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,gpe=/<(?:\w:)?hyperlink [^>]*>/mg,xpe=/"(\w*:\w*)"/,vpe=/<(?:\w:)?col\b[^>]*[\/]?>/g,ype=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,wpe=/<(?:\w:)?pageMargins[^>]*\/>/g,bO=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,bpe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Cpe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function Epe(t,e,r,n,s,a,i){if(!t)return t;n||(n={"!id":{}});var o=e.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",h=t.match(ppe);h?(u=t.slice(0,h.index),d=t.slice(h.index+h[0].length)):u=d=t;var m=u.match(bO);m?vT(m[0],o,s,r):(m=u.match(bpe))&&Spe(m[0],m[1]||"",o,s,r);var g=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(g>0){var b=u.slice(g,g+50).match(xpe);b&&hpe(o,b[1])}var y=u.match(Cpe);y&&y[1]&&jpe(y[1],s);var _=[];if(e.cellStyles){var N=u.match(vpe);N&&Rpe(_,N)}h&&Hpe(h[1],o,e,l,a,i);var k=d.match(ype);k&&(o["!autofilter"]=Upe(k[0]));var R=[],M=d.match(mpe);if(M)for(g=0;g!=M.length;++g)R[g]=En(M[g].slice(M[g].indexOf('"')+1));var j=d.match(gpe);j&&Ipe(o,j,n);var L=d.match(wpe);if(L&&(o["!margins"]=Fpe(Br(L[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=Mr(l)),e.sheetRows>0&&o["!ref"]){var C=En(o["!ref"]);e.sheetRows<=+C.e.r&&(C.e.r=e.sheetRows-1,C.e.r>l.e.r&&(C.e.r=l.e.r),C.e.r<C.s.r&&(C.s.r=C.e.r),C.e.c>l.e.c&&(C.e.c=l.e.c),C.e.c<C.s.c&&(C.s.c=C.e.c),o["!fullref"]=o["!ref"],o["!ref"]=Mr(C))}return _.length>0&&(o["!cols"]=_),R.length>0&&(o["!merges"]=R),o}function _pe(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+Mr(t[r])+'"/>';return e+"</mergeCells>"}function vT(t,e,r,n){var s=Br(t);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=Cn(rs(s.codeName)))}function Spe(t,e,r,n,s){vT(t.slice(0,t.indexOf(">")),r,n,s)}function Tpe(t,e,r,n,s){var a=!1,i={},o=null;if(n.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[r];try{e.Workbook&&(l=e.Workbook.Sheets[r].CodeName||l)}catch{}a=!0,i.codeName=Eu(Kn(l))}if(t&&t["!outline"]){var u={summaryBelow:1,summaryRight:1};t["!outline"].above&&(u.summaryBelow=0),t["!outline"].left&&(u.summaryRight=0),o=(o||"")+Mt("outlinePr",null,u)}!a&&!o||(s[s.length]=Mt("sheetPr",o,i))}var Npe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Bpe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function kpe(t){var e={sheet:1};return Npe.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),Bpe.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=dT(t.password).toString(16).toUpperCase()),Mt("sheetProtection",null,e)}function Ipe(t,e,r){for(var n=Array.isArray(t),s=0;s!=e.length;++s){var a=Br(rs(e[s]),!0);if(!a.ref)return;var i=((r||{})["!id"]||[])[a.id];i?(a.Target=i.Target,a.location&&(a.Target+="#"+Cn(a.location))):(a.Target="#"+Cn(a.location),i={Target:a.Target,TargetMode:"Internal"}),a.Rel=i,a.tooltip&&(a.Tooltip=a.tooltip,delete a.tooltip);for(var o=En(a.ref),l=o.s.r;l<=o.e.r;++l)for(var u=o.s.c;u<=o.e.c;++u){var d=Er({c:u,r:l});n?(t[l]||(t[l]=[]),t[l][u]||(t[l][u]={t:"z",v:void 0}),t[l][u].l=a):(t[d]||(t[d]={t:"z",v:void 0}),t[d].l=a)}}}function Fpe(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function Dpe(t){return Ch(t),Mt("pageMargins",null,t)}function Rpe(t,e){for(var r=!1,n=0;n!=e.length;++n){var s=Br(e[n],!0);s.hidden&&(s.hidden=ds(s.hidden));var a=parseInt(s.min,10)-1,i=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,fT(s.width)),Cf(s);a<=i;)t[a++]=ms(s)}}function Lpe(t,e){for(var r=["<cols>"],n,s=0;s!=e.length;++s)(n=e[s])&&(r[r.length]=Mt("col",null,ib(s,n)));return r[r.length]="</cols>",r.join("")}function Upe(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function Mpe(t,e,r,n){var s=typeof t.ref=="string"?t.ref:Mr(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var a=r.Workbook.Names,i=Fo(s);i.s.r==i.e.r&&(i.e.r=Fo(e["!ref"]).e.r,s=Mr(i));for(var o=0;o<a.length;++o){var l=a[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+s;break}}return o==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Mt("autoFilter",null,{ref:s})}var Ppe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function jpe(t,e){e.Views||(e.Views=[{}]),(t.match(Ppe)||[]).forEach(function(r,n){var s=Br(r);e.Views[n]||(e.Views[n]={}),+s.zoomScale&&(e.Views[n].zoom=+s.zoomScale),ds(s.rightToLeft)&&(e.Views[n].RTL=!0)})}function Ope(t,e,r,n){var s={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Mt("sheetViews",Mt("sheetView",null,s),{})}function Qpe(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var s="",a=t.t,i=t.v;if(t.t!=="z")switch(t.t){case"b":s=t.v?"1":"0";break;case"n":s=""+t.v;break;case"e":s=$A[t.v];break;case"d":n&&n.cellDates?s=hs(t.v,-1).toISOString():(t=ms(t),t.t="n",s=""+(t.v=Pa(hs(t.v)))),typeof t.z>"u"&&(t.z=vr[14]);break;default:s=t.v;break}var o=di("v",Kn(s)),l={r:e},u=Ff(n.cellXfs,t,n);switch(u!==0&&(l.s=u),t.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=di("v",""+xT(n.Strings,t.v,n.revStrings)),l.t="s";break}l.t="str";break}if(t.t!=a&&(t.t=a,t.v=i),typeof t.f=="string"&&t.f){var d=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;o=Mt("f",Kn(t.f),d)+(t.v!=null?o:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(l.cm=1),Mt("c",o,l)}var Hpe=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,a=yx("v"),i=yx("f");return function(l,u,d,h,m,g){for(var b=0,y="",_=[],N=[],k=0,R=0,M=0,j="",L,C,E=0,B=0,Q,D,I=0,O=0,G=Array.isArray(g.CellXf),se,J=[],re=[],q=Array.isArray(u),z=[],W={},ie=!1,P=!!d.sheetStubs,Y=l.split(e),Z=0,te=Y.length;Z!=te;++Z){y=Y[Z].trim();var ce=y.length;if(ce!==0){var Ee=0;e:for(b=0;b<ce;++b)switch(y[b]){case">":if(y[b-1]!="/"){++b;break e}if(d&&d.cellStyles){if(C=Br(y.slice(Ee,b),!0),E=C.r!=null?parseInt(C.r,10):E+1,B=-1,d.sheetRows&&d.sheetRows<E)continue;W={},ie=!1,C.ht&&(ie=!0,W.hpt=parseFloat(C.ht),W.hpx=Qm(W.hpt)),C.hidden=="1"&&(ie=!0,W.hidden=!0),C.outlineLevel!=null&&(ie=!0,W.level=+C.outlineLevel),ie&&(z[E-1]=W)}break;case"<":Ee=b;break}if(Ee>=b)break;if(C=Br(y.slice(Ee,b),!0),E=C.r!=null?parseInt(C.r,10):E+1,B=-1,!(d.sheetRows&&d.sheetRows<E)){h.s.r>E-1&&(h.s.r=E-1),h.e.r<E-1&&(h.e.r=E-1),d&&d.cellStyles&&(W={},ie=!1,C.ht&&(ie=!0,W.hpt=parseFloat(C.ht),W.hpx=Qm(W.hpt)),C.hidden=="1"&&(ie=!0,W.hidden=!0),C.outlineLevel!=null&&(ie=!0,W.level=+C.outlineLevel),ie&&(z[E-1]=W)),_=y.slice(b).split(t);for(var pe=0;pe!=_.length&&_[pe].trim().charAt(0)=="<";++pe);for(_=_.slice(pe),b=0;b!=_.length;++b)if(y=_[b].trim(),y.length!==0){if(N=y.match(r),k=b,R=0,M=0,y="<c "+(y.slice(0,1)=="<"?">":"")+y,N!=null&&N.length===2){for(k=0,j=N[1],R=0;R!=j.length&&!((M=j.charCodeAt(R)-64)<1||M>26);++R)k=26*k+M;--k,B=k}else++B;for(R=0;R!=y.length&&y.charCodeAt(R)!==62;++R);if(++R,C=Br(y.slice(0,R),!0),C.r||(C.r=Er({r:E-1,c:B})),j=y.slice(R),L={t:""},(N=j.match(a))!=null&&N[1]!==""&&(L.v=Cn(N[1])),d.cellFormula){if((N=j.match(i))!=null&&N[1]!==""){if(L.f=Cn(rs(N[1])).replace(/\r\n/g,`
`),d.xlfn||(L.f=AD(L.f)),N[0].indexOf('t="array"')>-1)L.F=(j.match(s)||[])[1],L.F.indexOf(":")>-1&&J.push([En(L.F),L.F]);else if(N[0].indexOf('t="shared"')>-1){D=Br(N[0]);var fe=Cn(rs(N[1]));d.xlfn||(fe=AD(fe)),re[parseInt(D.si,10)]=[D,fe,C.r]}}else(N=j.match(/<f[^>]*\/>/))&&(D=Br(N[0]),re[D.si]&&(L.f=P0e(re[D.si][1],re[D.si][2],C.r)));var xe=Is(C.r);for(R=0;R<J.length;++R)xe.r>=J[R][0].s.r&&xe.r<=J[R][0].e.r&&xe.c>=J[R][0].s.c&&xe.c<=J[R][0].e.c&&(L.F=J[R][1])}if(C.t==null&&L.v===void 0)if(L.f||L.F)L.v=0,L.t="n";else if(P)L.t="z";else continue;else L.t=C.t||"n";switch(h.s.c>B&&(h.s.c=B),h.e.c<B&&(h.e.c=B),L.t){case"n":if(L.v==""||L.v==null){if(!P)continue;L.t="z"}else L.v=parseFloat(L.v);break;case"s":if(typeof L.v>"u"){if(!P)continue;L.t="z"}else Q=$g[parseInt(L.v,10)],L.v=Q.t,L.r=Q.r,d.cellHTML&&(L.h=Q.h);break;case"str":L.t="s",L.v=L.v!=null?rs(L.v):"",d.cellHTML&&(L.h=X4(L.v));break;case"inlineStr":N=j.match(n),L.t="s",N!=null&&(Q=AT(N[1]))?(L.v=Q.t,d.cellHTML&&(L.h=Q.h)):L.v="";break;case"b":L.v=ds(L.v);break;case"d":d.cellDates?L.v=hs(L.v,1):(L.v=Pa(hs(L.v,1)),L.t="n");break;case"e":(!d||d.cellText!==!1)&&(L.w=L.v),L.v=Ej[L.v];break}if(I=O=0,se=null,G&&C.s!==void 0&&(se=g.CellXf[C.s],se!=null&&(se.numFmtId!=null&&(I=se.numFmtId),d.cellStyles&&se.fillId!=null&&(O=se.fillId))),wO(L,I,O,d,m,g),d.cellDates&&G&&L.t=="n"&&ip(vr[I])&&(L.t="d",L.v=rb(L.v)),C.cm&&d.xlmeta){var de=(d.xlmeta.Cell||[])[+C.cm-1];de&&de.type=="XLDAPR"&&(L.D=!0)}if(q){var oe=Is(C.r);u[oe.r]||(u[oe.r]=[]),u[oe.r][oe.c]=L}else u[C.r]=L}}}}z.length>0&&(u["!rows"]=z)}}();function Vpe(t,e,r,n){var s=[],a=[],i=En(t["!ref"]),o="",l,u="",d=[],h=0,m=0,g=t["!rows"],b=Array.isArray(t),y={r:u},_,N=-1;for(m=i.s.c;m<=i.e.c;++m)d[m]=ks(m);for(h=i.s.r;h<=i.e.r;++h){for(a=[],u=ua(h),m=i.s.c;m<=i.e.c;++m){l=d[m]+u;var k=b?(t[h]||[])[m]:t[l];k!==void 0&&(o=Qpe(k,l,t,e))!=null&&a.push(o)}(a.length>0||g&&g[h])&&(y={r:u},g&&g[h]&&(_=g[h],_.hidden&&(y.hidden=1),N=-1,_.hpx?N=Tx(_.hpx):_.hpt&&(N=_.hpt),N>-1&&(y.ht=N,y.customHeight=1),_.level&&(y.outlineLevel=_.level)),s[s.length]=Mt("row",a.join(""),y))}if(g)for(;h<g.length;++h)g&&g[h]&&(y={r:h+1},_=g[h],_.hidden&&(y.hidden=1),N=-1,_.hpx?N=Tx(_.hpx):_.hpt&&(N=_.hpt),N>-1&&(y.ht=N,y.customHeight=1),_.level&&(y.outlineLevel=_.level),s[s.length]=Mt("row","",y));return s.join("")}function CO(t,e,r,n){var s=[Aa,Mt("worksheet",null,{xmlns:$h[0],"xmlns:r":Ua.r})],a=r.SheetNames[t],i=0,o="",l=r.Sheets[a];l==null&&(l={});var u=l["!ref"]||"A1",d=En(u);if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=Mr(d)}n||(n={}),l["!comments"]=[];var h=[];Tpe(l,r,t,e,s),s[s.length]=Mt("dimension",null,{ref:u}),s[s.length]=Ope(l,e,t,r),e.sheetFormat&&(s[s.length]=Mt("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(s[s.length]=Lpe(l,l["!cols"])),s[i=s.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=Vpe(l,e),o.length>0&&(s[s.length]=o)),s.length>i+1&&(s[s.length]="</sheetData>",s[i]=s[i].replace("/>",">")),l["!protect"]&&(s[s.length]=kpe(l["!protect"])),l["!autofilter"]!=null&&(s[s.length]=Mpe(l["!autofilter"],l,r,t)),l["!merges"]!=null&&l["!merges"].length>0&&(s[s.length]=_pe(l["!merges"]));var m=-1,g,b=-1;return l["!links"].length>0&&(s[s.length]="<hyperlinks>",l["!links"].forEach(function(y){y[1].Target&&(g={ref:y[0]},y[1].Target.charAt(0)!="#"&&(b=zn(n,-1,Kn(y[1].Target).replace(/#.*$/,""),rn.HLINK),g["r:id"]="rId"+b),(m=y[1].Target.indexOf("#"))>-1&&(g.location=Kn(y[1].Target.slice(m+1))),y[1].Tooltip&&(g.tooltip=Kn(y[1].Tooltip)),s[s.length]=Mt("hyperlink",null,g))}),s[s.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(s[s.length]=Dpe(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(s[s.length]=di("ignoredErrors",Mt("ignoredError",null,{numberStoredAsText:1,sqref:u}))),h.length>0&&(b=zn(n,-1,"../drawings/drawing"+(t+1)+".xml",rn.DRAW),s[s.length]=Mt("drawing",null,{"r:id":"rId"+b}),l["!drawing"]=h),l["!comments"].length>0&&(b=zn(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",rn.VML),s[s.length]=Mt("legacyDrawing",null,{"r:id":"rId"+b}),l["!legacy"]=b),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function Gpe(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var s=t.read_shift(2);t.l+=1;var a=t.read_shift(1);return t.l=n,a&7&&(r.level=a&7),a&16&&(r.hidden=!0),a&32&&(r.hpt=s/20),r}function zpe(t,e,r){var n=ct(145),s=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var a=320;s.hpx?a=Tx(s.hpx)*20:s.hpt&&(a=s.hpt*20),n.write_shift(2,a),n.write_shift(1,0);var i=0;s.level&&(i|=s.level),s.hidden&&(i|=16),(s.hpx||s.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var u={r:t,c:0},d=0;d<16;++d)if(!(e.s.c>d+1<<10||e.e.c<d<<10)){for(var h=-1,m=-1,g=d<<10;g<d+1<<10;++g){u.c=g;var b=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Er(u)];b&&(h<0&&(h=g),m=g)}h<0||(++o,n.write_shift(4,h),n.write_shift(4,m))}var y=n.l;return n.l=l,n.write_shift(4,o),n.l=y,n.length>n.l?n.slice(0,n.l):n}function qpe(t,e,r,n){var s=zpe(n,r,e);(s.length>17||(e["!rows"]||[])[n])&&Ct(t,0,s)}var Kpe=Jh,$pe=cp;function Wpe(){}function Ype(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=Zue(t),r}function Xpe(t,e,r){r==null&&(r=ct(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var s=1;s<3;++s)r.write_shift(1,0);return L2({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),vj(t,r),r.slice(0,r.l)}function Jpe(t){var e=Yl(t);return[e]}function Zpe(t,e,r){return r==null&&(r=ct(8)),Wh(e,r)}function ege(t){var e=Yh(t);return[e]}function tge(t,e,r){return r==null&&(r=ct(4)),Xh(e,r)}function rge(t){var e=Yl(t),r=t.read_shift(1);return[e,r,"b"]}function nge(t,e,r){return r==null&&(r=ct(9)),Wh(e,r),r.write_shift(1,t.v?1:0),r}function sge(t){var e=Yh(t),r=t.read_shift(1);return[e,r,"b"]}function age(t,e,r){return r==null&&(r=ct(5)),Xh(e,r),r.write_shift(1,t.v?1:0),r}function ige(t){var e=Yl(t),r=t.read_shift(1);return[e,r,"e"]}function oge(t,e,r){return r==null&&(r=ct(9)),Wh(e,r),r.write_shift(1,t.v),r}function lge(t){var e=Yh(t),r=t.read_shift(1);return[e,r,"e"]}function cge(t,e,r){return r==null&&(r=ct(8)),Xh(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function uge(t){var e=Yl(t),r=t.read_shift(4);return[e,r,"s"]}function Age(t,e,r){return r==null&&(r=ct(12)),Wh(e,r),r.write_shift(4,e.v),r}function dge(t){var e=Yh(t),r=t.read_shift(4);return[e,r,"s"]}function fge(t,e,r){return r==null&&(r=ct(8)),Xh(e,r),r.write_shift(4,e.v),r}function hge(t){var e=Yl(t),r=Vi(t);return[e,r,"n"]}function mge(t,e,r){return r==null&&(r=ct(16)),Wh(e,r),Lh(t.v,r),r}function EO(t){var e=Yh(t),r=Vi(t);return[e,r,"n"]}function pge(t,e,r){return r==null&&(r=ct(12)),Xh(e,r),Lh(t.v,r),r}function gge(t){var e=Yl(t),r=iT(t);return[e,r,"n"]}function xge(t,e,r){return r==null&&(r=ct(12)),Wh(e,r),yj(t.v,r),r}function vge(t){var e=Yh(t),r=iT(t);return[e,r,"n"]}function yge(t,e,r){return r==null&&(r=ct(8)),Xh(e,r),yj(t.v,r),r}function wge(t){var e=Yl(t),r=nT(t);return[e,r,"is"]}function bge(t){var e=Yl(t),r=zi(t);return[e,r,"str"]}function Cge(t,e,r){return r==null&&(r=ct(12+4*t.v.length)),Wh(e,r),Ja(t.v,r),r.length>r.l?r.slice(0,r.l):r}function Ege(t){var e=Yh(t),r=zi(t);return[e,r,"str"]}function _ge(t,e,r){return r==null&&(r=ct(8+4*t.v.length)),Xh(e,r),Ja(t.v,r),r.length>r.l?r.slice(0,r.l):r}function Sge(t,e,r){var n=t.l+e,s=Yl(t);s.r=r["!row"];var a=t.read_shift(1),i=[s,a,"b"];if(r.cellFormula){t.l+=2;var o=ab(t,n-t.l,r);i[3]=Mi(o,null,s,r.supbooks,r)}else t.l=n;return i}function Tge(t,e,r){var n=t.l+e,s=Yl(t);s.r=r["!row"];var a=t.read_shift(1),i=[s,a,"e"];if(r.cellFormula){t.l+=2;var o=ab(t,n-t.l,r);i[3]=Mi(o,null,s,r.supbooks,r)}else t.l=n;return i}function Nge(t,e,r){var n=t.l+e,s=Yl(t);s.r=r["!row"];var a=Vi(t),i=[s,a,"n"];if(r.cellFormula){t.l+=2;var o=ab(t,n-t.l,r);i[3]=Mi(o,null,s,r.supbooks,r)}else t.l=n;return i}function Bge(t,e,r){var n=t.l+e,s=Yl(t);s.r=r["!row"];var a=zi(t),i=[s,a,"str"];if(r.cellFormula){t.l+=2;var o=ab(t,n-t.l,r);i[3]=Mi(o,null,s,r.supbooks,r)}else t.l=n;return i}var kge=Jh,Ige=cp;function Fge(t,e){return e==null&&(e=ct(4)),e.write_shift(4,t),e}function Dge(t,e){var r=t.l+e,n=Jh(t),s=sT(t),a=zi(t),i=zi(t),o=zi(t);t.l=r;var l={rfx:n,relId:s,loc:a,display:o};return i&&(l.Tooltip=i),l}function Rge(t,e){var r=ct(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));cp({s:Is(t[0]),e:Is(t[0])},r),aT("rId"+e,r);var n=t[1].Target.indexOf("#"),s=n==-1?"":t[1].Target.slice(n+1);return Ja(s||"",r),Ja(t[1].Tooltip||"",r),Ja("",r),r.slice(0,r.l)}function Lge(){}function Uge(t,e,r){var n=t.l+e,s=wj(t),a=t.read_shift(1),i=[s];if(i[2]=a,r.cellFormula){var o=ipe(t,n-t.l,r);i[1]=o}else t.l=n;return i}function Mge(t,e,r){var n=t.l+e,s=Jh(t),a=[s];if(r.cellFormula){var i=lpe(t,n-t.l,r);a[1]=i,t.l=n}else t.l=n;return a}function Pge(t,e,r){r==null&&(r=ct(18));var n=ib(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var s=0;return e.hidden&&(s|=1),typeof n.width=="number"&&(s|=2),e.level&&(s|=e.level<<8),r.write_shift(2,s),r}var _O=["left","right","top","bottom","header","footer"];function jge(t){var e={};return _O.forEach(function(r){e[r]=Vi(t)}),e}function Oge(t,e){return e==null&&(e=ct(48)),Ch(t),_O.forEach(function(r){Lh(t[r],e)}),e}function Qge(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function Hge(t,e,r){r==null&&(r=ct(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function Vge(t){var e=ct(24);return e.write_shift(4,4),e.write_shift(4,1),cp(t,e),e}function Gge(t,e){return e==null&&(e=ct(66)),e.write_shift(2,t.password?dT(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function zge(){}function qge(){}function Kge(t,e,r,n,s,a,i){if(!t)return t;var o=e||{};n||(n={"!id":{}});var l=o.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},h=!1,m=!1,g,b,y,_,N,k,R,M,j,L=[];o.biff=12,o["!row"]=0;var C=0,E=!1,B=[],Q={},D=o.supbooks||s.supbooks||[[]];if(D.sharedf=Q,D.arrayf=B,D.SheetNames=s.SheetNames||s.Sheets.map(function(q){return q.name}),!o.supbooks&&(o.supbooks=D,s.Names))for(var I=0;I<s.Names.length;++I)D[0][I+1]=s.Names[I];var O=[],G=[],se=!1;Nx[16]={n:"BrtShortReal",f:EO};var J;if(KA(t,function(z,W,ie){if(!m)switch(ie){case 148:u=z;break;case 0:g=z,o.sheetRows&&o.sheetRows<=g.r&&(m=!0),M=ua(_=g.r),o["!row"]=g.r,(z.hidden||z.hpt||z.level!=null)&&(z.hpt&&(z.hpx=Qm(z.hpt)),G[z.r]=z);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(b={t:z[2]},z[2]){case"n":b.v=z[1];break;case"s":R=$g[z[1]],b.v=R.t,b.r=R.r;break;case"b":b.v=!!z[1];break;case"e":b.v=z[1],o.cellText!==!1&&(b.w=$A[b.v]);break;case"str":b.t="s",b.v=z[1];break;case"is":b.t="s",b.v=z[1].t;break}if((y=i.CellXf[z[0].iStyleRef])&&wO(b,y.numFmtId,null,o,a,i),N=z[0].c==-1?N+1:z[0].c,o.dense?(l[_]||(l[_]=[]),l[_][N]=b):l[ks(N)+M]=b,o.cellFormula){for(E=!1,C=0;C<B.length;++C){var P=B[C];g.r>=P[0].s.r&&g.r<=P[0].e.r&&N>=P[0].s.c&&N<=P[0].e.c&&(b.F=Mr(P[0]),E=!0)}!E&&z.length>3&&(b.f=z[3])}if(d.s.r>g.r&&(d.s.r=g.r),d.s.c>N&&(d.s.c=N),d.e.r<g.r&&(d.e.r=g.r),d.e.c<N&&(d.e.c=N),o.cellDates&&y&&b.t=="n"&&ip(vr[y.numFmtId])){var Y=dh(b.v);Y&&(b.t="d",b.v=new Date(Y.y,Y.m-1,Y.d,Y.H,Y.M,Y.S,Y.u))}J&&(J.type=="XLDAPR"&&(b.D=!0),J=void 0);break;case 1:case 12:if(!o.sheetStubs||h)break;b={t:"z",v:void 0},N=z[0].c==-1?N+1:z[0].c,o.dense?(l[_]||(l[_]=[]),l[_][N]=b):l[ks(N)+M]=b,d.s.r>g.r&&(d.s.r=g.r),d.s.c>N&&(d.s.c=N),d.e.r<g.r&&(d.e.r=g.r),d.e.c<N&&(d.e.c=N),J&&(J.type=="XLDAPR"&&(b.D=!0),J=void 0);break;case 176:L.push(z);break;case 49:J=((o.xlmeta||{}).Cell||[])[z-1];break;case 494:var Z=n["!id"][z.relId];for(Z?(z.Target=Z.Target,z.loc&&(z.Target+="#"+z.loc),z.Rel=Z):z.relId==""&&(z.Target="#"+z.loc),_=z.rfx.s.r;_<=z.rfx.e.r;++_)for(N=z.rfx.s.c;N<=z.rfx.e.c;++N)o.dense?(l[_]||(l[_]=[]),l[_][N]||(l[_][N]={t:"z",v:void 0}),l[_][N].l=z):(k=Er({c:N,r:_}),l[k]||(l[k]={t:"z",v:void 0}),l[k].l=z);break;case 426:if(!o.cellFormula)break;B.push(z),j=o.dense?l[_][N]:l[ks(N)+M],j.f=Mi(z[1],d,{r:g.r,c:N},D,o),j.F=Mr(z[0]);break;case 427:if(!o.cellFormula)break;Q[Er(z[0].s)]=z[1],j=o.dense?l[_][N]:l[ks(N)+M],j.f=Mi(z[1],d,{r:g.r,c:N},D,o);break;case 60:if(!o.cellStyles)break;for(;z.e>=z.s;)O[z.e--]={width:z.w/256,hidden:!!(z.flags&1),level:z.level},se||(se=!0,fT(z.w/256)),Cf(O[z.e+1]);break;case 161:l["!autofilter"]={ref:Mr(z)};break;case 476:l["!margins"]=z;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),z.name&&(s.Sheets[r].CodeName=z.name),(z.above||z.left)&&(l["!outline"]={above:z.above,left:z.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),z.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:h=!0;break;case 36:h=!1;break;case 37:h=!0;break;case 38:h=!1;break;default:if(!W.T){if(!h||o.WTF)throw new Error("Unexpected record 0x"+ie.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(l["!ref"]=Mr(u||d)),o.sheetRows&&l["!ref"]){var re=En(l["!ref"]);o.sheetRows<=+re.e.r&&(re.e.r=o.sheetRows-1,re.e.r>d.e.r&&(re.e.r=d.e.r),re.e.r<re.s.r&&(re.s.r=re.e.r),re.e.c>d.e.c&&(re.e.c=d.e.c),re.e.c<re.s.c&&(re.s.c=re.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Mr(re))}return L.length>0&&(l["!merges"]=L),O.length>0&&(l["!cols"]=O),G.length>0&&(l["!rows"]=G),l}function $ge(t,e,r,n,s,a,i){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=ms(e),e.z=e.z||vr[14],e.v=Pa(hs(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var l={r,c:n};switch(l.s=Ff(s.cellXfs,e,s),e.l&&a["!links"].push([Er(l),e.l]),e.c&&a["!comments"].push([Er(l),e.c]),e.t){case"s":case"str":return s.bookSST?(o=xT(s.Strings,e.v,s.revStrings),l.t="s",l.v=o,i?Ct(t,18,fge(e,l)):Ct(t,7,Age(e,l))):(l.t="str",i?Ct(t,17,_ge(e,l)):Ct(t,6,Cge(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?i?Ct(t,13,yge(e,l)):Ct(t,2,xge(e,l)):i?Ct(t,16,pge(e,l)):Ct(t,5,mge(e,l)),!0;case"b":return l.t="b",i?Ct(t,15,age(e,l)):Ct(t,4,nge(e,l)),!0;case"e":return l.t="e",i?Ct(t,14,cge(e,l)):Ct(t,3,oge(e,l)),!0}return i?Ct(t,12,tge(e,l)):Ct(t,1,Zpe(e,l)),!0}function Wge(t,e,r,n){var s=En(e["!ref"]||"A1"),a,i="",o=[];Ct(t,145);var l=Array.isArray(e),u=s.e.r;e["!rows"]&&(u=Math.max(s.e.r,e["!rows"].length-1));for(var d=s.s.r;d<=u;++d){i=ua(d),qpe(t,e,s,d);var h=!1;if(d<=s.e.r)for(var m=s.s.c;m<=s.e.c;++m){d===s.s.r&&(o[m]=ks(m)),a=o[m]+i;var g=l?(e[d]||[])[m]:e[a];if(!g){h=!1;continue}h=$ge(t,g,d,m,n,e,h)}}Ct(t,146)}function Yge(t,e){!e||!e["!merges"]||(Ct(t,177,Fge(e["!merges"].length)),e["!merges"].forEach(function(r){Ct(t,176,Ige(r))}),Ct(t,178))}function Xge(t,e){!e||!e["!cols"]||(Ct(t,390),e["!cols"].forEach(function(r,n){r&&Ct(t,60,Pge(n,r))}),Ct(t,391))}function Jge(t,e){!e||!e["!ref"]||(Ct(t,648),Ct(t,649,Vge(En(e["!ref"]))),Ct(t,650))}function Zge(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var s=zn(r,-1,n[1].Target.replace(/#.*$/,""),rn.HLINK);Ct(t,494,Rge(n,s))}}),delete e["!links"]}function exe(t,e,r,n){if(e["!comments"].length>0){var s=zn(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",rn.VML);Ct(t,551,aT("rId"+s)),e["!legacy"]=s}}function txe(t,e,r,n){if(e["!autofilter"]){var s=e["!autofilter"],a=typeof s.ref=="string"?s.ref:Mr(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=Fo(a);o.s.r==o.e.r&&(o.e.r=Fo(e["!ref"]).e.r,a=Mr(o));for(var l=0;l<i.length;++l){var u=i[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+a;break}}l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Ct(t,161,cp(En(a))),Ct(t,162)}}function rxe(t,e,r){Ct(t,133),Ct(t,137,Hge(e,r)),Ct(t,138),Ct(t,134)}function nxe(t,e){e["!protect"]&&Ct(t,535,Gge(e["!protect"]))}function sxe(t,e,r,n){var s=ko(),a=r.SheetNames[t],i=r.Sheets[a]||{},o=a;try{r&&r.Workbook&&(o=r.Workbook.Sheets[t].CodeName||o)}catch{}var l=En(i["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Ct(s,129),(r.vbaraw||i["!outline"])&&Ct(s,147,Xpe(o,i["!outline"])),Ct(s,148,$pe(l)),rxe(s,i,r.Workbook),Xge(s,i),Wge(s,i,t,e),nxe(s,i),txe(s,i,r,t),Yge(s,i),Zge(s,i,n),i["!margins"]&&Ct(s,476,Oge(i["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&Jge(s,i),exe(s,i,t,n),Ct(s,130),s.end()}function axe(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(a){var i=a.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(e[+i[1]]=r?+i[2]:i[2])});var s=Cn((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(a){n=a.replace(/<.*?>/g,"")}),[e,s,n]}function ixe(t,e,r,n,s,a){var i=a||{"!type":"chart"};if(!t)return a;var o=0,l=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(h){var m=axe(h);d.s.r=d.s.c=0,d.e.c=o,u=ks(o),m[0].forEach(function(g,b){i[u+ua(b)]={t:"n",v:g,z:m[1]},l=b}),d.e.r<l&&(d.e.r=l),++o}),o>0&&(i["!ref"]=Mr(d)),i}function oxe(t,e,r,n,s){if(!t)return t;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i,o=t.match(bO);return o&&vT(o[0],a,s,r),(i=t.match(/drawing r:id="(.*?)"/))&&(a["!rel"]=i[1]),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}function lxe(t,e){t.l+=10;var r=zi(t);return{name:r}}function cxe(t,e,r,n,s){if(!t)return t;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i=!1;return KA(t,function(l,u,d){switch(d){case 550:a["!rel"]=l;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),l.name&&(s.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||e.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},e),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}var yT=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],uxe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Axe=[],dxe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function pD(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],s=0;s!=e.length;++s){var a=e[s];if(n[a[0]]==null)n[a[0]]=a[1];else switch(a[2]){case"bool":typeof n[a[0]]=="string"&&(n[a[0]]=ds(n[a[0]]));break;case"int":typeof n[a[0]]=="string"&&(n[a[0]]=parseInt(n[a[0]],10));break}}}function gD(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=ds(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function SO(t){gD(t.WBProps,yT),gD(t.CalcPr,dxe),pD(t.WBView,uxe),pD(t.Sheets,Axe),_m.date1904=ds(t.WBProps.date1904)}function fxe(t){return!t.Workbook||!t.Workbook.WBProps?"false":ds(t.Workbook.WBProps.date1904)?"true":"false"}var hxe="][*?/\\".split("");function TO(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return hxe.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function mxe(t,e,r){t.forEach(function(n,s){TO(n);for(var a=0;a<s;++a)if(n==t[a])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=e&&e[s]&&e[s].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function pxe(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];mxe(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)fpe(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}var gxe=/<\w+:workbook/;function xxe(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",a={},i=0;if(t.replace(Yi,function(l,u){var d=Br(l);switch(Pu(d[0])){case"<?xml":break;case"<workbook":l.match(gxe)&&(s="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=d[s];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":yT.forEach(function(h){if(d[h[0]]!=null)switch(h[2]){case"bool":r.WBProps[h[0]]=ds(d[h[0]]);break;case"int":r.WBProps[h[0]]=parseInt(d[h[0]],10);break;default:r.WBProps[h[0]]=d[h[0]]}}),d.codeName&&(r.WBProps.CodeName=rs(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Cn(rs(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":a={},a.Name=rs(d.name),d.comment&&(a.Comment=d.comment),d.localSheetId&&(a.Sheet=+d.localSheetId),ds(d.hidden||"0")&&(a.Hidden=!0),i=u+l.length;break;case"</definedName>":a.Ref=Cn(rs(t.slice(i,u))),r.Names.push(a);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return l}),$h.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return SO(r),r}function NO(t){var e=[Aa];e[e.length]=Mt("workbook",null,{xmlns:$h[0],"xmlns:r":Ua.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(yT.forEach(function(o){t.Workbook.WBProps[o[0]]!=null&&t.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=t.Workbook.WBProps[o[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=Mt("workbookPr",null,n);var s=t.Workbook&&t.Workbook.Sheets||[],a=0;if(s&&s[0]&&s[0].Hidden){for(e[e.length]="<bookViews>",a=0;a!=t.SheetNames.length&&!(!s[a]||!s[a].Hidden);++a);a==t.SheetNames.length&&(a=0),e[e.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",a=0;a!=t.SheetNames.length;++a){var i={name:Kn(t.SheetNames[a].slice(0,31))};if(i.sheetId=""+(a+1),i["r:id"]="rId"+(a+1),s[a])switch(s[a].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}e[e.length]=Mt("sheet",null,i)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(e[e.length]=Mt("definedName",Kn(o.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function vxe(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=ES(t),r.name=zi(t),r}function yxe(t,e){return e||(e=ct(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),aT(t.strRelID,e),Ja(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function wxe(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var s=e>8?zi(t):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function bxe(t,e){e||(e=ct(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),vj(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function Cxe(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function Exe(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var s=t.read_shift(4),a=eAe(t),i=ope(t,0,r),o=sT(t);t.l=n;var l={Name:a,Ptg:i};return s<268435455&&(l.Sheet=s),o&&(l.Comment=o),l}function _xe(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;e||(e={}),e.biff=12;var a=[],i=[[]];return i.SheetNames=[],i.XTI=[],Nx[16]={n:"BrtFRTArchID$",f:Cxe},KA(t,function(l,u,d){switch(d){case 156:i.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(e.SID=l.Sheet),l.Ref=Mi(l.Ptg,null,null,i,e),delete e.SID,delete l.Ptg,a.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,l]):i[0]=[d,l],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(l),i.XTI=i.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(d),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!u.T){if(!s||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},e),SO(r),r.Names=a,r.supbooks=i,r}function Sxe(t,e){Ct(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,s={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};Ct(t,156,yxe(s))}Ct(t,144)}function Txe(t,e){e||(e=ct(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return Ja("SheetJS",e),Ja(N2.version,e),Ja(N2.version,e),Ja("7262",e),e.length>e.l?e.slice(0,e.l):e}function Nxe(t,e){e||(e=ct(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function Bxe(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,s=-1,a=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&s==-1?s=n:r[n].Hidden==1&&a==-1&&(a=n);a>s||(Ct(t,135),Ct(t,158,Nxe(s)),Ct(t,136))}}function kxe(t,e){var r=ko();return Ct(r,131),Ct(r,128,Txe()),Ct(r,153,bxe(t.Workbook&&t.Workbook.WBProps||null)),Bxe(r,t),Sxe(r,t),Ct(r,132),r.end()}function Ixe(t,e,r){return e.slice(-4)===".bin"?_xe(t,r):xxe(t,r)}function Fxe(t,e,r,n,s,a,i,o){return e.slice(-4)===".bin"?Kge(t,n,r,s,a,i,o):Epe(t,n,r,s,a,i,o)}function Dxe(t,e,r,n,s,a,i,o){return e.slice(-4)===".bin"?cxe(t,n,r,s,a):oxe(t,n,r,s,a)}function Rxe(t,e,r,n,s,a,i,o){return e.slice(-4)===".bin"?U0e():M0e()}function Lxe(t,e,r,n,s,a,i,o){return e.slice(-4)===".bin"?R0e():L0e()}function Uxe(t,e,r,n){return e.slice(-4)===".bin"?Ihe(t,r,n):vhe(t,r,n)}function Mxe(t,e,r){return lO(t,r)}function Pxe(t,e,r){return e.slice(-4)===".bin"?Pfe(t,r):Lfe(t,r)}function jxe(t,e,r){return e.slice(-4)===".bin"?B0e(t,r):y0e(t,r)}function Oxe(t,e,r){return e.slice(-4)===".bin"?g0e(t):m0e(t)}function Qxe(t,e,r,n){return r.slice(-4)===".bin"?x0e(t,e,r,n):void 0}function Hxe(t,e,r){return e.slice(-4)===".bin"?d0e(t,e,r):h0e(t,e,r)}function Vxe(t,e,r){return(e.slice(-4)===".bin"?kxe:NO)(t)}function Gxe(t,e,r,n,s){return(e.slice(-4)===".bin"?sxe:CO)(t,r,n,s)}function zxe(t,e,r){return(e.slice(-4)===".bin"?Qhe:iO)(t,r)}function qxe(t,e,r){return(e.slice(-4)===".bin"?Qfe:Jj)(t,r)}function Kxe(t,e,r){return(e.slice(-4)===".bin"?k0e:AO)(t)}function $xe(t){return(t.slice(-4)===".bin"?f0e:cO)()}var BO=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,kO=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function bc(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=t.match(BO),a,i,o,l;if(s)for(l=0;l!=s.length;++l)a=s[l].match(kO),(i=a[1].indexOf(":"))===-1?n[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(i+1),n[o]=a[2].slice(1,a[2].length-1));return n}function Wxe(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(BO),s,a,i,o;if(n)for(o=0;o!=n.length;++o)s=n[o].match(kO),(a=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?i="xmlns"+s[1].slice(6):i=s[1].slice(a+1),r[i]=s[2].slice(1,s[2].length-1));return r}var Yg;function Yxe(t,e){var r=Yg[t]||Cn(t);return r==="General"?Dh(e):Wl(r,e)}function Xxe(t,e,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=ds(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=hs(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[Cn(e)]=s}function Jxe(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||$A[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=vx(t.v):t.w=Dh(t.v):t.w=Yxe(e||"General",t.v)}catch(a){if(r.WTF)throw a}try{var n=Yg[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&ip(n)){var s=dh(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(a){if(r.WTF)throw a}}}function Zxe(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=Ahe[n.Pattern]||n.Pattern)}t[e.ID]=e}function e1e(t,e,r,n,s,a,i,o,l,u){var d="General",h=n.StyleID,m={};u=u||{};var g=[],b=0;for(h===void 0&&o&&(h=o.StyleID),h===void 0&&i&&(h=i.StyleID);a[h]!==void 0&&(a[h].nf&&(d=a[h].nf),a[h].Interior&&g.push(a[h].Interior),!!a[h].Parent);)h=a[h].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=ds(t);break;case"String":n.t="s",n.r=R6(Cn(t)),n.v=t.indexOf("<")>-1?Cn(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(hs(t)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=Cn(t):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=Ej[t],u.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=R6(e||t));break}if(Jxe(n,d,u),u.cellFormula!==!1)if(n.Formula){var y=Cn(n.Formula);y.charCodeAt(0)==61&&(y=y.slice(1)),n.f=Em(y,s),delete n.Formula,n.ArrayRange=="RC"?n.F=Em("RC:RC",s):n.ArrayRange&&(n.F=Em(n.ArrayRange,s),l.push([En(n.F),n.F]))}else for(b=0;b<l.length;++b)s.r>=l[b][0].s.r&&s.r<=l[b][0].e.r&&s.c>=l[b][0].s.c&&s.c<=l[b][0].e.c&&(n.F=l[b][1]);u.cellStyles&&(g.forEach(function(_){!m.patternType&&_.patternType&&(m.patternType=_.patternType)}),n.s=m),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function t1e(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function DE(t,e){var r=e||{};op();var n=yg(J4(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=rs(n));var s=n.slice(0,1024).toLowerCase(),a=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var i=ms(r);return i.type="string",Om.to_workbook(n,i)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(qe){s.indexOf("<"+qe)>=0&&(a=!0)}),a)return O1e(n,r);Yg={"General Number":"General","General Date":vr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":vr[15],"Short Date":vr[14],"Long Time":vr[19],"Medium Time":vr[18],"Short Time":vr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:vr[2],Standard:vr[4],Percent:vr[10],Scientific:vr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],u,d={},h=[],m=r.dense?[]:{},g="",b={},y={},_=bc('<Data ss:Type="String">'),N=0,k=0,R=0,M={s:{r:2e6,c:2e6},e:{r:0,c:0}},j={},L={},C="",E=0,B=[],Q={},D={},I=0,O=[],G=[],se={},J=[],re,q=!1,z=[],W=[],ie={},P=0,Y=0,Z={Sheets:[],WBProps:{date1904:!1}},te={};bx.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ce="";o=bx.exec(n);)switch(o[3]=(ce=o[3]).toLowerCase()){case"data":if(ce=="data"){if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?e1e(n.slice(N,o.index),C,_,l[l.length-1][0]=="comment"?se:b,{c:k,r:R},j,J[k],y,z,r):(C="",_=bc(o[0]),N=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(G.length>0&&(b.c=G),(!r.sheetRows||r.sheetRows>R)&&b.v!==void 0&&(r.dense?(m[R]||(m[R]=[]),m[R][k]=b):m[ks(k)+ua(R)]=b),b.HRef&&(b.l={Target:Cn(b.HRef)},b.HRefScreenTip&&(b.l.Tooltip=b.HRefScreenTip),delete b.HRef,delete b.HRefScreenTip),(b.MergeAcross||b.MergeDown)&&(P=k+(parseInt(b.MergeAcross,10)|0),Y=R+(parseInt(b.MergeDown,10)|0),B.push({s:{c:k,r:R},e:{c:P,r:Y}})),!r.sheetStubs)b.MergeAcross?k=P+1:++k;else if(b.MergeAcross||b.MergeDown){for(var Ee=k;Ee<=P;++Ee)for(var pe=R;pe<=Y;++pe)(Ee>k||pe>R)&&(r.dense?(m[pe]||(m[pe]=[]),m[pe][Ee]={t:"z"}):m[ks(Ee)+ua(pe)]={t:"z"});k=P+1}else++k;else b=Wxe(o[0]),b.Index&&(k=+b.Index-1),k<M.s.c&&(M.s.c=k),k>M.e.c&&(M.e.c=k),o[0].slice(-2)==="/>"&&++k,G=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(R<M.s.r&&(M.s.r=R),R>M.e.r&&(M.e.r=R),o[0].slice(-2)==="/>"&&(y=bc(o[0]),y.Index&&(R=+y.Index-1)),k=0,++R):(y=bc(o[0]),y.Index&&(R=+y.Index-1),ie={},(y.AutoFitHeight=="0"||y.Height)&&(ie.hpx=parseInt(y.Height,10),ie.hpt=Tx(ie.hpx),W[R]=ie),y.Hidden=="1"&&(ie.hidden=!0,W[R]=ie));break;case"worksheet":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));h.push(g),M.s.r<=M.e.r&&M.s.c<=M.e.c&&(m["!ref"]=Mr(M),r.sheetRows&&r.sheetRows<=M.e.r&&(m["!fullref"]=m["!ref"],M.e.r=r.sheetRows-1,m["!ref"]=Mr(M))),B.length&&(m["!merges"]=B),J.length>0&&(m["!cols"]=J),W.length>0&&(m["!rows"]=W),d[g]=m}else M={s:{r:2e6,c:2e6},e:{r:0,c:0}},R=k=0,l.push([o[3],!1]),u=bc(o[0]),g=Cn(u.Name),m=r.dense?[]:{},B=[],z=[],W=[],te={name:g,Hidden:0},Z.Sheets.push(te);break;case"table":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),J=[],q=!1}break;case"style":o[1]==="/"?Zxe(j,L,r):L=bc(o[0]);break;case"numberformat":L.nf=Cn(bc(o[0]).Format||"General"),Yg[L.nf]&&(L.nf=Yg[L.nf]);for(var fe=0;fe!=392&&vr[fe]!=L.nf;++fe);if(fe==392){for(fe=57;fe!=392;++fe)if(vr[fe]==null){kA(L.nf,fe);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(re=bc(o[0]),re.Hidden&&(re.hidden=!0,delete re.Hidden),re.Width&&(re.wpx=parseInt(re.Width,10)),!q&&re.wpx>10){q=!0,Oi=sO;for(var xe=0;xe<J.length;++xe)J[xe]&&Cf(J[xe])}q&&Cf(re),J[re.Index-1||J.length]=re;for(var de=0;de<+re.Span;++de)J[J.length]=ms(re);break;case"namedrange":if(o[1]==="/")break;Z.Names||(Z.Names=[]);var oe=Br(o[0]),Le={Name:oe.Name,Ref:Em(oe.RefersTo.slice(1),{r:0,c:0})};Z.Sheets.length>0&&(Le.Sheet=Z.Sheets.length-1),Z.Names.push(Le);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?C+=n.slice(E,o.index):E=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;L.Interior=bc(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?_Ae(Q,ce,n.slice(I,o.index)):I=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));t1e(se),G.push(se)}else l.push([o[3],!1]),u=bc(o[0]),se={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var et=bc(o[0]);m["!autofilter"]={ref:Em(et.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return bD(n,r);var Te=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Te=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Te=!1}break;case"excelworkbook":switch(o[3]){case"date1904":Z.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Te=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:Te=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(I,o.index)){case"SheetHidden":te.Hidden=1;break;case"SheetVeryHidden":te.Hidden=2;break}else I=o.index+o[0].length;break;case"header":m["!margins"]||Ch(m["!margins"]={},"xlml"),isNaN(+Br(o[0]).Margin)||(m["!margins"].header=+Br(o[0]).Margin);break;case"footer":m["!margins"]||Ch(m["!margins"]={},"xlml"),isNaN(+Br(o[0]).Margin)||(m["!margins"].footer=+Br(o[0]).Margin);break;case"pagemargins":var be=Br(o[0]);m["!margins"]||Ch(m["!margins"]={},"xlml"),isNaN(+be.Top)||(m["!margins"].top=+be.Top),isNaN(+be.Left)||(m["!margins"].left=+be.Left),isNaN(+be.Right)||(m["!margins"].right=+be.Right),isNaN(+be.Bottom)||(m["!margins"].bottom=+be.Bottom);break;case"displayrighttoleft":Z.Views||(Z.Views=[]),Z.Views[0]||(Z.Views[0]={}),Z.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Te=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Te=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Te=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Te=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Te=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Te=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Te=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Te=!1}break;case"smarttags":break;default:Te=!1;break}if(Te||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?Xxe(D,ce,O,n.slice(I,o.index)):(O=o,I=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var je={};return!r.bookSheets&&!r.bookProps&&(je.Sheets=d),je.SheetNames=h,je.Workbook=Z,je.SSF=ms(vr),je.Props=Q,je.Custprops=D,je}function IS(t,e){switch(bT(e=e||{}),e.type||"base64"){case"base64":return DE(ol(t),e);case"binary":case"buffer":case"file":return DE(t,e);case"array":return DE(kf(t),e)}}function r1e(t,e){var r=[];return t.Props&&r.push(SAe(t.Props,e)),t.Custprops&&r.push(TAe(t.Props,t.Custprops)),r.join("")}function n1e(){return""}function s1e(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,s){var a=[];a.push(Mt("NumberFormat",null,{"ss:Format":Kn(vr[n.numFmtId])}));var i={"ss:ID":"s"+(21+s)};r.push(Mt("Style",a.join(""),i))}),Mt("Styles",r.join(""))}function IO(t){return Mt("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+pT(t.Ref,{r:0,c:0})})}function a1e(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var s=e[n];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(IO(s)))}return Mt("Names",r.join(""))}function i1e(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var s=n.Workbook.Names,a=[],i=0;i<s.length;++i){var o=s[i];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||a.push(IO(o)))}return a.join("")}function o1e(t,e,r,n){if(!t)return"";var s=[];if(t["!margins"]&&(s.push("<PageSetup>"),t["!margins"].header&&s.push(Mt("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&s.push(Mt("Footer",null,{"x:Margin":t["!margins"].footer})),s.push(Mt("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),s.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)s.push(Mt("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<r&&!(n.Workbook.Sheets[a]&&!n.Workbook.Sheets[a].Hidden);++a);a==r&&s.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),t["!protect"]&&(s.push(di("ProtectContents","True")),t["!protect"].objects&&s.push(di("ProtectObjects","True")),t["!protect"].scenarios&&s.push(di("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?s.push(di("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&s.push(di("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){t["!protect"][i[0]]&&s.push("<"+i[1]+"/>")})),s.length==0?"":Mt("WorksheetOptions",s.join(""),{xmlns:Zo.x})}function l1e(t){return t.map(function(e){var r=Bue(e.t||""),n=Mt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Mt("Comment",n,{"ss:Author":e.a})}).join("")}function c1e(t,e,r,n,s,a,i){if(!t||t.v==null&&t.f==null)return"";var o={};if(t.f&&(o["ss:Formula"]="="+Kn(pT(t.f,i))),t.F&&t.F.slice(0,e.length)==e){var l=Is(t.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==i.r?"":"["+(l.r-i.r)+"]")+"C"+(l.c==i.c?"":"["+(l.c-i.c)+"]")}if(t.l&&t.l.Target&&(o["ss:HRef"]=Kn(t.l.Target),t.l.Tooltip&&(o["x:HRefScreenTip"]=Kn(t.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var h="",m="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":h="Number",m=String(t.v);break;case"b":h="Boolean",m=t.v?"1":"0";break;case"e":h="Error",m=$A[t.v];break;case"d":h="DateTime",m=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||vr[14]);break;case"s":h="String",m=Nue(t.v||"");break}var g=Ff(n.cellXfs,t,n);o["ss:StyleID"]="s"+(21+g),o["ss:Index"]=i.c+1;var b=t.v!=null?m:"",y=t.t=="z"?"":'<Data ss:Type="'+h+'">'+b+"</Data>";return(t.c||[]).length>0&&(y+=l1e(t.c)),Mt("Cell",y,o)}function u1e(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=Qm(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function A1e(t,e,r,n){if(!t["!ref"])return"";var s=En(t["!ref"]),a=t["!merges"]||[],i=0,o=[];t["!cols"]&&t["!cols"].forEach(function(_,N){Cf(_);var k=!!_.width,R=ib(N,_),M={"ss:Index":N+1};k&&(M["ss:Width"]=_x(R.width)),_.hidden&&(M["ss:Hidden"]="1"),o.push(Mt("Column",null,M))});for(var l=Array.isArray(t),u=s.s.r;u<=s.e.r;++u){for(var d=[u1e(u,(t["!rows"]||[])[u])],h=s.s.c;h<=s.e.c;++h){var m=!1;for(i=0;i!=a.length;++i)if(!(a[i].s.c>h)&&!(a[i].s.r>u)&&!(a[i].e.c<h)&&!(a[i].e.r<u)){(a[i].s.c!=h||a[i].s.r!=u)&&(m=!0);break}if(!m){var g={r:u,c:h},b=Er(g),y=l?(t[u]||[])[h]:t[b];d.push(c1e(y,b,t,e,r,n,g))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function d1e(t,e,r){var n=[],s=r.SheetNames[t],a=r.Sheets[s],i=a?i1e(a,e,t,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=a?A1e(a,e,t,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(o1e(a,e,t,r)),n.join("")}function f1e(t,e){e||(e={}),t.SSF||(t.SSF=ms(vr)),t.SSF&&(op(),Zw(t.SSF),e.revssf=tb(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],Ff(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(r1e(t,e)),r.push(n1e()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(Mt("Worksheet",d1e(n,e,t),{"ss:Name":Kn(t.SheetNames[n])}));return r[2]=s1e(t,e),r[3]=a1e(t),Aa+Mt("Workbook",r.join(""),{xmlns:Zo.ss,"xmlns:o":Zo.o,"xmlns:x":Zo.x,"xmlns:ss":Zo.ss,"xmlns:dt":Zo.dt,"xmlns:html":Zo.html})}function h1e(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=aAe(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=iAe(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var m1e=[60,1084,2066,2165,2175];function p1e(t,e,r,n,s){var a=n,i=[],o=r.slice(r.l,r.l+a);if(s&&s.enc&&s.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(o)}i.push(o),r.l+=a;for(var l=_A(r,r.l),u=FS[l],d=0;u!=null&&m1e.indexOf(l)>-1;)a=_A(r,r.l+2),d=r.l+4,l==2066?d+=4:(l==2165||l==2175)&&(d+=12),o=r.slice(d,r.l+4+a),i.push(o),r.l+=4+a,u=FS[l=_A(r,r.l)];var h=Xa(i);ui(h,0);var m=0;h.lens=[];for(var g=0;g<i.length;++g)h.lens.push(m),m+=i[g].length;if(h.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+h.length+" < "+n;return e.f(h,h.length,s)}function pu(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=vr[n])}catch(a){if(e.WTF)throw a}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||$A[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=vx(t.v):t.w=Dh(t.v):t.w=Wl(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(a){if(e.WTF)throw a}if(e.cellDates&&n&&t.t=="n"&&ip(vr[n]||String(n))){var s=dh(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function Gv(t,e,r){return{v:t,ixfe:e,t:r}}function g1e(t,e){var r={opts:{}},n={},s=e.dense?[]:{},a={},i={},o=null,l=[],u="",d={},h,m="",g,b,y,_,N={},k=[],R,M,j=[],L=[],C={Sheets:[],WBProps:{date1904:!1},Views:[{}]},E={},B=function(Rt){return Rt<8?yh[Rt]:Rt<64&&L[Rt-8]||yh[Rt]},Q=function(Rt,xt,wr){var Jt=xt.XF.data;if(!(!Jt||!Jt.patternType||!wr||!wr.cellStyles)){xt.s={},xt.s.patternType=Jt.patternType;var dn;(dn=Ex(B(Jt.icvFore)))&&(xt.s.fgColor={rgb:dn}),(dn=Ex(B(Jt.icvBack)))&&(xt.s.bgColor={rgb:dn})}},D=function(Rt,xt,wr){if(!(ie>1)&&!(wr.sheetRows&&Rt.r>=wr.sheetRows)){if(wr.cellStyles&&xt.XF&&xt.XF.data&&Q(Rt,xt,wr),delete xt.ixfe,delete xt.XF,h=Rt,m=Er(Rt),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),Rt.r<i.s.r&&(i.s.r=Rt.r),Rt.c<i.s.c&&(i.s.c=Rt.c),Rt.r+1>i.e.r&&(i.e.r=Rt.r+1),Rt.c+1>i.e.c&&(i.e.c=Rt.c+1),wr.cellFormula&&xt.f){for(var Jt=0;Jt<k.length;++Jt)if(!(k[Jt][0].s.c>Rt.c||k[Jt][0].s.r>Rt.r)&&!(k[Jt][0].e.c<Rt.c||k[Jt][0].e.r<Rt.r)){xt.F=Mr(k[Jt][0]),(k[Jt][0].s.c!=Rt.c||k[Jt][0].s.r!=Rt.r)&&delete xt.f,xt.f&&(xt.f=""+Mi(k[Jt][1],i,Rt,z,I));break}}wr.dense?(s[Rt.r]||(s[Rt.r]=[]),s[Rt.r][Rt.c]=xt):s[m]=xt}},I={enc:!1,sbcch:0,snames:[],sharedf:N,arrayf:k,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(I.password=e.password);var O,G=[],se=[],J=[],re=[],q=!1,z=[];z.SheetNames=I.snames,z.sharedf=I.sharedf,z.arrayf=I.arrayf,z.names=[],z.XTI=[];var W=0,ie=0,P=0,Y=[],Z=[],te;I.codepage=1200,Nc(1200);for(var ce=!1;t.l<t.length-1;){var Ee=t.l,pe=t.read_shift(2);if(pe===0&&W===10)break;var fe=t.l===t.length?0:t.read_shift(2),xe=FS[pe];if(xe&&xe.f){if(e.bookSheets&&W===133&&pe!==133)break;if(W=pe,xe.r===2||xe.r==12){var de=t.read_shift(2);if(fe-=2,!I.enc&&de!==pe&&((de&255)<<8|de>>8)!==pe)throw new Error("rt mismatch: "+de+"!="+pe);xe.r==12&&(t.l+=10,fe-=10)}var oe={};if(pe===10?oe=xe.f(t,fe,I):oe=p1e(pe,xe,t,fe,I),ie==0&&[9,521,1033,2057].indexOf(W)===-1)continue;switch(pe){case 34:r.opts.Date1904=C.WBProps.date1904=oe;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(I.enc||(t.l=0),I.enc=oe,!e.password)throw new Error("File is password-protected");if(oe.valid==null)throw new Error("Encryption scheme unsupported");if(!oe.valid)throw new Error("Password is incorrect");break;case 92:I.lastuser=oe;break;case 66:var Le=Number(oe);switch(Le){case 21010:Le=1200;break;case 32768:Le=1e4;break;case 32769:Le=1252;break}Nc(I.codepage=Le),ce=!0;break;case 317:I.rrtabid=oe;break;case 25:I.winlocked=oe;break;case 439:r.opts.RefreshAll=oe;break;case 12:r.opts.CalcCount=oe;break;case 16:r.opts.CalcDelta=oe;break;case 17:r.opts.CalcIter=oe;break;case 13:r.opts.CalcMode=oe;break;case 14:r.opts.CalcPrecision=oe;break;case 95:r.opts.CalcSaveRecalc=oe;break;case 15:I.CalcRefMode=oe;break;case 2211:r.opts.FullCalc=oe;break;case 129:oe.fDialog&&(s["!type"]="dialog"),oe.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),oe.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:j.push(oe);break;case 430:z.push([oe]),z[z.length-1].XTI=[];break;case 35:case 547:z[z.length-1].push(oe);break;case 24:case 536:te={Name:oe.Name,Ref:Mi(oe.rgce,i,null,z,I)},oe.itab>0&&(te.Sheet=oe.itab-1),z.names.push(te),z[0]||(z[0]=[],z[0].XTI=[]),z[z.length-1].push(oe),oe.Name=="_xlnm._FilterDatabase"&&oe.itab>0&&oe.rgce&&oe.rgce[0]&&oe.rgce[0][0]&&oe.rgce[0][0][0]=="PtgArea3d"&&(Z[oe.itab-1]={ref:Mr(oe.rgce[0][0][1][2])});break;case 22:I.ExternCount=oe;break;case 23:z.length==0&&(z[0]=[],z[0].XTI=[]),z[z.length-1].XTI=z[z.length-1].XTI.concat(oe),z.XTI=z.XTI.concat(oe);break;case 2196:if(I.biff<8)break;te!=null&&(te.Comment=oe[1]);break;case 18:s["!protect"]=oe;break;case 19:oe!==0&&I.WTF&&console.error("Password verifier: "+oe);break;case 133:a[oe.pos]=oe,I.snames.push(oe.name);break;case 10:{if(--ie)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,s["!ref"]=Mr(i),e.sheetRows&&e.sheetRows<=i.e.r){var et=i.e.r;i.e.r=e.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=Mr(i),i.e.r=et}i.e.r++,i.e.c++}G.length>0&&(s["!merges"]=G),se.length>0&&(s["!objects"]=se),J.length>0&&(s["!cols"]=J),re.length>0&&(s["!rows"]=re),C.Sheets.push(E)}u===""?d=s:n[u]=s,s=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(I.biff===8&&(I.biff={9:2,521:3,1033:4}[pe]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[oe.BIFFVer]||8),I.biffguess=oe.BIFFVer==0,oe.BIFFVer==0&&oe.dt==4096&&(I.biff=5,ce=!0,Nc(I.codepage=28591)),I.biff==8&&oe.BIFFVer==0&&oe.dt==16&&(I.biff=2),ie++)break;if(s=e.dense?[]:{},I.biff<8&&!ce&&(ce=!0,Nc(I.codepage=e.codepage||1252)),I.biff<5||oe.BIFFVer==0&&oe.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var Te={pos:t.l-fe,name:u};a[Te.pos]=Te,I.snames.push(u)}else u=(a[Ee]||{name:""}).name;oe.dt==32&&(s["!type"]="chart"),oe.dt==64&&(s["!type"]="macro"),G=[],se=[],I.arrayf=k=[],J=[],re=[],q=!1,E={Hidden:(a[Ee]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(e.dense?(s[oe.r]||[])[oe.c]:s[Er({c:oe.c,r:oe.r})])&&++oe.c,R={ixfe:oe.ixfe,XF:j[oe.ixfe]||{},v:oe.val,t:"n"},P>0&&(R.z=Y[R.ixfe>>8&63]),pu(R,e,r.opts.Date1904),D({c:oe.c,r:oe.r},R,e);break;case 5:case 517:R={ixfe:oe.ixfe,XF:j[oe.ixfe],v:oe.val,t:oe.t},P>0&&(R.z=Y[R.ixfe>>8&63]),pu(R,e,r.opts.Date1904),D({c:oe.c,r:oe.r},R,e);break;case 638:R={ixfe:oe.ixfe,XF:j[oe.ixfe],v:oe.rknum,t:"n"},P>0&&(R.z=Y[R.ixfe>>8&63]),pu(R,e,r.opts.Date1904),D({c:oe.c,r:oe.r},R,e);break;case 189:for(var be=oe.c;be<=oe.C;++be){var je=oe.rkrec[be-oe.c][0];R={ixfe:je,XF:j[je],v:oe.rkrec[be-oe.c][1],t:"n"},P>0&&(R.z=Y[R.ixfe>>8&63]),pu(R,e,r.opts.Date1904),D({c:be,r:oe.r},R,e)}break;case 6:case 518:case 1030:{if(oe.val=="String"){o=oe;break}if(R=Gv(oe.val,oe.cell.ixfe,oe.tt),R.XF=j[R.ixfe],e.cellFormula){var qe=oe.formula;if(qe&&qe[0]&&qe[0][0]&&qe[0][0][0]=="PtgExp"){var st=qe[0][0][1][0],mt=qe[0][0][1][1],Et=Er({r:st,c:mt});N[Et]?R.f=""+Mi(oe.formula,i,oe.cell,z,I):R.F=((e.dense?(s[st]||[])[mt]:s[Et])||{}).F}else R.f=""+Mi(oe.formula,i,oe.cell,z,I)}P>0&&(R.z=Y[R.ixfe>>8&63]),pu(R,e,r.opts.Date1904),D(oe.cell,R,e),o=oe}break;case 7:case 519:if(o)o.val=oe,R=Gv(oe,o.cell.ixfe,"s"),R.XF=j[R.ixfe],e.cellFormula&&(R.f=""+Mi(o.formula,i,o.cell,z,I)),P>0&&(R.z=Y[R.ixfe>>8&63]),pu(R,e,r.opts.Date1904),D(o.cell,R,e),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{k.push(oe);var lt=Er(oe[0].s);if(g=e.dense?(s[oe[0].s.r]||[])[oe[0].s.c]:s[lt],e.cellFormula&&g){if(!o||!lt||!g)break;g.f=""+Mi(oe[1],i,oe[0],z,I),g.F=Mr(oe[0])}}break;case 1212:{if(!e.cellFormula)break;if(m){if(!o)break;N[Er(o.cell)]=oe[0],g=e.dense?(s[o.cell.r]||[])[o.cell.c]:s[Er(o.cell)],(g||{}).f=""+Mi(oe[0],i,h,z,I)}}break;case 253:R=Gv(l[oe.isst].t,oe.ixfe,"s"),l[oe.isst].h&&(R.h=l[oe.isst].h),R.XF=j[R.ixfe],P>0&&(R.z=Y[R.ixfe>>8&63]),pu(R,e,r.opts.Date1904),D({c:oe.c,r:oe.r},R,e);break;case 513:e.sheetStubs&&(R={ixfe:oe.ixfe,XF:j[oe.ixfe],t:"z"},P>0&&(R.z=Y[R.ixfe>>8&63]),pu(R,e,r.opts.Date1904),D({c:oe.c,r:oe.r},R,e));break;case 190:if(e.sheetStubs)for(var kt=oe.c;kt<=oe.C;++kt){var Gt=oe.ixfe[kt-oe.c];R={ixfe:Gt,XF:j[Gt],t:"z"},P>0&&(R.z=Y[R.ixfe>>8&63]),pu(R,e,r.opts.Date1904),D({c:kt,r:oe.r},R,e)}break;case 214:case 516:case 4:R=Gv(oe.val,oe.ixfe,"s"),R.XF=j[R.ixfe],P>0&&(R.z=Y[R.ixfe>>8&63]),pu(R,e,r.opts.Date1904),D({c:oe.c,r:oe.r},R,e);break;case 0:case 512:ie===1&&(i=oe);break;case 252:l=oe;break;case 1054:if(I.biff==4){Y[P++]=oe[1];for(var Xt=0;Xt<P+163&&vr[Xt]!=oe[1];++Xt);Xt>=163&&kA(oe[1],P+163)}else kA(oe[1],oe[0]);break;case 30:{Y[P++]=oe;for(var It=0;It<P+163&&vr[It]!=oe;++It);It>=163&&kA(oe,P+163)}break;case 229:G=G.concat(oe);break;case 93:se[oe.cmo[0]]=I.lastobj=oe;break;case 438:I.lastobj.TxO=oe;break;case 127:I.lastobj.ImData=oe;break;case 440:for(_=oe[0].s.r;_<=oe[0].e.r;++_)for(y=oe[0].s.c;y<=oe[0].e.c;++y)g=e.dense?(s[_]||[])[y]:s[Er({c:y,r:_})],g&&(g.l=oe[1]);break;case 2048:for(_=oe[0].s.r;_<=oe[0].e.r;++_)for(y=oe[0].s.c;y<=oe[0].e.c;++y)g=e.dense?(s[_]||[])[y]:s[Er({c:y,r:_})],g&&g.l&&(g.l.Tooltip=oe[1]);break;case 28:{if(I.biff<=5&&I.biff>=2)break;g=e.dense?(s[oe[0].r]||[])[oe[0].c]:s[Er(oe[0])];var Dt=se[oe[2]];g||(e.dense?(s[oe[0].r]||(s[oe[0].r]=[]),g=s[oe[0].r][oe[0].c]={t:"z"}):g=s[Er(oe[0])]={t:"z"},i.e.r=Math.max(i.e.r,oe[0].r),i.s.r=Math.min(i.s.r,oe[0].r),i.e.c=Math.max(i.e.c,oe[0].c),i.s.c=Math.min(i.s.c,oe[0].c)),g.c||(g.c=[]),b={a:oe[1],t:Dt.TxO.t},g.c.push(b)}break;case 2173:s0e(j[oe.ixfe],oe.ext);break;case 125:{if(!I.cellStyles)break;for(;oe.e>=oe.s;)J[oe.e--]={width:oe.w/256,level:oe.level||0,hidden:!!(oe.flags&1)},q||(q=!0,fT(oe.w/256)),Cf(J[oe.e+1])}break;case 520:{var Wt={};oe.level!=null&&(re[oe.r]=Wt,Wt.level=oe.level),oe.hidden&&(re[oe.r]=Wt,Wt.hidden=!0),oe.hpt&&(re[oe.r]=Wt,Wt.hpt=oe.hpt,Wt.hpx=Qm(oe.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||Ch(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[pe]]=oe;break;case 161:s["!margins"]||Ch(s["!margins"]={}),s["!margins"].header=oe.header,s["!margins"].footer=oe.footer;break;case 574:oe.RTL&&(C.Views[0].RTL=!0);break;case 146:L=oe;break;case 2198:O=oe;break;case 140:M=oe;break;case 442:u?E.CodeName=oe||E.name:C.WBProps.CodeName=oe||"ThisWorkbook";break}}else xe||console.error("Missing Info for XLS Record 0x"+pe.toString(16)),t.l+=fe}return r.SheetNames=Ks(a).sort(function(Lt,Rt){return Number(Lt)-Number(Rt)}).map(function(Lt){return a[Lt].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&Z.forEach(function(Lt,Rt){r.Sheets[r.SheetNames[Rt]]["!autofilter"]=Lt}),r.Strings=l,r.SSF=ms(vr),I.enc&&(r.Encryption=I.enc),O&&(r.Themes=O),r.Metadata={},M!==void 0&&(r.Metadata.Country=M),z.names.length>0&&(C.Names=z.names),r.Workbook=C,r}var Xg={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function x1e(t,e,r){var n=ur.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=J6(n,_S,Xg.DSI);for(var a in s)e[a]=s[a]}catch(u){if(r.WTF)throw u}var i=ur.find(t,"/!SummaryInformation");if(i&&i.size>0)try{var o=J6(i,SS,Xg.SI);for(var l in o)e[l]==null&&(e[l]=o[l])}catch(u){if(r.WTF)throw u}e.HeadingPairs&&e.TitlesOfParts&&(kj(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function v1e(t,e){var r=[],n=[],s=[],a=0,i,o=N6(_S,"n"),l=N6(SS,"n");if(t.Props)for(i=Ks(t.Props),a=0;a<i.length;++a)(Object.prototype.hasOwnProperty.call(o,i[a])?r:Object.prototype.hasOwnProperty.call(l,i[a])?n:s).push([i[a],t.Props[i[a]]]);if(t.Custprops)for(i=Ks(t.Custprops),a=0;a<i.length;++a)Object.prototype.hasOwnProperty.call(t.Props||{},i[a])||(Object.prototype.hasOwnProperty.call(o,i[a])?r:Object.prototype.hasOwnProperty.call(l,i[a])?n:s).push([i[a],t.Custprops[i[a]]]);var u=[];for(a=0;a<s.length;++a)Mj.indexOf(s[a][0])>-1||Bj.indexOf(s[a][0])>-1||s[a][1]!=null&&u.push(s[a]);n.length&&ur.utils.cfb_add(e,"/SummaryInformation",Z6(n,Xg.SI,l,SS)),(r.length||u.length)&&ur.utils.cfb_add(e,"/DocumentSummaryInformation",Z6(r,Xg.DSI,o,_S,u.length?u:null,Xg.UDI))}function FO(t,e){e||(e={}),bT(e),V4(),e.codepage&&H4(e.codepage);var r,n;if(t.FullPaths){if(ur.find(t,"/encryption"))throw new Error("File is password-protected");r=ur.find(t,"!CompObj"),n=ur.find(t,"/Workbook")||ur.find(t,"/Book")}else{switch(e.type){case"base64":t=tl(ol(t));break;case"binary":t=tl(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}ui(t,0),n={content:t}}var s,a;if(r&&h1e(r),e.bookProps&&!e.bookSheets)s={};else{var i=Xr?"buffer":"array";if(n&&n.content)s=g1e(n.content,e);else if((a=ur.find(t,"PerfectOffice_MAIN"))&&a.content)s=bh.to_workbook(a.content,(e.type=i,e));else if((a=ur.find(t,"NativeContent_MAIN"))&&a.content)s=bh.to_workbook(a.content,(e.type=i,e));else throw(a=ur.find(t,"MN0"))&&a.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&ur.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=F0e(t))}var o={};return t.FullPaths&&x1e(t,o,e),s.Props=s.Custprops=o,e.bookFiles&&(s.cfb=t),s}function y1e(t,e){var r=e||{},n=ur.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return ur.utils.cfb_add(n,s,DO(t,r)),r.biff==8&&(t.Props||t.Custprops)&&v1e(t,n),r.biff==8&&t.vbaraw&&D0e(n,ur.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var Nx={0:{f:Gpe},1:{f:Jpe},2:{f:gge},3:{f:ige},4:{f:rge},5:{f:hge},6:{f:bge},7:{f:uge},8:{f:Bge},9:{f:Nge},10:{f:Sge},11:{f:Tge},12:{f:ege},13:{f:vge},14:{f:lge},15:{f:sge},16:{f:EO},17:{f:Ege},18:{f:dge},19:{f:nT},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Exe},40:{},42:{},43:{f:bhe},44:{f:yhe},45:{f:_he},46:{f:The},47:{f:She},48:{},49:{f:Kue},50:{},51:{f:o0e},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:$j},62:{f:wge},63:{f:p0e},64:{f:zge},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Ki,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Qge},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Ype},148:{f:Kpe,p:16},151:{f:Lge},152:{},153:{f:wxe},154:{},155:{},156:{f:vxe},157:{},158:{},159:{T:1,f:Mfe},160:{T:-1},161:{T:1,f:Jh},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:kge},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:a0e},336:{T:-1},337:{f:u0e,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:ES},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Kj},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Uge},427:{f:Mge},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:jge},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Wpe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Dge},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:ES},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:T0e},633:{T:1},634:{T:-1},635:{T:1,f:_0e},636:{T:-1},637:{f:Xue},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:lxe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:qge},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},FS={6:{f:IE},10:{f:Fd},12:{f:Ca},13:{f:Ca},14:{f:ra},15:{f:ra},16:{f:Vi},17:{f:ra},18:{f:ra},19:{f:Ca},20:{f:aD},21:{f:aD},23:{f:Kj},24:{f:oD},25:{f:ra},26:{},27:{},28:{f:qde},29:{},34:{f:ra},35:{f:iD},38:{f:Vi},39:{f:Vi},40:{f:Vi},41:{f:Vi},42:{f:ra},43:{f:ra},47:{f:she},49:{f:vde},51:{f:Ca},60:{},61:{f:hde},64:{f:ra},65:{f:xde},66:{f:Ca},77:{},80:{},81:{},82:{},85:{f:Ca},89:{},90:{},91:{},92:{f:nde},93:{f:Wde},94:{},95:{f:ra},96:{},97:{},99:{f:ra},125:{f:$j},128:{f:Rde},129:{f:ade},130:{f:Ca},131:{f:ra},132:{f:ra},133:{f:ide},134:{},140:{f:nfe},141:{f:Ca},144:{},146:{f:ife},151:{},152:{},153:{},154:{},155:{},156:{f:Ca},157:{},158:{},160:{f:ffe},161:{f:cfe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:kde},190:{f:Ide},193:{f:Fd},197:{},198:{},199:{},200:{},201:{},202:{f:ra},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Ca},220:{},221:{f:ra},222:{},224:{f:Dde},225:{f:rde},226:{f:Fd},227:{},229:{f:Kde},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:lde},253:{f:wde},255:{f:ude},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:Pj},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:ra},353:{f:Fd},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:jde},431:{f:ra},432:{},433:{},434:{},437:{},438:{f:Jde},439:{f:ra},440:{f:Zde},441:{},442:{f:d1},443:{},444:{f:Ca},445:{},446:{},448:{f:Fd},449:{f:fde,r:2},450:{f:Fd},512:{f:rD},513:{f:dfe},515:{f:Mde},516:{f:Cde},517:{f:sD},519:{f:hfe},520:{f:Ade},523:{},545:{f:lD},549:{f:tD},566:{},574:{f:pde},638:{f:Bde},659:{},1048:{},1054:{f:_de},1084:{},1212:{f:Vde},2048:{f:tfe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Qv},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Fd},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:ofe,r:12},2173:{f:n0e,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:ra,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:Hde,r:12},2197:{},2198:{f:Xhe,r:12},2199:{},2200:{},2201:{},2202:{f:Gde,r:12},2203:{f:Fd},2204:{},2205:{},2206:{},2207:{},2211:{f:dde},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Ca},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:ufe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:afe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:rD},1:{},2:{f:vfe},3:{f:gfe},4:{f:pfe},5:{f:sD},7:{f:wfe},8:{},9:{f:Qv},11:{},22:{f:Ca},30:{f:Tde},31:{},32:{},33:{f:lD},36:{},37:{f:tD},50:{f:bfe},62:{},52:{},67:{},68:{f:Ca},69:{},86:{},126:{},127:{f:mfe},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Cfe},223:{},234:{},354:{},421:{},518:{f:IE},521:{f:Qv},536:{f:oD},547:{f:iD},561:{},579:{},1030:{f:IE},1033:{f:Qv},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Pt(t,e,r,n){var s=e;if(!isNaN(s)){var a=n||(r||[]).length||0,i=t.next(4);i.write_shift(2,s),i.write_shift(2,a),a>0&&eT(r)&&t.push(r)}}function w1e(t,e,r,n){var s=(r||[]).length||0;if(s<=8224)return Pt(t,e,r,s);var a=e;if(!isNaN(a)){for(var i=r.parts||[],o=0,l=0,u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;var d=t.next(4);for(d.write_shift(2,a),d.write_shift(2,u),t.push(r.slice(l,l+u)),l+=u;l<s;){for(d=t.next(4),d.write_shift(2,60),u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;d.write_shift(2,u),t.push(r.slice(l,l+u)),l+=u}}}function p1(t,e,r){return t||(t=ct(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function b1e(t,e,r,n){var s=ct(9);return p1(s,t,e),jj(r,n||"b",s),s}function C1e(t,e,r){var n=ct(8+2*r.length);return p1(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function E1e(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var s=e.t=="d"?Pa(hs(e.v)):e.v;s==(s|0)&&s>=0&&s<65536?Pt(t,2,yfe(r,n,s)):Pt(t,3,xfe(r,n,s));return;case"b":case"e":Pt(t,5,b1e(r,n,e.v,e.t));return;case"s":case"str":Pt(t,4,C1e(r,n,(e.v||"").slice(0,255)));return}Pt(t,1,p1(null,r,n))}function _1e(t,e,r,n){var s=Array.isArray(e),a=En(e["!ref"]||"A1"),i,o="",l=[];if(a.e.c>255||a.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");a.e.c=Math.min(a.e.c,255),a.e.r=Math.min(a.e.c,16383),i=Mr(a)}for(var u=a.s.r;u<=a.e.r;++u){o=ua(u);for(var d=a.s.c;d<=a.e.c;++d){u===a.s.r&&(l[d]=ks(d)),i=l[d]+o;var h=s?(e[u]||[])[d]:e[i];h&&E1e(t,h,u,d)}}}function S1e(t,e){for(var r=e||{},n=ko(),s=0,a=0;a<t.SheetNames.length;++a)t.SheetNames[a]==r.sheet&&(s=a);if(s==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Pt(n,r.biff==4?1033:r.biff==3?521:9,uT(t,16,r)),_1e(n,t.Sheets[t.SheetNames[s]],s,r),Pt(n,10),n.end()}function T1e(t,e,r){Pt(t,49,yde({sz:12,name:"Arial"},r))}function N1e(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&Pt(t,1054,Sde(s,e[s],r))})}function B1e(t,e){var r=ct(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Pt(t,2151,r),r=ct(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),Gj(En(e["!ref"]||"A1"),r),r.write_shift(4,4),Pt(t,2152,r)}function k1e(t,e){for(var r=0;r<16;++r)Pt(t,224,nD({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){Pt(t,224,nD(n,0,e))})}function I1e(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];Pt(t,440,efe(n)),n[1].Tooltip&&Pt(t,2048,rfe(n))}delete e["!links"]}function F1e(t,e){if(e){var r=0;e.forEach(function(n,s){++r<=256&&n&&Pt(t,125,lfe(ib(s,n),s))})}}function D1e(t,e,r,n,s){var a=16+Ff(s.cellXfs,e,s);if(e.v==null&&!e.bf){Pt(t,513,Mh(r,n,a));return}if(e.bf)Pt(t,6,ape(e,r,n,s,a));else switch(e.t){case"d":case"n":var i=e.t=="d"?Pa(hs(e.v)):e.v;Pt(t,515,Pde(r,n,i,a));break;case"b":case"e":Pt(t,517,Ude(r,n,e.v,a,s,e.t));break;case"s":case"str":if(s.bookSST){var o=xT(s.Strings,e.v,s.revStrings);Pt(t,253,bde(r,n,o,a))}else Pt(t,516,Ede(r,n,(e.v||"").slice(0,255),a,s));break;default:Pt(t,513,Mh(r,n,a))}}function R1e(t,e,r){var n=ko(),s=r.SheetNames[t],a=r.Sheets[s]||{},i=(r||{}).Workbook||{},o=(i.Sheets||[])[t]||{},l=Array.isArray(a),u=e.biff==8,d,h="",m=[],g=En(a["!ref"]||"A1"),b=u?65536:16384;if(g.e.c>255||g.e.r>=b){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");g.e.c=Math.min(g.e.c,255),g.e.r=Math.min(g.e.c,b-1)}Pt(n,2057,uT(r,16,e)),Pt(n,13,Pl(1)),Pt(n,12,Pl(100)),Pt(n,15,no(!0)),Pt(n,17,no(!1)),Pt(n,16,Lh(.001)),Pt(n,95,no(!0)),Pt(n,42,no(!1)),Pt(n,43,no(!1)),Pt(n,130,Pl(1)),Pt(n,128,Lde()),Pt(n,131,no(!1)),Pt(n,132,no(!1)),u&&F1e(n,a["!cols"]),Pt(n,512,Nde(g,e)),u&&(a["!links"]=[]);for(var y=g.s.r;y<=g.e.r;++y){h=ua(y);for(var _=g.s.c;_<=g.e.c;++_){y===g.s.r&&(m[_]=ks(_)),d=m[_]+h;var N=l?(a[y]||[])[_]:a[d];N&&(D1e(n,N,y,_,e),u&&N.l&&a["!links"].push([d,N.l]))}}var k=o.CodeName||o.name||s;return u&&Pt(n,574,gde((i.Views||[])[0])),u&&(a["!merges"]||[]).length&&Pt(n,229,$de(a["!merges"])),u&&I1e(n,a),Pt(n,442,Oj(k)),u&&B1e(n,a),Pt(n,10),n.end()}function L1e(t,e,r){var n=ko(),s=(t||{}).Workbook||{},a=s.Sheets||[],i=s.WBProps||{},o=r.biff==8,l=r.biff==5;if(Pt(n,2057,uT(t,5,r)),r.bookType=="xla"&&Pt(n,135),Pt(n,225,o?Pl(1200):null),Pt(n,193,UAe(2)),l&&Pt(n,191),l&&Pt(n,192),Pt(n,226),Pt(n,92,sde("SheetJS",r)),Pt(n,66,Pl(o?1200:1252)),o&&Pt(n,353,Pl(0)),o&&Pt(n,448),Pt(n,317,Afe(t.SheetNames.length)),o&&t.vbaraw&&Pt(n,211),o&&t.vbaraw){var u=i.CodeName||"ThisWorkbook";Pt(n,442,Oj(u))}Pt(n,156,Pl(17)),Pt(n,25,no(!1)),Pt(n,18,no(!1)),Pt(n,19,Pl(0)),o&&Pt(n,431,no(!1)),o&&Pt(n,444,Pl(0)),Pt(n,61,mde()),Pt(n,64,no(!1)),Pt(n,141,Pl(0)),Pt(n,34,no(fxe(t)=="true")),Pt(n,14,no(!0)),o&&Pt(n,439,no(!1)),Pt(n,218,Pl(0)),T1e(n,t,r),N1e(n,t.SSF,r),k1e(n,r),o&&Pt(n,352,no(!1));var d=n.end(),h=ko();o&&Pt(h,140,sfe()),o&&r.Strings&&w1e(h,252,cde(r.Strings)),Pt(h,10);var m=h.end(),g=ko(),b=0,y=0;for(y=0;y<t.SheetNames.length;++y)b+=(o?12:11)+(o?2:1)*t.SheetNames[y].length;var _=d.length+b+m.length;for(y=0;y<t.SheetNames.length;++y){var N=a[y]||{};Pt(g,133,ode({pos:_,hs:N.Hidden||0,dt:0,name:t.SheetNames[y]},r)),_+=e[y].length}var k=g.end();if(b!=k.length)throw new Error("BS8 "+b+" != "+k.length);var R=[];return d.length&&R.push(d),k.length&&R.push(k),m.length&&R.push(m),Xa(R)}function U1e(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=ms(vr)),t&&t.SSF&&(op(),Zw(t.SSF),r.revssf=tb(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,CT(r),r.cellXfs=[],Ff(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var s=0;s<t.SheetNames.length;++s)n[n.length]=R1e(s,r,t);return n.unshift(L1e(t,n,r)),Xa(n)}function DO(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var s=Fo(n["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var a=e||{};switch(a.biff||2){case 8:case 5:return U1e(t,e);case 4:case 3:case 2:return S1e(t,e)}throw new Error("invalid type "+a.bookType+" for BIFF")}function xD(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var s=t.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var a=t.match(/<\/table/i),i=s.index,o=a&&a.index||t.length,l=yue(t.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,h=0,m=0,g={s:{r:1e7,c:1e7},e:{r:0,c:0}},b=[];for(i=0;i<l.length;++i){var y=l[i].trim(),_=y.slice(0,3).toLowerCase();if(_=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(_!="<td"&&_!="<th")){var N=y.split(/<\/t[dh]>/i);for(o=0;o<N.length;++o){var k=N[o].trim();if(k.match(/<t[dh]/i)){for(var R=k,M=0;R.charAt(0)=="<"&&(M=R.indexOf(">"))>-1;)R=R.slice(M+1);for(var j=0;j<b.length;++j){var L=b[j];L.s.c==d&&L.s.r<u&&u<=L.e.r&&(d=L.e.c+1,j=-1)}var C=Br(k.slice(0,k.indexOf(">")));m=C.colspan?+C.colspan:1,((h=+C.rowspan)>1||m>1)&&b.push({s:{r:u,c:d},e:{r:u+(h||1)-1,c:d+m-1}});var E=C.t||C["data-t"]||"";if(!R.length){d+=m;continue}if(R=nj(R),g.s.r>u&&(g.s.r=u),g.e.r<u&&(g.e.r=u),g.s.c>d&&(g.s.c=d),g.e.c<d&&(g.e.c=d),!R.length){d+=m;continue}var B={t:"s",v:R};r.raw||!R.trim().length||E=="s"||(R==="TRUE"?B={t:"b",v:!0}:R==="FALSE"?B={t:"b",v:!1}:isNaN(kc(R))?isNaN(jm(R).getDate())||(B={t:"d",v:hs(R)},r.cellDates||(B={t:"n",v:Pa(B.v)}),B.z=r.dateNF||vr[14]):B={t:"n",v:kc(R)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=B):n[Er({r:u,c:d})]=B,d+=m}}}}return n["!ref"]=Mr(g),b.length&&(n["!merges"]=b),n}function M1e(t,e,r,n){for(var s=t["!merges"]||[],a=[],i=e.s.c;i<=e.e.c;++i){for(var o=0,l=0,u=0;u<s.length;++u)if(!(s[u].s.r>r||s[u].s.c>i)&&!(s[u].e.r<r||s[u].e.c<i)){if(s[u].s.r<r||s[u].s.c<i){o=-1;break}o=s[u].e.r-s[u].s.r+1,l=s[u].e.c-s[u].s.c+1;break}if(!(o<0)){var d=Er({r,c:i}),h=n.dense?(t[r]||[])[i]:t[d],m=h&&h.v!=null&&(h.h||X4(h.w||(jA(h),h.w)||""))||"",g={};o>1&&(g.rowspan=o),l>1&&(g.colspan=l),n.editable?m='<span contenteditable="true">'+m+"</span>":h&&(g["data-t"]=h&&h.t||"z",h.v!=null&&(g["data-v"]=h.v),h.z!=null&&(g["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+h.l.Target+'">'+m+"</a>")),g.id=(n.id||"sjs")+"-"+d,a.push(Mt("td",m,g))}}var b="<tr>";return b+a.join("")+"</tr>"}var P1e='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',j1e="</body></html>";function O1e(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return If(xD(r[0],e),e);var n=TT();return r.forEach(function(s,a){NT(n,xD(s,e),"Sheet"+(a+1))}),n}function Q1e(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function RO(t,e){var r=e||{},n=r.header!=null?r.header:P1e,s=r.footer!=null?r.footer:j1e,a=[n],i=Fo(t["!ref"]);r.dense=Array.isArray(t),a.push(Q1e(t,i,r));for(var o=i.s.r;o<=i.e.r;++o)a.push(M1e(t,i,o,r));return a.push("</table>"+s),a.join("")}function LO(t,e,r){var n=r||{},s=0,a=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var i=typeof n.origin=="string"?Is(n.origin):n.origin;s=i.r,a=i.c}var o=e.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:s,c:a}};if(t["!ref"]){var d=Fo(t["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),s==-1&&(u.e.r=s=d.e.r+1)}var h=[],m=0,g=t["!rows"]||(t["!rows"]=[]),b=0,y=0,_=0,N=0,k=0,R=0;for(t["!cols"]||(t["!cols"]=[]);b<o.length&&y<l;++b){var M=o[b];if(vD(M)){if(n.display)continue;g[y]={hidden:!0}}var j=M.children;for(_=N=0;_<j.length;++_){var L=j[_];if(!(n.display&&vD(L))){var C=L.hasAttribute("data-v")?L.getAttribute("data-v"):L.hasAttribute("v")?L.getAttribute("v"):nj(L.innerHTML),E=L.getAttribute("data-z")||L.getAttribute("z");for(m=0;m<h.length;++m){var B=h[m];B.s.c==N+a&&B.s.r<y+s&&y+s<=B.e.r&&(N=B.e.c+1-a,m=-1)}R=+L.getAttribute("colspan")||1,((k=+L.getAttribute("rowspan")||1)>1||R>1)&&h.push({s:{r:y+s,c:N+a},e:{r:y+s+(k||1)-1,c:N+a+(R||1)-1}});var Q={t:"s",v:C},D=L.getAttribute("data-t")||L.getAttribute("t")||"";C!=null&&(C.length==0?Q.t=D||"z":n.raw||C.trim().length==0||D=="s"||(C==="TRUE"?Q={t:"b",v:!0}:C==="FALSE"?Q={t:"b",v:!1}:isNaN(kc(C))?isNaN(jm(C).getDate())||(Q={t:"d",v:hs(C)},n.cellDates||(Q={t:"n",v:Pa(Q.v)}),Q.z=n.dateNF||vr[14]):Q={t:"n",v:kc(C)})),Q.z===void 0&&E!=null&&(Q.z=E);var I="",O=L.getElementsByTagName("A");if(O&&O.length)for(var G=0;G<O.length&&!(O[G].hasAttribute("href")&&(I=O[G].getAttribute("href"),I.charAt(0)!="#"));++G);I&&I.charAt(0)!="#"&&(Q.l={Target:I}),n.dense?(t[y+s]||(t[y+s]=[]),t[y+s][N+a]=Q):t[Er({c:N+a,r:y+s})]=Q,u.e.c<N+a&&(u.e.c=N+a),N+=R}}++y}return h.length&&(t["!merges"]=(t["!merges"]||[]).concat(h)),u.e.r=Math.max(u.e.r,y-1+s),t["!ref"]=Mr(u),y>=l&&(t["!fullref"]=Mr((u.e.r=o.length-b+y-1+s,u))),t}function UO(t,e){var r=e||{},n=r.dense?[]:{};return LO(n,t,e)}function H1e(t,e){return If(UO(t,e),e)}function vD(t){var e="",r=V1e(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function V1e(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function G1e(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Cn(e.replace(/<[^>]*>/g,""));return[r]}var yD={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function MO(t,e){var r=e||{},n=J4(t),s=[],a,i,o={name:""},l="",u=0,d,h,m={},g=[],b=r.dense?[]:{},y,_,N={value:""},k="",R=0,M=[],j=-1,L=-1,C={s:{r:1e6,c:1e7},e:{r:0,c:0}},E=0,B={},Q=[],D={},I=0,O=0,G=[],se=1,J=1,re=[],q={Names:[]},z={},W=["",""],ie=[],P={},Y="",Z=0,te=!1,ce=!1,Ee=0;for(bx.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");y=bx.exec(n);)switch(y[3]=y[3].replace(/_.*$/,"")){case"table":case"工作表":y[1]==="/"?(C.e.c>=C.s.c&&C.e.r>=C.s.r?b["!ref"]=Mr(C):b["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=C.e.r&&(b["!fullref"]=b["!ref"],C.e.r=r.sheetRows-1,b["!ref"]=Mr(C)),Q.length&&(b["!merges"]=Q),G.length&&(b["!rows"]=G),d.name=d.名称||d.name,typeof JSON<"u"&&JSON.stringify(d),g.push(d.name),m[d.name]=b,ce=!1):y[0].charAt(y[0].length-2)!=="/"&&(d=Br(y[0],!1),j=L=-1,C.s.r=C.s.c=1e7,C.e.r=C.e.c=0,b=r.dense?[]:{},Q=[],G=[],ce=!0);break;case"table-row-group":y[1]==="/"?--E:++E;break;case"table-row":case"行":if(y[1]==="/"){j+=se,se=1;break}if(h=Br(y[0],!1),h.行号?j=h.行号-1:j==-1&&(j=0),se=+h["number-rows-repeated"]||1,se<10)for(Ee=0;Ee<se;++Ee)E>0&&(G[j+Ee]={level:E});L=-1;break;case"covered-table-cell":y[1]!=="/"&&++L,r.sheetStubs&&(r.dense?(b[j]||(b[j]=[]),b[j][L]={t:"z"}):b[Er({r:j,c:L})]={t:"z"}),k="",M=[];break;case"table-cell":case"数据":if(y[0].charAt(y[0].length-2)==="/")++L,N=Br(y[0],!1),J=parseInt(N["number-columns-repeated"]||"1",10),_={t:"z",v:null},N.formula&&r.cellFormula!=!1&&(_.f=mD(Cn(N.formula))),(N.数据类型||N["value-type"])=="string"&&(_.t="s",_.v=Cn(N["string-value"]||""),r.dense?(b[j]||(b[j]=[]),b[j][L]=_):b[Er({r:j,c:L})]=_),L+=J-1;else if(y[1]!=="/"){++L,k="",R=0,M=[],J=1;var pe=se?j+se-1:j;if(L>C.e.c&&(C.e.c=L),L<C.s.c&&(C.s.c=L),j<C.s.r&&(C.s.r=j),pe>C.e.r&&(C.e.r=pe),N=Br(y[0],!1),ie=[],P={},_={t:N.数据类型||N["value-type"],v:null},r.cellFormula)if(N.formula&&(N.formula=Cn(N.formula)),N["number-matrix-columns-spanned"]&&N["number-matrix-rows-spanned"]&&(I=parseInt(N["number-matrix-rows-spanned"],10)||0,O=parseInt(N["number-matrix-columns-spanned"],10)||0,D={s:{r:j,c:L},e:{r:j+I-1,c:L+O-1}},_.F=Mr(D),re.push([D,_.F])),N.formula)_.f=mD(N.formula);else for(Ee=0;Ee<re.length;++Ee)j>=re[Ee][0].s.r&&j<=re[Ee][0].e.r&&L>=re[Ee][0].s.c&&L<=re[Ee][0].e.c&&(_.F=re[Ee][1]);switch((N["number-columns-spanned"]||N["number-rows-spanned"])&&(I=parseInt(N["number-rows-spanned"],10)||0,O=parseInt(N["number-columns-spanned"],10)||0,D={s:{r:j,c:L},e:{r:j+I-1,c:L+O-1}},Q.push(D)),N["number-columns-repeated"]&&(J=parseInt(N["number-columns-repeated"],10)),_.t){case"boolean":_.t="b",_.v=ds(N["boolean-value"]);break;case"float":_.t="n",_.v=parseFloat(N.value);break;case"percentage":_.t="n",_.v=parseFloat(N.value);break;case"currency":_.t="n",_.v=parseFloat(N.value);break;case"date":_.t="d",_.v=hs(N["date-value"]),r.cellDates||(_.t="n",_.v=Pa(_.v)),_.z="m/d/yy";break;case"time":_.t="n",_.v=gue(N["time-value"])/86400,r.cellDates&&(_.t="d",_.v=rb(_.v)),_.z="HH:MM:SS";break;case"number":_.t="n",_.v=parseFloat(N.数据数值);break;default:if(_.t==="string"||_.t==="text"||!_.t)_.t="s",N["string-value"]!=null&&(k=Cn(N["string-value"]),M=[]);else throw new Error("Unsupported value type "+_.t)}}else{if(te=!1,_.t==="s"&&(_.v=k||"",M.length&&(_.R=M),te=R==0),z.Target&&(_.l=z),ie.length>0&&(_.c=ie,ie=[]),k&&r.cellText!==!1&&(_.w=k),te&&(_.t="z",delete _.v),(!te||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=j))for(var fe=0;fe<se;++fe){if(J=parseInt(N["number-columns-repeated"]||"1",10),r.dense)for(b[j+fe]||(b[j+fe]=[]),b[j+fe][L]=fe==0?_:ms(_);--J>0;)b[j+fe][L+J]=ms(_);else for(b[Er({r:j+fe,c:L})]=_;--J>0;)b[Er({r:j+fe,c:L+J})]=ms(_);C.e.c<=L&&(C.e.c=L)}J=parseInt(N["number-columns-repeated"]||"1",10),L+=J-1,J=0,_={},k="",M=[]}z={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(y[1]==="/"){if((a=s.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!0]);break;case"annotation":if(y[1]==="/"){if((a=s.pop())[0]!==y[3])throw"Bad state: "+a;P.t=k,M.length&&(P.R=M),P.a=Y,ie.push(P)}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);Y="",Z=0,k="",R=0,M=[];break;case"creator":y[1]==="/"?Y=n.slice(Z,y.index):Z=y.index+y[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(y[1]==="/"){if((a=s.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);k="",R=0,M=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(y[1]==="/"){if(B[o.name]=l,(a=s.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&(l="",o=Br(y[0],!1),s.push([y[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":i=Br(y[0],!1),l+=yD[y[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":i=Br(y[0],!1),l+=yD[y[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(y[0].slice(-2)==="/>")break;if(y[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(u,y.index);break}else u=y.index+y[0].length;break;case"named-range":i=Br(y[0],!1),W=FE(i["cell-range-address"]);var xe={Name:i.name,Ref:W[0]+"!"+W[1]};ce&&(xe.Sheet=g.length),q.Names.push(xe);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(y[1]==="/"&&(!N||!N["string-value"])){var de=G1e(n.slice(R,y.index));k=(k.length>0?k+`
`:"")+de[0]}else Br(y[0],!1),R=y.index+y[0].length;break;case"s":break;case"database-range":if(y[1]==="/")break;try{W=FE(Br(y[0])["target-range-address"]),m[W[0]]["!autofilter"]={ref:W[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(y[1]!=="/"){if(z=Br(y[0],!1),!z.href)break;z.Target=Cn(z.href),delete z.href,z.Target.charAt(0)=="#"&&z.Target.indexOf(".")>-1?(W=FE(z.Target.slice(1)),z.Target="#"+W[0]+"!"+W[1]):z.Target.match(/^\.\.[\\\/]/)&&(z.Target=z.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(y[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(r.WTF)throw new Error(y)}}var oe={Sheets:m,SheetNames:g,Workbook:q};return r.bookSheets&&delete oe.Sheets,oe}function wD(t,e){e=e||{},Ul(t,"META-INF/manifest.xml")&&gAe(ba(t,"META-INF/manifest.xml"),e);var r=rl(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=MO(rs(r),e);return Ul(t,"meta.xml")&&(n.Props=Tj(ba(t,"meta.xml"))),n}function bD(t,e){return MO(t,e)}var z1e=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+wx({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return Aa+e}}(),CD=function(){var t=function(a){return Kn(a).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(a,i,o){var l=[];l.push('      <table:table table:name="'+Kn(i.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,h=Fo(a["!ref"]||"A1"),m=a["!merges"]||[],g=0,b=Array.isArray(a);if(a["!cols"])for(d=0;d<=h.e.c;++d)l.push("        <table:table-column"+(a["!cols"][d]?' table:style-name="co'+a["!cols"][d].ods+'"':"")+`></table:table-column>
`);var y="",_=a["!rows"]||[];for(u=0;u<h.s.r;++u)y=_[u]?' table:style-name="ro'+_[u].ods+'"':"",l.push("        <table:table-row"+y+`></table:table-row>
`);for(;u<=h.e.r;++u){for(y=_[u]?' table:style-name="ro'+_[u].ods+'"':"",l.push("        <table:table-row"+y+`>
`),d=0;d<h.s.c;++d)l.push(e);for(;d<=h.e.c;++d){var N=!1,k={},R="";for(g=0;g!=m.length;++g)if(!(m[g].s.c>d)&&!(m[g].s.r>u)&&!(m[g].e.c<d)&&!(m[g].e.r<u)){(m[g].s.c!=d||m[g].s.r!=u)&&(N=!0),k["table:number-columns-spanned"]=m[g].e.c-m[g].s.c+1,k["table:number-rows-spanned"]=m[g].e.r-m[g].s.r+1;break}if(N){l.push(r);continue}var M=Er({r:u,c:d}),j=b?(a[u]||[])[d]:a[M];if(j&&j.f&&(k["table:formula"]=Kn(Ape(j.f)),j.F&&j.F.slice(0,M.length)==M)){var L=Fo(j.F);k["table:number-matrix-columns-spanned"]=L.e.c-L.s.c+1,k["table:number-matrix-rows-spanned"]=L.e.r-L.s.r+1}if(!j){l.push(e);continue}switch(j.t){case"b":R=j.v?"TRUE":"FALSE",k["office:value-type"]="boolean",k["office:boolean-value"]=j.v?"true":"false";break;case"n":R=j.w||String(j.v||0),k["office:value-type"]="float",k["office:value"]=j.v||0;break;case"s":case"str":R=j.v==null?"":j.v,k["office:value-type"]="string";break;case"d":R=j.w||hs(j.v).toISOString(),k["office:value-type"]="date",k["office:date-value"]=hs(j.v).toISOString(),k["table:style-name"]="ce1";break;default:l.push(e);continue}var C=t(R);if(j.l&&j.l.Target){var E=j.l.Target;E=E.charAt(0)=="#"?"#"+dpe(E.slice(1)):E,E.charAt(0)!="#"&&!E.match(/^\w+:/)&&(E="../"+E),C=Mt("text:a",C,{"xlink:href":E.replace(/&/g,"&amp;")})}l.push("          "+Mt("table:table-cell",Mt("text:p",C,{}),k)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},s=function(a,i){a.push(` <office:automatic-styles>
`),a.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),a.push(`   <number:month number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:day number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:year/>
`),a.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var h=u["!cols"][d];if(h.width==null&&h.wpx==null&&h.wch==null)continue;Cf(h),h.ods=o;var m=u["!cols"][d].wpx+"px";a.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),a.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+m+`"/>
`),a.push(`  </style:style>
`),++o}}});var l=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=l;var h=u["!rows"][d].hpx+"px";a.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),a.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+h+`"/>
`),a.push(`  </style:style>
`),++l}}}),a.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),a.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),a.push(`  </style:style>
`),a.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),a.push(` </office:automatic-styles>
`)};return function(i,o){var l=[Aa],u=wx({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=wx({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+u+d+`>
`),l.push(Sj().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+u+`>
`),s(l,i),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var h=0;h!=i.SheetNames.length;++h)l.push(n(i.Sheets[i.SheetNames[h]],i,h));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function PO(t,e){if(e.bookType=="fods")return CD(t,e);var r=$4(),n="",s=[],a=[];return n="mimetype",Vr(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Vr(r,n,CD(t,e)),s.push([n,"text/xml"]),a.push([n,"ContentFile"]),n="styles.xml",Vr(r,n,z1e(t,e)),s.push([n,"text/xml"]),a.push([n,"StylesFile"]),n="meta.xml",Vr(r,n,Aa+Sj()),s.push([n,"text/xml"]),a.push([n,"MetadataFile"]),n="manifest.rdf",Vr(r,n,yAe(a)),s.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Vr(r,n,xAe(s)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Ph(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function DS(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):rs(kf(t))}function q1e(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):tl(Eu(t))}function K1e(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function _f(t){var e=t.reduce(function(s,a){return s+a.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(s){r.set(s,n),n+=s.length}),r}function ED(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function $1e(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,s=e+13;s>=e;--s)n=n*256+t[s];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function W1e(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var a=0;s>=1;++a,s/=256)t[e+a]=s&255;t[e+15]|=r>=0?0:128}function Bx(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function Gn(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function qs(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function In(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],s=Bx(t,r),a=s&7;s=Math.floor(s/8);var i=0,o;if(s==0)break;switch(a){case 0:{for(var l=r[0];t[r[0]++]>=128;);o=t.slice(l,r[0])}break;case 5:i=4,o=t.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,o=t.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=Bx(t,r),o=t.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(s," at offset ").concat(n))}var u={data:o,type:a};e[s]==null?e[s]=[u]:e[s].push(u)}return e}function oi(t){var e=[];return t.forEach(function(r,n){r.forEach(function(s){s.data&&(e.push(Gn(n*8+s.type)),s.type==2&&e.push(Gn(s.data.length)),e.push(s.data))})}),_f(e)}function wT(t,e){return(t==null?void 0:t.map(function(r){return e(r.data)}))||[]}function Rl(t){for(var e,r=[],n=[0];n[0]<t.length;){var s=Bx(t,n),a=In(t.slice(n[0],n[0]+s));n[0]+=s;var i={id:qs(a[1][0].data),messages:[]};a[2].forEach(function(o){var l=In(o.data),u=qs(l[3][0].data);i.messages.push({meta:l,data:t.slice(n[0],n[0]+u)}),n[0]+=u}),(e=a[3])!=null&&e[0]&&(i.merge=qs(a[3][0].data)>>>0>0),r.push(i)}return r}function D0(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:Gn(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Gn(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(i){s.push(i.data),i.meta[3]=[{type:0,data:Gn(i.data.length)}],n[2].push({data:oi(i.meta),type:2})});var a=oi(n);e.push(Gn(a.length)),e.push(a),s.forEach(function(i){return e.push(i)})}),_f(e)}function Y1e(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=Bx(e,r),s=[];r[0]<e.length;){var a=e[r[0]]&3;if(a==0){var i=e[r[0]++]>>2;if(i<60)++i;else{var o=i-59;i=e[r[0]],o>1&&(i|=e[r[0]+1]<<8),o>2&&(i|=e[r[0]+2]<<16),o>3&&(i|=e[r[0]+3]<<24),i>>>=0,i++,r[0]+=o}s.push(e.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var l=0,u=0;if(a==1?(u=(e[r[0]]>>2&7)+4,l=(e[r[0]++]&224)<<3,l|=e[r[0]++]):(u=(e[r[0]++]>>2)+1,a==2?(l=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(l=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),s=[_f(s)],l==0)throw new Error("Invalid offset 0");if(l>s[0].length)throw new Error("Invalid offset beyond length");if(u>=l)for(s.push(s[0].slice(-l)),u-=l;u>=s[s.length-1].length;)s.push(s[s.length-1]),u-=s[s.length-1].length;s.push(s[0].slice(-l,-l+u))}}var d=_f(s);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Ll(t){for(var e=[],r=0;r<t.length;){var n=t[r++],s=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(Y1e(n,t.slice(r,r+s))),r+=s}if(r!==t.length)throw new Error("data is not a valid framed stream!");return _f(e)}function R0(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),s=new Uint8Array(4);e.push(s);var a=Gn(n),i=a.length;e.push(a),n<=60?(i++,e.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),i+=n,s[0]=0,s[1]=i&255,s[2]=i>>8&255,s[3]=i>>16&255,r+=n}return _f(e)}function X1e(t,e,r,n){var s=Ph(t),a=s.getUint32(4,!0),i=(n>1?12:8)+ED(a&(n>1?3470:398))*4,o=-1,l=-1,u=NaN,d=new Date(2001,0,1);a&512&&(o=s.getUint32(i,!0),i+=4),i+=ED(a&(n>1?12288:4096))*4,a&16&&(l=s.getUint32(i,!0),i+=4),a&32&&(u=s.getFloat64(i,!0),i+=8),a&64&&(d.setTime(d.getTime()+s.getFloat64(i,!0)*1e3),i+=8);var h;switch(t[2]){case 0:break;case 2:h={t:"n",v:u};break;case 3:h={t:"s",v:e[l]};break;case 5:h={t:"d",v:d};break;case 6:h={t:"b",v:u>0};break;case 7:h={t:"n",v:u/86400};break;case 8:h={t:"e",v:0};break;case 9:if(o>-1)h={t:"s",v:r[o]};else if(l>-1)h={t:"s",v:e[l]};else if(!isNaN(u))h={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return h}function J1e(t,e,r){var n=Ph(t),s=n.getUint32(8,!0),a=12,i=-1,o=-1,l=NaN,u=NaN,d=new Date(2001,0,1);s&1&&(l=$1e(t,a),a+=16),s&2&&(u=n.getFloat64(a,!0),a+=8),s&4&&(d.setTime(d.getTime()+n.getFloat64(a,!0)*1e3),a+=8),s&8&&(o=n.getUint32(a,!0),a+=4),s&16&&(i=n.getUint32(a,!0),a+=4);var h;switch(t[1]){case 0:break;case 2:h={t:"n",v:l};break;case 3:h={t:"s",v:e[o]};break;case 5:h={t:"d",v:d};break;case 6:h={t:"b",v:u>0};break;case 7:h={t:"n",v:u/86400};break;case 8:h={t:"e",v:0};break;case 9:if(i>-1)h={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)));break;case 10:h={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)))}return h}function RE(t,e){var r=new Uint8Array(32),n=Ph(r),s=12,a=0;switch(r[0]=5,t.t){case"n":r[1]=2,W1e(r,s,t.v),a|=1,s+=16;break;case"b":r[1]=6,n.setFloat64(s,t.v?1:0,!0),a|=2,s+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(s,e.indexOf(t.v),!0),a|=8,s+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,a,!0),r.slice(0,s)}function LE(t,e){var r=new Uint8Array(32),n=Ph(r),s=12,a=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(s,t.v,!0),a|=32,s+=8;break;case"b":r[2]=6,n.setFloat64(s,t.v?1:0,!0),a|=32,s+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(s,e.indexOf(t.v),!0),a|=16,s+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,a,!0),r.slice(0,s)}function Z1e(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return X1e(t,e,r,t[0]);case 5:return J1e(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function Ui(t){var e=In(t);return Bx(e[1][0].data)}function _D(t,e){var r=In(e.data),n=qs(r[1][0].data),s=r[3],a=[];return(s||[]).forEach(function(i){var o=In(i.data),l=qs(o[1][0].data)>>>0;switch(n){case 1:a[l]=DS(o[3][0].data);break;case 8:{var u=t[Ui(o[9][0].data)][0],d=In(u.data),h=t[Ui(d[1][0].data)][0],m=qs(h.meta[1][0].data);if(m!=2001)throw new Error("2000 unexpected reference to ".concat(m));var g=In(h.data);a[l]=g[3].map(function(b){return DS(b.data)}).join("")}break}}),a}function eve(t,e){var r,n,s,a,i,o,l,u,d,h,m,g,b,y,_=In(t),N=qs(_[1][0].data)>>>0,k=qs(_[2][0].data)>>>0,R=((n=(r=_[8])==null?void 0:r[0])==null?void 0:n.data)&&qs(_[8][0].data)>0||!1,M,j;if((a=(s=_[7])==null?void 0:s[0])!=null&&a.data&&e!=0)M=(o=(i=_[7])==null?void 0:i[0])==null?void 0:o.data,j=(u=(l=_[6])==null?void 0:l[0])==null?void 0:u.data;else if((h=(d=_[4])==null?void 0:d[0])!=null&&h.data&&e!=1)M=(g=(m=_[4])==null?void 0:m[0])==null?void 0:g.data,j=(y=(b=_[3])==null?void 0:b[0])==null?void 0:y.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var L=R?4:1,C=Ph(M),E=[],B=0;B<M.length/2;++B){var Q=C.getUint16(B*2,!0);Q<65535&&E.push([B,Q])}if(E.length!=k)throw"Expected ".concat(k," cells, found ").concat(E.length);var D=[];for(B=0;B<E.length-1;++B)D[E[B][0]]=j.subarray(E[B][1]*L,E[B+1][1]*L);return E.length>=1&&(D[E[E.length-1][0]]=j.subarray(E[E.length-1][1]*L)),{R:N,cells:D}}function tve(t,e){var r,n=In(e.data),s=(r=n==null?void 0:n[7])!=null&&r[0]?qs(n[7][0].data)>>>0>0?1:0:-1,a=wT(n[5],function(i){return eve(i,s)});return{nrows:qs(n[4][0].data)>>>0,data:a.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(l,u){if(i[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));i[o.R][u]=l}),i},[])}}function rve(t,e,r){var n,s=In(e.data),a={s:{r:0,c:0},e:{r:0,c:0}};if(a.e.r=(qs(s[6][0].data)>>>0)-1,a.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(a.e.c=(qs(s[7][0].data)>>>0)-1,a.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=Mr(a);var i=In(s[4][0].data),o=_D(t,t[Ui(i[4][0].data)][0]),l=(n=i[17])!=null&&n[0]?_D(t,t[Ui(i[17][0].data)][0]):[],u=In(i[3][0].data),d=0;u[1].forEach(function(h){var m=In(h.data),g=t[Ui(m[2][0].data)][0],b=qs(g.meta[1][0].data);if(b!=6002)throw new Error("6001 unexpected reference to ".concat(b));var y=tve(t,g);y.data.forEach(function(_,N){_.forEach(function(k,R){var M=Er({r:d+N,c:R}),j=Z1e(k,o,l);j&&(r[M]=j)})}),d+=y.nrows})}function nve(t,e){var r=In(e.data),n={"!ref":"A1"},s=t[Ui(r[2][0].data)],a=qs(s[0].meta[1][0].data);if(a!=6001)throw new Error("6000 unexpected reference to ".concat(a));return rve(t,s[0],n),n}function sve(t,e){var r,n=In(e.data),s={name:(r=n[1])!=null&&r[0]?DS(n[1][0].data):"",sheets:[]},a=wT(n[2],Ui);return a.forEach(function(i){t[i].forEach(function(o){var l=qs(o.meta[1][0].data);l==6e3&&s.sheets.push(nve(t,o))})}),s}function ave(t,e){var r=TT(),n=In(e.data),s=wT(n[1],Ui);if(s.forEach(function(a){t[a].forEach(function(i){var o=qs(i.meta[1][0].data);if(o==2){var l=sve(t,i);l.sheets.forEach(function(u,d){NT(r,u,d==0?l.name:l.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function UE(t){var e,r,n,s,a={},i=[];if(t.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var u;try{u=Ll(l.content)}catch(h){return console.log("?? "+l.content.length+" "+(h.message||h))}var d;try{d=Rl(u)}catch(h){return console.log("## "+(h.message||h))}d.forEach(function(h){a[h.id]=h.messages,i.push(h.id)})}}),!i.length)throw new Error("File has no messages");var o=((s=(n=(r=(e=a==null?void 0:a[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&qs(a[1][0].meta[1][0].data)==1&&a[1][0];if(o||i.forEach(function(l){a[l].forEach(function(u){var d=qs(u.meta[1][0].data)>>>0;if(d==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return ave(a,o)}function ive(t,e,r){var n,s,a,i;if(!((n=t[6])!=null&&n[0])||!((s=t[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(a=t[8])==null?void 0:a[0])==null?void 0:i.data)&&qs(t[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,u=Ph(t[7][0].data),d=0,h=[],m=Ph(t[4][0].data),g=0,b=[],y=0;y<e.length;++y){if(e[y]==null){u.setUint16(y*2,65535,!0),m.setUint16(y*2,65535);continue}u.setUint16(y*2,d,!0),m.setUint16(y*2,g,!0);var _,N;switch(typeof e[y]){case"string":_=RE({t:"s",v:e[y]},r),N=LE({t:"s",v:e[y]},r);break;case"number":_=RE({t:"n",v:e[y]},r),N=LE({t:"n",v:e[y]},r);break;case"boolean":_=RE({t:"b",v:e[y]},r),N=LE({t:"b",v:e[y]},r);break;default:throw new Error("Unsupported value "+e[y])}h.push(_),d+=_.length,b.push(N),g+=N.length,++l}for(t[2][0].data=Gn(l);y<t[7][0].data.length/2;++y)u.setUint16(y*2,65535,!0),m.setUint16(y*2,65535,!0);return t[6][0].data=_f(h),t[3][0].data=_f(b),l}function ove(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Fo(r["!ref"]);n.s.r=n.s.c=0;var s=!1;n.e.c>9&&(s=!0,n.e.c=9),n.e.r>49&&(s=!0,n.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(Mr(n)));var a=O2(r,{range:n,header:1}),i=["~Sh33tJ5~"];a.forEach(function(Y){return Y.forEach(function(Z){typeof Z=="string"&&i.push(Z)})});var o={},l=[],u=ur.read(e.numbers,{type:"base64"});u.FileIndex.map(function(Y,Z){return[Y,u.FullPaths[Z]]}).forEach(function(Y){var Z=Y[0],te=Y[1];if(Z.type==2&&Z.name.match(/\.iwa/)){var ce=Z.content,Ee=Ll(ce),pe=Rl(Ee);pe.forEach(function(fe){l.push(fe.id),o[fe.id]={deps:[],location:te,type:qs(fe.messages[0].meta[1][0].data)}})}}),l.sort(function(Y,Z){return Y-Z});var d=l.filter(function(Y){return Y>1}).map(function(Y){return[Y,Gn(Y)]});u.FileIndex.map(function(Y,Z){return[Y,u.FullPaths[Z]]}).forEach(function(Y){var Z=Y[0];if(Y[1],!!Z.name.match(/\.iwa/)){var te=Rl(Ll(Z.content));te.forEach(function(ce){ce.messages.forEach(function(Ee){d.forEach(function(pe){ce.messages.some(function(fe){return qs(fe.meta[1][0].data)!=11006&&K1e(fe.data,pe[1])})&&o[pe[0]].deps.push(ce.id)})})})}});for(var h=ur.find(u,o[1].location),m=Rl(Ll(h.content)),g,b=0;b<m.length;++b){var y=m[b];y.id==1&&(g=y)}var _=Ui(In(g.messages[0].data)[1][0].data);for(h=ur.find(u,o[_].location),m=Rl(Ll(h.content)),b=0;b<m.length;++b)y=m[b],y.id==_&&(g=y);for(_=Ui(In(g.messages[0].data)[2][0].data),h=ur.find(u,o[_].location),m=Rl(Ll(h.content)),b=0;b<m.length;++b)y=m[b],y.id==_&&(g=y);for(_=Ui(In(g.messages[0].data)[2][0].data),h=ur.find(u,o[_].location),m=Rl(Ll(h.content)),b=0;b<m.length;++b)y=m[b],y.id==_&&(g=y);var N=In(g.messages[0].data);{N[6][0].data=Gn(n.e.r+1),N[7][0].data=Gn(n.e.c+1);var k=Ui(N[46][0].data),R=ur.find(u,o[k].location),M=Rl(Ll(R.content));{for(var j=0;j<M.length&&M[j].id!=k;++j);if(M[j].id!=k)throw"Bad ColumnRowUIDMapArchive";var L=In(M[j].messages[0].data);L[1]=[],L[2]=[],L[3]=[];for(var C=0;C<=n.e.c;++C){var E=[];E[1]=E[2]=[{type:0,data:Gn(C+420690)}],L[1].push({type:2,data:oi(E)}),L[2].push({type:0,data:Gn(C)}),L[3].push({type:0,data:Gn(C)})}L[4]=[],L[5]=[],L[6]=[];for(var B=0;B<=n.e.r;++B)E=[],E[1]=E[2]=[{type:0,data:Gn(B+726270)}],L[4].push({type:2,data:oi(E)}),L[5].push({type:0,data:Gn(B)}),L[6].push({type:0,data:Gn(B)});M[j].messages[0].data=oi(L)}R.content=R0(D0(M)),R.size=R.content.length,delete N[46];var Q=In(N[4][0].data);{Q[7][0].data=Gn(n.e.r+1);var D=In(Q[1][0].data),I=Ui(D[2][0].data);R=ur.find(u,o[I].location),M=Rl(Ll(R.content));{if(M[0].id!=I)throw"Bad HeaderStorageBucket";var O=In(M[0].messages[0].data);for(B=0;B<a.length;++B){var G=In(O[2][0].data);G[1][0].data=Gn(B),G[4][0].data=Gn(a[B].length),O[2][B]={type:O[2][0].type,data:oi(G)}}M[0].messages[0].data=oi(O)}R.content=R0(D0(M)),R.size=R.content.length;var se=Ui(Q[2][0].data);R=ur.find(u,o[se].location),M=Rl(Ll(R.content));{if(M[0].id!=se)throw"Bad HeaderStorageBucket";for(O=In(M[0].messages[0].data),C=0;C<=n.e.c;++C)G=In(O[2][0].data),G[1][0].data=Gn(C),G[4][0].data=Gn(n.e.r+1),O[2][C]={type:O[2][0].type,data:oi(G)};M[0].messages[0].data=oi(O)}R.content=R0(D0(M)),R.size=R.content.length;var J=Ui(Q[4][0].data);(function(){for(var Y=ur.find(u,o[J].location),Z=Rl(Ll(Y.content)),te,ce=0;ce<Z.length;++ce){var Ee=Z[ce];Ee.id==J&&(te=Ee)}var pe=In(te.messages[0].data);{pe[3]=[];var fe=[];i.forEach(function(oe,Le){fe[1]=[{type:0,data:Gn(Le)}],fe[2]=[{type:0,data:Gn(1)}],fe[3]=[{type:2,data:q1e(oe)}],pe[3].push({type:2,data:oi(fe)})})}te.messages[0].data=oi(pe);var xe=D0(Z),de=R0(xe);Y.content=de,Y.size=Y.content.length})();var re=In(Q[3][0].data);{var q=re[1][0];delete re[2];var z=In(q.data);{var W=Ui(z[2][0].data);(function(){for(var Y=ur.find(u,o[W].location),Z=Rl(Ll(Y.content)),te,ce=0;ce<Z.length;++ce){var Ee=Z[ce];Ee.id==W&&(te=Ee)}var pe=In(te.messages[0].data);{delete pe[6],delete re[7];var fe=new Uint8Array(pe[5][0].data);pe[5]=[];for(var xe=0,de=0;de<=n.e.r;++de){var oe=In(fe);xe+=ive(oe,a[de],i),oe[1][0].data=Gn(de),pe[5].push({data:oi(oe),type:2})}pe[1]=[{type:0,data:Gn(n.e.c+1)}],pe[2]=[{type:0,data:Gn(n.e.r+1)}],pe[3]=[{type:0,data:Gn(xe)}],pe[4]=[{type:0,data:Gn(n.e.r+1)}]}te.messages[0].data=oi(pe);var Le=D0(Z),et=R0(Le);Y.content=et,Y.size=Y.content.length})()}q.data=oi(z)}Q[3][0].data=oi(re)}N[4][0].data=oi(Q)}g.messages[0].data=oi(N);var ie=D0(m),P=R0(ie);return h.content=P,h.size=h.content.length,u}function jO(t){return function(r){for(var n=0;n!=t.length;++n){var s=t[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function bT(t){jO([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function CT(t){jO([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function lve(t){return rn.WS.indexOf(t)>-1?"sheet":t==rn.CS?"chart":t==rn.DS?"dialog":t==rn.MS?"macro":t&&t.length?t:"sheet"}function cve(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,lve(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function uve(t,e,r,n,s,a,i,o,l,u,d,h){try{a[n]=Kg(rl(t,r,!0),e);var m=ba(t,e),g;switch(o){case"sheet":g=Fxe(m,e,s,l,a[n],u,d,h);break;case"chart":if(g=Dxe(m,e,s,l,a[n],u,d,h),!g||!g["!drawel"])break;var b=bg(g["!drawel"].Target,e),y=Cx(b),_=v0e(rl(t,b,!0),Kg(rl(t,y,!0),b)),N=bg(_,b),k=Cx(N);g=ixe(rl(t,N,!0),N,l,Kg(rl(t,k,!0),N),u,g);break;case"macro":g=Rxe(m,e,s,l,a[n],u,d,h);break;case"dialog":g=Lxe(m,e,s,l,a[n],u,d,h);break;default:throw new Error("Unrecognized sheet type "+o)}i[n]=g;var R=[];a&&a[n]&&Ks(a[n]).forEach(function(M){var j="";if(a[n][M].Type==rn.CMNT){j=bg(a[n][M].Target,e);var L=jxe(ba(t,j,!0),j,l);if(!L||!L.length)return;uD(g,L,!1)}a[n][M].Type==rn.TCMNT&&(j=bg(a[n][M].Target,e),R=R.concat(w0e(ba(t,j,!0),l)))}),R&&R.length&&uD(g,R,!0,l.people||[])}catch(M){if(l.WTF)throw M}}function Fl(t){return t.charAt(0)=="/"?t.slice(1):t}function Ave(t,e){if(op(),e=e||{},bT(e),Ul(t,"META-INF/manifest.xml")||Ul(t,"objectdata.xml"))return wD(t,e);if(Ul(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof UE<"u"){if(t.FileIndex)return UE(t);var r=ur.utils.cfb_new();return I6(t).forEach(function(G){Vr(r,G,bue(t,G))}),UE(r)}throw new Error("Unsupported NUMBERS file")}if(!Ul(t,"[Content_Types].xml"))throw Ul(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Ul(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=I6(t),s=mAe(rl(t,"[Content_Types].xml")),a=!1,i,o;if(s.workbooks.length===0&&(o="xl/workbook.xml",ba(t,o,!0)&&s.workbooks.push(o)),s.workbooks.length===0){if(o="xl/workbook.bin",!ba(t,o,!0))throw new Error("Could not find workbook");s.workbooks.push(o),a=!0}s.workbooks[0].slice(-3)=="bin"&&(a=!0);var l={},u={};if(!e.bookSheets&&!e.bookProps){if($g=[],s.sst)try{$g=Pxe(ba(t,Fl(s.sst)),s.sst,e)}catch(G){if(e.WTF)throw G}e.cellStyles&&s.themes.length&&(l=Mxe(rl(t,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],e)),s.style&&(u=Uxe(ba(t,Fl(s.style)),s.style,l,e))}s.links.map(function(G){try{var se=Kg(rl(t,Cx(Fl(G))),G);return Qxe(ba(t,Fl(G)),se,G,e)}catch{}});var d=Ixe(ba(t,Fl(s.workbooks[0])),s.workbooks[0],e),h={},m="";s.coreprops.length&&(m=ba(t,Fl(s.coreprops[0]),!0),m&&(h=Tj(m)),s.extprops.length!==0&&(m=ba(t,Fl(s.extprops[0]),!0),m&&bAe(m,h,e)));var g={};(!e.bookSheets||e.bookProps)&&s.custprops.length!==0&&(m=rl(t,Fl(s.custprops[0]),!0),m&&(g=EAe(m,e)));var b={};if((e.bookSheets||e.bookProps)&&(d.Sheets?i=d.Sheets.map(function(se){return se.name}):h.Worksheets&&h.SheetNames.length>0&&(i=h.SheetNames),e.bookProps&&(b.Props=h,b.Custprops=g),e.bookSheets&&typeof i<"u"&&(b.SheetNames=i),e.bookSheets?b.SheetNames:e.bookProps))return b;i={};var y={};e.bookDeps&&s.calcchain&&(y=Oxe(ba(t,Fl(s.calcchain)),s.calcchain));var _=0,N={},k,R;{var M=d.Sheets;h.Worksheets=M.length,h.SheetNames=[];for(var j=0;j!=M.length;++j)h.SheetNames[j]=M[j].name}var L=a?"bin":"xml",C=s.workbooks[0].lastIndexOf("/"),E=(s.workbooks[0].slice(0,C+1)+"_rels/"+s.workbooks[0].slice(C+1)+".rels").replace(/^\//,"");Ul(t,E)||(E="xl/_rels/workbook."+L+".rels");var B=Kg(rl(t,E,!0),E.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(e.xlmeta=Hxe(ba(t,Fl(s.metadata[0])),s.metadata[0],e)),(s.people||[]).length>=1&&(e.people=C0e(ba(t,Fl(s.people[0])),e)),B&&(B=cve(B,d.Sheets));var Q=ba(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(_=0;_!=h.Worksheets;++_){var D="sheet";if(B&&B[_]?(k="xl/"+B[_][1].replace(/[\/]?xl\//,""),Ul(t,k)||(k=B[_][1]),Ul(t,k)||(k=E.replace(/_rels\/.*$/,"")+B[_][1]),D=B[_][2]):(k="xl/worksheets/sheet"+(_+1-Q)+"."+L,k=k.replace(/sheet0\./,"sheet.")),R=k.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(_!=e.sheets)continue e;break;case"string":if(h.SheetNames[_].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var I=!1,O=0;O!=e.sheets.length;++O)typeof e.sheets[O]=="number"&&e.sheets[O]==_&&(I=1),typeof e.sheets[O]=="string"&&e.sheets[O].toLowerCase()==h.SheetNames[_].toLowerCase()&&(I=1);if(!I)continue e}}uve(t,k,R,h.SheetNames[_],_,N,i,D,e,d,l,u)}return b={Directory:s,Workbook:d,Props:h,Custprops:g,Deps:y,Sheets:i,SheetNames:h.SheetNames,Strings:$g,Styles:u,Themes:l,SSF:ms(vr)},e&&e.bookFiles&&(t.files?(b.keys=n,b.files=t.files):(b.keys=[],b.files={},t.FullPaths.forEach(function(G,se){G=G.replace(/^Root Entry[\/]/,""),b.keys.push(G),b.files[G]=t.FileIndex[se]}))),e&&e.bookVBA&&(s.vba.length>0?b.vbaraw=ba(t,Fl(s.vba[0]),!0):s.defaults&&s.defaults.bin===I0e&&(b.vbaraw=ba(t,"xl/vbaProject.bin",!0))),b}function dve(t,e){var r=e||{},n="Workbook",s=ur.find(t,n);try{if(n="/!DataSpaces/Version",s=ur.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(Hfe(s.content),n="/!DataSpaces/DataSpaceMap",s=ur.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=Gfe(s.content);if(a.length!==1||a[0].comps.length!==1||a[0].comps[0].t!==0||a[0].name!=="StrongEncryptionDataSpace"||a[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=ur.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=zfe(s.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=ur.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);Kfe(s.content)}catch{}if(n="/EncryptionInfo",s=ur.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=$fe(s.content);if(n="/EncryptedPackage",s=ur.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],s.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function fve(t,e){return e.bookType=="ods"?PO(t,e):e.bookType=="numbers"?ove(t,e):e.bookType=="xlsb"?hve(t,e):mve(t,e)}function hve(t,e){om=1024,t&&!t.SSF&&(t.SSF=ms(vr)),t&&t.SSF&&(op(),Zw(t.SSF),e.revssf=tb(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Wg?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=dO.indexOf(e.bookType)>-1,s=lT();CT(e=e||{});var a=$4(),i="",o=0;if(e.cellXfs=[],Ff(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",Vr(a,i,Nj(t.Props,e)),s.coreprops.push(i),zn(e.rels,2,i,rn.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(t.SheetNames[u]);t.Props.SheetNames=l}for(t.Props.Worksheets=t.Props.SheetNames.length,Vr(a,i,Ij(t.Props)),s.extprops.push(i),zn(e.rels,3,i,rn.EXT_PROPS),t.Custprops!==t.Props&&Ks(t.Custprops||{}).length>0&&(i="docProps/custom.xml",Vr(a,i,Fj(t.Custprops)),s.custprops.push(i),zn(e.rels,4,i,rn.CUST_PROPS)),o=1;o<=t.SheetNames.length;++o){var d={"!id":{}},h=t.Sheets[t.SheetNames[o-1]],m=(h||{})["!type"]||"sheet";switch(m){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,Vr(a,i,Gxe(o-1,i,e,t,d)),s.sheets.push(i),zn(e.wbrels,-1,"worksheets/sheet"+o+"."+r,rn.WS[0])}if(h){var g=h["!comments"],b=!1,y="";g&&g.length>0&&(y="xl/comments"+o+"."+r,Vr(a,y,Kxe(g,y)),s.comments.push(y),zn(d,-1,"../comments"+o+"."+r,rn.CMNT),b=!0),h["!legacy"]&&b&&Vr(a,"xl/drawings/vmlDrawing"+o+".vml",uO(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}d["!id"].rId1&&Vr(a,Cx(i),Cm(d))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+r,Vr(a,i,qxe(e.Strings,i,e)),s.strs.push(i),zn(e.wbrels,-1,"sharedStrings."+r,rn.SST)),i="xl/workbook."+r,Vr(a,i,Vxe(t,i)),s.workbooks.push(i),zn(e.rels,1,i,rn.WB),i="xl/theme/theme1.xml",Vr(a,i,hT(t.Themes,e)),s.themes.push(i),zn(e.wbrels,-1,"theme/theme1.xml",rn.THEME),i="xl/styles."+r,Vr(a,i,zxe(t,i,e)),s.styles.push(i),zn(e.wbrels,-1,"styles."+r,rn.STY),t.vbaraw&&n&&(i="xl/vbaProject.bin",Vr(a,i,t.vbaraw),s.vba.push(i),zn(e.wbrels,-1,"vbaProject.bin",rn.VBA)),i="xl/metadata."+r,Vr(a,i,$xe(i)),s.metadata.push(i),zn(e.wbrels,-1,"metadata."+r,rn.XLMETA),Vr(a,"[Content_Types].xml",_j(s,e)),Vr(a,"_rels/.rels",Cm(e.rels)),Vr(a,"xl/_rels/workbook."+r+".rels",Cm(e.wbrels)),delete e.revssf,delete e.ssf,a}function mve(t,e){om=1024,t&&!t.SSF&&(t.SSF=ms(vr)),t&&t.SSF&&(op(),Zw(t.SSF),e.revssf=tb(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Wg?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=dO.indexOf(e.bookType)>-1,s=lT();CT(e=e||{});var a=$4(),i="",o=0;if(e.cellXfs=[],Ff(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",Vr(a,i,Nj(t.Props,e)),s.coreprops.push(i),zn(e.rels,2,i,rn.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(t.SheetNames[u]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,Vr(a,i,Ij(t.Props)),s.extprops.push(i),zn(e.rels,3,i,rn.EXT_PROPS),t.Custprops!==t.Props&&Ks(t.Custprops||{}).length>0&&(i="docProps/custom.xml",Vr(a,i,Fj(t.Custprops)),s.custprops.push(i),zn(e.rels,4,i,rn.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,o=1;o<=t.SheetNames.length;++o){var h={"!id":{}},m=t.Sheets[t.SheetNames[o-1]],g=(m||{})["!type"]||"sheet";switch(g){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,Vr(a,i,CO(o-1,e,t,h)),s.sheets.push(i),zn(e.wbrels,-1,"worksheets/sheet"+o+"."+r,rn.WS[0])}if(m){var b=m["!comments"],y=!1,_="";if(b&&b.length>0){var N=!1;b.forEach(function(k){k[1].forEach(function(R){R.T==!0&&(N=!0)})}),N&&(_="xl/threadedComments/threadedComment"+o+"."+r,Vr(a,_,b0e(b,d,e)),s.threadedcomments.push(_),zn(h,-1,"../threadedComments/threadedComment"+o+"."+r,rn.TCMNT)),_="xl/comments"+o+"."+r,Vr(a,_,AO(b)),s.comments.push(_),zn(h,-1,"../comments"+o+"."+r,rn.CMNT),y=!0}m["!legacy"]&&y&&Vr(a,"xl/drawings/vmlDrawing"+o+".vml",uO(o,m["!comments"])),delete m["!comments"],delete m["!legacy"]}h["!id"].rId1&&Vr(a,Cx(i),Cm(h))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+r,Vr(a,i,Jj(e.Strings,e)),s.strs.push(i),zn(e.wbrels,-1,"sharedStrings."+r,rn.SST)),i="xl/workbook."+r,Vr(a,i,NO(t)),s.workbooks.push(i),zn(e.rels,1,i,rn.WB),i="xl/theme/theme1.xml",Vr(a,i,hT(t.Themes,e)),s.themes.push(i),zn(e.wbrels,-1,"theme/theme1.xml",rn.THEME),i="xl/styles."+r,Vr(a,i,iO(t,e)),s.styles.push(i),zn(e.wbrels,-1,"styles."+r,rn.STY),t.vbaraw&&n&&(i="xl/vbaProject.bin",Vr(a,i,t.vbaraw),s.vba.push(i),zn(e.wbrels,-1,"vbaProject.bin",rn.VBA)),i="xl/metadata."+r,Vr(a,i,cO()),s.metadata.push(i),zn(e.wbrels,-1,"metadata."+r,rn.XLMETA),d.length>1&&(i="xl/persons/person.xml",Vr(a,i,E0e(d)),s.people.push(i),zn(e.wbrels,-1,"persons/person.xml",rn.PEOPLE)),Vr(a,"[Content_Types].xml",_j(s,e)),Vr(a,"_rels/.rels",Cm(e.rels)),Vr(a,"xl/_rels/workbook."+r+".rels",Cm(e.wbrels)),delete e.revssf,delete e.ssf,a}function ET(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=ol(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function pve(t,e){return ur.find(t,"EncryptedPackage")?dve(t,e):FO(t,e)}function gve(t,e){var r,n=t,s=e||{};return s.type||(s.type=Xr&&Buffer.isBuffer(t)?"buffer":"base64"),r=ej(n,s),Ave(r,s)}function OO(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return IS(t.slice(r),e);default:break e}return Om.to_workbook(t,e)}function xve(t,e){var r="",n=ET(t,e);switch(e.type){case"base64":r=ol(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=Rh(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=rs(r)),e.type="binary",OO(r,e)}function vve(t,e){var r=t;return e.type=="base64"&&(r=ol(r)),r=gx.utils.decode(1200,r.slice(2),"str"),e.type="binary",OO(r,e)}function yve(t){return t.match(/[^\x00-\x7F]/)?Eu(t):t}function ME(t,e,r,n){return n?(r.type="string",Om.to_workbook(t,r)):Om.to_workbook(e,r)}function kx(t,e){V4();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return kx(new Uint8Array(t),(r=ms(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,s=[0,0,0,0],a=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),_m={},r.dateNF&&(_m.dateNF=r.dateNF),r.type||(r.type=Xr&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=Xr?"buffer":"binary",n=hue(t),typeof Uint8Array<"u"&&!Xr&&(r.type="array")),r.type=="string"&&(a=!0,r.type="binary",r.codepage=65001,n=yve(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return r=ms(r),r.type="array",kx(G4(n),r)}switch((s=ET(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return pve(ur.read(n,r),r);break;case 9:if(s[1]<=8)return FO(n,r);break;case 60:return IS(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return _fe(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return Yj.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?gve(n,r):ME(t,n,r,a);case 239:return s[3]===60?IS(n,r):ME(t,n,r,a);case 255:if(s[1]===254)return vve(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return bh.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return bh.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return kS.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return nO.to_workbook(n,r);break;case 10:case 13:case 32:return xve(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return Efe.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?kS.to_workbook(n,r):ME(t,n,r,a)}function QO(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return c1(e.file,ur.write(t,{type:Xr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return ur.write(t,e)}function wve(t,e){var r=ms(e||{}),n=fve(t,r);return bve(n,r)}function bve(t,e){var r={},n=Xr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var s=t.FullPaths?ur.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(e.type=="binary"||e.type=="base64")return s;s=new Uint8Array(Jw(s))}return e.password&&typeof encrypt_agile<"u"?QO(encrypt_agile(s,e.password),e):e.type==="file"?c1(e.file,s):e.type=="string"?rs(s):s}function Cve(t,e){var r=e||{},n=y1e(t,r);return QO(n,r)}function yu(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return xx(Eu(n));case"binary":return Eu(n);case"string":return t;case"file":return c1(e.file,n,"utf8");case"buffer":return Xr?qA(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):yu(n,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Eve(t,e){switch(e.type){case"base64":return xx(t);case"binary":return t;case"string":return t;case"file":return c1(e.file,t,"binary");case"buffer":return Xr?qA(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function zv(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?xx(r):e.type=="string"?rs(r):r;case"file":return c1(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function HO(t,e){V4(),pxe(t);var r=ms(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=HO(t,r);return r.type="array",Jw(n)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=t.SheetNames.indexOf(r.sheet),!t.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return yu(f1e(t,r),r);case"slk":case"sylk":return yu(Wj.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"htm":case"html":return yu(RO(t.Sheets[t.SheetNames[s]],r),r);case"txt":return Eve(VO(t.Sheets[t.SheetNames[s]],r),r);case"csv":return yu(ST(t.Sheets[t.SheetNames[s]],r),r,"\uFEFF");case"dif":return yu(Yj.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"dbf":return zv(kS.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"prn":return yu(Om.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"rtf":return yu(nO.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"eth":return yu(Xj.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"fods":return yu(PO(t,r),r);case"wk1":return zv(bh.sheet_to_wk1(t.Sheets[t.SheetNames[s]],r),r);case"wk3":return zv(bh.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),zv(DO(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),Cve(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return wve(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function _ve(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function _T(t,e,r){var n={};return n.type="file",n.file=e,_ve(n),HO(t,n)}function Sve(t,e,r,n,s,a,i,o){var l=ua(r),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),h=!0,m=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:r,enumerable:!1})}catch{m.__rowNum__=r}else m.__rowNum__=r;if(!i||t[r])for(var g=e.s.c;g<=e.e.c;++g){var b=i?t[r][g]:t[n[g]+l];if(b===void 0||b.t===void 0){if(u===void 0)continue;a[g]!=null&&(m[a[g]]=u);continue}var y=b.v;switch(b.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+b.t)}if(a[g]!=null){if(y==null)if(b.t=="e"&&y===null)m[a[g]]=null;else if(u!==void 0)m[a[g]]=u;else if(d&&y===null)m[a[g]]=null;else continue;else m[a[g]]=d&&(b.t!=="n"||b.t==="n"&&o.rawNumbers!==!1)?y:jA(b,y,o);y!=null&&(h=!1)}}return{row:m,isempty:h}}function O2(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,a=[],i=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},d=u.range!=null?u.range:t["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":l=En(d);break;case"number":l=En(t["!ref"]),l.s.r=d;break;default:l=d}n>0&&(s=0);var h=ua(l.s.r),m=[],g=[],b=0,y=0,_=Array.isArray(t),N=l.s.r,k=0,R={};_&&!t[N]&&(t[N]=[]);var M=u.skipHidden&&t["!cols"]||[],j=u.skipHidden&&t["!rows"]||[];for(k=l.s.c;k<=l.e.c;++k)if(!(M[k]||{}).hidden)switch(m[k]=ks(k),r=_?t[N][k]:t[m[k]+h],n){case 1:a[k]=k-l.s.c;break;case 2:a[k]=m[k];break;case 3:a[k]=u.header[k-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=i=jA(r,null,u),y=R[i]||0,!y)R[i]=1;else{do o=i+"_"+y++;while(R[o]);R[i]=y,R[o]=1}a[k]=o}for(N=l.s.r+s;N<=l.e.r;++N)if(!(j[N]||{}).hidden){var L=Sve(t,l,N,m,n,a,_,u);(L.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(g[b++]=L.row)}return g.length=b,g}var SD=/"/g;function Tve(t,e,r,n,s,a,i,o){for(var l=!0,u=[],d="",h=ua(r),m=e.s.c;m<=e.e.c;++m)if(n[m]){var g=o.dense?(t[r]||[])[m]:t[n[m]+h];if(g==null)d="";else if(g.v!=null){l=!1,d=""+(o.rawNumbers&&g.t=="n"?g.v:jA(g,null,o));for(var b=0,y=0;b!==d.length;++b)if((y=d.charCodeAt(b))===s||y===a||y===34||o.forceQuotes){d='"'+d.replace(SD,'""')+'"';break}d=="ID"&&(d='"ID"')}else g.f!=null&&!g.F?(l=!1,d="="+g.f,d.indexOf(",")>=0&&(d='"'+d.replace(SD,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&l?null:u.join(i)}function ST(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var s=En(t["!ref"]),a=n.FS!==void 0?n.FS:",",i=a.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),u=new RegExp((a=="|"?"\\|":a)+"+$"),d="",h=[];n.dense=Array.isArray(t);for(var m=n.skipHidden&&t["!cols"]||[],g=n.skipHidden&&t["!rows"]||[],b=s.s.c;b<=s.e.c;++b)(m[b]||{}).hidden||(h[b]=ks(b));for(var y=0,_=s.s.r;_<=s.e.r;++_)(g[_]||{}).hidden||(d=Tve(t,s,_,h,i,l,a,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((y++?o:"")+d)));return delete n.dense,r.join("")}function VO(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=ST(t,e);return r}function Nve(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var s=En(t["!ref"]),a="",i=[],o,l=[],u=Array.isArray(t);for(o=s.s.c;o<=s.e.c;++o)i[o]=ks(o);for(var d=s.s.r;d<=s.e.r;++d)for(a=ua(d),o=s.s.c;o<=s.e.c;++o)if(e=i[o]+a,r=u?(t[d]||[])[o]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=e+"="+n}return l}function GO(t,e,r){var n=r||{},s=+!n.skipHeader,a=t||{},i=0,o=0;if(a&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var l=typeof n.origin=="string"?Is(n.origin):n.origin;i=l.r,o=l.c}var u,d={s:{c:0,r:0},e:{c:o,r:i+e.length-1+s}};if(a["!ref"]){var h=En(a["!ref"]);d.e.c=Math.max(d.e.c,h.e.c),d.e.r=Math.max(d.e.r,h.e.r),i==-1&&(i=h.e.r+1,d.e.r=i+e.length-1+s)}else i==-1&&(i=0,d.e.r=e.length-1+s);var m=n.header||[],g=0;e.forEach(function(y,_){Ks(y).forEach(function(N){(g=m.indexOf(N))==-1&&(m[g=m.length]=N);var k=y[N],R="z",M="",j=Er({c:o+g,r:i+_+s});u=Ix(a,j),k&&typeof k=="object"&&!(k instanceof Date)?a[j]=k:(typeof k=="number"?R="n":typeof k=="boolean"?R="b":typeof k=="string"?R="s":k instanceof Date?(R="d",n.cellDates||(R="n",k=Pa(k)),M=n.dateNF||vr[14]):k===null&&n.nullError&&(R="e",k=0),u?(u.t=R,u.v=k,delete u.w,delete u.R,M&&(u.z=M)):a[j]=u={t:R,v:k},M&&(u.z=M))})}),d.e.c=Math.max(d.e.c,o+m.length-1);var b=ua(i);if(s)for(g=0;g<m.length;++g)a[ks(g+o)+b]={t:"s",v:m[g]};return a["!ref"]=Mr(d),a}function Bve(t,e){return GO(null,t,e)}function Ix(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=Is(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?Ix(t,Er(e)):Ix(t,Er({r:e,c:r||0}))}function kve(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function TT(){return{SheetNames:[],Sheets:{}}}function NT(t,e,r,n){var s=1;if(!r)for(;s<=65535&&t.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var a=r.match(/(^.*?)(\d+)$/);s=a&&+a[2]||0;var i=a&&a[1]||r;for(++s;s<=65535&&t.SheetNames.indexOf(r=i+s)!=-1;++s);}if(TO(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function Ive(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=kve(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function Fve(t,e){return t.z=e,t}function zO(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function Dve(t,e,r){return zO(t,"#"+e,r)}function Rve(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function Lve(t,e,r,n){for(var s=typeof e!="string"?e:En(e),a=typeof e=="string"?e:Mr(e),i=s.s.r;i<=s.e.r;++i)for(var o=s.s.c;o<=s.e.c;++o){var l=Ix(t,i,o);l.t="n",l.F=a,delete l.v,i==s.s.r&&o==s.s.c&&(l.f=r,n&&(l.D=!0))}return t}var Hl={encode_col:ks,encode_row:ua,encode_cell:Er,encode_range:Mr,decode_col:rT,decode_row:tT,split_cell:que,decode_cell:Is,decode_range:Fo,format_cell:jA,sheet_add_aoa:xj,sheet_add_json:GO,sheet_add_dom:LO,aoa_to_sheet:lp,json_to_sheet:Bve,table_to_sheet:UO,table_to_book:H1e,sheet_to_csv:ST,sheet_to_txt:VO,sheet_to_json:O2,sheet_to_html:RO,sheet_to_formulae:Nve,sheet_to_row_object_array:O2,sheet_get_cell:Ix,book_new:TT,book_append_sheet:NT,book_set_sheet_visibility:Ive,cell_set_number_format:Fve,cell_set_hyperlink:zO,cell_set_internal_link:Dve,cell_add_comment:Rve,sheet_set_array_formula:Lve,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Uve=async()=>{try{const t=er(Ft(Kr,"apiLogs"),gn("timestamp","desc"));return(await ca(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener logs de API:",t),new Error("No se pudieron cargar los logs de API")}},Mve=async()=>{try{const t=new Date,e=new Date(t.getFullYear(),t.getMonth(),t.getDate()),r=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let n=0,s=0;const a=[];for(const l of r)try{const u=Ft(Kr,l),d=await ca(u),h=d.size;n+=h,a.push({label:l.charAt(0).toUpperCase()+l.slice(1),value:h});let m=0;d.docs.forEach(g=>{const b=g.data();b.createdAt&&new Date(b.createdAt)>=e&&m++}),s+=m}catch(u){console.warn(`Error accediendo a colección ${l}:`,u),a.push({label:l.charAt(0).toUpperCase()+l.slice(1),value:0})}const i=[];try{const l=Ft(Kr,"apiLogs"),u=new Date(t.getTime()-10080*60*1e3),d=er(l,Fn("timestamp",">=",u.toISOString()),gn("timestamp","desc")),h=await ca(d),m={};h.docs.forEach(g=>{const b=g.data(),y=new Date(b.timestamp).toLocaleDateString("es-CL");m[y]=(m[y]||0)+1}),Object.entries(m).sort(([g],[b])=>new Date(g).getTime()-new Date(b).getTime()).forEach(([g,b])=>{i.push({label:g,value:b})})}catch(l){console.warn("Error calculando actividad diaria:",l)}const o=Math.floor(s*2.5);return{documentsCreatedToday:s,readsToday:o,writesToday:s,totalDocuments:n,collectionsActivity:a.sort((l,u)=>u.value-l.value),dailyActivity:i}}catch(t){return console.error("Error al obtener estadísticas de Firestore:",t),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},TD=500,L0=({title:t,value:e,description:r,alert:n})=>c.jsxs("div",{className:`p-5 rounded-xl border ${n?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:t}),c.jsx("p",{className:`text-3xl font-bold mt-2 ${n?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:e}),r&&c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]}),PE=({title:t,data:e,colorClass:r})=>{const n=ee.useMemo(()=>Math.max(...e.map(s=>s.value),1),[e]);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:t}),c.jsx("div",{className:"space-y-4",children:e.length>0?e.map(s=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:s.label}),c.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:s.value})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:c.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${s.value/n*100}%`}})})]},s.label)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},Pve=()=>{const[t,e]=ee.useState([]),[r,n]=ee.useState(!1),[s,a]=ee.useState(null),[i,o]=ee.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}),l=ee.useCallback(async()=>{n(!0);try{const g=await Uve();e(g),a(null)}catch(g){console.error("Error al cargar logs de la API desde Firestore:",g),a("No se pudieron cargar los logs de API desde la nube.")}finally{n(!1)}},[]),u=ee.useCallback(async()=>{try{const g=await Mve();o(g)}catch(g){console.error("Error al cargar estadísticas de Firestore:",g)}},[]);ee.useEffect(()=>{l(),u();const g=setInterval(()=>{l(),u()},300*1e3);return()=>clearInterval(g)},[l,u]);const{stats:d,userStats:h,moduleStats:m}=ee.useMemo(()=>{const g=new Date,b=new Date(g.getFullYear(),g.getMonth(),g.getDate()).getTime(),y=b-g.getDay()*24*60*60*1e3,_=new Date(g.getFullYear(),g.getMonth(),1).getTime(),N={today:0,week:0,month:0},k={},R={};t.forEach(L=>{const C=new Date(L.timestamp).getTime();C>=b&&N.today++,C>=y&&N.week++,C>=_&&N.month++,k[L.userId]||(k[L.userId]={email:L.userEmail,today:0,month:0,total:0}),k[L.userId].total++,C>=b&&k[L.userId].today++,C>=_&&k[L.userId].month++,R[L.module]=(R[L.module]||0)+1});const M=Object.values(k).sort((L,C)=>C.total-L.total),j=Object.entries(R).map(([L,C])=>({label:L,value:C})).sort((L,C)=>C.value-L.value);return{stats:N,userStats:M,moduleStats:j}},[t]);return c.jsxs("div",{className:"space-y-8",children:[r&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadísticas desde la nube..."}),s&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),!r&&t.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsx(L0,{title:"Llamadas Hoy",value:r?"--":d.today,description:`Límite recomendado: ${TD}`,alert:d.today>TD}),c.jsx(L0,{title:"Llamadas esta Semana",value:r?"--":d.week}),c.jsx(L0,{title:"Llamadas este Mes",value:r?"--":d.month})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[c.jsx(PE,{title:"Uso por Módulo",data:m,colorClass:"bg-sky-500"}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),c.jsx("div",{className:"overflow-x-auto max-h-96",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&h.length>0?h.map(g=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:g.email}),c.jsx("td",{className:"px-4 py-2 text-center text-sm",children:g.today}),c.jsx("td",{className:"px-4 py-2 text-center text-sm",children:g.month}),c.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:g.total})]},g.email)):c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:r?"Cargando...":"No hay registros."})})})]})})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadísticas de uso de Firestore en tiempo real."}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx(L0,{title:"Documentos Creados (Hoy)",value:i.documentsCreatedToday,description:"Nuevos documentos"}),c.jsx(L0,{title:"Lecturas de Firestore (Hoy)",value:i.readsToday,description:"Operaciones de lectura"}),c.jsx(L0,{title:"Total de Documentos",value:i.totalDocuments,description:"En todas las colecciones"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[c.jsx(PE,{title:"Actividad por Colección",data:i.collectionsActivity,colorClass:"bg-green-500"}),c.jsx(PE,{title:"Actividad Diaria (Últimos 7 días)",data:i.dailyActivity,colorClass:"bg-purple-500"})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jve="type.googleapis.com/google.protobuf.Int64Value",Ove="type.googleapis.com/google.protobuf.UInt64Value";function qO(t,e){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}function Q2(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Q2(e));if(typeof t=="function"||typeof t=="object")return qO(t,e=>Q2(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Hm(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case jve:case Ove:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Hm(e)):typeof t=="function"||typeof t=="object"?qO(t,e=>Hm(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class No extends Uu{constructor(e,r,n){super(`${BT}/${e}`,r||""),this.details=n,Object.setPrototypeOf(this,No.prototype)}}function Qve(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function H2(t,e){let r=Qve(t),n=r,s;try{const a=e&&e.error;if(a){const i=a.status;if(typeof i=="string"){if(!ND[i])return new No("internal","internal");r=ND[i],n=i}const o=a.message;typeof o=="string"&&(n=o),s=a.details,s!==void 0&&(s=Hm(s))}}catch{}return r==="ok"?null:new No(r,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hve{constructor(e,r,n,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Ol(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||r.get().then(a=>this.auth=a,()=>{}),this.messaging||n.get().then(a=>this.messaging=a,()=>{}),this.appCheck||s==null||s.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS="us-central1",Vve=/^data: (.*?)(?:\n|$)/;function Gve(t){let e=null;return{promise:new Promise((r,n)=>{e=setTimeout(()=>{n(new No("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class zve{constructor(e,r,n,s,a=RS,i=(...o)=>fetch(...o)){this.app=e,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new Hve(e,r,n,s),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(a);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=RS}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function qve(t,e,r){const n=Qh(e);t.emulatorOrigin=`http${n?"s":""}://${e}:${r}`,n&&(_5(t.emulatorOrigin),S5("Functions",!0))}function Kve(t,e,r){const n=s=>Wve(t,e,s,{});return n.stream=(s,a)=>Xve(t,e,s,a),n}async function $ve(t,e,r,n){r["Content-Type"]="application/json";let s;try{s=await n(t,{method:"POST",body:JSON.stringify(e),headers:r})}catch{return{status:0,json:null}}let a=null;try{a=await s.json()}catch{}return{status:s.status,json:a}}async function KO(t,e){const r={},n=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return n.authToken&&(r.Authorization="Bearer "+n.authToken),n.messagingToken&&(r["Firebase-Instance-ID-Token"]=n.messagingToken),n.appCheckToken!==null&&(r["X-Firebase-AppCheck"]=n.appCheckToken),r}function Wve(t,e,r,n){const s=t._url(e);return Yve(t,s,r,n)}async function Yve(t,e,r,n){r=Q2(r);const s={data:r},a=await KO(t,n),i=n.timeout||7e4,o=Gve(i),l=await Promise.race([$ve(e,s,a,t.fetchImpl),o.promise,t.cancelAllRequests]);if(o.cancel(),!l)throw new No("cancelled","Firebase Functions instance was deleted.");const u=H2(l.status,l.json);if(u)throw u;if(!l.json)throw new No("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new No("internal","Response is missing data field.");return{data:Hm(d)}}function Xve(t,e,r,n){const s=t._url(e);return Jve(t,s,r,n||{})}async function Jve(t,e,r,n){var m;r=Q2(r);const s={data:r},a=await KO(t,n);a["Content-Type"]="application/json",a.Accept="text/event-stream";let i;try{i=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:a,signal:n==null?void 0:n.signal})}catch(g){if(g instanceof Error&&g.name==="AbortError"){const y=new No("cancelled","Request was cancelled.");return{data:Promise.reject(y),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(y)}}}}}}const b=H2(0,null);return{data:Promise.reject(b),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(b)}}}}}}let o,l;const u=new Promise((g,b)=>{o=g,l=b});(m=n==null?void 0:n.signal)==null||m.addEventListener("abort",()=>{const g=new No("cancelled","Request was cancelled.");l(g)});const d=i.body.getReader(),h=Zve(d,o,l,n==null?void 0:n.signal);return{stream:{[Symbol.asyncIterator](){const g=h.getReader();return{async next(){const{value:b,done:y}=await g.read();return{value:b,done:y}},async return(){return await g.cancel(),{done:!0,value:void 0}}}}},data:u}}function Zve(t,e,r,n){const s=(i,o)=>{const l=i.match(Vve);if(!l)return;const u=l[1];try{const d=JSON.parse(u);if("result"in d){e(Hm(d.result));return}if("message"in d){o.enqueue(Hm(d.message));return}if("error"in d){const h=H2(0,d);o.error(h),r(h);return}}catch(d){if(d instanceof No){o.error(d),r(d);return}}},a=new TextDecoder;return new ReadableStream({start(i){let o="";return l();async function l(){if(n!=null&&n.aborted){const u=new No("cancelled","Request was cancelled");return i.error(u),r(u),Promise.resolve()}try{const{value:u,done:d}=await t.read();if(d){o.trim()&&s(o.trim(),i),i.close();return}if(n!=null&&n.aborted){const m=new No("cancelled","Request was cancelled");i.error(m),r(m),await t.cancel();return}o+=a.decode(u,{stream:!0});const h=o.split(`
`);o=h.pop()||"";for(const m of h)m.trim()&&s(m.trim(),i);return l()}catch(u){const d=u instanceof No?u:H2(0,null);i.error(d),r(d)}}},cancel(){return t.cancel()}})}const BD="@firebase/functions",kD="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eye="auth-internal",tye="app-check-internal",rye="messaging-internal";function nye(t){const e=(r,{instanceIdentifier:n})=>{const s=r.getProvider("app").getImmediate(),a=r.getProvider(eye),i=r.getProvider(rye),o=r.getProvider(tye);return new zve(s,a,i,o,n)};Th(new ff(BT,e,"PUBLIC").setMultipleInstances(!0)),_u(BD,kD,t),_u(BD,kD,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(t=k5(),e=RS){const n=hw(bs(t),BT).getImmediate({identifier:e}),s=KL("functions");return s&&sye(n,...s),n}function sye(t,e,r){qve(bs(t),e,r)}function U0(t,e,r){return Kve(bs(t),e)}nye();const ID=Ft(Kr,"usuarios");async function $O(){try{console.log("🔍 [DEBUG] Obteniendo usuarios de Firestore..."),console.log("🔍 [DEBUG] Collection ref:",ID);const t=await ca(ID);if(console.log(`📊 [DEBUG] Encontrados ${t.docs.length} documentos en la colección usuarios`),t.empty)return console.log("⚠️  [DEBUG] La colección usuarios está vacía"),[];const e=t.docs.map(r=>{const n=r.data();return console.log("👤 [DEBUG] Usuario encontrado:",{id:r.id,...n}),{id:r.id,...n}});return console.log("✅ [DEBUG] Usuarios procesados correctamente:",e.length),console.log("✅ [DEBUG] Lista completa de usuarios:",e),e}catch(t){throw console.error("❌ [DEBUG] Error al obtener usuarios:",t),console.error("❌ [DEBUG] Error details:",{code:t.code,message:t.message,stack:t.stack}),t}}const FD=Object.values(Vt),jE=t=>t?t.trim().toLowerCase().replace(/°/g,"º").replace(/\s+(medio|básico|basico)/g,"").replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º").replace(/^(\d)(?![º])/,"$1º").replace(/\s+/g,"").toUpperCase():"",aye=()=>{const[t,e]=ee.useState([]),[r,n]=ee.useState(!1),[s,a]=ee.useState("Usuarios"),[i,o]=ee.useState({nombreCompleto:"",email:"",rut:"",profile:Vt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[l,u]=ee.useState(null),[d,h]=ee.useState(""),[m,g]=ee.useState(""),[b,y]=ee.useState(""),[_,N]=ee.useState(null),[k,R]=ee.useState(null),[M,j]=ee.useState(null),L=ee.useCallback(async()=>{n(!0);try{const q=await $O();e(q)}catch(q){console.error("Error al cargar usuarios",q),N("No se pudieron cargar los usuarios.")}finally{n(!1)}},[]);ee.useEffect(()=>{L()},[L]);const C=ee.useCallback(q=>{const{name:z,value:W}=q.target;o(ie=>({...ie,[z]:W,curso:z==="profile"&&W!==Vt.ESTUDIANTE?"":ie.curso,cursos:z==="profile"&&W!==Vt.PROFESORADO?[]:ie.cursos,asignaturas:z==="profile"&&W!==Vt.PROFESORADO?[]:ie.asignaturas}))},[]),E=ee.useCallback((q,z)=>{o(W=>{const ie=W[q]||[],P=ie.includes(z)?ie.filter(Y=>Y!==z):[...ie,z];return{...W,[q]:P}})},[]),B=ee.useCallback(()=>{o({nombreCompleto:"",email:"",rut:"",profile:Vt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),u(null),N(null)},[]),Q=ee.useCallback(async q=>{q.preventDefault(),N(null);const{nombreCompleto:z,email:W,profile:ie,curso:P,password:Y}=i;if(!z.trim()||!W.trim()){N("Nombre Completo y Email son obligatorios.");return}if(ie===Vt.ESTUDIANTE&&!P){N('El campo "Curso" es obligatorio para Estudiantes.');return}if(!l&&!(Y!=null&&Y.trim())){N("La contraseña es obligatoria al crear un nuevo usuario.");return}const Z=rg();try{if(l){const te=U0(Z,"updateUser"),ce={...i,password:(Y==null?void 0:Y.trim())||void 0,curso:ie===Vt.ESTUDIANTE?jE(P||""):void 0};await te(ce)}else{const te=U0(Z,"createUser"),ce={...i,curso:ie===Vt.ESTUDIANTE?jE(P||""):void 0};await te(ce)}await L(),B()}catch(te){console.error("Error al guardar usuario:",te),N(te.message||"Error al guardar el usuario.")}},[i,l,L,B]),D=ee.useCallback(q=>{u(q.email),o({nombreCompleto:q.nombreCompleto,email:q.email,rut:q.rut||"",profile:q.profile,password:"",curso:q.curso||"",cursos:q.cursos||[],asignaturas:q.asignaturas||[]}),setTimeout(()=>{const z=document.querySelector("form");z&&z.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[]),I=ee.useCallback(async q=>{if(window.confirm(`¿Está seguro de que desea eliminar al usuario ${q}? Esta acción es irreversible.`))try{const z=rg();await U0(z,"deleteUser")({email:q}),await L()}catch(z){console.error("Error al eliminar usuario:",z),N(z.message||"No se pudo borrar el usuario.")}},[L]),O=async q=>{var Y;const z=(Y=q.target.files)==null?void 0:Y[0];if(!z)return;R({message:"Procesando archivo...",isError:!1});const W=rg(),ie=U0(W,"createUser"),P=new FileReader;P.onload=async Z=>{var te;try{const ce=new Uint8Array((te=Z.target)==null?void 0:te.result),Ee=kx(ce,{type:"array"}),pe=Ee.Sheets[Ee.SheetNames[0]],fe=Hl.sheet_to_json(pe);if(fe.length===0){R({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const xe=fe.map(Te=>{const be=Te.Nombre||Te.nombre,je=Te.Correo||Te.correo||Te.Email||Te.email,qe=Te.Curso||Te.curso,st=Te.RUT||Te.rut;return!be||!je||!qe?Promise.resolve({email:je||"Sin email",error:"Datos incompletos"}):ie({nombreCompleto:String(be).trim(),email:String(je).trim(),profile:Vt.ESTUDIANTE,curso:jE(String(qe).trim()),rut:st?String(st).trim():"",password:"recoleta"}).catch(mt=>({email:je,error:mt.message}))}),de=await Promise.all(xe),oe=de.filter(Te=>!Te.error).length,Le=de.filter(Te=>Te.error);let et=`Carga completada. ${oe} estudiantes agregados.`;Le.length>0&&(et+=` ${Le.length} fallaron.`,console.error("Errores en carga masiva:",Le)),R({message:et,isError:Le.length>0}),await L()}catch(ce){R({message:`Error: ${ce.message}`,isError:!0})}},P.readAsArrayBuffer(z),q.target.value=""},G=async q=>{var Y;const z=(Y=q.target.files)==null?void 0:Y[0];if(!z)return;j({message:"Procesando archivo...",isError:!1});const W=rg(),ie=U0(W,"createUser"),P=new FileReader;P.onload=async Z=>{var te;try{const ce=new Uint8Array((te=Z.target)==null?void 0:te.result),Ee=kx(ce,{type:"array"}),pe=Ee.Sheets[Ee.SheetNames[0]],fe=Hl.sheet_to_json(pe);if(fe.length===0){j({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const xe=fe.map(Te=>{const be=Te.Nombre||Te.nombre,je=Te.Correo||Te.correo||Te.Email||Te.email,qe=Te.Perfil||Te.perfil||Te.Profile||Te.profile,st=Te.RUT||Te.rut;return!be||!je||!qe?Promise.resolve({email:je||"Sin email",error:"Datos incompletos"}):ie({nombreCompleto:String(be).trim(),email:String(je).trim(),profile:qe,rut:st?String(st).trim():"",password:"recoleta"}).catch(mt=>({email:je,error:mt.message}))}),de=await Promise.all(xe),oe=de.filter(Te=>!Te.error).length,Le=de.filter(Te=>Te.error);let et=`Carga completada. ${oe} usuarios agregados.`;Le.length>0&&(et+=` ${Le.length} fallaron.`,console.error("Errores en carga masiva:",Le)),j({message:et,isError:Le.length>0}),await L()}catch(ce){j({message:`Error: ${ce.message}`,isError:!0})}},P.readAsArrayBuffer(z),q.target.value=""},se="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",J=ee.useMemo(()=>Array.from(new Set(t.filter(q=>q.profile===Vt.ESTUDIANTE&&q.curso).map(q=>q.curso))).sort(),[t]),re=ee.useMemo(()=>t.filter(q=>(d===""||q.nombreCompleto.toLowerCase().includes(d.toLowerCase())||q.email.toLowerCase().includes(d.toLowerCase()))&&(m===""||q.profile===m)&&(b===""||q.curso===b)),[t,d,m,b]);return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administración"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>a("Usuarios"),className:`${s==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestión de Usuarios"}),c.jsx("button",{onClick:()=>a("Monitor de Uso"),className:`${s==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),s==="Usuarios"&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Estudiantes (Excel)"}),c.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:O,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),c.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Curso"}),k&&c.jsx("p",{className:`text-sm mt-2 ${k.isError?"text-red-600":"text-green-600"}`,children:k.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Personal (Excel)"}),c.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:G,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),c.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Perfil"}),M&&c.jsx("p",{className:`text-sm mt-2 ${M.isError?"text-red-600":"text-green-600"}`,children:M.message})]})]})]}),c.jsxs("div",{id:"formulario-usuario",className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:l?"Editando usuario":"Agregar nuevo usuario"}),c.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),c.jsx("input",{type:"text",name:"nombreCompleto",value:i.nombreCompleto,onChange:C,className:se,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),c.jsx("input",{type:"email",name:"email",value:i.email,onChange:C,className:se,required:!0,readOnly:!!l})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contraseña"}),c.jsx("input",{type:"password",name:"password",value:i.password||"",onChange:C,placeholder:l?"Dejar en blanco para no cambiar":"Contraseña temporal",className:se})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),c.jsx("input",{type:"text",name:"rut",value:i.rut||"",onChange:C,placeholder:"12.345.678-9",className:se})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),c.jsx("select",{name:"profile",value:i.profile,onChange:C,className:se,required:!0,children:FD.map(q=>c.jsx("option",{value:q,children:q},q))})]}),i.profile===Vt.ESTUDIANTE&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:i.curso,onChange:C,className:se,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un curso"}),la.map(q=>c.jsx("option",{value:q,children:q},q))]})]})]}),i.profile===Vt.PROFESORADO&&c.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-l-4 border-blue-400",children:[c.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[c.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📚"}),"Asignación de Cursos"]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:la.map(q=>{var z;return c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-blue-50 dark:hover:bg-blue-800/20",children:[c.jsx("input",{type:"checkbox",checked:((z=i.cursos)==null?void 0:z.includes(q))||!1,onChange:()=>E("cursos",q),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),c.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:q})]},q)})})]}),i.profile===Vt.PROFESORADO&&c.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border-l-4 border-green-400",children:[c.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[c.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📖"}),"Asignación de Asignaturas"]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:il.map(q=>{var z;return c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-green-50 dark:hover:bg-green-800/20",children:[c.jsx("input",{type:"checkbox",checked:((z=i.asignaturas)==null?void 0:z.includes(q))||!1,onChange:()=>E("asignaturas",q),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),c.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:q})]},q)})})]}),_&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:_}),c.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4 flex-wrap",children:[l&&c.jsx("button",{type:"button",onClick:B,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"button",onClick:async()=>{try{console.log("🔧 Agregando custom claim...");const q=rg(),W=await U0(q,"addCustomClaim")({email:"fernando.sagredo@industrialderecoleta.cl",profile:"SUBDIRECCION"});console.log("✅ Custom claim agregado:",W),N("✅ Custom claim agregado exitosamente")}catch(q){console.error("❌ Error al agregar custom claim:",q),N(`Error: ${q.message}`)}},className:"bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 text-sm",children:"🔧 Claim"}),c.jsx("button",{type:"button",onClick:async()=>{var q,z,W,ie,P;try{const{auth:Y}=await C2(async()=>{const{auth:ce}=await Promise.resolve().then(()=>pY);return{auth:ce}},void 0);console.log("🔍 Usuario actual:",(q=Y.currentUser)==null?void 0:q.email);const Z=await((z=Y.currentUser)==null?void 0:z.getIdToken(!0));console.log("🔑 Token refreshed:",!!Z);const te=await((W=Y.currentUser)==null?void 0:W.getIdTokenResult());console.log("📋 Claims completos:",te==null?void 0:te.claims),console.log("👤 Profile claim:",(ie=te==null?void 0:te.claims)==null?void 0:ie.profile),((P=te==null?void 0:te.claims)==null?void 0:P.profile)==="SUBDIRECCION"?N("✅ Custom claim FUNCIONANDO - Ya puedes crear/editar usuarios"):N(`❌ Custom claim faltante. Claims: ${JSON.stringify(te==null?void 0:te.claims)}`)}catch(Y){console.error("❌ Error verificando token:",Y),N(`Error verificando token: ${Y.message}`)}},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 text-sm",children:"🔍 Token"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[c.jsx("div",{children:c.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:d,onChange:q=>h(q.target.value),className:se})}),c.jsx("div",{children:c.jsxs("select",{value:m,onChange:q=>g(q.target.value),className:se,children:[c.jsx("option",{value:"",children:"Todos los perfiles"}),FD.map(q=>c.jsx("option",{value:q,children:q},q))]})}),c.jsx("div",{children:c.jsxs("select",{value:b,onChange:q=>y(q.target.value),className:se,children:[c.jsx("option",{value:"",children:"Todos los cursos"}),J.map(q=>c.jsx("option",{value:q,children:q},q))]})})]}),r?c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-slate-500",children:"Cargando usuarios..."})}):c.jsxs("div",{className:"overflow-x-auto",children:[c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Nombre"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Email"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Perfil"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Curso/Asignaciones"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:re.map(q=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:q.nombreCompleto}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:q.email}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:c.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${q.profile===Vt.ESTUDIANTE?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":q.profile===Vt.PROFESORADO?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:q.profile})}),c.jsxs("td",{className:"px-4 py-4 text-sm text-slate-500 dark:text-slate-300",children:[q.profile===Vt.ESTUDIANTE&&c.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-700 rounded dark:bg-slate-600 dark:text-slate-300",children:q.curso||"Sin curso"}),q.profile===Vt.PROFESORADO&&c.jsxs("div",{className:"space-y-1",children:[q.cursos&&q.cursos.length>0&&c.jsxs("div",{children:[c.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Cursos:"}),c.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[q.cursos.slice(0,3).map(z=>c.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded dark:bg-blue-900 dark:text-blue-300",children:z},z)),q.cursos.length>3&&c.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",q.cursos.length-3]})]})]}),q.asignaturas&&q.asignaturas.length>0&&c.jsxs("div",{children:[c.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Asignaturas:"}),c.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[q.asignaturas.slice(0,2).map(z=>c.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-green-100 text-green-700 rounded dark:bg-green-900 dark:text-green-300",children:z},z)),q.asignaturas.length>2&&c.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",q.asignaturas.length-2]})]})]}),(!q.cursos||q.cursos.length===0)&&(!q.asignaturas||q.asignaturas.length===0)&&c.jsx("span",{className:"text-xs text-slate-400 italic",children:"Sin asignaciones"})]}),q.profile!==Vt.ESTUDIANTE&&q.profile!==Vt.PROFESORADO&&c.jsx("span",{className:"text-xs text-slate-400",children:"-"})]}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[c.jsx("button",{onClick:()=>D(q),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),c.jsx("button",{onClick:()=>I(q.email),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},q.email))})]}),re.length===0&&c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:t.length===0?"No hay usuarios registrados.":"No se encontraron usuarios con los filtros aplicados."})})]})]})]}),s==="Monitor de Uso"&&c.jsx(Pve,{})]})},Vm="seguimiento_dual_records",iye=t=>{const e=t.data(),r=n=>n&&typeof n.toDate=="function"?n.toDate().toISOString().split("T")[0]:n;return{id:t.id,...e,fechaDesvinculacion:r(e.fechaDesvinculacion),fecha1raSupervision1erSemestre:r(e.fecha1raSupervision1erSemestre),fecha2daSupervision1erSemestre:r(e.fecha2daSupervision1erSemestre),fecha1raSupervision2doSemestre:r(e.fecha1raSupervision2doSemestre),fecha2daSupervision2doSemestre:r(e.fecha2daSupervision2doSemestre),fechaSupervisionExcepcional:r(e.fechaSupervisionExcepcional)}},oye=t=>{const e=er(Ft(Tt,Vm),gn("nombreEstudiante","asc"));return Tr(e,n=>{const s=n.docs.map(a=>iye(a));t(s)},n=>{console.error("Error al suscribirse a los registros de seguimiento:",n),t([])})},V2=t=>{const e={...t};return["fechaDesvinculacion","fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaSupervisionExcepcional"].forEach(n=>{e[n]&&typeof e[n]=="string"&&(e[n]=cr.fromDate(new Date(e[n]+"T00:00:00")))}),e},lye=async t=>{try{const e=V2(t);return(await Cs(Ft(Tt,Vm),e)).id}catch(e){throw console.error("Error al crear el registro:",e),new Error("No se pudo crear el registro de seguimiento.")}},DD=async(t,e)=>{try{const r=yr(Tt,Vm,t),n=V2(e);await Wi(r,n,{merge:!0})}catch(r){throw console.error("Error al actualizar el registro:",r),new Error("No se pudo actualizar el registro.")}},cye=async t=>{try{const e=yr(Tt,Vm,t);await mi(e)}catch(e){throw console.error("Error al eliminar el registro:",e),new Error("No se pudo eliminar el registro.")}},uye=async t=>{const e=E4(Tt),r=Ft(Tt,Vm);let n=0,s=0;for(const a of t){const i=er(r,Fn("rutEstudiante","==",a.rutEstudiante)),o=await ca(i);if(o.empty){const l=yr(r);e.set(l,V2(a)),s++}else{const l=o.docs[0].id,u=yr(Tt,Vm,l);e.set(u,V2(a),{merge:!0}),n++}}return await e.commit(),{updated:n,created:s}},Aye={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},dye=({record:t,onSave:e,onClose:r})=>{const[n,s]=ee.useState(t),a="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",i=l=>{const{name:u,value:d,type:h,checked:m}=l.target;s(g=>({...g,[u]:h==="checkbox"?m:d}))},o=()=>{e(n)};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:r,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:l=>l.stopPropagation(),children:[c.jsxs("div",{className:"p-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisión"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:t.nombreEstudiante}),c.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f1s1-${t.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),c.jsx("input",{id:`f1s1-${t.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:n.fecha1raSupervision1erSemestre||"",onChange:i,className:a})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!n.realizada1raSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f2s1-${t.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),c.jsx("input",{id:`f2s1-${t.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:n.fecha2daSupervision1erSemestre||"",onChange:i,className:a})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!n.realizada2daSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]})]})]}),c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f1s2-${t.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),c.jsx("input",{id:`f1s2-${t.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:n.fecha1raSupervision2doSemestre||"",onChange:i,className:a})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!n.realizada1raSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f2s2-${t.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),c.jsx("input",{id:`f2s2-${t.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:n.fecha2daSupervision2doSemestre||"",onChange:i,className:a})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!n.realizada2daSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]})]})]}),c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisión Excepcional"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`fex-${t.id}`,className:"text-sm font-medium",children:"Fecha Supervisión"}),c.jsx("input",{id:`fex-${t.id}`,type:"date",name:"fechaSupervisionExcepcional",value:n.fechaSupervisionExcepcional||"",onChange:i,className:a})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!n.realizadaSupervisionExcepcional,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]})]})]}),c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Guía (Empresa)"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:`mg-nombre-${t.id}`,className:"text-sm font-medium",children:"Nombre Maestro Guía"}),c.jsx("input",{id:`mg-nombre-${t.id}`,type:"text",name:"nombreMaestroGuia",value:n.nombreMaestroGuia||"",onChange:i,className:a+" mt-1"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:`mg-contacto-${t.id}`,className:"text-sm font-medium",children:"Contacto (Email/Teléfono)"}),c.jsx("input",{id:`mg-contacto-${t.id}`,type:"text",name:"contactoMaestroGuia",value:n.contactoMaestroGuia||"",onChange:i,className:a+" mt-1"})]})]})]})]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:r,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),c.jsx("button",{type:"button",onClick:o,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},fye=()=>{const[t,e]=ee.useState([]),[r,n]=ee.useState(!0),s=ee.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:xh[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:lE[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[a,i]=ee.useState(s),[o,l]=ee.useState(null),[u,d]=ee.useState(""),[h,m]=ee.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[g,b]=ee.useState(null),[y,_]=ee.useState(null),[N,k]=ee.useState(!1),[R,M]=ee.useState(null);ee.useEffect(()=>{n(!0);const q=oye(z=>{e(z),n(!1)});return()=>q()},[]);const j=ee.useCallback(q=>{const{name:z,value:W}=q.target;i(ie=>({...ie,[z]:W}))},[]),L=ee.useCallback(q=>{const{name:z,value:W}=q.target;m(ie=>({...ie,[z]:W}))},[]),C=ee.useCallback(()=>{i(s),l(null),b(null)},[s]),E=async q=>{q.preventDefault(),b(null);const W=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(ie=>{var P;return!((P=a[ie])!=null&&P.trim())});if(W){b(`El campo '${W}' es obligatorio.`);return}try{o?await DD(o,a):await lye(a),C()}catch(ie){console.error(ie),b("No se pudo guardar el registro.")}},B=ee.useCallback(q=>{window.scrollTo({top:0,behavior:"smooth"}),l(q.id),i(q)},[]),Q=async q=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await cye(q)}catch(z){console.error(z),b("No se pudo eliminar el registro.")}},D=q=>{M(q),k(!0)},I=()=>{M(null),k(!1)},O=async q=>{try{await DD(q.id,q),I()}catch(z){console.error(z),alert("No se pudieron guardar los cambios de supervisión.")}},G=()=>{const q=["Nombre","RUT","Curso 2025","Profesor Tutor","1° Visita 1° Semestre","Realizada 1° Visita S1","2° Visita 1° Semestre","Realizada 2° Visita S1","Visita Emergencia 1° Semestre","3° Visita","Realizada 3° Visita S2","4° Visita","Realizada 4° Visita S2","Empresa","RUT-Empresa","Dirección","Comuna","Estado","Fecha de Desvinculación","Motivo Desvinculación","Maestro Guía","Correo maestro guía"],z=Hl.aoa_to_sheet([q]),W=Hl.book_new();Hl.book_append_sheet(W,z,"Plantilla"),_T(W,"Plantilla_Seguimiento_Dual.xlsx")},se=q=>{var ie;const z=(ie=q.target.files)==null?void 0:ie[0];if(!z)return;_({message:"Procesando archivo...",isError:!1});const W=new FileReader;W.onload=async P=>{var Y;try{const Z=new Uint8Array((Y=P.target)==null?void 0:Y.result),te=kx(Z,{type:"array",cellDates:!0}),ce=te.SheetNames[0],Ee=te.Sheets[ce],pe=Hl.sheet_to_json(Ee);if(pe.length===0)throw new Error("El archivo está vacío.");const fe={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1° visita 1° semestre":"fecha1raSupervision1erSemestre","realizada 1° visita s1":"realizada1raSupervision1erSemestre","2° visita 1° semestre":"fecha2daSupervision1erSemestre","realizada 2° visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1° semestre":"fechaSupervisionExcepcional","3° visita":"fecha1raSupervision2doSemestre","realizada 3° visita s2":"realizada1raSupervision2doSemestre","4° visita":"fecha2daSupervision2doSemestre","realizada 4° visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",dirección:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculación":"fechaDesvinculacion","motivo desvinculación":"motivoDesvinculacion","maestro guía":"nombreMaestroGuia","correo maestro guía":"contactoMaestroGuia"},xe=Object.keys(pe[0]).map(et=>et.trim().toLowerCase()),oe=["nombre","rut","curso 2025","empresa","estado"].find(et=>!xe.includes(et));if(oe)throw new Error(`Falta la columna requerida: '${oe}'`);const Le=pe.map(et=>{const Te={};for(const be in et){const je=fe[be.trim().toLowerCase()];if(je){let qe=et[be];qe instanceof Date&&(qe=qe.toISOString().split("T")[0]),typeof qe=="boolean"||typeof qe=="string"&&["true","false","verdadero","falso"].includes(qe.toLowerCase())?Te[je]=["true","verdadero"].includes(String(qe).toLowerCase()):qe!=null&&(Te[je]=qe)}}return!Te.nombreEstudiante||!Te.rutEstudiante?null:Te}).filter(et=>et!==null);if(Le.length>0){const{updated:et,created:Te}=await uye(Le);_({message:`Carga exitosa. ${Te} registros creados, ${et} actualizados.`,isError:!1})}else _({message:"No se encontraron nuevos registros válidos para agregar.",isError:!1})}catch(Z){console.error(Z),_({message:`Error al procesar el archivo: ${Z.message}`,isError:!0})}},W.readAsArrayBuffer(z)},J="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",re=ee.useMemo(()=>t.filter(q=>(u===""||q.nombreEstudiante.toLowerCase().includes(u.toLowerCase())||q.nombreEmpresa.toLowerCase().includes(u.toLowerCase())||q.rutEstudiante.includes(u))&&(h.curso===""||q.curso===h.curso)&&(h.empresa===""||q.nombreEmpresa===h.empresa)&&(h.estado===""||q.estado===h.estado)&&(h.comuna===""||q.comuna===h.comuna)&&(h.profesor===""||q.profesorTutorEmpresa===h.profesor)).sort((q,z)=>q.nombreEstudiante.localeCompare(z.nombreEstudiante)),[t,u,h]);return ee.useMemo(()=>{const q=new Set,z=new Set;return t.forEach(W=>{W.nombreEmpresa&&q.add(W.nombreEmpresa),W.comuna&&z.add(W.comuna)}),{empresas:Array.from(q).sort(),comunas:Array.from(z).sort()}},[t]),r?c.jsx("div",{className:"text-center py-10",children:"Cargando registros..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seguimiento de Práctica Dual"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:o?"Editando registro existente.":"Registre un nuevo estudiante en práctica."}),c.jsxs("form",{onSubmit:E,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),c.jsx("input",{type:"text",name:"nombreEstudiante",value:a.nombreEstudiante,onChange:j,className:J,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),c.jsx("input",{type:"text",name:"rutEstudiante",value:a.rutEstudiante,onChange:j,className:J,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsx("select",{name:"curso",value:a.curso,onChange:j,className:J,required:!0,children:xh.map(q=>c.jsx("option",{value:q,children:q},q))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),c.jsxs("select",{name:"profesorTutorEmpresa",value:a.profesorTutorEmpresa,onChange:j,className:J,children:[c.jsx("option",{value:"",children:"Seleccione un profesor"}),W_.map(q=>c.jsx("option",{value:q,children:q},q))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),c.jsx("input",{type:"text",name:"nombreEmpresa",value:a.nombreEmpresa,onChange:j,className:J,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),c.jsx("input",{type:"text",name:"rutEmpresa",value:a.rutEmpresa,onChange:j,className:J})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Dirección Empresa"}),c.jsx("input",{type:"text",name:"direccionEmpresa",value:a.direccionEmpresa,onChange:j,className:J})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),c.jsx("input",{type:"text",name:"comuna",value:a.comuna,onChange:j,className:J})]}),c.jsxs("div",{className:"lg:col-span-4",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),c.jsx("select",{name:"estado",value:a.estado,onChange:j,className:J,children:lE.map(q=>c.jsx("option",{value:q,children:q},q))})]})]}),a.estado==="Desvinculado"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculación"}),c.jsx("input",{type:"date",name:"fechaDesvinculacion",value:a.fechaDesvinculacion||"",onChange:j,className:`${J} border-red-300`})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculación"}),c.jsx("input",{type:"text",name:"motivoDesvinculacion",value:a.motivoDesvinculacion||"",onChange:j,className:`${J} border-red-300`})]})]}),g&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:g}),c.jsxs("div",{className:"flex justify-end items-center gap-4",children:[o&&c.jsx("button",{type:"button",onClick:C,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:o?"Actualizar":"Agregar"})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[c.jsx("button",{onClick:G,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),c.jsx("input",{type:"file",onChange:se,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),y&&c.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${y.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:y.message})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Registros de Estudiantes"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[c.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:u,onChange:q=>d(q.target.value),className:`${J} md:col-span-2 lg:col-span-1`}),c.jsxs("select",{name:"curso",value:h.curso,onChange:L,className:J,children:[c.jsx("option",{value:"",children:"Todos los Cursos"}),xh.map(q=>c.jsx("option",{children:q},q))]}),c.jsxs("select",{name:"estado",value:h.estado,onChange:L,className:J,children:[c.jsx("option",{value:"",children:"Todos los Estados"}),lE.map(q=>c.jsx("option",{children:q},q))]}),c.jsxs("select",{name:"profesor",value:h.profesor,onChange:L,className:J,children:[c.jsx("option",{value:"",children:"Todos los Profesores"}),W_.map(q=>c.jsx("option",{children:q},q))]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:re.map(q=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[c.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:q.nombreEstudiante}),c.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:q.curso})]}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:q.nombreEmpresa}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:q.profesorTutorEmpresa}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${Aye[q.estado]}`,children:q.estado})}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[c.jsx("button",{onClick:()=>D(q),className:"text-blue-600 hover:underline",children:"Supervisión"}),c.jsx("button",{onClick:()=>B(q),className:"text-yellow-600 hover:underline",children:"Editar"}),c.jsx("button",{onClick:()=>Q(q.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},q.id))})]})})]}),N&&R&&c.jsx(dye,{record:R,onClose:I,onSave:O})]})},WO="actividades_remotas",hye="respuestas_actividades",mye="usuarios",kT=t=>{var r,n,s,a,i,o;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion,plazoEntrega:((a=(s=e.plazoEntrega)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString().split("T")[0])||e.plazoEntrega,fechaCompletado:((o=(i=e.fechaCompletado)==null?void 0:i.toDate)==null?void 0:o.call(i).toISOString())||e.fechaCompletado}},pye=t=>{const e=er(Ft(Tt,WO),gn("fechaCreacion","desc"));return Tr(e,n=>{const s=n.docs.map(a=>kT(a));t(s)},n=>{console.error("Error al suscribirse a las actividades:",n),t([])})},gye=async t=>{try{const e={...t,fechaCreacion:cr.fromDate(new Date),plazoEntrega:cr.fromDate(new Date(t.plazoEntrega+"T00:00:00"))};return(await Cs(Ft(Tt,WO),e)).id}catch(e){throw console.error("Error al crear la actividad:",e),new Error("No se pudo crear la actividad.")}},xye=t=>{const e=er(Ft(Tt,hye));return Tr(e,n=>{const s=n.docs.map(a=>kT(a));t(s)},n=>{console.error("Error al suscribirse a las respuestas:",n),t([])})},vye=t=>{const e=er(Ft(Tt,mye));return Tr(e,n=>{const s=n.docs.map(a=>kT(a));t(s)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),t([])})},OE={Quiz:[5,10,15],"Términos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de Lectura":[1,2,3]},yye=t=>new Promise((e,r)=>{const n=new FileReader;n.readAsDataURL(t),n.onload=()=>e(n.result),n.onerror=s=>r(s)}),wye=()=>{const[t,e]=ee.useState([]),[r,n]=ee.useState([]),[s,a]=ee.useState([]),[i,o]=ee.useState(null),[l,u]=ee.useState(!1),[d,h]=ee.useState(!1),[m,g]=ee.useState(!0),[b,y]=ee.useState(null),[_,N]=ee.useState(""),[k,R]=ee.useState(null),[M,j]=ee.useState([]),L={asignatura:il[0],nivel:x2[0],contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},[C,E]=ee.useState(L);ee.useEffect(()=>{g(!0);const pe=pye(e),fe=xye(n),xe=vye(de=>{a(de),g(!1)});return()=>{pe(),fe(),xe()}},[]);const B=pe=>{E(fe=>({...fe,[pe.target.name]:pe.target.value}))},Q=pe=>{E(fe=>({...fe,recursos:{...fe.recursos,[pe.target.name]:pe.target.value}}))},D=pe=>{pe.target.files&&j(Array.from(pe.target.files))},I=pe=>{E(fe=>{const xe=fe.tipos.includes(pe)?fe.tipos.filter(oe=>oe!==pe):[...fe.tipos,pe],de={...fe.cantidadPreguntas};return xe.includes(pe)?de[pe]||(de[pe]=OE[pe][0]):delete de[pe],{...fe,tipos:xe,cantidadPreguntas:de}})},O=(pe,fe)=>{E(xe=>({...xe,cantidadPreguntas:{...xe.cantidadPreguntas,[pe]:fe}}))},G=pe=>{E(fe=>{var de;const xe=(de=fe.cursosDestino)!=null&&de.includes(pe)?fe.cursosDestino.filter(oe=>oe!==pe):[...fe.cursosDestino||[],pe];return{...fe,cursosDestino:xe}})},se=pe=>{E(fe=>{var de;const xe=(de=fe.estudiantesDestino)!=null&&de.includes(pe)?fe.estudiantesDestino.filter(oe=>oe!==pe):[...fe.estudiantesDestino||[],pe];return{...fe,estudiantesDestino:xe}})},J=()=>{const{tipos:pe,contenido:fe,asignatura:xe,nivel:de,cantidadPreguntas:oe}=C;let Le=`Eres un experto diseñador de actividades pedagógicas. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${fe}"
Asignatura: ${xe}
Nivel: ${de}

Genera los siguientes elementos:
- **introduccion**: Una breve introducción motivadora para el estudiante sobre el tema: "${fe}".
- **actividades**: Un objeto que contiene las actividades. Cada actividad es una propiedad con su nombre como clave:
`;return pe.forEach(et=>{const Te=oe[et]||OE[et][0];switch(et){case"Quiz":Le+=`- **Quiz**: Un array de ${Te} objetos. Cada objeto debe tener: "pregunta" (string), "opciones" (array de 4 strings) y "respuestaCorrecta" (string).
`;break;case"Comprensión de Lectura":Le+=`- **Comprensión de Lectura**: Un array de ${Te} objetos. Cada objeto debe tener "texto" (string de 150-200 palabras) y "preguntas" (un array de 4 objetos, cada uno con "pregunta", "opciones" y "respuestaCorrecta").
`;break;case"Términos Pareados":Le+=`- **Términos Pareados**: Un array de ${Te} objetos. Cada objeto debe tener "concepto" (string) y "definicion" (string).
`;break;case"Desarrollo":Le+=`- **Desarrollo**: Un array de ${Te} objetos. Cada objeto debe tener una clave "pregunta" (string con la pregunta) y una clave "rubrica" (string con la rúbrica de evaluación).
`;break}}),Le};function re(pe,fe){if(pe==="Desarrollo"){if(Array.isArray(fe))return fe.map(xe=>{if(typeof xe=="string"){const de=xe.match(/^(.*?)(?:R[úu]brica:|RUBRICA:|Rubrica:)(.*)$/is);return de?{pregunta:de[1].trim(),rubrica:de[2].trim()}:{pregunta:xe.trim(),rubrica:""}}return xe&&typeof xe=="object"?{pregunta:xe.pregunta||xe.Pregunta||xe.texto||"",rubrica:xe.rubrica||xe.Rubrica||xe.rúbrica||xe.Rúbrica||""}:{pregunta:String(xe),rubrica:""}});if(typeof fe=="string")return fe.split(/\n\n|\n- |\d+\. /).map(xe=>{const de=xe.match(/^(.*?)(?:R[úu]brica:|RUBRICA:|Rubrica:)(.*)$/is);return de?{pregunta:de[1].trim(),rubrica:de[2].trim()}:{pregunta:xe.trim(),rubrica:""}}).filter(xe=>xe.pregunta)}if(pe==="Términos Pareados"){if(Array.isArray(fe))return fe.map((xe,de)=>{if(typeof xe=="string"){const oe=xe.match(/^(.+?)[\s:-–]+(.+)$/);return oe?{id:de,concepto:oe[1].trim(),definicion:oe[2].trim()}:{id:de,concepto:xe.trim(),definicion:""}}return xe&&typeof xe=="object"?{id:de,concepto:xe.concepto||xe.termino||"",definicion:xe.definicion||xe.significado||""}:{id:de,concepto:String(xe),definicion:""}});if(typeof fe=="object"&&fe!==null)return Object.entries(fe).map(([xe,de],oe)=>({id:oe,concepto:xe,definicion:de}));if(typeof fe=="string")return fe.split(/\n|;/).map((xe,de)=>{const oe=xe.match(/^(.+?)[\s:-–]+(.+)$/);return oe?{id:de,concepto:oe[1].trim(),definicion:oe[2].trim()}:{id:de,concepto:xe.trim(),definicion:""}}).filter(xe=>xe.concepto)}if(pe==="Comprensión de Lectura"){if(fe&&typeof fe=="object"&&Array.isArray(fe.preguntas))return{texto:fe.texto||"",preguntas:fe.preguntas.map(xe=>({pregunta:xe.pregunta||xe.Pregunta||"",opciones:xe.opciones||xe.Opciones||[],respuestaCorrecta:xe.respuestaCorrecta||xe.respuesta||""}))};if(Array.isArray(fe)){const xe=fe.find(de=>de&&typeof de=="object"&&"texto"in de&&"preguntas"in de);return xe?{texto:xe.texto||"",preguntas:(xe.preguntas||[]).map(de=>({pregunta:de.pregunta||de.Pregunta||"",opciones:de.opciones||de.Opciones||[],respuestaCorrecta:de.respuestaCorrecta||de.respuesta||""}))}:{texto:fe.map(de=>typeof de=="string"?de:JSON.stringify(de)).join(`
`),preguntas:[]}}if(typeof fe=="string"){const[xe,de]=fe.split(/Preguntas:|\nPreguntas:/i);let oe=[];return de&&(oe=de.split(/\n- |\n\d+\. /).filter(Boolean).map(Le=>{const et=Le.split(/Opciones:|\nOpciones:/i),Te=et[0].trim();let be=[],je="";et[1]&&(be=et[1].split(/;|\n|,/).map(st=>st.trim()).filter(Boolean));const qe=Le.match(/Respuesta\s*correcta\s*:?\s*(.*)/i);return qe&&(je=qe[1].trim()),{pregunta:Te,opciones:be,respuestaCorrecta:je}})),{texto:(xe==null?void 0:xe.trim())||fe,preguntas:oe}}}return fe}const q=async pe=>{var fe;if(pe.preventDefault(),!C.contenido.trim()||C.tipos.length===0){y("Contenido y al menos un tipo de actividad son obligatorios.");return}h(!0),y(null);try{const xe=await Promise.all(M.map(async lt=>({nombre:lt.name,url:await yye(lt)}))),de="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",Le=new PA(de).getGenerativeModel({model:"gemini-1.5-flash-latest"}),et=J(),qe=(await(await(await Le.generateContent(et)).response).text()).replace(/^```json\s*|```\s*$/g,""),st=JSON.parse(qe),mt={};for(const lt of C.tipos)mt[lt]=re(lt,(fe=st.actividades)==null?void 0:fe[lt]);const Et={id:"",fechaCreacion:new Date().toISOString(),...C,recursos:{...C.recursos,archivos:xe},introduccion:st.introduccion,generatedContent:mt};R(Et)}catch(xe){console.error("Error al generar actividad con IA",xe),y("Error al generar la actividad. Por favor, revise el contenido e inténtelo de nuevo. Detalle: "+xe.message)}finally{h(!1)}},z=async()=>{if(k)try{await gye(k),E(L),j([]),u(!1),R(null)}catch(pe){console.error("Error al guardar la actividad:",pe),y("No se pudo guardar la actividad en la base de datos.")}},W=ee.useMemo(()=>{var xe,de;if(!i||!s)return[];const pe=s.filter(oe=>{var Le;return oe.profile===Vt.ESTUDIANTE&&((Le=i.cursosDestino)==null?void 0:Le.includes(oe.curso||""))}).map(oe=>oe.nombreCompleto),fe=i.estudiantesDestino||[];if(!((xe=i.cursosDestino)!=null&&xe.length)&&!((de=i.estudiantesDestino)!=null&&de.length)){const oe=i.nivel.charAt(0);return s.filter(Le=>{var et;return Le.profile===Vt.ESTUDIANTE&&((et=Le.curso)==null?void 0:et.startsWith(oe))}).map(Le=>Le.nombreCompleto).sort()}return Array.from(new Set([...pe,...fe])).sort()},[i,s]),ie=ee.useMemo(()=>r.filter(pe=>pe.actividadId===(i==null?void 0:i.id)),[r,i]),P=ee.useMemo(()=>s.filter(pe=>pe.profile===Vt.ESTUDIANTE).sort((pe,fe)=>pe.nombreCompleto.localeCompare(fe.nombreCompleto)),[s]),Y=ee.useMemo(()=>_.trim()?P.filter(pe=>pe.nombreCompleto.toLowerCase().includes(_.toLowerCase())):P,[P,_]),Z=()=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:[i==null?void 0:i.asignatura," - ",i==null?void 0:i.tipos.join(", ")]}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Nivel: ",i==null?void 0:i.nivel," | Plazo: ",i==null?void 0:i.plazoEntrega]})]}),c.jsx("button",{onClick:()=>o(null),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver al listado"})]}),c.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Resultados de Estudiantes"}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:W.map(pe=>{const fe=ie.find(xe=>xe.estudianteId===pe);return c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:pe}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:fe?c.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):c.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:fe?`${fe.puntaje}/${fe.puntajeMaximo}`:"-"}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:fe?new Date(fe.fechaCompletado).toLocaleString("es-CL"):"-"})]},pe)})})]})})]})]}),te=()=>{var pe,fe;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Actividad Remota"}),c.jsx("button",{onClick:()=>u(!1),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver al listado"})]}),c.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generará una actividad interactiva para sus estudiantes."}),c.jsxs("form",{onSubmit:q,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),c.jsx("select",{name:"asignatura",value:C.asignatura,onChange:B,className:"w-full border-slate-300 rounded-md shadow-sm",children:il.map(xe=>c.jsx("option",{value:xe,children:xe},xe))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Nivel"}),c.jsx("select",{name:"nivel",value:C.nivel,onChange:B,className:"w-full border-slate-300 rounded-md shadow-sm",children:x2.map(xe=>c.jsx("option",{value:xe,children:xe},xe))})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Recursos de Aprendizaje (Opcional)"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones de estudio"}),c.jsx("textarea",{name:"instrucciones",value:(pe=C.recursos)==null?void 0:pe.instrucciones,onChange:Q,placeholder:"Ej: Lee el siguiente texto y luego responde...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces (videos, documentos, etc.)"}),c.jsx("textarea",{name:"enlaces",value:(fe=C.recursos)==null?void 0:fe.enlaces,onChange:Q,placeholder:"Pega un enlace por línea...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos (PDF, imágenes, etc.)"}),c.jsx("input",{type:"file",multiple:!0,onChange:D,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Seleccione cursos o estudiantes. Si no selecciona ninguno, la actividad será visible para todo el nivel."}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Cursos"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:la.map(xe=>{var de;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(de=C.cursosDestino)==null?void 0:de.includes(xe),onChange:()=>G(xe),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700",children:xe})]},xe)})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Estudiantes"}),c.jsx("input",{type:"text",placeholder:"Buscar...",value:_,onChange:xe=>N(xe.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:Y.map(xe=>{var de;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(de=C.estudiantesDestino)==null?void 0:de.includes(xe.nombreCompleto),onChange:()=>se(xe.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:xe.nombreCompleto,children:xe.nombreCompleto})]},xe.id)})})]})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),c.jsx("div",{className:"space-y-3",children:jY.map(xe=>c.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:C.tipos.includes(xe),onChange:()=>I(xe),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:xe})]}),C.tipos.includes(xe)&&c.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[c.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),OE[xe].map(de=>c.jsx("button",{type:"button",onClick:()=>O(xe,de),className:`px-3 py-1 rounded-full font-semibold text-xs ${C.cantidadPreguntas[xe]===de?"bg-amber-500 text-white":"bg-slate-200"}`,children:de},de))]})]},xe))})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{name:"contenido",value:C.contenido,onChange:B,required:!0,rows:4,placeholder:"Ingrese los temas, conceptos clave o el texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),c.jsx("input",{type:"date",name:"plazoEntrega",value:C.plazoEntrega,onChange:B,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]})]}),b&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:b}),c.jsx("div",{className:"pt-4 text-right",children:c.jsx("button",{type:"submit",disabled:d,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:d?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Generar y Previsualizar"})})]})]})},ce=()=>{var pe;return c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización de la Actividad"}),c.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo está correcto, confirma para asignar la actividad."}),c.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[c.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[c.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introducción para el Estudiante"}),c.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:k==null?void 0:k.introduccion})]}),(k==null?void 0:k.recursos)&&(k.recursos.instrucciones||k.recursos.enlaces||((pe=k.recursos.archivos)==null?void 0:pe.length))&&c.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[c.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),c.jsxs("div",{className:"space-y-3",children:[k.recursos.instrucciones&&c.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:k.recursos.instrucciones}),k.recursos.enlaces&&c.jsx("div",{children:k.recursos.enlaces.split(`
`).map((fe,xe)=>fe.trim()&&c.jsx("a",{href:fe,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:fe},xe))}),k.recursos.archivos&&k.recursos.archivos.length>0&&c.jsx("ul",{className:"list-disc list-inside",children:k.recursos.archivos.map(fe=>c.jsx("li",{className:"text-slate-700",children:fe.nombre},fe.nombre))})]})]}),k==null?void 0:k.tipos.map(fe=>{const xe=k.generatedContent[fe];return xe?c.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:fe}),c.jsxs("div",{className:"space-y-4 text-sm",children:[fe==="Quiz"&&Array.isArray(xe)&&xe.map((de,oe)=>c.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[c.jsxs("p",{className:"font-semibold",children:[oe+1,". ",de.pregunta]}),c.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:de.opciones.map((Le,et)=>c.jsxs("li",{children:[c.jsxs("strong",{children:[String.fromCharCode(65+et),"."]})," ",Le]},et))}),c.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",de.respuestaCorrecta]})]},oe)),fe==="Comprensión de Lectura"&&xe&&typeof xe=="object"&&Array.isArray(xe.preguntas)&&c.jsxs("div",{children:[c.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-3 rounded-md mb-4",children:xe.texto}),xe.preguntas.map((de,oe)=>c.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[c.jsxs("p",{className:"font-semibold",children:[oe+1,". ",de.pregunta]}),c.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:de.opciones.map((Le,et)=>c.jsxs("li",{children:[c.jsxs("strong",{children:[String.fromCharCode(65+et),"."]})," ",Le]},et))}),c.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",de.respuestaCorrecta]})]},oe))]}),fe==="Términos Pareados"&&Array.isArray(xe)&&c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border border-slate-200",children:[c.jsx("thead",{className:"bg-slate-100",children:c.jsxs("tr",{children:[c.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Concepto"}),c.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Definición"})]})}),c.jsx("tbody",{children:xe.map(de=>c.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-slate-50",children:[c.jsx("td",{className:"p-2 align-top font-semibold text-slate-800",children:de.concepto}),c.jsx("td",{className:"p-2 align-top text-slate-700",children:de.definicion})]},de.id))})]})}),fe==="Desarrollo"&&Array.isArray(xe)&&xe.map((de,oe)=>c.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[c.jsxs("p",{className:"font-semibold",children:[oe+1,". ",de.pregunta]}),c.jsxs("p",{className:"text-sm text-slate-600 mt-2 p-2 bg-slate-100 rounded-md",children:[c.jsx("strong",{className:"font-semibold",children:"Rúbrica:"})," ",de.rubrica]})]},oe)),(fe==="Quiz"||fe==="Términos Pareados"||fe==="Desarrollo")&&!Array.isArray(xe)&&c.jsxs("div",{className:"text-red-600 text-sm p-3 bg-red-50 border border-red-200 rounded-md",children:['El contenido generado para "',c.jsx("strong",{children:fe}),'" no tiene el formato de array esperado. La IA pudo haber devuelto una respuesta en un formato no válido.']}),fe==="Comprensión de Lectura"&&(!xe||typeof xe!="object"||!Array.isArray(xe.preguntas))&&c.jsxs("div",{className:"text-red-600 text-sm p-3 bg-red-50 border border-red-200 rounded-md",children:['El contenido generado para "',c.jsx("strong",{children:"Comprensión de Lectura"}),'" no tiene el formato de objeto con preguntas esperado.']})]})]},fe):null})]}),c.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>R(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),c.jsx("button",{onClick:z,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700",children:"Confirmar y Asignar"})]})]})},Ee=()=>c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),c.jsx("button",{onClick:()=>u(!0),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nueva"})]}),c.jsx("div",{className:"space-y-4",children:t.length>0?t.map(pe=>{var de,oe;const fe=[];(de=pe.cursosDestino)!=null&&de.length&&fe.push(`Cursos: ${pe.cursosDestino.join(", ")}`),(oe=pe.estudiantesDestino)!=null&&oe.length&&fe.push(`Estudiantes: ${pe.estudiantesDestino.length}`);const xe=fe.length?fe.join(" | "):`Todo ${pe.nivel}`;return c.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800",children:[pe.asignatura," - ",pe.tipos.join(", ")]}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",xe," | Creado: ",new Date(pe.fechaCreacion).toLocaleDateString("es-CL")]})]}),c.jsx("button",{onClick:()=>o(pe),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},pe.id)}):c.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Haga clic en "Crear Nueva" para comenzar.'})})]});return m?c.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):c.jsx("div",{className:"animate-fade-in",children:k?ce():i?Z():l?te():Ee()})},bye="actividades_remotas",YO="respuestas_actividades",XO=t=>{var r,n,s,a,i,o;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion,plazoEntrega:((a=(s=e.plazoEntrega)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString().split("T")[0])||e.plazoEntrega,fechaCompletado:((o=(i=e.fechaCompletado)==null?void 0:i.toDate)==null?void 0:o.call(i).toISOString())||e.fechaCompletado}},Cye=(t,e)=>{if(!t.curso)return e([]),()=>{};const r=t.curso.charAt(0),n=er(Ft(Tt,bye),gn("fechaCreacion","desc"));return Tr(n,s=>{const i=s.docs.map(o=>XO(o)).filter(o=>{var h,m,g,b;const l=!((h=o.cursosDestino)!=null&&h.length)&&!((m=o.estudiantesDestino)!=null&&m.length),u=((g=o.cursosDestino)==null?void 0:g.includes(t.curso))??!1,d=((b=o.estudiantesDestino)==null?void 0:b.includes(t.nombreCompleto))??!1;return u||d?!0:l?o.nivel.charAt(0)===r:!1});e(i)},s=>{console.error("Error al suscribirse a actividades disponibles:",s),e([])})},Eye=(t,e)=>{const r=er(Ft(Tt,YO),Fn("estudianteId","==",t));return Tr(r,n=>{const s=n.docs.map(a=>XO(a));e(s)},n=>{console.error("Error al suscribirse a las respuestas del estudiante:",n),e([])})},_ye=async t=>{try{const e={...t,fechaCompletado:cr.fromDate(new Date)};return(await Cs(Ft(Tt,YO),e)).id}catch(e){throw console.error("Error al guardar la respuesta:",e),new Error("No se pudo guardar la respuesta.")}},Sye=t=>[...t].sort(()=>Math.random()-.5),Tye=(t,e)=>{if(e===0)return"1.0";const n=e*.6;let s;return t>=n?s=4+(t-n)*3/(e-n):s=1+t*3/(n||1),s=Math.max(1,Math.min(7,s)),s.toFixed(1)},RD=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Nye=({actividad:t,onComplete:e,currentUser:r})=>{var k,R,M,j;const[n,s]=ee.useState({}),[a,i]=ee.useState(!1),[o,l]=ee.useState(!1),[u,d]=ee.useState(!1),[h,m]=ee.useState({}),g=`progress-${r.id}-${t.id}`;ee.useEffect(()=>{const L={};t.tipos.forEach(C=>{if(C==="Términos Pareados"){const E=t.generatedContent[C];E&&(L[C]=Sye(E.map(B=>B.definicion)))}}),m(L);try{const C=localStorage.getItem(g);C&&s(JSON.parse(C))}catch(C){console.error("Could not load saved progress",C)}},[t,g]);const b=(L,C)=>{s(E=>({...E,[L]:C}))},y=()=>{l(!0),d(!1),setTimeout(()=>{try{localStorage.setItem(g,JSON.stringify(n)),d(!0),setTimeout(()=>d(!1),2e3)}catch(L){console.error("Could not save progress",L),alert("Error al guardar el progreso.")}finally{l(!1)}},500)},_=async()=>{i(!0);let L=0,C=0;const E=[],B={},Q="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";let D=null;D=new PA(Q);for(const O of t.tipos){const G=t.generatedContent[O],se=n[O];if(O==="Quiz"||O==="Comprensión de Lectura"){const J=O==="Quiz"?G:G.preguntas,re=se||{};let q=0,z=0;J.forEach((W,ie)=>{z+=1,re[ie]===W.respuestaCorrecta&&(q+=1)}),L+=q,C+=z,E.push(`${O}: ${q}/${z} correctas.`),B[O]={puntaje:q,puntajeMaximo:z}}else if(O==="Términos Pareados"){const J=G,re=se||{};let q=0,z=0;J.forEach(W=>{z+=2,re[W.id]===W.definicion&&(q+=2)}),L+=q,C+=z,E.push(`${O}: ${q/2}/${J.length} correctas.`),B[O]={puntaje:q,puntajeMaximo:z}}else if(O==="Desarrollo"){const J=G,re=se||{};let q=0,z=0;for(let W=0;W<J.length;W++){const ie=J[W];if(z+=3,!D){E.push(`${O} #${W+1}: No se pudo evaluar automáticamente.`);continue}try{$l("Autoaprendizaje - Evaluar Desarrollo");const P=D.getGenerativeModel({model:"gemini-1.5-flash-latest"}),Y=`Evalúa la siguiente respuesta de un estudiante a la pregunta de desarrollo, basándote en la rúbrica proporcionada.
                        Pregunta: "${ie.pregunta}".
                        Rúbrica: "${ie.rubrica}".
                        Respuesta del estudiante: "${re[W]||""}".
                        
                        Tu respuesta DEBE ser un objeto JSON con dos claves:
                        1. "puntaje": un número entero de 0 a 3.
                        2. "feedback": una frase corta y constructiva para el estudiante.`,Ee=(await(await P.generateContent(Y)).response).text().replace(/^```json\s*|```\s*$/g,""),pe=JSON.parse(Ee),fe=Math.max(0,Math.min(3,parseInt(pe.puntaje,10)||0));q+=fe,E.push(`${O} #${W+1}: Puntaje ${fe}/3. (${pe.feedback})`)}catch(P){console.error("Error evaluating development question:",P),E.push(`${O} #${W+1}: No se pudo evaluar automáticamente.`)}}L+=q,C+=z,B[O]={puntaje:q,puntajeMaximo:z}}}let I;if(D){const O=`
                Un estudiante ha completado una actividad sobre "${t.contenido}".
                Su puntaje total fue ${L} de ${C}.
                Detalle por sección: ${JSON.stringify(B)}
                Respuestas de desarrollo: ${JSON.stringify(n.Desarrollo||{})}
                
                Genera una retroalimentación detallada y constructiva en español. La respuesta DEBE ser un objeto JSON con la siguiente estructura:
                {
                  "resumenGeneral": "Un párrafo breve y motivador sobre el desempeño general.",
                  "areasDeFortaleza": ["Un array de 2 o 3 strings destacando lo que hizo bien."],
                  "areasDeMejora": ["Un array de 2 o 3 strings con áreas a mejorar."],
                  "planDeMejora": [{ "paso": "Repasar conceptos clave", "detalle": "Una sugerencia concreta."}],
                  "feedbackPorSeccion": { "Quiz": "Feedback específico para esta sección." }
                }
            `;try{$l("Autoaprendizaje - Retroalimentación Detallada");const q=(await(await D.getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(O)).response).text().replace(/^```json\s*|```\s*$/g,"");I=JSON.parse(q)}catch(G){console.error("Error generating detailed feedback:",G)}}e({respuestas:n,puntaje:L,puntajeMaximo:C,retroalimentacion:`¡Buen trabajo! Tu puntaje total es ${L} de ${C}.`,calificacion:Tye(L,C),puntajesPorSeccion:B},I),localStorage.removeItem(g),i(!1)},N=t.recursos&&(t.recursos.instrucciones||t.recursos.enlaces||((k=t.recursos.archivos)==null?void 0:k.length));return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"p-4 bg-sky-50 dark:bg-sky-900/30 border-l-4 border-sky-400 rounded-r-lg",children:[c.jsx("h2",{className:"text-xl font-bold text-sky-800 dark:text-sky-200 mb-2",children:"¡Hola!"}),c.jsx("p",{className:"text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:t.introduccion})]}),N&&c.jsxs("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-900/30 border-l-4 border-indigo-400 rounded-r-lg",children:[c.jsx("h2",{className:"text-xl font-bold text-indigo-800 dark:text-indigo-200 mb-3",children:"Material de Estudio"}),c.jsxs("div",{className:"space-y-4",children:[((R=t.recursos)==null?void 0:R.instrucciones)&&c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Instrucciones:"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-wrap",children:t.recursos.instrucciones})]}),((M=t.recursos)==null?void 0:M.enlaces)&&c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Enlaces:"}),t.recursos.enlaces.split(`
`).map((L,C)=>L.trim()&&c.jsx("a",{href:L,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-500 hover:underline truncate",children:L},C))]}),((j=t.recursos)==null?void 0:j.archivos)&&t.recursos.archivos.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Archivos:"}),c.jsx("ul",{className:"list-disc list-inside",children:t.recursos.archivos.map((L,C)=>c.jsx("li",{children:c.jsx("a",{href:L.url,download:L.nombre,className:"text-blue-500 hover:underline",children:L.nombre})},C))})]})]})]}),t.tipos.map(L=>{const C=t.generatedContent[L];if(!C)return null;switch(L){case"Quiz":case"Comprensión de Lectura":{const E=L==="Quiz",B=C,Q=E?B:B.preguntas;return c.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:L}),!E&&c.jsx("div",{className:"mb-4 whitespace-pre-wrap bg-slate-50 dark:bg-slate-700/50 p-3 rounded text-slate-700 dark:text-slate-300",children:B.texto}),c.jsx("div",{className:"space-y-6",children:Q.map((D,I)=>c.jsxs("div",{children:[c.jsxs("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:[I+1,". ",D.pregunta]}),c.jsx("div",{className:"mt-2 space-y-2",children:D.opciones.map((O,G)=>{var se;return c.jsxs("label",{className:"flex items-center gap-3 p-3 rounded hover:bg-slate-100 dark:hover:bg-slate-700 cursor-pointer text-slate-600 dark:text-slate-300",children:[c.jsx("input",{type:"radio",name:`q-${L}-${I}-${t.id}`,value:O,checked:((se=n[L])==null?void 0:se[I])===O,onChange:()=>b(L,{...n[L]||{},[I]:O}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400"}),c.jsx("span",{children:O})]},G)})})]},`${L}-${I}`))})]},L)}case"Términos Pareados":{const E=C,B=h[L]||[];return c.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:L}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"font-semibold text-center text-slate-600 dark:text-slate-400",children:"Concepto"}),E.map(Q=>c.jsx("div",{className:"p-3 bg-slate-100 dark:bg-slate-700 rounded h-14 flex items-center justify-center text-center font-medium text-slate-700 dark:text-slate-300",children:Q.concepto},Q.id))]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"font-semibold text-center text-slate-600 dark:text-slate-400",children:"Definición"}),E.map(Q=>{var D;return c.jsx("div",{className:"h-14 flex items-center",children:c.jsxs("select",{value:((D=n[L])==null?void 0:D[Q.id])||"",onChange:I=>b(L,{...n[L]||{},[Q.id]:I.target.value}),className:"w-full h-full border-slate-300 rounded-md shadow-sm text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-300",children:[c.jsx("option",{value:"",children:"Seleccionar definición..."}),B.map((I,O)=>c.jsx("option",{value:I,children:I},O))]})},Q.id)})]})]})]},L)}case"Desarrollo":{const E=C;return c.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:L}),E.map((B,Q)=>{var D;return c.jsxs("div",{className:"mb-6",children:[c.jsx("p",{className:"font-semibold mb-2 text-slate-700 dark:text-slate-300",children:B.pregunta}),c.jsxs("p",{className:"text-sm italic text-slate-500 dark:text-slate-400 mb-4",children:[c.jsx("strong",{children:"Rúbrica:"})," ",B.rubrica]}),c.jsx("textarea",{value:((D=n[L])==null?void 0:D[Q])||"",onChange:I=>b(L,{...n[L]||{},[Q]:I.target.value}),rows:8,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-300"})]},Q)})]},L)}default:return null}}),c.jsxs("div",{className:"text-right mt-8 flex justify-end gap-4",children:[c.jsx("button",{onClick:y,disabled:a||o||u,className:"bg-sky-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-sky-700 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center justify-center min-w-[200px] transition-colors duration-200",children:o?c.jsxs(c.Fragment,{children:[c.jsx(RD,{})," Guardando..."]}):u?"✓ Guardado":"Guardar Progreso"}),c.jsx("button",{onClick:_,disabled:a||o,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:a?c.jsxs(c.Fragment,{children:[c.jsx(RD,{})," Evaluando..."]}):"Entregar Actividad"})]})]})},Bye=({currentUser:t})=>{const[e,r]=ee.useState([]),[n,s]=ee.useState([]),[a,i]=ee.useState(null),[o,l]=ee.useState("list"),[u,d]=ee.useState(null),[h,m]=ee.useState(null),[g,b]=ee.useState(!0);ee.useEffect(()=>{b(!0);const k=Cye(t,r),R=Eye(t.nombreCompleto,M=>{s(M),b(!1)});return()=>{k(),R()}},[t]);const y=k=>{m(k)},_=()=>{h&&(i(h),l("activity"),m(null))},N=ee.useCallback(async(k,R)=>{if(!a)return;const M={actividadId:a.id,estudianteId:t.nombreCompleto,fechaCompletado:new Date().toISOString(),...k,retroalimentacionDetallada:R};try{const j=await _ye(M);d({...M,id:j}),l("result")}catch(j){console.error("Error saving submission:",j),alert("No se pudo guardar tu respuesta. El error fue: "+j.message)}},[a,t.nombreCompleto]);if(g)return c.jsx("div",{className:"text-center py-10",children:"Cargando actividades..."});if(o==="activity"&&a)return c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("h1",{className:"text-3xl font-bold text-slate-800",children:[a.asignatura,": ",a.tipos.join(", ")]}),c.jsxs("p",{className:"text-slate-500 mb-6",children:["Plazo: ",a.plazoEntrega]}),c.jsx(Nye,{actividad:a,onComplete:N,currentUser:t})]});if(o==="result"&&u){const k=u.retroalimentacionDetallada,R=u.puntajesPorSeccion||{},M=(j,L)=>{const C=L>0?j/L:0;return C<.4?"bg-red-100 text-red-800":C<.7?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"};return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Retroalimentación de la Actividad"}),k?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Retroalimentación General"}),c.jsx("p",{className:"text-slate-600 mb-6",children:k.resumenGeneral}),c.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-4 rounded-lg mb-6",children:[c.jsx("span",{className:"text-lg font-bold",children:"Puntaje Total:"}),c.jsxs("span",{className:`px-4 py-2 text-xl font-bold rounded-full ${M(u.puntaje,u.puntajeMaximo)}`,children:[u.puntaje," / ",u.puntajeMaximo]})]}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-green-600 mb-2",children:"✓ Áreas de Fortaleza"}),c.jsx("ul",{className:"list-disc list-inside space-y-1 text-slate-600",children:k.areasDeFortaleza.map((j,L)=>c.jsx("li",{children:j},L))})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-red-600 mb-2",children:"✗ Áreas de Mejora"}),c.jsx("ul",{className:"list-disc list-inside space-y-1 text-slate-600",children:k.areasDeMejora.map((j,L)=>c.jsx("li",{children:j},L))})]})]})]}),c.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Object.entries(R).map(([j,{puntaje:L,puntajeMaximo:C}])=>{var E;return c.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("h3",{className:"text-xl font-bold",children:j}),c.jsxs("span",{className:`px-3 py-1 text-sm font-bold rounded-full ${M(L,C)}`,children:[L," / ",C]})]}),c.jsx("p",{className:"text-slate-500 text-sm",children:(E=k.feedbackPorSeccion)==null?void 0:E[j]})]},j)})}),c.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Plan de Mejora Sugerido"}),c.jsx("div",{className:"space-y-4",children:k.planDeMejora.map((j,L)=>c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"bg-blue-500 text-white rounded-full h-8 w-8 flex-shrink-0 flex items-center justify-center font-bold mt-1",children:"✓"}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold",children:j.paso}),c.jsx("p",{className:"text-slate-600 text-sm",children:j.detalle})]})]},L))})]})]}):c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md text-center",children:[c.jsx("h2",{className:"text-3xl font-bold text-green-600 mb-4",children:"¡Actividad Completada!"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 max-w-sm mx-auto my-8",children:[c.jsxs("div",{className:"p-4 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-sm text-slate-500",children:"Puntaje"}),c.jsxs("p",{className:"text-2xl font-bold",children:[u.puntaje," / ",u.puntajeMaximo]})]}),c.jsxs("div",{className:"p-4 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-sm text-slate-500",children:"Calificación"}),c.jsx("p",{className:"text-2xl font-bold",children:u.calificacion})]})]}),c.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg text-left",children:[c.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:"Retroalimentación"}),c.jsx("p",{className:"text-blue-700 whitespace-pre-wrap",children:u.retroalimentacion})]})]}),c.jsx("button",{onClick:()=>{l("list"),d(null)},className:"w-full mt-4 bg-slate-800 text-white font-bold py-3 px-6 rounded-lg hover:bg-slate-700",children:"Volver a Actividades"})]})}return c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[h&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full animate-fade-in-up",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Confirmar inicio de actividad"}),c.jsxs("p",{className:"mt-4 text-slate-600",children:["¿Estás seguro de que deseas comenzar esta actividad? ",c.jsx("strong",{children:"Tendrás solo una oportunidad para responder."})]}),c.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Sin embargo, puedes guardar tu progreso antes de enviarlo. Una vez enviado, no habrá una segunda oportunidad."}),c.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[c.jsx("button",{onClick:()=>m(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cancelar"}),c.jsx("button",{onClick:_,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Sí, comenzar"})]})]})}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Auto-aprendizaje"}),c.jsx("p",{className:"text-slate-500 mb-6",children:"Completa las actividades remotas asignadas por tus profesores."}),c.jsx("div",{className:"space-y-4",children:e.length>0?e.map(k=>{const R=n.find(j=>j.actividadId===k.id),M=!!R;return c.jsx("div",{className:`p-4 border rounded-lg ${M?"bg-green-50":"bg-slate-50"}`,children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800",children:[k.asignatura," - ",k.tipos.join(", ")]}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",k.plazoEntrega]})]}),M?c.jsxs("div",{className:"text-right",children:[c.jsx("button",{onClick:()=>{d(R),l("result")},className:"font-semibold text-blue-700 hover:underline",children:"Ver Resultados"}),c.jsxs("p",{className:"text-sm text-slate-600",children:["Puntaje: ",R.puntaje,"/",R.puntajeMaximo]})]}):c.jsx("button",{onClick:()=>y(k),className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Comenzar"})]})},k.id)}):c.jsx("p",{className:"text-center text-slate-500 py-10",children:"No hay actividades disponibles en este momento."})})]})},ob="estudiantes_inclusion",kye="usuarios",JO=t=>{const e=t.data();return{id:t.id,...e}},Iye=t=>{const e=er(Ft(Tt,ob));return Tr(e,n=>{const s=n.docs.map(a=>JO(a));t(s)},n=>{console.error("Error al suscribirse a estudiantes de inclusión:",n),t([])})},Fye=t=>{const e=er(Ft(Tt,kye));return Tr(e,n=>{const s=n.docs.map(a=>JO(a));t(s)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),t([])})},Dye=async t=>{try{return(await Cs(Ft(Tt,ob),t)).id}catch(e){throw console.error("Error al agregar estudiante a inclusión:",e),new Error("No se pudo agregar al estudiante.")}},Rye=async(t,e)=>{try{const{id:r,...n}=e,s=yr(Tt,ob,t);await Wi(s,n)}catch(r){throw console.error("Error al actualizar estudiante de inclusión:",r),new Error("No se pudo actualizar la ficha del estudiante.")}},Lye=async t=>{try{const e=yr(Tt,ob,t);await mi(e)}catch(e){throw console.error("Error al eliminar estudiante de inclusión:",e),new Error("No se pudo eliminar al estudiante.")}},Uye=({student:t,onClose:e,onSave:r,profesores:n})=>{const[s,a]=ee.useState("intervenciones"),[i,o]=ee.useState(t);ee.useEffect(()=>{o(t)},[t]);const[l,u]=ee.useState(null),d={responsable:"",accion:"",observaciones:""},[h,m]=ee.useState(d),[g,b]=ee.useState({trimestre:"T1",meta:""}),[y,_]=ee.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[N,k]=ee.useState(null),[R,M]=ee.useState(!1),j={motivo:"",acuerdos:"",asistentes:""},[L,C]=ee.useState(j),E=()=>{r(i),e()},B=()=>{if(!h.responsable||!h.accion){alert("Responsable y Acción son campos obligatorios.");return}let de;l?de=(i.intervenciones||[]).map(Le=>Le.id===l.id?{...Le,...h}:Le):de=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...h},...i.intervenciones||[]];const oe=de.sort((Le,et)=>new Date(et.fecha).getTime()-new Date(Le.fecha).getTime());o(Le=>({...Le,intervenciones:oe})),m(d),u(null)},Q=de=>{u(de),m({responsable:de.responsable,accion:de.accion,observaciones:de.observaciones})},D=de=>{window.confirm("¿Eliminar esta intervención?")&&o(oe=>({...oe,intervenciones:(oe.intervenciones||[]).filter(Le=>Le.id!==de)}))},I=de=>{const{name:oe,value:Le}=de.target;o(et=>({...et,[oe]:Le,fechaActualizacionApoyos:new Date().toISOString()}))},O=()=>{if(!g.meta.trim())return;const de={...g,id:crypto.randomUUID(),cumplida:!1};o(oe=>({...oe,metasProgreso:[...oe.metasProgreso||[],de]})),b({trimestre:"T1",meta:""})},G=de=>{o(oe=>({...oe,metasProgreso:(oe.metasProgreso||[]).map(Le=>Le.id===de?{...Le,cumplida:!Le.cumplida}:Le)}))},se=de=>{o(oe=>({...oe,metasProgreso:(oe.metasProgreso||[]).filter(Le=>Le.id!==de)}))},J=ee.useMemo(()=>{const de=i.metasProgreso||[];if(de.length===0)return{percent:0,color:"bg-slate-300"};const oe=de.filter(Te=>Te.cumplida).length,Le=Math.round(oe/de.length*100),et=Le<40?"bg-red-500":Le<75?"bg-yellow-500":"bg-green-500";return{percent:Le,color:et}},[i.metasProgreso]),re=ee.useMemo(()=>{if(!i.fechaActualizacionApoyos)return!0;const de=new Date(i.fechaActualizacionApoyos),oe=new Date;return oe.setMonth(oe.getMonth()-3),de<oe},[i.fechaActualizacionApoyos]),q=()=>{if(!y.titulo.trim()||!y.fecha)return;const de={...y,id:crypto.randomUUID(),resuelta:!1};o(oe=>({...oe,alertas:[...oe.alertas||[],de].sort((Le,et)=>new Date(Le.fecha).getTime()-new Date(et.fecha).getTime())})),_({titulo:"",fecha:new Date().toISOString().split("T")[0]})},z=de=>{o(oe=>({...oe,alertas:(oe.alertas||[]).map(Le=>Le.id===de?{...Le,resuelta:!Le.resuelta}:Le)}))},W=de=>{o(oe=>({...oe,alertas:(oe.alertas||[]).filter(Le=>Le.id!==de)}))},ie=de=>{de.target.files&&de.target.files[0]&&k(de.target.files[0])},P=()=>{if(!N)return;M(!0);const de=new FileReader;de.readAsDataURL(N),de.onloadend=()=>{const oe={id:crypto.randomUUID(),nombre:N.name,url:de.result,fechaSubida:new Date().toISOString()};o(Le=>({...Le,archivos:[oe,...Le.archivos||[]]})),k(null),M(!1)},de.onerror=()=>{alert("Error al leer el archivo."),M(!1)}},Y=de=>{window.confirm("¿Eliminar este archivo?")&&o(oe=>({...oe,archivos:(oe.archivos||[]).filter(Le=>Le.id!==de)}))},Z=()=>{if(!L.motivo.trim()||!L.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const de={...L,id:crypto.randomUUID(),fecha:new Date().toISOString()};o(oe=>({...oe,reuniones:[de,...oe.reuniones||[]].sort((Le,et)=>new Date(et.fecha).getTime()-new Date(Le.fecha).getTime())})),C(j)},te=de=>{window.confirm("¿Eliminar este registro de reunión?")&&o(oe=>({...oe,reuniones:(oe.reuniones||[]).filter(Le=>Le.id!==de)}))},ce=()=>{var st,mt,Et;const de=new or("p","mm","a4"),oe=20,Le=de.internal.pageSize.getWidth(),et=de.internal.pageSize.getHeight();let Te=oe;const be=lt=>{lt.setFontSize(10),lt.setTextColor(100),lt.text("Ficha de Seguimiento - Módulo Inclusión",oe,15)};be(de),de.setFontSize(18),de.setFont("helvetica","bold"),de.setTextColor(40),de.text(i.nombre,oe,Te+10),Te+=15,de.setFontSize(11),de.setFont("helvetica","normal"),de.setTextColor(80),de.text(`Curso: ${i.curso}`,oe,Te),de.text(`Dificultad: ${i.dificultad}`,oe,Te+6),Te+=15;const je=lt=>{Te+lt>et-oe&&(de.addPage(),be(de),Te=oe)},qe=lt=>{je(15),de.setFontSize(14),de.setFont("helvetica","bold"),de.text(lt,oe,Te),Te+=10};if((st=i.intervenciones)!=null&&st.length&&(qe("Historial de Intervenciones"),al(de,{startY:Te,head:[["Fecha","Responsable","Acción","Observaciones"]],body:i.intervenciones.map(lt=>[new Date(lt.fecha).toLocaleDateString("es-CL"),lt.responsable,lt.accion,lt.observaciones||""]),theme:"grid",didDrawPage:lt=>be(de)}),Te=de.lastAutoTable.finalY+10),i.adaptacionesCurriculares||i.apoyosRecibidos){je(30),qe("Seguimiento y Apoyos"),de.setFontSize(11),de.setFont("helvetica","normal");const lt=`Adaptaciones: ${i.adaptacionesCurriculares||"No registradas."}
Apoyos: ${i.apoyosRecibidos||"No registrados."}`,kt=de.splitTextToSize(lt,Le-oe*2);de.text(kt,oe,Te),Te+=kt.length*5+10}(mt=i.metasProgreso)!=null&&mt.length&&(je(30),qe("Metas de Progreso"),al(de,{startY:Te,head:[["Trimestre","Meta","Estado"]],body:i.metasProgreso.map(lt=>[lt.trimestre,lt.meta,lt.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:lt=>be(de)}),Te=de.lastAutoTable.finalY+10),(Et=i.reuniones)!=null&&Et.length&&(qe("Reuniones con Apoderados"),al(de,{startY:Te,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:i.reuniones.map(lt=>[new Date(lt.fecha).toLocaleDateString("es-CL"),lt.motivo,lt.acuerdos,lt.asistentes]),theme:"grid",didDrawPage:lt=>be(de)})),de.save(`Ficha_Inclusion_${i.nombre.replace(/\s/g,"_")}.pdf`)},Ee=()=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:l?"Editando Intervención":"Registrar Nueva Intervención"}),c.jsxs("select",{value:h.responsable,onChange:de=>m(oe=>({...oe,responsable:de.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione Responsable..."}),n.map(de=>c.jsx("option",{value:de,children:de},de))]}),c.jsx("textarea",{value:h.accion,onChange:de=>m(oe=>({...oe,accion:de.target.value})),placeholder:"Acción realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{value:h.observaciones,onChange:de=>m(oe=>({...oe,observaciones:de.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsxs("div",{className:"flex justify-end gap-2",children:[l&&c.jsx("button",{onClick:()=>{u(null),m(d)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md",children:"Cancelar Edición"}),c.jsx("button",{onClick:B,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md",children:l?"Actualizar":"Guardar"})]})]}),c.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:(i.intervenciones||[]).map(de=>c.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:de.accion}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:de.observaciones}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(de.fecha).toLocaleString("es-CL")," - ",de.responsable]})]}),c.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[c.jsx("button",{onClick:()=>Q(de),className:"text-blue-500",children:"✏️"}),c.jsx("button",{onClick:()=>D(de.id),className:"text-red-500",children:"🗑️"})]})]})},de.id))})]}),pe=()=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),re&&c.jsx("span",{title:"Información no actualizada en los últimos 3 meses",className:"text-yellow-500 text-xl",children:"⚠️"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),c.jsx("textarea",{name:"adaptacionesCurriculares",value:i.adaptacionesCurriculares||"",onChange:I,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),c.jsx("textarea",{name:"apoyosRecibidos",value:i.apoyosRecibidos||"",onChange:I,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",J.percent,"%"]}),c.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:c.jsx("div",{className:`${J.color} h-4 rounded-full transition-all duration-500`,style:{width:`${J.percent}%`}})})]}),c.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[c.jsxs("select",{value:g.trimestre,onChange:de=>b(oe=>({...oe,trimestre:de.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"T1",children:"T1"}),c.jsx("option",{value:"T2",children:"T2"}),c.jsx("option",{value:"T3",children:"T3"})]}),c.jsx("input",{value:g.meta,onChange:de=>b(oe=>({...oe,meta:de.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:O,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm",children:"Agregar"})]}),c.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:(i.metasProgreso||[]).map(de=>c.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[c.jsx("input",{type:"checkbox",checked:de.cumplida,onChange:()=>G(de.id),className:"h-5 w-5 rounded text-amber-500"}),c.jsxs("span",{className:`flex-grow text-sm ${de.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[c.jsxs("strong",{children:[de.trimestre,":"]})," ",de.meta]}),c.jsx("button",{onClick:()=>se(de.id),className:"text-red-500 text-sm",children:"🗑️"})]},de.id))})]})]}),fe=()=>c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),c.jsx("input",{type:"text",value:y.titulo,onChange:de=>_(oe=>({...oe,titulo:de.target.value})),placeholder:"Título de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),c.jsx("input",{type:"date",value:y.fecha,onChange:de=>_(oe=>({...oe,fecha:de.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),c.jsx("button",{onClick:q,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md",children:"Agendar"})]}),c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(i.alertas||[]).map(de=>c.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[c.jsx("input",{type:"checkbox",checked:de.resuelta,onChange:()=>z(de.id),className:"h-5 w-5 rounded text-amber-500"}),c.jsxs("span",{className:`flex-grow text-sm ${de.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[de.titulo," (",new Date(de.fecha+"T12:00:00").toLocaleDateString(),")"]}),c.jsx("button",{onClick:()=>W(de.id),className:"text-red-500 text-sm",children:"🗑️"})]},de.id))})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),c.jsx("input",{type:"file",onChange:ie,className:"w-full text-sm"}),c.jsx("button",{onClick:P,disabled:!N||R,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400",children:R?"Subiendo...":"Subir"})]}),c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(i.archivos||[]).map(de=>c.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[c.jsx("a",{href:de.url,download:de.nombre,className:"text-sm text-blue-600 hover:underline truncate",children:de.nombre}),c.jsx("button",{onClick:()=>Y(de.id),className:"text-red-500 text-sm ml-2",children:"🗑️"})]},de.id))})]})]}),xe=()=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunión"}),c.jsx("input",{value:L.motivo,onChange:de=>C(oe=>({...oe,motivo:de.target.value})),placeholder:"Motivo de la reunión...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{value:L.acuerdos,onChange:de=>C(oe=>({...oe,acuerdos:de.target.value})),placeholder:"Acuerdos...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{value:L.asistentes,onChange:de=>C(oe=>({...oe,asistentes:de.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("div",{className:"text-right",children:c.jsx("button",{onClick:Z,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md",children:"Guardar Reunión"})})]}),c.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:(i.reuniones||[]).map(de=>c.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:de.motivo}),c.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:[c.jsx("strong",{children:"Acuerdos:"})," ",de.acuerdos]}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(de.fecha).toLocaleString("es-CL")," - Asistentes: ",de.asistentes]})]}),c.jsx("button",{onClick:()=>te(de.id),className:"text-red-500 flex-shrink-0 ml-4",children:"🗑️"})]})},de.id))})]});return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:de=>de.stopPropagation(),children:[c.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",t.nombre]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[t.curso," - ",t.dificultad]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:ce,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200",children:"Exportar PDF"}),c.jsx("button",{onClick:e,className:"text-2xl text-slate-500 hover:text-slate-800",children:"×"})]})]}),c.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:c.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(de=>c.jsx("button",{onClick:()=>a(de),className:`${s===de?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize`,children:de==="alertas"?"Alertas y Archivos":de==="seguimiento"?"Seguimiento y Metas":de},de))})}),c.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[s==="intervenciones"&&Ee(),s==="seguimiento"&&pe(),s==="reuniones"&&xe(),s==="alertas"&&fe()]}),c.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[c.jsx("button",{onClick:e,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cerrar"}),c.jsx("button",{onClick:E,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios y Cerrar"})]})]})})},Mye=({student:t,onClose:e,onConfirm:r})=>{const[n,s]=ee.useState(v2[0]),a=()=>{r(t,n)};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:i=>i.stopPropagation(),children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",t.nombreCompleto," al PIE"]}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),c.jsx("select",{id:"dificultad",value:n,onChange:i=>s(i.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:v2.map(i=>c.jsx("option",{value:i,children:i},i))})]}),c.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cancelar"}),c.jsx("button",{type:"button",onClick:a,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Confirmar e Ingresar"})]})]})})},LD=({currentUser:t})=>{const[e,r]=ee.useState([]),[n,s]=ee.useState([]),[a,i]=ee.useState(!0),[o,l]=ee.useState(null),[u,d]=ee.useState(null),[h,m]=ee.useState(""),[g,b]=ee.useState(""),[y,_]=ee.useState("");ee.useEffect(()=>{i(!0);const E=Iye(Q=>{r(Q),i(!1)}),B=Fye(Q=>{s(Q)});return()=>{E(),B()}},[]);const N=async(E,B)=>{if(e.some(D=>D.nombre===E.nombreCompleto)){alert("Este estudiante ya está en el programa de inclusión.");return}const Q={nombre:E.nombreCompleto,curso:E.curso||"",dificultad:B,intervenciones:[],metasProgreso:[],alertas:[],archivos:[],reuniones:[],adaptacionesCurriculares:"",apoyosRecibidos:"",fechaActualizacionApoyos:new Date().toISOString()};try{await Dye(Q)}catch(D){console.error("Error al agregar estudiante:",D),alert("Hubo un error al agregar al estudiante al programa.")}},k=async E=>{try{await Rye(E.id,E)}catch(B){console.error("Error al actualizar la ficha:",B),alert("Hubo un error al guardar los cambios en la ficha.")}},R=async E=>{if(window.confirm("¿Está seguro de que desea eliminar a este estudiante del programa de inclusión? Esta acción es irreversible."))try{await Lye(E),(o==null?void 0:o.id)===E&&l(null)}catch(B){console.error("Error al eliminar estudiante:",B),alert("Hubo un error al eliminar al estudiante.")}},M=E=>{if(L.length===0){alert("No hay datos para exportar.");return}const B=L.map(Q=>{var D;return{Nombre:Q.nombre,Curso:Q.curso,Dificultad:Q.dificultad,"N° Intervenciones":((D=Q.intervenciones)==null?void 0:D.length)||0,"Alertas Pendientes":(Q.alertas||[]).filter(I=>!I.resuelta).length}});if(E==="xlsx"){const Q=Hl.json_to_sheet(B),D=Hl.book_new();Hl.book_append_sheet(D,Q,"Estudiantes_Inclusion"),_T(D,"Estudiantes_Inclusion.xlsx")}else{const Q=new or;Q.text("Listado de Estudiantes - Programa de Inclusión",14,15),al(Q,{startY:20,head:[Object.keys(B[0])],body:B.map(Object.values)}),Q.save("Estudiantes_Inclusion.pdf")}},j=ee.useMemo(()=>n.filter(E=>{var B;return E.profile===Vt.ESTUDIANTE&&(((B=t.cursos)==null?void 0:B.includes(E.curso||""))||t.profile===Vt.SUBDIRECCION)}).filter(E=>!e.some(B=>B.nombre===E.nombreCompleto)),[n,e,t]),L=ee.useMemo(()=>e.filter(E=>E.nombre.toLowerCase().includes(h.toLowerCase())&&(g===""||E.curso===g)&&(y===""||E.dificultad===y)).sort((E,B)=>E.nombre.localeCompare(B.nombre)),[e,h,g,y]),C=ee.useMemo(()=>n.filter(E=>E.profile===Vt.PROFESORADO).map(E=>E.nombreCompleto).sort(),[n]);return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusión Escolar (PIE)"}),a?c.jsx("div",{className:"text-center py-10",children:"Cargando datos del programa..."}):c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes en PIE (",L.length,")"]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>M("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),c.jsx("button",{onClick:()=>M("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[c.jsx("input",{type:"text",placeholder:"Buscar por nombre...",value:h,onChange:E=>m(E.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsxs("select",{value:g,onChange:E=>b(E.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todos los Cursos"}),la.map(E=>c.jsx("option",{children:E},E))]}),c.jsxs("select",{value:y,onChange:E=>_(E.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todas las Dificultades"}),v2.map(E=>c.jsx("option",{children:E},E))]})]}),c.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:L.map(E=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:E.nombre}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[E.curso," - ",E.dificultad]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>l(E),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Ficha"}),c.jsx("button",{onClick:()=>R(E.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full text-lg",children:"🗑️"})]})]},E.id))})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante desde Nómina"}),c.jsx("ul",{className:"space-y-2 max-h-[60vh] overflow-y-auto",children:j.map(E=>c.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-sm text-slate-800 dark:text-slate-200",children:E.nombreCompleto}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:E.curso})]}),c.jsx("button",{onClick:()=>d(E),className:"text-2xl text-green-500 hover:text-green-700",children:"+"})]},E.id))})]})]}),u&&c.jsx(Mye,{student:u,onClose:()=>d(null),onConfirm:(E,B)=>{N(E,B),d(null)}}),o&&c.jsx(Uye,{student:o,onClose:()=>l(null),onSave:k,profesores:C})]})},ZO="asistencia_dual",Pye=t=>{var r,n;const e=t.data();return{id:t.id,...e,fechaHora:((n=(r=e.fechaHora)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaHora}},jye=(t,e)=>{const r=er(Ft(Tt,ZO),Fn("emailEstudiante","==",t),gn("fechaHora","desc"));return Tr(r,s=>{const a=s.docs.map(i=>Pye(i));e(a)},s=>{console.error("Error subscribing to personal attendance:",s),e([])})},Oye=async t=>{try{const e={...t,fechaHora:cr.fromDate(new Date(t.fechaHora))};await Cs(Ft(Tt,ZO),e)}catch(e){throw console.error("Error adding attendance record:",e),new Error("Could not save the attendance record.")}},Qye=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),Hye=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm-3.707-4.293a1 1 0 001.414 1.414L10 12.414l2.293 2.293a1 1 0 001.414-1.414L11.414 11l2.293-2.293a1 1 0 00-1.414-1.414L10 9.586 7.707 7.293a1 1 0 00-1.414 1.414L8.586 11 6.293 13.293a1 1 0 000 1.414z",clipRule:"evenodd"})}),Vye=({currentUser:t})=>{const[e,r]=ee.useState(t.curso||""),[n,s]=ee.useState([]),[a,i]=ee.useState(!1),[o,l]=ee.useState(!0),[u,d]=ee.useState(null);ee.useEffect(()=>{if(!t.email){l(!1);return}l(!0);const m=jye(t.email,g=>{s(g),l(!1)});return()=>m()},[t.email]);const h=m=>{if(!e){d({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}i(!0),d(null),navigator.geolocation.getCurrentPosition(async g=>{const b={nombreEstudiante:t.nombreCompleto,emailEstudiante:t.email,curso:e,tipo:m,fechaHora:new Date().toISOString(),ubicacion:{latitud:g.coords.latitude,longitud:g.coords.longitude}};try{await Oye(b),d({text:`¡Marca de ${m} registrada con éxito!`,type:"success"})}catch(y){console.error("Error saving record to Firestore:",y),d({text:"No se pudo guardar el registro en la nube.",type:"error"})}finally{i(!1)}},g=>{console.error("Geolocation error:",g);let b="No se pudo obtener la ubicación.";switch(g.code){case g.PERMISSION_DENIED:b="Permiso de ubicación denegado. Por favor, habilite la ubicación en su navegador y dispositivo.";break;case g.POSITION_UNAVAILABLE:b="La información de ubicación no está disponible en este momento. Verifique su conexión y GPS.";break;case g.TIMEOUT:b="La solicitud de ubicación ha tardado demasiado. Inténtelo de nuevo en un lugar con mejor señal.";break;default:b=`Ocurrió un error desconocido al obtener la ubicación (código: ${g.code}).`;break}d({text:b,type:"error"}),i(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Asistencia a Empresa"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Registre su entrada y salida de la empresa de práctica."}),c.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione su curso"}),c.jsxs("select",{id:"curso",value:e,onChange:m=>r(m.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2 dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"-- Mi curso --"}),xh.map(m=>c.jsx("option",{value:m,children:m},m))]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[c.jsx("button",{onClick:()=>h("Entrada"),disabled:a||!e,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),c.jsx("button",{onClick:()=>h("Salida"),disabled:a||!e,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),a&&c.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-400 pt-4 flex items-center justify-center gap-2",children:[c.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c.jsx("span",{children:"Obteniendo ubicación..."})]}),u&&c.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${u.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.text})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Mi Historial de Asistencia"}),c.jsx("div",{className:"overflow-x-auto max-h-96",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha y Hora"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tipo"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o?c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"Cargando historial..."})}):n.length>0?n.map(m=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(m.fechaHora).toLocaleString("es-CL")}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:c.jsxs("span",{className:`px-3 py-1 inline-flex items-center gap-1.5 text-xs leading-5 font-semibold rounded-full ${m.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[m.tipo==="Entrada"?c.jsx(Qye,{}):c.jsx(Hye,{}),m.tipo]})}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:m.curso})]},m.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},Gye=async()=>{try{console.log("🔍 Debugging users collection...");const t=Ft(Kr,"users"),e=er(t,NA(10)),r=await ca(e),n={exists:!0,totalDocs:r.size,sampleDocs:[],fieldAnalysis:{}},s=new Set;return r.forEach((a,i)=>{const o=a.data(),l={id:a.id,data:o,fields:Object.keys(o)};n.sampleDocs.push(l),Object.keys(o).forEach(u=>s.add(u))}),n.fieldAnalysis={allFields:Array.from(s),commonFields:Array.from(s).filter(a=>n.sampleDocs.filter(o=>a in o.data).length>n.sampleDocs.length*.5)},console.log("Users collection debug result:",n),n}catch(t){return console.error("Error debugging users collection:",t),{exists:!1,error:t instanceof Error?t.message:"Unknown error"}}},zye=async(t,e)=>{var l,u,d;const r=new Date(t,e,1),n=new Date(t,e+1,0,23,59,59,999),s=cr.fromDate(r),a=cr.fromDate(n),i=["asistenciaDual","asistenciaEmpresa","asistencia","attendance","checkins"],o={};for(const h of i)try{const m=Ft(Kr,h);try{const g=er(m,Fn("fechaHora",">=",s),Fn("fechaHora","<=",a)),b=await ca(g);o[h]={exists:!0,hasDateField:!0,count:b.size,sampleDoc:((l=b.docs[0])==null?void 0:l.data())||null}}catch{const b=["fecha","timestamp","createdAt"];let y=!1;for(const _ of b)try{const N=er(m,Fn(_,">=",s),Fn(_,"<=",a)),k=await ca(N);o[h]={exists:!0,hasDateField:_,count:k.size,sampleDoc:((u=k.docs[0])==null?void 0:u.data())||null},y=!0;break}catch{continue}if(!y){const _=er(m,gn("__name__"),NA(5)),N=await ca(_);o[h]={exists:!0,hasDateField:!1,count:N.size,sampleDoc:((d=N.docs[0])==null?void 0:d.data())||null,note:"No date field found for filtering"}}}}catch(m){o[h]={exists:!1,error:m instanceof Error?m.message:"Unknown error"}}return console.log("Debug Asistencia Collections:",o),o},qye=(t,e,r,n)=>{try{const s=new Date(t,e,1);s.setHours(0,0,0,0);const a=new Date(t,e+1,0);a.setHours(23,59,59,999),console.log(`🔍 Buscando registros entre: ${s.toISOString()} y ${a.toISOString()}`),console.log(`📅 Mes actual: ${t}-${(e+1).toString().padStart(2,"0")}`);const i=cr.fromDate(s),o=cr.fromDate(a),l=[],u=new Map,d=()=>{const m=Array.from(u.values());console.log(`📊 Total registros encontrados: ${m.length}`),m.length>0&&console.log("📅 Registros por día:",m.reduce((g,b)=>{let y;b.fechaHora instanceof Date?y=b.fechaHora:typeof b.fechaHora=="string"?y=new Date(b.fechaHora):y=new Date;const _=y.getDate();return g[_]=(g[_]||0)+1,g},{})),r(m)};return["asistencia_dual","asistenciaEmpresa","asistencia_empresa","asistenciaDual","asistencia"].forEach(m=>{try{console.log(`🔍 Configurando suscripción para: ${m}`);const g=Ft(Kr,m),b=er(g,Fn("fechaHora",">=",i),Fn("fechaHora","<=",o),gn("fechaHora","desc")),y=Tr(b,_=>{console.log(`📋 ${m}: ${_.size} documentos encontrados con filtro`),_.size>0?(console.log(`✅ Registros encontrados en ${m}:`),Array.from(u.keys()).filter(k=>k.startsWith(`${m}_`)).forEach(k=>u.delete(k)),_.docs.forEach((k,R)=>{var M;if(R<5){const j=k.data();let L;(M=j.fechaHora)!=null&&M.toDate?L=j.fechaHora.toDate():typeof j.fechaHora=="string"?L=new Date(j.fechaHora):L=new Date,console.log(`   ${R+1}. ${j.emailEstudiante} - ${L.toLocaleString()} - ${j.tipo}`),console.log(`      📅 Fecha original: ${j.fechaHora} (tipo: ${typeof j.fechaHora})`)}}),_.forEach(k=>{var C;const R=k.data();let M;(C=R.fechaHora)!=null&&C.toDate?M=R.fechaHora.toDate():typeof R.fechaHora=="string"?M=new Date(R.fechaHora):R.fechaHora instanceof Date?M=R.fechaHora:R.fechaHora?M=new Date(R.fechaHora):M=new Date;const j={id:k.id,emailEstudiante:R.emailEstudiante||R.email||"",nombreEstudiante:R.nombreEstudiante||R.nombre||"",curso:R.curso||"",fechaHora:M,tipo:R.tipo,ubicacion:R.ubicacion||null,observaciones:R.observaciones||"",...R},L=`${m}_${k.id}`;u.set(L,j)}),d()):console.log(`⚪ ${m}: vacía, manteniendo datos existentes`)},_=>{console.warn(`⚠️ Error con filtro en ${m}:`,_),console.log(`🔄 Intentando estrategia alternativa en ${m}...`);const N=er(g,NA(200)),k=Tr(N,M=>{if(console.log(`📋 ${m} (sin filtro): ${M.size} documentos`),M.size>0){const L=M.docs[0].data();console.log(`📄 Estructura en ${m}:`,Object.keys(L)),console.log("📄 Primer documento:",L)}const j=M.docs.filter(L=>{var B;const C=L.data();if(!C.fechaHora)return!1;let E;return(B=C.fechaHora)!=null&&B.toDate?E=C.fechaHora.toDate():typeof C.fechaHora=="string"?E=new Date(C.fechaHora):C.fechaHora instanceof Date?E=C.fechaHora:E=new Date(C.fechaHora),E>=s&&E<=a});console.log(`📅 ${m}: ${j.length} registros después de filtro manual`),j.length>0&&(Array.from(u.keys()).filter(C=>C.startsWith(`${m}_`)).forEach(C=>u.delete(C)),j.forEach(C=>{var I;const E=C.data();let B;(I=E.fechaHora)!=null&&I.toDate?B=E.fechaHora.toDate():typeof E.fechaHora=="string"?B=new Date(E.fechaHora):E.fechaHora instanceof Date?B=E.fechaHora:B=new Date(E.fechaHora);const Q={id:C.id,emailEstudiante:E.emailEstudiante||E.email||"",nombreEstudiante:E.nombreEstudiante||E.nombre||"",curso:E.curso||"",fechaHora:B,tipo:E.tipo,ubicacion:E.ubicacion||null,observaciones:E.observaciones||"",...E},D=`${m}_${C.id}`;u.set(D,Q)}),d())}),R=l.findIndex(M=>M===y);R>=0?l[R]=k:l.push(k)});l.push(y)}catch(g){console.warn(`❌ Error configurando ${m}:`,g)}}),()=>{l.forEach(m=>{try{m()}catch(g){console.warn("Error unsubscribing:",g)}})}}catch(s){return console.error("Error setting up subscribeToAsistenciaByMonth:",s),n&&n(new Error(`Error al configurar suscripción: ${s instanceof Error?s.message:"Error desconocido"}`)),()=>{}}},Kye=(t,e)=>{try{console.log("🔍 Buscando usuarios en múltiples colecciones...");const r=["usuarios","users"],n=[],s=new Map,a=()=>{const o=Array.from(s.values());console.log(`📊 Total usuarios encontrados: ${o.length}`);const l=o.reduce((d,h)=>(d[h.profile]=(d[h.profile]||0)+1,d),{});console.log("👥 Usuarios por perfil:",l);const u=o.filter(d=>d.profile===Vt.ESTUDIANTE);console.log(`🎓 Estudiantes encontrados: ${u.length}`),u.forEach(d=>{console.log(`   - ${d.nombreCompleto} (${d.curso}) - ${d.email}`)}),t(o)};let i=!1;return r.forEach(o=>{try{const l=Ft(Kr,o),u=er(l),d=Tr(u,h=>{h.size>0?(console.log(`✅ Encontrados ${h.size} usuarios en colección: ${o}`),i=!0,Array.from(s.keys()).filter(g=>g.startsWith(`${o}_`)).forEach(g=>s.delete(g)),h.forEach(g=>{var b,y,_,N;try{const k=g.data(),R=k.email||k.userEmail||k.mail||k.correo||"",M=k.nombreCompleto||k.displayName||k.name||k.nombre||k.fullName||"",j=k.curso||k.course||k.class||k.grade||"";let L=k.profile||k.role||k.tipo||k.userType||Vt.ESTUDIANTE;if(typeof L=="string"){const B=L.toLowerCase();B.includes("estudiante")||B.includes("student")||B.includes("alumno")?L=Vt.ESTUDIANTE:B.includes("coordinador")||B.includes("coordinator")?L=Vt.COORDINADOR_TP:B.includes("profesor")||B.includes("teacher")||B.includes("docente")?L=Vt.PROFESOR:(B.includes("subdireccion")||B.includes("subdir"))&&(L=Vt.COORDINADOR_TP)}const C={id:g.id,email:R,nombreCompleto:M,curso:j,profile:L,activo:k.activo!==!1,fechaCreacion:((y=(b=k.fechaCreacion)==null?void 0:b.toDate)==null?void 0:y.call(b))||new Date(k.fechaCreacion)||new Date,ultimaActividad:((N=(_=k.ultimaActividad)==null?void 0:_.toDate)==null?void 0:N.call(_))||new Date(k.ultimaActividad)||new Date,...k},E=`${o}_${g.id}`;s.set(E,C)}catch(k){console.warn(`Error procesando documento ${g.id} en ${o}:`,k)}}),a()):console.log(`⚪ Colección ${o}: vacía`)},h=>{console.warn(`⚠️ Error en colección ${o}:`,h)});n.push(d)}catch(l){console.warn(`❌ Error configurando ${o}:`,l)}}),setTimeout(()=>{i||(console.error("❌ No se encontraron usuarios en ninguna colección"),e&&e(new Error("No se encontraron colecciones de usuarios con datos")))},3e3),()=>{n.forEach(o=>{try{o()}catch(l){console.warn("Error unsubscribing:",l)}})}}catch(r){return console.error("Error setting up multi-collection users subscription:",r),e&&e(new Error(`Error al configurar suscripción multi-colección: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},$ye=(t,e)=>{try{console.log("Setting up users subscription...");const r=Ft(Kr,"users"),n=er(r);return Tr(n,a=>{console.log(`Raw users snapshot size: ${a.size}`);const i=[];a.forEach(d=>{var h,m,g,b;try{const y=d.data();console.log(`Processing user doc ${d.id}:`,y);const _=y.email||y.userEmail||y.mail||"",N=y.nombreCompleto||y.displayName||y.name||y.nombre||"",k=y.curso||y.course||y.class||"";let R=y.profile||y.role||y.tipo||Vt.ESTUDIANTE;if(typeof R=="string"){const j=R.toLowerCase();j.includes("estudiante")||j.includes("student")||j.includes("alumno")?R=Vt.ESTUDIANTE:j.includes("coordinador")||j.includes("coordinator")?R=Vt.COORDINADOR_TP:j.includes("profesor")||j.includes("teacher")||j.includes("docente")?R=Vt.PROFESOR:(j.includes("subdireccion")||j.includes("subdir"))&&(R=Vt.COORDINADOR_TP)}const M={id:d.id,email:_,nombreCompleto:N,curso:k,profile:R,activo:y.activo!==!1,fechaCreacion:((m=(h=y.fechaCreacion)==null?void 0:h.toDate)==null?void 0:m.call(h))||new Date(y.fechaCreacion)||new Date,ultimaActividad:((b=(g=y.ultimaActividad)==null?void 0:g.toDate)==null?void 0:b.call(g))||new Date(y.ultimaActividad)||new Date,...y};i.push(M)}catch(y){console.warn(`Error processing user document ${d.id}:`,y)}}),i.sort((d,h)=>d.nombreCompleto.localeCompare(h.nombreCompleto)),console.log(`Processed ${i.length} users successfully`);const o=i.reduce((d,h)=>(d[h.profile]=(d[h.profile]||0)+1,d),{});console.log("Users by profile:",o);const l=i.filter(d=>d.profile===Vt.ESTUDIANTE);console.log(`Estudiantes: ${l.length}`);const u=l.filter(d=>d.curso);console.log(`Estudiantes con curso: ${u.length}`),t(i)},a=>{console.error("Error in subscribeToAllUsers:",a),e&&e(new Error(`Error al cargar usuarios: ${a.message}`))})}catch(r){return console.error("Error setting up subscribeToAllUsers:",r),e&&e(new Error(`Error al configurar suscripción de usuarios: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},qv=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},Wye=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),Yye=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H9.5l3.5 3.5L11.59 18 6 12.41 11.59 7 13 8.41 9.5 11H17v2z"})}),Xye=()=>{const[t,e]=ee.useState([]),[r,n]=ee.useState([]),[s,a]=ee.useState(!0),[i,o]=ee.useState(null),[l,u]=ee.useState(new Date),[d,h]=ee.useState("todos"),[m,g]=ee.useState("");ee.useEffect(()=>{a(!0),o(null);const L=l.getFullYear(),C=l.getMonth();console.log("=== INICIANDO CARGA DE DATOS ==="),console.log("Año:",L,"Mes:",C);let E=!1,B=!1;const Q=()=>{E&&B&&(console.log("=== CARGA COMPLETA ==="),a(!1))};(async()=>{console.log("🧪 INICIANDO PRUEBA DIRECTA SIMPLE...");try{const I=Ft(Kr,"asistencia_dual"),O=er(I,NA(5)),G=await ca(O);if(console.log(`✅ asistencia_dual - Documentos encontrados: ${G.size}`),G.size>0)G.docs.forEach((se,J)=>{const re=se.data();console.log(`   ${J+1}. ${se.id.slice(0,8)} - ${re.emailEstudiante} - ${re.tipo}`),console.log("      Fecha original:",re.fechaHora),console.log("      Todos los campos:",Object.keys(re))});else{console.log("❌ No se encontraron documentos en asistencia_dual");const se=["asistenciaEmpresa","asistencia_empresa"];for(const J of se)try{const re=Ft(Kr,J),q=er(re,NA(3)),z=await ca(q);if(console.log(`📋 ${J}: ${z.size} documentos`),z.size>0){const W=z.docs[0].data();console.log("   Estructura:",Object.keys(W)),console.log("   Email:",W.emailEstudiante||W.email),console.log("   Fecha:",W.fechaHora||W.fecha)}}catch(re){console.log(`❌ ${J}: ${re instanceof Error?re.message:"Error"}`)}}}catch(I){console.error("❌ Error en prueba directa:",I),I.code==="permission-denied"?(console.log("🔒 PROBLEMA: Permisos de Firestore denegados"),console.log("💡 Ve a Firebase Console → Firestore → Rules y verifica los permisos")):I.code==="failed-precondition"&&(console.log("📊 PROBLEMA: Faltan índices en Firestore"),console.log("💡 Ve a Firebase Console → Firestore → Indexes"))}})(),zye(L,C).then(I=>{console.log("🔍 Debug info for collections:",I),Object.entries(I).forEach(([O,G])=>{if(G.exists&&G.totalDocs>0){if(console.log(`
📋 COLECCIÓN ${O.toUpperCase()}:`),console.log(`   📊 Total documentos: ${G.totalDocs}`),console.log(`   📅 Documentos del período: ${G.count}`),console.log(`   🔑 Campo de fecha: ${G.hasDateField}`),G.sampleDoc){console.log("   📄 Documento ejemplo:",G.sampleDoc);const se=G.sampleDoc,J=se.emailEstudiante||se.email||se.userEmail||se.correo||"NO ENCONTRADO",re=se.tipo||se.type||se.action||se.tipoRegistro||"NO ENCONTRADO",q=se.fechaHora||se.fecha||se.timestamp||se.createdAt||"NO ENCONTRADO";console.log(`   📧 Email estudiante: ${J}`),console.log(`   📝 Tipo registro: ${re}`),console.log(`   📅 Fecha: ${q}`),console.log("   🗂️ Todos los campos:",Object.keys(se))}G.filteredDocs&&G.filteredDocs.length>0&&(console.log("   📋 Registros del período encontrados:",G.filteredDocs.length),G.filteredDocs.forEach((se,J)=>{J<3&&console.log(`      ${J+1}. ID: ${se.id}`,se.data)}))}else G.exists?console.log(`⚪ Colección ${O}: vacía`):console.log(`❌ Colección ${O}: no existe`)})}).catch(I=>{console.error("Debug error:",I)}),Gye().then(I=>{console.log("🔍 Debug info for users:",I),(!I.exists||I.totalDocs===0)&&(console.log('⚠️ Colección "users" vacía o no existe. Buscando alternativas...'),["usuarios","estudiantes","profiles","accounts","members"].forEach(async G=>{var se;try{const J=Ft(Kr,G),re=er(J,NA(5)),q=await ca(re);q.size>0?(console.log(`✅ Encontrada colección alternativa: ${G} con ${q.size} documentos`),console.log("Documento muestra:",(se=q.docs[0])==null?void 0:se.data())):console.log(`❌ Colección ${G}: vacía`)}catch{console.log(`❌ Colección ${G}: no existe`)}}))}).catch(I=>{console.error("Users debug error:",I)});try{console.log("Configurando suscripción a asistencia...");const I=qye(L,C,G=>{if(console.log("✅ Received registros:",G.length),G.length>0){console.log("📋 ANÁLISIS DE REGISTROS RECIBIDOS:"),console.log("Sample registro:",G[0]);const se=[...new Set(G.map(ie=>ie.emailEstudiante).filter(Boolean))];console.log("📧 Emails de estudiantes en registros:",se);const J=[...new Set(G.map(ie=>ie.tipo).filter(Boolean))];console.log("📝 Tipos de registro encontrados:",J);const re=G.reduce((ie,P)=>{const Y=new Date(P.fechaHora).getDate();return ie[Y]||(ie[Y]=[]),ie[Y].push(P),ie},{});console.log("📅 Registros por día del mes:",Object.keys(re).map(ie=>({dia:parseInt(ie),cantidad:re[parseInt(ie)].length})));const q=r.map(ie=>ie.email).filter(Boolean);console.log("👥 Emails de estudiantes cargados:",q);const z=se.filter(ie=>q.includes(ie)),W=se.filter(ie=>!q.includes(ie));console.log("✅ Emails que coinciden:",z),console.log("❌ Emails que NO coinciden:",W)}else console.log("⚠️ No se encontraron registros de asistencia para el período");e(G),E=!0,Q()},G=>{console.error("❌ Error fetching asistencia:",G),o("Error al cargar datos de asistencia: "+G.message),E=!0,Q()});console.log("Configurando suscripción a usuarios...");const O=Kye(G=>{if(console.log("✅ Received users (multi-collection):",G.length),G.length>0){console.log("Sample user:",G[0]);const se=G.filter(J=>J.profile===Vt.ESTUDIANTE&&J.curso);console.log("Dual students found:",se.length),se.forEach(J=>{console.log(`- ${J.nombreCompleto} (${J.curso}) - ${J.email}`)})}n(G),B=!0,Q()},G=>{console.error("❌ Error fetching users (multi-collection):",G),console.log("🔄 Intentando con función original de usuarios...");const se=$ye(J=>{console.log("✅ Received users (fallback):",J.length),n(J),B=!0,Q()},J=>{console.error("❌ Error en fallback también:",J),o("Error al cargar estudiantes: "+G.message),B=!0,Q()})});return()=>{console.log("Limpiando suscripciones..."),I&&I(),O&&O()}}catch(I){console.error("❌ Error setting up subscriptions:",I),o("Error al inicializar conexiones: "+(I instanceof Error?I.message:"Error desconocido")),a(!1)}},[l]);const{monthDays:b,monthName:y,year:_}=ee.useMemo(()=>{const L=l.getFullYear(),C=l.getMonth();return{monthDays:new Date(L,C+1,0).getDate(),monthName:l.toLocaleString("es-CL",{month:"long"}),year:L}},[l]),N=ee.useMemo(()=>{let L=r.filter(C=>C.profile===Vt.ESTUDIANTE&&C.curso&&xh.includes(qv(C.curso)));if(d!=="todos"&&(L=L.filter(C=>qv(C.curso||"")===d)),m&&(L=L.filter(C=>C.nombreCompleto.toLowerCase().includes(m.toLowerCase()))),t.length>0){const C=[...new Set(t.map(Q=>Q.emailEstudiante).filter(Boolean))],E=L.map(Q=>Q.email),B=C.filter(Q=>!E.includes(Q));if(B.length>0){console.log("📝 Agregando estudiantes faltantes con registros:",B);const D=B.map(I=>{const O=t.find(G=>G.emailEstudiante===I);return{id:I,email:I,nombreCompleto:(O==null?void 0:O.nombreEstudiante)||I.split("@")[0],curso:(O==null?void 0:O.curso)||"3ºC",profile:Vt.ESTUDIANTE,activo:!0,fechaCreacion:new Date,ultimaActividad:new Date}}).filter(I=>{const O=d==="todos"||qv(I.curso)===d,G=!m||I.nombreCompleto.toLowerCase().includes(m.toLowerCase());return O&&G&&xh.includes(qv(I.curso))});L=[...L,...D]}}return console.log(`👥 Estudiantes filtrados para mostrar: ${L.length}`),L.forEach(C=>{console.log(`   - ${C.nombreCompleto} (${C.curso}) - ${C.email}`)}),L.sort((C,E)=>C.nombreCompleto.localeCompare(E.nombreCompleto))},[r,d,m,t]),k=ee.useMemo(()=>{console.log("🔄 Procesando datos de asistencia para la tabla..."),console.log(`📊 Total registros a procesar: ${t.length}`),console.log(`👥 Estudiantes disponibles: ${N.length}`);const L=new Map;return t.length===0?(console.log("⚠️ No hay registros para procesar aún"),L):(t.forEach((C,E)=>{const B=C.emailEstudiante;if(!B)return;let Q;if(C.fechaHora instanceof Date)Q=C.fechaHora;else if(C.fechaHora&&typeof C.fechaHora=="object"&&"toDate"in C.fechaHora)Q=C.fechaHora.toDate();else if(typeof C.fechaHora=="string")Q=new Date(C.fechaHora);else{console.warn("Fecha no válida en registro:",C);return}const D=Q.getDate(),I=Q.getMonth(),O=Q.getFullYear();E<3&&console.log(`📅 Registro ${E+1}:`,{email:B,tipo:C.tipo,fechaOriginal:C.fechaHora,fechaProcesada:Q.toLocaleString(),año:O,mes:I,día:D}),L.has(B)||L.set(B,new Map);const G=L.get(B);G.has(D)||G.set(D,{});const se=G.get(D);C.tipo==="Entrada"?(!se.entrada||Q<new Date(se.entrada.fechaHora))&&(se.entrada=C):C.tipo==="Salida"&&(!se.salida||Q>new Date(se.salida.fechaHora))&&(se.salida=C)}),console.log("📋 Datos de asistencia procesados:",{estudiantesConRegistros:L.size,estudiantes:Array.from(L.keys()),registrosPorEstudiante:Array.from(L.entries()).map(([C,E])=>({email:C,dias:Array.from(E.keys()),totalRegistros:Array.from(E.values()).reduce((B,Q)=>B+(Q.entrada?1:0)+(Q.salida?1:0),0)}))}),L)},[t]),R=L=>{u(C=>{const E=new Date(C);return E.setMonth(E.getMonth()+L),E})},M=L=>{L!=null&&L.latitud&&(L!=null&&L.longitud)&&window.open(`https://www.google.com/maps?q=${L.latitud},${L.longitud}`,"_blank")},j=["D","L","M","M","J","V","S"];return i?c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:c.jsx("div",{className:"text-red-600 bg-red-100 dark:bg-red-900/30 p-4 rounded-md",children:i})}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[c.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[c.jsx("button",{onClick:()=>R(-1),disabled:s,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes anterior",children:"←"}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${y} ${_}`}),c.jsx("button",{onClick:()=>R(1),disabled:s,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes siguiente",children:"→"})]}),c.jsxs("select",{value:d,onChange:L=>h(L.target.value),disabled:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"todos",children:"Todos los Cursos"}),xh.map(L=>c.jsx("option",{value:L,children:L},L))]}),c.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:m,onChange:L=>g(L.target.value),disabled:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s?c.jsxs("div",{className:"text-center text-amber-600 py-10",children:[c.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mb-4"}),c.jsx("div",{children:"Cargando datos de asistencia..."})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:b},(L,C)=>{const B=new Date(_,l.getMonth(),C+1).getDay(),Q=B===0||B===6;return c.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${Q?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[c.jsx("div",{className:"font-semibold",children:j[B]}),c.jsx("div",{children:C+1})]},C)})]})}),c.jsx("tbody",{children:N.length>0?N.map(L=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[c.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:L.nombreCompleto}),Array.from({length:b},(C,E)=>{var O;const B=E+1,Q=(O=k.get(L.email))==null?void 0:O.get(B),D=new Date(_,l.getMonth(),E+1),I=D.getDay()===0||D.getDay()===6;return L.email==="alexis.robles@industrialderecoleta.cl"&&B===2&&console.log("🔍 Verificando día 2 para Alexis:",{email:L.email,day:B,hasDataForStudent:k.has(L.email),studentDayRecords:Q,allAttendanceKeys:Array.from(k.keys()),daysForStudent:k.get(L.email)?Array.from(k.get(L.email).keys()):[]}),c.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${I?"bg-slate-100 dark:bg-slate-700/50":""}`,children:c.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(Q==null?void 0:Q.entrada)&&c.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var G;return M((G=Q.entrada)==null?void 0:G.ubicacion)},children:[c.jsx(Wye,{}),c.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(Q.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]}),(Q==null?void 0:Q.salida)&&c.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var G;return M((G=Q.salida)==null?void 0:G.ubicacion)},children:[c.jsx(Yye,{}),c.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(Q.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]})]})},B)})]},L.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:b+1,className:"text-center p-8 text-slate-500",children:"No hay estudiantes en el curso seleccionado o que coincidan con la búsqueda."})})})]})})]})},lb="evaluaciones_formativas",cb="calificaciones_formativas",IT="trabajos_grupales_formativos",Jye="usuarios",FT=t=>{var r,n,s,a;const e=t.data();return{id:t.id,...e,fecha:((n=(r=e.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||e.fecha,fechaPresentacion:((a=(s=e.fechaPresentacion)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString().split("T")[0])||e.fechaPresentacion}},Zye=(t,e,r)=>{const n=er(Ft(Tt,lb),Fn("curso","==",t),Fn("asignatura","==",e),gn("fecha","asc"));return Tr(n,s=>{r(s.docs.map(a=>FT(a)))},s=>{console.error("Error al suscribirse a evaluaciones:",s),r([])})},e2e=async(t,e)=>{const r=E4(Tt),n=yr(Ft(Tt,lb));r.set(n,{...t,fecha:cr.fromDate(new Date(t.fecha+"T00:00:00"))});const s=yr(Tt,cb,n.id);return r.set(s,e),await r.commit(),n.id},t2e=async(t,e)=>{const r=yr(Tt,lb,t);await Wi(r,e,{merge:!0})},r2e=async t=>{const e=E4(Tt);e.delete(yr(Tt,lb,t)),e.delete(yr(Tt,cb,t)),await e.commit()},n2e=(t,e)=>{if(t.length===0)return e({}),()=>{};const r=t.map(n=>{const s=yr(Tt,cb,n);return Tr(s,a=>{a.exists()&&e({[n]:a.data()})})});return()=>r.forEach(n=>n())},s2e=async(t,e)=>{const r=yr(Tt,cb,t);await Wi(r,e,{merge:!0})},a2e=(t,e,r)=>{const n=er(Ft(Tt,IT),Fn("curso","==",t),Fn("asignatura","==",e),gn("fechaPresentacion","desc"));return Tr(n,s=>{r(s.docs.map(a=>FT(a)))},s=>{console.error("Error al suscribirse a trabajos grupales:",s),r([])})},i2e=async t=>{const e={...t,fechaPresentacion:cr.fromDate(new Date(t.fechaPresentacion+"T00:00:00"))};await Cs(Ft(Tt,IT),e)},o2e=async(t,e)=>{const r=yr(Tt,IT,t);await Wi(r,e,{merge:!0})},l2e=t=>{const e=er(Ft(Tt,Jye));return Tr(e,r=>{t(r.docs.map(n=>FT(n)))},r=>{console.error("Error al suscribirse a usuarios:",r),t([])})},e7=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},G2={"Lengua y Literatura":"📚",Matemática:"➗",Inglés:"🇬🇧",Filosofía:"🤔","Historia y Geografía":"🌍","Educación Ciudadana":"🏛️",Ciencias:"🔬","Ciencias para la Ciudadanía":"💡",Artes:"🎨",Música:"🎵","Educación Física":"🏃‍♂️",Orientación:"🧭","Mecánica Industrial":"⚙️","Mecánica Automotriz":"🚗",Emprendimiento:"💼",Tecnología:"💻","Pensamiento Lógico":"🧠","Competencia Lectora":"📖",Default:"✏️"},t7=t=>t.startsWith("1º")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:t.startsWith("2º")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:t.startsWith("3º")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:t.startsWith("4º")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},c2e=({cursos:t,onSelect:e})=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),t.length>0?c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:t.map(r=>{const n=t7(r);return c.jsxs("div",{className:"space-y-2 text-center",children:[c.jsxs("button",{onClick:()=>e(r),className:`relative w-full h-48 rounded-md shadow-lg ${n.bg} ${n.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[c.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${n.spine} rounded-l-md`}),c.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${n.text}`,children:[c.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:r.slice(0,2)}),c.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:r.slice(2)})]})]}),c.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:r})]},r)})}):c.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),c.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),u2e=({curso:t,asignaturas:e,onSelect:r,onBack:n})=>{const s=t7(t);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:"← Volver a Cursos"}),c.jsxs("div",{className:`p-2 rounded-md ${s.bg} ${s.text} font-bold`,children:["Libro de Clases: ",t]})]}),c.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),e.length>0?c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:e.map(a=>c.jsxs("button",{onClick:()=>r(a),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[c.jsx("span",{className:"text-2xl",children:G2[a]||G2.Default}),c.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:a})]},a))}):c.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),c.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},A2e=({curso:t,asignatura:e,allUsers:r,onBack:n})=>{const[s,a]=ee.useState([]),[i,o]=ee.useState({}),[l,u]=ee.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[d,h]=ee.useState(null),[m,g]=ee.useState(null),[b,y]=ee.useState(!0),_=ee.useMemo(()=>r.filter(E=>E.profile===Vt.ESTUDIANTE&&e7(E.curso||"")===t).map(E=>E.nombreCompleto).sort((E,B)=>E.localeCompare(B)),[r,t]);ee.useEffect(()=>{y(!0);const E=Zye(t,e,B=>{a(B);const Q=B.map(I=>I.id),D=n2e(Q,I=>{o(O=>({...O,...I}))});return y(!1),()=>D()});return()=>E()},[t,e]);const N=E=>{const{name:B,value:Q}=E.target;d?h(D=>D?{...D,[B]:Q}:null):u(D=>({...D,[B]:Q}))},k=async E=>{if(E.preventDefault(),g(null),!l.nombreActividad.trim()){g("El nombre de la actividad es obligatorio.");return}const B={asignatura:e,curso:t,...l},Q=_.reduce((D,I)=>(D[I]="trabajado",D),{});try{await e2e(B,Q),u({fecha:new Date().toISOString().split("T")[0],nombreActividad:""})}catch(D){console.error(D),g("No se pudo crear la evaluación.")}},R=(E,B)=>{var O;const D=(((O=i[E])==null?void 0:O[B])||"trabajado")==="trabajado"?"no trabajado":"trabajado",I={...i,[E]:{...i[E]||{},[B]:D}};o(I),s2e(E,{[B]:D}).catch(G=>{console.error("Error updating grade:",G)})},M=E=>h(E),j=async()=>{if(d)try{await t2e(d.id,{nombreActividad:d.nombreActividad,fecha:d.fecha}),h(null)}catch(E){console.error(E),g("No se pudo guardar la edición.")}},L=async E=>{if(window.confirm("¿Eliminar esta evaluación y todas sus calificaciones?"))try{await r2e(E)}catch(B){console.error(B),g("No se pudo eliminar la evaluación.")}},C=ee.useCallback(E=>{if(s.length===0)return"-";let B=0,Q=0;return s.forEach(D=>{var O;const I=(O=i[D.id])==null?void 0:O[E];I==="trabajado"?(B+=7,Q++):I==="no trabajado"&&(B+=2,Q++)}),Q===0?"-":(B/Q).toFixed(1)},[i,s]);return b?c.jsx("div",{className:"text-center py-10",children:"Cargando calificaciones..."}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),c.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[t," / ",e]})]}),c.jsxs("form",{onSubmit:k,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluación"}),c.jsxs("div",{className:"w-full",children:[c.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),c.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:l.nombreActividad,onChange:N,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"w-full",children:[c.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),c.jsx("input",{id:"fecha",type:"date",name:"fecha",value:l.fecha,onChange:N,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("div",{className:"w-full",children:c.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),m&&c.jsx("p",{className:"text-red-500 text-sm col-span-full",children:m})]}),c.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),s.map(E=>c.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(d==null?void 0:d.id)===E.id?c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("input",{type:"text",name:"nombreActividad",value:d.nombreActividad,onChange:N,className:"text-xs p-1 w-full dark:bg-slate-600"}),c.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:N,className:"text-xs p-1 w-full dark:bg-slate-600"}),c.jsx("button",{onClick:j,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:"✓"})]}):c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"font-semibold",children:E.nombreActividad}),c.jsx("span",{className:"font-normal text-slate-500",children:E.fecha}),c.jsxs("div",{className:"flex gap-2 mt-1",children:[c.jsx("button",{onClick:()=>M(E),className:"text-blue-500 hover:text-blue-700",children:"✏️"}),c.jsx("button",{onClick:()=>L(E.id),className:"text-red-500 hover:text-red-700",children:"🗑️"})]})]})},E.id)),c.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:_.map(E=>c.jsxs("tr",{children:[c.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:E}),s.map(B=>{var I;const D=((I=i[B.id])==null?void 0:I[E])==="trabajado";return c.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:c.jsx("button",{onClick:()=>R(B.id,E),className:`text-3xl transition-opacity duration-200 ${D?"opacity-100":"opacity-20"}`,children:G2[e]||G2.Default})},B.id)}),c.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:C(E)})]},E))})]})})]})},d2e=({curso:t,asignatura:e,allUsers:r,onBack:n})=>{const[s,a]=ee.useState([]),[i,o]=ee.useState(null),[l,u]=ee.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[d,h]=ee.useState({}),[m,g]=ee.useState(2),b=ee.useMemo(()=>r.filter(M=>M.profile===Vt.ESTUDIANTE&&e7(M.curso||"")===t).sort((M,j)=>M.nombreCompleto.localeCompare(j.nombreCompleto)),[r,t]);ee.useEffect(()=>{const M=a2e(t,e,a);return()=>M()},[t,e]),ee.useEffect(()=>{if(i){const M={};i.grupos.forEach(j=>{j.integrantes.forEach(L=>{M[L.nombre]={groupNumber:String(j.numero),role:L.rol||""}})}),h(M)}else h({})},[i]);const y=async M=>{if(M.preventDefault(),!l.nombre.trim())return;const j={curso:t,asignatura:e,nombreActividad:l.nombre,fechaPresentacion:l.fecha,grupos:[]};try{await i2e(j),u({nombre:"",fecha:new Date().toISOString().split("T")[0]})}catch(L){console.error(L),alert("No se pudo crear la actividad grupal.")}},_=async()=>{if(!i)return;const M=new Map;for(const L of b){const C=d[L.nombreCompleto];if(C&&C.groupNumber){const E=parseInt(C.groupNumber,10);isNaN(E)||(M.has(E)||M.set(E,[]),M.get(E).push({nombre:L.nombreCompleto,rol:C.role||void 0}))}}const j=Array.from(M.entries()).map(([L,C])=>({numero:L,integrantes:C})).sort((L,C)=>L.numero-C.numero);try{await o2e(i.id,{grupos:j}),alert("Grupos guardados con éxito.")}catch(L){console.error(L),alert("No se pudieron guardar los grupos.")}},N=()=>{if(m<2){alert("Debe haber al menos 2 grupos.");return}const M=[...b].sort(()=>Math.random()-.5),j={};M.forEach((L,C)=>{var E;j[L.nombreCompleto]={groupNumber:String(C%m+1),role:((E=d[L.nombreCompleto])==null?void 0:E.role)||""}}),h(j)},k=(M,j,L)=>{h(C=>({...C,[M]:{...C[M]||{groupNumber:"",role:""},[j]:L}}))},R=ee.useMemo(()=>{const M=new Map;return Object.entries(d).forEach(([j,L])=>{L.groupNumber&&(M.has(L.groupNumber)||M.set(L.groupNumber,[]),M.get(L.groupNumber).push({nombre:j,rol:L.role}))}),Array.from(M.entries()).sort((j,L)=>parseInt(j[0])-parseInt(L[0]))},[d]);return i?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("button",{onClick:()=>o(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a Actividades"}),c.jsx("h2",{className:"text-2xl font-bold",children:i.nombreActividad})]}),c.jsx("button",{onClick:_,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"md:col-span-1 space-y-4",children:[c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignación"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",value:m,onChange:M=>g(parseInt(M.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),c.jsx("button",{onClick:N,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),c.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Nómina del Curso"}),c.jsx("table",{className:"w-full text-sm",children:c.jsx("tbody",{children:b.map(M=>{var j;return c.jsxs("tr",{children:[c.jsx("td",{className:"py-1 pr-2",children:M.nombreCompleto}),c.jsx("td",{className:"py-1",children:c.jsx("input",{type:"number",value:((j=d[M.nombreCompleto])==null?void 0:j.groupNumber)||"",onChange:L=>k(M.nombreCompleto,"groupNumber",L.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N°"})})]},M.id)})})})]})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:R.map(([M,j])=>c.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[c.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",M]}),c.jsx("ul",{className:"space-y-2",children:j.map(L=>c.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[c.jsx("span",{className:"flex-1 truncate",children:L.nombre}),c.jsxs("select",{value:L.rol||"",onChange:C=>k(L.nombre,"role",C.target.value),className:"p-1 border rounded text-xs w-32",children:[c.jsx("option",{value:"",children:"-- Asignar Rol --"}),dM.map(C=>c.jsx("option",{value:C,children:C},C))]})]},L.nombre))})]},M))})]})]})]}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),c.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[t," / ",e]})]}),c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),c.jsxs("form",{onSubmit:y,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[c.jsx("input",{value:l.nombre,onChange:M=>u({...l,nombre:M.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),c.jsx("input",{type:"date",value:l.fecha,onChange:M=>u({...l,fecha:M.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),s.map(M=>c.jsxs("button",{onClick:()=>o(M),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[c.jsx("p",{className:"font-bold",children:M.nombreActividad}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",M.fechaPresentacion]})]},M.id))]})]})},f2e=({currentUser:t})=>{const[e,r]=ee.useState("calificaciones"),[n,s]=ee.useState(null),[a,i]=ee.useState(null),[o,l]=ee.useState([]),[u,d]=ee.useState(!0);ee.useEffect(()=>{d(!0);const y=l2e(_=>{l(_),d(!1)});return()=>y()},[]);const h=ee.useMemo(()=>t.cursos||[],[t.cursos]),m=ee.useMemo(()=>t.asignaturas||[],[t.asignaturas]),g=({tab:y,label:_})=>c.jsx("button",{onClick:()=>r(y),className:`${e===y?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:_}),b=()=>{if(u)return c.jsx("div",{className:"text-center py-10",children:"Cargando datos de usuario..."});if(!n)return c.jsx(c2e,{cursos:h,onSelect:s});if(!a)return c.jsx(u2e,{curso:n,asignaturas:m,onSelect:i,onBack:()=>s(null)});if(e==="calificaciones")return c.jsx(A2e,{curso:n,asignatura:a,allUsers:o,onBack:()=>i(null)});if(e==="grupos")return c.jsx(d2e,{curso:n,asignatura:a,allUsers:o,onBack:()=>i(null)})};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx(g,{tab:"calificaciones",label:"Calificaciones"}),c.jsx(g,{tab:"grupos",label:"Trabajos Grupales"})]})}),c.jsx("div",{className:"mt-6",children:b()})]})},g1="acompanamientos",h2e=async()=>{try{const t=er(Ft(Kr,g1),gn("fecha","desc"));return(await ca(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener acompañamientos:",t),new Error("No se pudieron cargar los registros de acompañamiento")}},m2e=async t=>{try{return{id:(await Cs(Ft(Kr,g1),{...t,fecha:t.fecha||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear acompañamiento:",e),new Error("No se pudo crear el registro de acompañamiento")}},p2e=async(t,e)=>{try{const r=yr(Kr,g1,t);await n1(r,{...e,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar acompañamiento:",r,"ID:",t),new Error("No se pudo actualizar el registro de acompañamiento")}},g2e=async t=>{try{const e=yr(Kr,g1,t);await mi(e)}catch(e){throw console.error("Error al eliminar acompañamiento:",e,"ID:",t),new Error("No se pudo eliminar el registro de acompañamiento")}},x2e=async t=>{try{const e=er(Ft(Kr,g1),Fn("docente","==",t),gn("fecha","desc"));return(await ca(e)).docs.map(n=>({id:n.id,...n.data()}))}catch(e){throw console.error("Error al obtener acompañamientos por docente:",e),new Error("No se pudieron cargar los acompañamientos del docente")}},v2e=async()=>{try{const t=yr(Kr,"configuracion","rubricaAcompanamiento"),e=await r1(t);return e.exists()?e.data().rubrica:null}catch(t){return console.error("Error al obtener rúbrica personalizada:",t),null}},y2e=()=>{const[t,e]=ee.useState([]),[r,n]=ee.useState([]),[s,a]=ee.useState(!1),[i,o]=ee.useState(!1),[l,u]=ee.useState(null),[d,h]=ee.useState("list"),[m,g]=ee.useState(null),[b,y]=ee.useState(!1),[_,N]=ee.useState(!1),k=jg,R=ee.useMemo(()=>({fecha:new Date().toISOString(),docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[M,j]=ee.useState(R),L=ee.useCallback(async()=>{a(!0);try{const q=await h2e();e(q),u(null)}catch(q){console.error("Error al cargar acompañamientos desde Firestore",q),u("No se pudieron cargar los registros de acompañamiento desde la nube.")}finally{a(!1)}},[]),C=ee.useCallback(async()=>{o(!0);try{const z=(await $O()).filter(W=>W.profile===Vt.PROFESORADO).map(W=>W.nombreCompleto).sort();n(z)}catch(q){console.error("Error al cargar profesores desde Firestore",q),u("No se pudieron cargar la lista de profesores desde la nube.")}finally{o(!1)}},[]);ee.useEffect(()=>{L(),C()},[L,C]);const E=q=>{j(z=>({...z,[q.target.name]:q.target.value}))},B=(q,z)=>{j(W=>({...W,rubricaResultados:{...W.rubricaResultados,[q]:z}}))},Q=async()=>{y(!0);const{rubricaResultados:q,observacionesGenerales:z}=M;let W=`Resultados de la Rúbrica:
`;k.forEach(P=>{P.criteria.forEach(Y=>{const Z=q[Y.name];if(Z&&Y.levels[Z-1]){const te=Y.levels[Z-1];W+=`- Criterio: "${Y.name}" | Nivel: ${Z} (${te})
`}})}),W+=`
Observaciones Generales del Evaluador:
${z||"No se proveyeron observaciones adicionales."}`;const ie=`
            Eres un asesor pedagógico experto. Tu tarea es generar una retroalimentación formal, técnica y constructiva para un docente, basada en una observación de clase.
            La retroalimentación debe ser estructurada y usar un lenguaje pedagógico preciso.

            A continuación, los datos de la observación:
            ${W}

            Genera una retroalimentación que incluya obligatoriamente los siguientes puntos en formato Markdown:
            - ## Fortalezas Observadas: Destaca 2 o 3 puntos positivos clave, conectándolos con los criterios de la rúbrica.
            - ## Áreas de Mejora: Identifica 2 o 3 aspectos donde el docente puede mejorar, explicando el porqué con base en la evidencia.
            - ## Sugerencias y Pasos a Seguir: Ofrece recomendaciones concretas, prácticas y accionables que el docente pueda implementar.
        `;try{$l("Acompañamiento - Consolidar Feedback");const Z=(await new fx({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).models.generateContent({model:"gemini-2.5-flash",contents:ie})).text.replace(/(\*\*|\*)/g,"");j(te=>({...te,retroalimentacionConsolidada:Z}))}catch(P){console.error("Error al generar retroalimentación con IA",P),alert("No se pudo generar la retroalimentación. Inténtelo de nuevo.")}finally{y(!1)}},D=async()=>{const q=m;if(!q)return;N(!0);const z=t.find(xe=>xe.id===q);if(!z){N(!1);return}const W=new or({orientation:"p",unit:"mm",format:"a4"}),ie=20,P=W.internal.pageSize.getWidth(),Y=W.internal.pageSize.getHeight(),Z=P-ie*2;let te=ie;const ce=xe=>{xe.setFont("helvetica","bold"),xe.setFontSize(10),xe.setTextColor(100),xe.text("LICEO INDUSTRIAL DE RECOLETA",P/2,15,{align:"center"})};ce(W),W.setFont("helvetica","bold"),W.setFontSize(18),W.setTextColor(40),W.text("Informe de Acompañamiento Docente",P/2,te+10,{align:"center"}),te+=25,al(W,{startY:te,body:[[{content:"Docente:",styles:{fontStyle:"bold"}},z.docente],[{content:"Fecha:",styles:{fontStyle:"bold"}},new Date(z.fecha).toLocaleDateString("es-CL")],[{content:"Asignatura:",styles:{fontStyle:"bold"}},z.asignatura],[{content:"Curso:",styles:{fontStyle:"bold"}},z.curso]],theme:"plain",styles:{fontSize:11,cellPadding:2,textColor:[50,50,50]},columnStyles:{0:{cellWidth:35}}}),te=W.lastAutoTable.finalY+10;const Ee=[],pe=["Débil","Incipiente","Satisfactorio","Avanzado"];k.forEach(xe=>{Ee.push([{content:xe.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40],halign:"left"}}]),xe.criteria.forEach(de=>{const oe=z.rubricaResultados[de.name],Le=oe?pe[oe-1]:"No evaluado";Ee.push([de.name,Le])})}),al(W,{startY:te,head:[["Indicador","Nivel de Logro"]],body:Ee,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},didDrawPage:xe=>{xe.pageNumber>1&&ce(W)}}),te=W.lastAutoTable.finalY+15;const fe=(xe,de)=>{te>Y-ie-10&&(W.addPage(),ce(W),te=ie),W.setFont("helvetica",de.style),W.setFontSize(de.size);const oe=W.splitTextToSize(xe,Z),Le=oe.length*(de.size*.352778*1.15);te+Le>Y-ie&&(W.addPage(),ce(W),te=ie),W.text(oe,ie,te,{align:"left"}),te+=Le+(de.isTitle?5:8)};z.retroalimentacionConsolidada?z.retroalimentacionConsolidada.split(/(?=## )/).forEach(de=>{if(de.trim()){const oe=de.trim().split(`
`),Le=oe[0].replace("## ",""),et=oe.slice(1).join(`
`).trim();fe(Le,{size:14,style:"bold",isTitle:!0}),fe(et,{size:11,style:"normal",isTitle:!1})}}):(fe("Retroalimentación Consolidada",{size:14,style:"bold",isTitle:!0}),fe("No se ha generado retroalimentación.",{size:11,style:"normal",isTitle:!1})),W.save(`Acompanamiento_${z.docente.replace(/\s/g,"_")}_${new Date(z.fecha).toLocaleDateString("es-CL")}.pdf`),N(!1)},I=async q=>{if(q.preventDefault(),!M.docente||!M.curso||!M.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}try{let z=m;if(m)await p2e(m,M);else{const W=await m2e(M);g(W.id),j({...M}),z=W.id}await L(),z&&alert("¡Guardado correctamente!")}catch(z){console.error("Error al guardar acompañamiento:",z),u("Error al guardar el registro en la nube.")}},O=()=>{j(R),g(null),h("form"),u(null)},G=q=>{j(q),g(q.id),h("form"),u(null)},se=async q=>{if(window.confirm("¿Está seguro de que desea eliminar este registro de acompañamiento?"))try{await g2e(q),await L()}catch(z){console.error("Error al eliminar acompañamiento:",z),u("No se pudo eliminar el registro en la nube.")}},J=()=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Acompañamiento"}),c.jsx("button",{onClick:O,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Crear Nuevo"})]}),s&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando registros desde la nube..."}),l&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:l}),!s&&t.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay registros de acompañamiento en la nube."}),c.jsx("div",{className:"space-y-4",children:!s&&t.length>0&&t.map(q=>c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:q.docente}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[q.curso," - ",q.asignatura]}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(q.fecha).toLocaleDateString("es-CL")]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>G(q),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver y Editar"}),c.jsx("button",{onClick:()=>se(q.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},q.id))})]}),re=()=>c.jsx("div",{className:"animate-fade-in",children:c.jsxs("form",{onSubmit:I,className:"space-y-8",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:m?"Editando Acompañamiento":"Nuevo Acompañamiento Docente"}),c.jsx("button",{type:"button",onClick:()=>h("list"),className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold",children:"← Volver al listado"})]}),l&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:l}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),c.jsxs("select",{name:"docente",value:M.docente,onChange:E,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:i,children:[c.jsx("option",{value:"",children:i?"Cargando...":"Seleccione"}),r.map(q=>c.jsx("option",{value:q,children:q},q))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:M.curso,onChange:E,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione"}),la.map(q=>c.jsx("option",{value:q,children:q},q))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignatura",value:M.asignatura,onChange:E,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione"}),il.map(q=>c.jsx("option",{value:q,children:q},q))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),c.jsx("input",{type:"text",name:"bloques",value:M.bloques,onChange:E,placeholder:"Ej: 3-4",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Débil (1)"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:k.map(q=>c.jsx(At.Fragment,{children:q.criteria.map((z,W)=>c.jsxs("tr",{children:[W===0&&c.jsx("td",{rowSpan:q.criteria.length,className:"px-3 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600",children:q.domain}),c.jsx("td",{className:"px-3 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:z.name}),z.levels.map((ie,P)=>{const Y=P+1,Z=M.rubricaResultados[z.name]===Y;return c.jsx("td",{onClick:()=>B(z.name,Y),className:`px-3 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${Z?"bg-amber-100 dark:bg-amber-900/30":"hover:bg-amber-50 dark:hover:bg-slate-700"}`,children:ie},Y)})]},z.name))},q.domain))})]})}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones Generales"}),c.jsx("textarea",{name:"observacionesGenerales",value:M.observacionesGenerales,onChange:E,rows:5,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("label",{htmlFor:"retroalimentacionConsolidada",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Retroalimentación Consolidada"}),c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("textarea",{name:"retroalimentacionConsolidada",value:M.retroalimentacionConsolidada,onChange:E,rows:8,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Haga clic en 'Consolidar' para generar la retroalimentación aquí..."}),c.jsx("button",{type:"button",onClick:Q,disabled:b,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:bg-slate-400",children:b?"...":"Consolidar"})]})]}),c.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t dark:border-slate-700",children:[c.jsx("button",{type:"button",onClick:D,disabled:!m||_,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400",children:_?"...":"Exportar PDF"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Acompañamiento"})]})]})});return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Acompañamiento Docente"}),c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:d==="list"?J():re()})]})},DT="mensajes_internos",w2e="usuarios",r7="mensajes_read_status",n7=t=>{var r,n;const e=t.data();return{id:t.id,...e,fecha:((n=(r=e.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fecha}},b2e=(t,e)=>{const r=er(Ft(Tt,DT),Fn("participants","array-contains",t),gn("fecha","desc"));return Tr(r,s=>{const a=s.docs.map(i=>n7(i));e(a)},s=>{console.error("Error al suscribirse a los mensajes:",s),e([])})},C2e=async t=>{try{const e={...t,participants:[t.de,t.para],fecha:cr.fromDate(new Date)};await Cs(Ft(Tt,DT),e)}catch(e){throw console.error("Error al enviar el mensaje:",e),new Error("No se pudo enviar el mensaje.")}},E2e=async t=>{try{const e=yr(Tt,DT,t);await mi(e)}catch(e){throw console.error("Error al eliminar el mensaje:",e),new Error("No se pudo eliminar el mensaje.")}},_2e=(t,e)=>{const r=yr(Tt,r7,t);return Tr(r,s=>{s.exists()?e(s.data()):e({announcements:[],messages:[]})},s=>{console.error("Error al suscribirse al estado de lectura:",s),e({announcements:[],messages:[]})})},S2e=async(t,e)=>{try{const r=yr(Tt,r7,t);await Wi(r,{messages:hY(e)},{merge:!0})}catch(r){throw console.error("Error al marcar mensaje como leído:",r),new Error("No se pudo actualizar el estado de lectura.")}},T2e=t=>{const e=er(Ft(Tt,w2e),gn("nombreCompleto","asc"));return Tr(e,n=>{const s=n.docs.map(a=>n7(a));t(s)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),t([])})},N2e=({currentUser:t,refreshUnreadCount:e})=>{const[r,n]=ee.useState("inbox"),[s,a]=ee.useState([]),[i,o]=ee.useState([]),[l,u]=ee.useState(null),[d,h]=ee.useState({announcements:[],messages:[]}),[m,g]=ee.useState(!0),b={para:"",asunto:"",cuerpo:""},[y,_]=ee.useState(b);ee.useEffect(()=>{if(!t.id||!t.email){g(!1);return}g(!0);const C=b2e(t.email,Q=>{a(Q),g(!1)}),E=T2e(o),B=_2e(t.id,Q=>{h(Q),e()});return()=>{C(),E(),B()}},[t.id,t.email,e]);const N=C=>{u(C),r==="inbox"&&!d.messages.includes(C.id)&&S2e(t.id,C.id).catch(E=>{console.error("Failed to mark message as read:",E)})},k=async C=>{if(C.preventDefault(),!y.para||!y.asunto.trim()||!y.cuerpo.trim()){alert("Destinatario, asunto y cuerpo son obligatorios.");return}const E={de:t.email,para:y.para,asunto:y.asunto,cuerpo:y.cuerpo};try{await C2e(E),_(b),n("sent")}catch(B){console.error("Error sending message:",B),alert("No se pudo enviar el mensaje. Inténtelo de nuevo.")}},R=async C=>{if(window.confirm("¿Está seguro de que desea eliminar este mensaje? Esta acción es irreversible."))try{await E2e(C),u(null)}catch(E){console.error("Error deleting message:",E),alert("No se pudo eliminar el mensaje.")}},M=C=>{_({para:C.de,asunto:`Re: ${C.asunto}`,cuerpo:`

--- Mensaje Original ---
De: ${C.de}
Fecha: ${new Date(C.fecha).toLocaleString("es-CL")}

${C.cuerpo}`}),n("compose")},j=ee.useMemo(()=>s.filter(C=>C.para===t.email),[s,t.email]),L=ee.useMemo(()=>s.filter(C=>C.de===t.email),[s,t.email]);return m?c.jsx("div",{className:"flex items-center justify-center h-full",children:"Cargando mensajería..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-md flex overflow-hidden min-h-[75vh]",children:[c.jsxs("aside",{className:"w-1/4 md:w-1/5 border-r bg-slate-50 dark:bg-slate-800 flex flex-col",children:[c.jsx("div",{className:"p-4 border-b dark:border-slate-700",children:c.jsx("button",{onClick:()=>{n("compose"),u(null),_(b)},className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Redactar"})}),c.jsxs("nav",{className:"p-2 space-y-1",children:[c.jsx("button",{onClick:()=>{n("inbox"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="inbox"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Recibidos"}),c.jsx("button",{onClick:()=>{n("sent"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="sent"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Enviados"})]})]}),r!=="compose"&&c.jsx("div",{className:"w-1/3 md:w-2/5 border-r dark:border-slate-700 overflow-y-auto",children:(r==="inbox"?j:L).map(C=>{const E=r==="inbox"&&!d.messages.includes(C.id);return c.jsxs("div",{onClick:()=>N(C),className:`p-4 border-b dark:border-slate-700 cursor-pointer ${(l==null?void 0:l.id)===C.id?"bg-amber-50 dark:bg-amber-900/20":"hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("p",{className:`font-bold truncate ${E?"text-slate-800 dark:text-slate-200":"text-slate-600 dark:text-slate-400"}`,children:r==="inbox"?C.de:`Para: ${C.para}`}),E&&c.jsx("span",{className:"h-2.5 w-2.5 bg-blue-500 rounded-full flex-shrink-0 ml-2 mt-1"})]}),c.jsx("p",{className:`truncate text-sm ${E?"text-slate-700 dark:text-slate-300 font-semibold":"text-slate-500 dark:text-slate-400"}`,children:C.asunto}),c.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:new Date(C.fecha).toLocaleString("es-CL")})]},C.id)})}),c.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:r==="compose"?c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Nuevo Mensaje"}),c.jsxs("form",{onSubmit:k,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"para",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Para:"}),c.jsxs("select",{id:"para",value:y.para,onChange:C=>_({...y,para:C.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione un destinatario..."}),i.filter(C=>C.email!==t.email).map(C=>c.jsxs("option",{value:C.email,children:[C.nombreCompleto," (",C.email,")"]},C.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asunto:"}),c.jsx("input",{type:"text",id:"asunto",value:y.asunto,onChange:C=>_({...y,asunto:C.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"cuerpo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cuerpo del Mensaje:"}),c.jsx("textarea",{id:"cuerpo",value:y.cuerpo,onChange:C=>_({...y,cuerpo:C.target.value}),required:!0,rows:12,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Enviar Mensaje"})})]})]}):l?c.jsxs("div",{children:[c.jsxs("div",{className:"border-b dark:border-slate-700 pb-4 mb-4",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:l.asunto}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[c.jsx("strong",{children:"De:"})," ",l.de," ",c.jsx("br",{}),c.jsx("strong",{children:"Para:"})," ",l.para," ",c.jsx("br",{}),c.jsx("strong",{children:"Fecha:"})," ",new Date(l.fecha).toLocaleString("es-CL")]})]}),c.jsx("div",{className:"whitespace-pre-wrap text-slate-700 dark:text-slate-300",children:l.cuerpo}),c.jsxs("div",{className:"mt-8 pt-4 border-t dark:border-slate-700 flex gap-2",children:[r==="inbox"&&c.jsx("button",{onClick:()=>M(l),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Responder"}),c.jsx("button",{onClick:()=>R(l.id),className:"bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-200 dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900/60",children:"Eliminar"})]})]}):c.jsx("div",{className:"flex items-center justify-center h-full text-center text-slate-500 dark:text-slate-400",children:c.jsx("p",{children:"Seleccione un mensaje para leerlo."})})})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var LS=function(t,e){return LS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},LS(t,e)};function Mc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");LS(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var US=function(){return US=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},US.apply(this,arguments)};function to(t,e,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function o(d){try{u(n.next(d))}catch(h){i(h)}}function l(d){try{u(n.throw(d))}catch(h){i(h)}}function u(d){d.done?a(d.value):s(d.value).then(o,l)}u((n=n.apply(t,[])).next())})}function Ri(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,s,a,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(u){return function(d){return l([u,d])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(a=u[0]&2?s.return:u[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,u[1])).done)return a;switch(s=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],s=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Kv(t,e,r){if(arguments.length===2)for(var n=0,s=e.length,a;n<s;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||e)}var OA=function(){function t(e,r,n,s){this.left=e,this.top=r,this.width=n,this.height=s}return t.prototype.add=function(e,r,n,s){return new t(this.left+e,this.top+r,this.width+n,this.height+s)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(s){return s.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),ub=function(t,e){return OA.fromClientRect(t,e.getBoundingClientRect())},B2e=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),s=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new OA(0,0,n,s)},Ab=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var a=t.charCodeAt(r++);(a&64512)===56320?e.push(((s&1023)<<10)+(a&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},na=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,a="";++s<r;){var i=t[s];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(s+1===r||n.length>16384)&&(a+=String.fromCharCode.apply(String,n),n.length=0)}return a},UD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k2e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var $v=0;$v<UD.length;$v++)k2e[UD.charCodeAt($v)]=$v;var MD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Cg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Wv=0;Wv<MD.length;Wv++)Cg[MD.charCodeAt(Wv)]=Wv;var I2e=function(t){var e=t.length*.75,r=t.length,n,s=0,a,i,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)a=Cg[t.charCodeAt(n)],i=Cg[t.charCodeAt(n+1)],o=Cg[t.charCodeAt(n+2)],l=Cg[t.charCodeAt(n+3)],d[s++]=a<<2|i>>4,d[s++]=(i&15)<<4|o>>2,d[s++]=(o&3)<<6|l&63;return u},F2e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},D2e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Eh=5,RT=11,QE=2,R2e=RT-Eh,s7=65536>>Eh,L2e=1<<Eh,HE=L2e-1,U2e=1024>>Eh,M2e=s7+U2e,P2e=M2e,j2e=32,O2e=P2e+j2e,Q2e=65536>>RT,H2e=1<<R2e,V2e=H2e-1,PD=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},G2e=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},z2e=function(t,e){var r=I2e(t),n=Array.isArray(r)?D2e(r):new Uint32Array(r),s=Array.isArray(r)?F2e(r):new Uint16Array(r),a=24,i=PD(s,a/2,n[4]/2),o=n[5]===2?PD(s,(a+n[4])/2):G2e(n,Math.ceil((a+n[4])/4));return new q2e(n[0],n[1],n[2],n[3],i,o)},q2e=function(){function t(e,r,n,s,a,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=a,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Eh],r=(r<<QE)+(e&HE),this.data[r];if(e<=65535)return r=this.index[s7+(e-55296>>Eh)],r=(r<<QE)+(e&HE),this.data[r];if(e<this.highStart)return r=O2e-Q2e+(e>>RT),r=this.index[r],r+=e>>Eh&V2e,r=this.index[r],r=(r<<QE)+(e&HE),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),jD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",K2e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Yv=0;Yv<jD.length;Yv++)K2e[jD.charCodeAt(Yv)]=Yv;var $2e="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",OD=50,W2e=1,a7=2,i7=3,Y2e=4,X2e=5,QD=7,o7=8,HD=9,Xd=10,MS=11,VD=12,PS=13,J2e=14,Eg=15,jS=16,Xv=17,ng=18,Z2e=19,GD=20,OS=21,sg=22,VE=23,M0=24,Jo=25,_g=26,Sg=27,P0=28,ewe=29,uh=30,twe=31,Jv=32,Zv=33,QS=34,HS=35,VS=36,Fx=37,GS=38,Gy=39,zy=40,GE=41,l7=42,rwe=43,nwe=[9001,65288],c7="!",ln="×",ey="÷",zS=z2e($2e),vA=[uh,VS],qS=[W2e,a7,i7,X2e],u7=[Xd,o7],zD=[Sg,_g],swe=qS.concat(u7),qD=[GS,Gy,zy,QS,HS],awe=[Eg,PS],iwe=function(t,e){e===void 0&&(e="strict");var r=[],n=[],s=[];return t.forEach(function(a,i){var o=zS.get(a);if(o>OD?(s.push(!0),o-=OD):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(a)!==-1)return n.push(i),r.push(jS);if(o===Y2e||o===MS){if(i===0)return n.push(i),r.push(uh);var l=r[i-1];return swe.indexOf(l)===-1?(n.push(n[i-1]),r.push(l)):(n.push(i),r.push(uh))}if(n.push(i),o===twe)return r.push(e==="strict"?OS:Fx);if(o===l7||o===ewe)return r.push(uh);if(o===rwe)return a>=131072&&a<=196605||a>=196608&&a<=262141?r.push(Fx):r.push(uh);r.push(o)}),[n,r,s]},zE=function(t,e,r,n){var s=n[r];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var a=r;a<=n.length;){a++;var i=n[a];if(i===e)return!0;if(i!==Xd)break}if(s===Xd)for(var a=r;a>0;){a--;var o=n[a];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var l=r;l<=n.length;){l++;var i=n[l];if(i===e)return!0;if(i!==Xd)break}if(o!==Xd)break}return!1},KD=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===Xd)r--;else return n}return 0},owe=function(t,e,r,n,s){if(r[n]===0)return ln;var a=n-1;if(Array.isArray(s)&&s[a]===!0)return ln;var i=a-1,o=a+1,l=e[a],u=i>=0?e[i]:0,d=e[o];if(l===a7&&d===i7)return ln;if(qS.indexOf(l)!==-1)return c7;if(qS.indexOf(d)!==-1||u7.indexOf(d)!==-1)return ln;if(KD(a,e)===o7)return ey;if(zS.get(t[a])===MS||(l===Jv||l===Zv)&&zS.get(t[o])===MS||l===QD||d===QD||l===HD||[Xd,PS,Eg].indexOf(l)===-1&&d===HD||[Xv,ng,Z2e,M0,P0].indexOf(d)!==-1||KD(a,e)===sg||zE(VE,sg,a,e)||zE([Xv,ng],OS,a,e)||zE(VD,VD,a,e))return ln;if(l===Xd)return ey;if(l===VE||d===VE)return ln;if(d===jS||l===jS)return ey;if([PS,Eg,OS].indexOf(d)!==-1||l===J2e||u===VS&&awe.indexOf(l)!==-1||l===P0&&d===VS||d===GD||vA.indexOf(d)!==-1&&l===Jo||vA.indexOf(l)!==-1&&d===Jo||l===Sg&&[Fx,Jv,Zv].indexOf(d)!==-1||[Fx,Jv,Zv].indexOf(l)!==-1&&d===_g||vA.indexOf(l)!==-1&&zD.indexOf(d)!==-1||zD.indexOf(l)!==-1&&vA.indexOf(d)!==-1||[Sg,_g].indexOf(l)!==-1&&(d===Jo||[sg,Eg].indexOf(d)!==-1&&e[o+1]===Jo)||[sg,Eg].indexOf(l)!==-1&&d===Jo||l===Jo&&[Jo,P0,M0].indexOf(d)!==-1)return ln;if([Jo,P0,M0,Xv,ng].indexOf(d)!==-1)for(var h=a;h>=0;){var m=e[h];if(m===Jo)return ln;if([P0,M0].indexOf(m)!==-1)h--;else break}if([Sg,_g].indexOf(d)!==-1)for(var h=[Xv,ng].indexOf(l)!==-1?i:a;h>=0;){var m=e[h];if(m===Jo)return ln;if([P0,M0].indexOf(m)!==-1)h--;else break}if(GS===l&&[GS,Gy,QS,HS].indexOf(d)!==-1||[Gy,QS].indexOf(l)!==-1&&[Gy,zy].indexOf(d)!==-1||[zy,HS].indexOf(l)!==-1&&d===zy||qD.indexOf(l)!==-1&&[GD,_g].indexOf(d)!==-1||qD.indexOf(d)!==-1&&l===Sg||vA.indexOf(l)!==-1&&vA.indexOf(d)!==-1||l===M0&&vA.indexOf(d)!==-1||vA.concat(Jo).indexOf(l)!==-1&&d===sg&&nwe.indexOf(t[o])===-1||vA.concat(Jo).indexOf(d)!==-1&&l===ng)return ln;if(l===GE&&d===GE){for(var g=r[a],b=1;g>0&&(g--,e[g]===GE);)b++;if(b%2!==0)return ln}return l===Jv&&d===Zv?ln:ey},lwe=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=iwe(t,e.lineBreak),n=r[0],s=r[1],a=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(o){return[Jo,uh,l7].indexOf(o)!==-1?Fx:o}));var i=e.wordBreak==="keep-all"?a.map(function(o,l){return o&&t[l]>=19968&&t[l]<=40959}):void 0;return[n,s,i]},cwe=function(){function t(e,r,n,s){this.codePoints=e,this.required=r===c7,this.start=n,this.end=s}return t.prototype.slice=function(){return na.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),uwe=function(t,e){var r=Ab(t),n=lwe(r,e),s=n[0],a=n[1],i=n[2],o=r.length,l=0,u=0;return{next:function(){if(u>=o)return{done:!0,value:null};for(var d=ln;u<o&&(d=owe(r,a,s,++u,i))===ln;);if(d!==ln||u===o){var h=new cwe(r,d,l,u);return l=u,{value:h,done:!1}}return{done:!0,value:null}}}},Awe=1,dwe=2,x1=4,$D=8,z2=10,WD=47,Jg=92,fwe=9,hwe=32,ty=34,ag=61,mwe=35,pwe=36,gwe=37,ry=39,ny=40,ig=41,xwe=95,So=45,vwe=33,ywe=60,wwe=62,bwe=64,Cwe=91,Ewe=93,_we=61,Swe=123,sy=63,Twe=125,YD=124,Nwe=126,Bwe=128,XD=65533,qE=42,fh=43,kwe=44,Iwe=58,Fwe=59,Dx=46,Dwe=0,Rwe=8,Lwe=11,Uwe=14,Mwe=31,Pwe=127,gu=-1,A7=48,d7=97,f7=101,jwe=102,Owe=117,Qwe=122,h7=65,m7=69,p7=70,Hwe=85,Vwe=90,Pi=function(t){return t>=A7&&t<=57},Gwe=function(t){return t>=55296&&t<=57343},j0=function(t){return Pi(t)||t>=h7&&t<=p7||t>=d7&&t<=jwe},zwe=function(t){return t>=d7&&t<=Qwe},qwe=function(t){return t>=h7&&t<=Vwe},Kwe=function(t){return zwe(t)||qwe(t)},$we=function(t){return t>=Bwe},ay=function(t){return t===z2||t===fwe||t===hwe},q2=function(t){return Kwe(t)||$we(t)||t===xwe},JD=function(t){return q2(t)||Pi(t)||t===So},Wwe=function(t){return t>=Dwe&&t<=Rwe||t===Lwe||t>=Uwe&&t<=Mwe||t===Pwe},Pd=function(t,e){return t!==Jg?!1:e!==z2},iy=function(t,e,r){return t===So?q2(e)||Pd(e,r):q2(t)?!0:!!(t===Jg&&Pd(t,e))},KE=function(t,e,r){return t===fh||t===So?Pi(e)?!0:e===Dx&&Pi(r):Pi(t===Dx?e:t)},Ywe=function(t){var e=0,r=1;(t[e]===fh||t[e]===So)&&(t[e]===So&&(r=-1),e++);for(var n=[];Pi(t[e]);)n.push(t[e++]);var s=n.length?parseInt(na.apply(void 0,n),10):0;t[e]===Dx&&e++;for(var a=[];Pi(t[e]);)a.push(t[e++]);var i=a.length,o=i?parseInt(na.apply(void 0,a),10):0;(t[e]===m7||t[e]===f7)&&e++;var l=1;(t[e]===fh||t[e]===So)&&(t[e]===So&&(l=-1),e++);for(var u=[];Pi(t[e]);)u.push(t[e++]);var d=u.length?parseInt(na.apply(void 0,u),10):0;return r*(s+o*Math.pow(10,-i))*Math.pow(10,l*d)},Xwe={type:2},Jwe={type:3},Zwe={type:4},ebe={type:13},tbe={type:8},rbe={type:21},nbe={type:9},sbe={type:10},abe={type:11},ibe={type:12},obe={type:14},oy={type:23},lbe={type:1},cbe={type:25},ube={type:24},Abe={type:26},dbe={type:27},fbe={type:28},hbe={type:29},mbe={type:31},KS={type:32},g7=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(Ab(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==KS;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case ty:return this.consumeStringToken(ty);case mwe:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),s=this.peekCodePoint(2);if(JD(r)||Pd(n,s)){var a=iy(r,n,s)?dwe:Awe,i=this.consumeName();return{type:5,value:i,flags:a}}break;case pwe:if(this.peekCodePoint(0)===ag)return this.consumeCodePoint(),ebe;break;case ry:return this.consumeStringToken(ry);case ny:return Xwe;case ig:return Jwe;case qE:if(this.peekCodePoint(0)===ag)return this.consumeCodePoint(),obe;break;case fh:if(KE(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case kwe:return Zwe;case So:var o=e,l=this.peekCodePoint(0),u=this.peekCodePoint(1);if(KE(o,l,u))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(iy(o,l,u))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(l===So&&u===wwe)return this.consumeCodePoint(),this.consumeCodePoint(),ube;break;case Dx:if(KE(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case WD:if(this.peekCodePoint(0)===qE)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===qE&&(d=this.consumeCodePoint(),d===WD))return this.consumeToken();if(d===gu)return this.consumeToken()}break;case Iwe:return Abe;case Fwe:return dbe;case ywe:if(this.peekCodePoint(0)===vwe&&this.peekCodePoint(1)===So&&this.peekCodePoint(2)===So)return this.consumeCodePoint(),this.consumeCodePoint(),cbe;break;case bwe:var h=this.peekCodePoint(0),m=this.peekCodePoint(1),g=this.peekCodePoint(2);if(iy(h,m,g)){var i=this.consumeName();return{type:7,value:i}}break;case Cwe:return fbe;case Jg:if(Pd(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case Ewe:return hbe;case _we:if(this.peekCodePoint(0)===ag)return this.consumeCodePoint(),tbe;break;case Swe:return abe;case Twe:return ibe;case Owe:case Hwe:var b=this.peekCodePoint(0),y=this.peekCodePoint(1);return b===fh&&(j0(y)||y===sy)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case YD:if(this.peekCodePoint(0)===ag)return this.consumeCodePoint(),nbe;if(this.peekCodePoint(0)===YD)return this.consumeCodePoint(),rbe;break;case Nwe:if(this.peekCodePoint(0)===ag)return this.consumeCodePoint(),sbe;break;case gu:return KS}return ay(e)?(this.consumeWhiteSpace(),mbe):Pi(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):q2(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:na(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();j0(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===sy&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var s=parseInt(na.apply(void 0,e.map(function(l){return l===sy?A7:l})),16),a=parseInt(na.apply(void 0,e.map(function(l){return l===sy?p7:l})),16);return{type:30,start:s,end:a}}var i=parseInt(na.apply(void 0,e),16);if(this.peekCodePoint(0)===So&&j0(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];j0(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var a=parseInt(na.apply(void 0,o),16);return{type:30,start:i,end:a}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===ny?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===ny?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===gu)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===ry||r===ty){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===gu||this.peekCodePoint(0)===ig)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),oy)}for(;;){var s=this.consumeCodePoint();if(s===gu||s===ig)return{type:22,value:na.apply(void 0,e)};if(ay(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===gu||this.peekCodePoint(0)===ig?(this.consumeCodePoint(),{type:22,value:na.apply(void 0,e)}):(this.consumeBadUrlRemnants(),oy);if(s===ty||s===ry||s===ny||Wwe(s))return this.consumeBadUrlRemnants(),oy;if(s===Jg)if(Pd(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),oy;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;ay(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===ig||e===gu)return;Pd(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var s=Math.min(r,e);n+=na.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var s=this._value[n];if(s===gu||s===void 0||s===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(s===z2)return this._value.splice(0,n),lbe;if(s===Jg){var a=this._value[n+1];a!==gu&&a!==void 0&&(a===z2?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):Pd(s,a)&&(r+=this.consumeStringSlice(n),r+=na(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=x1,n=this.peekCodePoint(0);for((n===fh||n===So)&&e.push(this.consumeCodePoint());Pi(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(n===Dx&&Pi(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=$D;Pi(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),s=this.peekCodePoint(1);var a=this.peekCodePoint(2);if((n===m7||n===f7)&&((s===fh||s===So)&&Pi(a)||Pi(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=$D;Pi(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[Ywe(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],s=this.peekCodePoint(0),a=this.peekCodePoint(1),i=this.peekCodePoint(2);if(iy(s,a,i)){var o=this.consumeName();return{type:15,number:r,flags:n,unit:o}}return s===gwe?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(j0(e)){for(var r=na(e);j0(this.peekCodePoint(0))&&r.length<6;)r+=na(this.consumeCodePoint());ay(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||Gwe(n)||n>1114111?XD:n}return e===gu?XD:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(JD(r))e+=na(r);else if(Pd(r,this.peekCodePoint(0)))e+=na(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),x7=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new g7;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||gbe(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?KS:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),v1=function(t){return t.type===15},up=function(t){return t.type===17},ts=function(t){return t.type===20},pbe=function(t){return t.type===0},$S=function(t,e){return ts(t)&&t.value===e},v7=function(t){return t.type!==31},Gm=function(t){return t.type!==31&&t.type!==4},Ou=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},gbe=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},Sf=function(t){return t.type===17||t.type===15},Ea=function(t){return t.type===16||Sf(t)},y7=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},fi={type:17,number:0,flags:x1},LT={type:16,number:50,flags:x1},Jd={type:16,number:100,flags:x1},Tg=function(t,e,r){var n=t[0],s=t[1];return[cs(n,e),cs(typeof s<"u"?s:n,r)]},cs=function(t,e){if(t.type===16)return t.number/100*e;if(v1(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},w7="deg",b7="grad",C7="rad",E7="turn",db={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case w7:return Math.PI*e.number/180;case b7:return Math.PI/200*e.number;case C7:return e.number;case E7:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},_7=function(t){return t.type===15&&(t.unit===w7||t.unit===b7||t.unit===C7||t.unit===E7)},S7=function(t){var e=t.filter(ts).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[fi,fi];case"to top":case"bottom":return Vl(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[fi,Jd];case"to right":case"left":return Vl(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Jd,Jd];case"to bottom":case"top":return Vl(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Jd,fi];case"to left":case"right":return Vl(270)}return 0},Vl=function(t){return Math.PI*t/180},of={name:"color",parse:function(t,e){if(e.type===18){var r=xbe[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),s=e.value.substring(1,2),a=e.value.substring(2,3);return Zd(parseInt(n+n,16),parseInt(s+s,16),parseInt(a+a,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),s=e.value.substring(1,2),a=e.value.substring(2,3),i=e.value.substring(3,4);return Zd(parseInt(n+n,16),parseInt(s+s,16),parseInt(a+a,16),parseInt(i+i,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),s=e.value.substring(2,4),a=e.value.substring(4,6);return Zd(parseInt(n,16),parseInt(s,16),parseInt(a,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),s=e.value.substring(2,4),a=e.value.substring(4,6),i=e.value.substring(6,8);return Zd(parseInt(n,16),parseInt(s,16),parseInt(a,16),parseInt(i,16)/255)}}if(e.type===20){var o=FA[e.value.toUpperCase()];if(typeof o<"u")return o}return FA.TRANSPARENT}},lf=function(t){return(255&t)===0},Ka=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+n+","+r+","+e/255+")":"rgb("+s+","+n+","+r+")"},Zd=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},ZD=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},eR=function(t,e){var r=e.filter(Gm);if(r.length===3){var n=r.map(ZD),s=n[0],a=n[1],i=n[2];return Zd(s,a,i,1)}if(r.length===4){var o=r.map(ZD),s=o[0],a=o[1],i=o[2],l=o[3];return Zd(s,a,i,l)}return 0};function $E(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var tR=function(t,e){var r=e.filter(Gm),n=r[0],s=r[1],a=r[2],i=r[3],o=(n.type===17?Vl(n.number):db.parse(t,n))/(Math.PI*2),l=Ea(s)?s.number/100:0,u=Ea(a)?a.number/100:0,d=typeof i<"u"&&Ea(i)?cs(i,1):1;if(l===0)return Zd(u*255,u*255,u*255,1);var h=u<=.5?u*(l+1):u+l-u*l,m=u*2-h,g=$E(m,h,o+1/3),b=$E(m,h,o),y=$E(m,h,o-1/3);return Zd(g*255,b*255,y*255,d)},xbe={hsl:tR,hsla:tR,rgb:eR,rgba:eR},Zg=function(t,e){return of.parse(t,x7.create(e).parseComponentValue())},FA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},vbe={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(ts(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},ybe={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},fb=function(t,e){var r=of.parse(t,e[0]),n=e[1];return n&&Ea(n)?{color:r,stop:n}:{color:r,stop:null}},rR=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=fi),n.stop===null&&(n.stop=Jd);for(var s=[],a=0,i=0;i<t.length;i++){var o=t[i].stop;if(o!==null){var l=cs(o,e);l>a?s.push(l):s.push(a),a=l}else s.push(null)}for(var u=null,i=0;i<s.length;i++){var d=s[i];if(d===null)u===null&&(u=i);else if(u!==null){for(var h=i-u,m=s[u-1],g=(d-m)/(h+1),b=1;b<=h;b++)s[u+b-1]=g*b;u=null}}return t.map(function(y,_){var N=y.color;return{color:N,stop:Math.max(Math.min(1,s[_]/e),0)}})},wbe=function(t,e,r){var n=e/2,s=r/2,a=cs(t[0],e)-n,i=s-cs(t[1],r);return(Math.atan2(i,a)+Math.PI*2)%(Math.PI*2)},bbe=function(t,e,r){var n=typeof t=="number"?t:wbe(t,e,r),s=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),a=e/2,i=r/2,o=s/2,l=Math.sin(n-Math.PI/2)*o,u=Math.cos(n-Math.PI/2)*o;return[s,a-u,a+u,i-l,i+l]},Cc=function(t,e){return Math.sqrt(t*t+e*e)},nR=function(t,e,r,n,s){var a=[[0,0],[0,e],[t,0],[t,e]];return a.reduce(function(i,o){var l=o[0],u=o[1],d=Cc(r-l,n-u);return(s?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:o,optimumDistance:d}:i},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},Cbe=function(t,e,r,n,s){var a=0,i=0;switch(t.size){case 0:t.shape===0?a=i=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(a=Math.min(Math.abs(e),Math.abs(e-n)),i=Math.min(Math.abs(r),Math.abs(r-s)));break;case 2:if(t.shape===0)a=i=Math.min(Cc(e,r),Cc(e,r-s),Cc(e-n,r),Cc(e-n,r-s));else if(t.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-s))/Math.min(Math.abs(e),Math.abs(e-n)),l=nR(n,s,e,r,!0),u=l[0],d=l[1];a=Cc(u-e,(d-r)/o),i=o*a}break;case 1:t.shape===0?a=i=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(a=Math.max(Math.abs(e),Math.abs(e-n)),i=Math.max(Math.abs(r),Math.abs(r-s)));break;case 3:if(t.shape===0)a=i=Math.max(Cc(e,r),Cc(e,r-s),Cc(e-n,r),Cc(e-n,r-s));else if(t.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-s))/Math.max(Math.abs(e),Math.abs(e-n)),h=nR(n,s,e,r,!1),u=h[0],d=h[1];a=Cc(u-e,(d-r)/o),i=o*a}break}return Array.isArray(t.size)&&(a=cs(t.size[0],n),i=t.size.length===2?cs(t.size[1],s):a),[a,i]},Ebe=function(t,e){var r=Vl(180),n=[];return Ou(e).forEach(function(s,a){if(a===0){var i=s[0];if(i.type===20&&i.value==="to"){r=S7(s);return}else if(_7(i)){r=db.parse(t,i);return}}var o=fb(t,s);n.push(o)}),{angle:r,stops:n,type:1}},ly=function(t,e){var r=Vl(180),n=[];return Ou(e).forEach(function(s,a){if(a===0){var i=s[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=S7(s);return}else if(_7(i)){r=(db.parse(t,i)+Vl(270))%Vl(360);return}}var o=fb(t,s);n.push(o)}),{angle:r,stops:n,type:1}},_be=function(t,e){var r=Vl(180),n=[],s=1,a=0,i=3,o=[];return Ou(e).forEach(function(l,u){var d=l[0];if(u===0){if(ts(d)&&d.value==="linear"){s=1;return}else if(ts(d)&&d.value==="radial"){s=2;return}}if(d.type===18){if(d.name==="from"){var h=of.parse(t,d.values[0]);n.push({stop:fi,color:h})}else if(d.name==="to"){var h=of.parse(t,d.values[0]);n.push({stop:Jd,color:h})}else if(d.name==="color-stop"){var m=d.values.filter(Gm);if(m.length===2){var h=of.parse(t,m[1]),g=m[0];up(g)&&n.push({stop:{type:16,number:g.number*100,flags:g.flags},color:h})}}}}),s===1?{angle:(r+Vl(180))%Vl(360),stops:n,type:s}:{size:i,shape:a,stops:n,position:o,type:s}},T7="closest-side",N7="farthest-side",B7="closest-corner",k7="farthest-corner",I7="circle",F7="ellipse",D7="cover",R7="contain",Sbe=function(t,e){var r=0,n=3,s=[],a=[];return Ou(e).forEach(function(i,o){var l=!0;if(o===0){var u=!1;l=i.reduce(function(h,m){if(u)if(ts(m))switch(m.value){case"center":return a.push(LT),h;case"top":case"left":return a.push(fi),h;case"right":case"bottom":return a.push(Jd),h}else(Ea(m)||Sf(m))&&a.push(m);else if(ts(m))switch(m.value){case I7:return r=0,!1;case F7:return r=1,!1;case"at":return u=!0,!1;case T7:return n=0,!1;case D7:case N7:return n=1,!1;case R7:case B7:return n=2,!1;case k7:return n=3,!1}else if(Sf(m)||Ea(m))return Array.isArray(n)||(n=[]),n.push(m),!1;return h},l)}if(l){var d=fb(t,i);s.push(d)}}),{size:n,shape:r,stops:s,position:a,type:2}},cy=function(t,e){var r=0,n=3,s=[],a=[];return Ou(e).forEach(function(i,o){var l=!0;if(o===0?l=i.reduce(function(d,h){if(ts(h))switch(h.value){case"center":return a.push(LT),!1;case"top":case"left":return a.push(fi),!1;case"right":case"bottom":return a.push(Jd),!1}else if(Ea(h)||Sf(h))return a.push(h),!1;return d},l):o===1&&(l=i.reduce(function(d,h){if(ts(h))switch(h.value){case I7:return r=0,!1;case F7:return r=1,!1;case R7:case T7:return n=0,!1;case N7:return n=1,!1;case B7:return n=2,!1;case D7:case k7:return n=3,!1}else if(Sf(h)||Ea(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return d},l)),l){var u=fb(t,i);s.push(u)}}),{size:n,shape:r,stops:s,position:a,type:2}},Tbe=function(t){return t.type===1},Nbe=function(t){return t.type===2},UT={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=L7[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function Bbe(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!L7[t.name])}var L7={"linear-gradient":Ebe,"-moz-linear-gradient":ly,"-ms-linear-gradient":ly,"-o-linear-gradient":ly,"-webkit-linear-gradient":ly,"radial-gradient":Sbe,"-moz-radial-gradient":cy,"-ms-radial-gradient":cy,"-o-radial-gradient":cy,"-webkit-radial-gradient":cy,"-webkit-gradient":_be},kbe={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return Gm(n)&&Bbe(n)}).map(function(n){return UT.parse(t,n)})}},Ibe={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(ts(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Fbe={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return Ou(e).map(function(r){return r.filter(Ea)}).map(y7)}},Dbe={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return Ou(e).map(function(r){return r.filter(ts).map(function(n){return n.value}).join(" ")}).map(Rbe)}},Rbe=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Sm;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(Sm||(Sm={}));var Lbe={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return Ou(e).map(function(r){return r.filter(Ube)})}},Ube=function(t){return ts(t)||Ea(t)},hb=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Mbe=hb("top"),Pbe=hb("right"),jbe=hb("bottom"),Obe=hb("left"),mb=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return y7(r.filter(Ea))}}},Qbe=mb("top-left"),Hbe=mb("top-right"),Vbe=mb("bottom-right"),Gbe=mb("bottom-left"),pb=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},zbe=pb("top"),qbe=pb("right"),Kbe=pb("bottom"),$be=pb("left"),gb=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return v1(r)?r.number:0}}},Wbe=gb("top"),Ybe=gb("right"),Xbe=gb("bottom"),Jbe=gb("left"),Zbe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},eCe={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},tCe={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(ts).reduce(function(r,n){return r|rCe(n.value)},0)}},rCe=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},nCe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},sCe={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},K2;(function(t){t.NORMAL="normal",t.STRICT="strict"})(K2||(K2={}));var aCe={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return K2.STRICT;case"normal":default:return K2.NORMAL}}},iCe={name:"line-height",initialValue:"normal",prefix:!1,type:4},sR=function(t,e){return ts(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Ea(t)?cs(t,e):e},oCe={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:UT.parse(t,e)}},lCe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},WS={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},xb=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},cCe=xb("top"),uCe=xb("right"),ACe=xb("bottom"),dCe=xb("left"),fCe={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(ts).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},hCe={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},vb=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},mCe=vb("top"),pCe=vb("right"),gCe=vb("bottom"),xCe=vb("left"),vCe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},yCe={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},wCe={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&$S(e[0],"none")?[]:Ou(e).map(function(r){for(var n={color:FA.TRANSPARENT,offsetX:fi,offsetY:fi,blur:fi},s=0,a=0;a<r.length;a++){var i=r[a];Sf(i)?(s===0?n.offsetX=i:s===1?n.offsetY=i:n.blur=i,s++):n.color=of.parse(t,i)}return n})}},bCe={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},CCe={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=SCe[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},ECe=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},_Ce=function(t){var e=t.filter(function(l){return l.type===17}).map(function(l){return l.number}),r=e[0],n=e[1];e[2],e[3];var s=e[4],a=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],o=e[13];return e[14],e[15],e.length===16?[r,n,s,a,i,o]:null},SCe={matrix:ECe,matrix3d:_Ce},aR={type:16,number:50,flags:x1},TCe=[aR,aR],NCe={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(Ea);return r.length!==2?TCe:[r[0],r[1]]}},BCe={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},ex;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(ex||(ex={}));var kCe={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return ex.BREAK_ALL;case"keep-all":return ex.KEEP_ALL;case"normal":default:return ex.NORMAL}}},ICe={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(up(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},U7={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},FCe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return up(e)?e.number:1}},DCe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},RCe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(ts).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},LCe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(s){switch(s.type){case 20:case 0:r.push(s.value);break;case 17:r.push(s.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},UCe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},MCe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(up(e))return e.number;if(ts(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},PCe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(ts).map(function(r){return r.value})}},jCe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},La=function(t,e){return(t&e)!==0},OCe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},QCe={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],s=e.filter(v7),a=0;a<s.length;a++){var i=s[a],o=s[a+1];if(i.type===20){var l=o&&up(o)?o.number:1;n.push({counter:i.value,increment:l})}}return n}},HCe={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(v7),s=0;s<n.length;s++){var a=n[s],i=n[s+1];if(ts(a)&&a.value!=="none"){var o=i&&up(i)?i.number:0;r.push({counter:a.value,reset:o})}}return r}},VCe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(v1).map(function(r){return U7.parse(t,r)})}},GCe={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],s=e.filter(pbe);if(s.length%2!==0)return null;for(var a=0;a<s.length;a+=2){var i=s[a].value,o=s[a+1].value;n.push({open:i,close:o})}return n}},iR=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},zCe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&$S(e[0],"none")?[]:Ou(e).map(function(r){for(var n={color:255,offsetX:fi,offsetY:fi,blur:fi,spread:fi,inset:!1},s=0,a=0;a<r.length;a++){var i=r[a];$S(i,"inset")?n.inset=!0:Sf(i)?(s===0?n.offsetX=i:s===1?n.offsetY=i:s===2?n.blur=i:n.spread=i,s++):n.color=of.parse(t,i)}return n})}},qCe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(ts).forEach(function(s){switch(s.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(s){n.indexOf(s)===-1&&n.push(s)}),n}},KCe={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},$Ce={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return v1(e)?e.number:0}},WCe=function(){function t(e,r){var n,s;this.animationDuration=Yt(e,VCe,r.animationDuration),this.backgroundClip=Yt(e,vbe,r.backgroundClip),this.backgroundColor=Yt(e,ybe,r.backgroundColor),this.backgroundImage=Yt(e,kbe,r.backgroundImage),this.backgroundOrigin=Yt(e,Ibe,r.backgroundOrigin),this.backgroundPosition=Yt(e,Fbe,r.backgroundPosition),this.backgroundRepeat=Yt(e,Dbe,r.backgroundRepeat),this.backgroundSize=Yt(e,Lbe,r.backgroundSize),this.borderTopColor=Yt(e,Mbe,r.borderTopColor),this.borderRightColor=Yt(e,Pbe,r.borderRightColor),this.borderBottomColor=Yt(e,jbe,r.borderBottomColor),this.borderLeftColor=Yt(e,Obe,r.borderLeftColor),this.borderTopLeftRadius=Yt(e,Qbe,r.borderTopLeftRadius),this.borderTopRightRadius=Yt(e,Hbe,r.borderTopRightRadius),this.borderBottomRightRadius=Yt(e,Vbe,r.borderBottomRightRadius),this.borderBottomLeftRadius=Yt(e,Gbe,r.borderBottomLeftRadius),this.borderTopStyle=Yt(e,zbe,r.borderTopStyle),this.borderRightStyle=Yt(e,qbe,r.borderRightStyle),this.borderBottomStyle=Yt(e,Kbe,r.borderBottomStyle),this.borderLeftStyle=Yt(e,$be,r.borderLeftStyle),this.borderTopWidth=Yt(e,Wbe,r.borderTopWidth),this.borderRightWidth=Yt(e,Ybe,r.borderRightWidth),this.borderBottomWidth=Yt(e,Xbe,r.borderBottomWidth),this.borderLeftWidth=Yt(e,Jbe,r.borderLeftWidth),this.boxShadow=Yt(e,zCe,r.boxShadow),this.color=Yt(e,Zbe,r.color),this.direction=Yt(e,eCe,r.direction),this.display=Yt(e,tCe,r.display),this.float=Yt(e,nCe,r.cssFloat),this.fontFamily=Yt(e,LCe,r.fontFamily),this.fontSize=Yt(e,UCe,r.fontSize),this.fontStyle=Yt(e,jCe,r.fontStyle),this.fontVariant=Yt(e,PCe,r.fontVariant),this.fontWeight=Yt(e,MCe,r.fontWeight),this.letterSpacing=Yt(e,sCe,r.letterSpacing),this.lineBreak=Yt(e,aCe,r.lineBreak),this.lineHeight=Yt(e,iCe,r.lineHeight),this.listStyleImage=Yt(e,oCe,r.listStyleImage),this.listStylePosition=Yt(e,lCe,r.listStylePosition),this.listStyleType=Yt(e,WS,r.listStyleType),this.marginTop=Yt(e,cCe,r.marginTop),this.marginRight=Yt(e,uCe,r.marginRight),this.marginBottom=Yt(e,ACe,r.marginBottom),this.marginLeft=Yt(e,dCe,r.marginLeft),this.opacity=Yt(e,FCe,r.opacity);var a=Yt(e,fCe,r.overflow);this.overflowX=a[0],this.overflowY=a[a.length>1?1:0],this.overflowWrap=Yt(e,hCe,r.overflowWrap),this.paddingTop=Yt(e,mCe,r.paddingTop),this.paddingRight=Yt(e,pCe,r.paddingRight),this.paddingBottom=Yt(e,gCe,r.paddingBottom),this.paddingLeft=Yt(e,xCe,r.paddingLeft),this.paintOrder=Yt(e,qCe,r.paintOrder),this.position=Yt(e,yCe,r.position),this.textAlign=Yt(e,vCe,r.textAlign),this.textDecorationColor=Yt(e,DCe,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=Yt(e,RCe,(s=r.textDecorationLine)!==null&&s!==void 0?s:r.textDecoration),this.textShadow=Yt(e,wCe,r.textShadow),this.textTransform=Yt(e,bCe,r.textTransform),this.transform=Yt(e,CCe,r.transform),this.transformOrigin=Yt(e,NCe,r.transformOrigin),this.visibility=Yt(e,BCe,r.visibility),this.webkitTextStrokeColor=Yt(e,KCe,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=Yt(e,$Ce,r.webkitTextStrokeWidth),this.wordBreak=Yt(e,kCe,r.wordBreak),this.zIndex=Yt(e,ICe,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return lf(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return La(this.display,4)||La(this.display,33554432)||La(this.display,268435456)||La(this.display,536870912)||La(this.display,67108864)||La(this.display,134217728)},t}(),YCe=function(){function t(e,r){this.content=Yt(e,OCe,r.content),this.quotes=Yt(e,GCe,r.quotes)}return t}(),oR=function(){function t(e,r){this.counterIncrement=Yt(e,QCe,r.counterIncrement),this.counterReset=Yt(e,HCe,r.counterReset)}return t}(),Yt=function(t,e,r){var n=new g7,s=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(s);var a=new x7(n.read());switch(e.type){case 2:var i=a.parseComponentValue();return e.parse(t,ts(i)?i.value:e.initialValue);case 0:return e.parse(t,a.parseComponentValue());case 1:return e.parse(t,a.parseComponentValues());case 4:return a.parseComponentValue();case 3:switch(e.format){case"angle":return db.parse(t,a.parseComponentValue());case"color":return of.parse(t,a.parseComponentValue());case"image":return UT.parse(t,a.parseComponentValue());case"length":var o=a.parseComponentValue();return Sf(o)?o:fi;case"length-percentage":var l=a.parseComponentValue();return Ea(l)?l:fi;case"time":return U7.parse(t,a.parseComponentValue())}break}},XCe="data-html2canvas-debug",JCe=function(t){var e=t.getAttribute(XCe);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},YS=function(t,e){var r=JCe(t);return r===1||e===r},Qu=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,YS(r,3))debugger;this.styles=new WCe(e,window.getComputedStyle(r,null)),ZS(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=ub(this.context,r),YS(r,4)&&(this.flags|=16)}return t}(),ZCe="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",lR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ng=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var uy=0;uy<lR.length;uy++)Ng[lR.charCodeAt(uy)]=uy;var eEe=function(t){var e=t.length*.75,r=t.length,n,s=0,a,i,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)a=Ng[t.charCodeAt(n)],i=Ng[t.charCodeAt(n+1)],o=Ng[t.charCodeAt(n+2)],l=Ng[t.charCodeAt(n+3)],d[s++]=a<<2|i>>4,d[s++]=(i&15)<<4|o>>2,d[s++]=(o&3)<<6|l&63;return u},tEe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},rEe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},_h=5,MT=11,WE=2,nEe=MT-_h,M7=65536>>_h,sEe=1<<_h,YE=sEe-1,aEe=1024>>_h,iEe=M7+aEe,oEe=iEe,lEe=32,cEe=oEe+lEe,uEe=65536>>MT,AEe=1<<nEe,dEe=AEe-1,cR=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},fEe=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},hEe=function(t,e){var r=eEe(t),n=Array.isArray(r)?rEe(r):new Uint32Array(r),s=Array.isArray(r)?tEe(r):new Uint16Array(r),a=24,i=cR(s,a/2,n[4]/2),o=n[5]===2?cR(s,(a+n[4])/2):fEe(n,Math.ceil((a+n[4])/4));return new mEe(n[0],n[1],n[2],n[3],i,o)},mEe=function(){function t(e,r,n,s,a,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=a,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>_h],r=(r<<WE)+(e&YE),this.data[r];if(e<=65535)return r=this.index[M7+(e-55296>>_h)],r=(r<<WE)+(e&YE),this.data[r];if(e<this.highStart)return r=cEe-uEe+(e>>MT),r=this.index[r],r+=e>>_h&dEe,r=this.index[r],r=(r<<WE)+(e&YE),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),uR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pEe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ay=0;Ay<uR.length;Ay++)pEe[uR.charCodeAt(Ay)]=Ay;var gEe=1,XE=2,JE=3,AR=4,dR=5,xEe=7,fR=8,ZE=9,e_=10,hR=11,mR=12,pR=13,gR=14,t_=15,vEe=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var a=t.charCodeAt(r++);(a&64512)===56320?e.push(((s&1023)<<10)+(a&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},yEe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,a="";++s<r;){var i=t[s];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(s+1===r||n.length>16384)&&(a+=String.fromCharCode.apply(String,n),n.length=0)}return a},wEe=hEe(ZCe),Ml="×",r_="÷",bEe=function(t){return wEe.get(t)},CEe=function(t,e,r){var n=r-2,s=e[n],a=e[r-1],i=e[r];if(a===XE&&i===JE)return Ml;if(a===XE||a===JE||a===AR||i===XE||i===JE||i===AR)return r_;if(a===fR&&[fR,ZE,hR,mR].indexOf(i)!==-1||(a===hR||a===ZE)&&(i===ZE||i===e_)||(a===mR||a===e_)&&i===e_||i===pR||i===dR||i===xEe||a===gEe)return Ml;if(a===pR&&i===gR){for(;s===dR;)s=e[--n];if(s===gR)return Ml}if(a===t_&&i===t_){for(var o=0;s===t_;)o++,s=e[--n];if(o%2===0)return Ml}return r_},EEe=function(t){var e=vEe(t),r=e.length,n=0,s=0,a=e.map(bEe);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=Ml;n<r&&(i=CEe(e,a,++n))===Ml;);if(i!==Ml||n===r){var o=yEe.apply(null,e.slice(s,n));return s=n,{value:o,done:!1}}return{done:!0,value:null}}}},_Ee=function(t){for(var e=EEe(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},SEe=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var s=r.getBoundingClientRect(),a=Math.round(s.height);if(t.body.removeChild(n),a===e)return!0}}return!1},TEe=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,s=Ab(n.data).map(function(l){return na(l)}),a=0,i={},o=s.every(function(l,u){r.setStart(n,a),r.setEnd(n,a+l.length);var d=r.getBoundingClientRect();a+=l.length;var h=d.x>i.x||d.y>i.y;return i=d,u===0?!0:h});return t.body.removeChild(e),o},NEe=function(){return typeof new Image().crossOrigin<"u"},BEe=function(){return typeof new XMLHttpRequest().responseType=="string"},kEe=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},xR=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},IEe=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var s=new Image,a=e.toDataURL();s.src=a;var i=XS(r,r,0,0,s);return n.fillStyle="red",n.fillRect(0,0,r,r),vR(i).then(function(o){n.drawImage(o,0,0);var l=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=t.createElement("div");return u.style.backgroundImage="url("+a+")",u.style.height=r+"px",xR(l)?vR(XS(r,r,0,0,u)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),xR(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},XS=function(t,e,r,n,s){var a="http://www.w3.org/2000/svg",i=document.createElementNS(a,"svg"),o=document.createElementNS(a,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(s),i},vR=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},li={get SUPPORT_RANGE_BOUNDS(){var t=SEe(document);return Object.defineProperty(li,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=li.SUPPORT_RANGE_BOUNDS&&TEe(document);return Object.defineProperty(li,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=kEe(document);return Object.defineProperty(li,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?IEe(document):Promise.resolve(!1);return Object.defineProperty(li,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=NEe();return Object.defineProperty(li,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=BEe();return Object.defineProperty(li,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(li,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(li,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},tx=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),FEe=function(t,e,r,n){var s=LEe(e,r),a=[],i=0;return s.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(li.SUPPORT_RANGE_BOUNDS){var l=yR(n,i,o.length).getClientRects();if(l.length>1){var u=PT(o),d=0;u.forEach(function(m){a.push(new tx(m,OA.fromDOMRectList(t,yR(n,d+i,m.length).getClientRects()))),d+=m.length})}else a.push(new tx(o,OA.fromDOMRectList(t,l)))}else{var h=n.splitText(o.length);a.push(new tx(o,DEe(t,n))),n=h}else li.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));i+=o.length}),a},DEe=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(n,e);var a=ub(t,n);return n.firstChild&&s.replaceChild(n.firstChild,n),a}}return OA.EMPTY},yR=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var s=n.createRange();return s.setStart(t,e),s.setEnd(t,e+r),s},PT=function(t){if(li.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return _Ee(t)},REe=function(t,e){if(li.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return MEe(t,e)},LEe=function(t,e){return e.letterSpacing!==0?PT(t):REe(t,e)},UEe=[32,160,4961,65792,65793,4153,4241],MEe=function(t,e){for(var r=uwe(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],s,a=function(){if(s.value){var i=s.value.slice(),o=Ab(i),l="";o.forEach(function(u){UEe.indexOf(u)===-1?l+=na(u):(l.length&&n.push(l),n.push(na(u)),l="")}),l.length&&n.push(l)}};!(s=r.next()).done;)a();return n},PEe=function(){function t(e,r,n){this.text=jEe(r.data,n.textTransform),this.textBounds=FEe(e,this.text,n,r)}return t}(),jEe=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(OEe,QEe);case 2:return t.toUpperCase();default:return t}},OEe=/(^|\s|:|-|\(|\))([a-z])/g,QEe=function(t,e,r){return t.length>0?e+r.toUpperCase():t},P7=function(t){Mc(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.src=n.currentSrc||n.src,s.intrinsicWidth=n.naturalWidth,s.intrinsicHeight=n.naturalHeight,s.context.cache.addImage(s.src),s}return e}(Qu),j7=function(t){Mc(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n,s.intrinsicWidth=n.width,s.intrinsicHeight=n.height,s}return e}(Qu),O7=function(t){Mc(e,t);function e(r,n){var s=t.call(this,r,n)||this,a=new XMLSerializer,i=ub(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(a.serializeToString(n)),s.intrinsicWidth=n.width.baseVal.value,s.intrinsicHeight=n.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(Qu),Q7=function(t){Mc(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(Qu),JS=function(t){Mc(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.start=n.start,s.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,s}return e}(Qu),HEe=[{type:15,flags:0,unit:"px",number:3}],VEe=[{type:16,flags:0,number:50}],GEe=function(t){return t.width>t.height?new OA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new OA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},zEe=function(t){var e=t.type===qEe?new Array(t.value.length+1).join("•"):t.value;return e.length===0?t.placeholder||"":e},$2="checkbox",W2="radio",qEe="password",wR=707406591,jT=function(t){Mc(e,t);function e(r,n){var s=t.call(this,r,n)||this;switch(s.type=n.type.toLowerCase(),s.checked=n.checked,s.value=zEe(n),(s.type===$2||s.type===W2)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=GEe(s.bounds)),s.type){case $2:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=HEe;break;case W2:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=VEe;break}return s}return e}(Qu),H7=function(t){Mc(e,t);function e(r,n){var s=t.call(this,r,n)||this,a=n.options[n.selectedIndex||0];return s.value=a&&a.text||"",s}return e}(Qu),V7=function(t){Mc(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(Qu),G7=function(t){Mc(e,t);function e(r,n){var s=t.call(this,r,n)||this;s.src=n.src,s.width=parseInt(n.width,10)||0,s.height=parseInt(n.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){s.tree=q7(r,n.contentWindow.document.documentElement);var a=n.contentWindow.document.documentElement?Zg(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):FA.TRANSPARENT,i=n.contentWindow.document.body?Zg(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):FA.TRANSPARENT;s.backgroundColor=lf(a)?lf(i)?s.styles.backgroundColor:i:a}}catch{}return s}return e}(Qu),KEe=["OL","UL","MENU"],qy=function(t,e,r,n){for(var s=e.firstChild,a=void 0;s;s=a)if(a=s.nextSibling,K7(s)&&s.data.trim().length>0)r.textNodes.push(new PEe(t,s,r.styles));else if(lm(s))if(X7(s)&&s.assignedNodes)s.assignedNodes().forEach(function(o){return qy(t,o,r,n)});else{var i=z7(t,s);i.styles.isVisible()&&($Ee(s,i,n)?i.flags|=4:WEe(i.styles)&&(i.flags|=2),KEe.indexOf(s.tagName)!==-1&&(i.flags|=8),r.elements.push(i),s.slot,s.shadowRoot?qy(t,s.shadowRoot,i,n):!Y2(s)&&!$7(s)&&!X2(s)&&qy(t,s,i,n))}},z7=function(t,e){return e5(e)?new P7(t,e):W7(e)?new j7(t,e):$7(e)?new O7(t,e):YEe(e)?new Q7(t,e):XEe(e)?new JS(t,e):JEe(e)?new jT(t,e):X2(e)?new H7(t,e):Y2(e)?new V7(t,e):Y7(e)?new G7(t,e):new Qu(t,e)},q7=function(t,e){var r=z7(t,e);return r.flags|=4,qy(t,e,r,r),r},$Ee=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||OT(t)&&r.styles.isTransparent()},WEe=function(t){return t.isPositioned()||t.isFloating()},K7=function(t){return t.nodeType===Node.TEXT_NODE},lm=function(t){return t.nodeType===Node.ELEMENT_NODE},ZS=function(t){return lm(t)&&typeof t.style<"u"&&!Ky(t)},Ky=function(t){return typeof t.className=="object"},YEe=function(t){return t.tagName==="LI"},XEe=function(t){return t.tagName==="OL"},JEe=function(t){return t.tagName==="INPUT"},ZEe=function(t){return t.tagName==="HTML"},$7=function(t){return t.tagName==="svg"},OT=function(t){return t.tagName==="BODY"},W7=function(t){return t.tagName==="CANVAS"},bR=function(t){return t.tagName==="VIDEO"},e5=function(t){return t.tagName==="IMG"},Y7=function(t){return t.tagName==="IFRAME"},CR=function(t){return t.tagName==="STYLE"},e_e=function(t){return t.tagName==="SCRIPT"},Y2=function(t){return t.tagName==="TEXTAREA"},X2=function(t){return t.tagName==="SELECT"},X7=function(t){return t.tagName==="SLOT"},ER=function(t){return t.tagName.indexOf("-")>0},t_e=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,s=e.counterReset,a=!0;n!==null&&n.forEach(function(o){var l=r.counters[o.counter];l&&o.increment!==0&&(a=!1,l.length||l.push(1),l[Math.max(0,l.length-1)]+=o.increment)});var i=[];return a&&s.forEach(function(o){var l=r.counters[o.counter];i.push(o.counter),l||(l=r.counters[o.counter]=[]),l.push(o.reset)}),i},t}(),_R={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},SR={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},r_e={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},n_e={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},O0=function(t,e,r,n,s,a){return t<e||t>r?Rx(t,s,a.length>0):n.integers.reduce(function(i,o,l){for(;t>=o;)t-=o,i+=n.values[l];return i},"")+a},J7=function(t,e,r,n){var s="";do r||t--,s=n(t)+s,t/=e;while(t*e>=e);return s},ta=function(t,e,r,n,s){var a=r-e+1;return(t<0?"-":"")+(J7(Math.abs(t),a,n,function(i){return na(Math.floor(i%a)+e)})+s)},nh=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return J7(Math.abs(t),n,!1,function(s){return e[Math.floor(s%n)]})+r},rm=1,Ld=2,Ud=4,Bg=8,yA=function(t,e,r,n,s,a){if(t<-9999||t>9999)return Rx(t,4,s.length>0);var i=Math.abs(t),o=s;if(i===0)return e[0]+o;for(var l=0;i>0&&l<=4;l++){var u=i%10;u===0&&La(a,rm)&&o!==""?o=e[u]+o:u>1||u===1&&l===0||u===1&&l===1&&La(a,Ld)||u===1&&l===1&&La(a,Ud)&&t>100||u===1&&l>1&&La(a,Bg)?o=e[u]+(l>0?r[l-1]:"")+o:u===1&&l>0&&(o=r[l-1]+o),i=Math.floor(i/10)}return(t<0?n:"")+o},TR="十百千萬",NR="拾佰仟萬",BR="マイナス",n_="마이너스",Rx=function(t,e,r){var n=r?". ":"",s=r?"、":"",a=r?", ":"",i=r?" ":"";switch(e){case 0:return"•"+i;case 1:return"◦"+i;case 2:return"◾"+i;case 5:var o=ta(t,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return nh(t,"〇一二三四五六七八九",s);case 6:return O0(t,1,3999,_R,3,n).toLowerCase();case 7:return O0(t,1,3999,_R,3,n);case 8:return ta(t,945,969,!1,n);case 9:return ta(t,97,122,!1,n);case 10:return ta(t,65,90,!1,n);case 11:return ta(t,1632,1641,!0,n);case 12:case 49:return O0(t,1,9999,SR,3,n);case 35:return O0(t,1,9999,SR,3,n).toLowerCase();case 13:return ta(t,2534,2543,!0,n);case 14:case 30:return ta(t,6112,6121,!0,n);case 15:return nh(t,"子丑寅卯辰巳午未申酉戌亥",s);case 16:return nh(t,"甲乙丙丁戊己庚辛壬癸",s);case 17:case 48:return yA(t,"零一二三四五六七八九",TR,"負",s,Ld|Ud|Bg);case 47:return yA(t,"零壹貳參肆伍陸柒捌玖",NR,"負",s,rm|Ld|Ud|Bg);case 42:return yA(t,"零一二三四五六七八九",TR,"负",s,Ld|Ud|Bg);case 41:return yA(t,"零壹贰叁肆伍陆柒捌玖",NR,"负",s,rm|Ld|Ud|Bg);case 26:return yA(t,"〇一二三四五六七八九","十百千万",BR,s,0);case 25:return yA(t,"零壱弐参四伍六七八九","拾百千万",BR,s,rm|Ld|Ud);case 31:return yA(t,"영일이삼사오육칠팔구","십백천만",n_,a,rm|Ld|Ud);case 33:return yA(t,"零一二三四五六七八九","十百千萬",n_,a,0);case 32:return yA(t,"零壹貳參四五六七八九","拾百千",n_,a,rm|Ld|Ud);case 18:return ta(t,2406,2415,!0,n);case 20:return O0(t,1,19999,n_e,3,n);case 21:return ta(t,2790,2799,!0,n);case 22:return ta(t,2662,2671,!0,n);case 22:return O0(t,1,10999,r_e,3,n);case 23:return nh(t,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return nh(t,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return ta(t,3302,3311,!0,n);case 28:return nh(t,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",s);case 29:return nh(t,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",s);case 34:return ta(t,3792,3801,!0,n);case 37:return ta(t,6160,6169,!0,n);case 38:return ta(t,4160,4169,!0,n);case 39:return ta(t,2918,2927,!0,n);case 40:return ta(t,1776,1785,!0,n);case 43:return ta(t,3046,3055,!0,n);case 44:return ta(t,3174,3183,!0,n);case 45:return ta(t,3664,3673,!0,n);case 46:return ta(t,3872,3881,!0,n);case 3:default:return ta(t,48,57,!0,n)}},Z7="data-html2canvas-ignore",kR=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new t_e,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,s=s_e(e,r);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var a=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,o=s.contentWindow,l=o.document,u=o_e(s).then(function(){return to(n,void 0,void 0,function(){var d,h;return Ri(this,function(m){switch(m.label){case 0:return this.scrolledElements.forEach(A_e),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),d=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:m.sent(),m.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,i_e(l)]:[3,4];case 3:m.sent(),m.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(l,h)}).then(function(){return s})]:[2,s]}})})});return l.open(),l.write(c_e(document.doctype)+"<html></html>"),u_e(this.referenceElement.ownerDocument,a,i),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),u},t.prototype.createElementClone=function(e){if(YS(e,2))debugger;if(W7(e))return this.createCanvasClone(e);if(bR(e))return this.createVideoClone(e);if(CR(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return e5(r)&&(e5(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),ER(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return s_(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(a,i){return i&&typeof i.cssText=="string"?a+i.cssText:a},""),s=e.cloneNode(!1);return s.textContent=n,s}}catch(a){if(this.context.logger.error("Unable to access cssRules property",a),a.name!=="SecurityError")throw a}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var a=e.getContext("2d"),i=s.getContext("2d");if(i)if(!this.options.allowTaint&&a)i.putImageData(a.getImageData(0,0,e.width,e.height),0,0);else{var o=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(o){var l=o.getContextAttributes();(l==null?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,r,n){(!lm(r)||!e_e(r)&&!r.hasAttribute(Z7)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!lm(r)||!CR(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var s=this,a=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;a;a=a.nextSibling)if(lm(a)&&X7(a)&&typeof a.assignedNodes=="function"){var i=a.assignedNodes();i.length&&i.forEach(function(o){return s.appendChildNode(r,o,n)})}else this.appendChildNode(r,a,n)},t.prototype.cloneNode=function(e,r){if(K7(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&lm(e)&&(ZS(e)||Ky(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var a=n.getComputedStyle(e),i=n.getComputedStyle(e,":before"),o=n.getComputedStyle(e,":after");this.referenceElement===e&&ZS(s)&&(this.clonedReferenceElement=s),OT(s)&&h_e(s);var l=this.counters.parse(new oR(this.context,a)),u=this.resolvePseudoContent(e,s,i,rx.BEFORE);ER(e)&&(r=!0),bR(e)||this.cloneChildNodes(e,s,r),u&&s.insertBefore(u,s.firstChild);var d=this.resolvePseudoContent(e,s,o,rx.AFTER);return d&&s.appendChild(d),this.counters.pop(l),(a&&(this.options.copyStyles||Ky(e))&&!Y7(e)||r)&&s_(a,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(Y2(e)||X2(e))&&(Y2(s)||X2(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,s){var a=this;if(n){var i=n.content,o=r.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new oR(this.context,n));var l=new YCe(this.context,n),u=o.createElement("html2canvaspseudoelement");s_(n,u),l.content.forEach(function(h){if(h.type===0)u.appendChild(o.createTextNode(h.value));else if(h.type===22){var m=o.createElement("img");m.src=h.value,m.style.opacity="1",u.appendChild(m)}else if(h.type===18){if(h.name==="attr"){var g=h.values.filter(ts);g.length&&u.appendChild(o.createTextNode(e.getAttribute(g[0].value)||""))}else if(h.name==="counter"){var b=h.values.filter(Gm),y=b[0],_=b[1];if(y&&ts(y)){var N=a.counters.getCounterValue(y.value),k=_&&ts(_)?WS.parse(a.context,_.value):3;u.appendChild(o.createTextNode(Rx(N,k,!1)))}}else if(h.name==="counters"){var R=h.values.filter(Gm),y=R[0],M=R[1],_=R[2];if(y&&ts(y)){var j=a.counters.getCounterValues(y.value),L=_&&ts(_)?WS.parse(a.context,_.value):3,C=M&&M.type===0?M.value:"",E=j.map(function(D){return Rx(D,L,!1)}).join(C);u.appendChild(o.createTextNode(E))}}}else if(h.type===20)switch(h.value){case"open-quote":u.appendChild(o.createTextNode(iR(l.quotes,a.quoteDepth++,!0)));break;case"close-quote":u.appendChild(o.createTextNode(iR(l.quotes,--a.quoteDepth,!1)));break;default:u.appendChild(o.createTextNode(h.value))}}),u.className=t5+" "+r5;var d=s===rx.BEFORE?" "+t5:" "+r5;return Ky(r)?r.className.baseValue+=d:r.className+=d,u}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),rx;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(rx||(rx={}));var s_e=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(Z7,"true"),t.body.appendChild(r),r},a_e=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},i_e=function(t){return Promise.all([].slice.call(t.images,0).map(a_e))},o_e=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var s=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var a=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(a),e(t))},50)}})},l_e=["all","d","content"],s_=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);l_e.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},c_e=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},u_e=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},A_e=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},d_e=":before",f_e=":after",t5="___html2canvas___pseudoelement_before",r5="___html2canvas___pseudoelement_after",IR=`{
    content: "" !important;
    display: none !important;
}`,h_e=function(t){m_e(t,"."+t5+d_e+IR+`
         .`+r5+f_e+IR)},m_e=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},eQ=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),p_e=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(i_(e)||y_e(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return to(this,void 0,void 0,function(){var r,n,s,a,i=this;return Ri(this,function(o){switch(o.label){case 0:return r=eQ.isSameOrigin(e),n=!a_(e)&&this._options.useCORS===!0&&li.SUPPORT_CORS_IMAGES&&!r,s=!a_(e)&&!r&&!i_(e)&&typeof this._options.proxy=="string"&&li.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!a_(e)&&!i_(e)&&!s&&!n?[2]:(a=e,s?[4,this.proxy(a)]:[3,2]);case 1:a=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(l,u){var d=new Image;d.onload=function(){return l(d)},d.onerror=u,(w_e(a)||n)&&(d.crossOrigin="anonymous"),d.src=a,d.complete===!0&&setTimeout(function(){return l(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(a,i){var o=li.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(l.status===200)if(o==="text")a(l.response);else{var h=new FileReader;h.addEventListener("load",function(){return a(h.result)},!1),h.addEventListener("error",function(m){return i(m)},!1),h.readAsDataURL(l.response)}else i("Failed to proxy resource "+s+" with status code "+l.status)},l.onerror=i;var u=n.indexOf("?")>-1?"&":"?";if(l.open("GET",""+n+u+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&l instanceof XMLHttpRequest&&(l.responseType=o),r._options.imageTimeout){var d=r._options.imageTimeout;l.timeout=d,l.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+s)}}l.send()})},t}(),g_e=/^data:image\/svg\+xml/i,x_e=/^data:image\/.*;base64,/i,v_e=/^data:image\/.*/i,y_e=function(t){return li.SUPPORT_SVG_DRAWING||!b_e(t)},a_=function(t){return v_e.test(t)},w_e=function(t){return x_e.test(t)},i_=function(t){return t.substr(0,4)==="blob"},b_e=function(t){return t.substr(-3).toLowerCase()==="svg"||g_e.test(t)},$t=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),Q0=function(t,e,r){return new $t(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},dy=function(){function t(e,r,n,s){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=s}return t.prototype.subdivide=function(e,r){var n=Q0(this.start,this.startControl,e),s=Q0(this.startControl,this.endControl,e),a=Q0(this.endControl,this.end,e),i=Q0(n,s,e),o=Q0(s,a,e),l=Q0(i,o,e);return r?new t(this.start,n,i,l):new t(l,o,a,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),jl=function(t){return t.type===1},C_e=function(){function t(e){var r=e.styles,n=e.bounds,s=Tg(r.borderTopLeftRadius,n.width,n.height),a=s[0],i=s[1],o=Tg(r.borderTopRightRadius,n.width,n.height),l=o[0],u=o[1],d=Tg(r.borderBottomRightRadius,n.width,n.height),h=d[0],m=d[1],g=Tg(r.borderBottomLeftRadius,n.width,n.height),b=g[0],y=g[1],_=[];_.push((a+l)/n.width),_.push((b+h)/n.width),_.push((i+y)/n.height),_.push((u+m)/n.height);var N=Math.max.apply(Math,_);N>1&&(a/=N,i/=N,l/=N,u/=N,h/=N,m/=N,b/=N,y/=N);var k=n.width-l,R=n.height-m,M=n.width-h,j=n.height-y,L=r.borderTopWidth,C=r.borderRightWidth,E=r.borderBottomWidth,B=r.borderLeftWidth,Q=cs(r.paddingTop,e.bounds.width),D=cs(r.paddingRight,e.bounds.width),I=cs(r.paddingBottom,e.bounds.width),O=cs(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=a>0||i>0?ws(n.left+B/3,n.top+L/3,a-B/3,i-L/3,Mn.TOP_LEFT):new $t(n.left+B/3,n.top+L/3),this.topRightBorderDoubleOuterBox=a>0||i>0?ws(n.left+k,n.top+L/3,l-C/3,u-L/3,Mn.TOP_RIGHT):new $t(n.left+n.width-C/3,n.top+L/3),this.bottomRightBorderDoubleOuterBox=h>0||m>0?ws(n.left+M,n.top+R,h-C/3,m-E/3,Mn.BOTTOM_RIGHT):new $t(n.left+n.width-C/3,n.top+n.height-E/3),this.bottomLeftBorderDoubleOuterBox=b>0||y>0?ws(n.left+B/3,n.top+j,b-B/3,y-E/3,Mn.BOTTOM_LEFT):new $t(n.left+B/3,n.top+n.height-E/3),this.topLeftBorderDoubleInnerBox=a>0||i>0?ws(n.left+B*2/3,n.top+L*2/3,a-B*2/3,i-L*2/3,Mn.TOP_LEFT):new $t(n.left+B*2/3,n.top+L*2/3),this.topRightBorderDoubleInnerBox=a>0||i>0?ws(n.left+k,n.top+L*2/3,l-C*2/3,u-L*2/3,Mn.TOP_RIGHT):new $t(n.left+n.width-C*2/3,n.top+L*2/3),this.bottomRightBorderDoubleInnerBox=h>0||m>0?ws(n.left+M,n.top+R,h-C*2/3,m-E*2/3,Mn.BOTTOM_RIGHT):new $t(n.left+n.width-C*2/3,n.top+n.height-E*2/3),this.bottomLeftBorderDoubleInnerBox=b>0||y>0?ws(n.left+B*2/3,n.top+j,b-B*2/3,y-E*2/3,Mn.BOTTOM_LEFT):new $t(n.left+B*2/3,n.top+n.height-E*2/3),this.topLeftBorderStroke=a>0||i>0?ws(n.left+B/2,n.top+L/2,a-B/2,i-L/2,Mn.TOP_LEFT):new $t(n.left+B/2,n.top+L/2),this.topRightBorderStroke=a>0||i>0?ws(n.left+k,n.top+L/2,l-C/2,u-L/2,Mn.TOP_RIGHT):new $t(n.left+n.width-C/2,n.top+L/2),this.bottomRightBorderStroke=h>0||m>0?ws(n.left+M,n.top+R,h-C/2,m-E/2,Mn.BOTTOM_RIGHT):new $t(n.left+n.width-C/2,n.top+n.height-E/2),this.bottomLeftBorderStroke=b>0||y>0?ws(n.left+B/2,n.top+j,b-B/2,y-E/2,Mn.BOTTOM_LEFT):new $t(n.left+B/2,n.top+n.height-E/2),this.topLeftBorderBox=a>0||i>0?ws(n.left,n.top,a,i,Mn.TOP_LEFT):new $t(n.left,n.top),this.topRightBorderBox=l>0||u>0?ws(n.left+k,n.top,l,u,Mn.TOP_RIGHT):new $t(n.left+n.width,n.top),this.bottomRightBorderBox=h>0||m>0?ws(n.left+M,n.top+R,h,m,Mn.BOTTOM_RIGHT):new $t(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=b>0||y>0?ws(n.left,n.top+j,b,y,Mn.BOTTOM_LEFT):new $t(n.left,n.top+n.height),this.topLeftPaddingBox=a>0||i>0?ws(n.left+B,n.top+L,Math.max(0,a-B),Math.max(0,i-L),Mn.TOP_LEFT):new $t(n.left+B,n.top+L),this.topRightPaddingBox=l>0||u>0?ws(n.left+Math.min(k,n.width-C),n.top+L,k>n.width+C?0:Math.max(0,l-C),Math.max(0,u-L),Mn.TOP_RIGHT):new $t(n.left+n.width-C,n.top+L),this.bottomRightPaddingBox=h>0||m>0?ws(n.left+Math.min(M,n.width-B),n.top+Math.min(R,n.height-E),Math.max(0,h-C),Math.max(0,m-E),Mn.BOTTOM_RIGHT):new $t(n.left+n.width-C,n.top+n.height-E),this.bottomLeftPaddingBox=b>0||y>0?ws(n.left+B,n.top+Math.min(j,n.height-E),Math.max(0,b-B),Math.max(0,y-E),Mn.BOTTOM_LEFT):new $t(n.left+B,n.top+n.height-E),this.topLeftContentBox=a>0||i>0?ws(n.left+B+O,n.top+L+Q,Math.max(0,a-(B+O)),Math.max(0,i-(L+Q)),Mn.TOP_LEFT):new $t(n.left+B+O,n.top+L+Q),this.topRightContentBox=l>0||u>0?ws(n.left+Math.min(k,n.width+B+O),n.top+L+Q,k>n.width+B+O?0:l-B+O,u-(L+Q),Mn.TOP_RIGHT):new $t(n.left+n.width-(C+D),n.top+L+Q),this.bottomRightContentBox=h>0||m>0?ws(n.left+Math.min(M,n.width-(B+O)),n.top+Math.min(R,n.height+L+Q),Math.max(0,h-(C+D)),m-(E+I),Mn.BOTTOM_RIGHT):new $t(n.left+n.width-(C+D),n.top+n.height-(E+I)),this.bottomLeftContentBox=b>0||y>0?ws(n.left+B+O,n.top+j,Math.max(0,b-(B+O)),y-(E+I),Mn.BOTTOM_LEFT):new $t(n.left+B+O,n.top+n.height-(E+I))}return t}(),Mn;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Mn||(Mn={}));var ws=function(t,e,r,n,s){var a=4*((Math.sqrt(2)-1)/3),i=r*a,o=n*a,l=t+r,u=e+n;switch(s){case Mn.TOP_LEFT:return new dy(new $t(t,u),new $t(t,u-o),new $t(l-i,e),new $t(l,e));case Mn.TOP_RIGHT:return new dy(new $t(t,e),new $t(t+i,e),new $t(l,u-o),new $t(l,u));case Mn.BOTTOM_RIGHT:return new dy(new $t(l,e),new $t(l,e+o),new $t(t+i,u),new $t(t,u));case Mn.BOTTOM_LEFT:default:return new dy(new $t(l,u),new $t(l-i,u),new $t(t,e+o),new $t(t,e))}},J2=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},E_e=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},Z2=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},__e=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),fy=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),S_e=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),T_e=function(t){return t.type===0},tQ=function(t){return t.type===1},N_e=function(t){return t.type===2},FR=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},B_e=function(t,e,r,n,s){return t.map(function(a,i){switch(i){case 0:return a.add(e,r);case 1:return a.add(e+n,r);case 2:return a.add(e+n,r+s);case 3:return a.add(e,r+s)}return a})},rQ=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),nQ=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new C_e(this.container),this.container.styles.opacity<1&&this.effects.push(new S_e(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,a=this.container.styles.transform;this.effects.push(new __e(n,s,a))}if(this.container.styles.overflowX!==0){var i=J2(this.curves),o=Z2(this.curves);FR(i,o)?this.effects.push(new fy(i,6)):(this.effects.push(new fy(i,2)),this.effects.push(new fy(o,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,s=this.effects.slice(0);n;){var a=n.effects.filter(function(l){return!tQ(l)});if(r||n.container.styles.position!==0||!n.parent){if(s.unshift.apply(s,a),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=J2(n.curves),o=Z2(n.curves);FR(i,o)||s.unshift(new fy(o,6))}}else s.unshift.apply(s,a);n=n.parent}return s.filter(function(l){return La(l.target,e)})},t}(),n5=function(t,e,r,n){t.container.elements.forEach(function(s){var a=La(s.flags,4),i=La(s.flags,2),o=new nQ(s,t);La(s.styles.display,2048)&&n.push(o);var l=La(s.flags,8)?[]:n;if(a||i){var u=a||s.styles.isPositioned()?r:e,d=new rQ(o);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var h=s.styles.zIndex.order;if(h<0){var m=0;u.negativeZIndex.some(function(b,y){return h>b.element.container.styles.zIndex.order?(m=y,!1):m>0}),u.negativeZIndex.splice(m,0,d)}else if(h>0){var g=0;u.positiveZIndex.some(function(b,y){return h>=b.element.container.styles.zIndex.order?(g=y+1,!1):g>0}),u.positiveZIndex.splice(g,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else s.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);n5(o,d,a?d:r,l)}else s.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),n5(o,e,r,l);La(s.flags,8)&&sQ(s,l)})},sQ=function(t,e){for(var r=t instanceof JS?t.start:1,n=t instanceof JS?t.reversed:!1,s=0;s<e.length;s++){var a=e[s];a.container instanceof Q7&&typeof a.container.value=="number"&&a.container.value!==0&&(r=a.container.value),a.listValue=Rx(r,a.container.styles.listStyleType,!0),r+=n?-1:1}},k_e=function(t){var e=new nQ(t,null),r=new rQ(e),n=[];return n5(e,r,r,n),sQ(e.container,n),r},DR=function(t,e){switch(e){case 0:return Gl(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Gl(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Gl(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Gl(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},I_e=function(t,e){switch(e){case 0:return Gl(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Gl(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Gl(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Gl(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},F_e=function(t,e){switch(e){case 0:return Gl(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Gl(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Gl(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Gl(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},D_e=function(t,e){switch(e){case 0:return hy(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return hy(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return hy(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return hy(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},hy=function(t,e){var r=[];return jl(t)?r.push(t.subdivide(.5,!1)):r.push(t),jl(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},Gl=function(t,e,r,n){var s=[];return jl(t)?s.push(t.subdivide(.5,!1)):s.push(t),jl(r)?s.push(r.subdivide(.5,!0)):s.push(r),jl(n)?s.push(n.subdivide(.5,!0).reverse()):s.push(n),jl(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},aQ=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},ew=function(t){var e=t.styles,r=t.bounds,n=cs(e.paddingLeft,r.width),s=cs(e.paddingRight,r.width),a=cs(e.paddingTop,r.width),i=cs(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,a+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+s),-(e.borderTopWidth+e.borderBottomWidth+a+i))},R_e=function(t,e){return t===0?e.bounds:t===2?ew(e):aQ(e)},L_e=function(t,e){return t===0?e.bounds:t===2?ew(e):aQ(e)},o_=function(t,e,r){var n=R_e(nm(t.styles.backgroundOrigin,e),t),s=L_e(nm(t.styles.backgroundClip,e),t),a=U_e(nm(t.styles.backgroundSize,e),r,n),i=a[0],o=a[1],l=Tg(nm(t.styles.backgroundPosition,e),n.width-i,n.height-o),u=M_e(nm(t.styles.backgroundRepeat,e),l,a,n,s),d=Math.round(n.left+l[0]),h=Math.round(n.top+l[1]);return[u,d,h,i,o]},H0=function(t){return ts(t)&&t.value===Sm.AUTO},my=function(t){return typeof t=="number"},U_e=function(t,e,r){var n=e[0],s=e[1],a=e[2],i=t[0],o=t[1];if(!i)return[0,0];if(Ea(i)&&o&&Ea(o))return[cs(i,r.width),cs(o,r.height)];var l=my(a);if(ts(i)&&(i.value===Sm.CONTAIN||i.value===Sm.COVER)){if(my(a)){var u=r.width/r.height;return u<a!=(i.value===Sm.COVER)?[r.width,r.width/a]:[r.height*a,r.height]}return[r.width,r.height]}var d=my(n),h=my(s),m=d||h;if(H0(i)&&(!o||H0(o))){if(d&&h)return[n,s];if(!l&&!m)return[r.width,r.height];if(m&&l){var g=d?n:s*a,b=h?s:n/a;return[g,b]}var y=d?n:r.width,_=h?s:r.height;return[y,_]}if(l){var N=0,k=0;return Ea(i)?N=cs(i,r.width):Ea(o)&&(k=cs(o,r.height)),H0(i)?N=k*a:(!o||H0(o))&&(k=N/a),[N,k]}var R=null,M=null;if(Ea(i)?R=cs(i,r.width):o&&Ea(o)&&(M=cs(o,r.height)),R!==null&&(!o||H0(o))&&(M=d&&h?R/n*s:r.height),M!==null&&H0(i)&&(R=d&&h?M/s*n:r.width),R!==null&&M!==null)return[R,M];throw new Error("Unable to calculate background-size for element")},nm=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},M_e=function(t,e,r,n,s){var a=e[0],i=e[1],o=r[0],l=r[1];switch(t){case 2:return[new $t(Math.round(n.left),Math.round(n.top+i)),new $t(Math.round(n.left+n.width),Math.round(n.top+i)),new $t(Math.round(n.left+n.width),Math.round(l+n.top+i)),new $t(Math.round(n.left),Math.round(l+n.top+i))];case 3:return[new $t(Math.round(n.left+a),Math.round(n.top)),new $t(Math.round(n.left+a+o),Math.round(n.top)),new $t(Math.round(n.left+a+o),Math.round(n.height+n.top)),new $t(Math.round(n.left+a),Math.round(n.height+n.top))];case 1:return[new $t(Math.round(n.left+a),Math.round(n.top+i)),new $t(Math.round(n.left+a+o),Math.round(n.top+i)),new $t(Math.round(n.left+a+o),Math.round(n.top+i+l)),new $t(Math.round(n.left+a),Math.round(n.top+i+l))];default:return[new $t(Math.round(s.left),Math.round(s.top)),new $t(Math.round(s.left+s.width),Math.round(s.top)),new $t(Math.round(s.left+s.width),Math.round(s.height+s.top)),new $t(Math.round(s.left),Math.round(s.height+s.top))]}},P_e="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",RR="Hidden Text",j_e=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),s=this._document.createElement("img"),a=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),s.src=P_e,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",a.style.fontFamily=e,a.style.fontSize=r,a.style.margin="0",a.style.padding="0",a.appendChild(this._document.createTextNode(RR)),n.appendChild(a),n.appendChild(s);var o=s.offsetTop-a.offsetTop+2;n.removeChild(a),n.appendChild(this._document.createTextNode(RR)),n.style.lineHeight="normal",s.style.verticalAlign="super";var l=s.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:o,middle:l}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),iQ=function(){function t(e,r){this.context=e,this.options=r}return t}(),O_e=1e4,Q_e=function(t){Mc(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s._activeEffects=[],s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),n.canvas||(s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px"),s.fontMetrics=new j_e(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),s}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(s){return n.applyEffect(s)})},e.prototype.applyEffect=function(r){this.ctx.save(),N_e(r)&&(this.ctx.globalAlpha=r.opacity),T_e(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),tQ(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return to(this,void 0,void 0,function(){var n;return Ri(this,function(s){switch(s.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return to(this,void 0,void 0,function(){return Ri(this,function(n){switch(n.label){case 0:if(La(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,s){var a=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+s);else{var i=PT(r.text);i.reduce(function(o,l){return a.ctx.fillText(l,o,r.bounds.top+s),o+a.ctx.measureText(l).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),s=q_e(r.fontFamily).join(", "),a=v1(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,a,s].join(" "),s,a]},e.prototype.renderTextNode=function(r,n){return to(this,void 0,void 0,function(){var s,a,i,o,l,u,d,h,m=this;return Ri(this,function(g){return s=this.createFontStyle(n),a=s[0],i=s[1],o=s[2],this.ctx.font=a,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(i,o),u=l.baseline,d=l.middle,h=n.paintOrder,r.textBounds.forEach(function(b){h.forEach(function(y){switch(y){case 0:m.ctx.fillStyle=Ka(n.color),m.renderTextWithLetterSpacing(b,n.letterSpacing,u);var _=n.textShadow;_.length&&b.text.trim().length&&(_.slice(0).reverse().forEach(function(N){m.ctx.shadowColor=Ka(N.color),m.ctx.shadowOffsetX=N.offsetX.number*m.options.scale,m.ctx.shadowOffsetY=N.offsetY.number*m.options.scale,m.ctx.shadowBlur=N.blur.number,m.renderTextWithLetterSpacing(b,n.letterSpacing,u)}),m.ctx.shadowColor="",m.ctx.shadowOffsetX=0,m.ctx.shadowOffsetY=0,m.ctx.shadowBlur=0),n.textDecorationLine.length&&(m.ctx.fillStyle=Ka(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(N){switch(N){case 1:m.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top+u),b.bounds.width,1);break;case 2:m.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top),b.bounds.width,1);break;case 3:m.ctx.fillRect(b.bounds.left,Math.ceil(b.bounds.top+d),b.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&b.text.trim().length&&(m.ctx.strokeStyle=Ka(n.webkitTextStrokeColor),m.ctx.lineWidth=n.webkitTextStrokeWidth,m.ctx.lineJoin=window.chrome?"miter":"round",m.ctx.strokeText(b.text,b.bounds.left,b.bounds.top+u)),m.ctx.strokeStyle="",m.ctx.lineWidth=0,m.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,s){if(s&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var a=ew(r),i=Z2(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,r.intrinsicWidth,r.intrinsicHeight,a.left,a.top,a.width,a.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return to(this,void 0,void 0,function(){var n,s,a,i,o,l,k,k,u,d,h,m,M,g,b,j,y,_,N,k,R,M,j;return Ri(this,function(L){switch(L.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,s=r.curves,a=n.styles,i=0,o=n.textNodes,L.label=1;case 1:return i<o.length?(l=o[i],[4,this.renderTextNode(l,a)]):[3,4];case 2:L.sent(),L.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof P7))return[3,8];L.label=5;case 5:return L.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return k=L.sent(),this.renderReplacedElement(n,s,k),[3,8];case 7:return L.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof j7&&this.renderReplacedElement(n,s,n.canvas),!(n instanceof O7))return[3,12];L.label=9;case 9:return L.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return k=L.sent(),this.renderReplacedElement(n,s,k),[3,12];case 11:return L.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof G7&&n.tree?(u=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=L.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),L.label=14;case 14:if(n instanceof jT&&(h=Math.min(n.bounds.width,n.bounds.height),n.type===$2?n.checked&&(this.ctx.save(),this.path([new $t(n.bounds.left+h*.39363,n.bounds.top+h*.79),new $t(n.bounds.left+h*.16,n.bounds.top+h*.5549),new $t(n.bounds.left+h*.27347,n.bounds.top+h*.44071),new $t(n.bounds.left+h*.39694,n.bounds.top+h*.5649),new $t(n.bounds.left+h*.72983,n.bounds.top+h*.23),new $t(n.bounds.left+h*.84,n.bounds.top+h*.34085),new $t(n.bounds.left+h*.39363,n.bounds.top+h*.79)]),this.ctx.fillStyle=Ka(wR),this.ctx.fill(),this.ctx.restore()):n.type===W2&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+h/2,n.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=Ka(wR),this.ctx.fill(),this.ctx.restore())),H_e(n)&&n.value.length){switch(m=this.createFontStyle(a),M=m[0],g=m[1],b=this.fontMetrics.getMetrics(M,g).baseline,this.ctx.font=M,this.ctx.fillStyle=Ka(a.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=G_e(n.styles.textAlign),j=ew(n),y=0,n.styles.textAlign){case 1:y+=j.width/2;break;case 2:y+=j.width;break}_=j.add(y,0,0,-j.height/2+1),this.ctx.save(),this.path([new $t(j.left,j.top),new $t(j.left+j.width,j.top),new $t(j.left+j.width,j.top+j.height),new $t(j.left,j.top+j.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new tx(n.value,_),a.letterSpacing,b),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!La(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(N=n.styles.listStyleImage,N.type!==0)return[3,18];k=void 0,R=N.url,L.label=15;case 15:return L.trys.push([15,17,,18]),[4,this.context.cache.match(R)];case 16:return k=L.sent(),this.ctx.drawImage(k,n.bounds.left-(k.width+10),n.bounds.top),[3,18];case 17:return L.sent(),this.context.logger.error("Error loading list-style-image "+R),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(M=this.createFontStyle(a)[0],this.ctx.font=M,this.ctx.fillStyle=Ka(a.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",j=new OA(n.bounds.left,n.bounds.top+cs(n.styles.paddingTop,n.bounds.width),n.bounds.width,sR(a.lineHeight,a.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new tx(r.listValue,j),a.letterSpacing,sR(a.lineHeight,a.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),L.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return to(this,void 0,void 0,function(){var n,s,N,a,i,N,o,l,N,u,d,N,h,m,N,g,b,N,y,_,N;return Ri(this,function(k){switch(k.label){case 0:if(La(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:k.sent(),n=0,s=r.negativeZIndex,k.label=2;case 2:return n<s.length?(N=s[n],[4,this.renderStack(N)]):[3,5];case 3:k.sent(),k.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:k.sent(),a=0,i=r.nonInlineLevel,k.label=7;case 7:return a<i.length?(N=i[a],[4,this.renderNode(N)]):[3,10];case 8:k.sent(),k.label=9;case 9:return a++,[3,7];case 10:o=0,l=r.nonPositionedFloats,k.label=11;case 11:return o<l.length?(N=l[o],[4,this.renderStack(N)]):[3,14];case 12:k.sent(),k.label=13;case 13:return o++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,k.label=15;case 15:return u<d.length?(N=d[u],[4,this.renderStack(N)]):[3,18];case 16:k.sent(),k.label=17;case 17:return u++,[3,15];case 18:h=0,m=r.inlineLevel,k.label=19;case 19:return h<m.length?(N=m[h],[4,this.renderNode(N)]):[3,22];case 20:k.sent(),k.label=21;case 21:return h++,[3,19];case 22:g=0,b=r.zeroOrAutoZIndexOrTransformedOrOpacity,k.label=23;case 23:return g<b.length?(N=b[g],[4,this.renderStack(N)]):[3,26];case 24:k.sent(),k.label=25;case 25:return g++,[3,23];case 26:y=0,_=r.positiveZIndex,k.label=27;case 27:return y<_.length?(N=_[y],[4,this.renderStack(N)]):[3,30];case 28:k.sent(),k.label=29;case 29:return y++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(s,a){var i=jl(s)?s.start:s;a===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),jl(s)&&n.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(r,n,s,a){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(s,a),this.ctx.fill(),this.ctx.translate(-s,-a)},e.prototype.resizeImage=function(r,n,s){var a;if(r.width===n&&r.height===s)return r;var i=(a=this.canvas.ownerDocument)!==null&&a!==void 0?a:document,o=i.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,s);var l=o.getContext("2d");return l.drawImage(r,0,0,r.width,r.height,0,0,n,s),o},e.prototype.renderBackgroundImage=function(r){return to(this,void 0,void 0,function(){var n,s,a,i,o,l;return Ri(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,s=function(d){var h,m,g,Q,J,re,O,G,E,b,Q,J,re,O,G,y,_,N,k,R,M,j,L,C,E,B,Q,D,I,O,G,se,J,re,q,z,W,ie,P,Y,Z,te;return Ri(this,function(ce){switch(ce.label){case 0:if(d.type!==0)return[3,5];h=void 0,m=d.url,ce.label=1;case 1:return ce.trys.push([1,3,,4]),[4,a.context.cache.match(m)];case 2:return h=ce.sent(),[3,4];case 3:return ce.sent(),a.context.logger.error("Error loading background-image "+m),[3,4];case 4:return h&&(g=o_(r,n,[h.width,h.height,h.width/h.height]),Q=g[0],J=g[1],re=g[2],O=g[3],G=g[4],E=a.ctx.createPattern(a.resizeImage(h,O,G),"repeat"),a.renderRepeat(Q,E,J,re)),[3,6];case 5:Tbe(d)?(b=o_(r,n,[null,null,null]),Q=b[0],J=b[1],re=b[2],O=b[3],G=b[4],y=bbe(d.angle,O,G),_=y[0],N=y[1],k=y[2],R=y[3],M=y[4],j=document.createElement("canvas"),j.width=O,j.height=G,L=j.getContext("2d"),C=L.createLinearGradient(N,R,k,M),rR(d.stops,_).forEach(function(Ee){return C.addColorStop(Ee.stop,Ka(Ee.color))}),L.fillStyle=C,L.fillRect(0,0,O,G),O>0&&G>0&&(E=a.ctx.createPattern(j,"repeat"),a.renderRepeat(Q,E,J,re))):Nbe(d)&&(B=o_(r,n,[null,null,null]),Q=B[0],D=B[1],I=B[2],O=B[3],G=B[4],se=d.position.length===0?[LT]:d.position,J=cs(se[0],O),re=cs(se[se.length-1],G),q=Cbe(d,J,re,O,G),z=q[0],W=q[1],z>0&&W>0&&(ie=a.ctx.createRadialGradient(D+J,I+re,0,D+J,I+re,z),rR(d.stops,z*2).forEach(function(Ee){return ie.addColorStop(Ee.stop,Ka(Ee.color))}),a.path(Q),a.ctx.fillStyle=ie,z!==W?(P=r.bounds.left+.5*r.bounds.width,Y=r.bounds.top+.5*r.bounds.height,Z=W/z,te=1/Z,a.ctx.save(),a.ctx.translate(P,Y),a.ctx.transform(1,0,0,Z,0,0),a.ctx.translate(-P,-Y),a.ctx.fillRect(D,te*(I-Y)+Y,O,G*te),a.ctx.restore()):a.ctx.fill())),ce.label=6;case 6:return n--,[2]}})},a=this,i=0,o=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return i<o.length?(l=o[i],[5,s(l)]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,s){return to(this,void 0,void 0,function(){return Ri(this,function(a){return this.path(DR(s,n)),this.ctx.fillStyle=Ka(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,s,a){return to(this,void 0,void 0,function(){var i,o;return Ri(this,function(l){switch(l.label){case 0:return n<3?[4,this.renderSolidBorder(r,s,a)]:[3,2];case 1:return l.sent(),[2];case 2:return i=I_e(a,s),this.path(i),this.ctx.fillStyle=Ka(r),this.ctx.fill(),o=F_e(a,s),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return to(this,void 0,void 0,function(){var n,s,a,i,o,l,u,d,h=this;return Ri(this,function(m){switch(m.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,s=!lf(n.backgroundColor)||n.backgroundImage.length,a=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=V_e(nm(n.backgroundClip,0),r.curves),s||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),lf(n.backgroundColor)||(this.ctx.fillStyle=Ka(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:m.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(g){h.ctx.save();var b=J2(r.curves),y=g.inset?0:O_e,_=B_e(b,-y+(g.inset?1:-1)*g.spread.number,(g.inset?1:-1)*g.spread.number,g.spread.number*(g.inset?-2:2),g.spread.number*(g.inset?-2:2));g.inset?(h.path(b),h.ctx.clip(),h.mask(_)):(h.mask(b),h.ctx.clip(),h.path(_)),h.ctx.shadowOffsetX=g.offsetX.number+y,h.ctx.shadowOffsetY=g.offsetY.number,h.ctx.shadowColor=Ka(g.color),h.ctx.shadowBlur=g.blur.number,h.ctx.fillStyle=g.inset?Ka(g.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),m.label=2;case 2:o=0,l=0,u=a,m.label=3;case 3:return l<u.length?(d=u[l],d.style!==0&&!lf(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return m.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,3)];case 6:return m.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,r.curves)];case 8:return m.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,r.curves)];case 10:m.sent(),m.label=11;case 11:o++,m.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,s,a,i){return to(this,void 0,void 0,function(){var o,l,u,d,h,m,g,b,y,_,N,k,R,M,j,L,j,L;return Ri(this,function(C){return this.ctx.save(),o=D_e(a,s),l=DR(a,s),i===2&&(this.path(l),this.ctx.clip()),jl(l[0])?(u=l[0].start.x,d=l[0].start.y):(u=l[0].x,d=l[0].y),jl(l[1])?(h=l[1].end.x,m=l[1].end.y):(h=l[1].x,m=l[1].y),s===0||s===2?g=Math.abs(u-h):g=Math.abs(d-m),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(l.slice(0,2)),b=n<3?n*3:n*2,y=n<3?n*2:n,i===3&&(b=n,y=n),_=!0,g<=b*2?_=!1:g<=b*2+y?(N=g/(2*b+y),b*=N,y*=N):(k=Math.floor((g+y)/(b+y)),R=(g-k*b)/(k-1),M=(g-(k+1)*b)/k,y=M<=0||Math.abs(y-R)<Math.abs(y-M)?R:M),_&&(i===3?this.ctx.setLineDash([0,b+y]):this.ctx.setLineDash([b,y])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Ka(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(jl(l[0])&&(j=l[3],L=l[0],this.ctx.beginPath(),this.formatPath([new $t(j.end.x,j.end.y),new $t(L.start.x,L.start.y)]),this.ctx.stroke()),jl(l[1])&&(j=l[1],L=l[2],this.ctx.beginPath(),this.formatPath([new $t(j.end.x,j.end.y),new $t(L.start.x,L.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return to(this,void 0,void 0,function(){var n;return Ri(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Ka(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=k_e(r),[4,this.renderStack(n)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(iQ),H_e=function(t){return t instanceof V7||t instanceof H7?!0:t instanceof jT&&t.type!==W2&&t.type!==$2},V_e=function(t,e){switch(t){case 0:return J2(e);case 2:return E_e(e);case 1:default:return Z2(e)}},G_e=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},z_e=["-apple-system","system-ui"],q_e=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return z_e.indexOf(e)===-1}):t},K_e=function(t){Mc(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=n,s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),s}return e.prototype.render=function(r){return to(this,void 0,void 0,function(){var n,s;return Ri(this,function(a){switch(a.label){case 0:return n=XS(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,$_e(n)];case 1:return s=a.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Ka(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(iQ),$_e=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},W_e=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Kv([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Kv([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Kv([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Kv([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),Y_e=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new W_e({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new p_e(this,e)}return t.instanceCount=1,t}(),oQ=function(t,e){return e===void 0&&(e={}),X_e(t,e)};typeof window<"u"&&eQ.setContext(window);var X_e=function(t,e){return to(void 0,void 0,void 0,function(){var r,n,s,a,i,o,l,u,d,h,m,g,b,y,_,N,k,R,M,j,C,L,C,E,B,Q,D,I,O,G,se,J,re,q,z,W,ie,P,Y,Z;return Ri(this,function(te){switch(te.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return s={allowTaint:(E=e.allowTaint)!==null&&E!==void 0?E:!1,imageTimeout:(B=e.imageTimeout)!==null&&B!==void 0?B:15e3,proxy:e.proxy,useCORS:(Q=e.useCORS)!==null&&Q!==void 0?Q:!1},a=US({logging:(D=e.logging)!==null&&D!==void 0?D:!0,cache:e.cache},s),i={windowWidth:(I=e.windowWidth)!==null&&I!==void 0?I:n.innerWidth,windowHeight:(O=e.windowHeight)!==null&&O!==void 0?O:n.innerHeight,scrollX:(G=e.scrollX)!==null&&G!==void 0?G:n.pageXOffset,scrollY:(se=e.scrollY)!==null&&se!==void 0?se:n.pageYOffset},o=new OA(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),l=new Y_e(a,o),u=(J=e.foreignObjectRendering)!==null&&J!==void 0?J:!1,d={allowTaint:(re=e.allowTaint)!==null&&re!==void 0?re:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:u,copyStyles:u},l.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),h=new kR(l,t,d),m=h.clonedReferenceElement,m?[4,h.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return g=te.sent(),b=OT(m)||ZEe(m)?B2e(m.ownerDocument):ub(l,m),y=b.width,_=b.height,N=b.left,k=b.top,R=J_e(l,m,e.backgroundColor),M={canvas:e.canvas,backgroundColor:R,scale:(z=(q=e.scale)!==null&&q!==void 0?q:n.devicePixelRatio)!==null&&z!==void 0?z:1,x:((W=e.x)!==null&&W!==void 0?W:0)+N,y:((ie=e.y)!==null&&ie!==void 0?ie:0)+k,width:(P=e.width)!==null&&P!==void 0?P:Math.ceil(y),height:(Y=e.height)!==null&&Y!==void 0?Y:Math.ceil(_)},u?(l.logger.debug("Document cloned, using foreign object rendering"),C=new K_e(l,M),[4,C.render(m)]):[3,3];case 2:return j=te.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+N+","+k+" with size "+y+"x"+_+" using computed rendering"),l.logger.debug("Starting DOM parsing"),L=q7(l,m),R===L.styles.backgroundColor&&(L.styles.backgroundColor=FA.TRANSPARENT),l.logger.debug("Starting renderer for element at "+M.x+","+M.y+" with size "+M.width+"x"+M.height),C=new Q_e(l,M),[4,C.render(L)];case 4:j=te.sent(),te.label=5;case 5:return(!((Z=e.removeContainer)!==null&&Z!==void 0)||Z)&&(kR.destroy(g)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,j]}})})},J_e=function(t,e,r){var n=e.ownerDocument,s=n.documentElement?Zg(t,getComputedStyle(n.documentElement).backgroundColor):FA.TRANSPARENT,a=n.body?Zg(t,getComputedStyle(n.body).backgroundColor):FA.TRANSPARENT,i=typeof r=="string"?Zg(t,r):r===null?FA.TRANSPARENT:4294967295;return e===n.documentElement?lf(s)?lf(a)?i:a:s:i};const Z_e=Object.freeze(Object.defineProperty({__proto__:null,default:oQ},Symbol.toStringTag,{value:"Module"})),yb="proyectos_interdisciplinarios",lQ="entregas_interdisciplinarias",eSe="usuarios",QT=t=>{const e=t.data();return{id:t.id,...e}},tSe=t=>{const e=er(Ft(Tt,yb),gn("nombreProyecto","asc"));return Tr(e,n=>{const s=n.docs.map(a=>QT(a));t(s)},n=>{console.error("Error al suscribirse a las planificaciones:",n),t([])})},rSe=async t=>{try{return(await Cs(Ft(Tt,yb),t)).id}catch(e){throw console.error("Error al crear la planificación:",e),new Error("No se pudo crear la planificación.")}},LR=async(t,e)=>{try{const{id:r,...n}=e,s=yr(Tt,yb,t);await Wi(s,n)}catch(r){throw console.error("Error al actualizar la planificación:",r),new Error("No se pudo actualizar la planificación.")}},nSe=async t=>{try{const e=yr(Tt,yb,t);await mi(e)}catch(e){throw console.error("Error al eliminar la planificación:",e),new Error("No se pudo eliminar la planificación.")}},sSe=(t,e)=>{const r=er(Ft(Tt,lQ),Fn("planificacionId","==",t));return Tr(r,s=>{const a=s.docs.map(i=>QT(i));e(a)},s=>{console.error("Error al suscribirse a las entregas:",s),e([])})},UR=async(t,e)=>{try{const r=yr(Tt,lQ,t);await Wi(r,{feedbackProfesor:e,fechaFeedback:cr.fromDate(new Date)},{merge:!0})}catch(r){throw console.error("Error al guardar la retroalimentación:",r),new Error("No se pudo guardar la retroalimentación.")}},aSe=t=>{const e=er(Ft(Tt,eSe));return Tr(e,n=>{const s=n.docs.map(a=>QT(a));t(s)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),t([])})},iSe=({planificaciones:t,onActivityUpdate:e})=>{const[r,n]=ee.useState(null),s=ee.useMemo(()=>{const l=[];return t.forEach(u=>{(u.actividades||[]).forEach(d=>l.push({...d,planId:u.id,type:"activity"})),(u.fechasClave||[]).forEach(d=>l.push({id:d.id,planId:u.id,type:"keyDate",nombre:d.nombre,fechaInicio:d.fecha,fechaFin:d.fecha,responsables:u.docentesResponsables,asignaturaPrincipal:"Milestone"}))}),l.sort((u,d)=>new Date(u.fechaInicio).getTime()-new Date(d.fechaInicio).getTime())},[t]),a=ee.useCallback(l=>{if(l.type==="keyDate")return{text:"Fecha Clave",color:"bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-300"};const u=new Date;u.setHours(0,0,0,0);const d=new Date(`${l.fechaInicio}T00:00:00`),h=new Date(`${l.fechaFin}T00:00:00`);return h<u?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:d<=u&&h>=u?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"}},[]),i=({name:l})=>{const u=(l||"").split(" ").map(g=>g[0]).join("").toUpperCase(),d=g=>{let b=0;for(let y=0;y<g.length;y++)b=g.charCodeAt(y)+((b<<5)-b);return b},h=["bg-pink-100 text-pink-800 dark:bg-pink-900/50 dark:text-pink-300","bg-indigo-100 text-indigo-800 dark:bg-indigo-900/50 dark:text-indigo-300","bg-teal-100 text-teal-800 dark:bg-teal-900/50 dark:text-teal-300","bg-orange-100 text-orange-800 dark:bg-orange-900/50 dark:text-orange-300","bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300","bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300","bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"],m=Math.abs(d(l))%h.length;return c.jsx("div",{className:`w-9 h-9 rounded-full ${h[m]} flex items-center justify-center font-bold text-sm ring-2 ring-white dark:ring-slate-800`,children:u.slice(0,2)})},o=({data:l,onClose:u,onSave:d})=>{const[h,m]=ee.useState(l.activity),g=y=>{m({...h,[y.target.name]:y.target.value})},b=()=>{d(l.planId,h),u()};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg p-6 animate-fade-in-up",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Editar Actividad"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Nombre"}),c.jsx("input",{name:"nombre",value:h.nombre,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Responsables"}),c.jsx("input",{name:"responsables",value:h.responsables,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Inicio"}),c.jsx("input",{type:"date",name:"fechaInicio",value:h.fechaInicio,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Fin"}),c.jsx("input",{type:"date",name:"fechaFin",value:h.fechaFin,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[c.jsx("button",{onClick:u,className:"px-4 py-2 bg-slate-200 dark:bg-slate-600 rounded-md font-semibold",children:"Cancelar"}),c.jsx("button",{onClick:b,className:"px-4 py-2 bg-amber-500 text-white rounded-md font-semibold",children:"Guardar"})]})]})})};return s.length===0?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Cronograma del Proyecto"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),c.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades para mostrar. Cree una planificación primero."})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg",children:[c.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-slate-200",children:"Cronograma del Proyecto"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Tarea"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Inicio"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Fin"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Asignado"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:s.map(l=>{const u=a(l),d=l.type==="activity";return c.jsxs("tr",{className:`${d?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":""}`,onClick:()=>d&&n({planId:l.planId,activity:l}),children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base font-medium text-slate-900 dark:text-slate-200",children:l.nombre}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full ${u.color}`,children:u.text})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:l.fechaInicio}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:l.fechaFin}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx(i,{name:l.responsables||"N/A"})})]},l.id)})})]})}),r&&c.jsx(o,{data:r,onClose:()=>n(null),onSave:e})]})},oSe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),lSe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197M15 21a6 6 0 006-5.197M15 12a4 4 0 110-8 4 4 0 010 8z"})}),cSe=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{d:"M12 14l9-5-9-5-9 5 9 5z"}),c.jsx("path",{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 14l9-5-9-5-9 5 9 5zm0 0v6"})]}),uSe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),ASe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),dSe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6H8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})}),fSe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),hSe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s5=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Dd=({icon:t,label:e,children:r,aiButton:n})=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border dark:border-slate-700",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-3 text-slate-500 dark:text-slate-400 font-medium",children:[t,c.jsx("span",{children:e})]}),n]}),r]}),mSe=({initialPlan:t,onSave:e,onCancel:r})=>{const[n,s]=ee.useState(t||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[a,i]=ee.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""}),[o,l]=ee.useState({nombre:"",fecha:""}),[u,d]=ee.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""}),[h,m]=ee.useState(!1),[g,b]=ee.useState(!1),[y,_]=ee.useState(!1);ee.useEffect(()=>{s(t||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[t]);const N=async E=>{if(!n.descripcionProyecto.trim()){alert("Por favor, ingrese una descripción del proyecto para usar la IA.");return}E==="objetivos"?m(!0):b(!0);const B="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";let Q="";E==="objetivos"?Q=`Basado en la siguiente descripción de un proyecto escolar interdisciplinario, genera 3 a 5 objetivos de aprendizaje claros, medibles y concisos. La respuesta debe ser solo el texto de los objetivos, formateado en una lista con guiones.
            Descripción del Proyecto: "${n.descripcionProyecto}"`:Q=`Basado en la siguiente descripción y objetivos de un proyecto escolar interdisciplinario, genera una lista de 5 a 7 indicadores de logro concretos y observables que permitan evaluar el cumplimiento de los objetivos. La respuesta debe ser solo el texto de los indicadores, formateado en una lista con guiones.
            Descripción del Proyecto: "${n.descripcionProyecto}"
            Objetivos (si existen): "${n.objetivos||"Aún no definidos, genéralos a partir de la descripción."}"`;try{const se=(await(await new PA(B).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(Q)).response).text();s(J=>({...J,[E]:se.replace(/(\*\*|\*)/g,"")}))}catch(D){console.error(`Error al generar ${E}`,D),alert(`Hubo un error al generar los ${E}. Inténtelo de nuevo.`)}finally{E==="objetivos"?m(!1):b(!1)}},k=async()=>{if(!n.descripcionProyecto.trim()){alert("Por favor, ingrese una descripción del proyecto para usar la IA.");return}_(!0);const E="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",B=`
            Basado en la descripción de un proyecto escolar, genera una estructura completa. La respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            Descripción del proyecto: "${n.descripcionProyecto}"
            Docentes responsables: "${n.docentesResponsables}"
            Asignaturas involucradas: "${n.asignaturas.join(", ")}"

            El JSON debe tener tres claves: 'actividades', 'fechasClave', y 'tareas'.
            1. 'actividades': Un array de 3 a 5 objetos. Cada objeto debe tener: "nombre" (string), "fechaInicio" (string "YYYY-MM-DD"), "fechaFin" (string "YYYY-MM-DD"), y "responsables" (string, uno de los docentes).
            2. 'fechasClave': Un array de 2 a 3 objetos (hitos importantes). Cada objeto debe tener: "nombre" (string) y "fecha" (string "YYYY-MM-DD").
            3. 'tareas': Un array de 2 a 3 objetos (tareas para estudiantes). Cada objeto debe tener: "instrucciones" (string detallado) y "fechaEntrega" (string "YYYY-MM-DD").
            Las fechas deben ser lógicas y secuenciales. Asume que el proyecto comienza hoy.
        `;try{const se=(await(await new PA(E).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(B)).response).text().replace(/^```json\s*|```\s*$/g,""),J=JSON.parse(se);s(re=>{var q,z,W;return{...re,actividades:((q=J.actividades)==null?void 0:q.map(ie=>({...ie,id:crypto.randomUUID()})))||re.actividades,fechasClave:((z=J.fechasClave)==null?void 0:z.map(ie=>({...ie,id:crypto.randomUUID()})))||re.fechasClave,tareas:((W=J.tareas)==null?void 0:W.map((ie,P)=>({...ie,id:crypto.randomUUID(),numero:P+1})))||re.tareas}})}catch(Q){console.error("Error al generar la estructura del proyecto:",Q),alert("No se pudo generar la estructura del proyecto. Intente de nuevo.")}finally{_(!1)}},R=E=>{s(B=>({...B,[E.target.name]:E.target.value}))},M=(E,B)=>{s(Q=>{const D=Q[E],I=D.includes(B)?D.filter(O=>O!==B):[...D,B];return{...Q,[E]:I}})},j=()=>{if(!a.nombre||!a.fechaInicio||!a.fechaFin){alert("Nombre y fechas son obligatorios para la actividad.");return}s(E=>({...E,actividades:[...E.actividades||[],{...a,id:crypto.randomUUID()}]})),i({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""})},L=()=>{!o.nombre||!o.fecha||(s(E=>({...E,fechasClave:[...E.fechasClave||[],{...o,id:crypto.randomUUID()}]})),l({nombre:"",fecha:""}))},C=()=>{var B;if(!u.instrucciones||!u.fechaEntrega){alert("Instrucciones y fecha son obligatorios para la tarea.");return}const E={id:crypto.randomUUID(),numero:(((B=n.tareas)==null?void 0:B.length)||0)+1,...u};s(Q=>({...Q,tareas:[...Q.tareas||[],E]})),d({instrucciones:"",fechaEntrega:"",recursoUrl:""})};return c.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:[c.jsx("div",{className:"text-center mb-12",children:c.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-slate-800 dark:text-slate-200",children:t?"Editando Proyecto":"Nuevo Proyecto Interdisciplinario"})}),c.jsxs("div",{className:"space-y-6",children:[c.jsx(Dd,{icon:c.jsx(oSe,{}),label:"Nombre del Proyecto",children:c.jsx("input",{name:"nombreProyecto",value:n.nombreProyecto,onChange:R,placeholder:"Ingrese el nombre del proyecto...",className:"w-full mt-1 bg-transparent text-lg font-semibold focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Dd,{icon:c.jsx(lSe,{}),label:"Profesores",children:c.jsx("input",{name:"docentesResponsables",value:n.docentesResponsables,onChange:R,placeholder:"Ingrese nombres separados por comas...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Dd,{icon:c.jsx(cSe,{}),label:"Cursos",children:c.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2 mt-2",children:la.map(E=>c.jsx("button",{type:"button",onClick:()=>M("cursos",E),className:`w-full text-center p-2 rounded-md text-sm transition-colors ${n.cursos.includes(E)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:E},E))})}),c.jsx(Dd,{icon:c.jsx(uSe,{}),label:"Asignaturas",children:c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 mt-2",children:il.map(E=>c.jsx("button",{type:"button",onClick:()=>M("asignaturas",E),className:`w-full text-left p-2 rounded-md text-sm transition-colors ${n.asignaturas.includes(E)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:E},E))})}),c.jsx(Dd,{icon:c.jsx(ASe,{}),label:"Descripción del Proyecto",children:c.jsx("textarea",{name:"descripcionProyecto",value:n.descripcionProyecto,onChange:R,placeholder:"Detalle aquí la metodología, el producto final esperado y el propósito del proyecto. Esta información es clave para la IA.",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[100px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Dd,{icon:c.jsx(dSe,{}),label:"Objetivos",aiButton:c.jsx("button",{type:"button",onClick:()=>N("objetivos"),disabled:!n.descripcionProyecto.trim()||h,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:c.jsx(s5,{})}),children:h?c.jsx("div",{className:"p-4 text-center",children:"Generando..."}):c.jsx("textarea",{name:"objetivos",value:n.objetivos,onChange:R,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Dd,{icon:c.jsx(fSe,{}),label:"Indicadores de Éxito",aiButton:c.jsx("button",{type:"button",onClick:()=>N("indicadoresLogro"),disabled:!n.descripcionProyecto.trim()||g,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:c.jsx(s5,{})}),children:g?c.jsx("div",{className:"p-4 text-center",children:"Generando..."}):c.jsx("textarea",{name:"indicadoresLogro",value:n.indicadoresLogro,onChange:R,placeholder:"Liste los indicadores de logro o evaluación...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Dd,{icon:c.jsx(hSe,{}),label:"Carta Gantt",children:c.jsxs("div",{className:"space-y-4 mt-2",children:[c.jsx("div",{className:"text-center border-b pb-4 mb-4 dark:border-slate-700",children:c.jsx("button",{type:"button",onClick:k,disabled:y||!n.descripcionProyecto,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:y?"Generando...":"✨ Sugerir Estructura con IA"})}),c.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold",children:"Actividades"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2 items-end",children:[c.jsx("input",{value:a.nombre,onChange:E=>i({...a,nombre:E.target.value}),placeholder:"Nombre",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),c.jsx("input",{type:"date",value:a.fechaInicio,onChange:E=>i({...a,fechaInicio:E.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{type:"date",value:a.fechaFin,onChange:E=>i({...a,fechaFin:E.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:j,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),c.jsx("ul",{className:"text-xs",children:n.actividades.map(E=>c.jsx("li",{children:E.nombre},E.id))})]}),c.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold",children:"Fechas Clave (Hitos)"}),c.jsxs("div",{className:"grid grid-cols-3 gap-2 items-end",children:[c.jsx("input",{value:o.nombre,onChange:E=>l({...o,nombre:E.target.value}),placeholder:"Hito",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 col-span-1"}),c.jsx("input",{type:"date",value:o.fecha,onChange:E=>l({...o,fecha:E.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:L,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),c.jsx("ul",{className:"text-xs",children:n.fechasClave.map(E=>c.jsxs("li",{children:[E.nombre," (",E.fecha,")"]},E.id))})]}),c.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold",children:"Tareas para Estudiantes"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 items-end",children:[c.jsx("input",{value:u.instrucciones,onChange:E=>d({...u,instrucciones:E.target.value}),placeholder:"Instrucciones",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),c.jsx("input",{type:"date",value:u.fechaEntrega,onChange:E=>d({...u,fechaEntrega:E.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{type:"button",onClick:C,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),c.jsx("ul",{className:"text-xs",children:(n.tareas||[]).map(E=>c.jsxs("li",{children:[E.numero,". ",E.instrucciones]},E.id))})]})]})}),c.jsxs("div",{className:"flex justify-end gap-4 pt-6",children:[c.jsx("button",{onClick:r,className:"px-8 py-3 bg-slate-200 text-slate-700 rounded-lg font-semibold hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),c.jsx("button",{onClick:()=>e(n),className:"px-8 py-3 bg-slate-800 text-white rounded-lg font-semibold hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:t?"Guardar Cambios":"Guardar Proyecto"})]})]})]})},MR=()=>{const[t,e]=ee.useState([]),[r,n]=ee.useState(!0),[s,a]=ee.useState("list"),[i,o]=ee.useState(null),[l,u]=ee.useState(null),[d,h]=ee.useState(null);ee.useEffect(()=>{n(!0);const R=tSe(M=>{e(M),n(!1)});return()=>R()},[]);const m=ee.useCallback(async(R,M)=>{const j=t.find(L=>L.id===R);if(j){const L={...j,actividades:(j.actividades||[]).map(C=>C.id===M.id?M:C)};await LR(R,L)}},[t]),g=async R=>{try{"id"in R&&R.id?await LR(R.id,R):await rSe(R),a("list"),o(null)}catch(M){console.error("Error al guardar la planificación:",M),alert("No se pudo guardar la planificación.")}},b=R=>{o(R),a("form")},y=async R=>{if(console.log("ID recibido por handleDelete:",R),!R){console.error("handleDelete fue llamado con un ID inválido:",R),alert("Error: No se puede eliminar un proyecto sin un ID válido.");return}if(window.confirm("¿Está seguro de eliminar esta planificación?"))try{await nSe(R)}catch(M){console.error("Error al eliminar la planificación:",M),alert("No se pudo eliminar la planificación.")}},_=()=>{o(null),a("form")},N=async R=>{u(R.id);const M=new or("p","mm","a4"),j=15,L=M.internal.pageSize.getWidth(),C=M.internal.pageSize.getHeight(),E=L-j*2;let B=j;const Q=22,D=14,I=11,O=()=>{M.setFont("helvetica","normal"),M.setFontSize(9),M.setTextColor(150),M.text("Proyecto Interdisciplinario",j,12),M.text("Liceo Industrial de Recoleta",L-j,12,{align:"right"}),M.setDrawColor(220),M.line(j,15,L-j,15)},G=z=>{B+z>C-j&&(M.addPage(),O(),B=j+15)},se=(z,W)=>{if(!W||Array.isArray(W)&&W.length===0||typeof W=="string"&&!W.trim())return;const ie=10;M.setFontSize(I);const P=Array.isArray(W)?W.join(", "):String(W),Y=M.splitTextToSize(P,E),Z=Y.length*(I*.35*1.15);G(ie+Z+12),M.setFont("helvetica","bold"),M.setFontSize(D),M.setTextColor(40),M.text(z,j,B),B+=6,M.setDrawColor(200),M.line(j,B,j+30,B),B+=8,M.setFont("helvetica","normal"),M.setFontSize(I),M.setTextColor(80),M.text(Y,j,B),B+=Z+12};O(),B=j+20,M.setFont("helvetica","bold"),M.setFontSize(Q),M.setTextColor(0);const J=M.splitTextToSize(R.nombreProyecto,E);if(M.text(J,j,B),B+=J.length*(Q*.4)+10,al(M,{startY:B,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},R.docentesResponsables],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},R.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},R.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:I,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold"}}}),B=M.lastAutoTable.finalY+15,se("Descripción del Proyecto",R.descripcionProyecto),se("Objetivos de Aprendizaje",R.objetivos),se("Indicadores de Logro",R.indicadoresLogro),R.tareas&&R.tareas.length>0){const z=R.tareas.map(ie=>[ie.numero.toString(),ie.instrucciones,ie.fechaEntrega]),W=(z.length+1)*10+15;G(W+15),M.setFont("helvetica","bold"),M.setFontSize(D),M.setTextColor(40),M.text("Tareas para Estudiantes",j,B),B+=10,al(M,{startY:B,head:[["#","Instrucciones","Fecha de Entrega"]],body:z,theme:"striped",headStyles:{fillColor:[52,73,94]}}),B=M.lastAutoTable.finalY+15}const re=document.getElementById("gantt-container-vertical");if(re)try{const W=(await oQ(re,{scale:2,backgroundColor:"#ffffff"})).toDataURL("image/png");M.addPage(),O(),B=j+15,M.setFont("helvetica","bold"),M.setFontSize(D),M.setTextColor(40),M.text("Cronograma del Proyecto",j,B),B+=10;const ie=M.getImageProperties(W),P=E,Y=ie.height*P/ie.width;M.addImage(W,"PNG",j,B,P,Y)}catch(z){console.error("Error generating timeline image:",z)}const q=M.internal.pages.length-1;for(let z=1;z<=q;z++)M.setPage(z),M.setFont("helvetica","normal"),M.setFontSize(9),M.setTextColor(150),M.text(`Página ${z} de ${q}`,L-j,M.internal.pageSize.getHeight()-10,{align:"right"});M.save(`Proyecto_${R.nombreProyecto.replace(/\s/g,"_")}.pdf`),u(null)},k=({plan:R,onBack:M})=>{var se,J;const[j,L]=ee.useState([]),[C,E]=ee.useState([]),[B,Q]=ee.useState(((se=R.tareas)==null?void 0:se[0])||null),[D,I]=ee.useState(null);ee.useEffect(()=>{const re=aSe(L),q=sSe(R.id,E);return()=>{re(),q()}},[R.id]);const O=ee.useMemo(()=>j.filter(re=>re.profile===Vt.ESTUDIANTE&&R.cursos.includes(re.curso||"")).sort((re,q)=>re.nombreCompleto.localeCompare(q.nombreCompleto)),[j,R.cursos]),G=async re=>{var W;I(re.id);const q="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",z=`
                Eres un profesor asistente. Genera una retroalimentación constructiva para la entrega de un estudiante.
                - Instrucciones de la tarea: "${B==null?void 0:B.instrucciones}"
                - Comentario del estudiante: "${re.observacionesEstudiante||"No dejó comentarios."}"
                - Enlace entregado: "${re.enlaceUrl||"No aplica"}"
                - Archivo entregado: "${((W=re.archivoAdjunto)==null?void 0:W.nombre)||"No aplica"}"
                
                La retroalimentación debe ser breve (2-3 frases), motivadora, y enfocada en cómo podría mejorar.
            `;try{const te=(await(await new PA(q).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(z)).response).text().replace(/(\*\*|\*)/g,"");await UR(re.id,te)}catch(ie){console.error("Error al generar feedback con IA:",ie),alert("No se pudo generar la retroalimentación.")}finally{I(null)}};return B?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("h2",{className:"text-2xl font-bold text-slate-800",children:["Entregas de Tareas: ",R.nombreProyecto]}),c.jsx("button",{onClick:M,className:"font-semibold",children:"← Volver a Proyectos"})]}),c.jsx("select",{value:B.id,onChange:re=>{var q;return Q(((q=R.tareas)==null?void 0:q.find(z=>z.id===re.target.value))||null)},className:"mb-4 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600",children:(J=R.tareas)==null?void 0:J.map(re=>c.jsxs("option",{value:re.id,children:["Tarea ",re.numero,": ",re.instrucciones]},re.id))}),c.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:O.map(re=>{const q=C.find(z=>z.tareaId===B.id&&z.estudianteId===re.id);return c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[c.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[re.nombreCompleto," - ",q!=null&&q.completada?c.jsx("span",{className:"text-green-600",children:"Entregado"}):c.jsx("span",{className:"text-red-600",children:"Pendiente"})]}),q?c.jsxs("div",{className:"text-sm mt-2 space-y-2",children:[q.observacionesEstudiante&&c.jsxs("p",{children:[c.jsx("strong",{children:"Comentario:"})," ",q.observacionesEstudiante]}),q.enlaceUrl&&c.jsxs("p",{children:[c.jsx("strong",{children:"Enlace:"})," ",c.jsx("a",{href:q.enlaceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:q.enlaceUrl})]}),q.archivoAdjunto&&c.jsxs("p",{children:[c.jsx("strong",{children:"Archivo:"})," ",c.jsx("a",{href:q.archivoAdjunto.url,download:q.archivoAdjunto.nombre,className:"text-blue-500 hover:underline",children:q.archivoAdjunto.nombre})]}),c.jsxs("div",{className:"flex items-end gap-2",children:[c.jsx("textarea",{placeholder:"Escribir retroalimentación...",defaultValue:q.feedbackProfesor||"",onBlur:z=>UR(q.id,z.target.value),rows:2,className:"w-full mt-2 p-1 border rounded-md dark:bg-slate-700 dark:border-slate-600 flex-grow"},q.id),c.jsx("button",{onClick:()=>G(q),disabled:D===q.id,className:"p-2 rounded-md hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50",title:"Generar Feedback con IA",children:D===q.id?"...":c.jsx(s5,{})})]})]}):c.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"El estudiante aún no ha realizado la entrega."})]},re.id)})})]}):c.jsx("div",{className:"text-center p-8",children:"Este proyecto no tiene tareas asignadas."})};return r?c.jsx("div",{className:"text-center py-10",children:"Cargando proyectos..."}):d?c.jsx(k,{plan:d,onBack:()=>h(null)}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[s==="list"?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Proyectos Interdisciplinarios"}),c.jsx("button",{onClick:_,className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Crear Nuevo"})]}),c.jsx("div",{className:"space-y-4",children:t.map(R=>(console.log("Inspeccionando objeto plan:",R),c.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:R.nombreProyecto}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Cursos: ",(R.cursos||[]).join(", ")]})]}),c.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[c.jsx("button",{onClick:()=>h(R),className:"text-green-600 hover:text-green-800 dark:text-green-400 font-semibold text-sm",children:"Ver Entregas"}),c.jsx("button",{onClick:()=>N(R),disabled:l===R.id,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm disabled:opacity-50",children:l===R.id?"Exportando...":"Exportar PDF"}),c.jsx("button",{onClick:()=>b(R),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Editar"}),c.jsx("button",{onClick:()=>y(R.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]})},R.id)))})]}):c.jsx(mSe,{initialPlan:i,onSave:g,onCancel:()=>{a("list"),o(null)}}),t.length>0&&c.jsx("div",{id:"gantt-container-vertical",children:c.jsx(iSe,{planificaciones:t,onActivityUpdate:m})})]})},l_="pañolMaquinas",PR="pañolRegistros",pSe=()=>{const[t,e]=ee.useState([]),[r,n]=ee.useState([]),s={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[a,i]=ee.useState(s),[o,l]=ee.useState(null),u={nombre:"",especialidad:"Industrial"},[d,h]=ee.useState(u),[m,g]=ee.useState(null),[b,y]=ee.useState({maquinaId:"",curso:"",profesor:"",fecha:""});ee.useEffect(()=>{try{const I=localStorage.getItem(l_);if(I&&JSON.parse(I).length>0)e(JSON.parse(I));else{const G=[{id:crypto.randomUUID(),nombre:"Torno",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Fresadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora MIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora TIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Torno CNC",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Elevador",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Compresor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta de motor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta hidráulica",especialidad:"Automotriz"}];e(G),localStorage.setItem(l_,JSON.stringify(G))}const O=localStorage.getItem(PR);O&&n(JSON.parse(O))}catch(I){console.error("Error al cargar datos de Pañol desde localStorage",I)}},[]);const _=ee.useCallback(I=>{e(I),localStorage.setItem(l_,JSON.stringify(I))},[]),N=ee.useCallback(I=>{n(I),localStorage.setItem(PR,JSON.stringify(I))},[]),k=I=>{I.preventDefault(),d.nombre.trim()&&(_(m?t.map(O=>O.id===m.id?{...m,...d}:O):[{...d,id:crypto.randomUUID()},...t]),h(u),g(null))},R=ee.useCallback(I=>{if(r.some(O=>O.maquinaId===I)){alert("No se puede eliminar una máquina con registros de uso. Elimine los registros primero.");return}window.confirm("¿Eliminar esta máquina?")&&_(t.filter(O=>O.id!==I))},[t,r,_]),M=I=>{I.preventDefault();const O=o||a;if(!O.curso||!O.profesorResponsable.trim()||!O.maquinaId||O.totalHoras<=0){alert("Curso, Profesor, Máquina y un Total de Horas mayor a cero son obligatorios.");return}N(o?r.map(G=>G.id===o.id?o:G):[{...a,id:crypto.randomUUID()},...r]),i(s),l(null)},j=ee.useCallback(I=>{window.confirm("¿Eliminar este registro de uso?")&&N(r.filter(O=>O.id!==I))},[r,N]),L=ee.useMemo(()=>r.filter(I=>(b.maquinaId===""||I.maquinaId===b.maquinaId)&&(b.curso===""||I.curso===b.curso)&&(b.profesor===""||I.profesorResponsable.toLowerCase().includes(b.profesor.toLowerCase()))&&(b.fecha===""||I.fecha===b.fecha)).sort((I,O)=>new Date(O.fecha).getTime()-new Date(I.fecha).getTime()),[r,b]),C=ee.useMemo(()=>new Map(t.map(I=>[I.id,I])),[t]),E=()=>{const I=L.map(se=>{var J,re;return{Fecha:se.fecha,Curso:se.curso,Profesor:se.profesorResponsable,Máquina:((J=C.get(se.maquinaId))==null?void 0:J.nombre)||"N/A",Especialidad:((re=C.get(se.maquinaId))==null?void 0:re.especialidad)||"N/A","Total Horas":se.totalHoras,Observaciones:se.observaciones}}),O=Hl.json_to_sheet(I),G=Hl.book_new();Hl.book_append_sheet(G,O,"RegistrosPañol"),_T(G,"Registros_Pañol.xlsx")},B=()=>{const I=new or;al(I,{head:[["Fecha","Curso","Profesor","Máquina","Especialidad","Total Horas","Observaciones"]],body:L.map(O=>{var G,se;return[O.fecha,O.curso,O.profesorResponsable,((G=C.get(O.maquinaId))==null?void 0:G.nombre)||"N/A",((se=C.get(O.maquinaId))==null?void 0:se.especialidad)||"N/A",O.totalHoras,O.observaciones]}),margin:{top:20,right:10,bottom:20,left:10},didDrawPage:O=>{I.setFontSize(10),I.setFont("helvetica","bold"),I.text("LICEO INDUSTRIAL DE RECOLETA",O.settings.margin.left,15)}}),I.save("Registros_Pañol.pdf")},Q="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",D=()=>{const I=o||a,O=o?l:i;return c.jsxs("form",{onSubmit:M,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Fecha"}),c.jsx("input",{name:"fecha",type:"date",value:I.fecha,onChange:G=>O({...I,fecha:G.target.value}),className:Q,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Curso"}),c.jsxs("select",{name:"curso",value:I.curso,onChange:G=>O({...I,curso:G.target.value}),className:Q,required:!0,children:[c.jsx("option",{value:"",children:"Curso"}),la.map(G=>c.jsx("option",{children:G},G))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Profesor"}),c.jsxs("select",{name:"profesorResponsable",value:I.profesorResponsable,onChange:G=>O({...I,profesorResponsable:G.target.value}),className:Q,required:!0,children:[c.jsx("option",{value:"",children:"Profesor Responsable"}),W_.map(G=>c.jsx("option",{value:G,children:G},G))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Máquina"}),c.jsxs("select",{name:"maquinaId",value:I.maquinaId,onChange:G=>O({...I,maquinaId:G.target.value}),className:Q,required:!0,children:[c.jsx("option",{value:"",children:"Máquina"}),t.map(G=>c.jsx("option",{value:G.id,children:G.nombre},G.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Total de Horas"}),c.jsx("input",{name:"totalHoras",type:"number",value:I.totalHoras,onChange:G=>O({...I,totalHoras:Number(G.target.value)}),className:Q,required:!0,min:"0.5",step:"0.5"})]}),c.jsxs("div",{className:"lg:col-span-3",children:[c.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),c.jsx("textarea",{name:"observaciones",value:I.observaciones,onChange:G=>O({...I,observaciones:G.target.value}),placeholder:"Observaciones...",className:`${Q}`,rows:1})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o&&c.jsx("button",{type:"button",onClick:()=>l(null),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:o?"Actualizar":"Registrar"})]})]})};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Pañol: Registro de Uso de Máquinas"}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-3 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:o?`Editando Registro #${o.id.substring(0,4)}`:"Nuevo Registro de Uso"}),D()]}),c.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Administrar Máquinas"}),c.jsxs("form",{onSubmit:k,className:"flex gap-2 mb-4",children:[c.jsx("input",{value:d.nombre,onChange:I=>h({...d,nombre:I.target.value}),placeholder:"Nombre máquina",className:Q}),c.jsxs("select",{value:d.especialidad,onChange:I=>h({...d,especialidad:I.target.value}),className:Q,children:[c.jsx("option",{value:"Industrial",children:"Industrial"}),c.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),c.jsx("button",{type:"submit",className:"bg-slate-200 p-2 rounded-lg font-bold",children:m?"✓":"+"})]}),c.jsx("ul",{className:"space-y-2 max-h-60 overflow-y-auto",children:t.map(I=>c.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[c.jsxs("span",{children:[I.nombre," ",c.jsxs("span",{className:"text-xs text-slate-500",children:["(",I.especialidad,")"]})]}),c.jsxs("div",{className:"space-x-2",children:[c.jsx("button",{onClick:()=>{g(I),h(I)},className:"text-blue-500",children:"✏️"}),c.jsx("button",{onClick:()=>R(I.id),className:"text-red-500",children:"🗑️"})]})]},I.id))})]}),c.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Historial de Uso"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:E,className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),c.jsx("button",{onClick:B,className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[c.jsx("input",{type:"date",value:b.fecha,onChange:I=>y({...b,fecha:I.target.value}),className:Q}),c.jsxs("select",{value:b.curso,onChange:I=>y({...b,curso:I.target.value}),className:Q,children:[c.jsx("option",{value:"",children:"Todos los Cursos"}),la.map(I=>c.jsx("option",{children:I},I))]}),c.jsxs("select",{value:b.maquinaId,onChange:I=>y({...b,maquinaId:I.target.value}),className:Q,children:[c.jsx("option",{value:"",children:"Todas las Máquinas"}),t.map(I=>c.jsx("option",{value:I.id,children:I.nombre},I.id))]}),c.jsx("input",{value:b.profesor,onChange:I=>y({...b,profesor:I.target.value}),placeholder:"Buscar profesor...",className:Q})]}),c.jsx("div",{className:"max-h-96 overflow-y-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Máquina"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Profesor"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Total Horas"}),c.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-500 uppercase",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:L.map(I=>{var O;return c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:I.fecha}),c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((O=C.get(I.maquinaId))==null?void 0:O.nombre)||"N/A"}),c.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[I.profesorResponsable," (",I.curso,")"]}),c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:I.totalHoras}),c.jsxs("td",{className:"px-3 py-2 text-center",children:[c.jsx("button",{onClick:()=>l(I),className:"text-blue-500",children:"✏️"}),c.jsx("button",{onClick:()=>j(I.id),className:"text-red-500 ml-2",children:"🗑️"})]})]},I.id)})})]})})]})]})]})};function oo(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let r=0,n;r<t.length;r++)(n=oo(t[r]))!==""&&(e+=(e&&" ")+n);else for(let r in t)t[r]&&(e+=(e&&" ")+r);return e}var c_={exports:{}},u_={},A_={exports:{}},d_={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jR;function gSe(){if(jR)return d_;jR=1;var t=Hx();function e(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,s=t.useEffect,a=t.useLayoutEffect,i=t.useDebugValue;function o(h,m){var g=m(),b=n({inst:{value:g,getSnapshot:m}}),y=b[0].inst,_=b[1];return a(function(){y.value=g,y.getSnapshot=m,l(y)&&_({inst:y})},[h,g,m]),s(function(){return l(y)&&_({inst:y}),h(function(){l(y)&&_({inst:y})})},[h]),i(g),g}function l(h){var m=h.getSnapshot;h=h.value;try{var g=m();return!r(h,g)}catch{return!0}}function u(h,m){return m()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return d_.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,d_}var OR;function xSe(){return OR||(OR=1,A_.exports=gSe()),A_.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QR;function vSe(){if(QR)return u_;QR=1;var t=Hx(),e=xSe();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,s=e.useSyncExternalStore,a=t.useRef,i=t.useEffect,o=t.useMemo,l=t.useDebugValue;return u_.useSyncExternalStoreWithSelector=function(u,d,h,m,g){var b=a(null);if(b.current===null){var y={hasValue:!1,value:null};b.current=y}else y=b.current;b=o(function(){function N(L){if(!k){if(k=!0,R=L,L=m(L),g!==void 0&&y.hasValue){var C=y.value;if(g(C,L))return M=C}return M=L}if(C=M,n(R,L))return C;var E=m(L);return g!==void 0&&g(C,E)?(R=L,C):(R=L,M=E)}var k=!1,R,M,j=h===void 0?null:h;return[function(){return N(d())},j===null?void 0:function(){return N(j())}]},[d,h,m,g]);var _=s(u,b[0],b[1]);return i(function(){y.hasValue=!0,y.value=_},[_]),l(_),_},u_}var HR;function ySe(){return HR||(HR=1,c_.exports=vSe()),c_.exports}var wSe=ySe();const bSe=E5(wSe),CSe={},VR=t=>{let e;const r=new Set,n=(d,h)=>{const m=typeof d=="function"?d(e):d;if(!Object.is(m,e)){const g=e;e=h??(typeof m!="object"||m===null)?m:Object.assign({},e,m),r.forEach(b=>b(e,g))}},s=()=>e,l={setState:n,getState:s,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(CSe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=e=t(n,s,l);return l},ESe=t=>t?VR(t):VR,{useDebugValue:_Se}=At,{useSyncExternalStoreWithSelector:SSe}=bSe,TSe=t=>t;function cQ(t,e=TSe,r){const n=SSe(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,r);return _Se(n),n}const GR=(t,e)=>{const r=ESe(t),n=(s,a=e)=>cQ(r,s,a);return Object.assign(n,r),n},NSe=(t,e)=>t?GR(t,e):GR;function $i(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[n,s]of t)if(!Object.is(s,e.get(n)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(e,n)||!Object.is(t[n],e[n]))return!1;return!0}var BSe={value:()=>{}};function wb(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new $y(r)}function $y(t){this._=t}function kSe(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",s=r.indexOf(".");if(s>=0&&(n=r.slice(s+1),r=r.slice(0,s)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}$y.prototype=wb.prototype={constructor:$y,on:function(t,e){var r=this._,n=kSe(t+"",r),s,a=-1,i=n.length;if(arguments.length<2){for(;++a<i;)if((s=(t=n[a]).type)&&(s=ISe(r[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<i;)if(s=(t=n[a]).type)r[s]=zR(r[s],t.name,e);else if(e==null)for(s in r)r[s]=zR(r[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new $y(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var r=new Array(s),n=0,s,a;n<s;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],n=0,s=a.length;n<s;++n)a[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],s=0,a=n.length;s<a;++s)n[s].value.apply(e,r)}};function ISe(t,e){for(var r=0,n=t.length,s;r<n;++r)if((s=t[r]).name===e)return s.value}function zR(t,e,r){for(var n=0,s=t.length;n<s;++n)if(t[n].name===e){t[n]=BSe,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}var a5="http://www.w3.org/1999/xhtml";const qR={svg:"http://www.w3.org/2000/svg",xhtml:a5,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function bb(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),qR.hasOwnProperty(e)?{space:qR[e],local:t}:t}function FSe(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===a5&&e.documentElement.namespaceURI===a5?e.createElement(t):e.createElementNS(r,t)}}function DSe(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function uQ(t){var e=bb(t);return(e.local?DSe:FSe)(e)}function RSe(){}function HT(t){return t==null?RSe:function(){return this.querySelector(t)}}function LSe(t){typeof t!="function"&&(t=HT(t));for(var e=this._groups,r=e.length,n=new Array(r),s=0;s<r;++s)for(var a=e[s],i=a.length,o=n[s]=new Array(i),l,u,d=0;d<i;++d)(l=a[d])&&(u=t.call(l,l.__data__,d,a))&&("__data__"in l&&(u.__data__=l.__data__),o[d]=u);return new ll(n,this._parents)}function USe(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function MSe(){return[]}function AQ(t){return t==null?MSe:function(){return this.querySelectorAll(t)}}function PSe(t){return function(){return USe(t.apply(this,arguments))}}function jSe(t){typeof t=="function"?t=PSe(t):t=AQ(t);for(var e=this._groups,r=e.length,n=[],s=[],a=0;a<r;++a)for(var i=e[a],o=i.length,l,u=0;u<o;++u)(l=i[u])&&(n.push(t.call(l,l.__data__,u,i)),s.push(l));return new ll(n,s)}function dQ(t){return function(){return this.matches(t)}}function fQ(t){return function(e){return e.matches(t)}}var OSe=Array.prototype.find;function QSe(t){return function(){return OSe.call(this.children,t)}}function HSe(){return this.firstElementChild}function VSe(t){return this.select(t==null?HSe:QSe(typeof t=="function"?t:fQ(t)))}var GSe=Array.prototype.filter;function zSe(){return Array.from(this.children)}function qSe(t){return function(){return GSe.call(this.children,t)}}function KSe(t){return this.selectAll(t==null?zSe:qSe(typeof t=="function"?t:fQ(t)))}function $Se(t){typeof t!="function"&&(t=dQ(t));for(var e=this._groups,r=e.length,n=new Array(r),s=0;s<r;++s)for(var a=e[s],i=a.length,o=n[s]=[],l,u=0;u<i;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&o.push(l);return new ll(n,this._parents)}function hQ(t){return new Array(t.length)}function WSe(){return new ll(this._enter||this._groups.map(hQ),this._parents)}function tw(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}tw.prototype={constructor:tw,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function YSe(t){return function(){return t}}function XSe(t,e,r,n,s,a){for(var i=0,o,l=e.length,u=a.length;i<u;++i)(o=e[i])?(o.__data__=a[i],n[i]=o):r[i]=new tw(t,a[i]);for(;i<l;++i)(o=e[i])&&(s[i]=o)}function JSe(t,e,r,n,s,a,i){var o,l,u=new Map,d=e.length,h=a.length,m=new Array(d),g;for(o=0;o<d;++o)(l=e[o])&&(m[o]=g=i.call(l,l.__data__,o,e)+"",u.has(g)?s[o]=l:u.set(g,l));for(o=0;o<h;++o)g=i.call(t,a[o],o,a)+"",(l=u.get(g))?(n[o]=l,l.__data__=a[o],u.delete(g)):r[o]=new tw(t,a[o]);for(o=0;o<d;++o)(l=e[o])&&u.get(m[o])===l&&(s[o]=l)}function ZSe(t){return t.__data__}function e5e(t,e){if(!arguments.length)return Array.from(this,ZSe);var r=e?JSe:XSe,n=this._parents,s=this._groups;typeof t!="function"&&(t=YSe(t));for(var a=s.length,i=new Array(a),o=new Array(a),l=new Array(a),u=0;u<a;++u){var d=n[u],h=s[u],m=h.length,g=t5e(t.call(d,d&&d.__data__,u,n)),b=g.length,y=o[u]=new Array(b),_=i[u]=new Array(b),N=l[u]=new Array(m);r(d,h,y,_,N,g,e);for(var k=0,R=0,M,j;k<b;++k)if(M=y[k]){for(k>=R&&(R=k+1);!(j=_[R])&&++R<b;);M._next=j||null}}return i=new ll(i,n),i._enter=o,i._exit=l,i}function t5e(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function r5e(){return new ll(this._exit||this._groups.map(hQ),this._parents)}function n5e(t,e,r){var n=this.enter(),s=this,a=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),e!=null&&(s=e(s),s&&(s=s.selection())),r==null?a.remove():r(a),n&&s?n.merge(s).order():s}function s5e(t){for(var e=t.selection?t.selection():t,r=this._groups,n=e._groups,s=r.length,a=n.length,i=Math.min(s,a),o=new Array(s),l=0;l<i;++l)for(var u=r[l],d=n[l],h=u.length,m=o[l]=new Array(h),g,b=0;b<h;++b)(g=u[b]||d[b])&&(m[b]=g);for(;l<s;++l)o[l]=r[l];return new ll(o,this._parents)}function a5e(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var n=t[e],s=n.length-1,a=n[s],i;--s>=0;)(i=n[s])&&(a&&i.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(i,a),a=i);return this}function i5e(t){t||(t=o5e);function e(h,m){return h&&m?t(h.__data__,m.__data__):!h-!m}for(var r=this._groups,n=r.length,s=new Array(n),a=0;a<n;++a){for(var i=r[a],o=i.length,l=s[a]=new Array(o),u,d=0;d<o;++d)(u=i[d])&&(l[d]=u);l.sort(e)}return new ll(s,this._parents).order()}function o5e(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function l5e(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function c5e(){return Array.from(this)}function u5e(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],s=0,a=n.length;s<a;++s){var i=n[s];if(i)return i}return null}function A5e(){let t=0;for(const e of this)++t;return t}function d5e(){return!this.node()}function f5e(t){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var s=e[r],a=0,i=s.length,o;a<i;++a)(o=s[a])&&t.call(o,o.__data__,a,s);return this}function h5e(t){return function(){this.removeAttribute(t)}}function m5e(t){return function(){this.removeAttributeNS(t.space,t.local)}}function p5e(t,e){return function(){this.setAttribute(t,e)}}function g5e(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function x5e(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function v5e(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function y5e(t,e){var r=bb(t);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((e==null?r.local?m5e:h5e:typeof e=="function"?r.local?v5e:x5e:r.local?g5e:p5e)(r,e))}function mQ(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function w5e(t){return function(){this.style.removeProperty(t)}}function b5e(t,e,r){return function(){this.style.setProperty(t,e,r)}}function C5e(t,e,r){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,r)}}function E5e(t,e,r){return arguments.length>1?this.each((e==null?w5e:typeof e=="function"?C5e:b5e)(t,e,r??"")):zm(this.node(),t)}function zm(t,e){return t.style.getPropertyValue(e)||mQ(t).getComputedStyle(t,null).getPropertyValue(e)}function _5e(t){return function(){delete this[t]}}function S5e(t,e){return function(){this[t]=e}}function T5e(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function N5e(t,e){return arguments.length>1?this.each((e==null?_5e:typeof e=="function"?T5e:S5e)(t,e)):this.node()[t]}function pQ(t){return t.trim().split(/^|\s+/)}function VT(t){return t.classList||new gQ(t)}function gQ(t){this._node=t,this._names=pQ(t.getAttribute("class")||"")}gQ.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function xQ(t,e){for(var r=VT(t),n=-1,s=e.length;++n<s;)r.add(e[n])}function vQ(t,e){for(var r=VT(t),n=-1,s=e.length;++n<s;)r.remove(e[n])}function B5e(t){return function(){xQ(this,t)}}function k5e(t){return function(){vQ(this,t)}}function I5e(t,e){return function(){(e.apply(this,arguments)?xQ:vQ)(this,t)}}function F5e(t,e){var r=pQ(t+"");if(arguments.length<2){for(var n=VT(this.node()),s=-1,a=r.length;++s<a;)if(!n.contains(r[s]))return!1;return!0}return this.each((typeof e=="function"?I5e:e?B5e:k5e)(r,e))}function D5e(){this.textContent=""}function R5e(t){return function(){this.textContent=t}}function L5e(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function U5e(t){return arguments.length?this.each(t==null?D5e:(typeof t=="function"?L5e:R5e)(t)):this.node().textContent}function M5e(){this.innerHTML=""}function P5e(t){return function(){this.innerHTML=t}}function j5e(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function O5e(t){return arguments.length?this.each(t==null?M5e:(typeof t=="function"?j5e:P5e)(t)):this.node().innerHTML}function Q5e(){this.nextSibling&&this.parentNode.appendChild(this)}function H5e(){return this.each(Q5e)}function V5e(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function G5e(){return this.each(V5e)}function z5e(t){var e=typeof t=="function"?t:uQ(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function q5e(){return null}function K5e(t,e){var r=typeof t=="function"?t:uQ(t),n=e==null?q5e:typeof e=="function"?e:HT(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function $5e(){var t=this.parentNode;t&&t.removeChild(this)}function W5e(){return this.each($5e)}function Y5e(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function X5e(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function J5e(t){return this.select(t?X5e:Y5e)}function Z5e(t){return arguments.length?this.property("__data__",t):this.node().__data__}function e4e(t){return function(e){t.call(this,e,this.__data__)}}function t4e(t){return t.trim().split(/^|\s+/).map(function(e){var r="",n=e.indexOf(".");return n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),{type:e,name:r}})}function r4e(t){return function(){var e=this.__on;if(e){for(var r=0,n=-1,s=e.length,a;r<s;++r)a=e[r],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++n]=a;++n?e.length=n:delete this.__on}}}function n4e(t,e,r){return function(){var n=this.__on,s,a=e4e(e);if(n){for(var i=0,o=n.length;i<o;++i)if((s=n[i]).type===t.type&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=a,s.options=r),s.value=e;return}}this.addEventListener(t.type,a,r),s={type:t.type,name:t.name,value:e,listener:a,options:r},n?n.push(s):this.__on=[s]}}function s4e(t,e,r){var n=t4e(t+""),s,a=n.length,i;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,u=o.length,d;l<u;++l)for(s=0,d=o[l];s<a;++s)if((i=n[s]).type===d.type&&i.name===d.name)return d.value}return}for(o=e?n4e:r4e,s=0;s<a;++s)this.each(o(n[s],e,r));return this}function yQ(t,e,r){var n=mQ(t),s=n.CustomEvent;typeof s=="function"?s=new s(e,r):(s=n.document.createEvent("Event"),r?(s.initEvent(e,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function a4e(t,e){return function(){return yQ(this,t,e)}}function i4e(t,e){return function(){return yQ(this,t,e.apply(this,arguments))}}function o4e(t,e){return this.each((typeof e=="function"?i4e:a4e)(t,e))}function*l4e(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],s=0,a=n.length,i;s<a;++s)(i=n[s])&&(yield i)}var wQ=[null];function ll(t,e){this._groups=t,this._parents=e}function y1(){return new ll([[document.documentElement]],wQ)}function c4e(){return this}ll.prototype=y1.prototype={constructor:ll,select:LSe,selectAll:jSe,selectChild:VSe,selectChildren:KSe,filter:$Se,data:e5e,enter:WSe,exit:r5e,join:n5e,merge:s5e,selection:c4e,order:a5e,sort:i5e,call:l5e,nodes:c5e,node:u5e,size:A5e,empty:d5e,each:f5e,attr:y5e,style:E5e,property:N5e,classed:F5e,text:U5e,html:O5e,raise:H5e,lower:G5e,append:z5e,insert:K5e,remove:W5e,clone:J5e,datum:Z5e,on:s4e,dispatch:o4e,[Symbol.iterator]:l4e};function _c(t){return typeof t=="string"?new ll([[document.querySelector(t)]],[document.documentElement]):new ll([[t]],wQ)}function u4e(t){let e;for(;e=t.sourceEvent;)t=e;return t}function bu(t,e){if(t=u4e(t),e===void 0&&(e=t.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}}return[t.pageX,t.pageY]}const A4e={passive:!1},Lx={capture:!0,passive:!1};function f_(t){t.stopImmediatePropagation()}function Tm(t){t.preventDefault(),t.stopImmediatePropagation()}function bQ(t){var e=t.document.documentElement,r=_c(t).on("dragstart.drag",Tm,Lx);"onselectstart"in e?r.on("selectstart.drag",Tm,Lx):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function CQ(t,e){var r=t.document.documentElement,n=_c(t).on("dragstart.drag",null);e&&(n.on("click.drag",Tm,Lx),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const py=t=>()=>t;function i5(t,{sourceEvent:e,subject:r,target:n,identifier:s,active:a,x:i,y:o,dx:l,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}i5.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function d4e(t){return!t.ctrlKey&&!t.button}function f4e(){return this.parentNode}function h4e(t,e){return e??{x:t.x,y:t.y}}function m4e(){return navigator.maxTouchPoints||"ontouchstart"in this}function p4e(){var t=d4e,e=f4e,r=h4e,n=m4e,s={},a=wb("start","drag","end"),i=0,o,l,u,d,h=0;function m(M){M.on("mousedown.drag",g).filter(n).on("touchstart.drag",_).on("touchmove.drag",N,A4e).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(M,j){if(!(d||!t.call(this,M,j))){var L=R(this,e.call(this,M,j),M,j,"mouse");L&&(_c(M.view).on("mousemove.drag",b,Lx).on("mouseup.drag",y,Lx),bQ(M.view),f_(M),u=!1,o=M.clientX,l=M.clientY,L("start",M))}}function b(M){if(Tm(M),!u){var j=M.clientX-o,L=M.clientY-l;u=j*j+L*L>h}s.mouse("drag",M)}function y(M){_c(M.view).on("mousemove.drag mouseup.drag",null),CQ(M.view,u),Tm(M),s.mouse("end",M)}function _(M,j){if(t.call(this,M,j)){var L=M.changedTouches,C=e.call(this,M,j),E=L.length,B,Q;for(B=0;B<E;++B)(Q=R(this,C,M,j,L[B].identifier,L[B]))&&(f_(M),Q("start",M,L[B]))}}function N(M){var j=M.changedTouches,L=j.length,C,E;for(C=0;C<L;++C)(E=s[j[C].identifier])&&(Tm(M),E("drag",M,j[C]))}function k(M){var j=M.changedTouches,L=j.length,C,E;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),C=0;C<L;++C)(E=s[j[C].identifier])&&(f_(M),E("end",M,j[C]))}function R(M,j,L,C,E,B){var Q=a.copy(),D=bu(B||L,j),I,O,G;if((G=r.call(M,new i5("beforestart",{sourceEvent:L,target:m,identifier:E,active:i,x:D[0],y:D[1],dx:0,dy:0,dispatch:Q}),C))!=null)return I=G.x-D[0]||0,O=G.y-D[1]||0,function se(J,re,q){var z=D,W;switch(J){case"start":s[E]=se,W=i++;break;case"end":delete s[E],--i;case"drag":D=bu(q||re,j),W=i;break}Q.call(J,M,new i5(J,{sourceEvent:re,subject:G,target:m,identifier:E,active:W,x:D[0]+I,y:D[1]+O,dx:D[0]-z[0],dy:D[1]-z[1],dispatch:Q}),C)}}return m.filter=function(M){return arguments.length?(t=typeof M=="function"?M:py(!!M),m):t},m.container=function(M){return arguments.length?(e=typeof M=="function"?M:py(M),m):e},m.subject=function(M){return arguments.length?(r=typeof M=="function"?M:py(M),m):r},m.touchable=function(M){return arguments.length?(n=typeof M=="function"?M:py(!!M),m):n},m.on=function(){var M=a.on.apply(a,arguments);return M===a?m:M},m.clickDistance=function(M){return arguments.length?(h=(M=+M)*M,m):Math.sqrt(h)},m}function GT(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function EQ(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function w1(){}var Ux=.7,rw=1/Ux,Nm="\\s*([+-]?\\d+)\\s*",Mx="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Du="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",g4e=/^#([0-9a-f]{3,8})$/,x4e=new RegExp(`^rgb\\(${Nm},${Nm},${Nm}\\)$`),v4e=new RegExp(`^rgb\\(${Du},${Du},${Du}\\)$`),y4e=new RegExp(`^rgba\\(${Nm},${Nm},${Nm},${Mx}\\)$`),w4e=new RegExp(`^rgba\\(${Du},${Du},${Du},${Mx}\\)$`),b4e=new RegExp(`^hsl\\(${Mx},${Du},${Du}\\)$`),C4e=new RegExp(`^hsla\\(${Mx},${Du},${Du},${Mx}\\)$`),KR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};GT(w1,Px,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:$R,formatHex:$R,formatHex8:E4e,formatHsl:_4e,formatRgb:WR,toString:WR});function $R(){return this.rgb().formatHex()}function E4e(){return this.rgb().formatHex8()}function _4e(){return _Q(this).formatHsl()}function WR(){return this.rgb().formatRgb()}function Px(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=g4e.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?YR(e):r===3?new Bo(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?gy(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?gy(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=x4e.exec(t))?new Bo(e[1],e[2],e[3],1):(e=v4e.exec(t))?new Bo(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=y4e.exec(t))?gy(e[1],e[2],e[3],e[4]):(e=w4e.exec(t))?gy(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=b4e.exec(t))?ZR(e[1],e[2]/100,e[3]/100,1):(e=C4e.exec(t))?ZR(e[1],e[2]/100,e[3]/100,e[4]):KR.hasOwnProperty(t)?YR(KR[t]):t==="transparent"?new Bo(NaN,NaN,NaN,0):null}function YR(t){return new Bo(t>>16&255,t>>8&255,t&255,1)}function gy(t,e,r,n){return n<=0&&(t=e=r=NaN),new Bo(t,e,r,n)}function S4e(t){return t instanceof w1||(t=Px(t)),t?(t=t.rgb(),new Bo(t.r,t.g,t.b,t.opacity)):new Bo}function o5(t,e,r,n){return arguments.length===1?S4e(t):new Bo(t,e,r,n??1)}function Bo(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}GT(Bo,o5,EQ(w1,{brighter(t){return t=t==null?rw:Math.pow(rw,t),new Bo(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ux:Math.pow(Ux,t),new Bo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Bo(Sh(this.r),Sh(this.g),Sh(this.b),nw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:XR,formatHex:XR,formatHex8:T4e,formatRgb:JR,toString:JR}));function XR(){return`#${hh(this.r)}${hh(this.g)}${hh(this.b)}`}function T4e(){return`#${hh(this.r)}${hh(this.g)}${hh(this.b)}${hh((isNaN(this.opacity)?1:this.opacity)*255)}`}function JR(){const t=nw(this.opacity);return`${t===1?"rgb(":"rgba("}${Sh(this.r)}, ${Sh(this.g)}, ${Sh(this.b)}${t===1?")":`, ${t})`}`}function nw(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Sh(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function hh(t){return t=Sh(t),(t<16?"0":"")+t.toString(16)}function ZR(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Sc(t,e,r,n)}function _Q(t){if(t instanceof Sc)return new Sc(t.h,t.s,t.l,t.opacity);if(t instanceof w1||(t=Px(t)),!t)return new Sc;if(t instanceof Sc)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,s=Math.min(e,r,n),a=Math.max(e,r,n),i=NaN,o=a-s,l=(a+s)/2;return o?(e===a?i=(r-n)/o+(r<n)*6:r===a?i=(n-e)/o+2:i=(e-r)/o+4,o/=l<.5?a+s:2-a-s,i*=60):o=l>0&&l<1?0:i,new Sc(i,o,l,t.opacity)}function N4e(t,e,r,n){return arguments.length===1?_Q(t):new Sc(t,e,r,n??1)}function Sc(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}GT(Sc,N4e,EQ(w1,{brighter(t){return t=t==null?rw:Math.pow(rw,t),new Sc(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ux:Math.pow(Ux,t),new Sc(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,s=2*r-n;return new Bo(h_(t>=240?t-240:t+120,s,n),h_(t,s,n),h_(t<120?t+240:t-120,s,n),this.opacity)},clamp(){return new Sc(eL(this.h),xy(this.s),xy(this.l),nw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=nw(this.opacity);return`${t===1?"hsl(":"hsla("}${eL(this.h)}, ${xy(this.s)*100}%, ${xy(this.l)*100}%${t===1?")":`, ${t})`}`}}));function eL(t){return t=(t||0)%360,t<0?t+360:t}function xy(t){return Math.max(0,Math.min(1,t||0))}function h_(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const SQ=t=>()=>t;function B4e(t,e){return function(r){return t+r*e}}function k4e(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function I4e(t){return(t=+t)==1?TQ:function(e,r){return r-e?k4e(e,r,t):SQ(isNaN(e)?r:e)}}function TQ(t,e){var r=e-t;return r?B4e(t,r):SQ(isNaN(t)?e:t)}const tL=function t(e){var r=I4e(e);function n(s,a){var i=r((s=o5(s)).r,(a=o5(a)).r),o=r(s.g,a.g),l=r(s.b,a.b),u=TQ(s.opacity,a.opacity);return function(d){return s.r=i(d),s.g=o(d),s.b=l(d),s.opacity=u(d),s+""}}return n.gamma=t,n}(1);function jd(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}var l5=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,m_=new RegExp(l5.source,"g");function F4e(t){return function(){return t}}function D4e(t){return function(e){return t(e)+""}}function R4e(t,e){var r=l5.lastIndex=m_.lastIndex=0,n,s,a,i=-1,o=[],l=[];for(t=t+"",e=e+"";(n=l5.exec(t))&&(s=m_.exec(e));)(a=s.index)>r&&(a=e.slice(r,a),o[i]?o[i]+=a:o[++i]=a),(n=n[0])===(s=s[0])?o[i]?o[i]+=s:o[++i]=s:(o[++i]=null,l.push({i,x:jd(n,s)})),r=m_.lastIndex;return r<e.length&&(a=e.slice(r),o[i]?o[i]+=a:o[++i]=a),o.length<2?l[0]?D4e(l[0].x):F4e(e):(e=l.length,function(u){for(var d=0,h;d<e;++d)o[(h=l[d]).i]=h.x(u);return o.join("")})}var rL=180/Math.PI,c5={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function NQ(t,e,r,n,s,a){var i,o,l;return(i=Math.sqrt(t*t+e*e))&&(t/=i,e/=i),(l=t*r+e*n)&&(r-=t*l,n-=e*l),(o=Math.sqrt(r*r+n*n))&&(r/=o,n/=o,l/=o),t*n<e*r&&(t=-t,e=-e,l=-l,i=-i),{translateX:s,translateY:a,rotate:Math.atan2(e,t)*rL,skewX:Math.atan(l)*rL,scaleX:i,scaleY:o}}var vy;function L4e(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?c5:NQ(e.a,e.b,e.c,e.d,e.e,e.f)}function U4e(t){return t==null||(vy||(vy=document.createElementNS("http://www.w3.org/2000/svg","g")),vy.setAttribute("transform",t),!(t=vy.transform.baseVal.consolidate()))?c5:(t=t.matrix,NQ(t.a,t.b,t.c,t.d,t.e,t.f))}function BQ(t,e,r,n){function s(u){return u.length?u.pop()+" ":""}function a(u,d,h,m,g,b){if(u!==h||d!==m){var y=g.push("translate(",null,e,null,r);b.push({i:y-4,x:jd(u,h)},{i:y-2,x:jd(d,m)})}else(h||m)&&g.push("translate("+h+e+m+r)}function i(u,d,h,m){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),m.push({i:h.push(s(h)+"rotate(",null,n)-2,x:jd(u,d)})):d&&h.push(s(h)+"rotate("+d+n)}function o(u,d,h,m){u!==d?m.push({i:h.push(s(h)+"skewX(",null,n)-2,x:jd(u,d)}):d&&h.push(s(h)+"skewX("+d+n)}function l(u,d,h,m,g,b){if(u!==h||d!==m){var y=g.push(s(g)+"scale(",null,",",null,")");b.push({i:y-4,x:jd(u,h)},{i:y-2,x:jd(d,m)})}else(h!==1||m!==1)&&g.push(s(g)+"scale("+h+","+m+")")}return function(u,d){var h=[],m=[];return u=t(u),d=t(d),a(u.translateX,u.translateY,d.translateX,d.translateY,h,m),i(u.rotate,d.rotate,h,m),o(u.skewX,d.skewX,h,m),l(u.scaleX,u.scaleY,d.scaleX,d.scaleY,h,m),u=d=null,function(g){for(var b=-1,y=m.length,_;++b<y;)h[(_=m[b]).i]=_.x(g);return h.join("")}}}var M4e=BQ(L4e,"px, ","px)","deg)"),P4e=BQ(U4e,", ",")",")"),j4e=1e-12;function nL(t){return((t=Math.exp(t))+1/t)/2}function O4e(t){return((t=Math.exp(t))-1/t)/2}function Q4e(t){return((t=Math.exp(2*t))-1)/(t+1)}const H4e=function t(e,r,n){function s(a,i){var o=a[0],l=a[1],u=a[2],d=i[0],h=i[1],m=i[2],g=d-o,b=h-l,y=g*g+b*b,_,N;if(y<j4e)N=Math.log(m/u)/e,_=function(C){return[o+C*g,l+C*b,u*Math.exp(e*C*N)]};else{var k=Math.sqrt(y),R=(m*m-u*u+n*y)/(2*u*r*k),M=(m*m-u*u-n*y)/(2*m*r*k),j=Math.log(Math.sqrt(R*R+1)-R),L=Math.log(Math.sqrt(M*M+1)-M);N=(L-j)/e,_=function(C){var E=C*N,B=nL(j),Q=u/(r*k)*(B*Q4e(e*E+j)-O4e(j));return[o+Q*g,l+Q*b,u*B/nL(e*E+j)]}}return _.duration=N*1e3*e/Math.SQRT2,_}return s.rho=function(a){var i=Math.max(.001,+a),o=i*i,l=o*o;return t(i,o,l)},s}(Math.SQRT2,2,4);var qm=0,kg=0,og=0,kQ=1e3,sw,Ig,aw=0,jh=0,Cb=0,jx=typeof performance=="object"&&performance.now?performance:Date,IQ=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function zT(){return jh||(IQ(V4e),jh=jx.now()+Cb)}function V4e(){jh=0}function iw(){this._call=this._time=this._next=null}iw.prototype=FQ.prototype={constructor:iw,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?zT():+r)+(e==null?0:+e),!this._next&&Ig!==this&&(Ig?Ig._next=this:sw=this,Ig=this),this._call=t,this._time=r,u5()},stop:function(){this._call&&(this._call=null,this._time=1/0,u5())}};function FQ(t,e,r){var n=new iw;return n.restart(t,e,r),n}function G4e(){zT(),++qm;for(var t=sw,e;t;)(e=jh-t._time)>=0&&t._call.call(void 0,e),t=t._next;--qm}function sL(){jh=(aw=jx.now())+Cb,qm=kg=0;try{G4e()}finally{qm=0,q4e(),jh=0}}function z4e(){var t=jx.now(),e=t-aw;e>kQ&&(Cb-=e,aw=t)}function q4e(){for(var t,e=sw,r,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:sw=r);Ig=t,u5(n)}function u5(t){if(!qm){kg&&(kg=clearTimeout(kg));var e=t-jh;e>24?(t<1/0&&(kg=setTimeout(sL,t-jx.now()-Cb)),og&&(og=clearInterval(og))):(og||(aw=jx.now(),og=setInterval(z4e,kQ)),qm=1,IQ(sL))}}function aL(t,e,r){var n=new iw;return e=e==null?0:+e,n.restart(s=>{n.stop(),t(s+e)},e,r),n}var K4e=wb("start","end","cancel","interrupt"),$4e=[],DQ=0,iL=1,A5=2,Wy=3,oL=4,d5=5,Yy=6;function Eb(t,e,r,n,s,a){var i=t.__transition;if(!i)t.__transition={};else if(r in i)return;W4e(t,r,{name:e,index:n,group:s,on:K4e,tween:$4e,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:DQ})}function qT(t,e){var r=Pc(t,e);if(r.state>DQ)throw new Error("too late; already scheduled");return r}function Hu(t,e){var r=Pc(t,e);if(r.state>Wy)throw new Error("too late; already running");return r}function Pc(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function W4e(t,e,r){var n=t.__transition,s;n[e]=r,r.timer=FQ(a,0,r.time);function a(u){r.state=iL,r.timer.restart(i,r.delay,r.time),r.delay<=u&&i(u-r.delay)}function i(u){var d,h,m,g;if(r.state!==iL)return l();for(d in n)if(g=n[d],g.name===r.name){if(g.state===Wy)return aL(i);g.state===oL?(g.state=Yy,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete n[d]):+d<e&&(g.state=Yy,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete n[d])}if(aL(function(){r.state===Wy&&(r.state=oL,r.timer.restart(o,r.delay,r.time),o(u))}),r.state=A5,r.on.call("start",t,t.__data__,r.index,r.group),r.state===A5){for(r.state=Wy,s=new Array(m=r.tween.length),d=0,h=-1;d<m;++d)(g=r.tween[d].value.call(t,t.__data__,r.index,r.group))&&(s[++h]=g);s.length=h+1}}function o(u){for(var d=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(l),r.state=d5,1),h=-1,m=s.length;++h<m;)s[h].call(t,d);r.state===d5&&(r.on.call("end",t,t.__data__,r.index,r.group),l())}function l(){r.state=Yy,r.timer.stop(),delete n[e];for(var u in n)return;delete t.__transition}}function Xy(t,e){var r=t.__transition,n,s,a=!0,i;if(r){e=e==null?null:e+"";for(i in r){if((n=r[i]).name!==e){a=!1;continue}s=n.state>A5&&n.state<d5,n.state=Yy,n.timer.stop(),n.on.call(s?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[i]}a&&delete t.__transition}}function Y4e(t){return this.each(function(){Xy(this,t)})}function X4e(t,e){var r,n;return function(){var s=Hu(this,t),a=s.tween;if(a!==r){n=r=a;for(var i=0,o=n.length;i<o;++i)if(n[i].name===e){n=n.slice(),n.splice(i,1);break}}s.tween=n}}function J4e(t,e,r){var n,s;if(typeof r!="function")throw new Error;return function(){var a=Hu(this,t),i=a.tween;if(i!==n){s=(n=i).slice();for(var o={name:e,value:r},l=0,u=s.length;l<u;++l)if(s[l].name===e){s[l]=o;break}l===u&&s.push(o)}a.tween=s}}function Z4e(t,e){var r=this._id;if(t+="",arguments.length<2){for(var n=Pc(this.node(),r).tween,s=0,a=n.length,i;s<a;++s)if((i=n[s]).name===t)return i.value;return null}return this.each((e==null?X4e:J4e)(r,t,e))}function KT(t,e,r){var n=t._id;return t.each(function(){var s=Hu(this,n);(s.value||(s.value={}))[e]=r.apply(this,arguments)}),function(s){return Pc(s,n).value[e]}}function RQ(t,e){var r;return(typeof e=="number"?jd:e instanceof Px?tL:(r=Px(e))?(e=r,tL):R4e)(t,e)}function eTe(t){return function(){this.removeAttribute(t)}}function tTe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function rTe(t,e,r){var n,s=r+"",a;return function(){var i=this.getAttribute(t);return i===s?null:i===n?a:a=e(n=i,r)}}function nTe(t,e,r){var n,s=r+"",a;return function(){var i=this.getAttributeNS(t.space,t.local);return i===s?null:i===n?a:a=e(n=i,r)}}function sTe(t,e,r){var n,s,a;return function(){var i,o=r(this),l;return o==null?void this.removeAttribute(t):(i=this.getAttribute(t),l=o+"",i===l?null:i===n&&l===s?a:(s=l,a=e(n=i,o)))}}function aTe(t,e,r){var n,s,a;return function(){var i,o=r(this),l;return o==null?void this.removeAttributeNS(t.space,t.local):(i=this.getAttributeNS(t.space,t.local),l=o+"",i===l?null:i===n&&l===s?a:(s=l,a=e(n=i,o)))}}function iTe(t,e){var r=bb(t),n=r==="transform"?P4e:RQ;return this.attrTween(t,typeof e=="function"?(r.local?aTe:sTe)(r,n,KT(this,"attr."+t,e)):e==null?(r.local?tTe:eTe)(r):(r.local?nTe:rTe)(r,n,e))}function oTe(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function lTe(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function cTe(t,e){var r,n;function s(){var a=e.apply(this,arguments);return a!==n&&(r=(n=a)&&lTe(t,a)),r}return s._value=e,s}function uTe(t,e){var r,n;function s(){var a=e.apply(this,arguments);return a!==n&&(r=(n=a)&&oTe(t,a)),r}return s._value=e,s}function ATe(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var n=bb(t);return this.tween(r,(n.local?cTe:uTe)(n,e))}function dTe(t,e){return function(){qT(this,t).delay=+e.apply(this,arguments)}}function fTe(t,e){return e=+e,function(){qT(this,t).delay=e}}function hTe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?dTe:fTe)(e,t)):Pc(this.node(),e).delay}function mTe(t,e){return function(){Hu(this,t).duration=+e.apply(this,arguments)}}function pTe(t,e){return e=+e,function(){Hu(this,t).duration=e}}function gTe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?mTe:pTe)(e,t)):Pc(this.node(),e).duration}function xTe(t,e){if(typeof e!="function")throw new Error;return function(){Hu(this,t).ease=e}}function vTe(t){var e=this._id;return arguments.length?this.each(xTe(e,t)):Pc(this.node(),e).ease}function yTe(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;Hu(this,t).ease=r}}function wTe(t){if(typeof t!="function")throw new Error;return this.each(yTe(this._id,t))}function bTe(t){typeof t!="function"&&(t=dQ(t));for(var e=this._groups,r=e.length,n=new Array(r),s=0;s<r;++s)for(var a=e[s],i=a.length,o=n[s]=[],l,u=0;u<i;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&o.push(l);return new QA(n,this._parents,this._name,this._id)}function CTe(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,n=e.length,s=r.length,a=Math.min(n,s),i=new Array(n),o=0;o<a;++o)for(var l=e[o],u=r[o],d=l.length,h=i[o]=new Array(d),m,g=0;g<d;++g)(m=l[g]||u[g])&&(h[g]=m);for(;o<n;++o)i[o]=e[o];return new QA(i,this._parents,this._name,this._id)}function ETe(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function _Te(t,e,r){var n,s,a=ETe(e)?qT:Hu;return function(){var i=a(this,t),o=i.on;o!==n&&(s=(n=o).copy()).on(e,r),i.on=s}}function STe(t,e){var r=this._id;return arguments.length<2?Pc(this.node(),r).on.on(t):this.each(_Te(r,t,e))}function TTe(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function NTe(){return this.on("end.remove",TTe(this._id))}function BTe(t){var e=this._name,r=this._id;typeof t!="function"&&(t=HT(t));for(var n=this._groups,s=n.length,a=new Array(s),i=0;i<s;++i)for(var o=n[i],l=o.length,u=a[i]=new Array(l),d,h,m=0;m<l;++m)(d=o[m])&&(h=t.call(d,d.__data__,m,o))&&("__data__"in d&&(h.__data__=d.__data__),u[m]=h,Eb(u[m],e,r,m,u,Pc(d,r)));return new QA(a,this._parents,e,r)}function kTe(t){var e=this._name,r=this._id;typeof t!="function"&&(t=AQ(t));for(var n=this._groups,s=n.length,a=[],i=[],o=0;o<s;++o)for(var l=n[o],u=l.length,d,h=0;h<u;++h)if(d=l[h]){for(var m=t.call(d,d.__data__,h,l),g,b=Pc(d,r),y=0,_=m.length;y<_;++y)(g=m[y])&&Eb(g,e,r,y,m,b);a.push(m),i.push(d)}return new QA(a,i,e,r)}var ITe=y1.prototype.constructor;function FTe(){return new ITe(this._groups,this._parents)}function DTe(t,e){var r,n,s;return function(){var a=zm(this,t),i=(this.style.removeProperty(t),zm(this,t));return a===i?null:a===r&&i===n?s:s=e(r=a,n=i)}}function LQ(t){return function(){this.style.removeProperty(t)}}function RTe(t,e,r){var n,s=r+"",a;return function(){var i=zm(this,t);return i===s?null:i===n?a:a=e(n=i,r)}}function LTe(t,e,r){var n,s,a;return function(){var i=zm(this,t),o=r(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(t),zm(this,t))),i===l?null:i===n&&l===s?a:(s=l,a=e(n=i,o))}}function UTe(t,e){var r,n,s,a="style."+e,i="end."+a,o;return function(){var l=Hu(this,t),u=l.on,d=l.value[a]==null?o||(o=LQ(e)):void 0;(u!==r||s!==d)&&(n=(r=u).copy()).on(i,s=d),l.on=n}}function MTe(t,e,r){var n=(t+="")=="transform"?M4e:RQ;return e==null?this.styleTween(t,DTe(t,n)).on("end.style."+t,LQ(t)):typeof e=="function"?this.styleTween(t,LTe(t,n,KT(this,"style."+t,e))).each(UTe(this._id,t)):this.styleTween(t,RTe(t,n,e),r).on("end.style."+t,null)}function PTe(t,e,r){return function(n){this.style.setProperty(t,e.call(this,n),r)}}function jTe(t,e,r){var n,s;function a(){var i=e.apply(this,arguments);return i!==s&&(n=(s=i)&&PTe(t,i,r)),n}return a._value=e,a}function OTe(t,e,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,jTe(t,e,r??""))}function QTe(t){return function(){this.textContent=t}}function HTe(t){return function(){var e=t(this);this.textContent=e??""}}function VTe(t){return this.tween("text",typeof t=="function"?HTe(KT(this,"text",t)):QTe(t==null?"":t+""))}function GTe(t){return function(e){this.textContent=t.call(this,e)}}function zTe(t){var e,r;function n(){var s=t.apply(this,arguments);return s!==r&&(e=(r=s)&&GTe(s)),e}return n._value=t,n}function qTe(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,zTe(t))}function KTe(){for(var t=this._name,e=this._id,r=UQ(),n=this._groups,s=n.length,a=0;a<s;++a)for(var i=n[a],o=i.length,l,u=0;u<o;++u)if(l=i[u]){var d=Pc(l,e);Eb(l,t,r,u,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new QA(n,this._parents,t,r)}function $Te(){var t,e,r=this,n=r._id,s=r.size();return new Promise(function(a,i){var o={value:i},l={value:function(){--s===0&&a()}};r.each(function(){var u=Hu(this,n),d=u.on;d!==t&&(e=(t=d).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),u.on=e}),s===0&&a()})}var WTe=0;function QA(t,e,r,n){this._groups=t,this._parents=e,this._name=r,this._id=n}function UQ(){return++WTe}var wA=y1.prototype;QA.prototype={constructor:QA,select:BTe,selectAll:kTe,selectChild:wA.selectChild,selectChildren:wA.selectChildren,filter:bTe,merge:CTe,selection:FTe,transition:KTe,call:wA.call,nodes:wA.nodes,node:wA.node,size:wA.size,empty:wA.empty,each:wA.each,on:STe,attr:iTe,attrTween:ATe,style:MTe,styleTween:OTe,text:VTe,textTween:qTe,remove:NTe,tween:Z4e,delay:hTe,duration:gTe,ease:vTe,easeVarying:wTe,end:$Te,[Symbol.iterator]:wA[Symbol.iterator]};function YTe(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var XTe={time:null,delay:0,duration:250,ease:YTe};function JTe(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function ZTe(t){var e,r;t instanceof QA?(e=t._id,t=t._name):(e=UQ(),(r=XTe).time=zT(),t=t==null?null:t+"");for(var n=this._groups,s=n.length,a=0;a<s;++a)for(var i=n[a],o=i.length,l,u=0;u<o;++u)(l=i[u])&&Eb(l,t,e,u,i,r||JTe(l,e));return new QA(n,this._parents,t,e)}y1.prototype.interrupt=Y4e;y1.prototype.transition=ZTe;const yy=t=>()=>t;function eNe(t,{sourceEvent:e,target:r,transform:n,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:s}})}function SA(t,e,r){this.k=t,this.x=e,this.y=r}SA.prototype={constructor:SA,scale:function(t){return t===1?this:new SA(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new SA(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var cf=new SA(1,0,0);SA.prototype;function p_(t){t.stopImmediatePropagation()}function lg(t){t.preventDefault(),t.stopImmediatePropagation()}function tNe(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function rNe(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function lL(){return this.__zoom||cf}function nNe(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function sNe(){return navigator.maxTouchPoints||"ontouchstart"in this}function aNe(t,e,r){var n=t.invertX(e[0][0])-r[0][0],s=t.invertX(e[1][0])-r[1][0],a=t.invertY(e[0][1])-r[0][1],i=t.invertY(e[1][1])-r[1][1];return t.translate(s>n?(n+s)/2:Math.min(0,n)||Math.max(0,s),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}function iNe(){var t=tNe,e=rNe,r=aNe,n=nNe,s=sNe,a=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],o=250,l=H4e,u=wb("start","zoom","end"),d,h,m,g=500,b=150,y=0,_=10;function N(G){G.property("__zoom",lL).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",B).on("dblclick.zoom",Q).filter(s).on("touchstart.zoom",D).on("touchmove.zoom",I).on("touchend.zoom touchcancel.zoom",O).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}N.transform=function(G,se,J,re){var q=G.selection?G.selection():G;q.property("__zoom",lL),G!==q?j(G,se,J,re):q.interrupt().each(function(){L(this,arguments).event(re).start().zoom(null,typeof se=="function"?se.apply(this,arguments):se).end()})},N.scaleBy=function(G,se,J,re){N.scaleTo(G,function(){var q=this.__zoom.k,z=typeof se=="function"?se.apply(this,arguments):se;return q*z},J,re)},N.scaleTo=function(G,se,J,re){N.transform(G,function(){var q=e.apply(this,arguments),z=this.__zoom,W=J==null?M(q):typeof J=="function"?J.apply(this,arguments):J,ie=z.invert(W),P=typeof se=="function"?se.apply(this,arguments):se;return r(R(k(z,P),W,ie),q,i)},J,re)},N.translateBy=function(G,se,J,re){N.transform(G,function(){return r(this.__zoom.translate(typeof se=="function"?se.apply(this,arguments):se,typeof J=="function"?J.apply(this,arguments):J),e.apply(this,arguments),i)},null,re)},N.translateTo=function(G,se,J,re,q){N.transform(G,function(){var z=e.apply(this,arguments),W=this.__zoom,ie=re==null?M(z):typeof re=="function"?re.apply(this,arguments):re;return r(cf.translate(ie[0],ie[1]).scale(W.k).translate(typeof se=="function"?-se.apply(this,arguments):-se,typeof J=="function"?-J.apply(this,arguments):-J),z,i)},re,q)};function k(G,se){return se=Math.max(a[0],Math.min(a[1],se)),se===G.k?G:new SA(se,G.x,G.y)}function R(G,se,J){var re=se[0]-J[0]*G.k,q=se[1]-J[1]*G.k;return re===G.x&&q===G.y?G:new SA(G.k,re,q)}function M(G){return[(+G[0][0]+ +G[1][0])/2,(+G[0][1]+ +G[1][1])/2]}function j(G,se,J,re){G.on("start.zoom",function(){L(this,arguments).event(re).start()}).on("interrupt.zoom end.zoom",function(){L(this,arguments).event(re).end()}).tween("zoom",function(){var q=this,z=arguments,W=L(q,z).event(re),ie=e.apply(q,z),P=J==null?M(ie):typeof J=="function"?J.apply(q,z):J,Y=Math.max(ie[1][0]-ie[0][0],ie[1][1]-ie[0][1]),Z=q.__zoom,te=typeof se=="function"?se.apply(q,z):se,ce=l(Z.invert(P).concat(Y/Z.k),te.invert(P).concat(Y/te.k));return function(Ee){if(Ee===1)Ee=te;else{var pe=ce(Ee),fe=Y/pe[2];Ee=new SA(fe,P[0]-pe[0]*fe,P[1]-pe[1]*fe)}W.zoom(null,Ee)}})}function L(G,se,J){return!J&&G.__zooming||new C(G,se)}function C(G,se){this.that=G,this.args=se,this.active=0,this.sourceEvent=null,this.extent=e.apply(G,se),this.taps=0}C.prototype={event:function(G){return G&&(this.sourceEvent=G),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(G,se){return this.mouse&&G!=="mouse"&&(this.mouse[1]=se.invert(this.mouse[0])),this.touch0&&G!=="touch"&&(this.touch0[1]=se.invert(this.touch0[0])),this.touch1&&G!=="touch"&&(this.touch1[1]=se.invert(this.touch1[0])),this.that.__zoom=se,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(G){var se=_c(this.that).datum();u.call(G,this.that,new eNe(G,{sourceEvent:this.sourceEvent,target:N,transform:this.that.__zoom,dispatch:u}),se)}};function E(G,...se){if(!t.apply(this,arguments))return;var J=L(this,se).event(G),re=this.__zoom,q=Math.max(a[0],Math.min(a[1],re.k*Math.pow(2,n.apply(this,arguments)))),z=bu(G);if(J.wheel)(J.mouse[0][0]!==z[0]||J.mouse[0][1]!==z[1])&&(J.mouse[1]=re.invert(J.mouse[0]=z)),clearTimeout(J.wheel);else{if(re.k===q)return;J.mouse=[z,re.invert(z)],Xy(this),J.start()}lg(G),J.wheel=setTimeout(W,b),J.zoom("mouse",r(R(k(re,q),J.mouse[0],J.mouse[1]),J.extent,i));function W(){J.wheel=null,J.end()}}function B(G,...se){if(m||!t.apply(this,arguments))return;var J=G.currentTarget,re=L(this,se,!0).event(G),q=_c(G.view).on("mousemove.zoom",P,!0).on("mouseup.zoom",Y,!0),z=bu(G,J),W=G.clientX,ie=G.clientY;bQ(G.view),p_(G),re.mouse=[z,this.__zoom.invert(z)],Xy(this),re.start();function P(Z){if(lg(Z),!re.moved){var te=Z.clientX-W,ce=Z.clientY-ie;re.moved=te*te+ce*ce>y}re.event(Z).zoom("mouse",r(R(re.that.__zoom,re.mouse[0]=bu(Z,J),re.mouse[1]),re.extent,i))}function Y(Z){q.on("mousemove.zoom mouseup.zoom",null),CQ(Z.view,re.moved),lg(Z),re.event(Z).end()}}function Q(G,...se){if(t.apply(this,arguments)){var J=this.__zoom,re=bu(G.changedTouches?G.changedTouches[0]:G,this),q=J.invert(re),z=J.k*(G.shiftKey?.5:2),W=r(R(k(J,z),re,q),e.apply(this,se),i);lg(G),o>0?_c(this).transition().duration(o).call(j,W,re,G):_c(this).call(N.transform,W,re,G)}}function D(G,...se){if(t.apply(this,arguments)){var J=G.touches,re=J.length,q=L(this,se,G.changedTouches.length===re).event(G),z,W,ie,P;for(p_(G),W=0;W<re;++W)ie=J[W],P=bu(ie,this),P=[P,this.__zoom.invert(P),ie.identifier],q.touch0?!q.touch1&&q.touch0[2]!==P[2]&&(q.touch1=P,q.taps=0):(q.touch0=P,z=!0,q.taps=1+!!d);d&&(d=clearTimeout(d)),z&&(q.taps<2&&(h=P[0],d=setTimeout(function(){d=null},g)),Xy(this),q.start())}}function I(G,...se){if(this.__zooming){var J=L(this,se).event(G),re=G.changedTouches,q=re.length,z,W,ie,P;for(lg(G),z=0;z<q;++z)W=re[z],ie=bu(W,this),J.touch0&&J.touch0[2]===W.identifier?J.touch0[0]=ie:J.touch1&&J.touch1[2]===W.identifier&&(J.touch1[0]=ie);if(W=J.that.__zoom,J.touch1){var Y=J.touch0[0],Z=J.touch0[1],te=J.touch1[0],ce=J.touch1[1],Ee=(Ee=te[0]-Y[0])*Ee+(Ee=te[1]-Y[1])*Ee,pe=(pe=ce[0]-Z[0])*pe+(pe=ce[1]-Z[1])*pe;W=k(W,Math.sqrt(Ee/pe)),ie=[(Y[0]+te[0])/2,(Y[1]+te[1])/2],P=[(Z[0]+ce[0])/2,(Z[1]+ce[1])/2]}else if(J.touch0)ie=J.touch0[0],P=J.touch0[1];else return;J.zoom("touch",r(R(W,ie,P),J.extent,i))}}function O(G,...se){if(this.__zooming){var J=L(this,se).event(G),re=G.changedTouches,q=re.length,z,W;for(p_(G),m&&clearTimeout(m),m=setTimeout(function(){m=null},g),z=0;z<q;++z)W=re[z],J.touch0&&J.touch0[2]===W.identifier?delete J.touch0:J.touch1&&J.touch1[2]===W.identifier&&delete J.touch1;if(J.touch1&&!J.touch0&&(J.touch0=J.touch1,delete J.touch1),J.touch0)J.touch0[1]=this.__zoom.invert(J.touch0[0]);else if(J.end(),J.taps===2&&(W=bu(W,this),Math.hypot(h[0]-W[0],h[1]-W[1])<_)){var ie=_c(this).on("dblclick.zoom");ie&&ie.apply(this,arguments)}}}return N.wheelDelta=function(G){return arguments.length?(n=typeof G=="function"?G:yy(+G),N):n},N.filter=function(G){return arguments.length?(t=typeof G=="function"?G:yy(!!G),N):t},N.touchable=function(G){return arguments.length?(s=typeof G=="function"?G:yy(!!G),N):s},N.extent=function(G){return arguments.length?(e=typeof G=="function"?G:yy([[+G[0][0],+G[0][1]],[+G[1][0],+G[1][1]]]),N):e},N.scaleExtent=function(G){return arguments.length?(a[0]=+G[0],a[1]=+G[1],N):[a[0],a[1]]},N.translateExtent=function(G){return arguments.length?(i[0][0]=+G[0][0],i[1][0]=+G[1][0],i[0][1]=+G[0][1],i[1][1]=+G[1][1],N):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},N.constrain=function(G){return arguments.length?(r=G,N):r},N.duration=function(G){return arguments.length?(o=+G,N):o},N.interpolate=function(G){return arguments.length?(l=G,N):l},N.on=function(){var G=u.on.apply(u,arguments);return G===u?N:G},N.clickDistance=function(G){return arguments.length?(y=(G=+G)*G,N):Math.sqrt(y)},N.tapDistance=function(G){return arguments.length?(_=+G,N):_},N}HL();const _b=ee.createContext(null),oNe=_b.Provider,HA={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},MQ=HA.error001();function Ds(t,e){const r=ee.useContext(_b);if(r===null)throw new Error(MQ);return cQ(r,t,e)}const Za=()=>{const t=ee.useContext(_b);if(t===null)throw new Error(MQ);return ee.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},lNe=t=>t.userSelectionActive?"none":"all";function PQ({position:t,children:e,className:r,style:n,...s}){const a=Ds(lNe),i=`${t}`.split("-");return At.createElement("div",{className:oo(["react-flow__panel",r,...i]),style:{...n,pointerEvents:a},...s},e)}function cNe({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:At.createElement(PQ,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},At.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const uNe=({x:t,y:e,label:r,labelStyle:n={},labelShowBg:s=!0,labelBgStyle:a={},labelBgPadding:i=[2,4],labelBgBorderRadius:o=2,children:l,className:u,...d})=>{const h=ee.useRef(null),[m,g]=ee.useState({x:0,y:0,width:0,height:0}),b=oo(["react-flow__edge-textwrapper",u]);return ee.useEffect(()=>{if(h.current){const y=h.current.getBBox();g({x:y.x,y:y.y,width:y.width,height:y.height})}},[r]),typeof r>"u"||!r?null:At.createElement("g",{transform:`translate(${t-m.width/2} ${e-m.height/2})`,className:b,visibility:m.width?"visible":"hidden",...d},s&&At.createElement("rect",{width:m.width+2*i[0],x:-i[0],y:-i[1],height:m.height+2*i[1],className:"react-flow__edge-textbg",style:a,rx:o,ry:o}),At.createElement("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:h,style:n},r),l)};var ANe=ee.memo(uNe);const $T=t=>({width:t.offsetWidth,height:t.offsetHeight}),Km=(t,e=0,r=1)=>Math.min(Math.max(t,e),r),WT=(t={x:0,y:0},e)=>({x:Km(t.x,e[0][0],e[1][0]),y:Km(t.y,e[0][1],e[1][1])}),cL=(t,e,r)=>t<e?Km(Math.abs(t-e),1,50)/50:t>r?-Km(Math.abs(t-r),1,50)/50:0,jQ=(t,e)=>{const r=cL(t.x,35,e.width-35)*20,n=cL(t.y,35,e.height-35)*20;return[r,n]},OQ=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},dNe=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),YT=({x:t,y:e,width:r,height:n})=>({x:t,y:e,x2:t+r,y2:e+n}),fNe=({x:t,y:e,x2:r,y2:n})=>({x:t,y:e,width:r-t,height:n-e}),uL=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),f5=(t,e)=>{const r=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),n=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(r*n)},hNe=t=>zl(t.width)&&zl(t.height)&&zl(t.x)&&zl(t.y),zl=t=>!isNaN(t)&&isFinite(t),zs=Symbol.for("internals"),QQ=["Enter"," ","Escape"],mNe=(t,e)=>{},pNe=t=>"nativeEvent"in t;function h5(t){var s,a;const e=pNe(t)?t.nativeEvent:t,r=((a=(s=e.composedPath)==null?void 0:s.call(e))==null?void 0:a[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const HQ=t=>"clientX"in t,uf=(t,e)=>{var a,i;const r=HQ(t),n=r?t.clientX:(a=t.touches)==null?void 0:a[0].clientX,s=r?t.clientY:(i=t.touches)==null?void 0:i[0].clientY;return{x:n-((e==null?void 0:e.left)??0),y:s-((e==null?void 0:e.top)??0)}},ow=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},b1=({id:t,path:e,labelX:r,labelY:n,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:m,interactionWidth:g=20})=>At.createElement(At.Fragment,null,At.createElement("path",{id:t,style:d,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:h,markerStart:m}),g&&At.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}),s&&zl(r)&&zl(n)?At.createElement(ANe,{x:r,y:n,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null);b1.displayName="BaseEdge";function cg(t,e,r){return r===void 0?r:n=>{const s=e().edges.find(a=>a.id===t);s&&r(n,{...s})}}function VQ({sourceX:t,sourceY:e,targetX:r,targetY:n}){const s=Math.abs(r-t)/2,a=r<t?r+s:r-s,i=Math.abs(n-e)/2,o=n<e?n+i:n-i;return[a,o,s,i]}function GQ({sourceX:t,sourceY:e,targetX:r,targetY:n,sourceControlX:s,sourceControlY:a,targetControlX:i,targetControlY:o}){const l=t*.125+s*.375+i*.375+r*.125,u=e*.125+a*.375+o*.375+n*.125,d=Math.abs(l-t),h=Math.abs(u-e);return[l,u,d,h]}var Oh;(function(t){t.Strict="strict",t.Loose="loose"})(Oh||(Oh={}));var mh;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(mh||(mh={}));var Ox;(function(t){t.Partial="partial",t.Full="full"})(Ox||(Ox={}));var qd;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(qd||(qd={}));var lw;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(lw||(lw={}));var lr;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(lr||(lr={}));function AL({pos:t,x1:e,y1:r,x2:n,y2:s}){return t===lr.Left||t===lr.Right?[.5*(e+n),r]:[e,.5*(r+s)]}function zQ({sourceX:t,sourceY:e,sourcePosition:r=lr.Bottom,targetX:n,targetY:s,targetPosition:a=lr.Top}){const[i,o]=AL({pos:r,x1:t,y1:e,x2:n,y2:s}),[l,u]=AL({pos:a,x1:n,y1:s,x2:t,y2:e}),[d,h,m,g]=GQ({sourceX:t,sourceY:e,targetX:n,targetY:s,sourceControlX:i,sourceControlY:o,targetControlX:l,targetControlY:u});return[`M${t},${e} C${i},${o} ${l},${u} ${n},${s}`,d,h,m,g]}const XT=ee.memo(({sourceX:t,sourceY:e,targetX:r,targetY:n,sourcePosition:s=lr.Bottom,targetPosition:a=lr.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:g,markerStart:b,interactionWidth:y})=>{const[_,N,k]=zQ({sourceX:t,sourceY:e,sourcePosition:s,targetX:r,targetY:n,targetPosition:a});return At.createElement(b1,{path:_,labelX:N,labelY:k,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:g,markerStart:b,interactionWidth:y})});XT.displayName="SimpleBezierEdge";const dL={[lr.Left]:{x:-1,y:0},[lr.Right]:{x:1,y:0},[lr.Top]:{x:0,y:-1},[lr.Bottom]:{x:0,y:1}},gNe=({source:t,sourcePosition:e=lr.Bottom,target:r})=>e===lr.Left||e===lr.Right?t.x<r.x?{x:1,y:0}:{x:-1,y:0}:t.y<r.y?{x:0,y:1}:{x:0,y:-1},fL=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function xNe({source:t,sourcePosition:e=lr.Bottom,target:r,targetPosition:n=lr.Top,center:s,offset:a}){const i=dL[e],o=dL[n],l={x:t.x+i.x*a,y:t.y+i.y*a},u={x:r.x+o.x*a,y:r.y+o.y*a},d=gNe({source:l,sourcePosition:e,target:u}),h=d.x!==0?"x":"y",m=d[h];let g=[],b,y;const _={x:0,y:0},N={x:0,y:0},[k,R,M,j]=VQ({sourceX:t.x,sourceY:t.y,targetX:r.x,targetY:r.y});if(i[h]*o[h]===-1){b=s.x??k,y=s.y??R;const C=[{x:b,y:l.y},{x:b,y:u.y}],E=[{x:l.x,y},{x:u.x,y}];i[h]===m?g=h==="x"?C:E:g=h==="x"?E:C}else{const C=[{x:l.x,y:u.y}],E=[{x:u.x,y:l.y}];if(h==="x"?g=i.x===m?E:C:g=i.y===m?C:E,e===n){const O=Math.abs(t[h]-r[h]);if(O<=a){const G=Math.min(a-1,a-O);i[h]===m?_[h]=(l[h]>t[h]?-1:1)*G:N[h]=(u[h]>r[h]?-1:1)*G}}if(e!==n){const O=h==="x"?"y":"x",G=i[h]===o[O],se=l[O]>u[O],J=l[O]<u[O];(i[h]===1&&(!G&&se||G&&J)||i[h]!==1&&(!G&&J||G&&se))&&(g=h==="x"?C:E)}const B={x:l.x+_.x,y:l.y+_.y},Q={x:u.x+N.x,y:u.y+N.y},D=Math.max(Math.abs(B.x-g[0].x),Math.abs(Q.x-g[0].x)),I=Math.max(Math.abs(B.y-g[0].y),Math.abs(Q.y-g[0].y));D>=I?(b=(B.x+Q.x)/2,y=g[0].y):(b=g[0].x,y=(B.y+Q.y)/2)}return[[t,{x:l.x+_.x,y:l.y+_.y},...g,{x:u.x+N.x,y:u.y+N.y},r],b,y,M,j]}function vNe(t,e,r,n){const s=Math.min(fL(t,e)/2,fL(e,r)/2,n),{x:a,y:i}=e;if(t.x===a&&a===r.x||t.y===i&&i===r.y)return`L${a} ${i}`;if(t.y===i){const u=t.x<r.x?-1:1,d=t.y<r.y?1:-1;return`L ${a+s*u},${i}Q ${a},${i} ${a},${i+s*d}`}const o=t.x<r.x?1:-1,l=t.y<r.y?-1:1;return`L ${a},${i+s*l}Q ${a},${i} ${a+s*o},${i}`}function m5({sourceX:t,sourceY:e,sourcePosition:r=lr.Bottom,targetX:n,targetY:s,targetPosition:a=lr.Top,borderRadius:i=5,centerX:o,centerY:l,offset:u=20}){const[d,h,m,g,b]=xNe({source:{x:t,y:e},sourcePosition:r,target:{x:n,y:s},targetPosition:a,center:{x:o,y:l},offset:u});return[d.reduce((_,N,k)=>{let R="";return k>0&&k<d.length-1?R=vNe(d[k-1],N,d[k+1],i):R=`${k===0?"M":"L"}${N.x} ${N.y}`,_+=R,_},""),h,m,g,b]}const Sb=ee.memo(({sourceX:t,sourceY:e,targetX:r,targetY:n,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,sourcePosition:h=lr.Bottom,targetPosition:m=lr.Top,markerEnd:g,markerStart:b,pathOptions:y,interactionWidth:_})=>{const[N,k,R]=m5({sourceX:t,sourceY:e,sourcePosition:h,targetX:r,targetY:n,targetPosition:m,borderRadius:y==null?void 0:y.borderRadius,offset:y==null?void 0:y.offset});return At.createElement(b1,{path:N,labelX:k,labelY:R,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:g,markerStart:b,interactionWidth:_})});Sb.displayName="SmoothStepEdge";const JT=ee.memo(t=>{var e;return At.createElement(Sb,{...t,pathOptions:ee.useMemo(()=>{var r;return{borderRadius:0,offset:(r=t.pathOptions)==null?void 0:r.offset}},[(e=t.pathOptions)==null?void 0:e.offset])})});JT.displayName="StepEdge";function yNe({sourceX:t,sourceY:e,targetX:r,targetY:n}){const[s,a,i,o]=VQ({sourceX:t,sourceY:e,targetX:r,targetY:n});return[`M ${t},${e}L ${r},${n}`,s,a,i,o]}const ZT=ee.memo(({sourceX:t,sourceY:e,targetX:r,targetY:n,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:m,interactionWidth:g})=>{const[b,y,_]=yNe({sourceX:t,sourceY:e,targetX:r,targetY:n});return At.createElement(b1,{path:b,labelX:y,labelY:_,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:m,interactionWidth:g})});ZT.displayName="StraightEdge";function wy(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function hL({pos:t,x1:e,y1:r,x2:n,y2:s,c:a}){switch(t){case lr.Left:return[e-wy(e-n,a),r];case lr.Right:return[e+wy(n-e,a),r];case lr.Top:return[e,r-wy(r-s,a)];case lr.Bottom:return[e,r+wy(s-r,a)]}}function qQ({sourceX:t,sourceY:e,sourcePosition:r=lr.Bottom,targetX:n,targetY:s,targetPosition:a=lr.Top,curvature:i=.25}){const[o,l]=hL({pos:r,x1:t,y1:e,x2:n,y2:s,c:i}),[u,d]=hL({pos:a,x1:n,y1:s,x2:t,y2:e,c:i}),[h,m,g,b]=GQ({sourceX:t,sourceY:e,targetX:n,targetY:s,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${t},${e} C${o},${l} ${u},${d} ${n},${s}`,h,m,g,b]}const cw=ee.memo(({sourceX:t,sourceY:e,targetX:r,targetY:n,sourcePosition:s=lr.Bottom,targetPosition:a=lr.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:g,markerStart:b,pathOptions:y,interactionWidth:_})=>{const[N,k,R]=qQ({sourceX:t,sourceY:e,sourcePosition:s,targetX:r,targetY:n,targetPosition:a,curvature:y==null?void 0:y.curvature});return At.createElement(b1,{path:N,labelX:k,labelY:R,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:g,markerStart:b,interactionWidth:_})});cw.displayName="BezierEdge";const eN=ee.createContext(null),wNe=eN.Provider;eN.Consumer;const bNe=()=>ee.useContext(eN),CNe=t=>"id"in t&&"source"in t&&"target"in t,ENe=({source:t,sourceHandle:e,target:r,targetHandle:n})=>`reactflow__edge-${t}${e||""}-${r}${n||""}`,p5=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(n=>`${n}=${t[n]}`).join("&")}`,_Ne=(t,e)=>e.some(r=>r.source===t.source&&r.target===t.target&&(r.sourceHandle===t.sourceHandle||!r.sourceHandle&&!t.sourceHandle)&&(r.targetHandle===t.targetHandle||!r.targetHandle&&!t.targetHandle)),SNe=(t,e)=>{if(!t.source||!t.target)return e;let r;return CNe(t)?r={...t}:r={...t,id:ENe(t)},_Ne(r,e)?e:e.concat(r)},g5=({x:t,y:e},[r,n,s],a,[i,o])=>{const l={x:(t-r)/s,y:(e-n)/s};return a?{x:i*Math.round(l.x/i),y:o*Math.round(l.y/o)}:l},KQ=({x:t,y:e},[r,n,s])=>({x:t*s+r,y:e*s+n}),Bm=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(t.width??0)*e[0],n=(t.height??0)*e[1],s={x:t.position.x-r,y:t.position.y-n};return{...s,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-r,y:t.positionAbsolute.y-n}:s}},tN=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const r=t.reduce((n,s)=>{const{x:a,y:i}=Bm(s,e).positionAbsolute;return dNe(n,YT({x:a,y:i,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return fNe(r)},$Q=(t,e,[r,n,s]=[0,0,1],a=!1,i=!1,o=[0,0])=>{const l={x:(e.x-r)/s,y:(e.y-n)/s,width:e.width/s,height:e.height/s},u=[];return t.forEach(d=>{const{width:h,height:m,selectable:g=!0,hidden:b=!1}=d;if(i&&!g||b)return!1;const{positionAbsolute:y}=Bm(d,o),_={x:y.x,y:y.y,width:h||0,height:m||0},N=f5(l,_),k=typeof h>"u"||typeof m>"u"||h===null||m===null,R=a&&N>0,M=(h||0)*(m||0);(k||R||N>=M||d.dragging)&&u.push(d)}),u},WQ=(t,e)=>{const r=t.map(n=>n.id);return e.filter(n=>r.includes(n.source)||r.includes(n.target))},YQ=(t,e,r,n,s,a=.1)=>{const i=e/(t.width*(1+a)),o=r/(t.height*(1+a)),l=Math.min(i,o),u=Km(l,n,s),d=t.x+t.width/2,h=t.y+t.height/2,m=e/2-d*u,g=r/2-h*u;return{x:m,y:g,zoom:u}},ih=(t,e=0)=>t.transition().duration(e);function mL(t,e,r,n){return(e[r]||[]).reduce((s,a)=>{var i,o;return`${t.id}-${a.id}-${r}`!==n&&s.push({id:a.id||null,type:r,nodeId:t.id,x:(((i=t.positionAbsolute)==null?void 0:i.x)??0)+a.x+a.width/2,y:(((o=t.positionAbsolute)==null?void 0:o.y)??0)+a.y+a.height/2}),s},[])}function TNe(t,e,r,n,s,a){const{x:i,y:o}=uf(t),u=e.elementsFromPoint(i,o).find(b=>b.classList.contains("react-flow__handle"));if(u){const b=u.getAttribute("data-nodeid");if(b){const y=rN(void 0,u),_=u.getAttribute("data-handleid"),N=a({nodeId:b,id:_,type:y});if(N){const k=s.find(R=>R.nodeId===b&&R.type===y&&R.id===_);return{handle:{id:_,type:y,nodeId:b,x:(k==null?void 0:k.x)||r.x,y:(k==null?void 0:k.y)||r.y},validHandleResult:N}}}}let d=[],h=1/0;if(s.forEach(b=>{const y=Math.sqrt((b.x-r.x)**2+(b.y-r.y)**2);if(y<=n){const _=a(b);y<=h&&(y<h?d=[{handle:b,validHandleResult:_}]:y===h&&d.push({handle:b,validHandleResult:_}),h=y)}}),!d.length)return{handle:null,validHandleResult:XQ()};if(d.length===1)return d[0];const m=d.some(({validHandleResult:b})=>b.isValid),g=d.some(({handle:b})=>b.type==="target");return d.find(({handle:b,validHandleResult:y})=>g?b.type==="target":m?y.isValid:!0)||d[0]}const NNe={source:null,target:null,sourceHandle:null,targetHandle:null},XQ=()=>({handleDomNode:null,isValid:!1,connection:NNe,endHandle:null});function JQ(t,e,r,n,s,a,i){const o=s==="target",l=i.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),u={...XQ(),handleDomNode:l};if(l){const d=rN(void 0,l),h=l.getAttribute("data-nodeid"),m=l.getAttribute("data-handleid"),g=l.classList.contains("connectable"),b=l.classList.contains("connectableend"),y={source:o?h:r,sourceHandle:o?m:n,target:o?r:h,targetHandle:o?n:m};u.connection=y,g&&b&&(e===Oh.Strict?o&&d==="source"||!o&&d==="target":h!==r||m!==n)&&(u.endHandle={nodeId:h,handleId:m,type:d},u.isValid=a(y))}return u}function BNe({nodes:t,nodeId:e,handleId:r,handleType:n}){return t.reduce((s,a)=>{if(a[zs]){const{handleBounds:i}=a[zs];let o=[],l=[];i&&(o=mL(a,i,"source",`${e}-${r}-${n}`),l=mL(a,i,"target",`${e}-${r}-${n}`)),s.push(...o,...l)}return s},[])}function rN(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function g_(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function kNe(t,e){let r=null;return e?r="valid":t&&!e&&(r="invalid"),r}function ZQ({event:t,handleId:e,nodeId:r,onConnect:n,isTarget:s,getState:a,setState:i,isValidConnection:o,edgeUpdaterType:l,onReconnectEnd:u}){const d=OQ(t.target),{connectionMode:h,domNode:m,autoPanOnConnect:g,connectionRadius:b,onConnectStart:y,panBy:_,getNodes:N,cancelConnection:k}=a();let R=0,M;const{x:j,y:L}=uf(t),C=d==null?void 0:d.elementFromPoint(j,L),E=rN(l,C),B=m==null?void 0:m.getBoundingClientRect();if(!B||!E)return;let Q,D=uf(t,B),I=!1,O=null,G=!1,se=null;const J=BNe({nodes:N(),nodeId:r,handleId:e,handleType:E}),re=()=>{if(!g)return;const[W,ie]=jQ(D,B);_({x:W,y:ie}),R=requestAnimationFrame(re)};i({connectionPosition:D,connectionStatus:null,connectionNodeId:r,connectionHandleId:e,connectionHandleType:E,connectionStartHandle:{nodeId:r,handleId:e,type:E},connectionEndHandle:null}),y==null||y(t,{nodeId:r,handleId:e,handleType:E});function q(W){const{transform:ie}=a();D=uf(W,B);const{handle:P,validHandleResult:Y}=TNe(W,d,g5(D,ie,!1,[1,1]),b,J,Z=>JQ(Z,h,r,e,s?"target":"source",o,d));if(M=P,I||(re(),I=!0),se=Y.handleDomNode,O=Y.connection,G=Y.isValid,i({connectionPosition:M&&G?KQ({x:M.x,y:M.y},ie):D,connectionStatus:kNe(!!M,G),connectionEndHandle:Y.endHandle}),!M&&!G&&!se)return g_(Q);O.source!==O.target&&se&&(g_(Q),Q=se,se.classList.add("connecting","react-flow__handle-connecting"),se.classList.toggle("valid",G),se.classList.toggle("react-flow__handle-valid",G))}function z(W){var ie,P;(M||se)&&O&&G&&(n==null||n(O)),(P=(ie=a()).onConnectEnd)==null||P.call(ie,W),l&&(u==null||u(W)),g_(Q),k(),cancelAnimationFrame(R),I=!1,G=!1,O=null,se=null,d.removeEventListener("mousemove",q),d.removeEventListener("mouseup",z),d.removeEventListener("touchmove",q),d.removeEventListener("touchend",z)}d.addEventListener("mousemove",q),d.addEventListener("mouseup",z),d.addEventListener("touchmove",q),d.addEventListener("touchend",z)}const pL=()=>!0,INe=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),FNe=(t,e,r)=>n=>{const{connectionStartHandle:s,connectionEndHandle:a,connectionClickStartHandle:i}=n;return{connecting:(s==null?void 0:s.nodeId)===t&&(s==null?void 0:s.handleId)===e&&(s==null?void 0:s.type)===r||(a==null?void 0:a.nodeId)===t&&(a==null?void 0:a.handleId)===e&&(a==null?void 0:a.type)===r,clickConnecting:(i==null?void 0:i.nodeId)===t&&(i==null?void 0:i.handleId)===e&&(i==null?void 0:i.type)===r}},eH=ee.forwardRef(({type:t="source",position:e=lr.Top,isValidConnection:r,isConnectable:n=!0,isConnectableStart:s=!0,isConnectableEnd:a=!0,id:i,onConnect:o,children:l,className:u,onMouseDown:d,onTouchStart:h,...m},g)=>{var B,Q;const b=i||null,y=t==="target",_=Za(),N=bNe(),{connectOnClick:k,noPanClassName:R}=Ds(INe,$i),{connecting:M,clickConnecting:j}=Ds(FNe(N,b,t),$i);N||(Q=(B=_.getState()).onError)==null||Q.call(B,"010",HA.error010());const L=D=>{const{defaultEdgeOptions:I,onConnect:O,hasDefaultEdges:G}=_.getState(),se={...I,...D};if(G){const{edges:J,setEdges:re}=_.getState();re(SNe(se,J))}O==null||O(se),o==null||o(se)},C=D=>{if(!N)return;const I=HQ(D);s&&(I&&D.button===0||!I)&&ZQ({event:D,handleId:b,nodeId:N,onConnect:L,isTarget:y,getState:_.getState,setState:_.setState,isValidConnection:r||_.getState().isValidConnection||pL}),I?d==null||d(D):h==null||h(D)},E=D=>{const{onClickConnectStart:I,onClickConnectEnd:O,connectionClickStartHandle:G,connectionMode:se,isValidConnection:J}=_.getState();if(!N||!G&&!s)return;if(!G){I==null||I(D,{nodeId:N,handleId:b,handleType:t}),_.setState({connectionClickStartHandle:{nodeId:N,type:t,handleId:b}});return}const re=OQ(D.target),q=r||J||pL,{connection:z,isValid:W}=JQ({nodeId:N,id:b,type:t},se,G.nodeId,G.handleId||null,G.type,q,re);W&&L(z),O==null||O(D),_.setState({connectionClickStartHandle:null})};return At.createElement("div",{"data-handleid":b,"data-nodeid":N,"data-handlepos":e,"data-id":`${N}-${b}-${t}`,className:oo(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",R,u,{source:!y,target:y,connectable:n,connectablestart:s,connectableend:a,connecting:j,connectionindicator:n&&(s&&!M||a&&M)}]),onMouseDown:C,onTouchStart:C,onClick:k?E:void 0,ref:g,...m},l)});eH.displayName="Handle";var uw=ee.memo(eH);const tH=({data:t,isConnectable:e,targetPosition:r=lr.Top,sourcePosition:n=lr.Bottom})=>At.createElement(At.Fragment,null,At.createElement(uw,{type:"target",position:r,isConnectable:e}),t==null?void 0:t.label,At.createElement(uw,{type:"source",position:n,isConnectable:e}));tH.displayName="DefaultNode";var x5=ee.memo(tH);const rH=({data:t,isConnectable:e,sourcePosition:r=lr.Bottom})=>At.createElement(At.Fragment,null,t==null?void 0:t.label,At.createElement(uw,{type:"source",position:r,isConnectable:e}));rH.displayName="InputNode";var nH=ee.memo(rH);const sH=({data:t,isConnectable:e,targetPosition:r=lr.Top})=>At.createElement(At.Fragment,null,At.createElement(uw,{type:"target",position:r,isConnectable:e}),t==null?void 0:t.label);sH.displayName="OutputNode";var aH=ee.memo(sH);const nN=()=>null;nN.displayName="GroupNode";const DNe=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),by=t=>t.id;function RNe(t,e){return $i(t.selectedNodes.map(by),e.selectedNodes.map(by))&&$i(t.selectedEdges.map(by),e.selectedEdges.map(by))}const iH=ee.memo(({onSelectionChange:t})=>{const e=Za(),{selectedNodes:r,selectedEdges:n}=Ds(DNe,RNe);return ee.useEffect(()=>{const s={nodes:r,edges:n};t==null||t(s),e.getState().onSelectionChange.forEach(a=>a(s))},[r,n,t]),null});iH.displayName="SelectionListener";const LNe=t=>!!t.onSelectionChange;function UNe({onSelectionChange:t}){const e=Ds(LNe);return t||e?At.createElement(iH,{onSelectionChange:t}):null}const MNe=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function V0(t,e){ee.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function tn(t,e,r){ee.useEffect(()=>{typeof e<"u"&&r({[t]:e})},[e])}const PNe=({nodes:t,edges:e,defaultNodes:r,defaultEdges:n,onConnect:s,onConnectStart:a,onConnectEnd:i,onClickConnectStart:o,onClickConnectEnd:l,nodesDraggable:u,nodesConnectable:d,nodesFocusable:h,edgesFocusable:m,edgesUpdatable:g,elevateNodesOnSelect:b,minZoom:y,maxZoom:_,nodeExtent:N,onNodesChange:k,onEdgesChange:R,elementsSelectable:M,connectionMode:j,snapGrid:L,snapToGrid:C,translateExtent:E,connectOnClick:B,defaultEdgeOptions:Q,fitView:D,fitViewOptions:I,onNodesDelete:O,onEdgesDelete:G,onNodeDrag:se,onNodeDragStart:J,onNodeDragStop:re,onSelectionDrag:q,onSelectionDragStart:z,onSelectionDragStop:W,noPanClassName:ie,nodeOrigin:P,rfId:Y,autoPanOnConnect:Z,autoPanOnNodeDrag:te,onError:ce,connectionRadius:Ee,isValidConnection:pe,nodeDragThreshold:fe})=>{const{setNodes:xe,setEdges:de,setDefaultNodesAndEdges:oe,setMinZoom:Le,setMaxZoom:et,setTranslateExtent:Te,setNodeExtent:be,reset:je}=Ds(MNe,$i),qe=Za();return ee.useEffect(()=>{const st=n==null?void 0:n.map(mt=>({...mt,...Q}));return oe(r,st),()=>{je()}},[]),tn("defaultEdgeOptions",Q,qe.setState),tn("connectionMode",j,qe.setState),tn("onConnect",s,qe.setState),tn("onConnectStart",a,qe.setState),tn("onConnectEnd",i,qe.setState),tn("onClickConnectStart",o,qe.setState),tn("onClickConnectEnd",l,qe.setState),tn("nodesDraggable",u,qe.setState),tn("nodesConnectable",d,qe.setState),tn("nodesFocusable",h,qe.setState),tn("edgesFocusable",m,qe.setState),tn("edgesUpdatable",g,qe.setState),tn("elementsSelectable",M,qe.setState),tn("elevateNodesOnSelect",b,qe.setState),tn("snapToGrid",C,qe.setState),tn("snapGrid",L,qe.setState),tn("onNodesChange",k,qe.setState),tn("onEdgesChange",R,qe.setState),tn("connectOnClick",B,qe.setState),tn("fitViewOnInit",D,qe.setState),tn("fitViewOnInitOptions",I,qe.setState),tn("onNodesDelete",O,qe.setState),tn("onEdgesDelete",G,qe.setState),tn("onNodeDrag",se,qe.setState),tn("onNodeDragStart",J,qe.setState),tn("onNodeDragStop",re,qe.setState),tn("onSelectionDrag",q,qe.setState),tn("onSelectionDragStart",z,qe.setState),tn("onSelectionDragStop",W,qe.setState),tn("noPanClassName",ie,qe.setState),tn("nodeOrigin",P,qe.setState),tn("rfId",Y,qe.setState),tn("autoPanOnConnect",Z,qe.setState),tn("autoPanOnNodeDrag",te,qe.setState),tn("onError",ce,qe.setState),tn("connectionRadius",Ee,qe.setState),tn("isValidConnection",pe,qe.setState),tn("nodeDragThreshold",fe,qe.setState),V0(t,xe),V0(e,de),V0(y,Le),V0(_,et),V0(E,Te),V0(N,be),null},gL={display:"none"},jNe={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},oH="react-flow__node-desc",lH="react-flow__edge-desc",ONe="react-flow__aria-live",QNe=t=>t.ariaLiveMessage;function HNe({rfId:t}){const e=Ds(QNe);return At.createElement("div",{id:`${ONe}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:jNe},e)}function VNe({rfId:t,disableKeyboardA11y:e}){return At.createElement(At.Fragment,null,At.createElement("div",{id:`${oH}-${t}`,style:gL},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),At.createElement("div",{id:`${lH}-${t}`,style:gL},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&At.createElement(HNe,{rfId:t}))}var Qx=(t=null,e={actInsideInputWithModifier:!0})=>{const[r,n]=ee.useState(!1),s=ee.useRef(!1),a=ee.useRef(new Set([])),[i,o]=ee.useMemo(()=>{if(t!==null){const u=(Array.isArray(t)?t:[t]).filter(h=>typeof h=="string").map(h=>h.split("+")),d=u.reduce((h,m)=>h.concat(...m),[]);return[u,d]}return[[],[]]},[t]);return ee.useEffect(()=>{const l=typeof document<"u"?document:null,u=(e==null?void 0:e.target)||l;if(t!==null){const d=g=>{if(s.current=g.ctrlKey||g.metaKey||g.shiftKey,(!s.current||s.current&&!e.actInsideInputWithModifier)&&h5(g))return!1;const y=vL(g.code,o);a.current.add(g[y]),xL(i,a.current,!1)&&(g.preventDefault(),n(!0))},h=g=>{if((!s.current||s.current&&!e.actInsideInputWithModifier)&&h5(g))return!1;const y=vL(g.code,o);xL(i,a.current,!0)?(n(!1),a.current.clear()):a.current.delete(g[y]),g.key==="Meta"&&a.current.clear(),s.current=!1},m=()=>{a.current.clear(),n(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",h),window.addEventListener("blur",m),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",h),window.removeEventListener("blur",m)}}},[t,n]),r};function xL(t,e,r){return t.filter(n=>r||n.length===e.size).some(n=>n.every(s=>e.has(s)))}function vL(t,e){return e.includes(t)?"code":"key"}function cH(t,e,r,n){var o,l;const s=t.parentNode||t.parentId;if(!s)return r;const a=e.get(s),i=Bm(a,n);return cH(a,e,{x:(r.x??0)+i.x,y:(r.y??0)+i.y,z:(((o=a[zs])==null?void 0:o.z)??0)>(r.z??0)?((l=a[zs])==null?void 0:l.z)??0:r.z??0},n)}function uH(t,e,r){t.forEach(n=>{var a;const s=n.parentNode||n.parentId;if(s&&!t.has(s))throw new Error(`Parent node ${s} not found`);if(s||r!=null&&r[n.id]){const{x:i,y:o,z:l}=cH(n,t,{...n.position,z:((a=n[zs])==null?void 0:a.z)??0},e);n.positionAbsolute={x:i,y:o},n[zs].z=l,r!=null&&r[n.id]&&(n[zs].isParent=!0)}})}function x_(t,e,r,n){const s=new Map,a={},i=n?1e3:0;return t.forEach(o=>{var g;const l=(zl(o.zIndex)?o.zIndex:0)+(o.selected?i:0),u=e.get(o.id),d={...o,positionAbsolute:{x:o.position.x,y:o.position.y}},h=o.parentNode||o.parentId;h&&(a[h]=!0);const m=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==o.type;Object.defineProperty(d,zs,{enumerable:!1,value:{handleBounds:m||(g=u==null?void 0:u[zs])==null?void 0:g.handleBounds,z:l}}),s.set(o.id,d)}),uH(s,r,a),s}function AH(t,e={}){const{getNodes:r,width:n,height:s,minZoom:a,maxZoom:i,d3Zoom:o,d3Selection:l,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:h}=t(),m=e.initial&&!u&&d;if(o&&l&&(m||!e.initial)){const b=r().filter(_=>{var k;const N=e.includeHiddenNodes?_.width&&_.height:!_.hidden;return(k=e.nodes)!=null&&k.length?N&&e.nodes.some(R=>R.id===_.id):N}),y=b.every(_=>_.width&&_.height);if(b.length>0&&y){const _=tN(b,h),{x:N,y:k,zoom:R}=YQ(_,n,s,e.minZoom??a,e.maxZoom??i,e.padding??.1),M=cf.translate(N,k).scale(R);return typeof e.duration=="number"&&e.duration>0?o.transform(ih(l,e.duration),M):o.transform(l,M),!0}}return!1}function GNe(t,e){return t.forEach(r=>{const n=e.get(r.id);n&&e.set(n.id,{...n,[zs]:n[zs],selected:r.selected})}),new Map(e)}function zNe(t,e){return e.map(r=>{const n=t.find(s=>s.id===r.id);return n&&(r.selected=n.selected),r})}function Cy({changedNodes:t,changedEdges:e,get:r,set:n}){const{nodeInternals:s,edges:a,onNodesChange:i,onEdgesChange:o,hasDefaultNodes:l,hasDefaultEdges:u}=r();t!=null&&t.length&&(l&&n({nodeInternals:GNe(t,s)}),i==null||i(t)),e!=null&&e.length&&(u&&n({edges:zNe(e,a)}),o==null||o(e))}const G0=()=>{},qNe={zoomIn:G0,zoomOut:G0,zoomTo:G0,getZoom:()=>1,setViewport:G0,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:G0,fitBounds:G0,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},KNe=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),$Ne=()=>{const t=Za(),{d3Zoom:e,d3Selection:r}=Ds(KNe,$i);return ee.useMemo(()=>r&&e?{zoomIn:s=>e.scaleBy(ih(r,s==null?void 0:s.duration),1.2),zoomOut:s=>e.scaleBy(ih(r,s==null?void 0:s.duration),1/1.2),zoomTo:(s,a)=>e.scaleTo(ih(r,a==null?void 0:a.duration),s),getZoom:()=>t.getState().transform[2],setViewport:(s,a)=>{const[i,o,l]=t.getState().transform,u=cf.translate(s.x??i,s.y??o).scale(s.zoom??l);e.transform(ih(r,a==null?void 0:a.duration),u)},getViewport:()=>{const[s,a,i]=t.getState().transform;return{x:s,y:a,zoom:i}},fitView:s=>AH(t.getState,s),setCenter:(s,a,i)=>{const{width:o,height:l,maxZoom:u}=t.getState(),d=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:u,h=o/2-s*d,m=l/2-a*d,g=cf.translate(h,m).scale(d);e.transform(ih(r,i==null?void 0:i.duration),g)},fitBounds:(s,a)=>{const{width:i,height:o,minZoom:l,maxZoom:u}=t.getState(),{x:d,y:h,zoom:m}=YQ(s,i,o,l,u,(a==null?void 0:a.padding)??.1),g=cf.translate(d,h).scale(m);e.transform(ih(r,a==null?void 0:a.duration),g)},project:s=>{const{transform:a,snapToGrid:i,snapGrid:o}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),g5(s,a,i,o)},screenToFlowPosition:s=>{const{transform:a,snapToGrid:i,snapGrid:o,domNode:l}=t.getState();if(!l)return s;const{x:u,y:d}=l.getBoundingClientRect(),h={x:s.x-u,y:s.y-d};return g5(h,a,i,o)},flowToScreenPosition:s=>{const{transform:a,domNode:i}=t.getState();if(!i)return s;const{x:o,y:l}=i.getBoundingClientRect(),u=KQ(s,a);return{x:u.x+o,y:u.y+l}},viewportInitialized:!0}:qNe,[e,r])};function Tb(){const t=$Ne(),e=Za(),r=ee.useCallback(()=>e.getState().getNodes().map(y=>({...y})),[]),n=ee.useCallback(y=>e.getState().nodeInternals.get(y),[]),s=ee.useCallback(()=>{const{edges:y=[]}=e.getState();return y.map(_=>({..._}))},[]),a=ee.useCallback(y=>{const{edges:_=[]}=e.getState();return _.find(N=>N.id===y)},[]),i=ee.useCallback(y=>{const{getNodes:_,setNodes:N,hasDefaultNodes:k,onNodesChange:R}=e.getState(),M=_(),j=typeof y=="function"?y(M):y;if(k)N(j);else if(R){const L=j.length===0?M.map(C=>({type:"remove",id:C.id})):j.map(C=>({item:C,type:"reset"}));R(L)}},[]),o=ee.useCallback(y=>{const{edges:_=[],setEdges:N,hasDefaultEdges:k,onEdgesChange:R}=e.getState(),M=typeof y=="function"?y(_):y;if(k)N(M);else if(R){const j=M.length===0?_.map(L=>({type:"remove",id:L.id})):M.map(L=>({item:L,type:"reset"}));R(j)}},[]),l=ee.useCallback(y=>{const _=Array.isArray(y)?y:[y],{getNodes:N,setNodes:k,hasDefaultNodes:R,onNodesChange:M}=e.getState();if(R){const L=[...N(),..._];k(L)}else if(M){const j=_.map(L=>({item:L,type:"add"}));M(j)}},[]),u=ee.useCallback(y=>{const _=Array.isArray(y)?y:[y],{edges:N=[],setEdges:k,hasDefaultEdges:R,onEdgesChange:M}=e.getState();if(R)k([...N,..._]);else if(M){const j=_.map(L=>({item:L,type:"add"}));M(j)}},[]),d=ee.useCallback(()=>{const{getNodes:y,edges:_=[],transform:N}=e.getState(),[k,R,M]=N;return{nodes:y().map(j=>({...j})),edges:_.map(j=>({...j})),viewport:{x:k,y:R,zoom:M}}},[]),h=ee.useCallback(({nodes:y,edges:_})=>{const{nodeInternals:N,getNodes:k,edges:R,hasDefaultNodes:M,hasDefaultEdges:j,onNodesDelete:L,onEdgesDelete:C,onNodesChange:E,onEdgesChange:B}=e.getState(),Q=(y||[]).map(se=>se.id),D=(_||[]).map(se=>se.id),I=k().reduce((se,J)=>{const re=J.parentNode||J.parentId,q=!Q.includes(J.id)&&re&&se.find(W=>W.id===re);return(typeof J.deletable=="boolean"?J.deletable:!0)&&(Q.includes(J.id)||q)&&se.push(J),se},[]),O=R.filter(se=>typeof se.deletable=="boolean"?se.deletable:!0),G=O.filter(se=>D.includes(se.id));if(I||G){const se=WQ(I,O),J=[...G,...se],re=J.reduce((q,z)=>(q.includes(z.id)||q.push(z.id),q),[]);if((j||M)&&(j&&e.setState({edges:R.filter(q=>!re.includes(q.id))}),M&&(I.forEach(q=>{N.delete(q.id)}),e.setState({nodeInternals:new Map(N)}))),re.length>0&&(C==null||C(J),B&&B(re.map(q=>({id:q,type:"remove"})))),I.length>0&&(L==null||L(I),E)){const q=I.map(z=>({id:z.id,type:"remove"}));E(q)}}},[]),m=ee.useCallback(y=>{const _=hNe(y),N=_?null:e.getState().nodeInternals.get(y.id);return!_&&!N?[null,null,_]:[_?y:uL(N),N,_]},[]),g=ee.useCallback((y,_=!0,N)=>{const[k,R,M]=m(y);return k?(N||e.getState().getNodes()).filter(j=>{if(!M&&(j.id===R.id||!j.positionAbsolute))return!1;const L=uL(j),C=f5(L,k);return _&&C>0||C>=k.width*k.height}):[]},[]),b=ee.useCallback((y,_,N=!0)=>{const[k]=m(y);if(!k)return!1;const R=f5(k,_);return N&&R>0||R>=k.width*k.height},[]);return ee.useMemo(()=>({...t,getNodes:r,getNode:n,getEdges:s,getEdge:a,setNodes:i,setEdges:o,addNodes:l,addEdges:u,toObject:d,deleteElements:h,getIntersectingNodes:g,isNodeIntersecting:b}),[t,r,n,s,a,i,o,l,u,d,h,g,b])}const WNe={actInsideInputWithModifier:!1};var YNe=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const r=Za(),{deleteElements:n}=Tb(),s=Qx(t,WNe),a=Qx(e);ee.useEffect(()=>{if(s){const{edges:i,getNodes:o}=r.getState(),l=o().filter(d=>d.selected),u=i.filter(d=>d.selected);n({nodes:l,edges:u}),r.setState({nodesSelectionActive:!1})}},[s]),ee.useEffect(()=>{r.setState({multiSelectionActive:a})},[a])};function XNe(t){const e=Za();ee.useEffect(()=>{let r;const n=()=>{var a,i;if(!t.current)return;const s=$T(t.current);(s.height===0||s.width===0)&&((i=(a=e.getState()).onError)==null||i.call(a,"004",HA.error004())),e.setState({width:s.width||500,height:s.height||500})};return n(),window.addEventListener("resize",n),t.current&&(r=new ResizeObserver(()=>n()),r.observe(t.current)),()=>{window.removeEventListener("resize",n),r&&t.current&&r.unobserve(t.current)}},[])}const sN={position:"absolute",width:"100%",height:"100%",top:0,left:0},JNe=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,Ey=t=>({x:t.x,y:t.y,zoom:t.k}),z0=(t,e)=>t.target.closest(`.${e}`),yL=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),wL=t=>{const e=t.ctrlKey&&ow()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},ZNe=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),eBe=({onMove:t,onMoveStart:e,onMoveEnd:r,onPaneContextMenu:n,zoomOnScroll:s=!0,zoomOnPinch:a=!0,panOnScroll:i=!1,panOnScrollSpeed:o=.5,panOnScrollMode:l=mh.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:h=!0,defaultViewport:m,translateExtent:g,minZoom:b,maxZoom:y,zoomActivationKeyCode:_,preventScrolling:N=!0,children:k,noWheelClassName:R,noPanClassName:M})=>{const j=ee.useRef(),L=Za(),C=ee.useRef(!1),E=ee.useRef(!1),B=ee.useRef(null),Q=ee.useRef({x:0,y:0,zoom:0}),{d3Zoom:D,d3Selection:I,d3ZoomHandler:O,userSelectionActive:G}=Ds(ZNe,$i),se=Qx(_),J=ee.useRef(0),re=ee.useRef(!1),q=ee.useRef();return XNe(B),ee.useEffect(()=>{if(B.current){const z=B.current.getBoundingClientRect(),W=iNe().scaleExtent([b,y]).translateExtent(g),ie=_c(B.current).call(W),P=cf.translate(m.x,m.y).scale(Km(m.zoom,b,y)),Y=[[0,0],[z.width,z.height]],Z=W.constrain()(P,Y,g);W.transform(ie,Z),W.wheelDelta(wL),L.setState({d3Zoom:W,d3Selection:ie,d3ZoomHandler:ie.on("wheel.zoom"),transform:[Z.x,Z.y,Z.k],domNode:B.current.closest(".react-flow")})}},[]),ee.useEffect(()=>{I&&D&&(i&&!se&&!G?I.on("wheel.zoom",z=>{if(z0(z,R))return!1;z.preventDefault(),z.stopImmediatePropagation();const W=I.property("__zoom").k||1;if(z.ctrlKey&&a){const pe=bu(z),fe=wL(z),xe=W*Math.pow(2,fe);D.scaleTo(I,xe,pe,z);return}const ie=z.deltaMode===1?20:1;let P=l===mh.Vertical?0:z.deltaX*ie,Y=l===mh.Horizontal?0:z.deltaY*ie;!ow()&&z.shiftKey&&l!==mh.Vertical&&(P=z.deltaY*ie,Y=0),D.translateBy(I,-(P/W)*o,-(Y/W)*o,{internal:!0});const Z=Ey(I.property("__zoom")),{onViewportChangeStart:te,onViewportChange:ce,onViewportChangeEnd:Ee}=L.getState();clearTimeout(q.current),re.current||(re.current=!0,e==null||e(z,Z),te==null||te(Z)),re.current&&(t==null||t(z,Z),ce==null||ce(Z),q.current=setTimeout(()=>{r==null||r(z,Z),Ee==null||Ee(Z),re.current=!1},150))},{passive:!1}):typeof O<"u"&&I.on("wheel.zoom",function(z,W){if(!N&&z.type==="wheel"&&!z.ctrlKey||z0(z,R))return null;z.preventDefault(),O.call(this,z,W)},{passive:!1}))},[G,i,l,I,D,O,se,a,N,R,e,t,r]),ee.useEffect(()=>{D&&D.on("start",z=>{var P,Y;if(!z.sourceEvent||z.sourceEvent.internal)return null;J.current=(P=z.sourceEvent)==null?void 0:P.button;const{onViewportChangeStart:W}=L.getState(),ie=Ey(z.transform);C.current=!0,Q.current=ie,((Y=z.sourceEvent)==null?void 0:Y.type)==="mousedown"&&L.setState({paneDragging:!0}),W==null||W(ie),e==null||e(z.sourceEvent,ie)})},[D,e]),ee.useEffect(()=>{D&&(G&&!C.current?D.on("zoom",null):G||D.on("zoom",z=>{var ie;const{onViewportChange:W}=L.getState();if(L.setState({transform:[z.transform.x,z.transform.y,z.transform.k]}),E.current=!!(n&&yL(h,J.current??0)),(t||W)&&!((ie=z.sourceEvent)!=null&&ie.internal)){const P=Ey(z.transform);W==null||W(P),t==null||t(z.sourceEvent,P)}}))},[G,D,t,h,n]),ee.useEffect(()=>{D&&D.on("end",z=>{if(!z.sourceEvent||z.sourceEvent.internal)return null;const{onViewportChangeEnd:W}=L.getState();if(C.current=!1,L.setState({paneDragging:!1}),n&&yL(h,J.current??0)&&!E.current&&n(z.sourceEvent),E.current=!1,(r||W)&&JNe(Q.current,z.transform)){const ie=Ey(z.transform);Q.current=ie,clearTimeout(j.current),j.current=setTimeout(()=>{W==null||W(ie),r==null||r(z.sourceEvent,ie)},i?150:0)}})},[D,i,h,r,n]),ee.useEffect(()=>{D&&D.filter(z=>{const W=se||s,ie=a&&z.ctrlKey;if((h===!0||Array.isArray(h)&&h.includes(1))&&z.button===1&&z.type==="mousedown"&&(z0(z,"react-flow__node")||z0(z,"react-flow__edge")))return!0;if(!h&&!W&&!i&&!u&&!a||G||!u&&z.type==="dblclick"||z0(z,R)&&z.type==="wheel"||z0(z,M)&&(z.type!=="wheel"||i&&z.type==="wheel"&&!se)||!a&&z.ctrlKey&&z.type==="wheel"||!W&&!i&&!ie&&z.type==="wheel"||!h&&(z.type==="mousedown"||z.type==="touchstart")||Array.isArray(h)&&!h.includes(z.button)&&z.type==="mousedown")return!1;const P=Array.isArray(h)&&h.includes(z.button)||!z.button||z.button<=1;return(!z.ctrlKey||z.type==="wheel")&&P})},[G,D,s,a,i,u,h,d,se]),At.createElement("div",{className:"react-flow__renderer",ref:B,style:sN},k)},tBe=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function rBe(){const{userSelectionActive:t,userSelectionRect:e}=Ds(tBe,$i);return t&&e?At.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function bL(t,e){const r=e.parentNode||e.parentId,n=t.find(s=>s.id===r);if(n){const s=e.position.x+e.width-n.width,a=e.position.y+e.height-n.height;if(s>0||a>0||e.position.x<0||e.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,s>0&&(n.style.width+=s),a>0&&(n.style.height+=a),e.position.x<0){const i=Math.abs(e.position.x);n.position.x=n.position.x-i,n.style.width+=i,e.position.x=0}if(e.position.y<0){const i=Math.abs(e.position.y);n.position.y=n.position.y-i,n.style.height+=i,e.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function dH(t,e){if(t.some(n=>n.type==="reset"))return t.filter(n=>n.type==="reset").map(n=>n.item);const r=t.filter(n=>n.type==="add").map(n=>n.item);return e.reduce((n,s)=>{const a=t.filter(o=>o.id===s.id);if(a.length===0)return n.push(s),n;const i={...s};for(const o of a)if(o)switch(o.type){case"select":{i.selected=o.selected;break}case"position":{typeof o.position<"u"&&(i.position=o.position),typeof o.positionAbsolute<"u"&&(i.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(i.dragging=o.dragging),i.expandParent&&bL(n,i);break}case"dimensions":{typeof o.dimensions<"u"&&(i.width=o.dimensions.width,i.height=o.dimensions.height),typeof o.updateStyle<"u"&&(i.style={...i.style||{},...o.dimensions}),typeof o.resizing=="boolean"&&(i.resizing=o.resizing),i.expandParent&&bL(n,i);break}case"remove":return n}return n.push(i),n},r)}function fH(t,e){return dH(t,e)}function nBe(t,e){return dH(t,e)}const Od=(t,e)=>({id:t,type:"select",selected:e});function cm(t,e){return t.reduce((r,n)=>{const s=e.includes(n.id);return!n.selected&&s?(n.selected=!0,r.push(Od(n.id,!0))):n.selected&&!s&&(n.selected=!1,r.push(Od(n.id,!1))),r},[])}const v_=(t,e)=>r=>{r.target===e.current&&(t==null||t(r))},sBe=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),hH=ee.memo(({isSelecting:t,selectionMode:e=Ox.Full,panOnDrag:r,onSelectionStart:n,onSelectionEnd:s,onPaneClick:a,onPaneContextMenu:i,onPaneScroll:o,onPaneMouseEnter:l,onPaneMouseMove:u,onPaneMouseLeave:d,children:h})=>{const m=ee.useRef(null),g=Za(),b=ee.useRef(0),y=ee.useRef(0),_=ee.useRef(),{userSelectionActive:N,elementsSelectable:k,dragging:R}=Ds(sBe,$i),M=()=>{g.setState({userSelectionActive:!1,userSelectionRect:null}),b.current=0,y.current=0},j=O=>{a==null||a(O),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},L=O=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){O.preventDefault();return}i==null||i(O)},C=o?O=>o(O):void 0,E=O=>{const{resetSelectedElements:G,domNode:se}=g.getState();if(_.current=se==null?void 0:se.getBoundingClientRect(),!k||!t||O.button!==0||O.target!==m.current||!_.current)return;const{x:J,y:re}=uf(O,_.current);G(),g.setState({userSelectionRect:{width:0,height:0,startX:J,startY:re,x:J,y:re}}),n==null||n(O)},B=O=>{const{userSelectionRect:G,nodeInternals:se,edges:J,transform:re,onNodesChange:q,onEdgesChange:z,nodeOrigin:W,getNodes:ie}=g.getState();if(!t||!_.current||!G)return;g.setState({userSelectionActive:!0,nodesSelectionActive:!1});const P=uf(O,_.current),Y=G.startX??0,Z=G.startY??0,te={...G,x:P.x<Y?P.x:Y,y:P.y<Z?P.y:Z,width:Math.abs(P.x-Y),height:Math.abs(P.y-Z)},ce=ie(),Ee=$Q(se,te,re,e===Ox.Partial,!0,W),pe=WQ(Ee,J).map(xe=>xe.id),fe=Ee.map(xe=>xe.id);if(b.current!==fe.length){b.current=fe.length;const xe=cm(ce,fe);xe.length&&(q==null||q(xe))}if(y.current!==pe.length){y.current=pe.length;const xe=cm(J,pe);xe.length&&(z==null||z(xe))}g.setState({userSelectionRect:te})},Q=O=>{if(O.button!==0)return;const{userSelectionRect:G}=g.getState();!N&&G&&O.target===m.current&&(j==null||j(O)),g.setState({nodesSelectionActive:b.current>0}),M(),s==null||s(O)},D=O=>{N&&(g.setState({nodesSelectionActive:b.current>0}),s==null||s(O)),M()},I=k&&(t||N);return At.createElement("div",{className:oo(["react-flow__pane",{dragging:R,selection:t}]),onClick:I?void 0:v_(j,m),onContextMenu:v_(L,m),onWheel:v_(C,m),onMouseEnter:I?void 0:l,onMouseDown:I?E:void 0,onMouseMove:I?B:u,onMouseUp:I?Q:void 0,onMouseLeave:I?D:d,ref:m,style:sN},h,At.createElement(rBe,null))});hH.displayName="Pane";function mH(t,e){const r=t.parentNode||t.parentId;if(!r)return!1;const n=e.get(r);return n?n.selected?!0:mH(n,e):!1}function CL(t,e,r){let n=t;do{if(n!=null&&n.matches(e))return!0;if(n===r.current)return!1;n=n.parentElement}while(n);return!1}function aBe(t,e,r,n){return Array.from(t.values()).filter(s=>(s.selected||s.id===n)&&(!s.parentNode||s.parentId||!mH(s,t))&&(s.draggable||e&&typeof s.draggable>"u")).map(s=>{var a,i;return{id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((a=s.positionAbsolute)==null?void 0:a.x)??0),y:r.y-(((i=s.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}})}function iBe(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function pH(t,e,r,n,s=[0,0],a){const i=iBe(t,t.extent||n);let o=i;const l=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(l&&t.width&&t.height){const h=r.get(l),{x:m,y:g}=Bm(h,s).positionAbsolute;o=h&&zl(m)&&zl(g)&&zl(h.width)&&zl(h.height)?[[m+t.width*s[0],g+t.height*s[1]],[m+h.width-t.width+t.width*s[0],g+h.height-t.height+t.height*s[1]]]:o}else a==null||a("005",HA.error005()),o=i;else if(t.extent&&l&&t.extent!=="parent"){const h=r.get(l),{x:m,y:g}=Bm(h,s).positionAbsolute;o=[[t.extent[0][0]+m,t.extent[0][1]+g],[t.extent[1][0]+m,t.extent[1][1]+g]]}let u={x:0,y:0};if(l){const h=r.get(l);u=Bm(h,s).positionAbsolute}const d=o&&o!=="parent"?WT(e,o):e;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function y_({nodeId:t,dragItems:e,nodeInternals:r}){const n=e.map(s=>({...r.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[t?n.find(s=>s.id===t):n[0],n]}const EL=(t,e,r,n)=>{const s=e.querySelectorAll(t);if(!s||!s.length)return null;const a=Array.from(s),i=e.getBoundingClientRect(),o={x:i.width*n[0],y:i.height*n[1]};return a.map(l=>{const u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(u.left-i.left-o.x)/r,y:(u.top-i.top-o.y)/r,...$T(l)}})};function ug(t,e,r){return r===void 0?r:n=>{const s=e().nodeInternals.get(t);s&&r(n,{...s})}}function v5({id:t,store:e,unselect:r=!1,nodeRef:n}){const{addSelectedNodes:s,unselectNodesAndEdges:a,multiSelectionActive:i,nodeInternals:o,onError:l}=e.getState(),u=o.get(t);if(!u){l==null||l("012",HA.error012(t));return}e.setState({nodesSelectionActive:!1}),u.selected?(r||u.selected&&i)&&(a({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=n==null?void 0:n.current)==null?void 0:d.blur()})):s([t])}function oBe(){const t=Za();return ee.useCallback(({sourceEvent:r})=>{const{transform:n,snapGrid:s,snapToGrid:a}=t.getState(),i=r.touches?r.touches[0].clientX:r.clientX,o=r.touches?r.touches[0].clientY:r.clientY,l={x:(i-n[0])/n[2],y:(o-n[1])/n[2]};return{xSnapped:a?s[0]*Math.round(l.x/s[0]):l.x,ySnapped:a?s[1]*Math.round(l.y/s[1]):l.y,...l}},[])}function w_(t){return(e,r,n)=>t==null?void 0:t(e,n)}function gH({nodeRef:t,disabled:e=!1,noDragClassName:r,handleSelector:n,nodeId:s,isSelectable:a,selectNodesOnDrag:i}){const o=Za(),[l,u]=ee.useState(!1),d=ee.useRef([]),h=ee.useRef({x:null,y:null}),m=ee.useRef(0),g=ee.useRef(null),b=ee.useRef({x:0,y:0}),y=ee.useRef(null),_=ee.useRef(!1),N=ee.useRef(!1),k=ee.useRef(!1),R=oBe();return ee.useEffect(()=>{if(t!=null&&t.current){const M=_c(t.current),j=({x:E,y:B})=>{const{nodeInternals:Q,onNodeDrag:D,onSelectionDrag:I,updateNodePositions:O,nodeExtent:G,snapGrid:se,snapToGrid:J,nodeOrigin:re,onError:q}=o.getState();h.current={x:E,y:B};let z=!1,W={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&G){const P=tN(d.current,re);W=YT(P)}if(d.current=d.current.map(P=>{const Y={x:E-P.distance.x,y:B-P.distance.y};J&&(Y.x=se[0]*Math.round(Y.x/se[0]),Y.y=se[1]*Math.round(Y.y/se[1]));const Z=[[G[0][0],G[0][1]],[G[1][0],G[1][1]]];d.current.length>1&&G&&!P.extent&&(Z[0][0]=P.positionAbsolute.x-W.x+G[0][0],Z[1][0]=P.positionAbsolute.x+(P.width??0)-W.x2+G[1][0],Z[0][1]=P.positionAbsolute.y-W.y+G[0][1],Z[1][1]=P.positionAbsolute.y+(P.height??0)-W.y2+G[1][1]);const te=pH(P,Y,Q,Z,re,q);return z=z||P.position.x!==te.position.x||P.position.y!==te.position.y,P.position=te.position,P.positionAbsolute=te.positionAbsolute,P}),!z)return;O(d.current,!0,!0),u(!0);const ie=s?D:w_(I);if(ie&&y.current){const[P,Y]=y_({nodeId:s,dragItems:d.current,nodeInternals:Q});ie(y.current,P,Y)}},L=()=>{if(!g.current)return;const[E,B]=jQ(b.current,g.current);if(E!==0||B!==0){const{transform:Q,panBy:D}=o.getState();h.current.x=(h.current.x??0)-E/Q[2],h.current.y=(h.current.y??0)-B/Q[2],D({x:E,y:B})&&j(h.current)}m.current=requestAnimationFrame(L)},C=E=>{var re;const{nodeInternals:B,multiSelectionActive:Q,nodesDraggable:D,unselectNodesAndEdges:I,onNodeDragStart:O,onSelectionDragStart:G}=o.getState();N.current=!0;const se=s?O:w_(G);(!i||!a)&&!Q&&s&&((re=B.get(s))!=null&&re.selected||I()),s&&a&&i&&v5({id:s,store:o,nodeRef:t});const J=R(E);if(h.current=J,d.current=aBe(B,D,J,s),se&&d.current){const[q,z]=y_({nodeId:s,dragItems:d.current,nodeInternals:B});se(E.sourceEvent,q,z)}};if(e)M.on(".drag",null);else{const E=p4e().on("start",B=>{const{domNode:Q,nodeDragThreshold:D}=o.getState();D===0&&C(B),k.current=!1;const I=R(B);h.current=I,g.current=(Q==null?void 0:Q.getBoundingClientRect())||null,b.current=uf(B.sourceEvent,g.current)}).on("drag",B=>{var O,G;const Q=R(B),{autoPanOnNodeDrag:D,nodeDragThreshold:I}=o.getState();if(B.sourceEvent.type==="touchmove"&&B.sourceEvent.touches.length>1&&(k.current=!0),!k.current){if(!_.current&&N.current&&D&&(_.current=!0,L()),!N.current){const se=Q.xSnapped-(((O=h==null?void 0:h.current)==null?void 0:O.x)??0),J=Q.ySnapped-(((G=h==null?void 0:h.current)==null?void 0:G.y)??0);Math.sqrt(se*se+J*J)>I&&C(B)}(h.current.x!==Q.xSnapped||h.current.y!==Q.ySnapped)&&d.current&&N.current&&(y.current=B.sourceEvent,b.current=uf(B.sourceEvent,g.current),j(Q))}}).on("end",B=>{if(!(!N.current||k.current)&&(u(!1),_.current=!1,N.current=!1,cancelAnimationFrame(m.current),d.current)){const{updateNodePositions:Q,nodeInternals:D,onNodeDragStop:I,onSelectionDragStop:O}=o.getState(),G=s?I:w_(O);if(Q(d.current,!1,!1),G){const[se,J]=y_({nodeId:s,dragItems:d.current,nodeInternals:D});G(B.sourceEvent,se,J)}}}).filter(B=>{const Q=B.target;return!B.button&&(!r||!CL(Q,`.${r}`,t))&&(!n||CL(Q,n,t))});return M.call(E),()=>{M.on(".drag",null)}}}},[t,e,r,n,a,o,s,i,R]),l}function xH(){const t=Za();return ee.useCallback(r=>{const{nodeInternals:n,nodeExtent:s,updateNodePositions:a,getNodes:i,snapToGrid:o,snapGrid:l,onError:u,nodesDraggable:d}=t.getState(),h=i().filter(k=>k.selected&&(k.draggable||d&&typeof k.draggable>"u")),m=o?l[0]:5,g=o?l[1]:5,b=r.isShiftPressed?4:1,y=r.x*m*b,_=r.y*g*b,N=h.map(k=>{if(k.positionAbsolute){const R={x:k.positionAbsolute.x+y,y:k.positionAbsolute.y+_};o&&(R.x=l[0]*Math.round(R.x/l[0]),R.y=l[1]*Math.round(R.y/l[1]));const{positionAbsolute:M,position:j}=pH(k,R,n,s,void 0,u);k.position=j,k.positionAbsolute=M}return k});a(N,!0,!1)},[])}const km={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Ag=t=>{const e=({id:r,type:n,data:s,xPos:a,yPos:i,xPosOrigin:o,yPosOrigin:l,selected:u,onClick:d,onMouseEnter:h,onMouseMove:m,onMouseLeave:g,onContextMenu:b,onDoubleClick:y,style:_,className:N,isDraggable:k,isSelectable:R,isConnectable:M,isFocusable:j,selectNodesOnDrag:L,sourcePosition:C,targetPosition:E,hidden:B,resizeObserver:Q,dragHandle:D,zIndex:I,isParent:O,noDragClassName:G,noPanClassName:se,initialized:J,disableKeyboardA11y:re,ariaLabel:q,rfId:z,hasHandleBounds:W})=>{const ie=Za(),P=ee.useRef(null),Y=ee.useRef(null),Z=ee.useRef(C),te=ee.useRef(E),ce=ee.useRef(n),Ee=R||k||d||h||m||g,pe=xH(),fe=ug(r,ie.getState,h),xe=ug(r,ie.getState,m),de=ug(r,ie.getState,g),oe=ug(r,ie.getState,b),Le=ug(r,ie.getState,y),et=je=>{const{nodeDragThreshold:qe}=ie.getState();if(R&&(!L||!k||qe>0)&&v5({id:r,store:ie,nodeRef:P}),d){const st=ie.getState().nodeInternals.get(r);st&&d(je,{...st})}},Te=je=>{if(!h5(je)&&!re)if(QQ.includes(je.key)&&R){const qe=je.key==="Escape";v5({id:r,store:ie,unselect:qe,nodeRef:P})}else k&&u&&Object.prototype.hasOwnProperty.call(km,je.key)&&(ie.setState({ariaLiveMessage:`Moved selected node ${je.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~a}, y: ${~~i}`}),pe({x:km[je.key].x,y:km[je.key].y,isShiftPressed:je.shiftKey}))};ee.useEffect(()=>()=>{Y.current&&(Q==null||Q.unobserve(Y.current),Y.current=null)},[]),ee.useEffect(()=>{if(P.current&&!B){const je=P.current;(!J||!W||Y.current!==je)&&(Y.current&&(Q==null||Q.unobserve(Y.current)),Q==null||Q.observe(je),Y.current=je)}},[B,J,W]),ee.useEffect(()=>{const je=ce.current!==n,qe=Z.current!==C,st=te.current!==E;P.current&&(je||qe||st)&&(je&&(ce.current=n),qe&&(Z.current=C),st&&(te.current=E),ie.getState().updateNodeDimensions([{id:r,nodeElement:P.current,forceUpdate:!0}]))},[r,n,C,E]);const be=gH({nodeRef:P,disabled:B||!k,noDragClassName:G,handleSelector:D,nodeId:r,isSelectable:R,selectNodesOnDrag:L});return B?null:At.createElement("div",{className:oo(["react-flow__node",`react-flow__node-${n}`,{[se]:k},N,{selected:u,selectable:R,parent:O,dragging:be}]),ref:P,style:{zIndex:I,transform:`translate(${o}px,${l}px)`,pointerEvents:Ee?"all":"none",visibility:J?"visible":"hidden",..._},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:fe,onMouseMove:xe,onMouseLeave:de,onContextMenu:oe,onClick:et,onDoubleClick:Le,onKeyDown:j?Te:void 0,tabIndex:j?0:void 0,role:j?"button":void 0,"aria-describedby":re?void 0:`${oH}-${z}`,"aria-label":q},At.createElement(wNe,{value:r},At.createElement(t,{id:r,data:s,type:n,xPos:a,yPos:i,selected:u,isConnectable:M,sourcePosition:C,targetPosition:E,dragging:be,dragHandle:D,zIndex:I})))};return e.displayName="NodeWrapper",ee.memo(e)};const lBe=t=>{const e=t.getNodes().filter(r=>r.selected);return{...tN(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function cBe({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:r}){const n=Za(),{width:s,height:a,x:i,y:o,transformString:l,userSelectionActive:u}=Ds(lBe,$i),d=xH(),h=ee.useRef(null);if(ee.useEffect(()=>{var b;r||(b=h.current)==null||b.focus({preventScroll:!0})},[r]),gH({nodeRef:h}),u||!s||!a)return null;const m=t?b=>{const y=n.getState().getNodes().filter(_=>_.selected);t(b,y)}:void 0,g=b=>{Object.prototype.hasOwnProperty.call(km,b.key)&&d({x:km[b.key].x,y:km[b.key].y,isShiftPressed:b.shiftKey})};return At.createElement("div",{className:oo(["react-flow__nodesselection","react-flow__container",e]),style:{transform:l}},At.createElement("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:r?void 0:-1,onKeyDown:r?void 0:g,style:{width:s,height:a,top:o,left:i}}))}var uBe=ee.memo(cBe);const ABe=t=>t.nodesSelectionActive,vH=({children:t,onPaneClick:e,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:i,deleteKeyCode:o,onMove:l,onMoveStart:u,onMoveEnd:d,selectionKeyCode:h,selectionOnDrag:m,selectionMode:g,onSelectionStart:b,onSelectionEnd:y,multiSelectionKeyCode:_,panActivationKeyCode:N,zoomActivationKeyCode:k,elementsSelectable:R,zoomOnScroll:M,zoomOnPinch:j,panOnScroll:L,panOnScrollSpeed:C,panOnScrollMode:E,zoomOnDoubleClick:B,panOnDrag:Q,defaultViewport:D,translateExtent:I,minZoom:O,maxZoom:G,preventScrolling:se,onSelectionContextMenu:J,noWheelClassName:re,noPanClassName:q,disableKeyboardA11y:z})=>{const W=Ds(ABe),ie=Qx(h),P=Qx(N),Y=P||Q,Z=P||L,te=ie||m&&Y!==!0;return YNe({deleteKeyCode:o,multiSelectionKeyCode:_}),At.createElement(eBe,{onMove:l,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:a,elementsSelectable:R,zoomOnScroll:M,zoomOnPinch:j,panOnScroll:Z,panOnScrollSpeed:C,panOnScrollMode:E,zoomOnDoubleClick:B,panOnDrag:!ie&&Y,defaultViewport:D,translateExtent:I,minZoom:O,maxZoom:G,zoomActivationKeyCode:k,preventScrolling:se,noWheelClassName:re,noPanClassName:q},At.createElement(hH,{onSelectionStart:b,onSelectionEnd:y,onPaneClick:e,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:i,panOnDrag:Y,isSelecting:!!te,selectionMode:g},t,W&&At.createElement(uBe,{onSelectionContextMenu:J,noPanClassName:q,disableKeyboardA11y:z})))};vH.displayName="FlowRenderer";var dBe=ee.memo(vH);function fBe(t){return Ds(ee.useCallback(r=>t?$Q(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[t]))}function hBe(t){const e={input:Ag(t.input||nH),default:Ag(t.default||x5),output:Ag(t.output||aH),group:Ag(t.group||nN)},r={},n=Object.keys(t).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,a)=>(s[a]=Ag(t[a]||x5),s),r);return{...e,...n}}const mBe=({x:t,y:e,width:r,height:n,origin:s})=>!r||!n?{x:t,y:e}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:t,y:e}:{x:t-r*s[0],y:e-n*s[1]},pBe=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),yH=t=>{const{nodesDraggable:e,nodesConnectable:r,nodesFocusable:n,elementsSelectable:s,updateNodeDimensions:a,onError:i}=Ds(pBe,$i),o=fBe(t.onlyRenderVisibleElements),l=ee.useRef(),u=ee.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(h=>{const m=h.map(g=>({id:g.target.getAttribute("data-id"),nodeElement:g.target,forceUpdate:!0}));a(m)});return l.current=d,d},[]);return ee.useEffect(()=>()=>{var d;(d=l==null?void 0:l.current)==null||d.disconnect()},[]),At.createElement("div",{className:"react-flow__nodes",style:sN},o.map(d=>{var j,L,C;let h=d.type||"default";t.nodeTypes[h]||(i==null||i("003",HA.error003(h)),h="default");const m=t.nodeTypes[h]||t.nodeTypes.default,g=!!(d.draggable||e&&typeof d.draggable>"u"),b=!!(d.selectable||s&&typeof d.selectable>"u"),y=!!(d.connectable||r&&typeof d.connectable>"u"),_=!!(d.focusable||n&&typeof d.focusable>"u"),N=t.nodeExtent?WT(d.positionAbsolute,t.nodeExtent):d.positionAbsolute,k=(N==null?void 0:N.x)??0,R=(N==null?void 0:N.y)??0,M=mBe({x:k,y:R,width:d.width??0,height:d.height??0,origin:t.nodeOrigin});return At.createElement(m,{key:d.id,id:d.id,className:d.className,style:d.style,type:h,data:d.data,sourcePosition:d.sourcePosition||lr.Bottom,targetPosition:d.targetPosition||lr.Top,hidden:d.hidden,xPos:k,yPos:R,xPosOrigin:M.x,yPosOrigin:M.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!d.selected,isDraggable:g,isSelectable:b,isConnectable:y,isFocusable:_,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((j=d[zs])==null?void 0:j.z)??0,isParent:!!((L=d[zs])!=null&&L.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!d.width&&!!d.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((C=d[zs])!=null&&C.handleBounds)})}))};yH.displayName="NodeRenderer";var gBe=ee.memo(yH);const xBe=(t,e,r)=>r===lr.Left?t-e:r===lr.Right?t+e:t,vBe=(t,e,r)=>r===lr.Top?t-e:r===lr.Bottom?t+e:t,_L="react-flow__edgeupdater",SL=({position:t,centerX:e,centerY:r,radius:n=10,onMouseDown:s,onMouseEnter:a,onMouseOut:i,type:o})=>At.createElement("circle",{onMouseDown:s,onMouseEnter:a,onMouseOut:i,className:oo([_L,`${_L}-${o}`]),cx:xBe(e,n,t),cy:vBe(r,n,t),r:n,stroke:"transparent",fill:"transparent"}),yBe=()=>!0;var q0=t=>{const e=({id:r,className:n,type:s,data:a,onClick:i,onEdgeDoubleClick:o,selected:l,animated:u,label:d,labelStyle:h,labelShowBg:m,labelBgStyle:g,labelBgPadding:b,labelBgBorderRadius:y,style:_,source:N,target:k,sourceX:R,sourceY:M,targetX:j,targetY:L,sourcePosition:C,targetPosition:E,elementsSelectable:B,hidden:Q,sourceHandleId:D,targetHandleId:I,onContextMenu:O,onMouseEnter:G,onMouseMove:se,onMouseLeave:J,reconnectRadius:re,onReconnect:q,onReconnectStart:z,onReconnectEnd:W,markerEnd:ie,markerStart:P,rfId:Y,ariaLabel:Z,isFocusable:te,isReconnectable:ce,pathOptions:Ee,interactionWidth:pe,disableKeyboardA11y:fe})=>{const xe=ee.useRef(null),[de,oe]=ee.useState(!1),[Le,et]=ee.useState(!1),Te=Za(),be=ee.useMemo(()=>`url('#${p5(P,Y)}')`,[P,Y]),je=ee.useMemo(()=>`url('#${p5(ie,Y)}')`,[ie,Y]);if(Q)return null;const qe=xt=>{var Dn;const{edges:wr,addSelectedEdges:Jt,unselectNodesAndEdges:dn,multiSelectionActive:gr}=Te.getState(),Ur=wr.find(Fr=>Fr.id===r);Ur&&(B&&(Te.setState({nodesSelectionActive:!1}),Ur.selected&&gr?(dn({nodes:[],edges:[Ur]}),(Dn=xe.current)==null||Dn.blur()):Jt([r])),i&&i(xt,Ur))},st=cg(r,Te.getState,o),mt=cg(r,Te.getState,O),Et=cg(r,Te.getState,G),lt=cg(r,Te.getState,se),kt=cg(r,Te.getState,J),Gt=(xt,wr)=>{if(xt.button!==0)return;const{edges:Jt,isValidConnection:dn}=Te.getState(),gr=wr?k:N,Ur=(wr?I:D)||null,Dn=wr?"target":"source",Fr=dn||yBe,da=wr,nn=Jt.find(Pr=>Pr.id===r);et(!0),z==null||z(xt,nn,Dn);const ns=Pr=>{et(!1),W==null||W(Pr,nn,Dn)};ZQ({event:xt,handleId:Ur,nodeId:gr,onConnect:Pr=>q==null?void 0:q(nn,Pr),isTarget:da,getState:Te.getState,setState:Te.setState,isValidConnection:Fr,edgeUpdaterType:Dn,onReconnectEnd:ns})},Xt=xt=>Gt(xt,!0),It=xt=>Gt(xt,!1),Dt=()=>oe(!0),Wt=()=>oe(!1),Lt=!B&&!i,Rt=xt=>{var wr;if(!fe&&QQ.includes(xt.key)&&B){const{unselectNodesAndEdges:Jt,addSelectedEdges:dn,edges:gr}=Te.getState();xt.key==="Escape"?((wr=xe.current)==null||wr.blur(),Jt({edges:[gr.find(Dn=>Dn.id===r)]})):dn([r])}};return At.createElement("g",{className:oo(["react-flow__edge",`react-flow__edge-${s}`,n,{selected:l,animated:u,inactive:Lt,updating:de}]),onClick:qe,onDoubleClick:st,onContextMenu:mt,onMouseEnter:Et,onMouseMove:lt,onMouseLeave:kt,onKeyDown:te?Rt:void 0,tabIndex:te?0:void 0,role:te?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":Z===null?void 0:Z||`Edge from ${N} to ${k}`,"aria-describedby":te?`${lH}-${Y}`:void 0,ref:xe},!Le&&At.createElement(t,{id:r,source:N,target:k,selected:l,animated:u,label:d,labelStyle:h,labelShowBg:m,labelBgStyle:g,labelBgPadding:b,labelBgBorderRadius:y,data:a,style:_,sourceX:R,sourceY:M,targetX:j,targetY:L,sourcePosition:C,targetPosition:E,sourceHandleId:D,targetHandleId:I,markerStart:be,markerEnd:je,pathOptions:Ee,interactionWidth:pe}),ce&&At.createElement(At.Fragment,null,(ce==="source"||ce===!0)&&At.createElement(SL,{position:C,centerX:R,centerY:M,radius:re,onMouseDown:Xt,onMouseEnter:Dt,onMouseOut:Wt,type:"source"}),(ce==="target"||ce===!0)&&At.createElement(SL,{position:E,centerX:j,centerY:L,radius:re,onMouseDown:It,onMouseEnter:Dt,onMouseOut:Wt,type:"target"})))};return e.displayName="EdgeWrapper",ee.memo(e)};function wBe(t){const e={default:q0(t.default||cw),straight:q0(t.bezier||ZT),step:q0(t.step||JT),smoothstep:q0(t.step||Sb),simplebezier:q0(t.simplebezier||XT)},r={},n=Object.keys(t).filter(s=>!["default","bezier"].includes(s)).reduce((s,a)=>(s[a]=q0(t[a]||cw),s),r);return{...e,...n}}function TL(t,e,r=null){const n=((r==null?void 0:r.x)||0)+e.x,s=((r==null?void 0:r.y)||0)+e.y,a=(r==null?void 0:r.width)||e.width,i=(r==null?void 0:r.height)||e.height;switch(t){case lr.Top:return{x:n+a/2,y:s};case lr.Right:return{x:n+a,y:s+i/2};case lr.Bottom:return{x:n+a/2,y:s+i};case lr.Left:return{x:n,y:s+i/2}}}function NL(t,e){return t?t.length===1||!e?t[0]:e&&t.find(r=>r.id===e)||null:null}const bBe=(t,e,r,n,s,a)=>{const i=TL(r,t,e),o=TL(a,n,s);return{sourceX:i.x,sourceY:i.y,targetX:o.x,targetY:o.y}};function CBe({sourcePos:t,targetPos:e,sourceWidth:r,sourceHeight:n,targetWidth:s,targetHeight:a,width:i,height:o,transform:l}){const u={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+r,e.x+s),y2:Math.max(t.y+n,e.y+a)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=YT({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:i/l[2],height:o/l[2]}),h=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),m=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(h*m)>0}function BL(t){var n,s,a,i,o;const e=((n=t==null?void 0:t[zs])==null?void 0:n.handleBounds)||null,r=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&typeof((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.x)<"u"&&typeof((a=t==null?void 0:t.positionAbsolute)==null?void 0:a.y)<"u";return[{x:((i=t==null?void 0:t.positionAbsolute)==null?void 0:i.x)||0,y:((o=t==null?void 0:t.positionAbsolute)==null?void 0:o.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!r]}const EBe=[{level:0,isMaxLevel:!0,edges:[]}];function _Be(t,e,r=!1){let n=-1;const s=t.reduce((i,o)=>{var d,h;const l=zl(o.zIndex);let u=l?o.zIndex:0;if(r){const m=e.get(o.target),g=e.get(o.source),b=o.selected||(m==null?void 0:m.selected)||(g==null?void 0:g.selected),y=Math.max(((d=g==null?void 0:g[zs])==null?void 0:d.z)||0,((h=m==null?void 0:m[zs])==null?void 0:h.z)||0,1e3);u=(l?o.zIndex:0)+(b?y:0)}return i[u]?i[u].push(o):i[u]=[o],n=u>n?u:n,i},{}),a=Object.entries(s).map(([i,o])=>{const l=+i;return{edges:o,level:l,isMaxLevel:l===n}});return a.length===0?EBe:a}function SBe(t,e,r){const n=Ds(ee.useCallback(s=>t?s.edges.filter(a=>{const i=e.get(a.source),o=e.get(a.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&CBe({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:o.width,targetHeight:o.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[t,e]));return _Be(n,e,r)}const TBe=({color:t="none",strokeWidth:e=1})=>At.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),NBe=({color:t="none",strokeWidth:e=1})=>At.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),kL={[lw.Arrow]:TBe,[lw.ArrowClosed]:NBe};function BBe(t){const e=Za();return ee.useMemo(()=>{var s,a;return Object.prototype.hasOwnProperty.call(kL,t)?kL[t]:((a=(s=e.getState()).onError)==null||a.call(s,"009",HA.error009(t)),null)},[t])}const kBe=({id:t,type:e,color:r,width:n=12.5,height:s=12.5,markerUnits:a="strokeWidth",strokeWidth:i,orient:o="auto-start-reverse"})=>{const l=BBe(e);return l?At.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${n}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:o,refX:"0",refY:"0"},At.createElement(l,{color:r,strokeWidth:i})):null},IBe=({defaultColor:t,rfId:e})=>r=>{const n=[];return r.edges.reduce((s,a)=>([a.markerStart,a.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const o=p5(i,e);n.includes(o)||(s.push({id:o,color:i.color||t,...i}),n.push(o))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))},wH=({defaultColor:t,rfId:e})=>{const r=Ds(ee.useCallback(IBe({defaultColor:t,rfId:e}),[t,e]),(n,s)=>!(n.length!==s.length||n.some((a,i)=>a.id!==s[i].id)));return At.createElement("defs",null,r.map(n=>At.createElement(kBe,{id:n.id,key:n.id,type:n.type,color:n.color,width:n.width,height:n.height,markerUnits:n.markerUnits,strokeWidth:n.strokeWidth,orient:n.orient})))};wH.displayName="MarkerDefinitions";var FBe=ee.memo(wH);const DBe=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),bH=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:r,rfId:n,edgeTypes:s,noPanClassName:a,onEdgeContextMenu:i,onEdgeMouseEnter:o,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:h,onReconnect:m,onReconnectStart:g,onReconnectEnd:b,reconnectRadius:y,children:_,disableKeyboardA11y:N})=>{const{edgesFocusable:k,edgesUpdatable:R,elementsSelectable:M,width:j,height:L,connectionMode:C,nodeInternals:E,onError:B}=Ds(DBe,$i),Q=SBe(e,E,r);return j?At.createElement(At.Fragment,null,Q.map(({level:D,edges:I,isMaxLevel:O})=>At.createElement("svg",{key:D,style:{zIndex:D},width:j,height:L,className:"react-flow__edges react-flow__container"},O&&At.createElement(FBe,{defaultColor:t,rfId:n}),At.createElement("g",null,I.map(G=>{const[se,J,re]=BL(E.get(G.source)),[q,z,W]=BL(E.get(G.target));if(!re||!W)return null;let ie=G.type||"default";s[ie]||(B==null||B("011",HA.error011(ie)),ie="default");const P=s[ie]||s.default,Y=C===Oh.Strict?z.target:(z.target??[]).concat(z.source??[]),Z=NL(J.source,G.sourceHandle),te=NL(Y,G.targetHandle),ce=(Z==null?void 0:Z.position)||lr.Bottom,Ee=(te==null?void 0:te.position)||lr.Top,pe=!!(G.focusable||k&&typeof G.focusable>"u"),fe=G.reconnectable||G.updatable,xe=typeof m<"u"&&(fe||R&&typeof fe>"u");if(!Z||!te)return B==null||B("008",HA.error008(Z,G)),null;const{sourceX:de,sourceY:oe,targetX:Le,targetY:et}=bBe(se,Z,ce,q,te,Ee);return At.createElement(P,{key:G.id,id:G.id,className:oo([G.className,a]),type:ie,data:G.data,selected:!!G.selected,animated:!!G.animated,hidden:!!G.hidden,label:G.label,labelStyle:G.labelStyle,labelShowBg:G.labelShowBg,labelBgStyle:G.labelBgStyle,labelBgPadding:G.labelBgPadding,labelBgBorderRadius:G.labelBgBorderRadius,style:G.style,source:G.source,target:G.target,sourceHandleId:G.sourceHandle,targetHandleId:G.targetHandle,markerEnd:G.markerEnd,markerStart:G.markerStart,sourceX:de,sourceY:oe,targetX:Le,targetY:et,sourcePosition:ce,targetPosition:Ee,elementsSelectable:M,onContextMenu:i,onMouseEnter:o,onMouseMove:l,onMouseLeave:u,onClick:d,onEdgeDoubleClick:h,onReconnect:m,onReconnectStart:g,onReconnectEnd:b,reconnectRadius:y,rfId:n,ariaLabel:G.ariaLabel,isFocusable:pe,isReconnectable:xe,pathOptions:"pathOptions"in G?G.pathOptions:void 0,interactionWidth:G.interactionWidth,disableKeyboardA11y:N})})))),_):null};bH.displayName="EdgeRenderer";var RBe=ee.memo(bH);const LBe=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function UBe({children:t}){const e=Ds(LBe);return At.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function MBe(t){const e=Tb(),r=ee.useRef(!1);ee.useEffect(()=>{!r.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),r.current=!0)},[t,e.viewportInitialized])}const PBe={[lr.Left]:lr.Right,[lr.Right]:lr.Left,[lr.Top]:lr.Bottom,[lr.Bottom]:lr.Top},CH=({nodeId:t,handleType:e,style:r,type:n=qd.Bezier,CustomComponent:s,connectionStatus:a})=>{var L,C,E;const{fromNode:i,handleId:o,toX:l,toY:u,connectionMode:d}=Ds(ee.useCallback(B=>({fromNode:B.nodeInternals.get(t),handleId:B.connectionHandleId,toX:(B.connectionPosition.x-B.transform[0])/B.transform[2],toY:(B.connectionPosition.y-B.transform[1])/B.transform[2],connectionMode:B.connectionMode}),[t]),$i),h=(L=i==null?void 0:i[zs])==null?void 0:L.handleBounds;let m=h==null?void 0:h[e];if(d===Oh.Loose&&(m=m||(h==null?void 0:h[e==="source"?"target":"source"])),!i||!m)return null;const g=o?m.find(B=>B.id===o):m[0],b=g?g.x+g.width/2:(i.width??0)/2,y=g?g.y+g.height/2:i.height??0,_=(((C=i.positionAbsolute)==null?void 0:C.x)??0)+b,N=(((E=i.positionAbsolute)==null?void 0:E.y)??0)+y,k=g==null?void 0:g.position,R=k?PBe[k]:null;if(!k||!R)return null;if(s)return At.createElement(s,{connectionLineType:n,connectionLineStyle:r,fromNode:i,fromHandle:g,fromX:_,fromY:N,toX:l,toY:u,fromPosition:k,toPosition:R,connectionStatus:a});let M="";const j={sourceX:_,sourceY:N,sourcePosition:k,targetX:l,targetY:u,targetPosition:R};return n===qd.Bezier?[M]=qQ(j):n===qd.Step?[M]=m5({...j,borderRadius:0}):n===qd.SmoothStep?[M]=m5(j):n===qd.SimpleBezier?[M]=zQ(j):M=`M${_},${N} ${l},${u}`,At.createElement("path",{d:M,fill:"none",className:"react-flow__connection-path",style:r})};CH.displayName="ConnectionLine";const jBe=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function OBe({containerStyle:t,style:e,type:r,component:n}){const{nodeId:s,handleType:a,nodesConnectable:i,width:o,height:l,connectionStatus:u}=Ds(jBe,$i);return!(s&&a&&o&&i)?null:At.createElement("svg",{style:t,width:o,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},At.createElement("g",{className:oo(["react-flow__connection",u])},At.createElement(CH,{nodeId:s,handleType:a,style:e,type:r,CustomComponent:n,connectionStatus:u})))}function IL(t,e){return ee.useRef(null),Za(),ee.useMemo(()=>e(t),[t])}const EH=({nodeTypes:t,edgeTypes:e,onMove:r,onMoveStart:n,onMoveEnd:s,onInit:a,onNodeClick:i,onEdgeClick:o,onNodeDoubleClick:l,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:m,onNodeContextMenu:g,onSelectionContextMenu:b,onSelectionStart:y,onSelectionEnd:_,connectionLineType:N,connectionLineStyle:k,connectionLineComponent:R,connectionLineContainerStyle:M,selectionKeyCode:j,selectionOnDrag:L,selectionMode:C,multiSelectionKeyCode:E,panActivationKeyCode:B,zoomActivationKeyCode:Q,deleteKeyCode:D,onlyRenderVisibleElements:I,elementsSelectable:O,selectNodesOnDrag:G,defaultViewport:se,translateExtent:J,minZoom:re,maxZoom:q,preventScrolling:z,defaultMarkerColor:W,zoomOnScroll:ie,zoomOnPinch:P,panOnScroll:Y,panOnScrollSpeed:Z,panOnScrollMode:te,zoomOnDoubleClick:ce,panOnDrag:Ee,onPaneClick:pe,onPaneMouseEnter:fe,onPaneMouseMove:xe,onPaneMouseLeave:de,onPaneScroll:oe,onPaneContextMenu:Le,onEdgeContextMenu:et,onEdgeMouseEnter:Te,onEdgeMouseMove:be,onEdgeMouseLeave:je,onReconnect:qe,onReconnectStart:st,onReconnectEnd:mt,reconnectRadius:Et,noDragClassName:lt,noWheelClassName:kt,noPanClassName:Gt,elevateEdgesOnSelect:Xt,disableKeyboardA11y:It,nodeOrigin:Dt,nodeExtent:Wt,rfId:Lt})=>{const Rt=IL(t,hBe),xt=IL(e,wBe);return MBe(a),At.createElement(dBe,{onPaneClick:pe,onPaneMouseEnter:fe,onPaneMouseMove:xe,onPaneMouseLeave:de,onPaneContextMenu:Le,onPaneScroll:oe,deleteKeyCode:D,selectionKeyCode:j,selectionOnDrag:L,selectionMode:C,onSelectionStart:y,onSelectionEnd:_,multiSelectionKeyCode:E,panActivationKeyCode:B,zoomActivationKeyCode:Q,elementsSelectable:O,onMove:r,onMoveStart:n,onMoveEnd:s,zoomOnScroll:ie,zoomOnPinch:P,zoomOnDoubleClick:ce,panOnScroll:Y,panOnScrollSpeed:Z,panOnScrollMode:te,panOnDrag:Ee,defaultViewport:se,translateExtent:J,minZoom:re,maxZoom:q,onSelectionContextMenu:b,preventScrolling:z,noDragClassName:lt,noWheelClassName:kt,noPanClassName:Gt,disableKeyboardA11y:It},At.createElement(UBe,null,At.createElement(RBe,{edgeTypes:xt,onEdgeClick:o,onEdgeDoubleClick:u,onlyRenderVisibleElements:I,onEdgeContextMenu:et,onEdgeMouseEnter:Te,onEdgeMouseMove:be,onEdgeMouseLeave:je,onReconnect:qe,onReconnectStart:st,onReconnectEnd:mt,reconnectRadius:Et,defaultMarkerColor:W,noPanClassName:Gt,elevateEdgesOnSelect:!!Xt,disableKeyboardA11y:It,rfId:Lt},At.createElement(OBe,{style:k,type:N,component:R,containerStyle:M})),At.createElement("div",{className:"react-flow__edgelabel-renderer"}),At.createElement(gBe,{nodeTypes:Rt,onNodeClick:i,onNodeDoubleClick:l,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:m,onNodeContextMenu:g,selectNodesOnDrag:G,onlyRenderVisibleElements:I,noPanClassName:Gt,noDragClassName:lt,disableKeyboardA11y:It,nodeOrigin:Dt,nodeExtent:Wt,rfId:Lt})))};EH.displayName="GraphView";var QBe=ee.memo(EH);const y5=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Rd={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:y5,nodeExtent:y5,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Oh.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:mNe,isValidConnection:void 0},HBe=()=>NSe((t,e)=>({...Rd,setNodes:r=>{const{nodeInternals:n,nodeOrigin:s,elevateNodesOnSelect:a}=e();t({nodeInternals:x_(r,n,s,a)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:n={}}=e();t({edges:r.map(s=>({...n,...s}))})},setDefaultNodesAndEdges:(r,n)=>{const s=typeof r<"u",a=typeof n<"u",i=s?x_(r,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:i,edges:a?n:[],hasDefaultNodes:s,hasDefaultEdges:a})},updateNodeDimensions:r=>{const{onNodesChange:n,nodeInternals:s,fitViewOnInit:a,fitViewOnInitDone:i,fitViewOnInitOptions:o,domNode:l,nodeOrigin:u}=e(),d=l==null?void 0:l.querySelector(".react-flow__viewport");if(!d)return;const h=window.getComputedStyle(d),{m22:m}=new window.DOMMatrixReadOnly(h.transform),g=r.reduce((y,_)=>{const N=s.get(_.id);if(N!=null&&N.hidden)s.set(N.id,{...N,[zs]:{...N[zs],handleBounds:void 0}});else if(N){const k=$T(_.nodeElement);!!(k.width&&k.height&&(N.width!==k.width||N.height!==k.height||_.forceUpdate))&&(s.set(N.id,{...N,[zs]:{...N[zs],handleBounds:{source:EL(".source",_.nodeElement,m,u),target:EL(".target",_.nodeElement,m,u)}},...k}),y.push({id:N.id,type:"dimensions",dimensions:k}))}return y},[]);uH(s,u);const b=i||a&&!i&&AH(e,{initial:!0,...o});t({nodeInternals:new Map(s),fitViewOnInitDone:b}),(g==null?void 0:g.length)>0&&(n==null||n(g))},updateNodePositions:(r,n=!0,s=!1)=>{const{triggerNodeChanges:a}=e(),i=r.map(o=>{const l={id:o.id,type:"position",dragging:s};return n&&(l.positionAbsolute=o.positionAbsolute,l.position=o.position),l});a(i)},triggerNodeChanges:r=>{const{onNodesChange:n,nodeInternals:s,hasDefaultNodes:a,nodeOrigin:i,getNodes:o,elevateNodesOnSelect:l}=e();if(r!=null&&r.length){if(a){const u=fH(r,o()),d=x_(u,s,i,l);t({nodeInternals:d})}n==null||n(r)}},addSelectedNodes:r=>{const{multiSelectionActive:n,edges:s,getNodes:a}=e();let i,o=null;n?i=r.map(l=>Od(l,!0)):(i=cm(a(),r),o=cm(s,[])),Cy({changedNodes:i,changedEdges:o,get:e,set:t})},addSelectedEdges:r=>{const{multiSelectionActive:n,edges:s,getNodes:a}=e();let i,o=null;n?i=r.map(l=>Od(l,!0)):(i=cm(s,r),o=cm(a(),[])),Cy({changedNodes:o,changedEdges:i,get:e,set:t})},unselectNodesAndEdges:({nodes:r,edges:n}={})=>{const{edges:s,getNodes:a}=e(),i=r||a(),o=n||s,l=i.map(d=>(d.selected=!1,Od(d.id,!1))),u=o.map(d=>Od(d.id,!1));Cy({changedNodes:l,changedEdges:u,get:e,set:t})},setMinZoom:r=>{const{d3Zoom:n,maxZoom:s}=e();n==null||n.scaleExtent([r,s]),t({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:n,minZoom:s}=e();n==null||n.scaleExtent([s,r]),t({maxZoom:r})},setTranslateExtent:r=>{var n;(n=e().d3Zoom)==null||n.translateExtent(r),t({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:n}=e(),a=n().filter(o=>o.selected).map(o=>Od(o.id,!1)),i=r.filter(o=>o.selected).map(o=>Od(o.id,!1));Cy({changedNodes:a,changedEdges:i,get:e,set:t})},setNodeExtent:r=>{const{nodeInternals:n}=e();n.forEach(s=>{s.positionAbsolute=WT(s.position,r)}),t({nodeExtent:r,nodeInternals:new Map(n)})},panBy:r=>{const{transform:n,width:s,height:a,d3Zoom:i,d3Selection:o,translateExtent:l}=e();if(!i||!o||!r.x&&!r.y)return!1;const u=cf.translate(n[0]+r.x,n[1]+r.y).scale(n[2]),d=[[0,0],[s,a]],h=i==null?void 0:i.constrain()(u,d,l);return i.transform(o,h),n[0]!==h.x||n[1]!==h.y||n[2]!==h.k},cancelConnection:()=>t({connectionNodeId:Rd.connectionNodeId,connectionHandleId:Rd.connectionHandleId,connectionHandleType:Rd.connectionHandleType,connectionStatus:Rd.connectionStatus,connectionStartHandle:Rd.connectionStartHandle,connectionEndHandle:Rd.connectionEndHandle}),reset:()=>t({...Rd})}),Object.is),aN=({children:t})=>{const e=ee.useRef(null);return e.current||(e.current=HBe()),At.createElement(oNe,{value:e.current},t)};aN.displayName="ReactFlowProvider";const _H=({children:t})=>ee.useContext(_b)?At.createElement(At.Fragment,null,t):At.createElement(aN,null,t);_H.displayName="ReactFlowWrapper";const VBe={input:nH,default:x5,output:aH,group:nN},GBe={default:cw,straight:ZT,step:JT,smoothstep:Sb,simplebezier:XT},zBe=[0,0],qBe=[15,15],KBe={x:0,y:0,zoom:1},$Be={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},SH=ee.forwardRef(({nodes:t,edges:e,defaultNodes:r,defaultEdges:n,className:s,nodeTypes:a=VBe,edgeTypes:i=GBe,onNodeClick:o,onEdgeClick:l,onInit:u,onMove:d,onMoveStart:h,onMoveEnd:m,onConnect:g,onConnectStart:b,onConnectEnd:y,onClickConnectStart:_,onClickConnectEnd:N,onNodeMouseEnter:k,onNodeMouseMove:R,onNodeMouseLeave:M,onNodeContextMenu:j,onNodeDoubleClick:L,onNodeDragStart:C,onNodeDrag:E,onNodeDragStop:B,onNodesDelete:Q,onEdgesDelete:D,onSelectionChange:I,onSelectionDragStart:O,onSelectionDrag:G,onSelectionDragStop:se,onSelectionContextMenu:J,onSelectionStart:re,onSelectionEnd:q,connectionMode:z=Oh.Strict,connectionLineType:W=qd.Bezier,connectionLineStyle:ie,connectionLineComponent:P,connectionLineContainerStyle:Y,deleteKeyCode:Z="Backspace",selectionKeyCode:te="Shift",selectionOnDrag:ce=!1,selectionMode:Ee=Ox.Full,panActivationKeyCode:pe="Space",multiSelectionKeyCode:fe=ow()?"Meta":"Control",zoomActivationKeyCode:xe=ow()?"Meta":"Control",snapToGrid:de=!1,snapGrid:oe=qBe,onlyRenderVisibleElements:Le=!1,selectNodesOnDrag:et=!0,nodesDraggable:Te,nodesConnectable:be,nodesFocusable:je,nodeOrigin:qe=zBe,edgesFocusable:st,edgesUpdatable:mt,elementsSelectable:Et,defaultViewport:lt=KBe,minZoom:kt=.5,maxZoom:Gt=2,translateExtent:Xt=y5,preventScrolling:It=!0,nodeExtent:Dt,defaultMarkerColor:Wt="#b1b1b7",zoomOnScroll:Lt=!0,zoomOnPinch:Rt=!0,panOnScroll:xt=!1,panOnScrollSpeed:wr=.5,panOnScrollMode:Jt=mh.Free,zoomOnDoubleClick:dn=!0,panOnDrag:gr=!0,onPaneClick:Ur,onPaneMouseEnter:Dn,onPaneMouseMove:Fr,onPaneMouseLeave:da,onPaneScroll:nn,onPaneContextMenu:ns,children:ps,onEdgeContextMenu:Pr,onEdgeDoubleClick:nr,onEdgeMouseEnter:Gr,onEdgeMouseMove:fa,onEdgeMouseLeave:Wn,onEdgeUpdate:Es,onEdgeUpdateStart:Na,onEdgeUpdateEnd:zt,onReconnect:fn,onReconnectStart:sn,onReconnectEnd:Rn,reconnectRadius:jn=10,edgeUpdaterRadius:Yn=10,onNodesChange:he,onEdgesChange:ke,noDragClassName:_e="nodrag",noWheelClassName:Se="nowheel",noPanClassName:Ne="nopan",fitView:Ie=!1,fitViewOptions:Ke,connectOnClick:rt=!0,attributionPosition:He,proOptions:We,defaultEdgeOptions:Je,elevateNodesOnSelect:yt=!0,elevateEdgesOnSelect:Bt=!1,disableKeyboardA11y:Ot=!1,autoPanOnConnect:Nt=!0,autoPanOnNodeDrag:Ut=!0,connectionRadius:dr=20,isValidConnection:jr,onError:Or,style:zr,id:Rs,nodeDragThreshold:pi,...Ls},ha)=>{const $s=Rs||"1";return At.createElement("div",{...Ls,style:{...zr,...$Be},ref:ha,className:oo(["react-flow",s]),"data-testid":"rf__wrapper",id:Rs},At.createElement(_H,null,At.createElement(QBe,{onInit:u,onMove:d,onMoveStart:h,onMoveEnd:m,onNodeClick:o,onEdgeClick:l,onNodeMouseEnter:k,onNodeMouseMove:R,onNodeMouseLeave:M,onNodeContextMenu:j,onNodeDoubleClick:L,nodeTypes:a,edgeTypes:i,connectionLineType:W,connectionLineStyle:ie,connectionLineComponent:P,connectionLineContainerStyle:Y,selectionKeyCode:te,selectionOnDrag:ce,selectionMode:Ee,deleteKeyCode:Z,multiSelectionKeyCode:fe,panActivationKeyCode:pe,zoomActivationKeyCode:xe,onlyRenderVisibleElements:Le,selectNodesOnDrag:et,defaultViewport:lt,translateExtent:Xt,minZoom:kt,maxZoom:Gt,preventScrolling:It,zoomOnScroll:Lt,zoomOnPinch:Rt,zoomOnDoubleClick:dn,panOnScroll:xt,panOnScrollSpeed:wr,panOnScrollMode:Jt,panOnDrag:gr,onPaneClick:Ur,onPaneMouseEnter:Dn,onPaneMouseMove:Fr,onPaneMouseLeave:da,onPaneScroll:nn,onPaneContextMenu:ns,onSelectionContextMenu:J,onSelectionStart:re,onSelectionEnd:q,onEdgeContextMenu:Pr,onEdgeDoubleClick:nr,onEdgeMouseEnter:Gr,onEdgeMouseMove:fa,onEdgeMouseLeave:Wn,onReconnect:fn??Es,onReconnectStart:sn??Na,onReconnectEnd:Rn??zt,reconnectRadius:jn??Yn,defaultMarkerColor:Wt,noDragClassName:_e,noWheelClassName:Se,noPanClassName:Ne,elevateEdgesOnSelect:Bt,rfId:$s,disableKeyboardA11y:Ot,nodeOrigin:qe,nodeExtent:Dt}),At.createElement(PNe,{nodes:t,edges:e,defaultNodes:r,defaultEdges:n,onConnect:g,onConnectStart:b,onConnectEnd:y,onClickConnectStart:_,onClickConnectEnd:N,nodesDraggable:Te,nodesConnectable:be,nodesFocusable:je,edgesFocusable:st,edgesUpdatable:mt,elementsSelectable:Et,elevateNodesOnSelect:yt,minZoom:kt,maxZoom:Gt,nodeExtent:Dt,onNodesChange:he,onEdgesChange:ke,snapToGrid:de,snapGrid:oe,connectionMode:z,translateExtent:Xt,connectOnClick:rt,defaultEdgeOptions:Je,fitView:Ie,fitViewOptions:Ke,onNodesDelete:Q,onEdgesDelete:D,onNodeDragStart:C,onNodeDrag:E,onNodeDragStop:B,onSelectionDrag:G,onSelectionDragStart:O,onSelectionDragStop:se,noPanClassName:Ne,nodeOrigin:qe,rfId:$s,autoPanOnConnect:Nt,autoPanOnNodeDrag:Ut,onError:Or,connectionRadius:dr,isValidConnection:jr,nodeDragThreshold:pi}),At.createElement(UNe,{onSelectionChange:I}),ps,At.createElement(cNe,{proOptions:We,position:He}),At.createElement(VNe,{rfId:$s,disableKeyboardA11y:Ot})))});SH.displayName="ReactFlow";function TH(t){return e=>{const[r,n]=ee.useState(e),s=ee.useCallback(a=>n(i=>t(a,i)),[]);return[r,n,s]}}const WBe=TH(fH),YBe=TH(nBe);function XBe(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},At.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function JBe(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},At.createElement("path",{d:"M0 0h32v4.2H0z"}))}function ZBe(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},At.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function eke(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},At.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function tke(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},At.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Fg=({children:t,className:e,...r})=>At.createElement("button",{type:"button",className:oo(["react-flow__controls-button",e]),...r},t);Fg.displayName="ControlButton";const rke=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),NH=({style:t,showZoom:e=!0,showFitView:r=!0,showInteractive:n=!0,fitViewOptions:s,onZoomIn:a,onZoomOut:i,onFitView:o,onInteractiveChange:l,className:u,children:d,position:h="bottom-left"})=>{const m=Za(),[g,b]=ee.useState(!1),{isInteractive:y,minZoomReached:_,maxZoomReached:N}=Ds(rke,$i),{zoomIn:k,zoomOut:R,fitView:M}=Tb();if(ee.useEffect(()=>{b(!0)},[]),!g)return null;const j=()=>{k(),a==null||a()},L=()=>{R(),i==null||i()},C=()=>{M(s),o==null||o()},E=()=>{m.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),l==null||l(!y)};return At.createElement(PQ,{className:oo(["react-flow__controls",u]),position:h,style:t,"data-testid":"rf__controls"},e&&At.createElement(At.Fragment,null,At.createElement(Fg,{onClick:j,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:N},At.createElement(XBe,null)),At.createElement(Fg,{onClick:L,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:_},At.createElement(JBe,null))),r&&At.createElement(Fg,{className:"react-flow__controls-fitview",onClick:C,title:"fit view","aria-label":"fit view"},At.createElement(ZBe,null)),n&&At.createElement(Fg,{className:"react-flow__controls-interactive",onClick:E,title:"toggle interactivity","aria-label":"toggle interactivity"},y?At.createElement(tke,null):At.createElement(eke,null)),d)};NH.displayName="Controls";var nke=ee.memo(NH),Fc;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Fc||(Fc={}));function ske({color:t,dimensions:e,lineWidth:r}){return At.createElement("path",{stroke:t,strokeWidth:r,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function ake({color:t,radius:e}){return At.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const ike={[Fc.Dots]:"#91919a",[Fc.Lines]:"#eee",[Fc.Cross]:"#e2e2e2"},oke={[Fc.Dots]:1,[Fc.Lines]:1,[Fc.Cross]:6},lke=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function BH({id:t,variant:e=Fc.Dots,gap:r=20,size:n,lineWidth:s=1,offset:a=2,color:i,style:o,className:l}){const u=ee.useRef(null),{transform:d,patternId:h}=Ds(lke,$i),m=i||ike[e],g=n||oke[e],b=e===Fc.Dots,y=e===Fc.Cross,_=Array.isArray(r)?r:[r,r],N=[_[0]*d[2]||1,_[1]*d[2]||1],k=g*d[2],R=y?[k,k]:N,M=b?[k/a,k/a]:[R[0]/a,R[1]/a];return At.createElement("svg",{className:oo(["react-flow__background",l]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},At.createElement("pattern",{id:h+t,x:d[0]%N[0],y:d[1]%N[1],width:N[0],height:N[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${M[0]},-${M[1]})`},b?At.createElement(ake,{color:m,radius:k/a}):At.createElement(ske,{dimensions:R,color:m,lineWidth:s})),At.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${h+t})`}))}BH.displayName="Background";var cke=ee.memo(BH);function uke(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const r=document.implementation.createHTMLDocument(),n=r.createElement("base"),s=r.createElement("a");return r.head.appendChild(n),r.body.appendChild(s),e&&(n.href=e),s.href=t,s.href}const Ake=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function Af(t){const e=[];for(let r=0,n=t.length;r<n;r++)e.push(t[r]);return e}let K0=null;function kH(t={}){return K0||(t.includeStyleProperties?(K0=t.includeStyleProperties,K0):(K0=Af(window.getComputedStyle(document.documentElement)),K0))}function Aw(t,e){const n=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return n?parseFloat(n.replace("px","")):0}function dke(t){const e=Aw(t,"border-left-width"),r=Aw(t,"border-right-width");return t.clientWidth+e+r}function fke(t){const e=Aw(t,"border-top-width"),r=Aw(t,"border-bottom-width");return t.clientHeight+e+r}function IH(t,e={}){const r=e.width||dke(t),n=e.height||fke(t);return{width:r,height:n}}function hke(){let t,e;try{e=process}catch{}const r=e&&e.env?e.env.devicePixelRatio:null;return r&&(t=parseInt(r,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const Xo=16384;function mke(t){(t.width>Xo||t.height>Xo)&&(t.width>Xo&&t.height>Xo?t.width>t.height?(t.height*=Xo/t.width,t.width=Xo):(t.width*=Xo/t.height,t.height=Xo):t.width>Xo?(t.height*=Xo/t.width,t.width=Xo):(t.width*=Xo/t.height,t.height=Xo))}function dw(t){return new Promise((e,r)=>{const n=new Image;n.onload=()=>{n.decode().then(()=>{requestAnimationFrame(()=>e(n))})},n.onerror=r,n.crossOrigin="anonymous",n.decoding="async",n.src=t})}async function pke(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function gke(t,e,r){const n="http://www.w3.org/2000/svg",s=document.createElementNS(n,"svg"),a=document.createElementNS(n,"foreignObject");return s.setAttribute("width",`${e}`),s.setAttribute("height",`${r}`),s.setAttribute("viewBox",`0 0 ${e} ${r}`),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("externalResourcesRequired","true"),s.appendChild(a),a.appendChild(t),pke(s)}const Io=(t,e)=>{if(t instanceof e)return!0;const r=Object.getPrototypeOf(t);return r===null?!1:r.constructor.name===e.name||Io(r,e)};function xke(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function vke(t,e){return kH(e).map(r=>{const n=t.getPropertyValue(r),s=t.getPropertyPriority(r);return`${r}: ${n}${s?" !important":""};`}).join(" ")}function yke(t,e,r,n){const s=`.${t}:${e}`,a=r.cssText?xke(r):vke(r,n);return document.createTextNode(`${s}{${a}}`)}function FL(t,e,r,n){const s=window.getComputedStyle(t,r),a=s.getPropertyValue("content");if(a===""||a==="none")return;const i=Ake();try{e.className=`${e.className} ${i}`}catch{return}const o=document.createElement("style");o.appendChild(yke(i,r,s,n)),e.appendChild(o)}function wke(t,e,r){FL(t,e,":before",r),FL(t,e,":after",r)}const DL="application/font-woff",RL="image/jpeg",bke={woff:DL,woff2:DL,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:RL,jpeg:RL,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Cke(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function iN(t){const e=Cke(t).toLowerCase();return bke[e]||""}function Eke(t){return t.split(/,/)[1]}function w5(t){return t.search(/^(data:)/)!==-1}function _ke(t,e){return`data:${e};base64,${t}`}async function FH(t,e,r){const n=await fetch(t,e);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const s=await n.blob();return new Promise((a,i)=>{const o=new FileReader;o.onerror=i,o.onloadend=()=>{try{a(r({res:n,result:o.result}))}catch(l){i(l)}},o.readAsDataURL(s)})}const b_={};function Ske(t,e,r){let n=t.replace(/\?.*/,"");return r&&(n=t),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),e?`[${e}]${n}`:n}async function oN(t,e,r){const n=Ske(t,e,r.includeQueryParams);if(b_[n]!=null)return b_[n];r.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let s;try{const a=await FH(t,r.fetchRequestInit,({res:i,result:o})=>(e||(e=i.headers.get("Content-Type")||""),Eke(o)));s=_ke(a,e)}catch(a){s=r.imagePlaceholder||"";let i=`Failed to fetch resource: ${t}`;a&&(i=typeof a=="string"?a:a.message),i&&console.warn(i)}return b_[n]=s,s}async function Tke(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):dw(e)}async function Nke(t,e){if(t.currentSrc){const a=document.createElement("canvas"),i=a.getContext("2d");a.width=t.clientWidth,a.height=t.clientHeight,i==null||i.drawImage(t,0,0,a.width,a.height);const o=a.toDataURL();return dw(o)}const r=t.poster,n=iN(r),s=await oN(r,n,e);return dw(s)}async function Bke(t,e){var r;try{if(!((r=t==null?void 0:t.contentDocument)===null||r===void 0)&&r.body)return await Nb(t.contentDocument.body,e,!0)}catch{}return t.cloneNode(!1)}async function kke(t,e){return Io(t,HTMLCanvasElement)?Tke(t):Io(t,HTMLVideoElement)?Nke(t,e):Io(t,HTMLIFrameElement)?Bke(t,e):t.cloneNode(DH(t))}const Ike=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT",DH=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SVG";async function Fke(t,e,r){var n,s;if(DH(e))return e;let a=[];return Ike(t)&&t.assignedNodes?a=Af(t.assignedNodes()):Io(t,HTMLIFrameElement)&&(!((n=t.contentDocument)===null||n===void 0)&&n.body)?a=Af(t.contentDocument.body.childNodes):a=Af(((s=t.shadowRoot)!==null&&s!==void 0?s:t).childNodes),a.length===0||Io(t,HTMLVideoElement)||await a.reduce((i,o)=>i.then(()=>Nb(o,r)).then(l=>{l&&e.appendChild(l)}),Promise.resolve()),e}function Dke(t,e,r){const n=e.style;if(!n)return;const s=window.getComputedStyle(t);s.cssText?(n.cssText=s.cssText,n.transformOrigin=s.transformOrigin):kH(r).forEach(a=>{let i=s.getPropertyValue(a);a==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),Io(t,HTMLIFrameElement)&&a==="display"&&i==="inline"&&(i="block"),a==="d"&&e.getAttribute("d")&&(i=`path(${e.getAttribute("d")})`),n.setProperty(a,i,s.getPropertyPriority(a))})}function Rke(t,e){Io(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),Io(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function Lke(t,e){if(Io(t,HTMLSelectElement)){const r=e,n=Array.from(r.children).find(s=>t.value===s.getAttribute("value"));n&&n.setAttribute("selected","")}}function Uke(t,e,r){return Io(e,Element)&&(Dke(t,e,r),wke(t,e,r),Rke(t,e),Lke(t,e)),e}async function Mke(t,e){const r=t.querySelectorAll?t.querySelectorAll("use"):[];if(r.length===0)return t;const n={};for(let a=0;a<r.length;a++){const o=r[a].getAttribute("xlink:href");if(o){const l=t.querySelector(o),u=document.querySelector(o);!l&&u&&!n[o]&&(n[o]=await Nb(u,e,!0))}}const s=Object.values(n);if(s.length){const a="http://www.w3.org/1999/xhtml",i=document.createElementNS(a,"svg");i.setAttribute("xmlns",a),i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.style.display="none";const o=document.createElementNS(a,"defs");i.appendChild(o);for(let l=0;l<s.length;l++)o.appendChild(s[l]);t.appendChild(i)}return t}async function Nb(t,e,r){return!r&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(n=>kke(n,e)).then(n=>Fke(t,n,e)).then(n=>Uke(t,n,e)).then(n=>Mke(n,e))}const RH=/url\((['"]?)([^'"]+?)\1\)/g,Pke=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,jke=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Oke(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function Qke(t){const e=[];return t.replace(RH,(r,n,s)=>(e.push(s),r)),e.filter(r=>!w5(r))}async function Hke(t,e,r,n,s){try{const a=r?uke(e,r):e,i=iN(e);let o;return s||(o=await oN(a,i,n)),t.replace(Oke(e),`$1${o}$3`)}catch{}return t}function Vke(t,{preferredFontFormat:e}){return e?t.replace(jke,r=>{for(;;){const[n,,s]=Pke.exec(r)||[];if(!s)return"";if(s===e)return`src: ${n};`}}):t}function LH(t){return t.search(RH)!==-1}async function UH(t,e,r){if(!LH(t))return t;const n=Vke(t,r);return Qke(n).reduce((a,i)=>a.then(o=>Hke(o,i,e,r)),Promise.resolve(n))}async function $0(t,e,r){var n;const s=(n=e.style)===null||n===void 0?void 0:n.getPropertyValue(t);if(s){const a=await UH(s,null,r);return e.style.setProperty(t,a,e.style.getPropertyPriority(t)),!0}return!1}async function Gke(t,e){await $0("background",t,e)||await $0("background-image",t,e),await $0("mask",t,e)||await $0("-webkit-mask",t,e)||await $0("mask-image",t,e)||await $0("-webkit-mask-image",t,e)}async function zke(t,e){const r=Io(t,HTMLImageElement);if(!(r&&!w5(t.src))&&!(Io(t,SVGImageElement)&&!w5(t.href.baseVal)))return;const n=r?t.src:t.href.baseVal,s=await oN(n,iN(n),e);await new Promise((a,i)=>{t.onload=a,t.onerror=e.onImageErrorHandler?(...l)=>{try{a(e.onImageErrorHandler(...l))}catch(u){i(u)}}:i;const o=t;o.decode&&(o.decode=a),o.loading==="lazy"&&(o.loading="eager"),r?(t.srcset="",t.src=s):t.href.baseVal=s})}async function qke(t,e){const n=Af(t.childNodes).map(s=>MH(s,e));await Promise.all(n).then(()=>t)}async function MH(t,e){Io(t,Element)&&(await Gke(t,e),await zke(t,e),await qke(t,e))}function Kke(t,e){const{style:r}=t;e.backgroundColor&&(r.backgroundColor=e.backgroundColor),e.width&&(r.width=`${e.width}px`),e.height&&(r.height=`${e.height}px`);const n=e.style;return n!=null&&Object.keys(n).forEach(s=>{r[s]=n[s]}),t}const LL={};async function UL(t){let e=LL[t];if(e!=null)return e;const n=await(await fetch(t)).text();return e={url:t,cssText:n},LL[t]=e,e}async function ML(t,e){let r=t.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,a=(r.match(/url\([^)]+\)/g)||[]).map(async i=>{let o=i.replace(n,"$1");return o.startsWith("https://")||(o=new URL(o,t.url).href),FH(o,e.fetchRequestInit,({result:l})=>(r=r.replace(i,`url(${l})`),[i,l]))});return Promise.all(a).then(()=>r)}function PL(t){if(t==null)return[];const e=[],r=/(\/\*[\s\S]*?\*\/)/gi;let n=t.replace(r,"");const s=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=s.exec(n);if(l===null)break;e.push(l[0])}n=n.replace(s,"");const a=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(i,"gi");for(;;){let l=a.exec(n);if(l===null){if(l=o.exec(n),l===null)break;a.lastIndex=o.lastIndex}else o.lastIndex=a.lastIndex;e.push(l[0])}return e}async function $ke(t,e){const r=[],n=[];return t.forEach(s=>{if("cssRules"in s)try{Af(s.cssRules||[]).forEach((a,i)=>{if(a.type===CSSRule.IMPORT_RULE){let o=i+1;const l=a.href,u=UL(l).then(d=>ML(d,e)).then(d=>PL(d).forEach(h=>{try{s.insertRule(h,h.startsWith("@import")?o+=1:s.cssRules.length)}catch(m){console.error("Error inserting rule from remote css",{rule:h,error:m})}})).catch(d=>{console.error("Error loading remote css",d.toString())});n.push(u)}})}catch(a){const i=t.find(o=>o.href==null)||document.styleSheets[0];s.href!=null&&n.push(UL(s.href).then(o=>ML(o,e)).then(o=>PL(o).forEach(l=>{i.insertRule(l,i.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",a)}}),Promise.all(n).then(()=>(t.forEach(s=>{if("cssRules"in s)try{Af(s.cssRules||[]).forEach(a=>{r.push(a)})}catch(a){console.error(`Error while reading CSS rules from ${s.href}`,a)}}),r))}function Wke(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>LH(e.style.getPropertyValue("src")))}async function Yke(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=Af(t.ownerDocument.styleSheets),n=await $ke(r,e);return Wke(n)}function PH(t){return t.trim().replace(/["']/g,"")}function Xke(t){const e=new Set;function r(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(a=>{e.add(PH(a))}),Array.from(n.children).forEach(a=>{a instanceof HTMLElement&&r(a)})}return r(t),e}async function Jke(t,e){const r=await Yke(t,e),n=Xke(t);return(await Promise.all(r.filter(a=>n.has(PH(a.style.fontFamily))).map(a=>{const i=a.parentStyleSheet?a.parentStyleSheet.href:null;return UH(a.cssText,i,e)}))).join(`
`)}async function Zke(t,e){const r=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await Jke(t,e);if(r){const n=document.createElement("style"),s=document.createTextNode(r);n.appendChild(s),t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)}}async function e3e(t,e={}){const{width:r,height:n}=IH(t,e),s=await Nb(t,e,!0);return await Zke(s,e),await MH(s,e),Kke(s,e),await gke(s,r,n)}async function t3e(t,e={}){const{width:r,height:n}=IH(t,e),s=await e3e(t,e),a=await dw(s),i=document.createElement("canvas"),o=i.getContext("2d"),l=e.pixelRatio||hke(),u=e.canvasWidth||r,d=e.canvasHeight||n;return i.width=u*l,i.height=d*l,e.skipAutoScale||mke(i),i.style.width=`${u}`,i.style.height=`${d}`,e.backgroundColor&&(o.fillStyle=e.backgroundColor,o.fillRect(0,0,i.width,i.height)),o.drawImage(a,0,0,i.width,i.height),i}async function Bb(t,e={}){return(await t3e(t,e)).toDataURL()}const jH="recursos_crucigramas",kb="recursos_lineas_de_tiempo",Ib="recursos_mapas_mentales",OH="recursos_sopas_de_letras",Fb=t=>{var r,n,s,a;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion,createdAt:((a=(s=e.createdAt)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString())||e.createdAt}},r3e=t=>{const e=er(Ft(Tt,jH),gn("fechaCreacion","desc"));return Tr(e,r=>{const n=r.docs.map(s=>Fb(s));t(n)},r=>{console.error("Error al suscribirse a los crucigramas:",r),t([])})},n3e=async(t,e)=>{try{const r={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,fechaCreacion:cr.fromDate(new Date)};return(await Cs(Ft(Tt,jH),r)).id}catch(r){throw console.error("Error al guardar el crucigrama:",r),new Error("No se pudo guardar el crucigrama.")}},s3e=t=>{const e=er(Ft(Tt,kb),gn("createdAt","desc"));return Tr(e,r=>{const n=r.docs.map(s=>Fb(s));t(n)},r=>{console.error("Error al suscribirse a las líneas de tiempo:",r),t([])})},a3e=async(t,e)=>{try{const{id:r,...n}=t,s=yr(Tt,kb,r);await Wi(s,{...n,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:cr.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar la línea de tiempo:",r),new Error("No se pudo guardar la línea de tiempo.")}},i3e=async(t,e)=>{try{const r={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:cr.fromDate(new Date)};return(await Cs(Ft(Tt,kb),r)).id}catch(r){throw console.error("Error al crear la línea de tiempo:",r),new Error("No se pudo crear la línea de tiempo.")}},o3e=async t=>{try{const e=yr(Tt,kb,t);await mi(e)}catch(e){throw console.error("Error al eliminar la línea de tiempo:",e),new Error("No se pudo eliminar la línea de tiempo.")}},l3e=t=>{const e=er(Ft(Tt,Ib),gn("createdAt","desc"));return Tr(e,r=>{const n=r.docs.map(s=>Fb(s));t(n)},r=>{console.error("Error al suscribirse a los mapas mentales:",r),t([])})},c3e=async(t,e)=>{try{const{id:r,...n}=t,s=yr(Tt,Ib,r);await Wi(s,{...n,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:cr.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar el mapa mental:",r),new Error("No se pudo guardar el mapa mental.")}},u3e=async(t,e)=>{try{const r={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:cr.fromDate(new Date)};return(await Cs(Ft(Tt,Ib),r)).id}catch(r){throw console.error("Error al crear el mapa mental:",r),new Error("No se pudo crear el mapa mental.")}},A3e=async t=>{try{const e=yr(Tt,Ib,t);await mi(e)}catch(e){throw console.error("Error al eliminar el mapa mental:",e),new Error("No se pudo eliminar el mapa mental.")}},d3e=t=>{const e=er(Ft(Tt,OH),gn("createdAt","desc"));return Tr(e,r=>{const n=r.docs.map(s=>Fb(s));t(n)},r=>{console.error("Error al suscribirse a las sopas de letras:",r),t([])})},f3e=async(t,e)=>{try{const r={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:cr.fromDate(new Date)};return(await Cs(Ft(Tt,OH),r)).id}catch(r){throw console.error("Error al guardar la sopa de letras:",r),new Error("No se pudo guardar la sopa de letras.")}},h3e=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),m3e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1v4m0 0h-4m4-4l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5v-4m0 0h-4m4 4l-5-5"})}),p3e=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),g3e=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),b5=(t,e)=>!t.children||t.children.length===0?e:t.children.reduce((r,n)=>r+b5(n,e),0),C5=(t,e="tree")=>{const r=[],n=[];if(e==="tree"){const i=(o,l,u)=>{r.push({id:o.id,position:{x:l*250,y:u},data:{label:o.label},type:l===0?"input":"default",sourcePosition:lr.Right,targetPosition:lr.Left});const d=b5(o,80);let h=u-d/2;(o.children||[]).forEach(m=>{const g=b5(m,80),b=h+g/2;n.push({id:`e-${o.id}-${m.id}`,source:o.id,target:m.id,type:"smoothstep",animated:!0}),i(m,l+1,b),h+=g})};i(t,0,0)}else{r.push({id:t.id,position:{x:0,y:0},data:{label:t.label},type:"input"});const i=250,o=450;(t.children||[]).forEach((l,u)=>{const d=u/t.children.length*2*Math.PI;r.push({id:l.id,position:{x:i*Math.cos(d),y:i*Math.sin(d)},data:{label:l.label}}),n.push({id:`e-${t.id}-${l.id}`,source:t.id,target:l.id,type:"smoothstep"}),(l.children||[]).forEach((h,m)=>{const g=d+(m-(l.children.length-1)/2)*.2;r.push({id:h.id,position:{x:i*Math.cos(d)+o*.5*Math.cos(g),y:i*Math.sin(d)+o*.5*Math.sin(g)},data:{label:h.label}}),n.push({id:`e-${l.id}-${h.id}`,source:l.id,target:h.id,type:"smoothstep"})})})}return{nodes:r,edges:n}},QH=({node:t,onUpdate:e,onAddChild:r,onDelete:n,level:s=0})=>{const a=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],i=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return c.jsxs("div",{className:`pl-4 ${s>0?"border-l "+i[s-1%i.length]:""}`,children:[c.jsx("div",{className:`p-2 rounded-lg my-1 ${a[s%a.length]}`,children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"text",value:t.label,onChange:o=>e(t.id,o.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),c.jsx("button",{onClick:()=>r(t.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"➕"}),s>0&&c.jsx("button",{onClick:()=>n(t.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"🗑️"})]})}),(t.children||[]).map(o=>c.jsx(QH,{node:o,onUpdate:e,onAddChild:r,onDelete:n,level:s+1},o.id))]})},x3e=({mapData:t,onBack:e,onSave:r})=>{const[n,s]=ee.useState(t.treeData),[a,i]=ee.useState("tree"),[o,l]=ee.useState(!1),[u,d,h]=WBe([]),[m,g,b]=YBe([]),{fitView:y}=Tb();ee.useEffect(()=>{const{nodes:j,edges:L}=C5(n,a);d(j),g(L),setTimeout(()=>y({duration:300}),50)},[n,a,d,g,y]);const _=(j,L)=>{const C=JSON.parse(JSON.stringify(n)),E=B=>B.id===j?(B.label=L,!0):(B.children||[]).some(E);E(C),s(C)},N=j=>{const L=JSON.parse(JSON.stringify(n)),C=E=>E.id===j?(E.children||(E.children=[]),E.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):(E.children||[]).some(C);C(L),s(L)},k=j=>{const L=JSON.parse(JSON.stringify(n)),C=E=>{const B=(E.children||[]).findIndex(Q=>Q.id===j);return B!==-1?(E.children.splice(B,1),!0):(E.children||[]).some(C)};C(L),s(L)},R=()=>{l(!0);const{nodes:j,edges:L}=C5(n,a);r({...t,treeData:n,nodes:j,edges:L}),setTimeout(()=>l(!1),1e3)},M=async j=>{const L=document.querySelector(".react-flow");L&&Bb(L,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(C=>{{const E=document.createElement("a");E.download=`${t.tema}.png`,E.href=C,E.click()}}).catch(C=>console.error("oops, something went wrong!",C))};return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:t.tema}),c.jsx("button",{onClick:e,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:"← Volver a la lista"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:[c.jsxs(SH,{nodes:u,edges:m,onNodesChange:h,onEdgesChange:b,fitView:!0,children:[c.jsx(nke,{}),c.jsx(cke,{})]}),c.jsx("div",{className:"absolute top-4 right-4 flex gap-2",children:c.jsxs("button",{onClick:()=>{},className:"bg-white/80 backdrop-blur-sm dark:bg-slate-800/80 p-2 rounded-lg shadow border dark:border-slate-700 flex items-center gap-2 text-sm",children:[c.jsx(m3e,{})," Pantalla completa"]})})]}),c.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),c.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[c.jsxs("button",{onClick:()=>i("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${a==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[c.jsx(p3e,{})," Vista en árbol"]}),c.jsxs("button",{onClick:()=>i("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${a==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[c.jsx(g3e,{})," Vista con tema central"]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:c.jsx(QH,{node:n,onUpdate:_,onAddChild:N,onDelete:k})}),c.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>M(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),c.jsx("button",{onClick:R,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:o?"Guardado!":"Guardar"})]})]})]})]})},v3e=({onBack:t,currentUser:e})=>{const[r,n]=ee.useState("list"),[s,a]=ee.useState([]),[i,o]=ee.useState(null),[l,u]=ee.useState(!1),[d,h]=ee.useState(!0),[m,g]=ee.useState(""),[b,y]=ee.useState(""),[_,N]=ee.useState("");ee.useEffect(()=>{h(!0);const C=l3e(E=>{a(E),h(!1)});return()=>C()},[]);const k=async C=>{if(C.preventDefault(),!m.trim()){alert("El tema es obligatorio.");return}u(!0);const E=`Basado en el tema central "${m}", y considerando el contenido adicional "${_}", genera una estructura jerárquica detallada para un mapa mental con al menos 3 niveles de profundidad. La estructura debe ser un desglose lógico del tema en subtemas. La respuesta DEBE ser un único objeto JSON válido. Cada nodo en el JSON debe tener las propiedades "id" (un string único generado con crypto.randomUUID()), "label" (el texto del nodo), y "children" (un array de nodos hijos con la misma estructura).`;try{const se=(await(await new globalThis.GoogleGenerativeAI("").getGenerativeModel({model:"gemini-pro"}).generateContent(E)).response).text().replace(/^```json\s*|```\s*$/g,""),J=JSON.parse(se),{nodes:re,edges:q}=C5(J),z={tema:m,nivel:b,treeData:J,nodes:re,edges:q},W=await u3e(z,e);o({...z,id:W,createdAt:new Date().toISOString()}),n("editor")}catch(B){console.error("AI Generation Error:",B),alert("Hubo un error al generar el mapa mental con la IA. Inténtelo de nuevo.")}finally{u(!1)}},R=async C=>{try{await c3e(C,e)}catch(E){console.error("Error saving mind map:",E),alert("No se pudo guardar el mapa mental.")}},M=C=>{o(C),n("editor")},j=async C=>{if(window.confirm("¿Eliminar este mapa mental?"))try{await A3e(C)}catch(E){console.error("Error deleting mind map:",E),alert("No se pudo eliminar el mapa mental.")}},L=()=>{switch(r){case"editor":return i?c.jsx(aN,{children:c.jsx(x3e,{mapData:i,onBack:()=>n("list"),onSave:R})}):null;case"config":return c.jsxs("div",{className:"max-w-2xl mx-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),c.jsx("button",{onClick:()=>n("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver"})]}),c.jsxs("form",{onSubmit:k,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",id:"tema",value:m,onChange:C=>g(C.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),c.jsx("textarea",{id:"contenido",value:_,onChange:C=>N(C.target.value),rows:4,placeholder:"Añade más detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsx("div",{className:"flex justify-end pt-4",children:c.jsx("button",{type:"submit",disabled:l,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:l?c.jsx(h3e,{}):"Generar Mapa con IA"})})]})]});case"list":default:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),c.jsx("button",{onClick:()=>n("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.length>0?s.map(C=>c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[c.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:C.tema}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(C.createdAt).toLocaleDateString("es-CL")]}),c.jsxs("div",{className:"mt-4 flex gap-2",children:[c.jsx("button",{onClick:()=>M(C),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),c.jsx("button",{onClick:()=>j(C.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},C.id)):c.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningún mapa mental todavía."})})]})}};return d?c.jsx("div",{className:"text-center py-10",children:"Cargando mapas mentales..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("span",{className:"text-4xl",children:"🧠"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),c.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),L()]})},y3e=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),w3e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),b3e=({onBack:t,currentUser:e})=>{const[r,n]=ee.useState([]),[s,a]=ee.useState("Media"),[i,o]=ee.useState(10),[l,u]=ee.useState(!1),[d,h]=ee.useState(Array(10).fill("")),[m,g]=ee.useState(""),[b,y]=ee.useState(null),[_,N]=ee.useState({ai:!1,puzzle:!1,data:!0}),k=ee.useRef(null);ee.useEffect(()=>{N(D=>({...D,data:!0}));const Q=d3e(D=>{n(D),N(I=>({...I,data:!1}))});return()=>Q()},[]),ee.useEffect(()=>{h(Q=>{const D=Array(i).fill("");for(let I=0;I<Math.min(Q.length,i);I++)D[I]=Q[I];return D})},[i]);const R=(Q,D)=>{const I=[...d];I[Q]=D,h(I)},M=async()=>{if(m.trim()){N(Q=>({...Q,ai:!0}));try{const I=new globalThis.GoogleGenerativeAI("").getGenerativeModel({model:"gemini-pro"}),O=`Genera una lista de ${i} palabras clave, en español, relacionadas con el tema "${m}". Las palabras no deben contener espacios ni caracteres especiales.`,re=(await(await I.generateContent(O)).response).text().replace(/^```json\s*|```\s*$/g,""),W=[...JSON.parse(re).palabras.map(ie=>ie.toUpperCase().replace(/\s/g,"")).slice(0,i)];for(;W.length<i;)W.push("");h(W)}catch(Q){console.error("Error generating words with AI:",Q),alert("No se pudieron generar las palabras. Inténtelo de nuevo.")}finally{N(Q=>({...Q,ai:!1}))}}},j=(Q,D,I,O,G,se)=>{for(let J=0;J<Q.length;J++){const re=I+J*G.y,q=O+J*G.x;if(re<0||re>=se||q<0||q>=se||D[re][q]&&D[re][q]!==Q[J])return!1}return!0},L=(Q,D,I,O,G)=>{for(let se=0;se<Q.length;se++)D[I+se*G.y][O+se*G.x]=Q[se]},C=async()=>{N(re=>({...re,puzzle:!0})),y(null),await new Promise(re=>setTimeout(re,100));const Q=d.map(re=>re.toUpperCase().replace(/[^A-ZÑ]/g,"")).filter(Boolean);if(Q.length===0){alert("Por favor, ingrese al menos una palabra válida."),N(re=>({...re,puzzle:!1}));return}const D=Math.max(...Q.map(re=>re.length));let I=Math.max(D,Q.length)+2;s==="Media"&&(I+=3),s==="Difícil"&&(I+=5),I=Math.min(Math.max(I,10),25);const O=Array(I).fill(null).map(()=>Array(I).fill(null)),G=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];s!=="Fácil"&&G.push({x:1,y:-1}),s==="Difícil"&&G.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const re of Q.sort((q,z)=>z.length-q.length)){let q=!1;for(let z=0;z<100;z++){const W=G[Math.floor(Math.random()*G.length)],ie=Math.floor(Math.random()*I),P=Math.floor(Math.random()*I);if(j(re,O,ie,P,W,I)){L(re,O,ie,P,W),q=!0;break}}q||console.warn(`No se pudo colocar la palabra: ${re}`)}const se=O.map(re=>re.map(q=>q||"ABCDEFGHIJKLMNOPQRSTUVWXYZÑ"[Math.floor(Math.random()*27)])),J={tema:m,grid:se,words:Q.sort()};try{const re=await f3e(J,e);y({...J,id:re,createdAt:new Date().toISOString()})}catch(re){console.error("Error saving puzzle:",re),alert("No se pudo guardar la sopa de letras.")}finally{N(re=>({...re,puzzle:!1}))}},E=()=>{k.current&&Bb(k.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(Q=>{const D=document.createElement("a");D.download="sopa-de-letras.png",D.href=Q,D.click()}).catch(Q=>{console.error("oops, something went wrong!",Q),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})},B=()=>b?c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{ref:k,className:"p-6 bg-white",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[c.jsx("div",{className:"md:col-span-2",children:c.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${b.grid.length}, minmax(0, 1fr))`},children:b.grid.flat().map((Q,D)=>c.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:Q},D))})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),c.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:b.words.map(Q=>c.jsx("li",{children:Q},Q))})]})]})}),c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>y(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),c.jsx("button",{onClick:E,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]}):null;return _.data?c.jsx("div",{className:"text-center py-10",children:"Cargando..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-4xl",children:"🅰️"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),c.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),!b&&c.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),c.jsxs("select",{value:s,onChange:Q=>a(Q.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{children:"Fácil"}),c.jsx("option",{children:"Media"}),c.jsx("option",{children:"Difícil"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(Q=>c.jsx("button",{onClick:()=>{o(Q),u(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!l&&i===Q?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:Q},Q)),c.jsx("button",{onClick:()=>u(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${l?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),l&&c.jsx("input",{type:"number",value:i,onChange:Q=>o(parseInt(Q.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{id:"ai-theme",type:"text",value:m,onChange:Q=>g(Q.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:M,disabled:_.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:_.ai?c.jsx(y3e,{}):c.jsxs(c.Fragment,{children:[c.jsx(w3e,{}),c.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:d.map((Q,D)=>c.jsx("input",{type:"text",value:Q,onChange:I=>R(D,I.target.value),placeholder:`Palabra ${D+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},D))})]}),c.jsx("div",{className:"text-right pt-4",children:c.jsx("button",{onClick:C,disabled:_.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:_.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),b&&B()]})},C3e=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),E3e=({timeline:t,onSave:e,onBack:r})=>{const[n,s]=ee.useState(t),a=ee.useRef(null),i=(d,h,m)=>{s(g=>({...g,events:g.events.map(b=>b.id===d?{...b,[h]:m}:b)}))},o=()=>{const d={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:"🗓️"},h=[...n.events,d].sort((m,g)=>parseInt(m.date)-parseInt(g.date));s(m=>({...m,events:h}))},l=d=>{s(h=>({...h,events:h.events.filter(m=>m.id!==d)}))},u=()=>{a.current&&Bb(a.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(d=>{const h=document.createElement("a");h.download=`linea-tiempo-${n.tema.replace(/\s+/g,"_")}.png`,h.href=d,h.click()}).catch(d=>{console.error("Error al generar la imagen:",d),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:n.tema}),c.jsx("button",{onClick:r,className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver a la lista"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:c.jsxs("div",{ref:a,className:"relative p-10",children:[c.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),c.jsx("div",{className:"relative",children:n.events.sort((d,h)=>parseInt(d.date)-parseInt(h.date)).map((d,h)=>{const m=h%2===0;return c.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[c.jsx("div",{className:"w-1/2",children:m&&c.jsx("div",{className:"text-right pr-8",children:c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[c.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:d.icon}),c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:d.date}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:d.description})]})})}),c.jsx("div",{className:"z-10 flex-shrink-0",children:c.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),c.jsx("div",{className:"w-1/2",children:!m&&c.jsx("div",{className:"text-left pl-8",children:c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[c.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:d.icon}),c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:d.date}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:d.description})]})})})]},d.id)})})]})}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),c.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:n.events.map(d=>c.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[c.jsx("input",{type:"text",value:d.date,onChange:h=>i(d.id,"date",h.target.value),placeholder:"Año/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),c.jsx("textarea",{value:d.description,onChange:h=>i(d.id,"description",h.target.value),placeholder:"Descripción",rows:2,className:"w-full bg-transparent text-sm dark:text-slate-300"}),c.jsx("button",{onClick:()=>l(d.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},d.id))}),c.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[c.jsx("button",{onClick:o,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Añadir Hito"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:u,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),c.jsx("button",{onClick:()=>e(n),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},_3e=({onBack:t,currentUser:e})=>{const[r,n]=ee.useState("list"),[s,a]=ee.useState([]),[i,o]=ee.useState(null),[l,u]=ee.useState(!1),[d,h]=ee.useState(!0),[m,g]=ee.useState(""),[b,y]=ee.useState(""),[_,N]=ee.useState("");ee.useEffect(()=>{h(!0);const j=s3e(L=>{a(L),h(!1)});return()=>j()},[]);const k=async j=>{if(j.preventDefault(),!m.trim()){alert("El tema es obligatorio.");return}u(!0);const L=b&&_?`entre ${b} y ${_}`:b?`a partir de ${b}`:_?`hasta ${_}`:"",C=`Genera una línea de tiempo sobre el tema "${m}" ${L}. Crea entre 5 y 10 hitos clave ordenados cronológicamente. Para cada hito, proporciona una fecha o año, una descripción breve y un emoji representativo.`;try{const G=(await(await new globalThis.GoogleGenerativeAI("").getGenerativeModel({model:"gemini-pro"}).generateContent(C)).response).text().replace(/^```json\s*|```\s*$/g,""),se=JSON.parse(G),J={tema:m,fechaInicio:b,fechaFin:_,events:se.events.map(q=>({...q,id:crypto.randomUUID()}))},re=await i3e(J,e);o({...J,id:re,createdAt:new Date().toISOString()}),n("editor")}catch(E){console.error("AI Generation Error:",E),alert("Hubo un error al generar la línea de tiempo. Inténtelo de nuevo.")}finally{u(!1)}},R=async j=>{try{await a3e(j,e),n("list"),o(null)}catch(L){console.error("Error saving timeline:",L),alert("No se pudo guardar la línea de tiempo.")}},M=async j=>{if(window.confirm("¿Eliminar esta línea de tiempo?"))try{await o3e(j)}catch(L){console.error("Error deleting timeline:",L),alert("No se pudo eliminar la línea de tiempo.")}};return r==="editor"&&i?c.jsx(E3e,{timeline:i,onSave:R,onBack:()=>n("list")}):d?c.jsx("div",{className:"text-center py-10",children:"Cargando líneas de tiempo..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-4xl",children:"🕒"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo"}),c.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Línea de Tiempo"}),c.jsxs("form",{onSubmit:k,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",id:"tema",value:m,onChange:j=>g(j.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),c.jsx("input",{type:"text",id:"fechaInicio",value:b,onChange:j=>y(j.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Término (Opcional)"}),c.jsx("input",{type:"text",id:"fechaFin",value:_,onChange:j=>N(j.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",disabled:l,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:l?c.jsx(C3e,{}):"Generar con IA"})})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo Guardadas"}),s.length>0?s.map(j=>c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:j.tema}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(j.createdAt).toLocaleDateString("es-CL")]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>{o(j),n("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),c.jsx("button",{onClick:()=>M(j.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},j.id)):c.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay líneas de tiempo guardadas."})]})]})},S3e=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),T3e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),N3e=({onBack:t,currentUser:e})=>{const[r,n]=ee.useState([]),[s,a]=ee.useState(10),[i,o]=ee.useState(!1),[l,u]=ee.useState(Array(10).fill("")),[d,h]=ee.useState(Array(10).fill("")),[m,g]=ee.useState(""),[b,y]=ee.useState(null),[_,N]=ee.useState(!1),[k,R]=ee.useState({ai:!1,puzzle:!1,data:!0}),M=ee.useRef(null);ee.useEffect(()=>{R(O=>({...O,data:!0}));const I=r3e(O=>{n(O),R(G=>({...G,data:!1}))});return()=>I()},[]),ee.useEffect(()=>{const I=s;u(O=>Array.from({length:I},(G,se)=>O[se]||"")),h(O=>Array.from({length:I},(G,se)=>O[se]||""))},[s]);const j=(I,O)=>{const G=[...l];G[I]=O,u(G)},L=(I,O)=>{const G=[...d];G[I]=O,h(G)},C=async()=>{if(m.trim()){R(I=>({...I,ai:!0}));try{const G=new globalThis.GoogleGenerativeAI("").getGenerativeModel({model:"gemini-pro"}),se=`Genera una lista de ${s} palabras y sus pistas correspondientes para un crucigrama, basado en el tema "${m}". Las palabras no deben contener espacios.`,q=(await(await G.generateContent(se)).response).text(),z=JSON.parse(q),W=z.items.map(P=>P.word.toUpperCase().replace(/\s/g,"")),ie=z.items.map(P=>P.clue);u(Array.from({length:s},(P,Y)=>W[Y]||"")),h(Array.from({length:s},(P,Y)=>ie[Y]||""))}catch(I){console.error("Error generating words/clues with AI:",I),alert("No se pudieron generar las palabras y pistas. Inténtelo de nuevo.")}finally{R(I=>({...I,ai:!1}))}}},E=ee.useCallback(()=>{try{const I=l.map((Te,be)=>({word:Te.toUpperCase().replace(/[^A-ZÑ]/g,""),clue:d[be]})).filter(Te=>Te.word.length>0);if(I.length===0)return alert("Por favor, ingrese al menos una palabra válida."),null;I.sort((Te,be)=>be.word.length-Te.word.length);const O=I[0].word.length,G=Math.max(O,I.length)*2;let se=Array.from({length:G},()=>Array(G).fill(null));const J=[],re=I.shift(),q=Math.floor(G/2),z=Math.floor((G-re.word.length)/2);for(let Te=0;Te<re.word.length;Te++)se[q][z+Te]=re.word[Te];J.push({word:re.word,clue:re.clue,direction:"across",row:q,col:z});for(const Te of I){let be={score:-1,row:-1,col:-1,direction:"across"};for(const je of J)for(let qe=0;qe<je.word.length;qe++)for(let st=0;st<Te.word.length;st++)if(je.word[qe]===Te.word[st]){let mt=0,Et,lt,kt;je.direction==="across"?(kt="down",Et=je.row-st,lt=je.col+qe):(kt="across",Et=je.row+qe,lt=je.col-st);let Gt=!0;for(let Xt=0;Xt<Te.word.length;Xt++){const It=Et+(kt==="down"?Xt:0),Dt=lt+(kt==="across"?Xt:0);if(It<0||It>=G||Dt<0||Dt>=G){Gt=!1;break}const Wt=se[It][Dt],Lt=It===je.row+(je.direction==="down"?qe:0)&&Dt===je.col+(je.direction==="across"?qe:0);if(Wt&&!Lt){Gt=!1;break}if(Wt&&Lt&&Wt!==Te.word[st]){Gt=!1;break}if(!Lt){if(kt==="across"&&(It>0&&se[It-1][Dt]||It<G-1&&se[It+1][Dt])){Gt=!1;break}if(kt==="down"&&(Dt>0&&se[It][Dt-1]||Dt<G-1&&se[It][Dt+1])){Gt=!1;break}}Wt&&mt++}Gt&&mt>be.score&&(be={score:mt,row:Et,col:lt,direction:kt})}if(be.score>-1){for(let je=0;je<Te.word.length;je++){const qe=be.row+(be.direction==="down"?je:0),st=be.col+(be.direction==="across"?je:0);se[qe][st]=Te.word[je]}J.push({word:Te.word,clue:Te.clue,direction:be.direction,row:be.row,col:be.col})}}let W=G,ie=-1,P=G,Y=-1;J.forEach(Te=>{W=Math.min(W,Te.row),ie=Math.max(ie,Te.row+(Te.direction==="down"?Te.word.length-1:0)),P=Math.min(P,Te.col),Y=Math.max(Y,Te.col+(Te.direction==="across"?Te.word.length-1:0))}),ie===-1&&(W=J[0].row,ie=J[0].row,P=J[0].col,Y=J[0].col+J[0].word.length-1);const Z=1,te=Math.max(0,W-Z),ce=Math.min(G,ie+1+Z),Ee=Math.max(0,P-Z),pe=Math.min(G,Y+1+Z),fe=se.slice(te,ce).map(Te=>Te.slice(Ee,pe)),xe=J.map(Te=>({...Te,row:Te.row-te,col:Te.col-Ee})).sort((Te,be)=>Te.row-be.row||Te.col-be.col);let de=1;const oe=[],Le=new Map;xe.forEach(Te=>{const be=`${Te.row},${Te.col}`;Le.has(be)||Le.set(be,de++),oe.push({...Te,number:Le.get(be)})});const et=fe.map(Te=>Te.map(be=>({char:be,number:null})));return oe.forEach(Te=>{const be=`${Te.row},${Te.col}`;et[Te.row]&&et[Te.row][Te.col]!==void 0&&(et[Te.row][Te.col].number=Le.get(be))}),{grid:et,clues:{across:oe.filter(Te=>Te.direction==="across").sort((Te,be)=>Te.number-be.number),down:oe.filter(Te=>Te.direction==="down").sort((Te,be)=>Te.number-be.number)}}}catch(I){return console.error("Error generating crossword grid:",I),alert("Ocurrió un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[l,d]),B=async()=>{R(O=>({...O,puzzle:!0})),y(null),await new Promise(O=>setTimeout(O,100));const I=E();if(I){const O={tema:m,grid:I.grid,clues:I.clues};try{const G=await n3e(O,e);y({...O,id:G,fechaCreacion:new Date().toISOString(),creadorId:e.id,creadorNombre:e.nombreCompleto})}catch(G){console.error("Error saving puzzle:",G),alert("No se pudo guardar el crucigrama en la base de datos.")}}R(O=>({...O,puzzle:!1}))},Q=()=>{M.current&&(N(!1),setTimeout(()=>{Bb(M.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(I=>{const O=document.createElement("a");O.download="crucigrama.png",O.href=I,O.click()}).catch(I=>console.error("Error generating image",I))},100))},D=()=>b?c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{ref:M,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsx("div",{children:c.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${b.grid[0].length}, 2rem)`},children:b.grid.flat().map((I,O)=>c.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:I.char?"white":"black"},children:[I.number&&c.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:I.number}),_&&I.char&&c.jsx("span",{children:I.char})]},O))})}),c.jsxs("div",{className:"text-sm",children:[c.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),c.jsx("ul",{className:"space-y-1",children:b.clues.across.map(I=>c.jsxs("li",{children:[c.jsxs("strong",{children:[I.number,"."]})," ",I.clue]},`${I.word}-${I.clue}`))}),c.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),c.jsx("ul",{className:"space-y-1",children:b.clues.down.map(I=>c.jsxs("li",{children:[c.jsxs("strong",{children:[I.number,"."]})," ",I.clue]},`${I.word}-${I.clue}`))})]})]})}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",checked:_,onChange:()=>N(!_),className:"h-5 w-5 rounded"}),c.jsx("span",{children:"Mostrar Solución"})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:()=>y(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),c.jsx("button",{onClick:Q,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):null;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-4xl",children:"✏️"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),c.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),b?D():c.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(I=>c.jsx("button",{onClick:()=>{a(I),o(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!i&&s===I?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:I},I)),c.jsx("button",{onClick:()=>o(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${i?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),i&&c.jsx("input",{type:"number",value:s,onChange:I=>a(parseInt(I.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{id:"ai-theme",type:"text",value:m,onChange:I=>g(I.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:C,disabled:k.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:k.ai?c.jsx(S3e,{}):c.jsxs(c.Fragment,{children:[c.jsx(T3e,{}),c.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),c.jsx("div",{className:"space-y-3",children:Array.from({length:s}).map((I,O)=>c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[c.jsx("input",{type:"text",value:l[O],onChange:G=>j(O,G.target.value),placeholder:`Palabra ${O+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{value:d[O],onChange:G=>L(O,G.target.value),placeholder:`Pista ${O+1}`,rows:1,className:"md:col-span-2 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]},O))}),c.jsx("div",{className:"text-right pt-4",children:c.jsx("button",{onClick:B,disabled:k.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:k.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},B3e=[{id:"sopaDeLetras",icon:"🅰️",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"🧠",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"✏️",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"🕒",nombre:"Líneas de Tiempo",descripcion:"Construye líneas de tiempo para comprender procesos, hechos históricos o secuencias."}],k3e=({recurso:t,onClick:e})=>c.jsxs("button",{onClick:e,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[c.jsx("div",{className:"text-6xl mb-4",children:t.icon}),c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:t.nombre}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:t.descripcion})]}),I3e=()=>{const[t,e]=ee.useState("menu"),r=()=>t==="mapasMentales"?c.jsx(v3e,{onBack:()=>e("menu")}):t==="sopaDeLetras"?c.jsx(b3e,{onBack:()=>e("menu")}):t==="lineasDeTiempo"?c.jsx(_3e,{onBack:()=>e("menu")}):t==="crucigramas"?c.jsx(N3e,{onBack:()=>e("menu")}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:B3e.map(n=>c.jsx(k3e,{recurso:n,onClick:()=>e(n.id)},n.id))})]});return c.jsx("div",{className:"animate-fade-in space-y-6",children:r()})},F3e="evaluaciones_formativas",D3e="calificaciones_formativas",HH="trabajos_grupales_formativos",VH=t=>{var r,n,s,a;const e=t.data();return{id:t.id,...e,fecha:((n=(r=e.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||e.fecha,fechaPresentacion:((a=(s=e.fechaPresentacion)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString().split("T")[0])||e.fechaPresentacion}},R3e=(t,e)=>{const r=er(Ft(Tt,F3e),Fn("curso","==",t));return Tr(r,n=>{e(n.docs.map(s=>VH(s)))},n=>{console.error("Error subscribing to student evaluations:",n),e([])})},L3e=t=>{const e=er(Ft(Tt,D3e));return Tr(e,r=>{const n={};r.forEach(s=>{n[s.id]=s.data()}),t(n)},r=>{console.error("Error subscribing to grades:",r),t({})})},U3e=(t,e)=>{const r=er(Ft(Tt,HH),Fn("curso","==",t));return Tr(r,n=>{e(n.docs.map(s=>VH(s)))},n=>{console.error("Error subscribing to group projects:",n),e([])})},M3e=async t=>{try{const{id:e,...r}=t,n=yr(Tt,HH,e);await Wi(n,r)}catch(e){throw console.error("Error updating group project:",e),new Error("Could not update group project.")}},P3e=({currentUser:t})=>{const[e,r]=ee.useState([]),[n,s]=ee.useState({}),[a,i]=ee.useState([]),[o,l]=ee.useState(!0),[u,d]=ee.useState(null),[h,m]=ee.useState(!1),[g,b]=ee.useState(null),y=ee.useRef(null);ee.useEffect(()=>{if(!t.curso){l(!1);return}l(!0);const M=R3e(t.curso,r),j=L3e(s),L=U3e(t.curso,C=>{i(C),l(!1)});return()=>{M(),j(),L()}},[t.curso]);const _=ee.useMemo(()=>{if(!t.curso)return[];const j=e.filter(L=>L.curso===t.curso).reduce((L,C)=>((L[C.asignatura]=L[C.asignatura]||[]).push(C),L),{});return Object.entries(j).map(([L,C])=>{let E=0,B=0;const Q=C.map(I=>{var se;const O=(se=n[I.id])==null?void 0:se[t.nombreCompleto];let G="No Trabajado";return O==="trabajado"?(E+=7,B++,G="Trabajado"):O==="no trabajado"&&(E+=2,B++,G="No Trabajado"),{id:I.id,nombreActividad:I.nombreActividad,fecha:I.fecha,estado:G}}).filter(I=>{var O;return(O=n[I.id])==null?void 0:O[t.nombreCompleto]}),D=B>0?(E/B).toFixed(1):"N/A";return{asignatura:L,promedio:D,actividades:Q.sort((I,O)=>new Date(O.fecha).getTime()-new Date(I.fecha).getTime())}}).filter(L=>L.actividades.length>0).sort((L,C)=>L.asignatura.localeCompare(C.asignatura))},[e,n,t]);ee.useEffect(()=>{if(_.reduce((B,Q)=>B+Q.actividades.length,0)===0){d(null);return}const j=_.reduce((B,Q)=>{const D=parseFloat(Q.promedio);return isNaN(D)?B:B+D},0),L=_.length>0?j/_.length:0,C=Nv.find(B=>L>=B.promedioMin&&L<=B.promedioMax)||null,E=Nv.filter(B=>L>=B.promedioMin);if(d({puntajeTotal:0,promedio:L,rangoActual:C,insigniasGanadas:E}),y.current!==null){const B=Nv.find(Q=>y.current>=Q.promedioMin&&y.current<=Q.promedioMax)||null;C&&(!B||C.nombre!==B.nombre)&&b(C)}y.current=L},[_]);const N=ee.useMemo(()=>t.curso?a.filter(M=>M.curso===t.curso).map(M=>{const j=M.grupos.find(L=>L.integrantes.some(C=>C.nombre===t.nombreCompleto));return j?{...M,miGrupo:j}:null}).filter(M=>M!==null).sort((M,j)=>new Date(j.fechaPresentacion).getTime()-new Date(M.fechaPresentacion).getTime()):[],[a,t]),k=async(M,j)=>{const L=a.find(E=>E.id===M);if(!L)return;const C={...L,grupos:L.grupos.map(E=>E.integrantes.some(Q=>Q.nombre===t.nombreCompleto)?{...E,integrantes:E.integrantes.map(Q=>Q.nombre===t.nombreCompleto?{...Q,rol:j||void 0}:Q)}:E)};try{await M3e(C)}catch(E){console.error("Error updating role:",E),alert("No se pudo actualizar el rol.")}},R=M=>{const j=parseFloat(M);return isNaN(j)?"bg-slate-400":j<4?"bg-red-500":j<5.5?"bg-yellow-500":"bg-green-500"};return o?c.jsx("div",{className:"text-center py-10",children:"Cargando tu rendimiento..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[g&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>b(null),children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:M=>M.stopPropagation(),children:[c.jsx("div",{className:"text-8xl animate-bounce",children:g.emoji}),c.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"¡Subiste de Rango!"}),c.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:g.nombre}),c.jsx("p",{className:"text-slate-600 mt-4",children:g.mensaje}),c.jsx("button",{onClick:()=>b(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"¡Genial!"})]})}),h&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>m(!1),children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:M=>M.stopPropagation(),children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),c.jsx("div",{className:"overflow-y-auto space-y-3",children:Nv.map(M=>{const j=u==null?void 0:u.insigniasGanadas.some(L=>L.nombre===M.nombre);return c.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${j?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[c.jsx("div",{className:"text-5xl",children:M.emoji}),c.jsxs("div",{children:[c.jsx("h3",{className:`font-bold ${j?"text-amber-700":"text-slate-600"}`,children:M.nombre}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",M.promedioMin," y ",M.promedioMax]})]})]},M.nombre)})})]})}),c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),c.jsx("p",{className:"text-slate-500 mb-6",children:"Aquí puedes ver un resumen de tu trabajo en clases por cada asignatura."}),u&&u.rangoActual&&c.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),c.jsx("h2",{className:"text-3xl font-bold",children:u.rangoActual.nombre}),c.jsx("button",{onClick:()=>m(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-7xl",children:u.rangoActual.emoji}),c.jsx("p",{className:"font-bold text-2xl mt-2",children:u.promedio.toFixed(1)}),c.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),_.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(M=>c.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800",children:M.asignatura}),c.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),c.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${R(M.promedio)}`,children:M.promedio})]}),c.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),M.actividades.map(j=>c.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-700",children:j.nombreActividad}),c.jsx("p",{className:"text-xs text-slate-500",children:new Date(j.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),c.jsx("span",{className:`font-semibold ${j.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:j.estado==="Trabajado"?"✅ Trabajado":"❌ No Trabajado"})]},j.id))]})]},M.asignatura))}):c.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[c.jsx("span",{className:"text-5xl",children:"📊"}),c.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Aún sin registros"}),c.jsx("p",{className:"text-slate-500 mt-2",children:"Todavía no tienes evaluaciones formativas registradas por tus profesores."})]})]}),N.length>0&&c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),c.jsx("div",{className:"space-y-4",children:N.map(M=>{const j=M.miGrupo.integrantes.filter(C=>C.nombre!==t.nombreCompleto&&C.rol).map(C=>C.rol),L=dM.filter(C=>!j.includes(C));return c.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[c.jsx("h3",{className:"font-bold text-slate-800",children:M.nombreActividad}),c.jsxs("p",{className:"text-sm text-slate-500",children:[M.asignatura," - Presentación: ",new Date(M.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),c.jsxs("div",{className:"mt-3 pt-3 border-t",children:[c.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",M.miGrupo.numero]}),c.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:M.miGrupo.integrantes.map(C=>c.jsxs("li",{className:"grid grid-cols-2 items-center",children:[c.jsx("span",{className:C.nombre===t.nombreCompleto?"font-bold":"",children:C.nombre}),C.nombre===t.nombreCompleto?c.jsxs("select",{value:C.rol||"",onChange:E=>k(M.id,E.target.value),className:"text-sm p-1 border rounded w-full",children:[c.jsx("option",{value:"",children:"-- Seleccionar rol --"}),C.rol&&!L.includes(C.rol)&&c.jsx("option",{value:C.rol,children:C.rol}),L.map(E=>c.jsx("option",{value:E,children:E},E))]}):c.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:C.rol||"Sin rol"})]},C.nombre))})]})]},M.id)})})]})]})},j3e="proyectos_interdisciplinarios",GH="entregas_interdisciplinarias",zH=t=>{var r,n,s,a;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion,fechaCompletado:((a=(s=e.fechaCompletado)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString())||e.fechaCompletado}},O3e=(t,e)=>{const r=er(Ft(Tt,j3e),Fn("cursos","array-contains",t));return Tr(r,n=>{const s=n.docs.map(a=>zH(a));e(s)},n=>{console.error("Error al suscribirse a los proyectos:",n),e([])})},Q3e=(t,e)=>{const r=er(Ft(Tt,GH),Fn("estudianteId","==",t));return Tr(r,n=>{const s=n.docs.map(a=>zH(a));e(s)},n=>{console.error("Error al suscribirse a las entregas:",n),e([])})},H3e=async t=>{try{const{id:e,...r}=t,n=yr(Tt,GH,e),s={...r,fechaCompletado:cr.fromDate(new Date(r.fechaCompletado||Date.now()))};await Wi(n,s,{merge:!0})}catch(e){throw console.error("Error al actualizar la entrega:",e),new Error("No se pudo guardar la entrega.")}},V3e=({currentUser:t})=>{const[e,r]=ee.useState([]),[n,s]=ee.useState([]),[a,i]=ee.useState(null),[o,l]=ee.useState(!0);ee.useEffect(()=>{if(!t.curso||!t.id){l(!1);return}l(!0);const h=O3e(t.curso,r),m=Q3e(t.id,g=>{s(g),l(!1)});return()=>{h(),m()}},[t.curso,t.id]);const u=async h=>{try{await H3e(h)}catch(m){console.error("Failed to update submission:",m),alert("Hubo un error al guardar tu entrega.")}},d=({plan:h,tarea:m})=>{const g=ee.useMemo(()=>{const j=n.find(L=>L.planificacionId===h.id&&L.tareaId===m.id);return j||{id:`${h.id}_${m.id}_${t.id}`,planificacionId:h.id,tareaId:m.id,estudianteId:t.id,estudianteNombre:t.nombreCompleto,completada:!1}},[h.id,m.id,n]),[b,y]=ee.useState(!1),[_,N]=ee.useState({observaciones:g.observacionesEstudiante||"",enlace:g.enlaceUrl||""}),k=j=>{var C;const L=(C=j.target.files)==null?void 0:C[0];L&&(alert(`Simulación: Archivo "${L.name}" listo para subir.`),u({...g,archivoAdjunto:{nombre:L.name,url:`simulated/path/${L.name}`},fechaCompletado:new Date().toISOString()}))},R=()=>{u({...g,observacionesEstudiante:_.observaciones,enlaceUrl:_.enlace,fechaCompletado:new Date().toISOString()})},M=()=>{u({...g,completada:!g.completada,fechaCompletado:new Date().toISOString()})};return c.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("input",{type:"checkbox",checked:g.completada,onChange:M,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("p",{className:`font-semibold ${g.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",m.numero,": ",m.instrucciones]}),c.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",m.fechaEntrega]}),m.recursoUrl&&c.jsx("a",{href:m.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),c.jsx("button",{onClick:()=>y(!b),className:"text-sm font-semibold",children:b?"Ocultar":"Entregar"})]}),b&&c.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[c.jsx("textarea",{value:_.observaciones,onChange:j=>N({..._,observaciones:j.target.value}),onBlur:R,placeholder:"Añadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),c.jsx("input",{type:"url",value:_.enlace,onChange:j=>N({..._,enlace:j.target.value}),onBlur:R,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),c.jsx("input",{type:"file",onChange:k,className:"text-sm"}),g.archivoAdjunto&&c.jsxs("p",{className:"text-xs text-green-600",children:["✓ Archivo subido: ",g.archivoAdjunto.nombre]})]}),g.feedbackProfesor&&c.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[c.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentación del profesor:"}),c.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:g.feedbackProfesor})]})]})};return o?c.jsx("div",{className:"text-center py-10",children:"Cargando tus proyectos..."}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),e.length>0?e.map(h=>{const m=h.tareas||[],b=n.filter(_=>_.planificacionId===h.id).filter(_=>_.completada).length,y=m.length>0?b/m.length*100:0;return c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[c.jsxs("button",{onClick:()=>i(a===h.id?null:h.id),className:"w-full text-left",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:h.nombreProyecto}),c.jsxs("div",{className:"mt-2 space-y-1",children:[c.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[c.jsx("span",{children:"Progreso"}),c.jsxs("span",{children:[Math.round(y),"%"]})]}),c.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:c.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${y}%`}})})]})]}),a===h.id&&c.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:m.length>0?m.map(_=>c.jsx(d,{plan:h,tarea:_},_.id)):c.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto aún no tiene tareas asignadas."})})]},h.id)}):c.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[c.jsx("span",{className:"text-5xl",children:"🎉"}),c.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"¡Todo al día!"}),c.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},G3e=({data:t})=>c.jsx("div",{className:"space-y-4",children:t.map((r,n)=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:r.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),c.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[r.value.toFixed(2)," / 4.00"]})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:c.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${r.value/4*100}%`}})})]},r.label+n))}),z3e=({currentUser:t})=>{const[e,r]=ee.useState([]),[n,s]=ee.useState(!1),[a,i]=ee.useState(null),[o,l]=ee.useState(null),[u,d]=ee.useState(jg),h=ee.useCallback(async()=>{s(!0);try{const _=(await x2e(t.nombreCompleto)).sort((N,k)=>new Date(k.fecha).getTime()-new Date(N.fecha).getTime());r(_),i(null)}catch(y){console.error("Error al cargar acompañamientos desde Firestore",y),i("No se pudieron cargar tus acompañamientos desde la nube.")}finally{s(!1)}},[t.nombreCompleto]),m=ee.useCallback(async()=>{try{const y=await v2e();y&&d(y)}catch(y){console.error("Error al cargar rúbrica personalizada",y)}},[]);ee.useEffect(()=>{h(),m()},[h,m]);const g=ee.useMemo(()=>{if(!o)return[];const y={};return u.forEach(_=>{y[_.domain]={total:0,count:0},_.criteria.forEach(N=>{const k=o.rubricaResultados[N.name];k&&(y[_.domain].total+=k,y[_.domain].count++)})}),Object.entries(y).map(([_,N])=>({label:_,value:N.count>0?N.total/N.count:0}))},[o,u]),b=y=>{const _=new or;_.setFont("helvetica","bold"),_.setFontSize(10),_.setTextColor(100),_.text("LICEO INDUSTRIAL DE RECOLETA",_.internal.pageSize.getWidth()/2,15,{align:"center"}),_.setFont("helvetica","bold"),_.setFontSize(16),_.setTextColor(40),_.text("Informe de Acompañamiento Docente",_.internal.pageSize.getWidth()/2,25,{align:"center"}),_.setFontSize(12),_.setFont("helvetica","normal"),al(_,{startY:35,body:[["Docente:",y.docente],["Fecha:",new Date(y.fecha).toLocaleDateString("es-CL")],["Asignatura:",y.asignatura],["Curso:",y.curso],["Bloques:",y.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let N=_.lastAutoTable.finalY+15;if(Object.keys(y.rubricaResultados).length>0){const M=[],j=["Débil","Incipiente","Satisfactorio","Avanzado"];u.forEach(L=>{M.push([{content:L.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),L.criteria.forEach(C=>{const E=y.rubricaResultados[C.name],B=E?j[E-1]:"No evaluado";M.push([C.name,B])})}),al(_,{startY:N,head:[["Indicador","Nivel de Logro"]],body:M,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),N=_.lastAutoTable.finalY+15}const k=(M,j)=>{if(!j)return;N>250&&(_.addPage(),N=20,_.setFont("helvetica","bold"),_.setFontSize(10),_.setTextColor(100),_.text("LICEO INDUSTRIAL DE RECOLETA",_.internal.pageSize.getWidth()/2,15,{align:"center"}),N=25),_.setFont("helvetica","bold"),_.setFontSize(14),_.setTextColor(40),_.text(M,14,N),N+=8,_.setFont("helvetica","normal"),_.setFontSize(11),_.setTextColor(60);const L=_.splitTextToSize(j.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);_.text(L,14,N),N+=L.length*5+10};k("Observaciones Generales",y.observacionesGenerales),k("Retroalimentación Consolidada",y.retroalimentacionConsolidada);const R=_.getNumberOfPages();for(let M=1;M<=R;M++)_.setPage(M),_.setFontSize(8),_.setTextColor(128),_.text(`Página ${M} de ${R}`,_.internal.pageSize.getWidth()/2,_.internal.pageSize.getHeight()-10,{align:"center"});_.save(`Acompanamiento_${t.nombreCompleto.replace(/\s/g,"_")}_${new Date(y.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return o?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{children:[c.jsx("button",{onClick:()=>l(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a mi historial"}),c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompañamiento"}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(o.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",o.curso," - ",o.asignatura]})]}),c.jsxs("button",{onClick:()=>b(o),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[c.jsx(AM,{})," Exportar PDF"]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-2 space-y-6",children:c.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[c.jsx("h3",{children:"Retroalimentación Consolidada (IA)"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx("p",{className:"whitespace-pre-wrap",children:o.retroalimentacionConsolidada||"No se ha generado retroalimentación."})}),c.jsx("h3",{children:"Observaciones Generales"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx("p",{className:"whitespace-pre-wrap",children:o.observacionesGenerales||"Sin observaciones."})})]})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeño por Dominio"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx(G3e,{data:g})})]})]})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompañamientos"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aquí encontrarás el historial de tus observaciones de clase y la retroalimentación asociada."}),n&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompañamientos desde la nube..."}),a&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),!n&&e.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompañamientos registrados en la nube."}),c.jsx("div",{className:"space-y-4",children:!n&&e.length>0?e.map(y=>c.jsx("button",{onClick:()=>l(y),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[y.curso," - ",y.asignatura]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(y.fecha).toLocaleDateString("es-CL"),y.bloques&&` | Bloques: ${y.bloques}`]}),Object.keys(y.rubricaResultados).length>0&&c.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(y.rubricaResultados).length," criterios"]})]}),c.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},y.id)):!n&&c.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("span",{className:"text-5xl",children:"👍"}),c.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Aún no tienes acompañamientos de clase registrados."})]})})]})},q3e=t=>{console.log("🔄 Iniciando suscripción a todas las planificaciones...");try{const e=Ft(Kr,"planificaciones"),r=er(e,gn("fechaCreacion","desc"));return Tr(r,s=>{const a=[];s.forEach(i=>{const o=i.data();a.push({id:i.id,...o})}),console.log("✅ Todas las planificaciones cargadas:",a.length),t(a)},s=>{throw console.error("❌ Error al cargar todas las planificaciones:",s),s})}catch(e){throw console.error("❌ Error al configurar suscripción a todas las planificaciones:",e),e}},K3e=(t,e)=>{if(console.log("🔄 Iniciando suscripción a planificaciones del usuario:",t),!t)throw console.error("❌ userId no proporcionado"),new Error("userId es requerido");try{const r=Ft(Kr,"planificaciones"),n=er(r,Fn("userId","==",t),gn("fechaCreacion","desc"));return Tr(n,a=>{const i=[];a.forEach(o=>{const l=o.data();i.push({id:o.id,...l})}),console.log("✅ Planificaciones del usuario cargadas:",i.length),e(i)},a=>{throw console.error("❌ Error al cargar planificaciones del usuario:",a),a})}catch(r){throw console.error("❌ Error al configurar suscripción a planificaciones del usuario:",r),r}},$3e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),W3e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Y3e=()=>c.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),X3e=({plan:t,onClose:e})=>{const r=s=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-lg",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",s.objetivosAprendizaje]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Indicadores de Evaluación:"})," ",s.indicadoresEvaluacion]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[c.jsx("strong",{children:"Contenidos Clave:"})," ",s.contenidos]})]}),c.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",s.cantidadClases,")"]}),c.jsx("div",{className:"space-y-3 max-h-[40vh] overflow-y-auto pr-2",children:s.detallesLeccion.map((a,i)=>c.jsxs("div",{className:"p-3 border dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",children:[c.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",i+1,": ",a.actividades]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[c.jsxs("span",{children:[c.jsx("strong",{children:"Objetivo:"})," ",a.objetivosAprendizaje]}),c.jsxs("span",{children:[c.jsx("strong",{children:"Contenidos:"})," ",a.contenidosConceptuales]}),c.jsxs("span",{children:[c.jsx("strong",{children:"Habilidad (Bloom):"})," ",a.habilidadesBloom]}),c.jsxs("span",{children:[c.jsx("strong",{children:"Perfil de Egreso:"})," ",a.perfilEgreso]}),c.jsxs("span",{className:"md:col-span-2",children:[c.jsx("strong",{children:"Interdisciplinariedad:"})," ",a.asignaturasInterdisciplinariedad]})]})]},i))})]}),n=s=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("p",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-lg",children:[c.jsx("strong",{children:"Contenidos:"})," ",s.contenidos]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:"Inicio"}),c.jsx("p",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600 whitespace-pre-wrap",children:s.momentosClase.inicio})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:"Desarrollo"}),c.jsx("p",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600 whitespace-pre-wrap",children:s.momentosClase.desarrollo})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:"Cierre"}),c.jsx("p",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600 whitespace-pre-wrap",children:s.momentosClase.cierre})]})]})]});return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:s=>s.stopPropagation(),children:[c.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:t.tipo==="Unidad"?t.nombreUnidad:t.nombreClase}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[t.asignatura," | ",t.nivel," | Autor: ",t.autor||"N/A"]})]}),c.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:c.jsx(W3e,{})})]}),c.jsx("main",{className:"p-4 flex-1 overflow-y-auto",children:t.tipo==="Unidad"?r(t):n(t)})]})})},J3e=t=>{const[e,r]=ee.useState([]),[n,s]=ee.useState(!0),[a,i]=ee.useState(null),o=ee.useMemo(()=>(t==null?void 0:t.profile)==="SUBDIRECCION",[t]);return ee.useEffect(()=>{if(!(t!=null&&t.email)&&!(t!=null&&t.id)){i("Usuario no autenticado"),s(!1);return}console.log("🔄 Configurando suscripción a planificaciones..."),console.log("🔍 Usuario actual:",{email:t.email,id:t.id,profile:t.profile,canViewAll:o});try{let l;if(o)console.log("👑 Cargando todas las planificaciones (vista admin)"),l=q3e(u=>{console.log("✅ Planificaciones admin cargadas:",u.length),r(u),s(!1),i(null)});else{const u=t.email||t.id||"";console.log("👤 Cargando planificaciones del usuario:",u),l=K3e(u,d=>{console.log("✅ Planificaciones del usuario cargadas:",d.length),r(d),s(!1),i(null)})}return l}catch(l){console.error("❌ Error al configurar suscripción:",l),i(l instanceof Error?l.message:"Error al conectar con la base de datos"),s(!1)}},[t,o]),{planificaciones:e,loading:n,error:a,canViewAllPlans:o}},Z3e=({currentUser:t})=>{console.log("🔍 SeguimientoCurricular - currentUser recibido:",t),console.log("🔍 currentUser.email:",t==null?void 0:t.email),console.log("🔍 currentUser.id:",t==null?void 0:t.id),console.log("🔍 currentUser.profile:",t==null?void 0:t.profile);const{planificaciones:e,loading:r,error:n,canViewAllPlans:s}=J3e(t),[a,i]=ee.useState("1º"),[o,l]=ee.useState(null),[u,d]=ee.useState(null),h=ee.useMemo(()=>{const y={"1º":"1º Medio","2º":"2º Medio","3º":"3º Medio","4º":"4º Medio"}[a];return e.filter(_=>_.nivel===y)},[e,a]),m=b=>{l(y=>y===b?null:b)},g=[{key:"1º",label:"1º Medio"},{key:"2º",label:"2º Medio"},{key:"3º",label:"3º Medio"},{key:"4º",label:"4º Medio"}];return!t||!t.email&&!t.id?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),c.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(t)]})]})}):r?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-4xl mx-auto",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Seguimiento Curricular"}),c.jsx("div",{className:"flex justify-center items-center py-12",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(Y3e,{}),c.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Cargando planificaciones..."})]})})]}):n?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-4xl mx-auto",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Seguimiento Curricular"}),c.jsx("div",{className:"flex justify-center items-center py-12",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-red-600 dark:text-red-400 mb-2",children:"Error al cargar las planificaciones"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:n})]})})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-4xl mx-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento Curricular"}),s&&c.jsx("div",{className:"text-sm text-amber-600 dark:text-amber-400 font-medium",children:"👑 Vista administrativa - Todas las planificaciones"})]}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:c.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:g.map(b=>c.jsx("button",{onClick:()=>i(b.key),className:`${a===b.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg transition-colors focus:outline-none`,children:b.label},b.key))})}),e.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"No hay planificaciones disponibles"}),c.jsx("p",{className:"text-sm text-slate-400 dark:text-slate-500 mt-2",children:s?"Ningún profesor ha creado planificaciones aún":"Crea planificaciones desde el módulo de Planificación"})]}):c.jsx("div",{className:"space-y-4",children:il.map(b=>{const y=h.filter(N=>N.asignatura===b);if(y.length===0)return null;const _=o===b;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[c.jsxs("button",{onClick:()=>m(b),className:"w-full flex justify-between items-center p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:b}),c.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 py-1 rounded-full text-xs font-medium",children:[y.length," planificación",y.length!==1?"es":""]})]}),c.jsx("span",{className:`transform transition-transform duration-200 ${_?"rotate-180":""}`,children:c.jsx($3e,{})})]}),_&&c.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 animate-fade-in-up",children:c.jsx("ul",{className:"space-y-3",children:y.map(N=>c.jsx("li",{children:c.jsx("button",{onClick:()=>d(N),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors group",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200 group-hover:text-amber-600 dark:group-hover:text-amber-400 transition-colors",children:N.tipo==="Unidad"?N.nombreUnidad:N.nombreClase}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:[c.jsx("span",{className:"font-medium",children:"Autor:"})," ",N.autor||"No especificado"]}),c.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["Creado: ",new Date(N.fechaCreacion).toLocaleDateString("es-CL")]})]}),c.jsx("div",{className:"ml-3",children:c.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${N.tipo==="Unidad"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"}`,children:N.tipo})})]})})},N.id))})})]},b)})})]}),u&&c.jsx(X3e,{plan:u,onClose:()=>d(null)})]})},lN="analisis",eIe=async()=>{try{const t=er(Ft(Kr,lN),gn("uploadDate","desc"));return(await ca(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener análisis:",t),new Error("No se pudieron cargar los análisis taxonómicos")}},tIe=async t=>{try{return{id:(await Cs(Ft(Kr,lN),{...t,uploadDate:t.uploadDate||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear análisis:",e),new Error("No se pudo crear el análisis taxonómico")}},rIe=async t=>{try{const e=yr(Kr,lN,t);await mi(e)}catch(e){throw console.error("Error al eliminar análisis:",e,"ID:",t),new Error("No se pudo eliminar el análisis taxonómico")}},jL=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],OL={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},nIe=()=>c.jsxs("svg",{className:"animate-spin h-5 w-5 text-slate-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),QL=({currentUser:t})=>{const[e,r]=ee.useState([]),[n,s]=ee.useState(!1),[a,i]=ee.useState(null),[o,l]=ee.useState(null),[u,d]=ee.useState(""),[h,m]=ee.useState(!1),[g,b]=ee.useState(null),[y,_]=ee.useState(null),N=ee.useCallback(async()=>{s(!0);try{const L=await eIe();r(L),i(null)}catch(L){console.error("Error al cargar análisis desde Firestore",L),i("No se pudieron cargar los análisis desde la nube.")}finally{s(!1)}},[]);ee.useEffect(()=>{N()},[N]);const k=async L=>{var E;const C=(E=L.target.files)==null?void 0:E[0];if(C){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(C.type)){i("Por favor, suba un archivo PDF o DOCX válido."),b(null),_(null),d("");return}b(C),d(C.name),i(null);const Q=new FileReader;Q.onloadend=()=>{const D=Q.result.split(",")[1];if(!D){i("No se pudo procesar el archivo. Puede que esté vacío o corrupto."),_(null);return}_({mimeType:C.type,data:D})},Q.onerror=()=>{i("Error al leer el archivo."),_(null)},Q.readAsDataURL(C)}},R=async()=>{if(!u.trim()||!y){i("Debe subir un documento PDF o DOCX y asignarle un nombre para analizar.");return}m(!0),i(null);const L=`
            Eres un experto en pedagogía y en la Taxonomía de Bloom. Analiza el siguiente documento de una evaluación educativa.
            Tu tarea es:
            1. Identificar cada pregunta o ítem de evaluación en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonomía de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados.
        `,C={type:pn.OBJECT,properties:{analysisResults:{type:pn.ARRAY,description:"Un array con cada pregunta identificada y su clasificación de Bloom.",items:{type:pn.OBJECT,properties:{question:{type:pn.STRING,description:"El texto exacto de la pregunta."},habilidadBloom:{type:pn.STRING,description:"El nivel de Bloom correspondiente.",enum:jL}},required:["question","habilidadBloom"]}},summary:{type:pn.OBJECT,description:"Un resumen con el conteo de preguntas por cada nivel de Bloom.",properties:{Recordar:{type:pn.INTEGER},Comprender:{type:pn.INTEGER},Aplicar:{type:pn.INTEGER},Analizar:{type:pn.INTEGER},Evaluar:{type:pn.INTEGER},Crear:{type:pn.INTEGER}}}},required:["analysisResults","summary"]};try{$l("Análisis Taxonómico");const E=new fx({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),B={inlineData:{mimeType:y.mimeType,data:y.data}},Q=await E.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{text:L},B]},config:{responseMimeType:"application/json",responseSchema:C}}),D=JSON.parse(Q.text),I={documentName:u,uploadDate:new Date().toISOString(),userId:t.id,analysisResults:D.analysisResults,summary:D.summary},O=await tIe(I);await N(),l(O),d(""),b(null),_(null)}catch(E){console.error(E),i("Hubo un error al analizar el documento. Asegúrese de que el archivo no esté protegido o vacío. Inténtelo de nuevo.")}finally{m(!1)}},M=async L=>{if(window.confirm("¿Está seguro de eliminar este análisis?"))try{await rIe(L),await N(),(o==null?void 0:o.id)===L&&l(null)}catch(C){console.error("Error al eliminar análisis:",C),i("No se pudo eliminar el análisis en la nube.")}},j=ee.useMemo(()=>o?Object.values(o.summary).reduce((L,C)=>L+(C||0),0):0,[o]);return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Análisis Taxonómico de Evaluaciones"}),n&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando análisis desde la nube..."}),a&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),c.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:c.jsxs("div",{className:"space-y-1 text-center",children:[c.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:c.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[c.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500 focus-within:outline-none",children:[c.jsx("span",{children:"Cargue un archivo"}),c.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:k,accept:".pdf,.doc,.docx,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"})]}),c.jsx("p",{className:"pl-1",children:"o arrástrelo aquí"})]}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500",children:g?g.name:"PDF, DOCX hasta 10MB"})]})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento/Prueba"}),c.jsx("input",{type:"text",id:"documentName",value:u,onChange:L=>d(L.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("button",{onClick:R,disabled:h||!y,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:h?c.jsx(nIe,{}):"Analizar con IA"})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Análisis"}),!n&&e.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay análisis guardados en la nube."}),c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:!n&&e.length>0&&e.map(L=>c.jsxs("button",{onClick:()=>l(L),className:`w-full text-left p-3 rounded-md border ${(o==null?void 0:o.id)===L.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/30 dark:border-amber-700":"bg-slate-50 hover:bg-slate-100 dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[c.jsx("p",{className:"font-semibold truncate",children:L.documentName}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:new Date(L.uploadDate).toLocaleString("es-CL")})]},L.id))})]})]}),c.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:o?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:o.documentName}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(o.uploadDate).toLocaleString("es-CL")]})]}),c.jsx("button",{onClick:()=>M(o.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado Taxonómico (",j," preguntas)"]}),c.jsx("div",{className:"space-y-3",children:jL.map(L=>{const C=o.summary[L]||0,E=j>0?C/j*100:0;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:L}),c.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[C," (",E.toFixed(0),"%)"]})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:c.jsx("div",{className:`${OL[L]} h-4 rounded-full`,style:{width:`${E}%`}})})]},L)})})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Análisis"}),c.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / Ítem"}),c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o.analysisResults.map((L,C)=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:L.question}),c.jsx("td",{className:"px-4 py-3 text-sm",children:c.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${OL[L.habilidadBloom]}`,children:L.habilidadBloom})})]},C))})]})})]})]}):c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[c.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📊"}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Análisis"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo análisis o seleccione uno del historial para ver los resultados aquí."})]})})]})]})},sIe=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},aIe=({currentUser:t,onLogout:e,onUserUpdate:r,onChangeProfile:n,canChangeProfile:s,unreadMessagesCount:a,refreshUnreadCount:i})=>{const o=t.profile,l=ee.useMemo(()=>{const N=UY[o];return o!==Vt.ESTUDIANTE?N:N.filter(k=>{if(k.name==="Asistencia a Empresa"){const R=sIe(t.curso||"");return R.startsWith("3º")||R.startsWith("4º")}return!0})},[o,t.curso]),[u,d]=ee.useState(null),[h,m]=ee.useState(!1);ee.useEffect(()=>{l&&l.length>0?d(l[0]):d(null)},[o,l]);const g=ee.useCallback(N=>{d(N),window.innerWidth<768&&m(!1)},[]),b=ee.useCallback(N=>{const k=l.find(R=>R.name===N);k&&g(k)},[l,g]),y=()=>c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center justify-center h-16 border-b border-slate-700 px-4 flex-shrink-0",children:[c.jsx(yY,{}),c.jsx("span",{className:"ml-3 text-white font-bold text-xl whitespace-nowrap",children:"Gestión LIR"})]}),c.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto sidebar-scroll",children:l.map(N=>c.jsxs("button",{onClick:()=>g(N),className:`w-full flex items-center py-3 px-4 rounded-lg transition-colors duration-200 text-left ${(u==null?void 0:u.name)===N.name?"bg-slate-900 text-amber-400 font-semibold":"text-slate-300 hover:bg-slate-700 hover:text-white"}`,children:[N.icon,c.jsx("span",{className:"ml-4",children:N.name})]},N.name))})]}),_=()=>{if(!u)return c.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex items-center justify-center",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xl",children:"Seleccione un módulo del menú para comenzar."})});if(u.name==="Calendario Académico")return c.jsx($ie,{profile:o});if(u.name==="Muro de Anuncios")return c.jsx(Zie,{currentUser:t});if(u.name==="Mensajería Interna")return c.jsx(N2e,{currentUser:t,refreshUnreadCount:i});if(u.name==="Generador de Actas")return c.jsx(aoe,{});if(o===Vt.SUBDIRECCION){if(u.name==="Dashboard")return c.jsx(uX,{currentUser:t});if(u.name==="Administración")return c.jsx(aye,{});if(u.name==="Seguimiento Curricular")return c.jsx(Z3e,{currentUser:t});if(u.name==="Acompañamiento docente")return c.jsx(y2e,{currentUser:t});if(u.name==="Análisis Taxonómico")return c.jsx(QL,{currentUser:t});if(u.name==="Interdisciplinario")return c.jsx(MR,{});if(u.name==="Registro de inasistencias y reemplazos docentes")return c.jsx(aX,{currentUser:t});if(u.name==="Crear horarios")return c.jsx(xX,{});if(u.name==="Seguimiento de acciones pedagógicas")return c.jsx(CX,{});if(u.name==="Inclusión")return c.jsx(LD,{currentUser:t})}if(o===Vt.PROFESORADO){if(u.name==="Planificación")return c.jsx(Oie,{currentUser:t});if(u.name==="Mis Acompañamientos")return c.jsx(z3e,{currentUser:t});if(u.name==="Recursos de Aprendizaje")return c.jsx(I3e,{});if(u.name==="Análisis Taxonómico")return c.jsx(QL,{currentUser:t});if(u.name==="Interdisciplinario")return c.jsx(MR,{});if(u.name==="Inclusión")return c.jsx(LD,{currentUser:t});if(u.name==="Actividades Remotas")return c.jsx(wye,{});if(u.name==="Evaluación de Aprendizajes")return c.jsx(Lce,{});if(u.name==="Evaluaciones Formativas")return c.jsx(f2e,{currentUser:t})}if(o===Vt.COORDINACION_TP){if(u.name==="Seguimiento Dual")return c.jsx(fye,{});if(u.name==="Asistencia Dual")return c.jsx(Xye,{});if(u.name==="Pañol")return c.jsx(pSe,{})}if(o===Vt.ESTUDIANTE){if(u.name==="Auto-aprendizaje")return c.jsx(Bye,{currentUser:t});if(u.name==="Evaluación Formativa")return c.jsx(P3e,{currentUser:t});if(u.name==="Tareas Interdisciplinarias")return c.jsx(V3e,{currentUser:t});if(u.name==="Asistencia a Empresa")return c.jsx(Vye,{currentUser:t})}return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:u.name}),c.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:c.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aquí irá la funcionalidad de ",c.jsx("span",{className:"font-semibold",children:u.name}),"."]})})]})};return c.jsxs("div",{className:"h-screen flex flex-col bg-slate-100",children:[c.jsx(GY,{currentUser:t,onLogout:e,onNavigate:b,onUserUpdate:r,onChangeProfile:n,canChangeProfile:s,toggleSidebar:()=>m(!h),unreadMessagesCount:a,refreshUnreadCount:i}),c.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[h&&c.jsx("div",{onClick:()=>m(!1),className:"fixed inset-0 bg-black opacity-50 z-20 md:hidden"}),c.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 w-72 bg-slate-800 text-white flex flex-col transform md:translate-x-0 ${h?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out`,children:c.jsx(y,{})}),c.jsx("main",{className:"flex-1 overflow-y-auto",children:c.jsx("div",{className:"p-6 md:p-8",children:_()})})]})]})},iIe=({onSelectProfile:t,isAdminView:e=!1})=>c.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("div",{className:"mb-4 flex justify-center items-center",children:c.jsx(_4,{})}),c.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:e?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:LY.map(r=>c.jsxs("button",{onClick:()=>t(r.id),className:"group bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md hover:shadow-xl hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-amber-400 focus:ring-opacity-50 transition-all duration-300 ease-in-out flex flex-col items-center justify-center text-center",children:[c.jsx("div",{className:"text-slate-700 dark:text-slate-300 group-hover:text-amber-400 transition-colors duration-300",children:r.icon}),c.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-800 dark:text-slate-200",children:r.label})]},r.id))}),c.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]}),oIe=()=>{const[t,e]=ee.useState(null),[r,n]=ee.useState(null),[s,a]=ee.useState(!0),[i,o]=ee.useState(null),[l,u]=ee.useState(!1),[d,h]=ee.useState(null);ee.useEffect(()=>{const k=Gz(a1,async R=>{if(e(R),R)try{const M=await vY(R.email);M?(n(M),M.profile===Vt.SUBDIRECCION&&u(!0)):(o("Usuario no encontrado en la base de datos. Contacte al administrador."),await nE())}catch{o("Error al conectar con la base de datos."),await nE()}else n(null),h(null),u(!1),o(null);a(!1)});return()=>k()},[]);const m=async(k,R)=>{if(o(null),!k.trim()||!R.trim()){o("Por favor ingrese email y contraseña");return}try{await gY(k.trim(),R)}catch(M){switch(M.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":o("Credenciales inválidas. Verifique su email y contraseña.");break;case"auth/too-many-requests":o("Demasiados intentos fallidos. Intente más tarde.");break;case"auth/network-request-failed":o("Error de conexión. Verifique su internet.");break;default:o("Ocurrió un error al intentar iniciar sesión.")}}},g=async k=>{try{await xY(k)}catch(R){console.error("Error al enviar email de recuperación:",R)}},b=k=>{h(k),u(!1)},y=()=>{u(!0),h(null)},_=async()=>{try{await nE()}catch(k){console.error("Error al cerrar sesión:",k)}};if(s)return c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"mb-4 flex justify-center items-center",children:c.jsx(_4,{})}),c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicación..."})]})});if(!t||!r)return c.jsx(OY,{onLoginAttempt:m,onForgotPasswordRequest:g,error:i});if(l&&r.profile===Vt.SUBDIRECCION)return c.jsx(iIe,{onSelectProfile:b,isAdminView:!0});const N=d||r.profile;return c.jsx(aIe,{currentUser:{...r,profile:N},onLogout:_,onChangeProfile:r.profile===Vt.SUBDIRECCION?y:void 0,canChangeProfile:r.profile===Vt.SUBDIRECCION})},qH=document.getElementById("root");if(!qH)throw new Error("Could not find root element to mount to");const lIe=sV.createRoot(qH);lIe.render(c.jsx(At.StrictMode,{children:c.jsx(oIe,{})}));export{qn as _,cIe as c,E5 as g};
