(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var fCe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function f6(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Wy={exports:{}},np={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CT;function Xj(){if(CT)return np;CT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,a,s){var i=null;if(s!==void 0&&(i=""+s),a.key!==void 0&&(i=""+a.key),"key"in a){s={};for(var o in a)o!=="key"&&(s[o]=a[o])}else s=a;return a=s.ref,{$$typeof:t,type:n,key:i,ref:a!==void 0?a:null,props:s}}return np.Fragment=e,np.jsx=r,np.jsxs=r,np}var ET;function Zj(){return ET||(ET=1,Wy.exports=Xj()),Wy.exports}var l=Zj(),$y={exports:{}},Rr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _T;function eO(){if(_T)return Rr;_T=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.iterator;function p(W){return W===null||typeof W!="object"?null:(W=m&&W[m]||W["@@iterator"],typeof W=="function"?W:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,y={};function T(W,de,P){this.props=W,this.context=de,this.refs=y,this.updater=P||g}T.prototype.isReactComponent={},T.prototype.setState=function(W,de){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,de,"setState")},T.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function k(){}k.prototype=T.prototype;function D(W,de,P){this.props=W,this.context=de,this.refs=y,this.updater=P||g}var L=D.prototype=new k;L.constructor=D,b(L,T.prototype),L.isPureReactComponent=!0;var j=Array.isArray,H={H:null,A:null,T:null,S:null,V:null},U=Object.prototype.hasOwnProperty;function E(W,de,P,K,Y,ee){return P=ee.ref,{$$typeof:t,type:W,key:de,ref:P!==void 0?P:null,props:ee}}function _(W,de){return E(W.type,de,void 0,void 0,void 0,W.props)}function B(W){return typeof W=="object"&&W!==null&&W.$$typeof===t}function Q(W){var de={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(P){return de[P]})}var R=/\/+/g;function F(W,de){return typeof W=="object"&&W!==null&&W.key!=null?Q(""+W.key):de.toString(36)}function V(){}function X(W){switch(W.status){case"fulfilled":return W.value;case"rejected":throw W.reason;default:switch(typeof W.status=="string"?W.then(V,V):(W.status="pending",W.then(function(de){W.status==="pending"&&(W.status="fulfilled",W.value=de)},function(de){W.status==="pending"&&(W.status="rejected",W.reason=de)})),W.status){case"fulfilled":return W.value;case"rejected":throw W.reason}}throw W}function oe(W,de,P,K,Y){var ee=typeof W;(ee==="undefined"||ee==="boolean")&&(W=null);var Ae=!1;if(W===null)Ae=!0;else switch(ee){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(W.$$typeof){case t:case e:Ae=!0;break;case f:return Ae=W._init,oe(Ae(W._payload),de,P,K,Y)}}if(Ae)return Y=Y(W),Ae=K===""?"."+F(W,0):K,j(Y)?(P="",Ae!=null&&(P=Ae.replace(R,"$&/")+"/"),oe(Y,de,P,"",function(pe){return pe})):Y!=null&&(B(Y)&&(Y=_(Y,P+(Y.key==null||W&&W.key===Y.key?"":(""+Y.key).replace(R,"$&/")+"/")+Ae)),de.push(Y)),1;Ae=0;var Se=K===""?".":K+":";if(j(W))for(var ge=0;ge<W.length;ge++)K=W[ge],ee=Se+F(K,ge),Ae+=oe(K,de,P,ee,Y);else if(ge=p(W),typeof ge=="function")for(W=ge.call(W),ge=0;!(K=W.next()).done;)K=K.value,ee=Se+F(K,ge++),Ae+=oe(K,de,P,ee,Y);else if(ee==="object"){if(typeof W.then=="function")return oe(X(W),de,P,K,Y);throw de=String(W),Error("Objects are not valid as a React child (found: "+(de==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":de)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function te(W,de,P){if(W==null)return W;var K=[],Y=0;return oe(W,K,"","",function(ee){return de.call(P,ee,Y++)}),K}function ae(W){if(W._status===-1){var de=W._result;de=de(),de.then(function(P){(W._status===0||W._status===-1)&&(W._status=1,W._result=P)},function(P){(W._status===0||W._status===-1)&&(W._status=2,W._result=P)}),W._status===-1&&(W._status=0,W._result=de)}if(W._status===1)return W._result.default;throw W._result}var q=typeof reportError=="function"?reportError:function(W){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var de=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof W=="object"&&W!==null&&typeof W.message=="string"?String(W.message):String(W),error:W});if(!window.dispatchEvent(de))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",W);return}console.error(W)};function J(){}return Rr.Children={map:te,forEach:function(W,de,P){te(W,function(){de.apply(this,arguments)},P)},count:function(W){var de=0;return te(W,function(){de++}),de},toArray:function(W){return te(W,function(de){return de})||[]},only:function(W){if(!B(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},Rr.Component=T,Rr.Fragment=r,Rr.Profiler=a,Rr.PureComponent=D,Rr.StrictMode=n,Rr.Suspense=c,Rr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,Rr.__COMPILER_RUNTIME={__proto__:null,c:function(W){return H.H.useMemoCache(W)}},Rr.cache=function(W){return function(){return W.apply(null,arguments)}},Rr.cloneElement=function(W,de,P){if(W==null)throw Error("The argument must be a React element, but you passed "+W+".");var K=b({},W.props),Y=W.key,ee=void 0;if(de!=null)for(Ae in de.ref!==void 0&&(ee=void 0),de.key!==void 0&&(Y=""+de.key),de)!U.call(de,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&de.ref===void 0||(K[Ae]=de[Ae]);var Ae=arguments.length-2;if(Ae===1)K.children=P;else if(1<Ae){for(var Se=Array(Ae),ge=0;ge<Ae;ge++)Se[ge]=arguments[ge+2];K.children=Se}return E(W.type,Y,void 0,void 0,ee,K)},Rr.createContext=function(W){return W={$$typeof:i,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null},W.Provider=W,W.Consumer={$$typeof:s,_context:W},W},Rr.createElement=function(W,de,P){var K,Y={},ee=null;if(de!=null)for(K in de.key!==void 0&&(ee=""+de.key),de)U.call(de,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(Y[K]=de[K]);var Ae=arguments.length-2;if(Ae===1)Y.children=P;else if(1<Ae){for(var Se=Array(Ae),ge=0;ge<Ae;ge++)Se[ge]=arguments[ge+2];Y.children=Se}if(W&&W.defaultProps)for(K in Ae=W.defaultProps,Ae)Y[K]===void 0&&(Y[K]=Ae[K]);return E(W,ee,void 0,void 0,null,Y)},Rr.createRef=function(){return{current:null}},Rr.forwardRef=function(W){return{$$typeof:o,render:W}},Rr.isValidElement=B,Rr.lazy=function(W){return{$$typeof:f,_payload:{_status:-1,_result:W},_init:ae}},Rr.memo=function(W,de){return{$$typeof:u,type:W,compare:de===void 0?null:de}},Rr.startTransition=function(W){var de=H.T,P={};H.T=P;try{var K=W(),Y=H.S;Y!==null&&Y(P,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(J,q)}catch(ee){q(ee)}finally{H.T=de}},Rr.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},Rr.use=function(W){return H.H.use(W)},Rr.useActionState=function(W,de,P){return H.H.useActionState(W,de,P)},Rr.useCallback=function(W,de){return H.H.useCallback(W,de)},Rr.useContext=function(W){return H.H.useContext(W)},Rr.useDebugValue=function(){},Rr.useDeferredValue=function(W,de){return H.H.useDeferredValue(W,de)},Rr.useEffect=function(W,de,P){var K=H.H;if(typeof P=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return K.useEffect(W,de)},Rr.useId=function(){return H.H.useId()},Rr.useImperativeHandle=function(W,de,P){return H.H.useImperativeHandle(W,de,P)},Rr.useInsertionEffect=function(W,de){return H.H.useInsertionEffect(W,de)},Rr.useLayoutEffect=function(W,de){return H.H.useLayoutEffect(W,de)},Rr.useMemo=function(W,de){return H.H.useMemo(W,de)},Rr.useOptimistic=function(W,de){return H.H.useOptimistic(W,de)},Rr.useReducer=function(W,de,P){return H.H.useReducer(W,de,P)},Rr.useRef=function(W){return H.H.useRef(W)},Rr.useState=function(W){return H.H.useState(W)},Rr.useSyncExternalStore=function(W,de,P){return H.H.useSyncExternalStore(W,de,P)},Rr.useTransition=function(){return H.H.useTransition()},Rr.version="19.1.1",Rr}var ST;function n_(){return ST||(ST=1,$y.exports=eO()),$y.exports}var ne=n_();const a_=f6(ne);var Jy={exports:{}},ap={},Yy={exports:{}},Xy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TT;function tO(){return TT||(TT=1,function(t){function e(te,ae){var q=te.length;te.push(ae);e:for(;0<q;){var J=q-1>>>1,W=te[J];if(0<a(W,ae))te[J]=ae,te[q]=W,q=J;else break e}}function r(te){return te.length===0?null:te[0]}function n(te){if(te.length===0)return null;var ae=te[0],q=te.pop();if(q!==ae){te[0]=q;e:for(var J=0,W=te.length,de=W>>>1;J<de;){var P=2*(J+1)-1,K=te[P],Y=P+1,ee=te[Y];if(0>a(K,q))Y<W&&0>a(ee,K)?(te[J]=ee,te[Y]=q,J=Y):(te[J]=K,te[P]=q,J=P);else if(Y<W&&0>a(ee,q))te[J]=ee,te[Y]=q,J=Y;else break e}}return ae}function a(te,ae){var q=te.sortIndex-ae.sortIndex;return q!==0?q:te.id-ae.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var c=[],u=[],f=1,m=null,p=3,g=!1,b=!1,y=!1,T=!1,k=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function j(te){for(var ae=r(u);ae!==null;){if(ae.callback===null)n(u);else if(ae.startTime<=te)n(u),ae.sortIndex=ae.expirationTime,e(c,ae);else break;ae=r(u)}}function H(te){if(y=!1,j(te),!b)if(r(c)!==null)b=!0,U||(U=!0,F());else{var ae=r(u);ae!==null&&oe(H,ae.startTime-te)}}var U=!1,E=-1,_=5,B=-1;function Q(){return T?!0:!(t.unstable_now()-B<_)}function R(){if(T=!1,U){var te=t.unstable_now();B=te;var ae=!0;try{e:{b=!1,y&&(y=!1,D(E),E=-1),g=!0;var q=p;try{t:{for(j(te),m=r(c);m!==null&&!(m.expirationTime>te&&Q());){var J=m.callback;if(typeof J=="function"){m.callback=null,p=m.priorityLevel;var W=J(m.expirationTime<=te);if(te=t.unstable_now(),typeof W=="function"){m.callback=W,j(te),ae=!0;break t}m===r(c)&&n(c),j(te)}else n(c);m=r(c)}if(m!==null)ae=!0;else{var de=r(u);de!==null&&oe(H,de.startTime-te),ae=!1}}break e}finally{m=null,p=q,g=!1}ae=void 0}}finally{ae?F():U=!1}}}var F;if(typeof L=="function")F=function(){L(R)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,X=V.port2;V.port1.onmessage=R,F=function(){X.postMessage(null)}}else F=function(){k(R,0)};function oe(te,ae){E=k(function(){te(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(te){te.callback=null},t.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<te?Math.floor(1e3/te):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(te){switch(p){case 1:case 2:case 3:var ae=3;break;default:ae=p}var q=p;p=ae;try{return te()}finally{p=q}},t.unstable_requestPaint=function(){T=!0},t.unstable_runWithPriority=function(te,ae){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var q=p;p=te;try{return ae()}finally{p=q}},t.unstable_scheduleCallback=function(te,ae,q){var J=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?J+q:J):q=J,te){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=q+W,te={id:f++,callback:ae,priorityLevel:te,startTime:q,expirationTime:W,sortIndex:-1},q>J?(te.sortIndex=q,e(u,te),r(c)===null&&te===r(u)&&(y?(D(E),E=-1):y=!0,oe(H,q-J))):(te.sortIndex=W,e(c,te),b||g||(b=!0,U||(U=!0,F()))),te},t.unstable_shouldYield=Q,t.unstable_wrapCallback=function(te){var ae=p;return function(){var q=p;p=ae;try{return te.apply(this,arguments)}finally{p=q}}}}(Xy)),Xy}var BT;function rO(){return BT||(BT=1,Yy.exports=tO()),Yy.exports}var Zy={exports:{}},vi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NT;function nO(){if(NT)return vi;NT=1;var t=n_();function e(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(c,u,f){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:m==null?null:""+m,children:c,containerInfo:u,implementation:f}}var i=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return vi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,vi.createPortal=function(c,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return s(c,u,null,f)},vi.flushSync=function(c){var u=i.T,f=n.p;try{if(i.T=null,n.p=2,c)return c()}finally{i.T=u,n.p=f,n.d.f()}},vi.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,n.d.C(c,u))},vi.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},vi.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var f=u.as,m=o(f,u.crossOrigin),p=typeof u.integrity=="string"?u.integrity:void 0,g=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;f==="style"?n.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:m,integrity:p,fetchPriority:g}):f==="script"&&n.d.X(c,{crossOrigin:m,integrity:p,fetchPriority:g,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},vi.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var f=o(u.as,u.crossOrigin);n.d.M(c,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&n.d.M(c)},vi.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var f=u.as,m=o(f,u.crossOrigin);n.d.L(c,f,{crossOrigin:m,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},vi.preloadModule=function(c,u){if(typeof c=="string")if(u){var f=o(u.as,u.crossOrigin);n.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else n.d.m(c)},vi.requestFormReset=function(c){n.d.r(c)},vi.unstable_batchedUpdates=function(c,u){return c(u)},vi.useFormState=function(c,u,f){return i.H.useFormState(c,u,f)},vi.useFormStatus=function(){return i.H.useHostTransitionStatus()},vi.version="19.1.1",vi}var kT;function aO(){if(kT)return Zy.exports;kT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Zy.exports=nO(),Zy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IT;function sO(){if(IT)return ap;IT=1;var t=rO(),e=n_(),r=aO();function n(A){var d="https://react.dev/errors/"+A;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+A+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function s(A){var d=A,h=A;if(A.alternate)for(;d.return;)d=d.return;else{A=d;do d=A,(d.flags&4098)!==0&&(h=d.return),A=d.return;while(A)}return d.tag===3?h:null}function i(A){if(A.tag===13){var d=A.memoizedState;if(d===null&&(A=A.alternate,A!==null&&(d=A.memoizedState)),d!==null)return d.dehydrated}return null}function o(A){if(s(A)!==A)throw Error(n(188))}function c(A){var d=A.alternate;if(!d){if(d=s(A),d===null)throw Error(n(188));return d!==A?null:A}for(var h=A,w=d;;){var N=h.return;if(N===null)break;var M=N.alternate;if(M===null){if(w=N.return,w!==null){h=w;continue}break}if(N.child===M.child){for(M=N.child;M;){if(M===h)return o(N),A;if(M===w)return o(N),d;M=M.sibling}throw Error(n(188))}if(h.return!==w.return)h=N,w=M;else{for(var ie=!1,we=N.child;we;){if(we===h){ie=!0,h=N,w=M;break}if(we===w){ie=!0,w=N,h=M;break}we=we.sibling}if(!ie){for(we=M.child;we;){if(we===h){ie=!0,h=M,w=N;break}if(we===w){ie=!0,w=M,h=N;break}we=we.sibling}if(!ie)throw Error(n(189))}}if(h.alternate!==w)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?A:d}function u(A){var d=A.tag;if(d===5||d===26||d===27||d===6)return A;for(A=A.child;A!==null;){if(d=u(A),d!==null)return d;A=A.sibling}return null}var f=Object.assign,m=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),D=Symbol.for("react.consumer"),L=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function F(A){return A===null||typeof A!="object"?null:(A=R&&A[R]||A["@@iterator"],typeof A=="function"?A:null)}var V=Symbol.for("react.client.reference");function X(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===V?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case b:return"Fragment";case T:return"Profiler";case y:return"StrictMode";case H:return"Suspense";case U:return"SuspenseList";case B:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case g:return"Portal";case L:return(A.displayName||"Context")+".Provider";case D:return(A._context.displayName||"Context")+".Consumer";case j:var d=A.render;return A=A.displayName,A||(A=d.displayName||d.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case E:return d=A.displayName||null,d!==null?d:X(A.type)||"Memo";case _:d=A._payload,A=A._init;try{return X(A(d))}catch{}}return null}var oe=Array.isArray,te=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},J=[],W=-1;function de(A){return{current:A}}function P(A){0>W||(A.current=J[W],J[W]=null,W--)}function K(A,d){W++,J[W]=A.current,A.current=d}var Y=de(null),ee=de(null),Ae=de(null),Se=de(null);function ge(A,d){switch(K(Ae,d),K(ee,A),K(Y,null),d.nodeType){case 9:case 11:A=(A=d.documentElement)&&(A=A.namespaceURI)?Y4(A):0;break;default:if(A=d.tagName,d=d.namespaceURI)d=Y4(d),A=X4(d,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}P(Y),K(Y,A)}function pe(){P(Y),P(ee),P(Ae)}function ye(A){A.memoizedState!==null&&K(Se,A);var d=Y.current,h=X4(d,A.type);d!==h&&(K(ee,A),K(Y,h))}function ue(A){ee.current===A&&(P(Y),P(ee)),Se.current===A&&(P(Se),Xm._currentValue=q)}var se=Object.prototype.hasOwnProperty,Pe=t.unstable_scheduleCallback,at=t.unstable_cancelCallback,De=t.unstable_shouldYield,Ee=t.unstable_requestPaint,Le=t.unstable_now,it=t.unstable_getCurrentPriorityLevel,et=t.unstable_ImmediatePriority,ht=t.unstable_UserBlockingPriority,Et=t.unstable_NormalPriority,At=t.unstable_LowPriority,jt=t.unstable_IdlePriority,Kt=t.log,Yt=t.unstable_setDisableYieldValue,Qt=null,Gt=null;function Wt(A){if(typeof Kt=="function"&&Yt(A),Gt&&typeof Gt.setStrictMode=="function")try{Gt.setStrictMode(Qt,A)}catch{}}var kt=Math.clz32?Math.clz32:Yr,It=Math.log,_t=Math.LN2;function Yr(A){return A>>>=0,A===0?32:31-(It(A)/_t|0)|0}var tr=256,$n=4194304;function Ir(A){var d=A&42;if(d!==0)return d;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function hn(A,d,h){var w=A.pendingLanes;if(w===0)return 0;var N=0,M=A.suspendedLanes,ie=A.pingedLanes;A=A.warmLanes;var we=w&134217727;return we!==0?(w=we&~M,w!==0?N=Ir(w):(ie&=we,ie!==0?N=Ir(ie):h||(h=we&~A,h!==0&&(N=Ir(h))))):(we=w&~M,we!==0?N=Ir(we):ie!==0?N=Ir(ie):h||(h=w&~A,h!==0&&(N=Ir(h)))),N===0?0:d!==0&&d!==N&&(d&M)===0&&(M=N&-N,h=d&-d,M>=h||M===32&&(h&4194048)!==0)?d:N}function rs(A,d){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&d)===0}function Mr(A,d){switch(A){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function li(){var A=tr;return tr<<=1,(tr&4194048)===0&&(tr=256),A}function Bn(){var A=$n;return $n<<=1,($n&62914560)===0&&($n=4194304),A}function ga(A){for(var d=[],h=0;31>h;h++)d.push(A);return d}function Pa(A,d){A.pendingLanes|=d,d!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function mn(A,d,h,w,N,M){var ie=A.pendingLanes;A.pendingLanes=h,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=h,A.entangledLanes&=h,A.errorRecoveryDisabledLanes&=h,A.shellSuspendCounter=0;var we=A.entanglements,Fe=A.expirationTimes,Xe=A.hiddenUpdates;for(h=ie&~h;0<h;){var ut=31-kt(h),vt=1<<ut;we[ut]=0,Fe[ut]=-1;var tt=Xe[ut];if(tt!==null)for(Xe[ut]=null,ut=0;ut<tt.length;ut++){var nt=tt[ut];nt!==null&&(nt.lane&=-536870913)}h&=~vt}w!==0&&ar(A,w,0),M!==0&&N===0&&A.tag!==0&&(A.suspendedLanes|=M&~(ie&~d))}function ar(A,d,h){A.pendingLanes|=d,A.suspendedLanes&=~d;var w=31-kt(d);A.entangledLanes|=d,A.entanglements[w]=A.entanglements[w]|1073741824|h&4194090}function zr(A,d){var h=A.entangledLanes|=d;for(A=A.entanglements;h;){var w=31-kt(h),N=1<<w;N&d|A[w]&d&&(A[w]|=d),h&=~N}}function Ns(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function Zn(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function ja(){var A=ae.p;return A!==0?A:(A=window.event,A===void 0?32:gT(A.type))}function zs(A,d){var h=ae.p;try{return ae.p=A,d()}finally{ae.p=h}}var Ht=Math.random().toString(36).slice(2),pn="__reactFiber$"+Ht,an="__reactProps$"+Ht,Dn="__reactContainer$"+Ht,Jn="__reactEvents$"+Ht,ea="__reactListeners$"+Ht,fe="__reactHandles$"+Ht,Ne="__reactResources$"+Ht,Ce="__reactMarker$"+Ht;function _e(A){delete A[pn],delete A[an],delete A[Jn],delete A[ea],delete A[fe]}function Be(A){var d=A[pn];if(d)return d;for(var h=A.parentNode;h;){if(d=h[Dn]||h[pn]){if(h=d.alternate,d.child!==null||h!==null&&h.child!==null)for(A=rT(A);A!==null;){if(h=A[pn])return h;A=rT(A)}return d}A=h,h=A.parentNode}return null}function ke(A){if(A=A[pn]||A[Dn]){var d=A.tag;if(d===5||d===6||d===13||d===26||d===27||d===3)return A}return null}function qe(A){var d=A.tag;if(d===5||d===26||d===27||d===6)return A.stateNode;throw Error(n(33))}function rt(A){var d=A[Ne];return d||(d=A[Ne]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function He(A){A[Ce]=!0}var $e=new Set,Ze={};function xt(A,d){Bt(A,d),Bt(A+"Capture",d)}function Bt(A,d){for(Ze[A]=d,A=0;A<d.length;A++)$e.add(d[A])}var Ot=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),St={},Rt={};function ur(A){return se.call(Rt,A)?!0:se.call(St,A)?!1:Ot.test(A)?Rt[A]=!0:(St[A]=!0,!1)}function Pr(A,d,h){if(ur(d))if(h===null)A.removeAttribute(d);else{switch(typeof h){case"undefined":case"function":case"symbol":A.removeAttribute(d);return;case"boolean":var w=d.toLowerCase().slice(0,5);if(w!=="data-"&&w!=="aria-"){A.removeAttribute(d);return}}A.setAttribute(d,""+h)}}function jr(A,d,h){if(h===null)A.removeAttribute(d);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(d);return}A.setAttribute(d,""+h)}}function qr(A,d,h,w){if(w===null)A.removeAttribute(h);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(h);return}A.setAttributeNS(d,h,""+w)}}var xs,eo;function ns(A){if(xs===void 0)try{throw Error()}catch(h){var d=h.stack.trim().match(/\n( *(at )?)/);xs=d&&d[1]||"",eo=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xs+A+eo}var ks=!1;function qs(A,d){if(!A||ks)return"";ks=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(d){var vt=function(){throw Error()};if(Object.defineProperty(vt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(vt,[])}catch(nt){var tt=nt}Reflect.construct(A,[],vt)}else{try{vt.call()}catch(nt){tt=nt}A.call(vt.prototype)}}else{try{throw Error()}catch(nt){tt=nt}(vt=A())&&typeof vt.catch=="function"&&vt.catch(function(){})}}catch(nt){if(nt&&tt&&typeof nt.stack=="string")return[nt.stack,tt.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var N=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");N&&N.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var M=w.DetermineComponentFrameRoot(),ie=M[0],we=M[1];if(ie&&we){var Fe=ie.split(`
`),Xe=we.split(`
`);for(N=w=0;w<Fe.length&&!Fe[w].includes("DetermineComponentFrameRoot");)w++;for(;N<Xe.length&&!Xe[N].includes("DetermineComponentFrameRoot");)N++;if(w===Fe.length||N===Xe.length)for(w=Fe.length-1,N=Xe.length-1;1<=w&&0<=N&&Fe[w]!==Xe[N];)N--;for(;1<=w&&0<=N;w--,N--)if(Fe[w]!==Xe[N]){if(w!==1||N!==1)do if(w--,N--,0>N||Fe[w]!==Xe[N]){var ut=`
`+Fe[w].replace(" at new "," at ");return A.displayName&&ut.includes("<anonymous>")&&(ut=ut.replace("<anonymous>",A.displayName)),ut}while(1<=w&&0<=N);break}}}finally{ks=!1,Error.prepareStackTrace=h}return(h=A?A.displayName||A.name:"")?ns(h):""}function vs(A){switch(A.tag){case 26:case 27:case 5:return ns(A.type);case 16:return ns("Lazy");case 13:return ns("Suspense");case 19:return ns("SuspenseList");case 0:case 15:return qs(A.type,!1);case 11:return qs(A.type.render,!1);case 1:return qs(A.type,!0);case 31:return ns("Activity");default:return""}}function Vn(A){try{var d="";do d+=vs(A),A=A.return;while(A);return d}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function as(A){switch(typeof A){case"bigint":case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function _c(A){var d=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function Tu(A){var d=_c(A)?"checked":"value",h=Object.getOwnPropertyDescriptor(A.constructor.prototype,d),w=""+A[d];if(!A.hasOwnProperty(d)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var N=h.get,M=h.set;return Object.defineProperty(A,d,{configurable:!0,get:function(){return N.call(this)},set:function(ie){w=""+ie,M.call(this,ie)}}),Object.defineProperty(A,d,{enumerable:h.enumerable}),{getValue:function(){return w},setValue:function(ie){w=""+ie},stopTracking:function(){A._valueTracker=null,delete A[d]}}}}function el(A){A._valueTracker||(A._valueTracker=Tu(A))}function SA(A){if(!A)return!1;var d=A._valueTracker;if(!d)return!0;var h=d.getValue(),w="";return A&&(w=_c(A)?A.checked?"true":"false":A.value),A=w,A!==h?(d.setValue(A),!0):!1}function ws(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}var Sc=/[\n"\\]/g;function sn(A){return A.replace(Sc,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function ys(A,d,h,w,N,M,ie,we){A.name="",ie!=null&&typeof ie!="function"&&typeof ie!="symbol"&&typeof ie!="boolean"?A.type=ie:A.removeAttribute("type"),d!=null?ie==="number"?(d===0&&A.value===""||A.value!=d)&&(A.value=""+as(d)):A.value!==""+as(d)&&(A.value=""+as(d)):ie!=="submit"&&ie!=="reset"||A.removeAttribute("value"),d!=null?rl(A,ie,as(d)):h!=null?rl(A,ie,as(h)):w!=null&&A.removeAttribute("value"),N==null&&M!=null&&(A.defaultChecked=!!M),N!=null&&(A.checked=N&&typeof N!="function"&&typeof N!="symbol"),we!=null&&typeof we!="function"&&typeof we!="symbol"&&typeof we!="boolean"?A.name=""+as(we):A.removeAttribute("name")}function tl(A,d,h,w,N,M,ie,we){if(M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(A.type=M),d!=null||h!=null){if(!(M!=="submit"&&M!=="reset"||d!=null))return;h=h!=null?""+as(h):"",d=d!=null?""+as(d):h,we||d===A.value||(A.value=d),A.defaultValue=d}w=w??N,w=typeof w!="function"&&typeof w!="symbol"&&!!w,A.checked=we?A.checked:!!w,A.defaultChecked=!!w,ie!=null&&typeof ie!="function"&&typeof ie!="symbol"&&typeof ie!="boolean"&&(A.name=ie)}function rl(A,d,h){d==="number"&&ws(A.ownerDocument)===A||A.defaultValue===""+h||(A.defaultValue=""+h)}function to(A,d,h,w){if(A=A.options,d){d={};for(var N=0;N<h.length;N++)d["$"+h[N]]=!0;for(h=0;h<A.length;h++)N=d.hasOwnProperty("$"+A[h].value),A[h].selected!==N&&(A[h].selected=N),N&&w&&(A[h].defaultSelected=!0)}else{for(h=""+as(h),d=null,N=0;N<A.length;N++){if(A[N].value===h){A[N].selected=!0,w&&(A[N].defaultSelected=!0);return}d!==null||A[N].disabled||(d=A[N])}d!==null&&(d.selected=!0)}}function wn(A,d,h){if(d!=null&&(d=""+as(d),d!==A.value&&(A.value=d),h==null)){A.defaultValue!==d&&(A.defaultValue=d);return}A.defaultValue=h!=null?""+as(h):""}function nl(A,d,h,w){if(d==null){if(w!=null){if(h!=null)throw Error(n(92));if(oe(w)){if(1<w.length)throw Error(n(93));w=w[0]}h=w}h==null&&(h=""),d=h}h=as(d),A.defaultValue=h,w=A.textContent,w===h&&w!==""&&w!==null&&(A.value=w)}function ci(A,d){if(d){var h=A.firstChild;if(h&&h===A.lastChild&&h.nodeType===3){h.nodeValue=d;return}}A.textContent=d}var So=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Bu(A,d,h){var w=d.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?w?A.setProperty(d,""):d==="float"?A.cssFloat="":A[d]="":w?A.setProperty(d,h):typeof h!="number"||h===0||So.has(d)?d==="float"?A.cssFloat=h:A[d]=(""+h).trim():A[d]=h+"px"}function TA(A,d,h){if(d!=null&&typeof d!="object")throw Error(n(62));if(A=A.style,h!=null){for(var w in h)!h.hasOwnProperty(w)||d!=null&&d.hasOwnProperty(w)||(w.indexOf("--")===0?A.setProperty(w,""):w==="float"?A.cssFloat="":A[w]="");for(var N in d)w=d[N],d.hasOwnProperty(N)&&h[N]!==w&&Bu(A,N,w)}else for(var M in d)d.hasOwnProperty(M)&&Bu(A,M,d[M])}function BA(A){if(A.indexOf("-")===-1)return!1;switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var To=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bo(A){return Tc.test(""+A)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":A}var ro=null;function Rn(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var No=null,no=null;function dr(A){var d=ke(A);if(d&&(A=d.stateNode)){var h=A[an]||null;e:switch(A=d.stateNode,d.type){case"input":if(ys(A,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),d=h.name,h.type==="radio"&&d!=null){for(h=A;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+sn(""+d)+'"][type="radio"]'),d=0;d<h.length;d++){var w=h[d];if(w!==A&&w.form===A.form){var N=w[an]||null;if(!N)throw Error(n(90));ys(w,N.value,N.defaultValue,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name)}}for(d=0;d<h.length;d++)w=h[d],w.form===A.form&&SA(w)}break e;case"textarea":wn(A,h.value,h.defaultValue);break e;case"select":d=h.value,d!=null&&to(A,!!h.multiple,d,!1)}}}var ao=!1;function Nu(A,d,h){if(ao)return A(d,h);ao=!0;try{var w=A(d);return w}finally{if(ao=!1,(No!==null||no!==null)&&(Hx(),No&&(d=No,A=no,no=No=null,dr(d),A)))for(d=0;d<A.length;d++)dr(A[d])}}function Is(A,d){var h=A.stateNode;if(h===null)return null;var w=h[an]||null;if(w===null)return null;h=w[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(A=A.type,w=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!w;break e;default:A=!1}if(A)return null;if(h&&typeof h!="function")throw Error(n(231,d,typeof h));return h}var Ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ks=!1;if(Ai)try{var so={};Object.defineProperty(so,"passive",{get:function(){Ks=!0}}),window.addEventListener("test",so,so),window.removeEventListener("test",so,so)}catch{Ks=!1}var ui=null,al=null,ko=null;function NA(){if(ko)return ko;var A,d=al,h=d.length,w,N="value"in ui?ui.value:ui.textContent,M=N.length;for(A=0;A<h&&d[A]===N[A];A++);var ie=h-A;for(w=1;w<=ie&&d[h-w]===N[M-w];w++);return ko=N.slice(A,1<w?1-w:void 0)}function di(A){var d=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&d===13&&(A=13)):A=d,A===10&&(A=13),32<=A||A===13?A:0}function Fs(){return!0}function io(){return!1}function Ta(A){function d(h,w,N,M,ie){this._reactName=h,this._targetInst=N,this.type=w,this.nativeEvent=M,this.target=ie,this.currentTarget=null;for(var we in A)A.hasOwnProperty(we)&&(h=A[we],this[we]=h?h(M):M[we]);return this.isDefaultPrevented=(M.defaultPrevented!=null?M.defaultPrevented:M.returnValue===!1)?Fs:io,this.isPropagationStopped=io,this}return f(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Fs)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Fs)},persist:function(){},isPersistent:Fs}),d}var Kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sl=Ta(Kr),oo=f({},Kr,{view:0,detail:0}),kA=Ta(oo),Ql,Hl,Hi,Ds=f({},oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cl,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==Hi&&(Hi&&A.type==="mousemove"?(Ql=A.screenX-Hi.screenX,Hl=A.screenY-Hi.screenY):Hl=Ql=0,Hi=A),Ql)},movementY:function(A){return"movementY"in A?A.movementY:Hl}}),Ba=Ta(Ds),ku=f({},Ds,{dataTransfer:0}),il=Ta(ku),bs=f({},oo,{relatedTarget:0}),ol=Ta(bs),Io=f({},Kr,{animationName:0,elapsedTime:0,pseudoElement:0}),Bc=Ta(Io),Vl=f({},Kr,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),Nc=Ta(Vl),IA=f({},Kr,{data:0}),Gl=Ta(IA),ll={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ql(A){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(A):(A=kc[A])?!!d[A]:!1}function cl(){return ql}var Iu=f({},oo,{key:function(A){if(A.key){var d=ll[A.key]||A.key;if(d!=="Unidentified")return d}return A.type==="keypress"?(A=di(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?zl[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cl,charCode:function(A){return A.type==="keypress"?di(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?di(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),Fo=Ta(Iu),Al=f({},Ds,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kl=Ta(Al),Rs=f({},oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cl}),Ic=Ta(Rs),O=f({},Kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ce=Ta(O),Ie=f({},Ds,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),Re=Ta(Ie),Ve=f({},Kr,{newState:0,oldState:0}),ot=Ta(Ve),bt=[9,13,27,32],Ut=Ai&&"CompositionEvent"in window,S=null;Ai&&"documentMode"in document&&(S=document.documentMode);var z=Ai&&"TextEvent"in window&&!S,re=Ai&&(!Ut||S&&8<S&&11>=S),ve=" ",Qe=!1;function Ye(A,d){switch(A){case"keyup":return bt.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ct(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var fr=!1;function Wr(A,d){switch(A){case"compositionend":return Ct(d);case"keypress":return d.which!==32?null:(Qe=!0,ve);case"textInput":return A=d.data,A===ve&&Qe?null:A;default:return null}}function Sr(A,d){if(fr)return A==="compositionend"||!Ut&&Ye(A,d)?(A=NA(),ko=al=ui=null,fr=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return re&&d.locale!=="ko"?null:d.data;default:return null}}var yn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nn(A){var d=A&&A.nodeName&&A.nodeName.toLowerCase();return d==="input"?!!yn[A.type]:d==="textarea"}function lo(A,d,h,w){No?no?no.push(w):no=[w]:No=w,d=Wx(d,"onChange"),0<d.length&&(h=new sl("onChange","change",null,h,w),A.push({event:h,listeners:d}))}var xa=null,fi=null;function ul(A){q4(A,0)}function Fc(A){var d=qe(A);if(SA(d))return A}function Fu(A,d){if(A==="change")return d}var FA=!1;if(Ai){var Oa;if(Ai){var Dc="oninput"in document;if(!Dc){var DA=document.createElement("div");DA.setAttribute("oninput","return;"),Dc=typeof DA.oninput=="function"}Oa=Dc}else Oa=!1;FA=Oa&&(!document.documentMode||9<document.documentMode)}function RA(){xa&&(xa.detachEvent("onpropertychange",Du),fi=xa=null)}function Du(A){if(A.propertyName==="value"&&Fc(fi)){var d=[];lo(d,fi,A,Rn(A)),Nu(ul,d)}}function hi(A,d,h){A==="focusin"?(RA(),xa=d,fi=h,xa.attachEvent("onpropertychange",Du)):A==="focusout"&&RA()}function vm(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return Fc(fi)}function af(A,d){if(A==="click")return Fc(d)}function wh(A,d){if(A==="input"||A==="change")return Fc(d)}function co(A,d){return A===d&&(A!==0||1/A===1/d)||A!==A&&d!==d}var ss=typeof Object.is=="function"?Object.is:co;function Rc(A,d){if(ss(A,d))return!0;if(typeof A!="object"||A===null||typeof d!="object"||d===null)return!1;var h=Object.keys(A),w=Object.keys(d);if(h.length!==w.length)return!1;for(w=0;w<h.length;w++){var N=h[w];if(!se.call(d,N)||!ss(A[N],d[N]))return!1}return!0}function sf(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function Wl(A,d){var h=sf(A);A=0;for(var w;h;){if(h.nodeType===3){if(w=A+h.textContent.length,A<=d&&w>=d)return{node:h,offset:d-A};A=w}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=sf(h)}}function Lc(A,d){return A&&d?A===d?!0:A&&A.nodeType===3?!1:d&&d.nodeType===3?Lc(A,d.parentNode):"contains"in A?A.contains(d):A.compareDocumentPosition?!!(A.compareDocumentPosition(d)&16):!1:!1}function Ws(A){A=A!=null&&A.ownerDocument!=null&&A.ownerDocument.defaultView!=null?A.ownerDocument.defaultView:window;for(var d=ws(A.document);d instanceof A.HTMLIFrameElement;){try{var h=typeof d.contentWindow.location.href=="string"}catch{h=!1}if(h)A=d.contentWindow;else break;d=ws(A.document)}return d}function Cs(A){var d=A&&A.nodeName&&A.nodeName.toLowerCase();return d&&(d==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||d==="textarea"||A.contentEditable==="true")}var Uc=Ai&&"documentMode"in document&&11>=document.documentMode,mi=null,Do=null,dl=null,Ro=!1;function ua(A,d,h){var w=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Ro||mi==null||mi!==ws(w)||(w=mi,"selectionStart"in w&&Cs(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),dl&&Rc(dl,w)||(dl=w,w=Wx(Do,"onSelect"),0<w.length&&(d=new sl("onSelect","select",null,d,h),A.push({event:d,listeners:w}),d.target=mi)))}function Lo(A,d){var h={};return h[A.toLowerCase()]=d.toLowerCase(),h["Webkit"+A]="webkit"+d,h["Moz"+A]="moz"+d,h}var Na={animationend:Lo("Animation","AnimationEnd"),animationiteration:Lo("Animation","AnimationIteration"),animationstart:Lo("Animation","AnimationStart"),transitionrun:Lo("Transition","TransitionRun"),transitionstart:Lo("Transition","TransitionStart"),transitioncancel:Lo("Transition","TransitionCancel"),transitionend:Lo("Transition","TransitionEnd")},pi={},LA={};Ai&&(LA=document.createElement("div").style,"AnimationEvent"in window||(delete Na.animationend.animation,delete Na.animationiteration.animation,delete Na.animationstart.animation),"TransitionEvent"in window||delete Na.transitionend.transition);function fl(A){if(pi[A])return pi[A];if(!Na[A])return A;var d=Na[A],h;for(h in d)if(d.hasOwnProperty(h)&&h in LA)return pi[A]=d[h];return A}var Ru=fl("animationend"),Mc=fl("animationiteration"),Pc=fl("animationstart"),jc=fl("transitionrun"),UA=fl("transitionstart"),Lu=fl("transitioncancel"),Oc=fl("transitionend"),$l=new Map,MA="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");MA.push("scrollEnd");function da(A,d){$l.set(A,d),xt(d,[A])}var Vi=new WeakMap;function Or(A,d){if(typeof A=="object"&&A!==null){var h=Vi.get(A);return h!==void 0?h:(d={value:A,source:d,stack:Vn(d)},Vi.set(A,d),d)}return{value:A,source:d,stack:Vn(d)}}var Qr=[],Gn=0,va=0;function Ao(){for(var A=Gn,d=va=Gn=0;d<A;){var h=Qr[d];Qr[d++]=null;var w=Qr[d];Qr[d++]=null;var N=Qr[d];Qr[d++]=null;var M=Qr[d];if(Qr[d++]=null,w!==null&&N!==null){var ie=w.pending;ie===null?N.next=N:(N.next=ie.next,ie.next=N),w.pending=N}M!==0&&yh(h,N,M)}}function Qc(A,d,h,w){Qr[Gn++]=A,Qr[Gn++]=d,Qr[Gn++]=h,Qr[Gn++]=w,va|=w,A.lanes|=w,A=A.alternate,A!==null&&(A.lanes|=w)}function Hc(A,d,h,w){return Qc(A,d,h,w),PA(A)}function Jl(A,d){return Qc(A,null,null,d),PA(A)}function yh(A,d,h){A.lanes|=h;var w=A.alternate;w!==null&&(w.lanes|=h);for(var N=!1,M=A.return;M!==null;)M.childLanes|=h,w=M.alternate,w!==null&&(w.childLanes|=h),M.tag===22&&(A=M.stateNode,A===null||A._visibility&1||(N=!0)),A=M,M=M.return;return A.tag===3?(M=A.stateNode,N&&d!==null&&(N=31-kt(h),A=M.hiddenUpdates,w=A[N],w===null?A[N]=[d]:w.push(d),d.lane=h|536870912),M):null}function PA(A){if(50<Gm)throw Gm=0,xy=null,Error(n(185));for(var d=A.return;d!==null;)A=d,d=A.return;return A.tag===3?A.stateNode:null}var is={};function uo(A,d,h,w){this.tag=A,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ls(A,d,h,w){return new uo(A,d,h,w)}function Uu(A){return A=A.prototype,!(!A||!A.isReactComponent)}function hl(A,d){var h=A.alternate;return h===null?(h=Ls(A.tag,d,A.key,A.mode),h.elementType=A.elementType,h.type=A.type,h.stateNode=A.stateNode,h.alternate=A,A.alternate=h):(h.pendingProps=d,h.type=A.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=A.flags&65011712,h.childLanes=A.childLanes,h.lanes=A.lanes,h.child=A.child,h.memoizedProps=A.memoizedProps,h.memoizedState=A.memoizedState,h.updateQueue=A.updateQueue,d=A.dependencies,h.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},h.sibling=A.sibling,h.index=A.index,h.ref=A.ref,h.refCleanup=A.refCleanup,h}function of(A,d){A.flags&=65011714;var h=A.alternate;return h===null?(A.childLanes=0,A.lanes=d,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=h.childLanes,A.lanes=h.lanes,A.child=h.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=h.memoizedProps,A.memoizedState=h.memoizedState,A.updateQueue=h.updateQueue,A.type=h.type,d=h.dependencies,A.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),A}function jA(A,d,h,w,N,M){var ie=0;if(w=A,typeof A=="function")Uu(A)&&(ie=1);else if(typeof A=="string")ie=jj(A,h,Y.current)?26:A==="html"||A==="head"||A==="body"?27:5;else e:switch(A){case B:return A=Ls(31,h,d,N),A.elementType=B,A.lanes=M,A;case b:return Yl(h.children,N,M,d);case y:ie=8,N|=24;break;case T:return A=Ls(12,h,d,N|2),A.elementType=T,A.lanes=M,A;case H:return A=Ls(13,h,d,N),A.elementType=H,A.lanes=M,A;case U:return A=Ls(19,h,d,N),A.elementType=U,A.lanes=M,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case k:case L:ie=10;break e;case D:ie=9;break e;case j:ie=11;break e;case E:ie=14;break e;case _:ie=16,w=null;break e}ie=29,h=Error(n(130,A===null?"null":typeof A,"")),w=null}return d=Ls(ie,h,d,N),d.elementType=A,d.type=w,d.lanes=M,d}function Yl(A,d,h,w){return A=Ls(7,A,w,d),A.lanes=h,A}function bh(A,d,h){return A=Ls(6,A,null,d),A.lanes=h,A}function lf(A,d,h){return d=Ls(4,A.children!==null?A.children:[],A.key,d),d.lanes=h,d.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},d}var Vc=[],Xl=0,Mu=null,Ch=0,fo=[],Gi=0,OA=null,Zl=1,ec="";function QA(A,d){Vc[Xl++]=Ch,Vc[Xl++]=Mu,Mu=A,Ch=d}function dx(A,d,h){fo[Gi++]=Zl,fo[Gi++]=ec,fo[Gi++]=OA,OA=A;var w=Zl;A=ec;var N=32-kt(w)-1;w&=~(1<<N),h+=1;var M=32-kt(d)+N;if(30<M){var ie=N-N%5;M=(w&(1<<ie)-1).toString(32),w>>=ie,N-=ie,Zl=1<<32-kt(d)+N|h<<N|w,ec=M+A}else Zl=1<<M|h<<N|w,ec=A}function cf(A){A.return!==null&&(QA(A,1),dx(A,1,0))}function Af(A){for(;A===Mu;)Mu=Vc[--Xl],Vc[Xl]=null,Ch=Vc[--Xl],Vc[Xl]=null;for(;A===OA;)OA=fo[--Gi],fo[Gi]=null,ec=fo[--Gi],fo[Gi]=null,Zl=fo[--Gi],fo[Gi]=null}var Qa=null,fa=null,gn=!1,Gc=null,ml=!1,wm=Error(n(519));function HA(A){var d=Error(n(418,""));throw Pu(Or(d,A)),wm}function fx(A){var d=A.stateNode,h=A.type,w=A.memoizedProps;switch(d[pn]=A,d[an]=w,h){case"dialog":Zr("cancel",d),Zr("close",d);break;case"iframe":case"object":case"embed":Zr("load",d);break;case"video":case"audio":for(h=0;h<qm.length;h++)Zr(qm[h],d);break;case"source":Zr("error",d);break;case"img":case"image":case"link":Zr("error",d),Zr("load",d);break;case"details":Zr("toggle",d);break;case"input":Zr("invalid",d),tl(d,w.value,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name,!0),el(d);break;case"select":Zr("invalid",d);break;case"textarea":Zr("invalid",d),nl(d,w.value,w.defaultValue,w.children),el(d)}h=w.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||d.textContent===""+h||w.suppressHydrationWarning===!0||J4(d.textContent,h)?(w.popover!=null&&(Zr("beforetoggle",d),Zr("toggle",d)),w.onScroll!=null&&Zr("scroll",d),w.onScrollEnd!=null&&Zr("scrollend",d),w.onClick!=null&&(d.onclick=$x),d=!0):d=!1,d||HA(A)}function tc(A){for(Qa=A.return;Qa;)switch(Qa.tag){case 5:case 13:ml=!1;return;case 27:case 3:ml=!0;return;default:Qa=Qa.return}}function $s(A){if(A!==Qa)return!1;if(!gn)return tc(A),gn=!0,!1;var d=A.tag,h;if((h=d!==3&&d!==27)&&((h=d===5)&&(h=A.type,h=!(h!=="form"&&h!=="button")||Ry(A.type,A.memoizedProps)),h=!h),h&&fa&&HA(A),tc(A),d===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));e:{for(A=A.nextSibling,d=0;A;){if(A.nodeType===8)if(h=A.data,h==="/$"){if(d===0){fa=cc(A.nextSibling);break e}d--}else h!=="$"&&h!=="$!"&&h!=="$?"||d++;A=A.nextSibling}fa=null}}else d===27?(d=fa,td(A.type)?(A=Py,Py=null,fa=A):fa=d):fa=Qa?cc(A.stateNode.nextSibling):null;return!0}function zi(){fa=Qa=null,gn=!1}function hx(){var A=Gc;return A!==null&&(po===null?po=A:po.push.apply(po,A),Gc=null),A}function Pu(A){Gc===null?Gc=[A]:Gc.push(A)}var pl=de(null),os=null,rc=null;function zc(A,d,h){K(pl,d._currentValue),d._currentValue=h}function gl(A){A._currentValue=pl.current,P(pl)}function Eh(A,d,h){for(;A!==null;){var w=A.alternate;if((A.childLanes&d)!==d?(A.childLanes|=d,w!==null&&(w.childLanes|=d)):w!==null&&(w.childLanes&d)!==d&&(w.childLanes|=d),A===h)break;A=A.return}}function _h(A,d,h,w){var N=A.child;for(N!==null&&(N.return=A);N!==null;){var M=N.dependencies;if(M!==null){var ie=N.child;M=M.firstContext;e:for(;M!==null;){var we=M;M=N;for(var Fe=0;Fe<d.length;Fe++)if(we.context===d[Fe]){M.lanes|=h,we=M.alternate,we!==null&&(we.lanes|=h),Eh(M.return,h,A),w||(ie=null);break e}M=we.next}}else if(N.tag===18){if(ie=N.return,ie===null)throw Error(n(341));ie.lanes|=h,M=ie.alternate,M!==null&&(M.lanes|=h),Eh(ie,h,A),ie=null}else ie=N.child;if(ie!==null)ie.return=N;else for(ie=N;ie!==null;){if(ie===A){ie=null;break}if(N=ie.sibling,N!==null){N.return=ie.return,ie=N;break}ie=ie.return}N=ie}}function ju(A,d,h,w){A=null;for(var N=d,M=!1;N!==null;){if(!M){if((N.flags&524288)!==0)M=!0;else if((N.flags&262144)!==0)break}if(N.tag===10){var ie=N.alternate;if(ie===null)throw Error(n(387));if(ie=ie.memoizedProps,ie!==null){var we=N.type;ss(N.pendingProps.value,ie.value)||(A!==null?A.push(we):A=[we])}}else if(N===Se.current){if(ie=N.alternate,ie===null)throw Error(n(387));ie.memoizedState.memoizedState!==N.memoizedState.memoizedState&&(A!==null?A.push(Xm):A=[Xm])}N=N.return}A!==null&&_h(d,A,h,w),d.flags|=262144}function Sh(A){for(A=A.firstContext;A!==null;){if(!ss(A.context._currentValue,A.memoizedValue))return!0;A=A.next}return!1}function xl(A){os=A,rc=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function Ha(A){return Th(os,A)}function qc(A,d){return os===null&&xl(A),Th(A,d)}function Th(A,d){var h=d._currentValue;if(d={context:d,memoizedValue:h,next:null},rc===null){if(A===null)throw Error(n(308));rc=d,A.dependencies={lanes:0,firstContext:d},A.flags|=524288}else rc=rc.next=d;return h}var Vw=typeof AbortController<"u"?AbortController:function(){var A=[],d=this.signal={aborted:!1,addEventListener:function(h,w){A.push(w)}};this.abort=function(){d.aborted=!0,A.forEach(function(h){return h()})}},mx=t.unstable_scheduleCallback,Gw=t.unstable_NormalPriority,Va={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ym(){return{controller:new Vw,data:new Map,refCount:0}}function uf(A){A.refCount--,A.refCount===0&&mx(Gw,function(){A.controller.abort()})}var df=null,bm=0,VA=0,nc=null;function zw(A,d){if(df===null){var h=df=[];bm=0,VA=_y(),nc={status:"pending",value:void 0,then:function(w){h.push(w)}}}return bm++,d.then(px,px),d}function px(){if(--bm===0&&df!==null){nc!==null&&(nc.status="fulfilled");var A=df;df=null,VA=0,nc=null;for(var d=0;d<A.length;d++)(0,A[d])()}}function gx(A,d){var h=[],w={status:"pending",value:null,reason:null,then:function(N){h.push(N)}};return A.then(function(){w.status="fulfilled",w.value=d;for(var N=0;N<h.length;N++)(0,h[N])(d)},function(N){for(w.status="rejected",w.reason=N,N=0;N<h.length;N++)(0,h[N])(void 0)}),w}var C=te.S;te.S=function(A,d){typeof d=="object"&&d!==null&&typeof d.then=="function"&&zw(A,d),C!==null&&C(A,d)};var I=de(null);function G(){var A=I.current;return A!==null?A:ra.pooledCache}function Z(A,d){d===null?K(I,I.current):K(I,d.pool)}function le(){var A=G();return A===null?null:{parent:Va._currentValue,pool:A}}var he=Error(n(460)),me=Error(n(474)),xe=Error(n(542)),be={then:function(){}};function Te(A){return A=A.status,A==="fulfilled"||A==="rejected"}function Ue(){}function Je(A,d,h){switch(h=A[h],h===void 0?A.push(d):h!==d&&(d.then(Ue,Ue),d=h),d.status){case"fulfilled":return d.value;case"rejected":throw A=d.reason,pt(A),A;default:if(typeof d.status=="string")d.then(Ue,Ue);else{if(A=ra,A!==null&&100<A.shellSuspendCounter)throw Error(n(482));A=d,A.status="pending",A.then(function(w){if(d.status==="pending"){var N=d;N.status="fulfilled",N.value=w}},function(w){if(d.status==="pending"){var N=d;N.status="rejected",N.reason=w}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw A=d.reason,pt(A),A}throw Ke=d,he}}var Ke=null;function Ge(){if(Ke===null)throw Error(n(459));var A=Ke;return Ke=null,A}function pt(A){if(A===he||A===xe)throw Error(n(483))}var st=!1;function Me(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Oe(A,d){A=A.updateQueue,d.updateQueue===A&&(d.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function ct(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function gt(A,d,h){var w=A.updateQueue;if(w===null)return null;if(w=w.shared,(Un&2)!==0){var N=w.pending;return N===null?d.next=d:(d.next=N.next,N.next=d),w.pending=d,d=PA(A),yh(A,null,h),d}return Qc(A,w,d,h),PA(A)}function dt(A,d,h){if(d=d.updateQueue,d!==null&&(d=d.shared,(h&4194048)!==0)){var w=d.lanes;w&=A.pendingLanes,h|=w,d.lanes=h,zr(A,h)}}function zt(A,d){var h=A.updateQueue,w=A.alternate;if(w!==null&&(w=w.updateQueue,h===w)){var N=null,M=null;if(h=h.firstBaseUpdate,h!==null){do{var ie={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};M===null?N=M=ie:M=M.next=ie,h=h.next}while(h!==null);M===null?N=M=d:M=M.next=d}else N=M=d;h={baseState:w.baseState,firstBaseUpdate:N,lastBaseUpdate:M,shared:w.shared,callbacks:w.callbacks},A.updateQueue=h;return}A=h.lastBaseUpdate,A===null?h.firstBaseUpdate=d:A.next=d,h.lastBaseUpdate=d}var Lt=!1;function rr(){if(Lt){var A=nc;if(A!==null)throw A}}function Mt(A,d,h,w){Lt=!1;var N=A.updateQueue;st=!1;var M=N.firstBaseUpdate,ie=N.lastBaseUpdate,we=N.shared.pending;if(we!==null){N.shared.pending=null;var Fe=we,Xe=Fe.next;Fe.next=null,ie===null?M=Xe:ie.next=Xe,ie=Fe;var ut=A.alternate;ut!==null&&(ut=ut.updateQueue,we=ut.lastBaseUpdate,we!==ie&&(we===null?ut.firstBaseUpdate=Xe:we.next=Xe,ut.lastBaseUpdate=Fe))}if(M!==null){var vt=N.baseState;ie=0,ut=Xe=Fe=null,we=M;do{var tt=we.lane&-536870913,nt=tt!==we.lane;if(nt?(un&tt)===tt:(w&tt)===tt){tt!==0&&tt===VA&&(Lt=!0),ut!==null&&(ut=ut.next={lane:0,tag:we.tag,payload:we.payload,callback:null,next:null});e:{var Cr=A,hr=we;tt=d;var qn=h;switch(hr.tag){case 1:if(Cr=hr.payload,typeof Cr=="function"){vt=Cr.call(qn,vt,tt);break e}vt=Cr;break e;case 3:Cr.flags=Cr.flags&-65537|128;case 0:if(Cr=hr.payload,tt=typeof Cr=="function"?Cr.call(qn,vt,tt):Cr,tt==null)break e;vt=f({},vt,tt);break e;case 2:st=!0}}tt=we.callback,tt!==null&&(A.flags|=64,nt&&(A.flags|=8192),nt=N.callbacks,nt===null?N.callbacks=[tt]:nt.push(tt))}else nt={lane:tt,tag:we.tag,payload:we.payload,callback:we.callback,next:null},ut===null?(Xe=ut=nt,Fe=vt):ut=ut.next=nt,ie|=tt;if(we=we.next,we===null){if(we=N.shared.pending,we===null)break;nt=we,we=nt.next,nt.next=null,N.lastBaseUpdate=nt,N.shared.pending=null}}while(!0);ut===null&&(Fe=vt),N.baseState=Fe,N.firstBaseUpdate=Xe,N.lastBaseUpdate=ut,M===null&&(N.shared.lanes=0),Yu|=ie,A.lanes=ie,A.memoizedState=vt}}function cn(A,d){if(typeof A!="function")throw Error(n(191,A));A.call(d)}function bn(A,d){var h=A.callbacks;if(h!==null)for(A.callbacks=null,A=0;A<h.length;A++)cn(h[A],d)}var Ur=de(null),Dr=de(0);function kn(A,d){A=ZA,K(Dr,A),K(Ur,d),ZA=A|d.baseLanes}function Cn(){K(Dr,ZA),K(Ur,Ur.current)}function Tr(){ZA=Dr.current,P(Ur),P(Dr)}var Ln=0,cr=null,gr=null,on=null,An=!1,ls=!1,Ga=!1,wa=0,ya=0,ka=null,ho=0;function En(){throw Error(n(321))}function Ia(A,d){if(d===null)return!1;for(var h=0;h<d.length&&h<A.length;h++)if(!ss(A[h],d[h]))return!1;return!0}function Uo(A,d,h,w,N,M){return Ln=M,cr=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,te.H=A===null||A.memoizedState===null?kS:IS,Ga=!1,M=h(w,N),Ga=!1,ls&&(M=GA(d,h,w,N)),Kc(A),M}function Kc(A){te.H=Nx;var d=gr!==null&&gr.next!==null;if(Ln=0,on=gr=cr=null,An=!1,ya=0,ka=null,d)throw Error(n(300));A===null||Us||(A=A.dependencies,A!==null&&Sh(A)&&(Us=!0))}function GA(A,d,h,w){cr=A;var N=0;do{if(ls&&(ka=null),ya=0,ls=!1,25<=N)throw Error(n(301));if(N+=1,on=gr=null,A.updateQueue!=null){var M=A.updateQueue;M.lastEffect=null,M.events=null,M.stores=null,M.memoCache!=null&&(M.memoCache.index=0)}te.H=JP,M=d(h,w)}while(ls);return M}function Wc(){var A=te.H,d=A.useState()[0];return d=typeof d.then=="function"?$c(d):d,A=A.useState()[0],(gr!==null?gr.memoizedState:null)!==A&&(cr.flags|=1024),d}function ta(){var A=wa!==0;return wa=0,A}function ff(A,d,h){d.updateQueue=A.updateQueue,d.flags&=-2053,A.lanes&=~h}function Bh(A){if(An){for(A=A.memoizedState;A!==null;){var d=A.queue;d!==null&&(d.pending=null),A=A.next}An=!1}Ln=0,on=gr=cr=null,ls=!1,ya=wa=0,ka=null}function Js(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return on===null?cr.memoizedState=on=A:on=on.next=A,on}function sa(){if(gr===null){var A=cr.alternate;A=A!==null?A.memoizedState:null}else A=gr.next;var d=on===null?cr.memoizedState:on.next;if(d!==null)on=d,gr=A;else{if(A===null)throw cr.alternate===null?Error(n(467)):Error(n(310));gr=A,A={memoizedState:gr.memoizedState,baseState:gr.baseState,baseQueue:gr.baseQueue,queue:gr.queue,next:null},on===null?cr.memoizedState=on=A:on=on.next=A}return on}function zA(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $c(A){var d=ya;return ya+=1,ka===null&&(ka=[]),A=Je(ka,A,d),d=cr,(on===null?d.memoizedState:on.next)===null&&(d=d.alternate,te.H=d===null||d.memoizedState===null?kS:IS),A}function gi(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return $c(A);if(A.$$typeof===L)return Ha(A)}throw Error(n(438,String(A)))}function Jc(A){var d=null,h=cr.updateQueue;if(h!==null&&(d=h.memoCache),d==null){var w=cr.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(d={data:w.data.map(function(N){return N.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),h===null&&(h=zA(),cr.updateQueue=h),h.memoCache=d,h=d.data[d.index],h===void 0)for(h=d.data[d.index]=Array(A),w=0;w<A;w++)h[w]=Q;return d.index++,h}function xi(A,d){return typeof d=="function"?d(A):d}function hf(A){var d=sa();return Ou(d,gr,A)}function Ou(A,d,h){var w=A.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=h;var N=A.baseQueue,M=w.pending;if(M!==null){if(N!==null){var ie=N.next;N.next=M.next,M.next=ie}d.baseQueue=N=M,w.pending=null}if(M=A.baseState,N===null)A.memoizedState=M;else{d=N.next;var we=ie=null,Fe=null,Xe=d,ut=!1;do{var vt=Xe.lane&-536870913;if(vt!==Xe.lane?(un&vt)===vt:(Ln&vt)===vt){var tt=Xe.revertLane;if(tt===0)Fe!==null&&(Fe=Fe.next={lane:0,revertLane:0,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null}),vt===VA&&(ut=!0);else if((Ln&tt)===tt){Xe=Xe.next,tt===VA&&(ut=!0);continue}else vt={lane:0,revertLane:Xe.revertLane,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null},Fe===null?(we=Fe=vt,ie=M):Fe=Fe.next=vt,cr.lanes|=tt,Yu|=tt;vt=Xe.action,Ga&&h(M,vt),M=Xe.hasEagerState?Xe.eagerState:h(M,vt)}else tt={lane:vt,revertLane:Xe.revertLane,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null},Fe===null?(we=Fe=tt,ie=M):Fe=Fe.next=tt,cr.lanes|=vt,Yu|=vt;Xe=Xe.next}while(Xe!==null&&Xe!==d);if(Fe===null?ie=M:Fe.next=we,!ss(M,A.memoizedState)&&(Us=!0,ut&&(h=nc,h!==null)))throw h;A.memoizedState=M,A.baseState=ie,A.baseQueue=Fe,w.lastRenderedState=M}return N===null&&(w.lanes=0),[A.memoizedState,w.dispatch]}function Nh(A){var d=sa(),h=d.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=A;var w=h.dispatch,N=h.pending,M=d.memoizedState;if(N!==null){h.pending=null;var ie=N=N.next;do M=A(M,ie.action),ie=ie.next;while(ie!==N);ss(M,d.memoizedState)||(Us=!0),d.memoizedState=M,d.baseQueue===null&&(d.baseState=M),h.lastRenderedState=M}return[M,w]}function mf(A,d,h){var w=cr,N=sa(),M=gn;if(M){if(h===void 0)throw Error(n(407));h=h()}else h=d();var ie=!ss((gr||N).memoizedState,h);ie&&(N.memoizedState=h,Us=!0),N=N.queue;var we=Qu.bind(null,w,N,A);if(Gu(2048,8,we,[A]),N.getSnapshot!==d||ie||on!==null&&on.memoizedState.tag&1){if(w.flags|=2048,sc(9,vf(),pf.bind(null,w,N,h,d),null),ra===null)throw Error(n(349));M||(Ln&124)!==0||kh(w,d,h)}return h}function kh(A,d,h){A.flags|=16384,A={getSnapshot:d,value:h},d=cr.updateQueue,d===null?(d=zA(),cr.updateQueue=d,d.stores=[A]):(h=d.stores,h===null?d.stores=[A]:h.push(A))}function pf(A,d,h,w){d.value=h,d.getSnapshot=w,xx(d)&&vx(A)}function Qu(A,d,h){return h(function(){xx(d)&&vx(A)})}function xx(A){var d=A.getSnapshot;A=A.value;try{var h=d();return!ss(A,h)}catch{return!0}}function vx(A){var d=Jl(A,2);d!==null&&Ho(d,A,2)}function gf(A){var d=Js();if(typeof A=="function"){var h=A;if(A=h(),Ga){Wt(!0);try{h()}finally{Wt(!1)}}}return d.memoizedState=d.baseState=A,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:A},d}function ac(A,d,h,w){return A.baseState=h,Ou(A,gr,typeof w=="function"?w:xi)}function qw(A,d,h,w,N){if(Bx(A))throw Error(n(485));if(A=d.action,A!==null){var M={payload:N,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ie){M.listeners.push(ie)}};te.T!==null?h(!0):M.isTransition=!1,w(M),h=d.pending,h===null?(M.next=d.pending=M,wx(d,M)):(M.next=h.next,d.pending=h.next=M)}}function wx(A,d){var h=d.action,w=d.payload,N=A.state;if(d.isTransition){var M=te.T,ie={};te.T=ie;try{var we=h(N,w),Fe=te.S;Fe!==null&&Fe(ie,we),yx(A,d,we)}catch(Xe){Hu(A,d,Xe)}finally{te.T=M}}else try{M=h(N,w),yx(A,d,M)}catch(Xe){Hu(A,d,Xe)}}function yx(A,d,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(w){Cm(A,d,w)},function(w){return Hu(A,d,w)}):Cm(A,d,h)}function Cm(A,d,h){d.status="fulfilled",d.value=h,Em(d),A.state=h,d=A.pending,d!==null&&(h=d.next,h===d?A.pending=null:(h=h.next,d.next=h,wx(A,h)))}function Hu(A,d,h){var w=A.pending;if(A.pending=null,w!==null){w=w.next;do d.status="rejected",d.reason=h,Em(d),d=d.next;while(d!==w)}A.action=null}function Em(A){A=A.listeners;for(var d=0;d<A.length;d++)(0,A[d])()}function _m(A,d){return d}function xf(A,d){if(gn){var h=ra.formState;if(h!==null){e:{var w=cr;if(gn){if(fa){t:{for(var N=fa,M=ml;N.nodeType!==8;){if(!M){N=null;break t}if(N=cc(N.nextSibling),N===null){N=null;break t}}M=N.data,N=M==="F!"||M==="F"?N:null}if(N){fa=cc(N.nextSibling),w=N.data==="F!";break e}}HA(w)}w=!1}w&&(d=h[0])}}return h=Js(),h.memoizedState=h.baseState=d,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_m,lastRenderedState:d},h.queue=w,h=TS.bind(null,cr,w),w.dispatch=h,w=gf(!1),M=Kw.bind(null,cr,!1,w.queue),w=Js(),N={state:d,dispatch:null,action:A,pending:null},w.queue=N,h=qw.bind(null,cr,N,M,h),N.dispatch=h,w.memoizedState=A,[d,h,!1]}function Ih(A){var d=sa();return Vu(d,gr,A)}function Vu(A,d,h){if(d=Ou(A,d,_m)[0],A=hf(xi)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var w=$c(d)}catch(ie){throw ie===he?xe:ie}else w=d;d=sa();var N=d.queue,M=N.dispatch;return h!==d.memoizedState&&(cr.flags|=2048,sc(9,vf(),bx.bind(null,N,h),null)),[w,M,A]}function bx(A,d){A.action=d}function Cx(A){var d=sa(),h=gr;if(h!==null)return Vu(d,h,A);sa(),d=d.memoizedState,h=sa();var w=h.queue.dispatch;return h.memoizedState=A,[d,w,!1]}function sc(A,d,h,w){return A={tag:A,create:h,deps:w,inst:d,next:null},d=cr.updateQueue,d===null&&(d=zA(),cr.updateQueue=d),h=d.lastEffect,h===null?d.lastEffect=A.next=A:(w=h.next,h.next=A,A.next=w,d.lastEffect=A),A}function vf(){return{destroy:void 0,resource:void 0}}function Fh(){return sa().memoizedState}function Mo(A,d,h,w){var N=Js();w=w===void 0?null:w,cr.flags|=A,N.memoizedState=sc(1|d,vf(),h,w)}function Gu(A,d,h,w){var N=sa();w=w===void 0?null:w;var M=N.memoizedState.inst;gr!==null&&w!==null&&Ia(w,gr.memoizedState.deps)?N.memoizedState=sc(d,M,h,w):(cr.flags|=A,N.memoizedState=sc(1|d,M,h,w))}function Sm(A,d){Mo(8390656,8,A,d)}function Ex(A,d){Gu(2048,8,A,d)}function Tm(A,d){return Gu(4,2,A,d)}function qA(A,d){return Gu(4,4,A,d)}function _x(A,d){if(typeof d=="function"){A=A();var h=d(A);return function(){typeof h=="function"?h():d(null)}}if(d!=null)return A=A(),d.current=A,function(){d.current=null}}function Bm(A,d,h){h=h!=null?h.concat([A]):null,Gu(4,4,_x.bind(null,d,A),h)}function Nm(){}function km(A,d){var h=sa();d=d===void 0?null:d;var w=h.memoizedState;return d!==null&&Ia(d,w[1])?w[0]:(h.memoizedState=[A,d],A)}function Sx(A,d){var h=sa();d=d===void 0?null:d;var w=h.memoizedState;if(d!==null&&Ia(d,w[1]))return w[0];if(w=A(),Ga){Wt(!0);try{A()}finally{Wt(!1)}}return h.memoizedState=[w,d],w}function KA(A,d,h){return h===void 0||(Ln&1073741824)!==0?A.memoizedState=d:(A.memoizedState=h,A=C4(),cr.lanes|=A,Yu|=A,h)}function Dh(A,d,h,w){return ss(h,d)?h:Ur.current!==null?(A=KA(A,h,w),ss(A,d)||(Us=!0),A):(Ln&42)===0?(Us=!0,A.memoizedState=h):(A=C4(),cr.lanes|=A,Yu|=A,d)}function wf(A,d,h,w,N){var M=ae.p;ae.p=M!==0&&8>M?M:8;var ie=te.T,we={};te.T=we,Kw(A,!1,d,h);try{var Fe=N(),Xe=te.S;if(Xe!==null&&Xe(we,Fe),Fe!==null&&typeof Fe=="object"&&typeof Fe.then=="function"){var ut=gx(Fe,w);Rm(A,d,ut,Qo(A))}else Rm(A,d,w,Qo(A))}catch(vt){Rm(A,d,{then:function(){},status:"rejected",reason:vt},Qo())}finally{ae.p=M,te.T=ie}}function ic(){}function vl(A,d,h,w){if(A.tag!==5)throw Error(n(476));var N=oc(A).queue;wf(A,N,d,q,h===null?ic:function(){return yf(A),h(w)})}function oc(A){var d=A.memoizedState;if(d!==null)return d;d={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:q},next:null};var h={};return d.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:h},next:null},A.memoizedState=d,A=A.alternate,A!==null&&(A.memoizedState=d),d}function yf(A){var d=oc(A).next.queue;Rm(A,d,{},Qo())}function bf(){return Ha(Xm)}function Im(){return sa().memoizedState}function Tx(){return sa().memoizedState}function Fm(A){for(var d=A.return;d!==null;){switch(d.tag){case 24:case 3:var h=Qo();A=ct(h);var w=gt(d,A,h);w!==null&&(Ho(w,d,h),dt(w,d,h)),d={cache:ym()},A.payload=d;return}d=d.return}}function Dm(A,d,h){var w=Qo();h={lane:w,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},Bx(A)?BS(d,h):(h=Hc(A,d,h,w),h!==null&&(Ho(h,A,w),NS(h,d,w)))}function TS(A,d,h){var w=Qo();Rm(A,d,h,w)}function Rm(A,d,h,w){var N={lane:w,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(Bx(A))BS(d,N);else{var M=A.alternate;if(A.lanes===0&&(M===null||M.lanes===0)&&(M=d.lastRenderedReducer,M!==null))try{var ie=d.lastRenderedState,we=M(ie,h);if(N.hasEagerState=!0,N.eagerState=we,ss(we,ie))return Qc(A,d,N,0),ra===null&&Ao(),!1}catch{}finally{}if(h=Hc(A,d,N,w),h!==null)return Ho(h,A,w),NS(h,d,w),!0}return!1}function Kw(A,d,h,w){if(w={lane:2,revertLane:_y(),action:w,hasEagerState:!1,eagerState:null,next:null},Bx(A)){if(d)throw Error(n(479))}else d=Hc(A,h,w,2),d!==null&&Ho(d,A,2)}function Bx(A){var d=A.alternate;return A===cr||d!==null&&d===cr}function BS(A,d){ls=An=!0;var h=A.pending;h===null?d.next=d:(d.next=h.next,h.next=d),A.pending=d}function NS(A,d,h){if((h&4194048)!==0){var w=d.lanes;w&=A.pendingLanes,h|=w,d.lanes=h,zr(A,h)}}var Nx={readContext:Ha,use:gi,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useLayoutEffect:En,useInsertionEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useSyncExternalStore:En,useId:En,useHostTransitionStatus:En,useFormState:En,useActionState:En,useOptimistic:En,useMemoCache:En,useCacheRefresh:En},kS={readContext:Ha,use:gi,useCallback:function(A,d){return Js().memoizedState=[A,d===void 0?null:d],A},useContext:Ha,useEffect:Sm,useImperativeHandle:function(A,d,h){h=h!=null?h.concat([A]):null,Mo(4194308,4,_x.bind(null,d,A),h)},useLayoutEffect:function(A,d){return Mo(4194308,4,A,d)},useInsertionEffect:function(A,d){Mo(4,2,A,d)},useMemo:function(A,d){var h=Js();d=d===void 0?null:d;var w=A();if(Ga){Wt(!0);try{A()}finally{Wt(!1)}}return h.memoizedState=[w,d],w},useReducer:function(A,d,h){var w=Js();if(h!==void 0){var N=h(d);if(Ga){Wt(!0);try{h(d)}finally{Wt(!1)}}}else N=d;return w.memoizedState=w.baseState=N,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:N},w.queue=A,A=A.dispatch=Dm.bind(null,cr,A),[w.memoizedState,A]},useRef:function(A){var d=Js();return A={current:A},d.memoizedState=A},useState:function(A){A=gf(A);var d=A.queue,h=TS.bind(null,cr,d);return d.dispatch=h,[A.memoizedState,h]},useDebugValue:Nm,useDeferredValue:function(A,d){var h=Js();return KA(h,A,d)},useTransition:function(){var A=gf(!1);return A=wf.bind(null,cr,A.queue,!0,!1),Js().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,d,h){var w=cr,N=Js();if(gn){if(h===void 0)throw Error(n(407));h=h()}else{if(h=d(),ra===null)throw Error(n(349));(un&124)!==0||kh(w,d,h)}N.memoizedState=h;var M={value:h,getSnapshot:d};return N.queue=M,Sm(Qu.bind(null,w,M,A),[A]),w.flags|=2048,sc(9,vf(),pf.bind(null,w,M,h,d),null),h},useId:function(){var A=Js(),d=ra.identifierPrefix;if(gn){var h=ec,w=Zl;h=(w&~(1<<32-kt(w)-1)).toString(32)+h,d="«"+d+"R"+h,h=wa++,0<h&&(d+="H"+h.toString(32)),d+="»"}else h=ho++,d="«"+d+"r"+h.toString(32)+"»";return A.memoizedState=d},useHostTransitionStatus:bf,useFormState:xf,useActionState:xf,useOptimistic:function(A){var d=Js();d.memoizedState=d.baseState=A;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=h,d=Kw.bind(null,cr,!0,h),h.dispatch=d,[A,d]},useMemoCache:Jc,useCacheRefresh:function(){return Js().memoizedState=Fm.bind(null,cr)}},IS={readContext:Ha,use:gi,useCallback:km,useContext:Ha,useEffect:Ex,useImperativeHandle:Bm,useInsertionEffect:Tm,useLayoutEffect:qA,useMemo:Sx,useReducer:hf,useRef:Fh,useState:function(){return hf(xi)},useDebugValue:Nm,useDeferredValue:function(A,d){var h=sa();return Dh(h,gr.memoizedState,A,d)},useTransition:function(){var A=hf(xi)[0],d=sa().memoizedState;return[typeof A=="boolean"?A:$c(A),d]},useSyncExternalStore:mf,useId:Im,useHostTransitionStatus:bf,useFormState:Ih,useActionState:Ih,useOptimistic:function(A,d){var h=sa();return ac(h,gr,A,d)},useMemoCache:Jc,useCacheRefresh:Tx},JP={readContext:Ha,use:gi,useCallback:km,useContext:Ha,useEffect:Ex,useImperativeHandle:Bm,useInsertionEffect:Tm,useLayoutEffect:qA,useMemo:Sx,useReducer:Nh,useRef:Fh,useState:function(){return Nh(xi)},useDebugValue:Nm,useDeferredValue:function(A,d){var h=sa();return gr===null?KA(h,A,d):Dh(h,gr.memoizedState,A,d)},useTransition:function(){var A=Nh(xi)[0],d=sa().memoizedState;return[typeof A=="boolean"?A:$c(A),d]},useSyncExternalStore:mf,useId:Im,useHostTransitionStatus:bf,useFormState:Cx,useActionState:Cx,useOptimistic:function(A,d){var h=sa();return gr!==null?ac(h,gr,A,d):(h.baseState=A,[A,h.queue.dispatch])},useMemoCache:Jc,useCacheRefresh:Tx},Rh=null,Lm=0;function kx(A){var d=Lm;return Lm+=1,Rh===null&&(Rh=[]),Je(Rh,A,d)}function Um(A,d){d=d.props.ref,A.ref=d!==void 0?d:null}function Ix(A,d){throw d.$$typeof===m?Error(n(525)):(A=Object.prototype.toString.call(d),Error(n(31,A==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":A)))}function FS(A){var d=A._init;return d(A._payload)}function DS(A){function d(ze,je){if(A){var We=ze.deletions;We===null?(ze.deletions=[je],ze.flags|=16):We.push(je)}}function h(ze,je){if(!A)return null;for(;je!==null;)d(ze,je),je=je.sibling;return null}function w(ze){for(var je=new Map;ze!==null;)ze.key!==null?je.set(ze.key,ze):je.set(ze.index,ze),ze=ze.sibling;return je}function N(ze,je){return ze=hl(ze,je),ze.index=0,ze.sibling=null,ze}function M(ze,je,We){return ze.index=We,A?(We=ze.alternate,We!==null?(We=We.index,We<je?(ze.flags|=67108866,je):We):(ze.flags|=67108866,je)):(ze.flags|=1048576,je)}function ie(ze){return A&&ze.alternate===null&&(ze.flags|=67108866),ze}function we(ze,je,We,mt){return je===null||je.tag!==6?(je=bh(We,ze.mode,mt),je.return=ze,je):(je=N(je,We),je.return=ze,je)}function Fe(ze,je,We,mt){var Xt=We.type;return Xt===b?ut(ze,je,We.props.children,mt,We.key):je!==null&&(je.elementType===Xt||typeof Xt=="object"&&Xt!==null&&Xt.$$typeof===_&&FS(Xt)===je.type)?(je=N(je,We.props),Um(je,We),je.return=ze,je):(je=jA(We.type,We.key,We.props,null,ze.mode,mt),Um(je,We),je.return=ze,je)}function Xe(ze,je,We,mt){return je===null||je.tag!==4||je.stateNode.containerInfo!==We.containerInfo||je.stateNode.implementation!==We.implementation?(je=lf(We,ze.mode,mt),je.return=ze,je):(je=N(je,We.children||[]),je.return=ze,je)}function ut(ze,je,We,mt,Xt){return je===null||je.tag!==7?(je=Yl(We,ze.mode,mt,Xt),je.return=ze,je):(je=N(je,We),je.return=ze,je)}function vt(ze,je,We){if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return je=bh(""+je,ze.mode,We),je.return=ze,je;if(typeof je=="object"&&je!==null){switch(je.$$typeof){case p:return We=jA(je.type,je.key,je.props,null,ze.mode,We),Um(We,je),We.return=ze,We;case g:return je=lf(je,ze.mode,We),je.return=ze,je;case _:var mt=je._init;return je=mt(je._payload),vt(ze,je,We)}if(oe(je)||F(je))return je=Yl(je,ze.mode,We,null),je.return=ze,je;if(typeof je.then=="function")return vt(ze,kx(je),We);if(je.$$typeof===L)return vt(ze,qc(ze,je),We);Ix(ze,je)}return null}function tt(ze,je,We,mt){var Xt=je!==null?je.key:null;if(typeof We=="string"&&We!==""||typeof We=="number"||typeof We=="bigint")return Xt!==null?null:we(ze,je,""+We,mt);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case p:return We.key===Xt?Fe(ze,je,We,mt):null;case g:return We.key===Xt?Xe(ze,je,We,mt):null;case _:return Xt=We._init,We=Xt(We._payload),tt(ze,je,We,mt)}if(oe(We)||F(We))return Xt!==null?null:ut(ze,je,We,mt,null);if(typeof We.then=="function")return tt(ze,je,kx(We),mt);if(We.$$typeof===L)return tt(ze,je,qc(ze,We),mt);Ix(ze,We)}return null}function nt(ze,je,We,mt,Xt){if(typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint")return ze=ze.get(We)||null,we(je,ze,""+mt,Xt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case p:return ze=ze.get(mt.key===null?We:mt.key)||null,Fe(je,ze,mt,Xt);case g:return ze=ze.get(mt.key===null?We:mt.key)||null,Xe(je,ze,mt,Xt);case _:var $r=mt._init;return mt=$r(mt._payload),nt(ze,je,We,mt,Xt)}if(oe(mt)||F(mt))return ze=ze.get(We)||null,ut(je,ze,mt,Xt,null);if(typeof mt.then=="function")return nt(ze,je,We,kx(mt),Xt);if(mt.$$typeof===L)return nt(ze,je,We,qc(je,mt),Xt);Ix(je,mt)}return null}function Cr(ze,je,We,mt){for(var Xt=null,$r=null,sr=je,mr=je=0,Ps=null;sr!==null&&mr<We.length;mr++){sr.index>mr?(Ps=sr,sr=null):Ps=sr.sibling;var _n=tt(ze,sr,We[mr],mt);if(_n===null){sr===null&&(sr=Ps);break}A&&sr&&_n.alternate===null&&d(ze,sr),je=M(_n,je,mr),$r===null?Xt=_n:$r.sibling=_n,$r=_n,sr=Ps}if(mr===We.length)return h(ze,sr),gn&&QA(ze,mr),Xt;if(sr===null){for(;mr<We.length;mr++)sr=vt(ze,We[mr],mt),sr!==null&&(je=M(sr,je,mr),$r===null?Xt=sr:$r.sibling=sr,$r=sr);return gn&&QA(ze,mr),Xt}for(sr=w(sr);mr<We.length;mr++)Ps=nt(sr,ze,mr,We[mr],mt),Ps!==null&&(A&&Ps.alternate!==null&&sr.delete(Ps.key===null?mr:Ps.key),je=M(Ps,je,mr),$r===null?Xt=Ps:$r.sibling=Ps,$r=Ps);return A&&sr.forEach(function(id){return d(ze,id)}),gn&&QA(ze,mr),Xt}function hr(ze,je,We,mt){if(We==null)throw Error(n(151));for(var Xt=null,$r=null,sr=je,mr=je=0,Ps=null,_n=We.next();sr!==null&&!_n.done;mr++,_n=We.next()){sr.index>mr?(Ps=sr,sr=null):Ps=sr.sibling;var id=tt(ze,sr,_n.value,mt);if(id===null){sr===null&&(sr=Ps);break}A&&sr&&id.alternate===null&&d(ze,sr),je=M(id,je,mr),$r===null?Xt=id:$r.sibling=id,$r=id,sr=Ps}if(_n.done)return h(ze,sr),gn&&QA(ze,mr),Xt;if(sr===null){for(;!_n.done;mr++,_n=We.next())_n=vt(ze,_n.value,mt),_n!==null&&(je=M(_n,je,mr),$r===null?Xt=_n:$r.sibling=_n,$r=_n);return gn&&QA(ze,mr),Xt}for(sr=w(sr);!_n.done;mr++,_n=We.next())_n=nt(sr,ze,mr,_n.value,mt),_n!==null&&(A&&_n.alternate!==null&&sr.delete(_n.key===null?mr:_n.key),je=M(_n,je,mr),$r===null?Xt=_n:$r.sibling=_n,$r=_n);return A&&sr.forEach(function(Yj){return d(ze,Yj)}),gn&&QA(ze,mr),Xt}function qn(ze,je,We,mt){if(typeof We=="object"&&We!==null&&We.type===b&&We.key===null&&(We=We.props.children),typeof We=="object"&&We!==null){switch(We.$$typeof){case p:e:{for(var Xt=We.key;je!==null;){if(je.key===Xt){if(Xt=We.type,Xt===b){if(je.tag===7){h(ze,je.sibling),mt=N(je,We.props.children),mt.return=ze,ze=mt;break e}}else if(je.elementType===Xt||typeof Xt=="object"&&Xt!==null&&Xt.$$typeof===_&&FS(Xt)===je.type){h(ze,je.sibling),mt=N(je,We.props),Um(mt,We),mt.return=ze,ze=mt;break e}h(ze,je);break}else d(ze,je);je=je.sibling}We.type===b?(mt=Yl(We.props.children,ze.mode,mt,We.key),mt.return=ze,ze=mt):(mt=jA(We.type,We.key,We.props,null,ze.mode,mt),Um(mt,We),mt.return=ze,ze=mt)}return ie(ze);case g:e:{for(Xt=We.key;je!==null;){if(je.key===Xt)if(je.tag===4&&je.stateNode.containerInfo===We.containerInfo&&je.stateNode.implementation===We.implementation){h(ze,je.sibling),mt=N(je,We.children||[]),mt.return=ze,ze=mt;break e}else{h(ze,je);break}else d(ze,je);je=je.sibling}mt=lf(We,ze.mode,mt),mt.return=ze,ze=mt}return ie(ze);case _:return Xt=We._init,We=Xt(We._payload),qn(ze,je,We,mt)}if(oe(We))return Cr(ze,je,We,mt);if(F(We)){if(Xt=F(We),typeof Xt!="function")throw Error(n(150));return We=Xt.call(We),hr(ze,je,We,mt)}if(typeof We.then=="function")return qn(ze,je,kx(We),mt);if(We.$$typeof===L)return qn(ze,je,qc(ze,We),mt);Ix(ze,We)}return typeof We=="string"&&We!==""||typeof We=="number"||typeof We=="bigint"?(We=""+We,je!==null&&je.tag===6?(h(ze,je.sibling),mt=N(je,We),mt.return=ze,ze=mt):(h(ze,je),mt=bh(We,ze.mode,mt),mt.return=ze,ze=mt),ie(ze)):h(ze,je)}return function(ze,je,We,mt){try{Lm=0;var Xt=qn(ze,je,We,mt);return Rh=null,Xt}catch(sr){if(sr===he||sr===xe)throw sr;var $r=Ls(29,sr,null,ze.mode);return $r.lanes=mt,$r.return=ze,$r}finally{}}}var Lh=DS(!0),RS=DS(!1),wl=de(null),Yc=null;function zu(A){var d=A.alternate;K(Es,Es.current&1),K(wl,A),Yc===null&&(d===null||Ur.current!==null||d.memoizedState!==null)&&(Yc=A)}function LS(A){if(A.tag===22){if(K(Es,Es.current),K(wl,A),Yc===null){var d=A.alternate;d!==null&&d.memoizedState!==null&&(Yc=A)}}else qu()}function qu(){K(Es,Es.current),K(wl,wl.current)}function WA(A){P(wl),Yc===A&&(Yc=null),P(Es)}var Es=de(0);function Fx(A){for(var d=A;d!==null;){if(d.tag===13){var h=d.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||My(h)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===A)break;for(;d.sibling===null;){if(d.return===null||d.return===A)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function Ww(A,d,h,w){d=A.memoizedState,h=h(w,d),h=h==null?d:f({},d,h),A.memoizedState=h,A.lanes===0&&(A.updateQueue.baseState=h)}var $w={enqueueSetState:function(A,d,h){A=A._reactInternals;var w=Qo(),N=ct(w);N.payload=d,h!=null&&(N.callback=h),d=gt(A,N,w),d!==null&&(Ho(d,A,w),dt(d,A,w))},enqueueReplaceState:function(A,d,h){A=A._reactInternals;var w=Qo(),N=ct(w);N.tag=1,N.payload=d,h!=null&&(N.callback=h),d=gt(A,N,w),d!==null&&(Ho(d,A,w),dt(d,A,w))},enqueueForceUpdate:function(A,d){A=A._reactInternals;var h=Qo(),w=ct(h);w.tag=2,d!=null&&(w.callback=d),d=gt(A,w,h),d!==null&&(Ho(d,A,h),dt(d,A,h))}};function US(A,d,h,w,N,M,ie){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(w,M,ie):d.prototype&&d.prototype.isPureReactComponent?!Rc(h,w)||!Rc(N,M):!0}function MS(A,d,h,w){A=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(h,w),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(h,w),d.state!==A&&$w.enqueueReplaceState(d,d.state,null)}function Cf(A,d){var h=d;if("ref"in d){h={};for(var w in d)w!=="ref"&&(h[w]=d[w])}if(A=A.defaultProps){h===d&&(h=f({},h));for(var N in A)h[N]===void 0&&(h[N]=A[N])}return h}var Dx=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function PS(A){Dx(A)}function jS(A){console.error(A)}function OS(A){Dx(A)}function Rx(A,d){try{var h=A.onUncaughtError;h(d.value,{componentStack:d.stack})}catch(w){setTimeout(function(){throw w})}}function QS(A,d,h){try{var w=A.onCaughtError;w(h.value,{componentStack:h.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(N){setTimeout(function(){throw N})}}function Jw(A,d,h){return h=ct(h),h.tag=3,h.payload={element:null},h.callback=function(){Rx(A,d)},h}function HS(A){return A=ct(A),A.tag=3,A}function VS(A,d,h,w){var N=h.type.getDerivedStateFromError;if(typeof N=="function"){var M=w.value;A.payload=function(){return N(M)},A.callback=function(){QS(d,h,w)}}var ie=h.stateNode;ie!==null&&typeof ie.componentDidCatch=="function"&&(A.callback=function(){QS(d,h,w),typeof N!="function"&&(Xu===null?Xu=new Set([this]):Xu.add(this));var we=w.stack;this.componentDidCatch(w.value,{componentStack:we!==null?we:""})})}function YP(A,d,h,w,N){if(h.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(d=h.alternate,d!==null&&ju(d,h,N,!0),h=wl.current,h!==null){switch(h.tag){case 13:return Yc===null?wy():h.alternate===null&&Fa===0&&(Fa=3),h.flags&=-257,h.flags|=65536,h.lanes=N,w===be?h.flags|=16384:(d=h.updateQueue,d===null?h.updateQueue=new Set([w]):d.add(w),by(A,w,N)),!1;case 22:return h.flags|=65536,w===be?h.flags|=16384:(d=h.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([w])},h.updateQueue=d):(h=d.retryQueue,h===null?d.retryQueue=new Set([w]):h.add(w)),by(A,w,N)),!1}throw Error(n(435,h.tag))}return by(A,w,N),wy(),!1}if(gn)return d=wl.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=N,w!==wm&&(A=Error(n(422),{cause:w}),Pu(Or(A,h)))):(w!==wm&&(d=Error(n(423),{cause:w}),Pu(Or(d,h))),A=A.current.alternate,A.flags|=65536,N&=-N,A.lanes|=N,w=Or(w,h),N=Jw(A.stateNode,w,N),zt(A,N),Fa!==4&&(Fa=2)),!1;var M=Error(n(520),{cause:w});if(M=Or(M,h),Vm===null?Vm=[M]:Vm.push(M),Fa!==4&&(Fa=2),d===null)return!0;w=Or(w,h),h=d;do{switch(h.tag){case 3:return h.flags|=65536,A=N&-N,h.lanes|=A,A=Jw(h.stateNode,w,A),zt(h,A),!1;case 1:if(d=h.type,M=h.stateNode,(h.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(Xu===null||!Xu.has(M))))return h.flags|=65536,N&=-N,h.lanes|=N,N=HS(N),VS(N,A,h,w),zt(h,N),!1}h=h.return}while(h!==null);return!1}var GS=Error(n(461)),Us=!1;function Ys(A,d,h,w){d.child=A===null?RS(d,null,h,w):Lh(d,A.child,h,w)}function zS(A,d,h,w,N){h=h.render;var M=d.ref;if("ref"in w){var ie={};for(var we in w)we!=="ref"&&(ie[we]=w[we])}else ie=w;return xl(d),w=Uo(A,d,h,ie,M,N),we=ta(),A!==null&&!Us?(ff(A,d,N),$A(A,d,N)):(gn&&we&&cf(d),d.flags|=1,Ys(A,d,w,N),d.child)}function qS(A,d,h,w,N){if(A===null){var M=h.type;return typeof M=="function"&&!Uu(M)&&M.defaultProps===void 0&&h.compare===null?(d.tag=15,d.type=M,KS(A,d,M,w,N)):(A=jA(h.type,null,w,d,d.mode,N),A.ref=d.ref,A.return=d,d.child=A)}if(M=A.child,!ay(A,N)){var ie=M.memoizedProps;if(h=h.compare,h=h!==null?h:Rc,h(ie,w)&&A.ref===d.ref)return $A(A,d,N)}return d.flags|=1,A=hl(M,w),A.ref=d.ref,A.return=d,d.child=A}function KS(A,d,h,w,N){if(A!==null){var M=A.memoizedProps;if(Rc(M,w)&&A.ref===d.ref)if(Us=!1,d.pendingProps=w=M,ay(A,N))(A.flags&131072)!==0&&(Us=!0);else return d.lanes=A.lanes,$A(A,d,N)}return Yw(A,d,h,w,N)}function WS(A,d,h){var w=d.pendingProps,N=w.children,M=A!==null?A.memoizedState:null;if(w.mode==="hidden"){if((d.flags&128)!==0){if(w=M!==null?M.baseLanes|h:h,A!==null){for(N=d.child=A.child,M=0;N!==null;)M=M|N.lanes|N.childLanes,N=N.sibling;d.childLanes=M&~w}else d.childLanes=0,d.child=null;return $S(A,d,w,h)}if((h&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},A!==null&&Z(d,M!==null?M.cachePool:null),M!==null?kn(d,M):Cn(),LS(d);else return d.lanes=d.childLanes=536870912,$S(A,d,M!==null?M.baseLanes|h:h,h)}else M!==null?(Z(d,M.cachePool),kn(d,M),qu(),d.memoizedState=null):(A!==null&&Z(d,null),Cn(),qu());return Ys(A,d,N,h),d.child}function $S(A,d,h,w){var N=G();return N=N===null?null:{parent:Va._currentValue,pool:N},d.memoizedState={baseLanes:h,cachePool:N},A!==null&&Z(d,null),Cn(),LS(d),A!==null&&ju(A,d,w,!0),null}function Lx(A,d){var h=d.ref;if(h===null)A!==null&&A.ref!==null&&(d.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(n(284));(A===null||A.ref!==h)&&(d.flags|=4194816)}}function Yw(A,d,h,w,N){return xl(d),h=Uo(A,d,h,w,void 0,N),w=ta(),A!==null&&!Us?(ff(A,d,N),$A(A,d,N)):(gn&&w&&cf(d),d.flags|=1,Ys(A,d,h,N),d.child)}function JS(A,d,h,w,N,M){return xl(d),d.updateQueue=null,h=GA(d,w,h,N),Kc(A),w=ta(),A!==null&&!Us?(ff(A,d,M),$A(A,d,M)):(gn&&w&&cf(d),d.flags|=1,Ys(A,d,h,M),d.child)}function YS(A,d,h,w,N){if(xl(d),d.stateNode===null){var M=is,ie=h.contextType;typeof ie=="object"&&ie!==null&&(M=Ha(ie)),M=new h(w,M),d.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,M.updater=$w,d.stateNode=M,M._reactInternals=d,M=d.stateNode,M.props=w,M.state=d.memoizedState,M.refs={},Me(d),ie=h.contextType,M.context=typeof ie=="object"&&ie!==null?Ha(ie):is,M.state=d.memoizedState,ie=h.getDerivedStateFromProps,typeof ie=="function"&&(Ww(d,h,ie,w),M.state=d.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(ie=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),ie!==M.state&&$w.enqueueReplaceState(M,M.state,null),Mt(d,w,M,N),rr(),M.state=d.memoizedState),typeof M.componentDidMount=="function"&&(d.flags|=4194308),w=!0}else if(A===null){M=d.stateNode;var we=d.memoizedProps,Fe=Cf(h,we);M.props=Fe;var Xe=M.context,ut=h.contextType;ie=is,typeof ut=="object"&&ut!==null&&(ie=Ha(ut));var vt=h.getDerivedStateFromProps;ut=typeof vt=="function"||typeof M.getSnapshotBeforeUpdate=="function",we=d.pendingProps!==we,ut||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(we||Xe!==ie)&&MS(d,M,w,ie),st=!1;var tt=d.memoizedState;M.state=tt,Mt(d,w,M,N),rr(),Xe=d.memoizedState,we||tt!==Xe||st?(typeof vt=="function"&&(Ww(d,h,vt,w),Xe=d.memoizedState),(Fe=st||US(d,h,Fe,w,tt,Xe,ie))?(ut||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(d.flags|=4194308)):(typeof M.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=w,d.memoizedState=Xe),M.props=w,M.state=Xe,M.context=ie,w=Fe):(typeof M.componentDidMount=="function"&&(d.flags|=4194308),w=!1)}else{M=d.stateNode,Oe(A,d),ie=d.memoizedProps,ut=Cf(h,ie),M.props=ut,vt=d.pendingProps,tt=M.context,Xe=h.contextType,Fe=is,typeof Xe=="object"&&Xe!==null&&(Fe=Ha(Xe)),we=h.getDerivedStateFromProps,(Xe=typeof we=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(ie!==vt||tt!==Fe)&&MS(d,M,w,Fe),st=!1,tt=d.memoizedState,M.state=tt,Mt(d,w,M,N),rr();var nt=d.memoizedState;ie!==vt||tt!==nt||st||A!==null&&A.dependencies!==null&&Sh(A.dependencies)?(typeof we=="function"&&(Ww(d,h,we,w),nt=d.memoizedState),(ut=st||US(d,h,ut,w,tt,nt,Fe)||A!==null&&A.dependencies!==null&&Sh(A.dependencies))?(Xe||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(w,nt,Fe),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(w,nt,Fe)),typeof M.componentDidUpdate=="function"&&(d.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof M.componentDidUpdate!="function"||ie===A.memoizedProps&&tt===A.memoizedState||(d.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||ie===A.memoizedProps&&tt===A.memoizedState||(d.flags|=1024),d.memoizedProps=w,d.memoizedState=nt),M.props=w,M.state=nt,M.context=Fe,w=ut):(typeof M.componentDidUpdate!="function"||ie===A.memoizedProps&&tt===A.memoizedState||(d.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||ie===A.memoizedProps&&tt===A.memoizedState||(d.flags|=1024),w=!1)}return M=w,Lx(A,d),w=(d.flags&128)!==0,M||w?(M=d.stateNode,h=w&&typeof h.getDerivedStateFromError!="function"?null:M.render(),d.flags|=1,A!==null&&w?(d.child=Lh(d,A.child,null,N),d.child=Lh(d,null,h,N)):Ys(A,d,h,N),d.memoizedState=M.state,A=d.child):A=$A(A,d,N),A}function XS(A,d,h,w){return zi(),d.flags|=256,Ys(A,d,h,w),d.child}var Xw={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zw(A){return{baseLanes:A,cachePool:le()}}function ey(A,d,h){return A=A!==null?A.childLanes&~h:0,d&&(A|=yl),A}function ZS(A,d,h){var w=d.pendingProps,N=!1,M=(d.flags&128)!==0,ie;if((ie=M)||(ie=A!==null&&A.memoizedState===null?!1:(Es.current&2)!==0),ie&&(N=!0,d.flags&=-129),ie=(d.flags&32)!==0,d.flags&=-33,A===null){if(gn){if(N?zu(d):qu(),gn){var we=fa,Fe;if(Fe=we){e:{for(Fe=we,we=ml;Fe.nodeType!==8;){if(!we){we=null;break e}if(Fe=cc(Fe.nextSibling),Fe===null){we=null;break e}}we=Fe}we!==null?(d.memoizedState={dehydrated:we,treeContext:OA!==null?{id:Zl,overflow:ec}:null,retryLane:536870912,hydrationErrors:null},Fe=Ls(18,null,null,0),Fe.stateNode=we,Fe.return=d,d.child=Fe,Qa=d,fa=null,Fe=!0):Fe=!1}Fe||HA(d)}if(we=d.memoizedState,we!==null&&(we=we.dehydrated,we!==null))return My(we)?d.lanes=32:d.lanes=536870912,null;WA(d)}return we=w.children,w=w.fallback,N?(qu(),N=d.mode,we=Ux({mode:"hidden",children:we},N),w=Yl(w,N,h,null),we.return=d,w.return=d,we.sibling=w,d.child=we,N=d.child,N.memoizedState=Zw(h),N.childLanes=ey(A,ie,h),d.memoizedState=Xw,w):(zu(d),ty(d,we))}if(Fe=A.memoizedState,Fe!==null&&(we=Fe.dehydrated,we!==null)){if(M)d.flags&256?(zu(d),d.flags&=-257,d=ry(A,d,h)):d.memoizedState!==null?(qu(),d.child=A.child,d.flags|=128,d=null):(qu(),N=w.fallback,we=d.mode,w=Ux({mode:"visible",children:w.children},we),N=Yl(N,we,h,null),N.flags|=2,w.return=d,N.return=d,w.sibling=N,d.child=w,Lh(d,A.child,null,h),w=d.child,w.memoizedState=Zw(h),w.childLanes=ey(A,ie,h),d.memoizedState=Xw,d=N);else if(zu(d),My(we)){if(ie=we.nextSibling&&we.nextSibling.dataset,ie)var Xe=ie.dgst;ie=Xe,w=Error(n(419)),w.stack="",w.digest=ie,Pu({value:w,source:null,stack:null}),d=ry(A,d,h)}else if(Us||ju(A,d,h,!1),ie=(h&A.childLanes)!==0,Us||ie){if(ie=ra,ie!==null&&(w=h&-h,w=(w&42)!==0?1:Ns(w),w=(w&(ie.suspendedLanes|h))!==0?0:w,w!==0&&w!==Fe.retryLane))throw Fe.retryLane=w,Jl(A,w),Ho(ie,A,w),GS;we.data==="$?"||wy(),d=ry(A,d,h)}else we.data==="$?"?(d.flags|=192,d.child=A.child,d=null):(A=Fe.treeContext,fa=cc(we.nextSibling),Qa=d,gn=!0,Gc=null,ml=!1,A!==null&&(fo[Gi++]=Zl,fo[Gi++]=ec,fo[Gi++]=OA,Zl=A.id,ec=A.overflow,OA=d),d=ty(d,w.children),d.flags|=4096);return d}return N?(qu(),N=w.fallback,we=d.mode,Fe=A.child,Xe=Fe.sibling,w=hl(Fe,{mode:"hidden",children:w.children}),w.subtreeFlags=Fe.subtreeFlags&65011712,Xe!==null?N=hl(Xe,N):(N=Yl(N,we,h,null),N.flags|=2),N.return=d,w.return=d,w.sibling=N,d.child=w,w=N,N=d.child,we=A.child.memoizedState,we===null?we=Zw(h):(Fe=we.cachePool,Fe!==null?(Xe=Va._currentValue,Fe=Fe.parent!==Xe?{parent:Xe,pool:Xe}:Fe):Fe=le(),we={baseLanes:we.baseLanes|h,cachePool:Fe}),N.memoizedState=we,N.childLanes=ey(A,ie,h),d.memoizedState=Xw,w):(zu(d),h=A.child,A=h.sibling,h=hl(h,{mode:"visible",children:w.children}),h.return=d,h.sibling=null,A!==null&&(ie=d.deletions,ie===null?(d.deletions=[A],d.flags|=16):ie.push(A)),d.child=h,d.memoizedState=null,h)}function ty(A,d){return d=Ux({mode:"visible",children:d},A.mode),d.return=A,A.child=d}function Ux(A,d){return A=Ls(22,A,null,d),A.lanes=0,A.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},A}function ry(A,d,h){return Lh(d,A.child,null,h),A=ty(d,d.pendingProps.children),A.flags|=2,d.memoizedState=null,A}function e4(A,d,h){A.lanes|=d;var w=A.alternate;w!==null&&(w.lanes|=d),Eh(A.return,d,h)}function ny(A,d,h,w,N){var M=A.memoizedState;M===null?A.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:w,tail:h,tailMode:N}:(M.isBackwards=d,M.rendering=null,M.renderingStartTime=0,M.last=w,M.tail=h,M.tailMode=N)}function t4(A,d,h){var w=d.pendingProps,N=w.revealOrder,M=w.tail;if(Ys(A,d,w.children,h),w=Es.current,(w&2)!==0)w=w&1|2,d.flags|=128;else{if(A!==null&&(A.flags&128)!==0)e:for(A=d.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&e4(A,h,d);else if(A.tag===19)e4(A,h,d);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===d)break e;for(;A.sibling===null;){if(A.return===null||A.return===d)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}w&=1}switch(K(Es,w),N){case"forwards":for(h=d.child,N=null;h!==null;)A=h.alternate,A!==null&&Fx(A)===null&&(N=h),h=h.sibling;h=N,h===null?(N=d.child,d.child=null):(N=h.sibling,h.sibling=null),ny(d,!1,N,h,M);break;case"backwards":for(h=null,N=d.child,d.child=null;N!==null;){if(A=N.alternate,A!==null&&Fx(A)===null){d.child=N;break}A=N.sibling,N.sibling=h,h=N,N=A}ny(d,!0,h,null,M);break;case"together":ny(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function $A(A,d,h){if(A!==null&&(d.dependencies=A.dependencies),Yu|=d.lanes,(h&d.childLanes)===0)if(A!==null){if(ju(A,d,h,!1),(h&d.childLanes)===0)return null}else return null;if(A!==null&&d.child!==A.child)throw Error(n(153));if(d.child!==null){for(A=d.child,h=hl(A,A.pendingProps),d.child=h,h.return=d;A.sibling!==null;)A=A.sibling,h=h.sibling=hl(A,A.pendingProps),h.return=d;h.sibling=null}return d.child}function ay(A,d){return(A.lanes&d)!==0?!0:(A=A.dependencies,!!(A!==null&&Sh(A)))}function XP(A,d,h){switch(d.tag){case 3:ge(d,d.stateNode.containerInfo),zc(d,Va,A.memoizedState.cache),zi();break;case 27:case 5:ye(d);break;case 4:ge(d,d.stateNode.containerInfo);break;case 10:zc(d,d.type,d.memoizedProps.value);break;case 13:var w=d.memoizedState;if(w!==null)return w.dehydrated!==null?(zu(d),d.flags|=128,null):(h&d.child.childLanes)!==0?ZS(A,d,h):(zu(d),A=$A(A,d,h),A!==null?A.sibling:null);zu(d);break;case 19:var N=(A.flags&128)!==0;if(w=(h&d.childLanes)!==0,w||(ju(A,d,h,!1),w=(h&d.childLanes)!==0),N){if(w)return t4(A,d,h);d.flags|=128}if(N=d.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),K(Es,Es.current),w)break;return null;case 22:case 23:return d.lanes=0,WS(A,d,h);case 24:zc(d,Va,A.memoizedState.cache)}return $A(A,d,h)}function r4(A,d,h){if(A!==null)if(A.memoizedProps!==d.pendingProps)Us=!0;else{if(!ay(A,h)&&(d.flags&128)===0)return Us=!1,XP(A,d,h);Us=(A.flags&131072)!==0}else Us=!1,gn&&(d.flags&1048576)!==0&&dx(d,Ch,d.index);switch(d.lanes=0,d.tag){case 16:e:{A=d.pendingProps;var w=d.elementType,N=w._init;if(w=N(w._payload),d.type=w,typeof w=="function")Uu(w)?(A=Cf(w,A),d.tag=1,d=YS(null,d,w,A,h)):(d.tag=0,d=Yw(null,d,w,A,h));else{if(w!=null){if(N=w.$$typeof,N===j){d.tag=11,d=zS(null,d,w,A,h);break e}else if(N===E){d.tag=14,d=qS(null,d,w,A,h);break e}}throw d=X(w)||w,Error(n(306,d,""))}}return d;case 0:return Yw(A,d,d.type,d.pendingProps,h);case 1:return w=d.type,N=Cf(w,d.pendingProps),YS(A,d,w,N,h);case 3:e:{if(ge(d,d.stateNode.containerInfo),A===null)throw Error(n(387));w=d.pendingProps;var M=d.memoizedState;N=M.element,Oe(A,d),Mt(d,w,null,h);var ie=d.memoizedState;if(w=ie.cache,zc(d,Va,w),w!==M.cache&&_h(d,[Va],h,!0),rr(),w=ie.element,M.isDehydrated)if(M={element:w,isDehydrated:!1,cache:ie.cache},d.updateQueue.baseState=M,d.memoizedState=M,d.flags&256){d=XS(A,d,w,h);break e}else if(w!==N){N=Or(Error(n(424)),d),Pu(N),d=XS(A,d,w,h);break e}else{switch(A=d.stateNode.containerInfo,A.nodeType){case 9:A=A.body;break;default:A=A.nodeName==="HTML"?A.ownerDocument.body:A}for(fa=cc(A.firstChild),Qa=d,gn=!0,Gc=null,ml=!0,h=RS(d,null,w,h),d.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(zi(),w===N){d=$A(A,d,h);break e}Ys(A,d,w,h)}d=d.child}return d;case 26:return Lx(A,d),A===null?(h=iT(d.type,null,d.pendingProps,null))?d.memoizedState=h:gn||(h=d.type,A=d.pendingProps,w=Jx(Ae.current).createElement(h),w[pn]=d,w[an]=A,Zs(w,h,A),He(w),d.stateNode=w):d.memoizedState=iT(d.type,A.memoizedProps,d.pendingProps,A.memoizedState),null;case 27:return ye(d),A===null&&gn&&(w=d.stateNode=nT(d.type,d.pendingProps,Ae.current),Qa=d,ml=!0,N=fa,td(d.type)?(Py=N,fa=cc(w.firstChild)):fa=N),Ys(A,d,d.pendingProps.children,h),Lx(A,d),A===null&&(d.flags|=4194304),d.child;case 5:return A===null&&gn&&((N=w=fa)&&(w=Sj(w,d.type,d.pendingProps,ml),w!==null?(d.stateNode=w,Qa=d,fa=cc(w.firstChild),ml=!1,N=!0):N=!1),N||HA(d)),ye(d),N=d.type,M=d.pendingProps,ie=A!==null?A.memoizedProps:null,w=M.children,Ry(N,M)?w=null:ie!==null&&Ry(N,ie)&&(d.flags|=32),d.memoizedState!==null&&(N=Uo(A,d,Wc,null,null,h),Xm._currentValue=N),Lx(A,d),Ys(A,d,w,h),d.child;case 6:return A===null&&gn&&((A=h=fa)&&(h=Tj(h,d.pendingProps,ml),h!==null?(d.stateNode=h,Qa=d,fa=null,A=!0):A=!1),A||HA(d)),null;case 13:return ZS(A,d,h);case 4:return ge(d,d.stateNode.containerInfo),w=d.pendingProps,A===null?d.child=Lh(d,null,w,h):Ys(A,d,w,h),d.child;case 11:return zS(A,d,d.type,d.pendingProps,h);case 7:return Ys(A,d,d.pendingProps,h),d.child;case 8:return Ys(A,d,d.pendingProps.children,h),d.child;case 12:return Ys(A,d,d.pendingProps.children,h),d.child;case 10:return w=d.pendingProps,zc(d,d.type,w.value),Ys(A,d,w.children,h),d.child;case 9:return N=d.type._context,w=d.pendingProps.children,xl(d),N=Ha(N),w=w(N),d.flags|=1,Ys(A,d,w,h),d.child;case 14:return qS(A,d,d.type,d.pendingProps,h);case 15:return KS(A,d,d.type,d.pendingProps,h);case 19:return t4(A,d,h);case 31:return w=d.pendingProps,h=d.mode,w={mode:w.mode,children:w.children},A===null?(h=Ux(w,h),h.ref=d.ref,d.child=h,h.return=d,d=h):(h=hl(A.child,w),h.ref=d.ref,d.child=h,h.return=d,d=h),d;case 22:return WS(A,d,h);case 24:return xl(d),w=Ha(Va),A===null?(N=G(),N===null&&(N=ra,M=ym(),N.pooledCache=M,M.refCount++,M!==null&&(N.pooledCacheLanes|=h),N=M),d.memoizedState={parent:w,cache:N},Me(d),zc(d,Va,N)):((A.lanes&h)!==0&&(Oe(A,d),Mt(d,null,null,h),rr()),N=A.memoizedState,M=d.memoizedState,N.parent!==w?(N={parent:w,cache:w},d.memoizedState=N,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=N),zc(d,Va,w)):(w=M.cache,zc(d,Va,w),w!==N.cache&&_h(d,[Va],h,!0))),Ys(A,d,d.pendingProps.children,h),d.child;case 29:throw d.pendingProps}throw Error(n(156,d.tag))}function JA(A){A.flags|=4}function n4(A,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)A.flags&=-16777217;else if(A.flags|=16777216,!uT(d)){if(d=wl.current,d!==null&&((un&4194048)===un?Yc!==null:(un&62914560)!==un&&(un&536870912)===0||d!==Yc))throw Ke=be,me;A.flags|=8192}}function Mx(A,d){d!==null&&(A.flags|=4),A.flags&16384&&(d=A.tag!==22?Bn():536870912,A.lanes|=d,jh|=d)}function Mm(A,d){if(!gn)switch(A.tailMode){case"hidden":d=A.tail;for(var h=null;d!==null;)d.alternate!==null&&(h=d),d=d.sibling;h===null?A.tail=null:h.sibling=null;break;case"collapsed":h=A.tail;for(var w=null;h!==null;)h.alternate!==null&&(w=h),h=h.sibling;w===null?d||A.tail===null?A.tail=null:A.tail.sibling=null:w.sibling=null}}function ba(A){var d=A.alternate!==null&&A.alternate.child===A.child,h=0,w=0;if(d)for(var N=A.child;N!==null;)h|=N.lanes|N.childLanes,w|=N.subtreeFlags&65011712,w|=N.flags&65011712,N.return=A,N=N.sibling;else for(N=A.child;N!==null;)h|=N.lanes|N.childLanes,w|=N.subtreeFlags,w|=N.flags,N.return=A,N=N.sibling;return A.subtreeFlags|=w,A.childLanes=h,d}function ZP(A,d,h){var w=d.pendingProps;switch(Af(d),d.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ba(d),null;case 1:return ba(d),null;case 3:return h=d.stateNode,w=null,A!==null&&(w=A.memoizedState.cache),d.memoizedState.cache!==w&&(d.flags|=2048),gl(Va),pe(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(A===null||A.child===null)&&($s(d)?JA(d):A===null||A.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,hx())),ba(d),null;case 26:return h=d.memoizedState,A===null?(JA(d),h!==null?(ba(d),n4(d,h)):(ba(d),d.flags&=-16777217)):h?h!==A.memoizedState?(JA(d),ba(d),n4(d,h)):(ba(d),d.flags&=-16777217):(A.memoizedProps!==w&&JA(d),ba(d),d.flags&=-16777217),null;case 27:ue(d),h=Ae.current;var N=d.type;if(A!==null&&d.stateNode!=null)A.memoizedProps!==w&&JA(d);else{if(!w){if(d.stateNode===null)throw Error(n(166));return ba(d),null}A=Y.current,$s(d)?fx(d):(A=nT(N,w,h),d.stateNode=A,JA(d))}return ba(d),null;case 5:if(ue(d),h=d.type,A!==null&&d.stateNode!=null)A.memoizedProps!==w&&JA(d);else{if(!w){if(d.stateNode===null)throw Error(n(166));return ba(d),null}if(A=Y.current,$s(d))fx(d);else{switch(N=Jx(Ae.current),A){case 1:A=N.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:A=N.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":A=N.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":A=N.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":A=N.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof w.is=="string"?N.createElement("select",{is:w.is}):N.createElement("select"),w.multiple?A.multiple=!0:w.size&&(A.size=w.size);break;default:A=typeof w.is=="string"?N.createElement(h,{is:w.is}):N.createElement(h)}}A[pn]=d,A[an]=w;e:for(N=d.child;N!==null;){if(N.tag===5||N.tag===6)A.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===d)break e;for(;N.sibling===null;){if(N.return===null||N.return===d)break e;N=N.return}N.sibling.return=N.return,N=N.sibling}d.stateNode=A;e:switch(Zs(A,h,w),h){case"button":case"input":case"select":case"textarea":A=!!w.autoFocus;break e;case"img":A=!0;break e;default:A=!1}A&&JA(d)}}return ba(d),d.flags&=-16777217,null;case 6:if(A&&d.stateNode!=null)A.memoizedProps!==w&&JA(d);else{if(typeof w!="string"&&d.stateNode===null)throw Error(n(166));if(A=Ae.current,$s(d)){if(A=d.stateNode,h=d.memoizedProps,w=null,N=Qa,N!==null)switch(N.tag){case 27:case 5:w=N.memoizedProps}A[pn]=d,A=!!(A.nodeValue===h||w!==null&&w.suppressHydrationWarning===!0||J4(A.nodeValue,h)),A||HA(d)}else A=Jx(A).createTextNode(w),A[pn]=d,d.stateNode=A}return ba(d),null;case 13:if(w=d.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(N=$s(d),w!==null&&w.dehydrated!==null){if(A===null){if(!N)throw Error(n(318));if(N=d.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(n(317));N[pn]=d}else zi(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;ba(d),N=!1}else N=hx(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=N),N=!0;if(!N)return d.flags&256?(WA(d),d):(WA(d),null)}if(WA(d),(d.flags&128)!==0)return d.lanes=h,d;if(h=w!==null,A=A!==null&&A.memoizedState!==null,h){w=d.child,N=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(N=w.alternate.memoizedState.cachePool.pool);var M=null;w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(M=w.memoizedState.cachePool.pool),M!==N&&(w.flags|=2048)}return h!==A&&h&&(d.child.flags|=8192),Mx(d,d.updateQueue),ba(d),null;case 4:return pe(),A===null&&Ny(d.stateNode.containerInfo),ba(d),null;case 10:return gl(d.type),ba(d),null;case 19:if(P(Es),N=d.memoizedState,N===null)return ba(d),null;if(w=(d.flags&128)!==0,M=N.rendering,M===null)if(w)Mm(N,!1);else{if(Fa!==0||A!==null&&(A.flags&128)!==0)for(A=d.child;A!==null;){if(M=Fx(A),M!==null){for(d.flags|=128,Mm(N,!1),A=M.updateQueue,d.updateQueue=A,Mx(d,A),d.subtreeFlags=0,A=h,h=d.child;h!==null;)of(h,A),h=h.sibling;return K(Es,Es.current&1|2),d.child}A=A.sibling}N.tail!==null&&Le()>Ox&&(d.flags|=128,w=!0,Mm(N,!1),d.lanes=4194304)}else{if(!w)if(A=Fx(M),A!==null){if(d.flags|=128,w=!0,A=A.updateQueue,d.updateQueue=A,Mx(d,A),Mm(N,!0),N.tail===null&&N.tailMode==="hidden"&&!M.alternate&&!gn)return ba(d),null}else 2*Le()-N.renderingStartTime>Ox&&h!==536870912&&(d.flags|=128,w=!0,Mm(N,!1),d.lanes=4194304);N.isBackwards?(M.sibling=d.child,d.child=M):(A=N.last,A!==null?A.sibling=M:d.child=M,N.last=M)}return N.tail!==null?(d=N.tail,N.rendering=d,N.tail=d.sibling,N.renderingStartTime=Le(),d.sibling=null,A=Es.current,K(Es,w?A&1|2:A&1),d):(ba(d),null);case 22:case 23:return WA(d),Tr(),w=d.memoizedState!==null,A!==null?A.memoizedState!==null!==w&&(d.flags|=8192):w&&(d.flags|=8192),w?(h&536870912)!==0&&(d.flags&128)===0&&(ba(d),d.subtreeFlags&6&&(d.flags|=8192)):ba(d),h=d.updateQueue,h!==null&&Mx(d,h.retryQueue),h=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(h=A.memoizedState.cachePool.pool),w=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(w=d.memoizedState.cachePool.pool),w!==h&&(d.flags|=2048),A!==null&&P(I),null;case 24:return h=null,A!==null&&(h=A.memoizedState.cache),d.memoizedState.cache!==h&&(d.flags|=2048),gl(Va),ba(d),null;case 25:return null;case 30:return null}throw Error(n(156,d.tag))}function ej(A,d){switch(Af(d),d.tag){case 1:return A=d.flags,A&65536?(d.flags=A&-65537|128,d):null;case 3:return gl(Va),pe(),A=d.flags,(A&65536)!==0&&(A&128)===0?(d.flags=A&-65537|128,d):null;case 26:case 27:case 5:return ue(d),null;case 13:if(WA(d),A=d.memoizedState,A!==null&&A.dehydrated!==null){if(d.alternate===null)throw Error(n(340));zi()}return A=d.flags,A&65536?(d.flags=A&-65537|128,d):null;case 19:return P(Es),null;case 4:return pe(),null;case 10:return gl(d.type),null;case 22:case 23:return WA(d),Tr(),A!==null&&P(I),A=d.flags,A&65536?(d.flags=A&-65537|128,d):null;case 24:return gl(Va),null;case 25:return null;default:return null}}function a4(A,d){switch(Af(d),d.tag){case 3:gl(Va),pe();break;case 26:case 27:case 5:ue(d);break;case 4:pe();break;case 13:WA(d);break;case 19:P(Es);break;case 10:gl(d.type);break;case 22:case 23:WA(d),Tr(),A!==null&&P(I);break;case 24:gl(Va)}}function Pm(A,d){try{var h=d.updateQueue,w=h!==null?h.lastEffect:null;if(w!==null){var N=w.next;h=N;do{if((h.tag&A)===A){w=void 0;var M=h.create,ie=h.inst;w=M(),ie.destroy=w}h=h.next}while(h!==N)}}catch(we){Yn(d,d.return,we)}}function Ku(A,d,h){try{var w=d.updateQueue,N=w!==null?w.lastEffect:null;if(N!==null){var M=N.next;w=M;do{if((w.tag&A)===A){var ie=w.inst,we=ie.destroy;if(we!==void 0){ie.destroy=void 0,N=d;var Fe=h,Xe=we;try{Xe()}catch(ut){Yn(N,Fe,ut)}}}w=w.next}while(w!==M)}}catch(ut){Yn(d,d.return,ut)}}function s4(A){var d=A.updateQueue;if(d!==null){var h=A.stateNode;try{bn(d,h)}catch(w){Yn(A,A.return,w)}}}function i4(A,d,h){h.props=Cf(A.type,A.memoizedProps),h.state=A.memoizedState;try{h.componentWillUnmount()}catch(w){Yn(A,d,w)}}function jm(A,d){try{var h=A.ref;if(h!==null){switch(A.tag){case 26:case 27:case 5:var w=A.stateNode;break;case 30:w=A.stateNode;break;default:w=A.stateNode}typeof h=="function"?A.refCleanup=h(w):h.current=w}}catch(N){Yn(A,d,N)}}function Xc(A,d){var h=A.ref,w=A.refCleanup;if(h!==null)if(typeof w=="function")try{w()}catch(N){Yn(A,d,N)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(N){Yn(A,d,N)}else h.current=null}function o4(A){var d=A.type,h=A.memoizedProps,w=A.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":h.autoFocus&&w.focus();break e;case"img":h.src?w.src=h.src:h.srcSet&&(w.srcset=h.srcSet)}}catch(N){Yn(A,A.return,N)}}function sy(A,d,h){try{var w=A.stateNode;yj(w,A.type,h,d),w[an]=d}catch(N){Yn(A,A.return,N)}}function l4(A){return A.tag===5||A.tag===3||A.tag===26||A.tag===27&&td(A.type)||A.tag===4}function iy(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||l4(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.tag===27&&td(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function oy(A,d,h){var w=A.tag;if(w===5||w===6)A=A.stateNode,d?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(A,d):(d=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,d.appendChild(A),h=h._reactRootContainer,h!=null||d.onclick!==null||(d.onclick=$x));else if(w!==4&&(w===27&&td(A.type)&&(h=A.stateNode,d=null),A=A.child,A!==null))for(oy(A,d,h),A=A.sibling;A!==null;)oy(A,d,h),A=A.sibling}function Px(A,d,h){var w=A.tag;if(w===5||w===6)A=A.stateNode,d?h.insertBefore(A,d):h.appendChild(A);else if(w!==4&&(w===27&&td(A.type)&&(h=A.stateNode),A=A.child,A!==null))for(Px(A,d,h),A=A.sibling;A!==null;)Px(A,d,h),A=A.sibling}function c4(A){var d=A.stateNode,h=A.memoizedProps;try{for(var w=A.type,N=d.attributes;N.length;)d.removeAttributeNode(N[0]);Zs(d,w,h),d[pn]=A,d[an]=h}catch(M){Yn(A,A.return,M)}}var YA=!1,za=!1,ly=!1,A4=typeof WeakSet=="function"?WeakSet:Set,Ms=null;function tj(A,d){if(A=A.containerInfo,Fy=r1,A=Ws(A),Cs(A)){if("selectionStart"in A)var h={start:A.selectionStart,end:A.selectionEnd};else e:{h=(h=A.ownerDocument)&&h.defaultView||window;var w=h.getSelection&&h.getSelection();if(w&&w.rangeCount!==0){h=w.anchorNode;var N=w.anchorOffset,M=w.focusNode;w=w.focusOffset;try{h.nodeType,M.nodeType}catch{h=null;break e}var ie=0,we=-1,Fe=-1,Xe=0,ut=0,vt=A,tt=null;t:for(;;){for(var nt;vt!==h||N!==0&&vt.nodeType!==3||(we=ie+N),vt!==M||w!==0&&vt.nodeType!==3||(Fe=ie+w),vt.nodeType===3&&(ie+=vt.nodeValue.length),(nt=vt.firstChild)!==null;)tt=vt,vt=nt;for(;;){if(vt===A)break t;if(tt===h&&++Xe===N&&(we=ie),tt===M&&++ut===w&&(Fe=ie),(nt=vt.nextSibling)!==null)break;vt=tt,tt=vt.parentNode}vt=nt}h=we===-1||Fe===-1?null:{start:we,end:Fe}}else h=null}h=h||{start:0,end:0}}else h=null;for(Dy={focusedElem:A,selectionRange:h},r1=!1,Ms=d;Ms!==null;)if(d=Ms,A=d.child,(d.subtreeFlags&1024)!==0&&A!==null)A.return=d,Ms=A;else for(;Ms!==null;){switch(d=Ms,M=d.alternate,A=d.flags,d.tag){case 0:break;case 11:case 15:break;case 1:if((A&1024)!==0&&M!==null){A=void 0,h=d,N=M.memoizedProps,M=M.memoizedState,w=h.stateNode;try{var Cr=Cf(h.type,N,h.elementType===h.type);A=w.getSnapshotBeforeUpdate(Cr,M),w.__reactInternalSnapshotBeforeUpdate=A}catch(hr){Yn(h,h.return,hr)}}break;case 3:if((A&1024)!==0){if(A=d.stateNode.containerInfo,h=A.nodeType,h===9)Uy(A);else if(h===1)switch(A.nodeName){case"HEAD":case"HTML":case"BODY":Uy(A);break;default:A.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((A&1024)!==0)throw Error(n(163))}if(A=d.sibling,A!==null){A.return=d.return,Ms=A;break}Ms=d.return}}function u4(A,d,h){var w=h.flags;switch(h.tag){case 0:case 11:case 15:Wu(A,h),w&4&&Pm(5,h);break;case 1:if(Wu(A,h),w&4)if(A=h.stateNode,d===null)try{A.componentDidMount()}catch(ie){Yn(h,h.return,ie)}else{var N=Cf(h.type,d.memoizedProps);d=d.memoizedState;try{A.componentDidUpdate(N,d,A.__reactInternalSnapshotBeforeUpdate)}catch(ie){Yn(h,h.return,ie)}}w&64&&s4(h),w&512&&jm(h,h.return);break;case 3:if(Wu(A,h),w&64&&(A=h.updateQueue,A!==null)){if(d=null,h.child!==null)switch(h.child.tag){case 27:case 5:d=h.child.stateNode;break;case 1:d=h.child.stateNode}try{bn(A,d)}catch(ie){Yn(h,h.return,ie)}}break;case 27:d===null&&w&4&&c4(h);case 26:case 5:Wu(A,h),d===null&&w&4&&o4(h),w&512&&jm(h,h.return);break;case 12:Wu(A,h);break;case 13:Wu(A,h),w&4&&h4(A,h),w&64&&(A=h.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(h=Aj.bind(null,h),Bj(A,h))));break;case 22:if(w=h.memoizedState!==null||YA,!w){d=d!==null&&d.memoizedState!==null||za,N=YA;var M=za;YA=w,(za=d)&&!M?$u(A,h,(h.subtreeFlags&8772)!==0):Wu(A,h),YA=N,za=M}break;case 30:break;default:Wu(A,h)}}function d4(A){var d=A.alternate;d!==null&&(A.alternate=null,d4(d)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(d=A.stateNode,d!==null&&_e(d)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}var ha=null,mo=!1;function XA(A,d,h){for(h=h.child;h!==null;)f4(A,d,h),h=h.sibling}function f4(A,d,h){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(Qt,h)}catch{}switch(h.tag){case 26:za||Xc(h,d),XA(A,d,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:za||Xc(h,d);var w=ha,N=mo;td(h.type)&&(ha=h.stateNode,mo=!1),XA(A,d,h),Wm(h.stateNode),ha=w,mo=N;break;case 5:za||Xc(h,d);case 6:if(w=ha,N=mo,ha=null,XA(A,d,h),ha=w,mo=N,ha!==null)if(mo)try{(ha.nodeType===9?ha.body:ha.nodeName==="HTML"?ha.ownerDocument.body:ha).removeChild(h.stateNode)}catch(M){Yn(h,d,M)}else try{ha.removeChild(h.stateNode)}catch(M){Yn(h,d,M)}break;case 18:ha!==null&&(mo?(A=ha,tT(A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A,h.stateNode),rp(A)):tT(ha,h.stateNode));break;case 4:w=ha,N=mo,ha=h.stateNode.containerInfo,mo=!0,XA(A,d,h),ha=w,mo=N;break;case 0:case 11:case 14:case 15:za||Ku(2,h,d),za||Ku(4,h,d),XA(A,d,h);break;case 1:za||(Xc(h,d),w=h.stateNode,typeof w.componentWillUnmount=="function"&&i4(h,d,w)),XA(A,d,h);break;case 21:XA(A,d,h);break;case 22:za=(w=za)||h.memoizedState!==null,XA(A,d,h),za=w;break;default:XA(A,d,h)}}function h4(A,d){if(d.memoizedState===null&&(A=d.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{rp(A)}catch(h){Yn(d,d.return,h)}}function rj(A){switch(A.tag){case 13:case 19:var d=A.stateNode;return d===null&&(d=A.stateNode=new A4),d;case 22:return A=A.stateNode,d=A._retryCache,d===null&&(d=A._retryCache=new A4),d;default:throw Error(n(435,A.tag))}}function cy(A,d){var h=rj(A);d.forEach(function(w){var N=uj.bind(null,A,w);h.has(w)||(h.add(w),w.then(N,N))})}function Po(A,d){var h=d.deletions;if(h!==null)for(var w=0;w<h.length;w++){var N=h[w],M=A,ie=d,we=ie;e:for(;we!==null;){switch(we.tag){case 27:if(td(we.type)){ha=we.stateNode,mo=!1;break e}break;case 5:ha=we.stateNode,mo=!1;break e;case 3:case 4:ha=we.stateNode.containerInfo,mo=!0;break e}we=we.return}if(ha===null)throw Error(n(160));f4(M,ie,N),ha=null,mo=!1,M=N.alternate,M!==null&&(M.return=null),N.return=null}if(d.subtreeFlags&13878)for(d=d.child;d!==null;)m4(d,A),d=d.sibling}var lc=null;function m4(A,d){var h=A.alternate,w=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:Po(d,A),jo(A),w&4&&(Ku(3,A,A.return),Pm(3,A),Ku(5,A,A.return));break;case 1:Po(d,A),jo(A),w&512&&(za||h===null||Xc(h,h.return)),w&64&&YA&&(A=A.updateQueue,A!==null&&(w=A.callbacks,w!==null&&(h=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=h===null?w:h.concat(w))));break;case 26:var N=lc;if(Po(d,A),jo(A),w&512&&(za||h===null||Xc(h,h.return)),w&4){var M=h!==null?h.memoizedState:null;if(w=A.memoizedState,h===null)if(w===null)if(A.stateNode===null){e:{w=A.type,h=A.memoizedProps,N=N.ownerDocument||N;t:switch(w){case"title":M=N.getElementsByTagName("title")[0],(!M||M[Ce]||M[pn]||M.namespaceURI==="http://www.w3.org/2000/svg"||M.hasAttribute("itemprop"))&&(M=N.createElement(w),N.head.insertBefore(M,N.querySelector("head > title"))),Zs(M,w,h),M[pn]=A,He(M),w=M;break e;case"link":var ie=cT("link","href",N).get(w+(h.href||""));if(ie){for(var we=0;we<ie.length;we++)if(M=ie[we],M.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&M.getAttribute("rel")===(h.rel==null?null:h.rel)&&M.getAttribute("title")===(h.title==null?null:h.title)&&M.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){ie.splice(we,1);break t}}M=N.createElement(w),Zs(M,w,h),N.head.appendChild(M);break;case"meta":if(ie=cT("meta","content",N).get(w+(h.content||""))){for(we=0;we<ie.length;we++)if(M=ie[we],M.getAttribute("content")===(h.content==null?null:""+h.content)&&M.getAttribute("name")===(h.name==null?null:h.name)&&M.getAttribute("property")===(h.property==null?null:h.property)&&M.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&M.getAttribute("charset")===(h.charSet==null?null:h.charSet)){ie.splice(we,1);break t}}M=N.createElement(w),Zs(M,w,h),N.head.appendChild(M);break;default:throw Error(n(468,w))}M[pn]=A,He(M),w=M}A.stateNode=w}else AT(N,A.type,A.stateNode);else A.stateNode=lT(N,w,A.memoizedProps);else M!==w?(M===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):M.count--,w===null?AT(N,A.type,A.stateNode):lT(N,w,A.memoizedProps)):w===null&&A.stateNode!==null&&sy(A,A.memoizedProps,h.memoizedProps)}break;case 27:Po(d,A),jo(A),w&512&&(za||h===null||Xc(h,h.return)),h!==null&&w&4&&sy(A,A.memoizedProps,h.memoizedProps);break;case 5:if(Po(d,A),jo(A),w&512&&(za||h===null||Xc(h,h.return)),A.flags&32){N=A.stateNode;try{ci(N,"")}catch(nt){Yn(A,A.return,nt)}}w&4&&A.stateNode!=null&&(N=A.memoizedProps,sy(A,N,h!==null?h.memoizedProps:N)),w&1024&&(ly=!0);break;case 6:if(Po(d,A),jo(A),w&4){if(A.stateNode===null)throw Error(n(162));w=A.memoizedProps,h=A.stateNode;try{h.nodeValue=w}catch(nt){Yn(A,A.return,nt)}}break;case 3:if(Zx=null,N=lc,lc=Yx(d.containerInfo),Po(d,A),lc=N,jo(A),w&4&&h!==null&&h.memoizedState.isDehydrated)try{rp(d.containerInfo)}catch(nt){Yn(A,A.return,nt)}ly&&(ly=!1,p4(A));break;case 4:w=lc,lc=Yx(A.stateNode.containerInfo),Po(d,A),jo(A),lc=w;break;case 12:Po(d,A),jo(A);break;case 13:Po(d,A),jo(A),A.child.flags&8192&&A.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(my=Le()),w&4&&(w=A.updateQueue,w!==null&&(A.updateQueue=null,cy(A,w)));break;case 22:N=A.memoizedState!==null;var Fe=h!==null&&h.memoizedState!==null,Xe=YA,ut=za;if(YA=Xe||N,za=ut||Fe,Po(d,A),za=ut,YA=Xe,jo(A),w&8192)e:for(d=A.stateNode,d._visibility=N?d._visibility&-2:d._visibility|1,N&&(h===null||Fe||YA||za||Ef(A)),h=null,d=A;;){if(d.tag===5||d.tag===26){if(h===null){Fe=h=d;try{if(M=Fe.stateNode,N)ie=M.style,typeof ie.setProperty=="function"?ie.setProperty("display","none","important"):ie.display="none";else{we=Fe.stateNode;var vt=Fe.memoizedProps.style,tt=vt!=null&&vt.hasOwnProperty("display")?vt.display:null;we.style.display=tt==null||typeof tt=="boolean"?"":(""+tt).trim()}}catch(nt){Yn(Fe,Fe.return,nt)}}}else if(d.tag===6){if(h===null){Fe=d;try{Fe.stateNode.nodeValue=N?"":Fe.memoizedProps}catch(nt){Yn(Fe,Fe.return,nt)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===A)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===A)break e;for(;d.sibling===null;){if(d.return===null||d.return===A)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}w&4&&(w=A.updateQueue,w!==null&&(h=w.retryQueue,h!==null&&(w.retryQueue=null,cy(A,h))));break;case 19:Po(d,A),jo(A),w&4&&(w=A.updateQueue,w!==null&&(A.updateQueue=null,cy(A,w)));break;case 30:break;case 21:break;default:Po(d,A),jo(A)}}function jo(A){var d=A.flags;if(d&2){try{for(var h,w=A.return;w!==null;){if(l4(w)){h=w;break}w=w.return}if(h==null)throw Error(n(160));switch(h.tag){case 27:var N=h.stateNode,M=iy(A);Px(A,M,N);break;case 5:var ie=h.stateNode;h.flags&32&&(ci(ie,""),h.flags&=-33);var we=iy(A);Px(A,we,ie);break;case 3:case 4:var Fe=h.stateNode.containerInfo,Xe=iy(A);oy(A,Xe,Fe);break;default:throw Error(n(161))}}catch(ut){Yn(A,A.return,ut)}A.flags&=-3}d&4096&&(A.flags&=-4097)}function p4(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var d=A;p4(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),A=A.sibling}}function Wu(A,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)u4(A,d.alternate,d),d=d.sibling}function Ef(A){for(A=A.child;A!==null;){var d=A;switch(d.tag){case 0:case 11:case 14:case 15:Ku(4,d,d.return),Ef(d);break;case 1:Xc(d,d.return);var h=d.stateNode;typeof h.componentWillUnmount=="function"&&i4(d,d.return,h),Ef(d);break;case 27:Wm(d.stateNode);case 26:case 5:Xc(d,d.return),Ef(d);break;case 22:d.memoizedState===null&&Ef(d);break;case 30:Ef(d);break;default:Ef(d)}A=A.sibling}}function $u(A,d,h){for(h=h&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var w=d.alternate,N=A,M=d,ie=M.flags;switch(M.tag){case 0:case 11:case 15:$u(N,M,h),Pm(4,M);break;case 1:if($u(N,M,h),w=M,N=w.stateNode,typeof N.componentDidMount=="function")try{N.componentDidMount()}catch(Xe){Yn(w,w.return,Xe)}if(w=M,N=w.updateQueue,N!==null){var we=w.stateNode;try{var Fe=N.shared.hiddenCallbacks;if(Fe!==null)for(N.shared.hiddenCallbacks=null,N=0;N<Fe.length;N++)cn(Fe[N],we)}catch(Xe){Yn(w,w.return,Xe)}}h&&ie&64&&s4(M),jm(M,M.return);break;case 27:c4(M);case 26:case 5:$u(N,M,h),h&&w===null&&ie&4&&o4(M),jm(M,M.return);break;case 12:$u(N,M,h);break;case 13:$u(N,M,h),h&&ie&4&&h4(N,M);break;case 22:M.memoizedState===null&&$u(N,M,h),jm(M,M.return);break;case 30:break;default:$u(N,M,h)}d=d.sibling}}function Ay(A,d){var h=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(h=A.memoizedState.cachePool.pool),A=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(A=d.memoizedState.cachePool.pool),A!==h&&(A!=null&&A.refCount++,h!=null&&uf(h))}function uy(A,d){A=null,d.alternate!==null&&(A=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==A&&(d.refCount++,A!=null&&uf(A))}function Zc(A,d,h,w){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)g4(A,d,h,w),d=d.sibling}function g4(A,d,h,w){var N=d.flags;switch(d.tag){case 0:case 11:case 15:Zc(A,d,h,w),N&2048&&Pm(9,d);break;case 1:Zc(A,d,h,w);break;case 3:Zc(A,d,h,w),N&2048&&(A=null,d.alternate!==null&&(A=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==A&&(d.refCount++,A!=null&&uf(A)));break;case 12:if(N&2048){Zc(A,d,h,w),A=d.stateNode;try{var M=d.memoizedProps,ie=M.id,we=M.onPostCommit;typeof we=="function"&&we(ie,d.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(Fe){Yn(d,d.return,Fe)}}else Zc(A,d,h,w);break;case 13:Zc(A,d,h,w);break;case 23:break;case 22:M=d.stateNode,ie=d.alternate,d.memoizedState!==null?M._visibility&2?Zc(A,d,h,w):Om(A,d):M._visibility&2?Zc(A,d,h,w):(M._visibility|=2,Uh(A,d,h,w,(d.subtreeFlags&10256)!==0)),N&2048&&Ay(ie,d);break;case 24:Zc(A,d,h,w),N&2048&&uy(d.alternate,d);break;default:Zc(A,d,h,w)}}function Uh(A,d,h,w,N){for(N=N&&(d.subtreeFlags&10256)!==0,d=d.child;d!==null;){var M=A,ie=d,we=h,Fe=w,Xe=ie.flags;switch(ie.tag){case 0:case 11:case 15:Uh(M,ie,we,Fe,N),Pm(8,ie);break;case 23:break;case 22:var ut=ie.stateNode;ie.memoizedState!==null?ut._visibility&2?Uh(M,ie,we,Fe,N):Om(M,ie):(ut._visibility|=2,Uh(M,ie,we,Fe,N)),N&&Xe&2048&&Ay(ie.alternate,ie);break;case 24:Uh(M,ie,we,Fe,N),N&&Xe&2048&&uy(ie.alternate,ie);break;default:Uh(M,ie,we,Fe,N)}d=d.sibling}}function Om(A,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var h=A,w=d,N=w.flags;switch(w.tag){case 22:Om(h,w),N&2048&&Ay(w.alternate,w);break;case 24:Om(h,w),N&2048&&uy(w.alternate,w);break;default:Om(h,w)}d=d.sibling}}var Qm=8192;function Mh(A){if(A.subtreeFlags&Qm)for(A=A.child;A!==null;)x4(A),A=A.sibling}function x4(A){switch(A.tag){case 26:Mh(A),A.flags&Qm&&A.memoizedState!==null&&Qj(lc,A.memoizedState,A.memoizedProps);break;case 5:Mh(A);break;case 3:case 4:var d=lc;lc=Yx(A.stateNode.containerInfo),Mh(A),lc=d;break;case 22:A.memoizedState===null&&(d=A.alternate,d!==null&&d.memoizedState!==null?(d=Qm,Qm=16777216,Mh(A),Qm=d):Mh(A));break;default:Mh(A)}}function v4(A){var d=A.alternate;if(d!==null&&(A=d.child,A!==null)){d.child=null;do d=A.sibling,A.sibling=null,A=d;while(A!==null)}}function Hm(A){var d=A.deletions;if((A.flags&16)!==0){if(d!==null)for(var h=0;h<d.length;h++){var w=d[h];Ms=w,y4(w,A)}v4(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)w4(A),A=A.sibling}function w4(A){switch(A.tag){case 0:case 11:case 15:Hm(A),A.flags&2048&&Ku(9,A,A.return);break;case 3:Hm(A);break;case 12:Hm(A);break;case 22:var d=A.stateNode;A.memoizedState!==null&&d._visibility&2&&(A.return===null||A.return.tag!==13)?(d._visibility&=-3,jx(A)):Hm(A);break;default:Hm(A)}}function jx(A){var d=A.deletions;if((A.flags&16)!==0){if(d!==null)for(var h=0;h<d.length;h++){var w=d[h];Ms=w,y4(w,A)}v4(A)}for(A=A.child;A!==null;){switch(d=A,d.tag){case 0:case 11:case 15:Ku(8,d,d.return),jx(d);break;case 22:h=d.stateNode,h._visibility&2&&(h._visibility&=-3,jx(d));break;default:jx(d)}A=A.sibling}}function y4(A,d){for(;Ms!==null;){var h=Ms;switch(h.tag){case 0:case 11:case 15:Ku(8,h,d);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var w=h.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:uf(h.memoizedState.cache)}if(w=h.child,w!==null)w.return=h,Ms=w;else e:for(h=A;Ms!==null;){w=Ms;var N=w.sibling,M=w.return;if(d4(w),w===h){Ms=null;break e}if(N!==null){N.return=M,Ms=N;break e}Ms=M}}}var nj={getCacheForType:function(A){var d=Ha(Va),h=d.data.get(A);return h===void 0&&(h=A(),d.data.set(A,h)),h}},aj=typeof WeakMap=="function"?WeakMap:Map,Un=0,ra=null,Xr=null,un=0,Mn=0,Oo=null,Ju=!1,Ph=!1,dy=!1,ZA=0,Fa=0,Yu=0,_f=0,fy=0,yl=0,jh=0,Vm=null,po=null,hy=!1,my=0,Ox=1/0,Qx=null,Xu=null,Xs=0,Zu=null,Oh=null,Qh=0,py=0,gy=null,b4=null,Gm=0,xy=null;function Qo(){if((Un&2)!==0&&un!==0)return un&-un;if(te.T!==null){var A=VA;return A!==0?A:_y()}return ja()}function C4(){yl===0&&(yl=(un&536870912)===0||gn?li():536870912);var A=wl.current;return A!==null&&(A.flags|=32),yl}function Ho(A,d,h){(A===ra&&(Mn===2||Mn===9)||A.cancelPendingCommit!==null)&&(Hh(A,0),ed(A,un,yl,!1)),Pa(A,h),((Un&2)===0||A!==ra)&&(A===ra&&((Un&2)===0&&(_f|=h),Fa===4&&ed(A,un,yl,!1)),eA(A))}function E4(A,d,h){if((Un&6)!==0)throw Error(n(327));var w=!h&&(d&124)===0&&(d&A.expiredLanes)===0||rs(A,d),N=w?oj(A,d):yy(A,d,!0),M=w;do{if(N===0){Ph&&!w&&ed(A,d,0,!1);break}else{if(h=A.current.alternate,M&&!sj(h)){N=yy(A,d,!1),M=!1;continue}if(N===2){if(M=d,A.errorRecoveryDisabledLanes&M)var ie=0;else ie=A.pendingLanes&-536870913,ie=ie!==0?ie:ie&536870912?536870912:0;if(ie!==0){d=ie;e:{var we=A;N=Vm;var Fe=we.current.memoizedState.isDehydrated;if(Fe&&(Hh(we,ie).flags|=256),ie=yy(we,ie,!1),ie!==2){if(dy&&!Fe){we.errorRecoveryDisabledLanes|=M,_f|=M,N=4;break e}M=po,po=N,M!==null&&(po===null?po=M:po.push.apply(po,M))}N=ie}if(M=!1,N!==2)continue}}if(N===1){Hh(A,0),ed(A,d,0,!0);break}e:{switch(w=A,M=N,M){case 0:case 1:throw Error(n(345));case 4:if((d&4194048)!==d)break;case 6:ed(w,d,yl,!Ju);break e;case 2:po=null;break;case 3:case 5:break;default:throw Error(n(329))}if((d&62914560)===d&&(N=my+300-Le(),10<N)){if(ed(w,d,yl,!Ju),hn(w,0,!0)!==0)break e;w.timeoutHandle=Z4(_4.bind(null,w,h,po,Qx,hy,d,yl,_f,jh,Ju,M,2,-0,0),N);break e}_4(w,h,po,Qx,hy,d,yl,_f,jh,Ju,M,0,-0,0)}}break}while(!0);eA(A)}function _4(A,d,h,w,N,M,ie,we,Fe,Xe,ut,vt,tt,nt){if(A.timeoutHandle=-1,vt=d.subtreeFlags,(vt&8192||(vt&16785408)===16785408)&&(Ym={stylesheets:null,count:0,unsuspend:Oj},x4(d),vt=Hj(),vt!==null)){A.cancelPendingCommit=vt(F4.bind(null,A,d,M,h,w,N,ie,we,Fe,ut,1,tt,nt)),ed(A,M,ie,!Xe);return}F4(A,d,M,h,w,N,ie,we,Fe)}function sj(A){for(var d=A;;){var h=d.tag;if((h===0||h===11||h===15)&&d.flags&16384&&(h=d.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var w=0;w<h.length;w++){var N=h[w],M=N.getSnapshot;N=N.value;try{if(!ss(M(),N))return!1}catch{return!1}}if(h=d.child,d.subtreeFlags&16384&&h!==null)h.return=d,d=h;else{if(d===A)break;for(;d.sibling===null;){if(d.return===null||d.return===A)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function ed(A,d,h,w){d&=~fy,d&=~_f,A.suspendedLanes|=d,A.pingedLanes&=~d,w&&(A.warmLanes|=d),w=A.expirationTimes;for(var N=d;0<N;){var M=31-kt(N),ie=1<<M;w[M]=-1,N&=~ie}h!==0&&ar(A,h,d)}function Hx(){return(Un&6)===0?(zm(0),!1):!0}function vy(){if(Xr!==null){if(Mn===0)var A=Xr.return;else A=Xr,rc=os=null,Bh(A),Rh=null,Lm=0,A=Xr;for(;A!==null;)a4(A.alternate,A),A=A.return;Xr=null}}function Hh(A,d){var h=A.timeoutHandle;h!==-1&&(A.timeoutHandle=-1,Cj(h)),h=A.cancelPendingCommit,h!==null&&(A.cancelPendingCommit=null,h()),vy(),ra=A,Xr=h=hl(A.current,null),un=d,Mn=0,Oo=null,Ju=!1,Ph=rs(A,d),dy=!1,jh=yl=fy=_f=Yu=Fa=0,po=Vm=null,hy=!1,(d&8)!==0&&(d|=d&32);var w=A.entangledLanes;if(w!==0)for(A=A.entanglements,w&=d;0<w;){var N=31-kt(w),M=1<<N;d|=A[N],w&=~M}return ZA=d,Ao(),h}function S4(A,d){cr=null,te.H=Nx,d===he||d===xe?(d=Ge(),Mn=3):d===me?(d=Ge(),Mn=4):Mn=d===GS?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,Oo=d,Xr===null&&(Fa=1,Rx(A,Or(d,A.current)))}function T4(){var A=te.H;return te.H=Nx,A===null?Nx:A}function B4(){var A=te.A;return te.A=nj,A}function wy(){Fa=4,Ju||(un&4194048)!==un&&wl.current!==null||(Ph=!0),(Yu&134217727)===0&&(_f&134217727)===0||ra===null||ed(ra,un,yl,!1)}function yy(A,d,h){var w=Un;Un|=2;var N=T4(),M=B4();(ra!==A||un!==d)&&(Qx=null,Hh(A,d)),d=!1;var ie=Fa;e:do try{if(Mn!==0&&Xr!==null){var we=Xr,Fe=Oo;switch(Mn){case 8:vy(),ie=6;break e;case 3:case 2:case 9:case 6:wl.current===null&&(d=!0);var Xe=Mn;if(Mn=0,Oo=null,Vh(A,we,Fe,Xe),h&&Ph){ie=0;break e}break;default:Xe=Mn,Mn=0,Oo=null,Vh(A,we,Fe,Xe)}}ij(),ie=Fa;break}catch(ut){S4(A,ut)}while(!0);return d&&A.shellSuspendCounter++,rc=os=null,Un=w,te.H=N,te.A=M,Xr===null&&(ra=null,un=0,Ao()),ie}function ij(){for(;Xr!==null;)N4(Xr)}function oj(A,d){var h=Un;Un|=2;var w=T4(),N=B4();ra!==A||un!==d?(Qx=null,Ox=Le()+500,Hh(A,d)):Ph=rs(A,d);e:do try{if(Mn!==0&&Xr!==null){d=Xr;var M=Oo;t:switch(Mn){case 1:Mn=0,Oo=null,Vh(A,d,M,1);break;case 2:case 9:if(Te(M)){Mn=0,Oo=null,k4(d);break}d=function(){Mn!==2&&Mn!==9||ra!==A||(Mn=7),eA(A)},M.then(d,d);break e;case 3:Mn=7;break e;case 4:Mn=5;break e;case 7:Te(M)?(Mn=0,Oo=null,k4(d)):(Mn=0,Oo=null,Vh(A,d,M,7));break;case 5:var ie=null;switch(Xr.tag){case 26:ie=Xr.memoizedState;case 5:case 27:var we=Xr;if(!ie||uT(ie)){Mn=0,Oo=null;var Fe=we.sibling;if(Fe!==null)Xr=Fe;else{var Xe=we.return;Xe!==null?(Xr=Xe,Vx(Xe)):Xr=null}break t}}Mn=0,Oo=null,Vh(A,d,M,5);break;case 6:Mn=0,Oo=null,Vh(A,d,M,6);break;case 8:vy(),Fa=6;break e;default:throw Error(n(462))}}lj();break}catch(ut){S4(A,ut)}while(!0);return rc=os=null,te.H=w,te.A=N,Un=h,Xr!==null?0:(ra=null,un=0,Ao(),Fa)}function lj(){for(;Xr!==null&&!De();)N4(Xr)}function N4(A){var d=r4(A.alternate,A,ZA);A.memoizedProps=A.pendingProps,d===null?Vx(A):Xr=d}function k4(A){var d=A,h=d.alternate;switch(d.tag){case 15:case 0:d=JS(h,d,d.pendingProps,d.type,void 0,un);break;case 11:d=JS(h,d,d.pendingProps,d.type.render,d.ref,un);break;case 5:Bh(d);default:a4(h,d),d=Xr=of(d,ZA),d=r4(h,d,ZA)}A.memoizedProps=A.pendingProps,d===null?Vx(A):Xr=d}function Vh(A,d,h,w){rc=os=null,Bh(d),Rh=null,Lm=0;var N=d.return;try{if(YP(A,N,d,h,un)){Fa=1,Rx(A,Or(h,A.current)),Xr=null;return}}catch(M){if(N!==null)throw Xr=N,M;Fa=1,Rx(A,Or(h,A.current)),Xr=null;return}d.flags&32768?(gn||w===1?A=!0:Ph||(un&536870912)!==0?A=!1:(Ju=A=!0,(w===2||w===9||w===3||w===6)&&(w=wl.current,w!==null&&w.tag===13&&(w.flags|=16384))),I4(d,A)):Vx(d)}function Vx(A){var d=A;do{if((d.flags&32768)!==0){I4(d,Ju);return}A=d.return;var h=ZP(d.alternate,d,ZA);if(h!==null){Xr=h;return}if(d=d.sibling,d!==null){Xr=d;return}Xr=d=A}while(d!==null);Fa===0&&(Fa=5)}function I4(A,d){do{var h=ej(A.alternate,A);if(h!==null){h.flags&=32767,Xr=h;return}if(h=A.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!d&&(A=A.sibling,A!==null)){Xr=A;return}Xr=A=h}while(A!==null);Fa=6,Xr=null}function F4(A,d,h,w,N,M,ie,we,Fe){A.cancelPendingCommit=null;do Gx();while(Xs!==0);if((Un&6)!==0)throw Error(n(327));if(d!==null){if(d===A.current)throw Error(n(177));if(M=d.lanes|d.childLanes,M|=va,mn(A,h,M,ie,we,Fe),A===ra&&(Xr=ra=null,un=0),Oh=d,Zu=A,Qh=h,py=M,gy=N,b4=w,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,dj(Et,function(){return M4(),null})):(A.callbackNode=null,A.callbackPriority=0),w=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||w){w=te.T,te.T=null,N=ae.p,ae.p=2,ie=Un,Un|=4;try{tj(A,d,h)}finally{Un=ie,ae.p=N,te.T=w}}Xs=1,D4(),R4(),L4()}}function D4(){if(Xs===1){Xs=0;var A=Zu,d=Oh,h=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||h){h=te.T,te.T=null;var w=ae.p;ae.p=2;var N=Un;Un|=4;try{m4(d,A);var M=Dy,ie=Ws(A.containerInfo),we=M.focusedElem,Fe=M.selectionRange;if(ie!==we&&we&&we.ownerDocument&&Lc(we.ownerDocument.documentElement,we)){if(Fe!==null&&Cs(we)){var Xe=Fe.start,ut=Fe.end;if(ut===void 0&&(ut=Xe),"selectionStart"in we)we.selectionStart=Xe,we.selectionEnd=Math.min(ut,we.value.length);else{var vt=we.ownerDocument||document,tt=vt&&vt.defaultView||window;if(tt.getSelection){var nt=tt.getSelection(),Cr=we.textContent.length,hr=Math.min(Fe.start,Cr),qn=Fe.end===void 0?hr:Math.min(Fe.end,Cr);!nt.extend&&hr>qn&&(ie=qn,qn=hr,hr=ie);var ze=Wl(we,hr),je=Wl(we,qn);if(ze&&je&&(nt.rangeCount!==1||nt.anchorNode!==ze.node||nt.anchorOffset!==ze.offset||nt.focusNode!==je.node||nt.focusOffset!==je.offset)){var We=vt.createRange();We.setStart(ze.node,ze.offset),nt.removeAllRanges(),hr>qn?(nt.addRange(We),nt.extend(je.node,je.offset)):(We.setEnd(je.node,je.offset),nt.addRange(We))}}}}for(vt=[],nt=we;nt=nt.parentNode;)nt.nodeType===1&&vt.push({element:nt,left:nt.scrollLeft,top:nt.scrollTop});for(typeof we.focus=="function"&&we.focus(),we=0;we<vt.length;we++){var mt=vt[we];mt.element.scrollLeft=mt.left,mt.element.scrollTop=mt.top}}r1=!!Fy,Dy=Fy=null}finally{Un=N,ae.p=w,te.T=h}}A.current=d,Xs=2}}function R4(){if(Xs===2){Xs=0;var A=Zu,d=Oh,h=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||h){h=te.T,te.T=null;var w=ae.p;ae.p=2;var N=Un;Un|=4;try{u4(A,d.alternate,d)}finally{Un=N,ae.p=w,te.T=h}}Xs=3}}function L4(){if(Xs===4||Xs===3){Xs=0,Ee();var A=Zu,d=Oh,h=Qh,w=b4;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?Xs=5:(Xs=0,Oh=Zu=null,U4(A,A.pendingLanes));var N=A.pendingLanes;if(N===0&&(Xu=null),Zn(h),d=d.stateNode,Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(Qt,d,void 0,(d.current.flags&128)===128)}catch{}if(w!==null){d=te.T,N=ae.p,ae.p=2,te.T=null;try{for(var M=A.onRecoverableError,ie=0;ie<w.length;ie++){var we=w[ie];M(we.value,{componentStack:we.stack})}}finally{te.T=d,ae.p=N}}(Qh&3)!==0&&Gx(),eA(A),N=A.pendingLanes,(h&4194090)!==0&&(N&42)!==0?A===xy?Gm++:(Gm=0,xy=A):Gm=0,zm(0)}}function U4(A,d){(A.pooledCacheLanes&=d)===0&&(d=A.pooledCache,d!=null&&(A.pooledCache=null,uf(d)))}function Gx(A){return D4(),R4(),L4(),M4()}function M4(){if(Xs!==5)return!1;var A=Zu,d=py;py=0;var h=Zn(Qh),w=te.T,N=ae.p;try{ae.p=32>h?32:h,te.T=null,h=gy,gy=null;var M=Zu,ie=Qh;if(Xs=0,Oh=Zu=null,Qh=0,(Un&6)!==0)throw Error(n(331));var we=Un;if(Un|=4,w4(M.current),g4(M,M.current,ie,h),Un=we,zm(0,!1),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(Qt,M)}catch{}return!0}finally{ae.p=N,te.T=w,U4(A,d)}}function P4(A,d,h){d=Or(h,d),d=Jw(A.stateNode,d,2),A=gt(A,d,2),A!==null&&(Pa(A,2),eA(A))}function Yn(A,d,h){if(A.tag===3)P4(A,A,h);else for(;d!==null;){if(d.tag===3){P4(d,A,h);break}else if(d.tag===1){var w=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(Xu===null||!Xu.has(w))){A=Or(h,A),h=HS(2),w=gt(d,h,2),w!==null&&(VS(h,w,d,A),Pa(w,2),eA(w));break}}d=d.return}}function by(A,d,h){var w=A.pingCache;if(w===null){w=A.pingCache=new aj;var N=new Set;w.set(d,N)}else N=w.get(d),N===void 0&&(N=new Set,w.set(d,N));N.has(h)||(dy=!0,N.add(h),A=cj.bind(null,A,d,h),d.then(A,A))}function cj(A,d,h){var w=A.pingCache;w!==null&&w.delete(d),A.pingedLanes|=A.suspendedLanes&h,A.warmLanes&=~h,ra===A&&(un&h)===h&&(Fa===4||Fa===3&&(un&62914560)===un&&300>Le()-my?(Un&2)===0&&Hh(A,0):fy|=h,jh===un&&(jh=0)),eA(A)}function j4(A,d){d===0&&(d=Bn()),A=Jl(A,d),A!==null&&(Pa(A,d),eA(A))}function Aj(A){var d=A.memoizedState,h=0;d!==null&&(h=d.retryLane),j4(A,h)}function uj(A,d){var h=0;switch(A.tag){case 13:var w=A.stateNode,N=A.memoizedState;N!==null&&(h=N.retryLane);break;case 19:w=A.stateNode;break;case 22:w=A.stateNode._retryCache;break;default:throw Error(n(314))}w!==null&&w.delete(d),j4(A,h)}function dj(A,d){return Pe(A,d)}var zx=null,Gh=null,Cy=!1,qx=!1,Ey=!1,Sf=0;function eA(A){A!==Gh&&A.next===null&&(Gh===null?zx=Gh=A:Gh=Gh.next=A),qx=!0,Cy||(Cy=!0,hj())}function zm(A,d){if(!Ey&&qx){Ey=!0;do for(var h=!1,w=zx;w!==null;){if(A!==0){var N=w.pendingLanes;if(N===0)var M=0;else{var ie=w.suspendedLanes,we=w.pingedLanes;M=(1<<31-kt(42|A)+1)-1,M&=N&~(ie&~we),M=M&201326741?M&201326741|1:M?M|2:0}M!==0&&(h=!0,V4(w,M))}else M=un,M=hn(w,w===ra?M:0,w.cancelPendingCommit!==null||w.timeoutHandle!==-1),(M&3)===0||rs(w,M)||(h=!0,V4(w,M));w=w.next}while(h);Ey=!1}}function fj(){O4()}function O4(){qx=Cy=!1;var A=0;Sf!==0&&(bj()&&(A=Sf),Sf=0);for(var d=Le(),h=null,w=zx;w!==null;){var N=w.next,M=Q4(w,d);M===0?(w.next=null,h===null?zx=N:h.next=N,N===null&&(Gh=h)):(h=w,(A!==0||(M&3)!==0)&&(qx=!0)),w=N}zm(A)}function Q4(A,d){for(var h=A.suspendedLanes,w=A.pingedLanes,N=A.expirationTimes,M=A.pendingLanes&-62914561;0<M;){var ie=31-kt(M),we=1<<ie,Fe=N[ie];Fe===-1?((we&h)===0||(we&w)!==0)&&(N[ie]=Mr(we,d)):Fe<=d&&(A.expiredLanes|=we),M&=~we}if(d=ra,h=un,h=hn(A,A===d?h:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),w=A.callbackNode,h===0||A===d&&(Mn===2||Mn===9)||A.cancelPendingCommit!==null)return w!==null&&w!==null&&at(w),A.callbackNode=null,A.callbackPriority=0;if((h&3)===0||rs(A,h)){if(d=h&-h,d===A.callbackPriority)return d;switch(w!==null&&at(w),Zn(h)){case 2:case 8:h=ht;break;case 32:h=Et;break;case 268435456:h=jt;break;default:h=Et}return w=H4.bind(null,A),h=Pe(h,w),A.callbackPriority=d,A.callbackNode=h,d}return w!==null&&w!==null&&at(w),A.callbackPriority=2,A.callbackNode=null,2}function H4(A,d){if(Xs!==0&&Xs!==5)return A.callbackNode=null,A.callbackPriority=0,null;var h=A.callbackNode;if(Gx()&&A.callbackNode!==h)return null;var w=un;return w=hn(A,A===ra?w:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),w===0?null:(E4(A,w,d),Q4(A,Le()),A.callbackNode!=null&&A.callbackNode===h?H4.bind(null,A):null)}function V4(A,d){if(Gx())return null;E4(A,d,!0)}function hj(){Ej(function(){(Un&6)!==0?Pe(et,fj):O4()})}function _y(){return Sf===0&&(Sf=li()),Sf}function G4(A){return A==null||typeof A=="symbol"||typeof A=="boolean"?null:typeof A=="function"?A:Bo(""+A)}function z4(A,d){var h=d.ownerDocument.createElement("input");return h.name=d.name,h.value=d.value,A.id&&h.setAttribute("form",A.id),d.parentNode.insertBefore(h,d),A=new FormData(A),h.parentNode.removeChild(h),A}function mj(A,d,h,w,N){if(d==="submit"&&h&&h.stateNode===N){var M=G4((N[an]||null).action),ie=w.submitter;ie&&(d=(d=ie[an]||null)?G4(d.formAction):ie.getAttribute("formAction"),d!==null&&(M=d,ie=null));var we=new sl("action","action",null,w,N);A.push({event:we,listeners:[{instance:null,listener:function(){if(w.defaultPrevented){if(Sf!==0){var Fe=ie?z4(N,ie):new FormData(N);vl(h,{pending:!0,data:Fe,method:N.method,action:M},null,Fe)}}else typeof M=="function"&&(we.preventDefault(),Fe=ie?z4(N,ie):new FormData(N),vl(h,{pending:!0,data:Fe,method:N.method,action:M},M,Fe))},currentTarget:N}]})}}for(var Sy=0;Sy<MA.length;Sy++){var Ty=MA[Sy],pj=Ty.toLowerCase(),gj=Ty[0].toUpperCase()+Ty.slice(1);da(pj,"on"+gj)}da(Ru,"onAnimationEnd"),da(Mc,"onAnimationIteration"),da(Pc,"onAnimationStart"),da("dblclick","onDoubleClick"),da("focusin","onFocus"),da("focusout","onBlur"),da(jc,"onTransitionRun"),da(UA,"onTransitionStart"),da(Lu,"onTransitionCancel"),da(Oc,"onTransitionEnd"),Bt("onMouseEnter",["mouseout","mouseover"]),Bt("onMouseLeave",["mouseout","mouseover"]),Bt("onPointerEnter",["pointerout","pointerover"]),Bt("onPointerLeave",["pointerout","pointerover"]),xt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xt("onBeforeInput",["compositionend","keypress","textInput","paste"]),xt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xj=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qm));function q4(A,d){d=(d&4)!==0;for(var h=0;h<A.length;h++){var w=A[h],N=w.event;w=w.listeners;e:{var M=void 0;if(d)for(var ie=w.length-1;0<=ie;ie--){var we=w[ie],Fe=we.instance,Xe=we.currentTarget;if(we=we.listener,Fe!==M&&N.isPropagationStopped())break e;M=we,N.currentTarget=Xe;try{M(N)}catch(ut){Dx(ut)}N.currentTarget=null,M=Fe}else for(ie=0;ie<w.length;ie++){if(we=w[ie],Fe=we.instance,Xe=we.currentTarget,we=we.listener,Fe!==M&&N.isPropagationStopped())break e;M=we,N.currentTarget=Xe;try{M(N)}catch(ut){Dx(ut)}N.currentTarget=null,M=Fe}}}}function Zr(A,d){var h=d[Jn];h===void 0&&(h=d[Jn]=new Set);var w=A+"__bubble";h.has(w)||(K4(d,A,2,!1),h.add(w))}function By(A,d,h){var w=0;d&&(w|=4),K4(h,A,w,d)}var Kx="_reactListening"+Math.random().toString(36).slice(2);function Ny(A){if(!A[Kx]){A[Kx]=!0,$e.forEach(function(h){h!=="selectionchange"&&(xj.has(h)||By(h,!1,A),By(h,!0,A))});var d=A.nodeType===9?A:A.ownerDocument;d===null||d[Kx]||(d[Kx]=!0,By("selectionchange",!1,d))}}function K4(A,d,h,w){switch(gT(d)){case 2:var N=zj;break;case 8:N=qj;break;default:N=Vy}h=N.bind(null,d,h,A),N=void 0,!Ks||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(N=!0),w?N!==void 0?A.addEventListener(d,h,{capture:!0,passive:N}):A.addEventListener(d,h,!0):N!==void 0?A.addEventListener(d,h,{passive:N}):A.addEventListener(d,h,!1)}function ky(A,d,h,w,N){var M=w;if((d&1)===0&&(d&2)===0&&w!==null)e:for(;;){if(w===null)return;var ie=w.tag;if(ie===3||ie===4){var we=w.stateNode.containerInfo;if(we===N)break;if(ie===4)for(ie=w.return;ie!==null;){var Fe=ie.tag;if((Fe===3||Fe===4)&&ie.stateNode.containerInfo===N)return;ie=ie.return}for(;we!==null;){if(ie=Be(we),ie===null)return;if(Fe=ie.tag,Fe===5||Fe===6||Fe===26||Fe===27){w=M=ie;continue e}we=we.parentNode}}w=w.return}Nu(function(){var Xe=M,ut=Rn(h),vt=[];e:{var tt=$l.get(A);if(tt!==void 0){var nt=sl,Cr=A;switch(A){case"keypress":if(di(h)===0)break e;case"keydown":case"keyup":nt=Fo;break;case"focusin":Cr="focus",nt=ol;break;case"focusout":Cr="blur",nt=ol;break;case"beforeblur":case"afterblur":nt=ol;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":nt=Ba;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":nt=il;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":nt=Ic;break;case Ru:case Mc:case Pc:nt=Bc;break;case Oc:nt=ce;break;case"scroll":case"scrollend":nt=kA;break;case"wheel":nt=Re;break;case"copy":case"cut":case"paste":nt=Nc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":nt=Kl;break;case"toggle":case"beforetoggle":nt=ot}var hr=(d&4)!==0,qn=!hr&&(A==="scroll"||A==="scrollend"),ze=hr?tt!==null?tt+"Capture":null:tt;hr=[];for(var je=Xe,We;je!==null;){var mt=je;if(We=mt.stateNode,mt=mt.tag,mt!==5&&mt!==26&&mt!==27||We===null||ze===null||(mt=Is(je,ze),mt!=null&&hr.push(Km(je,mt,We))),qn)break;je=je.return}0<hr.length&&(tt=new nt(tt,Cr,null,h,ut),vt.push({event:tt,listeners:hr}))}}if((d&7)===0){e:{if(tt=A==="mouseover"||A==="pointerover",nt=A==="mouseout"||A==="pointerout",tt&&h!==ro&&(Cr=h.relatedTarget||h.fromElement)&&(Be(Cr)||Cr[Dn]))break e;if((nt||tt)&&(tt=ut.window===ut?ut:(tt=ut.ownerDocument)?tt.defaultView||tt.parentWindow:window,nt?(Cr=h.relatedTarget||h.toElement,nt=Xe,Cr=Cr?Be(Cr):null,Cr!==null&&(qn=s(Cr),hr=Cr.tag,Cr!==qn||hr!==5&&hr!==27&&hr!==6)&&(Cr=null)):(nt=null,Cr=Xe),nt!==Cr)){if(hr=Ba,mt="onMouseLeave",ze="onMouseEnter",je="mouse",(A==="pointerout"||A==="pointerover")&&(hr=Kl,mt="onPointerLeave",ze="onPointerEnter",je="pointer"),qn=nt==null?tt:qe(nt),We=Cr==null?tt:qe(Cr),tt=new hr(mt,je+"leave",nt,h,ut),tt.target=qn,tt.relatedTarget=We,mt=null,Be(ut)===Xe&&(hr=new hr(ze,je+"enter",Cr,h,ut),hr.target=We,hr.relatedTarget=qn,mt=hr),qn=mt,nt&&Cr)t:{for(hr=nt,ze=Cr,je=0,We=hr;We;We=zh(We))je++;for(We=0,mt=ze;mt;mt=zh(mt))We++;for(;0<je-We;)hr=zh(hr),je--;for(;0<We-je;)ze=zh(ze),We--;for(;je--;){if(hr===ze||ze!==null&&hr===ze.alternate)break t;hr=zh(hr),ze=zh(ze)}hr=null}else hr=null;nt!==null&&W4(vt,tt,nt,hr,!1),Cr!==null&&qn!==null&&W4(vt,qn,Cr,hr,!0)}}e:{if(tt=Xe?qe(Xe):window,nt=tt.nodeName&&tt.nodeName.toLowerCase(),nt==="select"||nt==="input"&&tt.type==="file")var Xt=Fu;else if(Nn(tt))if(FA)Xt=wh;else{Xt=vm;var $r=hi}else nt=tt.nodeName,!nt||nt.toLowerCase()!=="input"||tt.type!=="checkbox"&&tt.type!=="radio"?Xe&&BA(Xe.elementType)&&(Xt=Fu):Xt=af;if(Xt&&(Xt=Xt(A,Xe))){lo(vt,Xt,h,ut);break e}$r&&$r(A,tt,Xe),A==="focusout"&&Xe&&tt.type==="number"&&Xe.memoizedProps.value!=null&&rl(tt,"number",tt.value)}switch($r=Xe?qe(Xe):window,A){case"focusin":(Nn($r)||$r.contentEditable==="true")&&(mi=$r,Do=Xe,dl=null);break;case"focusout":dl=Do=mi=null;break;case"mousedown":Ro=!0;break;case"contextmenu":case"mouseup":case"dragend":Ro=!1,ua(vt,h,ut);break;case"selectionchange":if(Uc)break;case"keydown":case"keyup":ua(vt,h,ut)}var sr;if(Ut)e:{switch(A){case"compositionstart":var mr="onCompositionStart";break e;case"compositionend":mr="onCompositionEnd";break e;case"compositionupdate":mr="onCompositionUpdate";break e}mr=void 0}else fr?Ye(A,h)&&(mr="onCompositionEnd"):A==="keydown"&&h.keyCode===229&&(mr="onCompositionStart");mr&&(re&&h.locale!=="ko"&&(fr||mr!=="onCompositionStart"?mr==="onCompositionEnd"&&fr&&(sr=NA()):(ui=ut,al="value"in ui?ui.value:ui.textContent,fr=!0)),$r=Wx(Xe,mr),0<$r.length&&(mr=new Gl(mr,A,null,h,ut),vt.push({event:mr,listeners:$r}),sr?mr.data=sr:(sr=Ct(h),sr!==null&&(mr.data=sr)))),(sr=z?Wr(A,h):Sr(A,h))&&(mr=Wx(Xe,"onBeforeInput"),0<mr.length&&($r=new Gl("onBeforeInput","beforeinput",null,h,ut),vt.push({event:$r,listeners:mr}),$r.data=sr)),mj(vt,A,Xe,h,ut)}q4(vt,d)})}function Km(A,d,h){return{instance:A,listener:d,currentTarget:h}}function Wx(A,d){for(var h=d+"Capture",w=[];A!==null;){var N=A,M=N.stateNode;if(N=N.tag,N!==5&&N!==26&&N!==27||M===null||(N=Is(A,h),N!=null&&w.unshift(Km(A,N,M)),N=Is(A,d),N!=null&&w.push(Km(A,N,M))),A.tag===3)return w;A=A.return}return[]}function zh(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5&&A.tag!==27);return A||null}function W4(A,d,h,w,N){for(var M=d._reactName,ie=[];h!==null&&h!==w;){var we=h,Fe=we.alternate,Xe=we.stateNode;if(we=we.tag,Fe!==null&&Fe===w)break;we!==5&&we!==26&&we!==27||Xe===null||(Fe=Xe,N?(Xe=Is(h,M),Xe!=null&&ie.unshift(Km(h,Xe,Fe))):N||(Xe=Is(h,M),Xe!=null&&ie.push(Km(h,Xe,Fe)))),h=h.return}ie.length!==0&&A.push({event:d,listeners:ie})}var vj=/\r\n?/g,wj=/\u0000|\uFFFD/g;function $4(A){return(typeof A=="string"?A:""+A).replace(vj,`
`).replace(wj,"")}function J4(A,d){return d=$4(d),$4(A)===d}function $x(){}function zn(A,d,h,w,N,M){switch(h){case"children":typeof w=="string"?d==="body"||d==="textarea"&&w===""||ci(A,w):(typeof w=="number"||typeof w=="bigint")&&d!=="body"&&ci(A,""+w);break;case"className":jr(A,"class",w);break;case"tabIndex":jr(A,"tabindex",w);break;case"dir":case"role":case"viewBox":case"width":case"height":jr(A,h,w);break;case"style":TA(A,w,M);break;case"data":if(d!=="object"){jr(A,"data",w);break}case"src":case"href":if(w===""&&(d!=="a"||h!=="href")){A.removeAttribute(h);break}if(w==null||typeof w=="function"||typeof w=="symbol"||typeof w=="boolean"){A.removeAttribute(h);break}w=Bo(""+w),A.setAttribute(h,w);break;case"action":case"formAction":if(typeof w=="function"){A.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof M=="function"&&(h==="formAction"?(d!=="input"&&zn(A,d,"name",N.name,N,null),zn(A,d,"formEncType",N.formEncType,N,null),zn(A,d,"formMethod",N.formMethod,N,null),zn(A,d,"formTarget",N.formTarget,N,null)):(zn(A,d,"encType",N.encType,N,null),zn(A,d,"method",N.method,N,null),zn(A,d,"target",N.target,N,null)));if(w==null||typeof w=="symbol"||typeof w=="boolean"){A.removeAttribute(h);break}w=Bo(""+w),A.setAttribute(h,w);break;case"onClick":w!=null&&(A.onclick=$x);break;case"onScroll":w!=null&&Zr("scroll",A);break;case"onScrollEnd":w!=null&&Zr("scrollend",A);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(n(61));if(h=w.__html,h!=null){if(N.children!=null)throw Error(n(60));A.innerHTML=h}}break;case"multiple":A.multiple=w&&typeof w!="function"&&typeof w!="symbol";break;case"muted":A.muted=w&&typeof w!="function"&&typeof w!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(w==null||typeof w=="function"||typeof w=="boolean"||typeof w=="symbol"){A.removeAttribute("xlink:href");break}h=Bo(""+w),A.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":w!=null&&typeof w!="function"&&typeof w!="symbol"?A.setAttribute(h,""+w):A.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":w&&typeof w!="function"&&typeof w!="symbol"?A.setAttribute(h,""):A.removeAttribute(h);break;case"capture":case"download":w===!0?A.setAttribute(h,""):w!==!1&&w!=null&&typeof w!="function"&&typeof w!="symbol"?A.setAttribute(h,w):A.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":w!=null&&typeof w!="function"&&typeof w!="symbol"&&!isNaN(w)&&1<=w?A.setAttribute(h,w):A.removeAttribute(h);break;case"rowSpan":case"start":w==null||typeof w=="function"||typeof w=="symbol"||isNaN(w)?A.removeAttribute(h):A.setAttribute(h,w);break;case"popover":Zr("beforetoggle",A),Zr("toggle",A),Pr(A,"popover",w);break;case"xlinkActuate":qr(A,"http://www.w3.org/1999/xlink","xlink:actuate",w);break;case"xlinkArcrole":qr(A,"http://www.w3.org/1999/xlink","xlink:arcrole",w);break;case"xlinkRole":qr(A,"http://www.w3.org/1999/xlink","xlink:role",w);break;case"xlinkShow":qr(A,"http://www.w3.org/1999/xlink","xlink:show",w);break;case"xlinkTitle":qr(A,"http://www.w3.org/1999/xlink","xlink:title",w);break;case"xlinkType":qr(A,"http://www.w3.org/1999/xlink","xlink:type",w);break;case"xmlBase":qr(A,"http://www.w3.org/XML/1998/namespace","xml:base",w);break;case"xmlLang":qr(A,"http://www.w3.org/XML/1998/namespace","xml:lang",w);break;case"xmlSpace":qr(A,"http://www.w3.org/XML/1998/namespace","xml:space",w);break;case"is":Pr(A,"is",w);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=To.get(h)||h,Pr(A,h,w))}}function Iy(A,d,h,w,N,M){switch(h){case"style":TA(A,w,M);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(n(61));if(h=w.__html,h!=null){if(N.children!=null)throw Error(n(60));A.innerHTML=h}}break;case"children":typeof w=="string"?ci(A,w):(typeof w=="number"||typeof w=="bigint")&&ci(A,""+w);break;case"onScroll":w!=null&&Zr("scroll",A);break;case"onScrollEnd":w!=null&&Zr("scrollend",A);break;case"onClick":w!=null&&(A.onclick=$x);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ze.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(N=h.endsWith("Capture"),d=h.slice(2,N?h.length-7:void 0),M=A[an]||null,M=M!=null?M[h]:null,typeof M=="function"&&A.removeEventListener(d,M,N),typeof w=="function")){typeof M!="function"&&M!==null&&(h in A?A[h]=null:A.hasAttribute(h)&&A.removeAttribute(h)),A.addEventListener(d,w,N);break e}h in A?A[h]=w:w===!0?A.setAttribute(h,""):Pr(A,h,w)}}}function Zs(A,d,h){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Zr("error",A),Zr("load",A);var w=!1,N=!1,M;for(M in h)if(h.hasOwnProperty(M)){var ie=h[M];if(ie!=null)switch(M){case"src":w=!0;break;case"srcSet":N=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,d));default:zn(A,d,M,ie,h,null)}}N&&zn(A,d,"srcSet",h.srcSet,h,null),w&&zn(A,d,"src",h.src,h,null);return;case"input":Zr("invalid",A);var we=M=ie=N=null,Fe=null,Xe=null;for(w in h)if(h.hasOwnProperty(w)){var ut=h[w];if(ut!=null)switch(w){case"name":N=ut;break;case"type":ie=ut;break;case"checked":Fe=ut;break;case"defaultChecked":Xe=ut;break;case"value":M=ut;break;case"defaultValue":we=ut;break;case"children":case"dangerouslySetInnerHTML":if(ut!=null)throw Error(n(137,d));break;default:zn(A,d,w,ut,h,null)}}tl(A,M,we,Fe,Xe,ie,N,!1),el(A);return;case"select":Zr("invalid",A),w=ie=M=null;for(N in h)if(h.hasOwnProperty(N)&&(we=h[N],we!=null))switch(N){case"value":M=we;break;case"defaultValue":ie=we;break;case"multiple":w=we;default:zn(A,d,N,we,h,null)}d=M,h=ie,A.multiple=!!w,d!=null?to(A,!!w,d,!1):h!=null&&to(A,!!w,h,!0);return;case"textarea":Zr("invalid",A),M=N=w=null;for(ie in h)if(h.hasOwnProperty(ie)&&(we=h[ie],we!=null))switch(ie){case"value":w=we;break;case"defaultValue":N=we;break;case"children":M=we;break;case"dangerouslySetInnerHTML":if(we!=null)throw Error(n(91));break;default:zn(A,d,ie,we,h,null)}nl(A,w,N,M),el(A);return;case"option":for(Fe in h)if(h.hasOwnProperty(Fe)&&(w=h[Fe],w!=null))switch(Fe){case"selected":A.selected=w&&typeof w!="function"&&typeof w!="symbol";break;default:zn(A,d,Fe,w,h,null)}return;case"dialog":Zr("beforetoggle",A),Zr("toggle",A),Zr("cancel",A),Zr("close",A);break;case"iframe":case"object":Zr("load",A);break;case"video":case"audio":for(w=0;w<qm.length;w++)Zr(qm[w],A);break;case"image":Zr("error",A),Zr("load",A);break;case"details":Zr("toggle",A);break;case"embed":case"source":case"link":Zr("error",A),Zr("load",A);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Xe in h)if(h.hasOwnProperty(Xe)&&(w=h[Xe],w!=null))switch(Xe){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,d));default:zn(A,d,Xe,w,h,null)}return;default:if(BA(d)){for(ut in h)h.hasOwnProperty(ut)&&(w=h[ut],w!==void 0&&Iy(A,d,ut,w,h,void 0));return}}for(we in h)h.hasOwnProperty(we)&&(w=h[we],w!=null&&zn(A,d,we,w,h,null))}function yj(A,d,h,w){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var N=null,M=null,ie=null,we=null,Fe=null,Xe=null,ut=null;for(nt in h){var vt=h[nt];if(h.hasOwnProperty(nt)&&vt!=null)switch(nt){case"checked":break;case"value":break;case"defaultValue":Fe=vt;default:w.hasOwnProperty(nt)||zn(A,d,nt,null,w,vt)}}for(var tt in w){var nt=w[tt];if(vt=h[tt],w.hasOwnProperty(tt)&&(nt!=null||vt!=null))switch(tt){case"type":M=nt;break;case"name":N=nt;break;case"checked":Xe=nt;break;case"defaultChecked":ut=nt;break;case"value":ie=nt;break;case"defaultValue":we=nt;break;case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(n(137,d));break;default:nt!==vt&&zn(A,d,tt,nt,w,vt)}}ys(A,ie,we,Fe,Xe,ut,M,N);return;case"select":nt=ie=we=tt=null;for(M in h)if(Fe=h[M],h.hasOwnProperty(M)&&Fe!=null)switch(M){case"value":break;case"multiple":nt=Fe;default:w.hasOwnProperty(M)||zn(A,d,M,null,w,Fe)}for(N in w)if(M=w[N],Fe=h[N],w.hasOwnProperty(N)&&(M!=null||Fe!=null))switch(N){case"value":tt=M;break;case"defaultValue":we=M;break;case"multiple":ie=M;default:M!==Fe&&zn(A,d,N,M,w,Fe)}d=we,h=ie,w=nt,tt!=null?to(A,!!h,tt,!1):!!w!=!!h&&(d!=null?to(A,!!h,d,!0):to(A,!!h,h?[]:"",!1));return;case"textarea":nt=tt=null;for(we in h)if(N=h[we],h.hasOwnProperty(we)&&N!=null&&!w.hasOwnProperty(we))switch(we){case"value":break;case"children":break;default:zn(A,d,we,null,w,N)}for(ie in w)if(N=w[ie],M=h[ie],w.hasOwnProperty(ie)&&(N!=null||M!=null))switch(ie){case"value":tt=N;break;case"defaultValue":nt=N;break;case"children":break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(n(91));break;default:N!==M&&zn(A,d,ie,N,w,M)}wn(A,tt,nt);return;case"option":for(var Cr in h)if(tt=h[Cr],h.hasOwnProperty(Cr)&&tt!=null&&!w.hasOwnProperty(Cr))switch(Cr){case"selected":A.selected=!1;break;default:zn(A,d,Cr,null,w,tt)}for(Fe in w)if(tt=w[Fe],nt=h[Fe],w.hasOwnProperty(Fe)&&tt!==nt&&(tt!=null||nt!=null))switch(Fe){case"selected":A.selected=tt&&typeof tt!="function"&&typeof tt!="symbol";break;default:zn(A,d,Fe,tt,w,nt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var hr in h)tt=h[hr],h.hasOwnProperty(hr)&&tt!=null&&!w.hasOwnProperty(hr)&&zn(A,d,hr,null,w,tt);for(Xe in w)if(tt=w[Xe],nt=h[Xe],w.hasOwnProperty(Xe)&&tt!==nt&&(tt!=null||nt!=null))switch(Xe){case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(n(137,d));break;default:zn(A,d,Xe,tt,w,nt)}return;default:if(BA(d)){for(var qn in h)tt=h[qn],h.hasOwnProperty(qn)&&tt!==void 0&&!w.hasOwnProperty(qn)&&Iy(A,d,qn,void 0,w,tt);for(ut in w)tt=w[ut],nt=h[ut],!w.hasOwnProperty(ut)||tt===nt||tt===void 0&&nt===void 0||Iy(A,d,ut,tt,w,nt);return}}for(var ze in h)tt=h[ze],h.hasOwnProperty(ze)&&tt!=null&&!w.hasOwnProperty(ze)&&zn(A,d,ze,null,w,tt);for(vt in w)tt=w[vt],nt=h[vt],!w.hasOwnProperty(vt)||tt===nt||tt==null&&nt==null||zn(A,d,vt,tt,w,nt)}var Fy=null,Dy=null;function Jx(A){return A.nodeType===9?A:A.ownerDocument}function Y4(A){switch(A){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function X4(A,d){if(A===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return A===1&&d==="foreignObject"?0:A}function Ry(A,d){return A==="textarea"||A==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Ly=null;function bj(){var A=window.event;return A&&A.type==="popstate"?A===Ly?!1:(Ly=A,!0):(Ly=null,!1)}var Z4=typeof setTimeout=="function"?setTimeout:void 0,Cj=typeof clearTimeout=="function"?clearTimeout:void 0,eT=typeof Promise=="function"?Promise:void 0,Ej=typeof queueMicrotask=="function"?queueMicrotask:typeof eT<"u"?function(A){return eT.resolve(null).then(A).catch(_j)}:Z4;function _j(A){setTimeout(function(){throw A})}function td(A){return A==="head"}function tT(A,d){var h=d,w=0,N=0;do{var M=h.nextSibling;if(A.removeChild(h),M&&M.nodeType===8)if(h=M.data,h==="/$"){if(0<w&&8>w){h=w;var ie=A.ownerDocument;if(h&1&&Wm(ie.documentElement),h&2&&Wm(ie.body),h&4)for(h=ie.head,Wm(h),ie=h.firstChild;ie;){var we=ie.nextSibling,Fe=ie.nodeName;ie[Ce]||Fe==="SCRIPT"||Fe==="STYLE"||Fe==="LINK"&&ie.rel.toLowerCase()==="stylesheet"||h.removeChild(ie),ie=we}}if(N===0){A.removeChild(M),rp(d);return}N--}else h==="$"||h==="$?"||h==="$!"?N++:w=h.charCodeAt(0)-48;else w=0;h=M}while(h);rp(d)}function Uy(A){var d=A.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var h=d;switch(d=d.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":Uy(h),_e(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}A.removeChild(h)}}function Sj(A,d,h,w){for(;A.nodeType===1;){var N=h;if(A.nodeName.toLowerCase()!==d.toLowerCase()){if(!w&&(A.nodeName!=="INPUT"||A.type!=="hidden"))break}else if(w){if(!A[Ce])switch(d){case"meta":if(!A.hasAttribute("itemprop"))break;return A;case"link":if(M=A.getAttribute("rel"),M==="stylesheet"&&A.hasAttribute("data-precedence"))break;if(M!==N.rel||A.getAttribute("href")!==(N.href==null||N.href===""?null:N.href)||A.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin)||A.getAttribute("title")!==(N.title==null?null:N.title))break;return A;case"style":if(A.hasAttribute("data-precedence"))break;return A;case"script":if(M=A.getAttribute("src"),(M!==(N.src==null?null:N.src)||A.getAttribute("type")!==(N.type==null?null:N.type)||A.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin))&&M&&A.hasAttribute("async")&&!A.hasAttribute("itemprop"))break;return A;default:return A}}else if(d==="input"&&A.type==="hidden"){var M=N.name==null?null:""+N.name;if(N.type==="hidden"&&A.getAttribute("name")===M)return A}else return A;if(A=cc(A.nextSibling),A===null)break}return null}function Tj(A,d,h){if(d==="")return null;for(;A.nodeType!==3;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!h||(A=cc(A.nextSibling),A===null))return null;return A}function My(A){return A.data==="$!"||A.data==="$?"&&A.ownerDocument.readyState==="complete"}function Bj(A,d){var h=A.ownerDocument;if(A.data!=="$?"||h.readyState==="complete")d();else{var w=function(){d(),h.removeEventListener("DOMContentLoaded",w)};h.addEventListener("DOMContentLoaded",w),A._reactRetry=w}}function cc(A){for(;A!=null;A=A.nextSibling){var d=A.nodeType;if(d===1||d===3)break;if(d===8){if(d=A.data,d==="$"||d==="$!"||d==="$?"||d==="F!"||d==="F")break;if(d==="/$")return null}}return A}var Py=null;function rT(A){A=A.previousSibling;for(var d=0;A;){if(A.nodeType===8){var h=A.data;if(h==="$"||h==="$!"||h==="$?"){if(d===0)return A;d--}else h==="/$"&&d++}A=A.previousSibling}return null}function nT(A,d,h){switch(d=Jx(h),A){case"html":if(A=d.documentElement,!A)throw Error(n(452));return A;case"head":if(A=d.head,!A)throw Error(n(453));return A;case"body":if(A=d.body,!A)throw Error(n(454));return A;default:throw Error(n(451))}}function Wm(A){for(var d=A.attributes;d.length;)A.removeAttributeNode(d[0]);_e(A)}var bl=new Map,aT=new Set;function Yx(A){return typeof A.getRootNode=="function"?A.getRootNode():A.nodeType===9?A:A.ownerDocument}var eu=ae.d;ae.d={f:Nj,r:kj,D:Ij,C:Fj,L:Dj,m:Rj,X:Uj,S:Lj,M:Mj};function Nj(){var A=eu.f(),d=Hx();return A||d}function kj(A){var d=ke(A);d!==null&&d.tag===5&&d.type==="form"?yf(d):eu.r(A)}var qh=typeof document>"u"?null:document;function sT(A,d,h){var w=qh;if(w&&typeof d=="string"&&d){var N=sn(d);N='link[rel="'+A+'"][href="'+N+'"]',typeof h=="string"&&(N+='[crossorigin="'+h+'"]'),aT.has(N)||(aT.add(N),A={rel:A,crossOrigin:h,href:d},w.querySelector(N)===null&&(d=w.createElement("link"),Zs(d,"link",A),He(d),w.head.appendChild(d)))}}function Ij(A){eu.D(A),sT("dns-prefetch",A,null)}function Fj(A,d){eu.C(A,d),sT("preconnect",A,d)}function Dj(A,d,h){eu.L(A,d,h);var w=qh;if(w&&A&&d){var N='link[rel="preload"][as="'+sn(d)+'"]';d==="image"&&h&&h.imageSrcSet?(N+='[imagesrcset="'+sn(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(N+='[imagesizes="'+sn(h.imageSizes)+'"]')):N+='[href="'+sn(A)+'"]';var M=N;switch(d){case"style":M=Kh(A);break;case"script":M=Wh(A)}bl.has(M)||(A=f({rel:"preload",href:d==="image"&&h&&h.imageSrcSet?void 0:A,as:d},h),bl.set(M,A),w.querySelector(N)!==null||d==="style"&&w.querySelector($m(M))||d==="script"&&w.querySelector(Jm(M))||(d=w.createElement("link"),Zs(d,"link",A),He(d),w.head.appendChild(d)))}}function Rj(A,d){eu.m(A,d);var h=qh;if(h&&A){var w=d&&typeof d.as=="string"?d.as:"script",N='link[rel="modulepreload"][as="'+sn(w)+'"][href="'+sn(A)+'"]',M=N;switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":M=Wh(A)}if(!bl.has(M)&&(A=f({rel:"modulepreload",href:A},d),bl.set(M,A),h.querySelector(N)===null)){switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(Jm(M)))return}w=h.createElement("link"),Zs(w,"link",A),He(w),h.head.appendChild(w)}}}function Lj(A,d,h){eu.S(A,d,h);var w=qh;if(w&&A){var N=rt(w).hoistableStyles,M=Kh(A);d=d||"default";var ie=N.get(M);if(!ie){var we={loading:0,preload:null};if(ie=w.querySelector($m(M)))we.loading=5;else{A=f({rel:"stylesheet",href:A,"data-precedence":d},h),(h=bl.get(M))&&jy(A,h);var Fe=ie=w.createElement("link");He(Fe),Zs(Fe,"link",A),Fe._p=new Promise(function(Xe,ut){Fe.onload=Xe,Fe.onerror=ut}),Fe.addEventListener("load",function(){we.loading|=1}),Fe.addEventListener("error",function(){we.loading|=2}),we.loading|=4,Xx(ie,d,w)}ie={type:"stylesheet",instance:ie,count:1,state:we},N.set(M,ie)}}}function Uj(A,d){eu.X(A,d);var h=qh;if(h&&A){var w=rt(h).hoistableScripts,N=Wh(A),M=w.get(N);M||(M=h.querySelector(Jm(N)),M||(A=f({src:A,async:!0},d),(d=bl.get(N))&&Oy(A,d),M=h.createElement("script"),He(M),Zs(M,"link",A),h.head.appendChild(M)),M={type:"script",instance:M,count:1,state:null},w.set(N,M))}}function Mj(A,d){eu.M(A,d);var h=qh;if(h&&A){var w=rt(h).hoistableScripts,N=Wh(A),M=w.get(N);M||(M=h.querySelector(Jm(N)),M||(A=f({src:A,async:!0,type:"module"},d),(d=bl.get(N))&&Oy(A,d),M=h.createElement("script"),He(M),Zs(M,"link",A),h.head.appendChild(M)),M={type:"script",instance:M,count:1,state:null},w.set(N,M))}}function iT(A,d,h,w){var N=(N=Ae.current)?Yx(N):null;if(!N)throw Error(n(446));switch(A){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(d=Kh(h.href),h=rt(N).hoistableStyles,w=h.get(d),w||(w={type:"style",instance:null,count:0,state:null},h.set(d,w)),w):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){A=Kh(h.href);var M=rt(N).hoistableStyles,ie=M.get(A);if(ie||(N=N.ownerDocument||N,ie={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},M.set(A,ie),(M=N.querySelector($m(A)))&&!M._p&&(ie.instance=M,ie.state.loading=5),bl.has(A)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},bl.set(A,h),M||Pj(N,A,h,ie.state))),d&&w===null)throw Error(n(528,""));return ie}if(d&&w!==null)throw Error(n(529,""));return null;case"script":return d=h.async,h=h.src,typeof h=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=Wh(h),h=rt(N).hoistableScripts,w=h.get(d),w||(w={type:"script",instance:null,count:0,state:null},h.set(d,w)),w):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,A))}}function Kh(A){return'href="'+sn(A)+'"'}function $m(A){return'link[rel="stylesheet"]['+A+"]"}function oT(A){return f({},A,{"data-precedence":A.precedence,precedence:null})}function Pj(A,d,h,w){A.querySelector('link[rel="preload"][as="style"]['+d+"]")?w.loading=1:(d=A.createElement("link"),w.preload=d,d.addEventListener("load",function(){return w.loading|=1}),d.addEventListener("error",function(){return w.loading|=2}),Zs(d,"link",h),He(d),A.head.appendChild(d))}function Wh(A){return'[src="'+sn(A)+'"]'}function Jm(A){return"script[async]"+A}function lT(A,d,h){if(d.count++,d.instance===null)switch(d.type){case"style":var w=A.querySelector('style[data-href~="'+sn(h.href)+'"]');if(w)return d.instance=w,He(w),w;var N=f({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return w=(A.ownerDocument||A).createElement("style"),He(w),Zs(w,"style",N),Xx(w,h.precedence,A),d.instance=w;case"stylesheet":N=Kh(h.href);var M=A.querySelector($m(N));if(M)return d.state.loading|=4,d.instance=M,He(M),M;w=oT(h),(N=bl.get(N))&&jy(w,N),M=(A.ownerDocument||A).createElement("link"),He(M);var ie=M;return ie._p=new Promise(function(we,Fe){ie.onload=we,ie.onerror=Fe}),Zs(M,"link",w),d.state.loading|=4,Xx(M,h.precedence,A),d.instance=M;case"script":return M=Wh(h.src),(N=A.querySelector(Jm(M)))?(d.instance=N,He(N),N):(w=h,(N=bl.get(M))&&(w=f({},h),Oy(w,N)),A=A.ownerDocument||A,N=A.createElement("script"),He(N),Zs(N,"link",w),A.head.appendChild(N),d.instance=N);case"void":return null;default:throw Error(n(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(w=d.instance,d.state.loading|=4,Xx(w,h.precedence,A));return d.instance}function Xx(A,d,h){for(var w=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),N=w.length?w[w.length-1]:null,M=N,ie=0;ie<w.length;ie++){var we=w[ie];if(we.dataset.precedence===d)M=we;else if(M!==N)break}M?M.parentNode.insertBefore(A,M.nextSibling):(d=h.nodeType===9?h.head:h,d.insertBefore(A,d.firstChild))}function jy(A,d){A.crossOrigin==null&&(A.crossOrigin=d.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=d.referrerPolicy),A.title==null&&(A.title=d.title)}function Oy(A,d){A.crossOrigin==null&&(A.crossOrigin=d.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=d.referrerPolicy),A.integrity==null&&(A.integrity=d.integrity)}var Zx=null;function cT(A,d,h){if(Zx===null){var w=new Map,N=Zx=new Map;N.set(h,w)}else N=Zx,w=N.get(h),w||(w=new Map,N.set(h,w));if(w.has(A))return w;for(w.set(A,null),h=h.getElementsByTagName(A),N=0;N<h.length;N++){var M=h[N];if(!(M[Ce]||M[pn]||A==="link"&&M.getAttribute("rel")==="stylesheet")&&M.namespaceURI!=="http://www.w3.org/2000/svg"){var ie=M.getAttribute(d)||"";ie=A+ie;var we=w.get(ie);we?we.push(M):w.set(ie,[M])}}return w}function AT(A,d,h){A=A.ownerDocument||A,A.head.insertBefore(h,d==="title"?A.querySelector("head > title"):null)}function jj(A,d,h){if(h===1||d.itemProp!=null)return!1;switch(A){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return A=d.disabled,typeof d.precedence=="string"&&A==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function uT(A){return!(A.type==="stylesheet"&&(A.state.loading&3)===0)}var Ym=null;function Oj(){}function Qj(A,d,h){if(Ym===null)throw Error(n(475));var w=Ym;if(d.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var N=Kh(h.href),M=A.querySelector($m(N));if(M){A=M._p,A!==null&&typeof A=="object"&&typeof A.then=="function"&&(w.count++,w=e1.bind(w),A.then(w,w)),d.state.loading|=4,d.instance=M,He(M);return}M=A.ownerDocument||A,h=oT(h),(N=bl.get(N))&&jy(h,N),M=M.createElement("link"),He(M);var ie=M;ie._p=new Promise(function(we,Fe){ie.onload=we,ie.onerror=Fe}),Zs(M,"link",h),d.instance=M}w.stylesheets===null&&(w.stylesheets=new Map),w.stylesheets.set(d,A),(A=d.state.preload)&&(d.state.loading&3)===0&&(w.count++,d=e1.bind(w),A.addEventListener("load",d),A.addEventListener("error",d))}}function Hj(){if(Ym===null)throw Error(n(475));var A=Ym;return A.stylesheets&&A.count===0&&Qy(A,A.stylesheets),0<A.count?function(d){var h=setTimeout(function(){if(A.stylesheets&&Qy(A,A.stylesheets),A.unsuspend){var w=A.unsuspend;A.unsuspend=null,w()}},6e4);return A.unsuspend=d,function(){A.unsuspend=null,clearTimeout(h)}}:null}function e1(){if(this.count--,this.count===0){if(this.stylesheets)Qy(this,this.stylesheets);else if(this.unsuspend){var A=this.unsuspend;this.unsuspend=null,A()}}}var t1=null;function Qy(A,d){A.stylesheets=null,A.unsuspend!==null&&(A.count++,t1=new Map,d.forEach(Vj,A),t1=null,e1.call(A))}function Vj(A,d){if(!(d.state.loading&4)){var h=t1.get(A);if(h)var w=h.get(null);else{h=new Map,t1.set(A,h);for(var N=A.querySelectorAll("link[data-precedence],style[data-precedence]"),M=0;M<N.length;M++){var ie=N[M];(ie.nodeName==="LINK"||ie.getAttribute("media")!=="not all")&&(h.set(ie.dataset.precedence,ie),w=ie)}w&&h.set(null,w)}N=d.instance,ie=N.getAttribute("data-precedence"),M=h.get(ie)||w,M===w&&h.set(null,N),h.set(ie,N),this.count++,w=e1.bind(this),N.addEventListener("load",w),N.addEventListener("error",w),M?M.parentNode.insertBefore(N,M.nextSibling):(A=A.nodeType===9?A.head:A,A.insertBefore(N,A.firstChild)),d.state.loading|=4}}var Xm={$$typeof:L,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function Gj(A,d,h,w,N,M,ie,we){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ga(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ga(0),this.hiddenUpdates=ga(null),this.identifierPrefix=w,this.onUncaughtError=N,this.onCaughtError=M,this.onRecoverableError=ie,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=we,this.incompleteTransitions=new Map}function dT(A,d,h,w,N,M,ie,we,Fe,Xe,ut,vt){return A=new Gj(A,d,h,ie,we,Fe,Xe,vt),d=1,M===!0&&(d|=24),M=Ls(3,null,null,d),A.current=M,M.stateNode=A,d=ym(),d.refCount++,A.pooledCache=d,d.refCount++,M.memoizedState={element:w,isDehydrated:h,cache:d},Me(M),A}function fT(A){return A?(A=is,A):is}function hT(A,d,h,w,N,M){N=fT(N),w.context===null?w.context=N:w.pendingContext=N,w=ct(d),w.payload={element:h},M=M===void 0?null:M,M!==null&&(w.callback=M),h=gt(A,w,d),h!==null&&(Ho(h,A,d),dt(h,A,d))}function mT(A,d){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var h=A.retryLane;A.retryLane=h!==0&&h<d?h:d}}function Hy(A,d){mT(A,d),(A=A.alternate)&&mT(A,d)}function pT(A){if(A.tag===13){var d=Jl(A,67108864);d!==null&&Ho(d,A,67108864),Hy(A,67108864)}}var r1=!0;function zj(A,d,h,w){var N=te.T;te.T=null;var M=ae.p;try{ae.p=2,Vy(A,d,h,w)}finally{ae.p=M,te.T=N}}function qj(A,d,h,w){var N=te.T;te.T=null;var M=ae.p;try{ae.p=8,Vy(A,d,h,w)}finally{ae.p=M,te.T=N}}function Vy(A,d,h,w){if(r1){var N=Gy(w);if(N===null)ky(A,d,w,n1,h),xT(A,w);else if(Wj(N,A,d,h,w))w.stopPropagation();else if(xT(A,w),d&4&&-1<Kj.indexOf(A)){for(;N!==null;){var M=ke(N);if(M!==null)switch(M.tag){case 3:if(M=M.stateNode,M.current.memoizedState.isDehydrated){var ie=Ir(M.pendingLanes);if(ie!==0){var we=M;for(we.pendingLanes|=2,we.entangledLanes|=2;ie;){var Fe=1<<31-kt(ie);we.entanglements[1]|=Fe,ie&=~Fe}eA(M),(Un&6)===0&&(Ox=Le()+500,zm(0))}}break;case 13:we=Jl(M,2),we!==null&&Ho(we,M,2),Hx(),Hy(M,2)}if(M=Gy(w),M===null&&ky(A,d,w,n1,h),M===N)break;N=M}N!==null&&w.stopPropagation()}else ky(A,d,w,null,h)}}function Gy(A){return A=Rn(A),zy(A)}var n1=null;function zy(A){if(n1=null,A=Be(A),A!==null){var d=s(A);if(d===null)A=null;else{var h=d.tag;if(h===13){if(A=i(d),A!==null)return A;A=null}else if(h===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;A=null}else d!==A&&(A=null)}}return n1=A,null}function gT(A){switch(A){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(it()){case et:return 2;case ht:return 8;case Et:case At:return 32;case jt:return 268435456;default:return 32}default:return 32}}var qy=!1,rd=null,nd=null,ad=null,Zm=new Map,ep=new Map,sd=[],Kj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xT(A,d){switch(A){case"focusin":case"focusout":rd=null;break;case"dragenter":case"dragleave":nd=null;break;case"mouseover":case"mouseout":ad=null;break;case"pointerover":case"pointerout":Zm.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":ep.delete(d.pointerId)}}function tp(A,d,h,w,N,M){return A===null||A.nativeEvent!==M?(A={blockedOn:d,domEventName:h,eventSystemFlags:w,nativeEvent:M,targetContainers:[N]},d!==null&&(d=ke(d),d!==null&&pT(d)),A):(A.eventSystemFlags|=w,d=A.targetContainers,N!==null&&d.indexOf(N)===-1&&d.push(N),A)}function Wj(A,d,h,w,N){switch(d){case"focusin":return rd=tp(rd,A,d,h,w,N),!0;case"dragenter":return nd=tp(nd,A,d,h,w,N),!0;case"mouseover":return ad=tp(ad,A,d,h,w,N),!0;case"pointerover":var M=N.pointerId;return Zm.set(M,tp(Zm.get(M)||null,A,d,h,w,N)),!0;case"gotpointercapture":return M=N.pointerId,ep.set(M,tp(ep.get(M)||null,A,d,h,w,N)),!0}return!1}function vT(A){var d=Be(A.target);if(d!==null){var h=s(d);if(h!==null){if(d=h.tag,d===13){if(d=i(h),d!==null){A.blockedOn=d,zs(A.priority,function(){if(h.tag===13){var w=Qo();w=Ns(w);var N=Jl(h,w);N!==null&&Ho(N,h,w),Hy(h,w)}});return}}else if(d===3&&h.stateNode.current.memoizedState.isDehydrated){A.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}A.blockedOn=null}function a1(A){if(A.blockedOn!==null)return!1;for(var d=A.targetContainers;0<d.length;){var h=Gy(A.nativeEvent);if(h===null){h=A.nativeEvent;var w=new h.constructor(h.type,h);ro=w,h.target.dispatchEvent(w),ro=null}else return d=ke(h),d!==null&&pT(d),A.blockedOn=h,!1;d.shift()}return!0}function wT(A,d,h){a1(A)&&h.delete(d)}function $j(){qy=!1,rd!==null&&a1(rd)&&(rd=null),nd!==null&&a1(nd)&&(nd=null),ad!==null&&a1(ad)&&(ad=null),Zm.forEach(wT),ep.forEach(wT)}function s1(A,d){A.blockedOn===d&&(A.blockedOn=null,qy||(qy=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,$j)))}var i1=null;function yT(A){i1!==A&&(i1=A,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){i1===A&&(i1=null);for(var d=0;d<A.length;d+=3){var h=A[d],w=A[d+1],N=A[d+2];if(typeof w!="function"){if(zy(w||h)===null)continue;break}var M=ke(h);M!==null&&(A.splice(d,3),d-=3,vl(M,{pending:!0,data:N,method:h.method,action:w},w,N))}}))}function rp(A){function d(Fe){return s1(Fe,A)}rd!==null&&s1(rd,A),nd!==null&&s1(nd,A),ad!==null&&s1(ad,A),Zm.forEach(d),ep.forEach(d);for(var h=0;h<sd.length;h++){var w=sd[h];w.blockedOn===A&&(w.blockedOn=null)}for(;0<sd.length&&(h=sd[0],h.blockedOn===null);)vT(h),h.blockedOn===null&&sd.shift();if(h=(A.ownerDocument||A).$$reactFormReplay,h!=null)for(w=0;w<h.length;w+=3){var N=h[w],M=h[w+1],ie=N[an]||null;if(typeof M=="function")ie||yT(h);else if(ie){var we=null;if(M&&M.hasAttribute("formAction")){if(N=M,ie=M[an]||null)we=ie.formAction;else if(zy(N)!==null)continue}else we=ie.action;typeof we=="function"?h[w+1]=we:(h.splice(w,3),w-=3),yT(h)}}}function Ky(A){this._internalRoot=A}o1.prototype.render=Ky.prototype.render=function(A){var d=this._internalRoot;if(d===null)throw Error(n(409));var h=d.current,w=Qo();hT(h,w,A,d,null,null)},o1.prototype.unmount=Ky.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var d=A.containerInfo;hT(A.current,2,null,A,null,null),Hx(),d[Dn]=null}};function o1(A){this._internalRoot=A}o1.prototype.unstable_scheduleHydration=function(A){if(A){var d=ja();A={blockedOn:null,target:A,priority:d};for(var h=0;h<sd.length&&d!==0&&d<sd[h].priority;h++);sd.splice(h,0,A),h===0&&vT(A)}};var bT=e.version;if(bT!=="19.1.1")throw Error(n(527,bT,"19.1.1"));ae.findDOMNode=function(A){var d=A._reactInternals;if(d===void 0)throw typeof A.render=="function"?Error(n(188)):(A=Object.keys(A).join(","),Error(n(268,A)));return A=c(d),A=A!==null?u(A):null,A=A===null?null:A.stateNode,A};var Jj={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var l1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!l1.isDisabled&&l1.supportsFiber)try{Qt=l1.inject(Jj),Gt=l1}catch{}}return ap.createRoot=function(A,d){if(!a(A))throw Error(n(299));var h=!1,w="",N=PS,M=jS,ie=OS,we=null;return d!=null&&(d.unstable_strictMode===!0&&(h=!0),d.identifierPrefix!==void 0&&(w=d.identifierPrefix),d.onUncaughtError!==void 0&&(N=d.onUncaughtError),d.onCaughtError!==void 0&&(M=d.onCaughtError),d.onRecoverableError!==void 0&&(ie=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(we=d.unstable_transitionCallbacks)),d=dT(A,1,!1,null,null,h,w,N,M,ie,we,null),A[Dn]=d.current,Ny(A),new Ky(d)},ap.hydrateRoot=function(A,d,h){if(!a(A))throw Error(n(299));var w=!1,N="",M=PS,ie=jS,we=OS,Fe=null,Xe=null;return h!=null&&(h.unstable_strictMode===!0&&(w=!0),h.identifierPrefix!==void 0&&(N=h.identifierPrefix),h.onUncaughtError!==void 0&&(M=h.onUncaughtError),h.onCaughtError!==void 0&&(ie=h.onCaughtError),h.onRecoverableError!==void 0&&(we=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(Fe=h.unstable_transitionCallbacks),h.formState!==void 0&&(Xe=h.formState)),d=dT(A,1,!0,d,h??null,w,N,M,ie,we,Fe,Xe),d.context=fT(null),h=d.current,w=Qo(),w=Ns(w),N=ct(w),N.callback=null,gt(h,N,w),h=w,d.current.lanes=h,Pa(d,h),eA(d),A[Dn]=d.current,Ny(A),new o1(d)},ap.version="19.1.1",ap}var FT;function iO(){if(FT)return Jy.exports;FT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Jy.exports=sO(),Jy.exports}var oO=iO();const lO=f6(oO),cO=()=>{};var DT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h6=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},AO=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=t[r++];e[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=t[r++],i=t[r++],o=t[r++],c=((a&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const s=t[r++],i=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63)}}return e.join("")},m6={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const s=t[a],i=a+1<t.length,o=i?t[a+1]:0,c=a+2<t.length,u=c?t[a+2]:0,f=s>>2,m=(s&3)<<4|o>>4;let p=(o&15)<<2|u>>6,g=u&63;c||(g=64,i||(p=64)),n.push(r[f],r[m],r[p],r[g])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(h6(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):AO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const s=r[t.charAt(a++)],o=a<t.length?r[t.charAt(a)]:0;++a;const u=a<t.length?r[t.charAt(a)]:64;++a;const m=a<t.length?r[t.charAt(a)]:64;if(++a,s==null||o==null||u==null||m==null)throw new uO;const p=s<<2|o>>4;if(n.push(p),u!==64){const g=o<<4&240|u>>2;if(n.push(g),m!==64){const b=u<<6&192|m;n.push(b)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class uO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dO=function(t){const e=h6(t);return m6.encodeByteArray(e,!0)},Bv=function(t){return dO(t).replace(/\./g,"")},p6=function(t){try{return m6.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO=()=>fO().__FIREBASE_DEFAULTS__,mO=()=>{if(typeof process>"u"||typeof DT>"u")return;const t=DT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},pO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&p6(t[1]);return e&&JSON.parse(e)},D2=()=>{try{return cO()||hO()||mO()||pO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},g6=t=>{var e,r;return(r=(e=D2())==null?void 0:e.emulatorHosts)==null?void 0:r[t]},x6=t=>{const e=g6(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},v6=()=>{var t;return(t=D2())==null?void 0:t.config},w6=t=>{var e;return(e=D2())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function s_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xO(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Bv(JSON.stringify(r)),Bv(JSON.stringify(i)),""].join(".")}const Dp={};function vO(){const t={prod:[],emulator:[]};for(const e of Object.keys(Dp))Dp[e]?t.emulator.push(e):t.prod.push(e);return t}function wO(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let RT=!1;function i_(t,e){if(typeof window>"u"||typeof document>"u"||!oh(window.location.host)||Dp[t]===e||Dp[t]||RT)return;Dp[t]=e;function r(p){return`__firebase__banner__${p}`}const n="__firebase__banner",s=vO().prod.length>0;function i(){const p=document.getElementById(n);p&&p.remove()}function o(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{RT=!0,i()},p}function f(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function m(){const p=wO(n),g=r("text"),b=document.getElementById(g)||document.createElement("span"),y=r("learnmore"),T=document.getElementById(y)||document.createElement("a"),k=r("preprendIcon"),D=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const L=p.element;o(L),f(T,y);const j=u();c(D,k),L.append(D,b,T,j),document.body.appendChild(L)}s?(b.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pi())}function bO(){var e;const t=(e=D2())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function EO(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function _O(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SO(){const t=Pi();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function TO(){return!bO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function BO(){try{return typeof indexedDB=="object"}catch{return!1}}function NO(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;e(((s=a.error)==null?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO="FirebaseError";class wA extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=kO,Object.setPrototypeOf(this,wA.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lg.prototype.create)}}class Lg{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,s=this.errors[e],i=s?IO(s,n):"Error",o=`${this.serviceName}: ${i} (${a}).`;return new wA(a,o,n)}}function IO(t,e){return t.replace(FO,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const FO=/\{\$([^}]+)}/g;function DO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Md(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const s=t[a],i=e[a];if(LT(s)&&LT(i)){if(!Md(s,i))return!1}else if(s!==i)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function LT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function mp(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");e[decodeURIComponent(a)]=decodeURIComponent(s)}}),e}function pp(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function RO(t,e){const r=new LO(t,e);return r.subscribe.bind(r)}class LO{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");UO(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=eb),a.error===void 0&&(a.error=eb),a.complete===void 0&&(a.complete=eb);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function UO(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function eb(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(t){return t&&t._delegate?t._delegate:t}class Pd{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kf="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new gO;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jO(e))try{this.getOrInitializeService({instanceIdentifier:kf})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(e=kf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=kf){return this.instances.has(e)}getOptions(e=kf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&i.resolve(a)}return a}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(e),this.onInitCallbacks.set(n,a);const s=this.instances.get(n);return s&&e(s,n),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:PO(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=kf){return this.component?this.component.multipleInstances?e:kf:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PO(t){return t===kf?void 0:t}function jO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new MO(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(tn||(tn={}));const QO={debug:tn.DEBUG,verbose:tn.VERBOSE,info:tn.INFO,warn:tn.WARN,error:tn.ERROR,silent:tn.SILENT},HO=tn.INFO,VO={[tn.DEBUG]:"log",[tn.VERBOSE]:"log",[tn.INFO]:"info",[tn.WARN]:"warn",[tn.ERROR]:"error"},GO=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=VO[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let o_=class{constructor(e){this.name=e,this._logLevel=HO,this._logHandler=GO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tn.DEBUG,...e),this._logHandler(this,tn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tn.VERBOSE,...e),this._logHandler(this,tn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tn.INFO,...e),this._logHandler(this,tn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tn.WARN,...e),this._logHandler(this,tn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tn.ERROR,...e),this._logHandler(this,tn.ERROR,...e)}};const zO=(t,e)=>e.some(r=>t instanceof r);let UT,MT;function qO(){return UT||(UT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KO(){return MT||(MT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const y6=new WeakMap,wC=new WeakMap,b6=new WeakMap,tb=new WeakMap,l_=new WeakMap;function WO(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",s),t.removeEventListener("error",i)},s=()=>{r(Bd(t.result)),a()},i=()=>{n(t.error),a()};t.addEventListener("success",s),t.addEventListener("error",i)});return e.then(r=>{r instanceof IDBCursor&&y6.set(r,t)}).catch(()=>{}),l_.set(e,t),e}function $O(t){if(wC.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",i),t.removeEventListener("abort",i)},s=()=>{r(),a()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",s),t.addEventListener("error",i),t.addEventListener("abort",i)});wC.set(t,e)}let yC={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return wC.get(t);if(e==="objectStoreNames")return t.objectStoreNames||b6.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Bd(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function JO(t){yC=t(yC)}function YO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(rb(this),e,...r);return b6.set(n,e.sort?e.sort():[e]),Bd(n)}:KO().includes(t)?function(...e){return t.apply(rb(this),e),Bd(y6.get(this))}:function(...e){return Bd(t.apply(rb(this),e))}}function XO(t){return typeof t=="function"?YO(t):(t instanceof IDBTransaction&&$O(t),zO(t,qO())?new Proxy(t,yC):t)}function Bd(t){if(t instanceof IDBRequest)return WO(t);if(tb.has(t))return tb.get(t);const e=XO(t);return e!==t&&(tb.set(t,e),l_.set(e,t)),e}const rb=t=>l_.get(t);function ZO(t,e,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const i=indexedDB.open(t,e),o=Bd(i);return n&&i.addEventListener("upgradeneeded",c=>{n(Bd(i.result),c.oldVersion,c.newVersion,Bd(i.transaction),c)}),r&&i.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),o.then(c=>{s&&c.addEventListener("close",()=>s()),a&&c.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const e7=["get","getKey","getAll","getAllKeys","count"],t7=["put","add","delete","clear"],nb=new Map;function PT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(nb.get(e))return nb.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=t7.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||e7.includes(r)))return;const s=async function(i,...o){const c=this.transaction(i,a?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(o.shift())),(await Promise.all([u[r](...o),a&&c.done]))[0]};return nb.set(e,s),s}JO(t=>({...t,get:(e,r,n)=>PT(e,r)||t.get(e,r,n),has:(e,r)=>!!PT(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r7{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(n7(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function n7(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bC="@firebase/app",jT="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hu=new o_("@firebase/app"),a7="@firebase/app-compat",s7="@firebase/analytics-compat",i7="@firebase/analytics",o7="@firebase/app-check-compat",l7="@firebase/app-check",c7="@firebase/auth",A7="@firebase/auth-compat",u7="@firebase/database",d7="@firebase/data-connect",f7="@firebase/database-compat",h7="@firebase/functions",m7="@firebase/functions-compat",p7="@firebase/installations",g7="@firebase/installations-compat",x7="@firebase/messaging",v7="@firebase/messaging-compat",w7="@firebase/performance",y7="@firebase/performance-compat",b7="@firebase/remote-config",C7="@firebase/remote-config-compat",E7="@firebase/storage",_7="@firebase/storage-compat",S7="@firebase/firestore",T7="@firebase/ai",B7="@firebase/firestore-compat",N7="firebase",k7="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC="[DEFAULT]",I7={[bC]:"fire-core",[a7]:"fire-core-compat",[i7]:"fire-analytics",[s7]:"fire-analytics-compat",[l7]:"fire-app-check",[o7]:"fire-app-check-compat",[c7]:"fire-auth",[A7]:"fire-auth-compat",[u7]:"fire-rtdb",[d7]:"fire-data-connect",[f7]:"fire-rtdb-compat",[h7]:"fire-fn",[m7]:"fire-fn-compat",[p7]:"fire-iid",[g7]:"fire-iid-compat",[x7]:"fire-fcm",[v7]:"fire-fcm-compat",[w7]:"fire-perf",[y7]:"fire-perf-compat",[b7]:"fire-rc",[C7]:"fire-rc-compat",[E7]:"fire-gcs",[_7]:"fire-gcs-compat",[S7]:"fire-fst",[B7]:"fire-fst-compat",[T7]:"fire-vertex","fire-js":"fire-js",[N7]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng=new Map,F7=new Map,EC=new Map;function OT(t,e){try{t.container.addComponent(e)}catch(r){hu.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function $f(t){const e=t.name;if(EC.has(e))return hu.debug(`There were multiple attempts to register component ${e}.`),!1;EC.set(e,t);for(const r of ng.values())OT(r,t);for(const r of F7.values())OT(r,t);return!0}function R2(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Il(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D7={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nd=new Lg("app","Firebase",D7);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Pd("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nd.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm=k7;function c_(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:CC,automaticDataCollectionEnabled:!0,...e},a=n.name;if(typeof a!="string"||!a)throw Nd.create("bad-app-name",{appName:String(a)});if(r||(r=v6()),!r)throw Nd.create("no-options");const s=ng.get(a);if(s){if(Md(r,s.options)&&Md(n,s.config))return s;throw Nd.create("duplicate-app",{appName:a})}const i=new OO(a);for(const c of EC.values())i.addComponent(c);const o=new R7(r,n,i);return ng.set(a,o),o}function A_(t=CC){const e=ng.get(t);if(!e&&t===CC&&v6())return c_();if(!e)throw Nd.create("no-app",{appName:t});return e}function QT(){return Array.from(ng.values())}function AA(t,e,r){let n=I7[t]??t;r&&(n+=`-${r}`);const a=n.match(/\s|\//),s=e.match(/\s|\//);if(a||s){const i=[`Unable to register library "${n}" with version "${e}":`];a&&i.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&s&&i.push("and"),s&&i.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hu.warn(i.join(" "));return}$f(new Pd(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L7="firebase-heartbeat-database",U7=1,ag="firebase-heartbeat-store";let ab=null;function C6(){return ab||(ab=ZO(L7,U7,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ag)}catch(r){console.warn(r)}}}}).catch(t=>{throw Nd.create("idb-open",{originalErrorMessage:t.message})})),ab}async function M7(t){try{const r=(await C6()).transaction(ag),n=await r.objectStore(ag).get(E6(t));return await r.done,n}catch(e){if(e instanceof wA)hu.warn(e.message);else{const r=Nd.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});hu.warn(r.message)}}}async function HT(t,e){try{const n=(await C6()).transaction(ag,"readwrite");await n.objectStore(ag).put(e,E6(t)),await n.done}catch(r){if(r instanceof wA)hu.warn(r.message);else{const n=Nd.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});hu.warn(n.message)}}}function E6(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P7=1024,j7=30;class O7{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new H7(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=VT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats.length>j7){const i=V7(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){hu.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=VT(),{heartbeatsToSend:n,unsentEntries:a}=Q7(this._heartbeatsCache.heartbeats),s=Bv(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return hu.warn(r),""}}}function VT(){return new Date().toISOString().substring(0,10)}function Q7(t,e=P7){const r=[];let n=t.slice();for(const a of t){const s=r.find(i=>i.agent===a.agent);if(s){if(s.dates.push(a.date),GT(r)>e){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),GT(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class H7{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return BO()?NO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await M7(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return HT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return HT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function GT(t){return Bv(JSON.stringify({version:2,heartbeats:t})).length}function V7(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G7(t){$f(new Pd("platform-logger",e=>new r7(e),"PRIVATE")),$f(new Pd("heartbeat",e=>new O7(e),"PRIVATE")),AA(bC,jT,t),AA(bC,jT,"esm2020"),AA("fire-js","")}G7("");function _6(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const z7=_6,S6=new Lg("auth","Firebase",_6());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv=new o_("@firebase/auth");function q7(t,...e){Nv.logLevel<=tn.WARN&&Nv.warn(`Auth (${rm}): ${t}`,...e)}function sv(t,...e){Nv.logLevel<=tn.ERROR&&Nv.error(`Auth (${rm}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(t,...e){throw u_(t,...e)}function uA(t,...e){return u_(t,...e)}function T6(t,e,r){const n={...z7(),[e]:r};return new Lg("auth","Firebase",n).create(e,{appName:t.name})}function kd(t){return T6(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function u_(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return S6.create(t,...e)}function wr(t,e,...r){if(!t)throw u_(e,...r)}function au(t){const e="INTERNAL ASSERTION FAILED: "+t;throw sv(e),new Error(e)}function mu(t,e){t||au(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function K7(){return zT()==="http:"||zT()==="https:"}function zT(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(K7()||EO()||"connection"in navigator)?navigator.onLine:!0}function $7(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,r){this.shortDelay=e,this.longDelay=r,mu(r>e,"Short delay should be less than long delay!"),this.isMobile=yO()||_O()}get(){return W7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(t,e){mu(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;au("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;au("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;au("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y7=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],X7=new Mg(3e4,6e4);function Xd(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function yu(t,e,r,n,a={}){return N6(t,a,async()=>{let s={},i={};n&&(e==="GET"?i=n:s={body:JSON.stringify(n)});const o=Ug({key:t.config.apiKey,...i}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...s};return CO()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&oh(t.emulatorConfig.host)&&(u.credentials="include"),B6.fetch()(await k6(t,t.config.apiHost,r,o),u)})}async function N6(t,e,r){t._canInitEmulator=!1;const n={...J7,...e};try{const a=new eQ(t),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw c1(t,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const o=s.ok?i.errorMessage:i.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw c1(t,"credential-already-in-use",i);if(c==="EMAIL_EXISTS")throw c1(t,"email-already-in-use",i);if(c==="USER_DISABLED")throw c1(t,"user-disabled",i);const f=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw T6(t,f,u);wc(t,f)}}catch(a){if(a instanceof wA)throw a;wc(t,"network-request-failed",{message:String(a)})}}async function L2(t,e,r,n,a={}){const s=await yu(t,e,r,n,a);return"mfaPendingCredential"in s&&wc(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function k6(t,e,r,n){const a=`${e}${r}?${n}`,s=t,i=s.config.emulator?d_(t.config,a):`${t.config.apiScheme}://${a}`;return Y7.includes(r)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(i).toString():i}function Z7(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class eQ{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(uA(this.auth,"network-request-failed")),X7.get())})}}function c1(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=uA(t,e,n);return a.customData._tokenResponse=r,a}function qT(t){return t!==void 0&&t.enterprise!==void 0}class tQ{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return Z7(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function rQ(t,e){return yu(t,"GET","/v2/recaptchaConfig",Xd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nQ(t,e){return yu(t,"POST","/v1/accounts:delete",e)}async function kv(t,e){return yu(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function aQ(t,e=!1){const r=pa(t),n=await r.getIdToken(e),a=f_(n);wr(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:Rp(sb(a.auth_time)),issuedAtTime:Rp(sb(a.iat)),expirationTime:Rp(sb(a.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function sb(t){return Number(t)*1e3}function f_(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return sv("JWT malformed, contained fewer than 3 sections"),null;try{const a=p6(r);return a?JSON.parse(a):(sv("Failed to decode base64 JWT payload"),null)}catch(a){return sv("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function KT(t){const e=f_(t);return wr(e,"internal-error"),wr(typeof e.exp<"u","internal-error"),wr(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sg(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof wA&&sQ(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function sQ({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iQ{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rp(this.lastLoginAt),this.creationTime=Rp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iv(t){var m;const e=t.auth,r=await t.getIdToken(),n=await sg(t,kv(e,{idToken:r}));wr(n==null?void 0:n.users.length,e,"internal-error");const a=n.users[0];t._notifyReloadListener(a);const s=(m=a.providerUserInfo)!=null&&m.length?I6(a.providerUserInfo):[],i=lQ(t.providerData,s),o=t.isAnonymous,c=!(t.email&&a.passwordHash)&&!(i!=null&&i.length),u=o?c:!1,f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new SC(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function oQ(t){const e=pa(t);await Iv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function lQ(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function I6(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cQ(t,e){const r=await N6(t,{},async()=>{const n=Ug({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:s}=t.config,i=await k6(t,a,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:n};return t.emulatorConfig&&oh(t.emulatorConfig.host)&&(c.credentials="include"),B6.fetch()(i,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function AQ(t,e){return yu(t,"POST","/v2/accounts:revokeToken",Xd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){wr(e.idToken,"internal-error"),wr(typeof e.idToken<"u","internal-error"),wr(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):KT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){wr(e.length!==0,"internal-error");const r=KT(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(wr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await cQ(e,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,i=new _0;return n&&(wr(typeof n=="string","internal-error",{appName:e}),i.refreshToken=n),a&&(wr(typeof a=="string","internal-error",{appName:e}),i.accessToken=a),s&&(wr(typeof s=="number","internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _0,this.toJSON())}_performRefresh(){return au("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(t,e){wr(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class mc{constructor({uid:e,auth:r,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new iQ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new SC(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const r=await sg(this,this.stsTokenManager.getToken(this.auth,e));return wr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return aQ(this,e)}reload(){return oQ(this)}_assign(e){this!==e&&(wr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new mc({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){wr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Iv(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Il(this.auth.app))return Promise.reject(kd(this.auth));const e=await this.getIdToken();return await sg(this,nQ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const n=r.displayName??void 0,a=r.email??void 0,s=r.phoneNumber??void 0,i=r.photoURL??void 0,o=r.tenantId??void 0,c=r._redirectEventId??void 0,u=r.createdAt??void 0,f=r.lastLoginAt??void 0,{uid:m,emailVerified:p,isAnonymous:g,providerData:b,stsTokenManager:y}=r;wr(m&&y,e,"internal-error");const T=_0.fromJSON(this.name,y);wr(typeof m=="string",e,"internal-error"),od(n,e.name),od(a,e.name),wr(typeof p=="boolean",e,"internal-error"),wr(typeof g=="boolean",e,"internal-error"),od(s,e.name),od(i,e.name),od(o,e.name),od(c,e.name),od(u,e.name),od(f,e.name);const k=new mc({uid:m,auth:e,email:a,emailVerified:p,displayName:n,isAnonymous:g,photoURL:i,phoneNumber:s,tenantId:o,stsTokenManager:T,createdAt:u,lastLoginAt:f});return b&&Array.isArray(b)&&(k.providerData=b.map(D=>({...D}))),c&&(k._redirectEventId=c),k}static async _fromIdTokenResponse(e,r,n=!1){const a=new _0;a.updateFromServerResponse(r);const s=new mc({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await Iv(s),s}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];wr(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?I6(a.providerUserInfo):[],i=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),o=new _0;o.updateFromIdToken(n);const c=new mc({uid:a.localId,auth:e,stsTokenManager:o,isAnonymous:i}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new SC(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT=new Map;function su(t){mu(t instanceof Function,"Expected a class definition");let e=WT.get(t);return e?(mu(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,WT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}F6.type="NONE";const $T=F6;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iv(t,e,r){return`firebase:${t}:${e}:${r}`}class S0{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=iv(this.userKey,a.apiKey,s),this.fullPersistenceKey=iv("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await kv(this.auth,{idToken:e}).catch(()=>{});return r?mc._fromGetAccountInfoResponse(this.auth,r,e):null}return mc._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new S0(su($T),e,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||su($T);const i=iv(n,e.config.apiKey,e.name);let o=null;for(const u of r)try{const f=await u._get(i);if(f){let m;if(typeof f=="string"){const p=await kv(e,{idToken:f}).catch(()=>{});if(!p)break;m=await mc._fromGetAccountInfoResponse(e,p,f)}else m=mc._fromJSON(e,f);u!==s&&(o=m),s=u;break}}catch{}const c=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new S0(s,e,n):(s=c[0],o&&await s._set(i,o.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(i)}catch{}})),new S0(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(U6(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(D6(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(P6(e))return"Blackberry";if(j6(e))return"Webos";if(R6(e))return"Safari";if((e.includes("chrome/")||L6(e))&&!e.includes("edge/"))return"Chrome";if(M6(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function D6(t=Pi()){return/firefox\//i.test(t)}function R6(t=Pi()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function L6(t=Pi()){return/crios\//i.test(t)}function U6(t=Pi()){return/iemobile/i.test(t)}function M6(t=Pi()){return/android/i.test(t)}function P6(t=Pi()){return/blackberry/i.test(t)}function j6(t=Pi()){return/webos/i.test(t)}function h_(t=Pi()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function uQ(t=Pi()){var e;return h_(t)&&!!((e=window.navigator)!=null&&e.standalone)}function dQ(){return SO()&&document.documentMode===10}function O6(t=Pi()){return h_(t)||M6(t)||j6(t)||P6(t)||/windows phone/i.test(t)||U6(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q6(t,e=[]){let r;switch(t){case"Browser":r=JT(Pi());break;case"Worker":r=`${JT(Pi())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${rm}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fQ{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((i,o)=>{try{const c=e(s);i(c)}catch(c){o(c)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hQ(t,e={}){return yu(t,"GET","/v2/passwordPolicy",Xd(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mQ=6;class pQ{constructor(e){var n;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??mQ,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gQ{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new YT(this),this.idTokenSubscription=new YT(this),this.beforeStateQueue=new fQ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=S6,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=su(r)),this._initializationPromise=this.queue(async()=>{var n,a,s;if(!this._deleted&&(this.persistenceManager=await S0.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await kv(this,{idToken:e}),n=await mc._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Il(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=n==null?void 0:n._redirectEventId,c=await this.tryRedirectSignIn(e);(!i||i===o)&&(c!=null&&c.user)&&(n=c.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return wr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Iv(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$7()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Il(this.app))return Promise.reject(kd(this));const r=e?pa(e):null;return r&&wr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&wr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Il(this.app)?Promise.reject(kd(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Il(this.app)?Promise.reject(kd(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(su(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await hQ(this),r=new pQ(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Lg("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await AQ(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&su(e)||this._popupRedirectResolver;wr(r,this,"argument-error"),this.redirectPersistenceManager=await S0.create(this,[su(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(wr(o,this,"internal-error"),o.then(()=>{i||s(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,a);return()=>{i=!0,c()}}else{const c=e.addObserver(r);return()=>{i=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return wr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Q6(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var r;if(Il(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return e!=null&&e.error&&q7(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function lh(t){return pa(t)}class YT{constructor(e){this.auth=e,this.observer=null,this.addObserver=RO(r=>this.observer=r)}get next(){return wr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let U2={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xQ(t){U2=t}function H6(t){return U2.loadJS(t)}function vQ(){return U2.recaptchaEnterpriseScript}function wQ(){return U2.gapiScript}function yQ(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class bQ{constructor(){this.enterprise=new CQ}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class CQ{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const EQ="recaptcha-enterprise",V6="NO_RECAPTCHA";class _Q{constructor(e){this.type=EQ,this.auth=lh(e)}async verify(e="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(i,o)=>{rQ(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new tQ(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,i(u.siteKey)}}).catch(c=>{o(c)})})}function a(s,i,o){const c=window.grecaptcha;qT(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{i(u)}).catch(()=>{i(V6)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new bQ().execute("siteKey",{action:"verify"}):new Promise((s,i)=>{n(this.auth).then(o=>{if(!r&&qT(window.grecaptcha))a(o,s,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let c=vQ();c.length!==0&&(c+=o),H6(c).then(()=>{a(o,s,i)}).catch(u=>{i(u)})}}).catch(o=>{i(o)})})}}async function XT(t,e,r,n=!1,a=!1){const s=new _Q(t);let i;if(a)i=V6;else try{i=await s.verify(r)}catch{i=await s.verify(r,!0)}const o={...e};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function TC(t,e,r,n,a){var s;if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await XT(t,e,r,r==="getOobCode");return n(t,i)}else return n(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await XT(t,e,r,r==="getOobCode");return n(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SQ(t,e){const r=R2(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(Md(s,e??{}))return a;wc(a,"already-initialized")}return r.initialize({options:e})}function TQ(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(su);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function BQ(t,e,r){const n=lh(t);wr(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,s=G6(e),{host:i,port:o}=NQ(e),c=o===null?"":`:${o}`,u={url:`${s}//${i}${c}/`},f=Object.freeze({host:i,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){wr(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),wr(Md(u,n.config.emulator)&&Md(f,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=f,n.settings.appVerificationDisabledForTesting=!0,oh(i)?(s_(`${s}//${i}${c}`),i_("Auth",!0)):kQ()}function G6(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function NQ(t){const e=G6(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:ZT(n.substr(s.length+1))}}else{const[s,i]=n.split(":");return{host:s,port:ZT(i)}}}function ZT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function kQ(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return au("not implemented")}_getIdTokenResponse(e){return au("not implemented")}_linkToIdToken(e,r){return au("not implemented")}_getReauthenticationResolver(e){return au("not implemented")}}async function IQ(t,e){return yu(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FQ(t,e){return L2(t,"POST","/v1/accounts:signInWithPassword",Xd(t,e))}async function DQ(t,e){return yu(t,"POST","/v1/accounts:sendOobCode",Xd(t,e))}async function RQ(t,e){return DQ(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LQ(t,e){return L2(t,"POST","/v1/accounts:signInWithEmailLink",Xd(t,e))}async function UQ(t,e){return L2(t,"POST","/v1/accounts:signInWithEmailLink",Xd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig extends m_{constructor(e,r,n,a=null){super("password",n),this._email=e,this._password=r,this._tenantId=a}static _fromEmailAndPassword(e,r){return new ig(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new ig(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return TC(e,r,"signInWithPassword",FQ);case"emailLink":return LQ(e,{email:this._email,oobCode:this._password});default:wc(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return TC(e,n,"signUpPassword",IQ);case"emailLink":return UQ(e,{idToken:r,email:this._email,oobCode:this._password});default:wc(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T0(t,e){return L2(t,"POST","/v1/accounts:signInWithIdp",Xd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MQ="http://localhost";class Jf extends m_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Jf(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):wc("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a,...s}=r;if(!n||!a)return null;const i=new Jf(n,a);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){const r=this.buildRequest();return T0(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,T0(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,T0(e,r)}buildRequest(){const e={requestUri:MQ,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Ug(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PQ(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function jQ(t){const e=mp(pp(t)).link,r=e?mp(pp(e)).deep_link_id:null,n=mp(pp(t)).deep_link_id;return(n?mp(pp(n)).link:null)||n||r||e||t}class p_{constructor(e){const r=mp(pp(e)),n=r.apiKey??null,a=r.oobCode??null,s=PQ(r.mode??null);wr(n&&a&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=a,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(e){const r=jQ(e);try{return new p_(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(){this.providerId=nm.PROVIDER_ID}static credential(e,r){return ig._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=p_.parseLink(r);return wr(n,"argument-error"),ig._fromEmailAndCode(e,n.code,n.tenantId)}}nm.PROVIDER_ID="password";nm.EMAIL_PASSWORD_SIGN_IN_METHOD="password";nm.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg extends z6{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd extends Pg{constructor(){super("facebook.com")}static credential(e){return Jf._fromParams({providerId:pd.PROVIDER_ID,signInMethod:pd.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pd.credentialFromTaggedObject(e)}static credentialFromError(e){return pd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pd.credential(e.oauthAccessToken)}catch{return null}}}pd.FACEBOOK_SIGN_IN_METHOD="facebook.com";pd.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd extends Pg{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Jf._fromParams({providerId:gd.PROVIDER_ID,signInMethod:gd.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return gd.credentialFromTaggedObject(e)}static credentialFromError(e){return gd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return gd.credential(r,n)}catch{return null}}}gd.GOOGLE_SIGN_IN_METHOD="google.com";gd.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd extends Pg{constructor(){super("github.com")}static credential(e){return Jf._fromParams({providerId:xd.PROVIDER_ID,signInMethod:xd.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xd.credentialFromTaggedObject(e)}static credentialFromError(e){return xd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xd.credential(e.oauthAccessToken)}catch{return null}}}xd.GITHUB_SIGN_IN_METHOD="github.com";xd.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd extends Pg{constructor(){super("twitter.com")}static credential(e,r){return Jf._fromParams({providerId:vd.PROVIDER_ID,signInMethod:vd.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return vd.credentialFromTaggedObject(e)}static credentialFromError(e){return vd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return vd.credential(r,n)}catch{return null}}}vd.TWITTER_SIGN_IN_METHOD="twitter.com";vd.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const s=await mc._fromIdTokenResponse(e,n,a),i=eB(n);return new H0({user:s,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=eB(n);return new H0({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function eB(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv extends wA{constructor(e,r,n,a){super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,Fv.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new Fv(e,r,n,a)}}function q6(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Fv._fromErrorAndOperation(t,s,e,n):s})}async function OQ(t,e,r=!1){const n=await sg(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return H0._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QQ(t,e,r=!1){const{auth:n}=t;if(Il(n.app))return Promise.reject(kd(n));const a="reauthenticate";try{const s=await sg(t,q6(n,a,e,t),r);wr(s.idToken,n,"internal-error");const i=f_(s.idToken);wr(i,n,"internal-error");const{sub:o}=i;return wr(t.uid===o,n,"user-mismatch"),H0._forOperation(t,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&wc(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K6(t,e,r=!1){if(Il(t.app))return Promise.reject(kd(t));const n="signIn",a=await q6(t,n,e),s=await H0._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(s.user),s}async function HQ(t,e){return K6(lh(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VQ(t){const e=lh(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function GQ(t,e,r){const n=lh(t);await TC(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",RQ)}function zQ(t,e,r){return Il(t.app)?Promise.reject(kd(t)):HQ(pa(t),nm.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&VQ(t),n})}function qQ(t,e,r,n){return pa(t).onIdTokenChanged(e,r,n)}function KQ(t,e,r){return pa(t).beforeAuthStateChanged(e,r)}function WQ(t,e,r,n){return pa(t).onAuthStateChanged(e,r,n)}function $Q(t){return pa(t).signOut()}const Dv="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Dv,"1"),this.storage.removeItem(Dv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JQ=1e3,YQ=10;class $6 extends W6{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=O6(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((i,o,c)=>{this.notifyListeners(i,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},s=this.storage.getItem(n);dQ()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,YQ):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},JQ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}$6.type="LOCAL";const XQ=$6;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6 extends W6{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}J6.type="SESSION";const Y6=J6;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZQ(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new M2(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:s}=r.data,i=this.handlersMap[a];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const o=Array.from(i).map(async u=>u(r.origin,s)),c=await ZQ(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}M2.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eH{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,i;return new Promise((o,c)=>{const u=g_("",20);a.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},n);i={messageChannel:a,onMessage(m){const p=m;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(p.data.response);break;default:clearTimeout(f),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(i),a.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[a.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(){return window}function tH(t){dA().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X6(){return typeof dA().WorkerGlobalScope<"u"&&typeof dA().importScripts=="function"}async function rH(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nH(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function aH(){return X6()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6="firebaseLocalStorageDb",sH=1,Rv="firebaseLocalStorage",eD="fbase_key";class jg{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function P2(t,e){return t.transaction([Rv],e?"readwrite":"readonly").objectStore(Rv)}function iH(){const t=indexedDB.deleteDatabase(Z6);return new jg(t).toPromise()}function BC(){const t=indexedDB.open(Z6,sH);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Rv,{keyPath:eD})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Rv)?e(n):(n.close(),await iH(),e(await BC()))})})}async function tB(t,e,r){const n=P2(t,!0).put({[eD]:e,value:r});return new jg(n).toPromise()}async function oH(t,e){const r=P2(t,!1).get(e),n=await new jg(r).toPromise();return n===void 0?null:n.value}function rB(t,e){const r=P2(t,!0).delete(e);return new jg(r).toPromise()}const lH=800,cH=3;class tD{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await BC(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>cH)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return X6()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=M2._getInstance(aH()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await rH(),!this.activeServiceWorker)return;this.sender=new eH(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(r=e[0])!=null&&r.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||nH()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await BC();return await tB(e,Dv,"1"),await rB(e,Dv),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>tB(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>oH(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>rB(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const s=P2(a,!1).getAll();return new jg(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:s}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}tD.type="LOCAL";const AH=tD;new Mg(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uH(t,e){return e?su(e):(wr(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_ extends m_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return T0(e,this._buildIdpRequest())}_linkToIdToken(e,r){return T0(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return T0(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function dH(t){return K6(t.auth,new x_(t),t.bypassAuthState)}function fH(t){const{auth:e,user:r}=t;return wr(r,e,"internal-error"),QQ(r,new x_(t),t.bypassAuthState)}async function hH(t){const{auth:e,user:r}=t;return wr(r,e,"internal-error"),OQ(r,new x_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,r,n,a,s=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:i,type:o}=e;if(i){this.reject(i);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dH;case"linkViaPopup":case"linkViaRedirect":return hH;case"reauthViaPopup":case"reauthViaRedirect":return fH;default:wc(this.auth,"internal-error")}}resolve(e){mu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mH=new Mg(2e3,1e4);class w0 extends rD{constructor(e,r,n,a,s){super(e,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,w0.currentPopupAction&&w0.currentPopupAction.cancel(),w0.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return wr(e,this.auth,"internal-error"),e}async onExecution(){mu(this.filter.length===1,"Popup operations only handle one event");const e=g_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(uA(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(uA(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w0.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(uA(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,mH.get())};e()}}w0.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pH="pendingRedirect",ov=new Map;class gH extends rD{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=ov.get(this.auth._key());if(!e){try{const n=await xH(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}ov.set(this.auth._key(),e)}return this.bypassAuthState||ov.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function xH(t,e){const r=yH(e),n=wH(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function vH(t,e){ov.set(t._key(),e)}function wH(t){return su(t._redirectPersistence)}function yH(t){return iv(pH,t.config.apiKey,t.name)}async function bH(t,e,r=!1){if(Il(t.app))return Promise.reject(kd(t));const n=lh(t),a=uH(n,e),i=await new gH(n,a,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CH=600*1e3;class EH{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_H(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!nD(e)){const a=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(uA(this.auth,a))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=CH&&this.cachedEventUids.clear(),this.cachedEventUids.has(nB(e))}saveEventToCache(e){this.cachedEventUids.add(nB(e)),this.lastProcessedEventTime=Date.now()}}function nB(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function nD({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _H(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nD(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SH(t,e={}){return yu(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BH=/^https?/;async function NH(t){if(t.config.emulator)return;const{authorizedDomains:e}=await SH(t);for(const r of e)try{if(kH(r))return}catch{}wc(t,"unauthorized-domain")}function kH(t){const e=_C(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!BH.test(r))return!1;if(TH.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IH=new Mg(3e4,6e4);function aB(){const t=dA().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function FH(t){return new Promise((e,r)=>{var a,s,i;function n(){aB(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{aB(),r(uA(t,"network-request-failed"))},timeout:IH.get()})}if((s=(a=dA().gapi)==null?void 0:a.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((i=dA().gapi)!=null&&i.load)n();else{const o=yQ("iframefcb");return dA()[o]=()=>{gapi.load?n():r(uA(t,"network-request-failed"))},H6(`${wQ()}?onload=${o}`).catch(c=>r(c))}}).catch(e=>{throw lv=null,e})}let lv=null;function DH(t){return lv=lv||FH(t),lv}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RH=new Mg(5e3,15e3),LH="__/auth/iframe",UH="emulator/auth/iframe",MH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},PH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jH(t){const e=t.config;wr(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?d_(e,UH):`https://${t.config.authDomain}/${LH}`,n={apiKey:e.apiKey,appName:t.name,v:rm},a=PH.get(t.config.apiHost);a&&(n.eid=a);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${Ug(n).slice(1)}`}async function OH(t){const e=await DH(t),r=dA().gapi;return wr(r,t,"internal-error"),e.open({where:document.body,url:jH(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:MH,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const i=uA(t,"network-request-failed"),o=dA().setTimeout(()=>{s(i)},RH.get());function c(){dA().clearTimeout(o),a(n)}n.ping(c).then(c,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},HH=500,VH=600,GH="_blank",zH="http://localhost";class sB{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qH(t,e,r,n=HH,a=VH){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const c={...QH,width:n.toString(),height:a.toString(),top:s,left:i},u=Pi().toLowerCase();r&&(o=L6(u)?GH:r),D6(u)&&(e=e||zH,c.scrollbars="yes");const f=Object.entries(c).reduce((p,[g,b])=>`${p}${g}=${b},`,"");if(uQ(u)&&o!=="_self")return KH(e||"",o),new sB(null);const m=window.open(e||"",o,f);wr(m,t,"popup-blocked");try{m.focus()}catch{}return new sB(m)}function KH(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WH="__/auth/handler",$H="emulator/auth/handler",JH=encodeURIComponent("fac");async function iB(t,e,r,n,a,s){wr(t.config.authDomain,t,"auth-domain-config-required"),wr(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:rm,eventId:a};if(e instanceof z6){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",DO(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))i[f]=m}if(e instanceof Pg){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(i.scopes=f.join(","))}t.tenantId&&(i.tid=t.tenantId);const o=i;for(const f of Object.keys(o))o[f]===void 0&&delete o[f];const c=await t._getAppCheckToken(),u=c?`#${JH}=${encodeURIComponent(c)}`:"";return`${YH(t)}?${Ug(o).slice(1)}${u}`}function YH({config:t}){return t.emulator?d_(t,$H):`https://${t.authDomain}/${WH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib="webStorageSupport";class XH{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Y6,this._completeRedirectFn=bH,this._overrideRedirectResult=vH}async _openPopup(e,r,n,a){var i;mu((i=this.eventManagers[e._key()])==null?void 0:i.manager,"_initialize() not called before _openPopup()");const s=await iB(e,r,n,_C(),a);return qH(e,s,g_())}async _openRedirect(e,r,n,a){await this._originValidation(e);const s=await iB(e,r,n,_C(),a);return tH(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(mu(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await OH(e),n=new EH(e);return r.register("authEvent",a=>(wr(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(ib,{type:ib},a=>{var i;const s=(i=a==null?void 0:a[0])==null?void 0:i[ib];s!==void 0&&r(!!s),wc(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=NH(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return O6()||R6()||h_()}}const ZH=XH;var oB="@firebase/auth",lB="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){wr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function r9(t){$f(new Pd("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=n.options;wr(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Q6(t)},u=new gQ(n,a,s,c);return TQ(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),$f(new Pd("auth-internal",e=>{const r=lh(e.getProvider("auth").getImmediate());return(n=>new e9(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),AA(oB,lB,t9(t)),AA(oB,lB,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n9=300,a9=w6("authIdTokenMaxAge")||n9;let cB=null;const s9=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>a9)return;const a=r==null?void 0:r.token;cB!==a&&(cB=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function aD(t=A_()){const e=R2(t,"auth");if(e.isInitialized())return e.getImmediate();const r=SQ(t,{popupRedirectResolver:ZH,persistence:[AH,XQ,Y6]}),n=w6("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const i=s9(s.toString());KQ(r,i,()=>i(r.currentUser)),qQ(r,o=>i(o))}}const a=g6("auth");return a&&BQ(r,`http://${a}`),r}function i9(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}xQ({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const s=uA("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",i9().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});r9("Browser");var o9="firebase",l9="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */AA(o9,l9,"app");var AB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Id,sD;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,_){function B(){}B.prototype=_.prototype,E.D=_.prototype,E.prototype=new B,E.prototype.constructor=E,E.C=function(Q,R,F){for(var V=Array(arguments.length-2),X=2;X<arguments.length;X++)V[X-2]=arguments[X];return _.prototype[R].apply(Q,V)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(E,_,B){B||(B=0);var Q=Array(16);if(typeof _=="string")for(var R=0;16>R;++R)Q[R]=_.charCodeAt(B++)|_.charCodeAt(B++)<<8|_.charCodeAt(B++)<<16|_.charCodeAt(B++)<<24;else for(R=0;16>R;++R)Q[R]=_[B++]|_[B++]<<8|_[B++]<<16|_[B++]<<24;_=E.g[0],B=E.g[1],R=E.g[2];var F=E.g[3],V=_+(F^B&(R^F))+Q[0]+3614090360&4294967295;_=B+(V<<7&4294967295|V>>>25),V=F+(R^_&(B^R))+Q[1]+3905402710&4294967295,F=_+(V<<12&4294967295|V>>>20),V=R+(B^F&(_^B))+Q[2]+606105819&4294967295,R=F+(V<<17&4294967295|V>>>15),V=B+(_^R&(F^_))+Q[3]+3250441966&4294967295,B=R+(V<<22&4294967295|V>>>10),V=_+(F^B&(R^F))+Q[4]+4118548399&4294967295,_=B+(V<<7&4294967295|V>>>25),V=F+(R^_&(B^R))+Q[5]+1200080426&4294967295,F=_+(V<<12&4294967295|V>>>20),V=R+(B^F&(_^B))+Q[6]+2821735955&4294967295,R=F+(V<<17&4294967295|V>>>15),V=B+(_^R&(F^_))+Q[7]+4249261313&4294967295,B=R+(V<<22&4294967295|V>>>10),V=_+(F^B&(R^F))+Q[8]+1770035416&4294967295,_=B+(V<<7&4294967295|V>>>25),V=F+(R^_&(B^R))+Q[9]+2336552879&4294967295,F=_+(V<<12&4294967295|V>>>20),V=R+(B^F&(_^B))+Q[10]+4294925233&4294967295,R=F+(V<<17&4294967295|V>>>15),V=B+(_^R&(F^_))+Q[11]+2304563134&4294967295,B=R+(V<<22&4294967295|V>>>10),V=_+(F^B&(R^F))+Q[12]+1804603682&4294967295,_=B+(V<<7&4294967295|V>>>25),V=F+(R^_&(B^R))+Q[13]+4254626195&4294967295,F=_+(V<<12&4294967295|V>>>20),V=R+(B^F&(_^B))+Q[14]+2792965006&4294967295,R=F+(V<<17&4294967295|V>>>15),V=B+(_^R&(F^_))+Q[15]+1236535329&4294967295,B=R+(V<<22&4294967295|V>>>10),V=_+(R^F&(B^R))+Q[1]+4129170786&4294967295,_=B+(V<<5&4294967295|V>>>27),V=F+(B^R&(_^B))+Q[6]+3225465664&4294967295,F=_+(V<<9&4294967295|V>>>23),V=R+(_^B&(F^_))+Q[11]+643717713&4294967295,R=F+(V<<14&4294967295|V>>>18),V=B+(F^_&(R^F))+Q[0]+3921069994&4294967295,B=R+(V<<20&4294967295|V>>>12),V=_+(R^F&(B^R))+Q[5]+3593408605&4294967295,_=B+(V<<5&4294967295|V>>>27),V=F+(B^R&(_^B))+Q[10]+38016083&4294967295,F=_+(V<<9&4294967295|V>>>23),V=R+(_^B&(F^_))+Q[15]+3634488961&4294967295,R=F+(V<<14&4294967295|V>>>18),V=B+(F^_&(R^F))+Q[4]+3889429448&4294967295,B=R+(V<<20&4294967295|V>>>12),V=_+(R^F&(B^R))+Q[9]+568446438&4294967295,_=B+(V<<5&4294967295|V>>>27),V=F+(B^R&(_^B))+Q[14]+3275163606&4294967295,F=_+(V<<9&4294967295|V>>>23),V=R+(_^B&(F^_))+Q[3]+4107603335&4294967295,R=F+(V<<14&4294967295|V>>>18),V=B+(F^_&(R^F))+Q[8]+1163531501&4294967295,B=R+(V<<20&4294967295|V>>>12),V=_+(R^F&(B^R))+Q[13]+2850285829&4294967295,_=B+(V<<5&4294967295|V>>>27),V=F+(B^R&(_^B))+Q[2]+4243563512&4294967295,F=_+(V<<9&4294967295|V>>>23),V=R+(_^B&(F^_))+Q[7]+1735328473&4294967295,R=F+(V<<14&4294967295|V>>>18),V=B+(F^_&(R^F))+Q[12]+2368359562&4294967295,B=R+(V<<20&4294967295|V>>>12),V=_+(B^R^F)+Q[5]+4294588738&4294967295,_=B+(V<<4&4294967295|V>>>28),V=F+(_^B^R)+Q[8]+2272392833&4294967295,F=_+(V<<11&4294967295|V>>>21),V=R+(F^_^B)+Q[11]+1839030562&4294967295,R=F+(V<<16&4294967295|V>>>16),V=B+(R^F^_)+Q[14]+4259657740&4294967295,B=R+(V<<23&4294967295|V>>>9),V=_+(B^R^F)+Q[1]+2763975236&4294967295,_=B+(V<<4&4294967295|V>>>28),V=F+(_^B^R)+Q[4]+1272893353&4294967295,F=_+(V<<11&4294967295|V>>>21),V=R+(F^_^B)+Q[7]+4139469664&4294967295,R=F+(V<<16&4294967295|V>>>16),V=B+(R^F^_)+Q[10]+3200236656&4294967295,B=R+(V<<23&4294967295|V>>>9),V=_+(B^R^F)+Q[13]+681279174&4294967295,_=B+(V<<4&4294967295|V>>>28),V=F+(_^B^R)+Q[0]+3936430074&4294967295,F=_+(V<<11&4294967295|V>>>21),V=R+(F^_^B)+Q[3]+3572445317&4294967295,R=F+(V<<16&4294967295|V>>>16),V=B+(R^F^_)+Q[6]+76029189&4294967295,B=R+(V<<23&4294967295|V>>>9),V=_+(B^R^F)+Q[9]+3654602809&4294967295,_=B+(V<<4&4294967295|V>>>28),V=F+(_^B^R)+Q[12]+3873151461&4294967295,F=_+(V<<11&4294967295|V>>>21),V=R+(F^_^B)+Q[15]+530742520&4294967295,R=F+(V<<16&4294967295|V>>>16),V=B+(R^F^_)+Q[2]+3299628645&4294967295,B=R+(V<<23&4294967295|V>>>9),V=_+(R^(B|~F))+Q[0]+4096336452&4294967295,_=B+(V<<6&4294967295|V>>>26),V=F+(B^(_|~R))+Q[7]+1126891415&4294967295,F=_+(V<<10&4294967295|V>>>22),V=R+(_^(F|~B))+Q[14]+2878612391&4294967295,R=F+(V<<15&4294967295|V>>>17),V=B+(F^(R|~_))+Q[5]+4237533241&4294967295,B=R+(V<<21&4294967295|V>>>11),V=_+(R^(B|~F))+Q[12]+1700485571&4294967295,_=B+(V<<6&4294967295|V>>>26),V=F+(B^(_|~R))+Q[3]+2399980690&4294967295,F=_+(V<<10&4294967295|V>>>22),V=R+(_^(F|~B))+Q[10]+4293915773&4294967295,R=F+(V<<15&4294967295|V>>>17),V=B+(F^(R|~_))+Q[1]+2240044497&4294967295,B=R+(V<<21&4294967295|V>>>11),V=_+(R^(B|~F))+Q[8]+1873313359&4294967295,_=B+(V<<6&4294967295|V>>>26),V=F+(B^(_|~R))+Q[15]+4264355552&4294967295,F=_+(V<<10&4294967295|V>>>22),V=R+(_^(F|~B))+Q[6]+2734768916&4294967295,R=F+(V<<15&4294967295|V>>>17),V=B+(F^(R|~_))+Q[13]+1309151649&4294967295,B=R+(V<<21&4294967295|V>>>11),V=_+(R^(B|~F))+Q[4]+4149444226&4294967295,_=B+(V<<6&4294967295|V>>>26),V=F+(B^(_|~R))+Q[11]+3174756917&4294967295,F=_+(V<<10&4294967295|V>>>22),V=R+(_^(F|~B))+Q[2]+718787259&4294967295,R=F+(V<<15&4294967295|V>>>17),V=B+(F^(R|~_))+Q[9]+3951481745&4294967295,E.g[0]=E.g[0]+_&4294967295,E.g[1]=E.g[1]+(R+(V<<21&4294967295|V>>>11))&4294967295,E.g[2]=E.g[2]+R&4294967295,E.g[3]=E.g[3]+F&4294967295}n.prototype.u=function(E,_){_===void 0&&(_=E.length);for(var B=_-this.blockSize,Q=this.B,R=this.h,F=0;F<_;){if(R==0)for(;F<=B;)a(this,E,F),F+=this.blockSize;if(typeof E=="string"){for(;F<_;)if(Q[R++]=E.charCodeAt(F++),R==this.blockSize){a(this,Q),R=0;break}}else for(;F<_;)if(Q[R++]=E[F++],R==this.blockSize){a(this,Q),R=0;break}}this.h=R,this.o+=_},n.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var _=1;_<E.length-8;++_)E[_]=0;var B=8*this.o;for(_=E.length-8;_<E.length;++_)E[_]=B&255,B/=256;for(this.u(E),E=Array(16),_=B=0;4>_;++_)for(var Q=0;32>Q;Q+=8)E[B++]=this.g[_]>>>Q&255;return E};function s(E,_){var B=o;return Object.prototype.hasOwnProperty.call(B,E)?B[E]:B[E]=_(E)}function i(E,_){this.h=_;for(var B=[],Q=!0,R=E.length-1;0<=R;R--){var F=E[R]|0;Q&&F==_||(B[R]=F,Q=!1)}this.g=B}var o={};function c(E){return-128<=E&&128>E?s(E,function(_){return new i([_|0],0>_?-1:0)}):new i([E|0],0>E?-1:0)}function u(E){if(isNaN(E)||!isFinite(E))return m;if(0>E)return T(u(-E));for(var _=[],B=1,Q=0;E>=B;Q++)_[Q]=E/B|0,B*=4294967296;return new i(_,0)}function f(E,_){if(E.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(E.charAt(0)=="-")return T(f(E.substring(1),_));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var B=u(Math.pow(_,8)),Q=m,R=0;R<E.length;R+=8){var F=Math.min(8,E.length-R),V=parseInt(E.substring(R,R+F),_);8>F?(F=u(Math.pow(_,F)),Q=Q.j(F).add(u(V))):(Q=Q.j(B),Q=Q.add(u(V)))}return Q}var m=c(0),p=c(1),g=c(16777216);t=i.prototype,t.m=function(){if(y(this))return-T(this).m();for(var E=0,_=1,B=0;B<this.g.length;B++){var Q=this.i(B);E+=(0<=Q?Q:4294967296+Q)*_,_*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(b(this))return"0";if(y(this))return"-"+T(this).toString(E);for(var _=u(Math.pow(E,6)),B=this,Q="";;){var R=j(B,_).g;B=k(B,R.j(_));var F=((0<B.g.length?B.g[0]:B.h)>>>0).toString(E);if(B=R,b(B))return F+Q;for(;6>F.length;)F="0"+F;Q=F+Q}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function b(E){if(E.h!=0)return!1;for(var _=0;_<E.g.length;_++)if(E.g[_]!=0)return!1;return!0}function y(E){return E.h==-1}t.l=function(E){return E=k(this,E),y(E)?-1:b(E)?0:1};function T(E){for(var _=E.g.length,B=[],Q=0;Q<_;Q++)B[Q]=~E.g[Q];return new i(B,~E.h).add(p)}t.abs=function(){return y(this)?T(this):this},t.add=function(E){for(var _=Math.max(this.g.length,E.g.length),B=[],Q=0,R=0;R<=_;R++){var F=Q+(this.i(R)&65535)+(E.i(R)&65535),V=(F>>>16)+(this.i(R)>>>16)+(E.i(R)>>>16);Q=V>>>16,F&=65535,V&=65535,B[R]=V<<16|F}return new i(B,B[B.length-1]&-2147483648?-1:0)};function k(E,_){return E.add(T(_))}t.j=function(E){if(b(this)||b(E))return m;if(y(this))return y(E)?T(this).j(T(E)):T(T(this).j(E));if(y(E))return T(this.j(T(E)));if(0>this.l(g)&&0>E.l(g))return u(this.m()*E.m());for(var _=this.g.length+E.g.length,B=[],Q=0;Q<2*_;Q++)B[Q]=0;for(Q=0;Q<this.g.length;Q++)for(var R=0;R<E.g.length;R++){var F=this.i(Q)>>>16,V=this.i(Q)&65535,X=E.i(R)>>>16,oe=E.i(R)&65535;B[2*Q+2*R]+=V*oe,D(B,2*Q+2*R),B[2*Q+2*R+1]+=F*oe,D(B,2*Q+2*R+1),B[2*Q+2*R+1]+=V*X,D(B,2*Q+2*R+1),B[2*Q+2*R+2]+=F*X,D(B,2*Q+2*R+2)}for(Q=0;Q<_;Q++)B[Q]=B[2*Q+1]<<16|B[2*Q];for(Q=_;Q<2*_;Q++)B[Q]=0;return new i(B,0)};function D(E,_){for(;(E[_]&65535)!=E[_];)E[_+1]+=E[_]>>>16,E[_]&=65535,_++}function L(E,_){this.g=E,this.h=_}function j(E,_){if(b(_))throw Error("division by zero");if(b(E))return new L(m,m);if(y(E))return _=j(T(E),_),new L(T(_.g),T(_.h));if(y(_))return _=j(E,T(_)),new L(T(_.g),_.h);if(30<E.g.length){if(y(E)||y(_))throw Error("slowDivide_ only works with positive integers.");for(var B=p,Q=_;0>=Q.l(E);)B=H(B),Q=H(Q);var R=U(B,1),F=U(Q,1);for(Q=U(Q,2),B=U(B,2);!b(Q);){var V=F.add(Q);0>=V.l(E)&&(R=R.add(B),F=V),Q=U(Q,1),B=U(B,1)}return _=k(E,R.j(_)),new L(R,_)}for(R=m;0<=E.l(_);){for(B=Math.max(1,Math.floor(E.m()/_.m())),Q=Math.ceil(Math.log(B)/Math.LN2),Q=48>=Q?1:Math.pow(2,Q-48),F=u(B),V=F.j(_);y(V)||0<V.l(E);)B-=Q,F=u(B),V=F.j(_);b(F)&&(F=p),R=R.add(F),E=k(E,V)}return new L(R,E)}t.A=function(E){return j(this,E).h},t.and=function(E){for(var _=Math.max(this.g.length,E.g.length),B=[],Q=0;Q<_;Q++)B[Q]=this.i(Q)&E.i(Q);return new i(B,this.h&E.h)},t.or=function(E){for(var _=Math.max(this.g.length,E.g.length),B=[],Q=0;Q<_;Q++)B[Q]=this.i(Q)|E.i(Q);return new i(B,this.h|E.h)},t.xor=function(E){for(var _=Math.max(this.g.length,E.g.length),B=[],Q=0;Q<_;Q++)B[Q]=this.i(Q)^E.i(Q);return new i(B,this.h^E.h)};function H(E){for(var _=E.g.length+1,B=[],Q=0;Q<_;Q++)B[Q]=E.i(Q)<<1|E.i(Q-1)>>>31;return new i(B,E.h)}function U(E,_){var B=_>>5;_%=32;for(var Q=E.g.length-B,R=[],F=0;F<Q;F++)R[F]=0<_?E.i(F+B)>>>_|E.i(F+B+1)<<32-_:E.i(F+B);return new i(R,E.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,sD=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=u,i.fromString=f,Id=i}).apply(typeof AB<"u"?AB:typeof self<"u"?self:typeof window<"u"?window:{});var A1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var iD,gp,oD,cv,NC,lD,cD,AD;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(S,z,re){return S==Array.prototype||S==Object.prototype||(S[z]=re.value),S};function r(S){S=[typeof globalThis=="object"&&globalThis,S,typeof window=="object"&&window,typeof self=="object"&&self,typeof A1=="object"&&A1];for(var z=0;z<S.length;++z){var re=S[z];if(re&&re.Math==Math)return re}throw Error("Cannot find global object")}var n=r(this);function a(S,z){if(z)e:{var re=n;S=S.split(".");for(var ve=0;ve<S.length-1;ve++){var Qe=S[ve];if(!(Qe in re))break e;re=re[Qe]}S=S[S.length-1],ve=re[S],z=z(ve),z!=ve&&z!=null&&e(re,S,{configurable:!0,writable:!0,value:z})}}function s(S,z){S instanceof String&&(S+="");var re=0,ve=!1,Qe={next:function(){if(!ve&&re<S.length){var Ye=re++;return{value:z(Ye,S[Ye]),done:!1}}return ve=!0,{done:!0,value:void 0}}};return Qe[Symbol.iterator]=function(){return Qe},Qe}a("Array.prototype.values",function(S){return S||function(){return s(this,function(z,re){return re})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function c(S){var z=typeof S;return z=z!="object"?z:S?Array.isArray(S)?"array":z:"null",z=="array"||z=="object"&&typeof S.length=="number"}function u(S){var z=typeof S;return z=="object"&&S!=null||z=="function"}function f(S,z,re){return S.call.apply(S.bind,arguments)}function m(S,z,re){if(!S)throw Error();if(2<arguments.length){var ve=Array.prototype.slice.call(arguments,2);return function(){var Qe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Qe,ve),S.apply(z,Qe)}}return function(){return S.apply(z,arguments)}}function p(S,z,re){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,p.apply(null,arguments)}function g(S,z){var re=Array.prototype.slice.call(arguments,1);return function(){var ve=re.slice();return ve.push.apply(ve,arguments),S.apply(this,ve)}}function b(S,z){function re(){}re.prototype=z.prototype,S.aa=z.prototype,S.prototype=new re,S.prototype.constructor=S,S.Qb=function(ve,Qe,Ye){for(var Ct=Array(arguments.length-2),fr=2;fr<arguments.length;fr++)Ct[fr-2]=arguments[fr];return z.prototype[Qe].apply(ve,Ct)}}function y(S){const z=S.length;if(0<z){const re=Array(z);for(let ve=0;ve<z;ve++)re[ve]=S[ve];return re}return[]}function T(S,z){for(let re=1;re<arguments.length;re++){const ve=arguments[re];if(c(ve)){const Qe=S.length||0,Ye=ve.length||0;S.length=Qe+Ye;for(let Ct=0;Ct<Ye;Ct++)S[Qe+Ct]=ve[Ct]}else S.push(ve)}}class k{constructor(z,re){this.i=z,this.j=re,this.h=0,this.g=null}get(){let z;return 0<this.h?(this.h--,z=this.g,this.g=z.next,z.next=null):z=this.i(),z}}function D(S){return/^[\s\xa0]*$/.test(S)}function L(){var S=o.navigator;return S&&(S=S.userAgent)?S:""}function j(S){return j[" "](S),S}j[" "]=function(){};var H=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function U(S,z,re){for(const ve in S)z.call(re,S[ve],ve,S)}function E(S,z){for(const re in S)z.call(void 0,S[re],re,S)}function _(S){const z={};for(const re in S)z[re]=S[re];return z}const B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(S,z){let re,ve;for(let Qe=1;Qe<arguments.length;Qe++){ve=arguments[Qe];for(re in ve)S[re]=ve[re];for(let Ye=0;Ye<B.length;Ye++)re=B[Ye],Object.prototype.hasOwnProperty.call(ve,re)&&(S[re]=ve[re])}}function R(S){var z=1;S=S.split(":");const re=[];for(;0<z&&S.length;)re.push(S.shift()),z--;return S.length&&re.push(S.join(":")),re}function F(S){o.setTimeout(()=>{throw S},0)}function V(){var S=J;let z=null;return S.g&&(z=S.g,S.g=S.g.next,S.g||(S.h=null),z.next=null),z}class X{constructor(){this.h=this.g=null}add(z,re){const ve=oe.get();ve.set(z,re),this.h?this.h.next=ve:this.g=ve,this.h=ve}}var oe=new k(()=>new te,S=>S.reset());class te{constructor(){this.next=this.g=this.h=null}set(z,re){this.h=z,this.g=re,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,q=!1,J=new X,W=()=>{const S=o.Promise.resolve(void 0);ae=()=>{S.then(de)}};var de=()=>{for(var S;S=V();){try{S.h.call(S.g)}catch(re){F(re)}var z=oe;z.j(S),100>z.h&&(z.h++,S.next=z.g,z.g=S)}q=!1};function P(){this.s=this.s,this.C=this.C}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(S,z){this.type=S,this.g=this.target=z,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var Y=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var S=!1,z=Object.defineProperty({},"passive",{get:function(){S=!0}});try{const re=()=>{};o.addEventListener("test",re,z),o.removeEventListener("test",re,z)}catch{}return S}();function ee(S,z){if(K.call(this,S?S.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,S){var re=this.type=S.type,ve=S.changedTouches&&S.changedTouches.length?S.changedTouches[0]:null;if(this.target=S.target||S.srcElement,this.g=z,z=S.relatedTarget){if(H){e:{try{j(z.nodeName);var Qe=!0;break e}catch{}Qe=!1}Qe||(z=null)}}else re=="mouseover"?z=S.fromElement:re=="mouseout"&&(z=S.toElement);this.relatedTarget=z,ve?(this.clientX=ve.clientX!==void 0?ve.clientX:ve.pageX,this.clientY=ve.clientY!==void 0?ve.clientY:ve.pageY,this.screenX=ve.screenX||0,this.screenY=ve.screenY||0):(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0),this.button=S.button,this.key=S.key||"",this.ctrlKey=S.ctrlKey,this.altKey=S.altKey,this.shiftKey=S.shiftKey,this.metaKey=S.metaKey,this.pointerId=S.pointerId||0,this.pointerType=typeof S.pointerType=="string"?S.pointerType:Ae[S.pointerType]||"",this.state=S.state,this.i=S,S.defaultPrevented&&ee.aa.h.call(this)}}b(ee,K);var Ae={2:"touch",3:"pen",4:"mouse"};ee.prototype.h=function(){ee.aa.h.call(this);var S=this.i;S.preventDefault?S.preventDefault():S.returnValue=!1};var Se="closure_listenable_"+(1e6*Math.random()|0),ge=0;function pe(S,z,re,ve,Qe){this.listener=S,this.proxy=null,this.src=z,this.type=re,this.capture=!!ve,this.ha=Qe,this.key=++ge,this.da=this.fa=!1}function ye(S){S.da=!0,S.listener=null,S.proxy=null,S.src=null,S.ha=null}function ue(S){this.src=S,this.g={},this.h=0}ue.prototype.add=function(S,z,re,ve,Qe){var Ye=S.toString();S=this.g[Ye],S||(S=this.g[Ye]=[],this.h++);var Ct=Pe(S,z,ve,Qe);return-1<Ct?(z=S[Ct],re||(z.fa=!1)):(z=new pe(z,this.src,Ye,!!ve,Qe),z.fa=re,S.push(z)),z};function se(S,z){var re=z.type;if(re in S.g){var ve=S.g[re],Qe=Array.prototype.indexOf.call(ve,z,void 0),Ye;(Ye=0<=Qe)&&Array.prototype.splice.call(ve,Qe,1),Ye&&(ye(z),S.g[re].length==0&&(delete S.g[re],S.h--))}}function Pe(S,z,re,ve){for(var Qe=0;Qe<S.length;++Qe){var Ye=S[Qe];if(!Ye.da&&Ye.listener==z&&Ye.capture==!!re&&Ye.ha==ve)return Qe}return-1}var at="closure_lm_"+(1e6*Math.random()|0),De={};function Ee(S,z,re,ve,Qe){if(Array.isArray(z)){for(var Ye=0;Ye<z.length;Ye++)Ee(S,z[Ye],re,ve,Qe);return null}return re=Yt(re),S&&S[Se]?S.K(z,re,u(ve)?!!ve.capture:!1,Qe):Le(S,z,re,!1,ve,Qe)}function Le(S,z,re,ve,Qe,Ye){if(!z)throw Error("Invalid event type");var Ct=u(Qe)?!!Qe.capture:!!Qe,fr=jt(S);if(fr||(S[at]=fr=new ue(S)),re=fr.add(z,re,ve,Ct,Ye),re.proxy)return re;if(ve=it(),re.proxy=ve,ve.src=S,ve.listener=re,S.addEventListener)Y||(Qe=Ct),Qe===void 0&&(Qe=!1),S.addEventListener(z.toString(),ve,Qe);else if(S.attachEvent)S.attachEvent(Et(z.toString()),ve);else if(S.addListener&&S.removeListener)S.addListener(ve);else throw Error("addEventListener and attachEvent are unavailable.");return re}function it(){function S(re){return z.call(S.src,S.listener,re)}const z=At;return S}function et(S,z,re,ve,Qe){if(Array.isArray(z))for(var Ye=0;Ye<z.length;Ye++)et(S,z[Ye],re,ve,Qe);else ve=u(ve)?!!ve.capture:!!ve,re=Yt(re),S&&S[Se]?(S=S.i,z=String(z).toString(),z in S.g&&(Ye=S.g[z],re=Pe(Ye,re,ve,Qe),-1<re&&(ye(Ye[re]),Array.prototype.splice.call(Ye,re,1),Ye.length==0&&(delete S.g[z],S.h--)))):S&&(S=jt(S))&&(z=S.g[z.toString()],S=-1,z&&(S=Pe(z,re,ve,Qe)),(re=-1<S?z[S]:null)&&ht(re))}function ht(S){if(typeof S!="number"&&S&&!S.da){var z=S.src;if(z&&z[Se])se(z.i,S);else{var re=S.type,ve=S.proxy;z.removeEventListener?z.removeEventListener(re,ve,S.capture):z.detachEvent?z.detachEvent(Et(re),ve):z.addListener&&z.removeListener&&z.removeListener(ve),(re=jt(z))?(se(re,S),re.h==0&&(re.src=null,z[at]=null)):ye(S)}}}function Et(S){return S in De?De[S]:De[S]="on"+S}function At(S,z){if(S.da)S=!0;else{z=new ee(z,this);var re=S.listener,ve=S.ha||S.src;S.fa&&ht(S),S=re.call(ve,z)}return S}function jt(S){return S=S[at],S instanceof ue?S:null}var Kt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yt(S){return typeof S=="function"?S:(S[Kt]||(S[Kt]=function(z){return S.handleEvent(z)}),S[Kt])}function Qt(){P.call(this),this.i=new ue(this),this.M=this,this.F=null}b(Qt,P),Qt.prototype[Se]=!0,Qt.prototype.removeEventListener=function(S,z,re,ve){et(this,S,z,re,ve)};function Gt(S,z){var re,ve=S.F;if(ve)for(re=[];ve;ve=ve.F)re.push(ve);if(S=S.M,ve=z.type||z,typeof z=="string")z=new K(z,S);else if(z instanceof K)z.target=z.target||S;else{var Qe=z;z=new K(ve,S),Q(z,Qe)}if(Qe=!0,re)for(var Ye=re.length-1;0<=Ye;Ye--){var Ct=z.g=re[Ye];Qe=Wt(Ct,ve,!0,z)&&Qe}if(Ct=z.g=S,Qe=Wt(Ct,ve,!0,z)&&Qe,Qe=Wt(Ct,ve,!1,z)&&Qe,re)for(Ye=0;Ye<re.length;Ye++)Ct=z.g=re[Ye],Qe=Wt(Ct,ve,!1,z)&&Qe}Qt.prototype.N=function(){if(Qt.aa.N.call(this),this.i){var S=this.i,z;for(z in S.g){for(var re=S.g[z],ve=0;ve<re.length;ve++)ye(re[ve]);delete S.g[z],S.h--}}this.F=null},Qt.prototype.K=function(S,z,re,ve){return this.i.add(String(S),z,!1,re,ve)},Qt.prototype.L=function(S,z,re,ve){return this.i.add(String(S),z,!0,re,ve)};function Wt(S,z,re,ve){if(z=S.i.g[String(z)],!z)return!0;z=z.concat();for(var Qe=!0,Ye=0;Ye<z.length;++Ye){var Ct=z[Ye];if(Ct&&!Ct.da&&Ct.capture==re){var fr=Ct.listener,Wr=Ct.ha||Ct.src;Ct.fa&&se(S.i,Ct),Qe=fr.call(Wr,ve)!==!1&&Qe}}return Qe&&!ve.defaultPrevented}function kt(S,z,re){if(typeof S=="function")re&&(S=p(S,re));else if(S&&typeof S.handleEvent=="function")S=p(S.handleEvent,S);else throw Error("Invalid listener argument");return 2147483647<Number(z)?-1:o.setTimeout(S,z||0)}function It(S){S.g=kt(()=>{S.g=null,S.i&&(S.i=!1,It(S))},S.l);const z=S.h;S.h=null,S.m.apply(null,z)}class _t extends P{constructor(z,re){super(),this.m=z,this.l=re,this.h=null,this.i=!1,this.g=null}j(z){this.h=arguments,this.g?this.i=!0:It(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yr(S){P.call(this),this.h=S,this.g={}}b(Yr,P);var tr=[];function $n(S){U(S.g,function(z,re){this.g.hasOwnProperty(re)&&ht(z)},S),S.g={}}Yr.prototype.N=function(){Yr.aa.N.call(this),$n(this)},Yr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ir=o.JSON.stringify,hn=o.JSON.parse,rs=class{stringify(S){return o.JSON.stringify(S,void 0)}parse(S){return o.JSON.parse(S,void 0)}};function Mr(){}Mr.prototype.h=null;function li(S){return S.h||(S.h=S.i())}function Bn(){}var ga={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pa(){K.call(this,"d")}b(Pa,K);function mn(){K.call(this,"c")}b(mn,K);var ar={},zr=null;function Ns(){return zr=zr||new Qt}ar.La="serverreachability";function Zn(S){K.call(this,ar.La,S)}b(Zn,K);function ja(S){const z=Ns();Gt(z,new Zn(z))}ar.STAT_EVENT="statevent";function zs(S,z){K.call(this,ar.STAT_EVENT,S),this.stat=z}b(zs,K);function Ht(S){const z=Ns();Gt(z,new zs(z,S))}ar.Ma="timingevent";function pn(S,z){K.call(this,ar.Ma,S),this.size=z}b(pn,K);function an(S,z){if(typeof S!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){S()},z)}function Dn(){this.g=!0}Dn.prototype.xa=function(){this.g=!1};function Jn(S,z,re,ve,Qe,Ye){S.info(function(){if(S.g)if(Ye)for(var Ct="",fr=Ye.split("&"),Wr=0;Wr<fr.length;Wr++){var Sr=fr[Wr].split("=");if(1<Sr.length){var yn=Sr[0];Sr=Sr[1];var Nn=yn.split("_");Ct=2<=Nn.length&&Nn[1]=="type"?Ct+(yn+"="+Sr+"&"):Ct+(yn+"=redacted&")}}else Ct=null;else Ct=Ye;return"XMLHTTP REQ ("+ve+") [attempt "+Qe+"]: "+z+`
`+re+`
`+Ct})}function ea(S,z,re,ve,Qe,Ye,Ct){S.info(function(){return"XMLHTTP RESP ("+ve+") [ attempt "+Qe+"]: "+z+`
`+re+`
`+Ye+" "+Ct})}function fe(S,z,re,ve){S.info(function(){return"XMLHTTP TEXT ("+z+"): "+Ce(S,re)+(ve?" "+ve:"")})}function Ne(S,z){S.info(function(){return"TIMEOUT: "+z})}Dn.prototype.info=function(){};function Ce(S,z){if(!S.g)return z;if(!z)return null;try{var re=JSON.parse(z);if(re){for(S=0;S<re.length;S++)if(Array.isArray(re[S])){var ve=re[S];if(!(2>ve.length)){var Qe=ve[1];if(Array.isArray(Qe)&&!(1>Qe.length)){var Ye=Qe[0];if(Ye!="noop"&&Ye!="stop"&&Ye!="close")for(var Ct=1;Ct<Qe.length;Ct++)Qe[Ct]=""}}}}return Ir(re)}catch{return z}}var _e={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Be={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ke;function qe(){}b(qe,Mr),qe.prototype.g=function(){return new XMLHttpRequest},qe.prototype.i=function(){return{}},ke=new qe;function rt(S,z,re,ve){this.j=S,this.i=z,this.l=re,this.R=ve||1,this.U=new Yr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new He}function He(){this.i=null,this.g="",this.h=!1}var $e={},Ze={};function xt(S,z,re){S.L=1,S.v=nl(ys(z)),S.m=re,S.P=!0,Bt(S,null)}function Bt(S,z){S.F=Date.now(),Rt(S),S.A=ys(S.v);var re=S.A,ve=S.R;Array.isArray(ve)||(ve=[String(ve)]),dr(re.i,"t",ve),S.C=0,re=S.j.J,S.h=new He,S.g=ce(S.j,re?z:null,!S.m),0<S.O&&(S.M=new _t(p(S.Y,S,S.g),S.O)),z=S.U,re=S.g,ve=S.ca;var Qe="readystatechange";Array.isArray(Qe)||(Qe&&(tr[0]=Qe.toString()),Qe=tr);for(var Ye=0;Ye<Qe.length;Ye++){var Ct=Ee(re,Qe[Ye],ve||z.handleEvent,!1,z.h||z);if(!Ct)break;z.g[Ct.key]=Ct}z=S.H?_(S.H):{},S.m?(S.u||(S.u="POST"),z["Content-Type"]="application/x-www-form-urlencoded",S.g.ea(S.A,S.u,S.m,z)):(S.u="GET",S.g.ea(S.A,S.u,null,z)),ja(),Jn(S.i,S.u,S.A,S.l,S.R,S.m)}rt.prototype.ca=function(S){S=S.target;const z=this.M;z&&Ba(S)==3?z.j():this.Y(S)},rt.prototype.Y=function(S){try{if(S==this.g)e:{const Nn=Ba(this.g);var z=this.g.Ba();const lo=this.g.Z();if(!(3>Nn)&&(Nn!=3||this.g&&(this.h.h||this.g.oa()||ku(this.g)))){this.J||Nn!=4||z==7||(z==8||0>=lo?ja(3):ja(2)),Pr(this);var re=this.g.Z();this.X=re;t:if(Ot(this)){var ve=ku(this.g);S="";var Qe=ve.length,Ye=Ba(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qr(this),jr(this);var Ct="";break t}this.h.i=new o.TextDecoder}for(z=0;z<Qe;z++)this.h.h=!0,S+=this.h.i.decode(ve[z],{stream:!(Ye&&z==Qe-1)});ve.length=0,this.h.g+=S,this.C=0,Ct=this.h.g}else Ct=this.g.oa();if(this.o=re==200,ea(this.i,this.u,this.A,this.l,this.R,Nn,re),this.o){if(this.T&&!this.K){t:{if(this.g){var fr,Wr=this.g;if((fr=Wr.g?Wr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(fr)){var Sr=fr;break t}}Sr=null}if(re=Sr)fe(this.i,this.l,re,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xs(this,re);else{this.o=!1,this.s=3,Ht(12),qr(this),jr(this);break e}}if(this.P){re=!0;let xa;for(;!this.J&&this.C<Ct.length;)if(xa=St(this,Ct),xa==Ze){Nn==4&&(this.s=4,Ht(14),re=!1),fe(this.i,this.l,null,"[Incomplete Response]");break}else if(xa==$e){this.s=4,Ht(15),fe(this.i,this.l,Ct,"[Invalid Chunk]"),re=!1;break}else fe(this.i,this.l,xa,null),xs(this,xa);if(Ot(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nn!=4||Ct.length!=0||this.h.h||(this.s=1,Ht(16),re=!1),this.o=this.o&&re,!re)fe(this.i,this.l,Ct,"[Invalid Chunked Response]"),qr(this),jr(this);else if(0<Ct.length&&!this.W){this.W=!0;var yn=this.j;yn.g==this&&yn.ba&&!yn.M&&(yn.j.info("Great, no buffering proxy detected. Bytes received: "+Ct.length),cl(yn),yn.M=!0,Ht(11))}}else fe(this.i,this.l,Ct,null),xs(this,Ct);Nn==4&&qr(this),this.o&&!this.J&&(Nn==4?Al(this.j,this):(this.o=!1,Rt(this)))}else il(this.g),re==400&&0<Ct.indexOf("Unknown SID")?(this.s=3,Ht(12)):(this.s=0,Ht(13)),qr(this),jr(this)}}}catch{}finally{}};function Ot(S){return S.g?S.u=="GET"&&S.L!=2&&S.j.Ca:!1}function St(S,z){var re=S.C,ve=z.indexOf(`
`,re);return ve==-1?Ze:(re=Number(z.substring(re,ve)),isNaN(re)?$e:(ve+=1,ve+re>z.length?Ze:(z=z.slice(ve,ve+re),S.C=ve+re,z)))}rt.prototype.cancel=function(){this.J=!0,qr(this)};function Rt(S){S.S=Date.now()+S.I,ur(S,S.I)}function ur(S,z){if(S.B!=null)throw Error("WatchDog timer not null");S.B=an(p(S.ba,S),z)}function Pr(S){S.B&&(o.clearTimeout(S.B),S.B=null)}rt.prototype.ba=function(){this.B=null;const S=Date.now();0<=S-this.S?(Ne(this.i,this.A),this.L!=2&&(ja(),Ht(17)),qr(this),this.s=2,jr(this)):ur(this,this.S-S)};function jr(S){S.j.G==0||S.J||Al(S.j,S)}function qr(S){Pr(S);var z=S.M;z&&typeof z.ma=="function"&&z.ma(),S.M=null,$n(S.U),S.g&&(z=S.g,S.g=null,z.abort(),z.ma())}function xs(S,z){try{var re=S.j;if(re.G!=0&&(re.g==S||vs(re.h,S))){if(!S.K&&vs(re.h,S)&&re.G==3){try{var ve=re.Da.g.parse(z)}catch{ve=null}if(Array.isArray(ve)&&ve.length==3){var Qe=ve;if(Qe[0]==0){e:if(!re.u){if(re.g)if(re.g.F+3e3<S.F)Fo(re),Bc(re);else break e;ql(re),Ht(18)}}else re.za=Qe[1],0<re.za-re.T&&37500>Qe[2]&&re.F&&re.v==0&&!re.C&&(re.C=an(p(re.Za,re),6e3));if(1>=qs(re.h)&&re.ca){try{re.ca()}catch{}re.ca=void 0}}else Rs(re,11)}else if((S.K||re.g==S)&&Fo(re),!D(z))for(Qe=re.Da.g.parse(z),z=0;z<Qe.length;z++){let Sr=Qe[z];if(re.T=Sr[0],Sr=Sr[1],re.G==2)if(Sr[0]=="c"){re.K=Sr[1],re.ia=Sr[2];const yn=Sr[3];yn!=null&&(re.la=yn,re.j.info("VER="+re.la));const Nn=Sr[4];Nn!=null&&(re.Aa=Nn,re.j.info("SVER="+re.Aa));const lo=Sr[5];lo!=null&&typeof lo=="number"&&0<lo&&(ve=1.5*lo,re.L=ve,re.j.info("backChannelRequestTimeoutMs_="+ve)),ve=re;const xa=S.g;if(xa){const fi=xa.g?xa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fi){var Ye=ve.h;Ye.g||fi.indexOf("spdy")==-1&&fi.indexOf("quic")==-1&&fi.indexOf("h2")==-1||(Ye.j=Ye.l,Ye.g=new Set,Ye.h&&(Vn(Ye,Ye.h),Ye.h=null))}if(ve.D){const ul=xa.g?xa.g.getResponseHeader("X-HTTP-Session-Id"):null;ul&&(ve.ya=ul,wn(ve.I,ve.D,ul))}}re.G=3,re.l&&re.l.ua(),re.ba&&(re.R=Date.now()-S.F,re.j.info("Handshake RTT: "+re.R+"ms")),ve=re;var Ct=S;if(ve.qa=O(ve,ve.J?ve.ia:null,ve.W),Ct.K){as(ve.h,Ct);var fr=Ct,Wr=ve.L;Wr&&(fr.I=Wr),fr.B&&(Pr(fr),Rt(fr)),ve.g=Ct}else kc(ve);0<re.i.length&&Nc(re)}else Sr[0]!="stop"&&Sr[0]!="close"||Rs(re,7);else re.G==3&&(Sr[0]=="stop"||Sr[0]=="close"?Sr[0]=="stop"?Rs(re,7):Io(re):Sr[0]!="noop"&&re.l&&re.l.ta(Sr),re.v=0)}}ja(4)}catch{}}var eo=class{constructor(S,z){this.g=S,this.map=z}};function ns(S){this.l=S||10,o.PerformanceNavigationTiming?(S=o.performance.getEntriesByType("navigation"),S=0<S.length&&(S[0].nextHopProtocol=="hq"||S[0].nextHopProtocol=="h2")):S=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=S?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ks(S){return S.h?!0:S.g?S.g.size>=S.j:!1}function qs(S){return S.h?1:S.g?S.g.size:0}function vs(S,z){return S.h?S.h==z:S.g?S.g.has(z):!1}function Vn(S,z){S.g?S.g.add(z):S.h=z}function as(S,z){S.h&&S.h==z?S.h=null:S.g&&S.g.has(z)&&S.g.delete(z)}ns.prototype.cancel=function(){if(this.i=_c(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const S of this.g.values())S.cancel();this.g.clear()}};function _c(S){if(S.h!=null)return S.i.concat(S.h.D);if(S.g!=null&&S.g.size!==0){let z=S.i;for(const re of S.g.values())z=z.concat(re.D);return z}return y(S.i)}function Tu(S){if(S.V&&typeof S.V=="function")return S.V();if(typeof Map<"u"&&S instanceof Map||typeof Set<"u"&&S instanceof Set)return Array.from(S.values());if(typeof S=="string")return S.split("");if(c(S)){for(var z=[],re=S.length,ve=0;ve<re;ve++)z.push(S[ve]);return z}z=[],re=0;for(ve in S)z[re++]=S[ve];return z}function el(S){if(S.na&&typeof S.na=="function")return S.na();if(!S.V||typeof S.V!="function"){if(typeof Map<"u"&&S instanceof Map)return Array.from(S.keys());if(!(typeof Set<"u"&&S instanceof Set)){if(c(S)||typeof S=="string"){var z=[];S=S.length;for(var re=0;re<S;re++)z.push(re);return z}z=[],re=0;for(const ve in S)z[re++]=ve;return z}}}function SA(S,z){if(S.forEach&&typeof S.forEach=="function")S.forEach(z,void 0);else if(c(S)||typeof S=="string")Array.prototype.forEach.call(S,z,void 0);else for(var re=el(S),ve=Tu(S),Qe=ve.length,Ye=0;Ye<Qe;Ye++)z.call(void 0,ve[Ye],re&&re[Ye],S)}var ws=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sc(S,z){if(S){S=S.split("&");for(var re=0;re<S.length;re++){var ve=S[re].indexOf("="),Qe=null;if(0<=ve){var Ye=S[re].substring(0,ve);Qe=S[re].substring(ve+1)}else Ye=S[re];z(Ye,Qe?decodeURIComponent(Qe.replace(/\+/g," ")):"")}}}function sn(S){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,S instanceof sn){this.h=S.h,tl(this,S.j),this.o=S.o,this.g=S.g,rl(this,S.s),this.l=S.l;var z=S.i,re=new ro;re.i=z.i,z.g&&(re.g=new Map(z.g),re.h=z.h),to(this,re),this.m=S.m}else S&&(z=String(S).match(ws))?(this.h=!1,tl(this,z[1]||"",!0),this.o=ci(z[2]||""),this.g=ci(z[3]||"",!0),rl(this,z[4]),this.l=ci(z[5]||"",!0),to(this,z[6]||"",!0),this.m=ci(z[7]||"")):(this.h=!1,this.i=new ro(null,this.h))}sn.prototype.toString=function(){var S=[],z=this.j;z&&S.push(So(z,TA,!0),":");var re=this.g;return(re||z=="file")&&(S.push("//"),(z=this.o)&&S.push(So(z,TA,!0),"@"),S.push(encodeURIComponent(String(re)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),re=this.s,re!=null&&S.push(":",String(re))),(re=this.l)&&(this.g&&re.charAt(0)!="/"&&S.push("/"),S.push(So(re,re.charAt(0)=="/"?To:BA,!0))),(re=this.i.toString())&&S.push("?",re),(re=this.m)&&S.push("#",So(re,Bo)),S.join("")};function ys(S){return new sn(S)}function tl(S,z,re){S.j=re?ci(z,!0):z,S.j&&(S.j=S.j.replace(/:$/,""))}function rl(S,z){if(z){if(z=Number(z),isNaN(z)||0>z)throw Error("Bad port number "+z);S.s=z}else S.s=null}function to(S,z,re){z instanceof ro?(S.i=z,Nu(S.i,S.h)):(re||(z=So(z,Tc)),S.i=new ro(z,S.h))}function wn(S,z,re){S.i.set(z,re)}function nl(S){return wn(S,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),S}function ci(S,z){return S?z?decodeURI(S.replace(/%25/g,"%2525")):decodeURIComponent(S):""}function So(S,z,re){return typeof S=="string"?(S=encodeURI(S).replace(z,Bu),re&&(S=S.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S):null}function Bu(S){return S=S.charCodeAt(0),"%"+(S>>4&15).toString(16)+(S&15).toString(16)}var TA=/[#\/\?@]/g,BA=/[#\?:]/g,To=/[#\?]/g,Tc=/[#\?@]/g,Bo=/#/g;function ro(S,z){this.h=this.g=null,this.i=S||null,this.j=!!z}function Rn(S){S.g||(S.g=new Map,S.h=0,S.i&&Sc(S.i,function(z,re){S.add(decodeURIComponent(z.replace(/\+/g," ")),re)}))}t=ro.prototype,t.add=function(S,z){Rn(this),this.i=null,S=ao(this,S);var re=this.g.get(S);return re||this.g.set(S,re=[]),re.push(z),this.h+=1,this};function No(S,z){Rn(S),z=ao(S,z),S.g.has(z)&&(S.i=null,S.h-=S.g.get(z).length,S.g.delete(z))}function no(S,z){return Rn(S),z=ao(S,z),S.g.has(z)}t.forEach=function(S,z){Rn(this),this.g.forEach(function(re,ve){re.forEach(function(Qe){S.call(z,Qe,ve,this)},this)},this)},t.na=function(){Rn(this);const S=Array.from(this.g.values()),z=Array.from(this.g.keys()),re=[];for(let ve=0;ve<z.length;ve++){const Qe=S[ve];for(let Ye=0;Ye<Qe.length;Ye++)re.push(z[ve])}return re},t.V=function(S){Rn(this);let z=[];if(typeof S=="string")no(this,S)&&(z=z.concat(this.g.get(ao(this,S))));else{S=Array.from(this.g.values());for(let re=0;re<S.length;re++)z=z.concat(S[re])}return z},t.set=function(S,z){return Rn(this),this.i=null,S=ao(this,S),no(this,S)&&(this.h-=this.g.get(S).length),this.g.set(S,[z]),this.h+=1,this},t.get=function(S,z){return S?(S=this.V(S),0<S.length?String(S[0]):z):z};function dr(S,z,re){No(S,z),0<re.length&&(S.i=null,S.g.set(ao(S,z),y(re)),S.h+=re.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const S=[],z=Array.from(this.g.keys());for(var re=0;re<z.length;re++){var ve=z[re];const Ye=encodeURIComponent(String(ve)),Ct=this.V(ve);for(ve=0;ve<Ct.length;ve++){var Qe=Ye;Ct[ve]!==""&&(Qe+="="+encodeURIComponent(String(Ct[ve]))),S.push(Qe)}}return this.i=S.join("&")};function ao(S,z){return z=String(z),S.j&&(z=z.toLowerCase()),z}function Nu(S,z){z&&!S.j&&(Rn(S),S.i=null,S.g.forEach(function(re,ve){var Qe=ve.toLowerCase();ve!=Qe&&(No(this,ve),dr(this,Qe,re))},S)),S.j=z}function Is(S,z){const re=new Dn;if(o.Image){const ve=new Image;ve.onload=g(Ks,re,"TestLoadImage: loaded",!0,z,ve),ve.onerror=g(Ks,re,"TestLoadImage: error",!1,z,ve),ve.onabort=g(Ks,re,"TestLoadImage: abort",!1,z,ve),ve.ontimeout=g(Ks,re,"TestLoadImage: timeout",!1,z,ve),o.setTimeout(function(){ve.ontimeout&&ve.ontimeout()},1e4),ve.src=S}else z(!1)}function Ai(S,z){const re=new Dn,ve=new AbortController,Qe=setTimeout(()=>{ve.abort(),Ks(re,"TestPingServer: timeout",!1,z)},1e4);fetch(S,{signal:ve.signal}).then(Ye=>{clearTimeout(Qe),Ye.ok?Ks(re,"TestPingServer: ok",!0,z):Ks(re,"TestPingServer: server error",!1,z)}).catch(()=>{clearTimeout(Qe),Ks(re,"TestPingServer: error",!1,z)})}function Ks(S,z,re,ve,Qe){try{Qe&&(Qe.onload=null,Qe.onerror=null,Qe.onabort=null,Qe.ontimeout=null),ve(re)}catch{}}function so(){this.g=new rs}function ui(S,z,re){const ve=re||"";try{SA(S,function(Qe,Ye){let Ct=Qe;u(Qe)&&(Ct=Ir(Qe)),z.push(ve+Ye+"="+encodeURIComponent(Ct))})}catch(Qe){throw z.push(ve+"type="+encodeURIComponent("_badmap")),Qe}}function al(S){this.l=S.Ub||null,this.j=S.eb||!1}b(al,Mr),al.prototype.g=function(){return new ko(this.l,this.j)},al.prototype.i=function(S){return function(){return S}}({});function ko(S,z){Qt.call(this),this.D=S,this.o=z,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(ko,Qt),t=ko.prototype,t.open=function(S,z){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=S,this.A=z,this.readyState=1,Fs(this)},t.send=function(S){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const z={headers:this.u,method:this.B,credentials:this.m,cache:void 0};S&&(z.body=S),(this.D||o).fetch(new Request(this.A,z)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,di(this)),this.readyState=0},t.Sa=function(S){if(this.g&&(this.l=S,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=S.headers,this.readyState=2,Fs(this)),this.g&&(this.readyState=3,Fs(this),this.g)))if(this.responseType==="arraybuffer")S.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in S){if(this.j=S.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;NA(this)}else S.text().then(this.Ra.bind(this),this.ga.bind(this))};function NA(S){S.j.read().then(S.Pa.bind(S)).catch(S.ga.bind(S))}t.Pa=function(S){if(this.g){if(this.o&&S.value)this.response.push(S.value);else if(!this.o){var z=S.value?S.value:new Uint8Array(0);(z=this.v.decode(z,{stream:!S.done}))&&(this.response=this.responseText+=z)}S.done?di(this):Fs(this),this.readyState==3&&NA(this)}},t.Ra=function(S){this.g&&(this.response=this.responseText=S,di(this))},t.Qa=function(S){this.g&&(this.response=S,di(this))},t.ga=function(){this.g&&di(this)};function di(S){S.readyState=4,S.l=null,S.j=null,S.v=null,Fs(S)}t.setRequestHeader=function(S,z){this.u.append(S,z)},t.getResponseHeader=function(S){return this.h&&this.h.get(S.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const S=[],z=this.h.entries();for(var re=z.next();!re.done;)re=re.value,S.push(re[0]+": "+re[1]),re=z.next();return S.join(`\r
`)};function Fs(S){S.onreadystatechange&&S.onreadystatechange.call(S)}Object.defineProperty(ko.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(S){this.m=S?"include":"same-origin"}});function io(S){let z="";return U(S,function(re,ve){z+=ve,z+=":",z+=re,z+=`\r
`}),z}function Ta(S,z,re){e:{for(ve in re){var ve=!1;break e}ve=!0}ve||(re=io(re),typeof S=="string"?re!=null&&encodeURIComponent(String(re)):wn(S,z,re))}function Kr(S){Qt.call(this),this.headers=new Map,this.o=S||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Kr,Qt);var sl=/^https?$/i,oo=["POST","PUT"];t=Kr.prototype,t.Ha=function(S){this.J=S},t.ea=function(S,z,re,ve){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+S);z=z?z.toUpperCase():"GET",this.D=S,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ke.g(),this.v=this.o?li(this.o):li(ke),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(z,String(S),!0),this.B=!1}catch(Ye){kA(this,Ye);return}if(S=re||"",re=new Map(this.headers),ve)if(Object.getPrototypeOf(ve)===Object.prototype)for(var Qe in ve)re.set(Qe,ve[Qe]);else if(typeof ve.keys=="function"&&typeof ve.get=="function")for(const Ye of ve.keys())re.set(Ye,ve.get(Ye));else throw Error("Unknown input type for opt_headers: "+String(ve));ve=Array.from(re.keys()).find(Ye=>Ye.toLowerCase()=="content-type"),Qe=o.FormData&&S instanceof o.FormData,!(0<=Array.prototype.indexOf.call(oo,z,void 0))||ve||Qe||re.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ye,Ct]of re)this.g.setRequestHeader(Ye,Ct);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ds(this),this.u=!0,this.g.send(S),this.u=!1}catch(Ye){kA(this,Ye)}};function kA(S,z){S.h=!1,S.g&&(S.j=!0,S.g.abort(),S.j=!1),S.l=z,S.m=5,Ql(S),Hi(S)}function Ql(S){S.A||(S.A=!0,Gt(S,"complete"),Gt(S,"error"))}t.abort=function(S){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=S||7,Gt(this,"complete"),Gt(this,"abort"),Hi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hi(this,!0)),Kr.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Hl(this):this.bb())},t.bb=function(){Hl(this)};function Hl(S){if(S.h&&typeof i<"u"&&(!S.v[1]||Ba(S)!=4||S.Z()!=2)){if(S.u&&Ba(S)==4)kt(S.Ea,0,S);else if(Gt(S,"readystatechange"),Ba(S)==4){S.h=!1;try{const Ct=S.Z();e:switch(Ct){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var z=!0;break e;default:z=!1}var re;if(!(re=z)){var ve;if(ve=Ct===0){var Qe=String(S.D).match(ws)[1]||null;!Qe&&o.self&&o.self.location&&(Qe=o.self.location.protocol.slice(0,-1)),ve=!sl.test(Qe?Qe.toLowerCase():"")}re=ve}if(re)Gt(S,"complete"),Gt(S,"success");else{S.m=6;try{var Ye=2<Ba(S)?S.g.statusText:""}catch{Ye=""}S.l=Ye+" ["+S.Z()+"]",Ql(S)}}finally{Hi(S)}}}}function Hi(S,z){if(S.g){Ds(S);const re=S.g,ve=S.v[0]?()=>{}:null;S.g=null,S.v=null,z||Gt(S,"ready");try{re.onreadystatechange=ve}catch{}}}function Ds(S){S.I&&(o.clearTimeout(S.I),S.I=null)}t.isActive=function(){return!!this.g};function Ba(S){return S.g?S.g.readyState:0}t.Z=function(){try{return 2<Ba(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(S){if(this.g){var z=this.g.responseText;return S&&z.indexOf(S)==0&&(z=z.substring(S.length)),hn(z)}};function ku(S){try{if(!S.g)return null;if("response"in S.g)return S.g.response;switch(S.H){case"":case"text":return S.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in S.g)return S.g.mozResponseArrayBuffer}return null}catch{return null}}function il(S){const z={};S=(S.g&&2<=Ba(S)&&S.g.getAllResponseHeaders()||"").split(`\r
`);for(let ve=0;ve<S.length;ve++){if(D(S[ve]))continue;var re=R(S[ve]);const Qe=re[0];if(re=re[1],typeof re!="string")continue;re=re.trim();const Ye=z[Qe]||[];z[Qe]=Ye,Ye.push(re)}E(z,function(ve){return ve.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bs(S,z,re){return re&&re.internalChannelParams&&re.internalChannelParams[S]||z}function ol(S){this.Aa=0,this.i=[],this.j=new Dn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bs("failFast",!1,S),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bs("baseRetryDelayMs",5e3,S),this.cb=bs("retryDelaySeedMs",1e4,S),this.Wa=bs("forwardChannelMaxRetries",2,S),this.wa=bs("forwardChannelRequestTimeoutMs",2e4,S),this.pa=S&&S.xmlHttpFactory||void 0,this.Xa=S&&S.Tb||void 0,this.Ca=S&&S.useFetchStreams||!1,this.L=void 0,this.J=S&&S.supportsCrossDomainXhr||!1,this.K="",this.h=new ns(S&&S.concurrentRequestLimit),this.Da=new so,this.P=S&&S.fastHandshake||!1,this.O=S&&S.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=S&&S.Rb||!1,S&&S.xa&&this.j.xa(),S&&S.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&S&&S.detectBufferingProxy||!1,this.ja=void 0,S&&S.longPollingTimeout&&0<S.longPollingTimeout&&(this.ja=S.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ol.prototype,t.la=8,t.G=1,t.connect=function(S,z,re,ve){Ht(0),this.W=S,this.H=z||{},re&&ve!==void 0&&(this.H.OSID=re,this.H.OAID=ve),this.F=this.X,this.I=O(this,null,this.W),Nc(this)};function Io(S){if(Vl(S),S.G==3){var z=S.U++,re=ys(S.I);if(wn(re,"SID",S.K),wn(re,"RID",z),wn(re,"TYPE","terminate"),ll(S,re),z=new rt(S,S.j,z),z.L=2,z.v=nl(ys(re)),re=!1,o.navigator&&o.navigator.sendBeacon)try{re=o.navigator.sendBeacon(z.v.toString(),"")}catch{}!re&&o.Image&&(new Image().src=z.v,re=!0),re||(z.g=ce(z.j,null),z.g.ea(z.v)),z.F=Date.now(),Rt(z)}Ic(S)}function Bc(S){S.g&&(cl(S),S.g.cancel(),S.g=null)}function Vl(S){Bc(S),S.u&&(o.clearTimeout(S.u),S.u=null),Fo(S),S.h.cancel(),S.s&&(typeof S.s=="number"&&o.clearTimeout(S.s),S.s=null)}function Nc(S){if(!ks(S.h)&&!S.s){S.s=!0;var z=S.Ga;ae||W(),q||(ae(),q=!0),J.add(z,S),S.B=0}}function IA(S,z){return qs(S.h)>=S.h.j-(S.s?1:0)?!1:S.s?(S.i=z.D.concat(S.i),!0):S.G==1||S.G==2||S.B>=(S.Va?0:S.Wa)?!1:(S.s=an(p(S.Ga,S,z),Kl(S,S.B)),S.B++,!0)}t.Ga=function(S){if(this.s)if(this.s=null,this.G==1){if(!S){this.U=Math.floor(1e5*Math.random()),S=this.U++;const Qe=new rt(this,this.j,S);let Ye=this.o;if(this.S&&(Ye?(Ye=_(Ye),Q(Ye,this.S)):Ye=this.S),this.m!==null||this.O||(Qe.H=Ye,Ye=null),this.P)e:{for(var z=0,re=0;re<this.i.length;re++){t:{var ve=this.i[re];if("__data__"in ve.map&&(ve=ve.map.__data__,typeof ve=="string")){ve=ve.length;break t}ve=void 0}if(ve===void 0)break;if(z+=ve,4096<z){z=re;break e}if(z===4096||re===this.i.length-1){z=re+1;break e}}z=1e3}else z=1e3;z=zl(this,Qe,z),re=ys(this.I),wn(re,"RID",S),wn(re,"CVER",22),this.D&&wn(re,"X-HTTP-Session-Id",this.D),ll(this,re),Ye&&(this.O?z="headers="+encodeURIComponent(String(io(Ye)))+"&"+z:this.m&&Ta(re,this.m,Ye)),Vn(this.h,Qe),this.Ua&&wn(re,"TYPE","init"),this.P?(wn(re,"$req",z),wn(re,"SID","null"),Qe.T=!0,xt(Qe,re,null)):xt(Qe,re,z),this.G=2}}else this.G==3&&(S?Gl(this,S):this.i.length==0||ks(this.h)||Gl(this))};function Gl(S,z){var re;z?re=z.l:re=S.U++;const ve=ys(S.I);wn(ve,"SID",S.K),wn(ve,"RID",re),wn(ve,"AID",S.T),ll(S,ve),S.m&&S.o&&Ta(ve,S.m,S.o),re=new rt(S,S.j,re,S.B+1),S.m===null&&(re.H=S.o),z&&(S.i=z.D.concat(S.i)),z=zl(S,re,1e3),re.I=Math.round(.5*S.wa)+Math.round(.5*S.wa*Math.random()),Vn(S.h,re),xt(re,ve,z)}function ll(S,z){S.H&&U(S.H,function(re,ve){wn(z,ve,re)}),S.l&&SA({},function(re,ve){wn(z,ve,re)})}function zl(S,z,re){re=Math.min(S.i.length,re);var ve=S.l?p(S.l.Na,S.l,S):null;e:{var Qe=S.i;let Ye=-1;for(;;){const Ct=["count="+re];Ye==-1?0<re?(Ye=Qe[0].g,Ct.push("ofs="+Ye)):Ye=0:Ct.push("ofs="+Ye);let fr=!0;for(let Wr=0;Wr<re;Wr++){let Sr=Qe[Wr].g;const yn=Qe[Wr].map;if(Sr-=Ye,0>Sr)Ye=Math.max(0,Qe[Wr].g-100),fr=!1;else try{ui(yn,Ct,"req"+Sr+"_")}catch{ve&&ve(yn)}}if(fr){ve=Ct.join("&");break e}}}return S=S.i.splice(0,re),z.D=S,ve}function kc(S){if(!S.g&&!S.u){S.Y=1;var z=S.Fa;ae||W(),q||(ae(),q=!0),J.add(z,S),S.v=0}}function ql(S){return S.g||S.u||3<=S.v?!1:(S.Y++,S.u=an(p(S.Fa,S),Kl(S,S.v)),S.v++,!0)}t.Fa=function(){if(this.u=null,Iu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var S=2*this.R;this.j.info("BP detection timer enabled: "+S),this.A=an(p(this.ab,this),S)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ht(10),Bc(this),Iu(this))};function cl(S){S.A!=null&&(o.clearTimeout(S.A),S.A=null)}function Iu(S){S.g=new rt(S,S.j,"rpc",S.Y),S.m===null&&(S.g.H=S.o),S.g.O=0;var z=ys(S.qa);wn(z,"RID","rpc"),wn(z,"SID",S.K),wn(z,"AID",S.T),wn(z,"CI",S.F?"0":"1"),!S.F&&S.ja&&wn(z,"TO",S.ja),wn(z,"TYPE","xmlhttp"),ll(S,z),S.m&&S.o&&Ta(z,S.m,S.o),S.L&&(S.g.I=S.L);var re=S.g;S=S.ia,re.L=1,re.v=nl(ys(z)),re.m=null,re.P=!0,Bt(re,S)}t.Za=function(){this.C!=null&&(this.C=null,Bc(this),ql(this),Ht(19))};function Fo(S){S.C!=null&&(o.clearTimeout(S.C),S.C=null)}function Al(S,z){var re=null;if(S.g==z){Fo(S),cl(S),S.g=null;var ve=2}else if(vs(S.h,z))re=z.D,as(S.h,z),ve=1;else return;if(S.G!=0){if(z.o)if(ve==1){re=z.m?z.m.length:0,z=Date.now()-z.F;var Qe=S.B;ve=Ns(),Gt(ve,new pn(ve,re)),Nc(S)}else kc(S);else if(Qe=z.s,Qe==3||Qe==0&&0<z.X||!(ve==1&&IA(S,z)||ve==2&&ql(S)))switch(re&&0<re.length&&(z=S.h,z.i=z.i.concat(re)),Qe){case 1:Rs(S,5);break;case 4:Rs(S,10);break;case 3:Rs(S,6);break;default:Rs(S,2)}}}function Kl(S,z){let re=S.Ta+Math.floor(Math.random()*S.cb);return S.isActive()||(re*=2),re*z}function Rs(S,z){if(S.j.info("Error code "+z),z==2){var re=p(S.fb,S),ve=S.Xa;const Qe=!ve;ve=new sn(ve||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||tl(ve,"https"),nl(ve),Qe?Is(ve.toString(),re):Ai(ve.toString(),re)}else Ht(2);S.G=0,S.l&&S.l.sa(z),Ic(S),Vl(S)}t.fb=function(S){S?(this.j.info("Successfully pinged google.com"),Ht(2)):(this.j.info("Failed to ping google.com"),Ht(1))};function Ic(S){if(S.G=0,S.ka=[],S.l){const z=_c(S.h);(z.length!=0||S.i.length!=0)&&(T(S.ka,z),T(S.ka,S.i),S.h.i.length=0,y(S.i),S.i.length=0),S.l.ra()}}function O(S,z,re){var ve=re instanceof sn?ys(re):new sn(re);if(ve.g!="")z&&(ve.g=z+"."+ve.g),rl(ve,ve.s);else{var Qe=o.location;ve=Qe.protocol,z=z?z+"."+Qe.hostname:Qe.hostname,Qe=+Qe.port;var Ye=new sn(null);ve&&tl(Ye,ve),z&&(Ye.g=z),Qe&&rl(Ye,Qe),re&&(Ye.l=re),ve=Ye}return re=S.D,z=S.ya,re&&z&&wn(ve,re,z),wn(ve,"VER",S.la),ll(S,ve),ve}function ce(S,z,re){if(z&&!S.J)throw Error("Can't create secondary domain capable XhrIo object.");return z=S.Ca&&!S.pa?new Kr(new al({eb:re})):new Kr(S.pa),z.Ha(S.J),z}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ie(){}t=Ie.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Re(){}Re.prototype.g=function(S,z){return new Ve(S,z)};function Ve(S,z){Qt.call(this),this.g=new ol(z),this.l=S,this.h=z&&z.messageUrlParams||null,S=z&&z.messageHeaders||null,z&&z.clientProtocolHeaderRequired&&(S?S["X-Client-Protocol"]="webchannel":S={"X-Client-Protocol":"webchannel"}),this.g.o=S,S=z&&z.initMessageHeaders||null,z&&z.messageContentType&&(S?S["X-WebChannel-Content-Type"]=z.messageContentType:S={"X-WebChannel-Content-Type":z.messageContentType}),z&&z.va&&(S?S["X-WebChannel-Client-Profile"]=z.va:S={"X-WebChannel-Client-Profile":z.va}),this.g.S=S,(S=z&&z.Sb)&&!D(S)&&(this.g.m=S),this.v=z&&z.supportsCrossDomainXhr||!1,this.u=z&&z.sendRawJson||!1,(z=z&&z.httpSessionIdParam)&&!D(z)&&(this.g.D=z,S=this.h,S!==null&&z in S&&(S=this.h,z in S&&delete S[z])),this.j=new Ut(this)}b(Ve,Qt),Ve.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ve.prototype.close=function(){Io(this.g)},Ve.prototype.o=function(S){var z=this.g;if(typeof S=="string"){var re={};re.__data__=S,S=re}else this.u&&(re={},re.__data__=Ir(S),S=re);z.i.push(new eo(z.Ya++,S)),z.G==3&&Nc(z)},Ve.prototype.N=function(){this.g.l=null,delete this.j,Io(this.g),delete this.g,Ve.aa.N.call(this)};function ot(S){Pa.call(this),S.__headers__&&(this.headers=S.__headers__,this.statusCode=S.__status__,delete S.__headers__,delete S.__status__);var z=S.__sm__;if(z){e:{for(const re in z){S=re;break e}S=void 0}(this.i=S)&&(S=this.i,z=z!==null&&S in z?z[S]:void 0),this.data=z}else this.data=S}b(ot,Pa);function bt(){mn.call(this),this.status=1}b(bt,mn);function Ut(S){this.g=S}b(Ut,Ie),Ut.prototype.ua=function(){Gt(this.g,"a")},Ut.prototype.ta=function(S){Gt(this.g,new ot(S))},Ut.prototype.sa=function(S){Gt(this.g,new bt)},Ut.prototype.ra=function(){Gt(this.g,"b")},Re.prototype.createWebChannel=Re.prototype.g,Ve.prototype.send=Ve.prototype.o,Ve.prototype.open=Ve.prototype.m,Ve.prototype.close=Ve.prototype.close,AD=function(){return new Re},cD=function(){return Ns()},lD=ar,NC={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_e.NO_ERROR=0,_e.TIMEOUT=8,_e.HTTP_ERROR=6,cv=_e,Be.COMPLETE="complete",oD=Be,Bn.EventType=ga,ga.OPEN="a",ga.CLOSE="b",ga.ERROR="c",ga.MESSAGE="d",Qt.prototype.listen=Qt.prototype.K,gp=Bn,Kr.prototype.listenOnce=Kr.prototype.L,Kr.prototype.getLastError=Kr.prototype.Ka,Kr.prototype.getLastErrorCode=Kr.prototype.Ba,Kr.prototype.getStatus=Kr.prototype.Z,Kr.prototype.getResponseJson=Kr.prototype.Oa,Kr.prototype.getResponseText=Kr.prototype.oa,Kr.prototype.send=Kr.prototype.ea,Kr.prototype.setWithCredentials=Kr.prototype.Ha,iD=Kr}).apply(typeof A1<"u"?A1:typeof self<"u"?self:typeof window<"u"?window:{});const uB="@firebase/firestore",dB="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ti.UNAUTHENTICATED=new Ti(null),Ti.GOOGLE_CREDENTIALS=new Ti("google-credentials-uid"),Ti.FIRST_PARTY=new Ti("first-party-uid"),Ti.MOCK_USER=new Ti("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let am="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yf=new o_("@firebase/firestore");function u0(){return Yf.logLevel}function Jt(t,...e){if(Yf.logLevel<=tn.DEBUG){const r=e.map(v_);Yf.debug(`Firestore (${am}): ${t}`,...r)}}function pu(t,...e){if(Yf.logLevel<=tn.ERROR){const r=e.map(v_);Yf.error(`Firestore (${am}): ${t}`,...r)}}function V0(t,...e){if(Yf.logLevel<=tn.WARN){const r=e.map(v_);Yf.warn(`Firestore (${am}): ${t}`,...r)}}function v_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,uD(t,n,r)}function uD(t,e,r){let n=`FIRESTORE (${am}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw pu(n),new Error(n)}function Fn(t,e,r,n){let a="Unexpected state";typeof r=="string"?a=r:n=r,t||uD(e,a,n)}function kr(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ft={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Vt extends wA{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class c9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Ti.UNAUTHENTICATED))}shutdown(){}}class A9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class u9{constructor(e){this.t=e,this.currentUser=Ti.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Fn(this.o===void 0,42304);let n=this.i;const a=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new lu;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new lu,e.enqueueRetryable(()=>a(this.currentUser))};const i=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},o=c=>{Jt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(c=>o(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(Jt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new lu)}},0),i()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Jt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Fn(typeof n.accessToken=="string",31837,{l:n}),new dD(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fn(e===null||typeof e=="string",2055,{h:e}),new Ti(e)}}class d9{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=Ti.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class f9{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new d9(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(Ti.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fB{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class h9{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Il(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){Fn(this.o===void 0,3512);const n=s=>{s.error!=null&&Jt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.m;return this.m=s.token,Jt("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const a=s=>{Jt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?a(s):Jt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new fB(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Fn(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new fB(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=m9(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=e.charAt(a[s]%62))}return n}}function rn(t,e){return t<e?-1:t>e?1:0}function kC(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const a=t.charAt(n),s=e.charAt(n);if(a!==s)return ob(a)===ob(s)?rn(a,s):ob(a)?1:-1}return rn(t.length,e.length)}const p9=55296,g9=57343;function ob(t){const e=t.charCodeAt(0);return e>=p9&&e<=g9}function G0(t,e,r){return t.length===e.length&&t.every((n,a)=>r(n,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hB="__name__";class oA{constructor(e,r,n){r===void 0?r=0:r>e.length&&yr(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&yr(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return oA.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof oA?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const s=oA.compareSegments(e.get(a),r.get(a));if(s!==0)return s}return rn(e.length,r.length)}static compareSegments(e,r){const n=oA.isNumericId(e),a=oA.isNumericId(r);return n&&!a?-1:!n&&a?1:n&&a?oA.extractNumericId(e).compare(oA.extractNumericId(r)):kC(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Id.fromString(e.substring(4,e.length-2))}}class na extends oA{construct(e,r,n){return new na(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Vt(ft.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new na(r)}static emptyPath(){return new na([])}}const x9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ai extends oA{construct(e,r,n){return new ai(e,r,n)}static isValidIdentifier(e){return x9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ai.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===hB}static keyField(){return new ai([hB])}static fromServerFormat(e){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new Vt(ft.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;a<e.length;){const o=e[a];if(o==="\\"){if(a+1===e.length)throw new Vt(ft.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Vt(ft.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,a+=2}else o==="`"?(i=!i,a++):o!=="."||i?(n+=o,a++):(s(),a++)}if(s(),i)throw new Vt(ft.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ai(r)}static emptyPath(){return new ai([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this.path=e}static fromPath(e){return new lr(na.fromString(e))}static fromName(e){return new lr(na.fromString(e).popFirst(5))}static empty(){return new lr(na.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&na.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return na.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new lr(new na(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(t,e,r){if(!r)throw new Vt(ft.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function v9(t,e,r,n){if(e===!0&&n===!0)throw new Vt(ft.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function mB(t){if(!lr.isDocumentKey(t))throw new Vt(ft.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function pB(t){if(lr.isDocumentKey(t))throw new Vt(ft.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function hD(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function j2(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":yr(12329,{type:typeof t})}function $i(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Vt(ft.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=j2(t);throw new Vt(ft.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function w9(t,e){if(e<=0)throw new Vt(ft.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(t,e){const r={typeString:t};return e&&(r.value=e),r}function Og(t,e){if(!hD(t))throw new Vt(ft.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const a=e[n].typeString,s="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const i=t[n];if(a&&typeof i!==a){r=`JSON field '${n}' must be a ${a}.`;break}if(s!==void 0&&i!==s.value){r=`Expected '${n}' field to equal '${s.value}'`;break}}if(r)throw new Vt(ft.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gB=-62135596800,xB=1e6;class Ar{static now(){return Ar.fromMillis(Date.now())}static fromDate(e){return Ar.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*xB);return new Ar(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Vt(ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Vt(ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<gB)throw new Vt(ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Vt(ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xB}_compareTo(e){return this.seconds===e.seconds?rn(this.nanoseconds,e.nanoseconds):rn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ar._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Og(e,Ar._jsonSchema))return new Ar(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-gB;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ar._jsonSchemaVersion="firestore/timestamp/1.0",Ar._jsonSchema={type:ms("string",Ar._jsonSchemaVersion),seconds:ms("number"),nanoseconds:ms("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{static fromTimestamp(e){return new Br(e)}static min(){return new Br(new Ar(0,0))}static max(){return new Br(new Ar(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og=-1;function y9(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=Br.fromTimestamp(n===1e9?new Ar(r+1,0):new Ar(r,n));return new jd(a,lr.empty(),e)}function b9(t){return new jd(t.readTime,t.key,og)}class jd{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new jd(Br.min(),lr.empty(),og)}static max(){return new jd(Br.max(),lr.empty(),og)}}function C9(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=lr.comparator(t.documentKey,e.documentKey),r!==0?r:rn(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sm(t){if(t.code!==ft.FAILED_PRECONDITION||t.message!==E9)throw t;Jt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&yr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new wt((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof wt?r:wt.resolve(r)}catch(r){return wt.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):wt.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):wt.reject(r)}static resolve(e){return new wt((r,n)=>{r(e)})}static reject(e){return new wt((r,n)=>{n(e)})}static waitFor(e){return new wt((r,n)=>{let a=0,s=0,i=!1;e.forEach(o=>{++a,o.next(()=>{++s,i&&s===a&&r()},c=>n(c))}),i=!0,s===a&&r()})}static or(e){let r=wt.resolve(!1);for(const n of e)r=r.next(a=>a?wt.resolve(a):n());return r}static forEach(e,r){const n=[];return e.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(e,r){return new wt((n,a)=>{const s=e.length,i=new Array(s);let o=0;for(let c=0;c<s;c++){const u=c;r(e[u]).next(f=>{i[u]=f,++o,o===s&&n(i)},f=>a(f))}})}static doWhile(e,r){return new wt((n,a)=>{const s=()=>{e()===!0?r().next(()=>{s()},a):n()};s()})}}function S9(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function im(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}O2.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_=-1;function Q2(t){return t==null}function Lv(t){return t===0&&1/t==-1/0}function T9(t){return typeof t=="number"&&Number.isInteger(t)&&!Lv(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD="";function B9(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=vB(e)),e=N9(t.get(r),e);return vB(e)}function N9(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const s=t.charAt(a);switch(s){case"\0":r+="";break;case mD:r+="";break;default:r+=s}}return r}function vB(t){return t+mD+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wB(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Zd(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function pD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,r){this.comparator=e,this.root=r||ri.EMPTY}insert(e,r){return new _a(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,ri.BLACK,null,null))}remove(e){return new _a(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ri.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new u1(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new u1(this.root,e,this.comparator,!1)}getReverseIterator(){return new u1(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new u1(this.root,e,this.comparator,!0)}}class u1{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&a&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ri{constructor(e,r,n,a,s){this.key=e,this.value=r,this.color=n??ri.RED,this.left=a??ri.EMPTY,this.right=s??ri.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,s){return new ri(e??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const s=n(e,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(e,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return ri.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return ri.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ri.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ri.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw yr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw yr(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw yr(27949);return e+(this.isRed()?0:1)}}ri.EMPTY=null,ri.RED=!0,ri.BLACK=!1;ri.EMPTY=new class{constructor(){this.size=0}get key(){throw yr(57766)}get value(){throw yr(16141)}get color(){throw yr(16727)}get left(){throw yr(29726)}get right(){throw yr(36894)}copy(e,r,n,a,s){return this}insert(e,r,n){return new ri(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this.comparator=e,this.data=new _a(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new yB(this.data.getIterator())}getIteratorFrom(e){return new yB(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Ts)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Ts(this.comparator);return r.data=e,r}}class yB{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this.fields=e,e.sort(ai.comparator)}static empty(){return new $o([])}unionWith(e){let r=new Ts(ai.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new $o(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return G0(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new gD("Invalid base64 string: "+s):s}}(e);return new oi(r)}static fromUint8Array(e){const r=function(a){let s="";for(let i=0;i<a.length;++i)s+=String.fromCharCode(a[i]);return s}(e);return new oi(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}oi.EMPTY_BYTE_STRING=new oi("");const k9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Od(t){if(Fn(!!t,39018),typeof t=="string"){let e=0;const r=k9.exec(t);if(Fn(!!r,46558,{timestamp:t}),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:$a(t.seconds),nanos:$a(t.nanos)}}function $a(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qd(t){return typeof t=="string"?oi.fromBase64String(t):oi.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD="server_timestamp",vD="__type__",wD="__previous_value__",yD="__local_write_time__";function b_(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[vD])==null?void 0:n.stringValue)===xD}function H2(t){const e=t.mapValue.fields[wD];return b_(e)?H2(e):e}function lg(t){const e=Od(t.mapValue.fields[yD].timestampValue);return new Ar(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I9{constructor(e,r,n,a,s,i,o,c,u,f){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=f}}const Uv="(default)";class cg{constructor(e,r){this.projectId=e,this.database=r||Uv}static empty(){return new cg("","")}get isDefaultDatabase(){return this.database===Uv}isEqual(e){return e instanceof cg&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD="__type__",F9="__max__",d1={mapValue:{}},CD="__vector__",Mv="value";function Hd(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?b_(t)?4:R9(t)?9007199254740991:D9(t)?10:11:yr(28295,{value:t})}function xA(t,e){if(t===e)return!0;const r=Hd(t);if(r!==Hd(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return lg(t).isEqual(lg(e));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const i=Od(a.timestampValue),o=Od(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,s){return Qd(a.bytesValue).isEqual(Qd(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,s){return $a(a.geoPointValue.latitude)===$a(s.geoPointValue.latitude)&&$a(a.geoPointValue.longitude)===$a(s.geoPointValue.longitude)}(t,e);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return $a(a.integerValue)===$a(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const i=$a(a.doubleValue),o=$a(s.doubleValue);return i===o?Lv(i)===Lv(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return G0(t.arrayValue.values||[],e.arrayValue.values||[],xA);case 10:case 11:return function(a,s){const i=a.mapValue.fields||{},o=s.mapValue.fields||{};if(wB(i)!==wB(o))return!1;for(const c in i)if(i.hasOwnProperty(c)&&(o[c]===void 0||!xA(i[c],o[c])))return!1;return!0}(t,e);default:return yr(52216,{left:t})}}function Ag(t,e){return(t.values||[]).find(r=>xA(r,e))!==void 0}function z0(t,e){if(t===e)return 0;const r=Hd(t),n=Hd(e);if(r!==n)return rn(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return rn(t.booleanValue,e.booleanValue);case 2:return function(s,i){const o=$a(s.integerValue||s.doubleValue),c=$a(i.integerValue||i.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1}(t,e);case 3:return bB(t.timestampValue,e.timestampValue);case 4:return bB(lg(t),lg(e));case 5:return kC(t.stringValue,e.stringValue);case 6:return function(s,i){const o=Qd(s),c=Qd(i);return o.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const o=s.split("/"),c=i.split("/");for(let u=0;u<o.length&&u<c.length;u++){const f=rn(o[u],c[u]);if(f!==0)return f}return rn(o.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const o=rn($a(s.latitude),$a(i.latitude));return o!==0?o:rn($a(s.longitude),$a(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return CB(t.arrayValue,e.arrayValue);case 10:return function(s,i){var p,g,b,y;const o=s.fields||{},c=i.fields||{},u=(p=o[Mv])==null?void 0:p.arrayValue,f=(g=c[Mv])==null?void 0:g.arrayValue,m=rn(((b=u==null?void 0:u.values)==null?void 0:b.length)||0,((y=f==null?void 0:f.values)==null?void 0:y.length)||0);return m!==0?m:CB(u,f)}(t.mapValue,e.mapValue);case 11:return function(s,i){if(s===d1.mapValue&&i===d1.mapValue)return 0;if(s===d1.mapValue)return 1;if(i===d1.mapValue)return-1;const o=s.fields||{},c=Object.keys(o),u=i.fields||{},f=Object.keys(u);c.sort(),f.sort();for(let m=0;m<c.length&&m<f.length;++m){const p=kC(c[m],f[m]);if(p!==0)return p;const g=z0(o[c[m]],u[f[m]]);if(g!==0)return g}return rn(c.length,f.length)}(t.mapValue,e.mapValue);default:throw yr(23264,{he:r})}}function bB(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return rn(t,e);const r=Od(t),n=Od(e),a=rn(r.seconds,n.seconds);return a!==0?a:rn(r.nanos,n.nanos)}function CB(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=z0(r[a],n[a]);if(s)return s}return rn(r.length,n.length)}function q0(t){return IC(t)}function IC(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=Od(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Qd(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return lr.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=IC(s);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const i of n)s?s=!1:a+=",",a+=`${i}:${IC(r.fields[i])}`;return a+"}"}(t.mapValue):yr(61005,{value:t})}function Av(t){switch(Hd(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=H2(t);return e?16+Av(e):16;case 5:return 2*t.stringValue.length;case 6:return Qd(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((a,s)=>a+Av(s),0)}(t.arrayValue);case 10:case 11:return function(n){let a=0;return Zd(n.fields,(s,i)=>{a+=s.length+Av(i)}),a}(t.mapValue);default:throw yr(13486,{value:t})}}function EB(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function FC(t){return!!t&&"integerValue"in t}function C_(t){return!!t&&"arrayValue"in t}function _B(t){return!!t&&"nullValue"in t}function SB(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function uv(t){return!!t&&"mapValue"in t}function D9(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[bD])==null?void 0:n.stringValue)===CD}function Lp(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Zd(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Lp(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Lp(t.arrayValue.values[r]);return e}return{...t}}function R9(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===F9}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e){this.value=e}static empty(){return new wo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!uv(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lp(r)}setAll(e){let r=ai.emptyPath(),n={},a=[];e.forEach((i,o)=>{if(!r.isImmediateParentOf(o)){const c=this.getFieldsMap(r);this.applyChanges(c,n,a),n={},a=[],r=o.popLast()}i?n[o.lastSegment()]=Lp(i):a.push(o.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(e){const r=this.field(e.popLast());uv(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return xA(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];uv(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){Zd(r,(a,s)=>e[a]=s);for(const a of n)delete e[a]}clone(){return new wo(Lp(this.value))}}function ED(t){const e=[];return Zd(t.fields,(r,n)=>{const a=new ai([r]);if(uv(n)){const s=ED(n.mapValue).fields;if(s.length===0)e.push(a);else for(const i of s)e.push(a.child(i))}else e.push(a)}),new $o(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,r,n,a,s,i,o){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(e){return new Ii(e,0,Br.min(),Br.min(),Br.min(),wo.empty(),0)}static newFoundDocument(e,r,n,a){return new Ii(e,1,r,Br.min(),n,a,0)}static newNoDocument(e,r){return new Ii(e,2,r,Br.min(),Br.min(),wo.empty(),0)}static newUnknownDocument(e,r){return new Ii(e,3,r,Br.min(),Br.min(),wo.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Br.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Br.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ii&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ii(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e,r){this.position=e,this.inclusive=r}}function TB(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const s=e[a],i=t.position[a];if(s.field.isKeyField()?n=lr.comparator(lr.fromName(i.referenceValue),r.key):n=z0(i,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function BB(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!xA(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,r="asc"){this.field=e,this.dir=r}}function L9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{}class hs extends _D{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new M9(e,r,n):r==="array-contains"?new O9(e,n):r==="in"?new Q9(e,n):r==="not-in"?new H9(e,n):r==="array-contains-any"?new V9(e,n):new hs(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new P9(e,n):new j9(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(z0(r,this.value)):r!==null&&Hd(this.value)===Hd(r)&&this.matchesComparison(z0(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return yr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yc extends _D{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new yc(e,r)}matches(e){return SD(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function SD(t){return t.op==="and"}function TD(t){return U9(t)&&SD(t)}function U9(t){for(const e of t.filters)if(e instanceof yc)return!1;return!0}function DC(t){if(t instanceof hs)return t.field.canonicalString()+t.op.toString()+q0(t.value);if(TD(t))return t.filters.map(e=>DC(e)).join(",");{const e=t.filters.map(r=>DC(r)).join(",");return`${t.op}(${e})`}}function BD(t,e){return t instanceof hs?function(n,a){return a instanceof hs&&n.op===a.op&&n.field.isEqual(a.field)&&xA(n.value,a.value)}(t,e):t instanceof yc?function(n,a){return a instanceof yc&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,i,o)=>s&&BD(i,a.filters[o]),!0):!1}(t,e):void yr(19439)}function ND(t){return t instanceof hs?function(r){return`${r.field.canonicalString()} ${r.op} ${q0(r.value)}`}(t):t instanceof yc?function(r){return r.op.toString()+" {"+r.getFilters().map(ND).join(" ,")+"}"}(t):"Filter"}class M9 extends hs{constructor(e,r,n){super(e,r,n),this.key=lr.fromName(n.referenceValue)}matches(e){const r=lr.comparator(e.key,this.key);return this.matchesComparison(r)}}class P9 extends hs{constructor(e,r){super(e,"in",r),this.keys=kD("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class j9 extends hs{constructor(e,r){super(e,"not-in",r),this.keys=kD("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function kD(t,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(n=>lr.fromName(n.referenceValue))}class O9 extends hs{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return C_(r)&&Ag(r.arrayValue,this.value)}}class Q9 extends hs{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Ag(this.value.arrayValue,r)}}class H9 extends hs{constructor(e,r){super(e,"not-in",r)}matches(e){if(Ag(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Ag(this.value.arrayValue,r)}}class V9 extends hs{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!C_(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Ag(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G9{constructor(e,r=null,n=[],a=[],s=null,i=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=i,this.endAt=o,this.Te=null}}function NB(t,e=null,r=[],n=[],a=null,s=null,i=null){return new G9(t,e,r,n,a,s,i)}function E_(t){const e=kr(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>DC(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),Q2(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>q0(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>q0(n)).join(",")),e.Te=r}return e.Te}function __(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!L9(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!BD(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!BB(t.startAt,e.startAt)&&BB(t.endAt,e.endAt)}function RC(t){return lr.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,r=null,n=[],a=[],s=null,i="F",o=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function z9(t,e,r,n,a,s,i,o){return new om(t,e,r,n,a,s,i,o)}function V2(t){return new om(t)}function kB(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ID(t){return t.collectionGroup!==null}function Up(t){const e=kr(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new Ts(ai.comparator);return i.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new ug(s,n))}),r.has(ai.keyField().canonicalString())||e.Ie.push(new ug(ai.keyField(),n))}return e.Ie}function fA(t){const e=kr(t);return e.Ee||(e.Ee=q9(e,Up(t))),e.Ee}function q9(t,e){if(t.limitType==="F")return NB(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new ug(a.field,s)});const r=t.endAt?new Pv(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Pv(t.startAt.position,t.startAt.inclusive):null;return NB(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function LC(t,e){const r=t.filters.concat([e]);return new om(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function jv(t,e,r){return new om(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function G2(t,e){return __(fA(t),fA(e))&&t.limitType===e.limitType}function FD(t){return`${E_(fA(t))}|lt:${t.limitType}`}function d0(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>ND(a)).join(", ")}]`),Q2(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>q0(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>q0(a)).join(",")),`Target(${n})`}(fA(t))}; limitType=${t.limitType})`}function z2(t,e){return e.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):lr.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,a){for(const s of Up(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(t,e)&&function(n,a){return!(n.startAt&&!function(i,o,c){const u=TB(i,o,c);return i.inclusive?u<=0:u<0}(n.startAt,Up(n),a)||n.endAt&&!function(i,o,c){const u=TB(i,o,c);return i.inclusive?u>=0:u>0}(n.endAt,Up(n),a))}(t,e)}function K9(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function DD(t){return(e,r)=>{let n=!1;for(const a of Up(t)){const s=W9(a,e,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function W9(t,e,r){const n=t.field.isKeyField()?lr.comparator(e.key,r.key):function(s,i,o){const c=i.data.field(s),u=o.data.field(s);return c!==null&&u!==null?z0(c,u):yr(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return yr(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return void(a[s]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Zd(this.inner,(r,n)=>{for(const[a,s]of n)e(a,s)})}isEmpty(){return pD(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $9=new _a(lr.comparator);function gu(){return $9}const RD=new _a(lr.comparator);function xp(...t){let e=RD;for(const r of t)e=e.insert(r.key,r);return e}function LD(t){let e=RD;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Uf(){return Mp()}function UD(){return Mp()}function Mp(){return new ch(t=>t.toString(),(t,e)=>t.isEqual(e))}const J9=new _a(lr.comparator),Y9=new Ts(lr.comparator);function nn(...t){let e=Y9;for(const r of t)e=e.add(r);return e}const X9=new Ts(rn);function Z9(){return X9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lv(e)?"-0":e}}function MD(t){return{integerValue:""+t}}function eV(t,e){return T9(e)?MD(e):S_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(){this._=void 0}}function tV(t,e,r){return t instanceof Ov?function(a,s){const i={fields:{[vD]:{stringValue:xD},[yD]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&b_(s)&&(s=H2(s)),s&&(i.fields[wD]=s),{mapValue:i}}(r,e):t instanceof K0?jD(t,e):t instanceof dg?OD(t,e):function(a,s){const i=PD(a,s),o=IB(i)+IB(a.Ae);return FC(i)&&FC(a.Ae)?MD(o):S_(a.serializer,o)}(t,e)}function rV(t,e,r){return t instanceof K0?jD(t,e):t instanceof dg?OD(t,e):r}function PD(t,e){return t instanceof Qv?function(n){return FC(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class Ov extends q2{}class K0 extends q2{constructor(e){super(),this.elements=e}}function jD(t,e){const r=QD(e);for(const n of t.elements)r.some(a=>xA(a,n))||r.push(n);return{arrayValue:{values:r}}}class dg extends q2{constructor(e){super(),this.elements=e}}function OD(t,e){let r=QD(e);for(const n of t.elements)r=r.filter(a=>!xA(a,n));return{arrayValue:{values:r}}}class Qv extends q2{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function IB(t){return $a(t.integerValue||t.doubleValue)}function QD(t){return C_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e,r){this.field=e,this.transform=r}}function aV(t,e){return t.field.isEqual(e.field)&&function(n,a){return n instanceof K0&&a instanceof K0||n instanceof dg&&a instanceof dg?G0(n.elements,a.elements,xA):n instanceof Qv&&a instanceof Qv?xA(n.Ae,a.Ae):n instanceof Ov&&a instanceof Ov}(t.transform,e.transform)}class sV{constructor(e,r){this.version=e,this.transformResults=r}}class Ji{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Ji}static exists(e){return new Ji(void 0,e)}static updateTime(e){return new Ji(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dv(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class K2{}function HD(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new W2(t.key,Ji.none()):new Qg(t.key,t.data,Ji.none());{const r=t.data,n=wo.empty();let a=new Ts(ai.comparator);for(let s of e.fields)if(!a.has(s)){let i=r.field(s);i===null&&s.length>1&&(s=s.popLast(),i=r.field(s)),i===null?n.delete(s):n.set(s,i),a=a.add(s)}return new ef(t.key,n,new $o(a.toArray()),Ji.none())}}function iV(t,e,r){t instanceof Qg?function(a,s,i){const o=a.value.clone(),c=DB(a.fieldTransforms,s,i.transformResults);o.setAll(c),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,r):t instanceof ef?function(a,s,i){if(!dv(a.precondition,s))return void s.convertToUnknownDocument(i.version);const o=DB(a.fieldTransforms,s,i.transformResults),c=s.data;c.setAll(VD(a)),c.setAll(o),s.convertToFoundDocument(i.version,c).setHasCommittedMutations()}(t,e,r):function(a,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,r)}function Pp(t,e,r,n){return t instanceof Qg?function(s,i,o,c){if(!dv(s.precondition,i))return o;const u=s.value.clone(),f=RB(s.fieldTransforms,c,i);return u.setAll(f),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof ef?function(s,i,o,c){if(!dv(s.precondition,i))return o;const u=RB(s.fieldTransforms,c,i),f=i.data;return f.setAll(VD(s)),f.setAll(u),i.convertToFoundDocument(i.version,f).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,r,n):function(s,i,o){return dv(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,r)}function oV(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),s=PD(n.transform,a||null);s!=null&&(r===null&&(r=wo.empty()),r.set(n.field,s))}return r||null}function FB(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&G0(n,a,(s,i)=>aV(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Qg extends K2{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ef extends K2{constructor(e,r,n,a,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function VD(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function DB(t,e,r){const n=new Map;Fn(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let a=0;a<r.length;a++){const s=t[a],i=s.transform,o=e.data.field(s.field);n.set(s.field,rV(i,o,r[a]))}return n}function RB(t,e,r){const n=new Map;for(const a of t){const s=a.transform,i=r.data.field(a.field);n.set(a.field,tV(s,i,e))}return n}class W2 extends K2{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lV extends K2{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(e.key)&&iV(s,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Pp(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Pp(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=UD();return this.mutations.forEach(a=>{const s=e.get(a.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=r.has(a.key)?null:o;const c=HD(i,o);c!==null&&n.set(a.key,c),i.isValidDocument()||i.convertToNoDocument(Br.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),nn())}isEqual(e){return this.batchId===e.batchId&&G0(this.mutations,e.mutations,(r,n)=>FB(r,n))&&G0(this.baseMutations,e.baseMutations,(r,n)=>FB(r,n))}}class T_{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){Fn(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let a=function(){return J9}();const s=e.mutations;for(let i=0;i<s.length;i++)a=a.insert(s[i].key,n[i].version);return new T_(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var As,dn;function dV(t){switch(t){case ft.OK:return yr(64938);case ft.CANCELLED:case ft.UNKNOWN:case ft.DEADLINE_EXCEEDED:case ft.RESOURCE_EXHAUSTED:case ft.INTERNAL:case ft.UNAVAILABLE:case ft.UNAUTHENTICATED:return!1;case ft.INVALID_ARGUMENT:case ft.NOT_FOUND:case ft.ALREADY_EXISTS:case ft.PERMISSION_DENIED:case ft.FAILED_PRECONDITION:case ft.ABORTED:case ft.OUT_OF_RANGE:case ft.UNIMPLEMENTED:case ft.DATA_LOSS:return!0;default:return yr(15467,{code:t})}}function GD(t){if(t===void 0)return pu("GRPC error has no .code"),ft.UNKNOWN;switch(t){case As.OK:return ft.OK;case As.CANCELLED:return ft.CANCELLED;case As.UNKNOWN:return ft.UNKNOWN;case As.DEADLINE_EXCEEDED:return ft.DEADLINE_EXCEEDED;case As.RESOURCE_EXHAUSTED:return ft.RESOURCE_EXHAUSTED;case As.INTERNAL:return ft.INTERNAL;case As.UNAVAILABLE:return ft.UNAVAILABLE;case As.UNAUTHENTICATED:return ft.UNAUTHENTICATED;case As.INVALID_ARGUMENT:return ft.INVALID_ARGUMENT;case As.NOT_FOUND:return ft.NOT_FOUND;case As.ALREADY_EXISTS:return ft.ALREADY_EXISTS;case As.PERMISSION_DENIED:return ft.PERMISSION_DENIED;case As.FAILED_PRECONDITION:return ft.FAILED_PRECONDITION;case As.ABORTED:return ft.ABORTED;case As.OUT_OF_RANGE:return ft.OUT_OF_RANGE;case As.UNIMPLEMENTED:return ft.UNIMPLEMENTED;case As.DATA_LOSS:return ft.DATA_LOSS;default:return yr(39323,{code:t})}}(dn=As||(As={}))[dn.OK=0]="OK",dn[dn.CANCELLED=1]="CANCELLED",dn[dn.UNKNOWN=2]="UNKNOWN",dn[dn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dn[dn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dn[dn.NOT_FOUND=5]="NOT_FOUND",dn[dn.ALREADY_EXISTS=6]="ALREADY_EXISTS",dn[dn.PERMISSION_DENIED=7]="PERMISSION_DENIED",dn[dn.UNAUTHENTICATED=16]="UNAUTHENTICATED",dn[dn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dn[dn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dn[dn.ABORTED=10]="ABORTED",dn[dn.OUT_OF_RANGE=11]="OUT_OF_RANGE",dn[dn.UNIMPLEMENTED=12]="UNIMPLEMENTED",dn[dn.INTERNAL=13]="INTERNAL",dn[dn.UNAVAILABLE=14]="UNAVAILABLE",dn[dn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV=new Id([4294967295,4294967295],0);function LB(t){const e=fV().encode(t),r=new sD;return r.update(e),new Uint8Array(r.digest())}function UB(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Id([r,n],0),new Id([a,s],0)]}class B_{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new vp(`Invalid padding: ${r}`);if(n<0)throw new vp(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new vp(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new vp(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=Id.fromNumber(this.ge)}ye(e,r,n){let a=e.add(r.multiply(Id.fromNumber(n)));return a.compare(hV)===1&&(a=new Id([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=LB(e),[n,a]=UB(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);if(!this.we(i))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new B_(s,a,r);return n.forEach(o=>i.insert(o)),i}insert(e){if(this.ge===0)return;const r=LB(e),[n,a]=UB(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);this.Se(i)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class vp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,r,n,a,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,Hg.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new $2(Br.min(),a,new _a(rn),gu(),nn())}}class Hg{constructor(e,r,n,a,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Hg(n,r,nn(),nn(),nn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e,r,n,a){this.be=e,this.removedTargetIds=r,this.key=n,this.De=a}}class zD{constructor(e,r){this.targetId=e,this.Ce=r}}class qD{constructor(e,r,n=oi.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class MB{constructor(){this.ve=0,this.Fe=PB(),this.Me=oi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=nn(),r=nn(),n=nn();return this.Fe.forEach((a,s)=>{switch(s){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:yr(38017,{changeType:s})}}),new Hg(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=PB()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Fn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class mV{constructor(e){this.Ge=e,this.ze=new Map,this.je=gu(),this.Je=f1(),this.He=f1(),this.Ye=new _a(rn)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:yr(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((n,a)=>{this.rt(a)&&r(a)})}st(e){const r=e.targetId,n=e.Ce.count,a=this.ot(r);if(a){const s=a.target;if(RC(s))if(n===0){const i=new lr(s.path);this.et(r,i,Ii.newNoDocument(i,Br.min()))}else Fn(n===1,20013,{expectedCount:n});else{const i=this._t(r);if(i!==n){const o=this.ut(e),c=o?this.ct(o,e,i):1;if(c!==0){this.it(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,u)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let i,o;try{i=Qd(n).toUint8Array()}catch(c){if(c instanceof gD)return V0("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new B_(i,a,s)}catch(c){return V0(c instanceof vp?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.ge===0?null:o}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const i=this.Ge.ht(),o=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.et(r,s,null),a++)}),a}Tt(e){const r=new Map;this.ze.forEach((s,i)=>{const o=this.ot(i);if(o){if(s.current&&RC(o.target)){const c=new lr(o.target.path);this.It(c).has(i)||this.Et(i,c)||this.et(i,c,Ii.newNoDocument(c,e))}s.Be&&(r.set(i,s.ke()),s.qe())}});let n=nn();this.He.forEach((s,i)=>{let o=!0;i.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(s))}),this.je.forEach((s,i)=>i.setReadTime(e));const a=new $2(e,r,this.Ye,this.je,n);return this.je=gu(),this.Je=f1(),this.He=f1(),this.Ye=new _a(rn),a}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,r)?a.Qe(r,1):a.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new MB,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new Ts(rn),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new Ts(rn),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||Jt("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new MB),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function f1(){return new _a(lr.comparator)}function PB(){return new _a(lr.comparator)}const pV={asc:"ASCENDING",desc:"DESCENDING"},gV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xV={and:"AND",or:"OR"};class vV{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function UC(t,e){return t.useProto3Json||Q2(e)?e:{value:e}}function Hv(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KD(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function wV(t,e){return Hv(t,e.toTimestamp())}function hA(t){return Fn(!!t,49232),Br.fromTimestamp(function(r){const n=Od(r);return new Ar(n.seconds,n.nanos)}(t))}function N_(t,e){return MC(t,e).canonicalString()}function MC(t,e){const r=function(a){return new na(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?r:r.child(e)}function WD(t){const e=na.fromString(t);return Fn(ZD(e),10190,{key:e.toString()}),e}function PC(t,e){return N_(t.databaseId,e.path)}function lb(t,e){const r=WD(e);if(r.get(1)!==t.databaseId.projectId)throw new Vt(ft.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Vt(ft.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new lr(JD(r))}function $D(t,e){return N_(t.databaseId,e)}function yV(t){const e=WD(t);return e.length===4?na.emptyPath():JD(e)}function jC(t){return new na(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function JD(t){return Fn(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function jB(t,e,r){return{name:PC(t,e),fields:r.value.mapValue.fields}}function bV(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:yr(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],s=function(u,f){return u.useProto3Json?(Fn(f===void 0||typeof f=="string",58123),oi.fromBase64String(f||"")):(Fn(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),oi.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,o=i&&function(u){const f=u.code===void 0?ft.UNKNOWN:GD(u.code);return new Vt(f,u.message||"")}(i);r=new qD(n,a,s,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=lb(t,n.document.name),s=hA(n.document.updateTime),i=n.document.createTime?hA(n.document.createTime):Br.min(),o=new wo({mapValue:{fields:n.document.fields}}),c=Ii.newFoundDocument(a,s,i,o),u=n.targetIds||[],f=n.removedTargetIds||[];r=new fv(u,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=lb(t,n.document),s=n.readTime?hA(n.readTime):Br.min(),i=Ii.newNoDocument(a,s),o=n.removedTargetIds||[];r=new fv([],o,i.key,i)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=lb(t,n.document),s=n.removedTargetIds||[];r=new fv([],s,a,null)}else{if(!("filter"in e))return yr(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,i=new uV(a,s),o=n.targetId;r=new zD(o,i)}}return r}function CV(t,e){let r;if(e instanceof Qg)r={update:jB(t,e.key,e.value)};else if(e instanceof W2)r={delete:PC(t,e.key)};else if(e instanceof ef)r={update:jB(t,e.key,e.data),updateMask:FV(e.fieldMask)};else{if(!(e instanceof lV))return yr(16599,{Vt:e.type});r={verify:PC(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(s,i){const o=i.transform;if(o instanceof Ov)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof K0)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof dg)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Qv)return{fieldPath:i.field.canonicalString(),increment:o.Ae};throw yr(20930,{transform:i.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:wV(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:yr(27497)}(t,e.precondition)),r}function EV(t,e){return t&&t.length>0?(Fn(e!==void 0,14353),t.map(r=>function(a,s){let i=a.updateTime?hA(a.updateTime):hA(s);return i.isEqual(Br.min())&&(i=hA(s)),new sV(i,a.transformResults||[])}(r,e))):[]}function _V(t,e){return{documents:[$D(t,e.path)]}}function SV(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=$D(t,a);const s=function(u){if(u.length!==0)return XD(yc.create(u,"and"))}(e.filters);s&&(r.structuredQuery.where=s);const i=function(u){if(u.length!==0)return u.map(f=>function(p){return{field:f0(p.field),direction:NV(p.dir)}}(f))}(e.orderBy);i&&(r.structuredQuery.orderBy=i);const o=UC(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:r,parent:a}}function TV(t){let e=yV(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){Fn(n===1,65062);const f=r.from[0];f.allDescendants?a=f.collectionId:e=e.child(f.collectionId)}let s=[];r.where&&(s=function(m){const p=YD(m);return p instanceof yc&&TD(p)?p.getFilters():[p]}(r.where));let i=[];r.orderBy&&(i=function(m){return m.map(p=>function(b){return new ug(h0(b.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(p))}(r.orderBy));let o=null;r.limit&&(o=function(m){let p;return p=typeof m=="object"?m.value:m,Q2(p)?null:p}(r.limit));let c=null;r.startAt&&(c=function(m){const p=!!m.before,g=m.values||[];return new Pv(g,p)}(r.startAt));let u=null;return r.endAt&&(u=function(m){const p=!m.before,g=m.values||[];return new Pv(g,p)}(r.endAt)),z9(e,a,i,s,o,"F",c,u)}function BV(t,e){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yr(28987,{purpose:a})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function YD(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=h0(r.unaryFilter.field);return hs.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=h0(r.unaryFilter.field);return hs.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=h0(r.unaryFilter.field);return hs.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=h0(r.unaryFilter.field);return hs.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return yr(61313);default:return yr(60726)}}(t):t.fieldFilter!==void 0?function(r){return hs.create(h0(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return yr(58110);default:return yr(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return yc.create(r.compositeFilter.filters.map(n=>YD(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return yr(1026)}}(r.compositeFilter.op))}(t):yr(30097,{filter:t})}function NV(t){return pV[t]}function kV(t){return gV[t]}function IV(t){return xV[t]}function f0(t){return{fieldPath:t.canonicalString()}}function h0(t){return ai.fromServerFormat(t.fieldPath)}function XD(t){return t instanceof hs?function(r){if(r.op==="=="){if(SB(r.value))return{unaryFilter:{field:f0(r.field),op:"IS_NAN"}};if(_B(r.value))return{unaryFilter:{field:f0(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(SB(r.value))return{unaryFilter:{field:f0(r.field),op:"IS_NOT_NAN"}};if(_B(r.value))return{unaryFilter:{field:f0(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:f0(r.field),op:kV(r.op),value:r.value}}}(t):t instanceof yc?function(r){const n=r.getFilters().map(a=>XD(a));return n.length===1?n[0]:{compositeFilter:{op:IV(r.op),filters:n}}}(t):yr(54877,{filter:t})}function FV(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function ZD(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,r,n,a,s=Br.min(),i=Br.min(),o=oi.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new yd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new yd(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(e){this.yt=e}}function RV(t){const e=TV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?jv(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(){this.Cn=new UV}addToCollectionParentIndex(e,r){return this.Cn.add(r),wt.resolve()}getCollectionParents(e,r){return wt.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return wt.resolve()}deleteFieldIndex(e,r){return wt.resolve()}deleteAllFieldIndexes(e){return wt.resolve()}createTargetIndexes(e,r){return wt.resolve()}getDocumentsMatchingTarget(e,r){return wt.resolve(null)}getIndexType(e,r){return wt.resolve(0)}getFieldIndexes(e,r){return wt.resolve([])}getNextCollectionGroupToUpdate(e){return wt.resolve(null)}getMinOffset(e,r){return wt.resolve(jd.min())}getMinOffsetFromCollectionGroup(e,r){return wt.resolve(jd.min())}updateCollectionGroup(e,r,n){return wt.resolve()}updateIndexEntries(e,r){return wt.resolve()}}class UV{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new Ts(na.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new Ts(na.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OB={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},eR=41943040;class xo{static withCacheSize(e){return new xo(e,xo.DEFAULT_COLLECTION_PERCENTILE,xo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xo.DEFAULT_COLLECTION_PERCENTILE=10,xo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xo.DEFAULT=new xo(eR,xo.DEFAULT_COLLECTION_PERCENTILE,xo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xo.DISABLED=new xo(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new W0(0)}static cr(){return new W0(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QB="LruGarbageCollector",MV=1048576;function HB([t,e],[r,n]){const a=rn(t,r);return a===0?rn(e,n):a}class PV{constructor(e){this.Ir=e,this.buffer=new Ts(HB),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();HB(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class jV{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Jt(QB,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){im(r)?Jt(QB,"Ignoring IndexedDB error during garbage collection: ",r):await sm(r)}await this.Vr(3e5)})}}class OV{constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return wt.resolve(O2.ce);const n=new PV(r);return this.mr.forEachTarget(e,a=>n.Ar(a.sequenceNumber)).next(()=>this.mr.pr(e,a=>n.Ar(a))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Jt("LruGarbageCollector","Garbage collection skipped; disabled"),wt.resolve(OB)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Jt("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),OB):this.yr(e,r))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,a,s,i,o,c,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Jt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),a=this.params.maximumSequenceNumbersToCollect):a=m,i=Date.now(),this.nthSequenceNumber(e,a))).next(m=>(n=m,o=Date.now(),this.removeTargets(e,n,r))).next(m=>(s=m,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(m=>(u=Date.now(),u0()<=tn.DEBUG&&Jt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-f}ms
	Determined least recently used ${a} in `+(o-i)+`ms
	Removed ${s} targets in `+(c-o)+`ms
	Removed ${m} documents in `+(u-c)+`ms
Total Duration: ${u-f}ms`),wt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:m})))}}function QV(t,e){return new OV(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(){this.changes=new ch(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Ii.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?wt.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(e,r))).next(a=>(n!==null&&Pp(n.mutation,a,$o.empty(),Ar.now()),a))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,nn()).next(()=>n))}getLocalViewOfDocuments(e,r,n=nn()){const a=Uf();return this.populateOverlays(e,a,r).next(()=>this.computeViews(e,r,a,n).next(s=>{let i=xp();return s.forEach((o,c)=>{i=i.insert(o,c.overlayedDocument)}),i}))}getOverlayedDocuments(e,r){const n=Uf();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,nn()))}populateOverlays(e,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(e,a).next(s=>{s.forEach((i,o)=>{r.set(i,o)})})}computeViews(e,r,n,a){let s=gu();const i=Mp(),o=function(){return Mp()}();return r.forEach((c,u)=>{const f=n.get(u.key);a.has(u.key)&&(f===void 0||f.mutation instanceof ef)?s=s.insert(u.key,u):f!==void 0?(i.set(u.key,f.mutation.getFieldMask()),Pp(f.mutation,u,f.mutation.getFieldMask(),Ar.now())):i.set(u.key,$o.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,f)=>i.set(u,f)),r.forEach((u,f)=>o.set(u,new VV(f,i.get(u)??null))),o))}recalculateAndSaveOverlays(e,r){const n=Mp();let a=new _a((i,o)=>i-o),s=nn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(i=>{for(const o of i)o.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let f=n.get(c)||$o.empty();f=o.applyToLocalView(u,f),n.set(c,f);const m=(a.get(o.batchId)||nn()).add(c);a=a.insert(o.batchId,m)})}).next(()=>{const i=[],o=a.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),u=c.key,f=c.value,m=UD();f.forEach(p=>{if(!s.has(p)){const g=HD(r.get(p),n.get(p));g!==null&&m.set(p,g),s=s.add(p)}}),i.push(this.documentOverlayCache.saveOverlays(e,u,m))}return wt.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,a){return function(i){return lr.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):ID(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next(s=>{const i=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-s.size):wt.resolve(Uf());let o=og,c=s;return i.next(u=>wt.forEach(u,(f,m)=>(o<m.largestBatchId&&(o=m.largestBatchId),s.get(f)?wt.resolve():this.remoteDocumentCache.getEntry(e,f).next(p=>{c=c.insert(f,p)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,nn())).next(f=>({batchId:o,changes:LD(f)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new lr(r)).next(n=>{let a=xp();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const s=r.collectionGroup;let i=xp();return this.indexManager.getCollectionParents(e,s).next(o=>wt.forEach(o,c=>{const u=function(m,p){return new om(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,n,a).next(f=>{f.forEach((m,p)=>{i=i.insert(m,p)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,a))).next(i=>{s.forEach((c,u)=>{const f=u.getKey();i.get(f)===null&&(i=i.insert(f,Ii.newInvalidDocument(f)))});let o=xp();return i.forEach((c,u)=>{const f=s.get(c);f!==void 0&&Pp(f.mutation,u,$o.empty(),Ar.now()),z2(r,u)&&(o=o.insert(c,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return wt.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:hA(a.createTime)}}(r)),wt.resolve()}getNamedQuery(e,r){return wt.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,function(a){return{name:a.name,query:RV(a.bundledQuery),readTime:hA(a.readTime)}}(r)),wt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(){this.overlays=new _a(lr.comparator),this.qr=new Map}getOverlay(e,r){return wt.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Uf();return wt.forEach(r,a=>this.getOverlay(e,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((a,s)=>{this.St(e,r,s)}),wt.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(n)),wt.resolve()}getOverlaysForCollection(e,r,n){const a=Uf(),s=r.length+1,i=new lr(r.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const c=o.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&a.set(c.getKey(),c)}return wt.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let s=new _a((u,f)=>u-f);const i=this.overlays.getIterator();for(;i.hasNext();){const u=i.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let f=s.get(u.largestBatchId);f===null&&(f=Uf(),s=s.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const o=Uf(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,f)=>o.set(u,f)),!(o.size()>=a)););return wt.resolve(o)}St(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const i=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new AV(r,n));let s=this.qr.get(r);s===void 0&&(s=nn(),this.qr.set(r,s)),this.qr.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(){this.sessionToken=oi.EMPTY_BYTE_STRING}getSessionToken(e){return wt.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,wt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(){this.Qr=new Ts(Os.$r),this.Ur=new Ts(Os.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new Os(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Gr(new Os(e,r))}zr(e,r){e.forEach(n=>this.removeReference(n,r))}jr(e){const r=new lr(new na([])),n=new Os(r,e),a=new Os(r,e+1),s=[];return this.Ur.forEachInRange([n,a],i=>{this.Gr(i),s.push(i.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new lr(new na([])),n=new Os(r,e),a=new Os(r,e+1);let s=nn();return this.Ur.forEachInRange([n,a],i=>{s=s.add(i.key)}),s}containsKey(e){const r=new Os(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Os{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return lr.comparator(e.key,r.key)||rn(e.Yr,r.Yr)}static Kr(e,r){return rn(e.Yr,r.Yr)||lr.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Ts(Os.$r)}checkEmpty(e){return wt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new cV(s,r,n,a);this.mutationQueue.push(i);for(const o of a)this.Zr=this.Zr.add(new Os(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return wt.resolve(i)}lookupMutationBatch(e,r){return wt.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.ei(n),s=a<0?0:a;return wt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return wt.resolve(this.mutationQueue.length===0?y_:this.tr-1)}getAllMutationBatches(e){return wt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Os(r,0),a=new Os(r,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,a],i=>{const o=this.Xr(i.Yr);s.push(o)}),wt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Ts(rn);return r.forEach(a=>{const s=new Os(a,0),i=new Os(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,i],o=>{n=n.add(o.Yr)})}),wt.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let s=n;lr.isDocumentKey(s)||(s=s.child(""));const i=new Os(new lr(s),0);let o=new Ts(rn);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(o=o.add(c.Yr)),!0)},i),wt.resolve(this.ti(o))}ti(e){const r=[];return e.forEach(n=>{const a=this.Xr(n);a!==null&&r.push(a)}),r}removeMutationBatch(e,r){Fn(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return wt.forEach(r.mutations,a=>{const s=new Os(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,r){const n=new Os(r,0),a=this.Zr.firstAfterOrEqual(n);return wt.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,wt.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(e){this.ri=e,this.docs=function(){return new _a(lr.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,i=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return wt.resolve(n?n.document.mutableCopy():Ii.newInvalidDocument(r))}getEntries(e,r){let n=gu();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():Ii.newInvalidDocument(a))}),wt.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let s=gu();const i=r.path,o=new lr(i.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:u,value:{document:f}}=c.getNext();if(!i.isPrefixOf(u.path))break;u.path.length>i.length+1||C9(b9(f),n)<=0||(a.has(f.key)||z2(r,f))&&(s=s.insert(f.key,f.mutableCopy()))}return wt.resolve(s)}getAllFromCollectionGroup(e,r,n,a){yr(9500)}ii(e,r){return wt.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new JV(this)}getSize(e){return wt.resolve(this.size)}}class JV extends HV{constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(n)}),wt.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e){this.persistence=e,this.si=new ch(r=>E_(r),__),this.lastRemoteSnapshotVersion=Br.min(),this.highestTargetId=0,this.oi=0,this._i=new k_,this.targetCount=0,this.ai=W0.ur()}forEachTarget(e,r){return this.si.forEach((n,a)=>r(a)),wt.resolve()}getLastRemoteSnapshotVersion(e){return wt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return wt.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),wt.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),wt.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new W0(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,wt.resolve()}updateTargetData(e,r){return this.Pr(r),wt.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,wt.resolve()}removeTargets(e,r,n){let a=0;const s=[];return this.si.forEach((i,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.si.delete(i),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),a++)}),wt.waitFor(s).next(()=>a)}getTargetCount(e){return wt.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return wt.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),wt.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(i=>{s.push(a.markPotentiallyOrphaned(e,i))}),wt.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),wt.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return wt.resolve(n)}containsKey(e,r){return wt.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,r){this.ui={},this.overlays={},this.ci=new O2(0),this.li=!1,this.li=!0,this.hi=new KV,this.referenceDelegate=e(this),this.Pi=new YV(this),this.indexManager=new LV,this.remoteDocumentCache=function(a){return new $V(a)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new DV(r),this.Ii=new zV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new qV,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new WV(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){Jt("MemoryPersistence","Starting transaction:",e);const a=new XV(this.ci.next());return this.referenceDelegate.Ei(),n(a).next(s=>this.referenceDelegate.di(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Ai(e,r){return wt.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,r)))}}class XV extends _9{constructor(e){super(),this.currentSequenceNumber=e}}class I_{constructor(e){this.persistence=e,this.Ri=new k_,this.Vi=null}static mi(e){return new I_(e)}get fi(){if(this.Vi)return this.Vi;throw yr(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),wt.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),wt.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),wt.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach(a=>this.fi.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(a=>{a.forEach(s=>this.fi.add(s.toString()))}).next(()=>n.removeTargetData(e,r))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return wt.forEach(this.fi,n=>{const a=lr.fromPath(n);return this.gi(e,a).next(s=>{s||r.removeEntry(a,Br.min())})}).next(()=>(this.Vi=null,r.apply(e)))}updateLimboDocument(e,r){return this.gi(e,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(e){return 0}gi(e,r){return wt.or([()=>wt.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class Vv{constructor(e,r){this.persistence=e,this.pi=new ch(n=>B9(n.path),(n,a)=>n.isEqual(a)),this.garbageCollector=QV(this,r)}static mi(e,r){return new Vv(e,r)}Ei(){}di(e){return wt.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(a=>n+a))}wr(e){let r=0;return this.pr(e,n=>{r++}).next(()=>r)}pr(e,r){return wt.forEach(this.pi,(n,a)=>this.br(e,n,a).next(s=>s?wt.resolve():r(a)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const a=this.persistence.getRemoteDocumentCache(),s=a.newChangeBuffer();return a.ii(e,i=>this.br(e,i,r).next(o=>{o||(n++,s.removeEntry(i,Br.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),wt.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),wt.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),wt.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),wt.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Av(e.data.value)),r}br(e,r,n){return wt.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const a=this.pi.get(r);return wt.resolve(a!==void 0&&a>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=a}static As(e,r){let n=nn(),a=nn();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new F_(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eG{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return TO()?8:S9(Pi())>0?6:4}()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,a){const s={result:null};return this.ys(e,r).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.ws(e,r,a,n).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new ZV;return this.Ss(e,r,i).next(o=>{if(s.result=o,this.Vs)return this.bs(e,r,i,o.size)})}).next(()=>s.result)}bs(e,r,n,a){return n.documentReadCount<this.fs?(u0()<=tn.DEBUG&&Jt("QueryEngine","SDK will not create cache indexes for query:",d0(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),wt.resolve()):(u0()<=tn.DEBUG&&Jt("QueryEngine","Query:",d0(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?(u0()<=tn.DEBUG&&Jt("QueryEngine","The SDK decides to create cache indexes for query:",d0(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fA(r))):wt.resolve())}ys(e,r){if(kB(r))return wt.resolve(null);let n=fA(r);return this.indexManager.getIndexType(e,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=jv(r,null,"F"),n=fA(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const i=nn(...s);return this.ps.getDocuments(e,i).next(o=>this.indexManager.getMinOffset(e,n).next(c=>{const u=this.Ds(r,o);return this.Cs(r,u,i,c.readTime)?this.ys(e,jv(r,null,"F")):this.vs(e,u,r,c)}))})))}ws(e,r,n,a){return kB(r)||a.isEqual(Br.min())?wt.resolve(null):this.ps.getDocuments(e,n).next(s=>{const i=this.Ds(r,s);return this.Cs(r,i,n,a)?wt.resolve(null):(u0()<=tn.DEBUG&&Jt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),d0(r)),this.vs(e,i,r,y9(a,og)).next(o=>o))})}Ds(e,r){let n=new Ts(DD(e));return r.forEach((a,s)=>{z2(e,s)&&(n=n.add(s))}),n}Cs(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Ss(e,r,n){return u0()<=tn.DEBUG&&Jt("QueryEngine","Using full collection scan to execute query:",d0(r)),this.ps.getDocumentsMatchingQuery(e,r,jd.min(),n)}vs(e,r,n,a){return this.ps.getDocumentsMatchingQuery(e,n,a).next(s=>(r.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_="LocalStore",tG=3e8;class rG{constructor(e,r,n,a){this.persistence=e,this.Fs=r,this.serializer=a,this.Ms=new _a(rn),this.xs=new ch(s=>E_(s),__),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GV(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ms))}}function nG(t,e,r,n){return new rG(t,e,r,n)}async function rR(t,e){const r=kr(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.Bs(e),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const i=[],o=[];let c=nn();for(const u of a){i.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}for(const u of s){o.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}return r.localDocuments.getDocuments(n,c).next(u=>({Ls:u,removedBatchIds:i,addedBatchIds:o}))})})}function aG(t,e){const r=kr(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=e.batch.keys(),s=r.Ns.newChangeBuffer({trackRemovals:!0});return function(o,c,u,f){const m=u.batch,p=m.keys();let g=wt.resolve();return p.forEach(b=>{g=g.next(()=>f.getEntry(c,b)).next(y=>{const T=u.docVersions.get(b);Fn(T!==null,48541),y.version.compareTo(T)<0&&(m.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),f.addEntry(y)))})}),g.next(()=>o.mutationQueue.removeMutationBatch(c,m))}(r,n,e,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let c=nn();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(c=c.add(o.batch.mutations[u].key));return c}(e))).next(()=>r.localDocuments.getDocuments(n,a))})}function nR(t){const e=kr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Pi.getLastRemoteSnapshotVersion(r))}function sG(t,e){const r=kr(t),n=e.snapshotVersion;let a=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=r.Ns.newChangeBuffer({trackRemovals:!0});a=r.Ms;const o=[];e.targetChanges.forEach((f,m)=>{const p=a.get(m);if(!p)return;o.push(r.Pi.removeMatchingKeys(s,f.removedDocuments,m).next(()=>r.Pi.addMatchingKeys(s,f.addedDocuments,m)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?g=g.withResumeToken(oi.EMPTY_BYTE_STRING,Br.min()).withLastLimboFreeSnapshotVersion(Br.min()):f.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(f.resumeToken,n)),a=a.insert(m,g),function(y,T,k){return y.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=tG?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(p,g,f)&&o.push(r.Pi.updateTargetData(s,g))});let c=gu(),u=nn();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(s,f))}),o.push(iG(s,i,e.documentUpdates).next(f=>{c=f.ks,u=f.qs})),!n.isEqual(Br.min())){const f=r.Pi.getLastRemoteSnapshotVersion(s).next(m=>r.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n));o.push(f)}return wt.waitFor(o).next(()=>i.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(r.Ms=a,s))}function iG(t,e,r){let n=nn(),a=nn();return r.forEach(s=>n=n.add(s)),e.getEntries(t,n).next(s=>{let i=gu();return r.forEach((o,c)=>{const u=s.get(o);c.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(o)),c.isNoDocument()&&c.version.isEqual(Br.min())?(e.removeEntry(o,c.readTime),i=i.insert(o,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),i=i.insert(o,c)):Jt(D_,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",c.version)}),{ks:i,qs:a}})}function oG(t,e){const r=kr(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=y_),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function lG(t,e){const r=kr(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Pi.getTargetData(n,e).next(s=>s?(a=s,wt.resolve(a)):r.Pi.allocateTargetId(n).next(i=>(a=new yd(e,i,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n})}async function OC(t,e,r){const n=kr(t),a=n.Ms.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,i=>n.persistence.referenceDelegate.removeTarget(i,a))}catch(i){if(!im(i))throw i;Jt(D_,`Failed to update sequence numbers for target ${e}: ${i}`)}n.Ms=n.Ms.remove(e),n.xs.delete(a.target)}function VB(t,e,r){const n=kr(t);let a=Br.min(),s=nn();return n.persistence.runTransaction("Execute query","readwrite",i=>function(c,u,f){const m=kr(c),p=m.xs.get(f);return p!==void 0?wt.resolve(m.Ms.get(p)):m.Pi.getTargetData(u,f)}(n,i,fA(e)).next(o=>{if(o)return a=o.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(i,o.targetId).next(c=>{s=c})}).next(()=>n.Fs.getDocumentsMatchingQuery(i,e,r?a:Br.min(),r?s:nn())).next(o=>(cG(n,K9(e),o),{documents:o,Qs:s})))}function cG(t,e,r){let n=t.Os.get(e)||Br.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),t.Os.set(e,n)}class GB{constructor(){this.activeTargetIds=Z9()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class AG{constructor(){this.Mo=new GB,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new GB,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uG{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zB="ConnectivityMonitor";class qB{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Jt(zB,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Jt(zB,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h1=null;function QC(){return h1===null?h1=function(){return 268435456+Math.round(2147483648*Math.random())}():h1++,"0x"+h1.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb="RestConnection",dG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fG{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===Uv?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(e,r,n,a,s){const i=QC(),o=this.zo(e,r.toUriEncodedString());Jt(cb,`Sending RPC '${e}' ${i}:`,o,n);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,a,s);const{host:u}=new URL(o),f=oh(u);return this.Jo(e,o,c,n,f).then(m=>(Jt(cb,`Received RPC '${e}' ${i}: `,m),m),m=>{throw V0(cb,`RPC '${e}' ${i} failed with error: `,m,"url: ",o,"request:",n),m})}Ho(e,r,n,a,s,i){return this.Go(e,r,n,a,s)}jo(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+am}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,s)=>e[s]=a),n&&n.headers.forEach((a,s)=>e[s]=a)}zo(e,r){const n=dG[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hG{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi="WebChannelConnection";class mG extends fG{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,a,s){const i=QC();return new Promise((o,c)=>{const u=new iD;u.setWithCredentials(!0),u.listenOnce(oD.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case cv.NO_ERROR:const m=u.getResponseJson();Jt(wi,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(m)),o(m);break;case cv.TIMEOUT:Jt(wi,`RPC '${e}' ${i} timed out`),c(new Vt(ft.DEADLINE_EXCEEDED,"Request time out"));break;case cv.HTTP_ERROR:const p=u.getStatus();if(Jt(wi,`RPC '${e}' ${i} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const b=g==null?void 0:g.error;if(b&&b.status&&b.message){const y=function(k){const D=k.toLowerCase().replace(/_/g,"-");return Object.values(ft).indexOf(D)>=0?D:ft.UNKNOWN}(b.status);c(new Vt(y,b.message))}else c(new Vt(ft.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Vt(ft.UNAVAILABLE,"Connection failed."));break;default:yr(9055,{l_:e,streamId:i,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Jt(wi,`RPC '${e}' ${i} completed.`)}});const f=JSON.stringify(a);Jt(wi,`RPC '${e}' ${i} sending request:`,a),u.send(r,"POST",f,n,15)})}T_(e,r,n){const a=QC(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=AD(),o=cD(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const f=s.join("");Jt(wi,`Creating RPC '${e}' stream ${a}: ${f}`,c);const m=i.createWebChannel(f,c);this.I_(m);let p=!1,g=!1;const b=new hG({Yo:T=>{g?Jt(wi,`Not sending because RPC '${e}' stream ${a} is closed:`,T):(p||(Jt(wi,`Opening RPC '${e}' stream ${a} transport.`),m.open(),p=!0),Jt(wi,`RPC '${e}' stream ${a} sending:`,T),m.send(T))},Zo:()=>m.close()}),y=(T,k,D)=>{T.listen(k,L=>{try{D(L)}catch(j){setTimeout(()=>{throw j},0)}})};return y(m,gp.EventType.OPEN,()=>{g||(Jt(wi,`RPC '${e}' stream ${a} transport opened.`),b.o_())}),y(m,gp.EventType.CLOSE,()=>{g||(g=!0,Jt(wi,`RPC '${e}' stream ${a} transport closed`),b.a_(),this.E_(m))}),y(m,gp.EventType.ERROR,T=>{g||(g=!0,V0(wi,`RPC '${e}' stream ${a} transport errored. Name:`,T.name,"Message:",T.message),b.a_(new Vt(ft.UNAVAILABLE,"The operation could not be completed")))}),y(m,gp.EventType.MESSAGE,T=>{var k;if(!g){const D=T.data[0];Fn(!!D,16349);const L=D,j=(L==null?void 0:L.error)||((k=L[0])==null?void 0:k.error);if(j){Jt(wi,`RPC '${e}' stream ${a} received error:`,j);const H=j.status;let U=function(B){const Q=As[B];if(Q!==void 0)return GD(Q)}(H),E=j.message;U===void 0&&(U=ft.INTERNAL,E="Unknown error status: "+H+" with message "+j.message),g=!0,b.a_(new Vt(U,E)),m.close()}else Jt(wi,`RPC '${e}' stream ${a} received:`,D),b.u_(D)}}),y(o,lD.STAT_EVENT,T=>{T.stat===NC.PROXY?Jt(wi,`RPC '${e}' stream ${a} detected buffering proxy`):T.stat===NC.NOPROXY&&Jt(wi,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(r=>r===e)}}function Ab(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(t){return new vV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,r,n=1e3,a=1.5,s=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=a,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,r-n);a>0&&Jt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KB="PersistentStream";class sR{constructor(e,r,n,a,s,i,o,c){this.Mi=e,this.S_=n,this.b_=a,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new aR(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===ft.RESOURCE_EXHAUSTED?(pu(r.toString()),pu("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===ft.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.D_===r&&this.G_(n,a)},n=>{e(()=>{const a=new Vt(ft.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)})})}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{n(()=>this.z_(a))}),this.stream.onMessage(a=>{n(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Jt(KB,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget(()=>this.D_===e?r():(Jt(KB,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pG extends sR{constructor(e,r,n,a,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=bV(this.serializer,e),n=function(s){if(!("targetChange"in s))return Br.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?Br.min():i.readTime?hA(i.readTime):Br.min()}(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=jC(this.serializer),r.addTarget=function(s,i){let o;const c=i.target;if(o=RC(c)?{documents:_V(s,c)}:{query:SV(s,c).ft},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=KD(s,i.resumeToken);const u=UC(s,i.expectedCount);u!==null&&(o.expectedCount=u)}else if(i.snapshotVersion.compareTo(Br.min())>0){o.readTime=Hv(s,i.snapshotVersion.toTimestamp());const u=UC(s,i.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const n=BV(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=jC(this.serializer),r.removeTarget=e,this.q_(r)}}class gG extends sR{constructor(e,r,n,a,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return Fn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Fn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Fn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=EV(e.writeResults,e.commitTime),n=hA(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=jC(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>CV(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xG{}class vG extends xG{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Vt(ft.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Go(e,MC(r,n),a,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ft.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Vt(ft.UNKNOWN,s.toString())})}Ho(e,r,n,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Ho(e,MC(r,n),a,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===ft.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Vt(ft.UNKNOWN,i.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class wG{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(pu(r),this.aa=!1):Jt("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf="RemoteStore";class yG{constructor(e,r,n,a,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(i=>{n.enqueueAndForget(async()=>{Ah(this)&&(Jt(Xf,"Restarting streams for network reachability change."),await async function(c){const u=kr(c);u.Ea.add(4),await Vg(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Y2(u)}(this))})}),this.Ra=new wG(n,a)}}async function Y2(t){if(Ah(t))for(const e of t.da)await e(!0)}async function Vg(t){for(const e of t.da)await e(!1)}function iR(t,e){const r=kr(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),M_(r)?U_(r):lm(r).O_()&&L_(r,e))}function R_(t,e){const r=kr(t),n=lm(r);r.Ia.delete(e),n.O_()&&oR(r,e),r.Ia.size===0&&(n.O_()?n.L_():Ah(r)&&r.Ra.set("Unknown"))}function L_(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Br.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}lm(t).Y_(e)}function oR(t,e){t.Va.Ue(e),lm(t).Z_(e)}function U_(t){t.Va=new mV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),lm(t).start(),t.Ra.ua()}function M_(t){return Ah(t)&&!lm(t).x_()&&t.Ia.size>0}function Ah(t){return kr(t).Ea.size===0}function lR(t){t.Va=void 0}async function bG(t){t.Ra.set("Online")}async function CG(t){t.Ia.forEach((e,r)=>{L_(t,e)})}async function EG(t,e){lR(t),M_(t)?(t.Ra.ha(e),U_(t)):t.Ra.set("Unknown")}async function _G(t,e,r){if(t.Ra.set("Online"),e instanceof qD&&e.state===2&&e.cause)try{await async function(a,s){const i=s.cause;for(const o of s.targetIds)a.Ia.has(o)&&(await a.remoteSyncer.rejectListen(o,i),a.Ia.delete(o),a.Va.removeTarget(o))}(t,e)}catch(n){Jt(Xf,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Gv(t,n)}else if(e instanceof fv?t.Va.Ze(e):e instanceof zD?t.Va.st(e):t.Va.tt(e),!r.isEqual(Br.min()))try{const n=await nR(t.localStore);r.compareTo(n)>=0&&await function(s,i){const o=s.Va.Tt(i);return o.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const f=s.Ia.get(u);f&&s.Ia.set(u,f.withResumeToken(c.resumeToken,i))}}),o.targetMismatches.forEach((c,u)=>{const f=s.Ia.get(c);if(!f)return;s.Ia.set(c,f.withResumeToken(oi.EMPTY_BYTE_STRING,f.snapshotVersion)),oR(s,c);const m=new yd(f.target,c,u,f.sequenceNumber);L_(s,m)}),s.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){Jt(Xf,"Failed to raise snapshot:",n),await Gv(t,n)}}async function Gv(t,e,r){if(!im(e))throw e;t.Ea.add(1),await Vg(t),t.Ra.set("Offline"),r||(r=()=>nR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Jt(Xf,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await Y2(t)})}function cR(t,e){return e().catch(r=>Gv(t,r,e))}async function X2(t){const e=kr(t),r=Vd(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:y_;for(;SG(e);)try{const a=await oG(e.localStore,n);if(a===null){e.Ta.length===0&&r.L_();break}n=a.batchId,TG(e,a)}catch(a){await Gv(e,a)}AR(e)&&uR(e)}function SG(t){return Ah(t)&&t.Ta.length<10}function TG(t,e){t.Ta.push(e);const r=Vd(t);r.O_()&&r.X_&&r.ea(e.mutations)}function AR(t){return Ah(t)&&!Vd(t).x_()&&t.Ta.length>0}function uR(t){Vd(t).start()}async function BG(t){Vd(t).ra()}async function NG(t){const e=Vd(t);for(const r of t.Ta)e.ea(r.mutations)}async function kG(t,e,r){const n=t.Ta.shift(),a=T_.from(n,e,r);await cR(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await X2(t)}async function IG(t,e){e&&Vd(t).X_&&await async function(n,a){if(function(i){return dV(i)&&i!==ft.ABORTED}(a.code)){const s=n.Ta.shift();Vd(n).B_(),await cR(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await X2(n)}}(t,e),AR(t)&&uR(t)}async function WB(t,e){const r=kr(t);r.asyncQueue.verifyOperationInProgress(),Jt(Xf,"RemoteStore received new credentials");const n=Ah(r);r.Ea.add(3),await Vg(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await Y2(r)}async function FG(t,e){const r=kr(t);e?(r.Ea.delete(2),await Y2(r)):e||(r.Ea.add(2),await Vg(r),r.Ra.set("Unknown"))}function lm(t){return t.ma||(t.ma=function(r,n,a){const s=kr(r);return s.sa(),new pG(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Xo:bG.bind(null,t),t_:CG.bind(null,t),r_:EG.bind(null,t),H_:_G.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),M_(t)?U_(t):t.Ra.set("Unknown")):(await t.ma.stop(),lR(t))})),t.ma}function Vd(t){return t.fa||(t.fa=function(r,n,a){const s=kr(r);return s.sa(),new gG(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:BG.bind(null,t),r_:IG.bind(null,t),ta:NG.bind(null,t),na:kG.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await X2(t)):(await t.fa.stop(),t.Ta.length>0&&(Jt(Xf,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e,r,n,a,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new lu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,s){const i=Date.now()+n,o=new P_(e,r,i,a,s);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Vt(ft.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function j_(t,e){if(pu("AsyncQueue",`${e}: ${t}`),im(t))return new Vt(ft.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{static emptySet(e){return new B0(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||lr.comparator(r.key,n.key):(r,n)=>lr.comparator(r.key,n.key),this.keyedMap=xp(),this.sortedSet=new _a(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof B0)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new B0;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(){this.ga=new _a(lr.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):yr(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,n)=>{e.push(n)}),e}}class $0{constructor(e,r,n,a,s,i,o,c,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,a,s){const i=[];return r.forEach(o=>{i.push({type:0,doc:o})}),new $0(e,r,B0.emptySet(r),i,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&G2(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DG{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class RG{constructor(){this.queries=JB(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const a=kr(r),s=a.queries;a.queries=JB(),s.forEach((i,o)=>{for(const c of o.Sa)c.onError(n)})})(this,new Vt(ft.ABORTED,"Firestore shutting down"))}}function JB(){return new ch(t=>FD(t),G2)}async function O_(t,e){const r=kr(t);let n=3;const a=e.query;let s=r.queries.get(a);s?!s.ba()&&e.Da()&&(n=2):(s=new DG,n=e.Da()?0:1);try{switch(n){case 0:s.wa=await r.onListen(a,!0);break;case 1:s.wa=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(i){const o=j_(i,`Initialization of query '${d0(e.query)}' failed`);return void e.onError(o)}r.queries.set(a,s),s.Sa.push(e),e.va(r.onlineState),s.wa&&e.Fa(s.wa)&&H_(r)}async function Q_(t,e){const r=kr(t),n=e.query;let a=3;const s=r.queries.get(n);if(s){const i=s.Sa.indexOf(e);i>=0&&(s.Sa.splice(i,1),s.Sa.length===0?a=e.Da()?0:1:!s.ba()&&e.Da()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function LG(t,e){const r=kr(t);let n=!1;for(const a of e){const s=a.query,i=r.queries.get(s);if(i){for(const o of i.Sa)o.Fa(a)&&(n=!0);i.wa=a}}n&&H_(r)}function UG(t,e,r){const n=kr(t),a=n.queries.get(e);if(a)for(const s of a.Sa)s.onError(r);n.queries.delete(e)}function H_(t){t.Ca.forEach(e=>{e.next()})}var HC,YB;(YB=HC||(HC={})).Ma="default",YB.Cache="cache";class V_{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new $0(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=$0.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==HC.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this.key=e}}class fR{constructor(e){this.key=e}}class MG{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=nn(),this.mutatedKeys=nn(),this.eu=DD(e),this.tu=new B0(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new $B,a=r?r.tu:this.tu;let s=r?r.mutatedKeys:this.mutatedKeys,i=a,o=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((f,m)=>{const p=a.get(f),g=z2(this.query,m)?m:null,b=!!p&&this.mutatedKeys.has(p.key),y=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let T=!1;p&&g?p.data.isEqual(g.data)?b!==y&&(n.track({type:3,doc:g}),T=!0):this.su(p,g)||(n.track({type:2,doc:g}),T=!0,(c&&this.eu(g,c)>0||u&&this.eu(g,u)<0)&&(o=!0)):!p&&g?(n.track({type:0,doc:g}),T=!0):p&&!g&&(n.track({type:1,doc:p}),T=!0,(c||u)&&(o=!0)),T&&(g?(i=i.add(g),s=y?s.add(f):s.delete(f)):(i=i.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const f=this.query.limitType==="F"?i.last():i.first();i=i.delete(f.key),s=s.delete(f.key),n.track({type:1,doc:f})}return{tu:i,iu:n,Cs:o,mutatedKeys:s}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const i=e.iu.ya();i.sort((f,m)=>function(g,b){const y=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yr(20277,{Rt:T})}};return y(g)-y(b)}(f.type,m.type)||this.eu(f.doc,m.doc)),this.ou(n),a=a??!1;const o=r&&!a?this._u():[],c=this.Xa.size===0&&this.current&&!a?1:0,u=c!==this.Za;return this.Za=c,i.length!==0||u?{snapshot:new $0(this.query,e.tu,s,i,e.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new $B,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=nn(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return e.forEach(n=>{this.Xa.has(n)||r.push(new fR(n))}),this.Xa.forEach(n=>{e.has(n)||r.push(new dR(n))}),r}cu(e){this.Ya=e.Qs,this.Xa=nn();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return $0.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const G_="SyncEngine";class PG{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class jG{constructor(e){this.key=e,this.hu=!1}}class OG{constructor(e,r,n,a,s,i){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new ch(o=>FD(o),G2),this.Iu=new Map,this.Eu=new Set,this.du=new _a(lr.comparator),this.Au=new Map,this.Ru=new k_,this.Vu={},this.mu=new Map,this.fu=W0.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function QG(t,e,r=!0){const n=vR(t);let a;const s=n.Tu.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.lu()):a=await hR(n,e,r,!0),a}async function HG(t,e){const r=vR(t);await hR(r,e,!0,!1)}async function hR(t,e,r,n){const a=await lG(t.localStore,fA(e)),s=a.targetId,i=t.sharedClientState.addLocalQueryTarget(s,r);let o;return n&&(o=await VG(t,e,s,i==="current",a.resumeToken)),t.isPrimaryClient&&r&&iR(t.remoteStore,a),o}async function VG(t,e,r,n,a){t.pu=(m,p,g)=>async function(y,T,k,D){let L=T.view.ru(k);L.Cs&&(L=await VB(y.localStore,T.query,!1).then(({documents:E})=>T.view.ru(E,L)));const j=D&&D.targetChanges.get(T.targetId),H=D&&D.targetMismatches.get(T.targetId)!=null,U=T.view.applyChanges(L,y.isPrimaryClient,j,H);return ZB(y,T.targetId,U.au),U.snapshot}(t,m,p,g);const s=await VB(t.localStore,e,!0),i=new MG(e,s.Qs),o=i.ru(s.documents),c=Hg.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),u=i.applyChanges(o,t.isPrimaryClient,c);ZB(t,r,u.au);const f=new PG(e,r,i);return t.Tu.set(e,f),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),u.snapshot}async function GG(t,e,r){const n=kr(t),a=n.Tu.get(e),s=n.Iu.get(a.targetId);if(s.length>1)return n.Iu.set(a.targetId,s.filter(i=>!G2(i,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await OC(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&R_(n.remoteStore,a.targetId),VC(n,a.targetId)}).catch(sm)):(VC(n,a.targetId),await OC(n.localStore,a.targetId,!0))}async function zG(t,e){const r=kr(t),n=r.Tu.get(e),a=r.Iu.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),R_(r.remoteStore,n.targetId))}async function qG(t,e,r){const n=ZG(t);try{const a=await function(i,o){const c=kr(i),u=Ar.now(),f=o.reduce((g,b)=>g.add(b.key),nn());let m,p;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let b=gu(),y=nn();return c.Ns.getEntries(g,f).next(T=>{b=T,b.forEach((k,D)=>{D.isValidDocument()||(y=y.add(k))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,b)).next(T=>{m=T;const k=[];for(const D of o){const L=oV(D,m.get(D.key).overlayedDocument);L!=null&&k.push(new ef(D.key,L,ED(L.value.mapValue),Ji.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,k,o)}).next(T=>{p=T;const k=T.applyToLocalDocumentSet(m,y);return c.documentOverlayCache.saveOverlays(g,T.batchId,k)})}).then(()=>({batchId:p.batchId,changes:LD(m)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),function(i,o,c){let u=i.Vu[i.currentUser.toKey()];u||(u=new _a(rn)),u=u.insert(o,c),i.Vu[i.currentUser.toKey()]=u}(n,a.batchId,r),await Gg(n,a.changes),await X2(n.remoteStore)}catch(a){const s=j_(a,"Failed to persist write");r.reject(s)}}async function mR(t,e){const r=kr(t);try{const n=await sG(r.localStore,e);e.targetChanges.forEach((a,s)=>{const i=r.Au.get(s);i&&(Fn(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?i.hu=!0:a.modifiedDocuments.size>0?Fn(i.hu,14607):a.removedDocuments.size>0&&(Fn(i.hu,42227),i.hu=!1))}),await Gg(r,n,e)}catch(n){await sm(n)}}function XB(t,e,r){const n=kr(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Tu.forEach((s,i)=>{const o=i.view.va(e);o.snapshot&&a.push(o.snapshot)}),function(i,o){const c=kr(i);c.onlineState=o;let u=!1;c.queries.forEach((f,m)=>{for(const p of m.Sa)p.va(o)&&(u=!0)}),u&&H_(c)}(n.eventManager,e),a.length&&n.Pu.H_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function KG(t,e,r){const n=kr(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Au.get(e),s=a&&a.key;if(s){let i=new _a(lr.comparator);i=i.insert(s,Ii.newNoDocument(s,Br.min()));const o=nn().add(s),c=new $2(Br.min(),new Map,new _a(rn),i,o);await mR(n,c),n.du=n.du.remove(s),n.Au.delete(e),z_(n)}else await OC(n.localStore,e,!1).then(()=>VC(n,e,r)).catch(sm)}async function WG(t,e){const r=kr(t),n=e.batch.batchId;try{const a=await aG(r.localStore,e);gR(r,n,null),pR(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Gg(r,a)}catch(a){await sm(a)}}async function $G(t,e,r){const n=kr(t);try{const a=await function(i,o){const c=kr(i);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let f;return c.mutationQueue.lookupMutationBatch(u,o).next(m=>(Fn(m!==null,37113),f=m.keys(),c.mutationQueue.removeMutationBatch(u,m))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,f,o)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f)).next(()=>c.localDocuments.getDocuments(u,f))})}(n.localStore,e);gR(n,e,r),pR(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Gg(n,a)}catch(a){await sm(a)}}function pR(t,e){(t.mu.get(e)||[]).forEach(r=>{r.resolve()}),t.mu.delete(e)}function gR(t,e,r){const n=kr(t);let a=n.Vu[n.currentUser.toKey()];if(a){const s=a.get(e);s&&(r?s.reject(r):s.resolve(),a=a.remove(e)),n.Vu[n.currentUser.toKey()]=a}}function VC(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(n=>{t.Ru.containsKey(n)||xR(t,n)})}function xR(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(R_(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),z_(t))}function ZB(t,e,r){for(const n of r)n instanceof dR?(t.Ru.addReference(n.key,e),JG(t,n)):n instanceof fR?(Jt(G_,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||xR(t,n.key)):yr(19791,{wu:n})}function JG(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||(Jt(G_,"New document in limbo: "+r),t.Eu.add(n),z_(t))}function z_(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new lr(na.fromString(e)),n=t.fu.next();t.Au.set(n,new jG(r)),t.du=t.du.insert(r,n),iR(t.remoteStore,new yd(fA(V2(r.path)),n,"TargetPurposeLimboResolution",O2.ce))}}async function Gg(t,e,r){const n=kr(t),a=[],s=[],i=[];n.Tu.isEmpty()||(n.Tu.forEach((o,c)=>{i.push(n.pu(c,e,r).then(u=>{var f;if((u||r)&&n.isPrimaryClient){const m=u?!u.fromCache:(f=r==null?void 0:r.targetChanges.get(c.targetId))==null?void 0:f.current;n.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(u){a.push(u);const m=F_.As(c.targetId,u);s.push(m)}}))}),await Promise.all(i),n.Pu.H_(a),await async function(c,u){const f=kr(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>wt.forEach(u,p=>wt.forEach(p.Es,g=>f.persistence.referenceDelegate.addReference(m,p.targetId,g)).next(()=>wt.forEach(p.ds,g=>f.persistence.referenceDelegate.removeReference(m,p.targetId,g)))))}catch(m){if(!im(m))throw m;Jt(D_,"Failed to update sequence numbers: "+m)}for(const m of u){const p=m.targetId;if(!m.fromCache){const g=f.Ms.get(p),b=g.snapshotVersion,y=g.withLastLimboFreeSnapshotVersion(b);f.Ms=f.Ms.insert(p,y)}}}(n.localStore,s))}async function YG(t,e){const r=kr(t);if(!r.currentUser.isEqual(e)){Jt(G_,"User change. New user:",e.toKey());const n=await rR(r.localStore,e);r.currentUser=e,function(s,i){s.mu.forEach(o=>{o.forEach(c=>{c.reject(new Vt(ft.CANCELLED,i))})}),s.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Gg(r,n.Ls)}}function XG(t,e){const r=kr(t),n=r.Au.get(e);if(n&&n.hu)return nn().add(n.key);{let a=nn();const s=r.Iu.get(e);if(!s)return a;for(const i of s){const o=r.Tu.get(i);a=a.unionWith(o.view.nu)}return a}}function vR(t){const e=kr(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=mR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KG.bind(null,e),e.Pu.H_=LG.bind(null,e.eventManager),e.Pu.yu=UG.bind(null,e.eventManager),e}function ZG(t){const e=kr(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$G.bind(null,e),e}class zv{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=J2(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return nG(this.persistence,new eG,e.initialUser,this.serializer)}Cu(e){return new tR(I_.mi,this.serializer)}Du(e){return new AG}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zv.provider={build:()=>new zv};class ez extends zv{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){Fn(this.persistence.referenceDelegate instanceof Vv,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new jV(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?xo.withCacheSize(this.cacheSizeBytes):xo.DEFAULT;return new tR(n=>Vv.mi(n,r),this.serializer)}}class GC{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>XB(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=YG.bind(null,this.syncEngine),await FG(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new RG}()}createDatastore(e){const r=J2(e.databaseInfo.databaseId),n=function(s){return new mG(s)}(e.databaseInfo);return function(s,i,o,c){return new vG(s,i,o,c)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,a,s,i,o){return new yG(n,a,s,i,o)}(this.localStore,this.datastore,e.asyncQueue,r=>XB(this.syncEngine,r,0),function(){return qB.v()?new qB:new uG}())}createSyncEngine(e,r){return function(a,s,i,o,c,u,f){const m=new OG(a,s,i,o,c,u);return f&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(a){const s=kr(a);Jt(Xf,"RemoteStore shutting down."),s.Ea.add(5),await Vg(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}GC.provider={build:()=>new GC};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):pu("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="FirestoreClient";class tz{constructor(e,r,n,a,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=Ti.UNAUTHENTICATED,this.clientId=w_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async i=>{Jt(Gd,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(Jt(Gd,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new lu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=j_(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function ub(t,e){t.asyncQueue.verifyOperationInProgress(),Jt(Gd,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async a=>{n.isEqual(a)||(await rR(e.localStore,a),n=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function eN(t,e){t.asyncQueue.verifyOperationInProgress();const r=await rz(t);Jt(Gd,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>WB(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,a)=>WB(e.remoteStore,a)),t._onlineComponents=e}async function rz(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Jt(Gd,"Using user provided OfflineComponentProvider");try{await ub(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(a){return a.name==="FirebaseError"?a.code===ft.FAILED_PRECONDITION||a.code===ft.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;V0("Error using user provided cache. Falling back to memory cache: "+r),await ub(t,new zv)}}else Jt(Gd,"Using default OfflineComponentProvider"),await ub(t,new ez(void 0));return t._offlineComponents}async function wR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Jt(Gd,"Using user provided OnlineComponentProvider"),await eN(t,t._uninitializedComponentsProvider._online)):(Jt(Gd,"Using default OnlineComponentProvider"),await eN(t,new GC))),t._onlineComponents}function nz(t){return wR(t).then(e=>e.syncEngine)}async function qv(t){const e=await wR(t),r=e.eventManager;return r.onListen=QG.bind(null,e.syncEngine),r.onUnlisten=GG.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=HG.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=zG.bind(null,e.syncEngine),r}function az(t,e,r={}){const n=new lu;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,c,u){const f=new q_({next:p=>{f.Nu(),i.enqueueAndForget(()=>Q_(s,m));const g=p.docs.has(o);!g&&p.fromCache?u.reject(new Vt(ft.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&c&&c.source==="server"?u.reject(new Vt(ft.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),m=new V_(V2(o.path),f,{includeMetadataChanges:!0,qa:!0});return O_(s,m)}(await qv(t),t.asyncQueue,e,r,n)),n.promise}function sz(t,e,r={}){const n=new lu;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,c,u){const f=new q_({next:p=>{f.Nu(),i.enqueueAndForget(()=>Q_(s,m)),p.fromCache&&c.source==="server"?u.reject(new Vt(ft.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),m=new V_(o,f,{includeMetadataChanges:!0,qa:!0});return O_(s,m)}(await qv(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR="firestore.googleapis.com",rN=!0;class nN{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Vt(ft.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bR,this.ssl=rN}else this.host=e.host,this.ssl=e.ssl??rN;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=eR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<MV)throw new Vt(ft.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}v9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yR(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Vt(ft.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Vt(ft.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Vt(ft.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Z2{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nN({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Vt(ft.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Vt(ft.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nN(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new c9;switch(n.type){case"firstParty":return new f9(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Vt(ft.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=tN.get(r);n&&(Jt("ComponentProvider","Removing Datastore"),tN.delete(r),n.terminate())}(this),Promise.resolve()}}function iz(t,e,r,n={}){var u;t=$i(t,Z2);const a=oh(e),s=t._getSettings(),i={...s,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${r}`;a&&(s_(`https://${o}`),i_("Firestore",!0)),s.host!==bR&&s.host!==o&&V0("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:o,ssl:a,emulatorOptions:n};if(!Md(c,i)&&(t._setSettings(c),n.mockUserToken)){let f,m;if(typeof n.mockUserToken=="string")f=n.mockUserToken,m=Ti.MOCK_USER;else{f=xO(n.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const p=n.mockUserToken.sub||n.mockUserToken.user_id;if(!p)throw new Vt(ft.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Ti(p)}t._authCredentials=new A9(new dD(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new bu(this.firestore,e,this._query)}}class La{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new La(this.firestore,e,this._key)}toJSON(){return{type:La._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(Og(r,La._jsonSchema))return new La(e,n||null,new lr(na.fromString(r.referencePath)))}}La._jsonSchemaVersion="firestore/documentReference/1.0",La._jsonSchema={type:ms("string",La._jsonSchemaVersion),referencePath:ms("string")};class Fd extends bu{constructor(e,r,n){super(e,r,V2(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new La(this.firestore,null,new lr(e))}withConverter(e){return new Fd(this.firestore,e,this._path)}}function Nt(t,e,...r){if(t=pa(t),fD("collection","path",e),t instanceof Z2){const n=na.fromString(e,...r);return pB(n),new Fd(t,null,n)}{if(!(t instanceof La||t instanceof Fd))throw new Vt(ft.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(na.fromString(e,...r));return pB(n),new Fd(t.firestore,null,n)}}function _r(t,e,...r){if(t=pa(t),arguments.length===1&&(e=w_.newId()),fD("doc","path",e),t instanceof Z2){const n=na.fromString(e,...r);return mB(n),new La(t,null,new lr(n))}{if(!(t instanceof La||t instanceof Fd))throw new Vt(ft.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(na.fromString(e,...r));return mB(n),new La(t.firestore,t instanceof Fd?t.converter:null,new lr(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN="AsyncQueue";class sN{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new aR(this,"async_queue_retry"),this._c=()=>{const n=Ab();n&&Jt(aN,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=Ab();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=Ab();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new lu;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!im(e))throw e;Jt(aN,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,pu("INTERNAL UNHANDLED ERROR: ",iN(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const a=P_.createAndSchedule(this,e,r,n,s=>this.hc(s));return this.tc.push(a),a}uc(){this.nc&&yr(47125,{Pc:iN(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function iN(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(t,["next","error","complete"])}class vA extends Z2{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new sN,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new sN(e),this._firestoreClient=void 0,await e}}}function CR(t,e){const r=typeof t=="object"?t:A_(),n=typeof t=="string"?t:Uv,a=R2(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=x6("firestore");s&&iz(a,...s)}return a}function zg(t){if(t._terminated)throw new Vt(ft.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||oz(t),t._firestoreClient}function oz(t){var n,a,s;const e=t._freezeSettings(),r=function(o,c,u,f){return new I9(o,c,u,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,yR(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((n=t._app)==null?void 0:n.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new tz(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(o){const c=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fl(oi.fromBase64String(e))}catch(r){throw new Vt(ft.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Fl(oi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Fl._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Og(e,Fl._jsonSchema))return Fl.fromBase64String(e.bytes)}}Fl._jsonSchemaVersion="firestore/bytes/1.0",Fl._jsonSchema={type:ms("string",Fl._jsonSchemaVersion),bytes:ms("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Vt(ft.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ai(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Vt(ft.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Vt(ft.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return rn(this._lat,e._lat)||rn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:mA._jsonSchemaVersion}}static fromJSON(e){if(Og(e,mA._jsonSchema))return new mA(e.latitude,e.longitude)}}mA._jsonSchemaVersion="firestore/geoPoint/1.0",mA._jsonSchema={type:ms("string",mA._jsonSchemaVersion),latitude:ms("number"),longitude:ms("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:pA._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Og(e,pA._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new pA(e.vectorValues);throw new Vt(ft.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}pA._jsonSchemaVersion="firestore/vectorValue/1.0",pA._jsonSchema={type:ms("string",pA._jsonSchemaVersion),vectorValues:ms("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lz=/^__.*__$/;class cz{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new ef(e,this.data,this.fieldMask,r,this.fieldTransforms):new Qg(e,this.data,r,this.fieldTransforms)}}class ER{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new ef(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function _R(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yr(40011,{Ac:t})}}class tw{constructor(e,r,n,a,s,i){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new tw({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const r=(a=this.path)==null?void 0:a.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){var a;const r=(a=this.path)==null?void 0:a.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Kv(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(_R(this.Ac)&&lz.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Az{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||J2(e)}Cc(e,r,n,a=!1){return new tw({Ac:e,methodName:r,Dc:n,path:ai.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Kg(t){const e=t._freezeSettings(),r=J2(t._databaseId);return new Az(t._databaseId,!!e.ignoreUndefinedProperties,r)}function K_(t,e,r,n,a,s={}){const i=t.Cc(s.merge||s.mergeFields?2:0,e,r,a);$_("Data must be an object, but it was:",i,n);const o=BR(n,i);let c,u;if(s.merge)c=new $o(i.fieldMask),u=i.fieldTransforms;else if(s.mergeFields){const f=[];for(const m of s.mergeFields){const p=zC(e,m,r);if(!i.contains(p))throw new Vt(ft.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);kR(f,p)||f.push(p)}c=new $o(f),u=i.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,u=i.fieldTransforms;return new cz(new wo(o),c,u)}class rw extends ew{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rw}}function uz(t,e,r){return new tw({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class W_ extends ew{constructor(e,r){super(e),this.vc=r}_toFieldTransform(e){const r=uz(this,e,!0),n=this.vc.map(s=>cm(s,r)),a=new K0(n);return new nV(e.path,a)}isEqual(e){return e instanceof W_&&Md(this.vc,e.vc)}}function SR(t,e,r,n){const a=t.Cc(1,e,r);$_("Data must be an object, but it was:",a,n);const s=[],i=wo.empty();Zd(n,(c,u)=>{const f=J_(e,c,r);u=pa(u);const m=a.yc(f);if(u instanceof rw)s.push(f);else{const p=cm(u,m);p!=null&&(s.push(f),i.set(f,p))}});const o=new $o(s);return new ER(i,o,a.fieldTransforms)}function TR(t,e,r,n,a,s){const i=t.Cc(1,e,r),o=[zC(e,n,r)],c=[a];if(s.length%2!=0)throw new Vt(ft.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)o.push(zC(e,s[p])),c.push(s[p+1]);const u=[],f=wo.empty();for(let p=o.length-1;p>=0;--p)if(!kR(u,o[p])){const g=o[p];let b=c[p];b=pa(b);const y=i.yc(g);if(b instanceof rw)u.push(g);else{const T=cm(b,y);T!=null&&(u.push(g),f.set(g,T))}}const m=new $o(u);return new ER(f,m,i.fieldTransforms)}function dz(t,e,r,n=!1){return cm(r,t.Cc(n?4:3,e))}function cm(t,e){if(NR(t=pa(t)))return $_("Unsupported field value:",e,t),BR(t,e);if(t instanceof ew)return function(n,a){if(!_R(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,a){const s=[];let i=0;for(const o of n){let c=cm(o,a.wc(i));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),i++}return{arrayValue:{values:s}}}(t,e)}return function(n,a){if((n=pa(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return eV(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Ar.fromDate(n);return{timestampValue:Hv(a.serializer,s)}}if(n instanceof Ar){const s=new Ar(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Hv(a.serializer,s)}}if(n instanceof mA)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Fl)return{bytesValue:KD(a.serializer,n._byteString)};if(n instanceof La){const s=a.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw a.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:N_(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof pA)return function(i,o){return{mapValue:{fields:{[bD]:{stringValue:CD},[Mv]:{arrayValue:{values:i.toArray().map(u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return S_(o.serializer,u)})}}}}}}(n,a);throw a.Sc(`Unsupported field value: ${j2(n)}`)}(t,e)}function BR(t,e){const r={};return pD(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zd(t,(n,a)=>{const s=cm(a,e.mc(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function NR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ar||t instanceof mA||t instanceof Fl||t instanceof La||t instanceof ew||t instanceof pA)}function $_(t,e,r){if(!NR(r)||!hD(r)){const n=j2(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}function zC(t,e,r){if((e=pa(e))instanceof qg)return e._internalPath;if(typeof e=="string")return J_(t,e);throw Kv("Field path arguments must be of type string or ",t,!1,void 0,r)}const fz=new RegExp("[~\\*/\\[\\]]");function J_(t,e,r){if(e.search(fz)>=0)throw Kv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new qg(...e.split("."))._internalPath}catch{throw Kv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Kv(t,e,r,n,a){const s=n&&!n.isEmpty(),i=a!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(s||i)&&(c+=" (found",s&&(c+=` in field ${n}`),i&&(c+=` in document ${a}`),c+=")"),new Vt(ft.INVALID_ARGUMENT,o+t+c)}function kR(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,r,n,a,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new La(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new hz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(nw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class hz extends IR{data(){return super.data()}}function nw(t,e){return typeof e=="string"?J_(t,e):e instanceof qg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Vt(ft.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Y_{}class X_ extends Y_{}function er(t,e,...r){let n=[];e instanceof Y_&&n.push(e),n=n.concat(r),function(s){const i=s.filter(c=>c instanceof Z_).length,o=s.filter(c=>c instanceof aw).length;if(i>1||i>0&&o>0)throw new Vt(ft.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)t=a._apply(t);return t}class aw extends X_{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new aw(e,r,n)}_apply(e){const r=this._parse(e);return DR(e._query,r),new bu(e.firestore,e.converter,LC(e._query,r))}_parse(e){const r=Kg(e.firestore);return function(s,i,o,c,u,f,m){let p;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Vt(ft.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){cN(m,f);const b=[];for(const y of m)b.push(lN(c,s,y));p={arrayValue:{values:b}}}else p=lN(c,s,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||cN(m,f),p=dz(o,i,m,f==="in"||f==="not-in");return hs.create(u,f,p)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Tn(t,e,r){const n=e,a=nw("where",t);return aw._create(a,n,r)}class Z_ extends Y_{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Z_(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:yc.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(a,s){let i=a;const o=s.getFlattenedFilters();for(const c of o)DR(i,c),i=LC(i,c)}(e._query,r),new bu(e.firestore,e.converter,LC(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class e5 extends X_{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new e5(e,r)}_apply(e){const r=function(a,s,i){if(a.startAt!==null)throw new Vt(ft.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Vt(ft.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ug(s,i)}(e._query,this._field,this._direction);return new bu(e.firestore,e.converter,function(a,s){const i=a.explicitOrderBy.concat([s]);return new om(a.path,a.collectionGroup,i,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}function fn(t,e="asc"){const r=e,n=nw("orderBy",t);return e5._create(n,r)}class t5 extends X_{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new t5(e,r,n)}_apply(e){return new bu(e.firestore,e.converter,jv(e._query,this._limit,this._limitType))}}function cu(t){return w9("limit",t),t5._create("limit",t,"F")}function lN(t,e,r){if(typeof(r=pa(r))=="string"){if(r==="")throw new Vt(ft.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ID(e)&&r.indexOf("/")!==-1)throw new Vt(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(na.fromString(r));if(!lr.isDocumentKey(n))throw new Vt(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return EB(t,new lr(n))}if(r instanceof La)return EB(t,r._key);throw new Vt(ft.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${j2(r)}.`)}function cN(t,e){if(!Array.isArray(t)||t.length===0)throw new Vt(ft.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function DR(t,e){const r=function(a,s){for(const i of a)for(const o of i.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new Vt(ft.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Vt(ft.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class mz{convertValue(e,r="none"){switch(Hd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $a(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Qd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw yr(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Zd(e,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(e){var n,a,s;const r=(s=(a=(n=e.fields)==null?void 0:n[Mv].arrayValue)==null?void 0:a.values)==null?void 0:s.map(i=>$a(i.doubleValue));return new pA(r)}convertGeoPoint(e){return new mA($a(e.latitude),$a(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=H2(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(lg(e));default:return null}}convertTimestamp(e){const r=Od(e);return new Ar(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=na.fromString(e);Fn(ZD(n),9688,{name:e});const a=new cg(n.get(1),n.get(3)),s=new lr(n.popFirst(5));return a.isEqual(r)||pu(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r5(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class wp{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jf extends IR{constructor(e,r,n,a,s,i){super(e,r,n,a,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new hv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(nw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Vt(ft.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=jf._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}jf._jsonSchemaVersion="firestore/documentSnapshot/1.0",jf._jsonSchema={type:ms("string",jf._jsonSchemaVersion),bundleSource:ms("string","DocumentSnapshot"),bundleName:ms("string"),bundle:ms("string")};class hv extends jf{data(e={}){return super.data(e)}}class Of{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new wp(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new hv(this._firestore,this._userDataWriter,n.key,n,new wp(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Vt(ft.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let i=0;return a._snapshot.docChanges.map(o=>{const c=new hv(a._firestore,a._userDataWriter,o.doc.key,o.doc,new wp(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:i++}})}{let i=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const c=new hv(a._firestore,a._userDataWriter,o.doc.key,o.doc,new wp(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,f=-1;return o.type!==0&&(u=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),f=i.indexOf(o.doc.key)),{type:pz(o.type),doc:c,oldIndex:u,newIndex:f}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Vt(ft.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Of._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=w_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],a=[];return this.docs.forEach(s=>{s._document!==null&&(r.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),a.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function pz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yr(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(t){t=$i(t,La);const e=$i(t.firestore,vA);return az(zg(e),t._key).then(r=>RR(e,t,r))}Of._jsonSchemaVersion="firestore/querySnapshot/1.0",Of._jsonSchema={type:ms("string",Of._jsonSchemaVersion),bundleSource:ms("string","QuerySnapshot"),bundleName:ms("string"),bundle:ms("string")};class n5 extends mz{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fl(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new La(this.firestore,null,r)}}function ps(t){t=$i(t,bu);const e=$i(t.firestore,vA),r=zg(e),n=new n5(e);return FR(t._query),sz(r,t._query).then(a=>new Of(e,n,t,a))}function Zi(t,e,r){t=$i(t,La);const n=$i(t.firestore,vA),a=r5(t.converter,e,r);return Jg(n,[K_(Kg(n),"setDoc",t._key,a,t.converter!==null,r).toMutation(t._key,Ji.none())])}function $g(t,e,r,...n){t=$i(t,La);const a=$i(t.firestore,vA),s=Kg(a);let i;return i=typeof(e=pa(e))=="string"||e instanceof qg?TR(s,"updateDoc",t._key,e,r,n):SR(s,"updateDoc",t._key,e),Jg(a,[i.toMutation(t._key,Ji.exists(!0))])}function Oi(t){return Jg($i(t.firestore,vA),[new W2(t._key,Ji.none())])}function Sa(t,e){const r=$i(t.firestore,vA),n=_r(t),a=r5(t.converter,e);return Jg(r,[K_(Kg(t.firestore),"addDoc",n._key,a,t.converter!==null,{}).toMutation(n._key,Ji.exists(!1))]).then(()=>n)}function br(t,...e){var c,u,f;t=pa(t);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||oN(e[n])||(r=e[n++]);const a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(oN(e[n])){const m=e[n];e[n]=(c=m.next)==null?void 0:c.bind(m),e[n+1]=(u=m.error)==null?void 0:u.bind(m),e[n+2]=(f=m.complete)==null?void 0:f.bind(m)}let s,i,o;if(t instanceof La)i=$i(t.firestore,vA),o=V2(t._key.path),s={next:m=>{e[n]&&e[n](RR(i,t,m))},error:e[n+1],complete:e[n+2]};else{const m=$i(t,bu);i=$i(m.firestore,vA),o=m._query;const p=new n5(i);s={next:g=>{e[n]&&e[n](new Of(i,p,m,g))},error:e[n+1],complete:e[n+2]},FR(t._query)}return function(p,g,b,y){const T=new q_(y),k=new V_(g,T,b);return p.asyncQueue.enqueueAndForget(async()=>O_(await qv(p),k)),()=>{T.Nu(),p.asyncQueue.enqueueAndForget(async()=>Q_(await qv(p),k))}}(zg(i),o,a,s)}function Jg(t,e){return function(n,a){const s=new lu;return n.asyncQueue.enqueueAndForget(async()=>qG(await nz(n),a,s)),s.promise}(zg(t),e)}function RR(t,e,r){const n=r.docs.get(e._key),a=new n5(t);return new jf(t,a,e._key,n,new wp(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gz{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Kg(e)}set(e,r,n){this._verifyNotCommitted();const a=db(e,this._firestore),s=r5(a.converter,r,n),i=K_(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(i.toMutation(a._key,Ji.none())),this}update(e,r,n,...a){this._verifyNotCommitted();const s=db(e,this._firestore);let i;return i=typeof(r=pa(r))=="string"||r instanceof qg?TR(this._dataReader,"WriteBatch.update",s._key,r,n,a):SR(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(i.toMutation(s._key,Ji.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=db(e,this._firestore);return this._mutations=this._mutations.concat(new W2(r._key,Ji.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Vt(ft.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function db(t,e){if((t=pa(t)).firestore!==e)throw new Vt(ft.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function xz(...t){return new W_("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a5(t){return zg(t=$i(t,vA)),new gz(t,e=>Jg(t,e))}(function(e,r=!0){(function(a){am=a})(rm),$f(new Pd("firestore",(n,{instanceIdentifier:a,options:s})=>{const i=n.getProvider("app").getImmediate(),o=new vA(new u9(n.getProvider("auth-internal")),new h9(i,n.getProvider("app-check-internal")),function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Vt(ft.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cg(u.options.projectId,f)}(i,a),i);return s={useFetchStreams:r,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),AA(uB,dB,e),AA(uB,dB,"esm2020")})();const vz={apiKey:"AIzaSyAfL9dpeLfpWQPg4orpFSh3X5dzXrSsBwc",authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},LR=c_(vz),Yg=aD(LR),Gr=CR(LR),wz=Object.freeze(Object.defineProperty({__proto__:null,auth:Yg,db:Gr},Symbol.toStringTag,{value:"Module"})),yz=async(t,e)=>{try{return(await zQ(Yg,t,e)).user}catch(r){throw console.error("Error en loginUser helper:",r),r}},fb=async()=>{try{await $Q(Yg)}catch(t){throw console.error("Error en logoutUser helper:",t),t}},bz=async t=>{try{await GQ(Yg,t)}catch(e){throw console.error("Error en resetPassword helper:",e),e}},Cz=async t=>{try{const e=_r(Gr,"usuarios",t),r=await Wg(e);return r.exists()?{id:r.id,...r.data()}:(console.warn(`No se encontró perfil en Firestore para: ${t}`),null)}catch(e){throw console.error("Error en getUserProfile helper:",e),e}};var Pt=(t=>(t.SUBDIRECCION="SUBDIRECCION",t.PROFESORADO="PROFESORADO",t.COORDINACION_TP="COORDINACION_TP",t.ESTUDIANTE="ESTUDIANTE",t))(Pt||{}),Hr=(t=>(t.EVALUACION="Evaluación",t.ACTO="Acto",t.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",t.SALIDA_PEDAGOGICA="Salida Pedagógica",t))(Hr||{}),Ff=(t=>(t.PRUEBA_PARCIAL="Prueba parcial",t.GUIA_APRENDIZAJE="Guía de Aprendizaje",t.RUBRICA="Rúbrica",t.PAUTA_COTEJO="Pauta de Cotejo",t))(Ff||{});const gs="w-6 h-6",sw="w-24 h-24",s5=()=>l.jsxs("svg",{className:"w-32 h-32 text-slate-700 dark:text-slate-300",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20V6.5A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v13Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M16 4.5V17",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M9 14V10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M12 14V8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),Ez=()=>l.jsxs("svg",{className:"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M9 18h6"}),l.jsx("path",{d:"M10 22h4"}),l.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),_z=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),Sz=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),yp=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),bp=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),UR=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Tz=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:sw,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),Bz=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:sw,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),Nz=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:sw,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 010 1.255c-.008.378.137.75.43.99l1.004.828c.421.346.564.95.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.68 6.68 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.68 6.68 0 01-.22-.127c-.325-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.369-.491l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 010-1.255c.008-.378-.137-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),kz=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:sw,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),Iz=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),AN=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),m1=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),hb=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),p1=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),mb=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),uN=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),Fz=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),Dz=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),Rz=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),Lz=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:gs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),dN=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:gs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),Uz=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),pb=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),Mz=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:gs,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.528-1.036.94-2.197 1.088-3.386l-.7M11.42 15.17l-1.06-1.06a4.5 4.5 0 01-5.656-5.656l-1.06 1.06c-1.37.66-2.58 1.6-3.58 2.75a4.5 4.5 0 00-1.06 5.656l1.06 1.06c1.15.998 2.52 1.93 3.99 2.58l1.06-1.06a4.5 4.5 0 015.656-5.656l3.032 2.496m-3.582-2.58a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06m-3.032-2.496a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06"})}),Pz=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),fN=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:gs,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),jz=[{id:Pt.SUBDIRECCION,label:"Subdirección Pedagógica",icon:l.jsx(Tz,{})},{id:Pt.PROFESORADO,label:"Profesorado",icon:l.jsx(Bz,{})},{id:Pt.COORDINACION_TP,label:"Coordinación TP",icon:l.jsx(Nz,{})},{id:Pt.ESTUDIANTE,label:"Estudiantes",icon:l.jsx(kz,{})}],Oz={[Pt.SUBDIRECCION]:[{name:"Dashboard",icon:l.jsx(Iz,{})},{name:"Administración",icon:l.jsx(Lz,{})},{name:"Seguimiento Curricular",icon:l.jsx(Pz,{})},{name:"Acompañamiento docente",icon:l.jsx(Rz,{})},{name:"Análisis Taxonómico",icon:l.jsx(fN,{})},{name:"Interdisciplinario",icon:l.jsx(pb,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:l.jsx(AN,{})},{name:"Crear horarios",icon:l.jsx(hb,{})},{name:"Seguimiento de acciones pedagógicas",icon:l.jsx(p1,{})},{name:"Inclusión",icon:l.jsx(dN,{})},{name:"Calendario Académico",icon:l.jsx(m1,{})},{name:"Muro de Anuncios",icon:l.jsx(yp,{})},{name:"Mensajería Interna",icon:l.jsx(bp,{})},{name:"Generador de Actas",icon:l.jsx(mb,{})}],[Pt.PROFESORADO]:[{name:"Planificación",icon:l.jsx(uN,{})},{name:"Mis Acompañamientos",icon:l.jsx(Uz,{})},{name:"Recursos de Aprendizaje",icon:l.jsx(Fz,{})},{name:"Análisis Taxonómico",icon:l.jsx(fN,{})},{name:"Interdisciplinario",icon:l.jsx(pb,{})},{name:"Inclusión",icon:l.jsx(dN,{})},{name:"Actividades Remotas",icon:l.jsx(Dz,{})},{name:"Evaluación de Aprendizajes",icon:l.jsx(mb,{})},{name:"Evaluaciones Formativas",icon:l.jsx(p1,{})},{name:"Calendario Académico",icon:l.jsx(m1,{})},{name:"Muro de Anuncios",icon:l.jsx(yp,{})},{name:"Mensajería Interna",icon:l.jsx(bp,{})},{name:"Generador de Actas",icon:l.jsx(AN,{})}],[Pt.COORDINACION_TP]:[{name:"Seguimiento Dual",icon:l.jsx(p1,{})},{name:"Asistencia Dual",icon:l.jsx(hb,{})},{name:"Pañol",icon:l.jsx(Mz,{})},{name:"Calendario Académico",icon:l.jsx(m1,{})},{name:"Muro de Anuncios",icon:l.jsx(yp,{})},{name:"Mensajería Interna",icon:l.jsx(bp,{})},{name:"Generador de Actas",icon:l.jsx(mb,{})}],[Pt.ESTUDIANTE]:[{name:"Auto-aprendizaje",icon:l.jsx(uN,{})},{name:"Evaluación Formativa",icon:l.jsx(p1,{})},{name:"Tareas Interdisciplinarias",icon:l.jsx(pb,{})},{name:"Asistencia a Empresa",icon:l.jsx(hb,{})},{name:"Calendario Académico",icon:l.jsx(m1,{})},{name:"Muro de Anuncios",icon:l.jsx(yp,{})},{name:"Mensajería Interna",icon:l.jsx(bp,{})}]},hN=["Currículum y Evaluación","Convivencia Escolar","Orientación","Gestión Pedagógica General"],sp=["Pendiente","En Proceso","Cumplida"],Wv=["1º Medio","2º Medio","3º Medio","4º Medio"],Xo=["Lengua y Literatura","Matemática","Inglés","Filosofía","Historia y Geografía","Educación Ciudadana","Ciencias","Ciencias para la Ciudadanía","Artes","Música","Educación Física","Orientación","Mecánica Industrial","Mecánica Automotriz","Emprendimiento","Tecnología","Pensamiento Lógico","Competencia Lectora"],Za=["1ºA","1ºB","1ºC","1ºD","1ºE","2ºA","2ºB","2ºC","2ºD","3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],qC=["Nelson Laubreaux","Julian Seguel","Martin Moya","Leonel Moya","Miguel Becerra"],mv=["Lunes","Martes","Miércoles","Jueves","Viernes"],KC=[{bloque:1,inicio:"08:00",fin:"08:40"},{bloque:2,inicio:"08:40",fin:"09:20"},{bloque:3,inicio:"09:35",fin:"10:15"},{bloque:4,inicio:"10:15",fin:"10:55"},{bloque:5,inicio:"11:10",fin:"11:50"},{bloque:6,inicio:"11:50",fin:"12:30"},{bloque:7,inicio:"12:30",fin:"13:10"},{bloque:8,inicio:"13:10",fin:"13:50"},{bloque:9,inicio:"14:30",fin:"15:10"},{bloque:10,inicio:"15:10",fin:"15:50"},{bloque:11,inicio:"16:00",fin:"16:40"},{bloque:12,inicio:"16:40",fin:"17:20"}],Qz={"1º y 2º medio":{"Lengua y Literatura":6,Matemática:6,Inglés:3,"Historia y Geografía":4,"Educación Física":2,Ciencias:4,"Artes/Música":2,Tecnología:2,Orientación:1},"3º y 4º medio (Humanista-Científico)":{"Lengua y Literatura":4,Matemática:4,Inglés:2,"Historia y Geografía":3,"Educación Ciudadana":2,Filosofía:3,"Ciencias para la Ciudadanía":2,"Educación Física":2},"3º y 4º medio (Técnico-Profesional)":{"Lengua y Literatura":2,Matemática:2,Inglés:2,"Historia y Geografía":2,Filosofía:2,"Educación Física":2,"Módulo TP":18}},wd={[Hr.EVALUACION]:{label:"Evaluación",icon:"📝",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[Hr.ACTO]:{label:"Acto",icon:"🏛️",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[Hr.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"🎯",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[Hr.SALIDA_PEDAGOGICA]:{label:"Salida Pedagógica",icon:"🚌",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},Hz=Object.values(Ff),gb=["Humanidades","TP","Ciencias","Interdisciplinario","Gestión Pedagógica","Equipo Directivo","Equipo de Gestión","Consejo Escolar"],xb=["Vinculado","Desvinculado","En proceso","Empresa"],Qf=["3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],Vz=["Quiz","Comprensión de Lectura","Términos Pareados","Desarrollo"],$v=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limítrofe","Trastorno Déficit Atencional (TDA)","Trastorno Déficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Específica del Aprendizaje","Dificultad Específica de Aprendizaje en Matemáticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarización"],jp=[{domain:"Dominio A: Preparación de la Enseñanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que enseña, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que enseña, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemológicas o metodológicas en su área.","Conoce y comprende los principios y conceptos centrales de las disciplinas que enseña, atendiendo a la permanente actualización curricular en su área.","Conoce, comprende y cuestiona los principios centrales de la disciplina que enseña a la luz de nuevos paradigmas epistemológicos o teóricos, permitiendo que el trabajo o la exposición conceptual invite al desarrollo del pensamiento crítico o la investigación continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificación o gestión de la clase estándar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relación al contexto y características del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Selección de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las características de sus estudiantes y a la relación con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didácticos de aprendizaje, siendo congruentes al contenido pero no a las características de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejándose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didácticos de aprendizaje congruentes con la complejidad de los contenidos y las características de sus alumnos.","Conoce y selecciona distintos recursos didácticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisición de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluación",levels:["Establece estrategias de evaluación incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo además, las metodologías empleadas previamente en clases.","Establece estrategias de evaluación coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexión, y, la retroalimentación descriptiva."]},{name:"Estrategias de enseñanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes diseñan e implementan estrategias de enseñanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes diseñan e implementan estrategias efectivas de enseñanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes diseñan e implementan estrategias avanzadas de enseñanza-aprendizaje tales como (ABP, ABD, Gamificación, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creación de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empatía",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vínculos fundados en el respeto y/o en la empatía.","Establece un clima de relaciones interpersonales respetuosas y empáticas con la mayoría de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos, generando situaciones concretas de cooperación y ayuda mutua entre él/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Interés por las especialidades",levels:["No transmite interés por las especialidades, centrándose exclusivamente en su área de desempeño.","Transmite interés general por las especialidades, no obstante no es capaz de acercarse a las características concretas de los módulos.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha área de desempeño."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implícitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estándar que implican un desarrollo mecánico y que no tienden hacia la consolidación de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus características personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivación por el aprendizaje",levels:["No transmite motivación por el aprendizaje, la búsqueda o la indagación.","Transmite una motivación positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autónoma","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda.","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemático en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participación."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseñanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentación de objetivos",levels:["Al iniciar las clases no presenta el objetivo o sólo lo enuncia sin profundizar en él.","Al iniciar las clases presenta el objetivo de aprendizaje y el propósito, pero no logra dar cuenta de la relación con el futuro laboral de los estudiantes o con otras áreas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionándolo con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a través de la relación con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro."]},{name:"Clase en función de objetivos",levels:["No realiza su clase en función de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currículum nacional","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando sólo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional y en el PEI."]},{name:"Introducción de nueva información",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva información, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisión conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolación que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentación",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes sólo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal, a través de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensión y desempeño de sus estudiantes.","Monitorea parcialmente el grado de comprensión y desempeño de sus estudiantes, no siempre a través de evidencia.","Monitorea constantemente el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo."]},{name:"Orientación a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales, no obstante, la orientación es superficial y no predispone la construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores en consonancia a elementos propios del PEI."]},{name:"Conclusión de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicación que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora además preguntas de metacognición y/o autoevaluación."]},{name:"Abordaje de errores",levels:["No aborda los errores, únicamente los señala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a través de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogéneo, descuidando la diversidad y las características particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias según nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],MR=["Líder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],g1=[{nombre:"Aprendiz Emergente",emoji:"🌱",promedioMin:1,promedioMax:3.9,mensaje:"¡Estás comenzando tu viaje de aprendizaje! Sigue esforzándote."},{nombre:"Explorador del Conocimiento",emoji:"🧭",promedioMin:4,promedioMax:4.9,mensaje:"¡Buen trabajo! Estás construyendo una base sólida."},{nombre:"Arquitecto de Ideas",emoji:"🏛️",promedioMin:5,promedioMax:5.9,mensaje:"¡Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"🎓",promedioMin:6,promedioMax:6.5,mensaje:"¡Impresionante! Tu dedicación te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"🌟",promedioMin:6.6,promedioMax:7,mensaje:"¡Extraordinario! Eres una inspiración para tus compañeros."}],Gz=({onLoginAttempt:t,onForgotPasswordRequest:e,error:r})=>{const[n,a]=ne.useState(""),[s,i]=ne.useState(""),[o,c]=ne.useState("login"),u=p=>{p.preventDefault(),t(n,s)},f=p=>{p.preventDefault(),e(n),c("forgot_sent")},m=()=>o==="forgot"?l.jsxs("form",{onSubmit:f,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico Registrado"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:p=>a(p.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),l.jsx("div",{children:l.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperación"})}),l.jsx("div",{className:"text-sm text-center",children:l.jsx("button",{type:"button",onClick:()=>c("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesión"})})]}):o==="forgot_sent"?l.jsxs("div",{className:"text-center",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),l.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",l.jsx("strong",{children:n}),", hemos enviado un enlace para restablecer su contraseña."]}),l.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulación, revise la consola del navegador para ver el enlace)."}),l.jsx("button",{type:"button",onClick:()=>{c("login"),a("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:"← Volver a Iniciar Sesión"})]}):l.jsxs("form",{onSubmit:u,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:p=>a(p.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contraseña"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:s,onChange:p=>i(p.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),r&&l.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:l.jsx("p",{children:r})}),l.jsx("div",{className:"text-sm text-center",children:l.jsx("button",{type:"button",onClick:()=>c("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"¿Olvidó su contraseña?"})}),l.jsx("div",{children:l.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return l.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[l.jsxs("div",{className:"text-center mb-10",children:[l.jsx("div",{className:"mb-4 flex justify-center items-center",children:l.jsx(s5,{})}),l.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:o==="login"?"Bienvenido/a, por favor inicie sesión":"Recuperación de Contraseña"})]}),l.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:m()}),l.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},vb=({trigger:t,children:e,onOpen:r})=>{const[n,a]=ne.useState(!1),s=ne.useRef(null),i=()=>{const c=!n;a(c),c&&r&&r()},o=c=>{s.current&&!s.current.contains(c.target)&&a(!1)};return ne.useEffect(()=>(document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}),[]),l.jsxs("div",{className:"relative",ref:s,children:[l.jsx("div",{onClick:i,children:t}),n&&l.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>a(!1),children:e})]})},mN="usuariosLiceo",zz=({user:t,onClose:e,onSave:r})=>{const[n,a]=ne.useState({nombreCompleto:t.nombreCompleto,email:t.email,fotoUrl:t.fotoUrl||""}),s=o=>{a({...n,[o.target.name]:o.target.value})},i=o=>{o.preventDefault();const c={...t,...n};try{const u=localStorage.getItem(mN);let f=u?JSON.parse(u):[];const m=f.findIndex(p=>p.id===t.id);m>-1?f[m]=c:f.push(c),localStorage.setItem(mN,JSON.stringify(f)),r(c),e()}catch(u){console.error("Failed to save user profile:",u),alert("No se pudo guardar el perfil.")}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:l.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:o=>o.stopPropagation(),children:l.jsxs("form",{onSubmit:i,children:[l.jsxs("div",{className:"p-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),l.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:n.fotoUrl,onChange:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),l.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:n.nombreCompleto,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrónico"}),l.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Función"}),l.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:t.profile})]})]})]}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[l.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},pN="usuariosLiceo",qz=({user:t,onClose:e,onSave:r})=>{const[n,a]=ne.useState(""),[s,i]=ne.useState(""),[o,c]=ne.useState(null),u=f=>{if(f.preventDefault(),c(null),!n){c("La contraseña no puede estar en blanco.");return}if(n!==s){c("Las contraseñas no coinciden.");return}const m={...t,password:n};try{const p=localStorage.getItem(pN);let g=p?JSON.parse(p):[];const b=g.findIndex(y=>y.id===t.id);b>-1?g[b]=m:g.push(m),localStorage.setItem(pN,JSON.stringify(g)),r(m),e()}catch(p){console.error("Failed to save new password:",p),c("No se pudo guardar la nueva contraseña.")}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:l.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:f=>f.stopPropagation(),children:l.jsxs("form",{onSubmit:u,children:[l.jsxs("div",{className:"p-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuración de Cuenta"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),l.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:t.email})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contraseña"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:n,onChange:f=>a(f.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contraseña"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:s,onChange:f=>i(f.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),o&&l.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:l.jsx("p",{children:o})})]})]}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[l.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contraseña"})]})]})})})},gN="anunciosMuro",xN="mensajesInternos",vN="lir-read-status",Kz=({user:t})=>{if(t.fotoUrl)return l.jsx("img",{src:t.fotoUrl,alt:t.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const e=t.nombreCompleto||"",r=String(e).split(" ").filter(n=>n).map(n=>n[0]).join("").toUpperCase();return l.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:r.substring(0,2)})},Wz=({currentUser:t,onLogout:e,onNavigate:r,onUserUpdate:n,onChangeProfile:a,canChangeProfile:s,toggleSidebar:i,unreadMessagesCount:o,refreshUnreadCount:c})=>{const[u,f]=ne.useState([]),[m,p]=ne.useState([]),[g,b]=ne.useState(!1),[y,T]=ne.useState(!1),k=ne.useCallback(()=>{try{const H=localStorage.getItem(`${vN}-${t.id}`);return H?JSON.parse(H):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[t.id]),D=ne.useCallback(H=>{try{localStorage.setItem(`${vN}-${t.id}`,JSON.stringify(H))}catch(U){console.error("Failed to set read status:",U)}},[t.id]);ne.useEffect(()=>{const H=JSON.parse(localStorage.getItem(gN)||"[]"),U=k();f(H.filter(_=>!U.announcements.includes(_.id)));const E=JSON.parse(localStorage.getItem(xN)||"[]");p(E.filter(_=>_.para===t.email).sort((_,B)=>new Date(B.fecha).getTime()-new Date(_.fecha).getTime()).slice(0,5))},[t.id,k,o]);const L=()=>{const H=k(),U=JSON.parse(localStorage.getItem(gN)||"[]").map(E=>E.id);H.announcements=U,D(H),f([])},j=()=>{const H=k(),E=JSON.parse(localStorage.getItem(xN)||"[]").filter(_=>_.para===t.email).map(_=>_.id);H.messages=[...new Set([...H.messages,...E])],D(H),c()};return l.jsxs(l.Fragment,{children:[l.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:l.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:i,children:l.jsx(_z,{})}),l.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>r("Dashboard"),children:[l.jsxs("svg",{className:"w-8 h-8 text-slate-700 dark:text-slate-200",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20V6.5A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v13Z",stroke:"currentColor",strokeWidth:"1.5"}),l.jsx("path",{d:"M16 4.5V17",stroke:"currentColor",strokeWidth:"1.5"})]}),l.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestión LIR"})]})]}),l.jsx("div",{className:"flex-1 flex justify-center",children:l.jsx("button",{onClick:()=>r("Calendario Académico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Académico",children:l.jsx(Sz,{})})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(vb,{onOpen:L,trigger:l.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Notificaciones",children:[l.jsx(yp,{}),u.length>0&&l.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:u.length})]}),children:l.jsxs("div",{className:"p-2",children:[l.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),l.jsxs("ul",{className:"mt-1",children:[u.slice(0,3).map(H=>l.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[l.jsx("p",{className:"font-bold dark:text-slate-200",children:H.titulo}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:H.mensaje})]},H.id)),u.length===0&&l.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]}),l.jsx("button",{onClick:()=>r("Muro de Anuncios"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ver todo"})]})}),l.jsx(vb,{onOpen:j,trigger:l.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[l.jsx(bp,{}),o>0&&l.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:o})]}),children:l.jsxs("div",{className:"p-2",children:[l.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),l.jsxs("ul",{className:"mt-1",children:[m.slice(0,3).map(H=>l.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[l.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",H.de]}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:H.asunto})]},H.id)),m.length===0&&l.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]}),l.jsx("button",{onClick:()=>r("Mensajería Interna"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ir a la bandeja"})]})}),l.jsx(vb,{trigger:l.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:l.jsx(Kz,{user:t})}),children:l.jsxs("div",{className:"p-2",children:[l.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:t.nombreCompleto}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:t.profile})]}),l.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[l.jsx("li",{children:l.jsx("button",{onClick:()=>b(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),l.jsx("li",{children:l.jsx("button",{onClick:()=>T(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuración"})}),s&&l.jsx("li",{children:l.jsx("button",{onClick:a,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"👑 Cambiar Vista"})}),l.jsx("li",{children:l.jsx("button",{onClick:e,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesión"})})]})]})})]})]})}),g&&l.jsx(zz,{user:t,onClose:()=>b(!1),onSave:n}),y&&l.jsx(qz,{user:t,onClose:()=>T(!1),onSave:n})]})};var Tf={};const $z={apiKey:Tf.NEXT_PUBLIC_FIREBASE_API_KEY||"tu-api-key",authDomain:Tf.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"tu-proyecto.firebaseapp.com",projectId:Tf.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"tu-proyecto-id",storageBucket:Tf.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"tu-proyecto.appspot.com",messagingSenderId:Tf.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"123456789",appId:Tf.NEXT_PUBLIC_FIREBASE_APP_ID||"1:123456789:web:abcdef",measurementId:Tf.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||"G-XXXXXXXXXX"},PR=QT().length===0?c_($z):QT()[0],Tt=CR(PR);aD(PR);const Xg="reemplazos_docentes",Jz="usuarios",i5=t=>{var r,n,a,s;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion,fechaActualizacion:((s=(a=e.fechaActualizacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||e.fechaActualizacion}},Yz=t=>{const e=t.data();return{id:t.id,...e}},Xz=async(t,e)=>{try{const r={...t,userId:e,fechaCreacion:Ar.fromDate(new Date),fechaActualizacion:Ar.fromDate(new Date)};return(await Sa(Nt(Tt,Xg),r)).id}catch(r){throw console.error("Error al guardar reemplazo:",r),new Error("No se pudo guardar el reemplazo")}},Zz=async(t,e)=>{try{const r=_r(Tt,Xg,t),n=await Wg(r);if(!n.exists()||n.data().userId!==e)throw new Error("No tienes permisos para eliminar este reemplazo");await Oi(r)}catch(r){throw console.error("Error al eliminar reemplazo:",r),new Error("No se pudo eliminar el reemplazo")}},eq=(t,e,r=50)=>{try{const n=er(Nt(Tt,Xg),Tn("userId","==",t),fn("diaAusencia","desc"),cu(r));return br(n,a=>{const s=a.docs.map(i5);e(s)},a=>{console.error("Error en suscripción a reemplazos:",a),e([])})}catch(n){return console.error("Error al crear la suscripción de reemplazos:",n),()=>{}}},tq=t=>{try{const e=er(Nt(Tt,Jz),Tn("profile","==",Pt.PROFESORADO));return br(e,n=>{const a=n.docs.map(Yz);t(a)},n=>{console.error("Error al obtener la lista de profesores:",n),t([])})}catch(e){return console.error("Error al crear la suscripción de profesores:",e),()=>{}}},rq=async t=>{try{const e=er(Nt(Tt,Xg),Tn("userId","==",t)),n=(await ps(e)).docs.map(i5),a=n.length,s=n.filter(o=>o.resultado==="Hora realizada").length,i=n.filter(o=>o.resultado==="Hora cubierta, no realizada").length;return{totalReemplazos:a,horasRealizadas:s,horasCubiertas:i,porcentajeRealizadas:a>0?s/a*100:0}}catch(e){throw console.error("Error al obtener estadísticas:",e),new Error("No se pudieron obtener las estadísticas")}},nq=async(t,e)=>{try{if(!e.trim())return[];const r=er(Nt(Tt,Xg),Tn("userId","==",t),fn("diaAusencia","desc"),cu(100)),a=(await ps(r)).docs.map(i5),s=e.toLowerCase();return a.filter(i=>i.docenteAusente.toLowerCase().includes(s)||i.docenteReemplazante.toLowerCase().includes(s)||i.curso.toLowerCase().includes(s)||i.diaAusencia.includes(s)||i.asignaturaAusente.toLowerCase().includes(s)||i.asignaturaReemplazante.toLowerCase().includes(s))}catch(r){return console.error("Error en búsqueda de reemplazos:",r),[]}},aq=Array.from({length:12},(t,e)=>e+1),wN={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},sq=t=>{const[e,r]=ne.useState([]),[n,a]=ne.useState(!0),[s,i]=ne.useState(null);ne.useEffect(()=>t?eq(t,m=>{r(m),a(!1)}):void 0,[t]);const o=ne.useCallback(async f=>{try{return i(null),await Xz(f,t)}catch(m){throw i(m instanceof Error?m.message:"Error al guardar"),m}},[t]),c=ne.useCallback(async f=>{try{i(null),await Zz(f,t)}catch(m){throw i(m instanceof Error?m.message:"Error al eliminar"),m}},[t]),u=ne.useCallback(async f=>{try{return i(null),f.trim()?await nq(t,f):e}catch(m){return i(m instanceof Error?m.message:"Error en la búsqueda"),[]}},[t,e]);return{reemplazos:e,loading:n,error:s,save:o,remove:c,search:u}},iq=()=>{const[t,e]=ne.useState([]),[r,n]=ne.useState(!0);ne.useEffect(()=>tq(i=>{e(i),n(!1)}),[]);const a=ne.useMemo(()=>t.map(s=>s.nombreCompleto).sort(),[t]);return{profesores:t,profesorNames:a,loading:r}},oq=({selectedBlocks:t,onChange:e,legend:r,disabled:n=!1})=>l.jsxs("fieldset",{children:[l.jsx("legend",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:r}),l.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-2",children:aq.map(a=>l.jsxs("label",{className:`flex items-center space-x-2 p-2 border rounded-lg transition-colors ${n?"opacity-50 cursor-not-allowed":"hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-700"}`,children:[l.jsx("input",{type:"checkbox",value:a,checked:t.includes(a),onChange:e,disabled:n,className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500 disabled:opacity-50"}),l.jsx("span",{className:"text-slate-600 dark:text-slate-300 font-medium",children:a})]},a))})]}),lq=({userId:t})=>{const[e,r]=ne.useState(null),[n,a]=ne.useState(!1),s=ne.useCallback(async()=>{try{a(!0);const i=new Date,o=(i.getMonth()+1).toString(),c=i.getFullYear().toString(),u=await rq(t);r(u)}catch(i){console.error("Error al cargar estadísticas:",i)}finally{a(!1)}},[t]);return ne.useEffect(()=>{t&&s()},[t,s]),n?l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:l.jsx("div",{className:"animate-pulse flex justify-center",children:l.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"})})}):e?l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:[l.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Estadísticas del Mes"}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:e.totalReemplazos}),l.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Total"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:e.horasRealizadas}),l.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Realizadas"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:e.horasCubiertas}),l.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Cubiertas"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[e.porcentajeRealizadas.toFixed(1),"%"]}),l.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Efectividad"})]})]})]}):null},cq=({currentUser:t})=>{const e=t.email||t.id||"",{reemplazos:r,save:n,remove:a,search:s,loading:i,error:o}=sq(e),{profesorNames:c,loading:u}=iq(),[f,m]=ne.useState(wN),[p,g]=ne.useState(""),[b,y]=ne.useState([]),[T,k]=ne.useState(null),[D,L]=ne.useState(!1),[j,H]=ne.useState(!1);ne.useEffect(()=>{(async()=>{if(!p.trim()){y(r);return}H(!0);try{const F=await s(p);y(F)}catch(F){console.error("Error en búsqueda:",F),y(r)}finally{H(!1)}})()},[r,p,s]);const U=ne.useCallback(R=>{const{name:F,value:V}=R.target;m(X=>({...X,[F]:V}))},[]),E=ne.useCallback(R=>{const F=parseInt(R.target.value,10);m(V=>{const X=V.bloquesAfectados,oe=X.includes(F)?X.filter(te=>te!==F):[...X,F].sort((te,ae)=>te-ae);return{...V,bloquesAfectados:oe}})},[]),_=ne.useCallback(async R=>{R.preventDefault(),k(null),L(!0);const{docenteAusente:F,asignaturaAusente:V,curso:X,diaAusencia:oe,bloquesAfectados:te,docenteReemplazante:ae,asignaturaReemplazante:q}=f;if(!F||!V||!X||!oe||!ae||!q||te.length===0){k("Todos los campos son obligatorios y debe seleccionar al menos un bloque."),L(!1);return}if(F===ae){k("El docente ausente y el reemplazante no pueden ser la misma persona."),L(!1);return}const J=new Date(oe),W=new Date;if(W.setHours(0,0,0,0),J<W&&!window.confirm("La fecha seleccionada es anterior a hoy. ¿Desea continuar?")){L(!1);return}try{const de=V.trim().toLowerCase()===q.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",P={...f,resultado:de};await n(P),m(wN);const K=de==="Hora realizada"?"✅ Reemplazo registrado - Hora realizada":"⚠️ Reemplazo registrado - Hora cubierta, no realizada",Y=document.createElement("div");Y.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50",Y.textContent=K,document.body.appendChild(Y),setTimeout(()=>{document.body.contains(Y)&&document.body.removeChild(Y)},3e3)}catch(de){console.error("Error al guardar reemplazo:",de),k("Error al guardar el reemplazo. Por favor, intente nuevamente.")}finally{L(!1)}},[f,n]),B=ne.useCallback(async R=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await a(R)}catch(F){console.error("Error al eliminar reemplazo:",F),alert("Error al eliminar el reemplazo. Por favor, intente nuevamente.")}},[a]),Q="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400 disabled:opacity-50 disabled:cursor-not-allowed";return!t||!t.email&&!t.id?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),l.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(t)]})]})}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx(lq,{userId:e}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Registro de Inasistencias y Reemplazos"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete el formulario para registrar una nueva suplencia."}),u?l.jsxs("div",{className:"flex justify-center items-center py-8",children:[l.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando profesores..."})]}):l.jsxs("form",{onSubmit:_,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Ausente"}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"docenteAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),l.jsxs("select",{name:"docenteAusente",value:f.docenteAusente,onChange:U,className:Q,disabled:D,required:!0,children:[l.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(R=>l.jsx("option",{value:R,children:R},R))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignaturaAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsxs("select",{name:"asignaturaAusente",value:f.asignaturaAusente,onChange:U,className:Q,disabled:D,required:!0,children:[l.jsx("option",{value:"",children:"Seleccione una asignatura"}),Xo.map(R=>l.jsx("option",{value:R,children:R},R))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),l.jsxs("select",{name:"curso",value:f.curso,onChange:U,className:Q,disabled:D,required:!0,children:[l.jsx("option",{value:"",children:"Seleccione un curso"}),Za.map(R=>l.jsx("option",{value:R,children:R},R))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"diaAusencia",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Día Ausencia"}),l.jsx("input",{type:"date",name:"diaAusencia",value:f.diaAusencia,onChange:U,className:Q,disabled:D,required:!0})]}),l.jsx(oq,{legend:"Bloques Afectados",selectedBlocks:f.bloquesAfectados,onChange:E,disabled:D})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Reemplazante"}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"docenteReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),l.jsxs("select",{name:"docenteReemplazante",value:f.docenteReemplazante,onChange:U,className:Q,disabled:D,required:!0,children:[l.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(R=>l.jsx("option",{value:R,children:R},R))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignaturaReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsxs("select",{name:"asignaturaReemplazante",value:f.asignaturaReemplazante,onChange:U,className:Q,disabled:D,required:!0,children:[l.jsx("option",{value:"",children:"Seleccione una asignatura"}),Xo.map(R=>l.jsx("option",{value:R,children:R},R))]})]}),f.asignaturaAusente&&f.asignaturaReemplazante&&l.jsxs("div",{className:"mt-6 p-4 rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-600",children:[l.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Vista Previa del Resultado:"}),l.jsx("div",{className:`px-3 py-2 rounded-full text-sm font-semibold inline-flex ${f.asignaturaAusente.toLowerCase()===f.asignaturaReemplazante.toLowerCase()?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"}`,children:f.asignaturaAusente.toLowerCase()===f.asignaturaReemplazante.toLowerCase()?"✅ Hora realizada":"⚠️ Hora cubierta, no realizada"}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:f.asignaturaAusente.toLowerCase()===f.asignaturaReemplazante.toLowerCase()?"Las asignaturas coinciden - se considera hora realizada":"Las asignaturas no coinciden - se considera hora cubierta pero no realizada"})]})]})]}),(T||o)&&l.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:l.jsx("p",{className:"text-red-600 dark:text-red-400",children:T||o})}),l.jsx("div",{className:"pt-4 text-right",children:l.jsxs("button",{type:"submit",disabled:D||u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[D&&l.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),D?"Registrando...":"Registrar Reemplazo"]})})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Reemplazos"}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)...",value:p,onChange:R=>g(R.target.value),className:`${Q} md:w-1/2 pl-10`,disabled:j}),l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:j?l.jsx("div",{className:"w-4 h-4 border-2 border-slate-400 border-t-transparent rounded-full animate-spin"}):l.jsx("svg",{className:"h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),p&&l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:j?"Buscando...":`${b.length} resultado(s) encontrado(s)`})]}),i?l.jsxs("div",{className:"flex justify-center items-center py-8",children:[l.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando reemplazos..."})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Ausente"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Reemplazante"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Bloques"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Resultado"}),l.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:b.length>0?b.map(R=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(R.diaAusencia+"T12:00:00").toLocaleDateString("es-CL")}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:R.curso}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[R.docenteAusente,l.jsx("br",{}),l.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:R.asignaturaAusente})]}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[R.docenteReemplazante,l.jsx("br",{}),l.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:R.asignaturaReemplazante})]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:R.bloquesAfectados.join(", ")}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:l.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${R.resultado==="Hora realizada"?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"}`,children:R.resultado})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm",children:l.jsx("button",{onClick:()=>B(R.id),title:"Eliminar registro",className:"p-1 text-red-600 hover:text-red-800 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors disabled:opacity-50",disabled:D,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},R.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:p?"No se encontraron registros que coincidan con la búsqueda.":"No hay registros de reemplazos."})})})]})}),b.length>0&&!p&&l.jsxs("div",{className:"mt-4 text-sm text-slate-500 dark:text-slate-400 text-center",children:["Mostrando los últimos ",b.length," registros"]})]})]})},Aq=t=>{console.log("🔄 Iniciando suscripción a todos los reemplazos...");try{const e=Nt(Gr,"reemplazos"),r=er(e,fn("fecha","desc"));return br(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Reemplazos cargados para dashboard:",s.length),t(s)},a=>{throw console.error("❌ Error al cargar reemplazos:",a),a})}catch(e){throw console.error("❌ Error al configurar suscripción a reemplazos:",e),e}},uq=t=>{console.log("🔄 Iniciando suscripción a todos los acompañamientos...");try{const e=Nt(Gr,"acompanamientos"),r=er(e,fn("fecha","desc"));return br(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Acompañamientos cargados para dashboard:",s.length),t(s)},a=>{throw console.error("❌ Error al cargar acompañamientos:",a),a})}catch(e){throw console.error("❌ Error al configurar suscripción a acompañamientos:",e),e}},dq=t=>{console.log("🔄 Iniciando suscripción a todos los eventos del calendario...");try{const e=Nt(Gr,"calendar_events"),r=er(e,fn("date","asc"));return br(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Eventos del calendario cargados para dashboard:",s.length),t(s)},a=>{throw console.error("❌ Error al cargar eventos del calendario:",a),a})}catch(e){throw console.error("❌ Error al configurar suscripción a eventos del calendario:",e),e}},tA=({title:t,value:e,description:r,isLoading:n=!1})=>l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:t}),n?l.jsxs("div",{className:"flex items-center mt-2",children:[l.jsx("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:e}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]})]}),Bf=({title:t,data:e,colorClass:r,valueFormatter:n=s=>String(s),isLoading:a=!1})=>{const s=ne.useMemo(()=>e.map(o=>typeof o.value=="number"?o.value:parseFloat(String(o.value))||0),[e]),i=ne.useMemo(()=>Math.max(...s,1),[s]);return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:t}),a?l.jsxs("div",{className:"flex justify-center items-center py-8",children:[l.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando datos..."})]}):l.jsx("div",{className:"space-y-4",children:e.length>0?e.sort((o,c)=>(typeof c.value=="number"?c.value:0)-(typeof o.value=="number"?o.value:0)).map((o,c)=>{const u=typeof o.value=="number"?o.value:parseFloat(String(o.value))||0;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:o.label}),l.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:n(o.value)})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:l.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${u/i*100}%`}})})]},o.label+c)}):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},fq=()=>{const[t,e]=ne.useState([]),[r,n]=ne.useState([]),[a,s]=ne.useState([]),[i,o]=ne.useState(!0),[c,u]=ne.useState(null);return ne.useEffect(()=>{console.log("🔄 Iniciando carga de datos del dashboard...");let f=0;const m=3,p=()=>{f++,f>=m&&(o(!1),console.log("✅ Todos los datos del dashboard cargados"))};try{const g=Aq(T=>{e(T),p()}),b=uq(T=>{n(T),p()}),y=dq(T=>{s(T),p()});return()=>{g(),b(),y()}}catch(g){console.error("❌ Error al configurar suscripciones del dashboard:",g),u(g instanceof Error?g.message:"Error al cargar datos del dashboard"),o(!1)}},[]),{registros:t,acompanamientos:r,calendarEvents:a,loading:i,error:c}},hq=({currentUser:t})=>{var m,p;console.log("=== DASHBOARD SUBDIRECCION DEBUG ==="),console.log("🔍 Dashboard - currentUser completo:",t),console.log("🔍 Dashboard - currentUser.profile:",t==null?void 0:t.profile),console.log("🔍 Dashboard - Verificación de perfil:",(t==null?void 0:t.profile)==="SUBDIRECCION"),console.log("🔍 Dashboard - Typeof profile:",typeof(t==null?void 0:t.profile)),console.log("🔍 Dashboard - Profile length:",(m=t==null?void 0:t.profile)==null?void 0:m.length),console.log("🔍 Dashboard - Profile con comillas:",`"${t==null?void 0:t.profile}"`),console.log("🔍 Dashboard - Comparación con trim:",((p=t==null?void 0:t.profile)==null?void 0:p.trim())==="SUBDIRECCION"),console.log("=====================================");const{registros:e,acompanamientos:r,calendarEvents:n,loading:a,error:s}=fq(),[i,o]=ne.useState(jp);if(console.log("🔍 Dashboard - Datos recibidos:",{registros:e.length,acompanamientos:r.length,calendarEvents:n.length,loading:a,error:s,currentUser:t==null?void 0:t.profile}),ne.useEffect(()=>{try{const g=localStorage.getItem("acompanamientoDocenteCustomRubrica");o(g?JSON.parse(g):jp)}catch(g){console.error("Error al leer rúbrica personalizada",g),o(jp)}},[]),console.log("🔍 Dashboard - Verificando permisos..."),console.log("🔍 Dashboard - currentUser existe:",!!t),console.log("🔍 Dashboard - profile value:",`"${t==null?void 0:t.profile}"`),console.log("🔍 Dashboard - comparación exacta:",(t==null?void 0:t.profile)==="SUBDIRECCION"),!t)return console.log("❌ Dashboard - currentUser es null/undefined"),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando usuario..."}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Esperando datos del usuario autenticado..."})]});if(t.profile!=="SUBDIRECCION")return console.log("❌ Dashboard - Perfil no autorizado:",t.profile),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("span",{className:"text-6xl mb-4",children:"🚫"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acceso Restringido"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Este dashboard está disponible solo para usuarios con perfil de Subdirección."}),l.jsxs("div",{className:"mt-4 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs text-slate-600 dark:text-slate-400",children:[l.jsx("p",{children:l.jsx("strong",{children:"Debug Info:"})}),l.jsxs("p",{children:['Su perfil actual: "',t.profile,'"']}),l.jsx("p",{children:'Perfil requerido: "SUBDIRECCION"'}),l.jsxs("p",{children:["Usuario: ",t.email||t.nombreCompleto]})]})]});if(console.log("✅ Dashboard - Permisos verificados correctamente"),s)return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("span",{className:"text-6xl mb-4",children:"⚠️"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error al Cargar Datos"}),l.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg max-w-md mb-4",children:s}),l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Recargar Página"})]});const c=ne.useMemo(()=>{const g=e.length;if(g===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const b=e.filter(H=>H.resultado==="Hora realizada").length,y=g-b,T=`${(b/g*100).toFixed(1)}%`,k=(H,U)=>H.reduce((E,_)=>{const B=_[U];return typeof B=="string"&&(E[B]=(E[B]||0)+1),E},{}),D=k(e,"docenteAusente"),L=k(e,"docenteReemplazante"),j=k(e,"curso");return{totalInasistencias:g,horasRealizadas:b,horasCubiertas:y,tasaCobertura:T,inasistenciasPorDocente:Object.entries(D).map(([H,U])=>({label:H,value:U})),reemplazosPorDocente:Object.entries(L).map(([H,U])=>({label:H,value:U})),inasistenciasPorCurso:Object.entries(j).map(([H,U])=>({label:H,value:U})),distribucionResultados:[{label:"Hora Realizada",value:b},{label:"Hora Cubierta",value:y}]}},[e]),u=ne.useMemo(()=>{const g=r.length;if(g===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const b=new Map;i.forEach(U=>{U.criteria.forEach(E=>{b.set(E.name,U.domain)})});let y=0,T=0;const k={},D={};r.forEach(U=>{k[U.docente]||(k[U.docente]={total:0,count:0}),Object.entries(U.rubricaResultados).forEach(([E,_])=>{y+=_,T++,k[U.docente].total+=_,k[U.docente].count++;const B=b.get(E);B&&(D[B]||(D[B]={total:0,count:0}),D[B].total+=_,D[B].count++)})});const L=T>0?(y/T).toFixed(2):"N/A",j=Object.entries(k).map(([U,E])=>({label:U,value:E.count>0?(E.total/E.count).toFixed(2):0})),H=Object.entries(D).map(([U,E])=>({label:U,value:E.count>0?(E.total/E.count).toFixed(2):0}));return{totalAcompanamientos:g,promedioGeneral:L,desempenoPorDocente:j,desempenoPorDominio:H}},[r,i]),f=ne.useMemo(()=>{const g={[Hr.EVALUACION]:0,[Hr.ACTO]:0,[Hr.ACTIVIDAD_FOCALIZADA]:0,[Hr.SALIDA_PEDAGOGICA]:0};for(const y of n)g.hasOwnProperty(y.type)&&g[y.type]++;const b=Object.entries(g).map(([y,T])=>({label:wd[y].label,value:T}));return{totalEvaluaciones:g[Hr.EVALUACION],totalActos:g[Hr.ACTO],totalActividadesFocalizadas:g[Hr.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:g[Hr.SALIDA_PEDAGOGICA],distribucionEventos:b}},[n]);return a?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando Dashboard"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Obteniendo datos desde la base de datos..."})]}):c.totalInasistencias===0&&u.totalAcompanamientos===0&&n.length===0?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("span",{className:"text-6xl mb-4",children:"📊"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdirección"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Aún no hay datos para mostrar. Comience por añadir registros en los módulos correspondientes."}),l.jsxs("div",{className:"text-sm text-slate-400 dark:text-slate-500",children:[l.jsx("p",{children:"• Módulo de Inasistencias y Reemplazos"}),l.jsx("p",{children:"• Módulo de Acompañamiento Docente"}),l.jsx("p",{children:"• Calendario Académico"})]})]}):l.jsxs("div",{className:"space-y-12 animate-fade-in",children:[l.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 text-white p-6 rounded-xl shadow-lg",children:[l.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Subdirección"}),l.jsx("p",{className:"text-amber-100",children:"Vista consolidada de datos institucionales"}),l.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["Última actualización: ",new Date().toLocaleString("es-CL")]})]}),e.length>0&&l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📋 Dashboard de Inasistencias y Reemplazos"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(tA,{title:"Total Inasistencias",value:c.totalInasistencias,description:"Registros totales",isLoading:a}),l.jsx(tA,{title:"Horas Realizadas",value:c.horasRealizadas,description:"Reemplazo con misma asignatura",isLoading:a}),l.jsx(tA,{title:"Horas Cubiertas",value:c.horasCubiertas,description:"Reemplazo con otra asignatura",isLoading:a}),l.jsx(tA,{title:"Tasa de Cobertura Efectiva",value:c.tasaCobertura,description:"% de horas realizadas",isLoading:a})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsx(Bf,{title:"Inasistencias por Docente",data:c.inasistenciasPorDocente,colorClass:"bg-red-400",isLoading:a}),l.jsx(Bf,{title:"Reemplazos por Docente",data:c.reemplazosPorDocente,colorClass:"bg-sky-400",isLoading:a}),l.jsx(Bf,{title:"Inasistencias por Curso",data:c.inasistenciasPorCurso,colorClass:"bg-amber-400",isLoading:a}),l.jsx(Bf,{title:"Distribución de Resultados",data:c.distribucionResultados,colorClass:"bg-green-400",isLoading:a})]})]}),r.length>0&&l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"👥 Dashboard de Acompañamiento Docente"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(tA,{title:"Total Acompañamientos",value:u.totalAcompanamientos,description:"Registros realizados",isLoading:a}),l.jsx(tA,{title:"Promedio General",value:u.promedioGeneral,description:"Calificación promedio (1-4)",isLoading:a})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsx(Bf,{title:"Desempeño Promedio por Docente",data:u.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:g=>Number(g).toFixed(2),isLoading:a}),l.jsx(Bf,{title:"Desempeño Promedio por Dominio",data:u.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:g=>Number(g).toFixed(2),isLoading:a})]})]}),n.length>0&&l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📅 Resumen del Calendario Académico"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(tA,{title:"Evaluaciones",value:f.totalEvaluaciones,description:"Eventos registrados",isLoading:a}),l.jsx(tA,{title:"Actos",value:f.totalActos,description:"Eventos registrados",isLoading:a}),l.jsx(tA,{title:"Act. Focalizadas",value:f.totalActividadesFocalizadas,description:"Eventos registrados",isLoading:a}),l.jsx(tA,{title:"Salidas Pedagógicas",value:f.totalSalidasPedagogicas,description:"Eventos registrados",isLoading:a})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsx(Bf,{title:"Distribución de Eventos del Calendario",data:f.distribucionEventos,colorClass:"bg-violet-400",isLoading:a}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Próximos Eventos"}),a?l.jsxs("div",{className:"flex justify-center items-center py-8",children:[l.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando eventos..."})]}):l.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[n.filter(g=>new Date(g.date)>=new Date).slice(0,5).map((g,b)=>{var y,T;return l.jsx("div",{className:"p-3 border dark:border-slate-600 rounded-md",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:g.responsables||"Evento sin título"}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(g.date).toLocaleDateString("es-CL")}),g.ubicacion&&l.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["📍 ",g.ubicacion]})]}),l.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${((y=wd[g.type])==null?void 0:y.color)||"bg-gray-100 text-gray-800"}`,children:((T=wd[g.type])==null?void 0:T.label)||g.type})]})},g.id||b)}),n.filter(g=>new Date(g.date)>=new Date).length===0&&l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay eventos próximos programados"})]})]})]})]}),l.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"📈 Resumen Ejecutivo"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:e.length+r.length+n.length}),l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Total de registros en el sistema"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:new Set([...e.map(g=>g.docenteAusente),...r.map(g=>g.docente)]).size}),l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Docentes con registros"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[Math.round(e.filter(g=>g.resultado==="Hora realizada").length/Math.max(e.length,1)*100),"%"]}),l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Efectividad en cobertura"})]})]})]}),l.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-6",children:[l.jsx("p",{children:"Dashboard de Subdirección - Sistema de Gestión Pedagógica"}),l.jsx("p",{children:"Los datos se actualizan en tiempo real desde la base de datos"})]})]})};var yN;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(yN||(yN={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bN;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(bN||(bN={}));var CN;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(CN||(CN={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=["user","model","function","system"];var _N;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(_N||(_N={}));var SN;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(SN||(SN={}));var TN;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(TN||(TN={}));var BN;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(BN||(BN={}));var Op;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.OTHER="OTHER"})(Op||(Op={}));var NN;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(NN||(NN={}));var kN;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(kN||(kN={}));var IN;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(IN||(IN={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class $h extends Di{constructor(e,r){super(e),this.response=r}}class jR extends Di{constructor(e,r,n,a){super(e),this.status=r,this.statusText=n,this.errorDetails=a}}class Dd extends Di{}class OR extends Di{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mq="https://generativelanguage.googleapis.com",pq="v1beta",gq="0.24.1",xq="genai-js";var Zf;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Zf||(Zf={}));class vq{constructor(e,r,n,a,s){this.model=e,this.task=r,this.apiKey=n,this.stream=a,this.requestOptions=s}toString(){var e,r;const n=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||pq;let s=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||mq}/${n}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}function wq(t){const e=[];return t!=null&&t.apiClient&&e.push(t.apiClient),e.push(`${xq}/${gq}`),e.join(" ")}async function yq(t){var e;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",wq(t.requestOptions)),r.append("x-goog-api-key",t.apiKey);let n=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(a){throw new Dd(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${a.message}`)}for(const[a,s]of n.entries()){if(a==="x-goog-api-key")throw new Dd(`Cannot set reserved header name ${a}`);if(a==="x-goog-api-client")throw new Dd(`Header name ${a} can only be set using the apiClient field`);r.append(a,s)}}return r}async function bq(t,e,r,n,a,s){const i=new vq(t,e,r,n,s);return{url:i.toString(),fetchOptions:Object.assign(Object.assign({},Sq(s)),{method:"POST",headers:await yq(i),body:a})}}async function Zg(t,e,r,n,a,s={},i=fetch){const{url:o,fetchOptions:c}=await bq(t,e,r,n,a,s);return Cq(o,c,i)}async function Cq(t,e,r=fetch){let n;try{n=await r(t,e)}catch(a){Eq(a,t)}return n.ok||await _q(n,t),n}function Eq(t,e){let r=t;throw r.name==="AbortError"?(r=new OR(`Request aborted when fetching ${e.toString()}: ${t.message}`),r.stack=t.stack):t instanceof jR||t instanceof Dd||(r=new Di(`Error fetching from ${e.toString()}: ${t.message}`),r.stack=t.stack),r}async function _q(t,e){let r="",n;try{const a=await t.json();r=a.error.message,a.error.details&&(r+=` ${JSON.stringify(a.error.details)}`,n=a.error.details)}catch{}throw new jR(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${r}`,t.status,t.statusText,n)}function Sq(t){const e={};if((t==null?void 0:t.signal)!==void 0||(t==null?void 0:t.timeout)>=0){const r=new AbortController;(t==null?void 0:t.timeout)>=0&&setTimeout(()=>r.abort(),t.timeout),t!=null&&t.signal&&t.signal.addEventListener("abort",()=>{r.abort()}),e.signal=r.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o5(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),pv(t.candidates[0]))throw new $h(`${hd(t)}`,t);return Tq(t)}else if(t.promptFeedback)throw new $h(`Text not available. ${hd(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),pv(t.candidates[0]))throw new $h(`${hd(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),FN(t)[0]}else if(t.promptFeedback)throw new $h(`Function call not available. ${hd(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),pv(t.candidates[0]))throw new $h(`${hd(t)}`,t);return FN(t)}else if(t.promptFeedback)throw new $h(`Function call not available. ${hd(t)}`,t)},t}function Tq(t){var e,r,n,a;const s=[];if(!((r=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||r===void 0)&&r.parts)for(const i of(a=(n=t.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)i.text&&s.push(i.text),i.executableCode&&s.push("\n```"+i.executableCode.language+`
`+i.executableCode.code+"\n```\n"),i.codeExecutionResult&&s.push("\n```\n"+i.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function FN(t){var e,r,n,a;const s=[];if(!((r=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||r===void 0)&&r.parts)for(const i of(a=(n=t.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)i.functionCall&&s.push(i.functionCall);if(s.length>0)return s}const Bq=[Op.RECITATION,Op.SAFETY,Op.LANGUAGE];function pv(t){return!!t.finishReason&&Bq.includes(t.finishReason)}function hd(t){var e,r,n;let a="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)a+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(a+=` due to ${t.promptFeedback.blockReason}`),!((r=t.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(a+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((n=t.candidates)===null||n===void 0)&&n[0]){const s=t.candidates[0];pv(s)&&(a+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(a+=`: ${s.finishMessage}`))}return a}function fg(t){return this instanceof fg?(this.v=t,this):new fg(t)}function Nq(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),a,s=[];return a={},i("next"),i("throw"),i("return"),a[Symbol.asyncIterator]=function(){return this},a;function i(p){n[p]&&(a[p]=function(g){return new Promise(function(b,y){s.push([p,g,b,y])>1||o(p,g)})})}function o(p,g){try{c(n[p](g))}catch(b){m(s[0][3],b)}}function c(p){p.value instanceof fg?Promise.resolve(p.value.v).then(u,f):m(s[0][2],p)}function u(p){o("next",p)}function f(p){o("throw",p)}function m(p,g){p(g),s.shift(),s.length&&o(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function kq(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=Dq(e),[n,a]=r.tee();return{stream:Fq(n),response:Iq(a)}}async function Iq(t){const e=[],r=t.getReader();for(;;){const{done:n,value:a}=await r.read();if(n)return o5(Rq(e));e.push(a)}}function Fq(t){return Nq(this,arguments,function*(){const r=t.getReader();for(;;){const{value:n,done:a}=yield fg(r.read());if(a)break;yield yield fg(o5(n))}})}function Dq(t){const e=t.getReader();return new ReadableStream({start(n){let a="";return s();function s(){return e.read().then(({value:i,done:o})=>{if(o){if(a.trim()){n.error(new Di("Failed to parse stream"));return}n.close();return}a+=i;let c=a.match(DN),u;for(;c;){try{u=JSON.parse(c[1])}catch{n.error(new Di(`Error parsing JSON response: "${c[1]}"`));return}n.enqueue(u),a=a.substring(c[0].length),c=a.match(DN)}return s()}).catch(i=>{let o=i;throw o.stack=i.stack,o.name==="AbortError"?o=new OR("Request aborted when reading from the stream"):o=new Di("Error reading from the stream"),o})}}})}function Rq(t){const e=t[t.length-1],r={promptFeedback:e==null?void 0:e.promptFeedback};for(const n of t){if(n.candidates){let a=0;for(const s of n.candidates)if(r.candidates||(r.candidates=[]),r.candidates[a]||(r.candidates[a]={index:a}),r.candidates[a].citationMetadata=s.citationMetadata,r.candidates[a].groundingMetadata=s.groundingMetadata,r.candidates[a].finishReason=s.finishReason,r.candidates[a].finishMessage=s.finishMessage,r.candidates[a].safetyRatings=s.safetyRatings,s.content&&s.content.parts){r.candidates[a].content||(r.candidates[a].content={role:s.content.role||"user",parts:[]});const i={};for(const o of s.content.parts)o.text&&(i.text=o.text),o.functionCall&&(i.functionCall=o.functionCall),o.executableCode&&(i.executableCode=o.executableCode),o.codeExecutionResult&&(i.codeExecutionResult=o.codeExecutionResult),Object.keys(i).length===0&&(i.text=""),r.candidates[a].content.parts.push(i)}a++}n.usageMetadata&&(r.usageMetadata=n.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QR(t,e,r,n){const a=await Zg(e,Zf.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(r),n);return kq(a)}async function HR(t,e,r,n){const s=await(await Zg(e,Zf.GENERATE_CONTENT,t,!1,JSON.stringify(r),n)).json();return{response:o5(s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function hg(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const r of t)typeof r=="string"?e.push({text:r}):e.push(r);return Lq(e)}function Lq(t){const e={role:"user",parts:[]},r={role:"function",parts:[]};let n=!1,a=!1;for(const s of t)"functionResponse"in s?(r.parts.push(s),a=!0):(e.parts.push(s),n=!0);if(n&&a)throw new Di("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!a)throw new Di("No content is provided for sending chat message.");return n?e:r}function Uq(t,e){var r;let n={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(r=e==null?void 0:e.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const a=t.generateContentRequest!=null;if(t.contents){if(a)throw new Dd("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=t.contents}else if(a)n=Object.assign(Object.assign({},n),t.generateContentRequest);else{const s=hg(t);n.contents=[s]}return{generateContentRequest:n}}function RN(t){let e;return t.contents?e=t:e={contents:[hg(t)]},t.systemInstruction&&(e.systemInstruction=VR(t.systemInstruction)),e}function Mq(t){return typeof t=="string"||Array.isArray(t)?{content:hg(t)}:t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Pq={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function jq(t){let e=!1;for(const r of t){const{role:n,parts:a}=r;if(!e&&n!=="user")throw new Di(`First content should be with role 'user', got ${n}`);if(!EN.includes(n))throw new Di(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(EN)}`);if(!Array.isArray(a))throw new Di("Content should have 'parts' property with an array of Parts");if(a.length===0)throw new Di("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const o of a)for(const c of LN)c in o&&(s[c]+=1);const i=Pq[n];for(const o of LN)if(!i.includes(o)&&s[o]>0)throw new Di(`Content with role '${n}' can't contain '${o}' part`);e=!0}}function UN(t){var e;if(t.candidates===void 0||t.candidates.length===0)return!1;const r=(e=t.candidates[0])===null||e===void 0?void 0:e.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const n of r.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN="SILENT_ERROR";class Oq{constructor(e,r,n,a={}){this.model=r,this.params=n,this._requestOptions=a,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,n!=null&&n.history&&(jq(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,r={}){var n,a,s,i,o,c;await this._sendPromise;const u=hg(e),f={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},m=Object.assign(Object.assign({},this._requestOptions),r);let p;return this._sendPromise=this._sendPromise.then(()=>HR(this._apiKey,this.model,f,m)).then(g=>{var b;if(UN(g.response)){this._history.push(u);const y=Object.assign({parts:[],role:"model"},(b=g.response.candidates)===null||b===void 0?void 0:b[0].content);this._history.push(y)}else{const y=hd(g.response);y&&console.warn(`sendMessage() was unsuccessful. ${y}. Inspect response object for details.`)}p=g}).catch(g=>{throw this._sendPromise=Promise.resolve(),g}),await this._sendPromise,p}async sendMessageStream(e,r={}){var n,a,s,i,o,c;await this._sendPromise;const u=hg(e),f={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},m=Object.assign(Object.assign({},this._requestOptions),r),p=QR(this._apiKey,this.model,f,m);return this._sendPromise=this._sendPromise.then(()=>p).catch(g=>{throw new Error(MN)}).then(g=>g.response).then(g=>{if(UN(g)){this._history.push(u);const b=Object.assign({},g.candidates[0].content);b.role||(b.role="model"),this._history.push(b)}else{const b=hd(g);b&&console.warn(`sendMessageStream() was unsuccessful. ${b}. Inspect response object for details.`)}}).catch(g=>{g.message!==MN&&console.error(g)}),p}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qq(t,e,r,n){return(await Zg(e,Zf.COUNT_TOKENS,t,!1,JSON.stringify(r),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hq(t,e,r,n){return(await Zg(e,Zf.EMBED_CONTENT,t,!1,JSON.stringify(r),n)).json()}async function Vq(t,e,r,n){const a=r.requests.map(i=>Object.assign(Object.assign({},i),{model:e}));return(await Zg(e,Zf.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:a}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,r,n={}){this.apiKey=e,this._requestOptions=n,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=VR(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(e,r={}){var n;const a=RN(e),s=Object.assign(Object.assign({},this._requestOptions),r);return HR(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}async generateContentStream(e,r={}){var n;const a=RN(e),s=Object.assign(Object.assign({},this._requestOptions),r);return QR(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}startChat(e){var r;return new Oq(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},e),this._requestOptions)}async countTokens(e,r={}){const n=Uq(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),a=Object.assign(Object.assign({},this._requestOptions),r);return Qq(this.apiKey,this.model,n,a)}async embedContent(e,r={}){const n=Mq(e),a=Object.assign(Object.assign({},this._requestOptions),r);return Hq(this.apiKey,this.model,n,a)}async batchEmbedContents(e,r={}){const n=Object.assign(Object.assign({},this._requestOptions),r);return Vq(this.apiKey,this.model,e,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e){this.apiKey=e}getGenerativeModel(e,r){if(!e.model)throw new Di("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new PN(this.apiKey,e,r)}getGenerativeModelFromCachedContent(e,r,n){if(!e.name)throw new Dd("Cached content must contain a `name` field.");if(!e.model)throw new Dd("Cached content must contain a `model` field.");const a=["model","systemInstruction"];for(const i of a)if(r!=null&&r[i]&&e[i]&&(r==null?void 0:r[i])!==e[i]){if(i==="model"){const o=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,c=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(o===c)continue}throw new Dd(`Different value for "${i}" specified in modelParams (${r[i]}) and cachedContent (${e[i]})`)}const s=Object.assign(Object.assign({},r),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new PN(this.apiKey,s,n)}}const l5="horario_asignaciones",GR="horarios_generados",Gq="usuarios",zR=t=>{const e=t.data();return{id:t.id,...e}},zq=t=>{const e=er(Nt(Tt,l5));return br(e,n=>{const a=n.docs.map(s=>zR(s));t(a)},n=>{console.error("Error al suscribirse a las asignaciones:",n),t([])})},qq=async t=>{try{return(await Sa(Nt(Tt,l5),t)).id}catch(e){throw console.error("Error al agregar asignación:",e),new Error("No se pudo agregar la asignación.")}},Kq=async t=>{try{const e=_r(Tt,l5,t);await Oi(e)}catch(e){throw console.error("Error al eliminar asignación:",e),new Error("No se pudo eliminar la asignación.")}},jN=async t=>{try{const e=_r(Tt,GR,"global");await Zi(e,{data:t})}catch(e){throw console.error("Error al guardar los horarios:",e),new Error("No se pudieron guardar los horarios generados.")}},Wq=t=>{const e=_r(Tt,GR,"global");return br(e,n=>{n.exists()?t(n.data().data||{}):t({})},n=>{console.error("Error al suscribirse a los horarios:",n),t({})})},$q=t=>{const e=er(Nt(Tt,Gq),Tn("profile","==",Pt.PROFESORADO));return br(e,n=>{const a=n.docs.map(s=>zR(s));t(a)},n=>{console.error("Error al suscribirse a los profesores:",n),t([])})},Jq=({horarios:t})=>Object.keys(t).length===0?l.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-800 rounded-lg",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:'Aún no se ha generado ningún horario. Utilice la pestaña de "Configuración" para generar uno.'})}):l.jsx("div",{className:"overflow-x-auto border border-slate-300 dark:border-slate-700 rounded-lg",children:l.jsxs("table",{className:"min-w-full border-collapse",children:[l.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 sticky top-0 z-10",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-16",children:"BLOQUE"}),l.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-24",children:"HORARIO"}),Za.map(e=>l.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs whitespace-nowrap min-w-[120px]",children:e},e))]})}),l.jsx("tbody",{children:mv.map(e=>l.jsxs(a_.Fragment,{children:[l.jsx("tr",{className:"bg-slate-200 dark:bg-slate-800",children:l.jsx("th",{colSpan:2+Za.length,className:"text-center font-bold text-slate-700 dark:text-slate-200 p-2 border-b border-slate-300 dark:border-slate-600",children:e.toUpperCase()})}),KC.map(({bloque:r,inicio:n,fin:a})=>l.jsxs("tr",{className:"even:bg-white odd:bg-slate-50 dark:even:bg-slate-800/50 dark:odd:bg-slate-900/50",children:[l.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center font-bold text-slate-700 dark:text-slate-300 text-sm",children:r}),l.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center text-xs text-slate-500 dark:text-slate-400",children:`${n} - ${a}`}),Za.map(s=>{var o,c;const i=(c=(o=t[s])==null?void 0:o[e])==null?void 0:c[r];return l.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center h-16",children:i!=null&&i.asignatura?l.jsxs("div",{className:"flex flex-col justify-center h-full",children:[l.jsx("p",{className:"font-semibold text-[11px] leading-tight text-slate-800 dark:text-slate-200 whitespace-normal",children:i.asignatura}),l.jsxs("p",{className:"text-[10px] leading-tight text-slate-500 dark:text-slate-400 whitespace-normal mt-0.5",children:["(",i.profesor,")"]})]}):l.jsx("span",{className:"text-slate-300 dark:text-slate-600 text-xs",children:"Libre"})},`${s}-${e}-${r}`)})]},`${e}-${r}`))]},e))})]})}),Yq=()=>{const[t,e]=ne.useState([]),[r,n]=ne.useState({curso:"",asignatura:"",profesor:""}),[a,s]=ne.useState([]),[i,o]=ne.useState({}),[c,u]=ne.useState(Za[0]),[f,m]=ne.useState(!1),[p,g]=ne.useState(!0),[b,y]=ne.useState(null),[T,k]=ne.useState(null),[D,L]=ne.useState(null),[j,H]=ne.useState({asignatura:"",profesor:""}),[U,E]=ne.useState("edicion"),[_,B]=ne.useState("");ne.useEffect(()=>{g(!0);const q=zq(e),J=Wq(o),W=$q(de=>{const P=de.map(K=>K.nombreCompleto).sort();s(P),g(!1)});return()=>{q(),J(),W()}},[]);const Q=async q=>{if(q.preventDefault(),y(null),!r.curso||!r.asignatura||!r.profesor){y("Todos los campos de la asignación son obligatorios.");return}try{await qq({curso:r.curso,asignatura:r.asignatura,profesor:r.profesor}),n({curso:"",asignatura:"",profesor:""})}catch(J){y(J instanceof Error?J.message:"Error al guardar la asignación.")}},R=async q=>{try{await Kq(q)}catch(J){y(J instanceof Error?J.message:"Error al eliminar la asignación.")}},F=async()=>{if(t.length===0){y("Debe agregar al menos una asignación de profesor antes de generar el horario.");return}m(!0),y(null),k(null);try{const q="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",J=new Xi(q),W=`
                Eres un asistente experto en planificación de horarios escolares para un liceo técnico en Chile. 
                Tu tarea es generar un horario semanal completo (Lunes a Viernes) para todos los cursos proporcionados, siguiendo un conjunto estricto de reglas.

                **Contexto:**
                - Días de la semana: ${mv.join(", ")}
                - Bloques horarios por día: 10 bloques con los siguientes horarios: ${JSON.stringify(KC,null,2)}
                - Cursos del liceo: ${Za.join(", ")}

                **Contexto Adicional de Especialidades (3º y 4º Medio):**
                - Los cursos que terminan en 'A' y 'B' pertenecen a la especialidad 'Mecánica Automotriz'.
                - Los cursos que terminan en 'C' y 'D' pertenecen a la especialidad 'Mecánica Industrial'.
                Utiliza este contexto para aplicar las reglas de "3°/4° Medio Automotriz" y "3°/4° Medio Industrial" correctamente.

                **Reglas de Asignación de Bloques por Asignatura:**
                Debes asignar la siguiente cantidad de bloques semanales para cada asignatura según el nivel del curso:
                ${JSON.stringify(Qz,null,2)}
                Notas sobre las reglas:
                - '1º y 2º medio' aplica a cursos que empiezan con '1º' o '2º'.
                - '3º y 4º medio' aplica a cursos que empiezan con '3º' o '4º'.
                - Algunas reglas aplican a cursos específicos (ej. Mecánica).

                **Asignaciones de Profesores (Input):**
                Aquí está la lista de profesores asignados a cada curso y asignatura. Debes usar esta lista para poblar el horario.
                ${JSON.stringify(t,null,2)}

                **REGLA CRÍTICA INVIOLABLE:**
                La restricción más importante que NUNCA debe romperse es que un mismo profesor no puede ser asignado a dos cursos diferentes en el mismo día y mismo bloque horario. Es físicamente imposible para un profesor estar en dos lugares a la vez. Prioriza esta regla sobre todas las demás. No deben existir topes de horario para ningún profesor.

                **Instrucciones Adicionales del Usuario:**
                Considera las siguientes preferencias al organizar el horario: "${_||"No se proporcionaron instrucciones adicionales."}"

                **Objetivo Adicional:**
                Distribuye las asignaturas de la forma más balanceada posible durante la semana para cada curso. Evita agrupar todas las horas de una misma materia en un solo día si es posible, a menos que las instrucciones del usuario indiquen lo contrario.

                **Formato de Salida (Output):**
                Tu respuesta DEBE ser un único objeto JSON válido, sin texto adicional, explicaciones, ni el bloque \`\`\`json. La estructura del JSON debe ser la siguiente:
                {
                  "1ºA": {
                    "Lunes": { "1": { "asignatura": "Matemática", "profesor": "Nombre Profesor" }, "2": { "asignatura": "Matemática", "profesor": "Nombre Profesor" } },
                    "Martes": { ... },
                    ...
                  },
                  "1ºB": { ... }
                }
                Cada clave de primer nivel es un curso. Cada curso tiene claves para cada día de la semana. Cada día tiene claves para cada bloque del 1 al 10. Si un bloque está vacío, usa \`{ "asignatura": null, "profesor": null }\`.
            `,ee=(await(await J.getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(W)).response).text().replace(/^```json\s*|```\s*$/g,""),Ae=JSON.parse(ee);await jN(Ae),k("¡Horario generado y guardado con éxito!")}catch(q){console.error("Error al generar horario con IA:",q),y("Ocurrió un error al contactar con la IA o al procesar la respuesta. Revisa la consola para más detalles.")}finally{m(!1)}},V=(q,J,W)=>{L({dia:q,bloque:J}),H({asignatura:(W==null?void 0:W.asignatura)||"",profesor:(W==null?void 0:W.profesor)||""})},X=async()=>{if(!D)return;const{dia:q,bloque:J}=D,W=JSON.parse(JSON.stringify(i));W[c]||(W[c]={}),W[c][q]||(W[c][q]={}),W[c][q][J]={asignatura:j.asignatura||null,profesor:j.profesor||null};try{await jN(W),L(null)}catch(de){y(de instanceof Error?de.message:"Error al guardar la edición.")}},oe="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",te=()=>{const q=i[c]||{};return l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border-collapse border border-slate-300 dark:border-slate-700",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-slate-100 dark:bg-slate-700",children:[l.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:"Bloque"}),mv.map(J=>l.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:J},J))]})}),l.jsx("tbody",{children:KC.map(({bloque:J,inicio:W,fin:de})=>l.jsxs("tr",{className:"text-center dark:bg-slate-800",children:[l.jsxs("td",{className:"border border-slate-300 dark:border-slate-700 p-2 bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("p",{className:"font-bold text-slate-700 dark:text-slate-300",children:J}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:`${W} - ${de}`})]}),mv.map(P=>{var ee;const K=(D==null?void 0:D.dia)===P&&(D==null?void 0:D.bloque)===J,Y=(ee=q[P])==null?void 0:ee[J];return l.jsx("td",{className:"border border-slate-300 dark:border-slate-700 p-1 h-24 relative hover:bg-amber-50 dark:hover:bg-slate-700 cursor-pointer",onClick:()=>!K&&V(P,J,Y),children:K?l.jsxs("div",{className:"flex flex-col p-1 bg-white dark:bg-slate-800 h-full justify-center",children:[l.jsx("input",{type:"text",placeholder:"Asignatura",value:j.asignatura,onChange:Ae=>H(Se=>({...Se,asignatura:Ae.target.value})),className:oe+" text-xs mb-1"}),l.jsx("input",{type:"text",placeholder:"Profesor",value:j.profesor,onChange:Ae=>H(Se=>({...Se,profesor:Ae.target.value})),className:oe+" text-xs"}),l.jsxs("div",{className:"flex justify-end mt-1 space-x-1",children:[l.jsx("button",{onClick:()=>L(null),className:"text-xs bg-slate-200 dark:bg-slate-600 px-1 rounded",children:"Cancelar"}),l.jsx("button",{onClick:X,className:"text-xs bg-amber-500 text-white px-1 rounded",children:"Guardar"})]})]}):Y!=null&&Y.asignatura?l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-sm text-slate-800 dark:text-slate-200",children:Y.asignatura}),l.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["(",Y.profesor,")"]})]}):l.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:"Libre"})},`${P}-${J}`)})]},J))})]})})},ae=()=>l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Crear Horarios"}),l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🔧 1. Configuración de Asignaciones"}),l.jsxs("form",{onSubmit:Q,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end mb-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),l.jsxs("select",{name:"curso",value:r.curso,onChange:q=>n(J=>({...J,curso:q.target.value})),className:oe,children:[l.jsx("option",{value:"",children:"Seleccione"}),Za.map(q=>l.jsx("option",{value:q,children:q},q))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsxs("select",{name:"asignatura",value:r.asignatura,onChange:q=>n(J=>({...J,asignatura:q.target.value})),className:oe,children:[l.jsx("option",{value:"",children:"Seleccione"}),Xo.map(q=>l.jsx("option",{value:q,children:q},q))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"profesor",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor"}),l.jsxs("select",{name:"profesor",value:r.profesor,onChange:q=>n(J=>({...J,profesor:q.target.value})),className:oe,children:[l.jsx("option",{value:"",children:"Seleccione"}),a.map(q=>l.jsx("option",{value:q,children:q},q))]})]}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 h-10",children:"Agregar"})]}),l.jsx("div",{className:"max-h-60 overflow-y-auto pr-2",children:l.jsx("ul",{className:"space-y-2",children:t.map(q=>l.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded-md",children:[l.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:[q.curso," - ",q.asignatura," - ",l.jsx("strong",{children:q.profesor})]}),l.jsx("button",{onClick:()=>R(q.id),className:"text-red-500 hover:text-red-700 font-bold text-xl",children:"×"})]},q.id))})})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🧠 2. Generación Automática con IA"}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"aiInstructions",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Instrucciones para la IA (Opcional)"}),l.jsx("textarea",{id:"aiInstructions",name:"aiInstructions",value:_,onChange:q=>B(q.target.value),rows:3,placeholder:"Ej: Dejar los módulos teóricos en la mañana y los prácticos en la tarde. Evitar poner 2 bloques de matemática seguidos.",className:oe})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("button",{onClick:F,disabled:f,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center",children:[f&&l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),f?"Generando...":"Generar Horario Completo"]}),b&&l.jsx("p",{className:"text-red-600",children:b}),T&&l.jsx("p",{className:"text-green-600",children:T})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"📅 3. Visualización y Edición por Curso"}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"selectCurso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione un curso para visualizar y editar:"}),l.jsx("select",{id:"selectCurso",value:c,onChange:q=>u(q.target.value),className:oe+" md:w-1/3",children:Za.map(q=>l.jsx("option",{value:q,children:q},q))})]}),Object.keys(i).length>0?te():l.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Aún no se ha generado ningún horario. Utilice el botón de generación con IA."})})]})]});return p?l.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>E("edicion"),className:`${U==="edicion"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Configuración y Edición por Curso"}),l.jsx("button",{onClick:()=>E("global"),className:`${U==="global"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Horario Global"})]})}),U==="edicion"?ae():l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Horario Global de Cursos"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Vista consolidada de todos los horarios generados. La tabla es desplazable horizontalmente."}),l.jsx(Jq,{horarios:i})]})]})},iw="acciones",Xq=async()=>{try{const t=er(Nt(Gr,iw),fn("fechaRegistro","desc"));return(await ps(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener acciones:",t),new Error("No se pudieron cargar las acciones pedagógicas")}},Zq=async t=>{try{return{id:(await Sa(Nt(Gr,iw),{...t,fechaRegistro:t.fechaRegistro||new Date().toISOString().split("T")[0],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear acción:",e),new Error("No se pudo crear la acción pedagógica")}},ON=async(t,e)=>{try{const r=_r(Gr,iw,t);await $g(r,{...e,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar acción:",r,"ID:",t),new Error("No se pudo actualizar la acción pedagógica")}},eK=async t=>{try{const e=_r(Gr,iw,t);await Oi(e)}catch(e){throw console.error("Error al eliminar acción:",e,"ID:",t),new Error("No se pudo eliminar la acción pedagógica")}},QN={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",area:"",descripcion:"",fechaCumplimiento:"",estado:"Pendiente"},tK={Pendiente:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En Proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Cumplida:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300"},rK=()=>{const[t,e]=ne.useState([]),[r,n]=ne.useState(!1),[a,s]=ne.useState(null),[i,o]=ne.useState(QN),[c,u]=ne.useState(null),[f,m]=ne.useState(""),[p,g]=ne.useState(""),[b,y]=ne.useState(""),T=ne.useCallback(async()=>{n(!0);try{const B=await Xq();e(B),s(null)}catch(B){console.error("Error al cargar acciones desde Firestore",B),s("No se pudieron cargar las acciones pedagógicas desde la nube.")}finally{n(!1)}},[]);ne.useEffect(()=>{T()},[T]);const k=ne.useCallback(B=>{const{name:Q,value:R}=B.target;o(F=>({...F,[Q]:R}))},[]),D=ne.useCallback(()=>{o(QN),u(null),s(null)},[]),L=ne.useCallback(async B=>{B.preventDefault();const{fechaRegistro:Q,responsable:R,area:F,descripcion:V,fechaCumplimiento:X,estado:oe}=i;if(!Q||!R||!F||!V||!X){s("Todos los campos son obligatorios.");return}try{c?await ON(c,i):await Zq(i),await T(),D()}catch(te){console.error("Error al guardar acción:",te),s("Error al guardar la acción en la nube.")}},[i,c,T,D]),j=ne.useCallback(B=>{window.scrollTo({top:0,behavior:"smooth"}),u(B.id),o(B)},[]),H=ne.useCallback(async B=>{if(window.confirm("¿Está seguro de que desea eliminar esta acción?"))try{await eK(B),await T()}catch(Q){console.error("Error al eliminar acción:",Q),s("No se pudo eliminar la acción en la nube.")}},[T]),U=ne.useCallback(async B=>{try{const Q=t.find(R=>R.id===B);if(Q){const F=(sp.indexOf(Q.estado)+1)%sp.length,V=sp[F];await ON(B,{estado:V}),await T()}}catch(Q){console.error("Error al cambiar estado:",Q),s("No se pudo cambiar el estado de la acción en la nube.")}},[t,T]),E=ne.useMemo(()=>t.filter(B=>{const Q=f===""||B.responsable.toLowerCase().includes(f.toLowerCase())||B.descripcion.toLowerCase().includes(f.toLowerCase()),R=p===""||B.area===p,F=b===""||B.estado===b;return Q&&R&&F}),[t,f,p,b]),_="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seguimiento de Acciones Pedagógicas"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:c?"Editando acción existente.":"Registre una nueva acción de seguimiento."}),r&&l.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando acciones desde la nube..."}),a&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),l.jsxs("form",{onSubmit:L,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fechaRegistro",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Registro"}),l.jsx("input",{type:"date",name:"fechaRegistro",value:i.fechaRegistro,onChange:k,className:_})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),l.jsx("input",{type:"text",name:"responsable",value:i.responsable,onChange:k,placeholder:"Nombre del responsable",className:_})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"area",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Área Vinculada"}),l.jsxs("select",{name:"area",value:i.area,onChange:k,className:_,children:[l.jsx("option",{value:"",children:"Seleccione un área"}),hN.map(B=>l.jsx("option",{value:B,children:B},B))]})]}),l.jsxs("div",{className:"lg:col-span-3",children:[l.jsx("label",{htmlFor:"descripcion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Descripción de la Acción"}),l.jsx("textarea",{name:"descripcion",value:i.descripcion,onChange:k,rows:3,placeholder:"Detalle de la acción a realizar...",className:_})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fechaCumplimiento",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Cumplimiento"}),l.jsx("input",{type:"date",name:"fechaCumplimiento",value:i.fechaCumplimiento,onChange:k,className:_})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"estado",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado de Avance"}),l.jsx("select",{name:"estado",value:i.estado,onChange:k,className:_,children:sp.map(B=>l.jsx("option",{value:B,children:B},B))})]})]}),l.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4",children:[c&&l.jsx("button",{type:"button",onClick:D,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:c?"Actualizar Acción":"Registrar Acción"})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Tabla de Seguimiento"}),!r&&t.length===0&&l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-4",children:"No hay acciones pedagógicas registradas en la nube."}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[l.jsx("input",{type:"text",placeholder:"Buscar por responsable o palabra clave...",value:f,onChange:B=>m(B.target.value),className:_+" md:col-span-1"}),l.jsxs("select",{value:p,onChange:B=>g(B.target.value),className:_,children:[l.jsx("option",{value:"",children:"Filtrar por Área"}),hN.map(B=>l.jsx("option",{value:B,children:B},B))]}),l.jsxs("select",{value:b,onChange:B=>y(B.target.value),className:_,children:[l.jsx("option",{value:"",children:"Filtrar por Estado"}),sp.map(B=>l.jsx("option",{value:B,children:B},B))]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Responsable"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Área"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Descripción"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fechas"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&E.length>0?E.map(B=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:B.responsable}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:B.area}),l.jsx("td",{className:"px-4 py-4 text-sm text-slate-600 dark:text-slate-300 max-w-sm whitespace-normal",children:B.descripcion}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:l.jsxs("div",{className:"flex flex-col",children:[l.jsxs("span",{children:["Reg: ",B.fechaRegistro]}),l.jsxs("span",{className:"font-semibold",children:["Comp: ",B.fechaCumplimiento]})]})}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm",children:l.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${tK[B.estado]}`,children:B.estado})}),l.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[l.jsx("button",{onClick:()=>U(B.id),title:"Cambiar Estado",className:"text-blue-600 hover:text-blue-800 p-1 rounded-full hover:bg-blue-100 dark:hover:bg-blue-900/40",children:"🔁"}),l.jsx("button",{onClick:()=>j(B),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),l.jsx("button",{onClick:()=>H(B.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},B.id)):!r&&l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No se encontraron acciones con los filtros actuales."})})})]})})]})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let nK,aK;function sK(){return{geminiUrl:nK,vertexUrl:aK}}function iK(t,e,r,n){var a,s;if(!(t!=null&&t.baseUrl)){const i=sK();return e?(a=i.vertexUrl)!==null&&a!==void 0?a:r:(s=i.geminiUrl)!==null&&s!==void 0?s:n}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uh{}function nr(t,e){const r=/\{([^}]+)\}/g;return t.replace(r,(n,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const s=e[a];return s!=null?String(s):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function v(t,e,r){for(let s=0;s<e.length-1;s++){const i=e[s];if(i.endsWith("[]")){const o=i.slice(0,-2);if(!(o in t))if(Array.isArray(r))t[o]=Array.from({length:r.length},()=>({}));else throw new Error(`Value must be a list given an array path ${i}`);if(Array.isArray(t[o])){const c=t[o];if(Array.isArray(r))for(let u=0;u<c.length;u++){const f=c[u];v(f,e.slice(s+1),r[u])}else for(const u of c)v(u,e.slice(s+1),r)}return}else if(i.endsWith("[0]")){const o=i.slice(0,-3);o in t||(t[o]=[{}]);const c=t[o];v(c[0],e.slice(s+1),r);return}(!t[i]||typeof t[i]!="object")&&(t[i]={}),t=t[i]}const n=e[e.length-1],a=t[n];if(a!==void 0){if(!r||typeof r=="object"&&Object.keys(r).length===0||r===a)return;if(typeof a=="object"&&typeof r=="object"&&a!==null&&r!==null)Object.assign(a,r);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else t[n]=r}function x(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return;const n=e[r];if(n.endsWith("[]")){const a=n.slice(0,-2);if(a in t){const s=t[a];return Array.isArray(s)?s.map(i=>x(i,e.slice(r+1))):void 0}else return}else t=t[n]}return t}catch(r){if(r instanceof TypeError)return;throw r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WC(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var HN;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(HN||(HN={}));var VN;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(VN||(VN={}));var ln;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(ln||(ln={}));var GN;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(GN||(GN={}));var zN;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(zN||(zN={}));var qN;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(qN||(qN={}));var KN;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(KN||(KN={}));var WN;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(WN||(WN={}));var $N;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})($N||($N={}));var JN;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(JN||(JN={}));var YN;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(YN||(YN={}));var XN;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(XN||(XN={}));var ZN;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(ZN||(ZN={}));var ek;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(ek||(ek={}));var tk;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(tk||(tk={}));var rk;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(rk||(rk={}));var Jv;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Jv||(Jv={}));var nk;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(nk||(nk={}));var $C;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})($C||($C={}));var ak;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(ak||(ak={}));var sk;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(sk||(sk={}));var ik;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(ik||(ik={}));var ok;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(ok||(ok={}));var lk;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(lk||(lk={}));var ck;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(ck||(ck={}));var Ak;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Ak||(Ak={}));var uk;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(uk||(uk={}));var dk;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(dk||(dk={}));var fk;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(fk||(fk={}));var hk;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(hk||(hk={}));var mk;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(mk||(mk={}));var pk;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(pk||(pk={}));var gk;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(gk||(gk={}));var xk;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(xk||(xk={}));var vk;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(vk||(vk={}));var wk;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(wk||(wk={}));var yk;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(yk||(yk={}));var bk;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(bk||(bk={}));var Ck;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Ck||(Ck={}));var Ek;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Ek||(Ek={}));var _k;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(_k||(_k={}));var y0;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(y0||(y0={}));class JC{constructor(e){const r={};for(const n of e.headers.entries())r[n[0]]=n[1];this.headers=r,this.responseInternal=e}json(){return this.responseInternal.json()}}class ip{get text(){var e,r,n,a,s,i,o,c;if(((a=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",f=!1;const m=[];for(const p of(c=(o=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)!==null&&c!==void 0?c:[]){for(const[g,b]of Object.entries(p))g!=="text"&&g!=="thought"&&(b!==null||b!==void 0)&&m.push(g);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;f=!0,u+=p.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?u:void 0}get data(){var e,r,n,a,s,i,o,c;if(((a=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const f=[];for(const m of(c=(o=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)!==null&&c!==void 0?c:[]){for(const[p,g]of Object.entries(m))p!=="inlineData"&&(g!==null||g!==void 0)&&f.push(p);m.inlineData&&typeof m.inlineData.data=="string"&&(u+=atob(m.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,r,n,a,s,i,o,c;if(((a=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(c=(o=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,r,n,a,s,i,o,c,u;if(((a=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(o=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||c===void 0?void 0:c.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((f==null?void 0:f.length)!==0)return(u=f==null?void 0:f[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,r,n,a,s,i,o,c,u;if(((a=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(o=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||c===void 0?void 0:c.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((f==null?void 0:f.length)!==0)return(u=f==null?void 0:f[0])===null||u===void 0?void 0:u.output}}class Sk{}class Tk{}class oK{}class lK{}class Bk{}class Nk{}class kk{}class cK{}class Ik{}class Fk{}class Dk{}class Rk{}class AK{}class uK{}class dK{}class Lk{}class fK{get text(){var e,r,n;let a="",s=!1;const i=[];for(const o of(n=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&n!==void 0?n:[]){for(const[c,u]of Object.entries(o))c!=="text"&&c!=="thought"&&u!==null&&i.push(c);if(typeof o.text=="string"){if(typeof o.thought=="boolean"&&o.thought)continue;s=!0,a+=o.text}}return i.length>0&&console.warn(`there are non-text parts ${i} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?a:void 0}get data(){var e,r,n;let a="";const s=[];for(const i of(n=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&n!==void 0?n:[]){for(const[o,c]of Object.entries(i))o!=="inlineData"&&c!==null&&s.push(o);i.inlineData&&typeof i.inlineData.data=="string"&&(a+=atob(i.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class Yv{_fromAPIResponse({apiResponse:e,isVertexAI:r}){const n=new Yv;if(n.name=e.name,n.metadata=e.metadata,n.done=e.done,n.error=e.error,r){const a=e.response;if(a){const s=new Ik,i=a.videos;s.generatedVideos=i==null?void 0:i.map(o=>({video:{uri:o.gcsUri,videoBytes:o.bytesBase64Encoded?WC(o.bytesBase64Encoded):void 0,mimeType:o.mimeType}})),s.raiMediaFilteredCount=a.raiMediaFilteredCount,s.raiMediaFilteredReasons=a.raiMediaFilteredReasons,n.response=s}}else{const a=e.response;if(a){const s=new Ik,i=a.generateVideoResponse,o=i==null?void 0:i.generatedSamples;s.generatedVideos=o==null?void 0:o.map(c=>{const u=c.video;return{video:{uri:u==null?void 0:u.uri,videoBytes:u!=null&&u.encodedVideo?WC(u==null?void 0:u.encodedVideo):void 0,mimeType:c.encoding}}}),s.raiMediaFilteredCount=i==null?void 0:i.raiMediaFilteredCount,s.raiMediaFilteredReasons=i==null?void 0:i.raiMediaFilteredReasons,n.response=s}}return n}}class hK{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hn(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const r=e.split("/",2);return`publishers/${r[0]}/models/${r[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function qR(t,e){const r=Hn(t,e);return r?r.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}`:r.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${r}`:r:""}function KR(t){return Array.isArray(t)?t.map(e=>Xv(e)):[Xv(t)]}function Xv(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function WR(t){const e=Xv(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function $R(t){const e=Xv(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Uk(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function JR(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Uk(e)):[Uk(t)]}function YC(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Mk(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Pk(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Ui(t){if(t==null)throw new Error("ContentUnion is required");return YC(t)?t:{role:"user",parts:JR(t)}}function YR(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(r=>{const n=Ui(r);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(t.isVertexAI()){const r=Ui(e);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]}return Array.isArray(e)?e.map(r=>Ui(r)):[Ui(e)]}function Ul(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Mk(t)||Pk(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ui(t)]}const e=[],r=[],n=YC(t[0]);for(const a of t){const s=YC(a);if(s!=n)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(a);else{if(Mk(a)||Pk(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");r.push(a)}}return n||e.push({role:"user",parts:JR(r)}),e}function mK(t,e){t.includes("null")&&(e.nullable=!0);const r=t.filter(n=>n!=="null");if(r.length===1)e.type=Object.values(ln).includes(r[0].toUpperCase())?r[0].toUpperCase():ln.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const n of r)e.anyOf.push({type:Object.values(ln).includes(n.toUpperCase())?n.toUpperCase():ln.TYPE_UNSPECIFIED})}}function N0(t){const e={},r=["items"],n=["anyOf"],a=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&mK(t.type,e);for(const[i,o]of Object.entries(t))if(o!=null)if(i=="type"){if(o==="null")throw new Error("type: null can not be the only possible type for the field.");if(o instanceof Array)continue;e.type=Object.values(ln).includes(o.toUpperCase())?o.toUpperCase():ln.TYPE_UNSPECIFIED}else if(r.includes(i))e[i]=N0(o);else if(n.includes(i)){const c=[];for(const u of o){if(u.type=="null"){e.nullable=!0;continue}c.push(N0(u))}e[i]=c}else if(a.includes(i)){const c={};for(const[u,f]of Object.entries(o))c[u]=N0(f);e[i]=c}else{if(i==="additionalProperties")continue;e[i]=o}return e}function c5(t){return N0(t)}function A5(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function u5(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Am(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=N0(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=N0(e.response));return t}function um(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const r of t)e.push(r);return e}function pK(t,e,r,n=1){const a=!e.startsWith(`${r}/`)&&e.split("/").length===n;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${r}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:a?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}/${e}`:e:a?`${r}/${e}`:e}function Cu(t,e){if(typeof e!="string")throw new Error("name must be a string");return pK(t,e,"cachedContents")}function XR(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function dh(t){return WC(t)}function gK(t){return t!=null&&typeof t=="object"&&"name"in t}function xK(t){return t!=null&&typeof t=="object"&&"video"in t}function vK(t){return t!=null&&typeof t=="object"&&"uri"in t}function ZR(t){var e;let r;if(gK(t)&&(r=t.name),!(vK(t)&&(r=t.uri,r===void 0))&&!(xK(t)&&(r=(e=t.video)===null||e===void 0?void 0:e.uri,r===void 0))){if(typeof t=="string"&&(r=t),r===void 0)throw new Error("Could not extract file name from the provided input.");if(r.startsWith("https://")){const a=r.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${r}`);r=a[0]}else r.startsWith("files/")&&(r=r.split("files/")[1]);return r}}function eL(t,e){let r;return t.isVertexAI()?r=e?"publishers/google/models":"models":r=e?"models":"tunedModels",r}function tL(t){for(const e of["models","tunedModels","publisherModels"])if(wK(t,e))return t[e];return[]}function wK(t,e){return t!==null&&typeof t=="object"&&e in t}function yK(t,e={}){const r=t,n={name:r.name,description:r.description,parametersJsonSchema:r.inputSchema};return e.behavior&&(n.behavior=e.behavior),{functionDeclarations:[n]}}function bK(t,e={}){const r=[],n=new Set;for(const a of t){const s=a.name;if(n.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);n.add(s);const i=yK(a,e);i.functionDeclarations&&r.push(...i.functionDeclarations)}return{functionDeclarations:r}}function rL(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function CK(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function dm(t,e){const r=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(r))return r.split("/").pop();throw new Error(`Invalid batch job name: ${r}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(r))return r.split("/").pop();if(/^\d+$/.test(r))return r;throw new Error(`Invalid batch job name: ${r}.`)}function nL(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EK(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function _K(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function SK(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function TK(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],EK(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],_K(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],SK(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const c=x(t,["executableCode"]);c!=null&&v(e,["executableCode"],c);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const f=x(t,["functionResponse"]);f!=null&&v(e,["functionResponse"],f);const m=x(t,["text"]);return m!=null&&v(e,["text"],m),e}function aL(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>TK(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function BK(t){const e={},r=x(t,["anyOf"]);r!=null&&v(e,["anyOf"],r);const n=x(t,["default"]);n!=null&&v(e,["default"],n);const a=x(t,["description"]);a!=null&&v(e,["description"],a);const s=x(t,["enum"]);s!=null&&v(e,["enum"],s);const i=x(t,["example"]);i!=null&&v(e,["example"],i);const o=x(t,["format"]);o!=null&&v(e,["format"],o);const c=x(t,["items"]);c!=null&&v(e,["items"],c);const u=x(t,["maxItems"]);u!=null&&v(e,["maxItems"],u);const f=x(t,["maxLength"]);f!=null&&v(e,["maxLength"],f);const m=x(t,["maxProperties"]);m!=null&&v(e,["maxProperties"],m);const p=x(t,["maximum"]);p!=null&&v(e,["maximum"],p);const g=x(t,["minItems"]);g!=null&&v(e,["minItems"],g);const b=x(t,["minLength"]);b!=null&&v(e,["minLength"],b);const y=x(t,["minProperties"]);y!=null&&v(e,["minProperties"],y);const T=x(t,["minimum"]);T!=null&&v(e,["minimum"],T);const k=x(t,["nullable"]);k!=null&&v(e,["nullable"],k);const D=x(t,["pattern"]);D!=null&&v(e,["pattern"],D);const L=x(t,["properties"]);L!=null&&v(e,["properties"],L);const j=x(t,["propertyOrdering"]);j!=null&&v(e,["propertyOrdering"],j);const H=x(t,["required"]);H!=null&&v(e,["required"],H);const U=x(t,["title"]);U!=null&&v(e,["title"],U);const E=x(t,["type"]);return E!=null&&v(e,["type"],E),e}function NK(t){const e={};if(x(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=x(t,["category"]);r!=null&&v(e,["category"],r);const n=x(t,["threshold"]);return n!=null&&v(e,["threshold"],n),e}function kK(t){const e={},r=x(t,["behavior"]);r!=null&&v(e,["behavior"],r);const n=x(t,["description"]);n!=null&&v(e,["description"],n);const a=x(t,["name"]);a!=null&&v(e,["name"],a);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const c=x(t,["responseJsonSchema"]);return c!=null&&v(e,["responseJsonSchema"],c),e}function IK(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function FK(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],IK(r)),e}function DK(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function RK(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],DK(r)),e}function LK(){return{}}function UK(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>kK(u))),v(e,["functionDeclarations"],c)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["googleSearch"]);n!=null&&v(e,["googleSearch"],FK(n));const a=x(t,["googleSearchRetrieval"]);if(a!=null&&v(e,["googleSearchRetrieval"],RK(a)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],LK());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function MK(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["allowedFunctionNames"]);return n!=null&&v(e,["allowedFunctionNames"],n),e}function PK(t){const e={},r=x(t,["latitude"]);r!=null&&v(e,["latitude"],r);const n=x(t,["longitude"]);return n!=null&&v(e,["longitude"],n),e}function jK(t){const e={},r=x(t,["latLng"]);r!=null&&v(e,["latLng"],PK(r));const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function OK(t){const e={},r=x(t,["functionCallingConfig"]);r!=null&&v(e,["functionCallingConfig"],MK(r));const n=x(t,["retrievalConfig"]);return n!=null&&v(e,["retrievalConfig"],jK(n)),e}function QK(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function sL(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],QK(r)),e}function HK(t){const e={},r=x(t,["speaker"]);r!=null&&v(e,["speaker"],r);const n=x(t,["voiceConfig"]);return n!=null&&v(e,["voiceConfig"],sL(n)),e}function VK(t){const e={},r=x(t,["speakerVoiceConfigs"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>HK(a))),v(e,["speakerVoiceConfigs"],n)}return e}function GK(t){const e={},r=x(t,["voiceConfig"]);r!=null&&v(e,["voiceConfig"],sL(r));const n=x(t,["multiSpeakerVoiceConfig"]);n!=null&&v(e,["multiSpeakerVoiceConfig"],VK(n));const a=x(t,["languageCode"]);return a!=null&&v(e,["languageCode"],a),e}function zK(t){const e={},r=x(t,["includeThoughts"]);r!=null&&v(e,["includeThoughts"],r);const n=x(t,["thinkingBudget"]);return n!=null&&v(e,["thinkingBudget"],n),e}function qK(t,e,r){const n={},a=x(e,["systemInstruction"]);r!==void 0&&a!=null&&v(r,["systemInstruction"],aL(Ui(a)));const s=x(e,["temperature"]);s!=null&&v(n,["temperature"],s);const i=x(e,["topP"]);i!=null&&v(n,["topP"],i);const o=x(e,["topK"]);o!=null&&v(n,["topK"],o);const c=x(e,["candidateCount"]);c!=null&&v(n,["candidateCount"],c);const u=x(e,["maxOutputTokens"]);u!=null&&v(n,["maxOutputTokens"],u);const f=x(e,["stopSequences"]);f!=null&&v(n,["stopSequences"],f);const m=x(e,["responseLogprobs"]);m!=null&&v(n,["responseLogprobs"],m);const p=x(e,["logprobs"]);p!=null&&v(n,["logprobs"],p);const g=x(e,["presencePenalty"]);g!=null&&v(n,["presencePenalty"],g);const b=x(e,["frequencyPenalty"]);b!=null&&v(n,["frequencyPenalty"],b);const y=x(e,["seed"]);y!=null&&v(n,["seed"],y);const T=x(e,["responseMimeType"]);T!=null&&v(n,["responseMimeType"],T);const k=x(e,["responseSchema"]);k!=null&&v(n,["responseSchema"],BK(c5(k)));const D=x(e,["responseJsonSchema"]);if(D!=null&&v(n,["responseJsonSchema"],D),x(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(x(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const L=x(e,["safetySettings"]);if(r!==void 0&&L!=null){let R=L;Array.isArray(R)&&(R=R.map(F=>NK(F))),v(r,["safetySettings"],R)}const j=x(e,["tools"]);if(r!==void 0&&j!=null){let R=um(j);Array.isArray(R)&&(R=R.map(F=>UK(Am(F)))),v(r,["tools"],R)}const H=x(e,["toolConfig"]);if(r!==void 0&&H!=null&&v(r,["toolConfig"],OK(H)),x(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=x(e,["cachedContent"]);r!==void 0&&U!=null&&v(r,["cachedContent"],Cu(t,U));const E=x(e,["responseModalities"]);E!=null&&v(n,["responseModalities"],E);const _=x(e,["mediaResolution"]);_!=null&&v(n,["mediaResolution"],_);const B=x(e,["speechConfig"]);if(B!=null&&v(n,["speechConfig"],GK(A5(B))),x(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Q=x(e,["thinkingConfig"]);return Q!=null&&v(n,["thinkingConfig"],zK(Q)),n}function KK(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["request","model"],Hn(t,n));const a=x(e,["contents"]);if(a!=null){let i=Ul(a);Array.isArray(i)&&(i=i.map(o=>aL(o))),v(r,["request","contents"],i)}const s=x(e,["config"]);return s!=null&&v(r,["request","generationConfig"],qK(t,s,r)),r}function WK(t,e){const r={};if(x(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(x(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(x(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const n=x(e,["fileName"]);n!=null&&v(r,["fileName"],n);const a=x(e,["inlinedRequests"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>KK(t,i))),v(r,["requests","requests"],s)}return r}function $K(t,e){const r={},n=x(t,["displayName"]);if(e!==void 0&&n!=null&&v(e,["batch","displayName"],n),x(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return r}function JK(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],Hn(t,n));const a=x(e,["src"]);a!=null&&v(r,["batch","inputConfig"],WK(t,rL(t,a)));const s=x(e,["config"]);return s!=null&&v(r,["config"],$K(s,r)),r}function YK(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],dm(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function XK(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],dm(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function ZK(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const a=x(t,["pageToken"]);if(e!==void 0&&a!=null&&v(e,["_query","pageToken"],a),x(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return r}function eW(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],ZK(r,e)),e}function tW(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],dm(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function rW(t){const e={},r=x(t,["format"]);r!=null&&v(e,["instancesFormat"],r);const n=x(t,["gcsUri"]);n!=null&&v(e,["gcsSource","uris"],n);const a=x(t,["bigqueryUri"]);if(a!=null&&v(e,["bigquerySource","inputUri"],a),x(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(x(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function nW(t){const e={},r=x(t,["format"]);r!=null&&v(e,["predictionsFormat"],r);const n=x(t,["gcsUri"]);n!=null&&v(e,["gcsDestination","outputUriPrefix"],n);const a=x(t,["bigqueryUri"]);if(a!=null&&v(e,["bigqueryDestination","outputUri"],a),x(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(x(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function aW(t,e){const r={},n=x(t,["displayName"]);e!==void 0&&n!=null&&v(e,["displayName"],n);const a=x(t,["dest"]);return e!==void 0&&a!=null&&v(e,["outputConfig"],nW(CK(a))),r}function sW(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["model"],Hn(t,n));const a=x(e,["src"]);a!=null&&v(r,["inputConfig"],rW(rL(t,a)));const s=x(e,["config"]);return s!=null&&v(r,["config"],aW(s,r)),r}function iW(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],dm(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function oW(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],dm(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function lW(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const a=x(t,["pageToken"]);e!==void 0&&a!=null&&v(e,["_query","pageToken"],a);const s=x(t,["filter"]);return e!==void 0&&s!=null&&v(e,["_query","filter"],s),r}function cW(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],lW(r,e)),e}function AW(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],dm(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function uW(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function dW(t){const e={},r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function fW(t){const e={},r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function hW(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],uW(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],dW(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],fW(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const c=x(t,["executableCode"]);c!=null&&v(e,["executableCode"],c);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const f=x(t,["functionResponse"]);f!=null&&v(e,["functionResponse"],f);const m=x(t,["text"]);return m!=null&&v(e,["text"],m),e}function mW(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>hW(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function pW(t){const e={},r=x(t,["citationSources"]);return r!=null&&v(e,["citations"],r),e}function gW(t){const e={},r=x(t,["retrievedUrl"]);r!=null&&v(e,["retrievedUrl"],r);const n=x(t,["urlRetrievalStatus"]);return n!=null&&v(e,["urlRetrievalStatus"],n),e}function xW(t){const e={},r=x(t,["urlMetadata"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>gW(a))),v(e,["urlMetadata"],n)}return e}function vW(t){const e={},r=x(t,["content"]);r!=null&&v(e,["content"],mW(r));const n=x(t,["citationMetadata"]);n!=null&&v(e,["citationMetadata"],pW(n));const a=x(t,["tokenCount"]);a!=null&&v(e,["tokenCount"],a);const s=x(t,["finishReason"]);s!=null&&v(e,["finishReason"],s);const i=x(t,["urlContextMetadata"]);i!=null&&v(e,["urlContextMetadata"],xW(i));const o=x(t,["avgLogprobs"]);o!=null&&v(e,["avgLogprobs"],o);const c=x(t,["groundingMetadata"]);c!=null&&v(e,["groundingMetadata"],c);const u=x(t,["index"]);u!=null&&v(e,["index"],u);const f=x(t,["logprobsResult"]);f!=null&&v(e,["logprobsResult"],f);const m=x(t,["safetyRatings"]);return m!=null&&v(e,["safetyRatings"],m),e}function wW(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["candidates"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(c=>vW(c))),v(e,["candidates"],o)}const a=x(t,["modelVersion"]);a!=null&&v(e,["modelVersion"],a);const s=x(t,["promptFeedback"]);s!=null&&v(e,["promptFeedback"],s);const i=x(t,["usageMetadata"]);return i!=null&&v(e,["usageMetadata"],i),e}function iL(t){const e={},r=x(t,["details"]);r!=null&&v(e,["details"],r);const n=x(t,["code"]);n!=null&&v(e,["code"],n);const a=x(t,["message"]);return a!=null&&v(e,["message"],a),e}function yW(t){const e={},r=x(t,["response"]);r!=null&&v(e,["response"],wW(r));const n=x(t,["error"]);return n!=null&&v(e,["error"],iL(n)),e}function bW(t){const e={},r=x(t,["responsesFile"]);r!=null&&v(e,["fileName"],r);const n=x(t,["inlinedResponses","inlinedResponses"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>yW(s))),v(e,["inlinedResponses"],a)}return e}function XC(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["metadata","displayName"]);n!=null&&v(e,["displayName"],n);const a=x(t,["metadata","state"]);a!=null&&v(e,["state"],nL(a));const s=x(t,["metadata","createTime"]);s!=null&&v(e,["createTime"],s);const i=x(t,["metadata","endTime"]);i!=null&&v(e,["endTime"],i);const o=x(t,["metadata","updateTime"]);o!=null&&v(e,["updateTime"],o);const c=x(t,["metadata","model"]);c!=null&&v(e,["model"],c);const u=x(t,["metadata","output"]);return u!=null&&v(e,["dest"],bW(u)),e}function CW(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["operations"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>XC(i))),v(e,["batchJobs"],s)}return e}function EW(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["done"]);n!=null&&v(e,["done"],n);const a=x(t,["error"]);return a!=null&&v(e,["error"],iL(a)),e}function oL(t){const e={},r=x(t,["details"]);r!=null&&v(e,["details"],r);const n=x(t,["code"]);n!=null&&v(e,["code"],n);const a=x(t,["message"]);return a!=null&&v(e,["message"],a),e}function _W(t){const e={},r=x(t,["instancesFormat"]);r!=null&&v(e,["format"],r);const n=x(t,["gcsSource","uris"]);n!=null&&v(e,["gcsUri"],n);const a=x(t,["bigquerySource","inputUri"]);return a!=null&&v(e,["bigqueryUri"],a),e}function SW(t){const e={},r=x(t,["predictionsFormat"]);r!=null&&v(e,["format"],r);const n=x(t,["gcsDestination","outputUriPrefix"]);n!=null&&v(e,["gcsUri"],n);const a=x(t,["bigqueryDestination","outputUri"]);return a!=null&&v(e,["bigqueryUri"],a),e}function ZC(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const a=x(t,["state"]);a!=null&&v(e,["state"],nL(a));const s=x(t,["error"]);s!=null&&v(e,["error"],oL(s));const i=x(t,["createTime"]);i!=null&&v(e,["createTime"],i);const o=x(t,["startTime"]);o!=null&&v(e,["startTime"],o);const c=x(t,["endTime"]);c!=null&&v(e,["endTime"],c);const u=x(t,["updateTime"]);u!=null&&v(e,["updateTime"],u);const f=x(t,["model"]);f!=null&&v(e,["model"],f);const m=x(t,["inputConfig"]);m!=null&&v(e,["src"],_W(m));const p=x(t,["outputConfig"]);return p!=null&&v(e,["dest"],SW(p)),e}function TW(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["batchPredictionJobs"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>ZC(i))),v(e,["batchJobs"],s)}return e}function BW(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["done"]);n!=null&&v(e,["done"],n);const a=x(t,["error"]);return a!=null&&v(e,["error"],oL(a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var eh;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(eh||(eh={}));class ex{constructor(e,r,n,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=r,this.init(e,n,a)}init(e,r,n){var a,s;this.nameInternal=e,this.pageInternal=r[this.nameInternal]||[],this.sdkHttpResponseInternal=r==null?void 0:r.sdkHttpResponse,this.idxInternal=0;let i={config:{}};!n||Object.keys(n).length===0?i={config:{}}:typeof n=="object"?i=Object.assign({},n):i=n,i.config&&(i.config.pageToken=r.nextPageToken),this.paramsInternal=i,this.pageInternalSize=(s=(a=i.config)===null||a===void 0?void 0:a.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class NW extends uh{constructor(e){super(),this.apiClient=e,this.create=async r=>{if(this.apiClient.isVertexAI()){const a=Date.now().toString();if(Array.isArray(r.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(r.config=r.config||{},r.config.displayName===void 0&&(r.config.displayName="genaiBatchJob_${timestampStr}"),r.config.dest===void 0&&typeof r.src=="string")if(r.src.startsWith("gs://")&&r.src.endsWith(".jsonl"))r.config.dest=`${r.src.slice(0,-6)}/dest`;else if(r.src.startsWith("bq://"))r.config.dest=`${r.src}_dest_${a}`;else throw new Error("Unsupported source:"+r.src)}return await this.createInternal(r)},this.list=async(r={})=>new ex(eh.PAGED_ITEM_BATCH_JOBS,n=>this.listInternal(n),await this.listInternal(r),r)}async createInternal(e){var r,n,a,s;let i,o="",c={};if(this.apiClient.isVertexAI()){const u=sW(this.apiClient,e);return o=nr("batchPredictionJobs",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),i.then(f=>ZC(f))}else{const u=JK(this.apiClient,e);return o=nr("{model}:batchGenerateContent",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),i.then(f=>XC(f))}}async get(e){var r,n,a,s;let i,o="",c={};if(this.apiClient.isVertexAI()){const u=iW(this.apiClient,e);return o=nr("batchPredictionJobs/{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),i.then(f=>ZC(f))}else{const u=YK(this.apiClient,e);return o=nr("batches/{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),i.then(f=>XC(f))}}async cancel(e){var r,n,a,s;let i="",o={};if(this.apiClient.isVertexAI()){const c=oW(this.apiClient,e);i=nr("batchPredictionJobs/{name}:cancel",c._url),o=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}else{const c=XK(this.apiClient,e);i=nr("batches/{name}:cancel",c._url),o=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var r,n,a,s;let i,o="",c={};if(this.apiClient.isVertexAI()){const u=cW(e);return o=nr("batchPredictionJobs",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),i.then(f=>{const m=TW(f),p=new Lk;return Object.assign(p,m),p})}else{const u=eW(e);return o=nr("batches",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),i.then(f=>{const m=CW(f),p=new Lk;return Object.assign(p,m),p})}}async delete(e){var r,n,a,s;let i,o="",c={};if(this.apiClient.isVertexAI()){const u=AW(this.apiClient,e);return o=nr("batchPredictionJobs/{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),i.then(f=>BW(f))}else{const u=tW(this.apiClient,e);return o=nr("batches/{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),i.then(f=>EW(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kW(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function IW(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function FW(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function DW(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],kW(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],IW(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],FW(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const c=x(t,["executableCode"]);c!=null&&v(e,["executableCode"],c);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const f=x(t,["functionResponse"]);f!=null&&v(e,["functionResponse"],f);const m=x(t,["text"]);return m!=null&&v(e,["text"],m),e}function jk(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>DW(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function RW(t){const e={},r=x(t,["behavior"]);r!=null&&v(e,["behavior"],r);const n=x(t,["description"]);n!=null&&v(e,["description"],n);const a=x(t,["name"]);a!=null&&v(e,["name"],a);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const c=x(t,["responseJsonSchema"]);return c!=null&&v(e,["responseJsonSchema"],c),e}function LW(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function UW(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],LW(r)),e}function MW(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function PW(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],MW(r)),e}function jW(){return{}}function OW(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>RW(u))),v(e,["functionDeclarations"],c)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["googleSearch"]);n!=null&&v(e,["googleSearch"],UW(n));const a=x(t,["googleSearchRetrieval"]);if(a!=null&&v(e,["googleSearchRetrieval"],PW(a)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],jW());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function QW(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["allowedFunctionNames"]);return n!=null&&v(e,["allowedFunctionNames"],n),e}function HW(t){const e={},r=x(t,["latitude"]);r!=null&&v(e,["latitude"],r);const n=x(t,["longitude"]);return n!=null&&v(e,["longitude"],n),e}function VW(t){const e={},r=x(t,["latLng"]);r!=null&&v(e,["latLng"],HW(r));const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function GW(t){const e={},r=x(t,["functionCallingConfig"]);r!=null&&v(e,["functionCallingConfig"],QW(r));const n=x(t,["retrievalConfig"]);return n!=null&&v(e,["retrievalConfig"],VW(n)),e}function zW(t,e){const r={},n=x(t,["ttl"]);e!==void 0&&n!=null&&v(e,["ttl"],n);const a=x(t,["expireTime"]);e!==void 0&&a!=null&&v(e,["expireTime"],a);const s=x(t,["displayName"]);e!==void 0&&s!=null&&v(e,["displayName"],s);const i=x(t,["contents"]);if(e!==void 0&&i!=null){let f=Ul(i);Array.isArray(f)&&(f=f.map(m=>jk(m))),v(e,["contents"],f)}const o=x(t,["systemInstruction"]);e!==void 0&&o!=null&&v(e,["systemInstruction"],jk(Ui(o)));const c=x(t,["tools"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(m=>OW(m))),v(e,["tools"],f)}const u=x(t,["toolConfig"]);if(e!==void 0&&u!=null&&v(e,["toolConfig"],GW(u)),x(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return r}function qW(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["model"],qR(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],zW(a,r)),r}function KW(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],Cu(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function WW(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],Cu(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function $W(t,e){const r={},n=x(t,["ttl"]);e!==void 0&&n!=null&&v(e,["ttl"],n);const a=x(t,["expireTime"]);return e!==void 0&&a!=null&&v(e,["expireTime"],a),r}function JW(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],Cu(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],$W(a,r)),r}function YW(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const a=x(t,["pageToken"]);return e!==void 0&&a!=null&&v(e,["_query","pageToken"],a),r}function XW(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],YW(r,e)),e}function ZW(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function e$(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["data"]);n!=null&&v(e,["data"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function t$(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function r$(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],ZW(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],e$(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],t$(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const c=x(t,["executableCode"]);c!=null&&v(e,["executableCode"],c);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const f=x(t,["functionResponse"]);f!=null&&v(e,["functionResponse"],f);const m=x(t,["text"]);return m!=null&&v(e,["text"],m),e}function Ok(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>r$(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function n$(t){const e={};if(x(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=x(t,["description"]);r!=null&&v(e,["description"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const s=x(t,["parametersJsonSchema"]);s!=null&&v(e,["parametersJsonSchema"],s);const i=x(t,["response"]);i!=null&&v(e,["response"],i);const o=x(t,["responseJsonSchema"]);return o!=null&&v(e,["responseJsonSchema"],o),e}function a$(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function s$(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],a$(r)),e}function i$(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function o$(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],i$(r)),e}function l$(){return{}}function c$(t){const e={},r=x(t,["apiKeyString"]);return r!=null&&v(e,["apiKeyString"],r),e}function A$(t){const e={},r=x(t,["apiKeyConfig"]);r!=null&&v(e,["apiKeyConfig"],c$(r));const n=x(t,["authType"]);n!=null&&v(e,["authType"],n);const a=x(t,["googleServiceAccountConfig"]);a!=null&&v(e,["googleServiceAccountConfig"],a);const s=x(t,["httpBasicAuthConfig"]);s!=null&&v(e,["httpBasicAuthConfig"],s);const i=x(t,["oauthConfig"]);i!=null&&v(e,["oauthConfig"],i);const o=x(t,["oidcConfig"]);return o!=null&&v(e,["oidcConfig"],o),e}function u$(t){const e={},r=x(t,["authConfig"]);return r!=null&&v(e,["authConfig"],A$(r)),e}function d$(){return{}}function f$(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let m=r;Array.isArray(m)&&(m=m.map(p=>n$(p))),v(e,["functionDeclarations"],m)}const n=x(t,["retrieval"]);n!=null&&v(e,["retrieval"],n);const a=x(t,["googleSearch"]);a!=null&&v(e,["googleSearch"],s$(a));const s=x(t,["googleSearchRetrieval"]);s!=null&&v(e,["googleSearchRetrieval"],o$(s)),x(t,["enterpriseWebSearch"])!=null&&v(e,["enterpriseWebSearch"],l$());const o=x(t,["googleMaps"]);o!=null&&v(e,["googleMaps"],u$(o)),x(t,["urlContext"])!=null&&v(e,["urlContext"],d$());const u=x(t,["codeExecution"]);u!=null&&v(e,["codeExecution"],u);const f=x(t,["computerUse"]);return f!=null&&v(e,["computerUse"],f),e}function h$(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["allowedFunctionNames"]);return n!=null&&v(e,["allowedFunctionNames"],n),e}function m$(t){const e={},r=x(t,["latitude"]);r!=null&&v(e,["latitude"],r);const n=x(t,["longitude"]);return n!=null&&v(e,["longitude"],n),e}function p$(t){const e={},r=x(t,["latLng"]);r!=null&&v(e,["latLng"],m$(r));const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function g$(t){const e={},r=x(t,["functionCallingConfig"]);r!=null&&v(e,["functionCallingConfig"],h$(r));const n=x(t,["retrievalConfig"]);return n!=null&&v(e,["retrievalConfig"],p$(n)),e}function x$(t,e){const r={},n=x(t,["ttl"]);e!==void 0&&n!=null&&v(e,["ttl"],n);const a=x(t,["expireTime"]);e!==void 0&&a!=null&&v(e,["expireTime"],a);const s=x(t,["displayName"]);e!==void 0&&s!=null&&v(e,["displayName"],s);const i=x(t,["contents"]);if(e!==void 0&&i!=null){let m=Ul(i);Array.isArray(m)&&(m=m.map(p=>Ok(p))),v(e,["contents"],m)}const o=x(t,["systemInstruction"]);e!==void 0&&o!=null&&v(e,["systemInstruction"],Ok(Ui(o)));const c=x(t,["tools"]);if(e!==void 0&&c!=null){let m=c;Array.isArray(m)&&(m=m.map(p=>f$(p))),v(e,["tools"],m)}const u=x(t,["toolConfig"]);e!==void 0&&u!=null&&v(e,["toolConfig"],g$(u));const f=x(t,["kmsKeyName"]);return e!==void 0&&f!=null&&v(e,["encryption_spec","kmsKeyName"],f),r}function v$(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["model"],qR(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],x$(a,r)),r}function w$(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],Cu(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function y$(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],Cu(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function b$(t,e){const r={},n=x(t,["ttl"]);e!==void 0&&n!=null&&v(e,["ttl"],n);const a=x(t,["expireTime"]);return e!==void 0&&a!=null&&v(e,["expireTime"],a),r}function C$(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],Cu(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],b$(a,r)),r}function E$(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const a=x(t,["pageToken"]);return e!==void 0&&a!=null&&v(e,["_query","pageToken"],a),r}function _$(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],E$(r,e)),e}function gv(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const a=x(t,["model"]);a!=null&&v(e,["model"],a);const s=x(t,["createTime"]);s!=null&&v(e,["createTime"],s);const i=x(t,["updateTime"]);i!=null&&v(e,["updateTime"],i);const o=x(t,["expireTime"]);o!=null&&v(e,["expireTime"],o);const c=x(t,["usageMetadata"]);return c!=null&&v(e,["usageMetadata"],c),e}function S$(){return{}}function T$(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["cachedContents"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>gv(i))),v(e,["cachedContents"],s)}return e}function xv(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const a=x(t,["model"]);a!=null&&v(e,["model"],a);const s=x(t,["createTime"]);s!=null&&v(e,["createTime"],s);const i=x(t,["updateTime"]);i!=null&&v(e,["updateTime"],i);const o=x(t,["expireTime"]);o!=null&&v(e,["expireTime"],o);const c=x(t,["usageMetadata"]);return c!=null&&v(e,["usageMetadata"],c),e}function B$(){return{}}function N$(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["cachedContents"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>xv(i))),v(e,["cachedContents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class k$ extends uh{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new ex(eh.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(r),r)}async create(e){var r,n,a,s;let i,o="",c={};if(this.apiClient.isVertexAI()){const u=v$(this.apiClient,e);return o=nr("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),i.then(f=>xv(f))}else{const u=qW(this.apiClient,e);return o=nr("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),i.then(f=>gv(f))}}async get(e){var r,n,a,s;let i,o="",c={};if(this.apiClient.isVertexAI()){const u=w$(this.apiClient,e);return o=nr("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),i.then(f=>xv(f))}else{const u=KW(this.apiClient,e);return o=nr("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),i.then(f=>gv(f))}}async delete(e){var r,n,a,s;let i,o="",c={};if(this.apiClient.isVertexAI()){const u=y$(this.apiClient,e);return o=nr("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),i.then(()=>{const f=B$(),m=new Dk;return Object.assign(m,f),m})}else{const u=WW(this.apiClient,e);return o=nr("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),i.then(()=>{const f=S$(),m=new Dk;return Object.assign(m,f),m})}}async update(e){var r,n,a,s;let i,o="",c={};if(this.apiClient.isVertexAI()){const u=C$(this.apiClient,e);return o=nr("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),i.then(f=>xv(f))}else{const u=JW(this.apiClient,e);return o=nr("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),i.then(f=>gv(f))}}async listInternal(e){var r,n,a,s;let i,o="",c={};if(this.apiClient.isVertexAI()){const u=_$(e);return o=nr("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),i.then(f=>{const m=N$(f),p=new Rk;return Object.assign(p,m),p})}else{const u=XW(e);return o=nr("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),i.then(f=>{const m=T$(f),p=new Rk;return Object.assign(p,m),p})}}}function Qk(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ia(t){return this instanceof ia?(this.v=t,this):new ia(t)}function k0(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),a,s=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",i),a[Symbol.asyncIterator]=function(){return this},a;function i(g){return function(b){return Promise.resolve(b).then(g,m)}}function o(g,b){n[g]&&(a[g]=function(y){return new Promise(function(T,k){s.push([g,y,T,k])>1||c(g,y)})},b&&(a[g]=b(a[g])))}function c(g,b){try{u(n[g](b))}catch(y){p(s[0][3],y)}}function u(g){g.value instanceof ia?Promise.resolve(g.value.v).then(f,m):p(s[0][2],g)}function f(g){c("next",g)}function m(g){c("throw",g)}function p(g,b){g(b),s.shift(),s.length&&c(s[0][0],s[0][1])}}function Qp(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Qk=="function"?Qk(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(i){return new Promise(function(o,c){i=t[s](i),a(o,c,i.done,i.value)})}}function a(s,i,o,c){Promise.resolve(c).then(function(u){s({value:u,done:o})},i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function I$(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const r=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return r===void 0?!1:lL(r)}function lL(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function F$(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Hk(t){if(t===void 0||t.length===0)return[];const e=[],r=t.length;let n=0;for(;n<r;)if(t[n].role==="user")e.push(t[n]),n++;else{const a=[];let s=!0;for(;n<r&&t[n].role==="model";)a.push(t[n]),s&&!lL(t[n])&&(s=!1),n++;s?e.push(...a):e.pop()}return e}class D${constructor(e,r){this.modelsModule=e,this.apiClient=r}create(e){return new R$(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class R${constructor(e,r,n,a={},s=[]){this.apiClient=e,this.modelsModule=r,this.model=n,this.config=a,this.history=s,this.sendPromise=Promise.resolve(),F$(s)}async sendMessage(e){var r;await this.sendPromise;const n=Ui(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(r=e.config)!==null&&r!==void 0?r:this.config});return this.sendPromise=(async()=>{var s,i,o;const c=await a,u=(i=(s=c.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content,f=c.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let p=[];f!=null&&(p=(o=f.slice(m))!==null&&o!==void 0?o:[]);const g=u?[u]:[];this.recordHistory(n,g,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var r;await this.sendPromise;const n=Ui(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(r=e.config)!==null&&r!==void 0?r:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const s=await a;return this.processStreamResponse(s,n)}getHistory(e=!1){const r=e?Hk(this.history):this.history;return structuredClone(r)}processStreamResponse(e,r){var n,a;return k0(this,arguments,function*(){var i,o,c,u;const f=[];try{for(var m=!0,p=Qp(e),g;g=yield ia(p.next()),i=g.done,!i;m=!0){u=g.value,m=!1;const b=u;if(I$(b)){const y=(a=(n=b.candidates)===null||n===void 0?void 0:n[0])===null||a===void 0?void 0:a.content;y!==void 0&&f.push(y)}yield yield ia(b)}}catch(b){o={error:b}}finally{try{!m&&!i&&(c=p.return)&&(yield ia(c.call(p)))}finally{if(o)throw o.error}}this.recordHistory(r,f)})}recordHistory(e,r,n){let a=[];r.length>0&&r.every(s=>s.role!==void 0)?a=r:a.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...Hk(n)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ow extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ow.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function L$(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const a=x(t,["pageToken"]);return e!==void 0&&a!=null&&v(e,["_query","pageToken"],a),r}function U$(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],L$(r,e)),e}function M$(t){const e={},r=x(t,["details"]);r!=null&&v(e,["details"],r);const n=x(t,["message"]);n!=null&&v(e,["message"],n);const a=x(t,["code"]);return a!=null&&v(e,["code"],a),e}function P$(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const a=x(t,["mimeType"]);a!=null&&v(e,["mimeType"],a);const s=x(t,["sizeBytes"]);s!=null&&v(e,["sizeBytes"],s);const i=x(t,["createTime"]);i!=null&&v(e,["createTime"],i);const o=x(t,["expirationTime"]);o!=null&&v(e,["expirationTime"],o);const c=x(t,["updateTime"]);c!=null&&v(e,["updateTime"],c);const u=x(t,["sha256Hash"]);u!=null&&v(e,["sha256Hash"],u);const f=x(t,["uri"]);f!=null&&v(e,["uri"],f);const m=x(t,["downloadUri"]);m!=null&&v(e,["downloadUri"],m);const p=x(t,["state"]);p!=null&&v(e,["state"],p);const g=x(t,["source"]);g!=null&&v(e,["source"],g);const b=x(t,["videoMetadata"]);b!=null&&v(e,["videoMetadata"],b);const y=x(t,["error"]);return y!=null&&v(e,["error"],M$(y)),e}function j$(t){const e={},r=x(t,["file"]);r!=null&&v(e,["file"],P$(r));const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function O$(t){const e={},r=x(t,["name"]);r!=null&&v(e,["_url","file"],ZR(r));const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function Q$(t){const e={},r=x(t,["name"]);r!=null&&v(e,["_url","file"],ZR(r));const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function H$(t){const e={},r=x(t,["details"]);r!=null&&v(e,["details"],r);const n=x(t,["message"]);n!=null&&v(e,["message"],n);const a=x(t,["code"]);return a!=null&&v(e,["code"],a),e}function eE(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const a=x(t,["mimeType"]);a!=null&&v(e,["mimeType"],a);const s=x(t,["sizeBytes"]);s!=null&&v(e,["sizeBytes"],s);const i=x(t,["createTime"]);i!=null&&v(e,["createTime"],i);const o=x(t,["expirationTime"]);o!=null&&v(e,["expirationTime"],o);const c=x(t,["updateTime"]);c!=null&&v(e,["updateTime"],c);const u=x(t,["sha256Hash"]);u!=null&&v(e,["sha256Hash"],u);const f=x(t,["uri"]);f!=null&&v(e,["uri"],f);const m=x(t,["downloadUri"]);m!=null&&v(e,["downloadUri"],m);const p=x(t,["state"]);p!=null&&v(e,["state"],p);const g=x(t,["source"]);g!=null&&v(e,["source"],g);const b=x(t,["videoMetadata"]);b!=null&&v(e,["videoMetadata"],b);const y=x(t,["error"]);return y!=null&&v(e,["error"],H$(y)),e}function V$(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["files"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>eE(i))),v(e,["files"],s)}return e}function G$(t){const e={},r=x(t,["sdkHttpResponse"]);return r!=null&&v(e,["sdkHttpResponse"],r),e}function z$(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class q$ extends uh{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new ex(eh.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(r),r)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(r=>eE(r))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=U$(e);return s=nr("files",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:c.headers},f})),a.then(c=>{const u=V$(c),f=new AK;return Object.assign(f,u),f})}}async createInternal(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=j$(e);return s=nr("upload/v1beta/files",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),a.then(c=>{const u=G$(c),f=new uK;return Object.assign(f,u),f})}}async get(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=O$(e);return s=nr("files/{file}",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),a.then(c=>eE(c))}}async delete(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Q$(e);return s=nr("files/{file}",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),a.then(()=>{const c=z$(),u=new dK;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function K$(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function cL(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],K$(r)),e}function W$(t){const e={},r=x(t,["speaker"]);r!=null&&v(e,["speaker"],r);const n=x(t,["voiceConfig"]);return n!=null&&v(e,["voiceConfig"],cL(n)),e}function $$(t){const e={},r=x(t,["speakerVoiceConfigs"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>W$(a))),v(e,["speakerVoiceConfigs"],n)}return e}function J$(t){const e={},r=x(t,["voiceConfig"]);r!=null&&v(e,["voiceConfig"],cL(r));const n=x(t,["multiSpeakerVoiceConfig"]);n!=null&&v(e,["multiSpeakerVoiceConfig"],$$(n));const a=x(t,["languageCode"]);return a!=null&&v(e,["languageCode"],a),e}function Y$(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function X$(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function Z$(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function eJ(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],Y$(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],X$(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],Z$(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const c=x(t,["executableCode"]);c!=null&&v(e,["executableCode"],c);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const f=x(t,["functionResponse"]);f!=null&&v(e,["functionResponse"],f);const m=x(t,["text"]);return m!=null&&v(e,["text"],m),e}function tJ(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>eJ(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function rJ(t){const e={},r=x(t,["behavior"]);r!=null&&v(e,["behavior"],r);const n=x(t,["description"]);n!=null&&v(e,["description"],n);const a=x(t,["name"]);a!=null&&v(e,["name"],a);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const c=x(t,["responseJsonSchema"]);return c!=null&&v(e,["responseJsonSchema"],c),e}function nJ(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function aJ(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],nJ(r)),e}function sJ(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function iJ(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],sJ(r)),e}function oJ(){return{}}function lJ(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>rJ(u))),v(e,["functionDeclarations"],c)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["googleSearch"]);n!=null&&v(e,["googleSearch"],aJ(n));const a=x(t,["googleSearchRetrieval"]);if(a!=null&&v(e,["googleSearchRetrieval"],iJ(a)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],oJ());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function cJ(t){const e={},r=x(t,["handle"]);if(r!=null&&v(e,["handle"],r),x(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Vk(){return{}}function AJ(t){const e={},r=x(t,["disabled"]);r!=null&&v(e,["disabled"],r);const n=x(t,["startOfSpeechSensitivity"]);n!=null&&v(e,["startOfSpeechSensitivity"],n);const a=x(t,["endOfSpeechSensitivity"]);a!=null&&v(e,["endOfSpeechSensitivity"],a);const s=x(t,["prefixPaddingMs"]);s!=null&&v(e,["prefixPaddingMs"],s);const i=x(t,["silenceDurationMs"]);return i!=null&&v(e,["silenceDurationMs"],i),e}function uJ(t){const e={},r=x(t,["automaticActivityDetection"]);r!=null&&v(e,["automaticActivityDetection"],AJ(r));const n=x(t,["activityHandling"]);n!=null&&v(e,["activityHandling"],n);const a=x(t,["turnCoverage"]);return a!=null&&v(e,["turnCoverage"],a),e}function dJ(t){const e={},r=x(t,["targetTokens"]);return r!=null&&v(e,["targetTokens"],r),e}function fJ(t){const e={},r=x(t,["triggerTokens"]);r!=null&&v(e,["triggerTokens"],r);const n=x(t,["slidingWindow"]);return n!=null&&v(e,["slidingWindow"],dJ(n)),e}function hJ(t){const e={},r=x(t,["proactiveAudio"]);return r!=null&&v(e,["proactiveAudio"],r),e}function mJ(t,e){const r={},n=x(t,["generationConfig"]);e!==void 0&&n!=null&&v(e,["setup","generationConfig"],n);const a=x(t,["responseModalities"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","responseModalities"],a);const s=x(t,["temperature"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","temperature"],s);const i=x(t,["topP"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig","topP"],i);const o=x(t,["topK"]);e!==void 0&&o!=null&&v(e,["setup","generationConfig","topK"],o);const c=x(t,["maxOutputTokens"]);e!==void 0&&c!=null&&v(e,["setup","generationConfig","maxOutputTokens"],c);const u=x(t,["mediaResolution"]);e!==void 0&&u!=null&&v(e,["setup","generationConfig","mediaResolution"],u);const f=x(t,["seed"]);e!==void 0&&f!=null&&v(e,["setup","generationConfig","seed"],f);const m=x(t,["speechConfig"]);e!==void 0&&m!=null&&v(e,["setup","generationConfig","speechConfig"],J$(u5(m)));const p=x(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],p);const g=x(t,["systemInstruction"]);e!==void 0&&g!=null&&v(e,["setup","systemInstruction"],tJ(Ui(g)));const b=x(t,["tools"]);if(e!==void 0&&b!=null){let H=um(b);Array.isArray(H)&&(H=H.map(U=>lJ(Am(U)))),v(e,["setup","tools"],H)}const y=x(t,["sessionResumption"]);e!==void 0&&y!=null&&v(e,["setup","sessionResumption"],cJ(y));const T=x(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&v(e,["setup","inputAudioTranscription"],Vk());const k=x(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&v(e,["setup","outputAudioTranscription"],Vk());const D=x(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&v(e,["setup","realtimeInputConfig"],uJ(D));const L=x(t,["contextWindowCompression"]);e!==void 0&&L!=null&&v(e,["setup","contextWindowCompression"],fJ(L));const j=x(t,["proactivity"]);return e!==void 0&&j!=null&&v(e,["setup","proactivity"],hJ(j)),r}function pJ(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["setup","model"],Hn(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],mJ(a,r)),r}function gJ(){return{}}function xJ(){return{}}function vJ(t){const e={},r=x(t,["media"]);r!=null&&v(e,["mediaChunks"],KR(r));const n=x(t,["audio"]);n!=null&&v(e,["audio"],$R(n));const a=x(t,["audioStreamEnd"]);a!=null&&v(e,["audioStreamEnd"],a);const s=x(t,["video"]);s!=null&&v(e,["video"],WR(s));const i=x(t,["text"]);return i!=null&&v(e,["text"],i),x(t,["activityStart"])!=null&&v(e,["activityStart"],gJ()),x(t,["activityEnd"])!=null&&v(e,["activityEnd"],xJ()),e}function AL(t){const e={},r=x(t,["text"]);r!=null&&v(e,["text"],r);const n=x(t,["weight"]);return n!=null&&v(e,["weight"],n),e}function wJ(t){const e={},r=x(t,["weightedPrompts"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>AL(a))),v(e,["weightedPrompts"],n)}return e}function uL(t){const e={},r=x(t,["temperature"]);r!=null&&v(e,["temperature"],r);const n=x(t,["topK"]);n!=null&&v(e,["topK"],n);const a=x(t,["seed"]);a!=null&&v(e,["seed"],a);const s=x(t,["guidance"]);s!=null&&v(e,["guidance"],s);const i=x(t,["bpm"]);i!=null&&v(e,["bpm"],i);const o=x(t,["density"]);o!=null&&v(e,["density"],o);const c=x(t,["brightness"]);c!=null&&v(e,["brightness"],c);const u=x(t,["scale"]);u!=null&&v(e,["scale"],u);const f=x(t,["muteBass"]);f!=null&&v(e,["muteBass"],f);const m=x(t,["muteDrums"]);m!=null&&v(e,["muteDrums"],m);const p=x(t,["onlyBassAndDrums"]);return p!=null&&v(e,["onlyBassAndDrums"],p),e}function yJ(t){const e={},r=x(t,["musicGenerationConfig"]);return r!=null&&v(e,["musicGenerationConfig"],uL(r)),e}function dL(t){const e={},r=x(t,["model"]);return r!=null&&v(e,["model"],r),e}function fL(t){const e={},r=x(t,["weightedPrompts"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>AL(a))),v(e,["weightedPrompts"],n)}return e}function tE(t){const e={},r=x(t,["setup"]);r!=null&&v(e,["setup"],dL(r));const n=x(t,["clientContent"]);n!=null&&v(e,["clientContent"],fL(n));const a=x(t,["musicGenerationConfig"]);a!=null&&v(e,["musicGenerationConfig"],uL(a));const s=x(t,["playbackControl"]);return s!=null&&v(e,["playbackControl"],s),e}function bJ(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function CJ(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],bJ(r)),e}function EJ(t){const e={},r=x(t,["voiceConfig"]);if(r!=null&&v(e,["voiceConfig"],CJ(r)),x(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function _J(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function SJ(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["data"]);n!=null&&v(e,["data"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function TJ(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function BJ(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],_J(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],SJ(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],TJ(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const c=x(t,["executableCode"]);c!=null&&v(e,["executableCode"],c);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const f=x(t,["functionResponse"]);f!=null&&v(e,["functionResponse"],f);const m=x(t,["text"]);return m!=null&&v(e,["text"],m),e}function NJ(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>BJ(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function kJ(t){const e={};if(x(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=x(t,["description"]);r!=null&&v(e,["description"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const s=x(t,["parametersJsonSchema"]);s!=null&&v(e,["parametersJsonSchema"],s);const i=x(t,["response"]);i!=null&&v(e,["response"],i);const o=x(t,["responseJsonSchema"]);return o!=null&&v(e,["responseJsonSchema"],o),e}function IJ(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function FJ(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],IJ(r)),e}function DJ(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function RJ(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],DJ(r)),e}function LJ(){return{}}function UJ(t){const e={},r=x(t,["apiKeyString"]);return r!=null&&v(e,["apiKeyString"],r),e}function MJ(t){const e={},r=x(t,["apiKeyConfig"]);r!=null&&v(e,["apiKeyConfig"],UJ(r));const n=x(t,["authType"]);n!=null&&v(e,["authType"],n);const a=x(t,["googleServiceAccountConfig"]);a!=null&&v(e,["googleServiceAccountConfig"],a);const s=x(t,["httpBasicAuthConfig"]);s!=null&&v(e,["httpBasicAuthConfig"],s);const i=x(t,["oauthConfig"]);i!=null&&v(e,["oauthConfig"],i);const o=x(t,["oidcConfig"]);return o!=null&&v(e,["oidcConfig"],o),e}function PJ(t){const e={},r=x(t,["authConfig"]);return r!=null&&v(e,["authConfig"],MJ(r)),e}function jJ(){return{}}function OJ(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let m=r;Array.isArray(m)&&(m=m.map(p=>kJ(p))),v(e,["functionDeclarations"],m)}const n=x(t,["retrieval"]);n!=null&&v(e,["retrieval"],n);const a=x(t,["googleSearch"]);a!=null&&v(e,["googleSearch"],FJ(a));const s=x(t,["googleSearchRetrieval"]);s!=null&&v(e,["googleSearchRetrieval"],RJ(s)),x(t,["enterpriseWebSearch"])!=null&&v(e,["enterpriseWebSearch"],LJ());const o=x(t,["googleMaps"]);o!=null&&v(e,["googleMaps"],PJ(o)),x(t,["urlContext"])!=null&&v(e,["urlContext"],jJ());const u=x(t,["codeExecution"]);u!=null&&v(e,["codeExecution"],u);const f=x(t,["computerUse"]);return f!=null&&v(e,["computerUse"],f),e}function QJ(t){const e={},r=x(t,["handle"]);r!=null&&v(e,["handle"],r);const n=x(t,["transparent"]);return n!=null&&v(e,["transparent"],n),e}function Gk(){return{}}function HJ(t){const e={},r=x(t,["disabled"]);r!=null&&v(e,["disabled"],r);const n=x(t,["startOfSpeechSensitivity"]);n!=null&&v(e,["startOfSpeechSensitivity"],n);const a=x(t,["endOfSpeechSensitivity"]);a!=null&&v(e,["endOfSpeechSensitivity"],a);const s=x(t,["prefixPaddingMs"]);s!=null&&v(e,["prefixPaddingMs"],s);const i=x(t,["silenceDurationMs"]);return i!=null&&v(e,["silenceDurationMs"],i),e}function VJ(t){const e={},r=x(t,["automaticActivityDetection"]);r!=null&&v(e,["automaticActivityDetection"],HJ(r));const n=x(t,["activityHandling"]);n!=null&&v(e,["activityHandling"],n);const a=x(t,["turnCoverage"]);return a!=null&&v(e,["turnCoverage"],a),e}function GJ(t){const e={},r=x(t,["targetTokens"]);return r!=null&&v(e,["targetTokens"],r),e}function zJ(t){const e={},r=x(t,["triggerTokens"]);r!=null&&v(e,["triggerTokens"],r);const n=x(t,["slidingWindow"]);return n!=null&&v(e,["slidingWindow"],GJ(n)),e}function qJ(t){const e={},r=x(t,["proactiveAudio"]);return r!=null&&v(e,["proactiveAudio"],r),e}function KJ(t,e){const r={},n=x(t,["generationConfig"]);e!==void 0&&n!=null&&v(e,["setup","generationConfig"],n);const a=x(t,["responseModalities"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","responseModalities"],a);const s=x(t,["temperature"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","temperature"],s);const i=x(t,["topP"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig","topP"],i);const o=x(t,["topK"]);e!==void 0&&o!=null&&v(e,["setup","generationConfig","topK"],o);const c=x(t,["maxOutputTokens"]);e!==void 0&&c!=null&&v(e,["setup","generationConfig","maxOutputTokens"],c);const u=x(t,["mediaResolution"]);e!==void 0&&u!=null&&v(e,["setup","generationConfig","mediaResolution"],u);const f=x(t,["seed"]);e!==void 0&&f!=null&&v(e,["setup","generationConfig","seed"],f);const m=x(t,["speechConfig"]);e!==void 0&&m!=null&&v(e,["setup","generationConfig","speechConfig"],EJ(u5(m)));const p=x(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],p);const g=x(t,["systemInstruction"]);e!==void 0&&g!=null&&v(e,["setup","systemInstruction"],NJ(Ui(g)));const b=x(t,["tools"]);if(e!==void 0&&b!=null){let H=um(b);Array.isArray(H)&&(H=H.map(U=>OJ(Am(U)))),v(e,["setup","tools"],H)}const y=x(t,["sessionResumption"]);e!==void 0&&y!=null&&v(e,["setup","sessionResumption"],QJ(y));const T=x(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&v(e,["setup","inputAudioTranscription"],Gk());const k=x(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&v(e,["setup","outputAudioTranscription"],Gk());const D=x(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&v(e,["setup","realtimeInputConfig"],VJ(D));const L=x(t,["contextWindowCompression"]);e!==void 0&&L!=null&&v(e,["setup","contextWindowCompression"],zJ(L));const j=x(t,["proactivity"]);return e!==void 0&&j!=null&&v(e,["setup","proactivity"],qJ(j)),r}function WJ(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["setup","model"],Hn(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],KJ(a,r)),r}function $J(){return{}}function JJ(){return{}}function YJ(t){const e={},r=x(t,["media"]);r!=null&&v(e,["mediaChunks"],KR(r));const n=x(t,["audio"]);n!=null&&v(e,["audio"],$R(n));const a=x(t,["audioStreamEnd"]);a!=null&&v(e,["audioStreamEnd"],a);const s=x(t,["video"]);s!=null&&v(e,["video"],WR(s));const i=x(t,["text"]);return i!=null&&v(e,["text"],i),x(t,["activityStart"])!=null&&v(e,["activityStart"],$J()),x(t,["activityEnd"])!=null&&v(e,["activityEnd"],JJ()),e}function XJ(){return{}}function ZJ(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function eY(t){const e={},r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function tY(t){const e={},r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function rY(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],ZJ(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],eY(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],tY(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const c=x(t,["executableCode"]);c!=null&&v(e,["executableCode"],c);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const f=x(t,["functionResponse"]);f!=null&&v(e,["functionResponse"],f);const m=x(t,["text"]);return m!=null&&v(e,["text"],m),e}function nY(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>rY(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function zk(t){const e={},r=x(t,["text"]);r!=null&&v(e,["text"],r);const n=x(t,["finished"]);return n!=null&&v(e,["finished"],n),e}function aY(t){const e={},r=x(t,["retrievedUrl"]);r!=null&&v(e,["retrievedUrl"],r);const n=x(t,["urlRetrievalStatus"]);return n!=null&&v(e,["urlRetrievalStatus"],n),e}function sY(t){const e={},r=x(t,["urlMetadata"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>aY(a))),v(e,["urlMetadata"],n)}return e}function iY(t){const e={},r=x(t,["modelTurn"]);r!=null&&v(e,["modelTurn"],nY(r));const n=x(t,["turnComplete"]);n!=null&&v(e,["turnComplete"],n);const a=x(t,["interrupted"]);a!=null&&v(e,["interrupted"],a);const s=x(t,["groundingMetadata"]);s!=null&&v(e,["groundingMetadata"],s);const i=x(t,["generationComplete"]);i!=null&&v(e,["generationComplete"],i);const o=x(t,["inputTranscription"]);o!=null&&v(e,["inputTranscription"],zk(o));const c=x(t,["outputTranscription"]);c!=null&&v(e,["outputTranscription"],zk(c));const u=x(t,["urlContextMetadata"]);return u!=null&&v(e,["urlContextMetadata"],sY(u)),e}function oY(t){const e={},r=x(t,["id"]);r!=null&&v(e,["id"],r);const n=x(t,["args"]);n!=null&&v(e,["args"],n);const a=x(t,["name"]);return a!=null&&v(e,["name"],a),e}function lY(t){const e={},r=x(t,["functionCalls"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>oY(a))),v(e,["functionCalls"],n)}return e}function cY(t){const e={},r=x(t,["ids"]);return r!=null&&v(e,["ids"],r),e}function x1(t){const e={},r=x(t,["modality"]);r!=null&&v(e,["modality"],r);const n=x(t,["tokenCount"]);return n!=null&&v(e,["tokenCount"],n),e}function AY(t){const e={},r=x(t,["promptTokenCount"]);r!=null&&v(e,["promptTokenCount"],r);const n=x(t,["cachedContentTokenCount"]);n!=null&&v(e,["cachedContentTokenCount"],n);const a=x(t,["responseTokenCount"]);a!=null&&v(e,["responseTokenCount"],a);const s=x(t,["toolUsePromptTokenCount"]);s!=null&&v(e,["toolUsePromptTokenCount"],s);const i=x(t,["thoughtsTokenCount"]);i!=null&&v(e,["thoughtsTokenCount"],i);const o=x(t,["totalTokenCount"]);o!=null&&v(e,["totalTokenCount"],o);const c=x(t,["promptTokensDetails"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(g=>x1(g))),v(e,["promptTokensDetails"],p)}const u=x(t,["cacheTokensDetails"]);if(u!=null){let p=u;Array.isArray(p)&&(p=p.map(g=>x1(g))),v(e,["cacheTokensDetails"],p)}const f=x(t,["responseTokensDetails"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(g=>x1(g))),v(e,["responseTokensDetails"],p)}const m=x(t,["toolUsePromptTokensDetails"]);if(m!=null){let p=m;Array.isArray(p)&&(p=p.map(g=>x1(g))),v(e,["toolUsePromptTokensDetails"],p)}return e}function uY(t){const e={},r=x(t,["timeLeft"]);return r!=null&&v(e,["timeLeft"],r),e}function dY(t){const e={},r=x(t,["newHandle"]);r!=null&&v(e,["newHandle"],r);const n=x(t,["resumable"]);n!=null&&v(e,["resumable"],n);const a=x(t,["lastConsumedClientMessageIndex"]);return a!=null&&v(e,["lastConsumedClientMessageIndex"],a),e}function fY(t){const e={};x(t,["setupComplete"])!=null&&v(e,["setupComplete"],XJ());const n=x(t,["serverContent"]);n!=null&&v(e,["serverContent"],iY(n));const a=x(t,["toolCall"]);a!=null&&v(e,["toolCall"],lY(a));const s=x(t,["toolCallCancellation"]);s!=null&&v(e,["toolCallCancellation"],cY(s));const i=x(t,["usageMetadata"]);i!=null&&v(e,["usageMetadata"],AY(i));const o=x(t,["goAway"]);o!=null&&v(e,["goAway"],uY(o));const c=x(t,["sessionResumptionUpdate"]);return c!=null&&v(e,["sessionResumptionUpdate"],dY(c)),e}function hY(){return{}}function mY(t){const e={},r=x(t,["text"]);r!=null&&v(e,["text"],r);const n=x(t,["weight"]);return n!=null&&v(e,["weight"],n),e}function pY(t){const e={},r=x(t,["weightedPrompts"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>mY(a))),v(e,["weightedPrompts"],n)}return e}function gY(t){const e={},r=x(t,["temperature"]);r!=null&&v(e,["temperature"],r);const n=x(t,["topK"]);n!=null&&v(e,["topK"],n);const a=x(t,["seed"]);a!=null&&v(e,["seed"],a);const s=x(t,["guidance"]);s!=null&&v(e,["guidance"],s);const i=x(t,["bpm"]);i!=null&&v(e,["bpm"],i);const o=x(t,["density"]);o!=null&&v(e,["density"],o);const c=x(t,["brightness"]);c!=null&&v(e,["brightness"],c);const u=x(t,["scale"]);u!=null&&v(e,["scale"],u);const f=x(t,["muteBass"]);f!=null&&v(e,["muteBass"],f);const m=x(t,["muteDrums"]);m!=null&&v(e,["muteDrums"],m);const p=x(t,["onlyBassAndDrums"]);return p!=null&&v(e,["onlyBassAndDrums"],p),e}function xY(t){const e={},r=x(t,["clientContent"]);r!=null&&v(e,["clientContent"],pY(r));const n=x(t,["musicGenerationConfig"]);return n!=null&&v(e,["musicGenerationConfig"],gY(n)),e}function vY(t){const e={},r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);n!=null&&v(e,["mimeType"],n);const a=x(t,["sourceMetadata"]);return a!=null&&v(e,["sourceMetadata"],xY(a)),e}function wY(t){const e={},r=x(t,["audioChunks"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>vY(a))),v(e,["audioChunks"],n)}return e}function yY(t){const e={},r=x(t,["text"]);r!=null&&v(e,["text"],r);const n=x(t,["filteredReason"]);return n!=null&&v(e,["filteredReason"],n),e}function bY(t){const e={};x(t,["setupComplete"])!=null&&v(e,["setupComplete"],hY());const n=x(t,["serverContent"]);n!=null&&v(e,["serverContent"],wY(n));const a=x(t,["filteredPrompt"]);return a!=null&&v(e,["filteredPrompt"],yY(a)),e}function CY(t){const e={},r=x(t,["sessionId"]);return r!=null&&v(e,["sessionId"],r),e}function EY(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function _Y(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["data"]);n!=null&&v(e,["data"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function SY(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function TY(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],EY(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],_Y(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],SY(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const c=x(t,["executableCode"]);c!=null&&v(e,["executableCode"],c);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const f=x(t,["functionResponse"]);f!=null&&v(e,["functionResponse"],f);const m=x(t,["text"]);return m!=null&&v(e,["text"],m),e}function BY(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>TY(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function qk(t){const e={},r=x(t,["text"]);r!=null&&v(e,["text"],r);const n=x(t,["finished"]);return n!=null&&v(e,["finished"],n),e}function NY(t){const e={},r=x(t,["modelTurn"]);r!=null&&v(e,["modelTurn"],BY(r));const n=x(t,["turnComplete"]);n!=null&&v(e,["turnComplete"],n);const a=x(t,["interrupted"]);a!=null&&v(e,["interrupted"],a);const s=x(t,["groundingMetadata"]);s!=null&&v(e,["groundingMetadata"],s);const i=x(t,["generationComplete"]);i!=null&&v(e,["generationComplete"],i);const o=x(t,["inputTranscription"]);o!=null&&v(e,["inputTranscription"],qk(o));const c=x(t,["outputTranscription"]);return c!=null&&v(e,["outputTranscription"],qk(c)),e}function kY(t){const e={},r=x(t,["args"]);r!=null&&v(e,["args"],r);const n=x(t,["name"]);return n!=null&&v(e,["name"],n),e}function IY(t){const e={},r=x(t,["functionCalls"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>kY(a))),v(e,["functionCalls"],n)}return e}function FY(t){const e={},r=x(t,["ids"]);return r!=null&&v(e,["ids"],r),e}function v1(t){const e={},r=x(t,["modality"]);r!=null&&v(e,["modality"],r);const n=x(t,["tokenCount"]);return n!=null&&v(e,["tokenCount"],n),e}function DY(t){const e={},r=x(t,["promptTokenCount"]);r!=null&&v(e,["promptTokenCount"],r);const n=x(t,["cachedContentTokenCount"]);n!=null&&v(e,["cachedContentTokenCount"],n);const a=x(t,["candidatesTokenCount"]);a!=null&&v(e,["responseTokenCount"],a);const s=x(t,["toolUsePromptTokenCount"]);s!=null&&v(e,["toolUsePromptTokenCount"],s);const i=x(t,["thoughtsTokenCount"]);i!=null&&v(e,["thoughtsTokenCount"],i);const o=x(t,["totalTokenCount"]);o!=null&&v(e,["totalTokenCount"],o);const c=x(t,["promptTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(b=>v1(b))),v(e,["promptTokensDetails"],g)}const u=x(t,["cacheTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(b=>v1(b))),v(e,["cacheTokensDetails"],g)}const f=x(t,["candidatesTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(b=>v1(b))),v(e,["responseTokensDetails"],g)}const m=x(t,["toolUsePromptTokensDetails"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(b=>v1(b))),v(e,["toolUsePromptTokensDetails"],g)}const p=x(t,["trafficType"]);return p!=null&&v(e,["trafficType"],p),e}function RY(t){const e={},r=x(t,["timeLeft"]);return r!=null&&v(e,["timeLeft"],r),e}function LY(t){const e={},r=x(t,["newHandle"]);r!=null&&v(e,["newHandle"],r);const n=x(t,["resumable"]);n!=null&&v(e,["resumable"],n);const a=x(t,["lastConsumedClientMessageIndex"]);return a!=null&&v(e,["lastConsumedClientMessageIndex"],a),e}function UY(t){const e={},r=x(t,["setupComplete"]);r!=null&&v(e,["setupComplete"],CY(r));const n=x(t,["serverContent"]);n!=null&&v(e,["serverContent"],NY(n));const a=x(t,["toolCall"]);a!=null&&v(e,["toolCall"],IY(a));const s=x(t,["toolCallCancellation"]);s!=null&&v(e,["toolCallCancellation"],FY(s));const i=x(t,["usageMetadata"]);i!=null&&v(e,["usageMetadata"],DY(i));const o=x(t,["goAway"]);o!=null&&v(e,["goAway"],RY(o));const c=x(t,["sessionResumptionUpdate"]);return c!=null&&v(e,["sessionResumptionUpdate"],LY(c)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MY(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function PY(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function jY(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function OY(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],MY(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],PY(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],jY(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const c=x(t,["executableCode"]);c!=null&&v(e,["executableCode"],c);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const f=x(t,["functionResponse"]);f!=null&&v(e,["functionResponse"],f);const m=x(t,["text"]);return m!=null&&v(e,["text"],m),e}function lw(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>OY(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function QY(t){const e={},r=x(t,["anyOf"]);r!=null&&v(e,["anyOf"],r);const n=x(t,["default"]);n!=null&&v(e,["default"],n);const a=x(t,["description"]);a!=null&&v(e,["description"],a);const s=x(t,["enum"]);s!=null&&v(e,["enum"],s);const i=x(t,["example"]);i!=null&&v(e,["example"],i);const o=x(t,["format"]);o!=null&&v(e,["format"],o);const c=x(t,["items"]);c!=null&&v(e,["items"],c);const u=x(t,["maxItems"]);u!=null&&v(e,["maxItems"],u);const f=x(t,["maxLength"]);f!=null&&v(e,["maxLength"],f);const m=x(t,["maxProperties"]);m!=null&&v(e,["maxProperties"],m);const p=x(t,["maximum"]);p!=null&&v(e,["maximum"],p);const g=x(t,["minItems"]);g!=null&&v(e,["minItems"],g);const b=x(t,["minLength"]);b!=null&&v(e,["minLength"],b);const y=x(t,["minProperties"]);y!=null&&v(e,["minProperties"],y);const T=x(t,["minimum"]);T!=null&&v(e,["minimum"],T);const k=x(t,["nullable"]);k!=null&&v(e,["nullable"],k);const D=x(t,["pattern"]);D!=null&&v(e,["pattern"],D);const L=x(t,["properties"]);L!=null&&v(e,["properties"],L);const j=x(t,["propertyOrdering"]);j!=null&&v(e,["propertyOrdering"],j);const H=x(t,["required"]);H!=null&&v(e,["required"],H);const U=x(t,["title"]);U!=null&&v(e,["title"],U);const E=x(t,["type"]);return E!=null&&v(e,["type"],E),e}function HY(t){const e={};if(x(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=x(t,["category"]);r!=null&&v(e,["category"],r);const n=x(t,["threshold"]);return n!=null&&v(e,["threshold"],n),e}function VY(t){const e={},r=x(t,["behavior"]);r!=null&&v(e,["behavior"],r);const n=x(t,["description"]);n!=null&&v(e,["description"],n);const a=x(t,["name"]);a!=null&&v(e,["name"],a);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const c=x(t,["responseJsonSchema"]);return c!=null&&v(e,["responseJsonSchema"],c),e}function GY(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function zY(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],GY(r)),e}function qY(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function KY(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],qY(r)),e}function WY(){return{}}function $Y(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>VY(u))),v(e,["functionDeclarations"],c)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["googleSearch"]);n!=null&&v(e,["googleSearch"],zY(n));const a=x(t,["googleSearchRetrieval"]);if(a!=null&&v(e,["googleSearchRetrieval"],KY(a)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],WY());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function JY(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["allowedFunctionNames"]);return n!=null&&v(e,["allowedFunctionNames"],n),e}function YY(t){const e={},r=x(t,["latitude"]);r!=null&&v(e,["latitude"],r);const n=x(t,["longitude"]);return n!=null&&v(e,["longitude"],n),e}function XY(t){const e={},r=x(t,["latLng"]);r!=null&&v(e,["latLng"],YY(r));const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function ZY(t){const e={},r=x(t,["functionCallingConfig"]);r!=null&&v(e,["functionCallingConfig"],JY(r));const n=x(t,["retrievalConfig"]);return n!=null&&v(e,["retrievalConfig"],XY(n)),e}function eX(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function hL(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],eX(r)),e}function tX(t){const e={},r=x(t,["speaker"]);r!=null&&v(e,["speaker"],r);const n=x(t,["voiceConfig"]);return n!=null&&v(e,["voiceConfig"],hL(n)),e}function rX(t){const e={},r=x(t,["speakerVoiceConfigs"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>tX(a))),v(e,["speakerVoiceConfigs"],n)}return e}function nX(t){const e={},r=x(t,["voiceConfig"]);r!=null&&v(e,["voiceConfig"],hL(r));const n=x(t,["multiSpeakerVoiceConfig"]);n!=null&&v(e,["multiSpeakerVoiceConfig"],rX(n));const a=x(t,["languageCode"]);return a!=null&&v(e,["languageCode"],a),e}function aX(t){const e={},r=x(t,["includeThoughts"]);r!=null&&v(e,["includeThoughts"],r);const n=x(t,["thinkingBudget"]);return n!=null&&v(e,["thinkingBudget"],n),e}function sX(t,e,r){const n={},a=x(e,["systemInstruction"]);r!==void 0&&a!=null&&v(r,["systemInstruction"],lw(Ui(a)));const s=x(e,["temperature"]);s!=null&&v(n,["temperature"],s);const i=x(e,["topP"]);i!=null&&v(n,["topP"],i);const o=x(e,["topK"]);o!=null&&v(n,["topK"],o);const c=x(e,["candidateCount"]);c!=null&&v(n,["candidateCount"],c);const u=x(e,["maxOutputTokens"]);u!=null&&v(n,["maxOutputTokens"],u);const f=x(e,["stopSequences"]);f!=null&&v(n,["stopSequences"],f);const m=x(e,["responseLogprobs"]);m!=null&&v(n,["responseLogprobs"],m);const p=x(e,["logprobs"]);p!=null&&v(n,["logprobs"],p);const g=x(e,["presencePenalty"]);g!=null&&v(n,["presencePenalty"],g);const b=x(e,["frequencyPenalty"]);b!=null&&v(n,["frequencyPenalty"],b);const y=x(e,["seed"]);y!=null&&v(n,["seed"],y);const T=x(e,["responseMimeType"]);T!=null&&v(n,["responseMimeType"],T);const k=x(e,["responseSchema"]);k!=null&&v(n,["responseSchema"],QY(c5(k)));const D=x(e,["responseJsonSchema"]);if(D!=null&&v(n,["responseJsonSchema"],D),x(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(x(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const L=x(e,["safetySettings"]);if(r!==void 0&&L!=null){let R=L;Array.isArray(R)&&(R=R.map(F=>HY(F))),v(r,["safetySettings"],R)}const j=x(e,["tools"]);if(r!==void 0&&j!=null){let R=um(j);Array.isArray(R)&&(R=R.map(F=>$Y(Am(F)))),v(r,["tools"],R)}const H=x(e,["toolConfig"]);if(r!==void 0&&H!=null&&v(r,["toolConfig"],ZY(H)),x(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=x(e,["cachedContent"]);r!==void 0&&U!=null&&v(r,["cachedContent"],Cu(t,U));const E=x(e,["responseModalities"]);E!=null&&v(n,["responseModalities"],E);const _=x(e,["mediaResolution"]);_!=null&&v(n,["mediaResolution"],_);const B=x(e,["speechConfig"]);if(B!=null&&v(n,["speechConfig"],nX(A5(B))),x(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Q=x(e,["thinkingConfig"]);return Q!=null&&v(n,["thinkingConfig"],aX(Q)),n}function Kk(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],Hn(t,n));const a=x(e,["contents"]);if(a!=null){let i=Ul(a);Array.isArray(i)&&(i=i.map(o=>lw(o))),v(r,["contents"],i)}const s=x(e,["config"]);return s!=null&&v(r,["generationConfig"],sX(t,s,r)),r}function iX(t,e){const r={},n=x(t,["taskType"]);e!==void 0&&n!=null&&v(e,["requests[]","taskType"],n);const a=x(t,["title"]);e!==void 0&&a!=null&&v(e,["requests[]","title"],a);const s=x(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&v(e,["requests[]","outputDimensionality"],s),x(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(x(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function oX(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],Hn(t,n));const a=x(e,["contents"]);a!=null&&v(r,["requests[]","content"],YR(t,a));const s=x(e,["config"]);s!=null&&v(r,["config"],iX(s,r));const i=x(e,["model"]);return i!==void 0&&v(r,["requests[]","model"],Hn(t,i)),r}function lX(t,e){const r={};if(x(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const n=x(t,["numberOfImages"]);e!==void 0&&n!=null&&v(e,["parameters","sampleCount"],n);const a=x(t,["aspectRatio"]);e!==void 0&&a!=null&&v(e,["parameters","aspectRatio"],a);const s=x(t,["guidanceScale"]);if(e!==void 0&&s!=null&&v(e,["parameters","guidanceScale"],s),x(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=x(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&v(e,["parameters","safetySetting"],i);const o=x(t,["personGeneration"]);e!==void 0&&o!=null&&v(e,["parameters","personGeneration"],o);const c=x(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&v(e,["parameters","includeSafetyAttributes"],c);const u=x(t,["includeRaiReason"]);e!==void 0&&u!=null&&v(e,["parameters","includeRaiReason"],u);const f=x(t,["language"]);e!==void 0&&f!=null&&v(e,["parameters","language"],f);const m=x(t,["outputMimeType"]);e!==void 0&&m!=null&&v(e,["parameters","outputOptions","mimeType"],m);const p=x(t,["outputCompressionQuality"]);if(e!==void 0&&p!=null&&v(e,["parameters","outputOptions","compressionQuality"],p),x(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(x(t,["imageSize"])!==void 0)throw new Error("imageSize parameter is not supported in Gemini API.");if(x(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function cX(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],Hn(t,n));const a=x(e,["prompt"]);a!=null&&v(r,["instances[0]","prompt"],a);const s=x(e,["config"]);return s!=null&&v(r,["config"],lX(s,r)),r}function AX(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","name"],Hn(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function uX(t,e,r){const n={},a=x(e,["pageSize"]);r!==void 0&&a!=null&&v(r,["_query","pageSize"],a);const s=x(e,["pageToken"]);r!==void 0&&s!=null&&v(r,["_query","pageToken"],s);const i=x(e,["filter"]);r!==void 0&&i!=null&&v(r,["_query","filter"],i);const o=x(e,["queryBase"]);return r!==void 0&&o!=null&&v(r,["_url","models_url"],eL(t,o)),n}function dX(t,e){const r={},n=x(e,["config"]);return n!=null&&v(r,["config"],uX(t,n,r)),r}function fX(t,e){const r={},n=x(t,["displayName"]);e!==void 0&&n!=null&&v(e,["displayName"],n);const a=x(t,["description"]);e!==void 0&&a!=null&&v(e,["description"],a);const s=x(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&v(e,["defaultCheckpointId"],s),r}function hX(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","name"],Hn(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],fX(a,r)),r}function mX(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","name"],Hn(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function pX(t){const e={};if(x(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(x(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(x(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function gX(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],Hn(t,n));const a=x(e,["contents"]);if(a!=null){let i=Ul(a);Array.isArray(i)&&(i=i.map(o=>lw(o))),v(r,["contents"],i)}const s=x(e,["config"]);return s!=null&&v(r,["config"],pX(s)),r}function xX(t){const e={};if(x(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=x(t,["imageBytes"]);r!=null&&v(e,["bytesBase64Encoded"],dh(r));const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function vX(t,e){const r={},n=x(t,["numberOfVideos"]);if(e!==void 0&&n!=null&&v(e,["parameters","sampleCount"],n),x(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=x(t,["durationSeconds"]);if(e!==void 0&&a!=null&&v(e,["parameters","durationSeconds"],a),x(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=x(t,["aspectRatio"]);if(e!==void 0&&s!=null&&v(e,["parameters","aspectRatio"],s),x(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const i=x(t,["personGeneration"]);if(e!==void 0&&i!=null&&v(e,["parameters","personGeneration"],i),x(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const o=x(t,["negativePrompt"]);e!==void 0&&o!=null&&v(e,["parameters","negativePrompt"],o);const c=x(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&v(e,["parameters","enhancePrompt"],c),x(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(x(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(x(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return r}function wX(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],Hn(t,n));const a=x(e,["prompt"]);a!=null&&v(r,["instances[0]","prompt"],a);const s=x(e,["image"]);if(s!=null&&v(r,["instances[0]","image"],xX(s)),x(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const i=x(e,["config"]);return i!=null&&v(r,["config"],vX(i,r)),r}function yX(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function bX(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["data"]);n!=null&&v(e,["data"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function CX(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function EX(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],yX(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],bX(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],CX(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const c=x(t,["executableCode"]);c!=null&&v(e,["executableCode"],c);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const f=x(t,["functionResponse"]);f!=null&&v(e,["functionResponse"],f);const m=x(t,["text"]);return m!=null&&v(e,["text"],m),e}function fm(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>EX(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function _X(t){const e={},r=x(t,["anyOf"]);r!=null&&v(e,["anyOf"],r);const n=x(t,["default"]);n!=null&&v(e,["default"],n);const a=x(t,["description"]);a!=null&&v(e,["description"],a);const s=x(t,["enum"]);s!=null&&v(e,["enum"],s);const i=x(t,["example"]);i!=null&&v(e,["example"],i);const o=x(t,["format"]);o!=null&&v(e,["format"],o);const c=x(t,["items"]);c!=null&&v(e,["items"],c);const u=x(t,["maxItems"]);u!=null&&v(e,["maxItems"],u);const f=x(t,["maxLength"]);f!=null&&v(e,["maxLength"],f);const m=x(t,["maxProperties"]);m!=null&&v(e,["maxProperties"],m);const p=x(t,["maximum"]);p!=null&&v(e,["maximum"],p);const g=x(t,["minItems"]);g!=null&&v(e,["minItems"],g);const b=x(t,["minLength"]);b!=null&&v(e,["minLength"],b);const y=x(t,["minProperties"]);y!=null&&v(e,["minProperties"],y);const T=x(t,["minimum"]);T!=null&&v(e,["minimum"],T);const k=x(t,["nullable"]);k!=null&&v(e,["nullable"],k);const D=x(t,["pattern"]);D!=null&&v(e,["pattern"],D);const L=x(t,["properties"]);L!=null&&v(e,["properties"],L);const j=x(t,["propertyOrdering"]);j!=null&&v(e,["propertyOrdering"],j);const H=x(t,["required"]);H!=null&&v(e,["required"],H);const U=x(t,["title"]);U!=null&&v(e,["title"],U);const E=x(t,["type"]);return E!=null&&v(e,["type"],E),e}function SX(t){const e={},r=x(t,["featureSelectionPreference"]);return r!=null&&v(e,["featureSelectionPreference"],r),e}function TX(t){const e={},r=x(t,["method"]);r!=null&&v(e,["method"],r);const n=x(t,["category"]);n!=null&&v(e,["category"],n);const a=x(t,["threshold"]);return a!=null&&v(e,["threshold"],a),e}function BX(t){const e={};if(x(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=x(t,["description"]);r!=null&&v(e,["description"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const s=x(t,["parametersJsonSchema"]);s!=null&&v(e,["parametersJsonSchema"],s);const i=x(t,["response"]);i!=null&&v(e,["response"],i);const o=x(t,["responseJsonSchema"]);return o!=null&&v(e,["responseJsonSchema"],o),e}function NX(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function kX(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],NX(r)),e}function IX(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function FX(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],IX(r)),e}function DX(){return{}}function RX(t){const e={},r=x(t,["apiKeyString"]);return r!=null&&v(e,["apiKeyString"],r),e}function LX(t){const e={},r=x(t,["apiKeyConfig"]);r!=null&&v(e,["apiKeyConfig"],RX(r));const n=x(t,["authType"]);n!=null&&v(e,["authType"],n);const a=x(t,["googleServiceAccountConfig"]);a!=null&&v(e,["googleServiceAccountConfig"],a);const s=x(t,["httpBasicAuthConfig"]);s!=null&&v(e,["httpBasicAuthConfig"],s);const i=x(t,["oauthConfig"]);i!=null&&v(e,["oauthConfig"],i);const o=x(t,["oidcConfig"]);return o!=null&&v(e,["oidcConfig"],o),e}function UX(t){const e={},r=x(t,["authConfig"]);return r!=null&&v(e,["authConfig"],LX(r)),e}function MX(){return{}}function mL(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let m=r;Array.isArray(m)&&(m=m.map(p=>BX(p))),v(e,["functionDeclarations"],m)}const n=x(t,["retrieval"]);n!=null&&v(e,["retrieval"],n);const a=x(t,["googleSearch"]);a!=null&&v(e,["googleSearch"],kX(a));const s=x(t,["googleSearchRetrieval"]);s!=null&&v(e,["googleSearchRetrieval"],FX(s)),x(t,["enterpriseWebSearch"])!=null&&v(e,["enterpriseWebSearch"],DX());const o=x(t,["googleMaps"]);o!=null&&v(e,["googleMaps"],UX(o)),x(t,["urlContext"])!=null&&v(e,["urlContext"],MX());const u=x(t,["codeExecution"]);u!=null&&v(e,["codeExecution"],u);const f=x(t,["computerUse"]);return f!=null&&v(e,["computerUse"],f),e}function PX(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["allowedFunctionNames"]);return n!=null&&v(e,["allowedFunctionNames"],n),e}function jX(t){const e={},r=x(t,["latitude"]);r!=null&&v(e,["latitude"],r);const n=x(t,["longitude"]);return n!=null&&v(e,["longitude"],n),e}function OX(t){const e={},r=x(t,["latLng"]);r!=null&&v(e,["latLng"],jX(r));const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function QX(t){const e={},r=x(t,["functionCallingConfig"]);r!=null&&v(e,["functionCallingConfig"],PX(r));const n=x(t,["retrievalConfig"]);return n!=null&&v(e,["retrievalConfig"],OX(n)),e}function HX(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function VX(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],HX(r)),e}function GX(t){const e={},r=x(t,["voiceConfig"]);if(r!=null&&v(e,["voiceConfig"],VX(r)),x(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function zX(t){const e={},r=x(t,["includeThoughts"]);r!=null&&v(e,["includeThoughts"],r);const n=x(t,["thinkingBudget"]);return n!=null&&v(e,["thinkingBudget"],n),e}function qX(t,e,r){const n={},a=x(e,["systemInstruction"]);r!==void 0&&a!=null&&v(r,["systemInstruction"],fm(Ui(a)));const s=x(e,["temperature"]);s!=null&&v(n,["temperature"],s);const i=x(e,["topP"]);i!=null&&v(n,["topP"],i);const o=x(e,["topK"]);o!=null&&v(n,["topK"],o);const c=x(e,["candidateCount"]);c!=null&&v(n,["candidateCount"],c);const u=x(e,["maxOutputTokens"]);u!=null&&v(n,["maxOutputTokens"],u);const f=x(e,["stopSequences"]);f!=null&&v(n,["stopSequences"],f);const m=x(e,["responseLogprobs"]);m!=null&&v(n,["responseLogprobs"],m);const p=x(e,["logprobs"]);p!=null&&v(n,["logprobs"],p);const g=x(e,["presencePenalty"]);g!=null&&v(n,["presencePenalty"],g);const b=x(e,["frequencyPenalty"]);b!=null&&v(n,["frequencyPenalty"],b);const y=x(e,["seed"]);y!=null&&v(n,["seed"],y);const T=x(e,["responseMimeType"]);T!=null&&v(n,["responseMimeType"],T);const k=x(e,["responseSchema"]);k!=null&&v(n,["responseSchema"],_X(c5(k)));const D=x(e,["responseJsonSchema"]);D!=null&&v(n,["responseJsonSchema"],D);const L=x(e,["routingConfig"]);L!=null&&v(n,["routingConfig"],L);const j=x(e,["modelSelectionConfig"]);j!=null&&v(n,["modelConfig"],SX(j));const H=x(e,["safetySettings"]);if(r!==void 0&&H!=null){let oe=H;Array.isArray(oe)&&(oe=oe.map(te=>TX(te))),v(r,["safetySettings"],oe)}const U=x(e,["tools"]);if(r!==void 0&&U!=null){let oe=um(U);Array.isArray(oe)&&(oe=oe.map(te=>mL(Am(te)))),v(r,["tools"],oe)}const E=x(e,["toolConfig"]);r!==void 0&&E!=null&&v(r,["toolConfig"],QX(E));const _=x(e,["labels"]);r!==void 0&&_!=null&&v(r,["labels"],_);const B=x(e,["cachedContent"]);r!==void 0&&B!=null&&v(r,["cachedContent"],Cu(t,B));const Q=x(e,["responseModalities"]);Q!=null&&v(n,["responseModalities"],Q);const R=x(e,["mediaResolution"]);R!=null&&v(n,["mediaResolution"],R);const F=x(e,["speechConfig"]);F!=null&&v(n,["speechConfig"],GX(A5(F)));const V=x(e,["audioTimestamp"]);V!=null&&v(n,["audioTimestamp"],V);const X=x(e,["thinkingConfig"]);return X!=null&&v(n,["thinkingConfig"],zX(X)),n}function Wk(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],Hn(t,n));const a=x(e,["contents"]);if(a!=null){let i=Ul(a);Array.isArray(i)&&(i=i.map(o=>fm(o))),v(r,["contents"],i)}const s=x(e,["config"]);return s!=null&&v(r,["generationConfig"],qX(t,s,r)),r}function KX(t,e){const r={},n=x(t,["taskType"]);e!==void 0&&n!=null&&v(e,["instances[]","task_type"],n);const a=x(t,["title"]);e!==void 0&&a!=null&&v(e,["instances[]","title"],a);const s=x(t,["outputDimensionality"]);e!==void 0&&s!=null&&v(e,["parameters","outputDimensionality"],s);const i=x(t,["mimeType"]);e!==void 0&&i!=null&&v(e,["instances[]","mimeType"],i);const o=x(t,["autoTruncate"]);return e!==void 0&&o!=null&&v(e,["parameters","autoTruncate"],o),r}function WX(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],Hn(t,n));const a=x(e,["contents"]);a!=null&&v(r,["instances[]","content"],YR(t,a));const s=x(e,["config"]);return s!=null&&v(r,["config"],KX(s,r)),r}function $X(t,e){const r={},n=x(t,["outputGcsUri"]);e!==void 0&&n!=null&&v(e,["parameters","storageUri"],n);const a=x(t,["negativePrompt"]);e!==void 0&&a!=null&&v(e,["parameters","negativePrompt"],a);const s=x(t,["numberOfImages"]);e!==void 0&&s!=null&&v(e,["parameters","sampleCount"],s);const i=x(t,["aspectRatio"]);e!==void 0&&i!=null&&v(e,["parameters","aspectRatio"],i);const o=x(t,["guidanceScale"]);e!==void 0&&o!=null&&v(e,["parameters","guidanceScale"],o);const c=x(t,["seed"]);e!==void 0&&c!=null&&v(e,["parameters","seed"],c);const u=x(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&v(e,["parameters","safetySetting"],u);const f=x(t,["personGeneration"]);e!==void 0&&f!=null&&v(e,["parameters","personGeneration"],f);const m=x(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&v(e,["parameters","includeSafetyAttributes"],m);const p=x(t,["includeRaiReason"]);e!==void 0&&p!=null&&v(e,["parameters","includeRaiReason"],p);const g=x(t,["language"]);e!==void 0&&g!=null&&v(e,["parameters","language"],g);const b=x(t,["outputMimeType"]);e!==void 0&&b!=null&&v(e,["parameters","outputOptions","mimeType"],b);const y=x(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&v(e,["parameters","outputOptions","compressionQuality"],y);const T=x(t,["addWatermark"]);e!==void 0&&T!=null&&v(e,["parameters","addWatermark"],T);const k=x(t,["imageSize"]);e!==void 0&&k!=null&&v(e,["parameters","sampleImageSize"],k);const D=x(t,["enhancePrompt"]);return e!==void 0&&D!=null&&v(e,["parameters","enhancePrompt"],D),r}function JX(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],Hn(t,n));const a=x(e,["prompt"]);a!=null&&v(r,["instances[0]","prompt"],a);const s=x(e,["config"]);return s!=null&&v(r,["config"],$X(s,r)),r}function cw(t){const e={},r=x(t,["gcsUri"]);r!=null&&v(e,["gcsUri"],r);const n=x(t,["imageBytes"]);n!=null&&v(e,["bytesBase64Encoded"],dh(n));const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function YX(t){const e={},r=x(t,["maskMode"]);r!=null&&v(e,["maskMode"],r);const n=x(t,["segmentationClasses"]);n!=null&&v(e,["maskClasses"],n);const a=x(t,["maskDilation"]);return a!=null&&v(e,["dilation"],a),e}function XX(t){const e={},r=x(t,["controlType"]);r!=null&&v(e,["controlType"],r);const n=x(t,["enableControlImageComputation"]);return n!=null&&v(e,["computeControl"],n),e}function ZX(t){const e={},r=x(t,["styleDescription"]);return r!=null&&v(e,["styleDescription"],r),e}function eZ(t){const e={},r=x(t,["subjectType"]);r!=null&&v(e,["subjectType"],r);const n=x(t,["subjectDescription"]);return n!=null&&v(e,["subjectDescription"],n),e}function tZ(t){const e={},r=x(t,["referenceImage"]);r!=null&&v(e,["referenceImage"],cw(r));const n=x(t,["referenceId"]);n!=null&&v(e,["referenceId"],n);const a=x(t,["referenceType"]);a!=null&&v(e,["referenceType"],a);const s=x(t,["maskImageConfig"]);s!=null&&v(e,["maskImageConfig"],YX(s));const i=x(t,["controlImageConfig"]);i!=null&&v(e,["controlImageConfig"],XX(i));const o=x(t,["styleImageConfig"]);o!=null&&v(e,["styleImageConfig"],ZX(o));const c=x(t,["subjectImageConfig"]);return c!=null&&v(e,["subjectImageConfig"],eZ(c)),e}function rZ(t,e){const r={},n=x(t,["outputGcsUri"]);e!==void 0&&n!=null&&v(e,["parameters","storageUri"],n);const a=x(t,["negativePrompt"]);e!==void 0&&a!=null&&v(e,["parameters","negativePrompt"],a);const s=x(t,["numberOfImages"]);e!==void 0&&s!=null&&v(e,["parameters","sampleCount"],s);const i=x(t,["aspectRatio"]);e!==void 0&&i!=null&&v(e,["parameters","aspectRatio"],i);const o=x(t,["guidanceScale"]);e!==void 0&&o!=null&&v(e,["parameters","guidanceScale"],o);const c=x(t,["seed"]);e!==void 0&&c!=null&&v(e,["parameters","seed"],c);const u=x(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&v(e,["parameters","safetySetting"],u);const f=x(t,["personGeneration"]);e!==void 0&&f!=null&&v(e,["parameters","personGeneration"],f);const m=x(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&v(e,["parameters","includeSafetyAttributes"],m);const p=x(t,["includeRaiReason"]);e!==void 0&&p!=null&&v(e,["parameters","includeRaiReason"],p);const g=x(t,["language"]);e!==void 0&&g!=null&&v(e,["parameters","language"],g);const b=x(t,["outputMimeType"]);e!==void 0&&b!=null&&v(e,["parameters","outputOptions","mimeType"],b);const y=x(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&v(e,["parameters","outputOptions","compressionQuality"],y);const T=x(t,["addWatermark"]);e!==void 0&&T!=null&&v(e,["parameters","addWatermark"],T);const k=x(t,["editMode"]);e!==void 0&&k!=null&&v(e,["parameters","editMode"],k);const D=x(t,["baseSteps"]);return e!==void 0&&D!=null&&v(e,["parameters","editConfig","baseSteps"],D),r}function nZ(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],Hn(t,n));const a=x(e,["prompt"]);a!=null&&v(r,["instances[0]","prompt"],a);const s=x(e,["referenceImages"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(c=>tZ(c))),v(r,["instances[0]","referenceImages"],o)}const i=x(e,["config"]);return i!=null&&v(r,["config"],rZ(i,r)),r}function aZ(t,e){const r={},n=x(t,["includeRaiReason"]);e!==void 0&&n!=null&&v(e,["parameters","includeRaiReason"],n);const a=x(t,["outputMimeType"]);e!==void 0&&a!=null&&v(e,["parameters","outputOptions","mimeType"],a);const s=x(t,["outputCompressionQuality"]);e!==void 0&&s!=null&&v(e,["parameters","outputOptions","compressionQuality"],s);const i=x(t,["enhanceInputImage"]);e!==void 0&&i!=null&&v(e,["parameters","upscaleConfig","enhanceInputImage"],i);const o=x(t,["imagePreservationFactor"]);e!==void 0&&o!=null&&v(e,["parameters","upscaleConfig","imagePreservationFactor"],o);const c=x(t,["numberOfImages"]);e!==void 0&&c!=null&&v(e,["parameters","sampleCount"],c);const u=x(t,["mode"]);return e!==void 0&&u!=null&&v(e,["parameters","mode"],u),r}function sZ(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],Hn(t,n));const a=x(e,["image"]);a!=null&&v(r,["instances[0]","image"],cw(a));const s=x(e,["upscaleFactor"]);s!=null&&v(r,["parameters","upscaleConfig","upscaleFactor"],s);const i=x(e,["config"]);return i!=null&&v(r,["config"],aZ(i,r)),r}function iZ(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","name"],Hn(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function oZ(t,e,r){const n={},a=x(e,["pageSize"]);r!==void 0&&a!=null&&v(r,["_query","pageSize"],a);const s=x(e,["pageToken"]);r!==void 0&&s!=null&&v(r,["_query","pageToken"],s);const i=x(e,["filter"]);r!==void 0&&i!=null&&v(r,["_query","filter"],i);const o=x(e,["queryBase"]);return r!==void 0&&o!=null&&v(r,["_url","models_url"],eL(t,o)),n}function lZ(t,e){const r={},n=x(e,["config"]);return n!=null&&v(r,["config"],oZ(t,n,r)),r}function cZ(t,e){const r={},n=x(t,["displayName"]);e!==void 0&&n!=null&&v(e,["displayName"],n);const a=x(t,["description"]);e!==void 0&&a!=null&&v(e,["description"],a);const s=x(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&v(e,["defaultCheckpointId"],s),r}function AZ(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],Hn(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],cZ(a,r)),r}function uZ(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","name"],Hn(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function dZ(t,e){const r={},n=x(t,["systemInstruction"]);e!==void 0&&n!=null&&v(e,["systemInstruction"],fm(Ui(n)));const a=x(t,["tools"]);if(e!==void 0&&a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>mL(o))),v(e,["tools"],i)}const s=x(t,["generationConfig"]);return e!==void 0&&s!=null&&v(e,["generationConfig"],s),r}function fZ(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],Hn(t,n));const a=x(e,["contents"]);if(a!=null){let i=Ul(a);Array.isArray(i)&&(i=i.map(o=>fm(o))),v(r,["contents"],i)}const s=x(e,["config"]);return s!=null&&v(r,["config"],dZ(s,r)),r}function hZ(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],Hn(t,n));const a=x(e,["contents"]);if(a!=null){let i=Ul(a);Array.isArray(i)&&(i=i.map(o=>fm(o))),v(r,["contents"],i)}const s=x(e,["config"]);return s!=null&&v(r,["config"],s),r}function mZ(t){const e={},r=x(t,["uri"]);r!=null&&v(e,["gcsUri"],r);const n=x(t,["videoBytes"]);n!=null&&v(e,["bytesBase64Encoded"],dh(n));const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function pZ(t,e){const r={},n=x(t,["numberOfVideos"]);e!==void 0&&n!=null&&v(e,["parameters","sampleCount"],n);const a=x(t,["outputGcsUri"]);e!==void 0&&a!=null&&v(e,["parameters","storageUri"],a);const s=x(t,["fps"]);e!==void 0&&s!=null&&v(e,["parameters","fps"],s);const i=x(t,["durationSeconds"]);e!==void 0&&i!=null&&v(e,["parameters","durationSeconds"],i);const o=x(t,["seed"]);e!==void 0&&o!=null&&v(e,["parameters","seed"],o);const c=x(t,["aspectRatio"]);e!==void 0&&c!=null&&v(e,["parameters","aspectRatio"],c);const u=x(t,["resolution"]);e!==void 0&&u!=null&&v(e,["parameters","resolution"],u);const f=x(t,["personGeneration"]);e!==void 0&&f!=null&&v(e,["parameters","personGeneration"],f);const m=x(t,["pubsubTopic"]);e!==void 0&&m!=null&&v(e,["parameters","pubsubTopic"],m);const p=x(t,["negativePrompt"]);e!==void 0&&p!=null&&v(e,["parameters","negativePrompt"],p);const g=x(t,["enhancePrompt"]);e!==void 0&&g!=null&&v(e,["parameters","enhancePrompt"],g);const b=x(t,["generateAudio"]);e!==void 0&&b!=null&&v(e,["parameters","generateAudio"],b);const y=x(t,["lastFrame"]);e!==void 0&&y!=null&&v(e,["instances[0]","lastFrame"],cw(y));const T=x(t,["compressionQuality"]);return e!==void 0&&T!=null&&v(e,["parameters","compressionQuality"],T),r}function gZ(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],Hn(t,n));const a=x(e,["prompt"]);a!=null&&v(r,["instances[0]","prompt"],a);const s=x(e,["image"]);s!=null&&v(r,["instances[0]","image"],cw(s));const i=x(e,["video"]);i!=null&&v(r,["instances[0]","video"],mZ(i));const o=x(e,["config"]);return o!=null&&v(r,["config"],pZ(o,r)),r}function xZ(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function vZ(t){const e={},r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function wZ(t){const e={},r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function yZ(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],xZ(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],vZ(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],wZ(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const c=x(t,["executableCode"]);c!=null&&v(e,["executableCode"],c);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const f=x(t,["functionResponse"]);f!=null&&v(e,["functionResponse"],f);const m=x(t,["text"]);return m!=null&&v(e,["text"],m),e}function bZ(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>yZ(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function CZ(t){const e={},r=x(t,["citationSources"]);return r!=null&&v(e,["citations"],r),e}function EZ(t){const e={},r=x(t,["retrievedUrl"]);r!=null&&v(e,["retrievedUrl"],r);const n=x(t,["urlRetrievalStatus"]);return n!=null&&v(e,["urlRetrievalStatus"],n),e}function _Z(t){const e={},r=x(t,["urlMetadata"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>EZ(a))),v(e,["urlMetadata"],n)}return e}function SZ(t){const e={},r=x(t,["content"]);r!=null&&v(e,["content"],bZ(r));const n=x(t,["citationMetadata"]);n!=null&&v(e,["citationMetadata"],CZ(n));const a=x(t,["tokenCount"]);a!=null&&v(e,["tokenCount"],a);const s=x(t,["finishReason"]);s!=null&&v(e,["finishReason"],s);const i=x(t,["urlContextMetadata"]);i!=null&&v(e,["urlContextMetadata"],_Z(i));const o=x(t,["avgLogprobs"]);o!=null&&v(e,["avgLogprobs"],o);const c=x(t,["groundingMetadata"]);c!=null&&v(e,["groundingMetadata"],c);const u=x(t,["index"]);u!=null&&v(e,["index"],u);const f=x(t,["logprobsResult"]);f!=null&&v(e,["logprobsResult"],f);const m=x(t,["safetyRatings"]);return m!=null&&v(e,["safetyRatings"],m),e}function $k(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["candidates"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(c=>SZ(c))),v(e,["candidates"],o)}const a=x(t,["modelVersion"]);a!=null&&v(e,["modelVersion"],a);const s=x(t,["promptFeedback"]);s!=null&&v(e,["promptFeedback"],s);const i=x(t,["usageMetadata"]);return i!=null&&v(e,["usageMetadata"],i),e}function TZ(t){const e={},r=x(t,["values"]);return r!=null&&v(e,["values"],r),e}function BZ(){return{}}function NZ(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["embeddings"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>TZ(i))),v(e,["embeddings"],s)}return x(t,["metadata"])!=null&&v(e,["metadata"],BZ()),e}function kZ(t){const e={},r=x(t,["bytesBase64Encoded"]);r!=null&&v(e,["imageBytes"],dh(r));const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function pL(t){const e={},r=x(t,["safetyAttributes","categories"]);r!=null&&v(e,["categories"],r);const n=x(t,["safetyAttributes","scores"]);n!=null&&v(e,["scores"],n);const a=x(t,["contentType"]);return a!=null&&v(e,["contentType"],a),e}function IZ(t){const e={},r=x(t,["_self"]);r!=null&&v(e,["image"],kZ(r));const n=x(t,["raiFilteredReason"]);n!=null&&v(e,["raiFilteredReason"],n);const a=x(t,["_self"]);return a!=null&&v(e,["safetyAttributes"],pL(a)),e}function FZ(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>IZ(i))),v(e,["generatedImages"],s)}const a=x(t,["positivePromptSafetyAttributes"]);return a!=null&&v(e,["positivePromptSafetyAttributes"],pL(a)),e}function DZ(t){const e={},r=x(t,["baseModel"]);r!=null&&v(e,["baseModel"],r);const n=x(t,["createTime"]);n!=null&&v(e,["createTime"],n);const a=x(t,["updateTime"]);return a!=null&&v(e,["updateTime"],a),e}function rE(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const a=x(t,["description"]);a!=null&&v(e,["description"],a);const s=x(t,["version"]);s!=null&&v(e,["version"],s);const i=x(t,["_self"]);i!=null&&v(e,["tunedModelInfo"],DZ(i));const o=x(t,["inputTokenLimit"]);o!=null&&v(e,["inputTokenLimit"],o);const c=x(t,["outputTokenLimit"]);c!=null&&v(e,["outputTokenLimit"],c);const u=x(t,["supportedGenerationMethods"]);return u!=null&&v(e,["supportedActions"],u),e}function RZ(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["_self"]);if(a!=null){let s=tL(a);Array.isArray(s)&&(s=s.map(i=>rE(i))),v(e,["models"],s)}return e}function LZ(){return{}}function UZ(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["totalTokens"]);n!=null&&v(e,["totalTokens"],n);const a=x(t,["cachedContentTokenCount"]);return a!=null&&v(e,["cachedContentTokenCount"],a),e}function MZ(t){const e={},r=x(t,["video","uri"]);r!=null&&v(e,["uri"],r);const n=x(t,["video","encodedVideo"]);n!=null&&v(e,["videoBytes"],dh(n));const a=x(t,["encoding"]);return a!=null&&v(e,["mimeType"],a),e}function PZ(t){const e={},r=x(t,["_self"]);return r!=null&&v(e,["video"],MZ(r)),e}function jZ(t){const e={},r=x(t,["generatedSamples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>PZ(i))),v(e,["generatedVideos"],s)}const n=x(t,["raiMediaFilteredCount"]);n!=null&&v(e,["raiMediaFilteredCount"],n);const a=x(t,["raiMediaFilteredReasons"]);return a!=null&&v(e,["raiMediaFilteredReasons"],a),e}function OZ(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["metadata"]);n!=null&&v(e,["metadata"],n);const a=x(t,["done"]);a!=null&&v(e,["done"],a);const s=x(t,["error"]);s!=null&&v(e,["error"],s);const i=x(t,["response","generateVideoResponse"]);return i!=null&&v(e,["response"],jZ(i)),e}function QZ(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function HZ(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["data"]);n!=null&&v(e,["data"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function VZ(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function GZ(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],QZ(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],HZ(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],VZ(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const c=x(t,["executableCode"]);c!=null&&v(e,["executableCode"],c);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const f=x(t,["functionResponse"]);f!=null&&v(e,["functionResponse"],f);const m=x(t,["text"]);return m!=null&&v(e,["text"],m),e}function zZ(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>GZ(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function qZ(t){const e={},r=x(t,["citations"]);return r!=null&&v(e,["citations"],r),e}function KZ(t){const e={},r=x(t,["retrievedUrl"]);r!=null&&v(e,["retrievedUrl"],r);const n=x(t,["urlRetrievalStatus"]);return n!=null&&v(e,["urlRetrievalStatus"],n),e}function WZ(t){const e={},r=x(t,["urlMetadata"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>KZ(a))),v(e,["urlMetadata"],n)}return e}function $Z(t){const e={},r=x(t,["content"]);r!=null&&v(e,["content"],zZ(r));const n=x(t,["citationMetadata"]);n!=null&&v(e,["citationMetadata"],qZ(n));const a=x(t,["finishMessage"]);a!=null&&v(e,["finishMessage"],a);const s=x(t,["finishReason"]);s!=null&&v(e,["finishReason"],s);const i=x(t,["urlContextMetadata"]);i!=null&&v(e,["urlContextMetadata"],WZ(i));const o=x(t,["avgLogprobs"]);o!=null&&v(e,["avgLogprobs"],o);const c=x(t,["groundingMetadata"]);c!=null&&v(e,["groundingMetadata"],c);const u=x(t,["index"]);u!=null&&v(e,["index"],u);const f=x(t,["logprobsResult"]);f!=null&&v(e,["logprobsResult"],f);const m=x(t,["safetyRatings"]);return m!=null&&v(e,["safetyRatings"],m),e}function Jk(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["candidates"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>$Z(f))),v(e,["candidates"],u)}const a=x(t,["createTime"]);a!=null&&v(e,["createTime"],a);const s=x(t,["responseId"]);s!=null&&v(e,["responseId"],s);const i=x(t,["modelVersion"]);i!=null&&v(e,["modelVersion"],i);const o=x(t,["promptFeedback"]);o!=null&&v(e,["promptFeedback"],o);const c=x(t,["usageMetadata"]);return c!=null&&v(e,["usageMetadata"],c),e}function JZ(t){const e={},r=x(t,["truncated"]);r!=null&&v(e,["truncated"],r);const n=x(t,["token_count"]);return n!=null&&v(e,["tokenCount"],n),e}function YZ(t){const e={},r=x(t,["values"]);r!=null&&v(e,["values"],r);const n=x(t,["statistics"]);return n!=null&&v(e,["statistics"],JZ(n)),e}function XZ(t){const e={},r=x(t,["billableCharacterCount"]);return r!=null&&v(e,["billableCharacterCount"],r),e}function ZZ(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["predictions[]","embeddings"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>YZ(i))),v(e,["embeddings"],s)}const a=x(t,["metadata"]);return a!=null&&v(e,["metadata"],XZ(a)),e}function eee(t){const e={},r=x(t,["gcsUri"]);r!=null&&v(e,["gcsUri"],r);const n=x(t,["bytesBase64Encoded"]);n!=null&&v(e,["imageBytes"],dh(n));const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function gL(t){const e={},r=x(t,["safetyAttributes","categories"]);r!=null&&v(e,["categories"],r);const n=x(t,["safetyAttributes","scores"]);n!=null&&v(e,["scores"],n);const a=x(t,["contentType"]);return a!=null&&v(e,["contentType"],a),e}function d5(t){const e={},r=x(t,["_self"]);r!=null&&v(e,["image"],eee(r));const n=x(t,["raiFilteredReason"]);n!=null&&v(e,["raiFilteredReason"],n);const a=x(t,["_self"]);a!=null&&v(e,["safetyAttributes"],gL(a));const s=x(t,["prompt"]);return s!=null&&v(e,["enhancedPrompt"],s),e}function tee(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>d5(i))),v(e,["generatedImages"],s)}const a=x(t,["positivePromptSafetyAttributes"]);return a!=null&&v(e,["positivePromptSafetyAttributes"],gL(a)),e}function ree(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["predictions"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>d5(s))),v(e,["generatedImages"],a)}return e}function nee(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["predictions"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>d5(s))),v(e,["generatedImages"],a)}return e}function aee(t){const e={},r=x(t,["endpoint"]);r!=null&&v(e,["name"],r);const n=x(t,["deployedModelId"]);return n!=null&&v(e,["deployedModelId"],n),e}function see(t){const e={},r=x(t,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&v(e,["baseModel"],r);const n=x(t,["createTime"]);n!=null&&v(e,["createTime"],n);const a=x(t,["updateTime"]);return a!=null&&v(e,["updateTime"],a),e}function iee(t){const e={},r=x(t,["checkpointId"]);r!=null&&v(e,["checkpointId"],r);const n=x(t,["epoch"]);n!=null&&v(e,["epoch"],n);const a=x(t,["step"]);return a!=null&&v(e,["step"],a),e}function nE(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const a=x(t,["description"]);a!=null&&v(e,["description"],a);const s=x(t,["versionId"]);s!=null&&v(e,["version"],s);const i=x(t,["deployedModels"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>aee(p))),v(e,["endpoints"],m)}const o=x(t,["labels"]);o!=null&&v(e,["labels"],o);const c=x(t,["_self"]);c!=null&&v(e,["tunedModelInfo"],see(c));const u=x(t,["defaultCheckpointId"]);u!=null&&v(e,["defaultCheckpointId"],u);const f=x(t,["checkpoints"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(p=>iee(p))),v(e,["checkpoints"],m)}return e}function oee(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["_self"]);if(a!=null){let s=tL(a);Array.isArray(s)&&(s=s.map(i=>nE(i))),v(e,["models"],s)}return e}function lee(){return{}}function cee(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["totalTokens"]);return n!=null&&v(e,["totalTokens"],n),e}function Aee(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["tokensInfo"]);return n!=null&&v(e,["tokensInfo"],n),e}function uee(t){const e={},r=x(t,["gcsUri"]);r!=null&&v(e,["uri"],r);const n=x(t,["bytesBase64Encoded"]);n!=null&&v(e,["videoBytes"],dh(n));const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function dee(t){const e={},r=x(t,["_self"]);return r!=null&&v(e,["video"],uee(r)),e}function fee(t){const e={},r=x(t,["videos"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>dee(i))),v(e,["generatedVideos"],s)}const n=x(t,["raiMediaFilteredCount"]);n!=null&&v(e,["raiMediaFilteredCount"],n);const a=x(t,["raiMediaFilteredReasons"]);return a!=null&&v(e,["raiMediaFilteredReasons"],a),e}function hee(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["metadata"]);n!=null&&v(e,["metadata"],n);const a=x(t,["done"]);a!=null&&v(e,["done"],a);const s=x(t,["error"]);s!=null&&v(e,["error"],s);const i=x(t,["response"]);return i!=null&&v(e,["response"],fee(i)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mee="Content-Type",pee="X-Server-Timeout",gee="User-Agent",aE="x-goog-api-client",xee="1.12.0",vee=`google-genai-sdk/${xee}`,wee="v1beta1",yee="v1beta",Yk=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class bee{constructor(e){var r,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:wee,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:yee,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&n.push(e.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),r=new URL(e);return r.protocol=r.protocol=="http:"?"ws":"wss",r.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,r,n){const a=[this.getRequestUrlInternal(r)];return n&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,r,n);if(e.queryParams)for(const[i,o]of Object.entries(e.queryParams))a.searchParams.append(i,String(o));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,r,e.abortSignal),this.unaryApiCall(a,s,e.httpMethod)}patchHttpOptions(e,r){const n=JSON.parse(JSON.stringify(e));for(const[a,s]of Object.entries(r))typeof s=="object"?n[a]=Object.assign(Object.assign({},n[a]),s):s!==void 0&&(n[a]=s);return n}async requestStream(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,r,n);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,r,e.abortSignal),this.streamApiCall(a,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,r,n){if(r&&r.timeout||n){const a=new AbortController,s=a.signal;if(r.timeout&&(r==null?void 0:r.timeout)>0){const i=setTimeout(()=>a.abort(),r.timeout);i&&typeof i.unref=="function"&&i.unref()}n&&n.addEventListener("abort",()=>{a.abort()}),e.signal=s}return r&&r.extraBody!==null&&Cee(e,r.extraBody),e.headers=await this.getHeadersInternal(r),e}async unaryApiCall(e,r,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:n})).then(async a=>(await Xk(a),new JC(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,r,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:n})).then(async a=>(await Xk(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){var r;return k0(this,arguments,function*(){const a=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),s=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let i="";for(;;){const{done:o,value:c}=yield ia(a.read());if(o){if(i.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=s.decode(c,{stream:!0});try{const m=JSON.parse(u);if("error"in m){const p=JSON.parse(JSON.stringify(m.error)),g=p.status,b=p.code,y=`got status: ${g}. ${JSON.stringify(m)}`;if(b>=400&&b<600)throw new ow({message:y,status:b})}}catch(m){if(m.name==="ApiError")throw m}i+=u;let f=i.match(Yk);for(;f;){const m=f[1];try{const p=new Response(m,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ia(new JC(p)),i=i.slice(f[0].length),f=i.match(Yk)}catch(p){throw new Error(`exception parsing stream chunk ${m}. ${p}`)}}}}finally{a.releaseLock()}})}async apiCall(e,r){return fetch(e,r).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){const e={},r=vee+" "+this.clientOptions.userAgentExtra;return e[gee]=r,e[aE]=r,e[mee]="application/json",e}async getHeadersInternal(e){const r=new Headers;if(e&&e.headers){for(const[n,a]of Object.entries(e.headers))r.append(n,a);e.timeout&&e.timeout>0&&r.append(pee,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r),r}async uploadFile(e,r){var n;const a={};r!=null&&(a.mimeType=r.mimeType,a.name=r.name,a.displayName=r.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const s=this.clientOptions.uploader,i=await s.stat(e);a.sizeBytes=String(i.size);const o=(n=r==null?void 0:r.mimeType)!==null&&n!==void 0?n:i.type;if(o===void 0||o==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=o;const c=await this.fetchUploadUrl(a,r);return s.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,r){var n;let a={};r!=null&&r.httpOptions?a=r.httpOptions:a={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const s={file:e},i=await this.request({path:nr("upload/v1beta/files",s._url),body:JSON.stringify(s),httpMethod:"POST",httpOptions:a});if(!i||!(i!=null&&i.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const o=(n=i==null?void 0:i.headers)===null||n===void 0?void 0:n["x-goog-upload-url"];if(o===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return o}}async function Xk(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const r=t.status;let n;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?n=await t.json():n={error:{message:await t.text(),code:t.status,status:t.statusText}};const a=JSON.stringify(n);throw r>=400&&r<600?new ow({message:a,status:r}):new Error(a)}}function Cee(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let r={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))r=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function n(s,i){const o=Object.assign({},s);for(const c in i)if(Object.prototype.hasOwnProperty.call(i,c)){const u=i[c],f=o[c];u&&typeof u=="object"&&!Array.isArray(u)&&f&&typeof f=="object"&&!Array.isArray(f)?o[c]=n(f,u):(f&&u&&typeof f!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof f}, New type: ${typeof u}. Overwriting.`),o[c]=u)}return o}const a=n(r,e);t.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Eee="mcp_used/unknown";let _ee=!1;function xL(t){for(const e of t)if(See(e)||typeof e=="object"&&"inputSchema"in e)return!0;return _ee}function vL(t){var e;const r=(e=t[aE])!==null&&e!==void 0?e:"";t[aE]=(r+` ${Eee}`).trimStart()}function See(t){return t!==null&&typeof t=="object"&&t instanceof f5}function Tee(t,e=100){return k0(this,arguments,function*(){let n,a=0;for(;a<e;){const s=yield ia(t.listTools({cursor:n}));for(const i of s.tools)yield yield ia(i),a++;if(!s.nextCursor)break;n=s.nextCursor}})}class f5{constructor(e=[],r){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=r}static create(e,r){return new f5(e,r)}async initialize(){var e,r,n,a;if(this.mcpTools.length>0)return;const s={},i=[];for(const f of this.mcpClients)try{for(var o=!0,c=(r=void 0,Qp(Tee(f))),u;u=await c.next(),e=u.done,!e;o=!0){a=u.value,o=!1;const m=a;i.push(m);const p=m.name;if(s[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);s[p]=f}}catch(m){r={error:m}}finally{try{!o&&!e&&(n=c.return)&&await n.call(c)}finally{if(r)throw r.error}}this.mcpTools=i,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),bK(this.mcpTools,this.config)}async callTool(e){await this.initialize();const r=[];for(const n of e)if(n.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[n.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const i=await a.callTool({name:n.name,arguments:n.args},void 0,s);r.push({functionResponse:{name:n.name,response:i.isError?{error:i}:i}})}return r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Bee(t,e,r){const n=new hK;let a;r.data instanceof Blob?a=JSON.parse(await r.data.text()):a=JSON.parse(r.data);const s=bY(a);Object.assign(n,s),e(n)}class Nee{constructor(e,r,n){this.apiClient=e,this.auth=r,this.webSocketFactory=n}async connect(e){var r,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),i=Fee(this.apiClient.getDefaultHeaders()),o=this.apiClient.getApiKey(),c=`${a}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${o}`;let u=()=>{};const f=new Promise(L=>{u=L}),m=e.callbacks,p=function(){u({})},g=this.apiClient,b={onopen:p,onmessage:L=>{Bee(g,m.onmessage,L)},onerror:(r=m==null?void 0:m.onerror)!==null&&r!==void 0?r:function(L){},onclose:(n=m==null?void 0:m.onclose)!==null&&n!==void 0?n:function(L){}},y=this.webSocketFactory.create(c,Iee(i),b);y.connect(),await f;const T=Hn(this.apiClient,e.model),k=dL({model:T}),D=tE({setup:k});return y.send(JSON.stringify(D)),new kee(y,this.apiClient)}}class kee{constructor(e,r){this.conn=e,this.apiClient=r}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const r=wJ(e),n=fL(r);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const r=yJ(e),n=tE(r);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const r=tE({playbackControl:e});this.conn.send(JSON.stringify(r))}play(){this.sendPlaybackControl(y0.PLAY)}pause(){this.sendPlaybackControl(y0.PAUSE)}stop(){this.sendPlaybackControl(y0.STOP)}resetContext(){this.sendPlaybackControl(y0.RESET_CONTEXT)}close(){this.conn.close()}}function Iee(t){const e={};return t.forEach((r,n)=>{e[n]=r}),e}function Fee(t){const e=new Headers;for(const[r,n]of Object.entries(t))e.append(r,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Dee="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Ree(t,e,r){const n=new fK;let a;r.data instanceof Blob?a=await r.data.text():r.data instanceof ArrayBuffer?a=new TextDecoder().decode(r.data):a=r.data;const s=JSON.parse(a);if(t.isVertexAI()){const i=UY(s);Object.assign(n,i)}else{const i=fY(s);Object.assign(n,i)}e(n)}class Lee{constructor(e,r,n){this.apiClient=e,this.auth=r,this.webSocketFactory=n,this.music=new Nee(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var r,n,a,s,i,o;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let f;const m=this.apiClient.getHeaders();e.config&&e.config.tools&&xL(e.config.tools)&&vL(m);const p=jee(m);if(this.apiClient.isVertexAI())f=`${c}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p);else{const B=this.apiClient.getApiKey();let Q="BidiGenerateContent",R="key";B!=null&&B.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),Q="BidiGenerateContentConstrained",R="access_token"),f=`${c}/ws/google.ai.generativelanguage.${u}.GenerativeService.${Q}?${R}=${B}`}let g=()=>{};const b=new Promise(B=>{g=B}),y=e.callbacks,T=function(){var B;(B=y==null?void 0:y.onopen)===null||B===void 0||B.call(y),g({})},k=this.apiClient,D={onopen:T,onmessage:B=>{Ree(k,y.onmessage,B)},onerror:(r=y==null?void 0:y.onerror)!==null&&r!==void 0?r:function(B){},onclose:(n=y==null?void 0:y.onclose)!==null&&n!==void 0?n:function(B){}},L=this.webSocketFactory.create(f,Pee(p),D);L.connect(),await b;let j=Hn(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&j.startsWith("publishers/")){const B=this.apiClient.getProject(),Q=this.apiClient.getLocation();j=`projects/${B}/locations/${Q}/`+j}let H={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Jv.AUDIO]}:e.config.responseModalities=[Jv.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const U=(o=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[],E=[];for(const B of U)if(this.isCallableTool(B)){const Q=B;E.push(await Q.tool())}else E.push(B);E.length>0&&(e.config.tools=E);const _={model:j,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?H=WJ(this.apiClient,_):H=pJ(this.apiClient,_),delete H.config,L.send(JSON.stringify(H)),new Mee(L,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Uee={turnComplete:!0};class Mee{constructor(e,r){this.conn=e,this.apiClient=r}tLiveClientContent(e,r){if(r.turns!==null&&r.turns!==void 0){let n=[];try{n=Ul(r.turns),e.isVertexAI()?n=n.map(a=>fm(a)):n=n.map(a=>lw(a))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof r.turns}'`)}return{clientContent:{turns:n,turnComplete:r.turnComplete}}}return{clientContent:{turnComplete:r.turnComplete}}}tLiveClienttToolResponse(e,r){let n=[];if(r.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(r.functionResponses)?n=r.functionResponses:n=[r.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const s of n){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(Dee)}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},Uee),e);const r=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(r))}sendRealtimeInput(e){let r={};this.apiClient.isVertexAI()?r={realtimeInput:YJ(e)}:r={realtimeInput:vJ(e)},this.conn.send(JSON.stringify(r))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const r=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(r))}close(){this.conn.close()}}function Pee(t){const e={};return t.forEach((r,n)=>{e[n]=r}),e}function jee(t){const e=new Headers;for(const[r,n]of Object.entries(t))e.append(r,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zk=10;function eI(t){var e,r,n;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const i of(r=t==null?void 0:t.tools)!==null&&r!==void 0?r:[])if(I0(i)){a=!0;break}if(!a)return!0;const s=(n=t==null?void 0:t.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function I0(t){return"callTool"in t&&typeof t.callTool=="function"}function Oee(t){var e,r,n;return(n=(r=(e=t.config)===null||e===void 0?void 0:e.tools)===null||r===void 0?void 0:r.some(a=>I0(a)))!==null&&n!==void 0?n:!1}function Qee(t){var e,r,n;return(n=(r=(e=t.config)===null||e===void 0?void 0:e.tools)===null||r===void 0?void 0:r.some(a=>!I0(a)))!==null&&n!==void 0?n:!1}function tI(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hee extends uh{constructor(e){super(),this.apiClient=e,this.generateContent=async r=>{var n,a,s,i,o;const c=await this.processParamsMaybeAddMcpUsage(r);if(this.maybeMoveToResponseJsonSchem(r),!Oee(r)||eI(r.config))return await this.generateContentInternal(c);if(Qee(r))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let u,f;const m=Ul(c.contents),p=(s=(a=(n=c.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&s!==void 0?s:Zk;let g=0;for(;g<p&&(u=await this.generateContentInternal(c),!(!u.functionCalls||u.functionCalls.length===0));){const b=u.candidates[0].content,y=[];for(const T of(o=(i=r.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[])if(I0(T)){const D=await T.callTool(u.functionCalls);y.push(...D)}g++,f={role:"user",parts:y},c.contents=Ul(c.contents),c.contents.push(b),c.contents.push(f),tI(c.config)&&(m.push(b),m.push(f))}return tI(c.config)&&(u.automaticFunctionCallingHistory=m),u},this.generateContentStream=async r=>{if(this.maybeMoveToResponseJsonSchem(r),eI(r.config)){const n=await this.processParamsMaybeAddMcpUsage(r);return await this.generateContentStreamInternal(n)}else return await this.processAfcStream(r)},this.generateImages=async r=>await this.generateImagesInternal(r).then(n=>{var a;let s;const i=[];if(n!=null&&n.generatedImages)for(const c of n.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((a=c==null?void 0:c.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?s=c==null?void 0:c.safetyAttributes:i.push(c);let o;return s?o={generatedImages:i,positivePromptSafetyAttributes:s,sdkHttpResponse:n.sdkHttpResponse}:o={generatedImages:i,sdkHttpResponse:n.sdkHttpResponse},o}),this.list=async r=>{var n;const i={config:Object.assign(Object.assign({},{queryBase:!0}),r==null?void 0:r.config)};if(this.apiClient.isVertexAI()&&!i.config.queryBase){if(!((n=i.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");i.config.filter="labels.tune-type:*"}return new ex(eh.PAGED_ITEM_MODELS,o=>this.listInternal(o),await this.listInternal(i),i)},this.editImage=async r=>{const n={model:r.model,prompt:r.prompt,referenceImages:[],config:r.config};return r.referenceImages&&r.referenceImages&&(n.referenceImages=r.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async r=>{let n={numberOfImages:1,mode:"upscale"};r.config&&(n=Object.assign(Object.assign({},n),r.config));const a={model:r.model,image:r.image,upscaleFactor:r.upscaleFactor,config:n};return await this.upscaleImageInternal(a)},this.generateVideos=async r=>await this.generateVideosInternal(r)}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var r,n,a;const s=(r=e.config)===null||r===void 0?void 0:r.tools;if(!s)return e;const i=await Promise.all(s.map(async c=>I0(c)?await c.tool():c)),o={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:i})};if(o.config.tools=i,e.config&&e.config.tools&&xL(e.config.tools)){const c=(a=(n=e.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&a!==void 0?a:{};let u=Object.assign({},c);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),vL(u),o.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return o}async initAfcToolsMap(e){var r,n,a;const s=new Map;for(const i of(n=(r=e.config)===null||r===void 0?void 0:r.tools)!==null&&n!==void 0?n:[])if(I0(i)){const o=i,c=await o.tool();for(const u of(a=c.functionDeclarations)!==null&&a!==void 0?a:[]){if(!u.name)throw new Error("Function declaration name is required.");if(s.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);s.set(u.name,o)}}return s}async processAfcStream(e){var r,n,a;const s=(a=(n=(r=e.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&a!==void 0?a:Zk;let i=!1,o=0;const c=await this.initAfcToolsMap(e);return function(u,f,m){var p,g;return k0(this,arguments,function*(){for(var b,y,T,k;o<s;){i&&(o++,i=!1);const H=yield ia(u.processParamsMaybeAddMcpUsage(m)),U=yield ia(u.generateContentStreamInternal(H)),E=[],_=[];try{for(var D=!0,L=(y=void 0,Qp(U)),j;j=yield ia(L.next()),b=j.done,!b;D=!0){k=j.value,D=!1;const B=k;if(yield yield ia(B),B.candidates&&(!((p=B.candidates[0])===null||p===void 0)&&p.content)){_.push(B.candidates[0].content);for(const Q of(g=B.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(o<s&&Q.functionCall){if(!Q.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(Q.functionCall.name)){const R=yield ia(f.get(Q.functionCall.name).callTool([Q.functionCall]));E.push(...R)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${Q.functionCall.name}`)}}}}catch(B){y={error:B}}finally{try{!D&&!b&&(T=L.return)&&(yield ia(T.call(L)))}finally{if(y)throw y.error}}if(E.length>0){i=!0;const B=new ip;B.candidates=[{content:{role:"user",parts:E}}],yield yield ia(B);const Q=[];Q.push(..._),Q.push({role:"user",parts:E});const R=Ul(m.contents).concat(Q);m.contents=R}else break}})}(this,c,e)}async generateContentInternal(e){var r,n,a,s;let i,o="",c={};if(this.apiClient.isVertexAI()){const u=Wk(this.apiClient,e);return o=nr("{model}:generateContent",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),i.then(f=>{const m=Jk(f),p=new ip;return Object.assign(p,m),p})}else{const u=Kk(this.apiClient,e);return o=nr("{model}:generateContent",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),i.then(f=>{const m=$k(f),p=new ip;return Object.assign(p,m),p})}}async generateContentStreamInternal(e){var r,n,a,s;let i,o="",c={};if(this.apiClient.isVertexAI()){const u=Wk(this.apiClient,e);return o=nr("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.requestStream({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}),i.then(function(m){return k0(this,arguments,function*(){var p,g,b,y;try{for(var T=!0,k=Qp(m),D;D=yield ia(k.next()),p=D.done,!p;T=!0){y=D.value,T=!1;const L=y,j=Jk(yield ia(L.json()));j.sdkHttpResponse={headers:L.headers};const H=new ip;Object.assign(H,j),yield yield ia(H)}}catch(L){g={error:L}}finally{try{!T&&!p&&(b=k.return)&&(yield ia(b.call(k)))}finally{if(g)throw g.error}}})})}else{const u=Kk(this.apiClient,e);return o=nr("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.requestStream({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),i.then(function(m){return k0(this,arguments,function*(){var p,g,b,y;try{for(var T=!0,k=Qp(m),D;D=yield ia(k.next()),p=D.done,!p;T=!0){y=D.value,T=!1;const L=y,j=$k(yield ia(L.json()));j.sdkHttpResponse={headers:L.headers};const H=new ip;Object.assign(H,j),yield yield ia(H)}}catch(L){g={error:L}}finally{try{!T&&!p&&(b=k.return)&&(yield ia(b.call(k)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var r,n,a,s;let i,o="",c={};if(this.apiClient.isVertexAI()){const u=WX(this.apiClient,e);return o=nr("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),i.then(f=>{const m=ZZ(f),p=new Sk;return Object.assign(p,m),p})}else{const u=oX(this.apiClient,e);return o=nr("{model}:batchEmbedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),i.then(f=>{const m=NZ(f),p=new Sk;return Object.assign(p,m),p})}}async generateImagesInternal(e){var r,n,a,s;let i,o="",c={};if(this.apiClient.isVertexAI()){const u=JX(this.apiClient,e);return o=nr("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),i.then(f=>{const m=tee(f),p=new Tk;return Object.assign(p,m),p})}else{const u=cX(this.apiClient,e);return o=nr("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),i.then(f=>{const m=FZ(f),p=new Tk;return Object.assign(p,m),p})}}async editImageInternal(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI()){const o=nZ(this.apiClient,e);return s=nr("{model}:predict",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:c.headers},f})),a.then(c=>{const u=ree(c),f=new oK;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI()){const o=sZ(this.apiClient,e);return s=nr("{model}:predict",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:c.headers},f})),a.then(c=>{const u=nee(c),f=new lK;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var r,n,a,s;let i,o="",c={};if(this.apiClient.isVertexAI()){const u=iZ(this.apiClient,e);return o=nr("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),i.then(f=>nE(f))}else{const u=AX(this.apiClient,e);return o=nr("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),i.then(f=>rE(f))}}async listInternal(e){var r,n,a,s;let i,o="",c={};if(this.apiClient.isVertexAI()){const u=lZ(this.apiClient,e);return o=nr("{models_url}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),i.then(f=>{const m=oee(f),p=new Bk;return Object.assign(p,m),p})}else{const u=dX(this.apiClient,e);return o=nr("{models_url}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),i.then(f=>{const m=RZ(f),p=new Bk;return Object.assign(p,m),p})}}async update(e){var r,n,a,s;let i,o="",c={};if(this.apiClient.isVertexAI()){const u=AZ(this.apiClient,e);return o=nr("{model}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),i.then(f=>nE(f))}else{const u=hX(this.apiClient,e);return o=nr("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),i.then(f=>rE(f))}}async delete(e){var r,n,a,s;let i,o="",c={};if(this.apiClient.isVertexAI()){const u=uZ(this.apiClient,e);return o=nr("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),i.then(()=>{const f=lee(),m=new Nk;return Object.assign(m,f),m})}else{const u=mX(this.apiClient,e);return o=nr("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),i.then(()=>{const f=LZ(),m=new Nk;return Object.assign(m,f),m})}}async countTokens(e){var r,n,a,s;let i,o="",c={};if(this.apiClient.isVertexAI()){const u=fZ(this.apiClient,e);return o=nr("{model}:countTokens",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),i.then(f=>{const m=cee(f),p=new kk;return Object.assign(p,m),p})}else{const u=gX(this.apiClient,e);return o=nr("{model}:countTokens",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),i.then(f=>{const m=UZ(f),p=new kk;return Object.assign(p,m),p})}}async computeTokens(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI()){const o=hZ(this.apiClient,e);return s=nr("{model}:computeTokens",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:c.headers},f})),a.then(c=>{const u=Aee(c),f=new cK;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var r,n,a,s;let i,o="",c={};if(this.apiClient.isVertexAI()){const u=gZ(this.apiClient,e);return o=nr("{model}:predictLongRunning",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),i.then(f=>{const m=hee(f),p=new Yv;return Object.assign(p,m),p})}else{const u=wX(this.apiClient,e);return o=nr("{model}:predictLongRunning",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),i.then(f=>{const m=OZ(f),p=new Yv;return Object.assign(p,m),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vee(t){const e={},r=x(t,["operationName"]);r!=null&&v(e,["_url","operationName"],r);const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function Gee(t){const e={},r=x(t,["operationName"]);r!=null&&v(e,["_url","operationName"],r);const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function zee(t){const e={},r=x(t,["operationName"]);r!=null&&v(e,["operationName"],r);const n=x(t,["resourceName"]);n!=null&&v(e,["_url","resourceName"],n);const a=x(t,["config"]);return a!=null&&v(e,["config"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qee extends uh{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const r=e.operation,n=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=r.name.split("/operations/")[0];let s;n&&"httpOptions"in n&&(s=n.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:a,config:{httpOptions:s}});return r._fromAPIResponse({apiResponse:i,isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:r.name,config:n});return r._fromAPIResponse({apiResponse:a,isVertexAI:!1})}}async get(e){const r=e.operation,n=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=r.name.split("/operations/")[0];let s;n&&"httpOptions"in n&&(s=n.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:a,config:{httpOptions:s}});return r._fromAPIResponse({apiResponse:i,isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:r.name,config:n});return r._fromAPIResponse({apiResponse:a,isVertexAI:!1})}}async getVideosOperationInternal(e){var r,n,a,s;let i,o="",c={};if(this.apiClient.isVertexAI()){const u=Gee(e);return o=nr("{operationName}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),i}else{const u=Vee(e);return o=nr("{operationName}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),i}}async fetchPredictVideosOperationInternal(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI()){const o=zee(e);return s=nr("{resourceName}:fetchPredictOperation",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Kee(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function wL(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],Kee(r)),e}function Wee(t){const e={},r=x(t,["speaker"]);r!=null&&v(e,["speaker"],r);const n=x(t,["voiceConfig"]);return n!=null&&v(e,["voiceConfig"],wL(n)),e}function $ee(t){const e={},r=x(t,["speakerVoiceConfigs"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>Wee(a))),v(e,["speakerVoiceConfigs"],n)}return e}function Jee(t){const e={},r=x(t,["voiceConfig"]);r!=null&&v(e,["voiceConfig"],wL(r));const n=x(t,["multiSpeakerVoiceConfig"]);n!=null&&v(e,["multiSpeakerVoiceConfig"],$ee(n));const a=x(t,["languageCode"]);return a!=null&&v(e,["languageCode"],a),e}function Yee(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function Xee(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function Zee(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function ete(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],Yee(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],Xee(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],Zee(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const c=x(t,["executableCode"]);c!=null&&v(e,["executableCode"],c);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const f=x(t,["functionResponse"]);f!=null&&v(e,["functionResponse"],f);const m=x(t,["text"]);return m!=null&&v(e,["text"],m),e}function tte(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>ete(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function rte(t){const e={},r=x(t,["behavior"]);r!=null&&v(e,["behavior"],r);const n=x(t,["description"]);n!=null&&v(e,["description"],n);const a=x(t,["name"]);a!=null&&v(e,["name"],a);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const c=x(t,["responseJsonSchema"]);return c!=null&&v(e,["responseJsonSchema"],c),e}function nte(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function ate(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],nte(r)),e}function ste(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function ite(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],ste(r)),e}function ote(){return{}}function lte(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>rte(u))),v(e,["functionDeclarations"],c)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["googleSearch"]);n!=null&&v(e,["googleSearch"],ate(n));const a=x(t,["googleSearchRetrieval"]);if(a!=null&&v(e,["googleSearchRetrieval"],ite(a)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],ote());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function cte(t){const e={},r=x(t,["handle"]);if(r!=null&&v(e,["handle"],r),x(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function rI(){return{}}function Ate(t){const e={},r=x(t,["disabled"]);r!=null&&v(e,["disabled"],r);const n=x(t,["startOfSpeechSensitivity"]);n!=null&&v(e,["startOfSpeechSensitivity"],n);const a=x(t,["endOfSpeechSensitivity"]);a!=null&&v(e,["endOfSpeechSensitivity"],a);const s=x(t,["prefixPaddingMs"]);s!=null&&v(e,["prefixPaddingMs"],s);const i=x(t,["silenceDurationMs"]);return i!=null&&v(e,["silenceDurationMs"],i),e}function ute(t){const e={},r=x(t,["automaticActivityDetection"]);r!=null&&v(e,["automaticActivityDetection"],Ate(r));const n=x(t,["activityHandling"]);n!=null&&v(e,["activityHandling"],n);const a=x(t,["turnCoverage"]);return a!=null&&v(e,["turnCoverage"],a),e}function dte(t){const e={},r=x(t,["targetTokens"]);return r!=null&&v(e,["targetTokens"],r),e}function fte(t){const e={},r=x(t,["triggerTokens"]);r!=null&&v(e,["triggerTokens"],r);const n=x(t,["slidingWindow"]);return n!=null&&v(e,["slidingWindow"],dte(n)),e}function hte(t){const e={},r=x(t,["proactiveAudio"]);return r!=null&&v(e,["proactiveAudio"],r),e}function mte(t,e){const r={},n=x(t,["generationConfig"]);e!==void 0&&n!=null&&v(e,["setup","generationConfig"],n);const a=x(t,["responseModalities"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","responseModalities"],a);const s=x(t,["temperature"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","temperature"],s);const i=x(t,["topP"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig","topP"],i);const o=x(t,["topK"]);e!==void 0&&o!=null&&v(e,["setup","generationConfig","topK"],o);const c=x(t,["maxOutputTokens"]);e!==void 0&&c!=null&&v(e,["setup","generationConfig","maxOutputTokens"],c);const u=x(t,["mediaResolution"]);e!==void 0&&u!=null&&v(e,["setup","generationConfig","mediaResolution"],u);const f=x(t,["seed"]);e!==void 0&&f!=null&&v(e,["setup","generationConfig","seed"],f);const m=x(t,["speechConfig"]);e!==void 0&&m!=null&&v(e,["setup","generationConfig","speechConfig"],Jee(u5(m)));const p=x(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],p);const g=x(t,["systemInstruction"]);e!==void 0&&g!=null&&v(e,["setup","systemInstruction"],tte(Ui(g)));const b=x(t,["tools"]);if(e!==void 0&&b!=null){let H=um(b);Array.isArray(H)&&(H=H.map(U=>lte(Am(U)))),v(e,["setup","tools"],H)}const y=x(t,["sessionResumption"]);e!==void 0&&y!=null&&v(e,["setup","sessionResumption"],cte(y));const T=x(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&v(e,["setup","inputAudioTranscription"],rI());const k=x(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&v(e,["setup","outputAudioTranscription"],rI());const D=x(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&v(e,["setup","realtimeInputConfig"],ute(D));const L=x(t,["contextWindowCompression"]);e!==void 0&&L!=null&&v(e,["setup","contextWindowCompression"],fte(L));const j=x(t,["proactivity"]);return e!==void 0&&j!=null&&v(e,["setup","proactivity"],hte(j)),r}function pte(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["setup","model"],Hn(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],mte(a,r)),r}function gte(t,e,r){const n={},a=x(e,["expireTime"]);r!==void 0&&a!=null&&v(r,["expireTime"],a);const s=x(e,["newSessionExpireTime"]);r!==void 0&&s!=null&&v(r,["newSessionExpireTime"],s);const i=x(e,["uses"]);r!==void 0&&i!=null&&v(r,["uses"],i);const o=x(e,["liveConnectConstraints"]);r!==void 0&&o!=null&&v(r,["bidiGenerateContentSetup"],pte(t,o));const c=x(e,["lockAdditionalFields"]);return r!==void 0&&c!=null&&v(r,["fieldMask"],c),n}function xte(t,e){const r={},n=x(e,["config"]);return n!=null&&v(r,["config"],gte(t,n,r)),r}function vte(t){const e={},r=x(t,["name"]);return r!=null&&v(e,["name"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wte(t){const e=[];for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const n=t[r];if(typeof n=="object"&&n!=null&&Object.keys(n).length>0){const a=Object.keys(n).map(s=>`${r}.${s}`);e.push(...a)}else e.push(r)}return e.join(",")}function yte(t,e){let r=null;const n=t.bidiGenerateContentSetup;if(typeof n=="object"&&n!==null&&"setup"in n){const s=n.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,r=s):delete t.bidiGenerateContentSetup}else n!==void 0&&delete t.bidiGenerateContentSetup;const a=t.fieldMask;if(r){const s=wte(r);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?t.fieldMask=s:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const i=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let o=[];a.length>0&&(o=a.map(u=>i.includes(u)?`generationConfig.${u}`:u));const c=[];s&&c.push(s),o.length>0&&c.push(...o),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?t.fieldMask=a.join(","):delete t.fieldMask;return t}class bte extends uh{constructor(e){super(),this.apiClient=e}async create(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const o=xte(this.apiClient,e);s=nr("auth_tokens",o._url),i=o._query,delete o.config,delete o._url,delete o._query;const c=yte(o,e.config);return a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),a.then(u=>vte(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cte(t){const e={},r=x(t,["name"]);r!=null&&v(e,["_url","name"],r);const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function Ete(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const a=x(t,["pageToken"]);e!==void 0&&a!=null&&v(e,["_query","pageToken"],a);const s=x(t,["filter"]);return e!==void 0&&s!=null&&v(e,["_query","filter"],s),r}function _te(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],Ete(r,e)),e}function Ste(t){const e={},r=x(t,["textInput"]);r!=null&&v(e,["textInput"],r);const n=x(t,["output"]);return n!=null&&v(e,["output"],n),e}function Tte(t){const e={};if(x(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(x(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=x(t,["examples"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>Ste(a))),v(e,["examples","examples"],n)}return e}function Bte(t,e){const r={};if(x(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const n=x(t,["tunedModelDisplayName"]);if(e!==void 0&&n!=null&&v(e,["displayName"],n),x(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=x(t,["epochCount"]);e!==void 0&&a!=null&&v(e,["tuningTask","hyperparameters","epochCount"],a);const s=x(t,["learningRateMultiplier"]);if(s!=null&&v(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),x(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(x(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const i=x(t,["batchSize"]);e!==void 0&&i!=null&&v(e,["tuningTask","hyperparameters","batchSize"],i);const o=x(t,["learningRate"]);return e!==void 0&&o!=null&&v(e,["tuningTask","hyperparameters","learningRate"],o),r}function Nte(t){const e={},r=x(t,["baseModel"]);r!=null&&v(e,["baseModel"],r);const n=x(t,["trainingDataset"]);n!=null&&v(e,["tuningTask","trainingData"],Tte(n));const a=x(t,["config"]);return a!=null&&v(e,["config"],Bte(a,e)),e}function kte(t){const e={},r=x(t,["name"]);r!=null&&v(e,["_url","name"],r);const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function Ite(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const a=x(t,["pageToken"]);e!==void 0&&a!=null&&v(e,["_query","pageToken"],a);const s=x(t,["filter"]);return e!==void 0&&s!=null&&v(e,["_query","filter"],s),r}function Fte(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],Ite(r,e)),e}function Dte(t,e){const r={},n=x(t,["gcsUri"]);e!==void 0&&n!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],n);const a=x(t,["vertexDatasetResource"]);if(e!==void 0&&a!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],a),x(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function Rte(t,e){const r={},n=x(t,["gcsUri"]);n!=null&&v(r,["validationDatasetUri"],n);const a=x(t,["vertexDatasetResource"]);return e!==void 0&&a!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],a),r}function Lte(t,e){const r={},n=x(t,["validationDataset"]);e!==void 0&&n!=null&&v(e,["supervisedTuningSpec"],Rte(n,r));const a=x(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&v(e,["tunedModelDisplayName"],a);const s=x(t,["description"]);e!==void 0&&s!=null&&v(e,["description"],s);const i=x(t,["epochCount"]);e!==void 0&&i!=null&&v(e,["supervisedTuningSpec","hyperParameters","epochCount"],i);const o=x(t,["learningRateMultiplier"]);e!==void 0&&o!=null&&v(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],o);const c=x(t,["exportLastCheckpointOnly"]);e!==void 0&&c!=null&&v(e,["supervisedTuningSpec","exportLastCheckpointOnly"],c);const u=x(t,["adapterSize"]);if(e!==void 0&&u!=null&&v(e,["supervisedTuningSpec","hyperParameters","adapterSize"],u),x(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(x(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return r}function Ute(t){const e={},r=x(t,["baseModel"]);r!=null&&v(e,["baseModel"],r);const n=x(t,["trainingDataset"]);n!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],Dte(n,e));const a=x(t,["config"]);return a!=null&&v(e,["config"],Lte(a,e)),e}function Mte(t){const e={},r=x(t,["name"]);r!=null&&v(e,["model"],r);const n=x(t,["name"]);return n!=null&&v(e,["endpoint"],n),e}function yL(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const a=x(t,["state"]);a!=null&&v(e,["state"],XR(a));const s=x(t,["createTime"]);s!=null&&v(e,["createTime"],s);const i=x(t,["tuningTask","startTime"]);i!=null&&v(e,["startTime"],i);const o=x(t,["tuningTask","completeTime"]);o!=null&&v(e,["endTime"],o);const c=x(t,["updateTime"]);c!=null&&v(e,["updateTime"],c);const u=x(t,["description"]);u!=null&&v(e,["description"],u);const f=x(t,["baseModel"]);f!=null&&v(e,["baseModel"],f);const m=x(t,["_self"]);m!=null&&v(e,["tunedModel"],Mte(m));const p=x(t,["distillationSpec"]);p!=null&&v(e,["distillationSpec"],p);const g=x(t,["experiment"]);g!=null&&v(e,["experiment"],g);const b=x(t,["labels"]);b!=null&&v(e,["labels"],b);const y=x(t,["pipelineJob"]);y!=null&&v(e,["pipelineJob"],y);const T=x(t,["satisfiesPzi"]);T!=null&&v(e,["satisfiesPzi"],T);const k=x(t,["satisfiesPzs"]);k!=null&&v(e,["satisfiesPzs"],k);const D=x(t,["serviceAccount"]);D!=null&&v(e,["serviceAccount"],D);const L=x(t,["tunedModelDisplayName"]);return L!=null&&v(e,["tunedModelDisplayName"],L),e}function Pte(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["tunedModels"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>yL(i))),v(e,["tuningJobs"],s)}return e}function jte(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const a=x(t,["metadata"]);a!=null&&v(e,["metadata"],a);const s=x(t,["done"]);s!=null&&v(e,["done"],s);const i=x(t,["error"]);return i!=null&&v(e,["error"],i),e}function Ote(t){const e={},r=x(t,["checkpointId"]);r!=null&&v(e,["checkpointId"],r);const n=x(t,["epoch"]);n!=null&&v(e,["epoch"],n);const a=x(t,["step"]);a!=null&&v(e,["step"],a);const s=x(t,["endpoint"]);return s!=null&&v(e,["endpoint"],s),e}function Qte(t){const e={},r=x(t,["model"]);r!=null&&v(e,["model"],r);const n=x(t,["endpoint"]);n!=null&&v(e,["endpoint"],n);const a=x(t,["checkpoints"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>Ote(i))),v(e,["checkpoints"],s)}return e}function sE(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const a=x(t,["state"]);a!=null&&v(e,["state"],XR(a));const s=x(t,["createTime"]);s!=null&&v(e,["createTime"],s);const i=x(t,["startTime"]);i!=null&&v(e,["startTime"],i);const o=x(t,["endTime"]);o!=null&&v(e,["endTime"],o);const c=x(t,["updateTime"]);c!=null&&v(e,["updateTime"],c);const u=x(t,["error"]);u!=null&&v(e,["error"],u);const f=x(t,["description"]);f!=null&&v(e,["description"],f);const m=x(t,["baseModel"]);m!=null&&v(e,["baseModel"],m);const p=x(t,["tunedModel"]);p!=null&&v(e,["tunedModel"],Qte(p));const g=x(t,["supervisedTuningSpec"]);g!=null&&v(e,["supervisedTuningSpec"],g);const b=x(t,["tuningDataStats"]);b!=null&&v(e,["tuningDataStats"],b);const y=x(t,["encryptionSpec"]);y!=null&&v(e,["encryptionSpec"],y);const T=x(t,["partnerModelTuningSpec"]);T!=null&&v(e,["partnerModelTuningSpec"],T);const k=x(t,["distillationSpec"]);k!=null&&v(e,["distillationSpec"],k);const D=x(t,["experiment"]);D!=null&&v(e,["experiment"],D);const L=x(t,["labels"]);L!=null&&v(e,["labels"],L);const j=x(t,["pipelineJob"]);j!=null&&v(e,["pipelineJob"],j);const H=x(t,["satisfiesPzi"]);H!=null&&v(e,["satisfiesPzi"],H);const U=x(t,["satisfiesPzs"]);U!=null&&v(e,["satisfiesPzs"],U);const E=x(t,["serviceAccount"]);E!=null&&v(e,["serviceAccount"],E);const _=x(t,["tunedModelDisplayName"]);return _!=null&&v(e,["tunedModelDisplayName"],_),e}function Hte(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["tuningJobs"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>sE(i))),v(e,["tuningJobs"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vte extends uh{constructor(e){super(),this.apiClient=e,this.get=async r=>await this.getInternal(r),this.list=async(r={})=>new ex(eh.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(r),r),this.tune=async r=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(r);{const n=await this.tuneMldevInternal(r);let a="";return n.metadata!==void 0&&n.metadata.tunedModel!==void 0?a=n.metadata.tunedModel:n.name!==void 0&&n.name.includes("/operations/")&&(a=n.name.split("/operations/")[0]),{name:a,state:$C.JOB_STATE_QUEUED}}}}async getInternal(e){var r,n,a,s;let i,o="",c={};if(this.apiClient.isVertexAI()){const u=kte(e);return o=nr("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),i.then(f=>sE(f))}else{const u=Cte(e);return o=nr("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),i.then(f=>yL(f))}}async listInternal(e){var r,n,a,s;let i,o="",c={};if(this.apiClient.isVertexAI()){const u=Fte(e);return o=nr("tuningJobs",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),i.then(f=>{const m=Hte(f),p=new Fk;return Object.assign(p,m),p})}else{const u=_te(e);return o=nr("tunedModels",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),i.then(f=>{const m=Pte(f),p=new Fk;return Object.assign(p,m),p})}}async tuneInternal(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI()){const o=Ute(e);return s=nr("tuningJobs",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:c.headers},f})),a.then(c=>sE(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Nte(e);return s=nr("tunedModels",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:c.headers},f})),a.then(c=>jte(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gte{async download(e,r){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const zte=1024*1024*8,qte=3,Kte=1e3,Wte=2,wb="x-goog-upload-status";async function $te(t,e,r){var n,a,s;let i=0,o=0,c=new JC(new Response),u="upload";for(i=t.size;o<i;){const m=Math.min(zte,i-o),p=t.slice(o,o+m);o+m>=i&&(u+=", finalize");let g=0,b=Kte;for(;g<qte&&(c=await r.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(o),"Content-Length":String(m)}}}),!(!((n=c==null?void 0:c.headers)===null||n===void 0)&&n[wb]));)g++,await Yte(b),b=b*Wte;if(o+=m,((a=c==null?void 0:c.headers)===null||a===void 0?void 0:a[wb])!=="active")break;if(i<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await(c==null?void 0:c.json());if(((s=c==null?void 0:c.headers)===null||s===void 0?void 0:s[wb])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function Jte(t){return{size:t.size,type:t.type}}function Yte(t){return new Promise(e=>setTimeout(e,t))}class Xte{async upload(e,r,n){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await $te(e,r,n)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Jte(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zte{create(e,r,n){return new ere(e,r,n)}}class ere{constructor(e,r,n){this.url=e,this.headers=r,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nI="x-goog-api-key";class tre{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(nI)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(nI,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rre="gl-node/";class mg{constructor(e){var r;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(r=e.vertexai)!==null&&r!==void 0?r:!1,this.apiKey=e.apiKey;const n=iK(e.httpOptions,e.vertexai,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion;const a=new tre(this.apiKey);this.apiClient=new bee({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:rre+"web",uploader:new Xte,downloader:new Gte}),this.models=new Hee(this.apiClient),this.live=new Lee(this.apiClient,a,new Zte),this.batches=new NW(this.apiClient),this.chats=new D$(this.models,this.apiClient),this.caches=new k$(this.apiClient),this.files=new q$(this.apiClient),this.operations=new qee(this.apiClient),this.authTokens=new bte(this.apiClient),this.tunings=new Vte(this.apiClient)}}const nre="api_logs",are=t=>{const e=er(Nt(Tt,nre),fn("timestamp","desc"));return br(e,n=>{const a=n.docs.map(s=>{var o,c;const i=s.data();return{id:s.id,...i,timestamp:((c=(o=i.timestamp)==null?void 0:o.toDate)==null?void 0:c.call(o).toISOString())||i.timestamp}});t(a)},n=>{console.error("Error al suscribirse a los logs de API:",n),t([])})},Pl=(t,e)=>{{console.warn("No se pudo registrar la llamada a la API: el objeto de usuario es inválido o no está en sesión.");return}},Aw="planificaciones",bL="actividades_calendario",CL="eventos_calendario",EL=t=>{var r,n,a;const e=t.data();return{id:t.id,...e,fechaCreacion:((a=(n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r))==null?void 0:a.toISOString())||e.fechaCreacion}},sre=async(t,e)=>{try{const r={...t,userId:e,fechaCreacion:Ar.fromDate(new Date),fechaActualizacion:Ar.fromDate(new Date)};return(await Sa(Nt(Tt,Aw),r)).id}catch(r){throw console.error("Error al guardar planificación:",r),new Error("No se pudo guardar la planificación")}},ire=async(t,e,r)=>{try{const n=_r(Tt,Aw,t),a=await Wg(n);if(!a.exists()||a.data().userId!==r)throw new Error("No tienes permisos para actualizar esta planificación");await $g(n,{...e,fechaActualizacion:Ar.fromDate(new Date)})}catch(n){throw console.error("Error al actualizar planificación:",n),new Error("No se pudo actualizar la planificación")}},ore=async(t,e)=>{try{const r=_r(Tt,Aw,t),n=await Wg(r);if(!n.exists()||n.data().userId!==e)throw new Error("No tienes permisos para eliminar esta planificación");await Oi(r)}catch(r){throw console.error("Error al eliminar planificación:",r),new Error("No se pudo eliminar la planificación")}},lre=(t,e)=>{const r=er(Nt(Tt,Aw),Tn("userId","==",t),fn("fechaCreacion","desc"));return br(r,n=>{const a=n.docs.map(EL);e(a)},n=>{console.error("Error en suscripción a planificaciones:",n)})},cre=async(t,e)=>{try{const r={...t,userId:e,fechaCreacion:Ar.fromDate(new Date),fechaActualizacion:Ar.fromDate(new Date)};return(await Sa(Nt(Tt,bL),r)).id}catch(r){throw console.error("Error al guardar actividad:",r),new Error("No se pudo guardar la actividad")}},Are=(t,e)=>{const r=er(Nt(Tt,bL),Tn("userId","==",t),fn("fecha","desc"));return br(r,n=>{const a=n.docs.map(EL);e(a)},n=>{console.error("Error en suscripción a actividades:",n)})},ure=async(t,e)=>{try{const r={...t,userId:e,fechaCreacion:Ar.fromDate(new Date)};return(await Sa(Nt(Tt,CL),r)).id}catch(r){throw console.error("Error al guardar evento:",r),new Error("No se pudo guardar el evento")}},dre=async(t,e,r,n)=>{try{const a=er(Nt(Tt,CL),Tn("userId","==",t),Tn("date","==",e),Tn("type","==",Hr.ACTIVIDAD_FOCALIZADA),cu(1));return(await ps(a)).docs.some(i=>{const o=i.data();return o.responsables===r&&o.ubicacion===n})}catch(a){return console.error("Error al verificar evento existente:",a),!1}},fre={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_APP_ID:"1:1022861144167:web:7c277dd701dad5986864c2",VITE_FIREBASE_AUTH_DOMAIN:"planificador-145df.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-LKJRFMVC9F",VITE_FIREBASE_MESSAGING_SENDER_ID:"1022861144167",VITE_FIREBASE_PROJECT_ID:"planificador-145df",VITE_FIREBASE_STORAGE_BUCKET:"planificador-145df.appspot.com",VITE_GEMINI_API_KEY:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",VITE_GOOGLE_AI_API_KEY:void 0},hre=t=>{const[e,r]=ne.useState([]),[n,a]=ne.useState(!0),[s,i]=ne.useState(null);ne.useEffect(()=>t?lre(t,m=>{r(m),a(!1)}):void 0,[t]);const o=ne.useCallback(async f=>{try{i(null),await sre(f,t)}catch(m){throw i(m instanceof Error?m.message:"Error al guardar"),m}},[t]),c=ne.useCallback(async(f,m)=>{try{i(null),await ire(f,m,t)}catch(p){throw i(p instanceof Error?p.message:"Error al actualizar"),p}},[t]),u=ne.useCallback(async f=>{try{i(null),await ore(f,t)}catch(m){throw i(m instanceof Error?m.message:"Error al eliminar"),m}},[t]);return{planificaciones:e,loading:n,error:s,save:o,update:c,remove:u}},mre=t=>{const[e,r]=ne.useState([]),[n,a]=ne.useState(!0),[s,i]=ne.useState(null);ne.useEffect(()=>t?Are(t,u=>{r(u),a(!1)}):void 0,[t]);const o=ne.useCallback(async c=>{try{return i(null),await cre(c,t)}catch(u){throw i(u instanceof Error?u.message:"Error al guardar actividad"),u}},[t]);return{actividades:e,loading:n,error:s,save:o}},pre=({lesson:t,onClose:e,onSave:r,isLoading:n=!1})=>{const[a,s]=ne.useState(t),i=c=>{s({...a,[c.target.name]:c.target.value})},o=async()=>{try{await r(a),e()}catch(c){console.error("Error al guardar lección:",c)}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Lección"}),l.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(a).map(([c,u])=>l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:c.replace(/([A-Z])/g," $1")}),l.jsx("textarea",{name:c,value:u,onChange:i,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:n})]},c))}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[l.jsx("button",{onClick:e,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Cancelar"}),l.jsxs("button",{onClick:o,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:n,children:[n&&l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})]})})},gre=({plan:t,onEditLesson:e,onUseLesson:r,isLoading:n=!1})=>l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",t.objetivosAprendizaje]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Indicadores de Evaluación:"})," ",t.indicadoresEvaluacion]})]}),l.jsx("div",{className:"space-y-4",children:t.detallesLeccion.map((a,s)=>l.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[l.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",s+1,": ",a.actividades]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Objetivo:"})," ",a.objetivosAprendizaje]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Contenidos:"})," ",a.contenidosConceptuales]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Habilidad (Bloom):"})," ",a.habilidadesBloom]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Perfil de Egreso:"})," ",a.perfilEgreso]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Interdisciplinariedad:"})," ",a.asignaturasInterdisciplinariedad]})]}),l.jsxs("div",{className:"flex gap-2 mt-4",children:[l.jsx("button",{onClick:()=>e(s,a),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Editar"}),l.jsx("button",{onClick:()=>r(a,t),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200 disabled:opacity-50",disabled:n,children:"Usar para Plan de Clase"})]})]},s))})]}),xre=({plan:t,onBack:e,onSave:r,isLoading:n=!1})=>{const[a,s]=ne.useState(t),[i,o]=ne.useState(!1),c=f=>{const{name:m,value:p}=f.target,[g,b]=m.split(".");s(g==="momentosClase"?y=>({...y,momentosClase:{...y.momentosClase,[b]:p}}):y=>({...y,[m]:p}))},u=async()=>{o(!0);try{await r(a)}catch(f){console.error("Error al guardar plan de clase:",f)}finally{o(!1)}};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:t.nombreClase}),l.jsx("button",{onClick:e,className:"text-slate-600 hover:text-slate-900 font-semibold disabled:opacity-50",disabled:n||i,children:"← Volver"})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Inicio"}),l.jsx("textarea",{name:"momentosClase.inicio",value:a.momentosClase.inicio,onChange:c,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:n||i})]}),l.jsxs("div",{children:[l.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Desarrollo"}),l.jsx("textarea",{name:"momentosClase.desarrollo",value:a.momentosClase.desarrollo,onChange:c,rows:8,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:n||i})]}),l.jsxs("div",{children:[l.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Cierre"}),l.jsx("textarea",{name:"momentosClase.cierre",value:a.momentosClase.cierre,onChange:c,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:n||i})]})]}),l.jsx("div",{className:"text-right mt-6",children:l.jsxs("button",{onClick:u,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2 ml-auto",disabled:n||i,children:[i&&l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})})]})},vre=({userId:t})=>{const{actividades:e,save:r}=mre(t),[n,a]=ne.useState("list"),[s,i]=ne.useState(null),[o,c]=ne.useState(!1),[u,f]=ne.useState(!1),m={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[p,g]=ne.useState(m);ne.useEffect(()=>{n==="summary"&&s&&b()},[n,s,t]);const b=async()=>{if(s)try{const U=await dre(t,s.fecha,s.nombre,s.ubicacion);f(U)}catch(U){console.error("Error al verificar evento en calendario:",U)}},y=U=>{const{name:E,value:_}=U.target;g(B=>({...B,[E]:_}))},T=(U,E,_)=>{g(B=>({...B,tareas:B.tareas.map(Q=>Q.id===U?{...Q,[E]:_}:Q)}))},k=()=>{g(U=>({...U,tareas:[...U.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},D=U=>{g(E=>({...E,tareas:E.tareas.filter(_=>_.id!==U)}))},L=async U=>{U.preventDefault(),c(!0);const E=`Basado en la siguiente información de una actividad, genera un objetivo claro y conciso para esta.
    - Nombre: ${p.nombre}
    - Descripción: ${p.descripcion}
    - Tareas: ${p.tareas.map(_=>_.descripcion).join(", ")}
    El objetivo debe ser breve, empezar con un verbo en infinitivo y enfocarse en el propósito principal de la actividad.`;try{Pl("Planificación - Actividad Calendario");const B=await new mg({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).models.generateContent({model:"gemini-2.5-flash",contents:E}),Q={...p,objetivo:B.text.replace(/(\*\*|\*)/g,"")},R=await r(Q),F={...Q,id:R};i(F),a("summary")}catch(_){console.error("Error al generar objetivo con IA:",_),alert("Hubo un error al generar el objetivo. La actividad se guardará sin él.");try{const B={...p,objetivo:"No generado"},Q=await r(B),R={...B,id:Q};i(R),a("summary")}catch(B){console.error("Error al guardar actividad:",B),alert("Error al guardar la actividad. Por favor, intente nuevamente.")}}finally{c(!1)}},j=async U=>{if(!U)return;const E={date:U.fecha,type:Hr.ACTIVIDAD_FOCALIZADA,responsables:U.nombre,ubicacion:U.ubicacion,horario:U.hora};try{await ure(E,t),f(!0),alert("Actividad añadida al Calendario Académico.")}catch(_){console.error("Error adding to calendar:",_),alert("Hubo un error al agregar la actividad al calendario.")}},H="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white";return n==="form"?l.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:l.jsxs("form",{onSubmit:L,className:"space-y-8",children:[l.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[l.jsx("h3",{className:"text-lg font-bold mb-4",children:"Información General"}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("input",{name:"nombre",value:p.nombre,onChange:y,placeholder:"Nombre de la Actividad",className:H,required:!0,disabled:o}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx("input",{name:"fecha",type:"date",value:p.fecha,onChange:y,className:H,required:!0,disabled:o}),l.jsx("input",{name:"hora",type:"time",value:p.hora,onChange:y,className:H,required:!0,disabled:o})]}),l.jsx("textarea",{name:"descripcion",value:p.descripcion,onChange:y,placeholder:"Descripción (objetivos, contenidos, metodología)",rows:4,className:H,required:!0,disabled:o}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx("input",{name:"ubicacion",value:p.ubicacion,onChange:y,placeholder:"Ubicación",className:H,required:!0,disabled:o}),l.jsx("input",{name:"participantes",value:p.participantes,onChange:y,placeholder:"Participantes",className:H,required:!0,disabled:o})]}),l.jsx("textarea",{name:"recursosGenerales",value:p.recursosGenerales,onChange:y,placeholder:"Recursos Generales Necesarios",rows:2,className:H,disabled:o})]})]}),l.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),l.jsx("button",{type:"button",onClick:k,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md disabled:opacity-50",disabled:o,children:"+ Agregar Tarea"})]}),l.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:p.tareas.map((U,E)=>l.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[l.jsx("button",{type:"button",onClick:()=>D(U.id),className:"absolute top-1 right-1 text-red-500 text-lg disabled:opacity-50",disabled:o,children:"×"}),l.jsx("textarea",{value:U.descripcion,onChange:_=>T(U.id,"descripcion",_.target.value),placeholder:`Descripción de la Tarea ${E+1}`,rows:2,className:H,required:!0,disabled:o}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[l.jsx("input",{value:U.responsable,onChange:_=>T(U.id,"responsable",_.target.value),placeholder:"Responsable",className:H,required:!0,disabled:o}),l.jsx("input",{value:U.recursos,onChange:_=>T(U.id,"recursos",_.target.value),placeholder:"Recursos Necesarios",className:H,disabled:o})]})]},U.id))})]}),l.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[l.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),l.jsx("p",{className:"text-sm",children:"Este objetivo se generará automáticamente a partir de la descripción y las tareas ingresadas. Una vez guardada la actividad, podrá revisar y ajustar el objetivo propuesto por el sistema."})]}),l.jsxs("div",{className:"flex justify-end gap-4",children:[l.jsx("button",{type:"button",onClick:()=>a("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg disabled:opacity-50",disabled:o,children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:o,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center disabled:opacity-50",children:o?l.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):n==="summary"&&s?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[l.jsx("span",{className:"text-2xl",children:"✓"}),l.jsxs("div",{children:[l.jsx("h2",{className:"font-bold text-lg",children:"¡Actividad Planificada con Éxito!"}),l.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuación."})]})]}),l.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),l.jsxs("div",{className:"space-y-4 text-sm",children:[l.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[l.jsx("strong",{className:"text-slate-500",children:"Nombre:"}),l.jsx("span",{children:s.nombre})]}),l.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[l.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"}),l.jsx("span",{children:new Date(`${s.fecha}T${s.hora}`).toLocaleString("es-CL")})]}),l.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[l.jsx("p",{className:"font-bold text-slate-500",children:"Descripción:"}),l.jsx("p",{children:s.descripcion})]}),l.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[l.jsx("strong",{className:"text-slate-500",children:"Ubicación:"}),l.jsx("span",{children:s.ubicacion})]}),l.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[l.jsx("strong",{className:"text-slate-500",children:"Participantes:"}),l.jsx("span",{children:s.participantes})]}),l.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[l.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),l.jsx("p",{children:s.recursosGenerales})]}),l.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[l.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),l.jsx("p",{children:s.objetivo})]})]}),l.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[l.jsx("p",{className:"text-sm",children:"¿Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),l.jsx("button",{onClick:()=>j(s),disabled:u,className:`font-bold px-4 py-2 rounded-lg transition-colors ${u?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:u?"✓ Añadido al Calendario":"Añadir al Calendario"})]})]}),l.jsx("button",{onClick:()=>{a("list"),i(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),l.jsx("button",{onClick:()=>{a("form"),g(m)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),l.jsx("div",{className:"space-y-3",children:e.length>0?e.map(U=>l.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:U.nombre}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(U.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",U.ubicacion]})]},U.id)):l.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},wre=({currentUser:t})=>{const e=t.email||t.id||"",{planificaciones:r,save:n,update:a,remove:s,loading:i}=hre(e),o={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[c,u]=ne.useState(o),[f,m]=ne.useState(null),[p,g]=ne.useState(!1),[b,y]=ne.useState(null),[T,k]=ne.useState("unidad"),[D,L]=ne.useState(null),[j,H]=ne.useState(null),U=ne.useMemo(()=>t.asignaturas||[],[t.asignaturas]),E=ne.useMemo(()=>{const J=t.cursos||[],W=new Set;return J.forEach(de=>{de.startsWith("1º")?W.add("1º Medio"):de.startsWith("2º")?W.add("2º Medio"):de.startsWith("3º")?W.add("3º Medio"):de.startsWith("4º")&&W.add("4º Medio")}),Array.from(W)},[t.cursos]);ne.useEffect(()=>{u(J=>({...J,asignatura:U[0]||"",nivel:E[0]||""}))},[U,E]);const _=J=>{const{name:W,value:de}=J.target;u(P=>({...P,[W]:W==="cantidadClases"?parseInt(de,10):de}))},B=()=>{const{asignatura:J,nivel:W,nombreUnidad:de,contenidos:P,cantidadClases:K,observaciones:Y,ideasParaUnidad:ee}=c;return`Eres un experto diseñador curricular para la educación media técnico profesional en Chile. Tu tarea es generar una planificación de unidad didáctica completa en formato JSON estructurado, basándote en la información proporcionada.

    **Información Base:**
    - Asignatura: ${J}
    - Nivel: ${W}
    - Nombre de la Unidad: "${de}"
    - Contenidos clave a trabajar (insumo principal): "${P}"
    - Cantidad de clases para la unidad: ${K}
    - Ideas y perspectiva del docente para la unidad: "${ee||"Ninguna. Sé creativo."}"
    - Observaciones y énfasis del docente: "${Y||"Ninguna"}"

    Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
    1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
    2.  **indicadoresEvaluacion**: Un indicador de evaluación general y observable para la unidad.
    3.  **detallesLeccion**: Un array con EXACTAMENTE ${K} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
        - **objetivosAprendizaje**: Un objetivo de aprendizaje específico para la lección, redactado en infinitivo.
        - **contenidosConceptuales**: Los conceptos clave que se abordarán en la lección.
        - **habilidadesBloom**: La habilidad principal de la Taxonomía de Bloom que se trabajará (ej: Analizar, Crear, Evaluar).
        - **perfilEgreso**: Conecta la lección con una habilidad del perfil de egreso (ej: "Pensamiento crítico", "Colaboración").
        - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el número de clase entre paréntesis (ej: "Debate grupal (Clase 1)").
        - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podría realizar un trabajo interdisciplinario.

    Asegúrate de que el contenido generado sea coherente, pedagógicamente sólido y esté directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.`},Q=async J=>{if(J.preventDefault(),g(!0),y(null),console.log("🔍 Debug API Key:"),console.log("VITE_GOOGLE_AI_API_KEY:",void 0),console.log("VITE_GEMINI_API_KEY:","AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"),console.log("Todas las variables env:",fre),!c.contenidos||!c.nombreUnidad){y("Los campos 'Nombre de Unidad' y 'Contenidos Clave' son obligatorios."),g(!1);return}try{Pl("Planificación - Unidad");const W=new mg({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),de=B(),P={type:ln.OBJECT,properties:{objetivosAprendizaje:{type:ln.STRING},indicadoresEvaluacion:{type:ln.STRING},detallesLeccion:{type:ln.ARRAY,items:{type:ln.OBJECT,properties:{objetivosAprendizaje:{type:ln.STRING},contenidosConceptuales:{type:ln.STRING},habilidadesBloom:{type:ln.STRING},perfilEgreso:{type:ln.STRING},actividades:{type:ln.STRING},asignaturasInterdisciplinariedad:{type:ln.STRING}},required:["objetivosAprendizaje","contenidosConceptuales","habilidadesBloom","perfilEgreso","actividades","asignaturasInterdisciplinariedad"]}}},required:["objetivosAprendizaje","indicadoresEvaluacion","detallesLeccion"]},K=await W.models.generateContent({model:"gemini-2.5-flash",contents:de,config:{responseMimeType:"application/json",responseSchema:P}}),Y=JSON.parse(K.text),ee={fechaCreacion:new Date().toISOString(),autor:t.nombreCompleto,tipo:"Unidad",asignatura:c.asignatura,nivel:c.nivel,nombreUnidad:c.nombreUnidad,contenidos:c.contenidos,cantidadClases:c.cantidadClases,observaciones:c.observaciones,ideasParaUnidad:c.ideasParaUnidad,objetivosAprendizaje:Y.objetivosAprendizaje,indicadoresEvaluacion:Y.indicadoresEvaluacion,detallesLeccion:Y.detallesLeccion};if(f)await a(f.id,ee),m({...ee,id:f.id});else{const Ae=await n(ee);m({...ee,id:Ae})}}catch(W){console.error("Error al generar planificación con IA",W),y("Ocurrió un error al contactar con la IA. Verifique la configuración y reintente.")}finally{g(!1)}},R=async(J,W)=>{g(!0),y(null);const de=`A partir de la siguiente información de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
    
    - Asignatura: ${W.asignatura}
    - Nivel: ${W.nivel}
    - Objetivo de la clase: ${J.objetivosAprendizaje}
    - Contenidos: ${J.contenidosConceptuales}
    - Actividades sugeridas: ${J.actividades}
    
    Responde SÓLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{Pl("Planificación - Utilizar Clase");const P=new mg({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),K={type:ln.OBJECT,properties:{inicio:{type:ln.STRING},desarrollo:{type:ln.STRING},cierre:{type:ln.STRING}},required:["inicio","desarrollo","cierre"]},Y=await P.models.generateContent({model:"gemini-2.5-flash",contents:de,config:{responseMimeType:"application/json",responseSchema:K}}),ee=JSON.parse(Y.text),Ae={fechaCreacion:new Date().toISOString(),autor:t.nombreCompleto,tipo:"Clase",asignatura:W.asignatura,nivel:W.nivel,contenidos:J.contenidosConceptuales,observaciones:"",nombreClase:J.actividades,duracionClase:80,momentosClase:ee,detalleLeccionOrigen:J};await n(Ae),alert('¡Plan de clase generado y guardado en la pestaña "Clase"!'),k("clase")}catch(P){console.error("Error al generar plan de clase con IA",P),y("No se pudo generar el plan de clase. Inténtelo de nuevo.")}finally{g(!1)}},F=J=>{J.tipo==="Unidad"&&(u({asignatura:J.asignatura,nivel:J.nivel,nombreUnidad:J.nombreUnidad,contenidos:J.contenidos,cantidadClases:J.cantidadClases,observaciones:J.observaciones,ideasParaUnidad:J.ideasParaUnidad||""}),m(J),window.scrollTo({top:0,behavior:"smooth"}))},V=async J=>{if(window.confirm("¿Está seguro de que desea eliminar esta planificación?"))try{await s(J),(f==null?void 0:f.id)===J&&(m(null),u(o))}catch(W){console.error("Error al eliminar planificación:",W),alert("Error al eliminar la planificación. Por favor, intente nuevamente.")}},X=(J,W)=>{f&&H({planId:f.id,lessonIndex:J,lessonData:W})},oe=async J=>{if(j)try{const{planId:W,lessonIndex:de}=j,P=r.find(ee=>ee.id===W&&ee.tipo==="Unidad");if(!P)return;const K=[...P.detallesLeccion];K[de]=J;const Y={...P,detallesLeccion:K};await a(W,Y),m(Y),H(null)}catch(W){console.error("Error al actualizar lección:",W),alert("Error al actualizar la lección. Por favor, intente nuevamente.")}},te="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",ae=()=>l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete los campos y use la IA para crear una planificación de unidad estructurada."}),i?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):l.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsx("select",{name:"asignatura",value:c.asignatura,onChange:_,className:te,disabled:p,children:U.length>0?U.map(J=>l.jsx("option",{value:J,children:J},J)):l.jsx("option",{disabled:!0,children:"No tiene asignaturas asignadas"})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),l.jsx("select",{name:"nivel",value:c.nivel,onChange:_,className:te,disabled:p,children:E.length>0?E.map(J=>l.jsx("option",{value:J,children:J},J)):l.jsx("option",{disabled:!0,children:"No tiene cursos/niveles asignados"})})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Nombre de Unidad ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",name:"nombreUnidad",value:c.nombreUnidad,onChange:_,className:te,placeholder:"Ej: La Célula y sus procesos",disabled:p})]}),l.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[l.jsxs("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Contenidos Clave ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("textarea",{name:"contenidos",value:c.contenidos,onChange:_,rows:3,placeholder:"Ingrese los temas, conceptos clave o unidades que la planificación debe abordar.",className:te,disabled:p})]}),l.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[l.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),l.jsx("textarea",{name:"ideasParaUnidad",value:c.ideasParaUnidad,onChange:_,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificación (ej: enfocar en trabajo colaborativo, usar casos prácticos, conectar con la actualidad).",className:te,disabled:p})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),l.jsx("input",{type:"number",name:"cantidadClases",value:c.cantidadClases,onChange:_,className:te,min:"1",max:"20",disabled:p})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (Énfasis)"}),l.jsx("textarea",{name:"observaciones",value:c.observaciones,onChange:_,rows:1,placeholder:"Ej: clase práctica, modelo ABP, juego, reforzamiento...",className:te,disabled:p})]})]}),l.jsx("div",{className:"pt-4 text-right",children:l.jsx("button",{type:"submit",disabled:p||i,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[150px] dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:p?l.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):f?"Regenerar":"Generar Plan"})}),b&&l.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:b})]})]}),f&&l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisión y Edición"}),l.jsx(gre,{plan:f,onEditLesson:X,onUseLesson:R,isLoading:p})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),i?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):l.jsx("div",{className:"space-y-4",children:r.filter(J=>J.tipo==="Unidad").length>0?r.filter(J=>J.tipo==="Unidad").map(J=>l.jsx("div",{className:`p-4 border rounded-lg ${(f==null?void 0:f.id)===J.id?"bg-amber-50 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700"}`,children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:J.nombreUnidad}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(J.fechaCreacion).toLocaleString("es-CL")]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",J.contenidos]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>F(J),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm disabled:opacity-50",disabled:p,children:"Ver y Editar"}),l.jsx("button",{onClick:()=>V(J.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 disabled:opacity-50",disabled:p,children:"🗑️"})]})]})},J.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})})]})]}),q=()=>{const J=r.filter(W=>W.tipo==="Clase").sort((W,de)=>new Date(de.fechaCreacion).getTime()-new Date(W.fechaCreacion).getTime());return D?l.jsx(xre,{plan:D,onBack:()=>L(null),onSave:async W=>{try{await a(W.id,W),L(W)}catch(de){console.error("Error al actualizar plan de clase:",de),alert("Error al actualizar el plan de clase. Por favor, intente nuevamente.")}},isLoading:p}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Planes de Clase Guardados"}),i?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):l.jsx("div",{className:"space-y-4",children:J.length>0?J.map(W=>l.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:W.nombreClase}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(W.fechaCreacion).toLocaleString("es-CL")]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",W.contenidos]})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("button",{onClick:()=>L(W),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},W.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaña 'Unidad'."})})]})};return!t||!t.email&&!t.id?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),l.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(t)]})]})}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificación"}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>k("unidad"),className:`${T==="unidad"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Unidad"}),l.jsx("button",{onClick:()=>k("clase"),className:`${T==="clase"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Clase"}),l.jsx("button",{onClick:()=>k("calendario"),className:`${T==="calendario"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Actividades Calendario"})]})}),T==="unidad"&&ae(),T==="clase"&&q(),T==="calendario"&&l.jsx(vre,{userId:e}),j&&l.jsx(pre,{lesson:j.lessonData,onClose:()=>H(null),onSave:oe,isLoading:p})]})},uw="events",yre=async()=>{try{const t=er(Nt(Gr,uw),fn("date","asc"));return(await ps(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener eventos:",t),new Error("No se pudieron cargar los eventos del calendario")}},bre=async t=>{try{return{id:(await Sa(Nt(Gr,uw),{...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear evento:",e),new Error("No se pudo crear el evento del calendario")}},Cre=async(t,e)=>{try{const r=_r(Gr,uw,t);await $g(r,{...e,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar evento:",r,"ID:",t),new Error("No se pudo actualizar el evento del calendario")}},Ere=async t=>{try{const e=_r(Gr,uw,t);await Oi(e)}catch(e){throw console.error("Error al eliminar evento:",e,"ID:",t),new Error("No se pudo eliminar el evento del calendario")}},_re=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],Sre=t=>{switch(t.type){case Hr.EVALUACION:return`${t.subtype} - ${t.asignatura}`;case Hr.ACTO:return`Acto: ${t.ubicacion}`;case Hr.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case Hr.SALIDA_PEDAGOGICA:return`Salida: ${t.ubicacion}`;default:return"Evento"}},Tre=({isOpen:t,onClose:e,onSave:r,onDelete:n,event:a,date:s,isLoading:i})=>{const[o,c]=ne.useState({});ne.useEffect(()=>{c(a||{type:Hr.EVALUACION,subtype:Ff.PRUEBA_PARCIAL,asignatura:Xo[0],curso:Za[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[a,t]);const u="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",f=y=>{const{name:T,value:k}=y.target;c(D=>({...D,[T]:k}))},m=y=>{c(T=>{if(T.type===Hr.SALIDA_PEDAGOGICA){const k=T.cursos||[],D=k.includes(y)?k.filter(L=>L!==y):[...k,y];return{...T,cursos:D.sort()}}return T})},p=y=>{var k;y.preventDefault();let T;switch(o.type){case Hr.EVALUACION:const D={date:s,type:Hr.EVALUACION,subtype:o.subtype,asignatura:o.asignatura,curso:o.curso,contenidos:o.contenidos};(o.subtype===Ff.RUBRICA||o.subtype===Ff.PAUTA_COTEJO)&&((k=o.enlace)!=null&&k.trim())&&(D.enlace=o.enlace.trim()),T=D;break;case Hr.ACTO:T={date:s,type:Hr.ACTO,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case Hr.ACTIVIDAD_FOCALIZADA:T={date:s,type:Hr.ACTIVIDAD_FOCALIZADA,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case Hr.SALIDA_PEDAGOGICA:T={date:s,type:Hr.SALIDA_PEDAGOGICA,responsable:o.responsable,ubicacion:o.ubicacion,cursos:o.cursos};break;default:console.error("Tipo de evento no reconocido");return}r(T)};if(!t)return null;const g=new Date(`${s}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),b=()=>{switch(o.type){case Hr.EVALUACION:return l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subtipo"}),l.jsx("select",{id:"subtype",name:"subtype",value:o.subtype,onChange:f,required:!0,className:u,children:Hz.map(y=>l.jsx("option",{value:y,children:y},y))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsx("select",{id:"asignatura",name:"asignatura",value:o.asignatura,onChange:f,required:!0,className:u,children:Xo.map(y=>l.jsx("option",{value:y,children:y},y))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),l.jsx("select",{id:"curso",name:"curso",value:o.curso,onChange:f,required:!0,className:u,children:Za.map(y=>l.jsx("option",{value:y,children:y},y))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenidos"}),l.jsx("textarea",{id:"contenidos",name:"contenidos",value:o.contenidos||"",onChange:f,required:!0,rows:3,className:u})]}),(o.subtype===Ff.RUBRICA||o.subtype===Ff.PAUTA_COTEJO)&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),l.jsx("input",{id:"enlace",name:"enlace",type:"url",value:o.enlace||"",onChange:f,placeholder:"https://...",className:u})]})]});case Hr.ACTO:case Hr.ACTIVIDAD_FOCALIZADA:return l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsables"}),l.jsx("input",{id:"responsables",name:"responsables",type:"text",value:o.responsables||"",onChange:f,required:!0,className:u})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ubicación"}),l.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:f,required:!0,className:u})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Horario"}),l.jsx("input",{id:"horario",name:"horario",type:"text",value:o.horario||"",onChange:f,required:!0,className:u})]})]});case Hr.SALIDA_PEDAGOGICA:return l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),l.jsx("input",{id:"responsable",name:"responsable",type:"text",value:o.responsable||"",onChange:f,required:!0,className:u})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ubicación/Destino"}),l.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:f,required:!0,className:u})]}),l.jsxs("fieldset",{children:[l.jsx("legend",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),l.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border p-2 rounded-md dark:border-slate-600 text-slate-700 dark:text-slate-300",children:Za.map(y=>l.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[l.jsx("input",{type:"checkbox",checked:(o.cursos||[]).includes(y),onChange:()=>m(y),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{children:y})]},y))})]})]});default:return null}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:e,children:l.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg animate-fade-in-up",onClick:y=>y.stopPropagation(),children:l.jsxs("form",{onSubmit:p,children:[l.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:a?"Editar Evento":"Agregar Evento"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6 font-semibold",children:g}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),l.jsx("select",{id:"type",name:"type",value:o.type,onChange:f,className:u,children:Object.values(Hr).map(y=>l.jsx("option",{value:y,children:y},y))})]}),b()]})]}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 px-6 py-4 rounded-b-xl flex justify-between items-center",children:[l.jsx("div",{children:a&&n&&l.jsx("button",{type:"button",onClick:n,disabled:i,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:i?"Eliminando...":"Eliminar"})}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{type:"button",onClick:e,disabled:i,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 disabled:opacity-50",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:i,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 disabled:opacity-50",children:i?"Guardando...":"Guardar"})]})]})]})})})},Bre=({profile:t})=>{const[e,r]=ne.useState(new Date),[n,a]=ne.useState([]),[s,i]=ne.useState(!1),[o,c]=ne.useState(null),[u,f]=ne.useState(!1),[m,p]=ne.useState(Object.values(Hr)),[g,b]=ne.useState(!1),[y,T]=ne.useState(null),[k,D]=ne.useState(null),L=ne.useCallback(async()=>{i(!0);try{const R=await yre();a(R),c(null)}catch(R){console.error("Error al cargar eventos desde Firestore",R),c("No se pudieron cargar los eventos desde la nube.")}finally{i(!1)}},[]);ne.useEffect(()=>{L()},[L]);const j=ne.useMemo(()=>{const R=e.getFullYear(),F=e.getMonth(),V=new Date(R,F,1).getDay(),X=new Date(R,F+1,0).getDate(),oe=[];let te=1;for(let ae=0;ae<6;ae++){const q=[];for(let J=0;J<7;J++)ae===0&&J<V||te>X?q.push(null):(q.push(new Date(R,F,te)),te++);if(oe.push(q),te>X)break}return oe},[e]),H=R=>{p(F=>F.includes(R)?F.filter(V=>V!==R):[...F,R])},U=()=>{m.length===Object.values(Hr).length?p([]):p(Object.values(Hr))},E=R=>{t!==Pt.ESTUDIANTE&&(T(R.toISOString().split("T")[0]),D(null),b(!0))},_=(R,F)=>{F.stopPropagation(),t!==Pt.ESTUDIANTE&&(T(R.date),D(R),b(!0))},B=async R=>{f(!0);try{k?await Cre(k.id,R):await bre(R),await L(),b(!1)}catch(F){console.error("Error al guardar evento:",F);const V=F instanceof Error?F.message:"Error desconocido";c(`Error al guardar el evento: ${V}`)}finally{f(!1)}},Q=async()=>{if(k){f(!0);try{await Ere(k.id),await L(),b(!1)}catch(R){console.error("Error al eliminar evento:",R);const F=R instanceof Error?R.message:"Error desconocido";c(`No se pudo eliminar el evento: ${F}`)}finally{f(!1)}}};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Calendario Académico"}),s&&l.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando eventos desde la nube..."}),o&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:o}),!s&&n.length===0&&l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay eventos registrados en la nube."}),l.jsx("div",{className:"mb-4 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:l.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),l.jsx("div",{className:"ml-3",children:l.jsx("p",{className:"text-sm",children:"Recuerda que el calendario escolar completo se encuentra disponible en la intranet. Este calendario es de exclusivo uso evaluativo y académico."})})]})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Filtrar por tipo de evento:"}),l.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[l.jsx("button",{onClick:U,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-slate-700 text-white hover:bg-slate-600 dark:bg-slate-600 dark:hover:bg-slate-500 transition-colors",children:m.length===Object.values(Hr).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(Hr).map(R=>l.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2 ${m.includes(R)?`shadow-sm ${wd[R].color}`:"bg-slate-100 text-slate-600 hover:bg-slate-200 opacity-70 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600 dark:opacity-60"}`,children:[l.jsx("input",{type:"checkbox",checked:m.includes(R),onChange:()=>H(R),className:"hidden"}),l.jsx("span",{children:wd[R].icon}),l.jsx("span",{children:wd[R].label})]},R))]})]}),l.jsxs("div",{className:"border dark:border-slate-700 rounded-lg overflow-hidden",children:[l.jsxs("header",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-700/50 border-b dark:border-slate-700",children:[l.jsx("button",{onClick:()=>r(new Date(e.setMonth(e.getMonth()-1))),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300",children:"<"}),l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize",children:e.toLocaleString("es-CL",{month:"long",year:"numeric"})}),l.jsx("button",{onClick:()=>r(new Date(e.setMonth(e.getMonth()+1))),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300",children:">"}),l.jsx("button",{onClick:()=>r(new Date),className:"ml-4 bg-slate-800 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Hoy"})]}),l.jsx("div",{className:"grid grid-cols-7",children:_re.map(R=>l.jsx("div",{className:"text-center font-semibold text-slate-500 dark:text-slate-400 text-sm py-3 bg-slate-50 dark:bg-slate-700/50 border-b border-r dark:border-slate-700",children:R},R))}),l.jsx("div",{className:"grid grid-cols-7 grid-rows-6",children:j.flat().map((R,F)=>{const V=R&&R.toDateString()===new Date().toDateString(),X=R==null?void 0:R.toISOString().split("T")[0],oe=X?n.filter(te=>te.date===X&&m.includes(te.type)):[];return l.jsx("div",{onClick:()=>R&&E(R),className:`border-b border-r dark:border-slate-700 p-2 h-36 flex flex-col overflow-hidden relative group ${R?t!==Pt.ESTUDIANTE?"cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50":"":"bg-slate-50 dark:bg-slate-800/50"}`,children:R&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:`self-end text-sm font-semibold ${V?"bg-amber-400 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-600 dark:text-slate-300"}`,children:R.getDate()}),l.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:oe.map(te=>l.jsxs("div",{onClick:ae=>_(te,ae),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${wd[te.type].color}`,children:[l.jsx("span",{children:wd[te.type].icon}),l.jsx("span",{className:"truncate",children:Sre(te)})]},te.id))}),t!==Pt.ESTUDIANTE&&l.jsx("button",{className:"absolute bottom-1 right-1 bg-amber-400 text-white rounded-full h-6 w-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity text-lg font-bold",children:"+"})]})},F)})})]}),g&&l.jsx(Tre,{isOpen:g,onClose:()=>b(!1),onSave:B,onDelete:Q,event:k,date:y,isLoading:u})]})},dw="anuncios",Nre=async()=>{try{const t=er(Nt(Gr,dw),fn("fechaPublicacion","desc"));return(await ps(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener anuncios:",t),new Error("No se pudieron cargar los anuncios")}},kre=async t=>{try{return{id:(await Sa(Nt(Gr,dw),{...t,fechaPublicacion:t.fechaPublicacion||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear anuncio:",e),new Error("No se pudo crear el anuncio")}},Ire=async(t,e)=>{try{const r=_r(Gr,dw,t);await $g(r,{...e,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar anuncio:",r,"ID:",t),new Error("No se pudo actualizar el anuncio")}},Fre=async t=>{try{const e=_r(Gr,dw,t);await Oi(e)}catch(e){throw console.error("Error al eliminar anuncio:",e,"ID:",t),new Error("No se pudo eliminar el anuncio")}},aI=[{bg:"bg-yellow-200 dark:bg-yellow-800/50",rotate:"transform -rotate-2"},{bg:"bg-lime-200 dark:bg-lime-800/50",rotate:"transform rotate-1"},{bg:"bg-sky-200 dark:bg-sky-800/50",rotate:"transform rotate-2"},{bg:"bg-red-200 dark:bg-red-800/50",rotate:"transform -rotate-1"},{bg:"bg-violet-200 dark:bg-violet-800/50",rotate:"transform rotate-1"}],Dre=({currentUser:t})=>{const[e,r]=ne.useState([]),[n,a]=ne.useState(!1),[s,i]=ne.useState(null),[o,c]=ne.useState({titulo:"",mensaje:"",adjunto:""}),[u,f]=ne.useState({tipo:"Todos",cursos:[]}),m=ne.useCallback(async()=>{a(!0);try{const E=await Nre();r(E),i(null)}catch(E){console.error("Error al cargar anuncios desde Firestore",E),i("No se pudieron cargar los anuncios desde la nube.")}finally{a(!1)}},[]);ne.useEffect(()=>{m()},[m]);const p=E=>{const{name:_,value:B}=E.target;c(Q=>({...Q,[_]:B}))},g=E=>{f({tipo:E,cursos:E==="Cursos"?[]:void 0})},b=E=>{f(_=>{var Q;if(_.tipo!=="Cursos")return _;const B=(Q=_.cursos)!=null&&Q.includes(E)?_.cursos.filter(R=>R!==E):[..._.cursos||[],E];return{..._,cursos:B}})},y=async E=>{if(E.preventDefault(),!o.titulo||!o.mensaje){alert("Título y mensaje son obligatorios.");return}if(u.tipo==="Cursos"&&(!u.cursos||u.cursos.length===0)){alert('Debe seleccionar al menos un curso para el destinatario "Cursos".');return}try{const _={fechaPublicacion:new Date().toISOString(),destacado:!1,autor:t.nombreCompleto,profileCreador:t.profile,destinatarios:u,...o};await kre(_),await m(),c({titulo:"",mensaje:"",adjunto:""}),f({tipo:"Todos",cursos:[]})}catch(_){console.error("Error al crear anuncio:",_),i("Error al publicar el anuncio en la nube.")}},T=async E=>{if(window.confirm("¿Está seguro de que desea eliminar este anuncio?"))try{await Fre(E),await m()}catch(_){console.error("Error al eliminar anuncio:",_),i("No se pudo eliminar el anuncio en la nube.")}},k=async E=>{try{const _=e.find(B=>B.id===E);_&&(await Ire(E,{destacado:!_.destacado}),await m())}catch(_){console.error("Error al actualizar anuncio:",_),i("No se pudo actualizar el estado del anuncio en la nube.")}},D=ne.useMemo(()=>[...e].sort((E,_)=>E.destacado&&!_.destacado?-1:!E.destacado&&_.destacado?1:new Date(_.fechaPublicacion).getTime()-new Date(E.fechaPublicacion).getTime()),[e]),L=ne.useMemo(()=>{const E=t.profile,_=t.curso;return D.filter(B=>{if(E===Pt.SUBDIRECCION)return!0;if(!B.destinatarios)return E!==Pt.ESTUDIANTE;const{tipo:Q,cursos:R}=B.destinatarios;return Q==="Todos"||Q==="Profesores"&&E===Pt.PROFESORADO||Q==="Coordinación TP"&&E===Pt.COORDINACION_TP?!0:Q==="Cursos"?E===Pt.ESTUDIANTE?R==null?void 0:R.includes(_||""):!0:!1})},[D,t]),j=E=>t.profile===Pt.ESTUDIANTE?!1:t.profile===Pt.SUBDIRECCION||t.profile===E.profileCreador,H=()=>t.profile===Pt.SUBDIRECCION||t.profile===Pt.PROFESORADO,U="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Muro de Anuncios"}),n&&l.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anuncios desde la nube..."}),s&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),t.profile!==Pt.ESTUDIANTE?l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Publique un nuevo anuncio para toda la comunidad escolar."}),l.jsxs("form",{onSubmit:y,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Título"}),l.jsx("input",{type:"text",name:"titulo",value:o.titulo,onChange:p,required:!0,className:U})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Mensaje"}),l.jsx("textarea",{name:"mensaje",value:o.mensaje,onChange:p,required:!0,rows:4,className:U})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Destinatarios"}),l.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:["Todos","Cursos","Profesores","Coordinación TP"].map(E=>l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"destinatarioTipo",value:E,checked:u.tipo===E,onChange:()=>g(E),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-slate-300"}),l.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:E.replace("Coordinación TP","Coord. TP")})]},E))})]}),u.tipo==="Cursos"&&l.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Cursos"}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-48 overflow-y-auto",children:Za.map(E=>{var _;return l.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:(_=u.cursos)==null?void 0:_.includes(E),onChange:()=>b(E),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300 bg-slate-100"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:E})]},E)})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"adjunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace adjunto (Opcional)"}),l.jsx("input",{type:"url",name:"adjunto",value:o.adjunto,onChange:p,placeholder:"https://ejemplo.com/documento.pdf",className:U})]}),l.jsx("div",{className:"pt-2 text-right",children:l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Publicar Anuncio"})})]})]}):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Anuncios de la comunidad escolar. Este módulo es de solo lectura."})]}),!n&&L.length===0&&l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay anuncios para mostrar en la nube."}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 py-4",children:!n&&L.length>0&&L.map((E,_)=>{const B=aI[_%aI.length];return l.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${B.bg} ${B.rotate}`,children:[E.destacado&&l.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:l.jsx("span",{className:"text-5xl",role:"img","aria-label":"Anuncio destacado",children:"📌"})}),l.jsx("h2",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-4 break-words",children:E.titulo}),l.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[100px]",children:E.mensaje}),E.adjunto&&l.jsx("div",{className:"font-sans text-sm mb-4",children:l.jsxs("a",{href:E.adjunto,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-semibold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Ver Adjunto"]})}),l.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold",children:E.autor}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(E.fechaPublicacion).toLocaleString("es-CL")})]}),l.jsxs("div",{className:"flex items-center",children:[H()&&l.jsx("button",{onClick:()=>k(E.id),title:E.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:l.jsx("span",{className:`text-xl transition-opacity ${E.destacado?"opacity-100":"opacity-30"}`,children:"📌"})}),j(E)&&l.jsx("button",{onClick:()=>T(E.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},E.id)})})]})},h5="actas_de_reunion",Rre=t=>{var r,n;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion}},Lre=t=>{const e=er(Nt(Tt,h5),fn("fechaCreacion","desc"));return br(e,n=>{const a=n.docs.map(s=>Rre(s));t(a)},n=>{console.error("Error al suscribirse a las actas:",n),t([])})},Ure=async(t,e)=>{try{const r={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,fechaCreacion:Ar.fromDate(new Date(t.fechaCreacion))};return(await Sa(Nt(Tt,h5),r)).id}catch(r){throw console.error("Error al crear el acta:",r),new Error("No se pudo crear el acta.")}},Mre=async t=>{try{const e=_r(Tt,h5,t);await Oi(e)}catch(e){throw console.error("Error al eliminar el acta:",e),new Error("No se pudo eliminar el acta.")}},_L=window.SpeechRecognition||window.webkitSpeechRecognition,sI=!!_L,Pre=({isListening:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t?l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),jre=({currentUser:t})=>{const[e,r]=ne.useState([]),[n,a]=ne.useState(null),[s,i]=ne.useState({tipoReunion:gb[0],asistentes:"",textoReunion:""}),[o,c]=ne.useState(!1),[u,f]=ne.useState(!1),[m,p]=ne.useState(!0),[g,b]=ne.useState(null),y=ne.useRef(null);ne.useEffect(()=>{p(!0);const E=Lre(_=>{r(_),!n&&_.length>0&&a(_[0]),p(!1)});return()=>E()},[n]);const T=E=>{const{name:_,value:B}=E.target;i(Q=>({...Q,[_]:B}))},k=ne.useCallback(()=>{var E;if(!sI){b("El reconocimiento de voz no es compatible con este navegador.");return}o?(E=y.current)==null||E.stop():(y.current=new _L,y.current.lang="es-CL",y.current.continuous=!0,y.current.interimResults=!0,y.current.onresult=_=>{let B="";for(let Q=_.resultIndex;Q<_.results.length;++Q)_.results[Q].isFinal&&(B+=_.results[Q][0].transcript+". ");i(Q=>({...Q,textoReunion:Q.textoReunion+B}))},y.current.onstart=()=>c(!0),y.current.onend=()=>c(!1),y.current.onerror=_=>{console.error("Speech recognition error",_.error),b(`Error de reconocimiento: ${_.error}`),c(!1)},y.current.start())},[o]),D=async E=>{E.preventDefault();const{tipoReunion:_,asistentes:B,textoReunion:Q}=s;if(!_||!B.trim()||!Q.trim()){b("Todos los campos son obligatorios.");return}f(!0),b(null);try{Pl("Generador de Actas");const R="",V=new globalThis.GoogleGenerativeAI(R).getGenerativeModel({model:"gemini-pro"}),X=`
                Analiza el siguiente texto de un acta de reunión y extrae la información clave.
                El texto es una transcripción de lo hablado.
                - Identifica los temas principales discutidos.
                - Extrae un resumen de los acuerdos o decisiones específicas tomadas.
                - Lista cualquier plazo o fecha límite mencionada.
                - Identifica los nombres de las personas a las que se les asignaron responsabilidades o tareas.
                
                Texto del acta:
                "${Q}"
                
                Asistentes a la reunión para referencia de nombres: ${B}
            `,q=(await(await V.generateContent(X)).response).text().replace(/^```json\s*|```\s*$/g,""),J=JSON.parse(q),W={fechaCreacion:new Date().toISOString(),...s,...J},de=await Ure(W,t);i({tipoReunion:gb[0],asistentes:"",textoReunion:""})}catch(R){console.error("Error al analizar acta con IA:",R),b("Ocurrió un error al procesar el acta con la IA. Por favor, revise el texto e inténtelo de nuevo.")}finally{f(!1)}},L=async E=>{if(window.confirm("¿Está seguro de que desea eliminar esta acta?"))try{await Mre(E),(n==null?void 0:n.id)===E&&a(e.length>1?e[1]:null)}catch(_){console.error("Error deleting acta:",_),alert("No se pudo eliminar el acta.")}},j=E=>{a(E)},H=E=>E.temas||E.acuerdos||E.plazos||E.responsables?l.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Análisis con IA"}),E.temas&&E.temas.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Temas Tratados"}),l.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.temas.map((B,Q)=>l.jsx("li",{children:B},Q))})]}),E.acuerdos&&E.acuerdos.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Acuerdos"}),l.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.acuerdos.map((B,Q)=>l.jsx("li",{children:B},Q))})]}),E.plazos&&E.plazos.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Plazos"}),l.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.plazos.map((B,Q)=>l.jsx("li",{children:B},Q))})]}),E.responsables&&E.responsables.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Responsables"}),l.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.responsables.map((B,Q)=>l.jsx("li",{children:B},Q))})]})]}):null,U="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return m?l.jsx("div",{className:"text-center py-10",children:"Cargando actas..."}):l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in",children:[l.jsxs("div",{className:"md:col-span-1 space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generador de Actas"}),l.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:l.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),l.jsx("div",{className:"ml-3",children:l.jsxs("p",{className:"text-sm",children:["Recuerda que las actas debes subirlas por intranet en ",l.jsx("strong",{className:"font-semibold",children:"www.industrialderecoleta.cl"}),". Esta es sólo una herramienta para agilizar redacción."]})})]})}),l.jsxs("form",{onSubmit:D,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"tipoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Reunión"}),l.jsx("select",{name:"tipoReunion",value:s.tipoReunion,onChange:T,required:!0,className:U,children:gb.map(E=>l.jsx("option",{value:E,children:E},E))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asistentes",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asistentes"}),l.jsx("textarea",{name:"asistentes",value:s.asistentes,onChange:T,required:!0,rows:3,placeholder:"Nombres, separados por comas...",className:U})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"textoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Texto de la Reunión"}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{name:"textoReunion",value:s.textoReunion,onChange:T,required:!0,rows:6,placeholder:"Escriba o use el micrófono para dictar...",className:U}),sI&&l.jsx("button",{type:"button",onClick:k,title:o?"Detener grabación":"Iniciar grabación",className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${o?"bg-red-500 text-white animate-pulse":"bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500"}`,children:l.jsx(Pre,{isListening:o})})]})]}),g&&l.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:g}),l.jsx("div",{className:"pt-2 text-right",children:l.jsx("button",{type:"submit",disabled:u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 flex items-center justify-center min-w-[120px] disabled:bg-slate-400 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:u?l.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Crear Acta"})})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Actas"}),l.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:e.length>0?e.map(E=>l.jsxs("button",{onClick:()=>j(E),className:`w-full text-left p-3 rounded-lg border transition-colors ${(n==null?void 0:n.id)===E.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 hover:bg-slate-100 border-transparent dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:E.tipoReunion}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(E.fechaCreacion).toLocaleDateString("es-CL")})]},E.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay actas guardadas."})})]})]}),l.jsx("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:n?l.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsx("h1",{className:"text-3xl font-bold mt-0",children:`Acta de Reunión: ${n.tipoReunion}`}),l.jsx("button",{onClick:()=>L(n.id),title:"Eliminar Acta",className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 -mt-2 -mr-2",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[l.jsx("strong",{children:"Fecha:"})," ",new Date(n.fechaCreacion).toLocaleString("es-CL")]}),l.jsx("h2",{children:"Asistentes"}),l.jsx("ul",{className:"list-disc pl-5",children:String(n.asistentes||"").split(",").map((E,_)=>E.trim()&&l.jsx("li",{children:E.trim()},_))}),H(n),l.jsx("h2",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:"Transcripción Original"}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-md whitespace-pre-wrap",children:l.jsx("p",{children:n.textoReunion})})]}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[l.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📄"}),l.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:"Seleccione un Acta"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Elija un acta del historial para ver sus detalles aquí, o cree una nueva usando el formulario."})]})})]})},Ore="modulepreload",Qre=function(t){return"/"+t},iI={},Zv=function(e,r,n){let a=Promise.resolve();if(r&&r.length>0){let i=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=i(r.map(u=>{if(u=Qre(u),u in iI)return;iI[u]=!0;const f=u.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${m}`))return;const p=document.createElement("link");if(p.rel=f?"stylesheet":Ore,f||(p.as="script"),p.crossOrigin="",p.href=u,c&&p.setAttribute("nonce",c),document.head.appendChild(p),f)return new Promise((g,b)=>{p.addEventListener("load",g),p.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return a.then(i=>{for(const o of i||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};function On(t){"@babel/helpers - typeof";return On=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},On(t)}var Ri=Uint8Array,Jo=Uint16Array,m5=Int32Array,fw=new Ri([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),hw=new Ri([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),iE=new Ri([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),SL=function(t,e){for(var r=new Jo(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var a=new m5(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},TL=SL(fw,2),BL=TL.b,oE=TL.r;BL[28]=258,oE[258]=28;var NL=SL(hw,0),Hre=NL.b,oI=NL.r,lE=new Jo(32768);for(var la=0;la<32768;++la){var ld=(la&43690)>>1|(la&21845)<<1;ld=(ld&52428)>>2|(ld&13107)<<2,ld=(ld&61680)>>4|(ld&3855)<<4,lE[la]=((ld&65280)>>8|(ld&255)<<8)>>1}var gA=function(t,e,r){for(var n=t.length,a=0,s=new Jo(e);a<n;++a)t[a]&&++s[t[a]-1];var i=new Jo(e);for(a=1;a<e;++a)i[a]=i[a-1]+s[a-1]<<1;var o;if(r){o=new Jo(1<<e);var c=15-e;for(a=0;a<n;++a)if(t[a])for(var u=a<<4|t[a],f=e-t[a],m=i[t[a]-1]++<<f,p=m|(1<<f)-1;m<=p;++m)o[lE[m]>>c]=u}else for(o=new Jo(n),a=0;a<n;++a)t[a]&&(o[a]=lE[i[t[a]-1]++]>>15-t[a]);return o},zd=new Ri(288);for(var la=0;la<144;++la)zd[la]=8;for(var la=144;la<256;++la)zd[la]=9;for(var la=256;la<280;++la)zd[la]=7;for(var la=280;la<288;++la)zd[la]=8;var pg=new Ri(32);for(var la=0;la<32;++la)pg[la]=5;var Vre=gA(zd,9,0),Gre=gA(zd,9,1),zre=gA(pg,5,0),qre=gA(pg,5,1),yb=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},Ac=function(t,e,r){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&r},bb=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},p5=function(t){return(t+7)/8|0},kL=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new Ri(t.subarray(e,r))},Kre=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],hc=function(t,e,r){var n=new Error(e||Kre[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,hc),!r)throw n;return n},Wre=function(t,e,r,n){var a=t.length,s=0;if(!a||e.f&&!e.l)return r||new Ri(0);var i=!r,o=i||e.i!=2,c=e.i;i&&(r=new Ri(a*3));var u=function(ue){var se=r.length;if(ue>se){var Pe=new Ri(Math.max(se*2,ue));Pe.set(r),r=Pe}},f=e.f||0,m=e.p||0,p=e.b||0,g=e.l,b=e.d,y=e.m,T=e.n,k=a*8;do{if(!g){f=Ac(t,m,1);var D=Ac(t,m+1,3);if(m+=3,D)if(D==1)g=Gre,b=qre,y=9,T=5;else if(D==2){var U=Ac(t,m,31)+257,E=Ac(t,m+10,15)+4,_=U+Ac(t,m+5,31)+1;m+=14;for(var B=new Ri(_),Q=new Ri(19),R=0;R<E;++R)Q[iE[R]]=Ac(t,m+R*3,7);m+=E*3;for(var F=yb(Q),V=(1<<F)-1,X=gA(Q,F,1),R=0;R<_;){var oe=X[Ac(t,m,V)];m+=oe&15;var L=oe>>4;if(L<16)B[R++]=L;else{var te=0,ae=0;for(L==16?(ae=3+Ac(t,m,3),m+=2,te=B[R-1]):L==17?(ae=3+Ac(t,m,7),m+=3):L==18&&(ae=11+Ac(t,m,127),m+=7);ae--;)B[R++]=te}}var q=B.subarray(0,U),J=B.subarray(U);y=yb(q),T=yb(J),g=gA(q,y,1),b=gA(J,T,1)}else hc(1);else{var L=p5(m)+4,j=t[L-4]|t[L-3]<<8,H=L+j;if(H>a){c&&hc(0);break}o&&u(p+j),r.set(t.subarray(L,H),p),e.b=p+=j,e.p=m=H*8,e.f=f;continue}if(m>k){c&&hc(0);break}}o&&u(p+131072);for(var W=(1<<y)-1,de=(1<<T)-1,P=m;;P=m){var te=g[bb(t,m)&W],K=te>>4;if(m+=te&15,m>k){c&&hc(0);break}if(te||hc(2),K<256)r[p++]=K;else if(K==256){P=m,g=null;break}else{var Y=K-254;if(K>264){var R=K-257,ee=fw[R];Y=Ac(t,m,(1<<ee)-1)+BL[R],m+=ee}var Ae=b[bb(t,m)&de],Se=Ae>>4;Ae||hc(3),m+=Ae&15;var J=Hre[Se];if(Se>3){var ee=hw[Se];J+=bb(t,m)&(1<<ee)-1,m+=ee}if(m>k){c&&hc(0);break}o&&u(p+131072);var ge=p+Y;if(p<J){var pe=s-J,ye=Math.min(J,ge);for(pe+p<0&&hc(3);p<ye;++p)r[p]=n[pe+p]}for(;p<ge;++p)r[p]=r[p-J]}}e.l=g,e.p=P,e.b=p,e.f=f,g&&(f=1,e.m=y,e.d=b,e.n=T)}while(!f);return p!=r.length&&i?kL(r,0,p):r.subarray(0,p)},tu=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},op=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},Cb=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var a=r.length,s=r.slice();if(!a)return{t:FL,l:0};if(a==1){var i=new Ri(r[0].s+1);return i[r[0].s]=1,{t:i,l:1}}r.sort(function(H,U){return H.f-U.f}),r.push({s:-1,f:25001});var o=r[0],c=r[1],u=0,f=1,m=2;for(r[0]={s:-1,f:o.f+c.f,l:o,r:c};f!=a-1;)o=r[r[u].f<r[m].f?u++:m++],c=r[u!=f&&r[u].f<r[m].f?u++:m++],r[f++]={s:-1,f:o.f+c.f,l:o,r:c};for(var p=s[0].s,n=1;n<a;++n)s[n].s>p&&(p=s[n].s);var g=new Jo(p+1),b=cE(r[f-1],g,0);if(b>e){var n=0,y=0,T=b-e,k=1<<T;for(s.sort(function(U,E){return g[E.s]-g[U.s]||U.f-E.f});n<a;++n){var D=s[n].s;if(g[D]>e)y+=k-(1<<b-g[D]),g[D]=e;else break}for(y>>=T;y>0;){var L=s[n].s;g[L]<e?y-=1<<e-g[L]++-1:++n}for(;n>=0&&y;--n){var j=s[n].s;g[j]==e&&(--g[j],++y)}b=e}return{t:new Ri(g),l:b}},cE=function(t,e,r){return t.s==-1?Math.max(cE(t.l,e,r+1),cE(t.r,e,r+1)):e[t.s]=r},lI=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new Jo(++e),n=0,a=t[0],s=1,i=function(c){r[n++]=c},o=1;o<=e;++o)if(t[o]==a&&o!=e)++s;else{if(!a&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(a),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(a);s=1,a=t[o]}return{c:r.subarray(0,n),n:e}},lp=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},IL=function(t,e,r){var n=r.length,a=p5(e+2);t[a]=n&255,t[a+1]=n>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var s=0;s<n;++s)t[a+s+4]=r[s];return(a+4+n)*8},cI=function(t,e,r,n,a,s,i,o,c,u,f){tu(e,f++,r),++a[256];for(var m=Cb(a,15),p=m.t,g=m.l,b=Cb(s,15),y=b.t,T=b.l,k=lI(p),D=k.c,L=k.n,j=lI(y),H=j.c,U=j.n,E=new Jo(19),_=0;_<D.length;++_)++E[D[_]&31];for(var _=0;_<H.length;++_)++E[H[_]&31];for(var B=Cb(E,7),Q=B.t,R=B.l,F=19;F>4&&!Q[iE[F-1]];--F);var V=u+5<<3,X=lp(a,zd)+lp(s,pg)+i,oe=lp(a,p)+lp(s,y)+i+14+3*F+lp(E,Q)+2*E[16]+3*E[17]+7*E[18];if(c>=0&&V<=X&&V<=oe)return IL(e,f,t.subarray(c,c+u));var te,ae,q,J;if(tu(e,f,1+(oe<X)),f+=2,oe<X){te=gA(p,g,0),ae=p,q=gA(y,T,0),J=y;var W=gA(Q,R,0);tu(e,f,L-257),tu(e,f+5,U-1),tu(e,f+10,F-4),f+=14;for(var _=0;_<F;++_)tu(e,f+3*_,Q[iE[_]]);f+=3*F;for(var de=[D,H],P=0;P<2;++P)for(var K=de[P],_=0;_<K.length;++_){var Y=K[_]&31;tu(e,f,W[Y]),f+=Q[Y],Y>15&&(tu(e,f,K[_]>>5&127),f+=K[_]>>12)}}else te=Vre,ae=zd,q=zre,J=pg;for(var _=0;_<o;++_){var ee=n[_];if(ee>255){var Y=ee>>18&31;op(e,f,te[Y+257]),f+=ae[Y+257],Y>7&&(tu(e,f,ee>>23&31),f+=fw[Y]);var Ae=ee&31;op(e,f,q[Ae]),f+=J[Ae],Ae>3&&(op(e,f,ee>>5&8191),f+=hw[Ae])}else op(e,f,te[ee]),f+=ae[ee]}return op(e,f,te[256]),f+ae[256]},$re=new m5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),FL=new Ri(0),Jre=function(t,e,r,n,a,s){var i=s.z||t.length,o=new Ri(n+i+5*(1+Math.ceil(i/7e3))+a),c=o.subarray(n,o.length-a),u=s.l,f=(s.r||0)&7;if(e){f&&(c[0]=s.r>>3);for(var m=$re[e-1],p=m>>13,g=m&8191,b=(1<<r)-1,y=s.p||new Jo(32768),T=s.h||new Jo(b+1),k=Math.ceil(r/3),D=2*k,L=function(at){return(t[at]^t[at+1]<<k^t[at+2]<<D)&b},j=new m5(25e3),H=new Jo(288),U=new Jo(32),E=0,_=0,B=s.i||0,Q=0,R=s.w||0,F=0;B+2<i;++B){var V=L(B),X=B&32767,oe=T[V];if(y[X]=oe,T[V]=X,R<=B){var te=i-B;if((E>7e3||Q>24576)&&(te>423||!u)){f=cI(t,c,0,j,H,U,_,Q,F,B-F,f),Q=E=_=0,F=B;for(var ae=0;ae<286;++ae)H[ae]=0;for(var ae=0;ae<30;++ae)U[ae]=0}var q=2,J=0,W=g,de=X-oe&32767;if(te>2&&V==L(B-de))for(var P=Math.min(p,te)-1,K=Math.min(32767,B),Y=Math.min(258,te);de<=K&&--W&&X!=oe;){if(t[B+q]==t[B+q-de]){for(var ee=0;ee<Y&&t[B+ee]==t[B+ee-de];++ee);if(ee>q){if(q=ee,J=de,ee>P)break;for(var Ae=Math.min(de,ee-2),Se=0,ae=0;ae<Ae;++ae){var ge=B-de+ae&32767,pe=y[ge],ye=ge-pe&32767;ye>Se&&(Se=ye,oe=ge)}}}X=oe,oe=y[X],de+=X-oe&32767}if(J){j[Q++]=268435456|oE[q]<<18|oI[J];var ue=oE[q]&31,se=oI[J]&31;_+=fw[ue]+hw[se],++H[257+ue],++U[se],R=B+q,++E}else j[Q++]=t[B],++H[t[B]]}}for(B=Math.max(B,R);B<i;++B)j[Q++]=t[B],++H[t[B]];f=cI(t,c,u,j,H,U,_,Q,F,B-F,f),u||(s.r=f&7|c[f/8|0]<<3,f-=7,s.h=T,s.p=y,s.i=B,s.w=R)}else{for(var B=s.w||0;B<i+u;B+=65535){var Pe=B+65535;Pe>=i&&(c[f/8|0]=u,Pe=i),f=IL(c,f+1,t.subarray(B,Pe))}s.i=i}return kL(o,0,n+p5(f)+a)},DL=function(){var t=1,e=0;return{p:function(r){for(var n=t,a=e,s=r.length|0,i=0;i!=s;){for(var o=Math.min(i+2655,s);i<o;++i)a+=n+=r[i];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}t=n,e=a},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},Yre=function(t,e,r,n,a){if(!a&&(a={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),i=new Ri(s.length+t.length);i.set(s),i.set(t,s.length),t=i,a.w=s.length}return Jre(t,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,a)},RL=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},Xre=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var a=DL();a.p(e.dictionary),RL(t,2,a.d())}},Zre=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&hc(6,"invalid zlib data"),(t[1]>>5&1)==1&&hc(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function AE(t,e){e||(e={});var r=DL();r.p(t);var n=Yre(t,e,e.dictionary?6:2,4);return Xre(n,e),RL(n,n.length-4,r.d()),n}function ene(t,e){return Wre(t.subarray(Zre(t),-4),{i:2},e,e)}var tne=typeof TextDecoder<"u"&&new TextDecoder,rne=0;try{tne.decode(FL,{stream:!0}),rne=1}catch{}var xr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Eb(){xr.console&&typeof xr.console.log=="function"&&xr.console.log.apply(xr.console,arguments)}var Xn={log:Eb,warn:function(t){xr.console&&(typeof xr.console.warn=="function"?xr.console.warn.apply(xr.console,arguments):Eb.call(null,arguments))},error:function(t){xr.console&&(typeof xr.console.error=="function"?xr.console.error.apply(xr.console,arguments):Eb(t))}};function _b(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){If(n.response,e,r)},n.onerror=function(){Xn.error("could not download file")},n.send()}function AI(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function w1(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Hp,uE,If=xr.saveAs||((typeof window>"u"?"undefined":On(window))!=="object"||window!==xr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=xr.URL||xr.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?AI(a.href)?_b(t,e,r):w1(a,a.target="_blank"):w1(a)):(a.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){w1(a)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(AI(t))_b(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){w1(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:On(s)!=="object"&&(Xn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return _b(t,e,r);var a=t.type==="application/octet-stream",s=/constructor/i.test(xr.HTMLElement)||xr.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||a&&s)&&(typeof FileReader>"u"?"undefined":On(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var f=o.result;f=i?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=f:location=f,n=null},o.readAsDataURL(t)}else{var c=xr.URL||xr.webkitURL,u=c.createObjectURL(t);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function LL(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,i=a.exec(t);i&&(e=s(i),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+o+c+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Sb(t,e){var r=t[0],n=t[1],a=t[2],s=t[3];r=yi(r,n,a,s,e[0],7,-680876936),s=yi(s,r,n,a,e[1],12,-389564586),a=yi(a,s,r,n,e[2],17,606105819),n=yi(n,a,s,r,e[3],22,-1044525330),r=yi(r,n,a,s,e[4],7,-176418897),s=yi(s,r,n,a,e[5],12,1200080426),a=yi(a,s,r,n,e[6],17,-1473231341),n=yi(n,a,s,r,e[7],22,-45705983),r=yi(r,n,a,s,e[8],7,1770035416),s=yi(s,r,n,a,e[9],12,-1958414417),a=yi(a,s,r,n,e[10],17,-42063),n=yi(n,a,s,r,e[11],22,-1990404162),r=yi(r,n,a,s,e[12],7,1804603682),s=yi(s,r,n,a,e[13],12,-40341101),a=yi(a,s,r,n,e[14],17,-1502002290),r=bi(r,n=yi(n,a,s,r,e[15],22,1236535329),a,s,e[1],5,-165796510),s=bi(s,r,n,a,e[6],9,-1069501632),a=bi(a,s,r,n,e[11],14,643717713),n=bi(n,a,s,r,e[0],20,-373897302),r=bi(r,n,a,s,e[5],5,-701558691),s=bi(s,r,n,a,e[10],9,38016083),a=bi(a,s,r,n,e[15],14,-660478335),n=bi(n,a,s,r,e[4],20,-405537848),r=bi(r,n,a,s,e[9],5,568446438),s=bi(s,r,n,a,e[14],9,-1019803690),a=bi(a,s,r,n,e[3],14,-187363961),n=bi(n,a,s,r,e[8],20,1163531501),r=bi(r,n,a,s,e[13],5,-1444681467),s=bi(s,r,n,a,e[2],9,-51403784),a=bi(a,s,r,n,e[7],14,1735328473),r=Ci(r,n=bi(n,a,s,r,e[12],20,-1926607734),a,s,e[5],4,-378558),s=Ci(s,r,n,a,e[8],11,-2022574463),a=Ci(a,s,r,n,e[11],16,1839030562),n=Ci(n,a,s,r,e[14],23,-35309556),r=Ci(r,n,a,s,e[1],4,-1530992060),s=Ci(s,r,n,a,e[4],11,1272893353),a=Ci(a,s,r,n,e[7],16,-155497632),n=Ci(n,a,s,r,e[10],23,-1094730640),r=Ci(r,n,a,s,e[13],4,681279174),s=Ci(s,r,n,a,e[0],11,-358537222),a=Ci(a,s,r,n,e[3],16,-722521979),n=Ci(n,a,s,r,e[6],23,76029189),r=Ci(r,n,a,s,e[9],4,-640364487),s=Ci(s,r,n,a,e[12],11,-421815835),a=Ci(a,s,r,n,e[15],16,530742520),r=Ei(r,n=Ci(n,a,s,r,e[2],23,-995338651),a,s,e[0],6,-198630844),s=Ei(s,r,n,a,e[7],10,1126891415),a=Ei(a,s,r,n,e[14],15,-1416354905),n=Ei(n,a,s,r,e[5],21,-57434055),r=Ei(r,n,a,s,e[12],6,1700485571),s=Ei(s,r,n,a,e[3],10,-1894986606),a=Ei(a,s,r,n,e[10],15,-1051523),n=Ei(n,a,s,r,e[1],21,-2054922799),r=Ei(r,n,a,s,e[8],6,1873313359),s=Ei(s,r,n,a,e[15],10,-30611744),a=Ei(a,s,r,n,e[6],15,-1560198380),n=Ei(n,a,s,r,e[13],21,1309151649),r=Ei(r,n,a,s,e[4],6,-145523070),s=Ei(s,r,n,a,e[11],10,-1120210379),a=Ei(a,s,r,n,e[2],15,718787259),n=Ei(n,a,s,r,e[9],21,-343485551),t[0]=bd(r,t[0]),t[1]=bd(n,t[1]),t[2]=bd(a,t[2]),t[3]=bd(s,t[3])}function mw(t,e,r,n,a,s){return e=bd(bd(e,t),bd(n,s)),bd(e<<a|e>>>32-a,r)}function yi(t,e,r,n,a,s,i){return mw(e&r|~e&n,t,e,a,s,i)}function bi(t,e,r,n,a,s,i){return mw(e&n|r&~n,t,e,a,s,i)}function Ci(t,e,r,n,a,s,i){return mw(e^r^n,t,e,a,s,i)}function Ei(t,e,r,n,a,s,i){return mw(r^(e|~n),t,e,a,s,i)}function UL(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)Sb(n,nne(t.substring(e-64,e)));t=t.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(Sb(n,a),e=0;e<16;e++)a[e]=0;return a[14]=8*r,Sb(n,a),n}function nne(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}Hp=xr.atob.bind(xr),uE=xr.btoa.bind(xr);var uI="0123456789abcdef".split("");function ane(t){for(var e="",r=0;r<4;r++)e+=uI[t>>8*r+4&15]+uI[t>>8*r&15];return e}function sne(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function dE(t){return UL(t).map(sne).join("")}var ine=function(t){for(var e=0;e<t.length;e++)t[e]=ane(t[e]);return t.join("")}(UL("hello"))!="5d41402abc4b2a76b9719d911017c592";function bd(t,e){if(ine){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function fE(t,e){var r,n,a,s;if(t!==r){for(var i=(a=t,s=1+(256/t.length>>0),new Array(s+1).join(a)),o=[],c=0;c<256;c++)o[c]=c;var u=0;for(c=0;c<256;c++){var f=o[c];u=(u+f+i.charCodeAt(c))%256,o[c]=o[u],o[u]=f}r=t,n=o}else o=n;var m=e.length,p=0,g=0,b="";for(c=0;c<m;c++)g=(g+(f=o[p=(p+1)%256]))%256,o[p]=o[g],o[g]=f,i=o[(o[p]+o[g])%256],b+=String.fromCharCode(e.charCodeAt(c)^i);return b}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var dI={print:4,modify:8,copy:16,"annot-forms":32};function m0(t,e,r,n){this.v=1,this.r=2;var a=192;t.forEach(function(o){if(dI.perm!==void 0)throw new Error("Invalid permission: "+o);a+=dI[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),i=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^a)),this.encryptionKey=dE(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=fE(this.encryptionKey,this.padding)}function p0(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var a=t.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?e+="#"+("0"+a.toString(16)).slice(-2):e+=t[n]}return e}function fI(t){if(On(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var s=Math.random().toString(35);return e[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in e[r]){var i=e[r][s];try{i[0].apply(t,n)}catch(o){xr.console&&Xn.error("jsPDF PubSub Error",o.message,o)}i[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function e2(t){if(!(this instanceof e2))return new e2(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function ML(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Df(t,e,r,n,a){if(!(this instanceof Df))return new Df(t,e,r,n,a);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,ML.call(this,n,a)}function b0(t,e,r,n,a){if(!(this instanceof b0))return new b0(t,e,r,n,a);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,ML.call(this,n,a)}function ir(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],i=[],o=1,c=16,u="S",f=null;On(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,a=t.format||a,s=t.compress||t.compressPdf||s,(f=t.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(c=t.floatPrecision),u=t.defaultPathOperation||"S"),i=t.filters||(s===!0?["FlateEncode"]:i),n=n||"mm",r=(""+(r||"P")).toLowerCase();var m=t.putOnlyUsedFonts||!1,p={},g={internal:{},__private__:{}};g.__private__.PubSub=fI;var b="1.3",y=g.__private__.getPdfVersion=function(){return b};g.__private__.setPdfVersion=function(O){b=O};var T={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return T};var k=g.__private__.getPageFormat=function(O){return T[O]};a=a||"a4";var D={COMPAT:"compat",ADVANCED:"advanced"},L=D.COMPAT;function j(){this.saveGraphicsState(),Ee(new Ht(_t,0,0,-_t,0,Rs()*_t).toString()+" cm"),this.setFontSize(this.getFontSize()/_t),u="n",L=D.ADVANCED}function H(){this.restoreGraphicsState(),u="S",L=D.COMPAT}var U=g.__private__.combineFontStyleAndFontWeight=function(O,ce){if(O=="bold"&&ce=="normal"||O=="bold"&&ce==400||O=="normal"&&ce=="italic"||O=="bold"&&ce=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ce&&(O=ce==400||ce==="normal"?O==="italic"?"italic":"normal":ce!=700&&ce!=="bold"||O!=="normal"?(ce==700?"bold":ce)+""+O:"bold"),O};g.advancedAPI=function(O){var ce=L===D.COMPAT;return ce&&j.call(this),typeof O!="function"||(O(this),ce&&H.call(this)),this},g.compatAPI=function(O){var ce=L===D.ADVANCED;return ce&&H.call(this),typeof O!="function"||(O(this),ce&&j.call(this)),this},g.isAdvancedAPI=function(){return L===D.ADVANCED};var E,_=function(O){if(L!==D.ADVANCED)throw new Error(O+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},B=g.roundToPrecision=g.__private__.roundToPrecision=function(O,ce){var Ie=e||ce;if(isNaN(O)||isNaN(Ie))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return O.toFixed(Ie).replace(/0+$/,"")};E=g.hpf=g.__private__.hpf=typeof c=="number"?function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.hpf");return B(O,c)}:c==="smart"?function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.hpf");return B(O,O>-1&&O<1?16:5)}:function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.hpf");return B(O,16)};var Q=g.f2=g.__private__.f2=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.f2");return B(O,2)},R=g.__private__.f3=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.f3");return B(O,3)},F=g.scale=g.__private__.scale=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.scale");return L===D.COMPAT?O*_t:L===D.ADVANCED?O:void 0},V=function(O){return L===D.COMPAT?Rs()-O:L===D.ADVANCED?O:void 0},X=function(O){return F(V(O))};g.__private__.setPrecision=g.setPrecision=function(O){typeof parseInt(O,10)=="number"&&(e=parseInt(O,10))};var oe,te="00000000000000000000000000000000",ae=g.__private__.getFileId=function(){return te},q=g.__private__.setFileId=function(O){return te=O!==void 0&&/^[a-fA-F0-9]{32}$/.test(O)?O.toUpperCase():te.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(Rn=new m0(f.userPermissions,f.userPassword,f.ownerPassword,te)),te};g.setFileId=function(O){return q(O),this},g.getFileId=function(){return ae()};var J=g.__private__.convertDateToPDFDate=function(O){var ce=O.getTimezoneOffset(),Ie=ce<0?"+":"-",Re=Math.floor(Math.abs(ce/60)),Ve=Math.abs(ce%60),ot=[Ie,Y(Re),"'",Y(Ve),"'"].join("");return["D:",O.getFullYear(),Y(O.getMonth()+1),Y(O.getDate()),Y(O.getHours()),Y(O.getMinutes()),Y(O.getSeconds()),ot].join("")},W=g.__private__.convertPDFDateToDate=function(O){var ce=parseInt(O.substr(2,4),10),Ie=parseInt(O.substr(6,2),10)-1,Re=parseInt(O.substr(8,2),10),Ve=parseInt(O.substr(10,2),10),ot=parseInt(O.substr(12,2),10),bt=parseInt(O.substr(14,2),10);return new Date(ce,Ie,Re,Ve,ot,bt,0)},de=g.__private__.setCreationDate=function(O){var ce;if(O===void 0&&(O=new Date),O instanceof Date)ce=J(O);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(O))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ce=O}return oe=ce},P=g.__private__.getCreationDate=function(O){var ce=oe;return O==="jsDate"&&(ce=W(oe)),ce};g.setCreationDate=function(O){return de(O),this},g.getCreationDate=function(O){return P(O)};var K,Y=g.__private__.padd2=function(O){return("0"+parseInt(O)).slice(-2)},ee=g.__private__.padd2Hex=function(O){return("00"+(O=O.toString())).substr(O.length)},Ae=0,Se=[],ge=[],pe=0,ye=[],ue=[],se=!1,Pe=ge,at=function(){Ae=0,pe=0,ge=[],Se=[],ye=[],Ce=ea(),_e=ea()};g.__private__.setCustomOutputDestination=function(O){se=!0,Pe=O};var De=function(O){se||(Pe=O)};g.__private__.resetCustomOutputDestination=function(){se=!1,Pe=ge};var Ee=g.__private__.out=function(O){return O=O.toString(),pe+=O.length+1,Pe.push(O),Pe},Le=g.__private__.write=function(O){return Ee(arguments.length===1?O.toString():Array.prototype.join.call(arguments," "))},it=g.__private__.getArrayBuffer=function(O){for(var ce=O.length,Ie=new ArrayBuffer(ce),Re=new Uint8Array(Ie);ce--;)Re[ce]=O.charCodeAt(ce);return Ie},et=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return et};var ht=t.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(O){return ht=L===D.ADVANCED?O/_t:O,this};var Et,At=g.__private__.getFontSize=g.getFontSize=function(){return L===D.COMPAT?ht:ht*_t},jt=t.R2L||!1;g.__private__.setR2L=g.setR2L=function(O){return jt=O,this},g.__private__.getR2L=g.getR2L=function(){return jt};var Kt,Yt=g.__private__.setZoomMode=function(O){var ce=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(O))Et=O;else if(isNaN(O)){if(ce.indexOf(O)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+O+'" is not recognized.');Et=O}else Et=parseInt(O,10)};g.__private__.getZoomMode=function(){return Et};var Qt,Gt=g.__private__.setPageMode=function(O){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(O)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+O+'" is not recognized.');Kt=O};g.__private__.getPageMode=function(){return Kt};var Wt=g.__private__.setLayoutMode=function(O){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(O)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+O+'" is not recognized.');Qt=O};g.__private__.getLayoutMode=function(){return Qt},g.__private__.setDisplayMode=g.setDisplayMode=function(O,ce,Ie){return Yt(O),Wt(ce),Gt(Ie),this};var kt={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(O){if(Object.keys(kt).indexOf(O)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return kt[O]},g.__private__.getDocumentProperties=function(){return kt},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(O){for(var ce in kt)kt.hasOwnProperty(ce)&&O[ce]&&(kt[ce]=O[ce]);return this},g.__private__.setDocumentProperty=function(O,ce){if(Object.keys(kt).indexOf(O)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return kt[O]=ce};var It,_t,Yr,tr,$n,Ir={},hn={},rs=[],Mr={},li={},Bn={},ga={},Pa=null,mn=0,ar=[],zr=new fI(g),Ns=t.hotfixes||[],Zn={},ja={},zs=[],Ht=function O(ce,Ie,Re,Ve,ot,bt){if(!(this instanceof O))return new O(ce,Ie,Re,Ve,ot,bt);isNaN(ce)&&(ce=1),isNaN(Ie)&&(Ie=0),isNaN(Re)&&(Re=0),isNaN(Ve)&&(Ve=1),isNaN(ot)&&(ot=0),isNaN(bt)&&(bt=0),this._matrix=[ce,Ie,Re,Ve,ot,bt]};Object.defineProperty(Ht.prototype,"sx",{get:function(){return this._matrix[0]},set:function(O){this._matrix[0]=O}}),Object.defineProperty(Ht.prototype,"shy",{get:function(){return this._matrix[1]},set:function(O){this._matrix[1]=O}}),Object.defineProperty(Ht.prototype,"shx",{get:function(){return this._matrix[2]},set:function(O){this._matrix[2]=O}}),Object.defineProperty(Ht.prototype,"sy",{get:function(){return this._matrix[3]},set:function(O){this._matrix[3]=O}}),Object.defineProperty(Ht.prototype,"tx",{get:function(){return this._matrix[4]},set:function(O){this._matrix[4]=O}}),Object.defineProperty(Ht.prototype,"ty",{get:function(){return this._matrix[5]},set:function(O){this._matrix[5]=O}}),Object.defineProperty(Ht.prototype,"a",{get:function(){return this._matrix[0]},set:function(O){this._matrix[0]=O}}),Object.defineProperty(Ht.prototype,"b",{get:function(){return this._matrix[1]},set:function(O){this._matrix[1]=O}}),Object.defineProperty(Ht.prototype,"c",{get:function(){return this._matrix[2]},set:function(O){this._matrix[2]=O}}),Object.defineProperty(Ht.prototype,"d",{get:function(){return this._matrix[3]},set:function(O){this._matrix[3]=O}}),Object.defineProperty(Ht.prototype,"e",{get:function(){return this._matrix[4]},set:function(O){this._matrix[4]=O}}),Object.defineProperty(Ht.prototype,"f",{get:function(){return this._matrix[5]},set:function(O){this._matrix[5]=O}}),Object.defineProperty(Ht.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ht.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ht.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ht.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ht.prototype.join=function(O){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(O)},Ht.prototype.multiply=function(O){var ce=O.sx*this.sx+O.shy*this.shx,Ie=O.sx*this.shy+O.shy*this.sy,Re=O.shx*this.sx+O.sy*this.shx,Ve=O.shx*this.shy+O.sy*this.sy,ot=O.tx*this.sx+O.ty*this.shx+this.tx,bt=O.tx*this.shy+O.ty*this.sy+this.ty;return new Ht(ce,Ie,Re,Ve,ot,bt)},Ht.prototype.decompose=function(){var O=this.sx,ce=this.shy,Ie=this.shx,Re=this.sy,Ve=this.tx,ot=this.ty,bt=Math.sqrt(O*O+ce*ce),Ut=(O/=bt)*Ie+(ce/=bt)*Re;Ie-=O*Ut,Re-=ce*Ut;var S=Math.sqrt(Ie*Ie+Re*Re);return Ut/=S,O*(Re/=S)<ce*(Ie/=S)&&(O=-O,ce=-ce,Ut=-Ut,bt=-bt),{scale:new Ht(bt,0,0,S,0,0),translate:new Ht(1,0,0,1,Ve,ot),rotate:new Ht(O,ce,-ce,O,0,0),skew:new Ht(1,0,Ut,1,0,0)}},Ht.prototype.toString=function(O){return this.join(" ")},Ht.prototype.inversed=function(){var O=this.sx,ce=this.shy,Ie=this.shx,Re=this.sy,Ve=this.tx,ot=this.ty,bt=1/(O*Re-ce*Ie),Ut=Re*bt,S=-ce*bt,z=-Ie*bt,re=O*bt;return new Ht(Ut,S,z,re,-Ut*Ve-z*ot,-S*Ve-re*ot)},Ht.prototype.applyToPoint=function(O){var ce=O.x*this.sx+O.y*this.shx+this.tx,Ie=O.x*this.shy+O.y*this.sy+this.ty;return new zl(ce,Ie)},Ht.prototype.applyToRectangle=function(O){var ce=this.applyToPoint(O),Ie=this.applyToPoint(new zl(O.x+O.w,O.y+O.h));return new kc(ce.x,ce.y,Ie.x-ce.x,Ie.y-ce.y)},Ht.prototype.clone=function(){var O=this.sx,ce=this.shy,Ie=this.shx,Re=this.sy,Ve=this.tx,ot=this.ty;return new Ht(O,ce,Ie,Re,Ve,ot)},g.Matrix=Ht;var pn=g.matrixMult=function(O,ce){return ce.multiply(O)},an=new Ht(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=an;var Dn=function(O,ce){if(!li[O]){var Ie=(ce instanceof Df?"Sh":"P")+(Object.keys(Mr).length+1).toString(10);ce.id=Ie,li[O]=Ie,Mr[Ie]=ce,zr.publish("addPattern",ce)}};g.ShadingPattern=Df,g.TilingPattern=b0,g.addShadingPattern=function(O,ce){return _("addShadingPattern()"),Dn(O,ce),this},g.beginTilingPattern=function(O){_("beginTilingPattern()"),cl(O.boundingBox[0],O.boundingBox[1],O.boundingBox[2]-O.boundingBox[0],O.boundingBox[3]-O.boundingBox[1],O.matrix)},g.endTilingPattern=function(O,ce){_("endTilingPattern()"),ce.stream=ue[K].join(`
`),Dn(O,ce),zr.publish("endTilingPattern",ce),zs.pop().restore()};var Jn=g.__private__.newObject=function(){var O=ea();return fe(O,!0),O},ea=g.__private__.newObjectDeferred=function(){return Ae++,Se[Ae]=function(){return pe},Ae},fe=function(O,ce){return ce=typeof ce=="boolean"&&ce,Se[O]=pe,ce&&Ee(O+" 0 obj"),O},Ne=g.__private__.newAdditionalObject=function(){var O={objId:ea(),content:""};return ye.push(O),O},Ce=ea(),_e=ea(),Be=g.__private__.decodeColorString=function(O){var ce=O.split(" ");if(ce.length!==2||ce[1]!=="g"&&ce[1]!=="G")ce.length===5&&(ce[4]==="k"||ce[4]==="K")&&(ce=[(1-ce[0])*(1-ce[3]),(1-ce[1])*(1-ce[3]),(1-ce[2])*(1-ce[3]),"r"]);else{var Ie=parseFloat(ce[0]);ce=[Ie,Ie,Ie,"r"]}for(var Re="#",Ve=0;Ve<3;Ve++)Re+=("0"+Math.floor(255*parseFloat(ce[Ve])).toString(16)).slice(-2);return Re},ke=g.__private__.encodeColorString=function(O){var ce;typeof O=="string"&&(O={ch1:O});var Ie=O.ch1,Re=O.ch2,Ve=O.ch3,ot=O.ch4,bt=O.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ie=="string"&&Ie.charAt(0)!=="#"){var Ut=new LL(Ie);if(Ut.ok)Ie=Ut.toHex();else if(!/^\d*\.?\d*$/.test(Ie))throw new Error('Invalid color "'+Ie+'" passed to jsPDF.encodeColorString.')}if(typeof Ie=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ie)&&(Ie="#"+Ie[1]+Ie[1]+Ie[2]+Ie[2]+Ie[3]+Ie[3]),typeof Ie=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ie)){var S=parseInt(Ie.substr(1),16);Ie=S>>16&255,Re=S>>8&255,Ve=255&S}if(Re===void 0||ot===void 0&&Ie===Re&&Re===Ve)if(typeof Ie=="string")ce=Ie+" "+bt[0];else switch(O.precision){case 2:ce=Q(Ie/255)+" "+bt[0];break;case 3:default:ce=R(Ie/255)+" "+bt[0]}else if(ot===void 0||On(ot)==="object"){if(ot&&!isNaN(ot.a)&&ot.a===0)return ce=["1.","1.","1.",bt[1]].join(" ");if(typeof Ie=="string")ce=[Ie,Re,Ve,bt[1]].join(" ");else switch(O.precision){case 2:ce=[Q(Ie/255),Q(Re/255),Q(Ve/255),bt[1]].join(" ");break;default:case 3:ce=[R(Ie/255),R(Re/255),R(Ve/255),bt[1]].join(" ")}}else if(typeof Ie=="string")ce=[Ie,Re,Ve,ot,bt[2]].join(" ");else switch(O.precision){case 2:ce=[Q(Ie),Q(Re),Q(Ve),Q(ot),bt[2]].join(" ");break;case 3:default:ce=[R(Ie),R(Re),R(Ve),R(ot),bt[2]].join(" ")}return ce},qe=g.__private__.getFilters=function(){return i},rt=g.__private__.putStream=function(O){var ce=(O=O||{}).data||"",Ie=O.filters||qe(),Re=O.alreadyAppliedFilters||[],Ve=O.addLength1||!1,ot=ce.length,bt=O.objectId,Ut=function(fr){return fr};if(f!==null&&bt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(Ut=Rn.encryptor(bt,0));var S={};Ie===!0&&(Ie=["FlateEncode"]);var z=O.additionalKeyValues||[],re=(S=ir.API.processDataByFilters!==void 0?ir.API.processDataByFilters(ce,Ie):{data:ce,reverseChain:[]}).reverseChain+(Array.isArray(Re)?Re.join(" "):Re.toString());if(S.data.length!==0&&(z.push({key:"Length",value:S.data.length}),Ve===!0&&z.push({key:"Length1",value:ot})),re.length!=0)if(re.split("/").length-1==1)z.push({key:"Filter",value:re});else{z.push({key:"Filter",value:"["+re+"]"});for(var ve=0;ve<z.length;ve+=1)if(z[ve].key==="DecodeParms"){for(var Qe=[],Ye=0;Ye<S.reverseChain.split("/").length-1;Ye+=1)Qe.push("null");Qe.push(z[ve].value),z[ve].value="["+Qe.join(" ")+"]"}}Ee("<<");for(var Ct=0;Ct<z.length;Ct++)Ee("/"+z[Ct].key+" "+z[Ct].value);Ee(">>"),S.data.length!==0&&(Ee("stream"),Ee(Ut(S.data)),Ee("endstream"))},He=g.__private__.putPage=function(O){var ce=O.number,Ie=O.data,Re=O.objId,Ve=O.contentsObjId;fe(Re,!0),Ee("<</Type /Page"),Ee("/Parent "+O.rootDictionaryObjId+" 0 R"),Ee("/Resources "+O.resourceDictionaryObjId+" 0 R"),Ee("/MediaBox ["+parseFloat(E(O.mediaBox.bottomLeftX))+" "+parseFloat(E(O.mediaBox.bottomLeftY))+" "+E(O.mediaBox.topRightX)+" "+E(O.mediaBox.topRightY)+"]"),O.cropBox!==null&&Ee("/CropBox ["+E(O.cropBox.bottomLeftX)+" "+E(O.cropBox.bottomLeftY)+" "+E(O.cropBox.topRightX)+" "+E(O.cropBox.topRightY)+"]"),O.bleedBox!==null&&Ee("/BleedBox ["+E(O.bleedBox.bottomLeftX)+" "+E(O.bleedBox.bottomLeftY)+" "+E(O.bleedBox.topRightX)+" "+E(O.bleedBox.topRightY)+"]"),O.trimBox!==null&&Ee("/TrimBox ["+E(O.trimBox.bottomLeftX)+" "+E(O.trimBox.bottomLeftY)+" "+E(O.trimBox.topRightX)+" "+E(O.trimBox.topRightY)+"]"),O.artBox!==null&&Ee("/ArtBox ["+E(O.artBox.bottomLeftX)+" "+E(O.artBox.bottomLeftY)+" "+E(O.artBox.topRightX)+" "+E(O.artBox.topRightY)+"]"),typeof O.userUnit=="number"&&O.userUnit!==1&&Ee("/UserUnit "+O.userUnit),zr.publish("putPage",{objId:Re,pageContext:ar[ce],pageNumber:ce,page:Ie}),Ee("/Contents "+Ve+" 0 R"),Ee(">>"),Ee("endobj");var ot=Ie.join(`
`);return L===D.ADVANCED&&(ot+=`
Q`),fe(Ve,!0),rt({data:ot,filters:qe(),objectId:Ve}),Ee("endobj"),Re},$e=g.__private__.putPages=function(){var O,ce,Ie=[];for(O=1;O<=mn;O++)ar[O].objId=ea(),ar[O].contentsObjId=ea();for(O=1;O<=mn;O++)Ie.push(He({number:O,data:ue[O],objId:ar[O].objId,contentsObjId:ar[O].contentsObjId,mediaBox:ar[O].mediaBox,cropBox:ar[O].cropBox,bleedBox:ar[O].bleedBox,trimBox:ar[O].trimBox,artBox:ar[O].artBox,userUnit:ar[O].userUnit,rootDictionaryObjId:Ce,resourceDictionaryObjId:_e}));fe(Ce,!0),Ee("<</Type /Pages");var Re="/Kids [";for(ce=0;ce<mn;ce++)Re+=Ie[ce]+" 0 R ";Ee(Re+"]"),Ee("/Count "+mn),Ee(">>"),Ee("endobj"),zr.publish("postPutPages")},Ze=function(O){zr.publish("putFont",{font:O,out:Ee,newObject:Jn,putStream:rt}),O.isAlreadyPutted!==!0&&(O.objectNumber=Jn(),Ee("<<"),Ee("/Type /Font"),Ee("/BaseFont /"+p0(O.postScriptName)),Ee("/Subtype /Type1"),typeof O.encoding=="string"&&Ee("/Encoding /"+O.encoding),Ee("/FirstChar 32"),Ee("/LastChar 255"),Ee(">>"),Ee("endobj"))},xt=function(){for(var O in Ir)Ir.hasOwnProperty(O)&&(m===!1||m===!0&&p.hasOwnProperty(O))&&Ze(Ir[O])},Bt=function(O){O.objectNumber=Jn();var ce=[];ce.push({key:"Type",value:"/XObject"}),ce.push({key:"Subtype",value:"/Form"}),ce.push({key:"BBox",value:"["+[E(O.x),E(O.y),E(O.x+O.width),E(O.y+O.height)].join(" ")+"]"}),ce.push({key:"Matrix",value:"["+O.matrix.toString()+"]"});var Ie=O.pages[1].join(`
`);rt({data:Ie,additionalKeyValues:ce,objectId:O.objectNumber}),Ee("endobj")},Ot=function(){for(var O in Zn)Zn.hasOwnProperty(O)&&Bt(Zn[O])},St=function(O,ce){var Ie,Re=[],Ve=1/(ce-1);for(Ie=0;Ie<1;Ie+=Ve)Re.push(Ie);if(Re.push(1),O[0].offset!=0){var ot={offset:0,color:O[0].color};O.unshift(ot)}if(O[O.length-1].offset!=1){var bt={offset:1,color:O[O.length-1].color};O.push(bt)}for(var Ut="",S=0,z=0;z<Re.length;z++){for(Ie=Re[z];Ie>O[S+1].offset;)S++;var re=O[S].offset,ve=(Ie-re)/(O[S+1].offset-re),Qe=O[S].color,Ye=O[S+1].color;Ut+=ee(Math.round((1-ve)*Qe[0]+ve*Ye[0]).toString(16))+ee(Math.round((1-ve)*Qe[1]+ve*Ye[1]).toString(16))+ee(Math.round((1-ve)*Qe[2]+ve*Ye[2]).toString(16))}return Ut.trim()},Rt=function(O,ce){ce||(ce=21);var Ie=Jn(),Re=St(O.colors,ce),Ve=[];Ve.push({key:"FunctionType",value:"0"}),Ve.push({key:"Domain",value:"[0.0 1.0]"}),Ve.push({key:"Size",value:"["+ce+"]"}),Ve.push({key:"BitsPerSample",value:"8"}),Ve.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ve.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),rt({data:Re,additionalKeyValues:Ve,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ie}),Ee("endobj"),O.objectNumber=Jn(),Ee("<< /ShadingType "+O.type),Ee("/ColorSpace /DeviceRGB");var ot="/Coords ["+E(parseFloat(O.coords[0]))+" "+E(parseFloat(O.coords[1]))+" ";O.type===2?ot+=E(parseFloat(O.coords[2]))+" "+E(parseFloat(O.coords[3])):ot+=E(parseFloat(O.coords[2]))+" "+E(parseFloat(O.coords[3]))+" "+E(parseFloat(O.coords[4]))+" "+E(parseFloat(O.coords[5])),Ee(ot+="]"),O.matrix&&Ee("/Matrix ["+O.matrix.toString()+"]"),Ee("/Function "+Ie+" 0 R"),Ee("/Extend [true true]"),Ee(">>"),Ee("endobj")},ur=function(O,ce){var Ie=ea(),Re=Jn();ce.push({resourcesOid:Ie,objectOid:Re}),O.objectNumber=Re;var Ve=[];Ve.push({key:"Type",value:"/Pattern"}),Ve.push({key:"PatternType",value:"1"}),Ve.push({key:"PaintType",value:"1"}),Ve.push({key:"TilingType",value:"1"}),Ve.push({key:"BBox",value:"["+O.boundingBox.map(E).join(" ")+"]"}),Ve.push({key:"XStep",value:E(O.xStep)}),Ve.push({key:"YStep",value:E(O.yStep)}),Ve.push({key:"Resources",value:Ie+" 0 R"}),O.matrix&&Ve.push({key:"Matrix",value:"["+O.matrix.toString()+"]"}),rt({data:O.stream,additionalKeyValues:Ve,objectId:O.objectNumber}),Ee("endobj")},Pr=function(O){var ce;for(ce in Mr)Mr.hasOwnProperty(ce)&&(Mr[ce]instanceof Df?Rt(Mr[ce]):Mr[ce]instanceof b0&&ur(Mr[ce],O))},jr=function(O){for(var ce in O.objectNumber=Jn(),Ee("<<"),O)switch(ce){case"opacity":Ee("/ca "+Q(O[ce]));break;case"stroke-opacity":Ee("/CA "+Q(O[ce]))}Ee(">>"),Ee("endobj")},qr=function(){var O;for(O in Bn)Bn.hasOwnProperty(O)&&jr(Bn[O])},xs=function(){for(var O in Ee("/XObject <<"),Zn)Zn.hasOwnProperty(O)&&Zn[O].objectNumber>=0&&Ee("/"+O+" "+Zn[O].objectNumber+" 0 R");zr.publish("putXobjectDict"),Ee(">>")},eo=function(){Rn.oid=Jn(),Ee("<<"),Ee("/Filter /Standard"),Ee("/V "+Rn.v),Ee("/R "+Rn.r),Ee("/U <"+Rn.toHexString(Rn.U)+">"),Ee("/O <"+Rn.toHexString(Rn.O)+">"),Ee("/P "+Rn.P),Ee(">>"),Ee("endobj")},ns=function(){for(var O in Ee("/Font <<"),Ir)Ir.hasOwnProperty(O)&&(m===!1||m===!0&&p.hasOwnProperty(O))&&Ee("/"+O+" "+Ir[O].objectNumber+" 0 R");Ee(">>")},ks=function(){if(Object.keys(Mr).length>0){for(var O in Ee("/Shading <<"),Mr)Mr.hasOwnProperty(O)&&Mr[O]instanceof Df&&Mr[O].objectNumber>=0&&Ee("/"+O+" "+Mr[O].objectNumber+" 0 R");zr.publish("putShadingPatternDict"),Ee(">>")}},qs=function(O){if(Object.keys(Mr).length>0){for(var ce in Ee("/Pattern <<"),Mr)Mr.hasOwnProperty(ce)&&Mr[ce]instanceof g.TilingPattern&&Mr[ce].objectNumber>=0&&Mr[ce].objectNumber<O&&Ee("/"+ce+" "+Mr[ce].objectNumber+" 0 R");zr.publish("putTilingPatternDict"),Ee(">>")}},vs=function(){if(Object.keys(Bn).length>0){var O;for(O in Ee("/ExtGState <<"),Bn)Bn.hasOwnProperty(O)&&Bn[O].objectNumber>=0&&Ee("/"+O+" "+Bn[O].objectNumber+" 0 R");zr.publish("putGStateDict"),Ee(">>")}},Vn=function(O){fe(O.resourcesOid,!0),Ee("<<"),Ee("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ns(),ks(),qs(O.objectOid),vs(),xs(),Ee(">>"),Ee("endobj")},as=function(){var O=[];xt(),qr(),Ot(),Pr(O),zr.publish("putResources"),O.forEach(Vn),Vn({resourcesOid:_e,objectOid:Number.MAX_SAFE_INTEGER}),zr.publish("postPutResources")},_c=function(){zr.publish("putAdditionalObjects");for(var O=0;O<ye.length;O++){var ce=ye[O];fe(ce.objId,!0),Ee(ce.content),Ee("endobj")}zr.publish("postPutAdditionalObjects")},Tu=function(O){hn[O.fontName]=hn[O.fontName]||{},hn[O.fontName][O.fontStyle]=O.id},el=function(O,ce,Ie,Re,Ve){var ot={id:"F"+(Object.keys(Ir).length+1).toString(10),postScriptName:O,fontName:ce,fontStyle:Ie,encoding:Re,isStandardFont:Ve||!1,metadata:{}};return zr.publish("addFont",{font:ot,instance:this}),Ir[ot.id]=ot,Tu(ot),ot.id},SA=function(O){for(var ce=0,Ie=et.length;ce<Ie;ce++){var Re=el.call(this,O[ce][0],O[ce][1],O[ce][2],et[ce][3],!0);m===!1&&(p[Re]=!0);var Ve=O[ce][0].split("-");Tu({id:Re,fontName:Ve[0],fontStyle:Ve[1]||""})}zr.publish("addFonts",{fonts:Ir,dictionary:hn})},ws=function(O){return O.foo=function(){try{return O.apply(this,arguments)}catch(Re){var ce=Re.stack||"";~ce.indexOf(" at ")&&(ce=ce.split(" at ")[1]);var Ie="Error in function "+ce.split(`
`)[0].split("<")[0]+": "+Re.message;if(!xr.console)throw new Error(Ie);xr.console.error(Ie,Re),xr.alert&&alert(Ie)}},O.foo.bar=O,O.foo},Sc=function(O,ce){var Ie,Re,Ve,ot,bt,Ut,S,z,re;if(Ve=(ce=ce||{}).sourceEncoding||"Unicode",bt=ce.outputEncoding,(ce.autoencode||bt)&&Ir[It].metadata&&Ir[It].metadata[Ve]&&Ir[It].metadata[Ve].encoding&&(ot=Ir[It].metadata[Ve].encoding,!bt&&Ir[It].encoding&&(bt=Ir[It].encoding),!bt&&ot.codePages&&(bt=ot.codePages[0]),typeof bt=="string"&&(bt=ot[bt]),bt)){for(S=!1,Ut=[],Ie=0,Re=O.length;Ie<Re;Ie++)(z=bt[O.charCodeAt(Ie)])?Ut.push(String.fromCharCode(z)):Ut.push(O[Ie]),Ut[Ie].charCodeAt(0)>>8&&(S=!0);O=Ut.join("")}for(Ie=O.length;S===void 0&&Ie!==0;)O.charCodeAt(Ie-1)>>8&&(S=!0),Ie--;if(!S)return O;for(Ut=ce.noBOM?[]:[254,255],Ie=0,Re=O.length;Ie<Re;Ie++){if((re=(z=O.charCodeAt(Ie))>>8)>>8)throw new Error("Character at position "+Ie+" of string '"+O+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ut.push(re),Ut.push(z-(re<<8))}return String.fromCharCode.apply(void 0,Ut)},sn=g.__private__.pdfEscape=g.pdfEscape=function(O,ce){return Sc(O,ce).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ys=g.__private__.beginPage=function(O){ue[++mn]=[],ar[mn]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(O[0]),topRightY:Number(O[1])}},to(mn),De(ue[K])},tl=function(O,ce){var Ie,Re,Ve;switch(r=ce||r,typeof O=="string"&&(Ie=k(O.toLowerCase()),Array.isArray(Ie)&&(Re=Ie[0],Ve=Ie[1])),Array.isArray(O)&&(Re=O[0]*_t,Ve=O[1]*_t),isNaN(Re)&&(Re=a[0],Ve=a[1]),(Re>14400||Ve>14400)&&(Xn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Re=Math.min(14400,Re),Ve=Math.min(14400,Ve)),a=[Re,Ve],r.substr(0,1)){case"l":Ve>Re&&(a=[Ve,Re]);break;case"p":Re>Ve&&(a=[Ve,Re])}ys(a),kA(sl),Ee(bs),IA!==0&&Ee(IA+" J"),Gl!==0&&Ee(Gl+" j"),zr.publish("addPage",{pageNumber:mn})},rl=function(O){O>0&&O<=mn&&(ue.splice(O,1),ar.splice(O,1),mn--,K>mn&&(K=mn),this.setPage(K))},to=function(O){O>0&&O<=mn&&(K=O)},wn=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return ue.length-1},nl=function(O,ce,Ie){var Re,Ve=void 0;return Ie=Ie||{},O=O!==void 0?O:Ir[It].fontName,ce=ce!==void 0?ce:Ir[It].fontStyle,Re=O.toLowerCase(),hn[Re]!==void 0&&hn[Re][ce]!==void 0?Ve=hn[Re][ce]:hn[O]!==void 0&&hn[O][ce]!==void 0?Ve=hn[O][ce]:Ie.disableWarning===!1&&Xn.warn("Unable to look up font label for font '"+O+"', '"+ce+"'. Refer to getFontList() for available fonts."),Ve||Ie.noFallback||(Ve=hn.times[ce])==null&&(Ve=hn.times.normal),Ve},ci=g.__private__.putInfo=function(){var O=Jn(),ce=function(Re){return Re};for(var Ie in f!==null&&(ce=Rn.encryptor(O,0)),Ee("<<"),Ee("/Producer ("+sn(ce("jsPDF "+ir.version))+")"),kt)kt.hasOwnProperty(Ie)&&kt[Ie]&&Ee("/"+Ie.substr(0,1).toUpperCase()+Ie.substr(1)+" ("+sn(ce(kt[Ie]))+")");Ee("/CreationDate ("+sn(ce(oe))+")"),Ee(">>"),Ee("endobj")},So=g.__private__.putCatalog=function(O){var ce=(O=O||{}).rootDictionaryObjId||Ce;switch(Jn(),Ee("<<"),Ee("/Type /Catalog"),Ee("/Pages "+ce+" 0 R"),Et||(Et="fullwidth"),Et){case"fullwidth":Ee("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Ee("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Ee("/OpenAction [3 0 R /Fit]");break;case"original":Ee("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ie=""+Et;Ie.substr(Ie.length-1)==="%"&&(Et=parseInt(Et)/100),typeof Et=="number"&&Ee("/OpenAction [3 0 R /XYZ null null "+Q(Et)+"]")}switch(Qt||(Qt="continuous"),Qt){case"continuous":Ee("/PageLayout /OneColumn");break;case"single":Ee("/PageLayout /SinglePage");break;case"two":case"twoleft":Ee("/PageLayout /TwoColumnLeft");break;case"tworight":Ee("/PageLayout /TwoColumnRight")}Kt&&Ee("/PageMode /"+Kt),zr.publish("putCatalog"),Ee(">>"),Ee("endobj")},Bu=g.__private__.putTrailer=function(){Ee("trailer"),Ee("<<"),Ee("/Size "+(Ae+1)),Ee("/Root "+Ae+" 0 R"),Ee("/Info "+(Ae-1)+" 0 R"),f!==null&&Ee("/Encrypt "+Rn.oid+" 0 R"),Ee("/ID [ <"+te+"> <"+te+"> ]"),Ee(">>")},TA=g.__private__.putHeader=function(){Ee("%PDF-"+b),Ee("%ºß¬à")},BA=g.__private__.putXRef=function(){var O="0000000000";Ee("xref"),Ee("0 "+(Ae+1)),Ee("0000000000 65535 f ");for(var ce=1;ce<=Ae;ce++)typeof Se[ce]=="function"?Ee((O+Se[ce]()).slice(-10)+" 00000 n "):Se[ce]!==void 0?Ee((O+Se[ce]).slice(-10)+" 00000 n "):Ee("0000000000 00000 n ")},To=g.__private__.buildDocument=function(){at(),De(ge),zr.publish("buildDocument"),TA(),$e(),_c(),as(),f!==null&&eo(),ci(),So();var O=pe;return BA(),Bu(),Ee("startxref"),Ee(""+O),Ee("%%EOF"),De(ue[K]),ge.join(`
`)},Tc=g.__private__.getBlob=function(O){return new Blob([it(O)],{type:"application/pdf"})},Bo=g.output=g.__private__.output=ws(function(O,ce){switch(typeof(ce=ce||{})=="string"?ce={filename:ce}:ce.filename=ce.filename||"generated.pdf",O){case void 0:return To();case"save":g.save(ce.filename);break;case"arraybuffer":return it(To());case"blob":return Tc(To());case"bloburi":case"bloburl":if(xr.URL!==void 0&&typeof xr.URL.createObjectURL=="function")return xr.URL&&xr.URL.createObjectURL(Tc(To()))||void 0;Xn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ie="",Re=To();try{Ie=uE(Re)}catch{Ie=uE(unescape(encodeURIComponent(Re)))}return"data:application/pdf;filename="+ce.filename+";base64,"+Ie;case"pdfobjectnewwindow":if(Object.prototype.toString.call(xr)==="[object Window]"){var Ve="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ot=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ce.pdfObjectUrl&&(Ve=ce.pdfObjectUrl,ot="");var bt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ve+'"'+ot+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ce)+");<\/script></body></html>",Ut=xr.open();return Ut!==null&&Ut.document.write(bt),Ut}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(xr)==="[object Window]"){var S='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ce.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ce.filename+'" width="500px" height="400px" /></body></html>',z=xr.open();if(z!==null){z.document.write(S);var re=this;z.document.documentElement.querySelector("#pdfViewer").onload=function(){z.document.title=ce.filename,z.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(re.output("bloburl"))}}return z}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(xr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ve='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ce)+'"></iframe></body></html>',Qe=xr.open();if(Qe!==null&&(Qe.document.write(ve),Qe.document.title=ce.filename),Qe||typeof safari>"u")return Qe;break;case"datauri":case"dataurl":return xr.document.location.href=this.output("datauristring",ce);default:return null}}),ro=function(O){return Array.isArray(Ns)===!0&&Ns.indexOf(O)>-1};switch(n){case"pt":_t=1;break;case"mm":_t=72/25.4;break;case"cm":_t=72/2.54;break;case"in":_t=72;break;case"px":_t=ro("px_scaling")==1?.75:96/72;break;case"pc":case"em":_t=12;break;case"ex":_t=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);_t=n}var Rn=null;de(),q();var No=function(O){return f!==null?Rn.encryptor(O,0):function(ce){return ce}},no=g.__private__.getPageInfo=g.getPageInfo=function(O){if(isNaN(O)||O%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ar[O].objId,pageNumber:O,pageContext:ar[O]}},dr=g.__private__.getPageInfoByObjId=function(O){if(isNaN(O)||O%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ce in ar)if(ar[ce].objId===O)break;return no(ce)},ao=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:ar[K].objId,pageNumber:K,pageContext:ar[K]}};g.addPage=function(){return tl.apply(this,arguments),this},g.setPage=function(){return to.apply(this,arguments),De.call(this,ue[K]),this},g.insertPage=function(O){return this.addPage(),this.movePage(K,O),this},g.movePage=function(O,ce){var Ie,Re;if(O>ce){Ie=ue[O],Re=ar[O];for(var Ve=O;Ve>ce;Ve--)ue[Ve]=ue[Ve-1],ar[Ve]=ar[Ve-1];ue[ce]=Ie,ar[ce]=Re,this.setPage(ce)}else if(O<ce){Ie=ue[O],Re=ar[O];for(var ot=O;ot<ce;ot++)ue[ot]=ue[ot+1],ar[ot]=ar[ot+1];ue[ce]=Ie,ar[ce]=Re,this.setPage(ce)}return this},g.deletePage=function(){return rl.apply(this,arguments),this},g.__private__.text=g.text=function(O,ce,Ie,Re,Ve){var ot,bt,Ut,S,z,re,ve,Qe,Ye,Ct=(Re=Re||{}).scope||this;if(typeof O=="number"&&typeof ce=="number"&&(typeof Ie=="string"||Array.isArray(Ie))){var fr=Ie;Ie=ce,ce=O,O=fr}if(arguments[3]instanceof Ht?(_("The transform parameter of text() with a Matrix value"),Ye=Ve):(Ut=arguments[4],S=arguments[5],On(ve=arguments[3])==="object"&&ve!==null||(typeof Ut=="string"&&(S=Ut,Ut=null),typeof ve=="string"&&(S=ve,ve=null),typeof ve=="number"&&(Ut=ve,ve=null),Re={flags:ve,angle:Ut,align:S})),isNaN(ce)||isNaN(Ie)||O==null)throw new Error("Invalid arguments passed to jsPDF.text");if(O.length===0)return Ct;var Wr="",Sr=!1,yn=typeof Re.lineHeightFactor=="number"?Re.lineHeightFactor:Kr,Nn=Ct.internal.scaleFactor;function lo(Or){return Or=Or.split("	").join(Array(Re.TabLen||9).join(" ")),sn(Or,ve)}function xa(Or){for(var Qr,Gn=Or.concat(),va=[],Ao=Gn.length;Ao--;)typeof(Qr=Gn.shift())=="string"?va.push(Qr):Array.isArray(Or)&&(Qr.length===1||Qr[1]===void 0&&Qr[2]===void 0)?va.push(Qr[0]):va.push([Qr[0],Qr[1],Qr[2]]);return va}function fi(Or,Qr){var Gn;if(typeof Or=="string")Gn=Qr(Or)[0];else if(Array.isArray(Or)){for(var va,Ao,Qc=Or.concat(),Hc=[],Jl=Qc.length;Jl--;)typeof(va=Qc.shift())=="string"?Hc.push(Qr(va)[0]):Array.isArray(va)&&typeof va[0]=="string"&&(Ao=Qr(va[0],va[1],va[2]),Hc.push([Ao[0],Ao[1],Ao[2]]));Gn=Hc}return Gn}var ul=!1,Fc=!0;if(typeof O=="string")ul=!0;else if(Array.isArray(O)){var Fu=O.concat();bt=[];for(var FA,Oa=Fu.length;Oa--;)(typeof(FA=Fu.shift())!="string"||Array.isArray(FA)&&typeof FA[0]!="string")&&(Fc=!1);ul=Fc}if(ul===!1)throw new Error('Type of text must be string or Array. "'+O+'" is not recognized.');typeof O=="string"&&(O=O.match(/[\r?\n]/)?O.split(/\r\n|\r|\n/g):[O]);var Dc=ht/Ct.internal.scaleFactor,DA=Dc*(yn-1);switch(Re.baseline){case"bottom":Ie-=DA;break;case"top":Ie+=Dc-DA;break;case"hanging":Ie+=Dc-2*DA;break;case"middle":Ie+=Dc/2-DA}if((re=Re.maxWidth||0)>0&&(typeof O=="string"?O=Ct.splitTextToSize(O,re):Object.prototype.toString.call(O)==="[object Array]"&&(O=O.reduce(function(Or,Qr){return Or.concat(Ct.splitTextToSize(Qr,re))},[]))),ot={text:O,x:ce,y:Ie,options:Re,mutex:{pdfEscape:sn,activeFontKey:It,fonts:Ir,activeFontSize:ht}},zr.publish("preProcessText",ot),O=ot.text,Ut=(Re=ot.options).angle,!(Ye instanceof Ht)&&Ut&&typeof Ut=="number"){Ut*=Math.PI/180,Re.rotationDirection===0&&(Ut=-Ut),L===D.ADVANCED&&(Ut=-Ut);var RA=Math.cos(Ut),Du=Math.sin(Ut);Ye=new Ht(RA,Du,-Du,RA,0,0)}else Ut&&Ut instanceof Ht&&(Ye=Ut);L!==D.ADVANCED||Ye||(Ye=an),(z=Re.charSpace||Vl)!==void 0&&(Wr+=E(F(z))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Qe=Re.horizontalScale)!==void 0&&(Wr+=E(100*Qe)+` Tz
`),Re.lang;var hi=-1,vm=Re.renderingMode!==void 0?Re.renderingMode:Re.stroke,af=Ct.internal.getCurrentPageInfo().pageContext;switch(vm){case 0:case!1:case"fill":hi=0;break;case 1:case!0:case"stroke":hi=1;break;case 2:case"fillThenStroke":hi=2;break;case 3:case"invisible":hi=3;break;case 4:case"fillAndAddForClipping":hi=4;break;case 5:case"strokeAndAddPathForClipping":hi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":hi=6;break;case 7:case"addToPathForClipping":hi=7}var wh=af.usedRenderingMode!==void 0?af.usedRenderingMode:-1;hi!==-1?Wr+=hi+` Tr
`:wh!==-1&&(Wr+=`0 Tr
`),hi!==-1&&(af.usedRenderingMode=hi),S=Re.align||"left";var co,ss=ht*yn,Rc=Ct.internal.pageSize.getWidth(),sf=Ir[It];z=Re.charSpace||Vl,re=Re.maxWidth||0,ve=Object.assign({autoencode:!0,noBOM:!0},Re.flags);var Wl=[],Lc=function(Or){return Ct.getStringUnitWidth(Or,{font:sf,charSpace:z,fontSize:ht,doKerning:!1})*ht/Nn};if(Object.prototype.toString.call(O)==="[object Array]"){var Ws;bt=xa(O),S!=="left"&&(co=bt.map(Lc));var Cs,Uc=0;if(S==="right"){ce-=co[0],O=[],Oa=bt.length;for(var mi=0;mi<Oa;mi++)mi===0?(Cs=Ds(ce),Ws=Ba(Ie)):(Cs=F(Uc-co[mi]),Ws=-ss),O.push([bt[mi],Cs,Ws]),Uc=co[mi]}else if(S==="center"){ce-=co[0]/2,O=[],Oa=bt.length;for(var Do=0;Do<Oa;Do++)Do===0?(Cs=Ds(ce),Ws=Ba(Ie)):(Cs=F((Uc-co[Do])/2),Ws=-ss),O.push([bt[Do],Cs,Ws]),Uc=co[Do]}else if(S==="left"){O=[],Oa=bt.length;for(var dl=0;dl<Oa;dl++)O.push(bt[dl])}else if(S==="justify"&&sf.encoding==="Identity-H"){O=[],Oa=bt.length,re=re!==0?re:Rc;for(var Ro=0,ua=0;ua<Oa;ua++)if(Ws=ua===0?Ba(Ie):-ss,Cs=ua===0?Ds(ce):Ro,ua<Oa-1){var Lo=F((re-co[ua])/(bt[ua].split(" ").length-1)),Na=bt[ua].split(" ");O.push([Na[0]+" ",Cs,Ws]),Ro=0;for(var pi=1;pi<Na.length;pi++){var LA=(Lc(Na[pi-1]+" "+Na[pi])-Lc(Na[pi]))*Nn+Lo;pi==Na.length-1?O.push([Na[pi],LA,0]):O.push([Na[pi]+" ",LA,0]),Ro-=LA}}else O.push([bt[ua],Cs,Ws]);O.push(["",Ro,0])}else{if(S!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(O=[],Oa=bt.length,re=re!==0?re:Rc,ua=0;ua<Oa;ua++)Ws=ua===0?Ba(Ie):-ss,Cs=ua===0?Ds(ce):0,ua<Oa-1?Wl.push(E(F((re-co[ua])/(bt[ua].split(" ").length-1)))):Wl.push(0),O.push([bt[ua],Cs,Ws])}}var fl=typeof Re.R2L=="boolean"?Re.R2L:jt;fl===!0&&(O=fi(O,function(Or,Qr,Gn){return[Or.split("").reverse().join(""),Qr,Gn]})),ot={text:O,x:ce,y:Ie,options:Re,mutex:{pdfEscape:sn,activeFontKey:It,fonts:Ir,activeFontSize:ht}},zr.publish("postProcessText",ot),O=ot.text,Sr=ot.mutex.isHex||!1;var Ru=Ir[It].encoding;Ru!=="WinAnsiEncoding"&&Ru!=="StandardEncoding"||(O=fi(O,function(Or,Qr,Gn){return[lo(Or),Qr,Gn]})),bt=xa(O),O=[];for(var Mc,Pc,jc,UA=0,Lu=1,Oc=Array.isArray(bt[0])?Lu:UA,$l="",MA=function(Or,Qr,Gn){var va="";return Gn instanceof Ht?(Gn=typeof Re.angle=="number"?pn(Gn,new Ht(1,0,0,1,Or,Qr)):pn(new Ht(1,0,0,1,Or,Qr),Gn),L===D.ADVANCED&&(Gn=pn(new Ht(1,0,0,-1,0,0),Gn)),va=Gn.join(" ")+` Tm
`):va=E(Or)+" "+E(Qr)+` Td
`,va},da=0;da<bt.length;da++){switch($l="",Oc){case Lu:jc=(Sr?"<":"(")+bt[da][0]+(Sr?">":")"),Mc=parseFloat(bt[da][1]),Pc=parseFloat(bt[da][2]);break;case UA:jc=(Sr?"<":"(")+bt[da]+(Sr?">":")"),Mc=Ds(ce),Pc=Ba(Ie)}Wl!==void 0&&Wl[da]!==void 0&&($l=Wl[da]+` Tw
`),da===0?O.push($l+MA(Mc,Pc,Ye)+jc):Oc===UA?O.push($l+jc):Oc===Lu&&O.push($l+MA(Mc,Pc,Ye)+jc)}O=Oc===UA?O.join(` Tj
T* `):O.join(` Tj
`),O+=` Tj
`;var Vi=`BT
/`;return Vi+=It+" "+ht+` Tf
`,Vi+=E(ht*yn)+` TL
`,Vi+=Io+`
`,Vi+=Wr,Vi+=O,Ee(Vi+="ET"),p[It]=!0,Ct};var Nu=g.__private__.clip=g.clip=function(O){return Ee(O==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return Nu("evenodd")},g.__private__.discardPath=g.discardPath=function(){return Ee("n"),this};var Is=g.__private__.isValidStyle=function(O){var ce=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(O)!==-1&&(ce=!0),ce};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(O){return Is(O)&&(u=O),this};var Ai=g.__private__.getStyle=g.getStyle=function(O){var ce=u;switch(O){case"D":case"S":ce="S";break;case"F":ce="f";break;case"FD":case"DF":ce="B";break;case"f":case"f*":case"B":case"B*":ce=O}return ce},Ks=g.close=function(){return Ee("h"),this};g.stroke=function(){return Ee("S"),this},g.fill=function(O){return so("f",O),this},g.fillEvenOdd=function(O){return so("f*",O),this},g.fillStroke=function(O){return so("B",O),this},g.fillStrokeEvenOdd=function(O){return so("B*",O),this};var so=function(O,ce){On(ce)==="object"?ko(ce,O):Ee(O)},ui=function(O){O===null||L===D.ADVANCED&&O===void 0||(O=Ai(O),Ee(O))};function al(O,ce,Ie,Re,Ve){var ot=new b0(ce||this.boundingBox,Ie||this.xStep,Re||this.yStep,this.gState,Ve||this.matrix);ot.stream=this.stream;var bt=O+"$$"+this.cloneIndex+++"$$";return Dn(bt,ot),ot}var ko=function(O,ce){var Ie=li[O.key],Re=Mr[Ie];if(Re instanceof Df)Ee("q"),Ee(NA(ce)),Re.gState&&g.setGState(Re.gState),Ee(O.matrix.toString()+" cm"),Ee("/"+Ie+" sh"),Ee("Q");else if(Re instanceof b0){var Ve=new Ht(1,0,0,-1,0,Rs());O.matrix&&(Ve=Ve.multiply(O.matrix||an),Ie=al.call(Re,O.key,O.boundingBox,O.xStep,O.yStep,Ve).id),Ee("q"),Ee("/Pattern cs"),Ee("/"+Ie+" scn"),Re.gState&&g.setGState(Re.gState),Ee(ce),Ee("Q")}},NA=function(O){switch(O){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},di=g.moveTo=function(O,ce){return Ee(E(F(O))+" "+E(X(ce))+" m"),this},Fs=g.lineTo=function(O,ce){return Ee(E(F(O))+" "+E(X(ce))+" l"),this},io=g.curveTo=function(O,ce,Ie,Re,Ve,ot){return Ee([E(F(O)),E(X(ce)),E(F(Ie)),E(X(Re)),E(F(Ve)),E(X(ot)),"c"].join(" ")),this};g.__private__.line=g.line=function(O,ce,Ie,Re,Ve){if(isNaN(O)||isNaN(ce)||isNaN(Ie)||isNaN(Re)||!Is(Ve))throw new Error("Invalid arguments passed to jsPDF.line");return L===D.COMPAT?this.lines([[Ie-O,Re-ce]],O,ce,[1,1],Ve||"S"):this.lines([[Ie-O,Re-ce]],O,ce,[1,1]).stroke()},g.__private__.lines=g.lines=function(O,ce,Ie,Re,Ve,ot){var bt,Ut,S,z,re,ve,Qe,Ye,Ct,fr,Wr,Sr;if(typeof O=="number"&&(Sr=Ie,Ie=ce,ce=O,O=Sr),Re=Re||[1,1],ot=ot||!1,isNaN(ce)||isNaN(Ie)||!Array.isArray(O)||!Array.isArray(Re)||!Is(Ve)||typeof ot!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(di(ce,Ie),bt=Re[0],Ut=Re[1],z=O.length,fr=ce,Wr=Ie,S=0;S<z;S++)(re=O[S]).length===2?(fr=re[0]*bt+fr,Wr=re[1]*Ut+Wr,Fs(fr,Wr)):(ve=re[0]*bt+fr,Qe=re[1]*Ut+Wr,Ye=re[2]*bt+fr,Ct=re[3]*Ut+Wr,fr=re[4]*bt+fr,Wr=re[5]*Ut+Wr,io(ve,Qe,Ye,Ct,fr,Wr));return ot&&Ks(),ui(Ve),this},g.path=function(O){for(var ce=0;ce<O.length;ce++){var Ie=O[ce],Re=Ie.c;switch(Ie.op){case"m":di(Re[0],Re[1]);break;case"l":Fs(Re[0],Re[1]);break;case"c":io.apply(this,Re);break;case"h":Ks()}}return this},g.__private__.rect=g.rect=function(O,ce,Ie,Re,Ve){if(isNaN(O)||isNaN(ce)||isNaN(Ie)||isNaN(Re)||!Is(Ve))throw new Error("Invalid arguments passed to jsPDF.rect");return L===D.COMPAT&&(Re=-Re),Ee([E(F(O)),E(X(ce)),E(F(Ie)),E(F(Re)),"re"].join(" ")),ui(Ve),this},g.__private__.triangle=g.triangle=function(O,ce,Ie,Re,Ve,ot,bt){if(isNaN(O)||isNaN(ce)||isNaN(Ie)||isNaN(Re)||isNaN(Ve)||isNaN(ot)||!Is(bt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ie-O,Re-ce],[Ve-Ie,ot-Re],[O-Ve,ce-ot]],O,ce,[1,1],bt,!0),this},g.__private__.roundedRect=g.roundedRect=function(O,ce,Ie,Re,Ve,ot,bt){if(isNaN(O)||isNaN(ce)||isNaN(Ie)||isNaN(Re)||isNaN(Ve)||isNaN(ot)||!Is(bt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ut=4/3*(Math.SQRT2-1);return Ve=Math.min(Ve,.5*Ie),ot=Math.min(ot,.5*Re),this.lines([[Ie-2*Ve,0],[Ve*Ut,0,Ve,ot-ot*Ut,Ve,ot],[0,Re-2*ot],[0,ot*Ut,-Ve*Ut,ot,-Ve,ot],[2*Ve-Ie,0],[-Ve*Ut,0,-Ve,-ot*Ut,-Ve,-ot],[0,2*ot-Re],[0,-ot*Ut,Ve*Ut,-ot,Ve,-ot]],O+Ve,ce,[1,1],bt,!0),this},g.__private__.ellipse=g.ellipse=function(O,ce,Ie,Re,Ve){if(isNaN(O)||isNaN(ce)||isNaN(Ie)||isNaN(Re)||!Is(Ve))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ot=4/3*(Math.SQRT2-1)*Ie,bt=4/3*(Math.SQRT2-1)*Re;return di(O+Ie,ce),io(O+Ie,ce-bt,O+ot,ce-Re,O,ce-Re),io(O-ot,ce-Re,O-Ie,ce-bt,O-Ie,ce),io(O-Ie,ce+bt,O-ot,ce+Re,O,ce+Re),io(O+ot,ce+Re,O+Ie,ce+bt,O+Ie,ce),ui(Ve),this},g.__private__.circle=g.circle=function(O,ce,Ie,Re){if(isNaN(O)||isNaN(ce)||isNaN(Ie)||!Is(Re))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(O,ce,Ie,Ie,Re)},g.setFont=function(O,ce,Ie){return Ie&&(ce=U(ce,Ie)),It=nl(O,ce,{disableWarning:!1}),this};var Ta=g.__private__.getFont=g.getFont=function(){return Ir[nl.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var O,ce,Ie={};for(O in hn)if(hn.hasOwnProperty(O))for(ce in Ie[O]=[],hn[O])hn[O].hasOwnProperty(ce)&&Ie[O].push(ce);return Ie},g.addFont=function(O,ce,Ie,Re,Ve){var ot=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ot.indexOf(arguments[3])!==-1?Ve=arguments[3]:arguments[3]&&ot.indexOf(arguments[3])==-1&&(Ie=U(Ie,Re)),Ve=Ve||"Identity-H",el.call(this,O,ce,Ie,Ve)};var Kr,sl=t.lineWidth||.200025,oo=g.__private__.getLineWidth=g.getLineWidth=function(){return sl},kA=g.__private__.setLineWidth=g.setLineWidth=function(O){return sl=O,Ee(E(F(O))+" w"),this};g.__private__.setLineDash=ir.API.setLineDash=ir.API.setLineDashPattern=function(O,ce){if(O=O||[],ce=ce||0,isNaN(ce)||!Array.isArray(O))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return O=O.map(function(Ie){return E(F(Ie))}).join(" "),ce=E(F(ce)),Ee("["+O+"] "+ce+" d"),this};var Ql=g.__private__.getLineHeight=g.getLineHeight=function(){return ht*Kr};g.__private__.getLineHeight=g.getLineHeight=function(){return ht*Kr};var Hl=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(O){return typeof(O=O||1.15)=="number"&&(Kr=O),this},Hi=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return Kr};Hl(t.lineHeight);var Ds=g.__private__.getHorizontalCoordinate=function(O){return F(O)},Ba=g.__private__.getVerticalCoordinate=function(O){return L===D.ADVANCED?O:ar[K].mediaBox.topRightY-ar[K].mediaBox.bottomLeftY-F(O)},ku=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(O){return E(Ds(O))},il=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(O){return E(Ba(O))},bs=t.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return Be(bs)},g.__private__.setStrokeColor=g.setDrawColor=function(O,ce,Ie,Re){return bs=ke({ch1:O,ch2:ce,ch3:Ie,ch4:Re,pdfColorType:"draw",precision:2}),Ee(bs),this};var ol=t.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return Be(ol)},g.__private__.setFillColor=g.setFillColor=function(O,ce,Ie,Re){return ol=ke({ch1:O,ch2:ce,ch3:Ie,ch4:Re,pdfColorType:"fill",precision:2}),Ee(ol),this};var Io=t.textColor||"0 g",Bc=g.__private__.getTextColor=g.getTextColor=function(){return Be(Io)};g.__private__.setTextColor=g.setTextColor=function(O,ce,Ie,Re){return Io=ke({ch1:O,ch2:ce,ch3:Ie,ch4:Re,pdfColorType:"text",precision:3}),this};var Vl=t.charSpace,Nc=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(Vl||0)};g.__private__.setCharSpace=g.setCharSpace=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Vl=O,this};var IA=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(O){var ce=g.CapJoinStyles[O];if(ce===void 0)throw new Error("Line cap style of '"+O+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return IA=ce,Ee(ce+" J"),this};var Gl=0;g.__private__.setLineJoin=g.setLineJoin=function(O){var ce=g.CapJoinStyles[O];if(ce===void 0)throw new Error("Line join style of '"+O+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Gl=ce,Ee(ce+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(O){if(O=O||0,isNaN(O))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Ee(E(F(O))+" M"),this},g.GState=e2,g.setGState=function(O){(O=typeof O=="string"?Bn[ga[O]]:ll(null,O)).equals(Pa)||(Ee("/"+O.id+" gs"),Pa=O)};var ll=function(O,ce){if(!O||!ga[O]){var Ie=!1;for(var Re in Bn)if(Bn.hasOwnProperty(Re)&&Bn[Re].equals(ce)){Ie=!0;break}if(Ie)ce=Bn[Re];else{var Ve="GS"+(Object.keys(Bn).length+1).toString(10);Bn[Ve]=ce,ce.id=Ve}return O&&(ga[O]=ce.id),zr.publish("addGState",ce),ce}};g.addGState=function(O,ce){return ll(O,ce),this},g.saveGraphicsState=function(){return Ee("q"),rs.push({key:It,size:ht,color:Io}),this},g.restoreGraphicsState=function(){Ee("Q");var O=rs.pop();return It=O.key,ht=O.size,Io=O.color,Pa=null,this},g.setCurrentTransformationMatrix=function(O){return Ee(O.toString()+" cm"),this},g.comment=function(O){return Ee("#"+O),this};var zl=function(O,ce){var Ie=O||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ie},set:function(ot){isNaN(ot)||(Ie=parseFloat(ot))}});var Re=ce||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Re},set:function(ot){isNaN(ot)||(Re=parseFloat(ot))}});var Ve="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ve},set:function(ot){Ve=ot.toString()}}),this},kc=function(O,ce,Ie,Re){zl.call(this,O,ce),this.type="rect";var Ve=Ie||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ve},set:function(bt){isNaN(bt)||(Ve=parseFloat(bt))}});var ot=Re||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ot},set:function(bt){isNaN(bt)||(ot=parseFloat(bt))}}),this},ql=function(){this.page=mn,this.currentPage=K,this.pages=ue.slice(0),this.pagesContext=ar.slice(0),this.x=Yr,this.y=tr,this.matrix=$n,this.width=Al(K),this.height=Rs(K),this.outputDestination=Pe,this.id="",this.objectNumber=-1};ql.prototype.restore=function(){mn=this.page,K=this.currentPage,ar=this.pagesContext,ue=this.pages,Yr=this.x,tr=this.y,$n=this.matrix,Kl(K,this.width),Ic(K,this.height),Pe=this.outputDestination};var cl=function(O,ce,Ie,Re,Ve){zs.push(new ql),mn=K=0,ue=[],Yr=O,tr=ce,$n=Ve,ys([Ie,Re])},Iu=function(O){if(ja[O])zs.pop().restore();else{var ce=new ql,Ie="Xo"+(Object.keys(Zn).length+1).toString(10);ce.id=Ie,ja[O]=Ie,Zn[Ie]=ce,zr.publish("addFormObject",ce),zs.pop().restore()}};for(var Fo in g.beginFormObject=function(O,ce,Ie,Re,Ve){return cl(O,ce,Ie,Re,Ve),this},g.endFormObject=function(O){return Iu(O),this},g.doFormObject=function(O,ce){var Ie=Zn[ja[O]];return Ee("q"),Ee(ce.toString()+" cm"),Ee("/"+Ie.id+" Do"),Ee("Q"),this},g.getFormObject=function(O){var ce=Zn[ja[O]];return{x:ce.x,y:ce.y,width:ce.width,height:ce.height,matrix:ce.matrix}},g.save=function(O,ce){return O=O||"generated.pdf",(ce=ce||{}).returnPromise=ce.returnPromise||!1,ce.returnPromise===!1?(If(Tc(To()),O),typeof If.unload=="function"&&xr.setTimeout&&setTimeout(If.unload,911),this):new Promise(function(Ie,Re){try{var Ve=If(Tc(To()),O);typeof If.unload=="function"&&xr.setTimeout&&setTimeout(If.unload,911),Ie(Ve)}catch(ot){Re(ot.message)}})},ir.API)ir.API.hasOwnProperty(Fo)&&(Fo==="events"&&ir.API.events.length?function(O,ce){var Ie,Re,Ve;for(Ve=ce.length-1;Ve!==-1;Ve--)Ie=ce[Ve][0],Re=ce[Ve][1],O.subscribe.apply(O,[Ie].concat(typeof Re=="function"?[Re]:Re))}(zr,ir.API.events):g[Fo]=ir.API[Fo]);var Al=g.getPageWidth=function(O){return(ar[O=O||K].mediaBox.topRightX-ar[O].mediaBox.bottomLeftX)/_t},Kl=g.setPageWidth=function(O,ce){ar[O].mediaBox.topRightX=ce*_t+ar[O].mediaBox.bottomLeftX},Rs=g.getPageHeight=function(O){return(ar[O=O||K].mediaBox.topRightY-ar[O].mediaBox.bottomLeftY)/_t},Ic=g.setPageHeight=function(O,ce){ar[O].mediaBox.topRightY=ce*_t+ar[O].mediaBox.bottomLeftY};return g.internal={pdfEscape:sn,getStyle:Ai,getFont:Ta,getFontSize:At,getCharSpace:Nc,getTextColor:Bc,getLineHeight:Ql,getLineHeightFactor:Hi,getLineWidth:oo,write:Le,getHorizontalCoordinate:Ds,getVerticalCoordinate:Ba,getCoordinateString:ku,getVerticalCoordinateString:il,collections:{},newObject:Jn,newAdditionalObject:Ne,newObjectDeferred:ea,newObjectDeferredBegin:fe,getFilters:qe,putStream:rt,events:zr,scaleFactor:_t,pageSize:{getWidth:function(){return Al(K)},setWidth:function(O){Kl(K,O)},getHeight:function(){return Rs(K)},setHeight:function(O){Ic(K,O)}},encryptionOptions:f,encryption:Rn,getEncryptor:No,output:Bo,getNumberOfPages:wn,pages:ue,out:Ee,f2:Q,f3:R,getPageInfo:no,getPageInfoByObjId:dr,getCurrentPageInfo:ao,getPDFVersion:y,Point:zl,Rectangle:kc,Matrix:Ht,hasHotfix:ro},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return Al(K)},set:function(O){Kl(K,O)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return Rs(K)},set:function(O){Ic(K,O)},enumerable:!0,configurable:!0}),SA.call(g,et),It="F1",tl(a,r),zr.publish("initialized"),g}m0.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},m0.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},m0.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},m0.prototype.processOwnerPassword=function(t,e){return fE(dE(e).substr(0,5),t)},m0.prototype.encryptor=function(t,e){var r=dE(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return fE(r,n)}},e2.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||On(t)!==On(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},ir.API={events:[]},ir.version="2.5.2";var Da=ir.API,g5=1,fh=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Jh=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Nr=function(t){return t.toFixed(2)},cd=function(t){return t.toFixed(5)};Da.__acroform__={};var _o=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},hI=function(t){return t*g5},aA=function(t){var e=new jL,r=Zt.internal.getHeight(t)||0,n=Zt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Nr(n)),Number(Nr(r))],e},one=Da.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},lne=Da.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},cne=Da.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},Ja=Da.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return cne(t,e-1)},Ya=Da.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return one(t,e-1)},Xa=Da.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return lne(t,e-1)},Ane=Da.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,a=t[0],s=t[1],i=t[2],o=t[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(s+o)||0,c.upperRight_X=r(a+i)||0,c.upperRight_Y=n(s)||0,[Number(Nr(c.lowerLeft_X)),Number(Nr(c.lowerLeft_Y)),Number(Nr(c.upperRight_X)),Number(Nr(c.upperRight_Y))]},une=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=hE(t,r),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+a+" "+Nr(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=aA(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},hE=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=t.multiline?a.map(function(R){return R.split(`
`)}):a.map(function(R){return[R]});var s=r,i=Zt.internal.getHeight(t)||0;i=i<0?-i:i;var o=Zt.internal.getWidth(t)||0;o=o<0?-o:o;var c=function(R,F,V){if(R+1<a.length){var X=F+" "+a[R+1][0];return y1(X,t,V).width<=o-4}return!1};s++;e:for(;s>0;){e="",s--;var u,f,m=y1("3",t,s).height,p=t.multiline?i-s:(i-m)/2,g=p+=2,b=0,y=0,T=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+y1(e,t,s=12).width+", FieldWidth:"+o+`
`;break}for(var k="",D=0,L=0;L<a.length;L++)if(a.hasOwnProperty(L)){var j=!1;if(a[L].length!==1&&T!==a[L].length-1){if((m+2)*(D+2)+2>i)continue e;k+=a[L][T],j=!0,y=L,L--}else{k=(k+=a[L][T]+" ").substr(k.length-1)==" "?k.substr(0,k.length-1):k;var H=parseInt(L),U=c(H,k,s),E=L>=a.length-1;if(U&&!E){k+=" ",T=0;continue}if(U||E){if(E)y=H;else if(t.multiline&&(m+2)*(D+2)+2>i)continue e}else{if(!t.multiline||(m+2)*(D+2)+2>i)continue e;y=H}}for(var _="",B=b;B<=y;B++){var Q=a[B];if(t.multiline){if(B===y){_+=Q[T]+" ",T=(T+1)%Q.length;continue}if(B===b){_+=Q[Q.length-1]+" ";continue}}_+=Q[0]+" "}switch(_=_.substr(_.length-1)==" "?_.substr(0,_.length-1):_,f=y1(_,t,s).width,t.textAlign){case"right":u=o-f-2;break;case"center":u=(o-f)/2;break;case"left":default:u=2}e+=Nr(u)+" "+Nr(g)+` Td
`,e+="("+fh(_)+`) Tj
`,e+=-Nr(u)+` 0 Td
`,g=-(s+2),f=0,b=j?y:y+1,D++,k=""}break}return n.text=e,n.fontSize=s,n},y1=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},dne={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},fne=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},hne=function(t,e){for(var r in t)if(t.hasOwnProperty(r)){var n=r,a=t[r];e.internal.newObjectDeferredBegin(a.objId,!0),On(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete t[n]}},mne=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(bc.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(dne)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");g5=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new OL,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&fne(s,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var i in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(i)){var o=n[i],c=[],u=o.Rect;if(o.Rect&&(o.Rect=Ane(o.Rect,a)),a.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Zt.createDefaultAppearanceStream(o),On(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(c=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var f=une(o);c.push({key:"AP",value:"<</N "+f+">>"}),a.internal.acroformPlugin.xForms.push(f)}if(o.appearanceStreamContent){var m="";for(var p in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(p)){var g=o.appearanceStreamContent[p];if(m+="/"+p+" ",m+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var i in g)if(g.hasOwnProperty(i)){var b=g[i];typeof b=="function"&&(b=b.call(a,o)),m+="/"+i+" "+b+" ",a.internal.acroformPlugin.xForms.indexOf(b)>=0||a.internal.acroformPlugin.xForms.push(b)}}else typeof(b=g)=="function"&&(b=b.call(a,o)),m+="/"+i+" "+b,a.internal.acroformPlugin.xForms.indexOf(b)>=0||a.internal.acroformPlugin.xForms.push(b);m+=">>"}c.push({key:"AP",value:`<<
`+m+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:o.objId}),a.internal.out("endobj")}s&&hne(a.internal.acroformPlugin.xForms,a)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},PL=Da.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(i){return i};if(Array.isArray(t)){for(var a="[",s=0;s<t.length;s++)switch(s!==0&&(a+=" "),On(t[s])){case"boolean":case"number":case"object":a+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),a+="("+fh(n(t[s].toString()))+")"):a+=t[s].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Tb=function(t,e,r){var n=function(a){return a};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),t="("+fh(n(t))+")"},lA=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};lA.prototype.toString=function(){return this.objId+" 0 R"},lA.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},lA.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],a=this[n];a&&(Array.isArray(a)?t.push({key:n,value:PL(a,this.objId,this.scope)}):a instanceof lA?(a.scope=this.scope,t.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:n,value:a}))}return t};var jL=function(){lA.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};_o(jL,lA);var OL=function(){lA.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+fh(r(t))+")"}},set:function(r){t=r}})};_o(OL,lA);var bc=function t(){lA.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute F supplied.');e=k}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ja(e,3)},set:function(k){k?this.F=Ya(e,3):this.F=Xa(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute Ff supplied.');r=k}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(k){n=k!==void 0?k:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(k){n[0]=k}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(k){n[1]=k}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(k){n[2]=k}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(k){n[3]=k}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(k){switch(k){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=k;break;default:throw new Error('Invalid value "'+k+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof t2)return;s="FieldObject"+t.FieldNum++}var k=function(D){return D};return this.scope&&(k=this.scope.internal.getEncryptor(this.objId)),"("+fh(k(s))+")"},set:function(k){s=k.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(k){s=k}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(k){i=k}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(k){o=k}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(k){c=k}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/g5:u},set:function(k){u=k}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(k){f=k}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof t2||this instanceof Hf))return Tb(m,this.objId,this.scope)},set:function(k){k=k.toString(),m=k}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Hs?p:Tb(p,this.objId,this.scope)},set:function(k){k=k.toString(),p=this instanceof Hs?k:k.substr(0,1)==="("?Jh(k.substr(1,k.length-2)):Jh(k)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Hs?Jh(p.substr(1,p.length-1)):p},set:function(k){k=k.toString(),p=this instanceof Hs?"/"+k:k}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(k){this.V=k}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Hs?g:Tb(g,this.objId,this.scope)},set:function(k){k=k.toString(),g=this instanceof Hs?k:k.substr(0,1)==="("?Jh(k.substr(1,k.length-2)):Jh(k)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Hs?Jh(g.substr(1,g.length-1)):g},set:function(k){k=k.toString(),g=this instanceof Hs?"/"+k:k}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(k){k=!!k,y=k}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(k){b=k}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,1)},set:function(k){k?this.Ff=Ya(this.Ff,1):this.Ff=Xa(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,2)},set:function(k){k?this.Ff=Ya(this.Ff,2):this.Ff=Xa(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,3)},set:function(k){k?this.Ff=Ya(this.Ff,3):this.Ff=Xa(this.Ff,3)}});var T=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(T!==null)return T},set:function(k){if([0,1,2].indexOf(k)===-1)throw new Error('Invalid value "'+k+'" for attribute Q supplied.');T=k}}),Object.defineProperty(this,"textAlign",{get:function(){var k;switch(T){case 0:default:k="left";break;case 1:k="center";break;case 2:k="right"}return k},configurable:!0,enumerable:!0,set:function(k){switch(k){case"right":case 2:T=2;break;case"center":case 1:T=1;break;case"left":case 0:default:T=0}}})};_o(bc,lA);var F0=function(){bc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return PL(e,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,i,o){o||(o=1);for(var c,u=[];c=i.exec(s);)u.push(c[o]);return u}(n,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,18)},set:function(r){r?this.Ff=Ya(this.Ff,18):this.Ff=Xa(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Ya(this.Ff,19):this.Ff=Xa(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,20)},set:function(r){r?(this.Ff=Ya(this.Ff,20),e.sort()):this.Ff=Xa(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,22)},set:function(r){r?this.Ff=Ya(this.Ff,22):this.Ff=Xa(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,23)},set:function(r){r?this.Ff=Ya(this.Ff,23):this.Ff=Xa(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,27)},set:function(r){r?this.Ff=Ya(this.Ff,27):this.Ff=Xa(this.Ff,27)}}),this.hasAppearanceStream=!1};_o(F0,bc);var D0=function(){F0.call(this),this.fontName="helvetica",this.combo=!1};_o(D0,F0);var R0=function(){D0.call(this),this.combo=!0};_o(R0,D0);var vv=function(){R0.call(this),this.edit=!0};_o(vv,R0);var Hs=function(){bc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,15)},set:function(r){r?this.Ff=Ya(this.Ff,15):this.Ff=Xa(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,16)},set:function(r){r?this.Ff=Ya(this.Ff,16):this.Ff=Xa(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,17)},set:function(r){r?this.Ff=Ya(this.Ff,17):this.Ff=Xa(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,26)},set:function(r){r?this.Ff=Ya(this.Ff,26):this.Ff=Xa(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,a=[];for(n in a.push("<<"),e)a.push("/"+n+" ("+fh(r(e[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){On(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};_o(Hs,bc);var wv=function(){Hs.call(this),this.pushButton=!0};_o(wv,Hs);var L0=function(){Hs.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};_o(L0,Hs);var t2=function(){var t,e;bc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(o){return o};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,i=[];for(s in i.push("<<"),n)i.push("/"+s+" ("+fh(a(n[s]))+")");return i.push(">>"),i.join(`
`)},set:function(a){On(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Zt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};_o(t2,bc),L0.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},L0.prototype.createOption=function(t){var e=new t2;return e.Parent=this,e.optionName=t,this.Kids.push(e),pne.call(this.scope,e),e};var yv=function(){Hs.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Zt.CheckBox.createAppearanceStream()};_o(yv,Hs);var Hf=function(){bc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,13)},set:function(e){e?this.Ff=Ya(this.Ff,13):this.Ff=Xa(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,21)},set:function(e){e?this.Ff=Ya(this.Ff,21):this.Ff=Xa(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,23)},set:function(e){e?this.Ff=Ya(this.Ff,23):this.Ff=Xa(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,24)},set:function(e){e?this.Ff=Ya(this.Ff,24):this.Ff=Xa(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,25)},set:function(e){e?this.Ff=Ya(this.Ff,25):this.Ff=Xa(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,26)},set:function(e){e?this.Ff=Ya(this.Ff,26):this.Ff=Xa(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};_o(Hf,bc);var bv=function(){Hf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,14)},set:function(t){t?this.Ff=Ya(this.Ff,14):this.Ff=Xa(this.Ff,14)}}),this.password=!0};_o(bv,Hf);var Zt={CheckBox:{createAppearanceStream:function(){return{N:{On:Zt.CheckBox.YesNormal},D:{On:Zt.CheckBox.YesPushDown,Off:Zt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=aA(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),s=hE(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Nr(Zt.internal.getWidth(t))+" "+Nr(Zt.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Nr(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=aA(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),a=[],s=Zt.internal.getHeight(t),i=Zt.internal.getWidth(t),o=hE(t,t.caption);return a.push("1 g"),a.push("0 0 "+Nr(i)+" "+Nr(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Nr(i-1)+" "+Nr(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+Nr(o.fontSize)+" Tf "+n),a.push(o.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=aA(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Nr(Zt.internal.getWidth(t))+" "+Nr(Zt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Zt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Zt.RadioButton.Circle.YesNormal,e.D[t]=Zt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=aA(t);e.scope=t.scope;var r=[],n=Zt.internal.getWidth(t)<=Zt.internal.getHeight(t)?Zt.internal.getWidth(t)/4:Zt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Zt.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+cd(Zt.internal.getWidth(t)/2)+" "+cd(Zt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=aA(t);e.scope=t.scope;var r=[],n=Zt.internal.getWidth(t)<=Zt.internal.getHeight(t)?Zt.internal.getWidth(t)/4:Zt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*Zt.internal.Bezier_C).toFixed(5)),i=Number((n*Zt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+cd(Zt.internal.getWidth(t)/2)+" "+cd(Zt.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+cd(Zt.internal.getWidth(t)/2)+" "+cd(Zt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=aA(t);e.scope=t.scope;var r=[],n=Zt.internal.getWidth(t)<=Zt.internal.getHeight(t)?Zt.internal.getWidth(t)/4:Zt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*Zt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+cd(Zt.internal.getWidth(t)/2)+" "+cd(Zt.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Zt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Zt.RadioButton.Cross.YesNormal,e.D[t]=Zt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=aA(t);e.scope=t.scope;var r=[],n=Zt.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Nr(Zt.internal.getWidth(t)-2)+" "+Nr(Zt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Nr(n.x1.x)+" "+Nr(n.x1.y)+" m"),r.push(Nr(n.x2.x)+" "+Nr(n.x2.y)+" l"),r.push(Nr(n.x4.x)+" "+Nr(n.x4.y)+" m"),r.push(Nr(n.x3.x)+" "+Nr(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=aA(t);e.scope=t.scope;var r=Zt.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Nr(Zt.internal.getWidth(t))+" "+Nr(Zt.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Nr(Zt.internal.getWidth(t)-2)+" "+Nr(Zt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Nr(r.x1.x)+" "+Nr(r.x1.y)+" m"),n.push(Nr(r.x2.x)+" "+Nr(r.x2.y)+" l"),n.push(Nr(r.x4.x)+" "+Nr(r.x4.y)+" m"),n.push(Nr(r.x3.x)+" "+Nr(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=aA(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Nr(Zt.internal.getWidth(t))+" "+Nr(Zt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};Zt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Zt.internal.getWidth(t),r=Zt.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},Zt.internal.getWidth=function(t){var e=0;return On(t)==="object"&&(e=hI(t.Rect[2])),e},Zt.internal.getHeight=function(t){var e=0;return On(t)==="object"&&(e=hI(t.Rect[3])),e};var pne=Da.addField=function(t){if(mne(this,t),!(t instanceof bc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Da.AcroFormChoiceField=F0,Da.AcroFormListBox=D0,Da.AcroFormComboBox=R0,Da.AcroFormEditBox=vv,Da.AcroFormButton=Hs,Da.AcroFormPushButton=wv,Da.AcroFormRadioButton=L0,Da.AcroFormCheckBox=yv,Da.AcroFormTextField=Hf,Da.AcroFormPasswordField=bv,Da.AcroFormAppearance=Zt,Da.AcroForm={ChoiceField:F0,ListBox:D0,ComboBox:R0,EditBox:vv,Button:Hs,PushButton:wv,RadioButton:L0,CheckBox:yv,TextField:Hf,PasswordField:bv,Appearance:Zt},ir.AcroForm={ChoiceField:F0,ListBox:D0,ComboBox:R0,EditBox:vv,Button:Hs,PushButton:wv,RadioButton:L0,CheckBox:yv,TextField:Hf,PasswordField:bv,Appearance:Zt};ir.AcroForm;function QL(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=t.__addimage__.getImageFileTypeByImageData=function(R,F){var V,X,oe,te,ae,q=e;if((F=F||e)==="RGBA"||R.data!==void 0&&R.data instanceof Uint8ClampedArray&&"height"in R&&"width"in R)return"RGBA";if(U(R))for(ae in r)for(oe=r[ae],V=0;V<oe.length;V+=1){for(te=!0,X=0;X<oe[V].length;X+=1)if(oe[V][X]!==void 0&&oe[V][X]!==R[X]){te=!1;break}if(te===!0){q=ae;break}}else for(ae in r)for(oe=r[ae],V=0;V<oe.length;V+=1){for(te=!0,X=0;X<oe[V].length;X+=1)if(oe[V][X]!==void 0&&oe[V][X]!==R.charCodeAt(X)){te=!1;break}if(te===!0){q=ae;break}}return q===e&&F!==e&&(q=F),q},a=function R(F){for(var V=this.internal.write,X=this.internal.putStream,oe=(0,this.internal.getFilters)();oe.indexOf("FlateEncode")!==-1;)oe.splice(oe.indexOf("FlateEncode"),1);F.objectId=this.internal.newObject();var te=[];if(te.push({key:"Type",value:"/XObject"}),te.push({key:"Subtype",value:"/Image"}),te.push({key:"Width",value:F.width}),te.push({key:"Height",value:F.height}),F.colorSpace===T.INDEXED?te.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(F.palette.length/3-1)+" "+("sMask"in F&&F.sMask!==void 0?F.objectId+2:F.objectId+1)+" 0 R]"}):(te.push({key:"ColorSpace",value:"/"+F.colorSpace}),F.colorSpace===T.DEVICE_CMYK&&te.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),te.push({key:"BitsPerComponent",value:F.bitsPerComponent}),"decodeParameters"in F&&F.decodeParameters!==void 0&&te.push({key:"DecodeParms",value:"<<"+F.decodeParameters+">>"}),"transparency"in F&&Array.isArray(F.transparency)){for(var ae="",q=0,J=F.transparency.length;q<J;q++)ae+=F.transparency[q]+" "+F.transparency[q]+" ";te.push({key:"Mask",value:"["+ae+"]"})}F.sMask!==void 0&&te.push({key:"SMask",value:F.objectId+1+" 0 R"});var W=F.filter!==void 0?["/"+F.filter]:void 0;if(X({data:F.data,additionalKeyValues:te,alreadyAppliedFilters:W,objectId:F.objectId}),V("endobj"),"sMask"in F&&F.sMask!==void 0){var de="/Predictor "+F.predictor+" /Colors 1 /BitsPerComponent "+F.bitsPerComponent+" /Columns "+F.width,P={width:F.width,height:F.height,colorSpace:"DeviceGray",bitsPerComponent:F.bitsPerComponent,decodeParameters:de,data:F.sMask};"filter"in F&&(P.filter=F.filter),R.call(this,P)}if(F.colorSpace===T.INDEXED){var K=this.internal.newObject();X({data:_(new Uint8Array(F.palette)),objectId:K}),V("endobj")}},s=function(){var R=this.internal.collections.addImage_images;for(var F in R)a.call(this,R[F])},i=function(){var R,F=this.internal.collections.addImage_images,V=this.internal.write;for(var X in F)V("/I"+(R=F[X]).index,R.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",i))},c=function(){var R=this.internal.collections.addImage_images;return o.call(this),R},u=function(){return Object.keys(this.internal.collections.addImage_images).length},f=function(R){return typeof t["process"+R.toUpperCase()]=="function"},m=function(R){return On(R)==="object"&&R.nodeType===1},p=function(R,F){if(R.nodeName==="IMG"&&R.hasAttribute("src")){var V=""+R.getAttribute("src");if(V.indexOf("data:image/")===0)return Hp(unescape(V).split("base64,").pop());var X=t.loadFile(V,!0);if(X!==void 0)return X}if(R.nodeName==="CANVAS"){if(R.width===0||R.height===0)throw new Error("Given canvas must have data. Canvas width: "+R.width+", height: "+R.height);var oe;switch(F){case"PNG":oe="image/png";break;case"WEBP":oe="image/webp";break;case"JPEG":case"JPG":default:oe="image/jpeg"}return Hp(R.toDataURL(oe,1).split("base64,").pop())}},g=function(R){var F=this.internal.collections.addImage_images;if(F){for(var V in F)if(R===F[V].alias)return F[V]}},b=function(R,F,V){return R||F||(R=-96,F=-96),R<0&&(R=-1*V.width*72/R/this.internal.scaleFactor),F<0&&(F=-1*V.height*72/F/this.internal.scaleFactor),R===0&&(R=F*V.width/V.height),F===0&&(F=R*V.height/V.width),[R,F]},y=function(R,F,V,X,oe,te){var ae=b.call(this,V,X,oe),q=this.internal.getCoordinateString,J=this.internal.getVerticalCoordinateString,W=c.call(this);if(V=ae[0],X=ae[1],W[oe.index]=oe,te){te*=Math.PI/180;var de=Math.cos(te),P=Math.sin(te),K=function(ee){return ee.toFixed(4)},Y=[K(de),K(P),K(-1*P),K(de),0,0,"cm"]}this.internal.write("q"),te?(this.internal.write([1,"0","0",1,q(R),J(F+X),"cm"].join(" ")),this.internal.write(Y.join(" ")),this.internal.write([q(V),"0","0",q(X),"0","0","cm"].join(" "))):this.internal.write([q(V),"0","0",q(X),q(R),J(F+X),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+oe.index+" Do"),this.internal.write("Q")},T=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var k=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},D=t.__addimage__.sHashCode=function(R){var F,V,X=0;if(typeof R=="string")for(V=R.length,F=0;F<V;F++)X=(X<<5)-X+R.charCodeAt(F),X|=0;else if(U(R))for(V=R.byteLength/2,F=0;F<V;F++)X=(X<<5)-X+R[F],X|=0;return X},L=t.__addimage__.validateStringAsBase64=function(R){(R=R||"").toString().trim();var F=!0;return R.length===0&&(F=!1),R.length%4!=0&&(F=!1),/^[A-Za-z0-9+/]+$/.test(R.substr(0,R.length-2))===!1&&(F=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(R.substr(-2))===!1&&(F=!1),F},j=t.__addimage__.extractImageFromDataUrl=function(R){var F=(R=R||"").split("base64,"),V=null;if(F.length===2){var X=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(F[0]);Array.isArray(X)&&(V={mimeType:X[1],charset:X[2],data:F[1]})}return V},H=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(R){return H()&&R instanceof ArrayBuffer};var U=t.__addimage__.isArrayBufferView=function(R){return H()&&typeof Uint32Array<"u"&&(R instanceof Int8Array||R instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array)},E=t.__addimage__.binaryStringToUint8Array=function(R){for(var F=R.length,V=new Uint8Array(F),X=0;X<F;X++)V[X]=R.charCodeAt(X);return V},_=t.__addimage__.arrayBufferToBinaryString=function(R){for(var F="",V=U(R)?R:new Uint8Array(R),X=0;X<V.length;X+=8192)F+=String.fromCharCode.apply(null,V.subarray(X,X+8192));return F};t.addImage=function(){var R,F,V,X,oe,te,ae,q,J;if(typeof arguments[1]=="number"?(F=e,V=arguments[1],X=arguments[2],oe=arguments[3],te=arguments[4],ae=arguments[5],q=arguments[6],J=arguments[7]):(F=arguments[1],V=arguments[2],X=arguments[3],oe=arguments[4],te=arguments[5],ae=arguments[6],q=arguments[7],J=arguments[8]),On(R=arguments[0])==="object"&&!m(R)&&"imageData"in R){var W=R;R=W.imageData,F=W.format||F||e,V=W.x||V||0,X=W.y||X||0,oe=W.w||W.width||oe,te=W.h||W.height||te,ae=W.alias||ae,q=W.compression||q,J=W.rotation||W.angle||J}var de=this.internal.getFilters();if(q===void 0&&de.indexOf("FlateEncode")!==-1&&(q="SLOW"),isNaN(V)||isNaN(X))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var P=B.call(this,R,F,ae,q);return y.call(this,V,X,oe,te,P,J),this};var B=function(R,F,V,X){var oe,te,ae;if(typeof R=="string"&&n(R)===e){R=unescape(R);var q=Q(R,!1);(q!==""||(q=t.loadFile(R,!0))!==void 0)&&(R=q)}if(m(R)&&(R=p(R,F)),F=n(R,F),!f(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(((ae=V)==null||ae.length===0)&&(V=function(J){return typeof J=="string"||U(J)?D(J):U(J.data)?D(J.data):null}(R)),(oe=g.call(this,V))||(H()&&(R instanceof Uint8Array||F==="RGBA"||(te=R,R=E(R))),oe=this["process"+F.toUpperCase()](R,u.call(this),V,function(J){return J&&typeof J=="string"&&(J=J.toUpperCase()),J in t.image_compression?J:k.NONE}(X),te)),!oe)throw new Error("An unknown error occurred whilst processing the image.");return oe},Q=t.__addimage__.convertBase64ToBinaryString=function(R,F){var V;F=typeof F!="boolean"||F;var X,oe="";if(typeof R=="string"){X=(V=j(R))!==null?V.data:R;try{oe=Hp(X)}catch(te){if(F)throw L(X)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+te.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return oe};t.getImageProperties=function(R){var F,V,X="";if(m(R)&&(R=p(R)),typeof R=="string"&&n(R)===e&&((X=Q(R,!1))===""&&(X=t.loadFile(R)||""),R=X),V=n(R),!f(V))throw new Error("addImage does not support files of type '"+V+"', please ensure that a plugin for '"+V+"' support is added.");if(!H()||R instanceof Uint8Array||(R=E(R)),!(F=this["process"+V.toUpperCase()](R)))throw new Error("An unknown error occurred whilst processing the image");return F.fileType=V,F}})(ir.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};ir.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,a,s,i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,f=!1,m=0;m<u.length&&!f;m++)switch((n=u[m]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var p=0;p<u.length;p++){n=u[p];var g=this.internal.pdfEscape,b=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),T=this.internal.newAdditionalObject(),k=this.internal.getEncryptor(y.objId),D=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+g(k(n.contents))+")",s+=" /Popup "+T.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+g(k(D))+") >>",y.content=s;var L=y.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+i(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+L,n.open&&(s+=" /Open true"),s+=" >>",T.content=s,this.internal.write(y.objId,"0 R",T.objId,"0 R");break;case"freetext":a="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var j=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+g(b(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+j+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var H=this.annotations._nameMap[n.options.name];n.options.pageNumber=H.page,n.options.top=H.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+g(b(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var U=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+U+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,a,s,i){var o=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+s)},options:i,type:"link"})},t.textWithLink=function(r,n,a,s){var i,o,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var f=this.splitTextToSize(r,o).length;i=Math.ceil(u*f)}else o=c,i=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,a-u,o,i,s),c},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(ir.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(y){return e[y.charCodeAt(0)]!==void 0},i=t.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},o=t.__arabicParser__.isArabicEndLetter=function(y){return i(y)&&s(y)&&e[y.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(y){return i(y)&&a.indexOf(y.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return i(y)&&s(y)&&e[y.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(y){return i(y)&&s(y)&&e[y.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(y){return i(y)&&s(y)&&e[y.charCodeAt(0)].length>=3};var f=t.__arabicParser__.arabicLetterHasMedialForm=function(y){return i(y)&&s(y)&&e[y.charCodeAt(0)].length==4},m=t.__arabicParser__.resolveLigatures=function(y){var T=0,k=r,D="",L=0;for(T=0;T<y.length;T+=1)k[y.charCodeAt(T)]!==void 0?(L++,typeof(k=k[y.charCodeAt(T)])=="number"&&(D+=String.fromCharCode(k),k=r,L=0),T===y.length-1&&(k=r,D+=y.charAt(T-(L-1)),T-=L-1,L=0)):(k=r,D+=y.charAt(T-L),T-=L,L=0);return D};t.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&n[y.charCodeAt(0)]!==void 0};var p=t.__arabicParser__.getCorrectForm=function(y,T,k){return i(y)?s(y)===!1?-1:!u(y)||!i(T)&&!i(k)||!i(k)&&o(T)||o(y)&&!i(T)||o(y)&&c(T)||o(y)&&o(T)?0:f(y)&&i(T)&&!o(T)&&i(k)&&u(k)?3:o(y)||!i(k)?1:2:-1},g=function(y){var T=0,k=0,D=0,L="",j="",H="",U=(y=y||"").split("\\s+"),E=[];for(T=0;T<U.length;T+=1){for(E.push(""),k=0;k<U[T].length;k+=1)L=U[T][k],j=U[T][k-1],H=U[T][k+1],i(L)?(D=p(L,j,H),E[T]+=D!==-1?String.fromCharCode(e[L.charCodeAt(0)][D]):L):E[T]+=L;E[T]=m(E[T])}return E.join(" ")},b=t.__arabicParser__.processArabic=t.processArabic=function(){var y,T=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,k=[];if(Array.isArray(T)){var D=0;for(k=[],D=0;D<T.length;D+=1)Array.isArray(T[D])?k.push([g(T[D][0]),T[D][1],T[D][2]]):k.push([g(T[D])]);y=k}else y=g(T);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};t.events.push(["preProcessText",b])}(ir.API),ir.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(o){i=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(ir.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(y){c=y}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(y){u=y}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(y){f=y}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(y){m=y}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(y){p=y}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(y){g=y}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(y){b=y}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},t.getTextDimensions=function(c,u){n.call(this);var f=(u=u||{}).fontSize||this.getFontSize(),m=u.font||this.getFont(),p=u.scaleFactor||this.internal.scaleFactor,g=0,b=0,y=0,T=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var k=u.maxWidth;k>0?typeof c=="string"?c=this.splitTextToSize(c,k):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(L,j){return L.concat(T.splitTextToSize(j,k))},[])):c=Array.isArray(c)?c:[c];for(var D=0;D<c.length;D++)g<(y=this.getStringUnitWidth(c[D],{font:m})*f)&&(g=y);return g!==0&&(b=c.length),{w:g/=p,h:Math.max((b*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/p,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=t.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,m=this.internal.__cell__.margins||e,p=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=m.top,g&&p&&(this.printHeaderRow(c.lineNumber,!0),c.y+=p[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-f,c.y+f,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+f,{align:"center",baseline:"top",maxWidth:c.width-f-f}):this.text(c.text,c.x+f,c.y+f,{align:"left",baseline:"top",maxWidth:c.width-f-f})),this.internal.__cell__.lastCell=c,this};t.table=function(c,u,f,m,p){if(n.call(this),!f)throw new Error("No data for PDF table.");var g,b,y,T,k=[],D=[],L=[],j={},H={},U=[],E=[],_=(p=p||{}).autoSize||!1,B=p.printHeaders!==!1,Q=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,R=p.margins||Object.assign({width:this.getPageWidth()},e),F=typeof p.padding=="number"?p.padding:3,V=p.headerBackgroundColor||"#c8c8c8",X=p.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=B,this.internal.__cell__.margins=R,this.internal.__cell__.table_font_size=Q,this.internal.__cell__.padding=F,this.internal.__cell__.headerBackgroundColor=V,this.internal.__cell__.headerTextColor=X,this.setFontSize(Q),m==null)D=k=Object.keys(f[0]),L=k.map(function(){return"left"});else if(Array.isArray(m)&&On(m[0])==="object")for(k=m.map(function(W){return W.name}),D=m.map(function(W){return W.prompt||W.name||""}),L=m.map(function(W){return W.align||"left"}),g=0;g<m.length;g+=1)H[m[g].name]=m[g].width*(19.049976/25.4);else Array.isArray(m)&&typeof m[0]=="string"&&(D=k=m,L=k.map(function(){return"left"}));if(_||Array.isArray(m)&&typeof m[0]=="string")for(g=0;g<k.length;g+=1){for(j[T=k[g]]=f.map(function(W){return W[T]}),this.setFont(void 0,"bold"),U.push(this.getTextDimensions(D[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=j[T],this.setFont(void 0,"normal"),y=0;y<b.length;y+=1)U.push(this.getTextDimensions(b[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);H[T]=Math.max.apply(null,U)+F+F,U=[]}if(B){var oe={};for(g=0;g<k.length;g+=1)oe[k[g]]={},oe[k[g]].text=D[g],oe[k[g]].align=L[g];var te=o.call(this,oe,H);E=k.map(function(W){return new s(c,u,H[W],te,oe[W].text,void 0,oe[W].align)}),this.setTableHeaderRow(E),this.printHeaderRow(1,!1)}var ae=m.reduce(function(W,de){return W[de.name]=de.align,W},{});for(g=0;g<f.length;g+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:g,data:f[g]},this);var q=o.call(this,f[g],H);for(y=0;y<k.length;y+=1){var J=f[g][k[y]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:g,col:y,data:J},this),i.call(this,new s(c,u,H[k[y]],q,J,g+2,ae[k[y]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var o=function(c,u){var f=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(c).map(function(g){var b=c[g];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,u[g]-f-f)},this).map(function(g){return this.getLineHeightFactor()*g.length*m/p+f+f},this).reduce(function(g,b){return Math.max(g,b)},0)};t.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},t.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){f=this.internal.__cell__.tableHeaderRow[g].clone(),u&&(f.y=this.internal.__cell__.margins.top||0,p.push(f)),f.lineNumber=c;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,f),this.setTextColor(b)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),r=!1}}(ir.API);var HL={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},VL=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],mE=QL(VL),GL=[100,200,300,400,500,600,700,800,900],gne=QL(GL);function pE(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return HL[s=s||"normal"]?s:"normal"}(t.style),n=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),a=function(s){return typeof mE[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:a,src:t.src||[],ref:t.ref||{name:e,style:[a,r,n].join(" ")}}}function mI(t,e,r,n){var a;for(a=r;a>=0&&a<e.length;a+=n)if(t[e[a]])return t[e[a]];for(a=r;a>=0&&a<e.length;a-=n)if(t[e[a]])return t[e[a]]}var xne={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},pI={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function gI(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function vne(t,e,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},xne,r.genericFontFamilies||{}),s=null,i=null,o=0;o<e.length;++o)if(a[(s=pE(e[o])).family]&&(s.family=a[s.family]),t.hasOwnProperty(s.family)){i=t[s.family];break}if(!(i=i||t[n]))throw new Error("Could not find a font-family for the rule '"+gI(s)+"' and default family '"+n+"'.");if(i=function(c,u){if(u[c])return u[c];var f=mE[c],m=f<=mE.normal?-1:1,p=mI(u,VL,f,m);if(!p)throw new Error("Could not find a matching font-stretch value for "+c);return p}(s.stretch,i),i=function(c,u){if(u[c])return u[c];for(var f=HL[c],m=0;m<f.length;++m)if(u[f[m]])return u[f[m]];throw new Error("Could not find a matching font-style for "+c)}(s.style,i),!(i=function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var f=gne[c],m=mI(u,GL,f,c<400?-1:1);if(!m)throw new Error("Could not find a matching font-weight for value "+c);return m}(s.weight,i)))throw new Error("Failed to resolve a font for the rule '"+gI(s)+"'.");return i}function xI(t){return t.trimLeft()}function wne(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function yne(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var b1,vI,wI,Bb=["times"];(function(t){var e,r,n,a,s,i,o,c,u,f=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new c,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new i,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new i,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new m(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,i=this.internal.Point,o=this.internal.Rectangle,c=this.internal.Matrix,u=new f}]);var m=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var K=P;Object.defineProperty(this,"pdf",{get:function(){return K}});var Y=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Y},set:function(De){Y=!!De}});var ee=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ee},set:function(De){ee=!!De}});var Ae=0;Object.defineProperty(this,"posX",{get:function(){return Ae},set:function(De){isNaN(De)||(Ae=De)}});var Se=0;Object.defineProperty(this,"posY",{get:function(){return Se},set:function(De){isNaN(De)||(Se=De)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(De){var Ee;typeof De=="number"?Ee=[De,De,De,De]:((Ee=new Array(4))[0]=De[0],Ee[1]=De.length>=2?De[1]:Ee[0],Ee[2]=De.length>=3?De[2]:Ee[0],Ee[3]=De.length>=4?De[3]:Ee[1]),u.margin=Ee}});var ge=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ge},set:function(De){ge=De}});var pe=0;Object.defineProperty(this,"lastBreak",{get:function(){return pe},set:function(De){pe=De}});var ye=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ye},set:function(De){ye=De}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(De){De instanceof f&&(u=De)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(De){u.path=De}});var ue=[];Object.defineProperty(this,"ctxStack",{get:function(){return ue},set:function(De){ue=De}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(De){var Ee;Ee=p(De),this.ctx.fillStyle=Ee.style,this.ctx.isFillTransparent=Ee.a===0,this.ctx.fillOpacity=Ee.a,this.pdf.setFillColor(Ee.r,Ee.g,Ee.b,{a:Ee.a}),this.pdf.setTextColor(Ee.r,Ee.g,Ee.b,{a:Ee.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(De){var Ee=p(De);this.ctx.strokeStyle=Ee.style,this.ctx.isStrokeTransparent=Ee.a===0,this.ctx.strokeOpacity=Ee.a,Ee.a===0?this.pdf.setDrawColor(255,255,255):(Ee.a,this.pdf.setDrawColor(Ee.r,Ee.g,Ee.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(De){["butt","round","square"].indexOf(De)!==-1&&(this.ctx.lineCap=De,this.pdf.setLineCap(De))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(De){isNaN(De)||(this.ctx.lineWidth=De,this.pdf.setLineWidth(De))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(De){["bevel","round","miter"].indexOf(De)!==-1&&(this.ctx.lineJoin=De,this.pdf.setLineJoin(De))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(De){isNaN(De)||(this.ctx.miterLimit=De,this.pdf.setMiterLimit(De))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(De){this.ctx.textBaseline=De}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(De){["right","end","center","left","start"].indexOf(De)!==-1&&(this.ctx.textAlign=De)}});var se=null;function Pe(De,Ee){if(se===null){var Le=function(it){var et=[];return Object.keys(it).forEach(function(ht){it[ht].forEach(function(Et){var At=null;switch(Et){case"bold":At={family:ht,weight:"bold"};break;case"italic":At={family:ht,style:"italic"};break;case"bolditalic":At={family:ht,weight:"bold",style:"italic"};break;case"":case"normal":At={family:ht}}At!==null&&(At.ref={name:ht,style:Et},et.push(At))})}),et}(De.getFontList());se=function(it){for(var et={},ht=0;ht<it.length;++ht){var Et=pE(it[ht]),At=Et.family,jt=Et.stretch,Kt=Et.style,Yt=Et.weight;et[At]=et[At]||{},et[At][jt]=et[At][jt]||{},et[At][jt][Kt]=et[At][jt][Kt]||{},et[At][jt][Kt][Yt]=Et}return et}(Le.concat(Ee))}return se}var at=null;Object.defineProperty(this,"fontFaces",{get:function(){return at},set:function(De){se=null,at=De}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(De){var Ee;if(this.ctx.font=De,(Ee=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(De))!==null){var Le=Ee[1],it=(Ee[2],Ee[3]),et=Ee[4],ht=(Ee[5],Ee[6]),Et=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(et)[2];et=Math.floor(Et==="px"?parseFloat(et)*this.pdf.internal.scaleFactor:Et==="em"?parseFloat(et)*this.pdf.getFontSize():parseFloat(et)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(et);var At=function(kt){var It,_t,Yr=[],tr=kt.trim();if(tr==="")return Bb;if(tr in pI)return[pI[tr]];for(;tr!=="";){switch(_t=null,It=(tr=xI(tr)).charAt(0)){case'"':case"'":_t=wne(tr.substring(1),It);break;default:_t=yne(tr)}if(_t===null||(Yr.push(_t[0]),(tr=xI(_t[1]))!==""&&tr.charAt(0)!==","))return Bb;tr=tr.replace(/^,/,"")}return Yr}(ht);if(this.fontFaces){var jt=vne(Pe(this.pdf,this.fontFaces),At.map(function(kt){return{family:kt,stretch:"normal",weight:it,style:Le}}));this.pdf.setFont(jt.ref.name,jt.ref.style)}else{var Kt="";(it==="bold"||parseInt(it,10)>=700||Le==="bold")&&(Kt="bold"),Le==="italic"&&(Kt+="italic"),Kt.length===0&&(Kt="normal");for(var Yt="",Qt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Gt=0;Gt<At.length;Gt++){if(this.pdf.internal.getFont(At[Gt],Kt,{noFallback:!0,disableWarning:!0})!==void 0){Yt=At[Gt];break}if(Kt==="bolditalic"&&this.pdf.internal.getFont(At[Gt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Yt=At[Gt],Kt="bold";else if(this.pdf.internal.getFont(At[Gt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Yt=At[Gt],Kt="normal";break}}if(Yt===""){for(var Wt=0;Wt<At.length;Wt++)if(Qt[At[Wt]]){Yt=Qt[At[Wt]];break}}Yt=Yt===""?"Times":Yt,this.pdf.setFont(Yt,Kt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(De){this.ctx.globalCompositeOperation=De}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(De){this.ctx.globalAlpha=De}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(De){this.ctx.lineDashOffset=De,de.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(De){this.ctx.lineDash=De,de.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(De){this.ctx.ignoreClearRect=!!De}})};m.prototype.setLineDash=function(P){this.lineDash=P},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){j.call(this,"fill",!1)},m.prototype.stroke=function(){j.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(P,K){if(isNaN(P)||isNaN(K))throw Xn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Y=this.ctx.transform.applyToPoint(new i(P,K));this.path.push({type:"mt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new i(P,K)},m.prototype.closePath=function(){var P=new i(0,0),K=0;for(K=this.path.length-1;K!==-1;K--)if(this.path[K].type==="begin"&&On(this.path[K+1])==="object"&&typeof this.path[K+1].x=="number"){P=new i(this.path[K+1].x,this.path[K+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(P.x,P.y)},m.prototype.lineTo=function(P,K){if(isNaN(P)||isNaN(K))throw Xn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Y=this.ctx.transform.applyToPoint(new i(P,K));this.path.push({type:"lt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new i(Y.x,Y.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),j.call(this,null,!0)},m.prototype.quadraticCurveTo=function(P,K,Y,ee){if(isNaN(Y)||isNaN(ee)||isNaN(P)||isNaN(K))throw Xn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Ae=this.ctx.transform.applyToPoint(new i(Y,ee)),Se=this.ctx.transform.applyToPoint(new i(P,K));this.path.push({type:"qct",x1:Se.x,y1:Se.y,x:Ae.x,y:Ae.y}),this.ctx.lastPoint=new i(Ae.x,Ae.y)},m.prototype.bezierCurveTo=function(P,K,Y,ee,Ae,Se){if(isNaN(Ae)||isNaN(Se)||isNaN(P)||isNaN(K)||isNaN(Y)||isNaN(ee))throw Xn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ge=this.ctx.transform.applyToPoint(new i(Ae,Se)),pe=this.ctx.transform.applyToPoint(new i(P,K)),ye=this.ctx.transform.applyToPoint(new i(Y,ee));this.path.push({type:"bct",x1:pe.x,y1:pe.y,x2:ye.x,y2:ye.y,x:ge.x,y:ge.y}),this.ctx.lastPoint=new i(ge.x,ge.y)},m.prototype.arc=function(P,K,Y,ee,Ae,Se){if(isNaN(P)||isNaN(K)||isNaN(Y)||isNaN(ee)||isNaN(Ae))throw Xn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Se=!!Se,!this.ctx.transform.isIdentity){var ge=this.ctx.transform.applyToPoint(new i(P,K));P=ge.x,K=ge.y;var pe=this.ctx.transform.applyToPoint(new i(0,Y)),ye=this.ctx.transform.applyToPoint(new i(0,0));Y=Math.sqrt(Math.pow(pe.x-ye.x,2)+Math.pow(pe.y-ye.y,2))}Math.abs(Ae-ee)>=2*Math.PI&&(ee=0,Ae=2*Math.PI),this.path.push({type:"arc",x:P,y:K,radius:Y,startAngle:ee,endAngle:Ae,counterclockwise:Se})},m.prototype.arcTo=function(P,K,Y,ee,Ae){throw new Error("arcTo not implemented.")},m.prototype.rect=function(P,K,Y,ee){if(isNaN(P)||isNaN(K)||isNaN(Y)||isNaN(ee))throw Xn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,K),this.lineTo(P+Y,K),this.lineTo(P+Y,K+ee),this.lineTo(P,K+ee),this.lineTo(P,K),this.lineTo(P+Y,K),this.lineTo(P,K)},m.prototype.fillRect=function(P,K,Y,ee){if(isNaN(P)||isNaN(K)||isNaN(Y)||isNaN(ee))throw Xn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var Ae={};this.lineCap!=="butt"&&(Ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,K,Y,ee),this.fill(),Ae.hasOwnProperty("lineCap")&&(this.lineCap=Ae.lineCap),Ae.hasOwnProperty("lineJoin")&&(this.lineJoin=Ae.lineJoin)}},m.prototype.strokeRect=function(P,K,Y,ee){if(isNaN(P)||isNaN(K)||isNaN(Y)||isNaN(ee))throw Xn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(P,K,Y,ee),this.stroke())},m.prototype.clearRect=function(P,K,Y,ee){if(isNaN(P)||isNaN(K)||isNaN(Y)||isNaN(ee))throw Xn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,K,Y,ee))},m.prototype.save=function(P){P=typeof P!="boolean"||P;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("q");if(this.pdf.setPage(K),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var ee=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ee}},m.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("Q");this.pdf.setPage(K),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(P){var K,Y,ee,Ae;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))K=0,Y=0,ee=0,Ae=0;else{var Se=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(Se!==null)K=parseInt(Se[1]),Y=parseInt(Se[2]),ee=parseInt(Se[3]),Ae=1;else if((Se=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)K=parseInt(Se[1]),Y=parseInt(Se[2]),ee=parseInt(Se[3]),Ae=parseFloat(Se[4]);else{if(Ae=1,typeof P=="string"&&P.charAt(0)!=="#"){var ge=new LL(P);P=ge.ok?ge.toHex():"#000000"}P.length===4?(K=P.substring(1,2),K+=K,Y=P.substring(2,3),Y+=Y,ee=P.substring(3,4),ee+=ee):(K=P.substring(1,3),Y=P.substring(3,5),ee=P.substring(5,7)),K=parseInt(K,16),Y=parseInt(Y,16),ee=parseInt(ee,16)}}return{r:K,g:Y,b:ee,a:Ae,style:P}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(P,K,Y,ee){if(isNaN(K)||isNaN(Y)||typeof P!="string")throw Xn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ee=isNaN(ee)?void 0:ee,!g.call(this)){var Ae=q(this.ctx.transform.rotation),Se=this.ctx.transform.scaleX;F.call(this,{text:P,x:K,y:Y,scale:Se,angle:Ae,align:this.textAlign,maxWidth:ee})}},m.prototype.strokeText=function(P,K,Y,ee){if(isNaN(K)||isNaN(Y)||typeof P!="string")throw Xn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){ee=isNaN(ee)?void 0:ee;var Ae=q(this.ctx.transform.rotation),Se=this.ctx.transform.scaleX;F.call(this,{text:P,x:K,y:Y,scale:Se,renderingMode:"stroke",angle:Ae,align:this.textAlign,maxWidth:ee})}},m.prototype.measureText=function(P){if(typeof P!="string")throw Xn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var K=this.pdf,Y=this.pdf.internal.scaleFactor,ee=K.internal.getFontSize(),Ae=K.getStringUnitWidth(P)*ee/K.internal.scaleFactor,Se=function(ge){var pe=(ge=ge||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return pe}}),this};return new Se({width:Ae*=Math.round(96*Y/72*1e4)/1e4})},m.prototype.scale=function(P,K){if(isNaN(P)||isNaN(K))throw Xn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Y=new c(P,0,0,K,0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},m.prototype.rotate=function(P){if(isNaN(P))throw Xn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var K=new c(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(K)},m.prototype.translate=function(P,K){if(isNaN(P)||isNaN(K))throw Xn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Y=new c(1,0,0,1,P,K);this.ctx.transform=this.ctx.transform.multiply(Y)},m.prototype.transform=function(P,K,Y,ee,Ae,Se){if(isNaN(P)||isNaN(K)||isNaN(Y)||isNaN(ee)||isNaN(Ae)||isNaN(Se))throw Xn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ge=new c(P,K,Y,ee,Ae,Se);this.ctx.transform=this.ctx.transform.multiply(ge)},m.prototype.setTransform=function(P,K,Y,ee,Ae,Se){P=isNaN(P)?1:P,K=isNaN(K)?0:K,Y=isNaN(Y)?0:Y,ee=isNaN(ee)?1:ee,Ae=isNaN(Ae)?0:Ae,Se=isNaN(Se)?0:Se,this.ctx.transform=new c(P,K,Y,ee,Ae,Se)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(P,K,Y,ee,Ae,Se,ge,pe,ye){var ue=this.pdf.getImageProperties(P),se=1,Pe=1,at=1,De=1;ee!==void 0&&pe!==void 0&&(at=pe/ee,De=ye/Ae,se=ue.width/ee*pe/ee,Pe=ue.height/Ae*ye/Ae),Se===void 0&&(Se=K,ge=Y,K=0,Y=0),ee!==void 0&&pe===void 0&&(pe=ee,ye=Ae),ee===void 0&&pe===void 0&&(pe=ue.width,ye=ue.height);for(var Ee,Le=this.ctx.transform.decompose(),it=q(Le.rotate.shx),et=new c,ht=(et=(et=(et=et.multiply(Le.translate)).multiply(Le.skew)).multiply(Le.scale)).applyToRectangle(new o(Se-K*at,ge-Y*De,ee*se,Ae*Pe)),Et=T.call(this,ht),At=[],jt=0;jt<Et.length;jt+=1)At.indexOf(Et[jt])===-1&&At.push(Et[jt]);if(L(At),this.autoPaging)for(var Kt=At[0],Yt=At[At.length-1],Qt=Kt;Qt<Yt+1;Qt++){this.pdf.setPage(Qt);var Gt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Wt=Qt===1?this.posY+this.margin[0]:this.margin[0],kt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],It=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],_t=Qt===1?0:kt+(Qt-2)*It;if(this.ctx.clip_path.length!==0){var Yr=this.path;Ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(Ee,this.posX+this.margin[3],-_t+Wt+this.ctx.prevPageLastElemOffset),H.call(this,"fill",!0),this.path=Yr}var tr=JSON.parse(JSON.stringify(ht));tr=D([tr],this.posX+this.margin[3],-_t+Wt+this.ctx.prevPageLastElemOffset)[0];var $n=(Qt>Kt||Qt<Yt)&&y.call(this);$n&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Gt,It,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",tr.x,tr.y,tr.w,tr.h,null,null,it),$n&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",ht.x,ht.y,ht.w,ht.h,null,null,it)};var T=function(P,K,Y){var ee=[];K=K||this.pdf.internal.pageSize.width,Y=Y||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Ae=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":ee.push(Math.floor((P.y+Ae)/Y)+1);break;case"arc":ee.push(Math.floor((P.y+Ae-P.radius)/Y)+1),ee.push(Math.floor((P.y+Ae+P.radius)/Y)+1);break;case"qct":var Se=J(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);ee.push(Math.floor((Se.y+Ae)/Y)+1),ee.push(Math.floor((Se.y+Se.h+Ae)/Y)+1);break;case"bct":var ge=W(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);ee.push(Math.floor((ge.y+Ae)/Y)+1),ee.push(Math.floor((ge.y+ge.h+Ae)/Y)+1);break;case"rect":ee.push(Math.floor((P.y+Ae)/Y)+1),ee.push(Math.floor((P.y+P.h+Ae)/Y)+1)}for(var pe=0;pe<ee.length;pe+=1)for(;this.pdf.internal.getNumberOfPages()<ee[pe];)k.call(this);return ee},k=function(){var P=this.fillStyle,K=this.strokeStyle,Y=this.font,ee=this.lineCap,Ae=this.lineWidth,Se=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=K,this.font=Y,this.lineCap=ee,this.lineWidth=Ae,this.lineJoin=Se},D=function(P,K,Y){for(var ee=0;ee<P.length;ee++)switch(P[ee].type){case"bct":P[ee].x2+=K,P[ee].y2+=Y;case"qct":P[ee].x1+=K,P[ee].y1+=Y;case"mt":case"lt":case"arc":default:P[ee].x+=K,P[ee].y+=Y}return P},L=function(P){return P.sort(function(K,Y){return K-Y})},j=function(P,K){for(var Y,ee,Ae=this.fillStyle,Se=this.strokeStyle,ge=this.lineCap,pe=this.lineWidth,ye=Math.abs(pe*this.ctx.transform.scaleX),ue=this.lineJoin,se=JSON.parse(JSON.stringify(this.path)),Pe=JSON.parse(JSON.stringify(this.path)),at=[],De=0;De<Pe.length;De++)if(Pe[De].x!==void 0)for(var Ee=T.call(this,Pe[De]),Le=0;Le<Ee.length;Le+=1)at.indexOf(Ee[Le])===-1&&at.push(Ee[Le]);for(var it=0;it<at.length;it++)for(;this.pdf.internal.getNumberOfPages()<at[it];)k.call(this);if(L(at),this.autoPaging)for(var et=at[0],ht=at[at.length-1],Et=et;Et<ht+1;Et++){this.pdf.setPage(Et),this.fillStyle=Ae,this.strokeStyle=Se,this.lineCap=ge,this.lineWidth=ye,this.lineJoin=ue;var At=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],jt=Et===1?this.posY+this.margin[0]:this.margin[0],Kt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Yt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Qt=Et===1?0:Kt+(Et-2)*Yt;if(this.ctx.clip_path.length!==0){var Gt=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(Y,this.posX+this.margin[3],-Qt+jt+this.ctx.prevPageLastElemOffset),H.call(this,P,!0),this.path=Gt}if(ee=JSON.parse(JSON.stringify(se)),this.path=D(ee,this.posX+this.margin[3],-Qt+jt+this.ctx.prevPageLastElemOffset),K===!1||Et===0){var Wt=(Et>et||Et<ht)&&y.call(this);Wt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],At,Yt,null).clip().discardPath()),H.call(this,P,K),Wt&&this.pdf.restoreGraphicsState()}this.lineWidth=pe}else this.lineWidth=ye,H.call(this,P,K),this.lineWidth=pe;this.path=se},H=function(P,K){if((P!=="stroke"||K||!b.call(this))&&(P==="stroke"||K||!g.call(this))){for(var Y,ee,Ae=[],Se=this.path,ge=0;ge<Se.length;ge++){var pe=Se[ge];switch(pe.type){case"begin":Ae.push({begin:!0});break;case"close":Ae.push({close:!0});break;case"mt":Ae.push({start:pe,deltas:[],abs:[]});break;case"lt":var ye=Ae.length;if(Se[ge-1]&&!isNaN(Se[ge-1].x)&&(Y=[pe.x-Se[ge-1].x,pe.y-Se[ge-1].y],ye>0)){for(;ye>=0;ye--)if(Ae[ye-1].close!==!0&&Ae[ye-1].begin!==!0){Ae[ye-1].deltas.push(Y),Ae[ye-1].abs.push(pe);break}}break;case"bct":Y=[pe.x1-Se[ge-1].x,pe.y1-Se[ge-1].y,pe.x2-Se[ge-1].x,pe.y2-Se[ge-1].y,pe.x-Se[ge-1].x,pe.y-Se[ge-1].y],Ae[Ae.length-1].deltas.push(Y);break;case"qct":var ue=Se[ge-1].x+2/3*(pe.x1-Se[ge-1].x),se=Se[ge-1].y+2/3*(pe.y1-Se[ge-1].y),Pe=pe.x+2/3*(pe.x1-pe.x),at=pe.y+2/3*(pe.y1-pe.y),De=pe.x,Ee=pe.y;Y=[ue-Se[ge-1].x,se-Se[ge-1].y,Pe-Se[ge-1].x,at-Se[ge-1].y,De-Se[ge-1].x,Ee-Se[ge-1].y],Ae[Ae.length-1].deltas.push(Y);break;case"arc":Ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(Ae[Ae.length-1].abs)&&Ae[Ae.length-1].abs.push(pe)}}ee=K?null:P==="stroke"?"stroke":"fill";for(var Le=!1,it=0;it<Ae.length;it++)if(Ae[it].arc)for(var et=Ae[it].abs,ht=0;ht<et.length;ht++){var Et=et[ht];Et.type==="arc"?_.call(this,Et.x,Et.y,Et.radius,Et.startAngle,Et.endAngle,Et.counterclockwise,void 0,K,!Le):V.call(this,Et.x,Et.y),Le=!0}else if(Ae[it].close===!0)this.pdf.internal.out("h"),Le=!1;else if(Ae[it].begin!==!0){var At=Ae[it].start.x,jt=Ae[it].start.y;X.call(this,Ae[it].deltas,At,jt),Le=!0}ee&&B.call(this,ee),K&&Q.call(this)}},U=function(P){var K=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Y=K*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-Y;case"top":return P+K-Y;case"hanging":return P+K-2*Y;case"middle":return P+K/2-Y;case"ideographic":return P;case"alphabetic":default:return P}},E=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(K,Y){this.colorStops.push([K,Y])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var _=function(P,K,Y,ee,Ae,Se,ge,pe,ye){for(var ue=te.call(this,Y,ee,Ae,Se),se=0;se<ue.length;se++){var Pe=ue[se];se===0&&(ye?R.call(this,Pe.x1+P,Pe.y1+K):V.call(this,Pe.x1+P,Pe.y1+K)),oe.call(this,P,K,Pe.x2,Pe.y2,Pe.x3,Pe.y3,Pe.x4,Pe.y4)}pe?Q.call(this):B.call(this,ge)},B=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Q=function(){this.pdf.clip(),this.pdf.discardPath()},R=function(P,K){this.pdf.internal.out(r(P)+" "+n(K)+" m")},F=function(P){var K;switch(P.align){case"right":case"end":K="right";break;case"center":K="center";break;case"left":case"start":default:K="left"}var Y=this.pdf.getTextDimensions(P.text),ee=U.call(this,P.y),Ae=E.call(this,ee)-Y.h,Se=this.ctx.transform.applyToPoint(new i(P.x,ee)),ge=this.ctx.transform.decompose(),pe=new c;pe=(pe=(pe=pe.multiply(ge.translate)).multiply(ge.skew)).multiply(ge.scale);for(var ye,ue,se,Pe=this.ctx.transform.applyToRectangle(new o(P.x,ee,Y.w,Y.h)),at=pe.applyToRectangle(new o(P.x,Ae,Y.w,Y.h)),De=T.call(this,at),Ee=[],Le=0;Le<De.length;Le+=1)Ee.indexOf(De[Le])===-1&&Ee.push(De[Le]);if(L(Ee),this.autoPaging)for(var it=Ee[0],et=Ee[Ee.length-1],ht=it;ht<et+1;ht++){this.pdf.setPage(ht);var Et=ht===1?this.posY+this.margin[0]:this.margin[0],At=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],jt=this.pdf.internal.pageSize.height-this.margin[2],Kt=jt-this.margin[0],Yt=this.pdf.internal.pageSize.width-this.margin[1],Qt=Yt-this.margin[3],Gt=ht===1?0:At+(ht-2)*Kt;if(this.ctx.clip_path.length!==0){var Wt=this.path;ye=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(ye,this.posX+this.margin[3],-1*Gt+Et),H.call(this,"fill",!0),this.path=Wt}var kt=D([JSON.parse(JSON.stringify(at))],this.posX+this.margin[3],-Gt+Et+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(ue=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ue*P.scale),se=this.lineWidth,this.lineWidth=se*P.scale);var It=this.autoPaging!=="text";if(It||kt.y+kt.h<=jt){if(It||kt.y>=Et&&kt.x<=Yt){var _t=It?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||Yt-kt.x)[0],Yr=D([JSON.parse(JSON.stringify(Pe))],this.posX+this.margin[3],-Gt+Et+this.ctx.prevPageLastElemOffset)[0],tr=It&&(ht>it||ht<et)&&y.call(this);tr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Qt,Kt,null).clip().discardPath()),this.pdf.text(_t,Yr.x,Yr.y,{angle:P.angle,align:K,renderingMode:P.renderingMode}),tr&&this.pdf.restoreGraphicsState()}}else kt.y<jt&&(this.ctx.prevPageLastElemOffset+=jt-kt.y);P.scale>=.01&&(this.pdf.setFontSize(ue),this.lineWidth=se)}else P.scale>=.01&&(ue=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ue*P.scale),se=this.lineWidth,this.lineWidth=se*P.scale),this.pdf.text(P.text,Se.x+this.posX,Se.y+this.posY,{angle:P.angle,align:K,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(ue),this.lineWidth=se)},V=function(P,K,Y,ee){Y=Y||0,ee=ee||0,this.pdf.internal.out(r(P+Y)+" "+n(K+ee)+" l")},X=function(P,K,Y){return this.pdf.lines(P,K,Y,null,null)},oe=function(P,K,Y,ee,Ae,Se,ge,pe){this.pdf.internal.out([e(a(Y+P)),e(s(ee+K)),e(a(Ae+P)),e(s(Se+K)),e(a(ge+P)),e(s(pe+K)),"c"].join(" "))},te=function(P,K,Y,ee){for(var Ae=2*Math.PI,Se=Math.PI/2;K>Y;)K-=Ae;var ge=Math.abs(Y-K);ge<Ae&&ee&&(ge=Ae-ge);for(var pe=[],ye=ee?-1:1,ue=K;ge>1e-5;){var se=ue+ye*Math.min(ge,Se);pe.push(ae.call(this,P,ue,se)),ge-=Math.abs(se-ue),ue=se}return pe},ae=function(P,K,Y){var ee=(Y-K)/2,Ae=P*Math.cos(ee),Se=P*Math.sin(ee),ge=Ae,pe=-Se,ye=ge*ge+pe*pe,ue=ye+ge*Ae+pe*Se,se=4/3*(Math.sqrt(2*ye*ue)-ue)/(ge*Se-pe*Ae),Pe=ge-se*pe,at=pe+se*ge,De=Pe,Ee=-at,Le=ee+K,it=Math.cos(Le),et=Math.sin(Le);return{x1:P*Math.cos(K),y1:P*Math.sin(K),x2:Pe*it-at*et,y2:Pe*et+at*it,x3:De*it-Ee*et,y3:De*et+Ee*it,x4:P*Math.cos(Y),y4:P*Math.sin(Y)}},q=function(P){return 180*P/Math.PI},J=function(P,K,Y,ee,Ae,Se){var ge=P+.5*(Y-P),pe=K+.5*(ee-K),ye=Ae+.5*(Y-Ae),ue=Se+.5*(ee-Se),se=Math.min(P,Ae,ge,ye),Pe=Math.max(P,Ae,ge,ye),at=Math.min(K,Se,pe,ue),De=Math.max(K,Se,pe,ue);return new o(se,at,Pe-se,De-at)},W=function(P,K,Y,ee,Ae,Se,ge,pe){var ye,ue,se,Pe,at,De,Ee,Le,it,et,ht,Et,At,jt,Kt=Y-P,Yt=ee-K,Qt=Ae-Y,Gt=Se-ee,Wt=ge-Ae,kt=pe-Se;for(ue=0;ue<41;ue++)it=(Ee=(se=P+(ye=ue/40)*Kt)+ye*((at=Y+ye*Qt)-se))+ye*(at+ye*(Ae+ye*Wt-at)-Ee),et=(Le=(Pe=K+ye*Yt)+ye*((De=ee+ye*Gt)-Pe))+ye*(De+ye*(Se+ye*kt-De)-Le),ue==0?(ht=it,Et=et,At=it,jt=et):(ht=Math.min(ht,it),Et=Math.min(Et,et),At=Math.max(At,it),jt=Math.max(jt,et));return new o(Math.round(ht),Math.round(Et),Math.round(At-ht),Math.round(jt-Et))},de=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,K,Y=(P=this.ctx.lineDash,K=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:K}));this.prevLineDash!==Y&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Y)}}})(ir.API),function(t){var e=function(s){var i,o,c,u,f,m,p,g,b,y;for(o=[],c=0,u=(s+=i="\0\0\0\0".slice(s.length%4||4)).length;u>c;c+=4)(f=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(m=(f=((f=((f=((f=(f-(y=f%85))/85)-(b=f%85))/85)-(g=f%85))/85)-(p=f%85))/85)%85,o.push(m+33,p+33,g+33,b+33,y+33)):o.push(122);return function(T,k){for(var D=k;D>0;D--)T.pop()}(o,i.length),String.fromCharCode.apply(String,o)+"~>"},r=function(s){var i,o,c,u,f,m=String,p="length",g=255,b="charCodeAt",y="slice",T="replace";for(s[y](-2),s=s[y](0,-2)[T](/\s/g,"")[T]("z","!!!!!"),c=[],u=0,f=(s+=i="uuuuu"[y](s[p]%5||5))[p];f>u;u+=5)o=52200625*(s[b](u)-33)+614125*(s[b](u+1)-33)+7225*(s[b](u+2)-33)+85*(s[b](u+3)-33)+(s[b](u+4)-33),c.push(g&o>>24,g&o>>16,g&o>>8,g&o);return function(k,D){for(var L=D;L>0;L--)k.pop()}(c,i[p]),m.fromCharCode.apply(m,c)},n=function(s){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),i.test(s)===!1)return"";for(var o="",c=0;c<s.length;c+=2)o+=String.fromCharCode("0x"+(s[c]+s[c+1]));return o},a=function(s){for(var i=new Uint8Array(s.length),o=s.length;o--;)i[o]=s.charCodeAt(o);return s=(i=AE(i)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};t.processDataByFilters=function(s,i){var o=0,c=s||"",u=[];for(typeof(i=i||[])=="string"&&(i=[i]),o=0;o<i.length;o+=1)switch(i[o]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(f){return("0"+f.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[o]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(ir.API),function(t){t.loadFile=function(e,r,n){return function(a,s,i){s=s!==!1,i=typeof i=="function"?i:function(){};var o=void 0;try{o=function(c,u,f){var m=new XMLHttpRequest,p=0,g=function(b){var y=b.length,T=[],k=String.fromCharCode;for(p=0;p<y;p+=1)T.push(k(255&b.charCodeAt(p)));return T.join("")};if(m.open("GET",c,!u),m.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(m.onload=function(){m.status===200?f(g(this.responseText)):f(void 0)}),m.send(null),u&&m.status===200)return g(m.responseText)}(a,s,i)}catch{}return o}(e,r,n)},t.loadImageFile=t.loadFile}(ir.API),function(t){function e(){return(xr.html2canvas?Promise.resolve(xr.html2canvas):Zv(()=>Promise.resolve().then(()=>sye),void 0)).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function r(){return(xr.DOMPurify?Promise.resolve(xr.DOMPurify):Zv(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var n=function(i){var o=On(i);return o==="undefined"?"undefined":o==="string"||i instanceof String?"string":o==="number"||i instanceof Number?"number":o==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":o==="object"?"object":"unknown"},a=function(i,o){var c=document.createElement(i);for(var u in o.className&&(c.className=o.className),o.innerHTML&&o.dompurify&&(c.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)c.style[u]=o.style[u];return c},s=function i(o){var c=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),u=i.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,i,1,[i])).set(o)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(i,o){return i.__proto__=o||s.prototype,i},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(i,o){return this.then(function(){switch(o=o||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(r).then(function(c){return this.set({src:a("div",{innerHTML:i,dompurify:c})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},s.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function c(u,f){for(var m=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),p=u.firstChild;p;p=p.nextSibling)f!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||m.appendChild(c(p,f));return u.nodeType===1&&(u.nodeName==="CANVAS"?(m.width=u.width,m.height=u.height,m.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(m.value=u.value),m.addEventListener("load",function(){m.scrollTop=u.scrollTop,m.scrollLeft=u.scrollLeft},!0)),m}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(o){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,o(this.prop.container,c)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(o){var c=this.opt.jsPDF,u=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var p=0;p<u.length;++p){var g=u[p],b=g.src.find(function(y){return y.format==="truetype"});b&&c.addFont(b.url,g.ref.name,g.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,c.context2d.save(!0),o(this.prop.container,m)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(i,o,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(i,o):this.outputPdf(i,o)},s.prototype.outputPdf=function(i,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,o)})},s.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},s.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(i){if(n(i)!=="object")return this;var o=Object.keys(i||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=i[c]};switch(c){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[c]=i[c]}}},this);return this.then(function(){return this.thenList(o)})},s.prototype.get=function(i,o){return this.then(function(){var c=i in s.template.prop?this.prop[i]:this.opt[i];return o?o(c):c})},s.prototype.setMargin=function(i){return this.then(function(){switch(n(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},s.prototype.setPageSize=function(i){function o(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(i=i||ir.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:o(i.inner.width,i.k),height:o(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},s.prototype.setProgress=function(i,o,c,u){return i!=null&&(this.progress.val=i),o!=null&&(this.progress.state=o),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(i,o,c,u){return this.setProgress(i?this.progress.val+i:null,o||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(i,o){var c=this;return this.thenCore(i,o,function(u,f){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(m){return c.updateProgress(null,u),m}).then(u,f).then(function(m){return c.updateProgress(1),m})})},s.prototype.thenCore=function(i,o,c){c=c||Promise.prototype.then,i&&(i=i.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),f=c.call(u,i,o);return s.convert(f,this.__proto__)},s.prototype.thenExternal=function(i,o){return Promise.prototype.then.call(this,i,o)},s.prototype.thenList=function(i){var o=this;return i.forEach(function(c){o=o.thenCore(c)}),o},s.prototype.catch=function(i){i&&(i=i.bind(this));var o=Promise.prototype.catch.call(this,i);return s.convert(o,this)},s.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},s.prototype.error=function(i){return this.then(function(){throw new Error(i)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,ir.getPageSize=function(i,o,c){if(On(i)==="object"){var u=i;i=u.orientation,o=u.unit||o,c=u.format||c}o=o||"mm",c=c||"a4",i=(""+(i||"P")).toLowerCase();var f,m=(""+c).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+o}var g,b=0,y=0;if(p.hasOwnProperty(m))b=p[m][1]/f,y=p[m][0]/f;else try{b=c[1],y=c[0]}catch{throw new Error("Invalid format: "+c)}if(i==="p"||i==="portrait")i="p",y>b&&(g=y,y=b,b=g);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",b>y&&(g=y,y=b,b=g)}return{width:y,height:b,unit:o,k:f,orientation:i}},t.html=function(i,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(pE):null;var c=new s(o);return o.worker?c:c.from(i).doCallback()}}(ir.API),ir.API.addJS=function(t){return wI=t,this.internal.events.subscribe("postPutResources",function(){b1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(b1+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),vI=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+wI+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){b1!==void 0&&vI!==void 0&&this.internal.out("/Names <</JavaScript "+b1+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var i=a[s],o=n.exec(i);if(o!=null){var c=o[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(i)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,f=[];for(s=0;s<u;s++){var m=r.internal.newObject();f.push(m);var p=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var g=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<f.length;s++)r.internal.write("(page_"+(s+1)+")"+f[s]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+g+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var i={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(i),i},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var i=n.children[s];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var c=r.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(ir.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,a,s,i,o){var c,u=this.decode.DCT_DECODE,f=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=i||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(m){for(var p,g=256*m.charCodeAt(4)+m.charCodeAt(5),b=m.length,y={width:0,height:0,numcomponents:1},T=4;T<b;T+=2){if(T+=g,e.indexOf(m.charCodeAt(T+1))!==-1){p=256*m.charCodeAt(T+5)+m.charCodeAt(T+6),y={width:256*m.charCodeAt(T+7)+m.charCodeAt(T+8),height:p,numcomponents:m.charCodeAt(T+9)};break}g=256*m.charCodeAt(T+2)+m.charCodeAt(T+3)}return y}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}f={data:r,width:c.width,height:c.height,colorSpace:o,bitsPerComponent:8,filter:u,index:n,alias:a}}return f}}(ir.API);var Yh,C1,yI,bI,CI,bne=function(){var t,e,r;function n(s){var i,o,c,u,f,m,p,g,b,y,T,k,D,L;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},m=null;;){switch(i=this.readUInt32(),b=(function(){var j,H;for(H=[],j=0;j<4;++j)H.push(String.fromCharCode(this.data[this.pos++]));return H}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":m&&this.animation.frames.push(m),this.pos+=4,m={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),u=this.readUInt16()||100,m.delay=1e3*f/u,m.disposeOp=this.data[this.pos++],m.blendOp=this.data[this.pos++],m.data=[];break;case"IDAT":case"fdAT":for(b==="fdAT"&&(this.pos+=4,i-=4),s=(m!=null?m.data:void 0)||this.imgData,k=0;0<=i?k<i:k>i;0<=i?++k:--k)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((y=c-this.transparency.indexed.length)>0)for(D=0;0<=y?D<y:D>y;0<=y?++D:--D)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":p=(T=this.read(i)).indexOf(0),g=String.fromCharCode.apply(String,T.slice(0,p)),this.text[g]=String.fromCharCode.apply(String,T.slice(p+1));break;case"IEND":return m&&this.animation.frames.push(m),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(L=this.colorType)===4||L===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(s){var i,o;for(o=[],i=0;0<=s?i<s:i>s;0<=s?++i:--i)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(s){var i=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*i),c=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function f(m,p,g,b){var y,T,k,D,L,j,H,U,E,_,B,Q,R,F,V,X,oe,te,ae,q,J,W=Math.ceil((u.width-m)/g),de=Math.ceil((u.height-p)/b),P=u.width==W&&u.height==de;for(F=i*W,Q=P?o:new Uint8Array(F*de),j=s.length,R=0,T=0;R<de&&c<j;){switch(s[c++]){case 0:for(D=oe=0;oe<F;D=oe+=1)Q[T++]=s[c++];break;case 1:for(D=te=0;te<F;D=te+=1)y=s[c++],L=D<i?0:Q[T-i],Q[T++]=(y+L)%256;break;case 2:for(D=ae=0;ae<F;D=ae+=1)y=s[c++],k=(D-D%i)/i,V=R&&Q[(R-1)*F+k*i+D%i],Q[T++]=(V+y)%256;break;case 3:for(D=q=0;q<F;D=q+=1)y=s[c++],k=(D-D%i)/i,L=D<i?0:Q[T-i],V=R&&Q[(R-1)*F+k*i+D%i],Q[T++]=(y+Math.floor((L+V)/2))%256;break;case 4:for(D=J=0;J<F;D=J+=1)y=s[c++],k=(D-D%i)/i,L=D<i?0:Q[T-i],R===0?V=X=0:(V=Q[(R-1)*F+k*i+D%i],X=k&&Q[(R-1)*F+(k-1)*i+D%i]),H=L+V-X,U=Math.abs(H-L),_=Math.abs(H-V),B=Math.abs(H-X),E=U<=_&&U<=B?L:_<=B?V:X,Q[T++]=(y+E)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!P){var K=((p+R*b)*u.width+m)*i,Y=R*F;for(D=0;D<W;D+=1){for(var ee=0;ee<i;ee+=1)o[K++]=Q[Y++];K+=(g-1)*i}}R++}}return s=ene(s),u.interlaceMethod==1?(f(0,0,8,8),f(4,0,8,8),f(0,4,4,8),f(2,0,4,4),f(0,2,2,4),f(1,0,2,2),f(0,1,1,2)):f(0,0,1,1),o},n.prototype.decodePalette=function(){var s,i,o,c,u,f,m,p,g;for(o=this.palette,f=this.transparency.indexed||[],u=new Uint8Array((f.length||0)+o.length),c=0,s=0,i=m=0,p=o.length;m<p;i=m+=3)u[c++]=o[i],u[c++]=o[i+1],u[c++]=o[i+2],u[c++]=(g=f[s++])!=null?g:255;return u},n.prototype.copyToImageData=function(s,i){var o,c,u,f,m,p,g,b,y,T,k;if(c=this.colors,y=null,o=this.hasAlphaChannel,this.palette.length&&(y=(k=this._decodedPalette)!=null?k:this._decodedPalette=this.decodePalette(),c=4,o=!0),b=(u=s.data||s).length,m=y||i,f=p=0,c===1)for(;f<b;)g=y?4*i[f/4]:p,T=m[g++],u[f++]=T,u[f++]=T,u[f++]=T,u[f++]=o?m[g++]:255,p=g;else for(;f<b;)g=y?4*i[f/4]:p,u[f++]=m[g++],u[f++]=m[g++],u[f++]=m[g++],u[f++]=o?m[g++]:255,p=g},n.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var a=function(){if(Object.prototype.toString.call(xr)==="[object Window]"){try{e=xr.document.createElement("canvas"),r=e.getContext("2d")}catch{return!1}return!0}return!1};return a(),t=function(s){var i;if(a()===!0)return r.width=s.width,r.height=s.height,r.clearRect(0,0,s.width,s.height),r.putImageData(s,0,0),(i=new Image).src=e.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(s){var i,o,c,u,f,m,p,g;if(this.animation){for(g=[],o=f=0,m=(p=this.animation.frames).length;f<m;o=++f)i=p[o],c=s.createImageData(i.width,i.height),u=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(c,u),i.imageData=c,g.push(i.image=t(c));return g}},n.prototype.renderFrame=function(s,i){var o,c,u;return o=(c=this.animation.frames)[i],u=c[i-1],i===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&s.clearRect(o.xOffset,o.yOffset,o.width,o.height),s.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(s){var i,o,c,u,f,m,p=this;return o=0,m=this.animation,u=m.numFrames,c=m.frames,f=m.numPlays,(i=function(){var g,b;if(g=o++%u,b=c[g],p.renderFrame(s,g),u>1&&o/u<f)return p.animation._timeout=setTimeout(i,b.delay)})()},n.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},n.prototype.render=function(s){var i,o;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,i=s.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(o=i.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),i.putImageData(o,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Cne(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,a=t[e++],s=a>>7,i=1<<(7&a)+1;t[e++],t[e++];var o=null,c=null;s&&(o=e,c=i,e+=3*i);var u=!0,f=[],m=0,p=null,g=0,b=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,b=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var y=t[e++];m=t[e++]|t[e++]<<8,p=t[e++],(1&y)==0&&(p=null),g=y>>2&7,e++;break;case 254:for(;;){if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var T=t[e++]|t[e++]<<8,k=t[e++]|t[e++]<<8,D=t[e++]|t[e++]<<8,L=t[e++]|t[e++]<<8,j=t[e++],H=j>>6&1,U=1<<(7&j)+1,E=o,_=c,B=!1;j>>7&&(B=!0,E=e,_=U,e+=3*U);var Q=e;for(e++;;){var R;if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}f.push({x:T,y:k,width:D,height:L,has_local_palette:B,palette_offset:E,palette_size:_,data_offset:Q,data_length:e-Q,transparent_index:p,interlaced:!!H,delay:m,disposal:g});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return b},this.frameInfo=function(F){if(F<0||F>=f.length)throw new Error("Frame index out of range.");return f[F]},this.decodeAndBlitFrameBGRA=function(F,V){var X=this.frameInfo(F),oe=X.width*X.height,te=new Uint8Array(oe);EI(t,X.data_offset,te,oe);var ae=X.palette_offset,q=X.transparent_index;q===null&&(q=256);var J=X.width,W=r-J,de=J,P=4*(X.y*r+X.x),K=4*((X.y+X.height)*r+X.x),Y=P,ee=4*W;X.interlaced===!0&&(ee+=4*r*7);for(var Ae=8,Se=0,ge=te.length;Se<ge;++Se){var pe=te[Se];if(de===0&&(de=J,(Y+=ee)>=K&&(ee=4*W+4*r*(Ae-1),Y=P+(J+W)*(Ae<<1),Ae>>=1)),pe===q)Y+=4;else{var ye=t[ae+3*pe],ue=t[ae+3*pe+1],se=t[ae+3*pe+2];V[Y++]=se,V[Y++]=ue,V[Y++]=ye,V[Y++]=255}--de}},this.decodeAndBlitFrameRGBA=function(F,V){var X=this.frameInfo(F),oe=X.width*X.height,te=new Uint8Array(oe);EI(t,X.data_offset,te,oe);var ae=X.palette_offset,q=X.transparent_index;q===null&&(q=256);var J=X.width,W=r-J,de=J,P=4*(X.y*r+X.x),K=4*((X.y+X.height)*r+X.x),Y=P,ee=4*W;X.interlaced===!0&&(ee+=4*r*7);for(var Ae=8,Se=0,ge=te.length;Se<ge;++Se){var pe=te[Se];if(de===0&&(de=J,(Y+=ee)>=K&&(ee=4*W+4*r*(Ae-1),Y=P+(J+W)*(Ae<<1),Ae>>=1)),pe===q)Y+=4;else{var ye=t[ae+3*pe],ue=t[ae+3*pe+1],se=t[ae+3*pe+2];V[Y++]=ye,V[Y++]=ue,V[Y++]=se,V[Y++]=255}--de}}}function EI(t,e,r,n){for(var a=t[e++],s=1<<a,i=s+1,o=i+1,c=a+1,u=(1<<c)-1,f=0,m=0,p=0,g=t[e++],b=new Int32Array(4096),y=null;;){for(;f<16&&g!==0;)m|=t[e++]<<f,f+=8,g===1?g=t[e++]:--g;if(f<c)break;var T=m&u;if(m>>=c,f-=c,T!==s){if(T===i)break;for(var k=T<o?T:y,D=0,L=k;L>s;)L=b[L]>>8,++D;var j=L;if(p+D+(k!==T?1:0)>n)return void Xn.log("Warning, gif stream longer than expected.");r[p++]=j;var H=p+=D;for(k!==T&&(r[p++]=j),L=k;D--;)L=b[L],r[--H]=255&L,L>>=8;y!==null&&o<4096&&(b[o++]=y<<8|j,o>=u+1&&c<12&&(++c,u=u<<1|1)),y=T}else o=i+1,u=(1<<(c=a+1))-1,y=null}return p!==n&&Xn.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Nb(t){var e,r,n,a,s,i=Math.floor,o=new Array(64),c=new Array(64),u=new Array(64),f=new Array(64),m=new Array(65535),p=new Array(65535),g=new Array(64),b=new Array(64),y=[],T=0,k=7,D=new Array(64),L=new Array(64),j=new Array(64),H=new Array(256),U=new Array(2048),E=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],_=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],Q=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],R=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],F=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],V=[0,1,2,3,4,5,6,7,8,9,10,11],X=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],oe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function te(P,K){for(var Y=0,ee=0,Ae=new Array,Se=1;Se<=16;Se++){for(var ge=1;ge<=P[Se];ge++)Ae[K[ee]]=[],Ae[K[ee]][0]=Y,Ae[K[ee]][1]=Se,ee++,Y++;Y*=2}return Ae}function ae(P){for(var K=P[0],Y=P[1]-1;Y>=0;)K&1<<Y&&(T|=1<<k),Y--,--k<0&&(T==255?(q(255),q(0)):q(T),k=7,T=0)}function q(P){y.push(P)}function J(P){q(P>>8&255),q(255&P)}function W(P,K,Y,ee,Ae){for(var Se,ge=Ae[0],pe=Ae[240],ye=function(et,ht){var Et,At,jt,Kt,Yt,Qt,Gt,Wt,kt,It,_t=0;for(kt=0;kt<8;++kt){Et=et[_t],At=et[_t+1],jt=et[_t+2],Kt=et[_t+3],Yt=et[_t+4],Qt=et[_t+5],Gt=et[_t+6];var Yr=Et+(Wt=et[_t+7]),tr=Et-Wt,$n=At+Gt,Ir=At-Gt,hn=jt+Qt,rs=jt-Qt,Mr=Kt+Yt,li=Kt-Yt,Bn=Yr+Mr,ga=Yr-Mr,Pa=$n+hn,mn=$n-hn;et[_t]=Bn+Pa,et[_t+4]=Bn-Pa;var ar=.707106781*(mn+ga);et[_t+2]=ga+ar,et[_t+6]=ga-ar;var zr=.382683433*((Bn=li+rs)-(mn=Ir+tr)),Ns=.5411961*Bn+zr,Zn=1.306562965*mn+zr,ja=.707106781*(Pa=rs+Ir),zs=tr+ja,Ht=tr-ja;et[_t+5]=Ht+Ns,et[_t+3]=Ht-Ns,et[_t+1]=zs+Zn,et[_t+7]=zs-Zn,_t+=8}for(_t=0,kt=0;kt<8;++kt){Et=et[_t],At=et[_t+8],jt=et[_t+16],Kt=et[_t+24],Yt=et[_t+32],Qt=et[_t+40],Gt=et[_t+48];var pn=Et+(Wt=et[_t+56]),an=Et-Wt,Dn=At+Gt,Jn=At-Gt,ea=jt+Qt,fe=jt-Qt,Ne=Kt+Yt,Ce=Kt-Yt,_e=pn+Ne,Be=pn-Ne,ke=Dn+ea,qe=Dn-ea;et[_t]=_e+ke,et[_t+32]=_e-ke;var rt=.707106781*(qe+Be);et[_t+16]=Be+rt,et[_t+48]=Be-rt;var He=.382683433*((_e=Ce+fe)-(qe=Jn+an)),$e=.5411961*_e+He,Ze=1.306562965*qe+He,xt=.707106781*(ke=fe+Jn),Bt=an+xt,Ot=an-xt;et[_t+40]=Ot+$e,et[_t+24]=Ot-$e,et[_t+8]=Bt+Ze,et[_t+56]=Bt-Ze,_t++}for(kt=0;kt<64;++kt)It=et[kt]*ht[kt],g[kt]=It>0?It+.5|0:It-.5|0;return g}(P,K),ue=0;ue<64;++ue)b[E[ue]]=ye[ue];var se=b[0]-Y;Y=b[0],se==0?ae(ee[0]):(ae(ee[p[Se=32767+se]]),ae(m[Se]));for(var Pe=63;Pe>0&&b[Pe]==0;)Pe--;if(Pe==0)return ae(ge),Y;for(var at,De=1;De<=Pe;){for(var Ee=De;b[De]==0&&De<=Pe;)++De;var Le=De-Ee;if(Le>=16){at=Le>>4;for(var it=1;it<=at;++it)ae(pe);Le&=15}Se=32767+b[De],ae(Ae[(Le<<4)+p[Se]]),ae(m[Se]),De++}return Pe!=63&&ae(ge),Y}function de(P){P=Math.min(Math.max(P,1),100),s!=P&&(function(K){for(var Y=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ee=0;ee<64;ee++){var Ae=i((Y[ee]*K+50)/100);Ae=Math.min(Math.max(Ae,1),255),o[E[ee]]=Ae}for(var Se=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ge=0;ge<64;ge++){var pe=i((Se[ge]*K+50)/100);pe=Math.min(Math.max(pe,1),255),c[E[ge]]=pe}for(var ye=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ue=0,se=0;se<8;se++)for(var Pe=0;Pe<8;Pe++)u[ue]=1/(o[E[ue]]*ye[se]*ye[Pe]*8),f[ue]=1/(c[E[ue]]*ye[se]*ye[Pe]*8),ue++}(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),s=P)}this.encode=function(P,K){K&&de(K),y=new Array,T=0,k=7,J(65496),J(65504),J(16),q(74),q(70),q(73),q(70),q(0),q(1),q(1),q(0),J(1),J(1),q(0),q(0),function(){J(65499),J(132),q(0);for(var At=0;At<64;At++)q(o[At]);q(1);for(var jt=0;jt<64;jt++)q(c[jt])}(),function(At,jt){J(65472),J(17),q(8),J(jt),J(At),q(3),q(1),q(17),q(0),q(2),q(17),q(1),q(3),q(17),q(1)}(P.width,P.height),function(){J(65476),J(418),q(0);for(var At=0;At<16;At++)q(_[At+1]);for(var jt=0;jt<=11;jt++)q(B[jt]);q(16);for(var Kt=0;Kt<16;Kt++)q(Q[Kt+1]);for(var Yt=0;Yt<=161;Yt++)q(R[Yt]);q(1);for(var Qt=0;Qt<16;Qt++)q(F[Qt+1]);for(var Gt=0;Gt<=11;Gt++)q(V[Gt]);q(17);for(var Wt=0;Wt<16;Wt++)q(X[Wt+1]);for(var kt=0;kt<=161;kt++)q(oe[kt])}(),J(65498),J(12),q(3),q(1),q(0),q(2),q(17),q(3),q(17),q(0),q(63),q(0);var Y=0,ee=0,Ae=0;T=0,k=7,this.encode.displayName="_encode_";for(var Se,ge,pe,ye,ue,se,Pe,at,De,Ee=P.data,Le=P.width,it=P.height,et=4*Le,ht=0;ht<it;){for(Se=0;Se<et;){for(ue=et*ht+Se,Pe=-1,at=0,De=0;De<64;De++)se=ue+(at=De>>3)*et+(Pe=4*(7&De)),ht+at>=it&&(se-=et*(ht+1+at-it)),Se+Pe>=et&&(se-=Se+Pe-et+4),ge=Ee[se++],pe=Ee[se++],ye=Ee[se++],D[De]=(U[ge]+U[pe+256>>0]+U[ye+512>>0]>>16)-128,L[De]=(U[ge+768>>0]+U[pe+1024>>0]+U[ye+1280>>0]>>16)-128,j[De]=(U[ge+1280>>0]+U[pe+1536>>0]+U[ye+1792>>0]>>16)-128;Y=W(D,u,Y,e,n),ee=W(L,f,ee,r,a),Ae=W(j,f,Ae,r,a),Se+=32}ht+=8}if(k>=0){var Et=[];Et[1]=k+1,Et[0]=(1<<k+1)-1,ae(Et)}return J(65497),new Uint8Array(y)},t=t||50,function(){for(var P=String.fromCharCode,K=0;K<256;K++)H[K]=P(K)}(),e=te(_,B),r=te(F,V),n=te(Q,R),a=te(X,oe),function(){for(var P=1,K=2,Y=1;Y<=15;Y++){for(var ee=P;ee<K;ee++)p[32767+ee]=Y,m[32767+ee]=[],m[32767+ee][1]=Y,m[32767+ee][0]=ee;for(var Ae=-(K-1);Ae<=-P;Ae++)p[32767+Ae]=Y,m[32767+Ae]=[],m[32767+Ae][1]=Y,m[32767+Ae][0]=K-1+Ae;P<<=1,K<<=1}}(),function(){for(var P=0;P<256;P++)U[P]=19595*P,U[P+256>>0]=38470*P,U[P+512>>0]=7471*P+32768,U[P+768>>0]=-11059*P,U[P+1024>>0]=-21709*P,U[P+1280>>0]=32768*P+8421375,U[P+1536>>0]=-27439*P,U[P+1792>>0]=-5329*P}(),de(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function uc(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function _I(t){function e(_){if(!_)throw Error("assert :P")}function r(_,B,Q){for(var R=0;4>R;R++)if(_[B+R]!=Q.charCodeAt(R))return!0;return!1}function n(_,B,Q,R,F){for(var V=0;V<F;V++)_[B+V]=Q[R+V]}function a(_,B,Q,R){for(var F=0;F<R;F++)_[B+F]=Q}function s(_){return new Int32Array(_)}function i(_,B){for(var Q=[],R=0;R<_;R++)Q.push(new B);return Q}function o(_,B){var Q=[];return function R(F,V,X){for(var oe=X[V],te=0;te<oe&&(F.push(X.length>V+1?[]:new B),!(X.length<V+1));te++)R(F[te],V+1,X)}(Q,0,_),Q}var c=function(){var _=this;function B(C,I){for(var G=1<<I-1>>>0;C&G;)G>>>=1;return G?(C&G-1)+G:C}function Q(C,I,G,Z,le){e(!(Z%G));do C[I+(Z-=G)]=le;while(0<Z)}function R(C,I,G,Z,le){if(e(2328>=le),512>=le)var he=s(512);else if((he=s(le))==null)return 0;return function(me,xe,be,Te,Ue,Je){var Ke,Ge,pt=xe,st=1<<be,Me=s(16),Oe=s(16);for(e(Ue!=0),e(Te!=null),e(me!=null),e(0<be),Ge=0;Ge<Ue;++Ge){if(15<Te[Ge])return 0;++Me[Te[Ge]]}if(Me[0]==Ue)return 0;for(Oe[1]=0,Ke=1;15>Ke;++Ke){if(Me[Ke]>1<<Ke)return 0;Oe[Ke+1]=Oe[Ke]+Me[Ke]}for(Ge=0;Ge<Ue;++Ge)Ke=Te[Ge],0<Te[Ge]&&(Je[Oe[Ke]++]=Ge);if(Oe[15]==1)return(Te=new F).g=0,Te.value=Je[0],Q(me,pt,1,st,Te),st;var ct,gt=-1,dt=st-1,zt=0,Lt=1,rr=1,Mt=1<<be;for(Ge=0,Ke=1,Ue=2;Ke<=be;++Ke,Ue<<=1){if(Lt+=rr<<=1,0>(rr-=Me[Ke]))return 0;for(;0<Me[Ke];--Me[Ke])(Te=new F).g=Ke,Te.value=Je[Ge++],Q(me,pt+zt,Ue,Mt,Te),zt=B(zt,Ke)}for(Ke=be+1,Ue=2;15>=Ke;++Ke,Ue<<=1){if(Lt+=rr<<=1,0>(rr-=Me[Ke]))return 0;for(;0<Me[Ke];--Me[Ke]){if(Te=new F,(zt&dt)!=gt){for(pt+=Mt,ct=1<<(gt=Ke)-be;15>gt&&!(0>=(ct-=Me[gt]));)++gt,ct<<=1;st+=Mt=1<<(ct=gt-be),me[xe+(gt=zt&dt)].g=ct+be,me[xe+gt].value=pt-xe-gt}Te.g=Ke-be,Te.value=Je[Ge++],Q(me,pt+(zt>>be),Ue,Mt,Te),zt=B(zt,Ke)}}return Lt!=2*Oe[15]-1?0:st}(C,I,G,Z,le,he)}function F(){this.value=this.g=0}function V(){this.value=this.g=0}function X(){this.G=i(5,F),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(Oa,V)}function oe(C,I,G,Z){e(C!=null),e(I!=null),e(2147483648>Z),C.Ca=254,C.I=0,C.b=-8,C.Ka=0,C.oa=I,C.pa=G,C.Jd=I,C.Yc=G+Z,C.Zc=4<=Z?G+Z-4+1:G,Se(C)}function te(C,I){for(var G=0;0<I--;)G|=pe(C,128)<<I;return G}function ae(C,I){var G=te(C,I);return ge(C)?-G:G}function q(C,I,G,Z){var le,he=0;for(e(C!=null),e(I!=null),e(4294967288>Z),C.Sb=Z,C.Ra=0,C.u=0,C.h=0,4<Z&&(Z=4),le=0;le<Z;++le)he+=I[G+le]<<8*le;C.Ra=he,C.bb=Z,C.oa=I,C.pa=G}function J(C){for(;8<=C.u&&C.bb<C.Sb;)C.Ra>>>=8,C.Ra+=C.oa[C.pa+C.bb]<<RA-8>>>0,++C.bb,C.u-=8;Y(C)&&(C.h=1,C.u=0)}function W(C,I){if(e(0<=I),!C.h&&I<=DA){var G=K(C)&Dc[I];return C.u+=I,J(C),G}return C.h=1,C.u=0}function de(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function P(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function K(C){return C.Ra>>>(C.u&RA-1)>>>0}function Y(C){return e(C.bb<=C.Sb),C.h||C.bb==C.Sb&&C.u>RA}function ee(C,I){C.u=I,C.h=Y(C)}function Ae(C){C.u>=Du&&(e(C.u>=Du),J(C))}function Se(C){e(C!=null&&C.oa!=null),C.pa<C.Zc?(C.I=(C.oa[C.pa++]|C.I<<8)>>>0,C.b+=8):(e(C!=null&&C.oa!=null),C.pa<C.Yc?(C.b+=8,C.I=C.oa[C.pa++]|C.I<<8):C.Ka?C.b=0:(C.I<<=8,C.b+=8,C.Ka=1))}function ge(C){return te(C,1)}function pe(C,I){var G=C.Ca;0>C.b&&Se(C);var Z=C.b,le=G*I>>>8,he=(C.I>>>Z>le)+0;for(he?(G-=le,C.I-=le+1<<Z>>>0):G=le+1,Z=G,le=0;256<=Z;)le+=8,Z>>=8;return Z=7^le+hi[Z],C.b-=Z,C.Ca=(G<<Z)-1,he}function ye(C,I,G){C[I+0]=G>>24&255,C[I+1]=G>>16&255,C[I+2]=G>>8&255,C[I+3]=G>>0&255}function ue(C,I){return C[I+0]<<0|C[I+1]<<8}function se(C,I){return ue(C,I)|C[I+2]<<16}function Pe(C,I){return ue(C,I)|ue(C,I+2)<<16}function at(C,I){var G=1<<I;return e(C!=null),e(0<I),C.X=s(G),C.X==null?0:(C.Mb=32-I,C.Xa=I,1)}function De(C,I){e(C!=null),e(I!=null),e(C.Xa==I.Xa),n(I.X,0,C.X,0,1<<I.Xa)}function Ee(){this.X=[],this.Xa=this.Mb=0}function Le(C,I,G,Z){e(G!=null),e(Z!=null);var le=G[0],he=Z[0];return le==0&&(le=(C*he+I/2)/I),he==0&&(he=(I*le+C/2)/C),0>=le||0>=he?0:(G[0]=le,Z[0]=he,1)}function it(C,I){return C+(1<<I)-1>>>I}function et(C,I){return((4278255360&C)+(4278255360&I)>>>0&4278255360)+((16711935&C)+(16711935&I)>>>0&16711935)>>>0}function ht(C,I){_[I]=function(G,Z,le,he,me,xe,be){var Te;for(Te=0;Te<me;++Te){var Ue=_[C](xe[be+Te-1],le,he+Te);xe[be+Te]=et(G[Z+Te],Ue)}}}function Et(){this.ud=this.hd=this.jd=0}function At(C,I){return((4278124286&(C^I))>>>1)+(C&I)>>>0}function jt(C){return 0<=C&&256>C?C:0>C?0:255<C?255:void 0}function Kt(C,I){return jt(C+(C-I+.5>>1))}function Yt(C,I,G){return Math.abs(I-G)-Math.abs(C-G)}function Qt(C,I,G,Z,le,he,me){for(Z=he[me-1],G=0;G<le;++G)he[me+G]=Z=et(C[I+G],Z)}function Gt(C,I,G,Z,le){var he;for(he=0;he<G;++he){var me=C[I+he],xe=me>>8&255,be=16711935&(be=(be=16711935&me)+((xe<<16)+xe));Z[le+he]=(4278255360&me)+be>>>0}}function Wt(C,I){I.jd=C>>0&255,I.hd=C>>8&255,I.ud=C>>16&255}function kt(C,I,G,Z,le,he){var me;for(me=0;me<Z;++me){var xe=I[G+me],be=xe>>>8,Te=xe,Ue=255&(Ue=(Ue=xe>>>16)+((C.jd<<24>>24)*(be<<24>>24)>>>5));Te=255&(Te=(Te=Te+((C.hd<<24>>24)*(be<<24>>24)>>>5))+((C.ud<<24>>24)*(Ue<<24>>24)>>>5)),le[he+me]=(4278255360&xe)+(Ue<<16)+Te}}function It(C,I,G,Z,le){_[I]=function(he,me,xe,be,Te,Ue,Je,Ke,Ge){for(be=Je;be<Ke;++be)for(Je=0;Je<Ge;++Je)Te[Ue++]=le(xe[Z(he[me++])])},_[C]=function(he,me,xe,be,Te,Ue,Je){var Ke=8>>he.b,Ge=he.Ea,pt=he.K[0],st=he.w;if(8>Ke)for(he=(1<<he.b)-1,st=(1<<Ke)-1;me<xe;++me){var Me,Oe=0;for(Me=0;Me<Ge;++Me)Me&he||(Oe=Z(be[Te++])),Ue[Je++]=le(pt[Oe&st]),Oe>>=Ke}else _["VP8LMapColor"+G](be,Te,pt,st,Ue,Je,me,xe,Ge)}}function _t(C,I,G,Z,le){for(G=I+G;I<G;){var he=C[I++];Z[le++]=he>>16&255,Z[le++]=he>>8&255,Z[le++]=he>>0&255}}function Yr(C,I,G,Z,le){for(G=I+G;I<G;){var he=C[I++];Z[le++]=he>>16&255,Z[le++]=he>>8&255,Z[le++]=he>>0&255,Z[le++]=he>>24&255}}function tr(C,I,G,Z,le){for(G=I+G;I<G;){var he=(me=C[I++])>>16&240|me>>12&15,me=me>>0&240|me>>28&15;Z[le++]=he,Z[le++]=me}}function $n(C,I,G,Z,le){for(G=I+G;I<G;){var he=(me=C[I++])>>16&248|me>>13&7,me=me>>5&224|me>>3&31;Z[le++]=he,Z[le++]=me}}function Ir(C,I,G,Z,le){for(G=I+G;I<G;){var he=C[I++];Z[le++]=he>>0&255,Z[le++]=he>>8&255,Z[le++]=he>>16&255}}function hn(C,I,G,Z,le,he){if(he==0)for(G=I+G;I<G;)ye(Z,((he=C[I++])[0]>>24|he[1]>>8&65280|he[2]<<8&16711680|he[3]<<24)>>>0),le+=32;else n(Z,le,C,I,G)}function rs(C,I){_[I][0]=_[C+"0"],_[I][1]=_[C+"1"],_[I][2]=_[C+"2"],_[I][3]=_[C+"3"],_[I][4]=_[C+"4"],_[I][5]=_[C+"5"],_[I][6]=_[C+"6"],_[I][7]=_[C+"7"],_[I][8]=_[C+"8"],_[I][9]=_[C+"9"],_[I][10]=_[C+"10"],_[I][11]=_[C+"11"],_[I][12]=_[C+"12"],_[I][13]=_[C+"13"],_[I][14]=_[C+"0"],_[I][15]=_[C+"0"]}function Mr(C){return C==lf||C==Vc||C==Xl||C==Mu}function li(){this.eb=[],this.size=this.A=this.fb=0}function Bn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ga(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new li,this.f.kb=new Bn,this.sd=null}function Pa(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function mn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ar(C){return alert("todo:WebPSamplerProcessPlane"),C.T}function zr(C,I){var G=C.T,Z=I.ba.f.RGBA,le=Z.eb,he=Z.fb+C.ka*Z.A,me=os[I.ba.S],xe=C.y,be=C.O,Te=C.f,Ue=C.N,Je=C.ea,Ke=C.W,Ge=I.cc,pt=I.dc,st=I.Mc,Me=I.Nc,Oe=C.ka,ct=C.ka+C.T,gt=C.U,dt=gt+1>>1;for(Oe==0?me(xe,be,null,null,Te,Ue,Je,Ke,Te,Ue,Je,Ke,le,he,null,null,gt):(me(I.ec,I.fc,xe,be,Ge,pt,st,Me,Te,Ue,Je,Ke,le,he-Z.A,le,he,gt),++G);Oe+2<ct;Oe+=2)Ge=Te,pt=Ue,st=Je,Me=Ke,Ue+=C.Rc,Ke+=C.Rc,he+=2*Z.A,me(xe,(be+=2*C.fa)-C.fa,xe,be,Ge,pt,st,Me,Te,Ue,Je,Ke,le,he-Z.A,le,he,gt);return be+=C.fa,C.j+ct<C.o?(n(I.ec,I.fc,xe,be,gt),n(I.cc,I.dc,Te,Ue,dt),n(I.Mc,I.Nc,Je,Ke,dt),G--):1&ct||me(xe,be,null,null,Te,Ue,Je,Ke,Te,Ue,Je,Ke,le,he+Z.A,null,null,gt),G}function Ns(C,I,G){var Z=C.F,le=[C.J];if(Z!=null){var he=C.U,me=I.ba.S,xe=me==jA||me==Xl;I=I.ba.f.RGBA;var be=[0],Te=C.ka;be[0]=C.T,C.Kb&&(Te==0?--be[0]:(--Te,le[0]-=C.width),C.j+C.ka+C.T==C.o&&(be[0]=C.o-C.j-Te));var Ue=I.eb;Te=I.fb+Te*I.A,C=Qr(Z,le[0],C.width,he,be,Ue,Te+(xe?0:3),I.A),e(G==be),C&&Mr(me)&&Vi(Ue,Te,xe,he,be,I.A)}return 0}function Zn(C){var I=C.ma,G=I.ba.S,Z=11>G,le=G==Uu||G==of||G==jA||G==Yl||G==12||Mr(G);if(I.memory=null,I.Ib=null,I.Jb=null,I.Nd=null,!Fc(I.Oa,C,le?11:12))return 0;if(le&&Mr(G)&&bt(),C.da)alert("todo:use_scaling");else{if(Z){if(I.Ib=ar,C.Kb){if(G=C.U+1>>1,I.memory=s(C.U+2*G),I.memory==null)return 0;I.ec=I.memory,I.fc=0,I.cc=I.ec,I.dc=I.fc+C.U,I.Mc=I.cc,I.Nc=I.dc+G,I.Ib=zr,bt()}}else alert("todo:EmitYUV");le&&(I.Jb=Ns,Z&&Ve())}if(Z&&!mx){for(C=0;256>C;++C)Gw[C]=89858*(C-128)+Ha>>xl,uf[C]=-22014*(C-128)+Ha,ym[C]=-45773*(C-128),Va[C]=113618*(C-128)+Ha>>xl;for(C=qc;C<Th;++C)I=76283*(C-16)+Ha>>xl,df[C-qc]=yn(I,255),bm[C-qc]=yn(I+8>>4,15);mx=1}return 1}function ja(C){var I=C.ma,G=C.U,Z=C.T;return e(!(1&C.ka)),0>=G||0>=Z?0:(G=I.Ib(C,I),I.Jb!=null&&I.Jb(C,I,G),I.Dc+=G,1)}function zs(C){C.ma.memory=null}function Ht(C,I,G,Z){return W(C,8)!=47?0:(I[0]=W(C,14)+1,G[0]=W(C,14)+1,Z[0]=W(C,1),W(C,3)!=0?0:!C.h)}function pn(C,I){if(4>C)return C+1;var G=C-2>>1;return(2+(1&C)<<G)+W(I,G)+1}function an(C,I){return 120<I?I-120:1<=(G=((G=ec[I-1])>>4)*C+(8-(15&G)))?G:1;var G}function Dn(C,I,G){var Z=K(G),le=C[I+=255&Z].g-8;return 0<le&&(ee(G,G.u+8),Z=K(G),I+=C[I].value,I+=Z&(1<<le)-1),ee(G,G.u+C[I].g),C[I].value}function Jn(C,I,G){return G.g+=C.g,G.value+=C.value<<I>>>0,e(8>=G.g),C.g}function ea(C,I,G){var Z=C.xc;return e((I=Z==0?0:C.vc[C.md*(G>>Z)+(I>>Z)])<C.Wb),C.Ya[I]}function fe(C,I,G,Z){var le=C.ab,he=C.c*I,me=C.C;I=me+I;var xe=G,be=Z;for(Z=C.Ta,G=C.Ua;0<le--;){var Te=C.gc[le],Ue=me,Je=I,Ke=xe,Ge=be,pt=(be=Z,xe=G,Te.Ea);switch(e(Ue<Je),e(Je<=Te.nc),Te.hc){case 2:wh(Ke,Ge,(Je-Ue)*pt,be,xe);break;case 0:var st=Ue,Me=Je,Oe=be,ct=xe,gt=(Mt=Te).Ea;st==0&&(vm(Ke,Ge,null,null,1,Oe,ct),Qt(Ke,Ge+1,0,0,gt-1,Oe,ct+1),Ge+=gt,ct+=gt,++st);for(var dt=1<<Mt.b,zt=dt-1,Lt=it(gt,Mt.b),rr=Mt.K,Mt=Mt.w+(st>>Mt.b)*Lt;st<Me;){var cn=rr,bn=Mt,Ur=1;for(af(Ke,Ge,Oe,ct-gt,1,Oe,ct);Ur<gt;){var Dr=(Ur&~zt)+dt;Dr>gt&&(Dr=gt),(0,Wl[cn[bn++]>>8&15])(Ke,Ge+ +Ur,Oe,ct+Ur-gt,Dr-Ur,Oe,ct+Ur),Ur=Dr}Ge+=gt,ct+=gt,++st&zt||(Mt+=Lt)}Je!=Te.nc&&n(be,xe-pt,be,xe+(Je-Ue-1)*pt,pt);break;case 1:for(pt=Ke,Me=Ge,gt=(Ke=Te.Ea)-(ct=Ke&~(Oe=(Ge=1<<Te.b)-1)),st=it(Ke,Te.b),dt=Te.K,Te=Te.w+(Ue>>Te.b)*st;Ue<Je;){for(zt=dt,Lt=Te,rr=new Et,Mt=Me+ct,cn=Me+Ke;Me<Mt;)Wt(zt[Lt++],rr),Lc(rr,pt,Me,Ge,be,xe),Me+=Ge,xe+=Ge;Me<cn&&(Wt(zt[Lt++],rr),Lc(rr,pt,Me,gt,be,xe),Me+=gt,xe+=gt),++Ue&Oe||(Te+=st)}break;case 3:if(Ke==be&&Ge==xe&&0<Te.b){for(Me=be,Ke=pt=xe+(Je-Ue)*pt-(ct=(Je-Ue)*it(Te.Ea,Te.b)),Ge=be,Oe=xe,st=[],ct=(gt=ct)-1;0<=ct;--ct)st[ct]=Ge[Oe+ct];for(ct=gt-1;0<=ct;--ct)Me[Ke+ct]=st[ct];co(Te,Ue,Je,be,pt,be,xe)}else co(Te,Ue,Je,Ke,Ge,be,xe)}xe=Z,be=G}be!=G&&n(Z,G,xe,be,he)}function Ne(C,I){var G=C.V,Z=C.Ba+C.c*C.C,le=I-C.C;if(e(I<=C.l.o),e(16>=le),0<le){var he=C.l,me=C.Ta,xe=C.Ua,be=he.width;if(fe(C,le,G,Z),le=xe=[xe],e((G=C.C)<(Z=I)),e(he.v<he.va),Z>he.o&&(Z=he.o),G<he.j){var Te=he.j-G;G=he.j,le[0]+=Te*be}if(G>=Z?G=0:(le[0]+=4*he.v,he.ka=G-he.j,he.U=he.va-he.v,he.T=Z-G,G=1),G){if(xe=xe[0],11>(G=C.ca).S){var Ue=G.f.RGBA,Je=(Z=G.S,le=he.U,he=he.T,Te=Ue.eb,Ue.A),Ke=he;for(Ue=Ue.fb+C.Ma*Ue.A;0<Ke--;){var Ge=me,pt=xe,st=le,Me=Te,Oe=Ue;switch(Z){case Ls:Ws(Ge,pt,st,Me,Oe);break;case Uu:Cs(Ge,pt,st,Me,Oe);break;case lf:Cs(Ge,pt,st,Me,Oe),Vi(Me,Oe,0,st,1,0);break;case hl:Do(Ge,pt,st,Me,Oe);break;case of:hn(Ge,pt,st,Me,Oe,1);break;case Vc:hn(Ge,pt,st,Me,Oe,1),Vi(Me,Oe,0,st,1,0);break;case jA:hn(Ge,pt,st,Me,Oe,0);break;case Xl:hn(Ge,pt,st,Me,Oe,0),Vi(Me,Oe,1,st,1,0);break;case Yl:Uc(Ge,pt,st,Me,Oe);break;case Mu:Uc(Ge,pt,st,Me,Oe),Or(Me,Oe,st,1,0);break;case bh:mi(Ge,pt,st,Me,Oe);break;default:e(0)}xe+=be,Ue+=Je}C.Ma+=he}else alert("todo:EmitRescaledRowsYUVA");e(C.Ma<=G.height)}}C.C=I,e(C.C<=C.i)}function Ce(C){var I;if(0<C.ua)return 0;for(I=0;I<C.Wb;++I){var G=C.Ya[I].G,Z=C.Ya[I].H;if(0<G[1][Z[1]+0].g||0<G[2][Z[2]+0].g||0<G[3][Z[3]+0].g)return 0}return 1}function _e(C,I,G,Z,le,he){if(C.Z!=0){var me=C.qd,xe=C.rd;for(e(pl[C.Z]!=null);I<G;++I)pl[C.Z](me,xe,Z,le,Z,le,he),me=Z,xe=le,le+=he;C.qd=me,C.rd=xe}}function Be(C,I){var G=C.l.ma,Z=G.Z==0||G.Z==1?C.l.j:C.C;if(Z=C.C<Z?Z:C.C,e(I<=C.l.o),I>Z){var le=C.l.width,he=G.ca,me=G.tb+le*Z,xe=C.V,be=C.Ba+C.c*Z,Te=C.gc;e(C.ab==1),e(Te[0].hc==3),Rc(Te[0],Z,I,xe,be,he,me),_e(G,Z,I,he,me,le)}C.C=C.Ma=I}function ke(C,I,G,Z,le,he,me){var xe=C.$/Z,be=C.$%Z,Te=C.m,Ue=C.s,Je=G+C.$,Ke=Je;le=G+Z*le;var Ge=G+Z*he,pt=280+Ue.ua,st=C.Pb?xe:16777216,Me=0<Ue.ua?Ue.Wa:null,Oe=Ue.wc,ct=Je<Ge?ea(Ue,be,xe):null;e(C.C<he),e(Ge<=le);var gt=!1;e:for(;;){for(;gt||Je<Ge;){var dt=0;if(xe>=st){var zt=Je-G;e((st=C).Pb),st.wd=st.m,st.xd=zt,0<st.s.ua&&De(st.s.Wa,st.s.vb),st=xe+dx}if(be&Oe||(ct=ea(Ue,be,xe)),e(ct!=null),ct.Qb&&(I[Je]=ct.qb,gt=!0),!gt)if(Ae(Te),ct.jc){dt=Te,zt=I;var Lt=Je,rr=ct.pd[K(dt)&Oa-1];e(ct.jc),256>rr.g?(ee(dt,dt.u+rr.g),zt[Lt]=rr.value,dt=0):(ee(dt,dt.u+rr.g-256),e(256<=rr.value),dt=rr.value),dt==0&&(gt=!0)}else dt=Dn(ct.G[0],ct.H[0],Te);if(Te.h)break;if(gt||256>dt){if(!gt)if(ct.nd)I[Je]=(ct.qb|dt<<8)>>>0;else{if(Ae(Te),gt=Dn(ct.G[1],ct.H[1],Te),Ae(Te),zt=Dn(ct.G[2],ct.H[2],Te),Lt=Dn(ct.G[3],ct.H[3],Te),Te.h)break;I[Je]=(Lt<<24|gt<<16|dt<<8|zt)>>>0}if(gt=!1,++Je,++be>=Z&&(be=0,++xe,me!=null&&xe<=he&&!(xe%16)&&me(C,xe),Me!=null))for(;Ke<Je;)dt=I[Ke++],Me.X[(506832829*dt&4294967295)>>>Me.Mb]=dt}else if(280>dt){if(dt=pn(dt-256,Te),zt=Dn(ct.G[4],ct.H[4],Te),Ae(Te),zt=an(Z,zt=pn(zt,Te)),Te.h)break;if(Je-G<zt||le-Je<dt)break e;for(Lt=0;Lt<dt;++Lt)I[Je+Lt]=I[Je+Lt-zt];for(Je+=dt,be+=dt;be>=Z;)be-=Z,++xe,me!=null&&xe<=he&&!(xe%16)&&me(C,xe);if(e(Je<=le),be&Oe&&(ct=ea(Ue,be,xe)),Me!=null)for(;Ke<Je;)dt=I[Ke++],Me.X[(506832829*dt&4294967295)>>>Me.Mb]=dt}else{if(!(dt<pt))break e;for(gt=dt-280,e(Me!=null);Ke<Je;)dt=I[Ke++],Me.X[(506832829*dt&4294967295)>>>Me.Mb]=dt;dt=Je,e(!(gt>>>(zt=Me).Xa)),I[dt]=zt.X[gt],gt=!0}gt||e(Te.h==Y(Te))}if(C.Pb&&Te.h&&Je<le)e(C.m.h),C.a=5,C.m=C.wd,C.$=C.xd,0<C.s.ua&&De(C.s.vb,C.s.Wa);else{if(Te.h)break e;me!=null&&me(C,xe>he?he:xe),C.a=0,C.$=Je-G}return 1}return C.a=3,0}function qe(C){e(C!=null),C.vc=null,C.yc=null,C.Ya=null;var I=C.Wa;I!=null&&(I.X=null),C.vb=null,e(C!=null)}function rt(){var C=new Iu;return C==null?null:(C.a=0,C.xb=Pu,rs("Predictor","VP8LPredictors"),rs("Predictor","VP8LPredictors_C"),rs("PredictorAdd","VP8LPredictorsAdd"),rs("PredictorAdd","VP8LPredictorsAdd_C"),wh=Gt,Lc=kt,Ws=_t,Cs=Yr,Uc=tr,mi=$n,Do=Ir,_.VP8LMapColor32b=ss,_.VP8LMapColor8b=sf,C)}function He(C,I,G,Z,le){var he=1,me=[C],xe=[I],be=Z.m,Te=Z.s,Ue=null,Je=0;e:for(;;){if(G)for(;he&&W(be,1);){var Ke=me,Ge=xe,pt=Z,st=1,Me=pt.m,Oe=pt.gc[pt.ab],ct=W(Me,2);if(pt.Oc&1<<ct)he=0;else{switch(pt.Oc|=1<<ct,Oe.hc=ct,Oe.Ea=Ke[0],Oe.nc=Ge[0],Oe.K=[null],++pt.ab,e(4>=pt.ab),ct){case 0:case 1:Oe.b=W(Me,3)+2,st=He(it(Oe.Ea,Oe.b),it(Oe.nc,Oe.b),0,pt,Oe.K),Oe.K=Oe.K[0];break;case 3:var gt,dt=W(Me,8)+1,zt=16<dt?0:4<dt?1:2<dt?2:3;if(Ke[0]=it(Oe.Ea,zt),Oe.b=zt,gt=st=He(dt,1,0,pt,Oe.K)){var Lt,rr=dt,Mt=Oe,cn=1<<(8>>Mt.b),bn=s(cn);if(bn==null)gt=0;else{var Ur=Mt.K[0],Dr=Mt.w;for(bn[0]=Mt.K[0][0],Lt=1;Lt<1*rr;++Lt)bn[Lt]=et(Ur[Dr+Lt],bn[Lt-1]);for(;Lt<4*cn;++Lt)bn[Lt]=0;Mt.K[0]=null,Mt.K[0]=bn,gt=1}}st=gt;break;case 2:break;default:e(0)}he=st}}if(me=me[0],xe=xe[0],he&&W(be,1)&&!(he=1<=(Je=W(be,4))&&11>=Je)){Z.a=3;break e}var kn;if(kn=he)t:{var Cn,Tr,Ln,cr=Z,gr=me,on=xe,An=Je,ls=G,Ga=cr.m,wa=cr.s,ya=[null],ka=1,ho=0,En=QA[An];r:for(;;){if(ls&&W(Ga,1)){var Ia=W(Ga,3)+2,Uo=it(gr,Ia),Kc=it(on,Ia),GA=Uo*Kc;if(!He(Uo,Kc,0,cr,ya))break r;for(ya=ya[0],wa.xc=Ia,Cn=0;Cn<GA;++Cn){var Wc=ya[Cn]>>8&65535;ya[Cn]=Wc,Wc>=ka&&(ka=Wc+1)}}if(Ga.h)break r;for(Tr=0;5>Tr;++Tr){var ta=Gi[Tr];!Tr&&0<An&&(ta+=1<<An),ho<ta&&(ho=ta)}var ff=i(ka*En,F),Bh=ka,Js=i(Bh,X);if(Js==null)var sa=null;else e(65536>=Bh),sa=Js;var zA=s(ho);if(sa==null||zA==null||ff==null){cr.a=1;break r}var $c=ff;for(Cn=Ln=0;Cn<ka;++Cn){var gi=sa[Cn],Jc=gi.G,xi=gi.H,hf=0,Ou=1,Nh=0;for(Tr=0;5>Tr;++Tr){ta=Gi[Tr],Jc[Tr]=$c,xi[Tr]=Ln,!Tr&&0<An&&(ta+=1<<An);a:{var mf,kh=ta,pf=cr,Qu=zA,xx=$c,vx=Ln,gf=0,ac=pf.m,qw=W(ac,1);if(a(Qu,0,0,kh),qw){var wx=W(ac,1)+1,yx=W(ac,1),Cm=W(ac,yx==0?1:8);Qu[Cm]=1,wx==2&&(Qu[Cm=W(ac,8)]=1);var Hu=1}else{var Em=s(19),_m=W(ac,4)+4;if(19<_m){pf.a=3;var xf=0;break a}for(mf=0;mf<_m;++mf)Em[Zl[mf]]=W(ac,3);var Ih=void 0,Vu=void 0,bx=pf,Cx=Em,sc=kh,vf=Qu,Fh=0,Mo=bx.m,Gu=8,Sm=i(128,F);n:for(;R(Sm,0,7,Cx,19);){if(W(Mo,1)){var Ex=2+2*W(Mo,3);if((Ih=2+W(Mo,Ex))>sc)break n}else Ih=sc;for(Vu=0;Vu<sc&&Ih--;){Ae(Mo);var Tm=Sm[0+(127&K(Mo))];ee(Mo,Mo.u+Tm.g);var qA=Tm.value;if(16>qA)vf[Vu++]=qA,qA!=0&&(Gu=qA);else{var _x=qA==16,Bm=qA-16,Nm=fo[Bm],km=W(Mo,Ch[Bm])+Nm;if(Vu+km>sc)break n;for(var Sx=_x?Gu:0;0<km--;)vf[Vu++]=Sx}}Fh=1;break n}Fh||(bx.a=3),Hu=Fh}(Hu=Hu&&!ac.h)&&(gf=R(xx,vx,8,Qu,kh)),Hu&&gf!=0?xf=gf:(pf.a=3,xf=0)}if(xf==0)break r;if(Ou&&OA[Tr]==1&&(Ou=$c[Ln].g==0),hf+=$c[Ln].g,Ln+=xf,3>=Tr){var KA,Dh=zA[0];for(KA=1;KA<ta;++KA)zA[KA]>Dh&&(Dh=zA[KA]);Nh+=Dh}}if(gi.nd=Ou,gi.Qb=0,Ou&&(gi.qb=(Jc[3][xi[3]+0].value<<24|Jc[1][xi[1]+0].value<<16|Jc[2][xi[2]+0].value)>>>0,hf==0&&256>Jc[0][xi[0]+0].value&&(gi.Qb=1,gi.qb+=Jc[0][xi[0]+0].value<<8)),gi.jc=!gi.Qb&&6>Nh,gi.jc){var wf,ic=gi;for(wf=0;wf<Oa;++wf){var vl=wf,oc=ic.pd[vl],yf=ic.G[0][ic.H[0]+vl];256<=yf.value?(oc.g=yf.g+256,oc.value=yf.value):(oc.g=0,oc.value=0,vl>>=Jn(yf,8,oc),vl>>=Jn(ic.G[1][ic.H[1]+vl],16,oc),vl>>=Jn(ic.G[2][ic.H[2]+vl],0,oc),Jn(ic.G[3][ic.H[3]+vl],24,oc))}}}wa.vc=ya,wa.Wb=ka,wa.Ya=sa,wa.yc=ff,kn=1;break t}kn=0}if(!(he=kn)){Z.a=3;break e}if(0<Je){if(Te.ua=1<<Je,!at(Te.Wa,Je)){Z.a=1,he=0;break e}}else Te.ua=0;var bf=Z,Im=me,Tx=xe,Fm=bf.s,Dm=Fm.xc;if(bf.c=Im,bf.i=Tx,Fm.md=it(Im,Dm),Fm.wc=Dm==0?-1:(1<<Dm)-1,G){Z.xb=hx;break e}if((Ue=s(me*xe))==null){Z.a=1,he=0;break e}he=(he=ke(Z,Ue,0,me,xe,xe,null))&&!be.h;break e}return he?(le!=null?le[0]=Ue:(e(Ue==null),e(G)),Z.$=0,G||qe(Te)):qe(Te),he}function $e(C,I){var G=C.c*C.i,Z=G+I+16*I;return e(C.c<=I),C.V=s(Z),C.V==null?(C.Ta=null,C.Ua=0,C.a=1,0):(C.Ta=C.V,C.Ua=C.Ba+G+I,1)}function Ze(C,I){var G=C.C,Z=I-G,le=C.V,he=C.Ba+C.c*G;for(e(I<=C.l.o);0<Z;){var me=16<Z?16:Z,xe=C.l.ma,be=C.l.width,Te=be*me,Ue=xe.ca,Je=xe.tb+be*G,Ke=C.Ta,Ge=C.Ua;fe(C,me,le,he),Gn(Ke,Ge,Ue,Je,Te),_e(xe,G,G+me,Ue,Je,be),Z-=me,le+=me*C.c,G+=me}e(G==I),C.C=C.Ma=I}function xt(){this.ub=this.yd=this.td=this.Rb=0}function Bt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ot(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function St(){this.Yb=function(){var C=[];return function I(G,Z,le){for(var he=le[Z],me=0;me<he&&(G.push(le.length>Z+1?[]:0),!(le.length<Z+1));me++)I(G[me],Z+1,le)}(C,0,[3,11]),C}()}function Rt(){this.jb=s(3),this.Wc=o([4,8],St),this.Xc=o([4,17],St)}function ur(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Pr(){this.ld=this.La=this.dd=this.tc=0}function jr(){this.Na=this.la=0}function qr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function xs(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function eo(){this.uc=this.M=this.Nb=0,this.wa=Array(new Pr),this.Y=0,this.ya=Array(new xs),this.aa=0,this.l=new qs}function ns(){this.y=s(16),this.f=s(8),this.ea=s(8)}function ks(){this.cb=this.a=0,this.sc="",this.m=new de,this.Od=new xt,this.Kc=new Bt,this.ed=new ur,this.Qa=new Ot,this.Ic=this.$c=this.Aa=0,this.D=new eo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,de),this.ia=0,this.pb=i(4,qr),this.Pa=new Rt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ns),this.Hd=0,this.rb=Array(new jr),this.sb=0,this.wa=Array(new Pr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new xs),this.L=this.aa=0,this.gd=o([4,2],Pr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function qs(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function vs(){var C=new ks;return C!=null&&(C.a=0,C.sc="OK",C.cb=0,C.Xb=0,Qa||(Qa=Tu)),C}function Vn(C,I,G){return C.a==0&&(C.a=I,C.sc=G,C.cb=0),0}function as(C,I,G){return 3<=G&&C[I+0]==157&&C[I+1]==1&&C[I+2]==42}function _c(C,I){if(C==null)return 0;if(C.a=0,C.sc="OK",I==null)return Vn(C,2,"null VP8Io passed to VP8GetHeaders()");var G=I.data,Z=I.w,le=I.ha;if(4>le)return Vn(C,7,"Truncated header.");var he=G[Z+0]|G[Z+1]<<8|G[Z+2]<<16,me=C.Od;if(me.Rb=!(1&he),me.td=he>>1&7,me.yd=he>>4&1,me.ub=he>>5,3<me.td)return Vn(C,3,"Incorrect keyframe parameters.");if(!me.yd)return Vn(C,4,"Frame not displayable.");Z+=3,le-=3;var xe=C.Kc;if(me.Rb){if(7>le)return Vn(C,7,"cannot parse picture header");if(!as(G,Z,le))return Vn(C,3,"Bad code word");xe.c=16383&(G[Z+4]<<8|G[Z+3]),xe.Td=G[Z+4]>>6,xe.i=16383&(G[Z+6]<<8|G[Z+5]),xe.Ud=G[Z+6]>>6,Z+=7,le-=7,C.za=xe.c+15>>4,C.Ub=xe.i+15>>4,I.width=xe.c,I.height=xe.i,I.Da=0,I.j=0,I.v=0,I.va=I.width,I.o=I.height,I.da=0,I.ib=I.width,I.hb=I.height,I.U=I.width,I.T=I.height,a((he=C.Pa).jb,0,255,he.jb.length),e((he=C.Qa)!=null),he.Cb=0,he.Bb=0,he.Fb=1,a(he.Zb,0,0,he.Zb.length),a(he.Lb,0,0,he.Lb)}if(me.ub>le)return Vn(C,7,"bad partition length");oe(he=C.m,G,Z,me.ub),Z+=me.ub,le-=me.ub,me.Rb&&(xe.Ld=ge(he),xe.Kd=ge(he)),xe=C.Qa;var be,Te=C.Pa;if(e(he!=null),e(xe!=null),xe.Cb=ge(he),xe.Cb){if(xe.Bb=ge(he),ge(he)){for(xe.Fb=ge(he),be=0;4>be;++be)xe.Zb[be]=ge(he)?ae(he,7):0;for(be=0;4>be;++be)xe.Lb[be]=ge(he)?ae(he,6):0}if(xe.Bb)for(be=0;3>be;++be)Te.jb[be]=ge(he)?te(he,8):255}else xe.Bb=0;if(he.Ka)return Vn(C,3,"cannot parse segment header");if((xe=C.ed).zd=ge(he),xe.Tb=te(he,6),xe.wb=te(he,3),xe.Pc=ge(he),xe.Pc&&ge(he)){for(Te=0;4>Te;++Te)ge(he)&&(xe.vd[Te]=ae(he,6));for(Te=0;4>Te;++Te)ge(he)&&(xe.od[Te]=ae(he,6))}if(C.L=xe.Tb==0?0:xe.zd?1:2,he.Ka)return Vn(C,3,"cannot parse filter header");var Ue=le;if(le=be=Z,Z=be+Ue,xe=Ue,C.Xb=(1<<te(C.m,2))-1,Ue<3*(Te=C.Xb))G=7;else{for(be+=3*Te,xe-=3*Te,Ue=0;Ue<Te;++Ue){var Je=G[le+0]|G[le+1]<<8|G[le+2]<<16;Je>xe&&(Je=xe),oe(C.Jc[+Ue],G,be,Je),be+=Je,xe-=Je,le+=3}oe(C.Jc[+Te],G,be,xe),G=be<Z?0:5}if(G!=0)return Vn(C,G,"cannot parse partitions");for(G=te(be=C.m,7),le=ge(be)?ae(be,4):0,Z=ge(be)?ae(be,4):0,xe=ge(be)?ae(be,4):0,Te=ge(be)?ae(be,4):0,be=ge(be)?ae(be,4):0,Ue=C.Qa,Je=0;4>Je;++Je){if(Ue.Cb){var Ke=Ue.Zb[Je];Ue.Fb||(Ke+=G)}else{if(0<Je){C.pb[Je]=C.pb[0];continue}Ke=G}var Ge=C.pb[Je];Ge.Sc[0]=cf[yn(Ke+le,127)],Ge.Sc[1]=Af[yn(Ke+0,127)],Ge.Eb[0]=2*cf[yn(Ke+Z,127)],Ge.Eb[1]=101581*Af[yn(Ke+xe,127)]>>16,8>Ge.Eb[1]&&(Ge.Eb[1]=8),Ge.Qc[0]=cf[yn(Ke+Te,117)],Ge.Qc[1]=Af[yn(Ke+be,127)],Ge.lc=Ke+be}if(!me.Rb)return Vn(C,4,"Not a key frame.");for(ge(he),me=C.Pa,G=0;4>G;++G){for(le=0;8>le;++le)for(Z=0;3>Z;++Z)for(xe=0;11>xe;++xe)Te=pe(he,HA[G][le][Z][xe])?te(he,8):ml[G][le][Z][xe],me.Wc[G][le].Yb[Z][xe]=Te;for(le=0;17>le;++le)me.Xc[G][le]=me.Wc[G][fx[le]]}return C.kc=ge(he),C.kc&&(C.Bd=te(he,8)),C.cb=1}function Tu(C,I,G,Z,le,he,me){var xe=I[le].Yb[G];for(G=0;16>le;++le){if(!pe(C,xe[G+0]))return le;for(;!pe(C,xe[G+1]);)if(xe=I[++le].Yb[0],G=0,le==16)return 16;var be=I[le+1].Yb;if(pe(C,xe[G+2])){var Te=C,Ue=0;if(pe(Te,(Ke=xe)[(Je=G)+3]))if(pe(Te,Ke[Je+6])){for(xe=0,Je=2*(Ue=pe(Te,Ke[Je+8]))+(Ke=pe(Te,Ke[Je+9+Ue])),Ue=0,Ke=fa[Je];Ke[xe];++xe)Ue+=Ue+pe(Te,Ke[xe]);Ue+=3+(8<<Je)}else pe(Te,Ke[Je+7])?(Ue=7+2*pe(Te,165),Ue+=pe(Te,145)):Ue=5+pe(Te,159);else Ue=pe(Te,Ke[Je+4])?3+pe(Te,Ke[Je+5]):2;xe=be[2]}else Ue=1,xe=be[1];be=me+gn[le],0>(Te=C).b&&Se(Te);var Je,Ke=Te.b,Ge=(Je=Te.Ca>>1)-(Te.I>>Ke)>>31;--Te.b,Te.Ca+=Ge,Te.Ca|=1,Te.I-=(Je+1&Ge)<<Ke,he[be]=((Ue^Ge)-Ge)*Z[(0<le)+0]}return 16}function el(C){var I=C.rb[C.sb-1];I.la=0,I.Na=0,a(C.zc,0,0,C.zc.length),C.ja=0}function SA(C,I){if(C==null)return 0;if(I==null)return Vn(C,2,"NULL VP8Io parameter in VP8Decode().");if(!C.cb&&!_c(C,I))return 0;if(e(C.cb),I.ac==null||I.ac(I)){I.ob&&(C.L=0);var G=nc[C.L];if(C.L==2?(C.yb=0,C.zb=0):(C.yb=I.v-G>>4,C.zb=I.j-G>>4,0>C.yb&&(C.yb=0),0>C.zb&&(C.zb=0)),C.Va=I.o+15+G>>4,C.Hb=I.va+15+G>>4,C.Hb>C.za&&(C.Hb=C.za),C.Va>C.Ub&&(C.Va=C.Ub),0<C.L){var Z=C.ed;for(G=0;4>G;++G){var le;if(C.Qa.Cb){var he=C.Qa.Lb[G];C.Qa.Fb||(he+=Z.Tb)}else he=Z.Tb;for(le=0;1>=le;++le){var me=C.gd[G][le],xe=he;if(Z.Pc&&(xe+=Z.vd[0],le&&(xe+=Z.od[0])),0<(xe=0>xe?0:63<xe?63:xe)){var be=xe;0<Z.wb&&(be=4<Z.wb?be>>2:be>>1)>9-Z.wb&&(be=9-Z.wb),1>be&&(be=1),me.dd=be,me.tc=2*xe+be,me.ld=40<=xe?2:15<=xe?1:0}else me.tc=0;me.La=le}}}G=0}else Vn(C,6,"Frame setup failed"),G=C.a;if(G=G==0){if(G){C.$c=0,0<C.Aa||(C.Ic=px);e:{G=C.Ic,Z=4*(be=C.za);var Te=32*be,Ue=be+1,Je=0<C.L?be*(0<C.Aa?2:1):0,Ke=(C.Aa==2?2:1)*be;if((me=Z+832+(le=3*(16*G+nc[C.L])/2*Te)+(he=C.Fa!=null&&0<C.Fa.length?C.Kc.c*C.Kc.i:0))!=me)G=0;else{if(me>C.Vb){if(C.Vb=0,C.Ec=s(me),C.Fc=0,C.Ec==null){G=Vn(C,1,"no memory during frame initialization.");break e}C.Vb=me}me=C.Ec,xe=C.Fc,C.Ac=me,C.Bc=xe,xe+=Z,C.Gd=i(Te,ns),C.Hd=0,C.rb=i(Ue+1,jr),C.sb=1,C.wa=Je?i(Je,Pr):null,C.Y=0,C.D.Nb=0,C.D.wa=C.wa,C.D.Y=C.Y,0<C.Aa&&(C.D.Y+=be),e(!0),C.oc=me,C.pc=xe,xe+=832,C.ya=i(Ke,xs),C.aa=0,C.D.ya=C.ya,C.D.aa=C.aa,C.Aa==2&&(C.D.aa+=be),C.R=16*be,C.B=8*be,be=(Te=nc[C.L])*C.R,Te=Te/2*C.B,C.sa=me,C.ta=xe+be,C.qa=C.sa,C.ra=C.ta+16*G*C.R+Te,C.Ha=C.qa,C.Ia=C.ra+8*G*C.B+Te,C.$c=0,xe+=le,C.mb=he?me:null,C.nb=he?xe:null,e(xe+he<=C.Fc+C.Vb),el(C),a(C.Ac,C.Bc,0,Z),G=1}}if(G){if(I.ka=0,I.y=C.sa,I.O=C.ta,I.f=C.qa,I.N=C.ra,I.ea=C.Ha,I.Vd=C.Ia,I.fa=C.R,I.Rc=C.B,I.F=null,I.J=0,!Jl){for(G=-255;255>=G;++G)va[255+G]=0>G?-G:G;for(G=-1020;1020>=G;++G)Ao[1020+G]=-128>G?-128:127<G?127:G;for(G=-112;112>=G;++G)Qc[112+G]=-16>G?-16:15<G?15:G;for(G=-255;510>=G;++G)Hc[255+G]=0>G?0:255<G?255:G;Jl=1}dl=ci,Ro=rl,Lo=to,Na=wn,pi=nl,ua=tl,LA=ol,fl=Io,Ru=Nc,Mc=IA,Pc=Bc,jc=Vl,UA=Gl,Lu=ll,Oc=Hi,$l=Ds,MA=Ba,da=ku,$s[0]=Is,$s[1]=Bu,$s[2]=ao,$s[3]=Nu,$s[4]=Ai,$s[5]=so,$s[6]=Ks,$s[7]=ui,$s[8]=ko,$s[9]=al,tc[0]=ro,tc[1]=BA,tc[2]=To,tc[3]=Tc,tc[4]=Rn,tc[5]=No,tc[6]=no,zi[0]=io,zi[1]=TA,zi[2]=NA,zi[3]=di,zi[4]=Kr,zi[5]=Ta,zi[6]=sl,G=1}else G=0}G&&(G=function(Ge,pt){for(Ge.M=0;Ge.M<Ge.Va;++Ge.M){var st,Me=Ge.Jc[Ge.M&Ge.Xb],Oe=Ge.m,ct=Ge;for(st=0;st<ct.za;++st){var gt=Oe,dt=ct,zt=dt.Ac,Lt=dt.Bc+4*st,rr=dt.zc,Mt=dt.ya[dt.aa+st];if(dt.Qa.Bb?Mt.$b=pe(gt,dt.Pa.jb[0])?2+pe(gt,dt.Pa.jb[2]):pe(gt,dt.Pa.jb[1]):Mt.$b=0,dt.kc&&(Mt.Ad=pe(gt,dt.Bd)),Mt.Za=!pe(gt,145)+0,Mt.Za){var cn=Mt.Ob,bn=0;for(dt=0;4>dt;++dt){var Ur,Dr=rr[0+dt];for(Ur=0;4>Ur;++Ur){Dr=wm[zt[Lt+Ur]][Dr];for(var kn=Gc[pe(gt,Dr[0])];0<kn;)kn=Gc[2*kn+pe(gt,Dr[kn])];Dr=-kn,zt[Lt+Ur]=Dr}n(cn,bn,zt,Lt,4),bn+=4,rr[0+dt]=Dr}}else Dr=pe(gt,156)?pe(gt,128)?1:3:pe(gt,163)?2:0,Mt.Ob[0]=Dr,a(zt,Lt,Dr,4),a(rr,0,Dr,4);Mt.Dd=pe(gt,142)?pe(gt,114)?pe(gt,183)?1:3:2:0}if(ct.m.Ka)return Vn(Ge,7,"Premature end-of-partition0 encountered.");for(;Ge.ja<Ge.za;++Ge.ja){if(ct=Me,gt=(Oe=Ge).rb[Oe.sb-1],zt=Oe.rb[Oe.sb+Oe.ja],st=Oe.ya[Oe.aa+Oe.ja],Lt=Oe.kc?st.Ad:0)gt.la=zt.la=0,st.Za||(gt.Na=zt.Na=0),st.Hc=0,st.Gc=0,st.ia=0;else{var Cn,Tr;if(gt=zt,zt=ct,Lt=Oe.Pa.Xc,rr=Oe.ya[Oe.aa+Oe.ja],Mt=Oe.pb[rr.$b],dt=rr.ad,cn=0,bn=Oe.rb[Oe.sb-1],Dr=Ur=0,a(dt,cn,0,384),rr.Za)var Ln=0,cr=Lt[3];else{kn=s(16);var gr=gt.Na+bn.Na;if(gr=Qa(zt,Lt[1],gr,Mt.Eb,0,kn,0),gt.Na=bn.Na=(0<gr)+0,1<gr)dl(kn,0,dt,cn);else{var on=kn[0]+3>>3;for(kn=0;256>kn;kn+=16)dt[cn+kn]=on}Ln=1,cr=Lt[0]}var An=15&gt.la,ls=15&bn.la;for(kn=0;4>kn;++kn){var Ga=1&ls;for(on=Tr=0;4>on;++on)An=An>>1|(Ga=(gr=Qa(zt,cr,gr=Ga+(1&An),Mt.Sc,Ln,dt,cn))>Ln)<<7,Tr=Tr<<2|(3<gr?3:1<gr?2:dt[cn+0]!=0),cn+=16;An>>=4,ls=ls>>1|Ga<<7,Ur=(Ur<<8|Tr)>>>0}for(cr=An,Ln=ls>>4,Cn=0;4>Cn;Cn+=2){for(Tr=0,An=gt.la>>4+Cn,ls=bn.la>>4+Cn,kn=0;2>kn;++kn){for(Ga=1&ls,on=0;2>on;++on)gr=Ga+(1&An),An=An>>1|(Ga=0<(gr=Qa(zt,Lt[2],gr,Mt.Qc,0,dt,cn)))<<3,Tr=Tr<<2|(3<gr?3:1<gr?2:dt[cn+0]!=0),cn+=16;An>>=2,ls=ls>>1|Ga<<5}Dr|=Tr<<4*Cn,cr|=An<<4<<Cn,Ln|=(240&ls)<<Cn}gt.la=cr,bn.la=Ln,rr.Hc=Ur,rr.Gc=Dr,rr.ia=43690&Dr?0:Mt.ia,Lt=!(Ur|Dr)}if(0<Oe.L&&(Oe.wa[Oe.Y+Oe.ja]=Oe.gd[st.$b][st.Za],Oe.wa[Oe.Y+Oe.ja].La|=!Lt),ct.Ka)return Vn(Ge,7,"Premature end-of-file encountered.")}if(el(Ge),Oe=pt,ct=1,st=(Me=Ge).D,gt=0<Me.L&&Me.M>=Me.zb&&Me.M<=Me.Va,Me.Aa==0)e:{if(st.M=Me.M,st.uc=gt,fi(Me,st),ct=1,st=(Tr=Me.D).Nb,gt=(Dr=nc[Me.L])*Me.R,zt=Dr/2*Me.B,kn=16*st*Me.R,on=8*st*Me.B,Lt=Me.sa,rr=Me.ta-gt+kn,Mt=Me.qa,dt=Me.ra-zt+on,cn=Me.Ha,bn=Me.Ia-zt+on,ls=(An=Tr.M)==0,Ur=An>=Me.Va-1,Me.Aa==2&&fi(Me,Tr),Tr.uc)for(Ga=(gr=Me).D.M,e(gr.D.uc),Tr=gr.yb;Tr<gr.Hb;++Tr){Ln=Tr,cr=Ga;var wa=(ya=(ta=gr).D).Nb;Cn=ta.R;var ya=ya.wa[ya.Y+Ln],ka=ta.sa,ho=ta.ta+16*wa*Cn+16*Ln,En=ya.dd,Ia=ya.tc;if(Ia!=0)if(e(3<=Ia),ta.L==1)0<Ln&&$l(ka,ho,Cn,Ia+4),ya.La&&da(ka,ho,Cn,Ia),0<cr&&Oc(ka,ho,Cn,Ia+4),ya.La&&MA(ka,ho,Cn,Ia);else{var Uo=ta.B,Kc=ta.qa,GA=ta.ra+8*wa*Uo+8*Ln,Wc=ta.Ha,ta=ta.Ia+8*wa*Uo+8*Ln;wa=ya.ld,0<Ln&&(fl(ka,ho,Cn,Ia+4,En,wa),Mc(Kc,GA,Wc,ta,Uo,Ia+4,En,wa)),ya.La&&(jc(ka,ho,Cn,Ia,En,wa),Lu(Kc,GA,Wc,ta,Uo,Ia,En,wa)),0<cr&&(LA(ka,ho,Cn,Ia+4,En,wa),Ru(Kc,GA,Wc,ta,Uo,Ia+4,En,wa)),ya.La&&(Pc(ka,ho,Cn,Ia,En,wa),UA(Kc,GA,Wc,ta,Uo,Ia,En,wa))}}if(Me.ia&&alert("todo:DitherRow"),Oe.put!=null){if(Tr=16*An,An=16*(An+1),ls?(Oe.y=Me.sa,Oe.O=Me.ta+kn,Oe.f=Me.qa,Oe.N=Me.ra+on,Oe.ea=Me.Ha,Oe.W=Me.Ia+on):(Tr-=Dr,Oe.y=Lt,Oe.O=rr,Oe.f=Mt,Oe.N=dt,Oe.ea=cn,Oe.W=bn),Ur||(An-=Dr),An>Oe.o&&(An=Oe.o),Oe.F=null,Oe.J=null,Me.Fa!=null&&0<Me.Fa.length&&Tr<An&&(Oe.J=Ic(Me,Oe,Tr,An-Tr),Oe.F=Me.mb,Oe.F==null&&Oe.F.length==0)){ct=Vn(Me,3,"Could not decode alpha data.");break e}Tr<Oe.j&&(Dr=Oe.j-Tr,Tr=Oe.j,e(!(1&Dr)),Oe.O+=Me.R*Dr,Oe.N+=Me.B*(Dr>>1),Oe.W+=Me.B*(Dr>>1),Oe.F!=null&&(Oe.J+=Oe.width*Dr)),Tr<An&&(Oe.O+=Oe.v,Oe.N+=Oe.v>>1,Oe.W+=Oe.v>>1,Oe.F!=null&&(Oe.J+=Oe.v),Oe.ka=Tr-Oe.j,Oe.U=Oe.va-Oe.v,Oe.T=An-Tr,ct=Oe.put(Oe))}st+1!=Me.Ic||Ur||(n(Me.sa,Me.ta-gt,Lt,rr+16*Me.R,gt),n(Me.qa,Me.ra-zt,Mt,dt+8*Me.B,zt),n(Me.Ha,Me.Ia-zt,cn,bn+8*Me.B,zt))}if(!ct)return Vn(Ge,6,"Output aborted.")}return 1}(C,I)),I.bc!=null&&I.bc(I),G&=1}return G?(C.cb=0,G):0}function ws(C,I,G,Z,le){le=C[I+G+32*Z]+(le>>3),C[I+G+32*Z]=-256&le?0>le?0:255:le}function Sc(C,I,G,Z,le,he){ws(C,I,0,G,Z+le),ws(C,I,1,G,Z+he),ws(C,I,2,G,Z-he),ws(C,I,3,G,Z-le)}function sn(C){return(20091*C>>16)+C}function ys(C,I,G,Z){var le,he=0,me=s(16);for(le=0;4>le;++le){var xe=C[I+0]+C[I+8],be=C[I+0]-C[I+8],Te=(35468*C[I+4]>>16)-sn(C[I+12]),Ue=sn(C[I+4])+(35468*C[I+12]>>16);me[he+0]=xe+Ue,me[he+1]=be+Te,me[he+2]=be-Te,me[he+3]=xe-Ue,he+=4,I++}for(le=he=0;4>le;++le)xe=(C=me[he+0]+4)+me[he+8],be=C-me[he+8],Te=(35468*me[he+4]>>16)-sn(me[he+12]),ws(G,Z,0,0,xe+(Ue=sn(me[he+4])+(35468*me[he+12]>>16))),ws(G,Z,1,0,be+Te),ws(G,Z,2,0,be-Te),ws(G,Z,3,0,xe-Ue),he++,Z+=32}function tl(C,I,G,Z){var le=C[I+0]+4,he=35468*C[I+4]>>16,me=sn(C[I+4]),xe=35468*C[I+1]>>16;Sc(G,Z,0,le+me,C=sn(C[I+1]),xe),Sc(G,Z,1,le+he,C,xe),Sc(G,Z,2,le-he,C,xe),Sc(G,Z,3,le-me,C,xe)}function rl(C,I,G,Z,le){ys(C,I,G,Z),le&&ys(C,I+16,G,Z+4)}function to(C,I,G,Z){Ro(C,I+0,G,Z,1),Ro(C,I+32,G,Z+128,1)}function wn(C,I,G,Z){var le;for(C=C[I+0]+4,le=0;4>le;++le)for(I=0;4>I;++I)ws(G,Z,I,le,C)}function nl(C,I,G,Z){C[I+0]&&Na(C,I+0,G,Z),C[I+16]&&Na(C,I+16,G,Z+4),C[I+32]&&Na(C,I+32,G,Z+128),C[I+48]&&Na(C,I+48,G,Z+128+4)}function ci(C,I,G,Z){var le,he=s(16);for(le=0;4>le;++le){var me=C[I+0+le]+C[I+12+le],xe=C[I+4+le]+C[I+8+le],be=C[I+4+le]-C[I+8+le],Te=C[I+0+le]-C[I+12+le];he[0+le]=me+xe,he[8+le]=me-xe,he[4+le]=Te+be,he[12+le]=Te-be}for(le=0;4>le;++le)me=(C=he[0+4*le]+3)+he[3+4*le],xe=he[1+4*le]+he[2+4*le],be=he[1+4*le]-he[2+4*le],Te=C-he[3+4*le],G[Z+0]=me+xe>>3,G[Z+16]=Te+be>>3,G[Z+32]=me-xe>>3,G[Z+48]=Te-be>>3,Z+=64}function So(C,I,G){var Z,le=I-32,he=is,me=255-C[le-1];for(Z=0;Z<G;++Z){var xe,be=he,Te=me+C[I-1];for(xe=0;xe<G;++xe)C[I+xe]=be[Te+C[le+xe]];I+=32}}function Bu(C,I){So(C,I,4)}function TA(C,I){So(C,I,8)}function BA(C,I){So(C,I,16)}function To(C,I){var G;for(G=0;16>G;++G)n(C,I+32*G,C,I-32,16)}function Tc(C,I){var G;for(G=16;0<G;--G)a(C,I,C[I-1],16),I+=32}function Bo(C,I,G){var Z;for(Z=0;16>Z;++Z)a(I,G+32*Z,C,16)}function ro(C,I){var G,Z=16;for(G=0;16>G;++G)Z+=C[I-1+32*G]+C[I+G-32];Bo(Z>>5,C,I)}function Rn(C,I){var G,Z=8;for(G=0;16>G;++G)Z+=C[I-1+32*G];Bo(Z>>4,C,I)}function No(C,I){var G,Z=8;for(G=0;16>G;++G)Z+=C[I+G-32];Bo(Z>>4,C,I)}function no(C,I){Bo(128,C,I)}function dr(C,I,G){return C+2*I+G+2>>2}function ao(C,I){var G,Z=I-32;for(Z=new Uint8Array([dr(C[Z-1],C[Z+0],C[Z+1]),dr(C[Z+0],C[Z+1],C[Z+2]),dr(C[Z+1],C[Z+2],C[Z+3]),dr(C[Z+2],C[Z+3],C[Z+4])]),G=0;4>G;++G)n(C,I+32*G,Z,0,Z.length)}function Nu(C,I){var G=C[I-1],Z=C[I-1+32],le=C[I-1+64],he=C[I-1+96];ye(C,I+0,16843009*dr(C[I-1-32],G,Z)),ye(C,I+32,16843009*dr(G,Z,le)),ye(C,I+64,16843009*dr(Z,le,he)),ye(C,I+96,16843009*dr(le,he,he))}function Is(C,I){var G,Z=4;for(G=0;4>G;++G)Z+=C[I+G-32]+C[I-1+32*G];for(Z>>=3,G=0;4>G;++G)a(C,I+32*G,Z,4)}function Ai(C,I){var G=C[I-1+0],Z=C[I-1+32],le=C[I-1+64],he=C[I-1-32],me=C[I+0-32],xe=C[I+1-32],be=C[I+2-32],Te=C[I+3-32];C[I+0+96]=dr(Z,le,C[I-1+96]),C[I+1+96]=C[I+0+64]=dr(G,Z,le),C[I+2+96]=C[I+1+64]=C[I+0+32]=dr(he,G,Z),C[I+3+96]=C[I+2+64]=C[I+1+32]=C[I+0+0]=dr(me,he,G),C[I+3+64]=C[I+2+32]=C[I+1+0]=dr(xe,me,he),C[I+3+32]=C[I+2+0]=dr(be,xe,me),C[I+3+0]=dr(Te,be,xe)}function Ks(C,I){var G=C[I+1-32],Z=C[I+2-32],le=C[I+3-32],he=C[I+4-32],me=C[I+5-32],xe=C[I+6-32],be=C[I+7-32];C[I+0+0]=dr(C[I+0-32],G,Z),C[I+1+0]=C[I+0+32]=dr(G,Z,le),C[I+2+0]=C[I+1+32]=C[I+0+64]=dr(Z,le,he),C[I+3+0]=C[I+2+32]=C[I+1+64]=C[I+0+96]=dr(le,he,me),C[I+3+32]=C[I+2+64]=C[I+1+96]=dr(he,me,xe),C[I+3+64]=C[I+2+96]=dr(me,xe,be),C[I+3+96]=dr(xe,be,be)}function so(C,I){var G=C[I-1+0],Z=C[I-1+32],le=C[I-1+64],he=C[I-1-32],me=C[I+0-32],xe=C[I+1-32],be=C[I+2-32],Te=C[I+3-32];C[I+0+0]=C[I+1+64]=he+me+1>>1,C[I+1+0]=C[I+2+64]=me+xe+1>>1,C[I+2+0]=C[I+3+64]=xe+be+1>>1,C[I+3+0]=be+Te+1>>1,C[I+0+96]=dr(le,Z,G),C[I+0+64]=dr(Z,G,he),C[I+0+32]=C[I+1+96]=dr(G,he,me),C[I+1+32]=C[I+2+96]=dr(he,me,xe),C[I+2+32]=C[I+3+96]=dr(me,xe,be),C[I+3+32]=dr(xe,be,Te)}function ui(C,I){var G=C[I+0-32],Z=C[I+1-32],le=C[I+2-32],he=C[I+3-32],me=C[I+4-32],xe=C[I+5-32],be=C[I+6-32],Te=C[I+7-32];C[I+0+0]=G+Z+1>>1,C[I+1+0]=C[I+0+64]=Z+le+1>>1,C[I+2+0]=C[I+1+64]=le+he+1>>1,C[I+3+0]=C[I+2+64]=he+me+1>>1,C[I+0+32]=dr(G,Z,le),C[I+1+32]=C[I+0+96]=dr(Z,le,he),C[I+2+32]=C[I+1+96]=dr(le,he,me),C[I+3+32]=C[I+2+96]=dr(he,me,xe),C[I+3+64]=dr(me,xe,be),C[I+3+96]=dr(xe,be,Te)}function al(C,I){var G=C[I-1+0],Z=C[I-1+32],le=C[I-1+64],he=C[I-1+96];C[I+0+0]=G+Z+1>>1,C[I+2+0]=C[I+0+32]=Z+le+1>>1,C[I+2+32]=C[I+0+64]=le+he+1>>1,C[I+1+0]=dr(G,Z,le),C[I+3+0]=C[I+1+32]=dr(Z,le,he),C[I+3+32]=C[I+1+64]=dr(le,he,he),C[I+3+64]=C[I+2+64]=C[I+0+96]=C[I+1+96]=C[I+2+96]=C[I+3+96]=he}function ko(C,I){var G=C[I-1+0],Z=C[I-1+32],le=C[I-1+64],he=C[I-1+96],me=C[I-1-32],xe=C[I+0-32],be=C[I+1-32],Te=C[I+2-32];C[I+0+0]=C[I+2+32]=G+me+1>>1,C[I+0+32]=C[I+2+64]=Z+G+1>>1,C[I+0+64]=C[I+2+96]=le+Z+1>>1,C[I+0+96]=he+le+1>>1,C[I+3+0]=dr(xe,be,Te),C[I+2+0]=dr(me,xe,be),C[I+1+0]=C[I+3+32]=dr(G,me,xe),C[I+1+32]=C[I+3+64]=dr(Z,G,me),C[I+1+64]=C[I+3+96]=dr(le,Z,G),C[I+1+96]=dr(he,le,Z)}function NA(C,I){var G;for(G=0;8>G;++G)n(C,I+32*G,C,I-32,8)}function di(C,I){var G;for(G=0;8>G;++G)a(C,I,C[I-1],8),I+=32}function Fs(C,I,G){var Z;for(Z=0;8>Z;++Z)a(I,G+32*Z,C,8)}function io(C,I){var G,Z=8;for(G=0;8>G;++G)Z+=C[I+G-32]+C[I-1+32*G];Fs(Z>>4,C,I)}function Ta(C,I){var G,Z=4;for(G=0;8>G;++G)Z+=C[I+G-32];Fs(Z>>3,C,I)}function Kr(C,I){var G,Z=4;for(G=0;8>G;++G)Z+=C[I-1+32*G];Fs(Z>>3,C,I)}function sl(C,I){Fs(128,C,I)}function oo(C,I,G){var Z=C[I-G],le=C[I+0],he=3*(le-Z)+yh[1020+C[I-2*G]-C[I+G]],me=PA[112+(he+4>>3)];C[I-G]=is[255+Z+PA[112+(he+3>>3)]],C[I+0]=is[255+le-me]}function kA(C,I,G,Z){var le=C[I+0],he=C[I+G];return uo[255+C[I-2*G]-C[I-G]]>Z||uo[255+he-le]>Z}function Ql(C,I,G,Z){return 4*uo[255+C[I-G]-C[I+0]]+uo[255+C[I-2*G]-C[I+G]]<=Z}function Hl(C,I,G,Z,le){var he=C[I-3*G],me=C[I-2*G],xe=C[I-G],be=C[I+0],Te=C[I+G],Ue=C[I+2*G],Je=C[I+3*G];return 4*uo[255+xe-be]+uo[255+me-Te]>Z?0:uo[255+C[I-4*G]-he]<=le&&uo[255+he-me]<=le&&uo[255+me-xe]<=le&&uo[255+Je-Ue]<=le&&uo[255+Ue-Te]<=le&&uo[255+Te-be]<=le}function Hi(C,I,G,Z){var le=2*Z+1;for(Z=0;16>Z;++Z)Ql(C,I+Z,G,le)&&oo(C,I+Z,G)}function Ds(C,I,G,Z){var le=2*Z+1;for(Z=0;16>Z;++Z)Ql(C,I+Z*G,1,le)&&oo(C,I+Z*G,1)}function Ba(C,I,G,Z){var le;for(le=3;0<le;--le)Hi(C,I+=4*G,G,Z)}function ku(C,I,G,Z){var le;for(le=3;0<le;--le)Ds(C,I+=4,G,Z)}function il(C,I,G,Z,le,he,me,xe){for(he=2*he+1;0<le--;){if(Hl(C,I,G,he,me))if(kA(C,I,G,xe))oo(C,I,G);else{var be=C,Te=I,Ue=G,Je=be[Te-2*Ue],Ke=be[Te-Ue],Ge=be[Te+0],pt=be[Te+Ue],st=be[Te+2*Ue],Me=27*(ct=yh[1020+3*(Ge-Ke)+yh[1020+Je-pt]])+63>>7,Oe=18*ct+63>>7,ct=9*ct+63>>7;be[Te-3*Ue]=is[255+be[Te-3*Ue]+ct],be[Te-2*Ue]=is[255+Je+Oe],be[Te-Ue]=is[255+Ke+Me],be[Te+0]=is[255+Ge-Me],be[Te+Ue]=is[255+pt-Oe],be[Te+2*Ue]=is[255+st-ct]}I+=Z}}function bs(C,I,G,Z,le,he,me,xe){for(he=2*he+1;0<le--;){if(Hl(C,I,G,he,me))if(kA(C,I,G,xe))oo(C,I,G);else{var be=C,Te=I,Ue=G,Je=be[Te-Ue],Ke=be[Te+0],Ge=be[Te+Ue],pt=PA[112+((st=3*(Ke-Je))+4>>3)],st=PA[112+(st+3>>3)],Me=pt+1>>1;be[Te-2*Ue]=is[255+be[Te-2*Ue]+Me],be[Te-Ue]=is[255+Je+st],be[Te+0]=is[255+Ke-pt],be[Te+Ue]=is[255+Ge-Me]}I+=Z}}function ol(C,I,G,Z,le,he){il(C,I,G,1,16,Z,le,he)}function Io(C,I,G,Z,le,he){il(C,I,1,G,16,Z,le,he)}function Bc(C,I,G,Z,le,he){var me;for(me=3;0<me;--me)bs(C,I+=4*G,G,1,16,Z,le,he)}function Vl(C,I,G,Z,le,he){var me;for(me=3;0<me;--me)bs(C,I+=4,1,G,16,Z,le,he)}function Nc(C,I,G,Z,le,he,me,xe){il(C,I,le,1,8,he,me,xe),il(G,Z,le,1,8,he,me,xe)}function IA(C,I,G,Z,le,he,me,xe){il(C,I,1,le,8,he,me,xe),il(G,Z,1,le,8,he,me,xe)}function Gl(C,I,G,Z,le,he,me,xe){bs(C,I+4*le,le,1,8,he,me,xe),bs(G,Z+4*le,le,1,8,he,me,xe)}function ll(C,I,G,Z,le,he,me,xe){bs(C,I+4,1,le,8,he,me,xe),bs(G,Z+4,1,le,8,he,me,xe)}function zl(){this.ba=new ga,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new mn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function kc(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ql(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function cl(){this.ua=0,this.Wa=new Ee,this.vb=new Ee,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new X,this.yc=new F}function Iu(){this.xb=this.a=0,this.l=new qs,this.ca=new ga,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new P,this.Pb=0,this.wd=new P,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new cl,this.ab=0,this.gc=i(4,ql),this.Oc=0}function Fo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new qs,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Al(C,I,G,Z,le,he,me){for(C=C==null?0:C[I+0],I=0;I<me;++I)le[he+I]=C+G[Z+I]&255,C=le[he+I]}function Kl(C,I,G,Z,le,he,me){var xe;if(C==null)Al(null,null,G,Z,le,he,me);else for(xe=0;xe<me;++xe)le[he+xe]=C[I+xe]+G[Z+xe]&255}function Rs(C,I,G,Z,le,he,me){if(C==null)Al(null,null,G,Z,le,he,me);else{var xe,be=C[I+0],Te=be,Ue=be;for(xe=0;xe<me;++xe)Te=Ue+(be=C[I+xe])-Te,Ue=G[Z+xe]+(-256&Te?0>Te?0:255:Te)&255,Te=be,le[he+xe]=Ue}}function Ic(C,I,G,Z){var le=I.width,he=I.o;if(e(C!=null&&I!=null),0>G||0>=Z||G+Z>he)return null;if(!C.Cc){if(C.ga==null){var me;if(C.ga=new Fo,(me=C.ga==null)||(me=I.width*I.o,e(C.Gb.length==0),C.Gb=s(me),C.Uc=0,C.Gb==null?me=0:(C.mb=C.Gb,C.nb=C.Uc,C.rc=null,me=1),me=!me),!me){me=C.ga;var xe=C.Fa,be=C.P,Te=C.qc,Ue=C.mb,Je=C.nb,Ke=be+1,Ge=Te-1,pt=me.l;if(e(xe!=null&&Ue!=null&&I!=null),pl[0]=null,pl[1]=Al,pl[2]=Kl,pl[3]=Rs,me.ca=Ue,me.tb=Je,me.c=I.width,me.i=I.height,e(0<me.c&&0<me.i),1>=Te)I=0;else if(me.$a=xe[be+0]>>0&3,me.Z=xe[be+0]>>2&3,me.Lc=xe[be+0]>>4&3,be=xe[be+0]>>6&3,0>me.$a||1<me.$a||4<=me.Z||1<me.Lc||be)I=0;else if(pt.put=ja,pt.ac=Zn,pt.bc=zs,pt.ma=me,pt.width=I.width,pt.height=I.height,pt.Da=I.Da,pt.v=I.v,pt.va=I.va,pt.j=I.j,pt.o=I.o,me.$a)e:{e(me.$a==1),I=rt();t:for(;;){if(I==null){I=0;break e}if(e(me!=null),me.mc=I,I.c=me.c,I.i=me.i,I.l=me.l,I.l.ma=me,I.l.width=me.c,I.l.height=me.i,I.a=0,q(I.m,xe,Ke,Ge),!He(me.c,me.i,1,I,null)||(I.ab==1&&I.gc[0].hc==3&&Ce(I.s)?(me.ic=1,xe=I.c*I.i,I.Ta=null,I.Ua=0,I.V=s(xe),I.Ba=0,I.V==null?(I.a=1,I=0):I=1):(me.ic=0,I=$e(I,me.c)),!I))break t;I=1;break e}me.mc=null,I=0}else I=Ge>=me.c*me.i;me=!I}if(me)return null;C.ga.Lc!=1?C.Ga=0:Z=he-G}e(C.ga!=null),e(G+Z<=he);e:{if(I=(xe=C.ga).c,he=xe.l.o,xe.$a==0){if(Ke=C.rc,Ge=C.Vc,pt=C.Fa,be=C.P+1+G*I,Te=C.mb,Ue=C.nb+G*I,e(be<=C.P+C.qc),xe.Z!=0)for(e(pl[xe.Z]!=null),me=0;me<Z;++me)pl[xe.Z](Ke,Ge,pt,be,Te,Ue,I),Ke=Te,Ge=Ue,Ue+=I,be+=I;else for(me=0;me<Z;++me)n(Te,Ue,pt,be,I),Ke=Te,Ge=Ue,Ue+=I,be+=I;C.rc=Ke,C.Vc=Ge}else{if(e(xe.mc!=null),I=G+Z,e((me=xe.mc)!=null),e(I<=me.i),me.C>=I)I=1;else if(xe.ic||Ve(),xe.ic){xe=me.V,Ke=me.Ba,Ge=me.c;var st=me.i,Me=(pt=1,be=me.$/Ge,Te=me.$%Ge,Ue=me.m,Je=me.s,me.$),Oe=Ge*st,ct=Ge*I,gt=Je.wc,dt=Me<ct?ea(Je,Te,be):null;e(Me<=Oe),e(I<=st),e(Ce(Je));t:for(;;){for(;!Ue.h&&Me<ct;){if(Te&gt||(dt=ea(Je,Te,be)),e(dt!=null),Ae(Ue),256>(st=Dn(dt.G[0],dt.H[0],Ue)))xe[Ke+Me]=st,++Me,++Te>=Ge&&(Te=0,++be<=I&&!(be%16)&&Be(me,be));else{if(!(280>st)){pt=0;break t}st=pn(st-256,Ue);var zt,Lt=Dn(dt.G[4],dt.H[4],Ue);if(Ae(Ue),!(Me>=(Lt=an(Ge,Lt=pn(Lt,Ue)))&&Oe-Me>=st)){pt=0;break t}for(zt=0;zt<st;++zt)xe[Ke+Me+zt]=xe[Ke+Me+zt-Lt];for(Me+=st,Te+=st;Te>=Ge;)Te-=Ge,++be<=I&&!(be%16)&&Be(me,be);Me<ct&&Te&gt&&(dt=ea(Je,Te,be))}e(Ue.h==Y(Ue))}Be(me,be>I?I:be);break t}!pt||Ue.h&&Me<Oe?(pt=0,me.a=Ue.h?5:3):me.$=Me,I=pt}else I=ke(me,me.V,me.Ba,me.c,me.i,I,Ze);if(!I){Z=0;break e}}G+Z>=he&&(C.Cc=1),Z=1}if(!Z)return null;if(C.Cc&&((Z=C.ga)!=null&&(Z.mc=null),C.ga=null,0<C.Ga))return alert("todo:WebPDequantizeLevels"),null}return C.nb+G*le}function O(C,I,G,Z,le,he){for(;0<le--;){var me,xe=C,be=I+(G?1:0),Te=C,Ue=I+(G?0:3);for(me=0;me<Z;++me){var Je=Te[Ue+4*me];Je!=255&&(Je*=32897,xe[be+4*me+0]=xe[be+4*me+0]*Je>>23,xe[be+4*me+1]=xe[be+4*me+1]*Je>>23,xe[be+4*me+2]=xe[be+4*me+2]*Je>>23)}I+=he}}function ce(C,I,G,Z,le){for(;0<Z--;){var he;for(he=0;he<G;++he){var me=C[I+2*he+0],xe=15&(Te=C[I+2*he+1]),be=4369*xe,Te=(240&Te|Te>>4)*be>>16;C[I+2*he+0]=(240&me|me>>4)*be>>16&240|(15&me|me<<4)*be>>16>>4&15,C[I+2*he+1]=240&Te|xe}I+=le}}function Ie(C,I,G,Z,le,he,me,xe){var be,Te,Ue=255;for(Te=0;Te<le;++Te){for(be=0;be<Z;++be){var Je=C[I+be];he[me+4*be]=Je,Ue&=Je}I+=G,me+=xe}return Ue!=255}function Re(C,I,G,Z,le){var he;for(he=0;he<le;++he)G[Z+he]=C[I+he]>>8}function Ve(){Vi=O,Or=ce,Qr=Ie,Gn=Re}function ot(C,I,G){_[C]=function(Z,le,he,me,xe,be,Te,Ue,Je,Ke,Ge,pt,st,Me,Oe,ct,gt){var dt,zt=gt-1>>1,Lt=xe[be+0]|Te[Ue+0]<<16,rr=Je[Ke+0]|Ge[pt+0]<<16;e(Z!=null);var Mt=3*Lt+rr+131074>>2;for(I(Z[le+0],255&Mt,Mt>>16,st,Me),he!=null&&(Mt=3*rr+Lt+131074>>2,I(he[me+0],255&Mt,Mt>>16,Oe,ct)),dt=1;dt<=zt;++dt){var cn=xe[be+dt]|Te[Ue+dt]<<16,bn=Je[Ke+dt]|Ge[pt+dt]<<16,Ur=Lt+cn+rr+bn+524296,Dr=Ur+2*(cn+rr)>>3;Mt=Dr+Lt>>1,Lt=(Ur=Ur+2*(Lt+bn)>>3)+cn>>1,I(Z[le+2*dt-1],255&Mt,Mt>>16,st,Me+(2*dt-1)*G),I(Z[le+2*dt-0],255&Lt,Lt>>16,st,Me+(2*dt-0)*G),he!=null&&(Mt=Ur+rr>>1,Lt=Dr+bn>>1,I(he[me+2*dt-1],255&Mt,Mt>>16,Oe,ct+(2*dt-1)*G),I(he[me+2*dt+0],255&Lt,Lt>>16,Oe,ct+(2*dt+0)*G)),Lt=cn,rr=bn}1&gt||(Mt=3*Lt+rr+131074>>2,I(Z[le+gt-1],255&Mt,Mt>>16,st,Me+(gt-1)*G),he!=null&&(Mt=3*rr+Lt+131074>>2,I(he[me+gt-1],255&Mt,Mt>>16,Oe,ct+(gt-1)*G)))}}function bt(){os[Ls]=rc,os[Uu]=gl,os[hl]=zc,os[of]=Eh,os[jA]=_h,os[Yl]=ju,os[bh]=Sh,os[lf]=gl,os[Vc]=Eh,os[Xl]=_h,os[Mu]=ju}function Ut(C){return C&-16384?0>C?0:255:C>>Vw}function S(C,I){return Ut((19077*C>>8)+(26149*I>>8)-14234)}function z(C,I,G){return Ut((19077*C>>8)-(6419*I>>8)-(13320*G>>8)+8708)}function re(C,I){return Ut((19077*C>>8)+(33050*I>>8)-17685)}function ve(C,I,G,Z,le){Z[le+0]=S(C,G),Z[le+1]=z(C,I,G),Z[le+2]=re(C,I)}function Qe(C,I,G,Z,le){Z[le+0]=re(C,I),Z[le+1]=z(C,I,G),Z[le+2]=S(C,G)}function Ye(C,I,G,Z,le){var he=z(C,I,G);I=he<<3&224|re(C,I)>>3,Z[le+0]=248&S(C,G)|he>>5,Z[le+1]=I}function Ct(C,I,G,Z,le){var he=240&re(C,I)|15;Z[le+0]=240&S(C,G)|z(C,I,G)>>4,Z[le+1]=he}function fr(C,I,G,Z,le){Z[le+0]=255,ve(C,I,G,Z,le+1)}function Wr(C,I,G,Z,le){Qe(C,I,G,Z,le),Z[le+3]=255}function Sr(C,I,G,Z,le){ve(C,I,G,Z,le),Z[le+3]=255}function yn(C,I){return 0>C?0:C>I?I:C}function Nn(C,I,G){_[C]=function(Z,le,he,me,xe,be,Te,Ue,Je){for(var Ke=Ue+(-2&Je)*G;Ue!=Ke;)I(Z[le+0],he[me+0],xe[be+0],Te,Ue),I(Z[le+1],he[me+0],xe[be+0],Te,Ue+G),le+=2,++me,++be,Ue+=2*G;1&Je&&I(Z[le+0],he[me+0],xe[be+0],Te,Ue)}}function lo(C,I,G){return G==0?C==0?I==0?6:5:I==0?4:0:G}function xa(C,I,G,Z,le){switch(C>>>30){case 3:Ro(I,G,Z,le,0);break;case 2:ua(I,G,Z,le);break;case 1:Na(I,G,Z,le)}}function fi(C,I){var G,Z,le=I.M,he=I.Nb,me=C.oc,xe=C.pc+40,be=C.oc,Te=C.pc+584,Ue=C.oc,Je=C.pc+600;for(G=0;16>G;++G)me[xe+32*G-1]=129;for(G=0;8>G;++G)be[Te+32*G-1]=129,Ue[Je+32*G-1]=129;for(0<le?me[xe-1-32]=be[Te-1-32]=Ue[Je-1-32]=129:(a(me,xe-32-1,127,21),a(be,Te-32-1,127,9),a(Ue,Je-32-1,127,9)),Z=0;Z<C.za;++Z){var Ke=I.ya[I.aa+Z];if(0<Z){for(G=-1;16>G;++G)n(me,xe+32*G-4,me,xe+32*G+12,4);for(G=-1;8>G;++G)n(be,Te+32*G-4,be,Te+32*G+4,4),n(Ue,Je+32*G-4,Ue,Je+32*G+4,4)}var Ge=C.Gd,pt=C.Hd+Z,st=Ke.ad,Me=Ke.Hc;if(0<le&&(n(me,xe-32,Ge[pt].y,0,16),n(be,Te-32,Ge[pt].f,0,8),n(Ue,Je-32,Ge[pt].ea,0,8)),Ke.Za){var Oe=me,ct=xe-32+16;for(0<le&&(Z>=C.za-1?a(Oe,ct,Ge[pt].y[15],4):n(Oe,ct,Ge[pt+1].y,0,4)),G=0;4>G;G++)Oe[ct+128+G]=Oe[ct+256+G]=Oe[ct+384+G]=Oe[ct+0+G];for(G=0;16>G;++G,Me<<=2)Oe=me,ct=xe+VA[G],$s[Ke.Ob[G]](Oe,ct),xa(Me,st,16*+G,Oe,ct)}else if(Oe=lo(Z,le,Ke.Ob[0]),tc[Oe](me,xe),Me!=0)for(G=0;16>G;++G,Me<<=2)xa(Me,st,16*+G,me,xe+VA[G]);for(G=Ke.Gc,Oe=lo(Z,le,Ke.Dd),zi[Oe](be,Te),zi[Oe](Ue,Je),Me=st,Oe=be,ct=Te,255&(Ke=G>>0)&&(170&Ke?Lo(Me,256,Oe,ct):pi(Me,256,Oe,ct)),Ke=Ue,Me=Je,255&(G>>=8)&&(170&G?Lo(st,320,Ke,Me):pi(st,320,Ke,Me)),le<C.Ub-1&&(n(Ge[pt].y,0,me,xe+480,16),n(Ge[pt].f,0,be,Te+224,8),n(Ge[pt].ea,0,Ue,Je+224,8)),G=8*he*C.B,Ge=C.sa,pt=C.ta+16*Z+16*he*C.R,st=C.qa,Ke=C.ra+8*Z+G,Me=C.Ha,Oe=C.Ia+8*Z+G,G=0;16>G;++G)n(Ge,pt+G*C.R,me,xe+32*G,16);for(G=0;8>G;++G)n(st,Ke+G*C.B,be,Te+32*G,8),n(Me,Oe+G*C.B,Ue,Je+32*G,8)}}function ul(C,I,G,Z,le,he,me,xe,be){var Te=[0],Ue=[0],Je=0,Ke=be!=null?be.kd:0,Ge=be??new kc;if(C==null||12>G)return 7;Ge.data=C,Ge.w=I,Ge.ha=G,I=[I],G=[G],Ge.gb=[Ge.gb];e:{var pt=I,st=G,Me=Ge.gb;if(e(C!=null),e(st!=null),e(Me!=null),Me[0]=0,12<=st[0]&&!r(C,pt[0],"RIFF")){if(r(C,pt[0]+8,"WEBP")){Me=3;break e}var Oe=Pe(C,pt[0]+4);if(12>Oe||4294967286<Oe){Me=3;break e}if(Ke&&Oe>st[0]-8){Me=7;break e}Me[0]=Oe,pt[0]+=12,st[0]-=12}Me=0}if(Me!=0)return Me;for(Oe=0<Ge.gb[0],G=G[0];;){e:{var ct=C;st=I,Me=G;var gt=Te,dt=Ue,zt=pt=[0];if((Mt=Je=[Je])[0]=0,8>Me[0])Me=7;else{if(!r(ct,st[0],"VP8X")){if(Pe(ct,st[0]+4)!=10){Me=3;break e}if(18>Me[0]){Me=7;break e}var Lt=Pe(ct,st[0]+8),rr=1+se(ct,st[0]+12);if(2147483648<=rr*(ct=1+se(ct,st[0]+15))){Me=3;break e}zt!=null&&(zt[0]=Lt),gt!=null&&(gt[0]=rr),dt!=null&&(dt[0]=ct),st[0]+=18,Me[0]-=18,Mt[0]=1}Me=0}}if(Je=Je[0],pt=pt[0],Me!=0)return Me;if(st=!!(2&pt),!Oe&&Je)return 3;if(he!=null&&(he[0]=!!(16&pt)),me!=null&&(me[0]=st),xe!=null&&(xe[0]=0),me=Te[0],pt=Ue[0],Je&&st&&be==null){Me=0;break}if(4>G){Me=7;break}if(Oe&&Je||!Oe&&!Je&&!r(C,I[0],"ALPH")){G=[G],Ge.na=[Ge.na],Ge.P=[Ge.P],Ge.Sa=[Ge.Sa];e:{Lt=C,Me=I,Oe=G;var Mt=Ge.gb;gt=Ge.na,dt=Ge.P,zt=Ge.Sa,rr=22,e(Lt!=null),e(Oe!=null),ct=Me[0];var cn=Oe[0];for(e(gt!=null),e(zt!=null),gt[0]=null,dt[0]=null,zt[0]=0;;){if(Me[0]=ct,Oe[0]=cn,8>cn){Me=7;break e}var bn=Pe(Lt,ct+4);if(4294967286<bn){Me=3;break e}var Ur=8+bn+1&-2;if(rr+=Ur,0<Mt&&rr>Mt){Me=3;break e}if(!r(Lt,ct,"VP8 ")||!r(Lt,ct,"VP8L")){Me=0;break e}if(cn[0]<Ur){Me=7;break e}r(Lt,ct,"ALPH")||(gt[0]=Lt,dt[0]=ct+8,zt[0]=bn),ct+=Ur,cn-=Ur}}if(G=G[0],Ge.na=Ge.na[0],Ge.P=Ge.P[0],Ge.Sa=Ge.Sa[0],Me!=0)break}G=[G],Ge.Ja=[Ge.Ja],Ge.xa=[Ge.xa];e:if(Mt=C,Me=I,Oe=G,gt=Ge.gb[0],dt=Ge.Ja,zt=Ge.xa,Lt=Me[0],ct=!r(Mt,Lt,"VP8 "),rr=!r(Mt,Lt,"VP8L"),e(Mt!=null),e(Oe!=null),e(dt!=null),e(zt!=null),8>Oe[0])Me=7;else{if(ct||rr){if(Mt=Pe(Mt,Lt+4),12<=gt&&Mt>gt-12){Me=3;break e}if(Ke&&Mt>Oe[0]-8){Me=7;break e}dt[0]=Mt,Me[0]+=8,Oe[0]-=8,zt[0]=rr}else zt[0]=5<=Oe[0]&&Mt[Lt+0]==47&&!(Mt[Lt+4]>>5),dt[0]=Oe[0];Me=0}if(G=G[0],Ge.Ja=Ge.Ja[0],Ge.xa=Ge.xa[0],I=I[0],Me!=0)break;if(4294967286<Ge.Ja)return 3;if(xe==null||st||(xe[0]=Ge.xa?2:1),me=[me],pt=[pt],Ge.xa){if(5>G){Me=7;break}xe=me,Ke=pt,st=he,C==null||5>G?C=0:5<=G&&C[I+0]==47&&!(C[I+4]>>5)?(Oe=[0],Mt=[0],gt=[0],q(dt=new P,C,I,G),Ht(dt,Oe,Mt,gt)?(xe!=null&&(xe[0]=Oe[0]),Ke!=null&&(Ke[0]=Mt[0]),st!=null&&(st[0]=gt[0]),C=1):C=0):C=0}else{if(10>G){Me=7;break}xe=pt,C==null||10>G||!as(C,I+3,G-3)?C=0:(Ke=C[I+0]|C[I+1]<<8|C[I+2]<<16,st=16383&(C[I+7]<<8|C[I+6]),C=16383&(C[I+9]<<8|C[I+8]),1&Ke||3<(Ke>>1&7)||!(Ke>>4&1)||Ke>>5>=Ge.Ja||!st||!C?C=0:(me&&(me[0]=st),xe&&(xe[0]=C),C=1))}if(!C||(me=me[0],pt=pt[0],Je&&(Te[0]!=me||Ue[0]!=pt)))return 3;be!=null&&(be[0]=Ge,be.offset=I-be.w,e(4294967286>I-be.w),e(be.offset==be.ha-G));break}return Me==0||Me==7&&Je&&be==null?(he!=null&&(he[0]|=Ge.na!=null&&0<Ge.na.length),Z!=null&&(Z[0]=me),le!=null&&(le[0]=pt),0):Me}function Fc(C,I,G){var Z=I.width,le=I.height,he=0,me=0,xe=Z,be=le;if(I.Da=C!=null&&0<C.Da,I.Da&&(xe=C.cd,be=C.bd,he=C.v,me=C.j,11>G||(he&=-2,me&=-2),0>he||0>me||0>=xe||0>=be||he+xe>Z||me+be>le))return 0;if(I.v=he,I.j=me,I.va=he+xe,I.o=me+be,I.U=xe,I.T=be,I.da=C!=null&&0<C.da,I.da){if(!Le(xe,be,G=[C.ib],he=[C.hb]))return 0;I.ib=G[0],I.hb=he[0]}return I.ob=C!=null&&C.ob,I.Kb=C==null||!C.Sd,I.da&&(I.ob=I.ib<3*Z/4&&I.hb<3*le/4,I.Kb=0),1}function Fu(C){if(C==null)return 2;if(11>C.S){var I=C.f.RGBA;I.fb+=(C.height-1)*I.A,I.A=-I.A}else I=C.f.kb,C=C.height,I.O+=(C-1)*I.fa,I.fa=-I.fa,I.N+=(C-1>>1)*I.Ab,I.Ab=-I.Ab,I.W+=(C-1>>1)*I.Db,I.Db=-I.Db,I.F!=null&&(I.J+=(C-1)*I.lb,I.lb=-I.lb);return 0}function FA(C,I,G,Z){if(Z==null||0>=C||0>=I)return 2;if(G!=null){if(G.Da){var le=G.cd,he=G.bd,me=-2&G.v,xe=-2&G.j;if(0>me||0>xe||0>=le||0>=he||me+le>C||xe+he>I)return 2;C=le,I=he}if(G.da){if(!Le(C,I,le=[G.ib],he=[G.hb]))return 2;C=le[0],I=he[0]}}Z.width=C,Z.height=I;e:{var be=Z.width,Te=Z.height;if(C=Z.S,0>=be||0>=Te||!(C>=Ls&&13>C))C=2;else{if(0>=Z.Rd&&Z.sd==null){me=he=le=I=0;var Ue=(xe=be*gx[C])*Te;if(11>C||(he=(Te+1)/2*(I=(be+1)/2),C==12&&(me=(le=be)*Te)),(Te=s(Ue+2*he+me))==null){C=1;break e}Z.sd=Te,11>C?((be=Z.f.RGBA).eb=Te,be.fb=0,be.A=xe,be.size=Ue):((be=Z.f.kb).y=Te,be.O=0,be.fa=xe,be.Fd=Ue,be.f=Te,be.N=0+Ue,be.Ab=I,be.Cd=he,be.ea=Te,be.W=0+Ue+he,be.Db=I,be.Ed=he,C==12&&(be.F=Te,be.J=0+Ue+2*he),be.Tc=me,be.lb=le)}if(I=1,le=Z.S,he=Z.width,me=Z.height,le>=Ls&&13>le)if(11>le)C=Z.f.RGBA,I&=(xe=Math.abs(C.A))*(me-1)+he<=C.size,I&=xe>=he*gx[le],I&=C.eb!=null;else{C=Z.f.kb,xe=(he+1)/2,Ue=(me+1)/2,be=Math.abs(C.fa),Te=Math.abs(C.Ab);var Je=Math.abs(C.Db),Ke=Math.abs(C.lb),Ge=Ke*(me-1)+he;I&=be*(me-1)+he<=C.Fd,I&=Te*(Ue-1)+xe<=C.Cd,I=(I&=Je*(Ue-1)+xe<=C.Ed)&be>=he&Te>=xe&Je>=xe,I&=C.y!=null,I&=C.f!=null,I&=C.ea!=null,le==12&&(I&=Ke>=he,I&=Ge<=C.Tc,I&=C.F!=null)}else I=0;C=I?0:2}}return C!=0||G!=null&&G.fd&&(C=Fu(Z)),C}var Oa=64,Dc=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],DA=24,RA=32,Du=8,hi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ht("Predictor0","PredictorAdd0"),_.Predictor0=function(){return 4278190080},_.Predictor1=function(C){return C},_.Predictor2=function(C,I,G){return I[G+0]},_.Predictor3=function(C,I,G){return I[G+1]},_.Predictor4=function(C,I,G){return I[G-1]},_.Predictor5=function(C,I,G){return At(At(C,I[G+1]),I[G+0])},_.Predictor6=function(C,I,G){return At(C,I[G-1])},_.Predictor7=function(C,I,G){return At(C,I[G+0])},_.Predictor8=function(C,I,G){return At(I[G-1],I[G+0])},_.Predictor9=function(C,I,G){return At(I[G+0],I[G+1])},_.Predictor10=function(C,I,G){return At(At(C,I[G-1]),At(I[G+0],I[G+1]))},_.Predictor11=function(C,I,G){var Z=I[G+0];return 0>=Yt(Z>>24&255,C>>24&255,(I=I[G-1])>>24&255)+Yt(Z>>16&255,C>>16&255,I>>16&255)+Yt(Z>>8&255,C>>8&255,I>>8&255)+Yt(255&Z,255&C,255&I)?Z:C},_.Predictor12=function(C,I,G){var Z=I[G+0];return(jt((C>>24&255)+(Z>>24&255)-((I=I[G-1])>>24&255))<<24|jt((C>>16&255)+(Z>>16&255)-(I>>16&255))<<16|jt((C>>8&255)+(Z>>8&255)-(I>>8&255))<<8|jt((255&C)+(255&Z)-(255&I)))>>>0},_.Predictor13=function(C,I,G){var Z=I[G-1];return(Kt((C=At(C,I[G+0]))>>24&255,Z>>24&255)<<24|Kt(C>>16&255,Z>>16&255)<<16|Kt(C>>8&255,Z>>8&255)<<8|Kt(C>>0&255,Z>>0&255))>>>0};var vm=_.PredictorAdd0;_.PredictorAdd1=Qt,ht("Predictor2","PredictorAdd2"),ht("Predictor3","PredictorAdd3"),ht("Predictor4","PredictorAdd4"),ht("Predictor5","PredictorAdd5"),ht("Predictor6","PredictorAdd6"),ht("Predictor7","PredictorAdd7"),ht("Predictor8","PredictorAdd8"),ht("Predictor9","PredictorAdd9"),ht("Predictor10","PredictorAdd10"),ht("Predictor11","PredictorAdd11"),ht("Predictor12","PredictorAdd12"),ht("Predictor13","PredictorAdd13");var af=_.PredictorAdd2;It("ColorIndexInverseTransform","MapARGB","32b",function(C){return C>>8&255},function(C){return C}),It("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(C){return C},function(C){return C>>8&255});var wh,co=_.ColorIndexInverseTransform,ss=_.MapARGB,Rc=_.VP8LColorIndexInverseTransformAlpha,sf=_.MapAlpha,Wl=_.VP8LPredictorsAdd=[];Wl.length=16,(_.VP8LPredictors=[]).length=16,(_.VP8LPredictorsAdd_C=[]).length=16,(_.VP8LPredictors_C=[]).length=16;var Lc,Ws,Cs,Uc,mi,Do,dl,Ro,ua,Lo,Na,pi,LA,fl,Ru,Mc,Pc,jc,UA,Lu,Oc,$l,MA,da,Vi,Or,Qr,Gn,va=s(511),Ao=s(2041),Qc=s(225),Hc=s(767),Jl=0,yh=Ao,PA=Qc,is=Hc,uo=va,Ls=0,Uu=1,hl=2,of=3,jA=4,Yl=5,bh=6,lf=7,Vc=8,Xl=9,Mu=10,Ch=[2,3,7],fo=[3,3,11],Gi=[280,256,256,256,40],OA=[0,1,1,1,0],Zl=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ec=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],QA=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],dx=8,cf=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Af=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Qa=null,fa=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],gn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Gc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ml=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],wm=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],HA=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],fx=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],tc=[],$s=[],zi=[],hx=1,Pu=2,pl=[],os=[];ot("UpsampleRgbLinePair",ve,3),ot("UpsampleBgrLinePair",Qe,3),ot("UpsampleRgbaLinePair",Sr,4),ot("UpsampleBgraLinePair",Wr,4),ot("UpsampleArgbLinePair",fr,4),ot("UpsampleRgba4444LinePair",Ct,2),ot("UpsampleRgb565LinePair",Ye,2);var rc=_.UpsampleRgbLinePair,zc=_.UpsampleBgrLinePair,gl=_.UpsampleRgbaLinePair,Eh=_.UpsampleBgraLinePair,_h=_.UpsampleArgbLinePair,ju=_.UpsampleRgba4444LinePair,Sh=_.UpsampleRgb565LinePair,xl=16,Ha=1<<xl-1,qc=-227,Th=482,Vw=6,mx=0,Gw=s(256),Va=s(256),ym=s(256),uf=s(256),df=s(Th-qc),bm=s(Th-qc);Nn("YuvToRgbRow",ve,3),Nn("YuvToBgrRow",Qe,3),Nn("YuvToRgbaRow",Sr,4),Nn("YuvToBgraRow",Wr,4),Nn("YuvToArgbRow",fr,4),Nn("YuvToRgba4444Row",Ct,2),Nn("YuvToRgb565Row",Ye,2);var VA=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],nc=[0,2,8],zw=[8,7,6,4,4,2,2,2,1,1,1,1],px=1;this.WebPDecodeRGBA=function(C,I,G,Z,le){var he=Uu,me=new zl,xe=new ga;me.ba=xe,xe.S=he,xe.width=[xe.width],xe.height=[xe.height];var be=xe.width,Te=xe.height,Ue=new Pa;if(Ue==null||C==null)var Je=2;else e(Ue!=null),Je=ul(C,I,G,Ue.width,Ue.height,Ue.Pd,Ue.Qd,Ue.format,null);if(Je!=0?be=0:(be!=null&&(be[0]=Ue.width[0]),Te!=null&&(Te[0]=Ue.height[0]),be=1),be){xe.width=xe.width[0],xe.height=xe.height[0],Z!=null&&(Z[0]=xe.width),le!=null&&(le[0]=xe.height);e:{if(Z=new qs,(le=new kc).data=C,le.w=I,le.ha=G,le.kd=1,I=[0],e(le!=null),((C=ul(le.data,le.w,le.ha,null,null,null,I,null,le))==0||C==7)&&I[0]&&(C=4),(I=C)==0){if(e(me!=null),Z.data=le.data,Z.w=le.w+le.offset,Z.ha=le.ha-le.offset,Z.put=ja,Z.ac=Zn,Z.bc=zs,Z.ma=me,le.xa){if((C=rt())==null){me=1;break e}if(function(Ke,Ge){var pt=[0],st=[0],Me=[0];t:for(;;){if(Ke==null)return 0;if(Ge==null)return Ke.a=2,0;if(Ke.l=Ge,Ke.a=0,q(Ke.m,Ge.data,Ge.w,Ge.ha),!Ht(Ke.m,pt,st,Me)){Ke.a=3;break t}if(Ke.xb=Pu,Ge.width=pt[0],Ge.height=st[0],!He(pt[0],st[0],1,Ke,null))break t;return 1}return e(Ke.a!=0),0}(C,Z)){if(Z=(I=FA(Z.width,Z.height,me.Oa,me.ba))==0){t:{Z=C;r:for(;;){if(Z==null){Z=0;break t}if(e(Z.s.yc!=null),e(Z.s.Ya!=null),e(0<Z.s.Wb),e((G=Z.l)!=null),e((le=G.ma)!=null),Z.xb!=0){if(Z.ca=le.ba,Z.tb=le.tb,e(Z.ca!=null),!Fc(le.Oa,G,of)){Z.a=2;break r}if(!$e(Z,G.width)||G.da)break r;if((G.da||Mr(Z.ca.S))&&Ve(),11>Z.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Z.ca.f.kb.F!=null&&Ve()),Z.Pb&&0<Z.s.ua&&Z.s.vb.X==null&&!at(Z.s.vb,Z.s.Wa.Xa)){Z.a=1;break r}Z.xb=0}if(!ke(Z,Z.V,Z.Ba,Z.c,Z.i,G.o,Ne))break r;le.Dc=Z.Ma,Z=1;break t}e(Z.a!=0),Z=0}Z=!Z}Z&&(I=C.a)}else I=C.a}else{if((C=new vs)==null){me=1;break e}if(C.Fa=le.na,C.P=le.P,C.qc=le.Sa,_c(C,Z)){if((I=FA(Z.width,Z.height,me.Oa,me.ba))==0){if(C.Aa=0,G=me.Oa,e((le=C)!=null),G!=null){if(0<(be=0>(be=G.Md)?0:100<be?255:255*be/100)){for(Te=Ue=0;4>Te;++Te)12>(Je=le.pb[Te]).lc&&(Je.ia=be*zw[0>Je.lc?0:Je.lc]>>3),Ue|=Je.ia;Ue&&(alert("todo:VP8InitRandom"),le.ia=1)}le.Ga=G.Id,100<le.Ga?le.Ga=100:0>le.Ga&&(le.Ga=0)}SA(C,Z)||(I=C.a)}}else I=C.a}I==0&&me.Oa!=null&&me.Oa.fd&&(I=Fu(me.ba))}me=I}he=me!=0?null:11>he?xe.f.RGBA.eb:xe.f.kb.y}else he=null;return he};var gx=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(_,B){for(var Q="",R=0;R<4;R++)Q+=String.fromCharCode(_[B++]);return Q}function f(_,B){return(_[B+0]<<0|_[B+1]<<8|_[B+2]<<16)>>>0}function m(_,B){return(_[B+0]<<0|_[B+1]<<8|_[B+2]<<16|_[B+3]<<24)>>>0}new c;var p=[0],g=[0],b=[],y=new c,T=t,k=function(_,B){var Q={},R=0,F=!1,V=0,X=0;if(Q.frames=[],!function(K,Y,ee,Ae){for(var Se=0;Se<Ae;Se++)if(K[Y+Se]!=ee.charCodeAt(Se))return!0;return!1}(_,B,"RIFF",4)){var oe,te;for(m(_,B+=4),B+=8;B<_.length;){var ae=u(_,B),q=m(_,B+=4);B+=4;var J=q+(1&q);switch(ae){case"VP8 ":case"VP8L":Q.frames[R]===void 0&&(Q.frames[R]={}),(P=Q.frames[R]).src_off=F?X:B-8,P.src_size=V+q+8,R++,F&&(F=!1,V=0,X=0);break;case"VP8X":(P=Q.header={}).feature_flags=_[B];var W=B+4;P.canvas_width=1+f(_,W),W+=3,P.canvas_height=1+f(_,W),W+=3;break;case"ALPH":F=!0,V=J+8,X=B-8;break;case"ANIM":(P=Q.header).bgcolor=m(_,B),W=B+4,P.loop_count=(oe=_)[(te=W)+0]<<0|oe[te+1]<<8,W+=2;break;case"ANMF":var de,P;(P=Q.frames[R]={}).offset_x=2*f(_,B),B+=3,P.offset_y=2*f(_,B),B+=3,P.width=1+f(_,B),B+=3,P.height=1+f(_,B),B+=3,P.duration=f(_,B),B+=3,de=_[B++],P.dispose=1&de,P.blend=de>>1&1}ae!="ANMF"&&(B+=J)}return Q}}(T,0);k.response=T,k.rgbaoutput=!0,k.dataurl=!1;var D=k.header?k.header:null,L=k.frames?k.frames:null;if(D){D.loop_counter=D.loop_count,p=[D.canvas_height],g=[D.canvas_width];for(var j=0;j<L.length&&L[j].blend!=0;j++);}var H=L[0],U=y.WebPDecodeRGBA(T,H.src_off,H.src_size,g,p);H.rgba=U,H.imgwidth=g[0],H.imgheight=p[0];for(var E=0;E<g[0]*p[0]*4;E++)b[E]=U[E];return this.width=g,this.height=p,this.data=b,this}(function(t){var e=function(){return typeof AE=="function"},r=function(p,g,b,y){var T=4,k=i;switch(y){case t.image_compression.FAST:T=1,k=s;break;case t.image_compression.MEDIUM:T=6,k=o;break;case t.image_compression.SLOW:T=9,k=c}p=n(p,g,b,k);var D=AE(p,{level:T});return t.__addimage__.arrayBufferToBinaryString(D)},n=function(p,g,b,y){for(var T,k,D,L=p.length/g,j=new Uint8Array(p.length+L),H=f(),U=0;U<L;U+=1){if(D=U*g,T=p.subarray(D,D+g),y)j.set(y(T,b,k),D+U);else{for(var E,_=H.length,B=[];E<_;E+=1)B[E]=H[E](T,b,k);var Q=m(B.concat());j.set(B[Q],D+U)}k=T}return j},a=function(p){var g=Array.apply([],p);return g.unshift(0),g},s=function(p,g){var b,y=[],T=p.length;y[0]=1;for(var k=0;k<T;k+=1)b=p[k-g]||0,y[k+1]=p[k]-b+256&255;return y},i=function(p,g,b){var y,T=[],k=p.length;T[0]=2;for(var D=0;D<k;D+=1)y=b&&b[D]||0,T[D+1]=p[D]-y+256&255;return T},o=function(p,g,b){var y,T,k=[],D=p.length;k[0]=3;for(var L=0;L<D;L+=1)y=p[L-g]||0,T=b&&b[L]||0,k[L+1]=p[L]+256-(y+T>>>1)&255;return k},c=function(p,g,b){var y,T,k,D,L=[],j=p.length;L[0]=4;for(var H=0;H<j;H+=1)y=p[H-g]||0,T=b&&b[H]||0,k=b&&b[H-g]||0,D=u(y,T,k),L[H+1]=p[H]-D+256&255;return L},u=function(p,g,b){if(p===g&&g===b)return p;var y=Math.abs(g-b),T=Math.abs(p-b),k=Math.abs(p+g-b-b);return y<=T&&y<=k?p:T<=k?g:b},f=function(){return[a,s,i,o,c]},m=function(p){var g=p.map(function(b){return b.reduce(function(y,T){return y+Math.abs(T)},0)});return g.indexOf(Math.min.apply(null,g))};t.processPNG=function(p,g,b,y){var T,k,D,L,j,H,U,E,_,B,Q,R,F,V,X,oe=this.decode.FLATE_DECODE,te="";if(this.__addimage__.isArrayBuffer(p)&&(p=new Uint8Array(p)),this.__addimage__.isArrayBufferView(p)){if(p=(D=new bne(p)).imgData,k=D.bits,T=D.colorSpace,j=D.colors,[4,6].indexOf(D.colorType)!==-1){if(D.bits===8){_=(E=D.pixelBitlength==32?new Uint32Array(D.decodePixels().buffer):D.pixelBitlength==16?new Uint16Array(D.decodePixels().buffer):new Uint8Array(D.decodePixels().buffer)).length,Q=new Uint8Array(_*D.colors),B=new Uint8Array(_);var ae,q=D.pixelBitlength-D.bits;for(V=0,X=0;V<_;V++){for(F=E[V],ae=0;ae<q;)Q[X++]=F>>>ae&255,ae+=D.bits;B[V]=F>>>ae&255}}if(D.bits===16){_=(E=new Uint32Array(D.decodePixels().buffer)).length,Q=new Uint8Array(_*(32/D.pixelBitlength)*D.colors),B=new Uint8Array(_*(32/D.pixelBitlength)),R=D.colors>1,V=0,X=0;for(var J=0;V<_;)F=E[V++],Q[X++]=F>>>0&255,R&&(Q[X++]=F>>>16&255,F=E[V++],Q[X++]=F>>>0&255),B[J++]=F>>>16&255;k=8}y!==t.image_compression.NONE&&e()?(p=r(Q,D.width*D.colors,D.colors,y),U=r(B,D.width,1,y)):(p=Q,U=B,oe=void 0)}if(D.colorType===3&&(T=this.color_spaces.INDEXED,H=D.palette,D.transparency.indexed)){var W=D.transparency.indexed,de=0;for(V=0,_=W.length;V<_;++V)de+=W[V];if((de/=255)===_-1&&W.indexOf(0)!==-1)L=[W.indexOf(0)];else if(de!==_){for(E=D.decodePixels(),B=new Uint8Array(E.length),V=0,_=E.length;V<_;V++)B[V]=W[E[V]];U=r(B,D.width,1)}}var P=function(K){var Y;switch(K){case t.image_compression.FAST:Y=11;break;case t.image_compression.MEDIUM:Y=13;break;case t.image_compression.SLOW:Y=14;break;default:Y=12}return Y}(y);return oe===this.decode.FLATE_DECODE&&(te="/Predictor "+P+" "),te+="/Colors "+j+" /BitsPerComponent "+k+" /Columns "+D.width,(this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),(U&&this.__addimage__.isArrayBuffer(U)||this.__addimage__.isArrayBufferView(U))&&(U=this.__addimage__.arrayBufferToBinaryString(U)),{alias:b,data:p,index:g,filter:oe,decodeParameters:te,transparency:L,palette:H,sMask:U,predictor:P,width:D.width,height:D.height,bitsPerComponent:k,colorSpace:T}}}})(ir.API),function(t){t.processGIF89A=function(e,r,n,a){var s=new Cne(e),i=s.width,o=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:i,height:o},f=new Nb(100).encode(u,100);return t.processJPEG.call(this,f,r,n,a)},t.processGIF87A=t.processGIF89A}(ir.API),uc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},uc.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){Xn.log("bit decode error:"+r)}},uc.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<e;a++)for(var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var c=this.palette[s>>7-o&1];this.data[i+4*o]=c.blue,this.data[i+4*o+1]=c.green,this.data[i+4*o+2]=c.red,this.data[i+4*o+3]=255}r!==0&&(this.pos+=4-r)}},uc.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<t;a++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+2*a*4,o=s>>4,c=15&s,u=this.palette[o];if(this.data[i]=u.blue,this.data[i+1]=u.green,this.data[i+2]=u.red,this.data[i+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[i+4]=u.blue,this.data[i+4+1]=u.green,this.data[i+4+2]=u.red,this.data[i+4+3]=255}e!==0&&(this.pos+=4-e)}},uc.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var i=this.palette[a];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},uc.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&e)/e*255|0,o=(s>>5&e)/e*255|0,c=(s>>10&e)/e*255|0,u=s>>15?255:0,f=n*this.width*4+4*a;this.data[f]=c,this.data[f+1]=o,this.data[f+2]=i,this.data[f+3]=u}this.pos+=t}},uc.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&e)/e*255|0,c=(i>>5&r)/r*255|0,u=(i>>11)/e*255|0,f=a*this.width*4+4*s;this.data[f]=u,this.data[f+1]=c,this.data[f+2]=o,this.data[f+3]=255}this.pos+=t}},uc.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=e*this.width*4+4*r;this.data[i]=s,this.data[i+1]=a,this.data[i+2]=n,this.data[i+3]=255}this.pos+=this.width%4}},uc.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=i}},uc.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,a){var s=new uc(e,!1),i=s.width,o=s.height,c={data:s.getData(),width:i,height:o},u=new Nb(100).encode(c,100);return t.processJPEG.call(this,u,r,n,a)}}(ir.API),_I.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,a){var s=new _I(e),i=s.width,o=s.height,c={data:s.getData(),width:i,height:o},u=new Nb(100).encode(c,100);return t.processJPEG.call(this,u,r,n,a)}}(ir.API),ir.API.processRGBA=function(t,e,r){for(var n=t.data,a=n.length,s=new Uint8Array(a/4*3),i=new Uint8Array(a/4),o=0,c=0,u=0;u<a;u+=4){var f=n[u],m=n[u+1],p=n[u+2],g=n[u+3];s[o++]=f,s[o++]=m,s[o++]=p,i[c++]=g}var b=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:b,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},ir.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Yh=ir.API,C1=Yh.getCharWidthsArray=function(t,e){var r,n,a=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),i=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:a.metadata.Unicode.widths,c=o.fof?o.fof:1,u=e.kerning?e.kerning:a.metadata.Unicode.kerning,f=u.fof?u.fof:1,m=e.doKerning!==!1,p=0,g=t.length,b=0,y=o[0]||c,T=[];for(r=0;r<g;r++)n=t.charCodeAt(r),typeof a.metadata.widthOfString=="function"?T.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+i*(1e3/s)||0)/1e3):(p=m&&On(u[n])==="object"&&!isNaN(parseInt(u[n][b],10))?u[n][b]/f:0,T.push((o[n]||y)/c+p)),b=n;return T},yI=Yh.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return Yh.processArabic&&(t=Yh.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,a)/r:C1.apply(this,arguments).reduce(function(s,i){return s+i},0)},bI=function(t,e,r,n){for(var a=[],s=0,i=t.length,o=0;s!==i&&o+e[s]<r;)o+=e[s],s++;a.push(t.slice(0,s));var c=s;for(o=0;s!==i;)o+e[s]>n&&(a.push(t.slice(c,s)),o=0,c=s),o+=e[s],s++;return c!==s&&a.push(t.slice(c,s)),a},CI=function(t,e,r){r||(r={});var n,a,s,i,o,c,u,f=[],m=[f],p=r.textIndent||0,g=0,b=0,y=t.split(" "),T=C1.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?y[0].length+2:r.lineIndent||0){var k=Array(c).join(" "),D=[];y.map(function(j){(j=j.split(/\s*\n/)).length>1?D=D.concat(j.map(function(H,U){return(U&&H.length?`
`:"")+H})):D.push(j[0])}),y=D,c=yI.apply(this,[k,r])}for(s=0,i=y.length;s<i;s++){var L=0;if(n=y[s],c&&n[0]==`
`&&(n=n.substr(1),L=1),p+g+(b=(a=C1.apply(this,[n,r])).reduce(function(j,H){return j+H},0))>e||L){if(b>e){for(o=bI.apply(this,[n,a,e-(p+g),e]),f.push(o.shift()),f=[o.pop()];o.length;)m.push([o.shift()]);b=a.slice(n.length-(f[0]?f[0].length:0)).reduce(function(j,H){return j+H},0)}else f=[n];m.push(f),p=b+c,g=T}else f.push(n),p+=g+b,g=T}return u=c?function(j,H){return(H?k:"")+j.join(" ")}:function(j){return j.join(" ")},m.map(u)},Yh.splitTextToSize=function(t,e,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var m=this.internal.getFont(f.fontName,f.fontStyle);return m.metadata.Unicode?{widths:m.metadata.Unicode.widths||{0:1},kerning:m.metadata.Unicode.kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var i=1*this.internal.scaleFactor*e/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var o,c,u=[];for(o=0,c=n.length;o<c;o++)u=u.concat(CI.apply(this,[n[o],i,s]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",r={},n={},a=0;a<e.length;a++)r[e[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=e[a];var s=function(m){return"0x"+parseInt(m,10).toString(16)},i=t.__fontmetrics__.compress=function(m){var p,g,b,y,T=["{"];for(var k in m){if(p=m[k],isNaN(parseInt(k,10))?g="'"+k+"'":(k=parseInt(k,10),g=(g=s(k).slice(2)).slice(0,-1)+n[g.slice(-1)]),typeof p=="number")p<0?(b=s(p).slice(3),y="-"):(b=s(p).slice(2),y=""),b=y+b.slice(0,-1)+n[b.slice(-1)];else{if(On(p)!=="object")throw new Error("Don't know what to do with value type "+On(p)+".");b=i(p)}T.push(g+b)}return T.push("}"),T.join("")},o=t.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,g,b,y,T={},k=1,D=T,L=[],j="",H="",U=m.length-1,E=1;E<U;E+=1)(y=m[E])=="'"?p?(b=p.join(""),p=void 0):p=[]:p?p.push(y):y=="{"?(L.push([D,b]),D={},b=void 0):y=="}"?((g=L.pop())[0][g[1]]=D,b=void 0,D=g[0]):y=="-"?k=-1:b===void 0?r.hasOwnProperty(y)?(j+=r[y],b=parseInt(j,16)*k,k=1,j=""):j+=y:r.hasOwnProperty(y)?(H+=r[y],D[b]=parseInt(H,16)*k,k=1,b=void 0,H=""):H+=y;return T},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},f={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(m){var p=m.font,g=f.Unicode[p.postScriptName];g&&(p.metadata.Unicode={},p.metadata.Unicode.widths=g.widths,p.metadata.Unicode.kerning=g.kerning);var b=u.Unicode[p.postScriptName];b&&(p.metadata.Unicode.encoding=b,p.encoding=b.codePages[0])}])}(ir.API),function(t){var e=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};t.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(i,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Hp(o)),i.metadata=t.API.TTFFont.open(o),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(a,n)}}])}(ir),function(t){function e(){return(xr.canvg?Promise.resolve(xr.canvg):Zv(()=>import("./index.es-ZhXOS-VP.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}ir.API.addSvgAsImage=function(r,n,a,s,i,o,c,u){if(isNaN(n)||isNaN(a))throw Xn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(i))throw Xn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=s,f.height=i;var m=f.getContext("2d");m.fillStyle="#fff",m.fillRect(0,0,f.width,f.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return e().then(function(b){return b.fromString(m,r,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(b){return b.render(p)}).then(function(){g.addImage(f.toDataURL("image/jpeg",1),n,a,s,i,c,u)})}}(),ir.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(e,r);return this},ir.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,a,s,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(i),c=[],u=0,f=0,m=0;function p(b,y){var T,k=!1;for(T=0;T<b.length;T+=1)b[T]===y&&(k=!0);return k}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var g=o.length;for(m=0;m<g;m+=1)r[o[m]].value=r[o[m]].defaultValue,r[o[m]].explicitSet=!1}if(On(t)==="object"){for(a in t)if(s=t[a],p(o,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&p(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(f=0;f<s[u].length;f+=1)typeof s[u][f]!="number"&&(n=!1);n===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,y=[];for(b in r)r[b].explicitSet===!0&&(r[b].type==="name"?y.push("/"+b+" /"+r[b].value):y.push("/"+b+" "+r[b].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+i.length+o.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+i+o+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(ir.API),function(t){var e=t.API,r=e.pdfEscape16=function(s,i){for(var o,c=i.metadata.Unicode.widths,u=["","0","00","000","0000"],f=[""],m=0,p=s.length;m<p;++m){if(o=i.metadata.characterToGlyph(s.charCodeAt(m)),i.metadata.glyIdsUsed.push(o),i.metadata.toUnicode[o]=s.charCodeAt(m),c.indexOf(o)==-1&&(c.push(o),c.push([parseInt(i.metadata.widthOfGlyph(o),10)])),o=="0")return f.join("");o=o.toString(16),f.push(u[4-o.length],o)}return f.join("")},n=function(s){var i,o,c,u,f,m,p;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],m=0,p=(o=Object.keys(s).sort(function(g,b){return g-b})).length;m<p;m++)i=o[m],c.length>=100&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[i]!==void 0&&s[i]!==null&&typeof s[i].toString=="function"&&(u=("0000"+s[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),c.push("<"+i+"><"+u+">"));return c.length&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),f+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(i){var o=i.font,c=i.out,u=i.newObject,f=i.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var m=o.metadata.Unicode.widths,p=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),g="",b=0;b<p.length;b++)g+=String.fromCharCode(p[b]);var y=u();f({data:g,addLength1:!0,objectId:y}),c("endobj");var T=u();f({data:n(o.metadata.toUnicode),addLength1:!0,objectId:T}),c("endobj");var k=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+p0(o.fontName)),c("/FontFile2 "+y+" 0 R"),c("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),c("/Flags "+o.metadata.flags),c("/StemV "+o.metadata.stemV),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c(">>"),c("endobj");var D=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+p0(o.fontName)),c("/FontDescriptor "+k+" 0 R"),c("/W "+t.API.PDFObject.convert(m)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+o.encoding+")"),c(">>"),c(">>"),c("endobj"),o.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+T+" 0 R"),c("/BaseFont /"+p0(o.fontName)),c("/Encoding /"+o.encoding),c("/DescendantFonts ["+D+" 0 R]"),c(">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(i){var o=i.font,c=i.out,u=i.newObject,f=i.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var m=o.metadata.rawData,p="",g=0;g<m.length;g++)p+=String.fromCharCode(m[g]);var b=u();f({data:p,addLength1:!0,objectId:b}),c("endobj");var y=u();f({data:n(o.metadata.toUnicode),addLength1:!0,objectId:y}),c("endobj");var T=u();c("<<"),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c("/StemV "+o.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+b+" 0 R"),c("/Flags 96"),c("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),c("/FontName /"+p0(o.fontName)),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c(">>"),c("endobj"),o.objectNumber=u();for(var k=0;k<o.metadata.hmtx.widths.length;k++)o.metadata.hmtx.widths[k]=parseInt(o.metadata.hmtx.widths[k]*(1e3/o.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+p0(o.fontName)+"/FontDescriptor "+T+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]);var a=function(s){var i,o=s.text||"",c=s.x,u=s.y,f=s.options||{},m=s.mutex||{},p=m.pdfEscape,g=m.activeFontKey,b=m.fonts,y=g,T="",k=0,D="",L=b[y].encoding;if(b[y].encoding!=="Identity-H")return{text:o,x:c,y:u,options:f,mutex:m};for(D=o,y=g,Array.isArray(o)&&(D=o[0]),k=0;k<D.length;k+=1)b[y].metadata.hasOwnProperty("cmap")&&(i=b[y].metadata.cmap.unicode.codeMap[D[k].charCodeAt(0)]),i||D[k].charCodeAt(0)<256&&b[y].metadata.hasOwnProperty("Unicode")?T+=D[k]:T+="";var j="";return parseInt(y.slice(1))<14||L==="WinAnsiEncoding"?j=p(T,y).split("").map(function(H){return H.charCodeAt(0).toString(16)}).join(""):L==="Identity-H"&&(j=r(T,b[y])),m.isHex=!0,{text:j,x:c,y:u,options:f,mutex:m}};e.events.push(["postProcessText",function(s){var i=s.text||"",o=[],c={text:i,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(i)){var u=0;for(u=0;u<i.length;u+=1)Array.isArray(i[u])&&i[u].length===3?o.push([a(Object.assign({},c,{text:i[u][0]})).text,i[u][1],i[u][2]]):o.push(a(Object.assign({},c,{text:i[u]})).text);s.text=o}else s.text=a(Object.assign({},c,{text:i})).text}])}(ir),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(ir.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var a,s,i,o,c,u,f,m=e,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},T=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],k=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),D=!1,L=0;this.__bidiEngine__={};var j=function(R){var F=R.charCodeAt(),V=F>>8,X=y[V];return X!==void 0?m[256*X+(255&F)]:V===252||V===253?"AL":k.test(V)?"L":V===8?"R":"N"},H=function(R){for(var F,V=0;V<R.length;V++){if((F=j(R.charAt(V)))==="L")return!1;if(F==="R")return!0}return!1},U=function(R,F,V,X){var oe,te,ae,q,J=F[X];switch(J){case"L":case"R":D=!1;break;case"N":case"AN":break;case"EN":D&&(J="AN");break;case"AL":D=!0,J="R";break;case"WS":J="N";break;case"CS":X<1||X+1>=F.length||(oe=V[X-1])!=="EN"&&oe!=="AN"||(te=F[X+1])!=="EN"&&te!=="AN"?J="N":D&&(te="AN"),J=te===oe?te:"N";break;case"ES":J=(oe=X>0?V[X-1]:"B")==="EN"&&X+1<F.length&&F[X+1]==="EN"?"EN":"N";break;case"ET":if(X>0&&V[X-1]==="EN"){J="EN";break}if(D){J="N";break}for(ae=X+1,q=F.length;ae<q&&F[ae]==="ET";)ae++;J=ae<q&&F[ae]==="EN"?"EN":"N";break;case"NSM":if(i&&!o){for(q=F.length,ae=X+1;ae<q&&F[ae]==="NSM";)ae++;if(ae<q){var W=R[X],de=W>=1425&&W<=2303||W===64286;if(oe=F[ae],de&&(oe==="R"||oe==="AL")){J="R";break}}}J=X<1||(oe=F[X-1])==="B"?"N":V[X-1];break;case"B":D=!1,a=!0,J=L;break;case"S":s=!0,J="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":D=!1;break;case"BN":J="N"}return J},E=function(R,F,V){var X=R.split("");return V&&_(X,V,{hiLevel:L}),X.reverse(),F&&F.reverse(),X.join("")},_=function(R,F,V){var X,oe,te,ae,q,J=-1,W=R.length,de=0,P=[],K=L?g:p,Y=[];for(D=!1,a=!1,s=!1,oe=0;oe<W;oe++)Y[oe]=j(R[oe]);for(te=0;te<W;te++){if(q=de,P[te]=U(R,Y,P,te),X=240&(de=K[q][b[P[te]]]),de&=15,F[te]=ae=K[de][5],X>0)if(X===16){for(oe=J;oe<te;oe++)F[oe]=1;J=-1}else J=-1;if(K[de][6])J===-1&&(J=te);else if(J>-1){for(oe=J;oe<te;oe++)F[oe]=ae;J=-1}Y[te]==="B"&&(F[te]=0),V.hiLevel|=ae}s&&function(ee,Ae,Se){for(var ge=0;ge<Se;ge++)if(ee[ge]==="S"){Ae[ge]=L;for(var pe=ge-1;pe>=0&&ee[pe]==="WS";pe--)Ae[pe]=L}}(Y,F,W)},B=function(R,F,V,X,oe){if(!(oe.hiLevel<R)){if(R===1&&L===1&&!a)return F.reverse(),void(V&&V.reverse());for(var te,ae,q,J,W=F.length,de=0;de<W;){if(X[de]>=R){for(q=de+1;q<W&&X[q]>=R;)q++;for(J=de,ae=q-1;J<ae;J++,ae--)te=F[J],F[J]=F[ae],F[ae]=te,V&&(te=V[J],V[J]=V[ae],V[ae]=te);de=q}de++}}},Q=function(R,F,V){var X=R.split(""),oe={hiLevel:L};return V||(V=[]),_(X,V,oe),function(te,ae,q){if(q.hiLevel!==0&&f)for(var J,W=0;W<te.length;W++)ae[W]===1&&(J=T.indexOf(te[W]))>=0&&(te[W]=T[J+1])}(X,V,oe),B(2,X,F,V,oe),B(1,X,F,V,oe),X.join("")};return this.__bidiEngine__.doBidiReorder=function(R,F,V){if(function(oe,te){if(te)for(var ae=0;ae<oe.length;ae++)te[ae]=ae;o===void 0&&(o=H(oe)),u===void 0&&(u=H(oe))}(R,F),i||!c||u)if(i&&c&&o^u)L=o?1:0,R=E(R,F,V);else if(!i&&c&&u)L=o?1:0,R=Q(R,F,V),R=E(R,F);else if(!i||o||c||u){if(i&&!c&&o^u)R=E(R,F),o?(L=0,R=Q(R,F,V)):(L=1,R=Q(R,F,V),R=E(R,F));else if(i&&o&&!c&&u)L=1,R=Q(R,F,V),R=E(R,F);else if(!i&&!c&&o^u){var X=f;o?(L=1,R=Q(R,F,V),L=0,f=!1,R=Q(R,F,V),f=X):(L=0,R=Q(R,F,V),R=E(R,F),L=1,f=!1,R=Q(R,F,V),f=X,R=E(R,F))}}else L=0,R=Q(R,F,V);else L=o?1:0,R=Q(R,F,V);return R},this.__bidiEngine__.setOptions=function(R){R&&(i=R.isInputVisual,c=R.isOutputVisual,o=R.isInputRtl,u=R.isOutputRtl,f=R.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var a=n.text,s=(n.x,n.y,n.options||{}),i=(n.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var o=0;for(i=[],o=0;o<a.length;o+=1)Object.prototype.toString.call(a[o])==="[object Array]"?i.push([r.doBidiReorder(a[o][0]),a[o][1],a[o][2]]):i.push([r.doBidiReorder(a[o])]);n.text=i}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(ir),ir.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new qd(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Pne(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new Ene(this.contents),this.head=new Sne(this),this.name=new Ine(this),this.cmap=new zL(this),this.toUnicode={},this.hhea=new Tne(this),this.maxp=new Fne(this),this.hmtx=new Dne(this),this.post=new Nne(this),this.os2=new Bne(this),this.loca=new Mne(this),this.glyf=new Rne(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,o,c,u;for(u=[],i=0,o=(c=this.bbox).length;i<o;i++)e=c[i],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),(32768&(r=a>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var a,s,i,o;for(i=0,s=0,o=(e=""+e).length;0<=o?s<o:s>o;s=0<=o?++s:--s)a=e.charCodeAt(s),i+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return i*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var Cc,qd=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,a;for(a=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(e.charCodeAt(r)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,a,s,i,o,c;return e=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^i)+256*(255^o)+(255^c)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*i+256*o+c},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,a,s;for(s=[],n=0,a=e.length;n<a;n++)r=e[n],s.push(this.writeByte(r));return s},t}(),Ene=function(){var t;function e(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,a,s,i,o,c,u,f,m,p,g,b,y;for(y in g=Object.keys(r).length,c=Math.log(2),m=16*Math.floor(Math.log(g)/c),i=Math.floor(m/c),f=16*g-m,(a=new qd).writeInt(this.scalarType),a.writeShort(g),a.writeShort(m),a.writeShort(i),a.writeShort(f),s=16*g,u=a.pos+s,o=null,b=[],r)for(p=r[y],a.writeString(y),a.writeInt(t(p)),a.writeInt(u),a.writeInt(p.length),b=b.concat(p),y==="head"&&(o=u),u+=p.length;u%4;)b.push(0),u++;return a.write(b),n=2981146554-t(a.data),a.pos=o+8,a.writeUInt32(n),a.data},t=function(r){var n,a,s,i;for(r=qL.call(r);r.length%4;)r.push(0);for(s=new qd(r),a=0,n=0,i=r.length;n<i;n=n+=4)a+=s.readUInt32();return 4294967295&a},e}(),_ne={}.hasOwnProperty,yA=function(t,e){for(var r in e)_ne.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Cc=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var Sne=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yA(e,Cc),e.prototype.tag="head",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},e.prototype.encode=function(r){var n;return(n=new qd).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},e}(),SI=function(){function t(e,r){var n,a,s,i,o,c,u,f,m,p,g,b,y,T,k,D,L;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),m=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(g=e.readUInt16(),p=g/2,e.pos+=6,s=function(){var j,H;for(H=[],c=j=0;0<=p?j<p:j>p;c=0<=p?++j:--j)H.push(e.readUInt16());return H}(),e.pos+=2,y=function(){var j,H;for(H=[],c=j=0;0<=p?j<p:j>p;c=0<=p?++j:--j)H.push(e.readUInt16());return H}(),u=function(){var j,H;for(H=[],c=j=0;0<=p?j<p:j>p;c=0<=p?++j:--j)H.push(e.readUInt16());return H}(),f=function(){var j,H;for(H=[],c=j=0;0<=p?j<p:j>p;c=0<=p?++j:--j)H.push(e.readUInt16());return H}(),a=(this.length-e.pos+this.offset)/2,o=function(){var j,H;for(H=[],c=j=0;0<=a?j<a:j>a;c=0<=a?++j:--j)H.push(e.readUInt16());return H}(),c=k=0,L=s.length;k<L;c=++k)for(T=s[c],n=D=b=y[c];b<=T?D<=T:D>=T;n=b<=T?++D:--D)f[c]===0?i=n+u[c]:(i=o[f[c]/2+(n-b)-(p-c)]||0)!==0&&(i+=u[c]),this.codeMap[n]=65535&i}e.pos=m}return t.encode=function(e,r){var n,a,s,i,o,c,u,f,m,p,g,b,y,T,k,D,L,j,H,U,E,_,B,Q,R,F,V,X,oe,te,ae,q,J,W,de,P,K,Y,ee,Ae,Se,ge,pe,ye,ue,se;switch(X=new qd,i=Object.keys(e).sort(function(Pe,at){return Pe-at}),r){case"macroman":for(y=0,T=function(){var Pe=[];for(b=0;b<256;++b)Pe.push(0);return Pe}(),D={0:0},s={},oe=0,J=i.length;oe<J;oe++)D[pe=e[a=i[oe]]]==null&&(D[pe]=++y),s[a]={old:e[a],new:D[e[a]]},T[a]=D[e[a]];return X.writeUInt16(1),X.writeUInt16(0),X.writeUInt32(12),X.writeUInt16(0),X.writeUInt16(262),X.writeUInt16(0),X.write(T),{charMap:s,subtable:X.data,maxGlyphID:y+1};case"unicode":for(F=[],m=[],L=0,D={},n={},k=u=null,te=0,W=i.length;te<W;te++)D[H=e[a=i[te]]]==null&&(D[H]=++L),n[a]={old:H,new:D[H]},o=D[H]-a,k!=null&&o===u||(k&&m.push(k),F.push(a),u=o),k=a;for(k&&m.push(k),m.push(65535),F.push(65535),Q=2*(B=F.length),_=2*Math.pow(Math.log(B)/Math.LN2,2),p=Math.log(_/2)/Math.LN2,E=2*B-_,c=[],U=[],g=[],b=ae=0,de=F.length;ae<de;b=++ae){if(R=F[b],f=m[b],R===65535){c.push(0),U.push(0);break}if(R-(V=n[R].new)>=32768)for(c.push(0),U.push(2*(g.length+B-b)),a=q=R;R<=f?q<=f:q>=f;a=R<=f?++q:--q)g.push(n[a].new);else c.push(V-R),U.push(0)}for(X.writeUInt16(3),X.writeUInt16(1),X.writeUInt32(12),X.writeUInt16(4),X.writeUInt16(16+8*B+2*g.length),X.writeUInt16(0),X.writeUInt16(Q),X.writeUInt16(_),X.writeUInt16(p),X.writeUInt16(E),Se=0,P=m.length;Se<P;Se++)a=m[Se],X.writeUInt16(a);for(X.writeUInt16(0),ge=0,K=F.length;ge<K;ge++)a=F[ge],X.writeUInt16(a);for(ye=0,Y=c.length;ye<Y;ye++)o=c[ye],X.writeUInt16(o);for(ue=0,ee=U.length;ue<ee;ue++)j=U[ue],X.writeUInt16(j);for(se=0,Ae=g.length;se<Ae;se++)y=g[se],X.writeUInt16(y);return{charMap:n,subtable:X.data,maxGlyphID:L+1}}},t}(),zL=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yA(e,Cc),e.prototype.tag="cmap",e.prototype.parse=function(r){var n,a,s;for(r.pos=this.offset,this.version=r.readUInt16(),s=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)n=new SI(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(r,n){var a,s;return n==null&&(n="macroman"),a=SI.encode(r,n),(s=new qd).writeUInt16(0),s.writeUInt16(1),a.table=s.data.concat(a.subtable),a},e}(),Tne=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yA(e,Cc),e.prototype.tag="hhea",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},e}(),Bne=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yA(e,Cc),e.prototype.tag="OS/2",e.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(r.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},e}(),Nne=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yA(e,Cc),e.prototype.tag="post",e.prototype.parse=function(r){var n,a,s;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var i;for(a=r.readUInt16(),this.glyphNameIndex=[],i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],s=[];r.pos<this.offset+this.length;)n=r.readByte(),s.push(this.names.push(r.readString(n)));return s;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var o,c,u;for(u=[],i=o=0,c=this.file.maxp.numGlyphs;0<=c?o<c:o>c;i=0<=c?++o:--o)u.push(r.readUInt32());return u}).call(this)}},e}(),kne=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Ine=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yA(e,Cc),e.prototype.tag="name",e.prototype.parse=function(r){var n,a,s,i,o,c,u,f,m,p,g;for(r.pos=this.offset,r.readShort(),n=r.readShort(),c=r.readShort(),a=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(u={},i=m=0,p=a.length;m<p;i=++m)s=a[i],r.pos=s.offset,f=r.readString(s.length),o=new kne(f,s),u[g=s.nameID]==null&&(u[g]=[]),u[s.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),Fne=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yA(e,Cc),e.prototype.tag="maxp",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},e}(),Dne=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yA(e,Cc),e.prototype.tag="hmtx",e.prototype.parse=function(r){var n,a,s,i,o,c,u;for(r.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var f,m;for(m=[],n=f=0;0<=s?f<s:f>s;n=0<=s?++f:--f)m.push(r.readInt16());return m}(),this.widths=(function(){var f,m,p,g;for(g=[],f=0,m=(p=this.metrics).length;f<m;f++)i=p[f],g.push(i.advance);return g}).call(this),a=this.widths[this.widths.length-1],u=[],n=o=0;0<=s?o<s:o>s;n=0<=s?++o:--o)u.push(this.widths.push(a));return u},e.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},e}(),qL=[].slice,Rne=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yA(e,Cc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(r){var n,a,s,i,o,c,u,f,m,p;return r in this.cache?this.cache[r]:(i=this.file.loca,n=this.file.contents,a=i.indexOf(r),(s=i.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+a,o=(c=new qd(n.read(s))).readShort(),f=c.readShort(),p=c.readShort(),u=c.readShort(),m=c.readShort(),this.cache[r]=o===-1?new Une(c,f,p,u,m):new Lne(c,o,f,p,u,m),this.cache[r]))},e.prototype.encode=function(r,n,a){var s,i,o,c,u;for(o=[],i=[],c=0,u=n.length;c<u;c++)s=r[n[c]],i.push(o.length),s&&(o=o.concat(s.encode(a)));return i.push(o.length),{table:o,offsets:i}},e}(),Lne=function(){function t(e,r,n,a,s,i){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Une=function(){function t(e,r,n,a,s){var i,o;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;o=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&o;)i.pos+=1&o?4:2,128&o?i.pos+=8:64&o?i.pos+=4:8&o&&(i.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new qd(qL.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),Mne=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yA(e,Cc),e.prototype.tag="loca",e.prototype.parse=function(r){var n,a;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=2)i.push(2*r.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=4)i.push(r.readUInt32());return i}).call(this)},e.prototype.indexOf=function(r){return this.offsets[r]},e.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},e.prototype.encode=function(r,n){for(var a=new Uint32Array(this.offsets.length),s=0,i=0,o=0;o<a.length;++o)if(a[o]=s,i<n.length&&n[i]==o){++i,a[o]=s;var c=this.offsets[o],u=this.offsets[o+1]-c;u>0&&(s+=u)}for(var f=new Array(4*a.length),m=0;m<a.length;++m)f[4*m+3]=255&a[m],f[4*m+2]=(65280&a[m])>>8,f[4*m+1]=(16711680&a[m])>>16,f[4*m]=(4278190080&a[m])>>24;return f},e}(),Pne=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[r],e[r]=a[n];return e},t.prototype.glyphsFor=function(e){var r,n,a,s,i,o,c;for(a={},i=0,o=e.length;i<o;i++)a[s=e[i]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],a[s]=n;return a},t.prototype.encode=function(e,r){var n,a,s,i,o,c,u,f,m,p,g,b,y,T,k;for(a in n=zL.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(e),g={0:0},k=n.charMap)g[(c=k[a]).old]=c.new;for(b in p=n.maxGlyphID,i)b in g||(g[b]=p++);return f=function(D){var L,j;for(L in j={},D)j[D[L]]=L;return j}(g),m=Object.keys(f).sort(function(D,L){return D-L}),y=function(){var D,L,j;for(j=[],D=0,L=m.length;D<L;D++)o=m[D],j.push(f[o]);return j}(),s=this.font.glyf.encode(i,y,g),u=this.font.loca.encode(s.offsets,y),T={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(T["OS/2"]=this.font.os2.raw()),this.font.directory.encode(T)},t}();ir.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,a,s,i;if(Array.isArray(r))return"["+function(){var o,c,u;for(u=[],o=0,c=r.length;o<c;o++)n=r[o],u.push(e.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)i=r[a],s.push("/"+a+" "+e.convert(i));return s.push(">>"),s.join(`
`)}return""+r},e}();function KL(t,e,r,n,a){n=n||{};var s=1.15,i=a.internal.scaleFactor,o=a.internal.getFontSize()/i,c=a.getLineHeightFactor?a.getLineHeightFactor():s,u=o*c,f=/\r\n|\r|\n/g,m="",p=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(m=typeof t=="string"?t.split(f):t,p=m.length||1),r+=o*(2-s),n.valign==="middle"?r-=p/2*u:n.valign==="bottom"&&(r-=p*u),n.halign==="center"||n.halign==="right"){var g=o;if(n.halign==="center"&&(g*=.5),m&&p>=1){for(var b=0;b<m.length;b++)a.text(m[b],e-a.getStringUnitWidth(m[b])*g,r),r+=u;return a}e-=a.getStringUnitWidth(t)*g}return n.halign==="justify"?a.text(t,e,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(t,e,r),a}var TI={},U0=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=e:TI=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,r){var n,a,s;r===void 0&&(r=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var i=this.jsPDFDocument.internal.getFont(),o=i.fontStyle,c=i.fontName;if(e.font&&(c=e.font),e.fontStyle){o=e.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(c,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!r){var f=t.unifyColor(e.fillColor);f&&(n=this.jsPDFDocument).setFillColor.apply(n,f),f=t.unifyColor(e.textColor),f&&(a=this.jsPDFDocument).setTextColor.apply(a,f),f=t.unifyColor(e.lineColor),f&&(s=this.jsPDFDocument).setDrawColor.apply(s,f),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,r,n){return this.jsPDFDocument.splitTextToSize(e,r,n)},t.prototype.rect=function(e,r,n,a,s){return this.jsPDFDocument.rect(e,r,n,a,s)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return TI||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),gE=function(t,e){return gE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},gE(t,e)};function WL(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");gE(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var $L=function(t){WL(e,t);function e(r){var n=t.call(this)||this;return n._element=r,n}return e}(Array);function jne(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function One(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function r2(t,e,r){r.applyStyles(e,!0);var n=Array.isArray(t)?t:[t],a=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,i){return Math.max(s,i)},0);return a}function JL(t,e,r,n){var a=e.settings.tableLineWidth,s=e.settings.tableLineColor;t.applyStyles({lineWidth:a,lineColor:s});var i=YL(a,!1);i&&t.rect(r.x,r.y,e.getWidth(t.pageSize().width),n.y-r.y,i)}function YL(t,e){var r=t>0,n=e||e===0;return r&&n?"DF":r?"S":n?"F":null}function pw(t,e){var r,n,a,s;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(r=t.left)!==null&&r!==void 0?r:e,top:(n=t.top)!==null&&n!==void 0?n:e,right:(a=t.right)!==null&&a!==void 0?a:e,bottom:(s=t.bottom)!==null&&s!==void 0?s:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function XL(t,e){var r=pw(e.settings.margin,0);return t.pageSize().width-(r.left+r.right)}function Qne(t,e,r,n,a){var s={},i=1.3333333333333333,o=kb(e,function(L){return a.getComputedStyle(L).backgroundColor});o!=null&&(s.fillColor=o);var c=kb(e,function(L){return a.getComputedStyle(L).color});c!=null&&(s.textColor=c);var u=Vne(n,r);u&&(s.cellPadding=u);var f="borderTopColor",m=i*r,p=n.borderTopWidth;if(n.borderBottomWidth===p&&n.borderRightWidth===p&&n.borderLeftWidth===p){var g=(parseFloat(p)||0)/m;g&&(s.lineWidth=g)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/m,right:(parseFloat(n.borderRightWidth)||0)/m,bottom:(parseFloat(n.borderBottomWidth)||0)/m,left:(parseFloat(n.borderLeftWidth)||0)/m},s.lineWidth.top||(s.lineWidth.right?f="borderRightColor":s.lineWidth.bottom?f="borderBottomColor":s.lineWidth.left&&(f="borderLeftColor"));var b=kb(e,function(L){return a.getComputedStyle(L)[f]});b!=null&&(s.lineColor=b);var y=["left","right","center","justify"];y.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),y=["middle","bottom","top"],y.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var T=parseInt(n.fontSize||"");isNaN(T)||(s.fontSize=T/i);var k=Hne(n);k&&(s.fontStyle=k);var D=(n.fontFamily||"").toLowerCase();return t.indexOf(D)!==-1&&(s.font=D),s}function Hne(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function kb(t,e){var r=ZL(t,e);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function ZL(t,e){var r=e(t);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?t.parentElement==null?null:ZL(t.parentElement,e):r}function Vne(t,e){var r=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],n=96/(72/e),a=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,s=r.map(function(o){return parseInt(o||"0")/n}),i=pw(s,0);return a>i.top&&(i.top=a),a>i.bottom&&(i.bottom=a),i}function eU(t,e,r,n,a){var s,i;n===void 0&&(n=!1),a===void 0&&(a=!1);var o;typeof e=="string"?o=r.document.querySelector(e):o=e;var c=Object.keys(t.getFontList()),u=t.scaleFactor(),f=[],m=[],p=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:f,body:m,foot:p};for(var g=0;g<o.rows.length;g++){var b=o.rows[g],y=(i=(s=b==null?void 0:b.parentElement)===null||s===void 0?void 0:s.tagName)===null||i===void 0?void 0:i.toLowerCase(),T=Gne(c,u,r,b,n,a);T&&(y==="thead"?f.push(T):y==="tfoot"?p.push(T):m.push(T))}return{head:f,body:m,foot:p}}function Gne(t,e,r,n,a,s){for(var i=new $L(n),o=0;o<n.cells.length;o++){var c=n.cells[o],u=r.getComputedStyle(c);if(a||u.display!=="none"){var f=void 0;s&&(f=Qne(t,c,e,u,r)),i.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:f,_element:c,content:zne(c)})}}var m=r.getComputedStyle(n);if(i.length>0&&(a||m.display!=="none"))return i}function zne(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),e.innerText||e.textContent||""}function qne(t,e,r){for(var n=0,a=[t,e,r];n<a.length;n++){var s=a[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function iu(t,e,r,n,a){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(t),i=1;i<arguments.length;i++){var o=arguments[i];if(o!=null)for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(s[c]=o[c])}return s}function tU(t,e){var r=new U0(t),n=r.getDocumentOptions(),a=r.getGlobalOptions();qne(a,n,e);var s=iu({},a,n,e),i;typeof window<"u"&&(i=window);var o=Kne(a,n,e),c=Wne(a,n,e),u=$ne(r,s),f=Yne(r,s,i);return{id:e.tableId,content:f,hooks:c,styles:o,settings:u}}function Kne(t,e,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var u=t[c],f=e[c],m=r[c];n.columnStyles=iu({},u,f,m)}else{var p=[t,e,r],g=p.map(function(b){return b[c]||{}});n[c]=iu({},g[0],g[1],g[2])}},s=0,i=Object.keys(n);s<i.length;s++){var o=i[s];a(o)}return n}function Wne(t,e,r){for(var n=[t,e,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,i=n;s<i.length;s++){var o=i[s];o.didParseCell&&a.didParseCell.push(o.didParseCell),o.willDrawCell&&a.willDrawCell.push(o.willDrawCell),o.didDrawCell&&a.didDrawCell.push(o.didDrawCell),o.willDrawPage&&a.willDrawPage.push(o.willDrawPage),o.didDrawPage&&a.didDrawPage.push(o.didDrawPage)}return a}function $ne(t,e){var r,n,a,s,i,o,c,u,f,m,p,g,b=pw(e.margin,40/t.scaleFactor()),y=(r=Jne(t,e.startY))!==null&&r!==void 0?r:b.top,T;e.showFoot===!0?T="everyPage":e.showFoot===!1?T="never":T=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var k;e.showHead===!0?k="everyPage":e.showHead===!1?k="never":k=(a=e.showHead)!==null&&a!==void 0?a:"everyPage";var D=(s=e.useCss)!==null&&s!==void 0?s:!1,L=e.theme||(D?"plain":"striped"),j=!!e.horizontalPageBreak,H=(i=e.horizontalPageBreakRepeat)!==null&&i!==void 0?i:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:D,theme:L,startY:y,margin:b,pageBreak:(c=e.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(f=e.tableWidth)!==null&&f!==void 0?f:"auto",showHead:k,showFoot:T,tableLineWidth:(m=e.tableLineWidth)!==null&&m!==void 0?m:0,tableLineColor:(p=e.tableLineColor)!==null&&p!==void 0?p:200,horizontalPageBreak:j,horizontalPageBreakRepeat:H,horizontalPageBreakBehaviour:(g=e.horizontalPageBreakBehaviour)!==null&&g!==void 0?g:"afterAllRows"}}function Jne(t,e){var r=t.getLastAutoTable(),n=t.scaleFactor(),a=t.pageNumber(),s=!1;if(r&&r.startPageNumber){var i=r.startPageNumber+r.pageNumber-1;s=i===a}return typeof e=="number"?e:(e==null||e===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function Yne(t,e,r){var n=e.head||[],a=e.body||[],s=e.foot||[];if(e.html){var i=e.includeHiddenHtml;if(r){var o=eU(t,e.html,r,i,e.useCss)||{};n=o.head||n,a=o.body||n,s=o.foot||n}else console.error("Cannot parse html in non browser environment")}var c=e.columns||Xne(n,a,s);return{columns:c,head:n,body:a,foot:s}}function Xne(t,e,r){var n=t[0]||e[0]||r[0]||[],a=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var i=1,o;Array.isArray(n)?o=n[parseInt(s)]:o=n[s],typeof o=="object"&&!Array.isArray(o)&&(i=(o==null?void 0:o.colSpan)||1);for(var c=0;c<i;c++){var u=void 0;Array.isArray(n)?u=a.length:u=s+(c>0?"_".concat(c):"");var f={dataKey:u};a.push(f)}}),a}var xE=function(){function t(e,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=e.getDocument()}return t}(),Zne=function(t){WL(e,t);function e(r,n,a,s,i,o){var c=t.call(this,r,n,o)||this;return c.cell=a,c.row=s,c.column=i,c.section=s.section,c}return e}(xE),eae=function(){function t(e,r){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,r,n,a,s,i){for(var o=0,c=r;o<c.length;o++){var u=c[o],f=new Zne(e,this,n,a,s,i),m=u(f)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],m)return!1}return!0},t.prototype.callEndPageHooks=function(e,r){e.applyStyles(e.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var s=a[n];s(new xE(e,this,r))}},t.prototype.callWillDrawPageHooks=function(e,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var s=a[n];s(new xE(e,this,r))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,s){return a+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return e-n.left-n.right}},t}(),rU=function(){function t(e,r,n,a,s){s===void 0&&(s=!1),this.height=0,this.raw=e,e instanceof $L&&(this.raw=e._element,this.element=e._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=s}return t.prototype.getMaxCellHeight=function(e){var r=this;return e.reduce(function(n,a){var s;return Math.max(n,((s=r.cells[a.index])===null||s===void 0?void 0:s.height)||0)},0)},t.prototype.hasRowSpan=function(e){var r=this;return e.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,r){return this.getMaxCellHeight(r)<=e},t.prototype.getMinimumRowHeight=function(e,r){var n=this;return e.reduce(function(a,s){var i=n.cells[s.index];if(!i)return 0;var o=r.getLineHeight(i.styles.fontSize),c=i.padding("vertical"),u=c+o;return u>a?u:a},0)},t}(),nU=function(){function t(e,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=e;var s=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=(a=e.content)!==null&&a!==void 0?a:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var i=s!=null?""+s:"",o=/\r\n|\r|\n/g;this.text=i.split(o)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");e=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},t.prototype.getContentHeight=function(e,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/e*r,s=n*a+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},t.prototype.padding=function(e){var r=pw(this.styles.cellPadding,0);return e==="vertical"?r.top+r.bottom:e==="horizontal"?r.left+r.right:r[e]},t}(),tae=function(){function t(e,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=r,this.index=n}return t.prototype.getMaxCustomCellWidth=function(e){for(var r=0,n=0,a=e.allRows();n<a.length;n++){var s=a[n],i=s.cells[this.index];i&&typeof i.styles.cellWidth=="number"&&(r=Math.max(r,i.styles.cellWidth))}return r},t}();function rae(t,e){nae(t,e);var r=[],n=0;e.columns.forEach(function(s){var i=s.getMaxCustomCellWidth(e);i?s.width=i:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var a=e.getWidth(t.pageSize().width)-n;a&&(a=vE(r,a,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),a&&(a=vE(r,a,function(s){return s.minWidth})),a=Math.abs(a),!e.settings.horizontalPageBreak&&a>.1/t.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),sae(e),iae(e,t),aae(e)}function nae(t,e){var r=t.scaleFactor(),n=e.settings.horizontalPageBreak,a=XL(t,e);e.allRows().forEach(function(s){for(var i=0,o=e.columns;i<o.length;i++){var c=o[i],u=s.cells[c.index];if(u){var f=e.hooks.didParseCell;e.callCellHooks(t,f,u,s,c,null);var m=u.padding("horizontal");u.contentWidth=r2(u.text,u.styles,t)+m;var p=r2(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,t);if(u.minReadableWidth=p+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var g=10/r;u.minWidth=u.styles.minCellWidth||g,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(s){for(var i=0,o=e.columns;i<o.length;i++){var c=o[i],u=s.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var f=e.styles.columnStyles[c.dataKey]||e.styles.columnStyles[c.index]||{},m=f.cellWidth||f.minCellWidth;m&&typeof m=="number"&&(c.minWidth=m,c.wrappedWidth=m)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function vE(t,e,r){for(var n=e,a=t.reduce(function(g,b){return g+b.wrappedWidth},0),s=0;s<t.length;s++){var i=t[s],o=i.wrappedWidth/a,c=n*o,u=i.width+c,f=r(i),m=u<f?f:u;e-=m-i.width,i.width=m}if(e=Math.round(e*1e10)/1e10,e){var p=t.filter(function(g){return e<0?g.width>r(g):!0});p.length&&(e=vE(p,e,r))}return e}function aae(t){for(var e={},r=1,n=t.allRows(),a=0;a<n.length;a++)for(var s=n[a],i=0,o=t.columns;i<o.length;i++){var c=o[i],u=e[c.index];if(r>1)r--,delete s.cells[c.index];else if(u)u.cell.height+=s.height,r=u.cell.colSpan,delete s.cells[c.index],u.left--,u.left<=1&&delete e[c.index];else{var f=s.cells[c.index];if(!f)continue;if(f.height=s.height,f.rowSpan>1){var m=n.length-a,p=f.rowSpan>m?m:f.rowSpan;e[c.index]={cell:f,left:p,row:s}}}}}function sae(t){for(var e=t.allRows(),r=0;r<e.length;r++)for(var n=e[r],a=null,s=0,i=0,o=0;o<t.columns.length;o++){var c=t.columns[o];if(i-=1,i>1&&t.columns[o+1])s+=c.width,delete n.cells[c.index];else if(a){var u=a;delete n.cells[c.index],a=null,u.width=c.width+s}else{var u=n.cells[c.index];if(!u)continue;if(i=u.colSpan,s=0,u.colSpan>1){a=u,s+=c.width;continue}u.width=c.width+s}}}function iae(t,e){for(var r={count:0,height:0},n=0,a=t.allRows();n<a.length;n++){for(var s=a[n],i=0,o=t.columns;i<o.length;i++){var c=o[i],u=s.cells[c.index];if(u){e.applyStyles(u.styles,!0);var f=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,f+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=BI(u.text,f,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=BI(u.text,f,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var m=u.styles.overflow(u.text,f);typeof m=="string"?u.text=[m]:u.text=m}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var p=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<p*u.rowSpan?r={height:p,count:u.rowSpan}:r&&r.count>0&&r.height>p&&(p=r.height),p>s.height&&(s.height=p)}}r.count--}}function BI(t,e,r,n,a){return t.map(function(s){return oae(s,e,r,n,a)})}function oae(t,e,r,n,a){var s=1e4*n.scaleFactor();if(e=Math.ceil(e*s)/s,e>=r2(t,r,n))return t;for(;e<r2(t+a,r,n)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+a}function aU(t,e){var r=new U0(t),n=lae(e,r.scaleFactor()),a=new eae(e,n);return rae(r,a),r.applyStyles(r.userStyles),a}function lae(t,e){var r=t.content,n=Aae(r.columns);if(r.head.length===0){var a=NI(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=NI(n,"foot");a&&r.foot.push(a)}var s=t.settings.theme,i=t.styles;return{columns:n,head:Ib("head",r.head,n,i,s,e),body:Ib("body",r.body,n,i,s,e),foot:Ib("foot",r.foot,n,i,s,e)}}function Ib(t,e,r,n,a,s){var i={},o=e.map(function(c,u){for(var f=0,m={},p=0,g=0,b=0,y=r;b<y.length;b++){var T=y[b];if(i[T.index]==null||i[T.index].left===0)if(g===0){var k=void 0;Array.isArray(c)?k=c[T.index-p-f]:k=c[T.dataKey];var D={};typeof k=="object"&&!Array.isArray(k)&&(D=(k==null?void 0:k.styles)||{});var L=uae(t,T,u,a,n,s,D),j=new nU(k,L,t);m[T.dataKey]=j,m[T.index]=j,g=j.colSpan-1,i[T.index]={left:j.rowSpan-1,times:g}}else g--,p++;else i[T.index].left--,g=i[T.index].times,f++}return new rU(c,u,t,m)});return o}function NI(t,e){var r={};return t.forEach(function(n){if(n.raw!=null){var a=cae(e,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function cae(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function Aae(t){return t.map(function(e,r){var n,a;return typeof e=="object"?a=(n=e.dataKey)!==null&&n!==void 0?n:r:a=r,new tae(a,e,r)})}function uae(t,e,r,n,a,s,i){var o=One(n),c;t==="head"?c=a.headStyles:t==="body"?c=a.bodyStyles:t==="foot"&&(c=a.footStyles);var u=iu({},o.table,o[t],a.styles,c),f=a.columnStyles[e.dataKey]||a.columnStyles[e.index]||{},m=t==="body"?f:{},p=t==="body"&&r%2===0?iu({},o.alternateRow,a.alternateRowStyles):{},g=jne(s),b=iu({},g,u,p,m);return iu(b,i)}function dae(t,e,r){var n;r===void 0&&(r={});var a=XL(t,e),s=new Map,i=[],o=[],c=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?c=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(c=[e.settings.horizontalPageBreakRepeat]),c.forEach(function(p){var g=e.columns.find(function(b){return b.dataKey===p||b.index===p});g&&!s.has(g.index)&&(s.set(g.index,!0),i.push(g.index),o.push(e.columns[g.index]),a-=g.wrappedWidth)});for(var u=!0,f=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;f<e.columns.length;){if(s.has(f)){f++;continue}var m=e.columns[f].wrappedWidth;if(u||a>=m)u=!1,i.push(f),o.push(e.columns[f]),a-=m;else break;f++}return{colIndexes:i,columns:o,lastIndex:f-1}}function fae(t,e){for(var r=[],n=0;n<e.columns.length;n++){var a=dae(t,e,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function sU(t,e){var r=e.settings,n=r.startY,a=r.margin,s={x:a.left,y:n},i=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=n+a.bottom+i;if(r.pageBreak==="avoid"){var c=e.body,u=c.reduce(function(p,g){return p+g.height},0);o+=u}var f=new U0(t);(r.pageBreak==="always"||r.startY!=null&&o>f.pageSize().height)&&(oU(f),s.y=a.top),e.callWillDrawPageHooks(f,s);var m=iu({},s);e.startPageNumber=f.pageNumber(),r.horizontalPageBreak?hae(f,e,m,s):(f.applyStyles(f.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&e.head.forEach(function(p){return xu(f,e,p,s,e.columns)}),f.applyStyles(f.userStyles),e.body.forEach(function(p,g){var b=g===e.body.length-1;n2(f,e,p,b,m,s,e.columns)}),f.applyStyles(f.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&e.foot.forEach(function(p){return xu(f,e,p,s,e.columns)})),JL(f,e,m,s),e.callEndPageHooks(f,s),e.finalY=s.y,t.lastAutoTable=e,f.applyStyles(f.userStyles)}function hae(t,e,r,n){var a=fae(t,e),s=e.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,f){t.applyStyles(t.userStyles),f>0?Vp(t,e,r,n,u.columns,!0):kI(t,e,n,u.columns),mae(t,e,r,n,u.columns),Fb(t,e,n,u.columns)});else for(var i=-1,o=a[0],c=function(){var u=i;if(o){t.applyStyles(t.userStyles);var f=o.columns;i>=0?Vp(t,e,r,n,f,!0):kI(t,e,n,f),u=II(t,e,i+1,n,f),Fb(t,e,n,f)}var m=u-i;a.slice(1).forEach(function(p){t.applyStyles(t.userStyles),Vp(t,e,r,n,p.columns,!0),II(t,e,i+1,n,p.columns,m),Fb(t,e,n,p.columns)}),i=u};i<e.body.length-1;)c()}function kI(t,e,r,n){var a=e.settings;t.applyStyles(t.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&e.head.forEach(function(s){return xu(t,e,s,r,n)})}function mae(t,e,r,n,a){t.applyStyles(t.userStyles),e.body.forEach(function(s,i){var o=i===e.body.length-1;n2(t,e,s,o,r,n,a)})}function II(t,e,r,n,a,s){t.applyStyles(t.userStyles),s=s??e.body.length;var i=Math.min(r+s,e.body.length),o=-1;return e.body.slice(r,i).forEach(function(c,u){var f=r+u===e.body.length-1,m=iU(t,e,f,n);c.canEntireRowFit(m,a)&&(xu(t,e,c,n,a),o=r+u)}),o}function Fb(t,e,r,n){var a=e.settings;t.applyStyles(t.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&e.foot.forEach(function(s){return xu(t,e,s,r,n)})}function pae(t,e,r){var n=r.getLineHeight(t.styles.fontSize),a=t.padding("vertical"),s=Math.floor((e-a)/n);return Math.max(0,s)}function gae(t,e,r,n){var a={};t.spansMultiplePages=!0,t.height=0;for(var s=0,i=0,o=r.columns;i<o.length;i++){var c=o[i],u=t.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var f=new nU(u.raw,u.styles,u.section);f=iu(f,u),f.text=[];var m=pae(u,e,n);u.text.length>m&&(f.text=u.text.splice(m,u.text.length));var p=n.scaleFactor(),g=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(p,g),u.contentHeight>=e&&(u.contentHeight=e,f.styles.minCellHeight-=e),u.contentHeight>t.height&&(t.height=u.contentHeight),f.contentHeight=f.getContentHeight(p,g),f.contentHeight>s&&(s=f.contentHeight),a[c.index]=f}}var b=new rU(t.raw,-1,t.section,a,!0);b.height=s;for(var y=0,T=r.columns;y<T.length;y++){var c=T[y],f=b.cells[c.index];f&&(f.height=b.height);var u=t.cells[c.index];u&&(u.height=t.height)}return b}function xae(t,e,r,n){var a=t.pageSize().height,s=n.settings.margin,i=s.top+s.bottom,o=a-i;e.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=e.getMinimumRowHeight(n.columns,t),u=c<r;if(c>o)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var f=e.hasRowSpan(n.columns),m=e.getMaxCellHeight(n.columns)>o;return m?(f&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(f||n.settings.rowPageBreak==="avoid")}function n2(t,e,r,n,a,s,i){var o=iU(t,e,n,s);if(r.canEntireRowFit(o,i))xu(t,e,r,s,i);else if(xae(t,r,o,e)){var c=gae(r,o,e,t);xu(t,e,r,s,i),Vp(t,e,a,s,i),n2(t,e,c,n,a,s,i)}else Vp(t,e,a,s,i),n2(t,e,r,n,a,s,i)}function xu(t,e,r,n,a){n.x=e.settings.margin.left;for(var s=0,i=a;s<i.length;s++){var o=i[s],c=r.cells[o.index];if(!c){n.x+=o.width;continue}t.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=e.callCellHooks(t,e.hooks.willDrawCell,c,r,o,n);if(u===!1){n.x+=o.width;continue}vae(t,c,n);var f=c.getTextPos();KL(c.text,f.x,f.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,c,r,o,n),n.x+=o.width}n.y+=r.height}function vae(t,e,r){var n=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=YL(n.lineWidth,n.fillColor);a&&t.rect(e.x,r.y,e.width,e.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&t.rect(e.x,r.y,e.width,e.height,"F"),wae(t,e,r,n.lineWidth))}function wae(t,e,r,n){var a,s,i,o;n.top&&(a=r.x,s=r.y,i=r.x+e.width,o=r.y,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,s,i,o)),n.bottom&&(a=r.x,s=r.y+e.height,i=r.x+e.width,o=r.y+e.height,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,s,i,o)),n.left&&(a=r.x,s=r.y,i=r.x,o=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.left,a,s,i,o)),n.right&&(a=r.x+e.width,s=r.y,i=r.x+e.width,o=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.right,a,s,i,o));function c(u,f,m,p,g){t.getDocument().setLineWidth(u),t.getDocument().line(f,m,p,g,"S")}}function iU(t,e,r,n){var a=e.settings.margin.bottom,s=e.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(a+=e.getFootHeight(e.columns)),t.pageSize().height-n.y-a}function Vp(t,e,r,n,a,s){a===void 0&&(a=[]),s===void 0&&(s=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!s&&e.foot.forEach(function(o){return xu(t,e,o,n,a)}),e.callEndPageHooks(t,n);var i=e.settings.margin;JL(t,e,r,n),oU(t),e.pageNumber++,n.x=i.left,n.y=i.top,r.y=i.top,e.callWillDrawPageHooks(t,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return xu(t,e,o,n,a)}),t.applyStyles(t.userStyles))}function oU(t){var e=t.pageNumber();t.setPage(e+1);var r=t.pageNumber();return r===e?(t.addPage(),!0):!1}function yae(t){t.API.autoTable=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e[0],a=tU(this,n),s=aU(this,a);return sU(this,s),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,r,n,a){KL(e,r,n,a,this)},t.API.autoTableSetDefaults=function(e){return U0.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,r){U0.setDefaults(e,r)},t.API.autoTableHtmlToJson=function(e,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new U0(this),s=eU(a,e,window,r,!1),i=s.head,o=s.body,c=((n=i[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:o,data:o}}}var Db;function Yo(t,e){var r=tU(t,e),n=aU(t,r);sU(t,n)}try{if(typeof window<"u"&&window){var FI=window,DI=FI.jsPDF||((Db=FI.jspdf)===null||Db===void 0?void 0:Db.jsPDF);DI&&yae(DI)}}catch(t){console.error("Could not apply autoTable plugin",t)}const x5="evaluaciones_pruebas",v5="evaluaciones_rubricas_estaticas",w5="evaluaciones_rubricas_interactivas",bae="usuarios",gw=t=>{var r,n;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion}},Cae=t=>{const e=er(Nt(Tt,x5),fn("fechaCreacion","desc"));return br(e,n=>{t(n.docs.map(a=>gw(a)))},n=>{console.error("Error al suscribirse a las pruebas:",n),t([])})},Eae=async t=>{try{const{id:e,...r}=t,n=_r(Tt,x5,e);await Zi(n,{...r,fechaCreacion:Ar.fromDate(new Date(r.fechaCreacion))})}catch(e){throw console.error("Error al guardar la prueba:",e),new Error("No se pudo guardar la prueba.")}},_ae=async t=>{try{await Oi(_r(Tt,x5,t))}catch(e){throw console.error("Error al eliminar la prueba:",e),new Error("No se pudo eliminar la prueba.")}},Sae=t=>{const e=er(Nt(Tt,v5),fn("fechaCreacion","desc"));return br(e,n=>{t(n.docs.map(a=>gw(a)))},n=>{console.error("Error al suscribirse a las rúbricas estáticas:",n),t([])})},Tae=async t=>{try{const{id:e,...r}=t,n=_r(Tt,v5,e);await Zi(n,{...r,fechaCreacion:Ar.fromDate(new Date(r.fechaCreacion))})}catch(e){throw console.error("Error al guardar la rúbrica estática:",e),new Error("No se pudo guardar la rúbrica.")}},Bae=async t=>{try{await Oi(_r(Tt,v5,t))}catch(e){throw console.error("Error al eliminar la rúbrica estática:",e),new Error("No se pudo eliminar la rúbrica.")}},Nae=t=>{const e=er(Nt(Tt,w5));return br(e,n=>{t(n.docs.map(a=>gw(a)))},n=>{console.error("Error al suscribirse a las rúbricas interactivas:",n),t([])})},kae=async t=>{try{const{id:e,...r}=t,n=_r(Tt,w5,e);await Zi(n,r)}catch(e){throw console.error("Error al guardar la rúbrica interactiva:",e),new Error("No se pudo guardar la rúbrica interactiva.")}},Iae=async t=>{try{return(await Sa(Nt(Tt,w5),t)).id}catch(e){throw console.error("Error al crear la rúbrica interactiva:",e),new Error("No se pudo crear la rúbrica interactiva.")}},Fae=t=>{const e=er(Nt(Tt,bae));return br(e,n=>{t(n.docs.map(a=>gw(a)))},n=>{console.error("Error al suscribirse a los usuarios:",n),t([])})},Dae=["Selección múltiple","Verdadero o Falso","Desarrollo","Términos pareados","Comprensión de lectura"],RI={"Selección múltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Términos pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de lectura":[1,2,3]},Cv=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},Rae=({open:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t?l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59"}):l.jsxs(l.Fragment,{children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),Lae=({item:t,index:e,showAnswers:r})=>{const n=ne.useMemo(()=>t.tipo==="Términos pareados"?[...t.pares.map(a=>a.definicion)].sort(()=>Math.random()-.5):[],[t]);return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[e+1,". ",t.pregunta," (",t.puntaje," pts)"]}),t.habilidadBloom&&l.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:t.habilidadBloom})]}),t.tipo==="Selección múltiple"&&l.jsx("div",{className:"ml-4 mt-2 space-y-2",children:t.opciones.map((a,s)=>{const i=r&&s===t.respuestaCorrecta;return l.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${i?"bg-green-100 dark:bg-green-900/50":""}`,children:[l.jsx("div",{className:"w-5 h-5 border rounded-full"}),l.jsxs("span",{children:[String.fromCharCode(65+s),") ",a]})]},s)})}),t.tipo==="Desarrollo"&&l.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"}),t.tipo==="Verdadero o Falso"&&l.jsxs("div",{className:"mt-2 ml-4 flex items-center gap-4",children:[l.jsx("span",{children:"V ___ F ___"}),r&&l.jsxs("span",{className:"font-bold p-1 rounded bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300",children:["Respuesta: ",t.respuestaCorrecta?"VERDADERO":"FALSO"]})]}),t.tipo==="Términos pareados"&&l.jsxs("div",{className:"mt-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna A: Concepto"}),l.jsx("div",{className:"space-y-2",children:t.pares.map((a,s)=>l.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-3 rounded-lg min-h-[50px] flex items-center",children:[s+1,". ",a.concepto]},s))})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna B: Definición"}),l.jsx("div",{className:"space-y-2",children:n.map((a,s)=>l.jsx("div",{className:"bg-sky-100 dark:bg-sky-900/50 p-3 rounded-lg min-h-[50px] flex items-center",children:a},s))})]})]}),r&&l.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-700",children:[l.jsx("h4",{className:"font-bold text-green-800 dark:text-green-200",children:"Respuestas Correctas:"}),l.jsx("ul",{className:"list-disc list-inside mt-2 text-sm text-slate-700 dark:text-slate-300",children:t.pares.map((a,s)=>l.jsxs("li",{children:[l.jsx("strong",{children:a.concepto})," → ",a.definicion]},s))})]})]}),t.tipo==="Comprensión de lectura"&&l.jsxs("div",{className:"ml-4 mt-2 space-y-4",children:[l.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700/50 rounded-md whitespace-pre-wrap",children:t.texto}),t.preguntas.map((a,s)=>{if(a.tipo==="Selección múltiple"){const i=a;return l.jsxs("div",{className:"pt-2",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&l.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),l.jsx("div",{className:"ml-4 mt-2 space-y-2",children:i.opciones.map((o,c)=>{const u=r&&c===i.respuestaCorrecta;return l.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${u?"bg-green-100 dark:bg-green-900/50":""}`,children:[l.jsx("div",{className:"w-5 h-5 border rounded-full"}),l.jsxs("span",{children:[String.fromCharCode(65+c),") ",o]})]},c)})})]},a.id)}if(a.tipo==="Desarrollo"){const i=a;return l.jsxs("div",{className:"pt-2",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&l.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),l.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"})]},a.id)}return null})]})]},t.id)},Uae=()=>{const[t,e]=ne.useState([]),[r,n]=ne.useState(null),[a,s]=ne.useState(!1),[i,o]=ne.useState(!1),[c,u]=ne.useState(null),[f,m]=ne.useState(!1),p={nombre:"",asignatura:Xo[0],nivel:Wv[0],contenido:"",tiposActividad:{},dificultad:"Intermedio",isNee:!1,selectedNee:[]},[g,b]=ne.useState(p);ne.useEffect(()=>{const E=Cae(e);return()=>E()},[]);const y=E=>{const{name:_,value:B}=E.target;b(Q=>({...Q,[_]:B}))},T=E=>{b(_=>{const B={..._.tiposActividad};return B[E]?delete B[E]:B[E]=RI[E][0],{..._,tiposActividad:B}})},k=(E,_)=>{b(B=>({...B,tiposActividad:{...B.tiposActividad,[E]:_}}))},D=E=>{b(_=>{const B=_.selectedNee.includes(E)?_.selectedNee.filter(Q=>Q!==E):[..._.selectedNee,E];return{..._,selectedNee:B}})},L=async E=>{if(E.preventDefault(),!g.nombre.trim()||!g.contenido.trim()||Object.keys(g.tiposActividad).length===0){u("Nombre, Contenido y al menos un tipo de actividad son obligatorios.");return}s(!0),u(null);const _=Object.entries(g.tiposActividad).map(([R,F])=>`- ${F} ítem(s) de tipo '${R}'`).join(`
`),B=g.isNee&&g.selectedNee.length>0?`
            **Adaptación CRÍTICA para Necesidades Educativas Especiales (NEE):**
            Adapta esta prueba para estudiantes con las siguientes características: ${g.selectedNee.join(", ")}.
            Esto implica las siguientes modificaciones OBLIGATORIAS:
            - Usa un lenguaje claro, simple y directo en todas las preguntas e instrucciones.
            - Evita preguntas con doble negación o estructuras gramaticales complejas.
            - En preguntas de desarrollo, desglosa la pregunta en partes más pequeñas si es posible.
            - Para 'Comprensión de Lectura', usa textos más cortos (100-150 palabras) y con vocabulario accesible.
            - Para 'Selección Múltiple', asegúrate de que los distractores sean claramente incorrectos y no ambiguos.`:"",Q=`
            Eres un experto en evaluación educativa para la educación media en Chile.
            Genera una prueba o guía de trabajo completa en formato JSON estructurado.
            
            Información base:
            - Nombre de la prueba: ${g.nombre}
            - Asignatura: ${g.asignatura}
            - Nivel: ${g.nivel}
            - Contenido a evaluar: "${g.contenido}"
            - Tipos y cantidad de ítems solicitados:
              ${_}
            - Nivel de Dificultad General: ${g.dificultad}. 'Fácil' implica preguntas directas y de recuerdo. 'Intermedio' incluye aplicación y análisis simple. 'Avanzado' requiere síntesis, evaluación y resolución de problemas complejos.
            
            ${B}

            Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json. El objeto debe contener:
            1. 'objetivo': Un objetivo de aprendizaje claro para la evaluación.
            2. 'instruccionesGenerales': Instrucciones claras para el estudiante.
            3. 'actividades': Un array de objetos, donde cada objeto es una actividad por cada tipo de ítem solicitado. Cada actividad debe tener:
               - 'id': Un UUID generado por ti.
               - 'titulo': Un título descriptivo (ej: "Actividad 1: Selección Múltiple").
               - 'instrucciones': Instrucciones para esa actividad específica.
               - 'items': Un array de preguntas con la cantidad exacta solicitada. Cada pregunta (item) debe tener:
                   - 'id': Un UUID generado por ti.
                   - 'tipo': El tipo de ítem.
                   - 'pregunta': El enunciado de la pregunta.
                   - 'puntaje': Un puntaje numérico.
                   - 'habilidadBloom': La habilidad principal de la Taxonomía de Bloom que se trabaja (ej: Analizar, Crear, Evaluar).
                   - Campos adicionales según el tipo:
                       - Para 'Selección múltiple': 'opciones' (array de EXACTAMENTE 4 strings sin la letra de la alternativa) y 'respuestaCorrecta' (índice numérico de la respuesta correcta, de 0 a 3).
                       - Para 'Verdadero o Falso': 'respuestaCorrecta' (booleano).
                       - Para 'Términos pareados': 'pares' (array de objetos con 'concepto' y 'definicion').
                       - Para 'Comprensión de lectura': 'texto' (un string que DEBE contener un texto original y coherente de 150 a 250 palabras, generado por ti, sobre el contenido a evaluar) y 'preguntas' (un array de sub-preguntas basadas en el texto que acabas de generar, las cuales pueden ser 'Selección múltiple' o 'Desarrollo', y cada una debe tener su propia 'id', 'pregunta', 'puntaje', 'habilidadBloom', etc.).
                       - Para 'Desarrollo': no necesita campos adicionales.
        `;try{Pl("Evaluación - Pruebas");const R="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",ae=(await(await new Xi(R).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(Q)).response).text().replace(/^```json\s*|```\s*$/g,""),q=JSON.parse(ae);let J=0;q.actividades.forEach(de=>{de.items.forEach(P=>{J+=P.puntaje||0,P.tipo==="Comprensión de lectura"&&P.preguntas&&P.preguntas.forEach(K=>{J+=K.puntaje||0})})});const W={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:g.nombre,asignatura:g.asignatura,nivel:g.nivel,contenidoOriginal:g.contenido,tiposActividadOriginal:g.tiposActividad,objetivo:q.objetivo,instruccionesGenerales:q.instruccionesGenerales,puntajeIdeal:J,actividades:q.actividades,dificultad:g.dificultad,...g.isNee&&{adaptacionNEE:g.selectedNee}};n(W),m(!1)}catch(R){console.error(R),u("Error al generar la prueba con IA. Revisa la consola para más detalles.")}finally{s(!1)}},j=async()=>{if(r)try{await Eae(r),alert("Prueba guardada con éxito.")}catch(E){console.error(E),alert("No se pudo guardar la prueba.")}},H=async E=>{if(window.confirm("¿Eliminar esta prueba?"))try{await _ae(E),(r==null?void 0:r.id)===E&&n(null)}catch(_){console.error(_),alert("No se pudo eliminar la prueba.")}},U=async E=>{o(!0);const _=new ir("p","mm","a4"),B=20,Q=_.internal.pageSize.getHeight(),R=_.internal.pageSize.getWidth(),F=R-B*2;let V=B;const X=ae=>{ae.setFillColor(230,230,230),ae.rect(0,0,R,25,"F"),ae.setFontSize(9),ae.setTextColor(0,0,0),ae.text("LICEO INDUSTRIAL DE RECOLETA",B,15,{align:"left"}),ae.text("SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA",R-B,15,{align:"right"})};X(_),V=30,_.setTextColor(0,0,0),_.setFont("helvetica","bold"),_.setFontSize(16),_.text(E.nombre,R/2,V,{align:"center"}),V+=10,Yo(_,{startY:V,body:[[{content:"Asignatura:",styles:{fontStyle:"bold"}},E.asignatura,{content:"Puntaje Ideal:",styles:{fontStyle:"bold"}},E.puntajeIdeal.toString()],[{content:"Nivel:",styles:{fontStyle:"bold"}},E.nivel,"",""],[{content:"OA:",styles:{fontStyle:"bold",valign:"top"}},{content:E.objetivo,colSpan:3}],[{content:"Instrucciones:",styles:{fontStyle:"bold",valign:"top"}},{content:E.instruccionesGenerales,colSpan:3}]],theme:"grid",styles:{fontSize:10,cellPadding:2,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},columnStyles:{0:{cellWidth:30},2:{cellWidth:30}},didDrawPage:ae=>{X(_)}}),V=_.lastAutoTable.finalY+10;const oe=ae=>{V+ae>Q-B&&(_.addPage(),X(_),V=B+15,_.setTextColor(0,0,0))},te=(ae,q)=>{_.setFont("helvetica",q.isBold?"bold":"normal"),_.setFontSize(q.fontSize);const J=Array.isArray(ae)?ae.join(`
`):ae;return _.getTextDimensions(J,{maxWidth:q.width}).h};for(const ae of E.actividades){let q=te(ae.titulo,{fontSize:12,width:F,isBold:!0})+te(ae.instrucciones,{fontSize:10,width:F})+12;oe(q),_.setFont("helvetica","bold"),_.setFontSize(12),_.setTextColor(0,0,0),_.text(ae.titulo,B,V),V+=8,_.setFont("helvetica","normal"),_.setFontSize(10);const J=_.splitTextToSize(ae.instrucciones,F);_.text(J,B,V),V+=J.length*(10*.35*1.15)+4;for(const[W,de]of ae.items.entries()){let P=0;const K=`${W+1}. ${de.pregunta} (${de.puntaje} pts)`;switch(P+=te(K,{fontSize:10,width:F,isBold:!0}),de.tipo){case"Selección múltiple":de.opciones.forEach(Ae=>{P+=te(Ae,{fontSize:10,width:F-5})+3}),P+=7;break;case"Verdadero o Falso":P+=10;break;case"Desarrollo":P+=30;break;case"Términos pareados":P+=de.pares.length*12+20;break;case"Comprensión de lectura":const ee=de;P+=te(ee.texto,{fontSize:10,width:F-10})+10,ee.preguntas.forEach(Ae=>{const Se=`${Ae.pregunta} (${Ae.puntaje} pts)`;P+=te(Se,{fontSize:10,width:F-5,isBold:!0}),Ae.tipo==="Selección múltiple"?(Ae.opciones.forEach(ge=>{P+=te(ge,{fontSize:10,width:F-10})+3}),P+=7):Ae.tipo==="Desarrollo"&&(P+=30),P+=5}),P+=15;break}oe(P),_.setFont("helvetica","bold"),_.setFontSize(10),_.setTextColor(0,0,0);const Y=_.splitTextToSize(K,F);if(_.text(Y,B,V),V+=Y.length*5+4,_.setFont("helvetica","normal"),de.tipo==="Selección múltiple")de.opciones.forEach((ee,Ae)=>{_.text(`${String.fromCharCode(65+Ae)}) ${ee}`,B+5,V),V+=7});else if(de.tipo==="Verdadero o Falso")_.text("V ______    F ______",B+5,V),V+=10;else if(de.tipo==="Desarrollo")_.setDrawColor(200,200,200),_.setFillColor(245,245,245),_.rect(B,V,F,25,"FD"),V+=30;else if(de.tipo==="Términos pareados"){const ee=[...de.pares.map(Se=>Se.definicion)].sort(()=>Math.random()-.5),Ae=de.pares.map((Se,ge)=>[`${ge+1}. ${Se.concepto}`,`(   ) ${ee[ge]}`]);Yo(_,{startY:V,head:[["Columna A: Concepto","Columna B: Definición"]],body:Ae,theme:"grid",styles:{fontSize:9,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},headStyles:{fontStyle:"bold",fillColor:[230,230,230],textColor:[0,0,0]},didDrawPage:Se=>X(_)}),V=_.lastAutoTable.finalY+10}else if(de.tipo==="Comprensión de lectura"){const ee=de;_.setFillColor(240,240,240),_.setDrawColor(200,200,200);const Ae=_.splitTextToSize(ee.texto,F-10),Se=Ae.length*(10*.35*1.15)+8;_.rect(B,V,F,Se,"FD"),V+=4,_.setFont("helvetica","normal"),_.setFontSize(10),_.setTextColor(0,0,0),_.text(Ae,B+5,V),V+=Se;for(const[ge,pe]of ee.preguntas.entries()){const ye=`${ge+1}. ${pe.pregunta} (${pe.puntaje} pts)`;_.setFont("helvetica","bold");const ue=_.splitTextToSize(ye,F-5);_.text(ue,B+5,V),V+=ue.length*5+4,_.setFont("helvetica","normal"),pe.tipo==="Selección múltiple"?pe.opciones.forEach((se,Pe)=>{_.text(`${String.fromCharCode(65+Pe)}) ${se}`,B+10,V),V+=7}):pe.tipo==="Desarrollo"&&(_.setDrawColor(200,200,200),_.setFillColor(245,245,245),_.rect(B+5,V,F-5,25,"FD"),V+=30)}}V+=5}}_.save(`${E.nombre.replace(/\s/g,"_")}.pdf`),o(!1)};return r?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("button",{onClick:()=>n(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>m(!f),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[l.jsx(Rae,{open:!f})," ",l.jsxs("span",{children:[f?"Ocultar":"Mostrar"," Respuestas"]})]}),l.jsx("button",{onClick:j,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),l.jsxs("button",{onClick:()=>U(r),disabled:i,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[i?"...":l.jsx(UR,{})," PDF"]})]})]}),l.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[l.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[l.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),l.jsx("span",{children:"SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA"})]}),l.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:r.nombre}),l.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Asignatura:"})," ",r.asignatura]}),l.jsxs("p",{className:"text-right",children:[l.jsx("strong",{children:"Puntaje Ideal:"})," ",r.puntajeIdeal]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Nivel:"})," ",r.nivel]})]}),l.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[l.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",r.dificultad||"Intermedio"]}),r.adaptacionNEE&&r.adaptacionNEE.length>0&&l.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",r.adaptacionNEE.join(", ")]})]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",r.objetivo]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Instrucciones Generales:"})," ",r.instruccionesGenerales]})]}),r.actividades.map(E=>l.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[l.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:E.titulo}),l.jsx("p",{className:"italic text-sm mb-4",children:E.instrucciones}),l.jsx("div",{className:"space-y-6",children:E.items.map((_,B)=>l.jsx(Lae,{item:_,index:B,showAnswers:f},_.id))})]},E.id))]})]}):l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Guía"}),l.jsxs("form",{onSubmit:L,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Guía ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",name:"nombre",value:g.nombre,onChange:y,placeholder:"Ej: Guía N°1 - La Célula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),l.jsx("div",{}),l.jsx("select",{name:"asignatura",value:g.asignatura,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:Xo.map(E=>l.jsx("option",{children:E},E))}),l.jsx("select",{name:"nivel",value:g.nivel,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:Wv.map(E=>l.jsx("option",{children:E},E))})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),l.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fácil","Intermedio","Avanzado"].map((E,_)=>l.jsx("button",{type:"button",onClick:()=>b(B=>({...B,dificultad:E})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50
                                            ${_===0?"rounded-l-lg":""} ${_===2?"rounded-r-lg":""}
                                            ${g.dificultad===E?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:E},E))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:g.isNee,onChange:E=>b(_=>({..._,isNee:E.target.checked,selectedNee:E.target.checked?_.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),g.isNee&&l.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:$v.map(E=>l.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:g.selectedNee.includes(E),onChange:()=>D(E),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:E})]},E))})]})]})]}),l.jsx("textarea",{name:"contenido",value:g.contenido,onChange:y,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("div",{className:"space-y-3",children:Dae.map(E=>l.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:!!g.tiposActividad[E],onChange:()=>T(E),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:E})]}),g.tiposActividad[E]&&l.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[l.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),RI[E].map(_=>l.jsx("button",{type:"button",onClick:()=>k(E,_),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${g.tiposActividad[E]===_?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:_},_))]})]},E))}),c&&l.jsx("p",{className:"text-red-500 text-sm",children:c}),l.jsx("div",{className:"text-right",children:l.jsx("button",{type:"submit",disabled:a,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:a?"Generando...":"Generar Prueba"})})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),l.jsx("div",{className:"space-y-2",children:t.length>0?t.map(E=>l.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:E.nombre}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[E.asignatura," - ",E.nivel," (",new Date(E.fechaCreacion).toLocaleDateString(),")"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>n(E),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),l.jsx("button",{onClick:()=>H(E.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},E.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},Mae=({rubricas:t,onSave:e,onDelete:r,onCreate:n})=>{const[a,s]=ne.useState(null),[i,o]=ne.useState("list"),[c,u]=ne.useState(!1),[f,m]=ne.useState(""),p=async(H,U)=>{if(!H.trim()||!U.trim()){alert("El título y la descripción son obligatorios.");return}u(!0);const E=`Crea una rúbrica de evaluación detallada sobre "${H}" con el propósito de "${U}". Genera entre 3 y 5 dimensiones de evaluación. Para cada dimensión, crea un descriptor para 4 niveles: Insuficiente, Suficiente, Competente, y Avanzado. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,_={type:"ARRAY",items:{type:"OBJECT",properties:{dimension:{type:"STRING"},insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["dimension","insuficiente","suficiente","competente","avanzado"]}};try{Pl("Evaluación - Rúbricas");const B="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",X=(await(await new Xi(B).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:E}]}],generationConfig:{responseMimeType:"application/json",responseSchema:_}})).response).text(),oe=JSON.parse(X),te={id:crypto.randomUUID(),titulo:H,descripcion:U,fechaCreacion:new Date().toISOString(),dimensiones:oe.map(ae=>({id:crypto.randomUUID(),nombre:ae.dimension,niveles:{insuficiente:ae.insuficiente,suficiente:ae.suficiente,competente:ae.competente,avanzado:ae.avanzado}}))};s(te)}catch(B){console.error(B),alert("Error al generar la rúbrica con IA.")}finally{u(!1)}},g=async()=>{if(!f.trim()||!a)return;const H=crypto.randomUUID(),U={id:H,nombre:f,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0};s(B=>B?{...B,dimensiones:[...B.dimensiones,U]}:null),m("");const E=`Para una rúbrica sobre "${a.titulo}", genera los descriptores para los 4 niveles de logro (Insuficiente, Suficiente, Competente, Avanzado) para la nueva dimensión: "${f}". Considera las dimensiones existentes como contexto: ${a.dimensiones.map(B=>B.nombre).join(", ")}. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,_={type:"OBJECT",properties:{insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["insuficiente","suficiente","competente","avanzado"]};try{Pl("Evaluación - Rúbricas (Añadir Dimensión)");const B="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",X=(await(await new Xi(B).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:E}]}],generationConfig:{responseMimeType:"application/json",responseSchema:_}})).response).text(),oe=JSON.parse(X);s(te=>te?{...te,dimensiones:te.dimensiones.map(ae=>ae.id===H?{...ae,niveles:oe,isLoading:!1}:ae)}:null)}catch(B){console.error("Error generating dimension descriptors:",B),alert("No se pudieron generar los descriptores."),s(Q=>Q?{...Q,dimensiones:Q.dimensiones.filter(R=>R.id!==H)}:null)}},b=()=>{if(!a)return;t.some(U=>U.id===a.id)?e(a):n(a),o("list"),s(null)},y=H=>{s(H),o("form")},T=()=>{s({id:crypto.randomUUID(),titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),o("form")},k=(H,U,E)=>{a&&s(_=>_?{..._,dimensiones:_.dimensiones.map(B=>B.id!==H?B:U==="nombre"?{...B,nombre:E}:{...B,niveles:{...B.niveles,[U]:E}})}:null)},D=(H,U)=>{s(E=>E?{...E,[H]:U}:null)},L=H=>{a&&s(U=>U?{...U,dimensiones:U.dimensiones.filter(E=>E.id!==H)}:null)},j=()=>{if(!a)return null;const H="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",U=`${H} resize-none text-sm`;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rúbrica de Aprendizaje"}),l.jsx("button",{onClick:()=>o("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Título de la Rúbrica"}),l.jsx("input",{value:a.titulo,onChange:E=>D("titulo",E.target.value),placeholder:"Ej. Rúbrica de Presentaciones Orales",className:`${H} mt-1`})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripción de la Rúbrica"}),l.jsx("textarea",{value:a.descripcion,onChange:E=>D("descripcion",E.target.value),placeholder:"Describe el propósito y los criterios de evaluación de esta rúbrica.",rows:3,className:`${H} mt-1`})]})]}),a.dimensiones.length===0&&l.jsx("div",{className:"text-center py-4",children:l.jsx("button",{onClick:()=>p(a.titulo,a.descripcion),disabled:c||!a.titulo||!a.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:c?"Generando...":"✨ Generar Rúbrica con IA"})}),a.dimensiones.length>0&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),l.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:l.jsx("tr",{children:["Dimensión","Insuficiente","Suficiente","Competente","Avanzado",""].map(E=>l.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:E},E))})}),l.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.dimensiones.map(E=>l.jsxs("tr",{children:[l.jsx("td",{className:"p-2 w-1/5",children:l.jsx("textarea",{value:E.nombre,onChange:_=>k(E.id,"nombre",_.target.value),rows:4,className:U})}),Object.keys(E.niveles).map(_=>l.jsx("td",{className:"p-2 w-1/5",children:E.isLoading?l.jsx("div",{className:"flex justify-center items-center h-full",children:l.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):l.jsx("textarea",{value:E.niveles[_],onChange:B=>k(E.id,_,B.target.value),rows:4,className:U})},_)),l.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:l.jsx("button",{onClick:()=>L(E.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:"🗑️"})})]},E.id))})]})}),l.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("label",{className:"text-sm font-medium",children:"Añadir Dimensión"}),l.jsx("input",{value:f,onChange:E=>m(E.target.value),placeholder:"Escribe el nombre de la nueva dimensión...",className:`${H} mt-1`})]}),l.jsx("button",{onClick:g,disabled:!f.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]})]}),l.jsx("div",{className:"flex justify-end pt-6 border-t dark:border-slate-700",children:l.jsx("button",{onClick:b,className:"bg-amber-500 text-white font-bold py-2.5 px-6 rounded-lg hover:bg-amber-600",children:"Guardar Rúbrica"})})]})};return i==="list"?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rúbricas"}),l.jsx("button",{onClick:T,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),t.length>0?t.map(H=>l.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:H.titulo}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:H.descripcion})]}),l.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[l.jsx("button",{onClick:()=>y(H),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),l.jsx("button",{onClick:()=>r(H.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},H.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rúbricas guardadas."})]}):j()},Pae=({allUsers:t,rubricasEstaticas:e})=>{const[r,n]=ne.useState([]),[a,s]=ne.useState(null),[i,o]=ne.useState(null),[c,u]=ne.useState({rubricaEstaticaId:"",curso:""}),[f,m]=ne.useState(null);ne.useEffect(()=>{const D=Nae(n);return()=>D()},[]);const p=async D=>{D.preventDefault();const L=e.find(H=>H.id===c.rubricaEstaticaId);if(!L||!c.curso){alert("Debe seleccionar una rúbrica y un curso.");return}const j={nombre:L.titulo,curso:c.curso,asignatura:"N/A",rubricaEstaticaId:L.id,resultados:{}};try{await Iae(j),u({rubricaEstaticaId:"",curso:""})}catch(H){console.error(H),alert("No se pudo crear la evaluación con rúbrica.")}},g=D=>{s(D),o(JSON.parse(JSON.stringify(D)))},b=(D,L,j)=>{i&&o(H=>{if(!H)return null;const U=JSON.parse(JSON.stringify(H));return U.resultados[D]||(U.resultados[D]={puntajes:{},feedback:""}),U.resultados[D].puntajes[L]=j,U})},y=async()=>{if(i)try{await kae(i),s(i),alert("Cambios guardados.")}catch(D){console.error(D),alert("No se pudieron guardar los cambios.")}},T=ne.useCallback(D=>{const L=i,j=e.find(Q=>Q.id===(L==null?void 0:L.rubricaEstaticaId));if(!L||!j)return{score:0,maxScore:0,grade:"N/A"};const H=j.dimensiones.length*4,U=L.resultados[D];if(!U)return{score:0,maxScore:H,grade:"1.0"};const E=Object.values(U.puntajes).reduce((Q,R)=>Q+R,0),_=1+6*(E/H),B=H>0?_.toFixed(1):"1.0";return{score:E,maxScore:H,grade:B}},[i,e]),k=async D=>{if(!i)return;const L=e.find(E=>E.id===i.rubricaEstaticaId),j=i.resultados[D];if(!L||!j||Object.keys(j.puntajes).length===0){alert("El estudiante no tiene puntajes para generar feedback.");return}m(D);const U=`Genera una retroalimentación constructiva para un estudiante basada en estos puntajes de rúbrica (de 1 a 4): ${L.dimensiones.map(E=>`${E.nombre}: ${j.puntajes[E.id]||"N/A"}/4`).join("; ")}. El nombre de la evaluación es "${L.titulo}". Destaca fortalezas y sugiere 1-2 áreas de mejora concretas. Sé breve y motivador.`;try{Pl("Evaluación - Rúbricas Interactivas (Feedback)");const E="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",F=(await(await new Xi(E).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(U)).response).text();o(V=>{if(!V)return null;const X=JSON.parse(JSON.stringify(V));return X.resultados[D].feedback=F.replace(/(\*\*|\*)/g,""),X})}catch(E){console.error(E),alert("Error al generar feedback.")}finally{m(null)}};if(a&&i){const D=e.find(j=>j.id===a.rubricaEstaticaId),L=t.filter(j=>j.profile===Pt.ESTUDIANTE&&Cv(j.curso||"")===a.curso).map(j=>j.nombreCompleto).sort();return D?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:a.nombre}),l.jsx("p",{className:"text-slate-500",children:a.curso})]}),l.jsx("button",{onClick:()=>s(null),className:"font-semibold text-slate-600",children:"← Volver"})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border-collapse",children:[l.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border dark:border-slate-600 sticky left-0 bg-slate-100 dark:bg-slate-700 z-10 w-48",children:"Estudiante"}),D.dimensiones.map(j=>l.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:j.nombre},j.id)),l.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Puntaje"}),l.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Nota"}),l.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm w-64",children:"Retroalimentación"})]})}),l.jsx("tbody",{children:L.map(j=>{var _;const{score:H,maxScore:U,grade:E}=T(j);return l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"p-2 border dark:border-slate-600 font-semibold sticky left-0 bg-white dark:bg-slate-800 w-48",children:j}),D.dimensiones.map(B=>l.jsx("td",{className:"p-2 border dark:border-slate-600 text-center",children:l.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3,4].map(Q=>{var R;return l.jsx("button",{onClick:()=>b(j,B.id,Q),className:`w-7 h-7 rounded-md font-semibold transition-colors ${((R=i.resultados[j])==null?void 0:R.puntajes[B.id])===Q?"bg-amber-400 text-white":"bg-slate-200 dark:bg-slate-600 hover:bg-slate-300"}`,children:Q},Q)})})},B.id)),l.jsxs("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:[H,"/",U]}),l.jsx("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:E}),l.jsx("td",{className:"p-2 border dark:border-slate-600 text-sm",children:l.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[l.jsx("p",{className:"text-xs w-full",children:((_=i.resultados[j])==null?void 0:_.feedback)||"Sin generar"}),l.jsx("button",{onClick:()=>k(j),disabled:f===j,className:"text-xs bg-sky-100 text-sky-700 font-semibold px-2 py-1 rounded-md w-full disabled:opacity-50",children:f===j?"...":"Generar IA"})]})})]},j)})})]})}),l.jsx("div",{className:"mt-6 flex justify-end",children:l.jsx("button",{onClick:y,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})})]}):l.jsxs("div",{children:["Error: Rúbrica base no encontrada. ",l.jsx("button",{onClick:()=>s(null),children:"Volver"})]})}return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear Evaluación con Rúbrica"}),l.jsxs("form",{onSubmit:p,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[l.jsxs("select",{value:c.rubricaEstaticaId,onChange:D=>u({...c,rubricaEstaticaId:D.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[l.jsx("option",{value:"",children:"Seleccione una Rúbrica Guardada"}),e.map(D=>l.jsx("option",{value:D.id,children:D.titulo},D.id))]}),l.jsxs("select",{value:c.curso,onChange:D=>u({...c,curso:D.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[l.jsx("option",{value:"",children:"Seleccione un Curso"}),Za.map(D=>l.jsx("option",{value:D,children:D},D))]}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear Evaluación"})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones Creadas"}),l.jsx("div",{className:"space-y-2",children:r.map(D=>l.jsxs("button",{onClick:()=>g(D),className:"w-full text-left p-3 rounded-md bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600",children:[l.jsx("p",{className:"font-semibold",children:D.nombre}),l.jsx("p",{className:"text-sm text-slate-500",children:D.curso})]},D.id))})]})]})},jae=({allUsers:t})=>{const[e,r]=ne.useState(""),n=ne.useMemo(()=>Array.from(new Set(t.filter(s=>s.profile===Pt.ESTUDIANTE&&s.curso).map(s=>Cv(s.curso)))).sort(),[t]),a=ne.useMemo(()=>{const s=t.filter(i=>i.profile===Pt.ESTUDIANTE);return e?s.filter(i=>Cv(i.curso||"")===e).sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto)):s.sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto))},[t,e]);return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nóminas de Cursos"}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Este es un visor de las nóminas de estudiantes. Para agregar, editar o eliminar estudiantes, utilice el módulo de ",l.jsx("strong",{className:"font-semibold",children:"Administración"}),"."]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Curso"}),l.jsxs("select",{id:"curso-filter",value:e,onChange:s=>r(s.target.value),className:"w-full max-w-xs border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Mostrar Todos los Estudiantes"}),n.map(s=>l.jsx("option",{value:s,children:s},s))]})]}),l.jsx("div",{className:"overflow-x-auto border rounded-lg dark:border-slate-700 max-h-[60vh]",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nombre Completo"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Curso"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Email"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:a.length>0?a.map(s=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:s.nombreCompleto}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:Cv(s.curso||"")}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:s.email})]},s.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No hay estudiantes que coincidan con el filtro."})})})]})})]})},Oae=()=>{const[t,e]=ne.useState("pruebas"),[r,n]=ne.useState([]),[a,s]=ne.useState([]),[i,o]=ne.useState(!0);ne.useEffect(()=>{o(!0);const m=Fae(n),p=Sae(g=>{s(g),o(!1)});return()=>{m(),p()}},[]);const c=async m=>{try{await Tae(m)}catch(p){console.error(p),alert("No se pudo guardar la rúbrica.")}},u=async m=>{try{await Bae(m)}catch(p){console.error(p),alert("No se pudo eliminar la rúbrica.")}},f=({tabName:m,label:p})=>l.jsx("button",{onClick:()=>e(m),className:`${t===m?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:p});return i?l.jsx("div",{className:"text-center py-10",children:"Cargando módulo de evaluaciones..."}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluación de Aprendizajes"}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx(f,{tabName:"pruebas",label:"Pruebas y Guías"}),l.jsx(f,{tabName:"rubricas",label:"Generador de Rúbricas"}),l.jsx(f,{tabName:"rubricasInteractivas",label:"Rúbricas Interactivas"}),l.jsx(f,{tabName:"nominas",label:"Gestión de Nóminas"})]})}),l.jsxs("div",{className:"mt-6",children:[t==="pruebas"&&l.jsx(Uae,{}),t==="rubricas"&&l.jsx(Mae,{rubricas:a,onSave:c,onDelete:u,onCreate:c}),t==="rubricasInteractivas"&&l.jsx(Pae,{allUsers:r,rubricasEstaticas:a}),t==="nominas"&&l.jsx(jae,{allUsers:r})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var a2={};a2.version="0.18.5";var lU=1252,Qae=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],y5={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},b5=function(t){Qae.indexOf(t)!=-1&&(lU=y5[0]=t)};function Hae(){b5(1252)}var pc=function(t){b5(t)};function C5(){pc(1200),Hae()}function LI(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function Vae(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function cU(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var Cp=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?Vae(t.slice(2)):e==254&&r==255?cU(t.slice(2)):e==65279?t.slice(1):t},E1=function(e){return String.fromCharCode(e)},UI=function(e){return String.fromCharCode(e)},gg,Cd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function xg(t){for(var e="",r=0,n=0,a=0,s=0,i=0,o=0,c=0,u=0;u<t.length;)r=t.charCodeAt(u++),s=r>>2,n=t.charCodeAt(u++),i=(r&3)<<4|n>>4,a=t.charCodeAt(u++),o=(n&15)<<2|a>>6,c=a&63,isNaN(n)?o=c=64:isNaN(a)&&(c=64),e+=Cd.charAt(s)+Cd.charAt(i)+Cd.charAt(o)+Cd.charAt(c);return e}function Zo(t){var e="",r=0,n=0,a=0,s=0,i=0,o=0,c=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<t.length;)s=Cd.indexOf(t.charAt(u++)),i=Cd.indexOf(t.charAt(u++)),r=s<<2|i>>4,e+=String.fromCharCode(r),o=Cd.indexOf(t.charAt(u++)),n=(i&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(n)),c=Cd.indexOf(t.charAt(u++)),a=(o&3)<<6|c,c!==64&&(e+=String.fromCharCode(a));return e}var Vr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Eu=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function Kd(t){return Vr?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function MI(t){return Vr?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Ko=function(e){return Vr?Eu(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function xw(t){if(typeof ArrayBuffer>"u")return Ko(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function tf(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function Gae(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function E5(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return E5(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var Vs=Vr?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:Eu(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),a=0;for(e=0,r=0;e<t.length;r+=a,++e)if(a=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function zae(t){for(var e=[],r=0,n=t.length+250,a=Kd(t.length+255),s=0;s<t.length;++s){var i=t.charCodeAt(s);if(i<128)a[r++]=i;else if(i<2048)a[r++]=192|i>>6&31,a[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=t.charCodeAt(++s)&1023;a[r++]=240|i>>8&7,a[r++]=128|i>>2&63,a[r++]=128|o>>6&15|(i&3)<<4,a[r++]=128|o&63}else a[r++]=224|i>>12&15,a[r++]=128|i>>6&63,a[r++]=128|i&63;r>n&&(e.push(a.slice(0,r)),r=0,a=Kd(65535),n=65530)}return e.push(a.slice(0,r)),Vs(e)}var Yi=/\u0000/g,Ep=/[\u0001-\u0006]/g;function M0(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function gc(t,e){var r=""+t;return r.length>=e?r:Ra("0",e-r.length)+r}function _5(t,e){var r=""+t;return r.length>=e?r:Ra(" ",e-r.length)+r}function s2(t,e){var r=""+t;return r.length>=e?r:r+Ra(" ",e-r.length)}function qae(t,e){var r=""+Math.round(t);return r.length>=e?r:Ra("0",e-r.length)+r}function Kae(t,e){var r=""+t;return r.length>=e?r:Ra("0",e-r.length)+r}var PI=Math.pow(2,32);function Xh(t,e){if(t>PI||t<-PI)return qae(t,e);var r=Math.round(t);return Kae(r,e)}function i2(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var jI=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Rb=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Wae(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',t}var pr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},OI={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},$ae={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function o2(t,e,r){for(var n=t<0?-1:1,a=t*n,s=0,i=1,o=0,c=1,u=0,f=0,m=Math.floor(a);u<e&&(m=Math.floor(a),o=m*i+s,f=m*u+c,!(a-m<5e-8));)a=1/(a-m),s=i,i=o,c=u,u=f;if(f>e&&(u>e?(f=c,o=s):(f=u,o=i)),!r)return[0,n*o,f];var p=Math.floor(n*o/f);return[p,n*o-p*f,f]}function Mf(t,e,r){if(t>2958465||t<0)return null;var n=t|0,a=Math.floor(86400*(t-n)),s=0,i=[],o={D:n,T:a,u:86400*(t-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++a==86400&&(o.T=a=0,++n,++o.D)),n===60)i=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),i=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=tse(c,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=a%60,a=Math.floor(a/60),o.M=a%60,a=Math.floor(a/60),o.H=a,o.q=s,o}var AU=new Date(1899,11,31,0,0,0),Jae=AU.getTime(),Yae=new Date(1900,2,1,0,0,0);function uU(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=Yae&&(r+=1440*60*1e3),(r-(Jae+(t.getTimezoneOffset()-AU.getTimezoneOffset())*6e4))/(1440*60*1e3)}function S5(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Xae(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Zae(t){var e=t<0?12:11,r=S5(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function ese(t){var e=S5(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function vg(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=Zae(t):e===10?r=t.toFixed(10).substr(0,12):r=ese(t),S5(Xae(r.toUpperCase()))}function th(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):vg(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return jl(14,uU(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function tse(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function rse(t,e,r,n){var a="",s=0,i=0,o=r.y,c,u=0;switch(t){case 98:o=r.y+543;case 121:switch(e.length){case 1:case 2:c=o%100,u=2;break;default:c=o%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:c=r.m,u=e.length;break;case 3:return Rb[r.m-1][1];case 5:return Rb[r.m-1][0];default:return Rb[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:c=r.d,u=e.length;break;case 3:return jI[r.q][0];default:return jI[r.q][1]}break;case 104:switch(e.length){case 1:case 2:c=1+(r.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:c=r.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:c=r.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?gc(r.S,e.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,s=Math.round(i*(r.S+r.u)),s>=60*i&&(s=0),e==="s"?s===0?"0":""+s/i:(a=gc(s,2+n),e==="ss"?a.substr(0,2):"."+a.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:c=o,u=1;break}var f=u>0?gc(c,u):"";return f}function Ed(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var dU=/%/g;function nse(t,e,r){var n=e.replace(dU,""),a=e.length-n.length;return Au(t,n,r*Math.pow(10,2*a))+Ra("%",a)}function ase(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Au(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function fU(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+fU(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var i=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,f){return c+u+f.substr(0,(a+s)%a)+"."+f.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var hU=/# (\?+)( ?)\/( ?)(\d+)/;function sse(t,e,r){var n=parseInt(t[4],10),a=Math.round(e*n),s=Math.floor(a/n),i=a-s*n,o=n;return r+(s===0?"":""+s)+" "+(i===0?Ra(" ",t[1].length+1+t[4].length):_5(i,t[1].length)+t[2]+"/"+t[3]+gc(o,t[4].length))}function ise(t,e,r){return r+(e===0?"":""+e)+Ra(" ",t[1].length+2+t[4].length)}var mU=/^#*0*\.([0#]+)/,pU=/\).*[0#]/,gU=/\(###\) ###\\?-####/;function Ki(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function QI(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function HI(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function ose(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function lse(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function El(t,e,r){if(t.charCodeAt(0)===40&&!e.match(pU)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?El("n",n,r):"("+El("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return ase(t,e,r);if(e.indexOf("%")!==-1)return nse(t,e,r);if(e.indexOf("E")!==-1)return fU(e,r);if(e.charCodeAt(0)===36)return"$"+El(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,i,o,c=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+Xh(c,e.length);if(e.match(/^[#?]+$/))return a=Xh(r,0),a==="0"&&(a=""),a.length>e.length?a:Ki(e.substr(0,e.length-a.length))+a;if(s=e.match(hU))return sse(s,c,u);if(e.match(/^#+0+$/))return u+Xh(c,e.length-e.indexOf("0"));if(s=e.match(mU))return a=QI(r,s[1].length).replace(/^([^\.]+)$/,"$1."+Ki(s[1])).replace(/\.$/,"."+Ki(s[1])).replace(/\.(\d*)$/,function(b,y){return"."+y+Ra("0",Ki(s[1]).length-y.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+QI(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+Ed(Xh(c,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+El(t,e,-r):Ed(""+(Math.floor(r)+ose(r,s[1].length)))+"."+gc(HI(r,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return El(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=M0(El(t,e.replace(/[\\-]/g,""),r)),i=0,M0(M0(e.replace(/\\/g,"")).replace(/[0#]/g,function(b){return i<a.length?a.charAt(i++):b==="0"?"0":""}));if(e.match(gU))return a=El(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var f="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=o2(c,Math.pow(10,i)-1,!1),a=""+u,f=Au("n",s[1],o[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),a+=f+s[2]+"/"+s[3],f=s2(o[2],i),f.length<s[4].length&&(f=Ki(s[4].substr(s[4].length-f.length))+f),a+=f,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=o2(c,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?_5(o[1],i)+s[2]+"/"+s[3]+s2(o[2],i):Ra(" ",2*i+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=Xh(r,0),e.length<=a.length?a:Ki(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var m=e.indexOf(".")-i,p=e.length-a.length-m;return Ki(e.substr(0,m)+a+e.substr(e.length-p))}if(s=e.match(/^00,000\.([#0]*0)$/))return i=HI(r,s[1].length),r<0?"-"+El(t,e,-r):Ed(lse(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?gc(0,3-b.length):"")+b})+"."+gc(i,s[1].length);switch(e){case"###,##0.00":return El(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var g=Ed(Xh(c,0));return g!=="0"?u+g:"";case"###,###.00":return El(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return El(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function cse(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Au(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function Ase(t,e,r){var n=e.replace(dU,""),a=e.length-n.length;return Au(t,n,r*Math.pow(10,2*a))+Ra("%",a)}function xU(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+xU(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var i=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,f){return c+u+f.substr(0,(a+s)%a)+"."+f.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function sA(t,e,r){if(t.charCodeAt(0)===40&&!e.match(pU)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?sA("n",n,r):"("+sA("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return cse(t,e,r);if(e.indexOf("%")!==-1)return Ase(t,e,r);if(e.indexOf("E")!==-1)return xU(e,r);if(e.charCodeAt(0)===36)return"$"+sA(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,i,o,c=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+gc(c,e.length);if(e.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>e.length?a:Ki(e.substr(0,e.length-a.length))+a;if(s=e.match(hU))return ise(s,c,u);if(e.match(/^#+0+$/))return u+gc(c,e.length-e.indexOf("0"));if(s=e.match(mU))return a=(""+r).replace(/^([^\.]+)$/,"$1."+Ki(s[1])).replace(/\.$/,"."+Ki(s[1])),a=a.replace(/\.(\d*)$/,function(b,y){return"."+y+Ra("0",Ki(s[1]).length-y.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+Ed(""+c);if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+sA(t,e,-r):Ed(""+r)+"."+Ra("0",s[1].length);if(s=e.match(/^#,#*,#0/))return sA(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=M0(sA(t,e.replace(/[\\-]/g,""),r)),i=0,M0(M0(e.replace(/\\/g,"")).replace(/[0#]/g,function(b){return i<a.length?a.charAt(i++):b==="0"?"0":""}));if(e.match(gU))return a=sA(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var f="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=o2(c,Math.pow(10,i)-1,!1),a=""+u,f=Au("n",s[1],o[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),a+=f+s[2]+"/"+s[3],f=s2(o[2],i),f.length<s[4].length&&(f=Ki(s[4].substr(s[4].length-f.length))+f),a+=f,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=o2(c,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?_5(o[1],i)+s[2]+"/"+s[3]+s2(o[2],i):Ra(" ",2*i+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=""+r,e.length<=a.length?a:Ki(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var m=e.indexOf(".")-i,p=e.length-a.length-m;return Ki(e.substr(0,m)+a+e.substr(e.length-p))}if(s=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+sA(t,e,-r):Ed(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?gc(0,3-b.length):"")+b})+"."+gc(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var g=Ed(""+c);return g!=="0"?u+g:"";default:if(e.match(/\.[0#?]*$/))return sA(t,e.slice(0,e.lastIndexOf(".")),r)+Ki(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Au(t,e,r){return(r|0)===r?sA(t,e,r):El(t,e,r)}function use(t){for(var e=[],r=!1,n=0,a=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(a,n-a),a=n+1}if(e[e.length]=t.substr(a),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var vU=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function hm(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":i2(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="上午/下午")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(vU))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function dse(t,e,r,n){for(var a=[],s="",i=0,o="",c="t",u,f,m,p="H";i<t.length;)switch(o=t.charAt(i)){case"G":if(!i2(t,i))throw new Error("unrecognized character "+o+" in "+t);a[a.length]={t:"G",v:"General"},i+=7;break;case'"':for(s="";(m=t.charCodeAt(++i))!==34&&i<t.length;)s+=String.fromCharCode(m);a[a.length]={t:"t",v:s},++i;break;case"\\":var g=t.charAt(++i),b=g==="("||g===")"?g:"t";a[a.length]={t:b,v:g},++i;break;case"_":a[a.length]={t:"t",v:" "},i+=2;break;case"@":a[a.length]={t:"T",v:e},++i;break;case"B":case"b":if(t.charAt(i+1)==="1"||t.charAt(i+1)==="2"){if(u==null&&(u=Mf(e,r,t.charAt(i+1)==="2"),u==null))return"";a[a.length]={t:"X",v:t.substr(i,2)},c=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=Mf(e,r),u==null))return"";for(s=o;++i<t.length&&t.charAt(i).toLowerCase()===o;)s+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=p),a[a.length]={t:o,v:s},c=o;break;case"A":case"a":case"上":var y={t:o,v:o};if(u==null&&(u=Mf(e,r)),t.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(y.v=u.H>=12?"P":"A"),y.t="T",p="h",i+=3):t.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(y.v=u.H>=12?"PM":"AM"),y.t="T",i+=5,p="h"):t.substr(i,5).toUpperCase()==="上午/下午"?(u!=null&&(y.v=u.H>=12?"下午":"上午"),y.t="T",i+=5,p="h"):(y.t="t",++i),u==null&&y.t==="T")return"";a[a.length]=y,c=o;break;case"[":for(s=o;t.charAt(i++)!=="]"&&i<t.length;)s+=t.charAt(i);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(vU)){if(u==null&&(u=Mf(e,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",hm(t)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=o;++i<t.length&&(o=t.charAt(i))==="0";)s+=o;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++i<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(i))>-1;)s+=o;a[a.length]={t:"n",v:s};break;case"?":for(s=o;t.charAt(++i)===o;)s+=o;a[a.length]={t:o,v:s},c=o;break;case"*":++i,(t.charAt(i)==" "||t.charAt(i)=="*")&&++i;break;case"(":case")":a[a.length]={t:n===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;i<t.length&&"0123456789".indexOf(t.charAt(++i))>-1;)s+=t.charAt(i);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:o,v:o},++i;break;case"$":a[a.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);a[a.length]={t:"t",v:o},++i;break}var T=0,k=0,D;for(i=a.length-1,c="t";i>=0;--i)switch(a[i].t){case"h":case"H":a[i].t=p,c="h",T<1&&(T=1);break;case"s":(D=a[i].v.match(/\.0+$/))&&(k=Math.max(k,D[0].length-1)),T<3&&(T=3);case"d":case"y":case"M":case"e":c=a[i].t;break;case"m":c==="s"&&(a[i].t="M",T<2&&(T=2));break;case"X":break;case"Z":T<1&&a[i].v.match(/[Hh]/)&&(T=1),T<2&&a[i].v.match(/[Mm]/)&&(T=2),T<3&&a[i].v.match(/[Ss]/)&&(T=3)}switch(T){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var L="",j;for(i=0;i<a.length;++i)switch(a[i].t){case"t":case"T":case" ":case"D":break;case"X":a[i].v="",a[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[i].v=rse(a[i].t.charCodeAt(0),a[i].v,u,k),a[i].t="t";break;case"n":case"?":for(j=i+1;a[j]!=null&&((o=a[j].t)==="?"||o==="D"||(o===" "||o==="t")&&a[j+1]!=null&&(a[j+1].t==="?"||a[j+1].t==="t"&&a[j+1].v==="/")||a[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(a[j].v==="/"||a[j].v===" "&&a[j+1]!=null&&a[j+1].t=="?"));)a[i].v+=a[j].v,a[j]={v:"",t:";"},++j;L+=a[i].v,i=j-1;break;case"G":a[i].t="t",a[i].v=th(e,r);break}var H="",U,E;if(L.length>0){L.charCodeAt(0)==40?(U=e<0&&L.charCodeAt(0)===45?-e:e,E=Au("n",L,U)):(U=e<0&&n>1?-e:e,E=Au("n",L,U),U<0&&a[0]&&a[0].t=="t"&&(E=E.substr(1),a[0].v="-"+a[0].v)),j=E.length-1;var _=a.length;for(i=0;i<a.length;++i)if(a[i]!=null&&a[i].t!="t"&&a[i].v.indexOf(".")>-1){_=i;break}var B=a.length;if(_===a.length&&E.indexOf("E")===-1){for(i=a.length-1;i>=0;--i)a[i]==null||"n?".indexOf(a[i].t)===-1||(j>=a[i].v.length-1?(j-=a[i].v.length,a[i].v=E.substr(j+1,a[i].v.length)):j<0?a[i].v="":(a[i].v=E.substr(0,j+1),j=-1),a[i].t="t",B=i);j>=0&&B<a.length&&(a[B].v=E.substr(0,j+1)+a[B].v)}else if(_!==a.length&&E.indexOf("E")===-1){for(j=E.indexOf(".")-1,i=_;i>=0;--i)if(!(a[i]==null||"n?".indexOf(a[i].t)===-1)){for(f=a[i].v.indexOf(".")>-1&&i===_?a[i].v.indexOf(".")-1:a[i].v.length-1,H=a[i].v.substr(f+1);f>=0;--f)j>=0&&(a[i].v.charAt(f)==="0"||a[i].v.charAt(f)==="#")&&(H=E.charAt(j--)+H);a[i].v=H,a[i].t="t",B=i}for(j>=0&&B<a.length&&(a[B].v=E.substr(0,j+1)+a[B].v),j=E.indexOf(".")+1,i=_;i<a.length;++i)if(!(a[i]==null||"n?(".indexOf(a[i].t)===-1&&i!==_)){for(f=a[i].v.indexOf(".")>-1&&i===_?a[i].v.indexOf(".")+1:0,H=a[i].v.substr(0,f);f<a[i].v.length;++f)j<E.length&&(H+=E.charAt(j++));a[i].v=H,a[i].t="t",B=i}}}for(i=0;i<a.length;++i)a[i]!=null&&"n?".indexOf(a[i].t)>-1&&(U=n>1&&e<0&&i>0&&a[i-1].v==="-"?-e:e,a[i].v=Au(a[i].t,a[i].v,U),a[i].t="t");var Q="";for(i=0;i!==a.length;++i)a[i]!=null&&(Q+=a[i].v);return Q}var VI=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function GI(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function fse(t,e){var r=use(t),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(VI),o=r[1].match(VI);return GI(e,i)?[n,r[0]]:GI(e,o)?[n,r[1]]:[n,r[i!=null&&o!=null?2:1]]}return[n,s]}function jl(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:pr)[t],n==null&&(n=r.table&&r.table[OI[t]]||pr[OI[t]]),n==null&&(n=$ae[t]||"General");break}if(i2(n,0))return th(e,r);e instanceof Date&&(e=uU(e,r.date1904));var a=fse(n,e);if(i2(a[1]))return th(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return dse(a[1],e,r,a[0])}function uu(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(pr[r]==null){e<0&&(e=r);continue}if(pr[r]==t){e=r;break}}e<0&&(e=391)}return pr[e]=t,e}function vw(t){for(var e=0;e!=392;++e)t[e]!==void 0&&uu(t[e],e)}function mm(){pr=Wae()}var hse={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},wU=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function mse(t){var e=typeof t=="number"?pr[t]:t;return e=e.replace(wU,"(\\d+)"),new RegExp("^"+e+"$")}function pse(t,e,r){var n=-1,a=-1,s=-1,i=-1,o=-1,c=-1;(e.match(wU)||[]).forEach(function(m,p){var g=parseInt(r[p+1],10);switch(m.toLowerCase().charAt(0)){case"y":n=g;break;case"d":s=g;break;case"h":i=g;break;case"s":c=g;break;case"m":i>=0?o=g:a=g;break}}),c>=0&&o==-1&&a>=0&&(o=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var f=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return i==-1&&o==-1&&c==-1?u:n==-1&&a==-1&&s==-1?f:u+"T"+f}var gse=function(){var t={};t.version="1.2.0";function e(){for(var E=0,_=new Array(256),B=0;B!=256;++B)E=B,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,_[B]=E;return typeof Int32Array<"u"?new Int32Array(_):_}var r=e();function n(E){var _=0,B=0,Q=0,R=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(Q=0;Q!=256;++Q)R[Q]=E[Q];for(Q=0;Q!=256;++Q)for(B=E[Q],_=256+Q;_<4096;_+=256)B=R[_]=B>>>8^E[B&255];var F=[];for(Q=1;Q!=16;++Q)F[Q-1]=typeof Int32Array<"u"?R.subarray(Q*256,Q*256+256):R.slice(Q*256,Q*256+256);return F}var a=n(r),s=a[0],i=a[1],o=a[2],c=a[3],u=a[4],f=a[5],m=a[6],p=a[7],g=a[8],b=a[9],y=a[10],T=a[11],k=a[12],D=a[13],L=a[14];function j(E,_){for(var B=_^-1,Q=0,R=E.length;Q<R;)B=B>>>8^r[(B^E.charCodeAt(Q++))&255];return~B}function H(E,_){for(var B=_^-1,Q=E.length-15,R=0;R<Q;)B=L[E[R++]^B&255]^D[E[R++]^B>>8&255]^k[E[R++]^B>>16&255]^T[E[R++]^B>>>24]^y[E[R++]]^b[E[R++]]^g[E[R++]]^p[E[R++]]^m[E[R++]]^f[E[R++]]^u[E[R++]]^c[E[R++]]^o[E[R++]]^i[E[R++]]^s[E[R++]]^r[E[R++]];for(Q+=15;R<Q;)B=B>>>8^r[(B^E[R++])&255];return~B}function U(E,_){for(var B=_^-1,Q=0,R=E.length,F=0,V=0;Q<R;)F=E.charCodeAt(Q++),F<128?B=B>>>8^r[(B^F)&255]:F<2048?(B=B>>>8^r[(B^(192|F>>6&31))&255],B=B>>>8^r[(B^(128|F&63))&255]):F>=55296&&F<57344?(F=(F&1023)+64,V=E.charCodeAt(Q++)&1023,B=B>>>8^r[(B^(240|F>>8&7))&255],B=B>>>8^r[(B^(128|F>>2&63))&255],B=B>>>8^r[(B^(128|V>>6&15|(F&3)<<4))&255],B=B>>>8^r[(B^(128|V&63))&255]):(B=B>>>8^r[(B^(224|F>>12&15))&255],B=B>>>8^r[(B^(128|F>>6&63))&255],B=B>>>8^r[(B^(128|F&63))&255]);return~B}return t.table=r,t.bstr=j,t.buf=H,t.str=U,t}(),or=function(){var e={};e.version="1.2.1";function r(fe,Ne){for(var Ce=fe.split("/"),_e=Ne.split("/"),Be=0,ke=0,qe=Math.min(Ce.length,_e.length);Be<qe;++Be){if(ke=Ce[Be].length-_e[Be].length)return ke;if(Ce[Be]!=_e[Be])return Ce[Be]<_e[Be]?-1:1}return Ce.length-_e.length}function n(fe){if(fe.charAt(fe.length-1)=="/")return fe.slice(0,-1).indexOf("/")===-1?fe:n(fe.slice(0,-1));var Ne=fe.lastIndexOf("/");return Ne===-1?fe:fe.slice(0,Ne+1)}function a(fe){if(fe.charAt(fe.length-1)=="/")return a(fe.slice(0,-1));var Ne=fe.lastIndexOf("/");return Ne===-1?fe:fe.slice(Ne+1)}function s(fe,Ne){typeof Ne=="string"&&(Ne=new Date(Ne));var Ce=Ne.getHours();Ce=Ce<<6|Ne.getMinutes(),Ce=Ce<<5|Ne.getSeconds()>>>1,fe.write_shift(2,Ce);var _e=Ne.getFullYear()-1980;_e=_e<<4|Ne.getMonth()+1,_e=_e<<5|Ne.getDate(),fe.write_shift(2,_e)}function i(fe){var Ne=fe.read_shift(2)&65535,Ce=fe.read_shift(2)&65535,_e=new Date,Be=Ce&31;Ce>>>=5;var ke=Ce&15;Ce>>>=4,_e.setMilliseconds(0),_e.setFullYear(Ce+1980),_e.setMonth(ke-1),_e.setDate(Be);var qe=Ne&31;Ne>>>=5;var rt=Ne&63;return Ne>>>=6,_e.setHours(Ne),_e.setMinutes(rt),_e.setSeconds(qe<<1),_e}function o(fe){ni(fe,0);for(var Ne={},Ce=0;fe.l<=fe.length-4;){var _e=fe.read_shift(2),Be=fe.read_shift(2),ke=fe.l+Be,qe={};switch(_e){case 21589:Ce=fe.read_shift(1),Ce&1&&(qe.mtime=fe.read_shift(4)),Be>5&&(Ce&2&&(qe.atime=fe.read_shift(4)),Ce&4&&(qe.ctime=fe.read_shift(4))),qe.mtime&&(qe.mt=new Date(qe.mtime*1e3));break}fe.l=ke,Ne[_e]=qe}return Ne}var c;function u(){return c||(c={})}function f(fe,Ne){if(fe[0]==80&&fe[1]==75)return Bn(fe,Ne);if((fe[0]|32)==109&&(fe[1]|32)==105)return zs(fe,Ne);if(fe.length<512)throw new Error("CFB file size "+fe.length+" < 512");var Ce=3,_e=512,Be=0,ke=0,qe=0,rt=0,He=0,$e=[],Ze=fe.slice(0,512);ni(Ze,0);var xt=m(Ze);switch(Ce=xt[0],Ce){case 3:_e=512;break;case 4:_e=4096;break;case 0:if(xt[1]==0)return Bn(fe,Ne);default:throw new Error("Major Version: Expected 3 or 4 saw "+Ce)}_e!==512&&(Ze=fe.slice(0,_e),ni(Ze,28));var Bt=fe.slice(0,_e);p(Ze,Ce);var Ot=Ze.read_shift(4,"i");if(Ce===3&&Ot!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ot);Ze.l+=4,qe=Ze.read_shift(4,"i"),Ze.l+=4,Ze.chk("00100000","Mini Stream Cutoff Size: "),rt=Ze.read_shift(4,"i"),Be=Ze.read_shift(4,"i"),He=Ze.read_shift(4,"i"),ke=Ze.read_shift(4,"i");for(var St=-1,Rt=0;Rt<109&&(St=Ze.read_shift(4,"i"),!(St<0));++Rt)$e[Rt]=St;var ur=g(fe,_e);T(He,ke,ur,_e,$e);var Pr=D(ur,qe,$e,_e);Pr[qe].name="!Directory",Be>0&&rt!==V&&(Pr[rt].name="!MiniFAT"),Pr[$e[0]].name="!FAT",Pr.fat_addrs=$e,Pr.ssz=_e;var jr={},qr=[],xs=[],eo=[];L(qe,Pr,ur,qr,Be,jr,xs,rt),b(xs,eo,qr),qr.shift();var ns={FileIndex:xs,FullPaths:eo};return Ne&&Ne.raw&&(ns.raw={header:Bt,sectors:ur}),ns}function m(fe){if(fe[fe.l]==80&&fe[fe.l+1]==75)return[0,0];fe.chk(X,"Header Signature: "),fe.l+=16;var Ne=fe.read_shift(2,"u");return[fe.read_shift(2,"u"),Ne]}function p(fe,Ne){var Ce=9;switch(fe.l+=2,Ce=fe.read_shift(2)){case 9:if(Ne!=3)throw new Error("Sector Shift: Expected 9 saw "+Ce);break;case 12:if(Ne!=4)throw new Error("Sector Shift: Expected 12 saw "+Ce);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Ce)}fe.chk("0600","Mini Sector Shift: "),fe.chk("000000000000","Reserved: ")}function g(fe,Ne){for(var Ce=Math.ceil(fe.length/Ne)-1,_e=[],Be=1;Be<Ce;++Be)_e[Be-1]=fe.slice(Be*Ne,(Be+1)*Ne);return _e[Ce-1]=fe.slice(Ce*Ne),_e}function b(fe,Ne,Ce){for(var _e=0,Be=0,ke=0,qe=0,rt=0,He=Ce.length,$e=[],Ze=[];_e<He;++_e)$e[_e]=Ze[_e]=_e,Ne[_e]=Ce[_e];for(;rt<Ze.length;++rt)_e=Ze[rt],Be=fe[_e].L,ke=fe[_e].R,qe=fe[_e].C,$e[_e]===_e&&(Be!==-1&&$e[Be]!==Be&&($e[_e]=$e[Be]),ke!==-1&&$e[ke]!==ke&&($e[_e]=$e[ke])),qe!==-1&&($e[qe]=_e),Be!==-1&&_e!=$e[_e]&&($e[Be]=$e[_e],Ze.lastIndexOf(Be)<rt&&Ze.push(Be)),ke!==-1&&_e!=$e[_e]&&($e[ke]=$e[_e],Ze.lastIndexOf(ke)<rt&&Ze.push(ke));for(_e=1;_e<He;++_e)$e[_e]===_e&&(ke!==-1&&$e[ke]!==ke?$e[_e]=$e[ke]:Be!==-1&&$e[Be]!==Be&&($e[_e]=$e[Be]));for(_e=1;_e<He;++_e)if(fe[_e].type!==0){if(rt=_e,rt!=$e[rt])do rt=$e[rt],Ne[_e]=Ne[rt]+"/"+Ne[_e];while(rt!==0&&$e[rt]!==-1&&rt!=$e[rt]);$e[_e]=-1}for(Ne[0]+="/",_e=1;_e<He;++_e)fe[_e].type!==2&&(Ne[_e]+="/")}function y(fe,Ne,Ce){for(var _e=fe.start,Be=fe.size,ke=[],qe=_e;Ce&&Be>0&&qe>=0;)ke.push(Ne.slice(qe*F,qe*F+F)),Be-=F,qe=Rf(Ce,qe*4);return ke.length===0?lt(0):Vs(ke).slice(0,fe.size)}function T(fe,Ne,Ce,_e,Be){var ke=V;if(fe===V){if(Ne!==0)throw new Error("DIFAT chain shorter than expected")}else if(fe!==-1){var qe=Ce[fe],rt=(_e>>>2)-1;if(!qe)return;for(var He=0;He<rt&&(ke=Rf(qe,He*4))!==V;++He)Be.push(ke);T(Rf(qe,_e-4),Ne-1,Ce,_e,Be)}}function k(fe,Ne,Ce,_e,Be){var ke=[],qe=[];Be||(Be=[]);var rt=_e-1,He=0,$e=0;for(He=Ne;He>=0;){Be[He]=!0,ke[ke.length]=He,qe.push(fe[He]);var Ze=Ce[Math.floor(He*4/_e)];if($e=He*4&rt,_e<4+$e)throw new Error("FAT boundary crossed: "+He+" 4 "+_e);if(!fe[Ze])break;He=Rf(fe[Ze],$e)}return{nodes:ke,data:r3([qe])}}function D(fe,Ne,Ce,_e){var Be=fe.length,ke=[],qe=[],rt=[],He=[],$e=_e-1,Ze=0,xt=0,Bt=0,Ot=0;for(Ze=0;Ze<Be;++Ze)if(rt=[],Bt=Ze+Ne,Bt>=Be&&(Bt-=Be),!qe[Bt]){He=[];var St=[];for(xt=Bt;xt>=0;){St[xt]=!0,qe[xt]=!0,rt[rt.length]=xt,He.push(fe[xt]);var Rt=Ce[Math.floor(xt*4/_e)];if(Ot=xt*4&$e,_e<4+Ot)throw new Error("FAT boundary crossed: "+xt+" 4 "+_e);if(!fe[Rt]||(xt=Rf(fe[Rt],Ot),St[xt]))break}ke[Bt]={nodes:rt,data:r3([He])}}return ke}function L(fe,Ne,Ce,_e,Be,ke,qe,rt){for(var He=0,$e=_e.length?2:0,Ze=Ne[fe].data,xt=0,Bt=0,Ot;xt<Ze.length;xt+=128){var St=Ze.slice(xt,xt+128);ni(St,64),Bt=St.read_shift(2),Ot=D5(St,0,Bt-$e),_e.push(Ot);var Rt={name:Ot,type:St.read_shift(1),color:St.read_shift(1),L:St.read_shift(4,"i"),R:St.read_shift(4,"i"),C:St.read_shift(4,"i"),clsid:St.read_shift(16),state:St.read_shift(4,"i"),start:0,size:0},ur=St.read_shift(2)+St.read_shift(2)+St.read_shift(2)+St.read_shift(2);ur!==0&&(Rt.ct=j(St,St.l-8));var Pr=St.read_shift(2)+St.read_shift(2)+St.read_shift(2)+St.read_shift(2);Pr!==0&&(Rt.mt=j(St,St.l-8)),Rt.start=St.read_shift(4,"i"),Rt.size=St.read_shift(4,"i"),Rt.size<0&&Rt.start<0&&(Rt.size=Rt.type=0,Rt.start=V,Rt.name=""),Rt.type===5?(He=Rt.start,Be>0&&He!==V&&(Ne[He].name="!StreamData")):Rt.size>=4096?(Rt.storage="fat",Ne[Rt.start]===void 0&&(Ne[Rt.start]=k(Ce,Rt.start,Ne.fat_addrs,Ne.ssz)),Ne[Rt.start].name=Rt.name,Rt.content=Ne[Rt.start].data.slice(0,Rt.size)):(Rt.storage="minifat",Rt.size<0?Rt.size=0:He!==V&&Rt.start!==V&&Ne[He]&&(Rt.content=y(Rt,Ne[He].data,(Ne[rt]||{}).data))),Rt.content&&ni(Rt.content,0),ke[Ot]=Rt,qe.push(Rt)}}function j(fe,Ne){return new Date((qo(fe,Ne+4)/1e7*Math.pow(2,32)+qo(fe,Ne)/1e7-11644473600)*1e3)}function H(fe,Ne){return u(),f(c.readFileSync(fe),Ne)}function U(fe,Ne){var Ce=Ne&&Ne.type;switch(Ce||Vr&&Buffer.isBuffer(fe)&&(Ce="buffer"),Ce||"base64"){case"file":return H(fe,Ne);case"base64":return f(Ko(Zo(fe)),Ne);case"binary":return f(Ko(fe),Ne)}return f(fe,Ne)}function E(fe,Ne){var Ce=Ne||{},_e=Ce.root||"Root Entry";if(fe.FullPaths||(fe.FullPaths=[]),fe.FileIndex||(fe.FileIndex=[]),fe.FullPaths.length!==fe.FileIndex.length)throw new Error("inconsistent CFB structure");fe.FullPaths.length===0&&(fe.FullPaths[0]=_e+"/",fe.FileIndex[0]={name:_e,type:5}),Ce.CLSID&&(fe.FileIndex[0].clsid=Ce.CLSID),_(fe)}function _(fe){var Ne="Sh33tJ5";if(!or.find(fe,"/"+Ne)){var Ce=lt(4);Ce[0]=55,Ce[1]=Ce[3]=50,Ce[2]=54,fe.FileIndex.push({name:Ne,type:2,content:Ce,size:4,L:69,R:69,C:69}),fe.FullPaths.push(fe.FullPaths[0]+Ne),B(fe)}}function B(fe,Ne){E(fe);for(var Ce=!1,_e=!1,Be=fe.FullPaths.length-1;Be>=0;--Be){var ke=fe.FileIndex[Be];switch(ke.type){case 0:_e?Ce=!0:(fe.FileIndex.pop(),fe.FullPaths.pop());break;case 1:case 2:case 5:_e=!0,isNaN(ke.R*ke.L*ke.C)&&(Ce=!0),ke.R>-1&&ke.L>-1&&ke.R==ke.L&&(Ce=!0);break;default:Ce=!0;break}}if(!(!Ce&&!Ne)){var qe=new Date(1987,1,19),rt=0,He=Object.create?Object.create(null):{},$e=[];for(Be=0;Be<fe.FullPaths.length;++Be)He[fe.FullPaths[Be]]=!0,fe.FileIndex[Be].type!==0&&$e.push([fe.FullPaths[Be],fe.FileIndex[Be]]);for(Be=0;Be<$e.length;++Be){var Ze=n($e[Be][0]);_e=He[Ze],_e||($e.push([Ze,{name:a(Ze).replace("/",""),type:1,clsid:te,ct:qe,mt:qe,content:null}]),He[Ze]=!0)}for($e.sort(function(Ot,St){return r(Ot[0],St[0])}),fe.FullPaths=[],fe.FileIndex=[],Be=0;Be<$e.length;++Be)fe.FullPaths[Be]=$e[Be][0],fe.FileIndex[Be]=$e[Be][1];for(Be=0;Be<$e.length;++Be){var xt=fe.FileIndex[Be],Bt=fe.FullPaths[Be];if(xt.name=a(Bt).replace("/",""),xt.L=xt.R=xt.C=-(xt.color=1),xt.size=xt.content?xt.content.length:0,xt.start=0,xt.clsid=xt.clsid||te,Be===0)xt.C=$e.length>1?1:-1,xt.size=0,xt.type=5;else if(Bt.slice(-1)=="/"){for(rt=Be+1;rt<$e.length&&n(fe.FullPaths[rt])!=Bt;++rt);for(xt.C=rt>=$e.length?-1:rt,rt=Be+1;rt<$e.length&&n(fe.FullPaths[rt])!=n(Bt);++rt);xt.R=rt>=$e.length?-1:rt,xt.type=1}else n(fe.FullPaths[Be+1]||"")==n(Bt)&&(xt.R=Be+1),xt.type=2}}}function Q(fe,Ne){var Ce=Ne||{};if(Ce.fileType=="mad")return Ht(fe,Ce);switch(B(fe),Ce.fileType){case"zip":return Pa(fe,Ce)}var _e=function(Ot){for(var St=0,Rt=0,ur=0;ur<Ot.FileIndex.length;++ur){var Pr=Ot.FileIndex[ur];if(Pr.content){var jr=Pr.content.length;jr>0&&(jr<4096?St+=jr+63>>6:Rt+=jr+511>>9)}}for(var qr=Ot.FullPaths.length+3>>2,xs=St+7>>3,eo=St+127>>7,ns=xs+Rt+qr+eo,ks=ns+127>>7,qs=ks<=109?0:Math.ceil((ks-109)/127);ns+ks+qs+127>>7>ks;)qs=++ks<=109?0:Math.ceil((ks-109)/127);var vs=[1,qs,ks,eo,qr,Rt,St,0];return Ot.FileIndex[0].size=St<<6,vs[7]=(Ot.FileIndex[0].start=vs[0]+vs[1]+vs[2]+vs[3]+vs[4]+vs[5])+(vs[6]+7>>3),vs}(fe),Be=lt(_e[7]<<9),ke=0,qe=0;{for(ke=0;ke<8;++ke)Be.write_shift(1,oe[ke]);for(ke=0;ke<8;++ke)Be.write_shift(2,0);for(Be.write_shift(2,62),Be.write_shift(2,3),Be.write_shift(2,65534),Be.write_shift(2,9),Be.write_shift(2,6),ke=0;ke<3;++ke)Be.write_shift(2,0);for(Be.write_shift(4,0),Be.write_shift(4,_e[2]),Be.write_shift(4,_e[0]+_e[1]+_e[2]+_e[3]-1),Be.write_shift(4,0),Be.write_shift(4,4096),Be.write_shift(4,_e[3]?_e[0]+_e[1]+_e[2]-1:V),Be.write_shift(4,_e[3]),Be.write_shift(-4,_e[1]?_e[0]-1:V),Be.write_shift(4,_e[1]),ke=0;ke<109;++ke)Be.write_shift(-4,ke<_e[2]?_e[1]+ke:-1)}if(_e[1])for(qe=0;qe<_e[1];++qe){for(;ke<236+qe*127;++ke)Be.write_shift(-4,ke<_e[2]?_e[1]+ke:-1);Be.write_shift(-4,qe===_e[1]-1?V:qe+1)}var rt=function(Ot){for(qe+=Ot;ke<qe-1;++ke)Be.write_shift(-4,ke+1);Ot&&(++ke,Be.write_shift(-4,V))};for(qe=ke=0,qe+=_e[1];ke<qe;++ke)Be.write_shift(-4,ae.DIFSECT);for(qe+=_e[2];ke<qe;++ke)Be.write_shift(-4,ae.FATSECT);rt(_e[3]),rt(_e[4]);for(var He=0,$e=0,Ze=fe.FileIndex[0];He<fe.FileIndex.length;++He)Ze=fe.FileIndex[He],Ze.content&&($e=Ze.content.length,!($e<4096)&&(Ze.start=qe,rt($e+511>>9)));for(rt(_e[6]+7>>3);Be.l&511;)Be.write_shift(-4,ae.ENDOFCHAIN);for(qe=ke=0,He=0;He<fe.FileIndex.length;++He)Ze=fe.FileIndex[He],Ze.content&&($e=Ze.content.length,!(!$e||$e>=4096)&&(Ze.start=qe,rt($e+63>>6)));for(;Be.l&511;)Be.write_shift(-4,ae.ENDOFCHAIN);for(ke=0;ke<_e[4]<<2;++ke){var xt=fe.FullPaths[ke];if(!xt||xt.length===0){for(He=0;He<17;++He)Be.write_shift(4,0);for(He=0;He<3;++He)Be.write_shift(4,-1);for(He=0;He<12;++He)Be.write_shift(4,0);continue}Ze=fe.FileIndex[ke],ke===0&&(Ze.start=Ze.size?Ze.start-1:V);var Bt=ke===0&&Ce.root||Ze.name;if($e=2*(Bt.length+1),Be.write_shift(64,Bt,"utf16le"),Be.write_shift(2,$e),Be.write_shift(1,Ze.type),Be.write_shift(1,Ze.color),Be.write_shift(-4,Ze.L),Be.write_shift(-4,Ze.R),Be.write_shift(-4,Ze.C),Ze.clsid)Be.write_shift(16,Ze.clsid,"hex");else for(He=0;He<4;++He)Be.write_shift(4,0);Be.write_shift(4,Ze.state||0),Be.write_shift(4,0),Be.write_shift(4,0),Be.write_shift(4,0),Be.write_shift(4,0),Be.write_shift(4,Ze.start),Be.write_shift(4,Ze.size),Be.write_shift(4,0)}for(ke=1;ke<fe.FileIndex.length;++ke)if(Ze=fe.FileIndex[ke],Ze.size>=4096)if(Be.l=Ze.start+1<<9,Vr&&Buffer.isBuffer(Ze.content))Ze.content.copy(Be,Be.l,0,Ze.size),Be.l+=Ze.size+511&-512;else{for(He=0;He<Ze.size;++He)Be.write_shift(1,Ze.content[He]);for(;He&511;++He)Be.write_shift(1,0)}for(ke=1;ke<fe.FileIndex.length;++ke)if(Ze=fe.FileIndex[ke],Ze.size>0&&Ze.size<4096)if(Vr&&Buffer.isBuffer(Ze.content))Ze.content.copy(Be,Be.l,0,Ze.size),Be.l+=Ze.size+63&-64;else{for(He=0;He<Ze.size;++He)Be.write_shift(1,Ze.content[He]);for(;He&63;++He)Be.write_shift(1,0)}if(Vr)Be.l=Be.length;else for(;Be.l<Be.length;)Be.write_shift(1,0);return Be}function R(fe,Ne){var Ce=fe.FullPaths.map(function(He){return He.toUpperCase()}),_e=Ce.map(function(He){var $e=He.split("/");return $e[$e.length-(He.slice(-1)=="/"?2:1)]}),Be=!1;Ne.charCodeAt(0)===47?(Be=!0,Ne=Ce[0].slice(0,-1)+Ne):Be=Ne.indexOf("/")!==-1;var ke=Ne.toUpperCase(),qe=Be===!0?Ce.indexOf(ke):_e.indexOf(ke);if(qe!==-1)return fe.FileIndex[qe];var rt=!ke.match(Ep);for(ke=ke.replace(Yi,""),rt&&(ke=ke.replace(Ep,"!")),qe=0;qe<Ce.length;++qe)if((rt?Ce[qe].replace(Ep,"!"):Ce[qe]).replace(Yi,"")==ke||(rt?_e[qe].replace(Ep,"!"):_e[qe]).replace(Yi,"")==ke)return fe.FileIndex[qe];return null}var F=64,V=-2,X="d0cf11e0a1b11ae1",oe=[208,207,17,224,161,177,26,225],te="00000000000000000000000000000000",ae={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:V,FREESECT:-1,HEADER_SIGNATURE:X,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:te,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function q(fe,Ne,Ce){u();var _e=Q(fe,Ce);c.writeFileSync(Ne,_e)}function J(fe){for(var Ne=new Array(fe.length),Ce=0;Ce<fe.length;++Ce)Ne[Ce]=String.fromCharCode(fe[Ce]);return Ne.join("")}function W(fe,Ne){var Ce=Q(fe,Ne);switch(Ne&&Ne.type||"buffer"){case"file":return u(),c.writeFileSync(Ne.filename,Ce),Ce;case"binary":return typeof Ce=="string"?Ce:J(Ce);case"base64":return xg(typeof Ce=="string"?Ce:J(Ce));case"buffer":if(Vr)return Buffer.isBuffer(Ce)?Ce:Eu(Ce);case"array":return typeof Ce=="string"?Ko(Ce):Ce}return Ce}var de;function P(fe){try{var Ne=fe.InflateRaw,Ce=new Ne;if(Ce._processChunk(new Uint8Array([3,0]),Ce._finishFlushFlag),Ce.bytesRead)de=fe;else throw new Error("zlib does not expose bytesRead")}catch(_e){console.error("cannot use native zlib: "+(_e.message||_e))}}function K(fe,Ne){if(!de)return Mr(fe,Ne);var Ce=de.InflateRaw,_e=new Ce,Be=_e._processChunk(fe.slice(fe.l),_e._finishFlushFlag);return fe.l+=_e.bytesRead,Be}function Y(fe){return de?de.deflateRawSync(fe):It(fe)}var ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Ae=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Se=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ge(fe){var Ne=(fe<<1|fe<<11)&139536|(fe<<5|fe<<15)&558144;return(Ne>>16|Ne>>8|Ne)&255}for(var pe=typeof Uint8Array<"u",ye=pe?new Uint8Array(256):[],ue=0;ue<256;++ue)ye[ue]=ge(ue);function se(fe,Ne){var Ce=ye[fe&255];return Ne<=8?Ce>>>8-Ne:(Ce=Ce<<8|ye[fe>>8&255],Ne<=16?Ce>>>16-Ne:(Ce=Ce<<8|ye[fe>>16&255],Ce>>>24-Ne))}function Pe(fe,Ne){var Ce=Ne&7,_e=Ne>>>3;return(fe[_e]|(Ce<=6?0:fe[_e+1]<<8))>>>Ce&3}function at(fe,Ne){var Ce=Ne&7,_e=Ne>>>3;return(fe[_e]|(Ce<=5?0:fe[_e+1]<<8))>>>Ce&7}function De(fe,Ne){var Ce=Ne&7,_e=Ne>>>3;return(fe[_e]|(Ce<=4?0:fe[_e+1]<<8))>>>Ce&15}function Ee(fe,Ne){var Ce=Ne&7,_e=Ne>>>3;return(fe[_e]|(Ce<=3?0:fe[_e+1]<<8))>>>Ce&31}function Le(fe,Ne){var Ce=Ne&7,_e=Ne>>>3;return(fe[_e]|(Ce<=1?0:fe[_e+1]<<8))>>>Ce&127}function it(fe,Ne,Ce){var _e=Ne&7,Be=Ne>>>3,ke=(1<<Ce)-1,qe=fe[Be]>>>_e;return Ce<8-_e||(qe|=fe[Be+1]<<8-_e,Ce<16-_e)||(qe|=fe[Be+2]<<16-_e,Ce<24-_e)||(qe|=fe[Be+3]<<24-_e),qe&ke}function et(fe,Ne,Ce){var _e=Ne&7,Be=Ne>>>3;return _e<=5?fe[Be]|=(Ce&7)<<_e:(fe[Be]|=Ce<<_e&255,fe[Be+1]=(Ce&7)>>8-_e),Ne+3}function ht(fe,Ne,Ce){var _e=Ne&7,Be=Ne>>>3;return Ce=(Ce&1)<<_e,fe[Be]|=Ce,Ne+1}function Et(fe,Ne,Ce){var _e=Ne&7,Be=Ne>>>3;return Ce<<=_e,fe[Be]|=Ce&255,Ce>>>=8,fe[Be+1]=Ce,Ne+8}function At(fe,Ne,Ce){var _e=Ne&7,Be=Ne>>>3;return Ce<<=_e,fe[Be]|=Ce&255,Ce>>>=8,fe[Be+1]=Ce&255,fe[Be+2]=Ce>>>8,Ne+16}function jt(fe,Ne){var Ce=fe.length,_e=2*Ce>Ne?2*Ce:Ne+5,Be=0;if(Ce>=Ne)return fe;if(Vr){var ke=MI(_e);if(fe.copy)fe.copy(ke);else for(;Be<fe.length;++Be)ke[Be]=fe[Be];return ke}else if(pe){var qe=new Uint8Array(_e);if(qe.set)qe.set(fe);else for(;Be<Ce;++Be)qe[Be]=fe[Be];return qe}return fe.length=_e,fe}function Kt(fe){for(var Ne=new Array(fe),Ce=0;Ce<fe;++Ce)Ne[Ce]=0;return Ne}function Yt(fe,Ne,Ce){var _e=1,Be=0,ke=0,qe=0,rt=0,He=fe.length,$e=pe?new Uint16Array(32):Kt(32);for(ke=0;ke<32;++ke)$e[ke]=0;for(ke=He;ke<Ce;++ke)fe[ke]=0;He=fe.length;var Ze=pe?new Uint16Array(He):Kt(He);for(ke=0;ke<He;++ke)$e[Be=fe[ke]]++,_e<Be&&(_e=Be),Ze[ke]=0;for($e[0]=0,ke=1;ke<=_e;++ke)$e[ke+16]=rt=rt+$e[ke-1]<<1;for(ke=0;ke<He;++ke)rt=fe[ke],rt!=0&&(Ze[ke]=$e[rt+16]++);var xt=0;for(ke=0;ke<He;++ke)if(xt=fe[ke],xt!=0)for(rt=se(Ze[ke],_e)>>_e-xt,qe=(1<<_e+4-xt)-1;qe>=0;--qe)Ne[rt|qe<<xt]=xt&15|ke<<4;return _e}var Qt=pe?new Uint16Array(512):Kt(512),Gt=pe?new Uint16Array(32):Kt(32);if(!pe){for(var Wt=0;Wt<512;++Wt)Qt[Wt]=0;for(Wt=0;Wt<32;++Wt)Gt[Wt]=0}(function(){for(var fe=[],Ne=0;Ne<32;Ne++)fe.push(5);Yt(fe,Gt,32);var Ce=[];for(Ne=0;Ne<=143;Ne++)Ce.push(8);for(;Ne<=255;Ne++)Ce.push(9);for(;Ne<=279;Ne++)Ce.push(7);for(;Ne<=287;Ne++)Ce.push(8);Yt(Ce,Qt,288)})();var kt=function(){for(var Ne=pe?new Uint8Array(32768):[],Ce=0,_e=0;Ce<Se.length-1;++Ce)for(;_e<Se[Ce+1];++_e)Ne[_e]=Ce;for(;_e<32768;++_e)Ne[_e]=29;var Be=pe?new Uint8Array(259):[];for(Ce=0,_e=0;Ce<Ae.length-1;++Ce)for(;_e<Ae[Ce+1];++_e)Be[_e]=Ce;function ke(rt,He){for(var $e=0;$e<rt.length;){var Ze=Math.min(65535,rt.length-$e),xt=$e+Ze==rt.length;for(He.write_shift(1,+xt),He.write_shift(2,Ze),He.write_shift(2,~Ze&65535);Ze-- >0;)He[He.l++]=rt[$e++]}return He.l}function qe(rt,He){for(var $e=0,Ze=0,xt=pe?new Uint16Array(32768):[];Ze<rt.length;){var Bt=Math.min(65535,rt.length-Ze);if(Bt<10){for($e=et(He,$e,+(Ze+Bt==rt.length)),$e&7&&($e+=8-($e&7)),He.l=$e/8|0,He.write_shift(2,Bt),He.write_shift(2,~Bt&65535);Bt-- >0;)He[He.l++]=rt[Ze++];$e=He.l*8;continue}$e=et(He,$e,+(Ze+Bt==rt.length)+2);for(var Ot=0;Bt-- >0;){var St=rt[Ze];Ot=(Ot<<5^St)&32767;var Rt=-1,ur=0;if((Rt=xt[Ot])&&(Rt|=Ze&-32768,Rt>Ze&&(Rt-=32768),Rt<Ze))for(;rt[Rt+ur]==rt[Ze+ur]&&ur<250;)++ur;if(ur>2){St=Be[ur],St<=22?$e=Et(He,$e,ye[St+1]>>1)-1:(Et(He,$e,3),$e+=5,Et(He,$e,ye[St-23]>>5),$e+=3);var Pr=St<8?0:St-4>>2;Pr>0&&(At(He,$e,ur-Ae[St]),$e+=Pr),St=Ne[Ze-Rt],$e=Et(He,$e,ye[St]>>3),$e-=3;var jr=St<4?0:St-2>>1;jr>0&&(At(He,$e,Ze-Rt-Se[St]),$e+=jr);for(var qr=0;qr<ur;++qr)xt[Ot]=Ze&32767,Ot=(Ot<<5^rt[Ze])&32767,++Ze;Bt-=ur-1}else St<=143?St=St+48:$e=ht(He,$e,1),$e=Et(He,$e,ye[St]),xt[Ot]=Ze&32767,++Ze}$e=Et(He,$e,0)-1}return He.l=($e+7)/8|0,He.l}return function(He,$e){return He.length<8?ke(He,$e):qe(He,$e)}}();function It(fe){var Ne=lt(50+Math.floor(fe.length*1.1)),Ce=kt(fe,Ne);return Ne.slice(0,Ce)}var _t=pe?new Uint16Array(32768):Kt(32768),Yr=pe?new Uint16Array(32768):Kt(32768),tr=pe?new Uint16Array(128):Kt(128),$n=1,Ir=1;function hn(fe,Ne){var Ce=Ee(fe,Ne)+257;Ne+=5;var _e=Ee(fe,Ne)+1;Ne+=5;var Be=De(fe,Ne)+4;Ne+=4;for(var ke=0,qe=pe?new Uint8Array(19):Kt(19),rt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],He=1,$e=pe?new Uint8Array(8):Kt(8),Ze=pe?new Uint8Array(8):Kt(8),xt=qe.length,Bt=0;Bt<Be;++Bt)qe[ee[Bt]]=ke=at(fe,Ne),He<ke&&(He=ke),$e[ke]++,Ne+=3;var Ot=0;for($e[0]=0,Bt=1;Bt<=He;++Bt)Ze[Bt]=Ot=Ot+$e[Bt-1]<<1;for(Bt=0;Bt<xt;++Bt)(Ot=qe[Bt])!=0&&(rt[Bt]=Ze[Ot]++);var St=0;for(Bt=0;Bt<xt;++Bt)if(St=qe[Bt],St!=0){Ot=ye[rt[Bt]]>>8-St;for(var Rt=(1<<7-St)-1;Rt>=0;--Rt)tr[Ot|Rt<<St]=St&7|Bt<<3}var ur=[];for(He=1;ur.length<Ce+_e;)switch(Ot=tr[Le(fe,Ne)],Ne+=Ot&7,Ot>>>=3){case 16:for(ke=3+Pe(fe,Ne),Ne+=2,Ot=ur[ur.length-1];ke-- >0;)ur.push(Ot);break;case 17:for(ke=3+at(fe,Ne),Ne+=3;ke-- >0;)ur.push(0);break;case 18:for(ke=11+Le(fe,Ne),Ne+=7;ke-- >0;)ur.push(0);break;default:ur.push(Ot),He<Ot&&(He=Ot);break}var Pr=ur.slice(0,Ce),jr=ur.slice(Ce);for(Bt=Ce;Bt<286;++Bt)Pr[Bt]=0;for(Bt=_e;Bt<30;++Bt)jr[Bt]=0;return $n=Yt(Pr,_t,286),Ir=Yt(jr,Yr,30),Ne}function rs(fe,Ne){if(fe[0]==3&&!(fe[1]&3))return[Kd(Ne),2];for(var Ce=0,_e=0,Be=MI(Ne||1<<18),ke=0,qe=Be.length>>>0,rt=0,He=0;(_e&1)==0;){if(_e=at(fe,Ce),Ce+=3,_e>>>1)_e>>1==1?(rt=9,He=5):(Ce=hn(fe,Ce),rt=$n,He=Ir);else{Ce&7&&(Ce+=8-(Ce&7));var $e=fe[Ce>>>3]|fe[(Ce>>>3)+1]<<8;if(Ce+=32,$e>0)for(!Ne&&qe<ke+$e&&(Be=jt(Be,ke+$e),qe=Be.length);$e-- >0;)Be[ke++]=fe[Ce>>>3],Ce+=8;continue}for(;;){!Ne&&qe<ke+32767&&(Be=jt(Be,ke+32767),qe=Be.length);var Ze=it(fe,Ce,rt),xt=_e>>>1==1?Qt[Ze]:_t[Ze];if(Ce+=xt&15,xt>>>=4,(xt>>>8&255)===0)Be[ke++]=xt;else{if(xt==256)break;xt-=257;var Bt=xt<8?0:xt-4>>2;Bt>5&&(Bt=0);var Ot=ke+Ae[xt];Bt>0&&(Ot+=it(fe,Ce,Bt),Ce+=Bt),Ze=it(fe,Ce,He),xt=_e>>>1==1?Gt[Ze]:Yr[Ze],Ce+=xt&15,xt>>>=4;var St=xt<4?0:xt-2>>1,Rt=Se[xt];for(St>0&&(Rt+=it(fe,Ce,St),Ce+=St),!Ne&&qe<Ot&&(Be=jt(Be,Ot+100),qe=Be.length);ke<Ot;)Be[ke]=Be[ke-Rt],++ke}}}return Ne?[Be,Ce+7>>>3]:[Be.slice(0,ke),Ce+7>>>3]}function Mr(fe,Ne){var Ce=fe.slice(fe.l||0),_e=rs(Ce,Ne);return fe.l+=_e[1],_e[0]}function li(fe,Ne){if(fe)typeof console<"u"&&console.error(Ne);else throw new Error(Ne)}function Bn(fe,Ne){var Ce=fe;ni(Ce,0);var _e=[],Be=[],ke={FileIndex:_e,FullPaths:Be};E(ke,{root:Ne.root});for(var qe=Ce.length-4;(Ce[qe]!=80||Ce[qe+1]!=75||Ce[qe+2]!=5||Ce[qe+3]!=6)&&qe>=0;)--qe;Ce.l=qe+4,Ce.l+=4;var rt=Ce.read_shift(2);Ce.l+=6;var He=Ce.read_shift(4);for(Ce.l=He,qe=0;qe<rt;++qe){Ce.l+=20;var $e=Ce.read_shift(4),Ze=Ce.read_shift(4),xt=Ce.read_shift(2),Bt=Ce.read_shift(2),Ot=Ce.read_shift(2);Ce.l+=8;var St=Ce.read_shift(4),Rt=o(Ce.slice(Ce.l+xt,Ce.l+xt+Bt));Ce.l+=xt+Bt+Ot;var ur=Ce.l;Ce.l=St+4,ga(Ce,$e,Ze,ke,Rt),Ce.l=ur}return ke}function ga(fe,Ne,Ce,_e,Be){fe.l+=2;var ke=fe.read_shift(2),qe=fe.read_shift(2),rt=i(fe);if(ke&8257)throw new Error("Unsupported ZIP encryption");for(var He=fe.read_shift(4),$e=fe.read_shift(4),Ze=fe.read_shift(4),xt=fe.read_shift(2),Bt=fe.read_shift(2),Ot="",St=0;St<xt;++St)Ot+=String.fromCharCode(fe[fe.l++]);if(Bt){var Rt=o(fe.slice(fe.l,fe.l+Bt));(Rt[21589]||{}).mt&&(rt=Rt[21589].mt),((Be||{})[21589]||{}).mt&&(rt=Be[21589].mt)}fe.l+=Bt;var ur=fe.slice(fe.l,fe.l+$e);switch(qe){case 8:ur=K(fe,Ze);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+qe)}var Pr=!1;ke&8&&(He=fe.read_shift(4),He==134695760&&(He=fe.read_shift(4),Pr=!0),$e=fe.read_shift(4),Ze=fe.read_shift(4)),$e!=Ne&&li(Pr,"Bad compressed size: "+Ne+" != "+$e),Ze!=Ce&&li(Pr,"Bad uncompressed size: "+Ce+" != "+Ze),an(_e,Ot,ur,{unsafe:!0,mt:rt})}function Pa(fe,Ne){var Ce=Ne||{},_e=[],Be=[],ke=lt(1),qe=Ce.compression?8:0,rt=0,He=0,$e=0,Ze=0,xt=0,Bt=fe.FullPaths[0],Ot=Bt,St=fe.FileIndex[0],Rt=[],ur=0;for(He=1;He<fe.FullPaths.length;++He)if(Ot=fe.FullPaths[He].slice(Bt.length),St=fe.FileIndex[He],!(!St.size||!St.content||Ot=="Sh33tJ5")){var Pr=Ze,jr=lt(Ot.length);for($e=0;$e<Ot.length;++$e)jr.write_shift(1,Ot.charCodeAt($e)&127);jr=jr.slice(0,jr.l),Rt[xt]=gse.buf(St.content,0);var qr=St.content;qe==8&&(qr=Y(qr)),ke=lt(30),ke.write_shift(4,67324752),ke.write_shift(2,20),ke.write_shift(2,rt),ke.write_shift(2,qe),St.mt?s(ke,St.mt):ke.write_shift(4,0),ke.write_shift(-4,Rt[xt]),ke.write_shift(4,qr.length),ke.write_shift(4,St.content.length),ke.write_shift(2,jr.length),ke.write_shift(2,0),Ze+=ke.length,_e.push(ke),Ze+=jr.length,_e.push(jr),Ze+=qr.length,_e.push(qr),ke=lt(46),ke.write_shift(4,33639248),ke.write_shift(2,0),ke.write_shift(2,20),ke.write_shift(2,rt),ke.write_shift(2,qe),ke.write_shift(4,0),ke.write_shift(-4,Rt[xt]),ke.write_shift(4,qr.length),ke.write_shift(4,St.content.length),ke.write_shift(2,jr.length),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(4,0),ke.write_shift(4,Pr),ur+=ke.l,Be.push(ke),ur+=jr.length,Be.push(jr),++xt}return ke=lt(22),ke.write_shift(4,101010256),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(2,xt),ke.write_shift(2,xt),ke.write_shift(4,ur),ke.write_shift(4,Ze),ke.write_shift(2,0),Vs([Vs(_e),Vs(Be),ke])}var mn={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function ar(fe,Ne){if(fe.ctype)return fe.ctype;var Ce=fe.name||"",_e=Ce.match(/\.([^\.]+)$/);return _e&&mn[_e[1]]||Ne&&(_e=(Ce=Ne).match(/[\.\\]([^\.\\])+$/),_e&&mn[_e[1]])?mn[_e[1]]:"application/octet-stream"}function zr(fe){for(var Ne=xg(fe),Ce=[],_e=0;_e<Ne.length;_e+=76)Ce.push(Ne.slice(_e,_e+76));return Ce.join(`\r
`)+`\r
`}function Ns(fe){var Ne=fe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function($e){var Ze=$e.charCodeAt(0).toString(16).toUpperCase();return"="+(Ze.length==1?"0"+Ze:Ze)});Ne=Ne.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Ne.charAt(0)==`
`&&(Ne="=0D"+Ne.slice(1)),Ne=Ne.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Ce=[],_e=Ne.split(`\r
`),Be=0;Be<_e.length;++Be){var ke=_e[Be];if(ke.length==0){Ce.push("");continue}for(var qe=0;qe<ke.length;){var rt=76,He=ke.slice(qe,qe+rt);He.charAt(rt-1)=="="?rt--:He.charAt(rt-2)=="="?rt-=2:He.charAt(rt-3)=="="&&(rt-=3),He=ke.slice(qe,qe+rt),qe+=rt,qe<ke.length&&(He+="="),Ce.push(He)}}return Ce.join(`\r
`)}function Zn(fe){for(var Ne=[],Ce=0;Ce<fe.length;++Ce){for(var _e=fe[Ce];Ce<=fe.length&&_e.charAt(_e.length-1)=="=";)_e=_e.slice(0,_e.length-1)+fe[++Ce];Ne.push(_e)}for(var Be=0;Be<Ne.length;++Be)Ne[Be]=Ne[Be].replace(/[=][0-9A-Fa-f]{2}/g,function(ke){return String.fromCharCode(parseInt(ke.slice(1),16))});return Ko(Ne.join(`\r
`))}function ja(fe,Ne,Ce){for(var _e="",Be="",ke="",qe,rt=0;rt<10;++rt){var He=Ne[rt];if(!He||He.match(/^\s*$/))break;var $e=He.match(/^(.*?):\s*([^\s].*)$/);if($e)switch($e[1].toLowerCase()){case"content-location":_e=$e[2].trim();break;case"content-type":ke=$e[2].trim();break;case"content-transfer-encoding":Be=$e[2].trim();break}}switch(++rt,Be.toLowerCase()){case"base64":qe=Ko(Zo(Ne.slice(rt).join("")));break;case"quoted-printable":qe=Zn(Ne.slice(rt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Be)}var Ze=an(fe,_e.slice(Ce.length),qe,{unsafe:!0});ke&&(Ze.ctype=ke)}function zs(fe,Ne){if(J(fe.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Ce=Ne&&Ne.root||"",_e=(Vr&&Buffer.isBuffer(fe)?fe.toString("binary"):J(fe)).split(`\r
`),Be=0,ke="";for(Be=0;Be<_e.length;++Be)if(ke=_e[Be],!!/^Content-Location:/i.test(ke)&&(ke=ke.slice(ke.indexOf("file")),Ce||(Ce=ke.slice(0,ke.lastIndexOf("/")+1)),ke.slice(0,Ce.length)!=Ce))for(;Ce.length>0&&(Ce=Ce.slice(0,Ce.length-1),Ce=Ce.slice(0,Ce.lastIndexOf("/")+1),ke.slice(0,Ce.length)!=Ce););var qe=(_e[1]||"").match(/boundary="(.*?)"/);if(!qe)throw new Error("MAD cannot find boundary");var rt="--"+(qe[1]||""),He=[],$e=[],Ze={FileIndex:He,FullPaths:$e};E(Ze);var xt,Bt=0;for(Be=0;Be<_e.length;++Be){var Ot=_e[Be];Ot!==rt&&Ot!==rt+"--"||(Bt++&&ja(Ze,_e.slice(xt,Be),Ce),xt=Be)}return Ze}function Ht(fe,Ne){var Ce=Ne||{},_e=Ce.boundary||"SheetJS";_e="------="+_e;for(var Be=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+_e.slice(2)+'"',"","",""],ke=fe.FullPaths[0],qe=ke,rt=fe.FileIndex[0],He=1;He<fe.FullPaths.length;++He)if(qe=fe.FullPaths[He].slice(ke.length),rt=fe.FileIndex[He],!(!rt.size||!rt.content||qe=="Sh33tJ5")){qe=qe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(ur){return"_x"+ur.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(ur){return"_u"+ur.charCodeAt(0).toString(16)+"_"});for(var $e=rt.content,Ze=Vr&&Buffer.isBuffer($e)?$e.toString("binary"):J($e),xt=0,Bt=Math.min(1024,Ze.length),Ot=0,St=0;St<=Bt;++St)(Ot=Ze.charCodeAt(St))>=32&&Ot<128&&++xt;var Rt=xt>=Bt*4/5;Be.push(_e),Be.push("Content-Location: "+(Ce.root||"file:///C:/SheetJS/")+qe),Be.push("Content-Transfer-Encoding: "+(Rt?"quoted-printable":"base64")),Be.push("Content-Type: "+ar(rt,qe)),Be.push(""),Be.push(Rt?Ns(Ze):zr(Ze))}return Be.push(_e+`--\r
`),Be.join(`\r
`)}function pn(fe){var Ne={};return E(Ne,fe),Ne}function an(fe,Ne,Ce,_e){var Be=_e&&_e.unsafe;Be||E(fe);var ke=!Be&&or.find(fe,Ne);if(!ke){var qe=fe.FullPaths[0];Ne.slice(0,qe.length)==qe?qe=Ne:(qe.slice(-1)!="/"&&(qe+="/"),qe=(qe+Ne).replace("//","/")),ke={name:a(Ne),type:2},fe.FileIndex.push(ke),fe.FullPaths.push(qe),Be||or.utils.cfb_gc(fe)}return ke.content=Ce,ke.size=Ce?Ce.length:0,_e&&(_e.CLSID&&(ke.clsid=_e.CLSID),_e.mt&&(ke.mt=_e.mt),_e.ct&&(ke.ct=_e.ct)),ke}function Dn(fe,Ne){E(fe);var Ce=or.find(fe,Ne);if(Ce){for(var _e=0;_e<fe.FileIndex.length;++_e)if(fe.FileIndex[_e]==Ce)return fe.FileIndex.splice(_e,1),fe.FullPaths.splice(_e,1),!0}return!1}function Jn(fe,Ne,Ce){E(fe);var _e=or.find(fe,Ne);if(_e){for(var Be=0;Be<fe.FileIndex.length;++Be)if(fe.FileIndex[Be]==_e)return fe.FileIndex[Be].name=a(Ce),fe.FullPaths[Be]=Ce,!0}return!1}function ea(fe){B(fe,!0)}return e.find=R,e.read=U,e.parse=f,e.write=W,e.writeFile=q,e.utils={cfb_new:pn,cfb_add:an,cfb_del:Dn,cfb_mov:Jn,cfb_gc:ea,ReadShift:Gp,CheckField:HU,prep_blob:ni,bconcat:Vs,use_zlib:P,_deflateRaw:It,_inflateRaw:Mr,consts:ae},e}();function xse(t){return typeof t=="string"?xw(t):Array.isArray(t)?Gae(t):t}function tx(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=xw(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?cA(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var a=new Blob([xse(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,t);if(typeof saveAs<"u")return saveAs(a,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=t,i.href=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(t);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=tf(e)),o.write(e),o.close(),e}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+t)}function vse(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function Ma(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function zI(t,e){for(var r=[],n=Ma(t),a=0;a!==n.length;++a)r[t[n[a]][e]]==null&&(r[t[n[a]][e]]=n[a]);return r}function ww(t){for(var e=[],r=Ma(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function yw(t){for(var e=[],r=Ma(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function wse(t){for(var e=[],r=Ma(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var l2=new Date(1899,11,30,0,0,0);function Bs(t,e){var r=t.getTime(),n=l2.getTime()+(t.getTimezoneOffset()-l2.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var yU=new Date,yse=l2.getTime()+(yU.getTimezoneOffset()-l2.getTimezoneOffset())*6e4,qI=yU.getTimezoneOffset();function bw(t){var e=new Date;return e.setTime(t*24*60*60*1e3+yse),e.getTimezoneOffset()!==qI&&e.setTime(e.getTime()+(e.getTimezoneOffset()-qI)*6e4),e}function bse(t){var e=0,r=0,n=!1,a=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(a[s],10)}return e}var KI=new Date("2017-02-19T19:06:09.000Z"),bU=isNaN(KI.getFullYear())?new Date("2/19/17"):KI,Cse=bU.getFullYear()==2017;function ca(t,e){var r=new Date(t);if(Cse)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(bU.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function rh(t,e){if(Vr&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return cA(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return cA(cU(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return cA(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return cA(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=t.length;++a)n.push(String.fromCharCode(t[a]));return n.join("")}function Aa(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=Aa(t[r]));return e}function Ra(t,e){for(var r="";r.length<e;)r+=t;return r}function xc(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(e=Number(n)))?e/r:e}var Ese=["january","february","march","april","may","june","july","august","september","october","november","december"];function J0(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),a=e.getMonth(),s=e.getDate();if(isNaN(s))return r;var i=t.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&Ese.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var _se=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(t||typeof n=="string")return r.split(n);for(var s=r.split(n),i=[s[0]],o=1;o<s.length;++o)i.push(a),i.push(s[o]);return i}}();function CU(t){return t?t.content&&t.type?rh(t.content,!0):t.data?Cp(t.data):t.asNodeBuffer&&Vr?Cp(t.asNodeBuffer().toString("binary")):t.asBinary?Cp(t.asBinary()):t._data&&t._data.getContent?Cp(rh(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function EU(t){if(!t)return null;if(t.data)return LI(t.data);if(t.asNodeBuffer&&Vr)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?LI(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function Sse(t){return t&&t.name.slice(-4)===".bin"?EU(t):CU(t)}function Tl(t,e){for(var r=t.FullPaths||Ma(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var i=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||a==i)return t.files?t.files[r[s]]:t.FileIndex[s]}return null}function T5(t,e){var r=Tl(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function us(t,e,r){if(!r)return Sse(T5(t,e));if(!e)return null;try{return us(t,e)}catch{return null}}function Wo(t,e,r){if(!r)return CU(T5(t,e));if(!e)return null;try{return Wo(t,e)}catch{return null}}function Tse(t,e,r){return EU(T5(t,e))}function WI(t){for(var e=t.FullPaths||Ma(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function Lr(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return Vr?n=Eu(r):n=zae(r),or.utils.cfb_add(t,e,n)}or.utils.cfb_add(t,e,r)}else t.file(e,r)}function B5(){return or.utils.cfb_new()}function _U(t,e){switch(e.type){case"base64":return or.read(t,{type:"base64"});case"binary":return or.read(t,{type:"binary"});case"buffer":case"array":return or.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function _p(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var ts=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Bse=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,$I=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,Nse=/<[^>]*>/g,Qi=ts.match($I)?$I:Nse,kse=/<\w*:/,Ise=/<(\/?)\w+:/;function Er(t,e,r){for(var n={},a=0,s=0;a!==t.length&&!((s=t.charCodeAt(a))===32||s===10||s===13);++a);if(e||(n[0]=t.slice(0,a)),a===t.length)return n;var i=t.match(Bse),o=0,c="",u=0,f="",m="",p=1;if(i)for(u=0;u!=i.length;++u){for(m=i[u],s=0;s!=m.length&&m.charCodeAt(s)!==61;++s);for(f=m.slice(0,s).trim();m.charCodeAt(s+1)==32;)++s;for(p=(a=m.charCodeAt(s+1))==34||a==39?1:0,c=m.slice(s+1+p,m.length-p),o=0;o!=f.length&&f.charCodeAt(o)!==58;++o);if(o===f.length)f.indexOf("_")>0&&(f=f.slice(0,f.indexOf("_"))),n[f]=c,n[f.toLowerCase()]=c;else{var g=(o===5&&f.slice(0,5)==="xmlns"?"xmlns":"")+f.slice(o+1);if(n[g]&&f.slice(o-3,o)=="ext")continue;n[g]=c,n[g.toLowerCase()]=c}}return n}function bA(t){return t.replace(Ise,"<$1")}var SU={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},N5=ww(SU),xn=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(t,function(o,c){return SU[o]||String.fromCharCode(parseInt(c,o.indexOf("x")>-1?16:10))||o}).replace(e,function(o,c){return String.fromCharCode(parseInt(c,16))});var i=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,i)+r(a.slice(i+3))}}(),k5=/[&<>'"]/g,Fse=/[\u0000-\u0008\u000b-\u001f]/g;function Qn(t){var e=t+"";return e.replace(k5,function(r){return N5[r]}).replace(Fse,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function JI(t){return Qn(t).replace(/ /g,"_x0020_")}var TU=/[\u0000-\u001f]/g;function I5(t){var e=t+"";return e.replace(k5,function(r){return N5[r]}).replace(/\n/g,"<br/>").replace(TU,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function Dse(t){var e=t+"";return e.replace(k5,function(r){return N5[r]}).replace(TU,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var YI=function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}}();function Rse(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function oa(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Lb(t){for(var e="",r=0,n=0,a=0,s=0,i=0,o=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(a=t.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=a&63,e+=String.fromCharCode(i);continue}if(s=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}i=t.charCodeAt(r++),o=((n&7)<<18|(a&63)<<12|(s&63)<<6|i&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function XI(t){var e=Kd(2*t.length),r,n,a=1,s=0,i=0,o;for(n=0;n<t.length;n+=a)a=1,(o=t.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(n+1)&63),a=2):o<240?(r=(o&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),a=3):(a=4,r=(o&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(e[s++]=i&255,e[s++]=i>>>8,i=0),e[s++]=r%256,e[s++]=r>>>8;return e.slice(0,s).toString("ucs2")}function ZI(t){return Eu(t,"binary").toString("utf8")}var _1="foo bar bazâð£",Wn=Vr&&(ZI(_1)==Lb(_1)&&ZI||XI(_1)==Lb(_1)&&XI)||Lb,cA=Vr?function(t){return Eu(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,a=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(a>>18&7))),e.push(String.fromCharCode(144+(a>>12&63))),e.push(String.fromCharCode(128+(a>>6&63))),e.push(String.fromCharCode(128+(a&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},wg=function(){var t={};return function(r,n){var a=r+"|"+(n||"");return t[a]?t[a]:t[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),BU=function(){var t=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<t.length;++a)n=n.replace(t[a][0],t[a][1]);return n}}(),Lse=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),Use=/<\/?(?:vt:)?variant>/g,Mse=/<(?:vt:)([^>]*)>([\s\S]*)</;function e3(t,e){var r=Er(t),n=t.match(Lse(r.baseType))||[],a=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var i=s.replace(Use,"").match(Mse);i&&a.push({v:Wn(i[2]),t:i[1]})}),a}var NU=/(^\s|\s$|\n)/;function si(t,e){return"<"+t+(e.match(NU)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function yg(t){return Ma(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Ft(t,e,r){return"<"+t+(r!=null?yg(r):"")+(e!=null?(e.match(NU)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function wE(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function Pse(t,e){switch(typeof t){case"string":var r=Ft("vt:lpwstr",Qn(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Ft((t|0)==t?"vt:i4":"vt:r8",Qn(String(t)));case"boolean":return Ft("vt:bool",t?"true":"false")}if(t instanceof Date)return Ft("vt:filetime",wE(t));throw new Error("Unable to serialize "+t)}function F5(t){if(Vr&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return Wn(tf(E5(t)));throw new Error("Bad input format: expected Buffer or string")}var bg=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Ss={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},hh=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],zo={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function jse(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),a=t[e+6]&15,s=5;s>=0;--s)a=a*256+t[e+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function Ose(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,a=0,s=0,i=n?-e:e;isFinite(i)?i==0?a=s=0:(a=Math.floor(Math.log(i)/Math.LN2),s=i*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(e)?26985:0);for(var o=0;o<=5;++o,s/=256)t[r+o]=s&255;t[r+6]=(a&15)<<4|s&15,t[r+7]=a>>4|n}var t3=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var a=0,s=t[0][n].length;a<s;a+=r)e.push.apply(e,t[0][n].slice(a,a+r));return e},r3=Vr?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:Eu(e)})):t3(t)}:t3,n3=function(t,e,r){for(var n=[],a=e;a<r;a+=2)n.push(String.fromCharCode(ou(t,a)));return n.join("").replace(Yi,"")},D5=Vr?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(Yi,""):n3(t,e,r)}:n3,a3=function(t,e,r){for(var n=[],a=e;a<e+r;++a)n.push(("0"+t[a].toString(16)).slice(-2));return n.join("")},kU=Vr?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):a3(t,e,r)}:a3,s3=function(t,e,r){for(var n=[],a=e;a<r;a++)n.push(String.fromCharCode(g0(t,a)));return n.join("")},rx=Vr?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):s3(e,r,n)}:s3,IU=function(t,e){var r=qo(t,e);return r>0?rx(t,e+4,e+4+r-1):""},FU=IU,DU=function(t,e){var r=qo(t,e);return r>0?rx(t,e+4,e+4+r-1):""},RU=DU,LU=function(t,e){var r=2*qo(t,e);return r>0?rx(t,e+4,e+4+r-1):""},UU=LU,MU=function(e,r){var n=qo(e,r);return n>0?D5(e,r+4,r+4+n):""},PU=MU,jU=function(t,e){var r=qo(t,e);return r>0?rx(t,e+4,e+4+r):""},OU=jU,QU=function(t,e){return jse(t,e)},c2=QU,R5=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Vr&&(FU=function(e,r){if(!Buffer.isBuffer(e))return IU(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},RU=function(e,r){if(!Buffer.isBuffer(e))return DU(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},UU=function(e,r){if(!Buffer.isBuffer(e))return LU(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},PU=function(e,r){if(!Buffer.isBuffer(e))return MU(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},OU=function(e,r){if(!Buffer.isBuffer(e))return jU(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},c2=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):QU(e,r)},R5=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var g0=function(t,e){return t[e]},ou=function(t,e){return t[e+1]*256+t[e]},Qse=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},qo=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},Rf=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},Hse=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function Gp(t,e){var r="",n,a,s=[],i,o,c,u;switch(e){case"dbcs":if(u=this.l,Vr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(c=0;c<t;++c)r+=String.fromCharCode(ou(this,u)),u+=2;t*=2;break;case"utf8":r=rx(this,this.l,this.l+t);break;case"utf16le":t*=2,r=D5(this,this.l,this.l+t);break;case"wstr":return Gp.call(this,t,"dbcs");case"lpstr-ansi":r=FU(this,this.l),t=4+qo(this,this.l);break;case"lpstr-cp":r=RU(this,this.l),t=4+qo(this,this.l);break;case"lpwstr":r=UU(this,this.l),t=4+2*qo(this,this.l);break;case"lpp4":t=4+qo(this,this.l),r=PU(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+qo(this,this.l),r=OU(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(i=g0(this,this.l+t++))!==0;)s.push(E1(i));r=s.join("");break;case"_wstr":for(t=0,r="";(i=ou(this,this.l+t))!==0;)s.push(E1(i)),t+=2;t+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=g0(this,u),this.l=u+1,o=Gp.call(this,t-c,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(E1(ou(this,u))),u+=2}r=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=g0(this,u),this.l=u+1,o=Gp.call(this,t-c,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(E1(g0(this,u))),u+=1}r=s.join("");break;default:switch(t){case 1:return n=g0(this,this.l),this.l++,n;case 2:return n=(e==="i"?Qse:ou)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(n=(t>0?Rf:Hse)(this,this.l),this.l+=4,n):(a=qo(this,this.l),this.l+=4,a);case 8:case-8:if(e==="f")return t==8?a=c2(this,this.l):a=c2([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;t=8;case 16:r=kU(this,this.l,t);break}}return this.l+=t,r}var Vse=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},Gse=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},zse=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function qse(t,e,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=e.length;++a)zse(this,e.charCodeAt(a),this.l+2*a);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=e.length;++a)this[this.l+a]=e.charCodeAt(a)&255;n=e.length}else if(r==="hex"){for(;a<t;++a)this[this.l++]=parseInt(e.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+t,this.length);for(a=0;a<Math.min(e.length,t);++a){var i=e.charCodeAt(a);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,Vse(this,e,this.l);break;case 8:if(n=8,r==="f"){Ose(this,e,this.l);break}case 16:break;case-4:n=4,Gse(this,e,this.l);break}return this.l+=n,this}function HU(t,e){var r=kU(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function ni(t,e){t.l=e,t.read_shift=Gp,t.chk=HU,t.write_shift=qse}function ji(t,e){t.l+=e}function lt(t){var e=Kd(t);return ni(e,0),e}function _u(t,e,r){if(t){var n,a,s;ni(t,t.l||0);for(var i=t.length,o=0,c=0;t.l<i;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var u=Bg[o]||Bg[65535];for(n=t.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=t.read_shift(1))&127)<<7*a;c=t.l+s;var f=u.f&&u.f(t,s,r);if(t.l=c,e(f,u,o))return}}}function bo(){var t=[],e=Vr?256:2048,r=function(u){var f=lt(u);return ni(f,0),f},n=r(e),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,e)))},i=function(){return a(),Vs(t)},o=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(e)};return{next:s,push:o,end:i,_bufs:t}}function yt(t,e,r,n){var a=+e,s;if(!isNaN(a)){n||(n=Bg[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var i=t.next(s);a<=127?i.write_shift(1,a):(i.write_shift(1,(a&127)+128),i.write_shift(1,a>>7));for(var o=0;o!=4;++o)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&R5(r)&&t.push(r)}}function zp(t,e,r){var n=Aa(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function i3(t,e,r){var n=Aa(t);return n.s=zp(n.s,e.s,r),n.e=zp(n.e,e.s,r),n}function qp(t,e){if(t.cRel&&t.c<0)for(t=Aa(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=Aa(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=vr(t);return!t.cRel&&t.cRel!=null&&(r=$se(r)),!t.rRel&&t.rRel!=null&&(r=Kse(r)),r}function Ub(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Ca(t.s.c)+":"+(t.e.cRel?"":"$")+Ca(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+es(t.s.r)+":"+(t.e.rRel?"":"$")+es(t.e.r):qp(t.s,e.biff)+":"+qp(t.e,e.biff)}function L5(t){return parseInt(Wse(t),10)-1}function es(t){return""+(t+1)}function Kse(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Wse(t){return t.replace(/\$(\d+)$/,"$1")}function U5(t){for(var e=Jse(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function Ca(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function $se(t){return t.replace(/^([A-Z])/,"$$$1")}function Jse(t){return t.replace(/^\$([A-Z])/,"$1")}function Yse(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Ea(t){for(var e=0,r=0,n=0;n<t.length;++n){var a=t.charCodeAt(n);a>=48&&a<=57?e=10*e+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:e-1}}function vr(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function Eo(t){var e=t.indexOf(":");return e==-1?{s:Ea(t),e:Ea(t)}:{s:Ea(t.slice(0,e)),e:Ea(t.slice(e+1))}}function Fr(t,e){return typeof e>"u"||typeof e=="number"?Fr(t.s,t.e):(typeof t!="string"&&(t=vr(t)),typeof e!="string"&&(e=vr(e)),t==e?t:t+":"+e)}function vn(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=t.length;for(r=0;n<s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.s.c=--r,r=0;n<s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(e.s.r=--r,n===s||a!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.e.c=--r,r=0;n!=s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return e.e.r=--r,e}function o3(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=jl(t.z,r?Bs(e):e)}catch{}try{return t.w=jl((t.XF||{}).numFmtId||(r?14:0),r?Bs(e):e)}catch{return""+e}}function vu(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?Su[t.v]||t.v:e==null?o3(t,t.v):o3(t,e))}function rf(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function VU(t,e,r){var n=r||{},a=t?Array.isArray(t):n.dense,s=t||(a?[]:{}),i=0,o=0;if(s&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?Ea(n.origin):n.origin;i=c.r,o=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var f=vn(s["!ref"]);u.s.c=f.s.c,u.s.r=f.s.r,u.e.c=Math.max(u.e.c,f.e.c),u.e.r=Math.max(u.e.r,f.e.r),i==-1&&(u.e.r=i=f.e.r+1)}for(var m=0;m!=e.length;++m)if(e[m]){if(!Array.isArray(e[m]))throw new Error("aoa_to_sheet expects an array of arrays");for(var p=0;p!=e[m].length;++p)if(!(typeof e[m][p]>"u")){var g={v:e[m][p]},b=i+m,y=o+p;if(u.s.r>b&&(u.s.r=b),u.s.c>y&&(u.s.c=y),u.e.r<b&&(u.e.r=b),u.e.c<y&&(u.e.c=y),e[m][p]&&typeof e[m][p]=="object"&&!Array.isArray(e[m][p])&&!(e[m][p]instanceof Date))g=e[m][p];else if(Array.isArray(g.v)&&(g.f=e[m][p][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(n.nullError)g.t="e",g.v=0;else if(n.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=n.dateNF||pr[14],n.cellDates?(g.t="d",g.w=jl(g.z,Bs(g.v))):(g.t="n",g.v=Bs(g.v),g.w=jl(g.z,g.v))):g.t="s";if(a)s[b]||(s[b]=[]),s[b][y]&&s[b][y].z&&(g.z=s[b][y].z),s[b][y]=g;else{var T=vr({c:y,r:b});s[T]&&s[T].z&&(g.z=s[T].z),s[T]=g}}}return u.s.c<1e7&&(s["!ref"]=Fr(u)),s}function pm(t,e){return VU(null,t,e)}function Xse(t){return t.read_shift(4,"i")}function vc(t,e){return e||(e=lt(4)),e.write_shift(4,t),e}function Mi(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function Gs(t,e){var r=!1;return e==null&&(r=!0,e=lt(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function Zse(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function eie(t,e){return e||(e=lt(4)),e.write_shift(2,0),e.write_shift(2,0),e}function M5(t,e){var r=t.l,n=t.read_shift(1),a=Mi(t),s=[],i={t:a,h:a};if((n&1)!==0){for(var o=t.read_shift(4),c=0;c!=o;++c)s.push(Zse(t));i.r=s}else i.r=[{ich:0,ifnt:0}];return t.l=r+e,i}function tie(t,e){var r=!1;return e==null&&(r=!0,e=lt(15+4*t.t.length)),e.write_shift(1,0),Gs(t.t,e),r?e.slice(0,e.l):e}var rie=M5;function nie(t,e){var r=!1;return e==null&&(r=!0,e=lt(23+4*t.t.length)),e.write_shift(1,1),Gs(t.t,e),e.write_shift(4,1),eie({},e),r?e.slice(0,e.l):e}function Ol(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function mh(t,e){return e==null&&(e=lt(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function ph(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function gh(t,e){return e==null&&(e=lt(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var aie=Mi,GU=Gs;function P5(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function A2(t,e){var r=!1;return e==null&&(r=!0,e=lt(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var sie=Mi,yE=P5,j5=A2;function O5(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var a=n===0?c2([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Rf(e,0)>>2;return r?a/100:a}function zU(t,e){e==null&&(e=lt(4));var r=0,n=0,a=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?a:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function qU(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function iie(t,e){return e||(e=lt(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var xh=qU,gm=iie;function Li(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function nh(t,e){return(e||lt(8)).write_shift(8,t,"f")}function oie(t){var e={},r=t.read_shift(1),n=r>>>1,a=t.read_shift(1),s=t.read_shift(2,"i"),i=t.read_shift(1),o=t.read_shift(1),c=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=a;var u=Vf[a];u&&(e.rgb=Eg(u));break;case 2:e.rgb=Eg([i,o,c]);break;case 3:e.theme=a;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function u2(t,e){if(e||(e=lt(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function lie(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function cie(t,e){e||(e=lt(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}function KU(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function Aie(t){return KU(t,1)}function uie(t){return KU(t,2)}var Q5=2,go=3,S1=11,l3=12,d2=19,T1=64,die=65,fie=71,hie=4108,mie=4126,Qs=80,WU=81,pie=[Qs,WU],bE={1:{n:"CodePage",t:Q5},2:{n:"Category",t:Qs},3:{n:"PresentationFormat",t:Qs},4:{n:"ByteCount",t:go},5:{n:"LineCount",t:go},6:{n:"ParagraphCount",t:go},7:{n:"SlideCount",t:go},8:{n:"NoteCount",t:go},9:{n:"HiddenCount",t:go},10:{n:"MultimediaClipCount",t:go},11:{n:"ScaleCrop",t:S1},12:{n:"HeadingPairs",t:hie},13:{n:"TitlesOfParts",t:mie},14:{n:"Manager",t:Qs},15:{n:"Company",t:Qs},16:{n:"LinksUpToDate",t:S1},17:{n:"CharacterCount",t:go},19:{n:"SharedDoc",t:S1},22:{n:"HyperlinksChanged",t:S1},23:{n:"AppVersion",t:go,p:"version"},24:{n:"DigSig",t:die},26:{n:"ContentType",t:Qs},27:{n:"ContentStatus",t:Qs},28:{n:"Language",t:Qs},29:{n:"Version",t:Qs},255:{},2147483648:{n:"Locale",t:d2},2147483651:{n:"Behavior",t:d2},1919054434:{}},CE={1:{n:"CodePage",t:Q5},2:{n:"Title",t:Qs},3:{n:"Subject",t:Qs},4:{n:"Author",t:Qs},5:{n:"Keywords",t:Qs},6:{n:"Comments",t:Qs},7:{n:"Template",t:Qs},8:{n:"LastAuthor",t:Qs},9:{n:"RevNumber",t:Qs},10:{n:"EditTime",t:T1},11:{n:"LastPrinted",t:T1},12:{n:"CreatedDate",t:T1},13:{n:"ModifiedDate",t:T1},14:{n:"PageCount",t:go},15:{n:"WordCount",t:go},16:{n:"CharCount",t:go},17:{n:"Thumbnail",t:fie},18:{n:"Application",t:Qs},19:{n:"DocSecurity",t:go},255:{},2147483648:{n:"Locale",t:d2},2147483651:{n:"Behavior",t:d2},1919054434:{}},c3={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},gie=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function xie(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var vie=xie([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Vf=Aa(vie),Su={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},$U={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},EE={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},B1={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function H5(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function wie(t){var e=H5();if(!t||!t.match)return e;var r={};if((t.match(Qi)||[]).forEach(function(n){var a=Er(n);switch(a[0].replace(kse,"<")){case"<?xml":break;case"<Types":e.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":e[EE[a.ContentType]]!==void 0&&e[EE[a.ContentType]].push(a.PartName);break}}),e.xmlns!==Ss.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}function JU(t,e){var r=wse(EE),n=[],a;n[n.length]=ts,n[n.length]=Ft("Types",null,{xmlns:Ss.CT,"xmlns:xsd":Ss.xsd,"xmlns:xsi":Ss.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return Ft("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){t[c]&&t[c].length>0&&(a=t[c][0],n[n.length]=Ft("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:B1[c][e.bookType]||B1[c].xlsx}))},i=function(c){(t[c]||[]).forEach(function(u){n[n.length]=Ft("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:B1[c][e.bookType]||B1[c].xlsx})})},o=function(c){(t[c]||[]).forEach(function(u){n[n.length]=Ft("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return s("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Jr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Cg(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Kp(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(Qi)||[]).forEach(function(a){var s=Er(a);if(s[0]==="<Relationship"){var i={};i.Type=s.Type,i.Target=s.Target,i.Id=s.Id,s.TargetMode&&(i.TargetMode=s.TargetMode);var o=s.TargetMode==="External"?s.Target:_p(s.Target,e);r[o]=i,n[s.Id]=i}}),r["!id"]=n,r}function P0(t){var e=[ts,Ft("Relationships",null,{xmlns:Ss.RELS})];return Ma(t["!id"]).forEach(function(r){e[e.length]=Ft("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function jn(t,e,r,n,a,s){if(a||(a={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,a.Id="rId"+e,a.Type=n,a.Target=r,[Jr.HLINK,Jr.XPATH,Jr.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),t["!id"][a.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][a.Id]=a,t[("/"+a.Target).replace("//","/")]=a,e}var yie="application/vnd.oasis.opendocument.spreadsheet";function bie(t,e){for(var r=F5(t),n,a;n=bg.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=Er(n[0],!1),a.path=="/"&&a.type!==yie)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}function Cie(t){var e=[ts];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function A3(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function Eie(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function _ie(t){var e=[ts];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(A3(t[r][0],t[r][1])),e.push(Eie("",t[r][0]));return e.push(A3("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function YU(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+a2.version+"</meta:generator></office:meta></office:document-meta>"}var Ml=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],Sie=function(){for(var t=new Array(Ml.length),e=0;e<Ml.length;++e){var r=Ml[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t}();function XU(t){var e={};t=Wn(t);for(var r=0;r<Ml.length;++r){var n=Ml[r],a=t.match(Sie[r]);a!=null&&a.length>0&&(e[n[1]]=xn(a[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=ca(e[n[1]]))}return e}function Mb(t,e,r,n,a){a[t]!=null||e==null||e===""||(a[t]=e,e=Qn(e),n[n.length]=r?Ft(t,e,r):si(t,e))}function ZU(t,e){var r=e||{},n=[ts,Ft("cp:coreProperties",null,{"xmlns:cp":Ss.CORE_PROPS,"xmlns:dc":Ss.dc,"xmlns:dcterms":Ss.dcterms,"xmlns:dcmitype":Ss.dcmitype,"xmlns:xsi":Ss.xsi})],a={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&Mb("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:wE(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),t.ModifiedDate!=null&&Mb("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:wE(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=Ml.length;++s){var i=Ml[s],o=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:t?t[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&Mb(i[0],o,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Gf=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],e8=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function t8(t,e,r,n){var a=[];if(typeof t=="string")a=e3(t,n);else for(var s=0;s<t.length;++s)a=a.concat(t[s].map(function(f){return{v:f}}));var i=typeof e=="string"?e3(e,n).map(function(f){return f.v}):e,o=0,c=0;if(i.length>0)for(var u=0;u!==a.length;u+=2){switch(c=+a[u+1].v,a[u].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=i.slice(o,o+c);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":r.NamedRanges=c,r.DefinedNames=i.slice(o,o+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=i.slice(o,o+c);break}o+=c}}function Tie(t,e,r){var n={};return e||(e={}),t=Wn(t),Gf.forEach(function(a){var s=(t.match(wg(a[0]))||[])[1];switch(a[2]){case"string":s&&(e[a[1]]=xn(s));break;case"bool":e[a[1]]=s==="true";break;case"raw":var i=t.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));i&&i.length>0&&(n[a[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&t8(n.HeadingPairs,n.TitlesOfParts,e,r),e}function r8(t){var e=[],r=Ft;return t||(t={}),t.Application="SheetJS",e[e.length]=ts,e[e.length]=Ft("Properties",null,{xmlns:Ss.EXT_PROPS,"xmlns:vt":Ss.vt}),Gf.forEach(function(n){if(t[n[1]]!==void 0){var a;switch(n[2]){case"string":a=Qn(String(t[n[1]]));break;case"bool":a=t[n[1]]?"true":"false";break}a!==void 0&&(e[e.length]=r(n[0],a))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+Qn(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var Bie=/<[^>]+>[^<]*/g;function Nie(t,e){var r={},n="",a=t.match(Bie);if(a)for(var s=0;s!=a.length;++s){var i=a[s],o=Er(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=xn(o.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var c=i.split(">"),u=c[0].slice(4),f=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=xn(f);break;case"bool":r[n]=oa(f);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(f,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(f);break;case"filetime":case"date":r[n]=ca(f);break;case"cy":case"error":r[n]=xn(f);break;default:if(u.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,c)}}else if(i.slice(0,2)!=="</"){if(e.WTF)throw new Error(i)}}}return r}function n8(t){var e=[ts,Ft("Properties",null,{xmlns:Ss.CUST_PROPS,"xmlns:vt":Ss.vt})];if(!t)return e.join("");var r=1;return Ma(t).forEach(function(a){++r,e[e.length]=Ft("property",Pse(t[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Qn(a)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var _E={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},Pb;function kie(t,e,r){Pb||(Pb=ww(_E)),e=Pb[e]||e,t[e]=r}function Iie(t,e){var r=[];return Ma(_E).map(function(n){for(var a=0;a<Ml.length;++a)if(Ml[a][1]==n)return Ml[a];for(a=0;a<Gf.length;++a)if(Gf[a][1]==n)return Gf[a];throw n}).forEach(function(n){if(t[n[1]]!=null){var a=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(si(_E[n[1]]||n[1],a))}}),Ft("DocumentProperties",r.join(""),{xmlns:zo.o})}function Fie(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return t&&Ma(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var i=0;i<Ml.length;++i)if(s==Ml[i][1])return;for(i=0;i<Gf.length;++i)if(s==Gf[i][1])return;for(i=0;i<r.length;++i)if(s==r[i])return;var o=t[s],c="string";typeof o=="number"?(c="float",o=String(o)):o===!0||o===!1?(c="boolean",o=o?"1":"0"):o=String(o),a.push(Ft(JI(s),o,{"dt:dt":c}))}}),e&&Ma(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var i=e[s],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),a.push(Ft(JI(s),i,{"dt:dt":o}))}}),"<"+n+' xmlns="'+zo.o+'">'+a.join("")+"</"+n+">"}function V5(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function Die(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var i=lt(8);return i.write_shift(4,n),i.write_shift(4,a),i}function a8(t,e,r){var n=t.l,a=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return a}function s8(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function i8(t,e,r){return e===31?s8(t):a8(t,e,r)}function SE(t,e,r){return i8(t,e,r===!1?0:4)}function Rie(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return i8(t,e,0)}function Lie(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var a=t.l;r[n]=t.read_shift(0,"lpwstr").replace(Yi,""),t.l-a&2&&(t.l+=2)}return r}function Uie(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(Yi,"");return r}function Mie(t){var e=t.l,r=f2(t,WU);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=f2(t,go);return[r,n]}function Pie(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(Mie(t));return r}function u3(t,e){for(var r=t.read_shift(4),n={},a=0;a!=r;++a){var s=t.read_shift(4),i=t.read_shift(4);n[s]=t.read_shift(i,e===1200?"utf16le":"utf8").replace(Yi,"").replace(Ep,"!"),e===1200&&i%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function o8(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function jie(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function f2(t,e,r){var n=t.read_shift(2),a,s=r||{};if(t.l+=2,e!==l3&&n!==e&&pie.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===l3?n:e){case 2:return a=t.read_shift(2,"i"),s.raw||(t.l+=2),a;case 3:return a=t.read_shift(4,"i"),a;case 11:return t.read_shift(4)!==0;case 19:return a=t.read_shift(4),a;case 30:return a8(t,n,4).replace(Yi,"");case 31:return s8(t);case 64:return V5(t);case 65:return o8(t);case 71:return jie(t);case 80:return SE(t,n,!s.raw).replace(Yi,"");case 81:return Rie(t,n).replace(Yi,"");case 4108:return Pie(t);case 4126:case 4127:return n==4127?Lie(t):Uie(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function d3(t,e){var r=lt(4),n=lt(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=lt(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=Die(e);break;case 31:case 80:for(n=lt(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return Vs([r,n])}function f3(t,e){var r=t.l,n=t.read_shift(4),a=t.read_shift(4),s=[],i=0,o=0,c=-1,u={};for(i=0;i!=a;++i){var f=t.read_shift(4),m=t.read_shift(4);s[i]=[f,m+r]}s.sort(function(D,L){return D[1]-L[1]});var p={};for(i=0;i!=a;++i){if(t.l!==s[i][1]){var g=!0;if(i>0&&e)switch(e[s[i-1][0]].t){case 2:t.l+2===s[i][1]&&(t.l+=2,g=!1);break;case 80:t.l<=s[i][1]&&(t.l=s[i][1],g=!1);break;case 4108:t.l<=s[i][1]&&(t.l=s[i][1],g=!1);break}if((!e||i==0)&&t.l<=s[i][1]&&(g=!1,t.l=s[i][1]),g)throw new Error("Read Error: Expected address "+s[i][1]+" at "+t.l+" :"+i)}if(e){var b=e[s[i][0]];if(p[b.n]=f2(t,b.t,{raw:!0}),b.p==="version"&&(p[b.n]=String(p[b.n]>>16)+"."+("0000"+String(p[b.n]&65535)).slice(-4)),b.n=="CodePage")switch(p[b.n]){case 0:p[b.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:pc(o=p[b.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+p[b.n])}}else if(s[i][0]===1){if(o=p.CodePage=f2(t,Q5),pc(o),c!==-1){var y=t.l;t.l=s[c][1],u=u3(t,o),t.l=y}}else if(s[i][0]===0){if(o===0){c=i,t.l=s[i+1][1];continue}u=u3(t,o)}else{var T=u[s[i][0]],k;switch(t[t.l]){case 65:t.l+=4,k=o8(t);break;case 30:t.l+=4,k=SE(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,k=SE(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,k=t.read_shift(4,"i");break;case 19:t.l+=4,k=t.read_shift(4);break;case 5:t.l+=4,k=t.read_shift(8,"f");break;case 11:t.l+=4,k=Ka(t,4);break;case 64:t.l+=4,k=ca(V5(t));break;default:throw new Error("unparsed value: "+t[t.l])}p[T]=k}}return t.l=r+n,p}var l8=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Oie(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function h3(t,e,r){var n=lt(8),a=[],s=[],i=8,o=0,c=lt(8),u=lt(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),a.push(u),i+=8+c.length,!e){u=lt(8),u.write_shift(4,0),a.unshift(u);var f=[lt(4)];for(f[0].write_shift(4,t.length),o=0;o<t.length;++o){var m=t[o][0];for(c=lt(8+2*(m.length+1)+(m.length%2?0:2)),c.write_shift(4,o+2),c.write_shift(4,m.length+1),c.write_shift(0,m,"dbcs");c.l!=c.length;)c.write_shift(1,0);f.push(c)}c=Vs(f),s.unshift(c),i+=8+c.length}for(o=0;o<t.length;++o)if(!(e&&!e[t[o][0]])&&!(l8.indexOf(t[o][0])>-1||e8.indexOf(t[o][0])>-1)&&t[o][1]!=null){var p=t[o][1],g=0;if(e){g=+e[t[o][0]];var b=r[g];if(b.p=="version"&&typeof p=="string"){var y=p.split(".");p=(+y[0]<<16)+(+y[1]||0)}c=d3(b.t,p)}else{var T=Oie(p);T==-1&&(T=31,p=String(p)),c=d3(T,p)}s.push(c),u=lt(8),u.write_shift(4,e?g:2+o),a.push(u),i+=8+c.length}var k=8*(s.length+1);for(o=0;o<s.length;++o)a[o].write_shift(4,k),k+=s[o].length;return n.write_shift(4,i),n.write_shift(4,s.length),Vs([n].concat(a).concat(s))}function m3(t,e,r){var n=t.content;if(!n)return{};ni(n,0);var a,s,i,o,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),f=n.read_shift(16);if(f!==or.utils.consts.HEADER_CLSID&&f!==r)throw new Error("Bad PropertySet CLSID "+f);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),o=n.read_shift(4),a===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);a===2&&(i=n.read_shift(16),c=n.read_shift(4));var m=f3(n,e),p={SystemIdentifier:u};for(var g in m)p[g]=m[g];if(p.FMTID=s,a===1)return p;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var b;try{b=f3(n,null)}catch{}for(g in b)p[g]=b[g];return p.FMTID=[s,i],p}function p3(t,e,r,n,a,s){var i=lt(a?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,or.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,a?2:1),i.write_shift(16,e,"hex"),i.write_shift(4,a?68:48);var c=h3(t,r,n);if(o.push(c),a){var u=h3(a,null,null);i.write_shift(16,s,"hex"),i.write_shift(4,68+c.length),o.push(u)}return Vs(o)}function Ad(t,e){return t.read_shift(e),null}function Qie(t,e){e||(e=lt(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function Hie(t,e,r){for(var n=[],a=t.l+e;t.l<a;)n.push(r(t,a-t.l));if(a!==t.l)throw new Error("Slurp error");return n}function Ka(t,e){return t.read_shift(e)===1}function Wi(t,e){return e||(e=lt(2)),e.write_shift(2,+!!t),e}function ds(t){return t.read_shift(2,"u")}function Nl(t,e){return e||(e=lt(2)),e.write_shift(2,t),e}function c8(t,e){return Hie(t,e,ds)}function Vie(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function A8(t,e,r){return r||(r=lt(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function nx(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=t.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var i=n?t.read_shift(n,a):"";return i}function Gie(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,a=r&8,s=1+(r&1),i=0,o,c={};a&&(i=t.read_shift(2)),n&&(o=t.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",f=e===0?"":t.read_shift(e,u);return a&&(t.l+=4*i),n&&(t.l+=o),c.t=f,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function zie(t){var e=t.t||"",r=lt(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=lt(2*e.length);n.write_shift(2*e.length,e,"utf16le");var a=[r,n];return Vs(a)}function ah(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var a=t.read_shift(1);return a===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function ax(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):ah(t,n,r)}function vh(t,e,r){if(r.biff>5)return ax(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function u8(t,e,r){return r||(r=lt(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function qie(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function Kie(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var a=t.read_shift((n?e-24:e)>>1,"utf16le").replace(Yi,"");return n&&(t.l+=24),a}function Wie(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=t.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=t.read_shift(s>>1,"utf16le").replace(Yi,"");return r+i}function $ie(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return Kie(t);case"0303000000000000c000000000000046":return Wie(t);default:throw new Error("Unsupported Moniker "+r)}}function N1(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(Yi,""):"";return r}function g3(t,e){e||(e=lt(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function Jie(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=t.read_shift(2);t.l+=2;var s,i,o,c,u="",f,m;a&16&&(s=N1(t,r-t.l)),a&128&&(i=N1(t,r-t.l)),(a&257)===257&&(o=N1(t,r-t.l)),(a&257)===1&&(c=$ie(t,r-t.l)),a&8&&(u=N1(t,r-t.l)),a&32&&(f=t.read_shift(16)),a&64&&(m=V5(t)),t.l=r;var p=i||o||c||"";p&&u&&(p+="#"+u),p||(p="#"+u),a&2&&p.charAt(0)=="/"&&p.charAt(1)!="/"&&(p="file://"+p);var g={Target:p};return f&&(g.guid=f),m&&(g.time=m),s&&(g.Tooltip=s),g}function Yie(t){var e=lt(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)e.write_shift(4,i[r]);if(s==28)n=n.slice(1),g3(n,e);else if(s&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)e.write_shift(1,parseInt(i[r],16));var o=a>-1?n.slice(0,a):n;for(e.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)e.write_shift(2,o.charCodeAt(r));e.write_shift(2,0),s&8&&g3(a>-1?n.slice(a+1):"",e)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)e.write_shift(1,parseInt(i[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(e.write_shift(2,c),e.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)e.write_shift(1,n.charCodeAt(r+3*c)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function d8(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),a=t.read_shift(1);return[e,r,n,a]}function f8(t,e){var r=d8(t);return r[3]=0,r}function CA(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function sh(t,e,r,n){return n||(n=lt(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function Xie(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function Zie(t,e,r){return e===0?"":vh(t,e,r)}function eoe(t,e,r){var n=r.biff>8?4:2,a=t.read_shift(n),s=t.read_shift(n,"i"),i=t.read_shift(n,"i");return[a,s,i]}function h8(t){var e=t.read_shift(2),r=O5(t);return[e,r]}function toe(t,e,r){t.l+=4,e-=4;var n=t.l+e,a=nx(t,e,r),s=t.read_shift(2);if(n-=t.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return t.l+=s,a}function Cw(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2);return{s:{c:n,r:e},e:{c:a,r}}}function m8(t,e){return e||(e=lt(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function p8(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),a=t.read_shift(1);return{s:{c:n,r:e},e:{c:a,r}}}var roe=p8;function g8(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function noe(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function aoe(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function _i(t){t.l+=2,t.l+=t.read_shift(2)}var soe={0:_i,4:_i,5:_i,6:_i,7:aoe,8:_i,9:_i,10:_i,11:_i,12:_i,13:noe,14:_i,15:_i,16:_i,17:_i,18:_i,19:_i,20:_i,21:g8};function ioe(t,e){for(var r=t.l+e,n=[];t.l<r;){var a=t.read_shift(2);t.l-=2;try{n.push(soe[a](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function k1(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function G5(t,e,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=lt(a);return s.write_shift(2,n),s.write_shift(2,e),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function ooe(t,e){return e===0||t.read_shift(2),1200}function loe(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,a=vh(t,0,r);return t.read_shift(e+n-t.l),a}function coe(t,e){var r=!e||e.biff==8,n=lt(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function Aoe(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function uoe(t,e,r){var n=t.read_shift(4),a=t.read_shift(1)&3,s=t.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var i=nx(t,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:a,dt:s,name:i}}function doe(t,e){var r=!e||e.biff>=8?2:1,n=lt(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function foe(t,e){for(var r=t.l+e,n=t.read_shift(4),a=t.read_shift(4),s=[],i=0;i!=a&&t.l<r;++i)s.push(Gie(t));return s.Count=n,s.Unique=a,s}function hoe(t,e){var r=lt(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],a=0;a<t.length;++a)n[a]=zie(t[a]);var s=Vs([r].concat(n));return s.parts=[r.length].concat(n.map(function(i){return i.length})),s}function moe(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function poe(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function goe(t){var e=Xie(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function xoe(t){return t.read_shift(2),t.read_shift(4)}function x3(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var a=t.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function voe(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),o=t.read_shift(2),c=t.read_shift(2),u=t.read_shift(2);return{Pos:[e,r],Dim:[n,a],Flags:s,CurTab:i,FirstTab:o,Selected:c,TabRatio:u}}function woe(){var t=lt(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function yoe(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function boe(t){var e=lt(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function Coe(){}function Eoe(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=nx(t,0,r),n}function _oe(t,e){var r=t.name||"Arial",n=e&&e.biff==5,a=n?15+r.length:16+2*r.length,s=lt(a);return s.write_shift(2,t.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function Soe(t){var e=CA(t);return e.isst=t.read_shift(4),e}function Toe(t,e,r,n){var a=lt(10);return sh(t,e,n,a),a.write_shift(4,r),a}function Boe(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,a=CA(t);r.biff==2&&t.l++;var s=ax(t,n-t.l,r);return a.val=s,a}function Noe(t,e,r,n,a){var s=!a||a.biff==8,i=lt(8+ +s+(1+s)*r.length);return sh(t,e,n,i),i.write_shift(2,r.length),s&&i.write_shift(1,1),i.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),i}function koe(t,e,r){var n=t.read_shift(2),a=vh(t,0,r);return[n,a]}function Ioe(t,e,r,n){var a=r&&r.biff==5;n||(n=lt(a?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(a?1:2,e.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*e.length,e,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var Foe=vh;function v3(t,e,r){var n=t.l+e,a=r.biff==8||!r.biff?4:2,s=t.read_shift(a),i=t.read_shift(a),o=t.read_shift(2),c=t.read_shift(2);return t.l=n,{s:{r:s,c:o},e:{r:i,c}}}function Doe(t,e){var r=e.biff==8||!e.biff?4:2,n=lt(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function Roe(t){var e=t.read_shift(2),r=t.read_shift(2),n=h8(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function Loe(t,e){for(var r=t.l+e-2,n=t.read_shift(2),a=t.read_shift(2),s=[];t.l<r;)s.push(h8(t));if(t.l!==r)throw new Error("MulRK read error");var i=t.read_shift(2);if(s.length!=i-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:i,rkrec:s}}function Uoe(t,e){for(var r=t.l+e-2,n=t.read_shift(2),a=t.read_shift(2),s=[];t.l<r;)s.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var i=t.read_shift(2);if(s.length!=i-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:i,ixfe:s}}function Moe(t,e,r,n){var a={},s=t.read_shift(4),i=t.read_shift(4),o=t.read_shift(4),c=t.read_shift(2);return a.patternType=gie[o>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=i&15,a.dgRight=i>>4&15,a.dgTop=i>>8&15,a.dgBottom=i>>12&15,a.icvLeft=i>>16&127,a.icvRight=i>>23&127,a.grbitDiag=i>>30&3,a.icvTop=o&127,a.icvBottom=o>>7&127,a.icvDiag=o>>14&127,a.dgDiag=o>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function Poe(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=Moe(t,e,n.fStyle,r),n}function w3(t,e,r,n){var a=r&&r.biff==5;n||(n=lt(a?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function joe(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function Ooe(t){var e=lt(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function y3(t,e,r){var n=CA(t);(r.biff==2||e==9)&&++t.l;var a=Vie(t);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function Qoe(t,e,r,n,a,s){var i=lt(8);return sh(t,e,n,i),A8(r,s,i),i}function Hoe(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=CA(t),a=Li(t);return n.val=a,n}function Voe(t,e,r,n){var a=lt(14);return sh(t,e,n,a),nh(r,a),a}var b3=Zie;function Goe(t,e,r){var n=t.l+e,a=t.read_shift(2),s=t.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var i=ah(t,s),o=[];n>t.l;)o.push(ax(t));return[s,a,i,o]}function C3(t,e,r){var n=t.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=toe(t,e-2,r)),s.body=a||t.read_shift(e-2),typeof a=="string"&&(s.Name=a),s}var zoe=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function E3(t,e,r){var n=t.l+e,a=t.read_shift(2),s=t.read_shift(1),i=t.read_shift(1),o=t.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),c=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var u=ah(t,i,r);a&32&&(u=zoe[u.charCodeAt(0)]);var f=n-t.l;r&&r.biff==2&&--f;var m=n==t.l||o===0||!(f>0)?[]:ide(t,f,r,o);return{chKey:s,Name:u,itab:c,rgce:m}}function x8(t,e,r){if(r.biff<8)return qoe(t,e,r);for(var n=[],a=t.l+e,s=t.read_shift(r.biff>8?4:2);s--!==0;)n.push(eoe(t,r.biff>8?12:6,r));if(t.l!=a)throw new Error("Bad ExternSheet: "+t.l+" != "+a);return n}function qoe(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=nx(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function Koe(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),a=t.read_shift(2),s=ah(t,n,r),i=ah(t,a,r);return[s,i]}function Woe(t,e,r){var n=p8(t);t.l++;var a=t.read_shift(1);return e-=8,[ode(t,e,r),a,n]}function _3(t,e,r){var n=roe(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,ade(t,e,r)]}function $oe(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function Joe(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),o=vh(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:a},o,i,s]}}function Yoe(t,e,r){return Joe(t,e,r)}function Xoe(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(Cw(t));return r}function Zoe(t){var e=lt(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)m8(t[r],e);return e}function ele(t,e,r){if(r&&r.biff<8)return rle(t,e,r);var n=g8(t),a=ioe(t,e-22,n[1]);return{cmo:n,ft:a}}var tle={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var a=t.read_shift(1);return t.l+=a,t.l=r,{fmt:n}}};function rle(t,e,r){t.l+=4;var n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var i=[];return i.push((tle[n]||ji)(t,e,r)),{cmo:[a,n,s],ft:i}}function nle(t,e,r){var n=t.l,a="";try{t.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(s)==-1?t.l+=6:i=qie(t,6,r);var o=t.read_shift(2);t.read_shift(2),ds(t,2);var c=t.read_shift(2);t.l+=c;for(var u=1;u<t.lens.length-1;++u){if(t.l-n!=t.lens[u])throw new Error("TxO: bad continue record");var f=t[t.l],m=ah(t,t.lens[u+1]-t.lens[u]-1);if(a+=m,a.length>=(f?o:2*o))break}if(a.length!==o&&a.length!==o*2)throw new Error("cchText: "+o+" != "+a.length);return t.l=n+e,{t:a}}catch{return t.l=n+e,{t:a}}}function ale(t,e){var r=Cw(t);t.l+=16;var n=Jie(t,e-24);return[r,n]}function sle(t){var e=lt(24),r=Ea(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)e.write_shift(1,parseInt(n[a],16));return Vs([e,Yie(t[1])])}function ile(t,e){t.read_shift(2);var r=Cw(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(Yi,""),[r,n]}function ole(t){var e=t[1].Tooltip,r=lt(10+2*(e.length+1));r.write_shift(2,2048);var n=Ea(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<e.length;++a)r.write_shift(2,e.charCodeAt(a));return r.write_shift(2,0),r}function lle(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=c3[r]||r,r=t.read_shift(2),e[1]=c3[r]||r,e}function cle(t){return t||(t=lt(4)),t.write_shift(2,1),t.write_shift(2,1),t}function Ale(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(f8(t));return r}function ule(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(f8(t));return r}function dle(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function v8(t,e,r){if(!r.cellStyles)return ji(t,e);var n=r&&r.biff>=12?4:2,a=t.read_shift(n),s=t.read_shift(n),i=t.read_shift(n),o=t.read_shift(n),c=t.read_shift(2);n==2&&(t.l+=2);var u={s:a,e:s,w:i,ixfe:o,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function fle(t,e){var r=lt(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function hle(t,e){var r={};return e<32||(t.l+=16,r.header=Li(t),r.footer=Li(t),t.l+=2),r}function mle(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var a=t.read_shift(1);return t.l+=3,a&16&&(n.area=!0),n}function ple(t){for(var e=lt(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}var gle=CA,xle=c8,vle=ax;function wle(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,a}function yle(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=CA(t);++t.l;var a=vh(t,e-7,r);return n.t="str",n.val=a,n}function ble(t){var e=CA(t);++t.l;var r=Li(t);return e.t="n",e.val=r,e}function Cle(t,e,r){var n=lt(15);return lx(n,t,e),n.write_shift(8,r,"f"),n}function Ele(t){var e=CA(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function _le(t,e,r){var n=lt(9);return lx(n,t,e),n.write_shift(2,r),n}function Sle(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function Tle(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function Ble(t,e,r){var n=t.l+e,a=CA(t),s=t.read_shift(2),i=ah(t,s,r);return t.l=n,a.t="str",a.val=i,a}var Nle=[2,3,48,49,131,139,140,245],TE=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=ww({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,c){var u=[],f=Kd(1);switch(c.type){case"base64":f=Ko(Zo(o));break;case"binary":f=Ko(o);break;case"buffer":case"array":f=o;break}ni(f,0);var m=f.read_shift(1),p=!!(m&136),g=!1,b=!1;switch(m){case 2:break;case 3:break;case 48:g=!0,p=!0;break;case 49:g=!0,p=!0;break;case 131:break;case 139:break;case 140:b=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+m.toString(16))}var y=0,T=521;m==2&&(y=f.read_shift(2)),f.l+=3,m!=2&&(y=f.read_shift(4)),y>1048576&&(y=1e6),m!=2&&(T=f.read_shift(2));var k=f.read_shift(2),D=c.codepage||1252;m!=2&&(f.l+=16,f.read_shift(1),f[f.l]!==0&&(D=t[f[f.l]]),f.l+=1,f.l+=2),b&&(f.l+=36);for(var L=[],j={},H=Math.min(f.length,m==2?521:T-10-(g?264:0)),U=b?32:11;f.l<H&&f[f.l]!=13;)switch(j={},j.name=gg.utils.decode(D,f.slice(f.l,f.l+U)).replace(/[\u0000\r\n].*$/g,""),f.l+=U,j.type=String.fromCharCode(f.read_shift(1)),m!=2&&!b&&(j.offset=f.read_shift(4)),j.len=f.read_shift(1),m==2&&(j.offset=f.read_shift(2)),j.dec=f.read_shift(1),j.name.length&&L.push(j),m!=2&&(f.l+=b?13:14),j.type){case"B":(!g||j.len!=8)&&c.WTF&&console.log("Skipping "+j.name+":"+j.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+j.name+":"+j.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+j.type)}if(f[f.l]!==13&&(f.l=T-1),f.read_shift(1)!==13)throw new Error("DBF Terminator not found "+f.l+" "+f[f.l]);f.l=T;var E=0,_=0;for(u[0]=[],_=0;_!=L.length;++_)u[0][_]=L[_].name;for(;y-- >0;){if(f[f.l]===42){f.l+=k;continue}for(++f.l,u[++E]=[],_=0,_=0;_!=L.length;++_){var B=f.slice(f.l,f.l+L[_].len);f.l+=L[_].len,ni(B,0);var Q=gg.utils.decode(D,B);switch(L[_].type){case"C":Q.trim().length&&(u[E][_]=Q.replace(/\s+$/,""));break;case"D":Q.length===8?u[E][_]=new Date(+Q.slice(0,4),+Q.slice(4,6)-1,+Q.slice(6,8)):u[E][_]=Q;break;case"F":u[E][_]=parseFloat(Q.trim());break;case"+":case"I":u[E][_]=b?B.read_shift(-4,"i")^2147483648:B.read_shift(4,"i");break;case"L":switch(Q.trim().toUpperCase()){case"Y":case"T":u[E][_]=!0;break;case"N":case"F":u[E][_]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+Q+"|")}break;case"M":if(!p)throw new Error("DBF Unexpected MEMO for type "+m.toString(16));u[E][_]="##MEMO##"+(b?parseInt(Q.trim(),10):B.read_shift(4));break;case"N":Q=Q.replace(/\u0000/g,"").trim(),Q&&Q!="."&&(u[E][_]=+Q||0);break;case"@":u[E][_]=new Date(B.read_shift(-8,"f")-621356832e5);break;case"T":u[E][_]=new Date((B.read_shift(4)-2440588)*864e5+B.read_shift(4));break;case"Y":u[E][_]=B.read_shift(4,"i")/1e4+B.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[E][_]=-B.read_shift(-8,"f");break;case"B":if(g&&L[_].len==8){u[E][_]=B.read_shift(8,"f");break}case"G":case"P":B.l+=L[_].len;break;case"0":if(L[_].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+L[_].type)}}}if(m!=2&&f.l<f.length&&f[f.l++]!=26)throw new Error("DBF EOF Marker missing "+(f.l-1)+" of "+f.length+" "+f[f.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=L,u}function n(o,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var f=pm(r(o,u),u);return f["!cols"]=u.DBF.map(function(m){return{wch:m.len,DBF:m}}),delete u.DBF,f}function a(o,c){try{return rf(n(o,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,c){var u=c||{};if(+u.codepage>=0&&pc(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var f=bo(),m=p2(o,{header:1,raw:!0,cellDates:!0}),p=m[0],g=m.slice(1),b=o["!cols"]||[],y=0,T=0,k=0,D=1;for(y=0;y<p.length;++y){if(((b[y]||{}).DBF||{}).name){p[y]=b[y].DBF.name,++k;continue}if(p[y]!=null){if(++k,typeof p[y]=="number"&&(p[y]=p[y].toString(10)),typeof p[y]!="string")throw new Error("DBF Invalid column name "+p[y]+" |"+typeof p[y]+"|");if(p.indexOf(p[y])!==y){for(T=0;T<1024;++T)if(p.indexOf(p[y]+"_"+T)==-1){p[y]+="_"+T;break}}}}var L=vn(o["!ref"]),j=[],H=[],U=[];for(y=0;y<=L.e.c-L.s.c;++y){var E="",_="",B=0,Q=[];for(T=0;T<g.length;++T)g[T][y]!=null&&Q.push(g[T][y]);if(Q.length==0||p[y]==null){j[y]="?";continue}for(T=0;T<Q.length;++T){switch(typeof Q[T]){case"number":_="B";break;case"string":_="C";break;case"boolean":_="L";break;case"object":_=Q[T]instanceof Date?"D":"C";break;default:_="C"}B=Math.max(B,String(Q[T]).length),E=E&&E!=_?"C":_}B>250&&(B=250),_=((b[y]||{}).DBF||{}).type,_=="C"&&b[y].DBF.len>B&&(B=b[y].DBF.len),E=="B"&&_=="N"&&(E="N",U[y]=b[y].DBF.dec,B=b[y].DBF.len),H[y]=E=="C"||_=="N"?B:s[E]||0,D+=H[y],j[y]=E}var R=f.next(32);for(R.write_shift(4,318902576),R.write_shift(4,g.length),R.write_shift(2,296+32*k),R.write_shift(2,D),y=0;y<4;++y)R.write_shift(4,0);for(R.write_shift(4,0|(+e[lU]||3)<<8),y=0,T=0;y<p.length;++y)if(p[y]!=null){var F=f.next(32),V=(p[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);F.write_shift(1,V,"sbcs"),F.write_shift(1,j[y]=="?"?"C":j[y],"sbcs"),F.write_shift(4,T),F.write_shift(1,H[y]||s[j[y]]||0),F.write_shift(1,U[y]||0),F.write_shift(1,2),F.write_shift(4,0),F.write_shift(1,0),F.write_shift(4,0),F.write_shift(4,0),T+=H[y]||s[j[y]]||0}var X=f.next(264);for(X.write_shift(4,13),y=0;y<65;++y)X.write_shift(4,0);for(y=0;y<g.length;++y){var oe=f.next(D);for(oe.write_shift(1,0),T=0;T<p.length;++T)if(p[T]!=null)switch(j[T]){case"L":oe.write_shift(1,g[y][T]==null?63:g[y][T]?84:70);break;case"B":oe.write_shift(8,g[y][T]||0,"f");break;case"N":var te="0";for(typeof g[y][T]=="number"&&(te=g[y][T].toFixed(U[T]||0)),k=0;k<H[T]-te.length;++k)oe.write_shift(1,32);oe.write_shift(1,te,"sbcs");break;case"D":g[y][T]?(oe.write_shift(4,("0000"+g[y][T].getFullYear()).slice(-4),"sbcs"),oe.write_shift(2,("00"+(g[y][T].getMonth()+1)).slice(-2),"sbcs"),oe.write_shift(2,("00"+g[y][T].getDate()).slice(-2),"sbcs")):oe.write_shift(8,"00000000","sbcs");break;case"C":var ae=String(g[y][T]!=null?g[y][T]:"").slice(0,H[T]);for(oe.write_shift(1,ae,"sbcs"),k=0;k<H[T]-ae.length;++k)oe.write_shift(1,32);break}}return f.next(1).write_shift(1,26),f.end()}return{to_workbook:a,to_sheet:n,from_sheet:i}}(),w8=function(){var t={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Ma(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(p,g){var b=t[g];return typeof b=="number"?UI(b):b},n=function(p,g,b){var y=g.charCodeAt(0)-32<<4|b.charCodeAt(0)-48;return y==59?p:UI(y)};t["|"]=254;function a(p,g){switch(g.type){case"base64":return s(Zo(p),g);case"binary":return s(p,g);case"buffer":return s(Vr&&Buffer.isBuffer(p)?p.toString("binary"):tf(p),g);case"array":return s(rh(p),g)}throw new Error("Unrecognized type "+g.type)}function s(p,g){var b=p.split(/[\n\r]+/),y=-1,T=-1,k=0,D=0,L=[],j=[],H=null,U={},E=[],_=[],B=[],Q=0,R;for(+g.codepage>=0&&pc(+g.codepage);k!==b.length;++k){Q=0;var F=b[k].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),V=F.replace(/;;/g,"\0").split(";").map(function(ee){return ee.replace(/\u0000/g,";")}),X=V[0],oe;if(F.length>0)switch(X){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":V[1].charAt(0)=="P"&&j.push(F.slice(3).replace(/;;/g,";"));break;case"C":var te=!1,ae=!1,q=!1,J=!1,W=-1,de=-1;for(D=1;D<V.length;++D)switch(V[D].charAt(0)){case"A":break;case"X":T=parseInt(V[D].slice(1))-1,ae=!0;break;case"Y":for(y=parseInt(V[D].slice(1))-1,ae||(T=0),R=L.length;R<=y;++R)L[R]=[];break;case"K":oe=V[D].slice(1),oe.charAt(0)==='"'?oe=oe.slice(1,oe.length-1):oe==="TRUE"?oe=!0:oe==="FALSE"?oe=!1:isNaN(xc(oe))?isNaN(J0(oe).getDate())||(oe=ca(oe)):(oe=xc(oe),H!==null&&hm(H)&&(oe=bw(oe))),te=!0;break;case"E":J=!0;var P=j0(V[D].slice(1),{r:y,c:T});L[y][T]=[L[y][T],P];break;case"S":q=!0,L[y][T]=[L[y][T],"S5S"];break;case"G":break;case"R":W=parseInt(V[D].slice(1))-1;break;case"C":de=parseInt(V[D].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+F)}if(te&&(L[y][T]&&L[y][T].length==2?L[y][T][0]=oe:L[y][T]=oe,H=null),q){if(J)throw new Error("SYLK shared formula cannot have own formula");var K=W>-1&&L[W][de];if(!K||!K[1])throw new Error("SYLK shared formula cannot find base");L[y][T][1]=P8(K[1],{r:y-W,c:T-de})}break;case"F":var Y=0;for(D=1;D<V.length;++D)switch(V[D].charAt(0)){case"X":T=parseInt(V[D].slice(1))-1,++Y;break;case"Y":for(y=parseInt(V[D].slice(1))-1,R=L.length;R<=y;++R)L[R]=[];break;case"M":Q=parseInt(V[D].slice(1))/20;break;case"F":break;case"G":break;case"P":H=j[parseInt(V[D].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(B=V[D].slice(1).split(" "),R=parseInt(B[0],10);R<=parseInt(B[1],10);++R)Q=parseInt(B[2],10),_[R-1]=Q===0?{hidden:!0}:{wch:Q},Wd(_[R-1]);break;case"C":T=parseInt(V[D].slice(1))-1,_[T]||(_[T]={});break;case"R":y=parseInt(V[D].slice(1))-1,E[y]||(E[y]={}),Q>0?(E[y].hpt=Q,E[y].hpx=X0(Q)):Q===0&&(E[y].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+F)}Y<1&&(H=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+F)}}return E.length>0&&(U["!rows"]=E),_.length>0&&(U["!cols"]=_),g&&g.sheetRows&&(L=L.slice(0,g.sheetRows)),[L,U]}function i(p,g){var b=a(p,g),y=b[0],T=b[1],k=pm(y,g);return Ma(T).forEach(function(D){k[D]=T[D]}),k}function o(p,g){return rf(i(p,g),g)}function c(p,g,b,y){var T="C;Y"+(b+1)+";X"+(y+1)+";K";switch(p.t){case"n":T+=p.v||0,p.f&&!p.F&&(T+=";E"+J5(p.f,{r:b,c:y}));break;case"b":T+=p.v?"TRUE":"FALSE";break;case"e":T+=p.w||p.v;break;case"d":T+='"'+(p.w||p.v)+'"';break;case"s":T+='"'+p.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return T}function u(p,g){g.forEach(function(b,y){var T="F;W"+(y+1)+" "+(y+1)+" ";b.hidden?T+="0":(typeof b.width=="number"&&!b.wpx&&(b.wpx=_g(b.width)),typeof b.wpx=="number"&&!b.wch&&(b.wch=Sg(b.wpx)),typeof b.wch=="number"&&(T+=Math.round(b.wch))),T.charAt(T.length-1)!=" "&&p.push(T)})}function f(p,g){g.forEach(function(b,y){var T="F;";b.hidden?T+="M0;":b.hpt?T+="M"+20*b.hpt+";":b.hpx&&(T+="M"+20*Tg(b.hpx)+";"),T.length>2&&p.push(T+"R"+(y+1))})}function m(p,g){var b=["ID;PWXL;N;E"],y=[],T=vn(p["!ref"]),k,D=Array.isArray(p),L=`\r
`;b.push("P;PGeneral"),b.push("F;P0;DG0G8;M255"),p["!cols"]&&u(b,p["!cols"]),p["!rows"]&&f(b,p["!rows"]),b.push("B;Y"+(T.e.r-T.s.r+1)+";X"+(T.e.c-T.s.c+1)+";D"+[T.s.c,T.s.r,T.e.c,T.e.r].join(" "));for(var j=T.s.r;j<=T.e.r;++j)for(var H=T.s.c;H<=T.e.c;++H){var U=vr({r:j,c:H});k=D?(p[j]||[])[H]:p[U],!(!k||k.v==null&&(!k.f||k.F))&&y.push(c(k,p,j,H))}return b.join(L)+L+y.join(L)+L+"E"+L}return{to_workbook:o,to_sheet:i,from_sheet:m}}(),y8=function(){function t(s,i){switch(i.type){case"base64":return e(Zo(s),i);case"binary":return e(s,i);case"buffer":return e(Vr&&Buffer.isBuffer(s)?s.toString("binary"):tf(s),i);case"array":return e(rh(s),i)}throw new Error("Unrecognized type "+i.type)}function e(s,i){for(var o=s.split(`
`),c=-1,u=-1,f=0,m=[];f!==o.length;++f){if(o[f].trim()==="BOT"){m[++c]=[],u=0;continue}if(!(c<0)){var p=o[f].trim().split(","),g=p[0],b=p[1];++f;for(var y=o[f]||"";(y.match(/["]/g)||[]).length&1&&f<o.length-1;)y+=`
`+o[++f];switch(y=y.trim(),+g){case-1:if(y==="BOT"){m[++c]=[],u=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?m[c][u]=!0:y==="FALSE"?m[c][u]=!1:isNaN(xc(b))?isNaN(J0(b).getDate())?m[c][u]=b:m[c][u]=ca(b):m[c][u]=xc(b),++u;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),m[c][u++]=y!==""?y:null;break}if(y==="EOD")break}}return i&&i.sheetRows&&(m=m.slice(0,i.sheetRows)),m}function r(s,i){return pm(t(s,i),i)}function n(s,i){return rf(r(s,i),i)}var a=function(){var s=function(c,u,f,m,p){c.push(u),c.push(f+","+m),c.push('"'+p.replace(/"/g,'""')+'"')},i=function(c,u,f,m){c.push(u+","+f),c.push(u==1?'"'+m.replace(/"/g,'""')+'"':m)};return function(c){var u=[],f=vn(c["!ref"]),m,p=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,f.e.r-f.s.r+1,""),s(u,"TUPLES",0,f.e.c-f.s.c+1,""),s(u,"DATA",0,0,"");for(var g=f.s.r;g<=f.e.r;++g){i(u,-1,0,"BOT");for(var b=f.s.c;b<=f.e.c;++b){var y=vr({r:g,c:b});if(m=p?(c[g]||[])[b]:c[y],!m){i(u,1,0,"");continue}switch(m.t){case"n":var T=m.w;!T&&m.v!=null&&(T=m.v),T==null?m.f&&!m.F?i(u,1,0,"="+m.f):i(u,1,0,""):i(u,0,T,"V");break;case"b":i(u,0,m.v?1:0,m.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(m.v)?m.v:'="'+m.v+'"');break;case"d":m.w||(m.w=jl(m.z||pr[14],Bs(ca(m.v)))),i(u,0,m.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var k=`\r
`,D=u.join(k);return D}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),b8=function(){function t(m){return m.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(m){return m.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(m,p){for(var g=m.split(`
`),b=-1,y=-1,T=0,k=[];T!==g.length;++T){var D=g[T].trim().split(":");if(D[0]==="cell"){var L=Ea(D[1]);if(k.length<=L.r)for(b=k.length;b<=L.r;++b)k[b]||(k[b]=[]);switch(b=L.r,y=L.c,D[2]){case"t":k[b][y]=t(D[3]);break;case"v":k[b][y]=+D[3];break;case"vtf":var j=D[D.length-1];case"vtc":switch(D[3]){case"nl":k[b][y]=!!+D[4];break;default:k[b][y]=+D[4];break}D[2]=="vtf"&&(k[b][y]=[k[b][y],j])}}}return p&&p.sheetRows&&(k=k.slice(0,p.sheetRows)),k}function n(m,p){return pm(r(m,p),p)}function a(m,p){return rf(n(m,p),p)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(m){if(!m||!m["!ref"])return"";for(var p=[],g=[],b,y="",T=Eo(m["!ref"]),k=Array.isArray(m),D=T.s.r;D<=T.e.r;++D)for(var L=T.s.c;L<=T.e.c;++L)if(y=vr({r:D,c:L}),b=k?(m[D]||[])[L]:m[y],!(!b||b.v==null||b.t==="z")){switch(g=["cell",y,"t"],b.t){case"s":case"str":g.push(e(b.v));break;case"n":b.f?(g[2]="vtf",g[3]="n",g[4]=b.v,g[5]=e(b.f)):(g[2]="v",g[3]=b.v);break;case"b":g[2]="vt"+(b.f?"f":"c"),g[3]="nl",g[4]=b.v?"1":"0",g[5]=e(b.f||(b.v?"TRUE":"FALSE"));break;case"d":var j=Bs(ca(b.v));g[2]="vtc",g[3]="nd",g[4]=""+j,g[5]=b.w||jl(b.z||pr[14],j);break;case"e":continue}p.push(g.join(":"))}return p.push("sheet:c:"+(T.e.c-T.s.c+1)+":r:"+(T.e.r-T.s.r+1)+":tvf:1"),p.push("valueformat:1:text-wiki"),p.join(`
`)}function f(m){return[s,i,o,i,u(m),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:f}}(),Y0=function(){function t(f,m,p,g,b){b.raw?m[p][g]=f:f===""||(f==="TRUE"?m[p][g]=!0:f==="FALSE"?m[p][g]=!1:isNaN(xc(f))?isNaN(J0(f).getDate())?m[p][g]=f:m[p][g]=ca(f):m[p][g]=xc(f))}function e(f,m){var p=m||{},g=[];if(!f||f.length===0)return g;for(var b=f.split(/[\r\n]/),y=b.length-1;y>=0&&b[y].length===0;)--y;for(var T=10,k=0,D=0;D<=y;++D)k=b[D].indexOf(" "),k==-1?k=b[D].length:k++,T=Math.max(T,k);for(D=0;D<=y;++D){g[D]=[];var L=0;for(t(b[D].slice(0,T).trim(),g,D,L,p),L=1;L<=(b[D].length-T)/10+1;++L)t(b[D].slice(T+(L-1)*10,T+L*10).trim(),g,D,L,p)}return p.sheetRows&&(g=g.slice(0,p.sheetRows)),g}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(f){for(var m={},p=!1,g=0,b=0;g<f.length;++g)(b=f.charCodeAt(g))==34?p=!p:!p&&b in r&&(m[b]=(m[b]||0)+1);b=[];for(g in m)Object.prototype.hasOwnProperty.call(m,g)&&b.push([m[g],g]);if(!b.length){m=n;for(g in m)Object.prototype.hasOwnProperty.call(m,g)&&b.push([m[g],g])}return b.sort(function(y,T){return y[0]-T[0]||n[y[1]]-n[T[1]]}),r[b.pop()[1]]||44}function s(f,m){var p=m||{},g="",b=p.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};f.slice(0,4)=="sep="?f.charCodeAt(5)==13&&f.charCodeAt(6)==10?(g=f.charAt(4),f=f.slice(7)):f.charCodeAt(5)==13||f.charCodeAt(5)==10?(g=f.charAt(4),f=f.slice(6)):g=a(f.slice(0,1024)):p&&p.FS?g=p.FS:g=a(f.slice(0,1024));var T=0,k=0,D=0,L=0,j=0,H=g.charCodeAt(0),U=!1,E=0,_=f.charCodeAt(0);f=f.replace(/\r\n/mg,`
`);var B=p.dateNF!=null?mse(p.dateNF):null;function Q(){var R=f.slice(L,j),F={};if(R.charAt(0)=='"'&&R.charAt(R.length-1)=='"'&&(R=R.slice(1,-1).replace(/""/g,'"')),R.length===0)F.t="z";else if(p.raw)F.t="s",F.v=R;else if(R.trim().length===0)F.t="s",F.v=R;else if(R.charCodeAt(0)==61)R.charCodeAt(1)==34&&R.charCodeAt(R.length-1)==34?(F.t="s",F.v=R.slice(2,-1).replace(/""/g,'"')):GAe(R)?(F.t="n",F.f=R.slice(1)):(F.t="s",F.v=R);else if(R=="TRUE")F.t="b",F.v=!0;else if(R=="FALSE")F.t="b",F.v=!1;else if(!isNaN(D=xc(R)))F.t="n",p.cellText!==!1&&(F.w=R),F.v=D;else if(!isNaN(J0(R).getDate())||B&&R.match(B)){F.z=p.dateNF||pr[14];var V=0;B&&R.match(B)&&(R=pse(R,p.dateNF,R.match(B)||[]),V=1),p.cellDates?(F.t="d",F.v=ca(R,V)):(F.t="n",F.v=Bs(ca(R,V))),p.cellText!==!1&&(F.w=jl(F.z,F.v instanceof Date?Bs(F.v):F.v)),p.cellNF||delete F.z}else F.t="s",F.v=R;if(F.t=="z"||(p.dense?(b[T]||(b[T]=[]),b[T][k]=F):b[vr({c:k,r:T})]=F),L=j+1,_=f.charCodeAt(L),y.e.c<k&&(y.e.c=k),y.e.r<T&&(y.e.r=T),E==H)++k;else if(k=0,++T,p.sheetRows&&p.sheetRows<=T)return!0}e:for(;j<f.length;++j)switch(E=f.charCodeAt(j)){case 34:_===34&&(U=!U);break;case H:case 10:case 13:if(!U&&Q())break e;break}return j-L>0&&Q(),b["!ref"]=Fr(y),b}function i(f,m){return!(m&&m.PRN)||m.FS||f.slice(0,4)=="sep="||f.indexOf("	")>=0||f.indexOf(",")>=0||f.indexOf(";")>=0?s(f,m):pm(e(f,m),m)}function o(f,m){var p="",g=m.type=="string"?[0,0,0,0]:aS(f,m);switch(m.type){case"base64":p=Zo(f);break;case"binary":p=f;break;case"buffer":m.codepage==65001?p=f.toString("utf8"):m.codepage&&typeof gg<"u"||(p=Vr&&Buffer.isBuffer(f)?f.toString("binary"):tf(f));break;case"array":p=rh(f);break;case"string":p=f;break;default:throw new Error("Unrecognized type "+m.type)}return g[0]==239&&g[1]==187&&g[2]==191?p=Wn(p.slice(3)):m.type!="string"&&m.type!="buffer"&&m.codepage==65001?p=Wn(p):m.type=="binary"&&typeof gg<"u",p.slice(0,19)=="socialcalc:version:"?b8.to_sheet(m.type=="string"?p:Wn(p),m):i(p,m)}function c(f,m){return rf(o(f,m),m)}function u(f){for(var m=[],p=vn(f["!ref"]),g,b=Array.isArray(f),y=p.s.r;y<=p.e.r;++y){for(var T=[],k=p.s.c;k<=p.e.c;++k){var D=vr({r:y,c:k});if(g=b?(f[y]||[])[k]:f[D],!g||g.v==null){T.push("          ");continue}for(var L=(g.w||(vu(g),g.w)||"").slice(0,10);L.length<10;)L+=" ";T.push(L+(k===0?" ":""))}m.push(T.join(""))}return m.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:u}}();function kle(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var a=w8.to_workbook(t,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return Y0.to_workbook(t,e)}}var zf=function(){function t(P,K,Y){if(P){ni(P,P.l||0);for(var ee=Y.Enum||W;P.l<P.length;){var Ae=P.read_shift(2),Se=ee[Ae]||ee[65535],ge=P.read_shift(2),pe=P.l+ge,ye=Se.f&&Se.f(P,ge,Y);if(P.l=pe,K(ye,Se,Ae))return}}}function e(P,K){switch(K.type){case"base64":return r(Ko(Zo(P)),K);case"binary":return r(Ko(P),K);case"buffer":case"array":return r(P,K)}throw"Unsupported type "+K.type}function r(P,K){if(!P)return P;var Y=K||{},ee=Y.dense?[]:{},Ae="Sheet1",Se="",ge=0,pe={},ye=[],ue=[],se={s:{r:0,c:0},e:{r:0,c:0}},Pe=Y.sheetRows||0;if(P[2]==0&&(P[3]==8||P[3]==9)&&P.length>=16&&P[14]==5&&P[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(P[2]==2)Y.Enum=W,t(P,function(Le,it,et){switch(et){case 0:Y.vers=Le,Le>=4096&&(Y.qpro=!0);break;case 6:se=Le;break;case 204:Le&&(Se=Le);break;case 222:Se=Le;break;case 15:case 51:Y.qpro||(Le[1].v=Le[1].v.slice(1));case 13:case 14:case 16:et==14&&(Le[2]&112)==112&&(Le[2]&15)>1&&(Le[2]&15)<15&&(Le[1].z=Y.dateNF||pr[14],Y.cellDates&&(Le[1].t="d",Le[1].v=bw(Le[1].v))),Y.qpro&&Le[3]>ge&&(ee["!ref"]=Fr(se),pe[Ae]=ee,ye.push(Ae),ee=Y.dense?[]:{},se={s:{r:0,c:0},e:{r:0,c:0}},ge=Le[3],Ae=Se||"Sheet"+(ge+1),Se="");var ht=Y.dense?(ee[Le[0].r]||[])[Le[0].c]:ee[vr(Le[0])];if(ht){ht.t=Le[1].t,ht.v=Le[1].v,Le[1].z!=null&&(ht.z=Le[1].z),Le[1].f!=null&&(ht.f=Le[1].f);break}Y.dense?(ee[Le[0].r]||(ee[Le[0].r]=[]),ee[Le[0].r][Le[0].c]=Le[1]):ee[vr(Le[0])]=Le[1];break}},Y);else if(P[2]==26||P[2]==14)Y.Enum=de,P[2]==14&&(Y.qpro=!0,P.l=0),t(P,function(Le,it,et){switch(et){case 204:Ae=Le;break;case 22:Le[1].v=Le[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Le[3]>ge&&(ee["!ref"]=Fr(se),pe[Ae]=ee,ye.push(Ae),ee=Y.dense?[]:{},se={s:{r:0,c:0},e:{r:0,c:0}},ge=Le[3],Ae="Sheet"+(ge+1)),Pe>0&&Le[0].r>=Pe)break;Y.dense?(ee[Le[0].r]||(ee[Le[0].r]=[]),ee[Le[0].r][Le[0].c]=Le[1]):ee[vr(Le[0])]=Le[1],se.e.c<Le[0].c&&(se.e.c=Le[0].c),se.e.r<Le[0].r&&(se.e.r=Le[0].r);break;case 27:Le[14e3]&&(ue[Le[14e3][0]]=Le[14e3][1]);break;case 1537:ue[Le[0]]=Le[1],Le[0]==ge&&(Ae=Le[1]);break}},Y);else throw new Error("Unrecognized LOTUS BOF "+P[2]);if(ee["!ref"]=Fr(se),pe[Se||Ae]=ee,ye.push(Se||Ae),!ue.length)return{SheetNames:ye,Sheets:pe};for(var at={},De=[],Ee=0;Ee<ue.length;++Ee)pe[ye[Ee]]?(De.push(ue[Ee]||ye[Ee]),at[ue[Ee]]=pe[ue[Ee]]||pe[ye[Ee]]):(De.push(ue[Ee]),at[ue[Ee]]={"!ref":"A1"});return{SheetNames:De,Sheets:at}}function n(P,K){var Y=K||{};if(+Y.codepage>=0&&pc(+Y.codepage),Y.type=="string")throw new Error("Cannot write WK1 to JS string");var ee=bo(),Ae=vn(P["!ref"]),Se=Array.isArray(P),ge=[];Dt(ee,0,s(1030)),Dt(ee,6,c(Ae));for(var pe=Math.min(Ae.e.r,8191),ye=Ae.s.r;ye<=pe;++ye)for(var ue=es(ye),se=Ae.s.c;se<=Ae.e.c;++se){ye===Ae.s.r&&(ge[se]=Ca(se));var Pe=ge[se]+ue,at=Se?(P[ye]||[])[se]:P[Pe];if(!(!at||at.t=="z"))if(at.t=="n")(at.v|0)==at.v&&at.v>=-32768&&at.v<=32767?Dt(ee,13,g(ye,se,at.v)):Dt(ee,14,y(ye,se,at.v));else{var De=vu(at);Dt(ee,15,m(ye,se,De.slice(0,239)))}}return Dt(ee,1),ee.end()}function a(P,K){var Y=K||{};if(+Y.codepage>=0&&pc(+Y.codepage),Y.type=="string")throw new Error("Cannot write WK3 to JS string");var ee=bo();Dt(ee,0,i(P));for(var Ae=0,Se=0;Ae<P.SheetNames.length;++Ae)(P.Sheets[P.SheetNames[Ae]]||{})["!ref"]&&Dt(ee,27,J(P.SheetNames[Ae],Se++));var ge=0;for(Ae=0;Ae<P.SheetNames.length;++Ae){var pe=P.Sheets[P.SheetNames[Ae]];if(!(!pe||!pe["!ref"])){for(var ye=vn(pe["!ref"]),ue=Array.isArray(pe),se=[],Pe=Math.min(ye.e.r,8191),at=ye.s.r;at<=Pe;++at)for(var De=es(at),Ee=ye.s.c;Ee<=ye.e.c;++Ee){at===ye.s.r&&(se[Ee]=Ca(Ee));var Le=se[Ee]+De,it=ue?(pe[at]||[])[Ee]:pe[Le];if(!(!it||it.t=="z"))if(it.t=="n")Dt(ee,23,Q(at,Ee,ge,it.v));else{var et=vu(it);Dt(ee,22,E(at,Ee,ge,et.slice(0,239)))}}++ge}}return Dt(ee,1),ee.end()}function s(P){var K=lt(2);return K.write_shift(2,P),K}function i(P){var K=lt(26);K.write_shift(2,4096),K.write_shift(2,4),K.write_shift(4,0);for(var Y=0,ee=0,Ae=0,Se=0;Se<P.SheetNames.length;++Se){var ge=P.SheetNames[Se],pe=P.Sheets[ge];if(!(!pe||!pe["!ref"])){++Ae;var ye=Eo(pe["!ref"]);Y<ye.e.r&&(Y=ye.e.r),ee<ye.e.c&&(ee=ye.e.c)}}return Y>8191&&(Y=8191),K.write_shift(2,Y),K.write_shift(1,Ae),K.write_shift(1,ee),K.write_shift(2,0),K.write_shift(2,0),K.write_shift(1,1),K.write_shift(1,2),K.write_shift(4,0),K.write_shift(4,0),K}function o(P,K,Y){var ee={s:{c:0,r:0},e:{c:0,r:0}};return K==8&&Y.qpro?(ee.s.c=P.read_shift(1),P.l++,ee.s.r=P.read_shift(2),ee.e.c=P.read_shift(1),P.l++,ee.e.r=P.read_shift(2),ee):(ee.s.c=P.read_shift(2),ee.s.r=P.read_shift(2),K==12&&Y.qpro&&(P.l+=2),ee.e.c=P.read_shift(2),ee.e.r=P.read_shift(2),K==12&&Y.qpro&&(P.l+=2),ee.s.c==65535&&(ee.s.c=ee.e.c=ee.s.r=ee.e.r=0),ee)}function c(P){var K=lt(8);return K.write_shift(2,P.s.c),K.write_shift(2,P.s.r),K.write_shift(2,P.e.c),K.write_shift(2,P.e.r),K}function u(P,K,Y){var ee=[{c:0,r:0},{t:"n",v:0},0,0];return Y.qpro&&Y.vers!=20768?(ee[0].c=P.read_shift(1),ee[3]=P.read_shift(1),ee[0].r=P.read_shift(2),P.l+=2):(ee[2]=P.read_shift(1),ee[0].c=P.read_shift(2),ee[0].r=P.read_shift(2)),ee}function f(P,K,Y){var ee=P.l+K,Ae=u(P,K,Y);if(Ae[1].t="s",Y.vers==20768){P.l++;var Se=P.read_shift(1);return Ae[1].v=P.read_shift(Se,"utf8"),Ae}return Y.qpro&&P.l++,Ae[1].v=P.read_shift(ee-P.l,"cstr"),Ae}function m(P,K,Y){var ee=lt(7+Y.length);ee.write_shift(1,255),ee.write_shift(2,K),ee.write_shift(2,P),ee.write_shift(1,39);for(var Ae=0;Ae<ee.length;++Ae){var Se=Y.charCodeAt(Ae);ee.write_shift(1,Se>=128?95:Se)}return ee.write_shift(1,0),ee}function p(P,K,Y){var ee=u(P,K,Y);return ee[1].v=P.read_shift(2,"i"),ee}function g(P,K,Y){var ee=lt(7);return ee.write_shift(1,255),ee.write_shift(2,K),ee.write_shift(2,P),ee.write_shift(2,Y,"i"),ee}function b(P,K,Y){var ee=u(P,K,Y);return ee[1].v=P.read_shift(8,"f"),ee}function y(P,K,Y){var ee=lt(13);return ee.write_shift(1,255),ee.write_shift(2,K),ee.write_shift(2,P),ee.write_shift(8,Y,"f"),ee}function T(P,K,Y){var ee=P.l+K,Ae=u(P,K,Y);if(Ae[1].v=P.read_shift(8,"f"),Y.qpro)P.l=ee;else{var Se=P.read_shift(2);j(P.slice(P.l,P.l+Se),Ae),P.l+=Se}return Ae}function k(P,K,Y){var ee=K&32768;return K&=-32769,K=(ee?P:0)+(K>=8192?K-16384:K),(ee?"":"$")+(Y?Ca(K):es(K))}var D={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},L=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function j(P,K){ni(P,0);for(var Y=[],ee=0,Ae="",Se="",ge="",pe="";P.l<P.length;){var ye=P[P.l++];switch(ye){case 0:Y.push(P.read_shift(8,"f"));break;case 1:Se=k(K[0].c,P.read_shift(2),!0),Ae=k(K[0].r,P.read_shift(2),!1),Y.push(Se+Ae);break;case 2:{var ue=k(K[0].c,P.read_shift(2),!0),se=k(K[0].r,P.read_shift(2),!1);Se=k(K[0].c,P.read_shift(2),!0),Ae=k(K[0].r,P.read_shift(2),!1),Y.push(ue+se+":"+Se+Ae)}break;case 3:if(P.l<P.length){console.error("WK1 premature formula end");return}break;case 4:Y.push("("+Y.pop()+")");break;case 5:Y.push(P.read_shift(2));break;case 6:{for(var Pe="";ye=P[P.l++];)Pe+=String.fromCharCode(ye);Y.push('"'+Pe.replace(/"/g,'""')+'"')}break;case 8:Y.push("-"+Y.pop());break;case 23:Y.push("+"+Y.pop());break;case 22:Y.push("NOT("+Y.pop()+")");break;case 20:case 21:pe=Y.pop(),ge=Y.pop(),Y.push(["AND","OR"][ye-20]+"("+ge+","+pe+")");break;default:if(ye<32&&L[ye])pe=Y.pop(),ge=Y.pop(),Y.push(ge+L[ye]+pe);else if(D[ye]){if(ee=D[ye][1],ee==69&&(ee=P[P.l++]),ee>Y.length){console.error("WK1 bad formula parse 0x"+ye.toString(16)+":|"+Y.join("|")+"|");return}var at=Y.slice(-ee);Y.length-=ee,Y.push(D[ye][0]+"("+at.join(",")+")")}else return ye<=7?console.error("WK1 invalid opcode "+ye.toString(16)):ye<=24?console.error("WK1 unsupported op "+ye.toString(16)):ye<=30?console.error("WK1 invalid opcode "+ye.toString(16)):ye<=115?console.error("WK1 unsupported function opcode "+ye.toString(16)):console.error("WK1 unrecognized opcode "+ye.toString(16))}}Y.length==1?K[1].f=""+Y[0]:console.error("WK1 bad formula parse |"+Y.join("|")+"|")}function H(P){var K=[{c:0,r:0},{t:"n",v:0},0];return K[0].r=P.read_shift(2),K[3]=P[P.l++],K[0].c=P[P.l++],K}function U(P,K){var Y=H(P);return Y[1].t="s",Y[1].v=P.read_shift(K-4,"cstr"),Y}function E(P,K,Y,ee){var Ae=lt(6+ee.length);Ae.write_shift(2,P),Ae.write_shift(1,Y),Ae.write_shift(1,K),Ae.write_shift(1,39);for(var Se=0;Se<ee.length;++Se){var ge=ee.charCodeAt(Se);Ae.write_shift(1,ge>=128?95:ge)}return Ae.write_shift(1,0),Ae}function _(P,K){var Y=H(P);Y[1].v=P.read_shift(2);var ee=Y[1].v>>1;if(Y[1].v&1)switch(ee&7){case 0:ee=(ee>>3)*5e3;break;case 1:ee=(ee>>3)*500;break;case 2:ee=(ee>>3)/20;break;case 3:ee=(ee>>3)/200;break;case 4:ee=(ee>>3)/2e3;break;case 5:ee=(ee>>3)/2e4;break;case 6:ee=(ee>>3)/16;break;case 7:ee=(ee>>3)/64;break}return Y[1].v=ee,Y}function B(P,K){var Y=H(P),ee=P.read_shift(4),Ae=P.read_shift(4),Se=P.read_shift(2);if(Se==65535)return ee===0&&Ae===3221225472?(Y[1].t="e",Y[1].v=15):ee===0&&Ae===3489660928?(Y[1].t="e",Y[1].v=42):Y[1].v=0,Y;var ge=Se&32768;return Se=(Se&32767)-16446,Y[1].v=(1-ge*2)*(Ae*Math.pow(2,Se+32)+ee*Math.pow(2,Se)),Y}function Q(P,K,Y,ee){var Ae=lt(14);if(Ae.write_shift(2,P),Ae.write_shift(1,Y),Ae.write_shift(1,K),ee==0)return Ae.write_shift(4,0),Ae.write_shift(4,0),Ae.write_shift(2,65535),Ae;var Se=0,ge=0,pe=0,ye=0;return ee<0&&(Se=1,ee=-ee),ge=Math.log2(ee)|0,ee/=Math.pow(2,ge-31),ye=ee>>>0,(ye&2147483648)==0&&(ee/=2,++ge,ye=ee>>>0),ee-=ye,ye|=2147483648,ye>>>=0,ee*=Math.pow(2,32),pe=ee>>>0,Ae.write_shift(4,pe),Ae.write_shift(4,ye),ge+=16383+(Se?32768:0),Ae.write_shift(2,ge),Ae}function R(P,K){var Y=B(P);return P.l+=K-14,Y}function F(P,K){var Y=H(P),ee=P.read_shift(4);return Y[1].v=ee>>6,Y}function V(P,K){var Y=H(P),ee=P.read_shift(8,"f");return Y[1].v=ee,Y}function X(P,K){var Y=V(P);return P.l+=K-10,Y}function oe(P,K){return P[P.l+K-1]==0?P.read_shift(K,"cstr"):""}function te(P,K){var Y=P[P.l++];Y>K-1&&(Y=K-1);for(var ee="";ee.length<Y;)ee+=String.fromCharCode(P[P.l++]);return ee}function ae(P,K,Y){if(!(!Y.qpro||K<21)){var ee=P.read_shift(1);P.l+=17,P.l+=1,P.l+=2;var Ae=P.read_shift(K-21,"cstr");return[ee,Ae]}}function q(P,K){for(var Y={},ee=P.l+K;P.l<ee;){var Ae=P.read_shift(2);if(Ae==14e3){for(Y[Ae]=[0,""],Y[Ae][0]=P.read_shift(2);P[P.l];)Y[Ae][1]+=String.fromCharCode(P[P.l]),P.l++;P.l++}}return Y}function J(P,K){var Y=lt(5+P.length);Y.write_shift(2,14e3),Y.write_shift(2,K);for(var ee=0;ee<P.length;++ee){var Ae=P.charCodeAt(ee);Y[Y.l++]=Ae>127?95:Ae}return Y[Y.l++]=0,Y}var W={0:{n:"BOF",f:ds},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:p},14:{n:"NUMBER",f:b},15:{n:"LABEL",f},16:{n:"FORMULA",f:T},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:oe},222:{n:"SHEETNAMELP",f:te},65535:{n:""}},de={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:U},23:{n:"NUMBER17",f:B},24:{n:"NUMBER18",f:_},25:{n:"FORMULA19",f:R},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:q},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:F},38:{n:"??"},39:{n:"NUMBER27",f:V},40:{n:"FORMULA28",f:X},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:oe},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ae},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:e}}();function Ile(t){var e={},r=t.match(Qi),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=Er(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;e.cp=y5[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=s.val;break;case"<sz":e.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":s.rgb&&(e.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return e}var Fle=function(){var t=wg("t"),e=wg("rPr");function r(s){var i=s.match(t);if(!i)return{t:"s",v:""};var o={t:"s",v:xn(i[1])},c=s.match(e);return c&&(o.s=Ile(c[1])),o}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(a).map(r).filter(function(o){return o.v})}}(),Dle=function(){var e=/(\r\n|\n)/g;function r(a,s,i){var o=[];a.u&&o.push("text-decoration: underline;"),a.uval&&o.push("text-underline-style:"+a.uval+";"),a.sz&&o.push("font-size:"+a.sz+"pt;"),a.outline&&o.push("text-effect: outline;"),a.shadow&&o.push("text-shadow: auto;"),s.push('<span style="'+o.join("")+'">'),a.b&&(s.push("<b>"),i.push("</b>")),a.i&&(s.push("<i>"),i.push("</i>")),a.strike&&(s.push("<s>"),i.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),i.push("</"+c+">")),i.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(e,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),Rle=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,Lle=/<(?:\w+:)?r>/,Ule=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function z5(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=xn(Wn(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Wn(t),r&&(n.h=I5(n.t))):t.match(Lle)&&(n.r=Wn(t),n.t=xn(Wn((t.replace(Ule,"").match(Rle)||[]).join("").replace(Qi,""))),r&&(n.h=Dle(Fle(n.r)))),n):{t:""}}var Mle=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,Ple=/<(?:\w+:)?(?:si|sstItem)>/g,jle=/<\/(?:\w+:)?(?:si|sstItem)>/;function Ole(t,e){var r=[],n="";if(!t)return r;var a=t.match(Mle);if(a){n=a[2].replace(Ple,"").split(jle);for(var s=0;s!=n.length;++s){var i=z5(n[s].trim(),e);i!=null&&(r[r.length]=i)}a=Er(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var Qle=/^\s|\s$|[\t\n\r]/;function C8(t,e){if(!e.bookSST)return"";var r=[ts];r[r.length]=Ft("sst",null,{xmlns:hh[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var a=t[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(Qle)&&(s+=' xml:space="preserve"'),s+=">"+Qn(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function Hle(t){return[t.read_shift(4),t.read_shift(4)]}function Vle(t,e){var r=[],n=!1;return _u(t,function(s,i,o){switch(o){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function Gle(t,e){return e||(e=lt(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var zle=tie;function qle(t){var e=bo();yt(e,159,Gle(t));for(var r=0;r<t.length;++r)yt(e,19,zle(t[r]));return yt(e,160),e.end()}function E8(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function du(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function Kle(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=du(t,4),e.U=du(t,4),e.W=du(t,4),e}function Wle(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},a=t.read_shift(4),s=[];a-- >0;)s.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=s,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function $le(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(Wle(t));return e}function Jle(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function Yle(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=du(t,4),e.U=du(t,4),e.W=du(t,4),e}function Xle(t){var e=Yle(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function _8(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function S8(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function Zle(t){var e=du(t);switch(e.Minor){case 2:return[e.Minor,ece(t)];case 3:return[e.Minor,tce()];case 4:return[e.Minor,rce(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function ece(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=_8(t,r),a=S8(t,t.length-t.l);return{t:"Std",h:n,v:a}}function tce(){throw new Error("File is password-protected: ECMA-376 Extensible")}function rce(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(Qi,function(s){var i=Er(s);switch(bA(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(o){n[o]=i[o]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function nce(t,e){var r={},n=r.EncryptionVersionInfo=du(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var a=t.read_shift(4);return e-=4,r.EncryptionHeader=_8(t,a),e-=a,r.EncryptionVerifier=S8(t,e),r}function ace(t){var e={},r=e.EncryptionVersionInfo=du(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function q5(t){var e=0,r,n=E8(t),a=n.length+1,s,i,o,c,u;for(r=Kd(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)i=r[s],o=(e&16384)===0?0:1,c=e<<1&32767,u=o|c,e=u^i;return e^52811}var T8=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},a=function(i,o){return n(i^o)},s=function(i){for(var o=e[i.length-1],c=104,u=i.length-1;u>=0;--u)for(var f=i[u],m=0;m!=7;++m)f&64&&(o^=r[c]),f*=2,--c;return o};return function(i){for(var o=E8(i),c=s(o),u=o.length,f=Kd(16),m=0;m!=16;++m)f[m]=0;var p,g,b;for((u&1)===1&&(p=c>>8,f[u]=a(t[0],p),--u,p=c&255,g=o[o.length-1],f[u]=a(g,p));u>0;)--u,p=c>>8,f[u]=a(o[u],p),--u,p=c&255,f[u]=a(o[u],p);for(u=15,b=15-o.length;b>0;)p=c>>8,f[u]=a(t[b],p),--u,--b,p=c&255,f[u]=a(o[u],p),--u,--b;return f}}(),sce=function(t,e,r,n,a){a||(a=e),n||(n=T8(t));var s,i;for(s=0;s!=e.length;++s)i=e[s],i^=n[r],i=(i>>5|i<<3)&255,a[s]=i,++r;return[a,r,n]},ice=function(t){var e=0,r=T8(t);return function(n){var a=sce("",n,e,r);return e=a[1],a[0]}};function oce(t,e,r,n){var a={key:ds(t),verificationBytes:ds(t)};return r.password&&(a.verifier=q5(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=ice(r.password)),a}function lce(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=ace(t):n.Data=nce(t,e),n}function cce(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?lce(t,e-2,n):oce(t,r.biff>=8?e:e-2,r,n),n}var B8=function(){function t(a,s){switch(s.type){case"base64":return e(Zo(a),s);case"binary":return e(a,s);case"buffer":return e(Vr&&Buffer.isBuffer(a)?a.toString("binary"):tf(a),s);case"array":return e(rh(a),s)}throw new Error("Unrecognized type "+s.type)}function e(a,s){var i=s||{},o=i.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(f,m){Array.isArray(o)&&(o[m]=[]);for(var p=/\\\w+\b/g,g=0,b,y=-1;b=p.exec(f);){switch(b[0]){case"\\cell":var T=f.slice(g,p.lastIndex-b[0].length);if(T[0]==" "&&(T=T.slice(1)),++y,T.length){var k={v:T,t:"s"};Array.isArray(o)?o[m][y]=k:o[vr({r:m,c:y})]=k}break}g=p.lastIndex}y>u.e.c&&(u.e.c=y)}),o["!ref"]=Fr(u),o}function r(a,s){return rf(t(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],i=vn(a["!ref"]),o,c=Array.isArray(a),u=i.s.r;u<=i.e.r;++u){s.push("\\trowd\\trautofit1");for(var f=i.s.c;f<=i.e.c;++f)s.push("\\cellx"+(f+1));for(s.push("\\pard\\intbl"),f=i.s.c;f<=i.e.c;++f){var m=vr({r:u,c:f});o=c?(a[u]||[])[f]:a[m],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(vu(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function Ace(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function Eg(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function uce(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,a=Math.max(e,r,n),s=Math.min(e,r,n),i=a-s;if(i===0)return[0,0,e];var o=0,c=0,u=a+s;switch(c=i/(u>1?2-u:u),a){case e:o=((r-n)/i+6)%6;break;case r:o=(n-e)/i+2;break;case n:o=(e-r)/i+4;break}return[o/6,c,u/2]}function dce(t){var e=t[0],r=t[1],n=t[2],a=r*2*(n<.5?n:1-n),s=n-a/2,i=[s,s,s],o=6*e,c;if(r!==0)switch(o|0){case 0:case 6:c=a*o,i[0]+=a,i[1]+=c;break;case 1:c=a*(2-o),i[0]+=c,i[1]+=a;break;case 2:c=a*(o-2),i[1]+=a,i[2]+=c;break;case 3:c=a*(4-o),i[1]+=c,i[2]+=a;break;case 4:c=a*(o-4),i[2]+=a,i[0]+=c;break;case 5:c=a*(6-o),i[2]+=c,i[0]+=a;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function h2(t,e){if(e===0)return t;var r=uce(Ace(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),Eg(dce(r))}var N8=6,fce=15,hce=1,Fi=N8;function _g(t){return Math.floor((t+Math.round(128/Fi)/256)*Fi)}function Sg(t){return Math.floor((t-5)/Fi*100+.5)/100}function m2(t){return Math.round((t*Fi+5)/Fi*256)/256}function jb(t){return m2(Sg(_g(t)))}function K5(t){var e=Math.abs(t-jb(t)),r=Fi;if(e>.005)for(Fi=hce;Fi<fce;++Fi)Math.abs(t-jb(t))<=e&&(e=Math.abs(t-jb(t)),r=Fi);Fi=r}function Wd(t){t.width?(t.wpx=_g(t.width),t.wch=Sg(t.wpx),t.MDW=Fi):t.wpx?(t.wch=Sg(t.wpx),t.width=m2(t.wch),t.MDW=Fi):typeof t.wch=="number"&&(t.width=m2(t.wch),t.wpx=_g(t.width),t.MDW=Fi),t.customWidth&&delete t.customWidth}var mce=96,k8=mce;function Tg(t){return t*96/k8}function X0(t){return t*k8/96}var pce={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function gce(t,e,r,n){e.Borders=[];var a={},s=!1;(t[0].match(Qi)||[]).forEach(function(i){var o=Er(i);switch(bA(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},o.diagonalUp&&(a.diagonalUp=oa(o.diagonalUp)),o.diagonalDown&&(a.diagonalDown=oa(o.diagonalDown)),e.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in borders")}})}function xce(t,e,r,n){e.Fills=[];var a={},s=!1;(t[0].match(Qi)||[]).forEach(function(i){var o=Er(i);switch(bA(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},e.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":o.patternType&&(a.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),o.indexed&&(a.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(a.bgColor.theme=parseInt(o.theme,10)),o.tint&&(a.bgColor.tint=parseFloat(o.tint)),o.rgb&&(a.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),o.theme&&(a.fgColor.theme=parseInt(o.theme,10)),o.tint&&(a.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(a.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fills")}})}function vce(t,e,r,n){e.Fonts=[];var a={},s=!1;(t[0].match(Qi)||[]).forEach(function(i){var o=Er(i);switch(bA(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(a),a={};break;case"<name":o.val&&(a.name=Wn(o.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=o.val?oa(o.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=o.val?oa(o.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(o.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=o.val?oa(o.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=o.val?oa(o.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=o.val?oa(o.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=o.val?oa(o.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=o.val?oa(o.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":o.val&&(a.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(a.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(a.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(a.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=y5[parseInt(o.val,10)];break;case"<color":if(a.color||(a.color={}),o.auto&&(a.color.auto=oa(o.auto)),o.rgb)a.color.rgb=o.rgb.slice(-6);else if(o.indexed){a.color.index=parseInt(o.indexed,10);var c=Vf[a.color.index];a.color.index==81&&(c=Vf[1]),c||(c=Vf[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else o.theme&&(a.color.theme=parseInt(o.theme,10),o.tint&&(a.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=h2(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fonts")}})}function wce(t,e,r){e.NumberFmt=[];for(var n=Ma(pr),a=0;a<n.length;++a)e.NumberFmt[n[a]]=pr[n[a]];var s=t[0].match(Qi);if(s)for(a=0;a<s.length;++a){var i=Er(s[a]);switch(bA(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=xn(Wn(i.formatCode)),c=parseInt(i.numFmtId,10);if(e.NumberFmt[c]=o,c>0){if(c>392){for(c=392;c>60&&e.NumberFmt[c]!=null;--c);e.NumberFmt[c]=o}uu(o,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function yce(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=Ft("numFmt",null,{numFmtId:n,formatCode:Qn(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Ft("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var I1=["numFmtId","fillId","fontId","borderId","xfId"],F1=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function bce(t,e,r){e.CellXf=[];var n,a=!1;(t[0].match(Qi)||[]).forEach(function(s){var i=Er(s),o=0;switch(bA(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],o=0;o<I1.length;++o)n[I1[o]]&&(n[I1[o]]=parseInt(n[I1[o]],10));for(o=0;o<F1.length;++o)n[F1[o]]&&(n[F1[o]]=oa(n[F1[o]]));if(e.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[o]){n.numFmtId=o;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};i.vertical&&(c.vertical=i.vertical),i.horizontal&&(c.horizontal=i.horizontal),i.textRotation!=null&&(c.textRotation=i.textRotation),i.indent&&(c.indent=i.indent),i.wrapText&&(c.wrapText=oa(i.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function Cce(t){var e=[];return e[e.length]=Ft("cellXfs",null),t.forEach(function(r){e[e.length]=Ft("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Ft("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var Ece=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,c,u){var f={};if(!o)return f;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var m;return(m=o.match(e))&&wce(m,f,u),(m=o.match(a))&&vce(m,f,c,u),(m=o.match(n))&&xce(m,f,c,u),(m=o.match(s))&&gce(m,f,c,u),(m=o.match(r))&&bce(m,f,u),f}}();function I8(t,e){var r=[ts,Ft("styleSheet",null,{xmlns:hh[0],"xmlns:vt":Ss.vt})],n;return t.SSF&&(n=yce(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=Cce(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function _ce(t,e){var r=t.read_shift(2),n=Mi(t);return[r,n]}function Sce(t,e,r){r||(r=lt(6+4*e.length)),r.write_shift(2,t),Gs(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function Tce(t,e,r){var n={};n.sz=t.read_shift(2)/20;var a=lie(t);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=t.read_shift(2);switch(s===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=t.read_shift(1);i!=0&&(n.underline=i);var o=t.read_shift(1);o>0&&(n.family=o);var c=t.read_shift(1);switch(c>0&&(n.charset=c),t.l++,n.color=oie(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Mi(t),n}function Bce(t,e){e||(e=lt(153)),e.write_shift(2,t.sz*20),cie(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),u2(t.color,e);var n=0;return n=2,e.write_shift(1,n),Gs(t.name,e),e.length>e.l?e.slice(0,e.l):e}var Nce=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Ob,kce=ji;function S3(t,e){e||(e=lt(84)),Ob||(Ob=ww(Nce));var r=Ob[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(u2({auto:1},e),u2({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function Ice(t,e){var r=t.l+e,n=t.read_shift(2),a=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:a}}function F8(t,e,r){r||(r=lt(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function cp(t,e){return e||(e=lt(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var Fce=ji;function Dce(t,e){return e||(e=lt(51)),e.write_shift(1,0),cp(null,e),cp(null,e),cp(null,e),cp(null,e),cp(null,e),e.length>e.l?e.slice(0,e.l):e}function Rce(t,e){return e||(e=lt(52)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),A2(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function Lce(t,e,r){var n=lt(2052);return n.write_shift(4,t),A2(e,n),A2(r,n),n.length>n.l?n.slice(0,n.l):n}function Uce(t,e,r){var n={};n.NumberFmt=[];for(var a in pr)n.NumberFmt[a]=pr[a];n.CellXf=[],n.Fonts=[];var s=[],i=!1;return _u(t,function(c,u,f){switch(f){case 44:n.NumberFmt[c[0]]=c[1],uu(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(c.color.rgb=h2(e.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:s.push(f),i=!0;break;case 38:s.pop(),i=!1;break;default:if(u.T>0)s.push(f);else if(u.T<0)s.pop();else if(!i||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+f.toString(16))}}),n}function Mce(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&++r}),r!=0&&(yt(t,615,vc(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&yt(t,44,Sce(a,e[a]))}),yt(t,616))}}function Pce(t){var e=1;yt(t,611,vc(e)),yt(t,43,Bce({sz:12,color:{theme:1},name:"Calibri",family:2})),yt(t,612)}function jce(t){var e=2;yt(t,603,vc(e)),yt(t,45,S3({patternType:"none"})),yt(t,45,S3({patternType:"gray125"})),yt(t,604)}function Oce(t){var e=1;yt(t,613,vc(e)),yt(t,46,Dce()),yt(t,614)}function Qce(t){var e=1;yt(t,626,vc(e)),yt(t,47,F8({numFmtId:0},65535)),yt(t,627)}function Hce(t,e){yt(t,617,vc(e.length)),e.forEach(function(r){yt(t,47,F8(r,0))}),yt(t,618)}function Vce(t){var e=1;yt(t,619,vc(e)),yt(t,48,Rce({xfId:0,name:"Normal"})),yt(t,620)}function Gce(t){var e=0;yt(t,505,vc(e)),yt(t,506)}function zce(t){var e=0;yt(t,508,Lce(e,"TableStyleMedium9","PivotStyleMedium4")),yt(t,509)}function qce(t,e){var r=bo();return yt(r,278),Mce(r,t.SSF),Pce(r),jce(r),Oce(r),Qce(r),Hce(r,e.cellXfs),Vce(r),Gce(r),zce(r),yt(r,279),r.end()}var Kce=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Wce(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(Qi)||[]).forEach(function(a){var s=Er(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(e.themeElements.clrScheme[Kce.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function $ce(){}function Jce(){}var Yce=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,Xce=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,Zce=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function eAe(t,e,r){e.themeElements={};var n;[["clrScheme",Yce,Wce],["fontScheme",Xce,$ce],["fmtScheme",Zce,Jce]].forEach(function(a){if(!(n=t.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,e,r)})}var tAe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function D8(t,e){(!t||t.length===0)&&(t=W5());var r,n={};if(!(r=t.match(tAe)))throw new Error("themeElements not found in theme");return eAe(r[0],n,e),n.raw=t,n}function W5(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[ts];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function rAe(t,e,r){var n=t.l+e,a=t.read_shift(4);if(a!==124226){if(!r.cellStyles){t.l=n;return}var s=t.slice(t.l);t.l=n;var i;try{i=_U(s,{type:"array"})}catch{return}var o=Wo(i,"theme/theme/theme1.xml",!0);if(o)return D8(o,r)}}function nAe(t){return t.read_shift(4)}function aAe(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=sAe(t,4);break;case 2:e.xclrValue=d8(t);break;case 3:e.xclrValue=nAe(t);break;case 4:t.l+=4;break}return t.l+=8,e}function sAe(t,e){return ji(t,e)}function iAe(t,e){return ji(t,e)}function oAe(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=aAe(t);break;case 6:n[1]=iAe(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function lAe(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var a=t.read_shift(2),s=[];a-- >0;)s.push(oAe(t,r-t.l));return{ixfe:n,ext:s}}function cAe(t,e){e.forEach(function(r){r[0]})}function AAe(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Mi(t)}}function uAe(t){var e=lt(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),Gs(t.name,e),e.slice(0,e.l)}function dAe(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function fAe(t){var e=lt(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function hAe(t,e){var r=lt(8+2*e.length);return r.write_shift(4,t),Gs(e,r),r.slice(0,r.l)}function mAe(t){return t.l+=4,t.read_shift(4)!=0}function pAe(t,e){var r=lt(8);return r.write_shift(4,t),r.write_shift(4,1),r}function gAe(t,e,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],i=!1,o=2;return _u(t,function(c,u,f){switch(f){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(m){o==1?n.Cell.push({type:n.Types[m[0]-1].name,index:m[1]}):o==0&&n.Value.push({type:n.Types[m[0]-1].name,index:m[1]})});break;case 337:o=c?1:0;break;case 338:o=2;break;case 35:s.push(f),i=!0;break;case 36:s.pop(),i=!1;break;default:if(!u.T){if(!i||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}}),n}function xAe(){var t=bo();return yt(t,332),yt(t,334,vc(1)),yt(t,335,uAe({name:"XLDAPR",version:12e4,flags:3496657072})),yt(t,336),yt(t,339,hAe(1,"XLDAPR")),yt(t,52),yt(t,35,vc(514)),yt(t,4096,vc(0)),yt(t,4097,Nl(1)),yt(t,36),yt(t,53),yt(t,340),yt(t,337,pAe(1)),yt(t,51,fAe([[1,0]])),yt(t,338),yt(t,333),t.end()}function vAe(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var a=!1,s=2,i;return t.replace(Qi,function(o){var c=Er(o);switch(bA(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(i=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):s==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return o}),n}function R8(){var t=[ts];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function wAe(t){var e=[];if(!t)return e;var r=1;return(t.match(Qi)||[]).forEach(function(n){var a=Er(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,e.push(a);break}}),e}function yAe(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=vr(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function bAe(t,e,r){var n=[];return _u(t,function(s,i,o){switch(o){case 63:n.push(s);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function CAe(t,e,r,n){if(!t)return t;var a=n||{},s=!1;_u(t,function(o,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function EAe(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}var C0=1024;function L8(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[Ft("xml",null,{"xmlns:v":zo.v,"xmlns:o":zo.o,"xmlns:x":zo.x,"xmlns:mv":zo.mv}).replace(/\/>/,">"),Ft("o:shapelayout",Ft("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),Ft("v:shapetype",[Ft("v:stroke",null,{joinstyle:"miter"}),Ft("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];C0<t*1e3;)C0+=1e3;return e.forEach(function(s){var i=Ea(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var c=o.type=="gradient"?Ft("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Ft("v:fill",c,o),f={on:"t",obscured:"t"};++C0,a=a.concat(["<v:shape"+yg({id:"_x0000_s"+C0,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Ft("v:shadow",null,f),Ft("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",si("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),si("x:AutoFill","False"),si("x:Row",String(i.r)),si("x:Column",String(i.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function T3(t,e,r,n){var a=Array.isArray(t),s;e.forEach(function(i){var o=Ea(i.ref);if(a?(t[o.r]||(t[o.r]=[]),s=t[o.r][o.c]):s=t[i.ref],!s){s={t:"z"},a?t[o.r][o.c]=s:t[i.ref]=s;var c=vn(t["!ref"]||"BDWGO1000001:A1");c.s.r>o.r&&(c.s.r=o.r),c.e.r<o.r&&(c.e.r=o.r),c.s.c>o.c&&(c.s.c=o.c),c.e.c<o.c&&(c.e.c=o.c);var u=Fr(c);u!==t["!ref"]&&(t["!ref"]=u)}s.c||(s.c=[]);var f={a:i.author,t:i.t,r:i.r,T:r};i.h&&(f.h=i.h);for(var m=s.c.length-1;m>=0;--m){if(!r&&s.c[m].T)return;r&&!s.c[m].T&&s.c.splice(m,1)}if(r&&n){for(m=0;m<n.length;++m)if(f.a==n[m].id){f.a=n[m].name||f.a;break}}s.c.push(f)})}function _Ae(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var s=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var c=Er(o[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},f=Ea(c.ref);if(!(e.sheetRows&&e.sheetRows<=f.r)){var m=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),p=!!m&&!!m[1]&&z5(m[1])||{r:"",t:"",h:""};u.r=p.r,p.r=="<t></t>"&&(p.t=p.h=""),u.t=(p.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(u.h=p.h),n.push(u)}}}}),n}function U8(t){var e=[ts,Ft("comments",null,{xmlns:hh[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(a){var s=Qn(a.a);r.indexOf(s)==-1&&(r.push(s),e.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),e.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(Qn(c.a))),s.push(c.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)e.push(si("t",Qn(s[0]||"")));else{for(var i=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)i+=`Reply:
    `+s[o]+`
`;e.push(si("t",Qn(i)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function SAe(t,e){var r=[],n=!1,a={},s=0;return t.replace(Qi,function(o,c){var u=Er(o);switch(bA(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=c+o.length;break;case"</text>":a.t=t.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),r}function TAe(t,e,r){var n=[ts,Ft("ThreadedComments",null,{xmlns:Ss.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(a){var s="";(a[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&e.indexOf(i.a)==-1&&e.push(i.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?s=c.id:c.parentId=s,i.ID=c.id,i.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(i.a)).slice(-12)+"}"),n.push(Ft("threadedComment",si("text",i.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function BAe(t,e){var r=[],n=!1;return t.replace(Qi,function(s){var i=Er(s);switch(bA(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return s}),r}function NAe(t){var e=[ts,Ft("personList",null,{xmlns:Ss.TCMNT,"xmlns:x":hh[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(Ft("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function kAe(t){var e={};e.iauthor=t.read_shift(4);var r=xh(t);return e.rfx=r.s,e.ref=vr(r.s),t.l+=16,e}function IAe(t,e){return e==null&&(e=lt(36)),e.write_shift(4,t[1].iauthor),gm(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var FAe=Mi;function DAe(t){return Gs(t.slice(0,54))}function RAe(t,e){var r=[],n=[],a={},s=!1;return _u(t,function(o,c,u){switch(u){case 632:n.push(o);break;case 635:a=o;break;case 637:a.t=o.t,a.h=o.h,a.r=o.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,e.sheetRows&&a.rfx&&e.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function LAe(t){var e=bo(),r=[];return yt(e,628),yt(e,630),t.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),yt(e,632,DAe(a.a)))})}),yt(e,631),yt(e,633),t.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:Ea(n[0]),e:Ea(n[0])};yt(e,635,IAe([s,a])),a.t&&a.t.length>0&&yt(e,637,nie(a)),yt(e,636),delete a.iauthor})}),yt(e,634),yt(e,629),e.end()}var UAe="application/vnd.ms-office.vbaProject";function MAe(t){var e=or.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");or.utils.cfb_add(e,a,t.FileIndex[n].content)}}),or.write(e)}function PAe(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&or.utils.cfb_add(t,a,e.FileIndex[n].content)}})}var M8=["xlsb","xlsm","xlam","biff8","xla"];function jAe(){return{"!type":"dialog"}}function OAe(){return{"!type":"dialog"}}function QAe(){return{"!type":"macro"}}function HAe(){return{"!type":"macro"}}var j0=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,a,s,i){var o=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,f=i.length>0?parseInt(i,10)|0:0;return o?f+=e.c:--f,c?u+=e.r:--u,a+(o?"":"$")+Ca(f)+(c?"":"$")+es(u)}return function(a,s){return e=s,a.replace(t,r)}}(),$5=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,J5=function(){return function(e,r){return e.replace($5,function(n,a,s,i,o,c){var u=U5(i)-(s?0:r.c),f=L5(c)-(o?0:r.r),m=f==0?"":o?f+1:"["+f+"]",p=u==0?"":s?u+1:"["+u+"]";return a+"R"+m+"C"+p})}}();function P8(t,e){return t.replace($5,function(r,n,a,s,i,o){return n+(a=="$"?a+s:Ca(U5(s)+e.c))+(i=="$"?i+o:es(L5(o)+e.r))})}function VAe(t,e,r){var n=Eo(e),a=n.s,s=Ea(r),i={r:s.r-a.r,c:s.c-a.c};return P8(t,i)}function GAe(t){return t.length!=1}function B3(t){return t.replace(/_xlfn\./g,"")}function cs(t){t.l+=1}function $d(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function j8(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return O8(t);r.biff==12&&(n=4)}var a=t.read_shift(n),s=t.read_shift(n),i=$d(t),o=$d(t);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function O8(t){var e=$d(t),r=$d(t),n=t.read_shift(1),a=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function zAe(t,e,r){if(r.biff<8)return O8(t);var n=t.read_shift(r.biff==12?4:2),a=t.read_shift(r.biff==12?4:2),s=$d(t),i=$d(t);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:i[0],cRel:i[1],rRel:i[2]}}}function Q8(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return qAe(t);var n=t.read_shift(r&&r.biff==12?4:2),a=$d(t);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function qAe(t){var e=$d(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function KAe(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function WAe(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return $Ae(t);var a=t.read_shift(n>=12?4:2),s=t.read_shift(2),i=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;a>524287;)a-=1048576;if(i==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:i,rRel:o}}function $Ae(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,a=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),a==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:a,rRel:n}}function JAe(t,e,r){var n=(t[t.l++]&96)>>5,a=j8(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function YAe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var i=j8(t,s,r);return[n,a,i]}function XAe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function ZAe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[n,a]}function eue(t,e,r){var n=(t[t.l++]&96)>>5,a=zAe(t,e-1,r);return[n,a]}function tue(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function N3(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function rue(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(t.read_shift(r&&r.biff==2?1:2));return a}function nue(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function aue(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function sue(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function iue(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function H8(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function oue(t){return t.read_shift(2),H8(t)}function lue(t){return t.read_shift(2),H8(t)}function cue(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=Q8(t,0,r);return[n,a]}function Aue(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=WAe(t,0,r);return[n,a]}function uue(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var s=Q8(t,0,r);return[n,a,s]}function due(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(r&&r.biff<=3?1:2);return[mde[a],z8[a],n]}function fue(t,e,r){var n=t[t.l++],a=t.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:hue(t);return[a,(s[0]===0?z8:hde)[s[1]]]}function hue(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function mue(t,e,r){t.l+=r&&r.biff==2?3:4}function pue(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function gue(t){return t.l++,Su[t.read_shift(1)]}function xue(t){return t.l++,t.read_shift(2)}function vue(t){return t.l++,t.read_shift(1)!==0}function wue(t){return t.l++,Li(t)}function yue(t,e,r){return t.l++,nx(t,e-1,r)}function bue(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Ka(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=Su[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=Li(t);break;case 2:r[1]=vh(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Cue(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?xh:Cw)(t));return a}function Eue(t,e,r){var n=0,a=0;r.biff==12?(n=t.read_shift(4),a=t.read_shift(4)):(a=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,i=[];s!=n&&(i[s]=[]);++s)for(var o=0;o!=a;++o)i[s][o]=bue(t,r.biff);return i}function _ue(t,e,r){var n=t.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=t.read_shift(a);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,s]}function Sue(t,e,r){if(r.biff==5)return Tue(t);var n=t.read_shift(1)>>>5&3,a=t.read_shift(2),s=t.read_shift(4);return[n,a,s]}function Tue(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function Bue(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function Nue(t,e,r){var n=t.read_shift(1)>>>5&3,a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function kue(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function Iue(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[n,a]}var Fue=ji,Due=ji,Rue=ji;function sx(t,e,r){return t.l+=2,[KAe(t)]}function Y5(t){return t.l+=6,[]}var Lue=sx,Uue=Y5,Mue=Y5,Pue=sx;function V8(t){return t.l+=2,[ds(t),t.read_shift(2)&1]}var jue=sx,Oue=V8,Que=Y5,Hue=sx,Vue=sx,Gue=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function zue(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a=t.read_shift(2),s=t.read_shift(2),i=Gue[r>>2&31];return{ixti:e,coltype:r&3,rt:i,idx:n,c:a,C:s}}function que(t){return t.l+=2,[t.read_shift(4)]}function Kue(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function Wue(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function $ue(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function Jue(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function Yue(t){return t.l+=4,[0,0]}var k3={1:{n:"PtgExp",f:pue},2:{n:"PtgTbl",f:Rue},3:{n:"PtgAdd",f:cs},4:{n:"PtgSub",f:cs},5:{n:"PtgMul",f:cs},6:{n:"PtgDiv",f:cs},7:{n:"PtgPower",f:cs},8:{n:"PtgConcat",f:cs},9:{n:"PtgLt",f:cs},10:{n:"PtgLe",f:cs},11:{n:"PtgEq",f:cs},12:{n:"PtgGe",f:cs},13:{n:"PtgGt",f:cs},14:{n:"PtgNe",f:cs},15:{n:"PtgIsect",f:cs},16:{n:"PtgUnion",f:cs},17:{n:"PtgRange",f:cs},18:{n:"PtgUplus",f:cs},19:{n:"PtgUminus",f:cs},20:{n:"PtgPercent",f:cs},21:{n:"PtgParen",f:cs},22:{n:"PtgMissArg",f:cs},23:{n:"PtgStr",f:yue},26:{n:"PtgSheet",f:Kue},27:{n:"PtgEndSheet",f:Wue},28:{n:"PtgErr",f:gue},29:{n:"PtgBool",f:vue},30:{n:"PtgInt",f:xue},31:{n:"PtgNum",f:wue},32:{n:"PtgArray",f:tue},33:{n:"PtgFunc",f:due},34:{n:"PtgFuncVar",f:fue},35:{n:"PtgName",f:_ue},36:{n:"PtgRef",f:cue},37:{n:"PtgArea",f:JAe},38:{n:"PtgMemArea",f:Bue},39:{n:"PtgMemErr",f:Fue},40:{n:"PtgMemNoMem",f:Due},41:{n:"PtgMemFunc",f:Nue},42:{n:"PtgRefErr",f:kue},43:{n:"PtgAreaErr",f:XAe},44:{n:"PtgRefN",f:Aue},45:{n:"PtgAreaN",f:eue},46:{n:"PtgMemAreaN",f:$ue},47:{n:"PtgMemNoMemN",f:Jue},57:{n:"PtgNameX",f:Sue},58:{n:"PtgRef3d",f:uue},59:{n:"PtgArea3d",f:YAe},60:{n:"PtgRefErr3d",f:Iue},61:{n:"PtgAreaErr3d",f:ZAe},255:{}},Xue={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Zue={1:{n:"PtgElfLel",f:V8},2:{n:"PtgElfRw",f:Hue},3:{n:"PtgElfCol",f:Lue},6:{n:"PtgElfRwV",f:Vue},7:{n:"PtgElfColV",f:Pue},10:{n:"PtgElfRadical",f:jue},11:{n:"PtgElfRadicalS",f:Que},13:{n:"PtgElfColS",f:Uue},15:{n:"PtgElfColSV",f:Mue},16:{n:"PtgElfRadicalLel",f:Oue},25:{n:"PtgList",f:zue},29:{n:"PtgSxName",f:que},255:{}},ede={0:{n:"PtgAttrNoop",f:Yue},1:{n:"PtgAttrSemi",f:iue},2:{n:"PtgAttrIf",f:aue},4:{n:"PtgAttrChoose",f:rue},8:{n:"PtgAttrGoto",f:nue},16:{n:"PtgAttrSum",f:mue},32:{n:"PtgAttrBaxcel",f:N3},33:{n:"PtgAttrBaxcel",f:N3},64:{n:"PtgAttrSpace",f:oue},65:{n:"PtgAttrSpaceSemi",f:lue},128:{n:"PtgAttrIfError",f:sue},255:{}};function ix(t,e,r,n){if(n.biff<8)return ji(t,e);for(var a=t.l+e,s=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=Eue(t,0,n),s.push(r[i][1]);break;case"PtgMemArea":r[i][2]=Cue(t,r[i][1],n),s.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=t.read_shift(4),s.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return e=a-t.l,e!==0&&s.push(ji(t,e)),s}function ox(t,e,r){for(var n=t.l+e,a,s,i=[];n!=t.l;)e=n-t.l,s=t[t.l],a=k3[s]||k3[Xue[s]],(s===24||s===25)&&(a=(s===24?Zue:ede)[t[t.l+1]]),!a||!a.f?ji(t,e):i.push([a.n,a.f(t,e,r)]);return i}function tde(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],a=[],s=0;s<n.length;++s){var i=n[s];if(i)switch(i[0]){case 2:a.push('"'+i[1].replace(/"/g,'""')+'"');break;default:a.push(i[1])}else a.push("")}e.push(a.join(","))}return e.join(";")}var rde={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function nde(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function G8(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(t[n[0]][0]){case 357:return a=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[n[0]][0][3]?(a=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function I3(t,e,r){var n=G8(t,e,r);return n=="#REF"?n:nde(n,r)}function Ni(t,e,r,n,a){var s=a&&a.biff||8,i={s:{c:0,r:0}},o=[],c,u,f,m=0,p=0,g,b="";if(!t[0]||!t[0][0])return"";for(var y=-1,T="",k=0,D=t[0].length;k<D;++k){var L=t[0][k];switch(L[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),u=o.pop(),y>=0){switch(t[0][y][1][0]){case 0:T=Ra(" ",t[0][y][1][1]);break;case 1:T=Ra("\r",t[0][y][1][1]);break;default:if(T="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][y][1][0])}u=u+T,y=-1}o.push(u+rde[L[0]]+c);break;case"PtgIsect":c=o.pop(),u=o.pop(),o.push(u+" "+c);break;case"PtgUnion":c=o.pop(),u=o.pop(),o.push(u+","+c);break;case"PtgRange":c=o.pop(),u=o.pop(),o.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":f=zp(L[1][1],i,a),o.push(qp(f,s));break;case"PtgRefN":f=r?zp(L[1][1],r,a):L[1][1],o.push(qp(f,s));break;case"PtgRef3d":m=L[1][1],f=zp(L[1][2],i,a),b=I3(n,m,a),o.push(b+"!"+qp(f,s));break;case"PtgFunc":case"PtgFuncVar":var j=L[1][0],H=L[1][1];j||(j=0),j&=127;var U=j==0?[]:o.slice(-j);o.length-=j,H==="User"&&(H=U.shift()),o.push(H+"("+U.join(",")+")");break;case"PtgBool":o.push(L[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(L[1]);break;case"PtgNum":o.push(String(L[1]));break;case"PtgStr":o.push('"'+L[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(L[1]);break;case"PtgAreaN":g=i3(L[1][1],r?{s:r}:i,a),o.push(Ub(g,a));break;case"PtgArea":g=i3(L[1][1],i,a),o.push(Ub(g,a));break;case"PtgArea3d":m=L[1][1],g=L[1][2],b=I3(n,m,a),o.push(b+"!"+Ub(g,a));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":p=L[1][2];var E=(n.names||[])[p-1]||(n[0]||[])[p],_=E?E.Name:"SH33TJSNAME"+String(p);_&&_.slice(0,6)=="_xlfn."&&!a.xlfn&&(_=_.slice(6)),o.push(_);break;case"PtgNameX":var B=L[1][1];p=L[1][2];var Q;if(a.biff<=5)B<0&&(B=-B),n[B]&&(Q=n[B][p]);else{var R="";if(((n[B]||[])[0]||[])[0]==14849||(((n[B]||[])[0]||[])[0]==1025?n[B][p]&&n[B][p].itab>0&&(R=n.SheetNames[n[B][p].itab-1]+"!"):R=n.SheetNames[p-1]+"!"),n[B]&&n[B][p])R+=n[B][p].Name;else if(n[0]&&n[0][p])R+=n[0][p].Name;else{var F=(G8(n,B,a)||"").split(";;");F[p-1]?R=F[p-1]:R+="SH33TJSERRX"}o.push(R);break}Q||(Q={Name:"SH33TJSERRY"}),o.push(Q.Name);break;case"PtgParen":var V="(",X=")";if(y>=0){switch(T="",t[0][y][1][0]){case 2:V=Ra(" ",t[0][y][1][1])+V;break;case 3:V=Ra("\r",t[0][y][1][1])+V;break;case 4:X=Ra(" ",t[0][y][1][1])+X;break;case 5:X=Ra("\r",t[0][y][1][1])+X;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][y][1][0])}y=-1}o.push(V+o.pop()+X);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":f={c:L[1][1],r:L[1][0]};var oe={c:r.c,r:r.r};if(n.sharedf[vr(f)]){var te=n.sharedf[vr(f)];o.push(Ni(te,i,oe,n,a))}else{var ae=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(f.c<u[0].s.c||f.c>u[0].e.c)&&!(f.r<u[0].s.r||f.r>u[0].e.r)){o.push(Ni(u[1],i,oe,n,a)),ae=!0;break}ae||o.push(L[1])}break;case"PtgArray":o.push("{"+tde(L[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=k;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+L[1].idx+"[#"+L[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(L));default:throw new Error("Unrecognized Formula Token: "+String(L))}var q=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&y>=0&&q.indexOf(t[0][k][0])==-1){L=t[0][y];var J=!0;switch(L[1][0]){case 4:J=!1;case 0:T=Ra(" ",L[1][1]);break;case 5:J=!1;case 1:T=Ra("\r",L[1][1]);break;default:if(T="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+L[1][0])}o.push((J?T:"")+o.pop()+(J?"":T)),y=-1}}if(o.length>1&&a.WTF)throw new Error("bad formula stack");return o[0]}function ade(t,e,r){var n=t.l+e,a=r.biff==2?1:2,s,i=t.read_shift(a);if(i==65535)return[[],ji(t,e-2)];var o=ox(t,i,r);return e!==i+a&&(s=ix(t,e-i-a,o,r)),t.l=n,[o,s]}function sde(t,e,r){var n=t.l+e,a=r.biff==2?1:2,s,i=t.read_shift(a);if(i==65535)return[[],ji(t,e-2)];var o=ox(t,i,r);return e!==i+a&&(s=ix(t,e-i-a,o,r)),t.l=n,[o,s]}function ide(t,e,r,n){var a=t.l+e,s=ox(t,n,r),i;return a!==t.l&&(i=ix(t,a-t.l,s,r)),[s,i]}function ode(t,e,r){var n=t.l+e,a,s=t.read_shift(2),i=ox(t,s,r);return s==65535?[[],ji(t,e-2)]:(e!==s+2&&(a=ix(t,n-s-2,i,r)),[i,a])}function lde(t){var e;if(ou(t,t.l+6)!==65535)return[Li(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function cde(t){if(t==null){var e=lt(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return nh(t);return nh(0)}function Qb(t,e,r){var n=t.l+e,a=CA(t);r.biff==2&&++t.l;var s=lde(t),i=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var o=sde(t,n-t.l,r);return{cell:a,val:s[0],formula:o,shared:i>>3&1,tt:s[1]}}function Ade(t,e,r,n,a){var s=sh(e,r,a),i=cde(t.v),o=lt(6),c=33;o.write_shift(2,c),o.write_shift(4,0);for(var u=lt(t.bf.length),f=0;f<t.bf.length;++f)u[f]=t.bf[f];var m=Vs([s,i,o,u]);return m}function Ew(t,e,r){var n=t.read_shift(4),a=ox(t,n,r),s=t.read_shift(4),i=s>0?ix(t,s,a,r):null;return[a,i]}var ude=Ew,_w=Ew,dde=Ew,fde=Ew,hde={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},z8={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},mde={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function F3(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function pde(t){var e="of:="+t.replace($5,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function Hb(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function gde(t){return t.replace(/\./,"!")}var Wp={},O0={},$p=typeof Map<"u";function X5(t,e,r){var n=0,a=t.length;if(r){if($p?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var s=$p?r.get(e):r[e];n<s.length;++n)if(t[s[n]].t===e)return t.Count++,s[n]}}else for(;n<a;++n)if(t[n].t===e)return t.Count++,n;return t[a]={t:e},t.Count++,t.Unique++,r&&($p?(r.has(e)||r.set(e,[]),r.get(e).push(a)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(a))),a}function Sw(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(Fi=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=Sg(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=m2(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function qf(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function nf(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],a=60,s=t.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){uu(e.z,a),r.ssf[a]=e.z,r.revssf[e.z]=n=a;break}}for(a=0;a!=s;++a)if(t[a].numFmtId===n)return a;return t[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function q8(t,e,r,n,a,s){try{n.cellNF&&(t.z=pr[e])}catch(o){if(n.WTF)throw o}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=ca(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(pr[e]==null&&uu(hse[e]||"General",e),t.t==="e")t.w=t.w||Su[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=vg(t.v);else if(t.t==="d"){var i=Bs(t.v);(i|0)===i?t.w=i.toString(10):t.w=vg(i)}else{if(t.v===void 0)return"";t.w=th(t.v,O0)}else t.t==="d"?t.w=jl(e,Bs(t.v),O0):t.w=jl(e,t.v,O0)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{t.s=s.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=h2(a.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=a.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=h2(a.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=a.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&s.Fills)throw o}}}function xde(t,e,r){if(t&&t["!ref"]){var n=vn(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function vde(t,e){var r=vn(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=Fr(r))}var wde=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,yde=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,bde=/<(?:\w:)?hyperlink [^>]*>/mg,Cde=/"(\w*:\w*)"/,Ede=/<(?:\w:)?col\b[^>]*[\/]?>/g,_de=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,Sde=/<(?:\w:)?pageMargins[^>]*\/>/g,K8=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,Tde=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Bde=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function Nde(t,e,r,n,a,s,i){if(!t)return t;n||(n={"!id":{}});var o=e.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",f="",m=t.match(yde);m?(u=t.slice(0,m.index),f=t.slice(m.index+m[0].length)):u=f=t;var p=u.match(K8);p?Z5(p[0],o,a,r):(p=u.match(Tde))&&Ide(p[0],p[1]||"",o,a,r);var g=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(g>0){var b=u.slice(g,g+50).match(Cde);b&&vde(o,b[1])}var y=u.match(Bde);y&&y[1]&&Gde(y[1],a);var T=[];if(e.cellStyles){var k=u.match(Ede);k&&jde(T,k)}m&&Kde(m[1],o,e,c,s,i);var D=f.match(_de);D&&(o["!autofilter"]=Qde(D[0]));var L=[],j=f.match(wde);if(j)for(g=0;g!=j.length;++g)L[g]=vn(j[g].slice(j[g].indexOf('"')+1));var H=f.match(bde);H&&Ude(o,H,n);var U=f.match(Sde);if(U&&(o["!margins"]=Mde(Er(U[0]))),!o["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(o["!ref"]=Fr(c)),e.sheetRows>0&&o["!ref"]){var E=vn(o["!ref"]);e.sheetRows<=+E.e.r&&(E.e.r=e.sheetRows-1,E.e.r>c.e.r&&(E.e.r=c.e.r),E.e.r<E.s.r&&(E.s.r=E.e.r),E.e.c>c.e.c&&(E.e.c=c.e.c),E.e.c<E.s.c&&(E.s.c=E.e.c),o["!fullref"]=o["!ref"],o["!ref"]=Fr(E))}return T.length>0&&(o["!cols"]=T),L.length>0&&(o["!merges"]=L),o}function kde(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+Fr(t[r])+'"/>';return e+"</mergeCells>"}function Z5(t,e,r,n){var a=Er(t);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=xn(Wn(a.codeName)))}function Ide(t,e,r,n,a){Z5(t.slice(0,t.indexOf(">")),r,n,a)}function Fde(t,e,r,n,a){var s=!1,i={},o=null;if(n.bookType!=="xlsx"&&e.vbaraw){var c=e.SheetNames[r];try{e.Workbook&&(c=e.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,i.codeName=cA(Qn(c))}if(t&&t["!outline"]){var u={summaryBelow:1,summaryRight:1};t["!outline"].above&&(u.summaryBelow=0),t["!outline"].left&&(u.summaryRight=0),o=(o||"")+Ft("outlinePr",null,u)}!s&&!o||(a[a.length]=Ft("sheetPr",o,i))}var Dde=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Rde=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Lde(t){var e={sheet:1};return Dde.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),Rde.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=q5(t.password).toString(16).toUpperCase()),Ft("sheetProtection",null,e)}function Ude(t,e,r){for(var n=Array.isArray(t),a=0;a!=e.length;++a){var s=Er(Wn(e[a]),!0);if(!s.ref)return;var i=((r||{})["!id"]||[])[s.id];i?(s.Target=i.Target,s.location&&(s.Target+="#"+xn(s.location))):(s.Target="#"+xn(s.location),i={Target:s.Target,TargetMode:"Internal"}),s.Rel=i,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var o=vn(s.ref),c=o.s.r;c<=o.e.r;++c)for(var u=o.s.c;u<=o.e.c;++u){var f=vr({c:u,r:c});n?(t[c]||(t[c]=[]),t[c][u]||(t[c][u]={t:"z",v:void 0}),t[c][u].l=s):(t[f]||(t[f]={t:"z",v:void 0}),t[f].l=s)}}}function Mde(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function Pde(t){return qf(t),Ft("pageMargins",null,t)}function jde(t,e){for(var r=!1,n=0;n!=e.length;++n){var a=Er(e[n],!0);a.hidden&&(a.hidden=oa(a.hidden));var s=parseInt(a.min,10)-1,i=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,K5(a.width)),Wd(a);s<=i;)t[s++]=Aa(a)}}function Ode(t,e){for(var r=["<cols>"],n,a=0;a!=e.length;++a)(n=e[a])&&(r[r.length]=Ft("col",null,Sw(a,n)));return r[r.length]="</cols>",r.join("")}function Qde(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function Hde(t,e,r,n){var a=typeof t.ref=="string"?t.ref:Fr(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,i=Eo(a);i.s.r==i.e.r&&(i.e.r=Eo(e["!ref"]).e.r,a=Fr(i));for(var o=0;o<s.length;++o){var c=s[o];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Ft("autoFilter",null,{ref:a})}var Vde=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Gde(t,e){e.Views||(e.Views=[{}]),(t.match(Vde)||[]).forEach(function(r,n){var a=Er(r);e.Views[n]||(e.Views[n]={}),+a.zoomScale&&(e.Views[n].zoom=+a.zoomScale),oa(a.rightToLeft)&&(e.Views[n].RTL=!0)})}function zde(t,e,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Ft("sheetViews",Ft("sheetView",null,a),{})}function qde(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var a="",s=t.t,i=t.v;if(t.t!=="z")switch(t.t){case"b":a=t.v?"1":"0";break;case"n":a=""+t.v;break;case"e":a=Su[t.v];break;case"d":n&&n.cellDates?a=ca(t.v,-1).toISOString():(t=Aa(t),t.t="n",a=""+(t.v=Bs(ca(t.v)))),typeof t.z>"u"&&(t.z=pr[14]);break;default:a=t.v;break}var o=si("v",Qn(a)),c={r:e},u=nf(n.cellXfs,t,n);switch(u!==0&&(c.s=u),t.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=si("v",""+X5(n.Strings,t.v,n.revStrings)),c.t="s";break}c.t="str";break}if(t.t!=s&&(t.t=s,t.v=i),typeof t.f=="string"&&t.f){var f=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;o=Ft("f",Qn(t.f),f)+(t.v!=null?o:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(c.cm=1),Ft("c",o,c)}var Kde=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=wg("v"),i=wg("f");return function(c,u,f,m,p,g){for(var b=0,y="",T=[],k=[],D=0,L=0,j=0,H="",U,E,_=0,B=0,Q,R,F=0,V=0,X=Array.isArray(g.CellXf),oe,te=[],ae=[],q=Array.isArray(u),J=[],W={},de=!1,P=!!f.sheetStubs,K=c.split(e),Y=0,ee=K.length;Y!=ee;++Y){y=K[Y].trim();var Ae=y.length;if(Ae!==0){var Se=0;e:for(b=0;b<Ae;++b)switch(y[b]){case">":if(y[b-1]!="/"){++b;break e}if(f&&f.cellStyles){if(E=Er(y.slice(Se,b),!0),_=E.r!=null?parseInt(E.r,10):_+1,B=-1,f.sheetRows&&f.sheetRows<_)continue;W={},de=!1,E.ht&&(de=!0,W.hpt=parseFloat(E.ht),W.hpx=X0(W.hpt)),E.hidden=="1"&&(de=!0,W.hidden=!0),E.outlineLevel!=null&&(de=!0,W.level=+E.outlineLevel),de&&(J[_-1]=W)}break;case"<":Se=b;break}if(Se>=b)break;if(E=Er(y.slice(Se,b),!0),_=E.r!=null?parseInt(E.r,10):_+1,B=-1,!(f.sheetRows&&f.sheetRows<_)){m.s.r>_-1&&(m.s.r=_-1),m.e.r<_-1&&(m.e.r=_-1),f&&f.cellStyles&&(W={},de=!1,E.ht&&(de=!0,W.hpt=parseFloat(E.ht),W.hpx=X0(W.hpt)),E.hidden=="1"&&(de=!0,W.hidden=!0),E.outlineLevel!=null&&(de=!0,W.level=+E.outlineLevel),de&&(J[_-1]=W)),T=y.slice(b).split(t);for(var ge=0;ge!=T.length&&T[ge].trim().charAt(0)=="<";++ge);for(T=T.slice(ge),b=0;b!=T.length;++b)if(y=T[b].trim(),y.length!==0){if(k=y.match(r),D=b,L=0,j=0,y="<c "+(y.slice(0,1)=="<"?">":"")+y,k!=null&&k.length===2){for(D=0,H=k[1],L=0;L!=H.length&&!((j=H.charCodeAt(L)-64)<1||j>26);++L)D=26*D+j;--D,B=D}else++B;for(L=0;L!=y.length&&y.charCodeAt(L)!==62;++L);if(++L,E=Er(y.slice(0,L),!0),E.r||(E.r=vr({r:_-1,c:B})),H=y.slice(L),U={t:""},(k=H.match(s))!=null&&k[1]!==""&&(U.v=xn(k[1])),f.cellFormula){if((k=H.match(i))!=null&&k[1]!==""){if(U.f=xn(Wn(k[1])).replace(/\r\n/g,`
`),f.xlfn||(U.f=B3(U.f)),k[0].indexOf('t="array"')>-1)U.F=(H.match(a)||[])[1],U.F.indexOf(":")>-1&&te.push([vn(U.F),U.F]);else if(k[0].indexOf('t="shared"')>-1){R=Er(k[0]);var pe=xn(Wn(k[1]));f.xlfn||(pe=B3(pe)),ae[parseInt(R.si,10)]=[R,pe,E.r]}}else(k=H.match(/<f[^>]*\/>/))&&(R=Er(k[0]),ae[R.si]&&(U.f=VAe(ae[R.si][1],ae[R.si][2],E.r)));var ye=Ea(E.r);for(L=0;L<te.length;++L)ye.r>=te[L][0].s.r&&ye.r<=te[L][0].e.r&&ye.c>=te[L][0].s.c&&ye.c<=te[L][0].e.c&&(U.F=te[L][1])}if(E.t==null&&U.v===void 0)if(U.f||U.F)U.v=0,U.t="n";else if(P)U.t="z";else continue;else U.t=E.t||"n";switch(m.s.c>B&&(m.s.c=B),m.e.c<B&&(m.e.c=B),U.t){case"n":if(U.v==""||U.v==null){if(!P)continue;U.t="z"}else U.v=parseFloat(U.v);break;case"s":if(typeof U.v>"u"){if(!P)continue;U.t="z"}else Q=Wp[parseInt(U.v,10)],U.v=Q.t,U.r=Q.r,f.cellHTML&&(U.h=Q.h);break;case"str":U.t="s",U.v=U.v!=null?Wn(U.v):"",f.cellHTML&&(U.h=I5(U.v));break;case"inlineStr":k=H.match(n),U.t="s",k!=null&&(Q=z5(k[1]))?(U.v=Q.t,f.cellHTML&&(U.h=Q.h)):U.v="";break;case"b":U.v=oa(U.v);break;case"d":f.cellDates?U.v=ca(U.v,1):(U.v=Bs(ca(U.v,1)),U.t="n");break;case"e":(!f||f.cellText!==!1)&&(U.w=U.v),U.v=$U[U.v];break}if(F=V=0,oe=null,X&&E.s!==void 0&&(oe=g.CellXf[E.s],oe!=null&&(oe.numFmtId!=null&&(F=oe.numFmtId),f.cellStyles&&oe.fillId!=null&&(V=oe.fillId))),q8(U,F,V,f,p,g),f.cellDates&&X&&U.t=="n"&&hm(pr[F])&&(U.t="d",U.v=bw(U.v)),E.cm&&f.xlmeta){var ue=(f.xlmeta.Cell||[])[+E.cm-1];ue&&ue.type=="XLDAPR"&&(U.D=!0)}if(q){var se=Ea(E.r);u[se.r]||(u[se.r]=[]),u[se.r][se.c]=U}else u[E.r]=U}}}}J.length>0&&(u["!rows"]=J)}}();function Wde(t,e,r,n){var a=[],s=[],i=vn(t["!ref"]),o="",c,u="",f=[],m=0,p=0,g=t["!rows"],b=Array.isArray(t),y={r:u},T,k=-1;for(p=i.s.c;p<=i.e.c;++p)f[p]=Ca(p);for(m=i.s.r;m<=i.e.r;++m){for(s=[],u=es(m),p=i.s.c;p<=i.e.c;++p){c=f[p]+u;var D=b?(t[m]||[])[p]:t[c];D!==void 0&&(o=qde(D,c,t,e))!=null&&s.push(o)}(s.length>0||g&&g[m])&&(y={r:u},g&&g[m]&&(T=g[m],T.hidden&&(y.hidden=1),k=-1,T.hpx?k=Tg(T.hpx):T.hpt&&(k=T.hpt),k>-1&&(y.ht=k,y.customHeight=1),T.level&&(y.outlineLevel=T.level)),a[a.length]=Ft("row",s.join(""),y))}if(g)for(;m<g.length;++m)g&&g[m]&&(y={r:m+1},T=g[m],T.hidden&&(y.hidden=1),k=-1,T.hpx?k=Tg(T.hpx):T.hpt&&(k=T.hpt),k>-1&&(y.ht=k,y.customHeight=1),T.level&&(y.outlineLevel=T.level),a[a.length]=Ft("row","",y));return a.join("")}function W8(t,e,r,n){var a=[ts,Ft("worksheet",null,{xmlns:hh[0],"xmlns:r":Ss.r})],s=r.SheetNames[t],i=0,o="",c=r.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",f=vn(u);if(f.e.c>16383||f.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");f.e.c=Math.min(f.e.c,16383),f.e.r=Math.min(f.e.c,1048575),u=Fr(f)}n||(n={}),c["!comments"]=[];var m=[];Fde(c,r,t,e,a),a[a.length]=Ft("dimension",null,{ref:u}),a[a.length]=zde(c,e,t,r),e.sheetFormat&&(a[a.length]=Ft("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=Ode(c,c["!cols"])),a[i=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(o=Wde(c,e),o.length>0&&(a[a.length]=o)),a.length>i+1&&(a[a.length]="</sheetData>",a[i]=a[i].replace("/>",">")),c["!protect"]&&(a[a.length]=Lde(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=Hde(c["!autofilter"],c,r,t)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=kde(c["!merges"]));var p=-1,g,b=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(y){y[1].Target&&(g={ref:y[0]},y[1].Target.charAt(0)!="#"&&(b=jn(n,-1,Qn(y[1].Target).replace(/#.*$/,""),Jr.HLINK),g["r:id"]="rId"+b),(p=y[1].Target.indexOf("#"))>-1&&(g.location=Qn(y[1].Target.slice(p+1))),y[1].Tooltip&&(g.tooltip=Qn(y[1].Tooltip)),a[a.length]=Ft("hyperlink",null,g))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=Pde(c["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(a[a.length]=si("ignoredErrors",Ft("ignoredError",null,{numberStoredAsText:1,sqref:u}))),m.length>0&&(b=jn(n,-1,"../drawings/drawing"+(t+1)+".xml",Jr.DRAW),a[a.length]=Ft("drawing",null,{"r:id":"rId"+b}),c["!drawing"]=m),c["!comments"].length>0&&(b=jn(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Jr.VML),a[a.length]=Ft("legacyDrawing",null,{"r:id":"rId"+b}),c["!legacy"]=b),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function $de(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var a=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function Jde(t,e,r){var n=lt(145),a=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var s=320;a.hpx?s=Tg(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var i=0;a.level&&(i|=a.level),a.hidden&&(i|=16),(a.hpx||a.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var o=0,c=n.l;n.l+=4;for(var u={r:t,c:0},f=0;f<16;++f)if(!(e.s.c>f+1<<10||e.e.c<f<<10)){for(var m=-1,p=-1,g=f<<10;g<f+1<<10;++g){u.c=g;var b=Array.isArray(r)?(r[u.r]||[])[u.c]:r[vr(u)];b&&(m<0&&(m=g),p=g)}m<0||(++o,n.write_shift(4,m),n.write_shift(4,p))}var y=n.l;return n.l=c,n.write_shift(4,o),n.l=y,n.length>n.l?n.slice(0,n.l):n}function Yde(t,e,r,n){var a=Jde(n,r,e);(a.length>17||(e["!rows"]||[])[n])&&yt(t,0,a)}var Xde=xh,Zde=gm;function efe(){}function tfe(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=aie(t),r}function rfe(t,e,r){r==null&&(r=lt(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return u2({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),GU(t,r),r.slice(0,r.l)}function nfe(t){var e=Ol(t);return[e]}function afe(t,e,r){return r==null&&(r=lt(8)),mh(e,r)}function sfe(t){var e=ph(t);return[e]}function ife(t,e,r){return r==null&&(r=lt(4)),gh(e,r)}function ofe(t){var e=Ol(t),r=t.read_shift(1);return[e,r,"b"]}function lfe(t,e,r){return r==null&&(r=lt(9)),mh(e,r),r.write_shift(1,t.v?1:0),r}function cfe(t){var e=ph(t),r=t.read_shift(1);return[e,r,"b"]}function Afe(t,e,r){return r==null&&(r=lt(5)),gh(e,r),r.write_shift(1,t.v?1:0),r}function ufe(t){var e=Ol(t),r=t.read_shift(1);return[e,r,"e"]}function dfe(t,e,r){return r==null&&(r=lt(9)),mh(e,r),r.write_shift(1,t.v),r}function ffe(t){var e=ph(t),r=t.read_shift(1);return[e,r,"e"]}function hfe(t,e,r){return r==null&&(r=lt(8)),gh(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function mfe(t){var e=Ol(t),r=t.read_shift(4);return[e,r,"s"]}function pfe(t,e,r){return r==null&&(r=lt(12)),mh(e,r),r.write_shift(4,e.v),r}function gfe(t){var e=ph(t),r=t.read_shift(4);return[e,r,"s"]}function xfe(t,e,r){return r==null&&(r=lt(8)),gh(e,r),r.write_shift(4,e.v),r}function vfe(t){var e=Ol(t),r=Li(t);return[e,r,"n"]}function wfe(t,e,r){return r==null&&(r=lt(16)),mh(e,r),nh(t.v,r),r}function $8(t){var e=ph(t),r=Li(t);return[e,r,"n"]}function yfe(t,e,r){return r==null&&(r=lt(12)),gh(e,r),nh(t.v,r),r}function bfe(t){var e=Ol(t),r=O5(t);return[e,r,"n"]}function Cfe(t,e,r){return r==null&&(r=lt(12)),mh(e,r),zU(t.v,r),r}function Efe(t){var e=ph(t),r=O5(t);return[e,r,"n"]}function _fe(t,e,r){return r==null&&(r=lt(8)),gh(e,r),zU(t.v,r),r}function Sfe(t){var e=Ol(t),r=M5(t);return[e,r,"is"]}function Tfe(t){var e=Ol(t),r=Mi(t);return[e,r,"str"]}function Bfe(t,e,r){return r==null&&(r=lt(12+4*t.v.length)),mh(e,r),Gs(t.v,r),r.length>r.l?r.slice(0,r.l):r}function Nfe(t){var e=ph(t),r=Mi(t);return[e,r,"str"]}function kfe(t,e,r){return r==null&&(r=lt(8+4*t.v.length)),gh(e,r),Gs(t.v,r),r.length>r.l?r.slice(0,r.l):r}function Ife(t,e,r){var n=t.l+e,a=Ol(t);a.r=r["!row"];var s=t.read_shift(1),i=[a,s,"b"];if(r.cellFormula){t.l+=2;var o=_w(t,n-t.l,r);i[3]=Ni(o,null,a,r.supbooks,r)}else t.l=n;return i}function Ffe(t,e,r){var n=t.l+e,a=Ol(t);a.r=r["!row"];var s=t.read_shift(1),i=[a,s,"e"];if(r.cellFormula){t.l+=2;var o=_w(t,n-t.l,r);i[3]=Ni(o,null,a,r.supbooks,r)}else t.l=n;return i}function Dfe(t,e,r){var n=t.l+e,a=Ol(t);a.r=r["!row"];var s=Li(t),i=[a,s,"n"];if(r.cellFormula){t.l+=2;var o=_w(t,n-t.l,r);i[3]=Ni(o,null,a,r.supbooks,r)}else t.l=n;return i}function Rfe(t,e,r){var n=t.l+e,a=Ol(t);a.r=r["!row"];var s=Mi(t),i=[a,s,"str"];if(r.cellFormula){t.l+=2;var o=_w(t,n-t.l,r);i[3]=Ni(o,null,a,r.supbooks,r)}else t.l=n;return i}var Lfe=xh,Ufe=gm;function Mfe(t,e){return e==null&&(e=lt(4)),e.write_shift(4,t),e}function Pfe(t,e){var r=t.l+e,n=xh(t),a=P5(t),s=Mi(t),i=Mi(t),o=Mi(t);t.l=r;var c={rfx:n,relId:a,loc:s,display:o};return i&&(c.Tooltip=i),c}function jfe(t,e){var r=lt(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));gm({s:Ea(t[0]),e:Ea(t[0])},r),j5("rId"+e,r);var n=t[1].Target.indexOf("#"),a=n==-1?"":t[1].Target.slice(n+1);return Gs(a||"",r),Gs(t[1].Tooltip||"",r),Gs("",r),r.slice(0,r.l)}function Ofe(){}function Qfe(t,e,r){var n=t.l+e,a=qU(t),s=t.read_shift(1),i=[a];if(i[2]=s,r.cellFormula){var o=ude(t,n-t.l,r);i[1]=o}else t.l=n;return i}function Hfe(t,e,r){var n=t.l+e,a=xh(t),s=[a];if(r.cellFormula){var i=fde(t,n-t.l,r);s[1]=i,t.l=n}else t.l=n;return s}function Vfe(t,e,r){r==null&&(r=lt(18));var n=Sw(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return e.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),e.level&&(a|=e.level<<8),r.write_shift(2,a),r}var J8=["left","right","top","bottom","header","footer"];function Gfe(t){var e={};return J8.forEach(function(r){e[r]=Li(t)}),e}function zfe(t,e){return e==null&&(e=lt(48)),qf(t),J8.forEach(function(r){nh(t[r],e)}),e}function qfe(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function Kfe(t,e,r){r==null&&(r=lt(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function Wfe(t){var e=lt(24);return e.write_shift(4,4),e.write_shift(4,1),gm(t,e),e}function $fe(t,e){return e==null&&(e=lt(66)),e.write_shift(2,t.password?q5(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function Jfe(){}function Yfe(){}function Xfe(t,e,r,n,a,s,i){if(!t)return t;var o=e||{};n||(n={"!id":{}});var c=o.dense?[]:{},u,f={s:{r:2e6,c:2e6},e:{r:0,c:0}},m=!1,p=!1,g,b,y,T,k,D,L,j,H,U=[];o.biff=12,o["!row"]=0;var E=0,_=!1,B=[],Q={},R=o.supbooks||a.supbooks||[[]];if(R.sharedf=Q,R.arrayf=B,R.SheetNames=a.SheetNames||a.Sheets.map(function(q){return q.name}),!o.supbooks&&(o.supbooks=R,a.Names))for(var F=0;F<a.Names.length;++F)R[0][F+1]=a.Names[F];var V=[],X=[],oe=!1;Bg[16]={n:"BrtShortReal",f:$8};var te;if(_u(t,function(J,W,de){if(!p)switch(de){case 148:u=J;break;case 0:g=J,o.sheetRows&&o.sheetRows<=g.r&&(p=!0),j=es(T=g.r),o["!row"]=g.r,(J.hidden||J.hpt||J.level!=null)&&(J.hpt&&(J.hpx=X0(J.hpt)),X[J.r]=J);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(b={t:J[2]},J[2]){case"n":b.v=J[1];break;case"s":L=Wp[J[1]],b.v=L.t,b.r=L.r;break;case"b":b.v=!!J[1];break;case"e":b.v=J[1],o.cellText!==!1&&(b.w=Su[b.v]);break;case"str":b.t="s",b.v=J[1];break;case"is":b.t="s",b.v=J[1].t;break}if((y=i.CellXf[J[0].iStyleRef])&&q8(b,y.numFmtId,null,o,s,i),k=J[0].c==-1?k+1:J[0].c,o.dense?(c[T]||(c[T]=[]),c[T][k]=b):c[Ca(k)+j]=b,o.cellFormula){for(_=!1,E=0;E<B.length;++E){var P=B[E];g.r>=P[0].s.r&&g.r<=P[0].e.r&&k>=P[0].s.c&&k<=P[0].e.c&&(b.F=Fr(P[0]),_=!0)}!_&&J.length>3&&(b.f=J[3])}if(f.s.r>g.r&&(f.s.r=g.r),f.s.c>k&&(f.s.c=k),f.e.r<g.r&&(f.e.r=g.r),f.e.c<k&&(f.e.c=k),o.cellDates&&y&&b.t=="n"&&hm(pr[y.numFmtId])){var K=Mf(b.v);K&&(b.t="d",b.v=new Date(K.y,K.m-1,K.d,K.H,K.M,K.S,K.u))}te&&(te.type=="XLDAPR"&&(b.D=!0),te=void 0);break;case 1:case 12:if(!o.sheetStubs||m)break;b={t:"z",v:void 0},k=J[0].c==-1?k+1:J[0].c,o.dense?(c[T]||(c[T]=[]),c[T][k]=b):c[Ca(k)+j]=b,f.s.r>g.r&&(f.s.r=g.r),f.s.c>k&&(f.s.c=k),f.e.r<g.r&&(f.e.r=g.r),f.e.c<k&&(f.e.c=k),te&&(te.type=="XLDAPR"&&(b.D=!0),te=void 0);break;case 176:U.push(J);break;case 49:te=((o.xlmeta||{}).Cell||[])[J-1];break;case 494:var Y=n["!id"][J.relId];for(Y?(J.Target=Y.Target,J.loc&&(J.Target+="#"+J.loc),J.Rel=Y):J.relId==""&&(J.Target="#"+J.loc),T=J.rfx.s.r;T<=J.rfx.e.r;++T)for(k=J.rfx.s.c;k<=J.rfx.e.c;++k)o.dense?(c[T]||(c[T]=[]),c[T][k]||(c[T][k]={t:"z",v:void 0}),c[T][k].l=J):(D=vr({c:k,r:T}),c[D]||(c[D]={t:"z",v:void 0}),c[D].l=J);break;case 426:if(!o.cellFormula)break;B.push(J),H=o.dense?c[T][k]:c[Ca(k)+j],H.f=Ni(J[1],f,{r:g.r,c:k},R,o),H.F=Fr(J[0]);break;case 427:if(!o.cellFormula)break;Q[vr(J[0].s)]=J[1],H=o.dense?c[T][k]:c[Ca(k)+j],H.f=Ni(J[1],f,{r:g.r,c:k},R,o);break;case 60:if(!o.cellStyles)break;for(;J.e>=J.s;)V[J.e--]={width:J.w/256,hidden:!!(J.flags&1),level:J.level},oe||(oe=!0,K5(J.w/256)),Wd(V[J.e+1]);break;case 161:c["!autofilter"]={ref:Fr(J)};break;case 476:c["!margins"]=J;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),J.name&&(a.Sheets[r].CodeName=J.name),(J.above||J.left)&&(c["!outline"]={above:J.above,left:J.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),J.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:m=!0;break;case 36:m=!1;break;case 37:m=!0;break;case 38:m=!1;break;default:if(!W.T){if(!m||o.WTF)throw new Error("Unexpected record 0x"+de.toString(16))}}},o),delete o.supbooks,delete o["!row"],!c["!ref"]&&(f.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=Fr(u||f)),o.sheetRows&&c["!ref"]){var ae=vn(c["!ref"]);o.sheetRows<=+ae.e.r&&(ae.e.r=o.sheetRows-1,ae.e.r>f.e.r&&(ae.e.r=f.e.r),ae.e.r<ae.s.r&&(ae.s.r=ae.e.r),ae.e.c>f.e.c&&(ae.e.c=f.e.c),ae.e.c<ae.s.c&&(ae.s.c=ae.e.c),c["!fullref"]=c["!ref"],c["!ref"]=Fr(ae))}return U.length>0&&(c["!merges"]=U),V.length>0&&(c["!cols"]=V),X.length>0&&(c["!rows"]=X),c}function Zfe(t,e,r,n,a,s,i){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=Aa(e),e.z=e.z||pr[14],e.v=Bs(ca(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var c={r,c:n};switch(c.s=nf(a.cellXfs,e,a),e.l&&s["!links"].push([vr(c),e.l]),e.c&&s["!comments"].push([vr(c),e.c]),e.t){case"s":case"str":return a.bookSST?(o=X5(a.Strings,e.v,a.revStrings),c.t="s",c.v=o,i?yt(t,18,xfe(e,c)):yt(t,7,pfe(e,c))):(c.t="str",i?yt(t,17,kfe(e,c)):yt(t,6,Bfe(e,c))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?i?yt(t,13,_fe(e,c)):yt(t,2,Cfe(e,c)):i?yt(t,16,yfe(e,c)):yt(t,5,wfe(e,c)),!0;case"b":return c.t="b",i?yt(t,15,Afe(e,c)):yt(t,4,lfe(e,c)),!0;case"e":return c.t="e",i?yt(t,14,hfe(e,c)):yt(t,3,dfe(e,c)),!0}return i?yt(t,12,ife(e,c)):yt(t,1,afe(e,c)),!0}function ehe(t,e,r,n){var a=vn(e["!ref"]||"A1"),s,i="",o=[];yt(t,145);var c=Array.isArray(e),u=a.e.r;e["!rows"]&&(u=Math.max(a.e.r,e["!rows"].length-1));for(var f=a.s.r;f<=u;++f){i=es(f),Yde(t,e,a,f);var m=!1;if(f<=a.e.r)for(var p=a.s.c;p<=a.e.c;++p){f===a.s.r&&(o[p]=Ca(p)),s=o[p]+i;var g=c?(e[f]||[])[p]:e[s];if(!g){m=!1;continue}m=Zfe(t,g,f,p,n,e,m)}}yt(t,146)}function the(t,e){!e||!e["!merges"]||(yt(t,177,Mfe(e["!merges"].length)),e["!merges"].forEach(function(r){yt(t,176,Ufe(r))}),yt(t,178))}function rhe(t,e){!e||!e["!cols"]||(yt(t,390),e["!cols"].forEach(function(r,n){r&&yt(t,60,Vfe(n,r))}),yt(t,391))}function nhe(t,e){!e||!e["!ref"]||(yt(t,648),yt(t,649,Wfe(vn(e["!ref"]))),yt(t,650))}function ahe(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var a=jn(r,-1,n[1].Target.replace(/#.*$/,""),Jr.HLINK);yt(t,494,jfe(n,a))}}),delete e["!links"]}function she(t,e,r,n){if(e["!comments"].length>0){var a=jn(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Jr.VML);yt(t,551,j5("rId"+a)),e["!legacy"]=a}}function ihe(t,e,r,n){if(e["!autofilter"]){var a=e["!autofilter"],s=typeof a.ref=="string"?a.ref:Fr(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=Eo(s);o.s.r==o.e.r&&(o.e.r=Eo(e["!ref"]).e.r,s=Fr(o));for(var c=0;c<i.length;++c){var u=i[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}c==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),yt(t,161,gm(vn(s))),yt(t,162)}}function ohe(t,e,r){yt(t,133),yt(t,137,Kfe(e,r)),yt(t,138),yt(t,134)}function lhe(t,e){e["!protect"]&&yt(t,535,$fe(e["!protect"]))}function che(t,e,r,n){var a=bo(),s=r.SheetNames[t],i=r.Sheets[s]||{},o=s;try{r&&r.Workbook&&(o=r.Workbook.Sheets[t].CodeName||o)}catch{}var c=vn(i["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(e.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],yt(a,129),(r.vbaraw||i["!outline"])&&yt(a,147,rfe(o,i["!outline"])),yt(a,148,Zde(c)),ohe(a,i,r.Workbook),rhe(a,i),ehe(a,i,t,e),lhe(a,i),ihe(a,i,r,t),the(a,i),ahe(a,i,n),i["!margins"]&&yt(a,476,zfe(i["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&nhe(a,i),she(a,i,t,n),yt(a,130),a.end()}function Ahe(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var i=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(e[+i[1]]=r?+i[2]:i[2])});var a=xn((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[e,a,n]}function uhe(t,e,r,n,a,s){var i=s||{"!type":"chart"};if(!t)return s;var o=0,c=0,u="A",f={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(m){var p=Ahe(m);f.s.r=f.s.c=0,f.e.c=o,u=Ca(o),p[0].forEach(function(g,b){i[u+es(b)]={t:"n",v:g,z:p[1]},c=b}),f.e.r<c&&(f.e.r=c),++o}),o>0&&(i["!ref"]=Fr(f)),i}function dhe(t,e,r,n,a){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i,o=t.match(K8);return o&&Z5(o[0],s,a,r),(i=t.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=i[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function fhe(t,e){t.l+=10;var r=Mi(t);return{name:r}}function hhe(t,e,r,n,a){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i=!1;return _u(t,function(c,u,f){switch(f){case 550:s["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||e.WTF)throw new Error("Unexpected record 0x"+f.toString(16))}}}},e),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var eS=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],mhe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],phe=[],ghe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function D3(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],a=0;a!=e.length;++a){var s=e[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=oa(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function R3(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=oa(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function Y8(t){R3(t.WBProps,eS),R3(t.CalcPr,ghe),D3(t.WBView,mhe),D3(t.Sheets,phe),O0.date1904=oa(t.WBProps.date1904)}function xhe(t){return!t.Workbook||!t.Workbook.WBProps?"false":oa(t.Workbook.WBProps.date1904)?"true":"false"}var vhe="][*?/\\".split("");function X8(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return vhe.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function whe(t,e,r){t.forEach(function(n,a){X8(n);for(var s=0;s<a;++s)if(n==t[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=e&&e[a]&&e[a].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function yhe(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];whe(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)xde(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}var bhe=/<\w+:workbook/;function Che(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},i=0;if(t.replace(Qi,function(c,u){var f=Er(c);switch(bA(f[0])){case"<?xml":break;case"<workbook":c.match(bhe)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=f[a];break;case"</workbook>":break;case"<fileVersion":delete f[0],r.AppVersion=f;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":eS.forEach(function(m){if(f[m[0]]!=null)switch(m[2]){case"bool":r.WBProps[m[0]]=oa(f[m[0]]);break;case"int":r.WBProps[m[0]]=parseInt(f[m[0]],10);break;default:r.WBProps[m[0]]=f[m[0]]}}),f.codeName&&(r.WBProps.CodeName=Wn(f.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete f[0],r.WBView.push(f);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(f.state){case"hidden":f.Hidden=1;break;case"veryHidden":f.Hidden=2;break;default:f.Hidden=0}delete f.state,f.name=xn(Wn(f.name)),delete f[0],r.Sheets.push(f);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=Wn(f.name),f.comment&&(s.Comment=f.comment),f.localSheetId&&(s.Sheet=+f.localSheetId),oa(f.hidden||"0")&&(s.Hidden=!0),i=u+c.length;break;case"</definedName>":s.Ref=xn(Wn(t.slice(i,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete f[0],r.CalcPr=f;break;case"<calcPr/>":delete f[0],r.CalcPr=f;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+f[0]+" in workbook")}return c}),hh.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return Y8(r),r}function Z8(t){var e=[ts];e[e.length]=Ft("workbook",null,{xmlns:hh[0],"xmlns:r":Ss.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(eS.forEach(function(o){t.Workbook.WBProps[o[0]]!=null&&t.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=t.Workbook.WBProps[o[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=Ft("workbookPr",null,n);var a=t.Workbook&&t.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var i={name:Qn(t.SheetNames[s].slice(0,31))};if(i.sheetId=""+(s+1),i["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}e[e.length]=Ft("sheet",null,i)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(o){var c={name:o.Name};o.Comment&&(c.comment=o.Comment),o.Sheet!=null&&(c.localSheetId=""+o.Sheet),o.Hidden&&(c.hidden="1"),o.Ref&&(e[e.length]=Ft("definedName",Qn(o.Ref),c))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function Ehe(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=yE(t),r.name=Mi(t),r}function _he(t,e){return e||(e=lt(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),j5(t.strRelID,e),Gs(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function She(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var a=e>8?Mi(t):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function The(t,e){e||(e=lt(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),GU(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function Bhe(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function Nhe(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var a=t.read_shift(4),s=sie(t),i=dde(t,0,r),o=P5(t);t.l=n;var c={Name:s,Ptg:i};return a<268435455&&(c.Sheet=a),o&&(c.Comment=o),c}function khe(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;e||(e={}),e.biff=12;var s=[],i=[[]];return i.SheetNames=[],i.XTI=[],Bg[16]={n:"BrtFRTArchID$",f:Bhe},_u(t,function(c,u,f){switch(f){case 156:i.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(e.SID=c.Sheet),c.Ref=Ni(c.Ptg,null,null,i,e),delete e.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([f,c]):i[0]=[f,c],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(c),i.XTI=i.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(f),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(f),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}},e),Y8(r),r.Names=s,r.supbooks=i,r}function Ihe(t,e){yt(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};yt(t,156,_he(a))}yt(t,144)}function Fhe(t,e){e||(e=lt(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return Gs("SheetJS",e),Gs(a2.version,e),Gs(a2.version,e),Gs("7262",e),e.length>e.l?e.slice(0,e.l):e}function Dhe(t,e){e||(e=lt(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function Rhe(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(yt(t,135),yt(t,158,Dhe(a)),yt(t,136))}}function Lhe(t,e){var r=bo();return yt(r,131),yt(r,128,Fhe()),yt(r,153,The(t.Workbook&&t.Workbook.WBProps||null)),Rhe(r,t),Ihe(r,t),yt(r,132),r.end()}function Uhe(t,e,r){return e.slice(-4)===".bin"?khe(t,r):Che(t,r)}function Mhe(t,e,r,n,a,s,i,o){return e.slice(-4)===".bin"?Xfe(t,n,r,a,s,i,o):Nde(t,n,r,a,s,i,o)}function Phe(t,e,r,n,a,s,i,o){return e.slice(-4)===".bin"?hhe(t,n,r,a,s):dhe(t,n,r,a,s)}function jhe(t,e,r,n,a,s,i,o){return e.slice(-4)===".bin"?QAe():HAe()}function Ohe(t,e,r,n,a,s,i,o){return e.slice(-4)===".bin"?jAe():OAe()}function Qhe(t,e,r,n){return e.slice(-4)===".bin"?Uce(t,r,n):Ece(t,r,n)}function Hhe(t,e,r){return D8(t,r)}function Vhe(t,e,r){return e.slice(-4)===".bin"?Vle(t,r):Ole(t,r)}function Ghe(t,e,r){return e.slice(-4)===".bin"?RAe(t,r):_Ae(t,r)}function zhe(t,e,r){return e.slice(-4)===".bin"?bAe(t):wAe(t)}function qhe(t,e,r,n){return r.slice(-4)===".bin"?CAe(t,e,r,n):void 0}function Khe(t,e,r){return e.slice(-4)===".bin"?gAe(t,e,r):vAe(t,e,r)}function Whe(t,e,r){return(e.slice(-4)===".bin"?Lhe:Z8)(t)}function $he(t,e,r,n,a){return(e.slice(-4)===".bin"?che:W8)(t,r,n,a)}function Jhe(t,e,r){return(e.slice(-4)===".bin"?qce:I8)(t,r)}function Yhe(t,e,r){return(e.slice(-4)===".bin"?qle:C8)(t,r)}function Xhe(t,e,r){return(e.slice(-4)===".bin"?LAe:U8)(t)}function Zhe(t){return(t.slice(-4)===".bin"?xAe:R8)()}var eM=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,tM=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function dc(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=t.match(eM),s,i,o,c;if(a)for(c=0;c!=a.length;++c)s=a[c].match(tM),(i=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),n[o]=s[2].slice(1,s[2].length-1));return n}function e0e(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(eM),a,s,i,o;if(n)for(o=0;o!=n.length;++o)a=n[o].match(tM),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?i="xmlns"+a[1].slice(6):i=a[1].slice(s+1),r[i]=a[2].slice(1,a[2].length-1));return r}var Jp;function t0e(t,e){var r=Jp[t]||xn(t);return r==="General"?th(e):jl(r,e)}function r0e(t,e,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=oa(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=ca(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[xn(e)]=a}function n0e(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||Su[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=vg(t.v):t.w=th(t.v):t.w=t0e(e||"General",t.v)}catch(s){if(r.WTF)throw s}try{var n=Jp[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&hm(n)){var a=Mf(t.v);a&&(t.t="d",t.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function a0e(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=pce[n.Pattern]||n.Pattern)}t[e.ID]=e}function s0e(t,e,r,n,a,s,i,o,c,u){var f="General",m=n.StyleID,p={};u=u||{};var g=[],b=0;for(m===void 0&&o&&(m=o.StyleID),m===void 0&&i&&(m=i.StyleID);s[m]!==void 0&&(s[m].nf&&(f=s[m].nf),s[m].Interior&&g.push(s[m].Interior),!!s[m].Parent);)m=s[m].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=oa(t);break;case"String":n.t="s",n.r=YI(xn(t)),n.v=t.indexOf("<")>-1?xn(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(ca(t)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=xn(t):n.v<60&&(n.v=n.v-1),(!f||f=="General")&&(f="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=$U[t],u.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=YI(e||t));break}if(n0e(n,f,u),u.cellFormula!==!1)if(n.Formula){var y=xn(n.Formula);y.charCodeAt(0)==61&&(y=y.slice(1)),n.f=j0(y,a),delete n.Formula,n.ArrayRange=="RC"?n.F=j0("RC:RC",a):n.ArrayRange&&(n.F=j0(n.ArrayRange,a),c.push([vn(n.F),n.F]))}else for(b=0;b<c.length;++b)a.r>=c[b][0].s.r&&a.r<=c[b][0].e.r&&a.c>=c[b][0].s.c&&a.c<=c[b][0].e.c&&(n.F=c[b][1]);u.cellStyles&&(g.forEach(function(T){!p.patternType&&T.patternType&&(p.patternType=T.patternType)}),n.s=p),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function i0e(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function Vb(t,e){var r=e||{};mm();var n=Cp(F5(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Wn(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var i=Aa(r);return i.type="string",Y0.to_workbook(n,i)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(it){a.indexOf("<"+it)>=0&&(s=!0)}),s)return z0e(n,r);Jp={"General Number":"General","General Date":pr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":pr[15],"Short Date":pr[14],"Long Time":pr[19],"Medium Time":pr[18],"Short Time":pr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:pr[2],Standard:pr[4],Percent:pr[10],Scientific:pr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,c=[],u,f={},m=[],p=r.dense?[]:{},g="",b={},y={},T=dc('<Data ss:Type="String">'),k=0,D=0,L=0,j={s:{r:2e6,c:2e6},e:{r:0,c:0}},H={},U={},E="",_=0,B=[],Q={},R={},F=0,V=[],X=[],oe={},te=[],ae,q=!1,J=[],W=[],de={},P=0,K=0,Y={Sheets:[],WBProps:{date1904:!1}},ee={};bg.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var Ae="";o=bg.exec(n);)switch(o[3]=(Ae=o[3]).toLowerCase()){case"data":if(Ae=="data"){if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break}if(c[c.length-1][1])break;o[1]==="/"?s0e(n.slice(k,o.index),E,T,c[c.length-1][0]=="comment"?oe:b,{c:D,r:L},H,te[D],y,J,r):(E="",T=dc(o[0]),k=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(X.length>0&&(b.c=X),(!r.sheetRows||r.sheetRows>L)&&b.v!==void 0&&(r.dense?(p[L]||(p[L]=[]),p[L][D]=b):p[Ca(D)+es(L)]=b),b.HRef&&(b.l={Target:xn(b.HRef)},b.HRefScreenTip&&(b.l.Tooltip=b.HRefScreenTip),delete b.HRef,delete b.HRefScreenTip),(b.MergeAcross||b.MergeDown)&&(P=D+(parseInt(b.MergeAcross,10)|0),K=L+(parseInt(b.MergeDown,10)|0),B.push({s:{c:D,r:L},e:{c:P,r:K}})),!r.sheetStubs)b.MergeAcross?D=P+1:++D;else if(b.MergeAcross||b.MergeDown){for(var Se=D;Se<=P;++Se)for(var ge=L;ge<=K;++ge)(Se>D||ge>L)&&(r.dense?(p[ge]||(p[ge]=[]),p[ge][Se]={t:"z"}):p[Ca(Se)+es(ge)]={t:"z"});D=P+1}else++D;else b=e0e(o[0]),b.Index&&(D=+b.Index-1),D<j.s.c&&(j.s.c=D),D>j.e.c&&(j.e.c=D),o[0].slice(-2)==="/>"&&++D,X=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(L<j.s.r&&(j.s.r=L),L>j.e.r&&(j.e.r=L),o[0].slice(-2)==="/>"&&(y=dc(o[0]),y.Index&&(L=+y.Index-1)),D=0,++L):(y=dc(o[0]),y.Index&&(L=+y.Index-1),de={},(y.AutoFitHeight=="0"||y.Height)&&(de.hpx=parseInt(y.Height,10),de.hpt=Tg(de.hpx),W[L]=de),y.Hidden=="1"&&(de.hidden=!0,W[L]=de));break;case"worksheet":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));m.push(g),j.s.r<=j.e.r&&j.s.c<=j.e.c&&(p["!ref"]=Fr(j),r.sheetRows&&r.sheetRows<=j.e.r&&(p["!fullref"]=p["!ref"],j.e.r=r.sheetRows-1,p["!ref"]=Fr(j))),B.length&&(p["!merges"]=B),te.length>0&&(p["!cols"]=te),W.length>0&&(p["!rows"]=W),f[g]=p}else j={s:{r:2e6,c:2e6},e:{r:0,c:0}},L=D=0,c.push([o[3],!1]),u=dc(o[0]),g=xn(u.Name),p=r.dense?[]:{},B=[],J=[],W=[],ee={name:g,Hidden:0},Y.Sheets.push(ee);break;case"table":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;c.push([o[3],!1]),te=[],q=!1}break;case"style":o[1]==="/"?a0e(H,U,r):U=dc(o[0]);break;case"numberformat":U.nf=xn(dc(o[0]).Format||"General"),Jp[U.nf]&&(U.nf=Jp[U.nf]);for(var pe=0;pe!=392&&pr[pe]!=U.nf;++pe);if(pe==392){for(pe=57;pe!=392;++pe)if(pr[pe]==null){uu(U.nf,pe);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(ae=dc(o[0]),ae.Hidden&&(ae.hidden=!0,delete ae.Hidden),ae.Width&&(ae.wpx=parseInt(ae.Width,10)),!q&&ae.wpx>10){q=!0,Fi=N8;for(var ye=0;ye<te.length;++ye)te[ye]&&Wd(te[ye])}q&&Wd(ae),te[ae.Index-1||te.length]=ae;for(var ue=0;ue<+ae.Span;++ue)te[te.length]=Aa(ae);break;case"namedrange":if(o[1]==="/")break;Y.Names||(Y.Names=[]);var se=Er(o[0]),Pe={Name:se.Name,Ref:j0(se.RefersTo.slice(1),{r:0,c:0})};Y.Sheets.length>0&&(Pe.Sheet=Y.Sheets.length-1),Y.Names.push(Pe);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?E+=n.slice(_,o.index):_=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;U.Interior=dc(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?kie(Q,Ae,n.slice(F,o.index)):F=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else c.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));i0e(oe),X.push(oe)}else c.push([o[3],!1]),u=dc(o[0]),oe={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var at=dc(o[0]);p["!autofilter"]={ref:j0(at.Range).replace(/\$/g,"")},c.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"null":break;default:if(c.length==0&&o[3]=="document"||c.length==0&&o[3]=="uof")return j3(n,r);var De=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:De=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:De=!1}break;case"excelworkbook":switch(o[3]){case"date1904":Y.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:De=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:De=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(F,o.index)){case"SheetHidden":ee.Hidden=1;break;case"SheetVeryHidden":ee.Hidden=2;break}else F=o.index+o[0].length;break;case"header":p["!margins"]||qf(p["!margins"]={},"xlml"),isNaN(+Er(o[0]).Margin)||(p["!margins"].header=+Er(o[0]).Margin);break;case"footer":p["!margins"]||qf(p["!margins"]={},"xlml"),isNaN(+Er(o[0]).Margin)||(p["!margins"].footer=+Er(o[0]).Margin);break;case"pagemargins":var Ee=Er(o[0]);p["!margins"]||qf(p["!margins"]={},"xlml"),isNaN(+Ee.Top)||(p["!margins"].top=+Ee.Top),isNaN(+Ee.Left)||(p["!margins"].left=+Ee.Left),isNaN(+Ee.Right)||(p["!margins"].right=+Ee.Right),isNaN(+Ee.Bottom)||(p["!margins"].bottom=+Ee.Bottom);break;case"displayrighttoleft":Y.Views||(Y.Views=[]),Y.Views[0]||(Y.Views[0]={}),Y.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:De=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:De=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:De=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:De=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:De=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:De=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:De=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:De=!1}break;case"smarttags":break;default:De=!1;break}if(De||o[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?r0e(R,Ae,V,n.slice(F,o.index)):(V=o,F=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+c.join("|")}var Le={};return!r.bookSheets&&!r.bookProps&&(Le.Sheets=f),Le.SheetNames=m,Le.Workbook=Y,Le.SSF=Aa(pr),Le.Props=Q,Le.Custprops=R,Le}function BE(t,e){switch(rS(e=e||{}),e.type||"base64"){case"base64":return Vb(Zo(t),e);case"binary":case"buffer":case"file":return Vb(t,e);case"array":return Vb(tf(t),e)}}function o0e(t,e){var r=[];return t.Props&&r.push(Iie(t.Props,e)),t.Custprops&&r.push(Fie(t.Props,t.Custprops)),r.join("")}function l0e(){return""}function c0e(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,a){var s=[];s.push(Ft("NumberFormat",null,{"ss:Format":Qn(pr[n.numFmtId])}));var i={"ss:ID":"s"+(21+a)};r.push(Ft("Style",s.join(""),i))}),Ft("Styles",r.join(""))}function rM(t){return Ft("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+J5(t.Ref,{r:0,c:0})})}function A0e(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var a=e[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(rM(a)))}return Ft("Names",r.join(""))}function u0e(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],i=0;i<a.length;++i){var o=a[i];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||s.push(rM(o)))}return s.join("")}function d0e(t,e,r,n){if(!t)return"";var a=[];if(t["!margins"]&&(a.push("<PageSetup>"),t["!margins"].header&&a.push(Ft("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&a.push(Ft("Footer",null,{"x:Margin":t["!margins"].footer})),a.push(Ft("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(Ft("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),t["!protect"]&&(a.push(si("ProtectContents","True")),t["!protect"].objects&&a.push(si("ProtectObjects","True")),t["!protect"].scenarios&&a.push(si("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?a.push(si("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&a.push(si("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){t["!protect"][i[0]]&&a.push("<"+i[1]+"/>")})),a.length==0?"":Ft("WorksheetOptions",a.join(""),{xmlns:zo.x})}function f0e(t){return t.map(function(e){var r=Rse(e.t||""),n=Ft("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Ft("Comment",n,{"ss:Author":e.a})}).join("")}function h0e(t,e,r,n,a,s,i){if(!t||t.v==null&&t.f==null)return"";var o={};if(t.f&&(o["ss:Formula"]="="+Qn(J5(t.f,i))),t.F&&t.F.slice(0,e.length)==e){var c=Ea(t.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(c.r==i.r?"":"["+(c.r-i.r)+"]")+"C"+(c.c==i.c?"":"["+(c.c-i.c)+"]")}if(t.l&&t.l.Target&&(o["ss:HRef"]=Qn(t.l.Target),t.l.Tooltip&&(o["x:HRefScreenTip"]=Qn(t.l.Tooltip))),r["!merges"])for(var u=r["!merges"],f=0;f!=u.length;++f)u[f].s.c!=i.c||u[f].s.r!=i.r||(u[f].e.c>u[f].s.c&&(o["ss:MergeAcross"]=u[f].e.c-u[f].s.c),u[f].e.r>u[f].s.r&&(o["ss:MergeDown"]=u[f].e.r-u[f].s.r));var m="",p="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":m="Number",p=String(t.v);break;case"b":m="Boolean",p=t.v?"1":"0";break;case"e":m="Error",p=Su[t.v];break;case"d":m="DateTime",p=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||pr[14]);break;case"s":m="String",p=Dse(t.v||"");break}var g=nf(n.cellXfs,t,n);o["ss:StyleID"]="s"+(21+g),o["ss:Index"]=i.c+1;var b=t.v!=null?p:"",y=t.t=="z"?"":'<Data ss:Type="'+m+'">'+b+"</Data>";return(t.c||[]).length>0&&(y+=f0e(t.c)),Ft("Cell",y,o)}function m0e(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=X0(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function p0e(t,e,r,n){if(!t["!ref"])return"";var a=vn(t["!ref"]),s=t["!merges"]||[],i=0,o=[];t["!cols"]&&t["!cols"].forEach(function(T,k){Wd(T);var D=!!T.width,L=Sw(k,T),j={"ss:Index":k+1};D&&(j["ss:Width"]=_g(L.width)),T.hidden&&(j["ss:Hidden"]="1"),o.push(Ft("Column",null,j))});for(var c=Array.isArray(t),u=a.s.r;u<=a.e.r;++u){for(var f=[m0e(u,(t["!rows"]||[])[u])],m=a.s.c;m<=a.e.c;++m){var p=!1;for(i=0;i!=s.length;++i)if(!(s[i].s.c>m)&&!(s[i].s.r>u)&&!(s[i].e.c<m)&&!(s[i].e.r<u)){(s[i].s.c!=m||s[i].s.r!=u)&&(p=!0);break}if(!p){var g={r:u,c:m},b=vr(g),y=c?(t[u]||[])[m]:t[b];f.push(h0e(y,b,t,e,r,n,g))}}f.push("</Row>"),f.length>2&&o.push(f.join(""))}return o.join("")}function g0e(t,e,r){var n=[],a=r.SheetNames[t],s=r.Sheets[a],i=s?u0e(s,e,t,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=s?p0e(s,e,t,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(d0e(s,e,t,r)),n.join("")}function x0e(t,e){e||(e={}),t.SSF||(t.SSF=Aa(pr)),t.SSF&&(mm(),vw(t.SSF),e.revssf=yw(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],nf(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(o0e(t,e)),r.push(l0e()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(Ft("Worksheet",g0e(n,e,t),{"ss:Name":Qn(t.SheetNames[n])}));return r[2]=c0e(t,e),r[3]=A0e(t),ts+Ft("Workbook",r.join(""),{xmlns:zo.ss,"xmlns:o":zo.o,"xmlns:x":zo.x,"xmlns:ss":zo.ss,"xmlns:dt":zo.dt,"xmlns:html":zo.html})}function v0e(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=Aie(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=uie(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var w0e=[60,1084,2066,2165,2175];function y0e(t,e,r,n,a){var s=n,i=[],o=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(o)}i.push(o),r.l+=s;for(var c=ou(r,r.l),u=NE[c],f=0;u!=null&&w0e.indexOf(c)>-1;)s=ou(r,r.l+2),f=r.l+4,c==2066?f+=4:(c==2165||c==2175)&&(f+=12),o=r.slice(f,r.l+4+s),i.push(o),r.l+=4+s,u=NE[c=ou(r,r.l)];var m=Vs(i);ni(m,0);var p=0;m.lens=[];for(var g=0;g<i.length;++g)m.lens.push(p),p+=i[g].length;if(m.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+m.length+" < "+n;return e.f(m,m.length,a)}function rA(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=pr[n])}catch(s){if(e.WTF)throw s}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||Su[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=vg(t.v):t.w=th(t.v):t.w=jl(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(s){if(e.WTF)throw s}if(e.cellDates&&n&&t.t=="n"&&hm(pr[n]||String(n))){var a=Mf(t.v);a&&(t.t="d",t.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function D1(t,e,r){return{v:t,ixfe:e,t:r}}function b0e(t,e){var r={opts:{}},n={},a=e.dense?[]:{},s={},i={},o=null,c=[],u="",f={},m,p="",g,b,y,T,k={},D=[],L,j,H=[],U=[],E={Sheets:[],WBProps:{date1904:!1},Views:[{}]},_={},B=function(It){return It<8?Vf[It]:It<64&&U[It-8]||Vf[It]},Q=function(It,_t,Yr){var tr=_t.XF.data;if(!(!tr||!tr.patternType||!Yr||!Yr.cellStyles)){_t.s={},_t.s.patternType=tr.patternType;var $n;($n=Eg(B(tr.icvFore)))&&(_t.s.fgColor={rgb:$n}),($n=Eg(B(tr.icvBack)))&&(_t.s.bgColor={rgb:$n})}},R=function(It,_t,Yr){if(!(de>1)&&!(Yr.sheetRows&&It.r>=Yr.sheetRows)){if(Yr.cellStyles&&_t.XF&&_t.XF.data&&Q(It,_t,Yr),delete _t.ixfe,delete _t.XF,m=It,p=vr(It),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),It.r<i.s.r&&(i.s.r=It.r),It.c<i.s.c&&(i.s.c=It.c),It.r+1>i.e.r&&(i.e.r=It.r+1),It.c+1>i.e.c&&(i.e.c=It.c+1),Yr.cellFormula&&_t.f){for(var tr=0;tr<D.length;++tr)if(!(D[tr][0].s.c>It.c||D[tr][0].s.r>It.r)&&!(D[tr][0].e.c<It.c||D[tr][0].e.r<It.r)){_t.F=Fr(D[tr][0]),(D[tr][0].s.c!=It.c||D[tr][0].s.r!=It.r)&&delete _t.f,_t.f&&(_t.f=""+Ni(D[tr][1],i,It,J,F));break}}Yr.dense?(a[It.r]||(a[It.r]=[]),a[It.r][It.c]=_t):a[p]=_t}},F={enc:!1,sbcch:0,snames:[],sharedf:k,arrayf:D,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(F.password=e.password);var V,X=[],oe=[],te=[],ae=[],q=!1,J=[];J.SheetNames=F.snames,J.sharedf=F.sharedf,J.arrayf=F.arrayf,J.names=[],J.XTI=[];var W=0,de=0,P=0,K=[],Y=[],ee;F.codepage=1200,pc(1200);for(var Ae=!1;t.l<t.length-1;){var Se=t.l,ge=t.read_shift(2);if(ge===0&&W===10)break;var pe=t.l===t.length?0:t.read_shift(2),ye=NE[ge];if(ye&&ye.f){if(e.bookSheets&&W===133&&ge!==133)break;if(W=ge,ye.r===2||ye.r==12){var ue=t.read_shift(2);if(pe-=2,!F.enc&&ue!==ge&&((ue&255)<<8|ue>>8)!==ge)throw new Error("rt mismatch: "+ue+"!="+ge);ye.r==12&&(t.l+=10,pe-=10)}var se={};if(ge===10?se=ye.f(t,pe,F):se=y0e(ge,ye,t,pe,F),de==0&&[9,521,1033,2057].indexOf(W)===-1)continue;switch(ge){case 34:r.opts.Date1904=E.WBProps.date1904=se;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(F.enc||(t.l=0),F.enc=se,!e.password)throw new Error("File is password-protected");if(se.valid==null)throw new Error("Encryption scheme unsupported");if(!se.valid)throw new Error("Password is incorrect");break;case 92:F.lastuser=se;break;case 66:var Pe=Number(se);switch(Pe){case 21010:Pe=1200;break;case 32768:Pe=1e4;break;case 32769:Pe=1252;break}pc(F.codepage=Pe),Ae=!0;break;case 317:F.rrtabid=se;break;case 25:F.winlocked=se;break;case 439:r.opts.RefreshAll=se;break;case 12:r.opts.CalcCount=se;break;case 16:r.opts.CalcDelta=se;break;case 17:r.opts.CalcIter=se;break;case 13:r.opts.CalcMode=se;break;case 14:r.opts.CalcPrecision=se;break;case 95:r.opts.CalcSaveRecalc=se;break;case 15:F.CalcRefMode=se;break;case 2211:r.opts.FullCalc=se;break;case 129:se.fDialog&&(a["!type"]="dialog"),se.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),se.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:H.push(se);break;case 430:J.push([se]),J[J.length-1].XTI=[];break;case 35:case 547:J[J.length-1].push(se);break;case 24:case 536:ee={Name:se.Name,Ref:Ni(se.rgce,i,null,J,F)},se.itab>0&&(ee.Sheet=se.itab-1),J.names.push(ee),J[0]||(J[0]=[],J[0].XTI=[]),J[J.length-1].push(se),se.Name=="_xlnm._FilterDatabase"&&se.itab>0&&se.rgce&&se.rgce[0]&&se.rgce[0][0]&&se.rgce[0][0][0]=="PtgArea3d"&&(Y[se.itab-1]={ref:Fr(se.rgce[0][0][1][2])});break;case 22:F.ExternCount=se;break;case 23:J.length==0&&(J[0]=[],J[0].XTI=[]),J[J.length-1].XTI=J[J.length-1].XTI.concat(se),J.XTI=J.XTI.concat(se);break;case 2196:if(F.biff<8)break;ee!=null&&(ee.Comment=se[1]);break;case 18:a["!protect"]=se;break;case 19:se!==0&&F.WTF&&console.error("Password verifier: "+se);break;case 133:s[se.pos]=se,F.snames.push(se.name);break;case 10:{if(--de)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,a["!ref"]=Fr(i),e.sheetRows&&e.sheetRows<=i.e.r){var at=i.e.r;i.e.r=e.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=Fr(i),i.e.r=at}i.e.r++,i.e.c++}X.length>0&&(a["!merges"]=X),oe.length>0&&(a["!objects"]=oe),te.length>0&&(a["!cols"]=te),ae.length>0&&(a["!rows"]=ae),E.Sheets.push(_)}u===""?f=a:n[u]=a,a=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(F.biff===8&&(F.biff={9:2,521:3,1033:4}[ge]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[se.BIFFVer]||8),F.biffguess=se.BIFFVer==0,se.BIFFVer==0&&se.dt==4096&&(F.biff=5,Ae=!0,pc(F.codepage=28591)),F.biff==8&&se.BIFFVer==0&&se.dt==16&&(F.biff=2),de++)break;if(a=e.dense?[]:{},F.biff<8&&!Ae&&(Ae=!0,pc(F.codepage=e.codepage||1252)),F.biff<5||se.BIFFVer==0&&se.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var De={pos:t.l-pe,name:u};s[De.pos]=De,F.snames.push(u)}else u=(s[Se]||{name:""}).name;se.dt==32&&(a["!type"]="chart"),se.dt==64&&(a["!type"]="macro"),X=[],oe=[],F.arrayf=D=[],te=[],ae=[],q=!1,_={Hidden:(s[Se]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(e.dense?(a[se.r]||[])[se.c]:a[vr({c:se.c,r:se.r})])&&++se.c,L={ixfe:se.ixfe,XF:H[se.ixfe]||{},v:se.val,t:"n"},P>0&&(L.z=K[L.ixfe>>8&63]),rA(L,e,r.opts.Date1904),R({c:se.c,r:se.r},L,e);break;case 5:case 517:L={ixfe:se.ixfe,XF:H[se.ixfe],v:se.val,t:se.t},P>0&&(L.z=K[L.ixfe>>8&63]),rA(L,e,r.opts.Date1904),R({c:se.c,r:se.r},L,e);break;case 638:L={ixfe:se.ixfe,XF:H[se.ixfe],v:se.rknum,t:"n"},P>0&&(L.z=K[L.ixfe>>8&63]),rA(L,e,r.opts.Date1904),R({c:se.c,r:se.r},L,e);break;case 189:for(var Ee=se.c;Ee<=se.C;++Ee){var Le=se.rkrec[Ee-se.c][0];L={ixfe:Le,XF:H[Le],v:se.rkrec[Ee-se.c][1],t:"n"},P>0&&(L.z=K[L.ixfe>>8&63]),rA(L,e,r.opts.Date1904),R({c:Ee,r:se.r},L,e)}break;case 6:case 518:case 1030:{if(se.val=="String"){o=se;break}if(L=D1(se.val,se.cell.ixfe,se.tt),L.XF=H[L.ixfe],e.cellFormula){var it=se.formula;if(it&&it[0]&&it[0][0]&&it[0][0][0]=="PtgExp"){var et=it[0][0][1][0],ht=it[0][0][1][1],Et=vr({r:et,c:ht});k[Et]?L.f=""+Ni(se.formula,i,se.cell,J,F):L.F=((e.dense?(a[et]||[])[ht]:a[Et])||{}).F}else L.f=""+Ni(se.formula,i,se.cell,J,F)}P>0&&(L.z=K[L.ixfe>>8&63]),rA(L,e,r.opts.Date1904),R(se.cell,L,e),o=se}break;case 7:case 519:if(o)o.val=se,L=D1(se,o.cell.ixfe,"s"),L.XF=H[L.ixfe],e.cellFormula&&(L.f=""+Ni(o.formula,i,o.cell,J,F)),P>0&&(L.z=K[L.ixfe>>8&63]),rA(L,e,r.opts.Date1904),R(o.cell,L,e),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{D.push(se);var At=vr(se[0].s);if(g=e.dense?(a[se[0].s.r]||[])[se[0].s.c]:a[At],e.cellFormula&&g){if(!o||!At||!g)break;g.f=""+Ni(se[1],i,se[0],J,F),g.F=Fr(se[0])}}break;case 1212:{if(!e.cellFormula)break;if(p){if(!o)break;k[vr(o.cell)]=se[0],g=e.dense?(a[o.cell.r]||[])[o.cell.c]:a[vr(o.cell)],(g||{}).f=""+Ni(se[0],i,m,J,F)}}break;case 253:L=D1(c[se.isst].t,se.ixfe,"s"),c[se.isst].h&&(L.h=c[se.isst].h),L.XF=H[L.ixfe],P>0&&(L.z=K[L.ixfe>>8&63]),rA(L,e,r.opts.Date1904),R({c:se.c,r:se.r},L,e);break;case 513:e.sheetStubs&&(L={ixfe:se.ixfe,XF:H[se.ixfe],t:"z"},P>0&&(L.z=K[L.ixfe>>8&63]),rA(L,e,r.opts.Date1904),R({c:se.c,r:se.r},L,e));break;case 190:if(e.sheetStubs)for(var jt=se.c;jt<=se.C;++jt){var Kt=se.ixfe[jt-se.c];L={ixfe:Kt,XF:H[Kt],t:"z"},P>0&&(L.z=K[L.ixfe>>8&63]),rA(L,e,r.opts.Date1904),R({c:jt,r:se.r},L,e)}break;case 214:case 516:case 4:L=D1(se.val,se.ixfe,"s"),L.XF=H[L.ixfe],P>0&&(L.z=K[L.ixfe>>8&63]),rA(L,e,r.opts.Date1904),R({c:se.c,r:se.r},L,e);break;case 0:case 512:de===1&&(i=se);break;case 252:c=se;break;case 1054:if(F.biff==4){K[P++]=se[1];for(var Yt=0;Yt<P+163&&pr[Yt]!=se[1];++Yt);Yt>=163&&uu(se[1],P+163)}else uu(se[1],se[0]);break;case 30:{K[P++]=se;for(var Qt=0;Qt<P+163&&pr[Qt]!=se;++Qt);Qt>=163&&uu(se,P+163)}break;case 229:X=X.concat(se);break;case 93:oe[se.cmo[0]]=F.lastobj=se;break;case 438:F.lastobj.TxO=se;break;case 127:F.lastobj.ImData=se;break;case 440:for(T=se[0].s.r;T<=se[0].e.r;++T)for(y=se[0].s.c;y<=se[0].e.c;++y)g=e.dense?(a[T]||[])[y]:a[vr({c:y,r:T})],g&&(g.l=se[1]);break;case 2048:for(T=se[0].s.r;T<=se[0].e.r;++T)for(y=se[0].s.c;y<=se[0].e.c;++y)g=e.dense?(a[T]||[])[y]:a[vr({c:y,r:T})],g&&g.l&&(g.l.Tooltip=se[1]);break;case 28:{if(F.biff<=5&&F.biff>=2)break;g=e.dense?(a[se[0].r]||[])[se[0].c]:a[vr(se[0])];var Gt=oe[se[2]];g||(e.dense?(a[se[0].r]||(a[se[0].r]=[]),g=a[se[0].r][se[0].c]={t:"z"}):g=a[vr(se[0])]={t:"z"},i.e.r=Math.max(i.e.r,se[0].r),i.s.r=Math.min(i.s.r,se[0].r),i.e.c=Math.max(i.e.c,se[0].c),i.s.c=Math.min(i.s.c,se[0].c)),g.c||(g.c=[]),b={a:se[1],t:Gt.TxO.t},g.c.push(b)}break;case 2173:cAe(H[se.ixfe],se.ext);break;case 125:{if(!F.cellStyles)break;for(;se.e>=se.s;)te[se.e--]={width:se.w/256,level:se.level||0,hidden:!!(se.flags&1)},q||(q=!0,K5(se.w/256)),Wd(te[se.e+1])}break;case 520:{var Wt={};se.level!=null&&(ae[se.r]=Wt,Wt.level=se.level),se.hidden&&(ae[se.r]=Wt,Wt.hidden=!0),se.hpt&&(ae[se.r]=Wt,Wt.hpt=se.hpt,Wt.hpx=X0(se.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||qf(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[ge]]=se;break;case 161:a["!margins"]||qf(a["!margins"]={}),a["!margins"].header=se.header,a["!margins"].footer=se.footer;break;case 574:se.RTL&&(E.Views[0].RTL=!0);break;case 146:U=se;break;case 2198:V=se;break;case 140:j=se;break;case 442:u?_.CodeName=se||_.name:E.WBProps.CodeName=se||"ThisWorkbook";break}}else ye||console.error("Missing Info for XLS Record 0x"+ge.toString(16)),t.l+=pe}return r.SheetNames=Ma(s).sort(function(kt,It){return Number(kt)-Number(It)}).map(function(kt){return s[kt].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&f["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=f)):r.Preamble=f,r.Sheets&&Y.forEach(function(kt,It){r.Sheets[r.SheetNames[It]]["!autofilter"]=kt}),r.Strings=c,r.SSF=Aa(pr),F.enc&&(r.Encryption=F.enc),V&&(r.Themes=V),r.Metadata={},j!==void 0&&(r.Metadata.Country=j),J.names.length>0&&(E.Names=J.names),r.Workbook=E,r}var Yp={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function C0e(t,e,r){var n=or.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=m3(n,bE,Yp.DSI);for(var s in a)e[s]=a[s]}catch(u){if(r.WTF)throw u}var i=or.find(t,"/!SummaryInformation");if(i&&i.size>0)try{var o=m3(i,CE,Yp.SI);for(var c in o)e[c]==null&&(e[c]=o[c])}catch(u){if(r.WTF)throw u}e.HeadingPairs&&e.TitlesOfParts&&(t8(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function E0e(t,e){var r=[],n=[],a=[],s=0,i,o=zI(bE,"n"),c=zI(CE,"n");if(t.Props)for(i=Ma(t.Props),s=0;s<i.length;++s)(Object.prototype.hasOwnProperty.call(o,i[s])?r:Object.prototype.hasOwnProperty.call(c,i[s])?n:a).push([i[s],t.Props[i[s]]]);if(t.Custprops)for(i=Ma(t.Custprops),s=0;s<i.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},i[s])||(Object.prototype.hasOwnProperty.call(o,i[s])?r:Object.prototype.hasOwnProperty.call(c,i[s])?n:a).push([i[s],t.Custprops[i[s]]]);var u=[];for(s=0;s<a.length;++s)l8.indexOf(a[s][0])>-1||e8.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&or.utils.cfb_add(e,"/SummaryInformation",p3(n,Yp.SI,c,CE)),(r.length||u.length)&&or.utils.cfb_add(e,"/DocumentSummaryInformation",p3(r,Yp.DSI,o,bE,u.length?u:null,Yp.UDI))}function nM(t,e){e||(e={}),rS(e),C5(),e.codepage&&b5(e.codepage);var r,n;if(t.FullPaths){if(or.find(t,"/encryption"))throw new Error("File is password-protected");r=or.find(t,"!CompObj"),n=or.find(t,"/Workbook")||or.find(t,"/Book")}else{switch(e.type){case"base64":t=Ko(Zo(t));break;case"binary":t=Ko(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}ni(t,0),n={content:t}}var a,s;if(r&&v0e(r),e.bookProps&&!e.bookSheets)a={};else{var i=Vr?"buffer":"array";if(n&&n.content)a=b0e(n.content,e);else if((s=or.find(t,"PerfectOffice_MAIN"))&&s.content)a=zf.to_workbook(s.content,(e.type=i,e));else if((s=or.find(t,"NativeContent_MAIN"))&&s.content)a=zf.to_workbook(s.content,(e.type=i,e));else throw(s=or.find(t,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&or.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=MAe(t))}var o={};return t.FullPaths&&C0e(t,o,e),a.Props=a.Custprops=o,e.bookFiles&&(a.cfb=t),a}function _0e(t,e){var r=e||{},n=or.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return or.utils.cfb_add(n,a,aM(t,r)),r.biff==8&&(t.Props||t.Custprops)&&E0e(t,n),r.biff==8&&t.vbaraw&&PAe(n,or.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var Bg={0:{f:$de},1:{f:nfe},2:{f:bfe},3:{f:ufe},4:{f:ofe},5:{f:vfe},6:{f:Tfe},7:{f:mfe},8:{f:Rfe},9:{f:Dfe},10:{f:Ife},11:{f:Ffe},12:{f:sfe},13:{f:Efe},14:{f:ffe},15:{f:cfe},16:{f:$8},17:{f:Nfe},18:{f:gfe},19:{f:M5},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Nhe},40:{},42:{},43:{f:Tce},44:{f:_ce},45:{f:kce},46:{f:Fce},47:{f:Ice},48:{},49:{f:Xse},50:{},51:{f:dAe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:v8},62:{f:Sfe},63:{f:yAe},64:{f:Jfe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:ji,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:qfe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:tfe},148:{f:Xde,p:16},151:{f:Ofe},152:{},153:{f:She},154:{},155:{},156:{f:Ehe},157:{},158:{},159:{T:1,f:Hle},160:{T:-1},161:{T:1,f:xh},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Lfe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:AAe},336:{T:-1},337:{f:mAe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:yE},357:{},358:{},359:{},360:{T:1},361:{},362:{f:x8},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Qfe},427:{f:Hfe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Gfe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:efe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Pfe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:yE},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:FAe},633:{T:1},634:{T:-1},635:{T:1,f:kAe},636:{T:-1},637:{f:rie},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:fhe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Yfe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},NE={6:{f:Qb},10:{f:Ad},12:{f:ds},13:{f:ds},14:{f:Ka},15:{f:Ka},16:{f:Li},17:{f:Ka},18:{f:Ka},19:{f:ds},20:{f:b3},21:{f:b3},23:{f:x8},24:{f:E3},25:{f:Ka},26:{},27:{},28:{f:Yoe},29:{},34:{f:Ka},35:{f:C3},38:{f:Li},39:{f:Li},40:{f:Li},41:{f:Li},42:{f:Ka},43:{f:Ka},47:{f:cce},49:{f:Eoe},51:{f:ds},60:{},61:{f:voe},64:{f:Ka},65:{f:Coe},66:{f:ds},77:{},80:{},81:{},82:{},85:{f:ds},89:{},90:{},91:{},92:{f:loe},93:{f:ele},94:{},95:{f:Ka},96:{},97:{},99:{f:Ka},125:{f:v8},128:{f:joe},129:{f:Aoe},130:{f:ds},131:{f:Ka},132:{f:Ka},133:{f:uoe},134:{},140:{f:lle},141:{f:ds},144:{},146:{f:ule},151:{},152:{},153:{},154:{},155:{},156:{f:ds},157:{},158:{},160:{f:xle},161:{f:hle},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:Loe},190:{f:Uoe},193:{f:Ad},197:{},198:{},199:{},200:{},201:{},202:{f:Ka},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:ds},220:{},221:{f:Ka},222:{},224:{f:Poe},225:{f:ooe},226:{f:Ad},227:{},229:{f:Xoe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:foe},253:{f:Soe},255:{f:moe},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:c8},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Ka},353:{f:Ad},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Goe},431:{f:Ka},432:{},433:{},434:{},437:{},438:{f:nle},439:{f:Ka},440:{f:ale},441:{},442:{f:ax},443:{},444:{f:ds},445:{},446:{},448:{f:Ad},449:{f:xoe,r:2},450:{f:Ad},512:{f:v3},513:{f:gle},515:{f:Hoe},516:{f:Boe},517:{f:y3},519:{f:vle},520:{f:poe},523:{},545:{f:_3},549:{f:x3},566:{},574:{f:yoe},638:{f:Roe},659:{},1048:{},1054:{f:koe},1084:{},1212:{f:Woe},2048:{f:ile},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:k1},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Ad},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:dle,r:12},2173:{f:lAe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Ka,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:Koe,r:12},2197:{},2198:{f:rAe,r:12},2199:{},2200:{},2201:{},2202:{f:$oe,r:12},2203:{f:Ad},2204:{},2205:{},2206:{},2207:{},2211:{f:goe},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:ds},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:mle},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Ale},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:v3},1:{},2:{f:Ele},3:{f:ble},4:{f:yle},5:{f:y3},7:{f:Sle},8:{},9:{f:k1},11:{},22:{f:ds},30:{f:Foe},31:{},32:{},33:{f:_3},36:{},37:{f:x3},50:{f:Tle},62:{},52:{},67:{},68:{f:ds},69:{},86:{},126:{},127:{f:wle},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Ble},223:{},234:{},354:{},421:{},518:{f:Qb},521:{f:k1},536:{f:E3},547:{f:C3},561:{},579:{},1030:{f:Qb},1033:{f:k1},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Dt(t,e,r,n){var a=e;if(!isNaN(a)){var s=n||(r||[]).length||0,i=t.next(4);i.write_shift(2,a),i.write_shift(2,s),s>0&&R5(r)&&t.push(r)}}function S0e(t,e,r,n){var a=(r||[]).length||0;if(a<=8224)return Dt(t,e,r,a);var s=e;if(!isNaN(s)){for(var i=r.parts||[],o=0,c=0,u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;var f=t.next(4);for(f.write_shift(2,s),f.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u;c<a;){for(f=t.next(4),f.write_shift(2,60),u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;f.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u}}}function lx(t,e,r){return t||(t=lt(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function T0e(t,e,r,n){var a=lt(9);return lx(a,t,e),A8(r,n||"b",a),a}function B0e(t,e,r){var n=lt(8+2*r.length);return lx(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function N0e(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var a=e.t=="d"?Bs(ca(e.v)):e.v;a==(a|0)&&a>=0&&a<65536?Dt(t,2,_le(r,n,a)):Dt(t,3,Cle(r,n,a));return;case"b":case"e":Dt(t,5,T0e(r,n,e.v,e.t));return;case"s":case"str":Dt(t,4,B0e(r,n,(e.v||"").slice(0,255)));return}Dt(t,1,lx(null,r,n))}function k0e(t,e,r,n){var a=Array.isArray(e),s=vn(e["!ref"]||"A1"),i,o="",c=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),i=Fr(s)}for(var u=s.s.r;u<=s.e.r;++u){o=es(u);for(var f=s.s.c;f<=s.e.c;++f){u===s.s.r&&(c[f]=Ca(f)),i=c[f]+o;var m=a?(e[u]||[])[f]:e[i];m&&N0e(t,m,u,f)}}}function I0e(t,e){for(var r=e||{},n=bo(),a=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Dt(n,r.biff==4?1033:r.biff==3?521:9,G5(t,16,r)),k0e(n,t.Sheets[t.SheetNames[a]],a,r),Dt(n,10),n.end()}function F0e(t,e,r){Dt(t,49,_oe({sz:12,name:"Arial"},r))}function D0e(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&Dt(t,1054,Ioe(a,e[a],r))})}function R0e(t,e){var r=lt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Dt(t,2151,r),r=lt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),m8(vn(e["!ref"]||"A1"),r),r.write_shift(4,4),Dt(t,2152,r)}function L0e(t,e){for(var r=0;r<16;++r)Dt(t,224,w3({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){Dt(t,224,w3(n,0,e))})}function U0e(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];Dt(t,440,sle(n)),n[1].Tooltip&&Dt(t,2048,ole(n))}delete e["!links"]}function M0e(t,e){if(e){var r=0;e.forEach(function(n,a){++r<=256&&n&&Dt(t,125,fle(Sw(a,n),a))})}}function P0e(t,e,r,n,a){var s=16+nf(a.cellXfs,e,a);if(e.v==null&&!e.bf){Dt(t,513,sh(r,n,s));return}if(e.bf)Dt(t,6,Ade(e,r,n,a,s));else switch(e.t){case"d":case"n":var i=e.t=="d"?Bs(ca(e.v)):e.v;Dt(t,515,Voe(r,n,i,s));break;case"b":case"e":Dt(t,517,Qoe(r,n,e.v,s,a,e.t));break;case"s":case"str":if(a.bookSST){var o=X5(a.Strings,e.v,a.revStrings);Dt(t,253,Toe(r,n,o,s))}else Dt(t,516,Noe(r,n,(e.v||"").slice(0,255),s,a));break;default:Dt(t,513,sh(r,n,s))}}function j0e(t,e,r){var n=bo(),a=r.SheetNames[t],s=r.Sheets[a]||{},i=(r||{}).Workbook||{},o=(i.Sheets||[])[t]||{},c=Array.isArray(s),u=e.biff==8,f,m="",p=[],g=vn(s["!ref"]||"A1"),b=u?65536:16384;if(g.e.c>255||g.e.r>=b){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");g.e.c=Math.min(g.e.c,255),g.e.r=Math.min(g.e.c,b-1)}Dt(n,2057,G5(r,16,e)),Dt(n,13,Nl(1)),Dt(n,12,Nl(100)),Dt(n,15,Wi(!0)),Dt(n,17,Wi(!1)),Dt(n,16,nh(.001)),Dt(n,95,Wi(!0)),Dt(n,42,Wi(!1)),Dt(n,43,Wi(!1)),Dt(n,130,Nl(1)),Dt(n,128,Ooe()),Dt(n,131,Wi(!1)),Dt(n,132,Wi(!1)),u&&M0e(n,s["!cols"]),Dt(n,512,Doe(g,e)),u&&(s["!links"]=[]);for(var y=g.s.r;y<=g.e.r;++y){m=es(y);for(var T=g.s.c;T<=g.e.c;++T){y===g.s.r&&(p[T]=Ca(T)),f=p[T]+m;var k=c?(s[y]||[])[T]:s[f];k&&(P0e(n,k,y,T,e),u&&k.l&&s["!links"].push([f,k.l]))}}var D=o.CodeName||o.name||a;return u&&Dt(n,574,boe((i.Views||[])[0])),u&&(s["!merges"]||[]).length&&Dt(n,229,Zoe(s["!merges"])),u&&U0e(n,s),Dt(n,442,u8(D)),u&&R0e(n,s),Dt(n,10),n.end()}function O0e(t,e,r){var n=bo(),a=(t||{}).Workbook||{},s=a.Sheets||[],i=a.WBProps||{},o=r.biff==8,c=r.biff==5;if(Dt(n,2057,G5(t,5,r)),r.bookType=="xla"&&Dt(n,135),Dt(n,225,o?Nl(1200):null),Dt(n,193,Qie(2)),c&&Dt(n,191),c&&Dt(n,192),Dt(n,226),Dt(n,92,coe("SheetJS",r)),Dt(n,66,Nl(o?1200:1252)),o&&Dt(n,353,Nl(0)),o&&Dt(n,448),Dt(n,317,ple(t.SheetNames.length)),o&&t.vbaraw&&Dt(n,211),o&&t.vbaraw){var u=i.CodeName||"ThisWorkbook";Dt(n,442,u8(u))}Dt(n,156,Nl(17)),Dt(n,25,Wi(!1)),Dt(n,18,Wi(!1)),Dt(n,19,Nl(0)),o&&Dt(n,431,Wi(!1)),o&&Dt(n,444,Nl(0)),Dt(n,61,woe()),Dt(n,64,Wi(!1)),Dt(n,141,Nl(0)),Dt(n,34,Wi(xhe(t)=="true")),Dt(n,14,Wi(!0)),o&&Dt(n,439,Wi(!1)),Dt(n,218,Nl(0)),F0e(n,t,r),D0e(n,t.SSF,r),L0e(n,r),o&&Dt(n,352,Wi(!1));var f=n.end(),m=bo();o&&Dt(m,140,cle()),o&&r.Strings&&S0e(m,252,hoe(r.Strings)),Dt(m,10);var p=m.end(),g=bo(),b=0,y=0;for(y=0;y<t.SheetNames.length;++y)b+=(o?12:11)+(o?2:1)*t.SheetNames[y].length;var T=f.length+b+p.length;for(y=0;y<t.SheetNames.length;++y){var k=s[y]||{};Dt(g,133,doe({pos:T,hs:k.Hidden||0,dt:0,name:t.SheetNames[y]},r)),T+=e[y].length}var D=g.end();if(b!=D.length)throw new Error("BS8 "+b+" != "+D.length);var L=[];return f.length&&L.push(f),D.length&&L.push(D),p.length&&L.push(p),Vs(L)}function Q0e(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=Aa(pr)),t&&t.SSF&&(mm(),vw(t.SSF),r.revssf=yw(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,nS(r),r.cellXfs=[],nf(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var a=0;a<t.SheetNames.length;++a)n[n.length]=j0e(a,r,t);return n.unshift(O0e(t,n,r)),Vs(n)}function aM(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var a=Eo(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return Q0e(t,e);case 4:case 3:case 2:return I0e(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function L3(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var a=t.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=t.match(/<\/table/i),i=a.index,o=s&&s.index||t.length,c=_se(t.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,f=0,m=0,p=0,g={s:{r:1e7,c:1e7},e:{r:0,c:0}},b=[];for(i=0;i<c.length;++i){var y=c[i].trim(),T=y.slice(0,3).toLowerCase();if(T=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}f=0;continue}if(!(T!="<td"&&T!="<th")){var k=y.split(/<\/t[dh]>/i);for(o=0;o<k.length;++o){var D=k[o].trim();if(D.match(/<t[dh]/i)){for(var L=D,j=0;L.charAt(0)=="<"&&(j=L.indexOf(">"))>-1;)L=L.slice(j+1);for(var H=0;H<b.length;++H){var U=b[H];U.s.c==f&&U.s.r<u&&u<=U.e.r&&(f=U.e.c+1,H=-1)}var E=Er(D.slice(0,D.indexOf(">")));p=E.colspan?+E.colspan:1,((m=+E.rowspan)>1||p>1)&&b.push({s:{r:u,c:f},e:{r:u+(m||1)-1,c:f+p-1}});var _=E.t||E["data-t"]||"";if(!L.length){f+=p;continue}if(L=BU(L),g.s.r>u&&(g.s.r=u),g.e.r<u&&(g.e.r=u),g.s.c>f&&(g.s.c=f),g.e.c<f&&(g.e.c=f),!L.length){f+=p;continue}var B={t:"s",v:L};r.raw||!L.trim().length||_=="s"||(L==="TRUE"?B={t:"b",v:!0}:L==="FALSE"?B={t:"b",v:!1}:isNaN(xc(L))?isNaN(J0(L).getDate())||(B={t:"d",v:ca(L)},r.cellDates||(B={t:"n",v:Bs(B.v)}),B.z=r.dateNF||pr[14]):B={t:"n",v:xc(L)}),r.dense?(n[u]||(n[u]=[]),n[u][f]=B):n[vr({r:u,c:f})]=B,f+=p}}}}return n["!ref"]=Fr(g),b.length&&(n["!merges"]=b),n}function H0e(t,e,r,n){for(var a=t["!merges"]||[],s=[],i=e.s.c;i<=e.e.c;++i){for(var o=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>i)&&!(a[u].e.r<r||a[u].e.c<i)){if(a[u].s.r<r||a[u].s.c<i){o=-1;break}o=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(o<0)){var f=vr({r,c:i}),m=n.dense?(t[r]||[])[i]:t[f],p=m&&m.v!=null&&(m.h||I5(m.w||(vu(m),m.w)||""))||"",g={};o>1&&(g.rowspan=o),c>1&&(g.colspan=c),n.editable?p='<span contenteditable="true">'+p+"</span>":m&&(g["data-t"]=m&&m.t||"z",m.v!=null&&(g["data-v"]=m.v),m.z!=null&&(g["data-z"]=m.z),m.l&&(m.l.Target||"#").charAt(0)!="#"&&(p='<a href="'+m.l.Target+'">'+p+"</a>")),g.id=(n.id||"sjs")+"-"+f,s.push(Ft("td",p,g))}}var b="<tr>";return b+s.join("")+"</tr>"}var V0e='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',G0e="</body></html>";function z0e(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return rf(L3(r[0],e),e);var n=oS();return r.forEach(function(a,s){lS(n,L3(a,e),"Sheet"+(s+1))}),n}function q0e(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function sM(t,e){var r=e||{},n=r.header!=null?r.header:V0e,a=r.footer!=null?r.footer:G0e,s=[n],i=Eo(t["!ref"]);r.dense=Array.isArray(t),s.push(q0e(t,i,r));for(var o=i.s.r;o<=i.e.r;++o)s.push(H0e(t,i,o,r));return s.push("</table>"+a),s.join("")}function iM(t,e,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var i=typeof n.origin=="string"?Ea(n.origin):n.origin;a=i.r,s=i.c}var o=e.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(t["!ref"]){var f=Eo(t["!ref"]);u.s.r=Math.min(u.s.r,f.s.r),u.s.c=Math.min(u.s.c,f.s.c),u.e.r=Math.max(u.e.r,f.e.r),u.e.c=Math.max(u.e.c,f.e.c),a==-1&&(u.e.r=a=f.e.r+1)}var m=[],p=0,g=t["!rows"]||(t["!rows"]=[]),b=0,y=0,T=0,k=0,D=0,L=0;for(t["!cols"]||(t["!cols"]=[]);b<o.length&&y<c;++b){var j=o[b];if(U3(j)){if(n.display)continue;g[y]={hidden:!0}}var H=j.children;for(T=k=0;T<H.length;++T){var U=H[T];if(!(n.display&&U3(U))){var E=U.hasAttribute("data-v")?U.getAttribute("data-v"):U.hasAttribute("v")?U.getAttribute("v"):BU(U.innerHTML),_=U.getAttribute("data-z")||U.getAttribute("z");for(p=0;p<m.length;++p){var B=m[p];B.s.c==k+s&&B.s.r<y+a&&y+a<=B.e.r&&(k=B.e.c+1-s,p=-1)}L=+U.getAttribute("colspan")||1,((D=+U.getAttribute("rowspan")||1)>1||L>1)&&m.push({s:{r:y+a,c:k+s},e:{r:y+a+(D||1)-1,c:k+s+(L||1)-1}});var Q={t:"s",v:E},R=U.getAttribute("data-t")||U.getAttribute("t")||"";E!=null&&(E.length==0?Q.t=R||"z":n.raw||E.trim().length==0||R=="s"||(E==="TRUE"?Q={t:"b",v:!0}:E==="FALSE"?Q={t:"b",v:!1}:isNaN(xc(E))?isNaN(J0(E).getDate())||(Q={t:"d",v:ca(E)},n.cellDates||(Q={t:"n",v:Bs(Q.v)}),Q.z=n.dateNF||pr[14]):Q={t:"n",v:xc(E)})),Q.z===void 0&&_!=null&&(Q.z=_);var F="",V=U.getElementsByTagName("A");if(V&&V.length)for(var X=0;X<V.length&&!(V[X].hasAttribute("href")&&(F=V[X].getAttribute("href"),F.charAt(0)!="#"));++X);F&&F.charAt(0)!="#"&&(Q.l={Target:F}),n.dense?(t[y+a]||(t[y+a]=[]),t[y+a][k+s]=Q):t[vr({c:k+s,r:y+a})]=Q,u.e.c<k+s&&(u.e.c=k+s),k+=L}}++y}return m.length&&(t["!merges"]=(t["!merges"]||[]).concat(m)),u.e.r=Math.max(u.e.r,y-1+a),t["!ref"]=Fr(u),y>=c&&(t["!fullref"]=Fr((u.e.r=o.length-b+y-1+a,u))),t}function oM(t,e){var r=e||{},n=r.dense?[]:{};return iM(n,t,e)}function K0e(t,e){return rf(oM(t,e),e)}function U3(t){var e="",r=W0e(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function W0e(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function $0e(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=xn(e.replace(/<[^>]*>/g,""));return[r]}var M3={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function lM(t,e){var r=e||{},n=F5(t),a=[],s,i,o={name:""},c="",u=0,f,m,p={},g=[],b=r.dense?[]:{},y,T,k={value:""},D="",L=0,j=[],H=-1,U=-1,E={s:{r:1e6,c:1e7},e:{r:0,c:0}},_=0,B={},Q=[],R={},F=0,V=0,X=[],oe=1,te=1,ae=[],q={Names:[]},J={},W=["",""],de=[],P={},K="",Y=0,ee=!1,Ae=!1,Se=0;for(bg.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");y=bg.exec(n);)switch(y[3]=y[3].replace(/_.*$/,"")){case"table":case"工作表":y[1]==="/"?(E.e.c>=E.s.c&&E.e.r>=E.s.r?b["!ref"]=Fr(E):b["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=E.e.r&&(b["!fullref"]=b["!ref"],E.e.r=r.sheetRows-1,b["!ref"]=Fr(E)),Q.length&&(b["!merges"]=Q),X.length&&(b["!rows"]=X),f.name=f.名称||f.name,typeof JSON<"u"&&JSON.stringify(f),g.push(f.name),p[f.name]=b,Ae=!1):y[0].charAt(y[0].length-2)!=="/"&&(f=Er(y[0],!1),H=U=-1,E.s.r=E.s.c=1e7,E.e.r=E.e.c=0,b=r.dense?[]:{},Q=[],X=[],Ae=!0);break;case"table-row-group":y[1]==="/"?--_:++_;break;case"table-row":case"行":if(y[1]==="/"){H+=oe,oe=1;break}if(m=Er(y[0],!1),m.行号?H=m.行号-1:H==-1&&(H=0),oe=+m["number-rows-repeated"]||1,oe<10)for(Se=0;Se<oe;++Se)_>0&&(X[H+Se]={level:_});U=-1;break;case"covered-table-cell":y[1]!=="/"&&++U,r.sheetStubs&&(r.dense?(b[H]||(b[H]=[]),b[H][U]={t:"z"}):b[vr({r:H,c:U})]={t:"z"}),D="",j=[];break;case"table-cell":case"数据":if(y[0].charAt(y[0].length-2)==="/")++U,k=Er(y[0],!1),te=parseInt(k["number-columns-repeated"]||"1",10),T={t:"z",v:null},k.formula&&r.cellFormula!=!1&&(T.f=F3(xn(k.formula))),(k.数据类型||k["value-type"])=="string"&&(T.t="s",T.v=xn(k["string-value"]||""),r.dense?(b[H]||(b[H]=[]),b[H][U]=T):b[vr({r:H,c:U})]=T),U+=te-1;else if(y[1]!=="/"){++U,D="",L=0,j=[],te=1;var ge=oe?H+oe-1:H;if(U>E.e.c&&(E.e.c=U),U<E.s.c&&(E.s.c=U),H<E.s.r&&(E.s.r=H),ge>E.e.r&&(E.e.r=ge),k=Er(y[0],!1),de=[],P={},T={t:k.数据类型||k["value-type"],v:null},r.cellFormula)if(k.formula&&(k.formula=xn(k.formula)),k["number-matrix-columns-spanned"]&&k["number-matrix-rows-spanned"]&&(F=parseInt(k["number-matrix-rows-spanned"],10)||0,V=parseInt(k["number-matrix-columns-spanned"],10)||0,R={s:{r:H,c:U},e:{r:H+F-1,c:U+V-1}},T.F=Fr(R),ae.push([R,T.F])),k.formula)T.f=F3(k.formula);else for(Se=0;Se<ae.length;++Se)H>=ae[Se][0].s.r&&H<=ae[Se][0].e.r&&U>=ae[Se][0].s.c&&U<=ae[Se][0].e.c&&(T.F=ae[Se][1]);switch((k["number-columns-spanned"]||k["number-rows-spanned"])&&(F=parseInt(k["number-rows-spanned"],10)||0,V=parseInt(k["number-columns-spanned"],10)||0,R={s:{r:H,c:U},e:{r:H+F-1,c:U+V-1}},Q.push(R)),k["number-columns-repeated"]&&(te=parseInt(k["number-columns-repeated"],10)),T.t){case"boolean":T.t="b",T.v=oa(k["boolean-value"]);break;case"float":T.t="n",T.v=parseFloat(k.value);break;case"percentage":T.t="n",T.v=parseFloat(k.value);break;case"currency":T.t="n",T.v=parseFloat(k.value);break;case"date":T.t="d",T.v=ca(k["date-value"]),r.cellDates||(T.t="n",T.v=Bs(T.v)),T.z="m/d/yy";break;case"time":T.t="n",T.v=bse(k["time-value"])/86400,r.cellDates&&(T.t="d",T.v=bw(T.v)),T.z="HH:MM:SS";break;case"number":T.t="n",T.v=parseFloat(k.数据数值);break;default:if(T.t==="string"||T.t==="text"||!T.t)T.t="s",k["string-value"]!=null&&(D=xn(k["string-value"]),j=[]);else throw new Error("Unsupported value type "+T.t)}}else{if(ee=!1,T.t==="s"&&(T.v=D||"",j.length&&(T.R=j),ee=L==0),J.Target&&(T.l=J),de.length>0&&(T.c=de,de=[]),D&&r.cellText!==!1&&(T.w=D),ee&&(T.t="z",delete T.v),(!ee||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=H))for(var pe=0;pe<oe;++pe){if(te=parseInt(k["number-columns-repeated"]||"1",10),r.dense)for(b[H+pe]||(b[H+pe]=[]),b[H+pe][U]=pe==0?T:Aa(T);--te>0;)b[H+pe][U+te]=Aa(T);else for(b[vr({r:H+pe,c:U})]=T;--te>0;)b[vr({r:H+pe,c:U+te})]=Aa(T);E.e.c<=U&&(E.e.c=U)}te=parseInt(k["number-columns-repeated"]||"1",10),U+=te-1,te=0,T={},D="",j=[]}J={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(y[1]==="/"){if((s=a.pop())[0]!==y[3])throw"Bad state: "+s}else y[0].charAt(y[0].length-2)!=="/"&&a.push([y[3],!0]);break;case"annotation":if(y[1]==="/"){if((s=a.pop())[0]!==y[3])throw"Bad state: "+s;P.t=D,j.length&&(P.R=j),P.a=K,de.push(P)}else y[0].charAt(y[0].length-2)!=="/"&&a.push([y[3],!1]);K="",Y=0,D="",L=0,j=[];break;case"creator":y[1]==="/"?K=n.slice(Y,y.index):Y=y.index+y[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(y[1]==="/"){if((s=a.pop())[0]!==y[3])throw"Bad state: "+s}else y[0].charAt(y[0].length-2)!=="/"&&a.push([y[3],!1]);D="",L=0,j=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(y[1]==="/"){if(B[o.name]=c,(s=a.pop())[0]!==y[3])throw"Bad state: "+s}else y[0].charAt(y[0].length-2)!=="/"&&(c="",o=Er(y[0],!1),a.push([y[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":i=Er(y[0],!1),c+=M3[y[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":i=Er(y[0],!1),c+=M3[y[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(y[0].slice(-2)==="/>")break;if(y[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,y.index);break}else u=y.index+y[0].length;break;case"named-range":i=Er(y[0],!1),W=Hb(i["cell-range-address"]);var ye={Name:i.name,Ref:W[0]+"!"+W[1]};Ae&&(ye.Sheet=g.length),q.Names.push(ye);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(y[1]==="/"&&(!k||!k["string-value"])){var ue=$0e(n.slice(L,y.index));D=(D.length>0?D+`
`:"")+ue[0]}else Er(y[0],!1),L=y.index+y[0].length;break;case"s":break;case"database-range":if(y[1]==="/")break;try{W=Hb(Er(y[0])["target-range-address"]),p[W[0]]["!autofilter"]={ref:W[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(y[1]!=="/"){if(J=Er(y[0],!1),!J.href)break;J.Target=xn(J.href),delete J.href,J.Target.charAt(0)=="#"&&J.Target.indexOf(".")>-1?(W=Hb(J.Target.slice(1)),J.Target="#"+W[0]+"!"+W[1]):J.Target.match(/^\.\.[\\\/]/)&&(J.Target=J.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(y[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(r.WTF)throw new Error(y)}}var se={Sheets:p,SheetNames:g,Workbook:q};return r.bookSheets&&delete se.Sheets,se}function P3(t,e){e=e||{},Tl(t,"META-INF/manifest.xml")&&bie(us(t,"META-INF/manifest.xml"),e);var r=Wo(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=lM(Wn(r),e);return Tl(t,"meta.xml")&&(n.Props=XU(us(t,"meta.xml"))),n}function j3(t,e){return lM(t,e)}var J0e=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+yg({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return ts+e}}(),O3=function(){var t=function(s){return Qn(s).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,i,o){var c=[];c.push('      <table:table table:name="'+Qn(i.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,f=0,m=Eo(s["!ref"]||"A1"),p=s["!merges"]||[],g=0,b=Array.isArray(s);if(s["!cols"])for(f=0;f<=m.e.c;++f)c.push("        <table:table-column"+(s["!cols"][f]?' table:style-name="co'+s["!cols"][f].ods+'"':"")+`></table:table-column>
`);var y="",T=s["!rows"]||[];for(u=0;u<m.s.r;++u)y=T[u]?' table:style-name="ro'+T[u].ods+'"':"",c.push("        <table:table-row"+y+`></table:table-row>
`);for(;u<=m.e.r;++u){for(y=T[u]?' table:style-name="ro'+T[u].ods+'"':"",c.push("        <table:table-row"+y+`>
`),f=0;f<m.s.c;++f)c.push(e);for(;f<=m.e.c;++f){var k=!1,D={},L="";for(g=0;g!=p.length;++g)if(!(p[g].s.c>f)&&!(p[g].s.r>u)&&!(p[g].e.c<f)&&!(p[g].e.r<u)){(p[g].s.c!=f||p[g].s.r!=u)&&(k=!0),D["table:number-columns-spanned"]=p[g].e.c-p[g].s.c+1,D["table:number-rows-spanned"]=p[g].e.r-p[g].s.r+1;break}if(k){c.push(r);continue}var j=vr({r:u,c:f}),H=b?(s[u]||[])[f]:s[j];if(H&&H.f&&(D["table:formula"]=Qn(pde(H.f)),H.F&&H.F.slice(0,j.length)==j)){var U=Eo(H.F);D["table:number-matrix-columns-spanned"]=U.e.c-U.s.c+1,D["table:number-matrix-rows-spanned"]=U.e.r-U.s.r+1}if(!H){c.push(e);continue}switch(H.t){case"b":L=H.v?"TRUE":"FALSE",D["office:value-type"]="boolean",D["office:boolean-value"]=H.v?"true":"false";break;case"n":L=H.w||String(H.v||0),D["office:value-type"]="float",D["office:value"]=H.v||0;break;case"s":case"str":L=H.v==null?"":H.v,D["office:value-type"]="string";break;case"d":L=H.w||ca(H.v).toISOString(),D["office:value-type"]="date",D["office:date-value"]=ca(H.v).toISOString(),D["table:style-name"]="ce1";break;default:c.push(e);continue}var E=t(L);if(H.l&&H.l.Target){var _=H.l.Target;_=_.charAt(0)=="#"?"#"+gde(_.slice(1)):_,_.charAt(0)!="#"&&!_.match(/^\w+:/)&&(_="../"+_),E=Ft("text:a",E,{"xlink:href":_.replace(/&/g,"&amp;")})}c.push("          "+Ft("table:table-cell",Ft("text:p",E,{}),D)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(s,i){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var f=0;f<u["!cols"].length;++f)if(u["!cols"][f]){var m=u["!cols"][f];if(m.width==null&&m.wpx==null&&m.wch==null)continue;Wd(m),m.ods=o;var p=u["!cols"][f].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+p+`"/>
`),s.push(`  </style:style>
`),++o}}});var c=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var f=0;f<u["!rows"].length;++f)if(u["!rows"][f]){u["!rows"][f].ods=c;var m=u["!rows"][f].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+m+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(i,o){var c=[ts],u=yg({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),f=yg({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(c.push("<office:document"+u+f+`>
`),c.push(YU().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,i),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var m=0;m!=i.SheetNames.length;++m)c.push(n(i.Sheets[i.SheetNames[m]],i,m));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),o.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function cM(t,e){if(e.bookType=="fods")return O3(t,e);var r=B5(),n="",a=[],s=[];return n="mimetype",Lr(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Lr(r,n,O3(t,e)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",Lr(r,n,J0e(t,e)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",Lr(r,n,ts+YU()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",Lr(r,n,_ie(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Lr(r,n,Cie(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function ih(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function kE(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Wn(tf(t))}function Y0e(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):Ko(cA(t))}function X0e(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function Jd(t){var e=t.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(a){r.set(a,n),n+=a.length}),r}function Q3(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function Z0e(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,a=e+13;a>=e;--a)n=n*256+t[a];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function eme(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)t[e+s]=a&255;t[e+15]|=r>=0?0:128}function Ng(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function Pn(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function Ua(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function Sn(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],a=Ng(t,r),s=a&7;a=Math.floor(a/8);var i=0,o;if(a==0)break;switch(s){case 0:{for(var c=r[0];t[r[0]++]>=128;);o=t.slice(c,r[0])}break;case 5:i=4,o=t.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,o=t.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=Ng(t,r),o=t.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:o,type:s};e[a]==null?e[a]=[u]:e[a].push(u)}return e}function ei(t){var e=[];return t.forEach(function(r,n){r.forEach(function(a){a.data&&(e.push(Pn(n*8+a.type)),a.type==2&&e.push(Pn(a.data.length)),e.push(a.data))})}),Jd(e)}function tS(t,e){return(t==null?void 0:t.map(function(r){return e(r.data)}))||[]}function _l(t){for(var e,r=[],n=[0];n[0]<t.length;){var a=Ng(t,n),s=Sn(t.slice(n[0],n[0]+a));n[0]+=a;var i={id:Ua(s[1][0].data),messages:[]};s[2].forEach(function(o){var c=Sn(o.data),u=Ua(c[3][0].data);i.messages.push({meta:c,data:t.slice(n[0],n[0]+u)}),n[0]+=u}),(e=s[3])!=null&&e[0]&&(i.merge=Ua(s[3][0].data)>>>0>0),r.push(i)}return r}function Zh(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:Pn(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Pn(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(i){a.push(i.data),i.meta[3]=[{type:0,data:Pn(i.data.length)}],n[2].push({data:ei(i.meta),type:2})});var s=ei(n);e.push(Pn(s.length)),e.push(s),a.forEach(function(i){return e.push(i)})}),Jd(e)}function tme(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=Ng(e,r),a=[];r[0]<e.length;){var s=e[r[0]]&3;if(s==0){var i=e[r[0]++]>>2;if(i<60)++i;else{var o=i-59;i=e[r[0]],o>1&&(i|=e[r[0]+1]<<8),o>2&&(i|=e[r[0]+2]<<16),o>3&&(i|=e[r[0]+3]<<24),i>>>=0,i++,r[0]+=o}a.push(e.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var c=0,u=0;if(s==1?(u=(e[r[0]]>>2&7)+4,c=(e[r[0]++]&224)<<3,c|=e[r[0]++]):(u=(e[r[0]++]>>2)+1,s==2?(c=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(c=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),a=[Jd(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var f=Jd(a);if(f.length!=n)throw new Error("Unexpected length: ".concat(f.length," != ").concat(n));return f}function Sl(t){for(var e=[],r=0;r<t.length;){var n=t[r++],a=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(tme(n,t.slice(r,r+a))),r+=a}if(r!==t.length)throw new Error("data is not a valid framed stream!");return Jd(e)}function e0(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),a=new Uint8Array(4);e.push(a);var s=Pn(n),i=s.length;e.push(s),n<=60?(i++,e.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),i+=n,a[0]=0,a[1]=i&255,a[2]=i>>8&255,a[3]=i>>16&255,r+=n}return Jd(e)}function rme(t,e,r,n){var a=ih(t),s=a.getUint32(4,!0),i=(n>1?12:8)+Q3(s&(n>1?3470:398))*4,o=-1,c=-1,u=NaN,f=new Date(2001,0,1);s&512&&(o=a.getUint32(i,!0),i+=4),i+=Q3(s&(n>1?12288:4096))*4,s&16&&(c=a.getUint32(i,!0),i+=4),s&32&&(u=a.getFloat64(i,!0),i+=8),s&64&&(f.setTime(f.getTime()+a.getFloat64(i,!0)*1e3),i+=8);var m;switch(t[2]){case 0:break;case 2:m={t:"n",v:u};break;case 3:m={t:"s",v:e[c]};break;case 5:m={t:"d",v:f};break;case 6:m={t:"b",v:u>0};break;case 7:m={t:"n",v:u/86400};break;case 8:m={t:"e",v:0};break;case 9:if(o>-1)m={t:"s",v:r[o]};else if(c>-1)m={t:"s",v:e[c]};else if(!isNaN(u))m={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return m}function nme(t,e,r){var n=ih(t),a=n.getUint32(8,!0),s=12,i=-1,o=-1,c=NaN,u=NaN,f=new Date(2001,0,1);a&1&&(c=Z0e(t,s),s+=16),a&2&&(u=n.getFloat64(s,!0),s+=8),a&4&&(f.setTime(f.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(o=n.getUint32(s,!0),s+=4),a&16&&(i=n.getUint32(s,!0),s+=4);var m;switch(t[1]){case 0:break;case 2:m={t:"n",v:c};break;case 3:m={t:"s",v:e[o]};break;case 5:m={t:"d",v:f};break;case 6:m={t:"b",v:u>0};break;case 7:m={t:"n",v:u/86400};break;case 8:m={t:"e",v:0};break;case 9:if(i>-1)m={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t.slice(0,4)));break;case 10:m={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t.slice(0,4)))}return m}function Gb(t,e){var r=new Uint8Array(32),n=ih(r),a=12,s=0;switch(r[0]=5,t.t){case"n":r[1]=2,eme(r,a,t.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,t.v?1:0,!0),s|=2,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,s,!0),r.slice(0,a)}function zb(t,e){var r=new Uint8Array(32),n=ih(r),a=12,s=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(a,t.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,t.v?1:0,!0),s|=32,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,s,!0),r.slice(0,a)}function ame(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return rme(t,e,r,t[0]);case 5:return nme(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function Bi(t){var e=Sn(t);return Ng(e[1][0].data)}function H3(t,e){var r=Sn(e.data),n=Ua(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(i){var o=Sn(i.data),c=Ua(o[1][0].data)>>>0;switch(n){case 1:s[c]=kE(o[3][0].data);break;case 8:{var u=t[Bi(o[9][0].data)][0],f=Sn(u.data),m=t[Bi(f[1][0].data)][0],p=Ua(m.meta[1][0].data);if(p!=2001)throw new Error("2000 unexpected reference to ".concat(p));var g=Sn(m.data);s[c]=g[3].map(function(b){return kE(b.data)}).join("")}break}}),s}function sme(t,e){var r,n,a,s,i,o,c,u,f,m,p,g,b,y,T=Sn(t),k=Ua(T[1][0].data)>>>0,D=Ua(T[2][0].data)>>>0,L=((n=(r=T[8])==null?void 0:r[0])==null?void 0:n.data)&&Ua(T[8][0].data)>0||!1,j,H;if((s=(a=T[7])==null?void 0:a[0])!=null&&s.data&&e!=0)j=(o=(i=T[7])==null?void 0:i[0])==null?void 0:o.data,H=(u=(c=T[6])==null?void 0:c[0])==null?void 0:u.data;else if((m=(f=T[4])==null?void 0:f[0])!=null&&m.data&&e!=1)j=(g=(p=T[4])==null?void 0:p[0])==null?void 0:g.data,H=(y=(b=T[3])==null?void 0:b[0])==null?void 0:y.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var U=L?4:1,E=ih(j),_=[],B=0;B<j.length/2;++B){var Q=E.getUint16(B*2,!0);Q<65535&&_.push([B,Q])}if(_.length!=D)throw"Expected ".concat(D," cells, found ").concat(_.length);var R=[];for(B=0;B<_.length-1;++B)R[_[B][0]]=H.subarray(_[B][1]*U,_[B+1][1]*U);return _.length>=1&&(R[_[_.length-1][0]]=H.subarray(_[_.length-1][1]*U)),{R:k,cells:R}}function ime(t,e){var r,n=Sn(e.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?Ua(n[7][0].data)>>>0>0?1:0:-1,s=tS(n[5],function(i){return sme(i,a)});return{nrows:Ua(n[4][0].data)>>>0,data:s.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(c,u){if(i[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));i[o.R][u]=c}),i},[])}}function ome(t,e,r){var n,a=Sn(e.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(Ua(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(Ua(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=Fr(s);var i=Sn(a[4][0].data),o=H3(t,t[Bi(i[4][0].data)][0]),c=(n=i[17])!=null&&n[0]?H3(t,t[Bi(i[17][0].data)][0]):[],u=Sn(i[3][0].data),f=0;u[1].forEach(function(m){var p=Sn(m.data),g=t[Bi(p[2][0].data)][0],b=Ua(g.meta[1][0].data);if(b!=6002)throw new Error("6001 unexpected reference to ".concat(b));var y=ime(t,g);y.data.forEach(function(T,k){T.forEach(function(D,L){var j=vr({r:f+k,c:L}),H=ame(D,o,c);H&&(r[j]=H)})}),f+=y.nrows})}function lme(t,e){var r=Sn(e.data),n={"!ref":"A1"},a=t[Bi(r[2][0].data)],s=Ua(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return ome(t,a[0],n),n}function cme(t,e){var r,n=Sn(e.data),a={name:(r=n[1])!=null&&r[0]?kE(n[1][0].data):"",sheets:[]},s=tS(n[2],Bi);return s.forEach(function(i){t[i].forEach(function(o){var c=Ua(o.meta[1][0].data);c==6e3&&a.sheets.push(lme(t,o))})}),a}function Ame(t,e){var r=oS(),n=Sn(e.data),a=tS(n[1],Bi);if(a.forEach(function(s){t[s].forEach(function(i){var o=Ua(i.meta[1][0].data);if(o==2){var c=cme(t,i);c.sheets.forEach(function(u,f){lS(r,u,f==0?c.name:c.name+"_"+f,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function qb(t){var e,r,n,a,s={},i=[];if(t.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=Sl(c.content)}catch(m){return console.log("?? "+c.content.length+" "+(m.message||m))}var f;try{f=_l(u)}catch(m){return console.log("## "+(m.message||m))}f.forEach(function(m){s[m.id]=m.messages,i.push(m.id)})}}),!i.length)throw new Error("File has no messages");var o=((a=(n=(r=(e=s==null?void 0:s[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&Ua(s[1][0].meta[1][0].data)==1&&s[1][0];if(o||i.forEach(function(c){s[c].forEach(function(u){var f=Ua(u.meta[1][0].data)>>>0;if(f==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return Ame(s,o)}function ume(t,e,r){var n,a,s,i;if(!((n=t[6])!=null&&n[0])||!((a=t[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(s=t[8])==null?void 0:s[0])==null?void 0:i.data)&&Ua(t[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var c=0,u=ih(t[7][0].data),f=0,m=[],p=ih(t[4][0].data),g=0,b=[],y=0;y<e.length;++y){if(e[y]==null){u.setUint16(y*2,65535,!0),p.setUint16(y*2,65535);continue}u.setUint16(y*2,f,!0),p.setUint16(y*2,g,!0);var T,k;switch(typeof e[y]){case"string":T=Gb({t:"s",v:e[y]},r),k=zb({t:"s",v:e[y]},r);break;case"number":T=Gb({t:"n",v:e[y]},r),k=zb({t:"n",v:e[y]},r);break;case"boolean":T=Gb({t:"b",v:e[y]},r),k=zb({t:"b",v:e[y]},r);break;default:throw new Error("Unsupported value "+e[y])}m.push(T),f+=T.length,b.push(k),g+=k.length,++c}for(t[2][0].data=Pn(c);y<t[7][0].data.length/2;++y)u.setUint16(y*2,65535,!0),p.setUint16(y*2,65535,!0);return t[6][0].data=Jd(m),t[3][0].data=Jd(b),c}function dme(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Eo(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(Fr(n)));var s=p2(r,{range:n,header:1}),i=["~Sh33tJ5~"];s.forEach(function(K){return K.forEach(function(Y){typeof Y=="string"&&i.push(Y)})});var o={},c=[],u=or.read(e.numbers,{type:"base64"});u.FileIndex.map(function(K,Y){return[K,u.FullPaths[Y]]}).forEach(function(K){var Y=K[0],ee=K[1];if(Y.type==2&&Y.name.match(/\.iwa/)){var Ae=Y.content,Se=Sl(Ae),ge=_l(Se);ge.forEach(function(pe){c.push(pe.id),o[pe.id]={deps:[],location:ee,type:Ua(pe.messages[0].meta[1][0].data)}})}}),c.sort(function(K,Y){return K-Y});var f=c.filter(function(K){return K>1}).map(function(K){return[K,Pn(K)]});u.FileIndex.map(function(K,Y){return[K,u.FullPaths[Y]]}).forEach(function(K){var Y=K[0];if(K[1],!!Y.name.match(/\.iwa/)){var ee=_l(Sl(Y.content));ee.forEach(function(Ae){Ae.messages.forEach(function(Se){f.forEach(function(ge){Ae.messages.some(function(pe){return Ua(pe.meta[1][0].data)!=11006&&X0e(pe.data,ge[1])})&&o[ge[0]].deps.push(Ae.id)})})})}});for(var m=or.find(u,o[1].location),p=_l(Sl(m.content)),g,b=0;b<p.length;++b){var y=p[b];y.id==1&&(g=y)}var T=Bi(Sn(g.messages[0].data)[1][0].data);for(m=or.find(u,o[T].location),p=_l(Sl(m.content)),b=0;b<p.length;++b)y=p[b],y.id==T&&(g=y);for(T=Bi(Sn(g.messages[0].data)[2][0].data),m=or.find(u,o[T].location),p=_l(Sl(m.content)),b=0;b<p.length;++b)y=p[b],y.id==T&&(g=y);for(T=Bi(Sn(g.messages[0].data)[2][0].data),m=or.find(u,o[T].location),p=_l(Sl(m.content)),b=0;b<p.length;++b)y=p[b],y.id==T&&(g=y);var k=Sn(g.messages[0].data);{k[6][0].data=Pn(n.e.r+1),k[7][0].data=Pn(n.e.c+1);var D=Bi(k[46][0].data),L=or.find(u,o[D].location),j=_l(Sl(L.content));{for(var H=0;H<j.length&&j[H].id!=D;++H);if(j[H].id!=D)throw"Bad ColumnRowUIDMapArchive";var U=Sn(j[H].messages[0].data);U[1]=[],U[2]=[],U[3]=[];for(var E=0;E<=n.e.c;++E){var _=[];_[1]=_[2]=[{type:0,data:Pn(E+420690)}],U[1].push({type:2,data:ei(_)}),U[2].push({type:0,data:Pn(E)}),U[3].push({type:0,data:Pn(E)})}U[4]=[],U[5]=[],U[6]=[];for(var B=0;B<=n.e.r;++B)_=[],_[1]=_[2]=[{type:0,data:Pn(B+726270)}],U[4].push({type:2,data:ei(_)}),U[5].push({type:0,data:Pn(B)}),U[6].push({type:0,data:Pn(B)});j[H].messages[0].data=ei(U)}L.content=e0(Zh(j)),L.size=L.content.length,delete k[46];var Q=Sn(k[4][0].data);{Q[7][0].data=Pn(n.e.r+1);var R=Sn(Q[1][0].data),F=Bi(R[2][0].data);L=or.find(u,o[F].location),j=_l(Sl(L.content));{if(j[0].id!=F)throw"Bad HeaderStorageBucket";var V=Sn(j[0].messages[0].data);for(B=0;B<s.length;++B){var X=Sn(V[2][0].data);X[1][0].data=Pn(B),X[4][0].data=Pn(s[B].length),V[2][B]={type:V[2][0].type,data:ei(X)}}j[0].messages[0].data=ei(V)}L.content=e0(Zh(j)),L.size=L.content.length;var oe=Bi(Q[2][0].data);L=or.find(u,o[oe].location),j=_l(Sl(L.content));{if(j[0].id!=oe)throw"Bad HeaderStorageBucket";for(V=Sn(j[0].messages[0].data),E=0;E<=n.e.c;++E)X=Sn(V[2][0].data),X[1][0].data=Pn(E),X[4][0].data=Pn(n.e.r+1),V[2][E]={type:V[2][0].type,data:ei(X)};j[0].messages[0].data=ei(V)}L.content=e0(Zh(j)),L.size=L.content.length;var te=Bi(Q[4][0].data);(function(){for(var K=or.find(u,o[te].location),Y=_l(Sl(K.content)),ee,Ae=0;Ae<Y.length;++Ae){var Se=Y[Ae];Se.id==te&&(ee=Se)}var ge=Sn(ee.messages[0].data);{ge[3]=[];var pe=[];i.forEach(function(se,Pe){pe[1]=[{type:0,data:Pn(Pe)}],pe[2]=[{type:0,data:Pn(1)}],pe[3]=[{type:2,data:Y0e(se)}],ge[3].push({type:2,data:ei(pe)})})}ee.messages[0].data=ei(ge);var ye=Zh(Y),ue=e0(ye);K.content=ue,K.size=K.content.length})();var ae=Sn(Q[3][0].data);{var q=ae[1][0];delete ae[2];var J=Sn(q.data);{var W=Bi(J[2][0].data);(function(){for(var K=or.find(u,o[W].location),Y=_l(Sl(K.content)),ee,Ae=0;Ae<Y.length;++Ae){var Se=Y[Ae];Se.id==W&&(ee=Se)}var ge=Sn(ee.messages[0].data);{delete ge[6],delete ae[7];var pe=new Uint8Array(ge[5][0].data);ge[5]=[];for(var ye=0,ue=0;ue<=n.e.r;++ue){var se=Sn(pe);ye+=ume(se,s[ue],i),se[1][0].data=Pn(ue),ge[5].push({data:ei(se),type:2})}ge[1]=[{type:0,data:Pn(n.e.c+1)}],ge[2]=[{type:0,data:Pn(n.e.r+1)}],ge[3]=[{type:0,data:Pn(ye)}],ge[4]=[{type:0,data:Pn(n.e.r+1)}]}ee.messages[0].data=ei(ge);var Pe=Zh(Y),at=e0(Pe);K.content=at,K.size=K.content.length})()}q.data=ei(J)}Q[3][0].data=ei(ae)}k[4][0].data=ei(Q)}g.messages[0].data=ei(k);var de=Zh(p),P=e0(de);return m.content=P,m.size=m.content.length,u}function AM(t){return function(r){for(var n=0;n!=t.length;++n){var a=t[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function rS(t){AM([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function nS(t){AM([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function fme(t){return Jr.WS.indexOf(t)>-1?"sheet":t==Jr.CS?"chart":t==Jr.DS?"dialog":t==Jr.MS?"macro":t&&t.length?t:"sheet"}function hme(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,fme(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function mme(t,e,r,n,a,s,i,o,c,u,f,m){try{s[n]=Kp(Wo(t,r,!0),e);var p=us(t,e),g;switch(o){case"sheet":g=Mhe(p,e,a,c,s[n],u,f,m);break;case"chart":if(g=Phe(p,e,a,c,s[n],u,f,m),!g||!g["!drawel"])break;var b=_p(g["!drawel"].Target,e),y=Cg(b),T=EAe(Wo(t,b,!0),Kp(Wo(t,y,!0),b)),k=_p(T,b),D=Cg(k);g=uhe(Wo(t,k,!0),k,c,Kp(Wo(t,D,!0),k),u,g);break;case"macro":g=jhe(p,e,a,c,s[n],u,f,m);break;case"dialog":g=Ohe(p,e,a,c,s[n],u,f,m);break;default:throw new Error("Unrecognized sheet type "+o)}i[n]=g;var L=[];s&&s[n]&&Ma(s[n]).forEach(function(j){var H="";if(s[n][j].Type==Jr.CMNT){H=_p(s[n][j].Target,e);var U=Ghe(us(t,H,!0),H,c);if(!U||!U.length)return;T3(g,U,!1)}s[n][j].Type==Jr.TCMNT&&(H=_p(s[n][j].Target,e),L=L.concat(SAe(us(t,H,!0),c)))}),L&&L.length&&T3(g,L,!0,c.people||[])}catch(j){if(c.WTF)throw j}}function Cl(t){return t.charAt(0)=="/"?t.slice(1):t}function pme(t,e){if(mm(),e=e||{},rS(e),Tl(t,"META-INF/manifest.xml")||Tl(t,"objectdata.xml"))return P3(t,e);if(Tl(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof qb<"u"){if(t.FileIndex)return qb(t);var r=or.utils.cfb_new();return WI(t).forEach(function(X){Lr(r,X,Tse(t,X))}),qb(r)}throw new Error("Unsupported NUMBERS file")}if(!Tl(t,"[Content_Types].xml"))throw Tl(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Tl(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=WI(t),a=wie(Wo(t,"[Content_Types].xml")),s=!1,i,o;if(a.workbooks.length===0&&(o="xl/workbook.xml",us(t,o,!0)&&a.workbooks.push(o)),a.workbooks.length===0){if(o="xl/workbook.bin",!us(t,o,!0))throw new Error("Could not find workbook");a.workbooks.push(o),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},u={};if(!e.bookSheets&&!e.bookProps){if(Wp=[],a.sst)try{Wp=Vhe(us(t,Cl(a.sst)),a.sst,e)}catch(X){if(e.WTF)throw X}e.cellStyles&&a.themes.length&&(c=Hhe(Wo(t,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],e)),a.style&&(u=Qhe(us(t,Cl(a.style)),a.style,c,e))}a.links.map(function(X){try{var oe=Kp(Wo(t,Cg(Cl(X))),X);return qhe(us(t,Cl(X)),oe,X,e)}catch{}});var f=Uhe(us(t,Cl(a.workbooks[0])),a.workbooks[0],e),m={},p="";a.coreprops.length&&(p=us(t,Cl(a.coreprops[0]),!0),p&&(m=XU(p)),a.extprops.length!==0&&(p=us(t,Cl(a.extprops[0]),!0),p&&Tie(p,m,e)));var g={};(!e.bookSheets||e.bookProps)&&a.custprops.length!==0&&(p=Wo(t,Cl(a.custprops[0]),!0),p&&(g=Nie(p,e)));var b={};if((e.bookSheets||e.bookProps)&&(f.Sheets?i=f.Sheets.map(function(oe){return oe.name}):m.Worksheets&&m.SheetNames.length>0&&(i=m.SheetNames),e.bookProps&&(b.Props=m,b.Custprops=g),e.bookSheets&&typeof i<"u"&&(b.SheetNames=i),e.bookSheets?b.SheetNames:e.bookProps))return b;i={};var y={};e.bookDeps&&a.calcchain&&(y=zhe(us(t,Cl(a.calcchain)),a.calcchain));var T=0,k={},D,L;{var j=f.Sheets;m.Worksheets=j.length,m.SheetNames=[];for(var H=0;H!=j.length;++H)m.SheetNames[H]=j[H].name}var U=s?"bin":"xml",E=a.workbooks[0].lastIndexOf("/"),_=(a.workbooks[0].slice(0,E+1)+"_rels/"+a.workbooks[0].slice(E+1)+".rels").replace(/^\//,"");Tl(t,_)||(_="xl/_rels/workbook."+U+".rels");var B=Kp(Wo(t,_,!0),_.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(e.xlmeta=Khe(us(t,Cl(a.metadata[0])),a.metadata[0],e)),(a.people||[]).length>=1&&(e.people=BAe(us(t,Cl(a.people[0])),e)),B&&(B=hme(B,f.Sheets));var Q=us(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(T=0;T!=m.Worksheets;++T){var R="sheet";if(B&&B[T]?(D="xl/"+B[T][1].replace(/[\/]?xl\//,""),Tl(t,D)||(D=B[T][1]),Tl(t,D)||(D=_.replace(/_rels\/.*$/,"")+B[T][1]),R=B[T][2]):(D="xl/worksheets/sheet"+(T+1-Q)+"."+U,D=D.replace(/sheet0\./,"sheet.")),L=D.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(T!=e.sheets)continue e;break;case"string":if(m.SheetNames[T].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var F=!1,V=0;V!=e.sheets.length;++V)typeof e.sheets[V]=="number"&&e.sheets[V]==T&&(F=1),typeof e.sheets[V]=="string"&&e.sheets[V].toLowerCase()==m.SheetNames[T].toLowerCase()&&(F=1);if(!F)continue e}}mme(t,D,L,m.SheetNames[T],T,k,i,R,e,f,c,u)}return b={Directory:a,Workbook:f,Props:m,Custprops:g,Deps:y,Sheets:i,SheetNames:m.SheetNames,Strings:Wp,Styles:u,Themes:c,SSF:Aa(pr)},e&&e.bookFiles&&(t.files?(b.keys=n,b.files=t.files):(b.keys=[],b.files={},t.FullPaths.forEach(function(X,oe){X=X.replace(/^Root Entry[\/]/,""),b.keys.push(X),b.files[X]=t.FileIndex[oe]}))),e&&e.bookVBA&&(a.vba.length>0?b.vbaraw=us(t,Cl(a.vba[0]),!0):a.defaults&&a.defaults.bin===UAe&&(b.vbaraw=us(t,"xl/vbaProject.bin",!0))),b}function gme(t,e){var r=e||{},n="Workbook",a=or.find(t,n);try{if(n="/!DataSpaces/Version",a=or.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(Kle(a.content),n="/!DataSpaces/DataSpaceMap",a=or.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=$le(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=or.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=Jle(a.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=or.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);Xle(a.content)}catch{}if(n="/EncryptionInfo",a=or.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=Zle(a.content);if(n="/EncryptedPackage",a=or.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],a.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function xme(t,e){return e.bookType=="ods"?cM(t,e):e.bookType=="numbers"?dme(t,e):e.bookType=="xlsb"?vme(t,e):wme(t,e)}function vme(t,e){C0=1024,t&&!t.SSF&&(t.SSF=Aa(pr)),t&&t.SSF&&(mm(),vw(t.SSF),e.revssf=yw(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,$p?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=M8.indexOf(e.bookType)>-1,a=H5();nS(e=e||{});var s=B5(),i="",o=0;if(e.cellXfs=[],nf(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",Lr(s,i,ZU(t.Props,e)),a.coreprops.push(i),jn(e.rels,2,i,Jr.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}for(t.Props.Worksheets=t.Props.SheetNames.length,Lr(s,i,r8(t.Props)),a.extprops.push(i),jn(e.rels,3,i,Jr.EXT_PROPS),t.Custprops!==t.Props&&Ma(t.Custprops||{}).length>0&&(i="docProps/custom.xml",Lr(s,i,n8(t.Custprops)),a.custprops.push(i),jn(e.rels,4,i,Jr.CUST_PROPS)),o=1;o<=t.SheetNames.length;++o){var f={"!id":{}},m=t.Sheets[t.SheetNames[o-1]],p=(m||{})["!type"]||"sheet";switch(p){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,Lr(s,i,$he(o-1,i,e,t,f)),a.sheets.push(i),jn(e.wbrels,-1,"worksheets/sheet"+o+"."+r,Jr.WS[0])}if(m){var g=m["!comments"],b=!1,y="";g&&g.length>0&&(y="xl/comments"+o+"."+r,Lr(s,y,Xhe(g,y)),a.comments.push(y),jn(f,-1,"../comments"+o+"."+r,Jr.CMNT),b=!0),m["!legacy"]&&b&&Lr(s,"xl/drawings/vmlDrawing"+o+".vml",L8(o,m["!comments"])),delete m["!comments"],delete m["!legacy"]}f["!id"].rId1&&Lr(s,Cg(i),P0(f))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+r,Lr(s,i,Yhe(e.Strings,i,e)),a.strs.push(i),jn(e.wbrels,-1,"sharedStrings."+r,Jr.SST)),i="xl/workbook."+r,Lr(s,i,Whe(t,i)),a.workbooks.push(i),jn(e.rels,1,i,Jr.WB),i="xl/theme/theme1.xml",Lr(s,i,W5(t.Themes,e)),a.themes.push(i),jn(e.wbrels,-1,"theme/theme1.xml",Jr.THEME),i="xl/styles."+r,Lr(s,i,Jhe(t,i,e)),a.styles.push(i),jn(e.wbrels,-1,"styles."+r,Jr.STY),t.vbaraw&&n&&(i="xl/vbaProject.bin",Lr(s,i,t.vbaraw),a.vba.push(i),jn(e.wbrels,-1,"vbaProject.bin",Jr.VBA)),i="xl/metadata."+r,Lr(s,i,Zhe(i)),a.metadata.push(i),jn(e.wbrels,-1,"metadata."+r,Jr.XLMETA),Lr(s,"[Content_Types].xml",JU(a,e)),Lr(s,"_rels/.rels",P0(e.rels)),Lr(s,"xl/_rels/workbook."+r+".rels",P0(e.wbrels)),delete e.revssf,delete e.ssf,s}function wme(t,e){C0=1024,t&&!t.SSF&&(t.SSF=Aa(pr)),t&&t.SSF&&(mm(),vw(t.SSF),e.revssf=yw(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,$p?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=M8.indexOf(e.bookType)>-1,a=H5();nS(e=e||{});var s=B5(),i="",o=0;if(e.cellXfs=[],nf(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",Lr(s,i,ZU(t.Props,e)),a.coreprops.push(i),jn(e.rels,2,i,Jr.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}t.Props.Worksheets=t.Props.SheetNames.length,Lr(s,i,r8(t.Props)),a.extprops.push(i),jn(e.rels,3,i,Jr.EXT_PROPS),t.Custprops!==t.Props&&Ma(t.Custprops||{}).length>0&&(i="docProps/custom.xml",Lr(s,i,n8(t.Custprops)),a.custprops.push(i),jn(e.rels,4,i,Jr.CUST_PROPS));var f=["SheetJ5"];for(e.tcid=0,o=1;o<=t.SheetNames.length;++o){var m={"!id":{}},p=t.Sheets[t.SheetNames[o-1]],g=(p||{})["!type"]||"sheet";switch(g){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,Lr(s,i,W8(o-1,e,t,m)),a.sheets.push(i),jn(e.wbrels,-1,"worksheets/sheet"+o+"."+r,Jr.WS[0])}if(p){var b=p["!comments"],y=!1,T="";if(b&&b.length>0){var k=!1;b.forEach(function(D){D[1].forEach(function(L){L.T==!0&&(k=!0)})}),k&&(T="xl/threadedComments/threadedComment"+o+"."+r,Lr(s,T,TAe(b,f,e)),a.threadedcomments.push(T),jn(m,-1,"../threadedComments/threadedComment"+o+"."+r,Jr.TCMNT)),T="xl/comments"+o+"."+r,Lr(s,T,U8(b)),a.comments.push(T),jn(m,-1,"../comments"+o+"."+r,Jr.CMNT),y=!0}p["!legacy"]&&y&&Lr(s,"xl/drawings/vmlDrawing"+o+".vml",L8(o,p["!comments"])),delete p["!comments"],delete p["!legacy"]}m["!id"].rId1&&Lr(s,Cg(i),P0(m))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+r,Lr(s,i,C8(e.Strings,e)),a.strs.push(i),jn(e.wbrels,-1,"sharedStrings."+r,Jr.SST)),i="xl/workbook."+r,Lr(s,i,Z8(t)),a.workbooks.push(i),jn(e.rels,1,i,Jr.WB),i="xl/theme/theme1.xml",Lr(s,i,W5(t.Themes,e)),a.themes.push(i),jn(e.wbrels,-1,"theme/theme1.xml",Jr.THEME),i="xl/styles."+r,Lr(s,i,I8(t,e)),a.styles.push(i),jn(e.wbrels,-1,"styles."+r,Jr.STY),t.vbaraw&&n&&(i="xl/vbaProject.bin",Lr(s,i,t.vbaraw),a.vba.push(i),jn(e.wbrels,-1,"vbaProject.bin",Jr.VBA)),i="xl/metadata."+r,Lr(s,i,R8()),a.metadata.push(i),jn(e.wbrels,-1,"metadata."+r,Jr.XLMETA),f.length>1&&(i="xl/persons/person.xml",Lr(s,i,NAe(f)),a.people.push(i),jn(e.wbrels,-1,"persons/person.xml",Jr.PEOPLE)),Lr(s,"[Content_Types].xml",JU(a,e)),Lr(s,"_rels/.rels",P0(e.rels)),Lr(s,"xl/_rels/workbook."+r+".rels",P0(e.wbrels)),delete e.revssf,delete e.ssf,s}function aS(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=Zo(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function yme(t,e){return or.find(t,"EncryptedPackage")?gme(t,e):nM(t,e)}function bme(t,e){var r,n=t,a=e||{};return a.type||(a.type=Vr&&Buffer.isBuffer(t)?"buffer":"base64"),r=_U(n,a),pme(r,a)}function uM(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return BE(t.slice(r),e);default:break e}return Y0.to_workbook(t,e)}function Cme(t,e){var r="",n=aS(t,e);switch(e.type){case"base64":r=Zo(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=rh(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Wn(r)),e.type="binary",uM(r,e)}function Eme(t,e){var r=t;return e.type=="base64"&&(r=Zo(r)),r=gg.utils.decode(1200,r.slice(2),"str"),e.type="binary",uM(r,e)}function _me(t){return t.match(/[^\x00-\x7F]/)?cA(t):t}function Kb(t,e,r,n){return n?(r.type="string",Y0.to_workbook(t,r)):Y0.to_workbook(e,r)}function kg(t,e){C5();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return kg(new Uint8Array(t),(r=Aa(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),O0={},r.dateNF&&(O0.dateNF=r.dateNF),r.type||(r.type=Vr&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=Vr?"buffer":"binary",n=vse(t),typeof Uint8Array<"u"&&!Vr&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=_me(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return r=Aa(r),r.type="array",kg(E5(n),r)}switch((a=aS(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return yme(or.read(n,r),r);break;case 9:if(a[1]<=8)return nM(n,r);break;case 60:return BE(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return kle(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return y8.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?bme(n,r):Kb(t,n,r,s);case 239:return a[3]===60?BE(n,r):Kb(t,n,r,s);case 255:if(a[1]===254)return Eme(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return zf.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return zf.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return TE.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return B8.to_workbook(n,r);break;case 10:case 13:case 32:return Cme(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return Nle.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?TE.to_workbook(n,r):Kb(t,n,r,s)}function dM(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return tx(e.file,or.write(t,{type:Vr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return or.write(t,e)}function Sme(t,e){var r=Aa(e||{}),n=xme(t,r);return Tme(n,r)}function Tme(t,e){var r={},n=Vr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var a=t.FullPaths?or.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(e.type=="binary"||e.type=="base64")return a;a=new Uint8Array(xw(a))}return e.password&&typeof encrypt_agile<"u"?dM(encrypt_agile(a,e.password),e):e.type==="file"?tx(e.file,a):e.type=="string"?Wn(a):a}function Bme(t,e){var r=e||{},n=_0e(t,r);return dM(n,r)}function iA(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return xg(cA(n));case"binary":return cA(n);case"string":return t;case"file":return tx(e.file,n,"utf8");case"buffer":return Vr?Eu(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):iA(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Nme(t,e){switch(e.type){case"base64":return xg(t);case"binary":return t;case"string":return t;case"file":return tx(e.file,t,"binary");case"buffer":return Vr?Eu(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function R1(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?xg(r):e.type=="string"?Wn(r):r;case"file":return tx(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function fM(t,e){C5(),yhe(t);var r=Aa(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=fM(t,r);return r.type="array",xw(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=t.SheetNames.indexOf(r.sheet),!t.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return iA(x0e(t,r),r);case"slk":case"sylk":return iA(w8.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"htm":case"html":return iA(sM(t.Sheets[t.SheetNames[a]],r),r);case"txt":return Nme(hM(t.Sheets[t.SheetNames[a]],r),r);case"csv":return iA(iS(t.Sheets[t.SheetNames[a]],r),r,"\uFEFF");case"dif":return iA(y8.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"dbf":return R1(TE.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"prn":return iA(Y0.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"rtf":return iA(B8.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"eth":return iA(b8.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"fods":return iA(cM(t,r),r);case"wk1":return R1(zf.sheet_to_wk1(t.Sheets[t.SheetNames[a]],r),r);case"wk3":return R1(zf.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),R1(aM(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),Bme(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Sme(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function kme(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function sS(t,e,r){var n={};return n.type="file",n.file=e,kme(n),fM(t,n)}function Ime(t,e,r,n,a,s,i,o){var c=es(r),u=o.defval,f=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),m=!0,p=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(p,"__rowNum__",{value:r,enumerable:!1})}catch{p.__rowNum__=r}else p.__rowNum__=r;if(!i||t[r])for(var g=e.s.c;g<=e.e.c;++g){var b=i?t[r][g]:t[n[g]+c];if(b===void 0||b.t===void 0){if(u===void 0)continue;s[g]!=null&&(p[s[g]]=u);continue}var y=b.v;switch(b.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+b.t)}if(s[g]!=null){if(y==null)if(b.t=="e"&&y===null)p[s[g]]=null;else if(u!==void 0)p[s[g]]=u;else if(f&&y===null)p[s[g]]=null;else continue;else p[s[g]]=f&&(b.t!=="n"||b.t==="n"&&o.rawNumbers!==!1)?y:vu(b,y,o);y!=null&&(m=!1)}}return{row:p,isempty:m}}function p2(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],i=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},f=u.range!=null?u.range:t["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof f){case"string":c=vn(f);break;case"number":c=vn(t["!ref"]),c.s.r=f;break;default:c=f}n>0&&(a=0);var m=es(c.s.r),p=[],g=[],b=0,y=0,T=Array.isArray(t),k=c.s.r,D=0,L={};T&&!t[k]&&(t[k]=[]);var j=u.skipHidden&&t["!cols"]||[],H=u.skipHidden&&t["!rows"]||[];for(D=c.s.c;D<=c.e.c;++D)if(!(j[D]||{}).hidden)switch(p[D]=Ca(D),r=T?t[k][D]:t[p[D]+m],n){case 1:s[D]=D-c.s.c;break;case 2:s[D]=p[D];break;case 3:s[D]=u.header[D-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=i=vu(r,null,u),y=L[i]||0,!y)L[i]=1;else{do o=i+"_"+y++;while(L[o]);L[i]=y,L[o]=1}s[D]=o}for(k=c.s.r+a;k<=c.e.r;++k)if(!(H[k]||{}).hidden){var U=Ime(t,c,k,p,n,s,T,u);(U.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(g[b++]=U.row)}return g.length=b,g}var V3=/"/g;function Fme(t,e,r,n,a,s,i,o){for(var c=!0,u=[],f="",m=es(r),p=e.s.c;p<=e.e.c;++p)if(n[p]){var g=o.dense?(t[r]||[])[p]:t[n[p]+m];if(g==null)f="";else if(g.v!=null){c=!1,f=""+(o.rawNumbers&&g.t=="n"?g.v:vu(g,null,o));for(var b=0,y=0;b!==f.length;++b)if((y=f.charCodeAt(b))===a||y===s||y===34||o.forceQuotes){f='"'+f.replace(V3,'""')+'"';break}f=="ID"&&(f='"ID"')}else g.f!=null&&!g.F?(c=!1,f="="+g.f,f.indexOf(",")>=0&&(f='"'+f.replace(V3,'""')+'"')):f="";u.push(f)}return o.blankrows===!1&&c?null:u.join(i)}function iS(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var a=vn(t["!ref"]),s=n.FS!==void 0?n.FS:",",i=s.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,c=o.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),f="",m=[];n.dense=Array.isArray(t);for(var p=n.skipHidden&&t["!cols"]||[],g=n.skipHidden&&t["!rows"]||[],b=a.s.c;b<=a.e.c;++b)(p[b]||{}).hidden||(m[b]=Ca(b));for(var y=0,T=a.s.r;T<=a.e.r;++T)(g[T]||{}).hidden||(f=Fme(t,a,T,m,i,c,s,n),f!=null&&(n.strip&&(f=f.replace(u,"")),(f||n.blankrows!==!1)&&r.push((y++?o:"")+f)));return delete n.dense,r.join("")}function hM(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=iS(t,e);return r}function Dme(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var a=vn(t["!ref"]),s="",i=[],o,c=[],u=Array.isArray(t);for(o=a.s.c;o<=a.e.c;++o)i[o]=Ca(o);for(var f=a.s.r;f<=a.e.r;++f)for(s=es(f),o=a.s.c;o<=a.e.c;++o)if(e=i[o]+s,r=u?(t[f]||[])[o]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=e+"="+n}return c}function mM(t,e,r){var n=r||{},a=+!n.skipHeader,s=t||{},i=0,o=0;if(s&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?Ea(n.origin):n.origin;i=c.r,o=c.c}var u,f={s:{c:0,r:0},e:{c:o,r:i+e.length-1+a}};if(s["!ref"]){var m=vn(s["!ref"]);f.e.c=Math.max(f.e.c,m.e.c),f.e.r=Math.max(f.e.r,m.e.r),i==-1&&(i=m.e.r+1,f.e.r=i+e.length-1+a)}else i==-1&&(i=0,f.e.r=e.length-1+a);var p=n.header||[],g=0;e.forEach(function(y,T){Ma(y).forEach(function(k){(g=p.indexOf(k))==-1&&(p[g=p.length]=k);var D=y[k],L="z",j="",H=vr({c:o+g,r:i+T+a});u=Ig(s,H),D&&typeof D=="object"&&!(D instanceof Date)?s[H]=D:(typeof D=="number"?L="n":typeof D=="boolean"?L="b":typeof D=="string"?L="s":D instanceof Date?(L="d",n.cellDates||(L="n",D=Bs(D)),j=n.dateNF||pr[14]):D===null&&n.nullError&&(L="e",D=0),u?(u.t=L,u.v=D,delete u.w,delete u.R,j&&(u.z=j)):s[H]=u={t:L,v:D},j&&(u.z=j))})}),f.e.c=Math.max(f.e.c,o+p.length-1);var b=es(i);if(a)for(g=0;g<p.length;++g)s[Ca(g+o)+b]={t:"s",v:p[g]};return s["!ref"]=Fr(f),s}function Rme(t,e){return mM(null,t,e)}function Ig(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=Ea(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?Ig(t,vr(e)):Ig(t,vr({r:e,c:r||0}))}function Lme(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function oS(){return{SheetNames:[],Sheets:{}}}function lS(t,e,r,n){var a=1;if(!r)for(;a<=65535&&t.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var i=s&&s[1]||r;for(++a;a<=65535&&t.SheetNames.indexOf(r=i+a)!=-1;++a);}if(X8(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function Ume(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=Lme(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function Mme(t,e){return t.z=e,t}function pM(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function Pme(t,e,r){return pM(t,"#"+e,r)}function jme(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function Ome(t,e,r,n){for(var a=typeof e!="string"?e:vn(e),s=typeof e=="string"?e:Fr(e),i=a.s.r;i<=a.e.r;++i)for(var o=a.s.c;o<=a.e.c;++o){var c=Ig(t,i,o);c.t="n",c.F=s,delete c.v,i==a.s.r&&o==a.s.c&&(c.f=r,n&&(c.D=!0))}return t}var Dl={encode_col:Ca,encode_row:es,encode_cell:vr,encode_range:Fr,decode_col:U5,decode_row:L5,split_cell:Yse,decode_cell:Ea,decode_range:Eo,format_cell:vu,sheet_add_aoa:VU,sheet_add_json:mM,sheet_add_dom:iM,aoa_to_sheet:pm,json_to_sheet:Rme,table_to_sheet:oM,table_to_book:K0e,sheet_to_csv:iS,sheet_to_txt:hM,sheet_to_json:p2,sheet_to_html:sM,sheet_to_formulae:Dme,sheet_to_row_object_array:p2,sheet_get_cell:Ig,book_new:oS,book_append_sheet:lS,book_set_sheet_visibility:Ume,cell_set_number_format:Mme,cell_set_hyperlink:pM,cell_set_internal_link:Pme,cell_add_comment:jme,sheet_set_array_formula:Ome,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Qme=async()=>{try{const t=new Date,e=new Date(t.getFullYear(),t.getMonth(),t.getDate()),r=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let n=0,a=0;const s=[];for(const c of r)try{const u=Nt(Gr,c),f=await ps(u),m=f.size;n+=m,s.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:m});let p=0;f.docs.forEach(g=>{const b=g.data();b.createdAt&&new Date(b.createdAt)>=e&&p++}),a+=p}catch(u){console.warn(`Error accediendo a colección ${c}:`,u),s.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:0})}const i=[];try{const c=Nt(Gr,"apiLogs"),u=new Date(t.getTime()-10080*60*1e3),f=er(c,Tn("timestamp",">=",u.toISOString()),fn("timestamp","desc")),m=await ps(f),p={};m.docs.forEach(g=>{const b=g.data(),y=new Date(b.timestamp).toLocaleDateString("es-CL");p[y]=(p[y]||0)+1}),Object.entries(p).sort(([g],[b])=>new Date(g).getTime()-new Date(b).getTime()).forEach(([g,b])=>{i.push({label:g,value:b})})}catch(c){console.warn("Error calculando actividad diaria:",c)}const o=Math.floor(a*2.5);return{documentsCreatedToday:a,readsToday:o,writesToday:a,totalDocuments:n,collectionsActivity:s.sort((c,u)=>u.value-c.value),dailyActivity:i}}catch(t){return console.error("Error al obtener estadísticas de Firestore:",t),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},G3=500,t0=({title:t,value:e,description:r,alert:n})=>l.jsxs("div",{className:`p-5 rounded-xl border ${n?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:t}),l.jsx("p",{className:`text-3xl font-bold mt-2 ${n?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:e}),r&&l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]}),Wb=({title:t,data:e,colorClass:r})=>{const n=ne.useMemo(()=>Math.max(...e.map(a=>a.value),1),[e]);return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:t}),l.jsx("div",{className:"space-y-4",children:e.length>0?e.map(a=>l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:a.label}),l.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:a.value})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:l.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${a.value/n*100}%`}})})]},a.label)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},Hme=()=>{const[t,e]=ne.useState([]),[r,n]=ne.useState(!0),[a,s]=ne.useState(null),[i,o]=ne.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]});ne.useEffect(()=>{n(!0);const m=are(b=>{e(b),n(!1)}),p=async()=>{try{const b=await Qme();o(b)}catch(b){console.error("Error al cargar estadísticas de Firestore:",b)}};p();const g=setInterval(p,300*1e3);return()=>{m(),clearInterval(g)}},[]);const{stats:c,userStats:u,moduleStats:f}=ne.useMemo(()=>{const m=new Date,p=new Date(m.getFullYear(),m.getMonth(),m.getDate()).getTime(),g=p-m.getDay()*24*60*60*1e3,b=new Date(m.getFullYear(),m.getMonth(),1).getTime(),y={today:0,week:0,month:0},T={},k={};t.forEach(j=>{const H=new Date(j.timestamp).getTime();H>=p&&y.today++,H>=g&&y.week++,H>=b&&y.month++;const U=j.userEmail||"Desconocido";T[U]||(T[U]={email:U,today:0,month:0,total:0}),T[U].total++,H>=p&&T[U].today++,H>=b&&T[U].month++,k[j.module]=(k[j.module]||0)+1});const D=Object.values(T).sort((j,H)=>H.total-j.total),L=Object.entries(k).map(([j,H])=>({label:j,value:H})).sort((j,H)=>H.value-j.value);return{stats:y,userStats:D,moduleStats:L}},[t]);return l.jsxs("div",{className:"space-y-8",children:[a&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),r&&l.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadísticas..."}),!r&&t.length===0&&l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsx(t0,{title:"Llamadas Hoy",value:r?"--":c.today,description:`Límite recomendado: ${G3}`,alert:c.today>G3}),l.jsx(t0,{title:"Llamadas esta Semana",value:r?"--":c.week}),l.jsx(t0,{title:"Llamadas este Mes",value:r?"--":c.month})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[l.jsx(Wb,{title:"Uso por Módulo",data:f,colorClass:"bg-sky-500"}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),l.jsx("div",{className:"overflow-x-auto max-h-96",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),l.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),l.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),l.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&u.length>0?u.map(m=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:m.email}),l.jsx("td",{className:"px-4 py-2 text-center text-sm",children:m.today}),l.jsx("td",{className:"px-4 py-2 text-center text-sm",children:m.month}),l.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:m.total})]},m.email)):l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:r?"Cargando...":"No hay registros."})})})]})})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadísticas de uso de Firestore (simuladas)."}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsx(t0,{title:"Documentos Creados (Hoy)",value:i.documentsCreatedToday,description:"Nuevos documentos"}),l.jsx(t0,{title:"Lecturas de Firestore (Hoy)",value:i.readsToday,description:"Operaciones de lectura"}),l.jsx(t0,{title:"Total de Documentos",value:i.totalDocuments,description:"En todas las colecciones"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[l.jsx(Wb,{title:"Actividad por Colección",data:i.collectionsActivity,colorClass:"bg-green-500"}),l.jsx(Wb,{title:"Actividad Diaria (Últimos 7 días)",data:i.dailyActivity,colorClass:"bg-purple-500"})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vme="type.googleapis.com/google.protobuf.Int64Value",Gme="type.googleapis.com/google.protobuf.UInt64Value";function gM(t,e){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}function g2(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>g2(e));if(typeof t=="function"||typeof t=="object")return gM(t,e=>g2(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Z0(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case Vme:case Gme:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Z0(e)):typeof t=="function"||typeof t=="object"?gM(t,e=>Z0(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class yo extends wA{constructor(e,r,n){super(`${cS}/${e}`,r||""),this.details=n,Object.setPrototypeOf(this,yo.prototype)}}function zme(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function x2(t,e){let r=zme(t),n=r,a;try{const s=e&&e.error;if(s){const i=s.status;if(typeof i=="string"){if(!z3[i])return new yo("internal","internal");r=z3[i],n=i}const o=s.message;typeof o=="string"&&(n=o),a=s.details,a!==void 0&&(a=Z0(a))}}catch{}return r==="ok"?null:new yo(r,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qme{constructor(e,r,n,a){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Il(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||r.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||a==null||a.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),a=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE="us-central1",Kme=/^data: (.*?)(?:\n|$)/;function Wme(t){let e=null;return{promise:new Promise((r,n)=>{e=setTimeout(()=>{n(new yo("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class $me{constructor(e,r,n,a,s=IE,i=(...o)=>fetch(...o)){this.app=e,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new qme(e,r,n,a),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(s);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=IE}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function Jme(t,e,r){const n=oh(e);t.emulatorOrigin=`http${n?"s":""}://${e}:${r}`,n&&(s_(t.emulatorOrigin),i_("Functions",!0))}function Yme(t,e,r){const n=a=>Zme(t,e,a,{});return n.stream=(a,s)=>tpe(t,e,a,s),n}async function Xme(t,e,r,n){r["Content-Type"]="application/json";let a;try{a=await n(t,{method:"POST",body:JSON.stringify(e),headers:r})}catch{return{status:0,json:null}}let s=null;try{s=await a.json()}catch{}return{status:a.status,json:s}}async function xM(t,e){const r={},n=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return n.authToken&&(r.Authorization="Bearer "+n.authToken),n.messagingToken&&(r["Firebase-Instance-ID-Token"]=n.messagingToken),n.appCheckToken!==null&&(r["X-Firebase-AppCheck"]=n.appCheckToken),r}function Zme(t,e,r,n){const a=t._url(e);return epe(t,a,r,n)}async function epe(t,e,r,n){r=g2(r);const a={data:r},s=await xM(t,n),i=n.timeout||7e4,o=Wme(i),c=await Promise.race([Xme(e,a,s,t.fetchImpl),o.promise,t.cancelAllRequests]);if(o.cancel(),!c)throw new yo("cancelled","Firebase Functions instance was deleted.");const u=x2(c.status,c.json);if(u)throw u;if(!c.json)throw new yo("internal","Response is not valid JSON object.");let f=c.json.data;if(typeof f>"u"&&(f=c.json.result),typeof f>"u")throw new yo("internal","Response is missing data field.");return{data:Z0(f)}}function tpe(t,e,r,n){const a=t._url(e);return rpe(t,a,r,n||{})}async function rpe(t,e,r,n){var p;r=g2(r);const a={data:r},s=await xM(t,n);s["Content-Type"]="application/json",s.Accept="text/event-stream";let i;try{i=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(a),headers:s,signal:n==null?void 0:n.signal})}catch(g){if(g instanceof Error&&g.name==="AbortError"){const y=new yo("cancelled","Request was cancelled.");return{data:Promise.reject(y),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(y)}}}}}}const b=x2(0,null);return{data:Promise.reject(b),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(b)}}}}}}let o,c;const u=new Promise((g,b)=>{o=g,c=b});(p=n==null?void 0:n.signal)==null||p.addEventListener("abort",()=>{const g=new yo("cancelled","Request was cancelled.");c(g)});const f=i.body.getReader(),m=npe(f,o,c,n==null?void 0:n.signal);return{stream:{[Symbol.asyncIterator](){const g=m.getReader();return{async next(){const{value:b,done:y}=await g.read();return{value:b,done:y}},async return(){return await g.cancel(),{done:!0,value:void 0}}}}},data:u}}function npe(t,e,r,n){const a=(i,o)=>{const c=i.match(Kme);if(!c)return;const u=c[1];try{const f=JSON.parse(u);if("result"in f){e(Z0(f.result));return}if("message"in f){o.enqueue(Z0(f.message));return}if("error"in f){const m=x2(0,f);o.error(m),r(m);return}}catch(f){if(f instanceof yo){o.error(f),r(f);return}}},s=new TextDecoder;return new ReadableStream({start(i){let o="";return c();async function c(){if(n!=null&&n.aborted){const u=new yo("cancelled","Request was cancelled");return i.error(u),r(u),Promise.resolve()}try{const{value:u,done:f}=await t.read();if(f){o.trim()&&a(o.trim(),i),i.close();return}if(n!=null&&n.aborted){const p=new yo("cancelled","Request was cancelled");i.error(p),r(p),await t.cancel();return}o+=s.decode(u,{stream:!0});const m=o.split(`
`);o=m.pop()||"";for(const p of m)p.trim()&&a(p.trim(),i);return c()}catch(u){const f=u instanceof yo?u:x2(0,null);i.error(f),r(f)}}},cancel(){return t.cancel()}})}const q3="@firebase/functions",K3="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ape="auth-internal",spe="app-check-internal",ipe="messaging-internal";function ope(t){const e=(r,{instanceIdentifier:n})=>{const a=r.getProvider("app").getImmediate(),s=r.getProvider(ape),i=r.getProvider(ipe),o=r.getProvider(spe);return new $me(a,s,i,o,n)};$f(new Pd(cS,e,"PUBLIC").setMultipleInstances(!0)),AA(q3,K3,t),AA(q3,K3,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(t=A_(),e=IE){const n=R2(pa(t),cS).getImmediate({identifier:e}),a=x6("functions");return a&&lpe(n,...a),n}function lpe(t,e,r){Jme(pa(t),e,r)}function r0(t,e,r){return Yme(pa(t),e)}ope();const W3=Nt(Gr,"usuarios");async function vM(){try{console.log("🔍 [DEBUG] Obteniendo usuarios de Firestore..."),console.log("🔍 [DEBUG] Collection ref:",W3);const t=await ps(W3);if(console.log(`📊 [DEBUG] Encontrados ${t.docs.length} documentos en la colección usuarios`),t.empty)return console.log("⚠️  [DEBUG] La colección usuarios está vacía"),[];const e=t.docs.map(r=>{const n=r.data();return console.log("👤 [DEBUG] Usuario encontrado:",{id:r.id,...n}),{id:r.id,...n}});return console.log("✅ [DEBUG] Usuarios procesados correctamente:",e.length),console.log("✅ [DEBUG] Lista completa de usuarios:",e),e}catch(t){throw console.error("❌ [DEBUG] Error al obtener usuarios:",t),console.error("❌ [DEBUG] Error details:",{code:t.code,message:t.message,stack:t.stack}),t}}const $3=Object.values(Pt),$b=t=>t?t.trim().toLowerCase().replace(/°/g,"º").replace(/\s+(medio|básico|basico)/g,"").replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º").replace(/^(\d)(?![º])/,"$1º").replace(/\s+/g,"").toUpperCase():"",cpe=()=>{const[t,e]=ne.useState([]),[r,n]=ne.useState(!1),[a,s]=ne.useState("Usuarios"),[i,o]=ne.useState({nombreCompleto:"",email:"",rut:"",profile:Pt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[c,u]=ne.useState(null),[f,m]=ne.useState(""),[p,g]=ne.useState(""),[b,y]=ne.useState(""),[T,k]=ne.useState(null),[D,L]=ne.useState(null),[j,H]=ne.useState(null),U=ne.useCallback(async()=>{n(!0);try{const q=await vM();e(q)}catch(q){console.error("Error al cargar usuarios",q),k("No se pudieron cargar los usuarios.")}finally{n(!1)}},[]);ne.useEffect(()=>{U()},[U]);const E=ne.useCallback(q=>{const{name:J,value:W}=q.target;o(de=>({...de,[J]:W,curso:J==="profile"&&W!==Pt.ESTUDIANTE?"":de.curso,cursos:J==="profile"&&W!==Pt.PROFESORADO?[]:de.cursos,asignaturas:J==="profile"&&W!==Pt.PROFESORADO?[]:de.asignaturas}))},[]),_=ne.useCallback((q,J)=>{o(W=>{const de=W[q]||[],P=de.includes(J)?de.filter(K=>K!==J):[...de,J];return{...W,[q]:P}})},[]),B=ne.useCallback(()=>{o({nombreCompleto:"",email:"",rut:"",profile:Pt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),u(null),k(null)},[]),Q=ne.useCallback(async q=>{q.preventDefault(),k(null);const{nombreCompleto:J,email:W,profile:de,curso:P,password:K}=i;if(!J.trim()||!W.trim()){k("Nombre Completo y Email son obligatorios.");return}if(de===Pt.ESTUDIANTE&&!P){k('El campo "Curso" es obligatorio para Estudiantes.');return}if(!c&&!(K!=null&&K.trim())){k("La contraseña es obligatoria al crear un nuevo usuario.");return}const Y=Ap();try{if(c){const ee=r0(Y,"updateUser"),Ae={...i,password:(K==null?void 0:K.trim())||void 0,curso:de===Pt.ESTUDIANTE?$b(P||""):void 0};await ee(Ae)}else{const ee=r0(Y,"createUser"),Ae={...i,curso:de===Pt.ESTUDIANTE?$b(P||""):void 0};await ee(Ae)}await U(),B()}catch(ee){console.error("Error al guardar usuario:",ee),k(ee.message||"Error al guardar el usuario.")}},[i,c,U,B]),R=ne.useCallback(q=>{u(q.email),o({nombreCompleto:q.nombreCompleto,email:q.email,rut:q.rut||"",profile:q.profile,password:"",curso:q.curso||"",cursos:q.cursos||[],asignaturas:q.asignaturas||[]}),setTimeout(()=>{const J=document.querySelector("form");J&&J.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[]),F=ne.useCallback(async q=>{if(window.confirm(`¿Está seguro de que desea eliminar al usuario ${q}? Esta acción es irreversible.`))try{const J=Ap();await r0(J,"deleteUser")({email:q}),await U()}catch(J){console.error("Error al eliminar usuario:",J),k(J.message||"No se pudo borrar el usuario.")}},[U]),V=async q=>{var K;const J=(K=q.target.files)==null?void 0:K[0];if(!J)return;L({message:"Procesando archivo...",isError:!1});const W=Ap(),de=r0(W,"createUser"),P=new FileReader;P.onload=async Y=>{var ee;try{const Ae=new Uint8Array((ee=Y.target)==null?void 0:ee.result),Se=kg(Ae,{type:"array"}),ge=Se.Sheets[Se.SheetNames[0]],pe=Dl.sheet_to_json(ge);if(pe.length===0){L({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const ye=pe.map(De=>{const Ee=De.Nombre||De.nombre,Le=De.Correo||De.correo||De.Email||De.email,it=De.Curso||De.curso,et=De.RUT||De.rut;return!Ee||!Le||!it?Promise.resolve({email:Le||"Sin email",error:"Datos incompletos"}):de({nombreCompleto:String(Ee).trim(),email:String(Le).trim(),profile:Pt.ESTUDIANTE,curso:$b(String(it).trim()),rut:et?String(et).trim():"",password:"recoleta"}).catch(ht=>({email:Le,error:ht.message}))}),ue=await Promise.all(ye),se=ue.filter(De=>!De.error).length,Pe=ue.filter(De=>De.error);let at=`Carga completada. ${se} estudiantes agregados.`;Pe.length>0&&(at+=` ${Pe.length} fallaron.`,console.error("Errores en carga masiva:",Pe)),L({message:at,isError:Pe.length>0}),await U()}catch(Ae){L({message:`Error: ${Ae.message}`,isError:!0})}},P.readAsArrayBuffer(J),q.target.value=""},X=async q=>{var K;const J=(K=q.target.files)==null?void 0:K[0];if(!J)return;H({message:"Procesando archivo...",isError:!1});const W=Ap(),de=r0(W,"createUser"),P=new FileReader;P.onload=async Y=>{var ee;try{const Ae=new Uint8Array((ee=Y.target)==null?void 0:ee.result),Se=kg(Ae,{type:"array"}),ge=Se.Sheets[Se.SheetNames[0]],pe=Dl.sheet_to_json(ge);if(pe.length===0){H({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const ye=pe.map(De=>{const Ee=De.Nombre||De.nombre,Le=De.Correo||De.correo||De.Email||De.email,it=De.Perfil||De.perfil||De.Profile||De.profile,et=De.RUT||De.rut;return!Ee||!Le||!it?Promise.resolve({email:Le||"Sin email",error:"Datos incompletos"}):de({nombreCompleto:String(Ee).trim(),email:String(Le).trim(),profile:it,rut:et?String(et).trim():"",password:"recoleta"}).catch(ht=>({email:Le,error:ht.message}))}),ue=await Promise.all(ye),se=ue.filter(De=>!De.error).length,Pe=ue.filter(De=>De.error);let at=`Carga completada. ${se} usuarios agregados.`;Pe.length>0&&(at+=` ${Pe.length} fallaron.`,console.error("Errores en carga masiva:",Pe)),H({message:at,isError:Pe.length>0}),await U()}catch(Ae){H({message:`Error: ${Ae.message}`,isError:!0})}},P.readAsArrayBuffer(J),q.target.value=""},oe="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",te=ne.useMemo(()=>Array.from(new Set(t.filter(q=>q.profile===Pt.ESTUDIANTE&&q.curso).map(q=>q.curso))).sort(),[t]),ae=ne.useMemo(()=>t.filter(q=>(f===""||q.nombreCompleto.toLowerCase().includes(f.toLowerCase())||q.email.toLowerCase().includes(f.toLowerCase()))&&(p===""||q.profile===p)&&(b===""||q.curso===b)),[t,f,p,b]);return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administración"}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>s("Usuarios"),className:`${a==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestión de Usuarios"}),l.jsx("button",{onClick:()=>s("Monitor de Uso"),className:`${a==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),a==="Usuarios"&&l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Estudiantes (Excel)"}),l.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:V,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Curso"}),D&&l.jsx("p",{className:`text-sm mt-2 ${D.isError?"text-red-600":"text-green-600"}`,children:D.message})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Personal (Excel)"}),l.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:X,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Perfil"}),j&&l.jsx("p",{className:`text-sm mt-2 ${j.isError?"text-red-600":"text-green-600"}`,children:j.message})]})]})]}),l.jsxs("div",{id:"formulario-usuario",className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:c?"Editando usuario":"Agregar nuevo usuario"}),l.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),l.jsx("input",{type:"text",name:"nombreCompleto",value:i.nombreCompleto,onChange:E,className:oe,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),l.jsx("input",{type:"email",name:"email",value:i.email,onChange:E,className:oe,required:!0,readOnly:!!c})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contraseña"}),l.jsx("input",{type:"password",name:"password",value:i.password||"",onChange:E,placeholder:c?"Dejar en blanco para no cambiar":"Contraseña temporal",className:oe})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),l.jsx("input",{type:"text",name:"rut",value:i.rut||"",onChange:E,placeholder:"12.345.678-9",className:oe})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),l.jsx("select",{name:"profile",value:i.profile,onChange:E,className:oe,required:!0,children:$3.map(q=>l.jsx("option",{value:q,children:q},q))})]}),i.profile===Pt.ESTUDIANTE&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),l.jsxs("select",{name:"curso",value:i.curso,onChange:E,className:oe,required:!0,children:[l.jsx("option",{value:"",children:"Seleccione un curso"}),Za.map(q=>l.jsx("option",{value:q,children:q},q))]})]})]}),i.profile===Pt.PROFESORADO&&l.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-l-4 border-blue-400",children:[l.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[l.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📚"}),"Asignación de Cursos"]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:Za.map(q=>{var J;return l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-blue-50 dark:hover:bg-blue-800/20",children:[l.jsx("input",{type:"checkbox",checked:((J=i.cursos)==null?void 0:J.includes(q))||!1,onChange:()=>_("cursos",q),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),l.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:q})]},q)})})]}),i.profile===Pt.PROFESORADO&&l.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border-l-4 border-green-400",children:[l.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[l.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📖"}),"Asignación de Asignaturas"]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:Xo.map(q=>{var J;return l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-green-50 dark:hover:bg-green-800/20",children:[l.jsx("input",{type:"checkbox",checked:((J=i.asignaturas)==null?void 0:J.includes(q))||!1,onChange:()=>_("asignaturas",q),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),l.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:q})]},q)})})]}),T&&l.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:T}),l.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4 flex-wrap",children:[c&&l.jsx("button",{type:"button",onClick:B,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),l.jsx("button",{type:"button",onClick:async()=>{try{console.log("🔧 Agregando custom claim...");const q=Ap(),W=await r0(q,"addCustomClaim")({email:"fernando.sagredo@industrialderecoleta.cl",profile:"SUBDIRECCION"});console.log("✅ Custom claim agregado:",W),k("✅ Custom claim agregado exitosamente")}catch(q){console.error("❌ Error al agregar custom claim:",q),k(`Error: ${q.message}`)}},className:"bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 text-sm",children:"🔧 Claim"}),l.jsx("button",{type:"button",onClick:async()=>{var q,J,W,de,P;try{const{auth:K}=await Zv(async()=>{const{auth:Ae}=await Promise.resolve().then(()=>wz);return{auth:Ae}},void 0);console.log("🔍 Usuario actual:",(q=K.currentUser)==null?void 0:q.email);const Y=await((J=K.currentUser)==null?void 0:J.getIdToken(!0));console.log("🔑 Token refreshed:",!!Y);const ee=await((W=K.currentUser)==null?void 0:W.getIdTokenResult());console.log("📋 Claims completos:",ee==null?void 0:ee.claims),console.log("👤 Profile claim:",(de=ee==null?void 0:ee.claims)==null?void 0:de.profile),((P=ee==null?void 0:ee.claims)==null?void 0:P.profile)==="SUBDIRECCION"?k("✅ Custom claim FUNCIONANDO - Ya puedes crear/editar usuarios"):k(`❌ Custom claim faltante. Claims: ${JSON.stringify(ee==null?void 0:ee.claims)}`)}catch(K){console.error("❌ Error verificando token:",K),k(`Error verificando token: ${K.message}`)}},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 text-sm",children:"🔍 Token"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:c?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[l.jsx("div",{children:l.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:f,onChange:q=>m(q.target.value),className:oe})}),l.jsx("div",{children:l.jsxs("select",{value:p,onChange:q=>g(q.target.value),className:oe,children:[l.jsx("option",{value:"",children:"Todos los perfiles"}),$3.map(q=>l.jsx("option",{value:q,children:q},q))]})}),l.jsx("div",{children:l.jsxs("select",{value:b,onChange:q=>y(q.target.value),className:oe,children:[l.jsx("option",{value:"",children:"Todos los cursos"}),te.map(q=>l.jsx("option",{value:q,children:q},q))]})})]}),r?l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-slate-500",children:"Cargando usuarios..."})}):l.jsxs("div",{className:"overflow-x-auto",children:[l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Nombre"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Email"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Perfil"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Curso/Asignaciones"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:ae.map(q=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:q.nombreCompleto}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:q.email}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:l.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${q.profile===Pt.ESTUDIANTE?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":q.profile===Pt.PROFESORADO?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:q.profile})}),l.jsxs("td",{className:"px-4 py-4 text-sm text-slate-500 dark:text-slate-300",children:[q.profile===Pt.ESTUDIANTE&&l.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-700 rounded dark:bg-slate-600 dark:text-slate-300",children:q.curso||"Sin curso"}),q.profile===Pt.PROFESORADO&&l.jsxs("div",{className:"space-y-1",children:[q.cursos&&q.cursos.length>0&&l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Cursos:"}),l.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[q.cursos.slice(0,3).map(J=>l.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded dark:bg-blue-900 dark:text-blue-300",children:J},J)),q.cursos.length>3&&l.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",q.cursos.length-3]})]})]}),q.asignaturas&&q.asignaturas.length>0&&l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Asignaturas:"}),l.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[q.asignaturas.slice(0,2).map(J=>l.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-green-100 text-green-700 rounded dark:bg-green-900 dark:text-green-300",children:J},J)),q.asignaturas.length>2&&l.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",q.asignaturas.length-2]})]})]}),(!q.cursos||q.cursos.length===0)&&(!q.asignaturas||q.asignaturas.length===0)&&l.jsx("span",{className:"text-xs text-slate-400 italic",children:"Sin asignaciones"})]}),q.profile!==Pt.ESTUDIANTE&&q.profile!==Pt.PROFESORADO&&l.jsx("span",{className:"text-xs text-slate-400",children:"-"})]}),l.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[l.jsx("button",{onClick:()=>R(q),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),l.jsx("button",{onClick:()=>F(q.email),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},q.email))})]}),ae.length===0&&l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:t.length===0?"No hay usuarios registrados.":"No se encontraron usuarios con los filtros aplicados."})})]})]})]}),a==="Monitor de Uso"&&l.jsx(Hme,{})]})},em="seguimiento_dual_records",Ape=t=>{const e=t.data(),r=n=>n&&typeof n.toDate=="function"?n.toDate().toISOString().split("T")[0]:n;return{id:t.id,...e,fechaDesvinculacion:r(e.fechaDesvinculacion),fecha1raSupervision1erSemestre:r(e.fecha1raSupervision1erSemestre),fecha2daSupervision1erSemestre:r(e.fecha2daSupervision1erSemestre),fecha1raSupervision2doSemestre:r(e.fecha1raSupervision2doSemestre),fecha2daSupervision2doSemestre:r(e.fecha2daSupervision2doSemestre),fechaSupervisionExcepcional:r(e.fechaSupervisionExcepcional)}},upe=t=>{const e=er(Nt(Tt,em),fn("nombreEstudiante","asc"));return br(e,n=>{const a=n.docs.map(s=>Ape(s));t(a)},n=>{console.error("Error al suscribirse a los registros de seguimiento:",n),t([])})},v2=t=>{const e={...t};return["fechaDesvinculacion","fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaSupervisionExcepcional"].forEach(n=>{e[n]&&typeof e[n]=="string"&&(e[n]=Ar.fromDate(new Date(e[n]+"T00:00:00")))}),e},dpe=async t=>{try{const e=v2(t);return(await Sa(Nt(Tt,em),e)).id}catch(e){throw console.error("Error al crear el registro:",e),new Error("No se pudo crear el registro de seguimiento.")}},J3=async(t,e)=>{try{const r=_r(Tt,em,t),n=v2(e);await Zi(r,n,{merge:!0})}catch(r){throw console.error("Error al actualizar el registro:",r),new Error("No se pudo actualizar el registro.")}},fpe=async t=>{try{const e=_r(Tt,em,t);await Oi(e)}catch(e){throw console.error("Error al eliminar el registro:",e),new Error("No se pudo eliminar el registro.")}},hpe=async t=>{const e=a5(Tt),r=Nt(Tt,em);let n=0,a=0;for(const s of t){const i=er(r,Tn("rutEstudiante","==",s.rutEstudiante)),o=await ps(i);if(o.empty){const c=_r(r);e.set(c,v2(s)),a++}else{const c=o.docs[0].id,u=_r(Tt,em,c);e.set(u,v2(s),{merge:!0}),n++}}return await e.commit(),{updated:n,created:a}},mpe={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},ppe=t=>{if(!t||t===""||t==="N/A"||t==="Pendiente")return null;try{if(typeof t=="number"){const e=new Date(1900,0,1),r=new Date(e.getTime()+(t-2)*24*60*60*1e3);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}if(t instanceof Date)return isNaN(t.getTime())?null:t.toISOString().split("T")[0];if(typeof t=="string"){const e=t.trim();if(e==="")return null;const r=new Date(e);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}return null}catch(e){return console.warn("Error parsing date:",t,e),null}},gpe=t=>{if(typeof t=="boolean")return t;if(typeof t=="string"){const e=t.toLowerCase().trim();return["true","verdadero","sí","si","yes","1","x"].includes(e)}return typeof t=="number"?t===1:!1},xpe=({record:t,onSave:e,onClose:r})=>{const[n,a]=ne.useState(t),s="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",i=c=>{const{name:u,value:f,type:m,checked:p}=c.target;a(g=>({...g,[u]:m==="checkbox"?p:f}))},o=()=>{e(n)};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:r,children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo LIR",className:"w-12 h-12 object-contain"}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisión"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:t.nombreEstudiante})]})]}),l.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[l.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[l.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`f1s1-${t.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),l.jsx("input",{id:`f1s1-${t.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:n.fecha1raSupervision1erSemestre||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!n.realizada1raSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`f2s1-${t.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),l.jsx("input",{id:`f2s1-${t.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:n.fecha2daSupervision1erSemestre||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!n.realizada2daSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]})]})]}),l.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[l.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`f1s2-${t.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),l.jsx("input",{id:`f1s2-${t.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:n.fecha1raSupervision2doSemestre||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!n.realizada1raSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`f2s2-${t.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),l.jsx("input",{id:`f2s2-${t.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:n.fecha2daSupervision2doSemestre||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!n.realizada2daSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]})]})]}),l.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[l.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisión Excepcional"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`fex-${t.id}`,className:"text-sm font-medium",children:"Fecha Supervisión"}),l.jsx("input",{id:`fex-${t.id}`,type:"date",name:"fechaSupervisionExcepcional",value:n.fechaSupervisionExcepcional||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!n.realizadaSupervisionExcepcional,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]})]})]}),l.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[l.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Guía (Empresa)"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:`mg-nombre-${t.id}`,className:"text-sm font-medium",children:"Nombre Maestro Guía"}),l.jsx("input",{id:`mg-nombre-${t.id}`,type:"text",name:"nombreMaestroGuia",value:n.nombreMaestroGuia||"",onChange:i,className:s+" mt-1"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:`mg-contacto-${t.id}`,className:"text-sm font-medium",children:"Contacto (Email/Teléfono)"}),l.jsx("input",{id:`mg-contacto-${t.id}`,type:"text",name:"contactoMaestroGuia",value:n.contactoMaestroGuia||"",onChange:i,className:s+" mt-1"})]})]})]})]})]}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:r,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),l.jsx("button",{type:"button",onClick:o,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},vpe=()=>{const[t,e]=ne.useState([]),[r,n]=ne.useState(!0),a=ne.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:Qf[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:xb[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[s,i]=ne.useState(a),[o,c]=ne.useState(null),[u,f]=ne.useState(""),[m,p]=ne.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[g,b]=ne.useState(null),[y,T]=ne.useState(null),[k,D]=ne.useState(!1),[L,j]=ne.useState(null);ne.useEffect(()=>{n(!0);const q=upe(J=>{e(J),n(!1)});return()=>q()},[]);const H=ne.useCallback(q=>{const{name:J,value:W}=q.target;i(de=>({...de,[J]:W}))},[]),U=ne.useCallback(q=>{const{name:J,value:W}=q.target;p(de=>({...de,[J]:W}))},[]),E=ne.useCallback(()=>{i(a),c(null),b(null)},[a]),_=async q=>{q.preventDefault(),b(null);const W=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(de=>{var P;return!((P=s[de])!=null&&P.trim())});if(W){b(`El campo '${W}' es obligatorio.`);return}try{o?await J3(o,s):await dpe(s),E()}catch(de){console.error(de),b("No se pudo guardar el registro.")}},B=ne.useCallback(q=>{window.scrollTo({top:0,behavior:"smooth"}),c(q.id),i(q)},[]),Q=async q=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await fpe(q)}catch(J){console.error(J),b("No se pudo eliminar el registro.")}},R=q=>{j(q),D(!0)},F=()=>{j(null),D(!1)},V=async q=>{try{await J3(q.id,q),F()}catch(J){console.error(J),alert("No se pudieron guardar los cambios de supervisión.")}},X=()=>{const q=["Nombre","RUT","Curso 2025","Profesor Tutor","1° Visita 1° Semestre","Realizada 1° Visita S1","2° Visita 1° Semestre","Realizada 2° Visita S1","Visita Emergencia 1° Semestre","3° Visita","Realizada 3° Visita S2","4° Visita","Realizada 4° Visita S2","Empresa","RUT-Empresa","Dirección","Comuna","Estado","Fecha de Desvinculación","Motivo Desvinculación","Maestro Guía","Correo maestro guía"],J=Dl.aoa_to_sheet([q]),W=Dl.book_new();Dl.book_append_sheet(W,J,"Plantilla"),sS(W,"Plantilla_Seguimiento_Dual.xlsx")},oe=q=>{var de;const J=(de=q.target.files)==null?void 0:de[0];if(!J)return;T({message:"Procesando archivo...",isError:!1});const W=new FileReader;W.onload=async P=>{var K;try{const Y=new Uint8Array((K=P.target)==null?void 0:K.result),ee=kg(Y,{type:"array",cellDates:!0,dateNF:"yyyy-mm-dd"}),Ae=ee.SheetNames[0],Se=ee.Sheets[Ae],ge=Dl.sheet_to_json(Se,{raw:!1,dateNF:"yyyy-mm-dd"});if(ge.length===0)throw new Error("El archivo está vacío.");const pe={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1° visita 1° semestre":"fecha1raSupervision1erSemestre","realizada 1° visita s1":"realizada1raSupervision1erSemestre","2° visita 1° semestre":"fecha2daSupervision1erSemestre","realizada 2° visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1° semestre":"fechaSupervisionExcepcional","3° visita":"fecha1raSupervision2doSemestre","realizada 3° visita s2":"realizada1raSupervision2doSemestre","4° visita":"fecha2daSupervision2doSemestre","realizada 4° visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",dirección:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculación":"fechaDesvinculacion","motivo desvinculación":"motivoDesvinculacion","maestro guía":"nombreMaestroGuia","correo maestro guía":"contactoMaestroGuia"},ye=Object.keys(ge[0]).map(at=>at.trim().toLowerCase()),se=["nombre","rut","curso 2025","empresa","estado"].find(at=>!ye.includes(at));if(se)throw new Error(`Falta la columna requerida: '${se}'`);const Pe=ge.map((at,De)=>{try{const Ee={};for(const Le in at){const it=pe[Le.trim().toLowerCase()];if(it){let et=at[Le];["fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fechaSupervisionExcepcional","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaDesvinculacion"].includes(it)?(et=ppe(et),et&&(Ee[it]=et)):it.includes("realizada")?Ee[it]=gpe(et):et!=null&&et!==""&&(Ee[it]=String(et).trim())}}return!Ee.nombreEstudiante||!Ee.rutEstudiante?(console.warn(`Fila ${De+2}: Faltan campos requeridos`),null):Ee}catch(Ee){return console.error(`Error procesando fila ${De+2}:`,Ee),null}}).filter(at=>at!==null);if(console.log("Registros procesados:",Pe),Pe.length>0){const{updated:at,created:De}=await hpe(Pe);T({message:`Carga exitosa. ${De} registros creados, ${at} actualizados.`,isError:!1})}else T({message:"No se encontraron registros válidos para procesar. Verifique el formato del archivo.",isError:!0})}catch(Y){console.error("Error completo:",Y),T({message:`Error al procesar el archivo: ${Y.message}. Verifique que las fechas estén en formato correcto.`,isError:!0})}},W.readAsArrayBuffer(J)},te="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",ae=ne.useMemo(()=>t.filter(q=>(u===""||q.nombreEstudiante.toLowerCase().includes(u.toLowerCase())||q.nombreEmpresa.toLowerCase().includes(u.toLowerCase())||q.rutEstudiante.includes(u))&&(m.curso===""||q.curso===m.curso)&&(m.empresa===""||q.nombreEmpresa===m.empresa)&&(m.estado===""||q.estado===m.estado)&&(m.comuna===""||q.comuna===m.comuna)&&(m.profesor===""||q.profesorTutorEmpresa===m.profesor)).sort((q,J)=>q.nombreEstudiante.localeCompare(J.nombreEstudiante)),[t,u,m]);return ne.useMemo(()=>{const q=new Set,J=new Set;return t.forEach(W=>{W.nombreEmpresa&&q.add(W.nombreEmpresa),W.comuna&&J.add(W.comuna)}),{empresas:Array.from(q).sort(),comunas:Array.from(J).sort()}},[t]),r?l.jsx("div",{className:"text-center py-10",children:"Cargando registros..."}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo Gestión Pedagógica LIR",className:"w-12 h-12 object-contain"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Práctica Dual"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:o?"Editando registro existente.":"Registre un nuevo estudiante en práctica."})]})]}),l.jsxs("form",{onSubmit:_,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),l.jsx("input",{type:"text",name:"nombreEstudiante",value:s.nombreEstudiante,onChange:H,className:te,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),l.jsx("input",{type:"text",name:"rutEstudiante",value:s.rutEstudiante,onChange:H,className:te,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),l.jsx("select",{name:"curso",value:s.curso,onChange:H,className:te,required:!0,children:Qf.map(q=>l.jsx("option",{value:q,children:q},q))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),l.jsxs("select",{name:"profesorTutorEmpresa",value:s.profesorTutorEmpresa,onChange:H,className:te,children:[l.jsx("option",{value:"",children:"Seleccione un profesor"}),qC.map(q=>l.jsx("option",{value:q,children:q},q))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),l.jsx("input",{type:"text",name:"nombreEmpresa",value:s.nombreEmpresa,onChange:H,className:te,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),l.jsx("input",{type:"text",name:"rutEmpresa",value:s.rutEmpresa,onChange:H,className:te})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Dirección Empresa"}),l.jsx("input",{type:"text",name:"direccionEmpresa",value:s.direccionEmpresa,onChange:H,className:te})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),l.jsx("input",{type:"text",name:"comuna",value:s.comuna,onChange:H,className:te})]}),l.jsxs("div",{className:"lg:col-span-4",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),l.jsx("select",{name:"estado",value:s.estado,onChange:H,className:te,children:xb.map(q=>l.jsx("option",{value:q,children:q},q))})]})]}),s.estado==="Desvinculado"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculación"}),l.jsx("input",{type:"date",name:"fechaDesvinculacion",value:s.fechaDesvinculacion||"",onChange:H,className:`${te} border-red-300`})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculación"}),l.jsx("input",{type:"text",name:"motivoDesvinculacion",value:s.motivoDesvinculacion||"",onChange:H,className:`${te} border-red-300`})]})]}),g&&l.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:g}),l.jsxs("div",{className:"flex justify-end items-center gap-4",children:[o&&l.jsx("button",{type:"button",onClick:E,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:o?"Actualizar":"Agregar"})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Carga Masiva"})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[l.jsx("button",{onClick:X,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),l.jsx("input",{type:"file",onChange:oe,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),y&&l.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${y.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:y.message})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Estudiantes"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[l.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:u,onChange:q=>f(q.target.value),className:`${te} md:col-span-2 lg:col-span-1`}),l.jsxs("select",{name:"curso",value:m.curso,onChange:U,className:te,children:[l.jsx("option",{value:"",children:"Todos los Cursos"}),Qf.map(q=>l.jsx("option",{children:q},q))]}),l.jsxs("select",{name:"estado",value:m.estado,onChange:U,className:te,children:[l.jsx("option",{value:"",children:"Todos los Estados"}),xb.map(q=>l.jsx("option",{children:q},q))]}),l.jsxs("select",{name:"profesor",value:m.profesor,onChange:U,className:te,children:[l.jsx("option",{value:"",children:"Todos los Profesores"}),qC.map(q=>l.jsx("option",{children:q},q))]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:ae.map(q=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[l.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[l.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:q.nombreEstudiante}),l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:q.curso})]}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:q.nombreEmpresa}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:q.profesorTutorEmpresa}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${mpe[q.estado]}`,children:q.estado})}),l.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[l.jsx("button",{onClick:()=>R(q),className:"text-blue-600 hover:underline",children:"Supervisión"}),l.jsx("button",{onClick:()=>B(q),className:"text-yellow-600 hover:underline",children:"Editar"}),l.jsx("button",{onClick:()=>Q(q.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},q.id))})]})})]}),k&&L&&l.jsx(xpe,{record:L,onClose:F,onSave:V})]})},wM="actividades_remotas",wpe="respuestas_actividades",ype="usuarios",AS=t=>{var r,n,a,s,i,o;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion,plazoEntrega:((s=(a=e.plazoEntrega)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||e.plazoEntrega,fechaCompletado:((o=(i=e.fechaCompletado)==null?void 0:i.toDate)==null?void 0:o.call(i).toISOString())||e.fechaCompletado}},bpe=t=>{const e=er(Nt(Tt,wM),fn("fechaCreacion","desc"));return br(e,n=>{const a=n.docs.map(s=>AS(s));t(a)},n=>{console.error("Error al suscribirse a las actividades:",n),t([])})},Cpe=async t=>{try{const e={...t,fechaCreacion:Ar.fromDate(new Date),plazoEntrega:Ar.fromDate(new Date(t.plazoEntrega+"T00:00:00"))};return(await Sa(Nt(Tt,wM),e)).id}catch(e){throw console.error("Error al crear la actividad:",e),new Error("No se pudo crear la actividad.")}},Epe=t=>{const e=er(Nt(Tt,wpe));return br(e,n=>{const a=n.docs.map(s=>AS(s));t(a)},n=>{console.error("Error al suscribirse a las respuestas:",n),t([])})},_pe=t=>{const e=er(Nt(Tt,ype));return br(e,n=>{const a=n.docs.map(s=>AS(s));t(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),t([])})},Jb={Quiz:[5,10,15],"Términos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de Lectura":[1,2,3]},Spe=t=>new Promise((e,r)=>{const n=new FileReader;n.readAsDataURL(t),n.onload=()=>e(n.result),n.onerror=a=>r(a)}),Tpe=()=>{const[t,e]=ne.useState([]),[r,n]=ne.useState([]),[a,s]=ne.useState([]),[i,o]=ne.useState(null),[c,u]=ne.useState(!1),[f,m]=ne.useState(!1),[p,g]=ne.useState(!0),[b,y]=ne.useState(null),[T,k]=ne.useState(""),[D,L]=ne.useState(null),[j,H]=ne.useState([]),U={asignatura:Xo[0],nivel:Wv[0],contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},[E,_]=ne.useState(U);ne.useEffect(()=>{g(!0);const ge=bpe(e),pe=Epe(n),ye=_pe(ue=>{s(ue),g(!1)});return()=>{ge(),pe(),ye()}},[]);const B=ge=>{_(pe=>({...pe,[ge.target.name]:ge.target.value}))},Q=ge=>{_(pe=>({...pe,recursos:{...pe.recursos,[ge.target.name]:ge.target.value}}))},R=ge=>{ge.target.files&&H(Array.from(ge.target.files))},F=ge=>{_(pe=>{const ye=pe.tipos.includes(ge)?pe.tipos.filter(se=>se!==ge):[...pe.tipos,ge],ue={...pe.cantidadPreguntas};return ye.includes(ge)?ue[ge]||(ue[ge]=Jb[ge][0]):delete ue[ge],{...pe,tipos:ye,cantidadPreguntas:ue}})},V=(ge,pe)=>{_(ye=>({...ye,cantidadPreguntas:{...ye.cantidadPreguntas,[ge]:pe}}))},X=ge=>{_(pe=>{var ue;const ye=(ue=pe.cursosDestino)!=null&&ue.includes(ge)?pe.cursosDestino.filter(se=>se!==ge):[...pe.cursosDestino||[],ge];return{...pe,cursosDestino:ye}})},oe=ge=>{_(pe=>{var ue;const ye=(ue=pe.estudiantesDestino)!=null&&ue.includes(ge)?pe.estudiantesDestino.filter(se=>se!==ge):[...pe.estudiantesDestino||[],ge];return{...pe,estudiantesDestino:ye}})},te=()=>{const{tipos:ge,contenido:pe,asignatura:ye,nivel:ue,cantidadPreguntas:se}=E;let Pe=`Eres un experto diseñador de actividades pedagógicas. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${pe}"
Asignatura: ${ye}
Nivel: ${ue}

Genera los siguientes elementos:
- **introduccion**: Una breve introducción motivadora para el estudiante sobre el tema: "${pe}".
- **actividades**: Un objeto que contiene las actividades. Cada actividad es una propiedad con su nombre como clave:
`;return ge.forEach(at=>{const De=se[at]||Jb[at][0];switch(at){case"Quiz":Pe+=`- **Quiz**: Un array de ${De} objetos. Cada objeto debe tener: "pregunta" (string), "opciones" (array de 4 strings) y "respuestaCorrecta" (string).
`;break;case"Comprensión de Lectura":Pe+=`- **Comprensión de Lectura**: Un array de ${De} objetos. Cada objeto debe tener "texto" (string de 150-200 palabras) y "preguntas" (un array de 4 objetos, cada uno con "pregunta", "opciones" y "respuestaCorrecta").
`;break;case"Términos Pareados":Pe+=`- **Términos Pareados**: Un array de ${De} objetos. Cada objeto debe tener "concepto" (string) y "definicion" (string).
`;break;case"Desarrollo":Pe+=`- **Desarrollo**: Un array de ${De} objetos. Cada objeto debe tener una clave "pregunta" (string con la pregunta) y una clave "rubrica" (string con la rúbrica de evaluación).
`;break}}),Pe};function ae(ge,pe){if(ge==="Desarrollo"){if(Array.isArray(pe))return pe.map(ye=>{if(typeof ye=="string"){const ue=ye.match(/^(.*?)(?:R[úu]brica:|RUBRICA:|Rubrica:)(.*)$/is);return ue?{pregunta:ue[1].trim(),rubrica:ue[2].trim()}:{pregunta:ye.trim(),rubrica:""}}return ye&&typeof ye=="object"?{pregunta:ye.pregunta||ye.Pregunta||ye.texto||"",rubrica:ye.rubrica||ye.Rubrica||ye.rúbrica||ye.Rúbrica||""}:{pregunta:String(ye),rubrica:""}});if(typeof pe=="string")return pe.split(/\n\n|\n- |\d+\. /).map(ye=>{const ue=ye.match(/^(.*?)(?:R[úu]brica:|RUBRICA:|Rubrica:)(.*)$/is);return ue?{pregunta:ue[1].trim(),rubrica:ue[2].trim()}:{pregunta:ye.trim(),rubrica:""}}).filter(ye=>ye.pregunta)}if(ge==="Términos Pareados"){if(Array.isArray(pe))return pe.map((ye,ue)=>{if(typeof ye=="string"){const se=ye.match(/^(.+?)[\s:-–]+(.+)$/);return se?{id:ue,concepto:se[1].trim(),definicion:se[2].trim()}:{id:ue,concepto:ye.trim(),definicion:""}}return ye&&typeof ye=="object"?{id:ue,concepto:ye.concepto||ye.termino||"",definicion:ye.definicion||ye.significado||""}:{id:ue,concepto:String(ye),definicion:""}});if(typeof pe=="object"&&pe!==null)return Object.entries(pe).map(([ye,ue],se)=>({id:se,concepto:ye,definicion:ue}));if(typeof pe=="string")return pe.split(/\n|;/).map((ye,ue)=>{const se=ye.match(/^(.+?)[\s:-–]+(.+)$/);return se?{id:ue,concepto:se[1].trim(),definicion:se[2].trim()}:{id:ue,concepto:ye.trim(),definicion:""}}).filter(ye=>ye.concepto)}if(ge==="Comprensión de Lectura"){if(pe&&typeof pe=="object"&&Array.isArray(pe.preguntas))return{texto:pe.texto||"",preguntas:pe.preguntas.map(ye=>({pregunta:ye.pregunta||ye.Pregunta||"",opciones:ye.opciones||ye.Opciones||[],respuestaCorrecta:ye.respuestaCorrecta||ye.respuesta||""}))};if(Array.isArray(pe)){const ye=pe.find(ue=>ue&&typeof ue=="object"&&"texto"in ue&&"preguntas"in ue);return ye?{texto:ye.texto||"",preguntas:(ye.preguntas||[]).map(ue=>({pregunta:ue.pregunta||ue.Pregunta||"",opciones:ue.opciones||ue.Opciones||[],respuestaCorrecta:ue.respuestaCorrecta||ue.respuesta||""}))}:{texto:pe.map(ue=>typeof ue=="string"?ue:JSON.stringify(ue)).join(`
`),preguntas:[]}}if(typeof pe=="string"){const[ye,ue]=pe.split(/Preguntas:|\nPreguntas:/i);let se=[];return ue&&(se=ue.split(/\n- |\n\d+\. /).filter(Boolean).map(Pe=>{const at=Pe.split(/Opciones:|\nOpciones:/i),De=at[0].trim();let Ee=[],Le="";at[1]&&(Ee=at[1].split(/;|\n|,/).map(et=>et.trim()).filter(Boolean));const it=Pe.match(/Respuesta\s*correcta\s*:?\s*(.*)/i);return it&&(Le=it[1].trim()),{pregunta:De,opciones:Ee,respuestaCorrecta:Le}})),{texto:(ye==null?void 0:ye.trim())||pe,preguntas:se}}}return pe}const q=async ge=>{var pe;if(ge.preventDefault(),!E.contenido.trim()||E.tipos.length===0){y("Contenido y al menos un tipo de actividad son obligatorios.");return}m(!0),y(null);try{const ye=await Promise.all(j.map(async At=>({nombre:At.name,url:await Spe(At)}))),ue="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",Pe=new Xi(ue).getGenerativeModel({model:"gemini-1.5-flash-latest"}),at=te(),it=(await(await(await Pe.generateContent(at)).response).text()).replace(/^```json\s*|```\s*$/g,""),et=JSON.parse(it),ht={};for(const At of E.tipos)ht[At]=ae(At,(pe=et.actividades)==null?void 0:pe[At]);const Et={id:"",fechaCreacion:new Date().toISOString(),...E,recursos:{...E.recursos,archivos:ye},introduccion:et.introduccion,generatedContent:ht};L(Et)}catch(ye){console.error("Error al generar actividad con IA",ye),y("Error al generar la actividad. Por favor, revise el contenido e inténtelo de nuevo. Detalle: "+ye.message)}finally{m(!1)}},J=async()=>{if(D)try{await Cpe(D),_(U),H([]),u(!1),L(null)}catch(ge){console.error("Error al guardar la actividad:",ge),y("No se pudo guardar la actividad en la base de datos.")}},W=ne.useMemo(()=>{var ye,ue;if(!i||!a)return[];const ge=a.filter(se=>{var Pe;return se.profile===Pt.ESTUDIANTE&&((Pe=i.cursosDestino)==null?void 0:Pe.includes(se.curso||""))}).map(se=>se.nombreCompleto),pe=i.estudiantesDestino||[];if(!((ye=i.cursosDestino)!=null&&ye.length)&&!((ue=i.estudiantesDestino)!=null&&ue.length)){const se=i.nivel.charAt(0);return a.filter(Pe=>{var at;return Pe.profile===Pt.ESTUDIANTE&&((at=Pe.curso)==null?void 0:at.startsWith(se))}).map(Pe=>Pe.nombreCompleto).sort()}return Array.from(new Set([...ge,...pe])).sort()},[i,a]),de=ne.useMemo(()=>r.filter(ge=>ge.actividadId===(i==null?void 0:i.id)),[r,i]),P=ne.useMemo(()=>a.filter(ge=>ge.profile===Pt.ESTUDIANTE).sort((ge,pe)=>ge.nombreCompleto.localeCompare(pe.nombreCompleto)),[a]),K=ne.useMemo(()=>T.trim()?P.filter(ge=>ge.nombreCompleto.toLowerCase().includes(T.toLowerCase())):P,[P,T]),Y=()=>l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:[i==null?void 0:i.asignatura," - ",i==null?void 0:i.tipos.join(", ")]}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Nivel: ",i==null?void 0:i.nivel," | Plazo: ",i==null?void 0:i.plazoEntrega]})]}),l.jsx("button",{onClick:()=>o(null),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver al listado"})]}),l.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Resultados de Estudiantes"}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:W.map(ge=>{const pe=de.find(ye=>ye.estudianteId===ge);return l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:ge}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:pe?l.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):l.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:pe?`${pe.puntaje}/${pe.puntajeMaximo}`:"-"}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:pe?new Date(pe.fechaCompletado).toLocaleString("es-CL"):"-"})]},ge)})})]})})]})]}),ee=()=>{var ge,pe;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Actividad Remota"}),l.jsx("button",{onClick:()=>u(!1),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver al listado"})]}),l.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generará una actividad interactiva para sus estudiantes."}),l.jsxs("form",{onSubmit:q,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),l.jsx("select",{name:"asignatura",value:E.asignatura,onChange:B,className:"w-full border-slate-300 rounded-md shadow-sm",children:Xo.map(ye=>l.jsx("option",{value:ye,children:ye},ye))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Nivel"}),l.jsx("select",{name:"nivel",value:E.nivel,onChange:B,className:"w-full border-slate-300 rounded-md shadow-sm",children:Wv.map(ye=>l.jsx("option",{value:ye,children:ye},ye))})]}),l.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Recursos de Aprendizaje (Opcional)"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones de estudio"}),l.jsx("textarea",{name:"instrucciones",value:(ge=E.recursos)==null?void 0:ge.instrucciones,onChange:Q,placeholder:"Ej: Lee el siguiente texto y luego responde...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces (videos, documentos, etc.)"}),l.jsx("textarea",{name:"enlaces",value:(pe=E.recursos)==null?void 0:pe.enlaces,onChange:Q,placeholder:"Pega un enlace por línea...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos (PDF, imágenes, etc.)"}),l.jsx("input",{type:"file",multiple:!0,onChange:R,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),l.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Seleccione cursos o estudiantes. Si no selecciona ninguno, la actividad será visible para todo el nivel."}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Cursos"}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:Za.map(ye=>{var ue;return l.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:(ue=E.cursosDestino)==null?void 0:ue.includes(ye),onChange:()=>X(ye),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-sm font-medium text-slate-700",children:ye})]},ye)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Estudiantes"}),l.jsx("input",{type:"text",placeholder:"Buscar...",value:T,onChange:ye=>k(ye.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:K.map(ye=>{var ue;return l.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:(ue=E.estudiantesDestino)==null?void 0:ue.includes(ye.nombreCompleto),onChange:()=>oe(ye.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:ye.nombreCompleto,children:ye.nombreCompleto})]},ye.id)})})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),l.jsx("div",{className:"space-y-3",children:Vz.map(ye=>l.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:E.tipos.includes(ye),onChange:()=>F(ye),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:ye})]}),E.tipos.includes(ye)&&l.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[l.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),Jb[ye].map(ue=>l.jsx("button",{type:"button",onClick:()=>V(ye,ue),className:`px-3 py-1 rounded-full font-semibold text-xs ${E.cantidadPreguntas[ye]===ue?"bg-amber-500 text-white":"bg-slate-200"}`,children:ue},ue))]})]},ye))})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("textarea",{name:"contenido",value:E.contenido,onChange:B,required:!0,rows:4,placeholder:"Ingrese los temas, conceptos clave o el texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),l.jsx("input",{type:"date",name:"plazoEntrega",value:E.plazoEntrega,onChange:B,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]})]}),b&&l.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:b}),l.jsx("div",{className:"pt-4 text-right",children:l.jsx("button",{type:"submit",disabled:f,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:f?l.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Generar y Previsualizar"})})]})]})},Ae=()=>{var ge;return l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización de la Actividad"}),l.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo está correcto, confirma para asignar la actividad."}),l.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[l.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[l.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introducción para el Estudiante"}),l.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:D==null?void 0:D.introduccion})]}),(D==null?void 0:D.recursos)&&(D.recursos.instrucciones||D.recursos.enlaces||((ge=D.recursos.archivos)==null?void 0:ge.length))&&l.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[l.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),l.jsxs("div",{className:"space-y-3",children:[D.recursos.instrucciones&&l.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:D.recursos.instrucciones}),D.recursos.enlaces&&l.jsx("div",{children:D.recursos.enlaces.split(`
`).map((pe,ye)=>pe.trim()&&l.jsx("a",{href:pe,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:pe},ye))}),D.recursos.archivos&&D.recursos.archivos.length>0&&l.jsx("ul",{className:"list-disc list-inside",children:D.recursos.archivos.map(pe=>l.jsx("li",{className:"text-slate-700",children:pe.nombre},pe.nombre))})]})]}),D==null?void 0:D.tipos.map(pe=>{const ye=D.generatedContent[pe];return ye?l.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:pe}),l.jsxs("div",{className:"space-y-4 text-sm",children:[pe==="Quiz"&&Array.isArray(ye)&&ye.map((ue,se)=>l.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[l.jsxs("p",{className:"font-semibold",children:[se+1,". ",ue.pregunta]}),l.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:ue.opciones.map((Pe,at)=>l.jsxs("li",{children:[l.jsxs("strong",{children:[String.fromCharCode(65+at),"."]})," ",Pe]},at))}),l.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",ue.respuestaCorrecta]})]},se)),pe==="Comprensión de Lectura"&&ye&&typeof ye=="object"&&Array.isArray(ye.preguntas)&&l.jsxs("div",{children:[l.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-3 rounded-md mb-4",children:ye.texto}),ye.preguntas.map((ue,se)=>l.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[l.jsxs("p",{className:"font-semibold",children:[se+1,". ",ue.pregunta]}),l.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:ue.opciones.map((Pe,at)=>l.jsxs("li",{children:[l.jsxs("strong",{children:[String.fromCharCode(65+at),"."]})," ",Pe]},at))}),l.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",ue.respuestaCorrecta]})]},se))]}),pe==="Términos Pareados"&&Array.isArray(ye)&&l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border border-slate-200",children:[l.jsx("thead",{className:"bg-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Concepto"}),l.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Definición"})]})}),l.jsx("tbody",{children:ye.map(ue=>l.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-slate-50",children:[l.jsx("td",{className:"p-2 align-top font-semibold text-slate-800",children:ue.concepto}),l.jsx("td",{className:"p-2 align-top text-slate-700",children:ue.definicion})]},ue.id))})]})}),pe==="Desarrollo"&&Array.isArray(ye)&&ye.map((ue,se)=>l.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[l.jsxs("p",{className:"font-semibold",children:[se+1,". ",ue.pregunta]}),l.jsxs("p",{className:"text-sm text-slate-600 mt-2 p-2 bg-slate-100 rounded-md",children:[l.jsx("strong",{className:"font-semibold",children:"Rúbrica:"})," ",ue.rubrica]})]},se)),(pe==="Quiz"||pe==="Términos Pareados"||pe==="Desarrollo")&&!Array.isArray(ye)&&l.jsxs("div",{className:"text-red-600 text-sm p-3 bg-red-50 border border-red-200 rounded-md",children:['El contenido generado para "',l.jsx("strong",{children:pe}),'" no tiene el formato de array esperado. La IA pudo haber devuelto una respuesta en un formato no válido.']}),pe==="Comprensión de Lectura"&&(!ye||typeof ye!="object"||!Array.isArray(ye.preguntas))&&l.jsxs("div",{className:"text-red-600 text-sm p-3 bg-red-50 border border-red-200 rounded-md",children:['El contenido generado para "',l.jsx("strong",{children:"Comprensión de Lectura"}),'" no tiene el formato de objeto con preguntas esperado.']})]})]},pe):null})]}),l.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[l.jsx("button",{onClick:()=>L(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),l.jsx("button",{onClick:J,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700",children:"Confirmar y Asignar"})]})]})},Se=()=>l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),l.jsx("button",{onClick:()=>u(!0),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nueva"})]}),l.jsx("div",{className:"space-y-4",children:t.length>0?t.map(ge=>{var ue,se;const pe=[];(ue=ge.cursosDestino)!=null&&ue.length&&pe.push(`Cursos: ${ge.cursosDestino.join(", ")}`),(se=ge.estudiantesDestino)!=null&&se.length&&pe.push(`Estudiantes: ${ge.estudiantesDestino.length}`);const ye=pe.length?pe.join(" | "):`Todo ${ge.nivel}`;return l.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-bold text-slate-800",children:[ge.asignatura," - ",ge.tipos.join(", ")]}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",ye," | Creado: ",new Date(ge.fechaCreacion).toLocaleDateString("es-CL")]})]}),l.jsx("button",{onClick:()=>o(ge),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},ge.id)}):l.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Haga clic en "Crear Nueva" para comenzar.'})})]});return p?l.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):l.jsx("div",{className:"animate-fade-in",children:D?Ae():i?Y():c?ee():Se()})},Bpe="actividades_remotas",yM="respuestas_actividades",bM=t=>{var r,n,a,s,i,o;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion,plazoEntrega:((s=(a=e.plazoEntrega)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||e.plazoEntrega,fechaCompletado:((o=(i=e.fechaCompletado)==null?void 0:i.toDate)==null?void 0:o.call(i).toISOString())||e.fechaCompletado}},Npe=(t,e)=>{if(!t.curso)return e([]),()=>{};const r=t.curso.charAt(0),n=er(Nt(Tt,Bpe),fn("fechaCreacion","desc"));return br(n,a=>{const i=a.docs.map(o=>bM(o)).filter(o=>{var m,p,g,b;const c=!((m=o.cursosDestino)!=null&&m.length)&&!((p=o.estudiantesDestino)!=null&&p.length),u=((g=o.cursosDestino)==null?void 0:g.includes(t.curso))??!1,f=((b=o.estudiantesDestino)==null?void 0:b.includes(t.nombreCompleto))??!1;return u||f?!0:c?o.nivel.charAt(0)===r:!1});e(i)},a=>{console.error("Error al suscribirse a actividades disponibles:",a),e([])})},kpe=(t,e)=>{const r=er(Nt(Tt,yM),Tn("estudianteId","==",t));return br(r,n=>{const a=n.docs.map(s=>bM(s));e(a)},n=>{console.error("Error al suscribirse a las respuestas del estudiante:",n),e([])})},Ipe=async t=>{try{const e={...t,fechaCompletado:Ar.fromDate(new Date)};return(await Sa(Nt(Tt,yM),e)).id}catch(e){throw console.error("Error al guardar la respuesta:",e),new Error("No se pudo guardar la respuesta.")}},Fpe=t=>[...t].sort(()=>Math.random()-.5),Dpe=(t,e)=>{if(e===0)return"1.0";const n=e*.6;let a;return t>=n?a=4+(t-n)*3/(e-n):a=1+t*3/(n||1),a=Math.max(1,Math.min(7,a)),a.toFixed(1)},Y3=()=>l.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Rpe=({actividad:t,onComplete:e,currentUser:r})=>{var D,L,j,H;const[n,a]=ne.useState({}),[s,i]=ne.useState(!1),[o,c]=ne.useState(!1),[u,f]=ne.useState(!1),[m,p]=ne.useState({}),g=`progress-${r.id}-${t.id}`;ne.useEffect(()=>{const U={};t.tipos.forEach(E=>{if(E==="Términos Pareados"){const _=t.generatedContent[E];_&&(U[E]=Fpe(_.map(B=>B.definicion)))}}),p(U);try{const E=localStorage.getItem(g);E&&a(JSON.parse(E))}catch(E){console.error("Could not load saved progress",E)}},[t,g]);const b=(U,E)=>{a(_=>({..._,[U]:E}))},y=()=>{c(!0),f(!1),setTimeout(()=>{try{localStorage.setItem(g,JSON.stringify(n)),f(!0),setTimeout(()=>f(!1),2e3)}catch(U){console.error("Could not save progress",U),alert("Error al guardar el progreso.")}finally{c(!1)}},500)},T=async()=>{i(!0);let U=0,E=0;const _=[],B={},Q="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";let R=null;R=new Xi(Q);for(const V of t.tipos){const X=t.generatedContent[V],oe=n[V];if(V==="Quiz"||V==="Comprensión de Lectura"){const te=V==="Quiz"?X:X.preguntas,ae=oe||{};let q=0,J=0;te.forEach((W,de)=>{J+=1,ae[de]===W.respuestaCorrecta&&(q+=1)}),U+=q,E+=J,_.push(`${V}: ${q}/${J} correctas.`),B[V]={puntaje:q,puntajeMaximo:J}}else if(V==="Términos Pareados"){const te=X,ae=oe||{};let q=0,J=0;te.forEach(W=>{J+=2,ae[W.id]===W.definicion&&(q+=2)}),U+=q,E+=J,_.push(`${V}: ${q/2}/${te.length} correctas.`),B[V]={puntaje:q,puntajeMaximo:J}}else if(V==="Desarrollo"){const te=X,ae=oe||{};let q=0,J=0;for(let W=0;W<te.length;W++){const de=te[W];if(J+=3,!R){_.push(`${V} #${W+1}: No se pudo evaluar automáticamente.`);continue}try{Pl("Autoaprendizaje - Evaluar Desarrollo");const P=R.getGenerativeModel({model:"gemini-1.5-flash-latest"}),K=`Evalúa la siguiente respuesta de un estudiante a la pregunta de desarrollo, basándote en la rúbrica proporcionada.
                        Pregunta: "${de.pregunta}".
                        Rúbrica: "${de.rubrica}".
                        Respuesta del estudiante: "${ae[W]||""}".
                        
                        Tu respuesta DEBE ser un objeto JSON con dos claves:
                        1. "puntaje": un número entero de 0 a 3.
                        2. "feedback": una frase corta y constructiva para el estudiante.`,Se=(await(await P.generateContent(K)).response).text().replace(/^```json\s*|```\s*$/g,""),ge=JSON.parse(Se),pe=Math.max(0,Math.min(3,parseInt(ge.puntaje,10)||0));q+=pe,_.push(`${V} #${W+1}: Puntaje ${pe}/3. (${ge.feedback})`)}catch(P){console.error("Error evaluating development question:",P),_.push(`${V} #${W+1}: No se pudo evaluar automáticamente.`)}}U+=q,E+=J,B[V]={puntaje:q,puntajeMaximo:J}}}let F;if(R){const V=`
                Un estudiante ha completado una actividad sobre "${t.contenido}".
                Su puntaje total fue ${U} de ${E}.
                Detalle por sección: ${JSON.stringify(B)}
                Respuestas de desarrollo: ${JSON.stringify(n.Desarrollo||{})}
                
                Genera una retroalimentación detallada y constructiva en español. La respuesta DEBE ser un objeto JSON con la siguiente estructura:
                {
                  "resumenGeneral": "Un párrafo breve y motivador sobre el desempeño general.",
                  "areasDeFortaleza": ["Un array de 2 o 3 strings destacando lo que hizo bien."],
                  "areasDeMejora": ["Un array de 2 o 3 strings con áreas a mejorar."],
                  "planDeMejora": [{ "paso": "Repasar conceptos clave", "detalle": "Una sugerencia concreta."}],
                  "feedbackPorSeccion": { "Quiz": "Feedback específico para esta sección." }
                }
            `;try{Pl("Autoaprendizaje - Retroalimentación Detallada");const q=(await(await R.getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(V)).response).text().replace(/^```json\s*|```\s*$/g,"");F=JSON.parse(q)}catch(X){console.error("Error generating detailed feedback:",X)}}e({respuestas:n,puntaje:U,puntajeMaximo:E,retroalimentacion:`¡Buen trabajo! Tu puntaje total es ${U} de ${E}.`,calificacion:Dpe(U,E),puntajesPorSeccion:B},F),localStorage.removeItem(g),i(!1)},k=t.recursos&&(t.recursos.instrucciones||t.recursos.enlaces||((D=t.recursos.archivos)==null?void 0:D.length));return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"p-4 bg-sky-50 dark:bg-sky-900/30 border-l-4 border-sky-400 rounded-r-lg",children:[l.jsx("h2",{className:"text-xl font-bold text-sky-800 dark:text-sky-200 mb-2",children:"¡Hola!"}),l.jsx("p",{className:"text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:t.introduccion})]}),k&&l.jsxs("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-900/30 border-l-4 border-indigo-400 rounded-r-lg",children:[l.jsx("h2",{className:"text-xl font-bold text-indigo-800 dark:text-indigo-200 mb-3",children:"Material de Estudio"}),l.jsxs("div",{className:"space-y-4",children:[((L=t.recursos)==null?void 0:L.instrucciones)&&l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Instrucciones:"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-wrap",children:t.recursos.instrucciones})]}),((j=t.recursos)==null?void 0:j.enlaces)&&l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Enlaces:"}),t.recursos.enlaces.split(`
`).map((U,E)=>U.trim()&&l.jsx("a",{href:U,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-500 hover:underline truncate",children:U},E))]}),((H=t.recursos)==null?void 0:H.archivos)&&t.recursos.archivos.length>0&&l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Archivos:"}),l.jsx("ul",{className:"list-disc list-inside",children:t.recursos.archivos.map((U,E)=>l.jsx("li",{children:l.jsx("a",{href:U.url,download:U.nombre,className:"text-blue-500 hover:underline",children:U.nombre})},E))})]})]})]}),t.tipos.map(U=>{const E=t.generatedContent[U];if(!E)return null;switch(U){case"Quiz":case"Comprensión de Lectura":{const _=U==="Quiz",B=E,Q=_?B:B.preguntas;return l.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:U}),!_&&l.jsx("div",{className:"mb-4 whitespace-pre-wrap bg-slate-50 dark:bg-slate-700/50 p-3 rounded text-slate-700 dark:text-slate-300",children:B.texto}),l.jsx("div",{className:"space-y-6",children:Q.map((R,F)=>l.jsxs("div",{children:[l.jsxs("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:[F+1,". ",R.pregunta]}),l.jsx("div",{className:"mt-2 space-y-2",children:R.opciones.map((V,X)=>{var oe;return l.jsxs("label",{className:"flex items-center gap-3 p-3 rounded hover:bg-slate-100 dark:hover:bg-slate-700 cursor-pointer text-slate-600 dark:text-slate-300",children:[l.jsx("input",{type:"radio",name:`q-${U}-${F}-${t.id}`,value:V,checked:((oe=n[U])==null?void 0:oe[F])===V,onChange:()=>b(U,{...n[U]||{},[F]:V}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400"}),l.jsx("span",{children:V})]},X)})})]},`${U}-${F}`))})]},U)}case"Términos Pareados":{const _=E,B=m[U]||[];return l.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:U}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"font-semibold text-center text-slate-600 dark:text-slate-400",children:"Concepto"}),_.map(Q=>l.jsx("div",{className:"p-3 bg-slate-100 dark:bg-slate-700 rounded h-14 flex items-center justify-center text-center font-medium text-slate-700 dark:text-slate-300",children:Q.concepto},Q.id))]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"font-semibold text-center text-slate-600 dark:text-slate-400",children:"Definición"}),_.map(Q=>{var R;return l.jsx("div",{className:"h-14 flex items-center",children:l.jsxs("select",{value:((R=n[U])==null?void 0:R[Q.id])||"",onChange:F=>b(U,{...n[U]||{},[Q.id]:F.target.value}),className:"w-full h-full border-slate-300 rounded-md shadow-sm text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-300",children:[l.jsx("option",{value:"",children:"Seleccionar definición..."}),B.map((F,V)=>l.jsx("option",{value:F,children:F},V))]})},Q.id)})]})]})]},U)}case"Desarrollo":{const _=E;return l.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:U}),_.map((B,Q)=>{var R;return l.jsxs("div",{className:"mb-6",children:[l.jsx("p",{className:"font-semibold mb-2 text-slate-700 dark:text-slate-300",children:B.pregunta}),l.jsxs("p",{className:"text-sm italic text-slate-500 dark:text-slate-400 mb-4",children:[l.jsx("strong",{children:"Rúbrica:"})," ",B.rubrica]}),l.jsx("textarea",{value:((R=n[U])==null?void 0:R[Q])||"",onChange:F=>b(U,{...n[U]||{},[Q]:F.target.value}),rows:8,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-300"})]},Q)})]},U)}default:return null}}),l.jsxs("div",{className:"text-right mt-8 flex justify-end gap-4",children:[l.jsx("button",{onClick:y,disabled:s||o||u,className:"bg-sky-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-sky-700 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center justify-center min-w-[200px] transition-colors duration-200",children:o?l.jsxs(l.Fragment,{children:[l.jsx(Y3,{})," Guardando..."]}):u?"✓ Guardado":"Guardar Progreso"}),l.jsx("button",{onClick:T,disabled:s||o,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:s?l.jsxs(l.Fragment,{children:[l.jsx(Y3,{})," Evaluando..."]}):"Entregar Actividad"})]})]})},Lpe=({currentUser:t})=>{const[e,r]=ne.useState([]),[n,a]=ne.useState([]),[s,i]=ne.useState(null),[o,c]=ne.useState("list"),[u,f]=ne.useState(null),[m,p]=ne.useState(null),[g,b]=ne.useState(!0);ne.useEffect(()=>{b(!0);const D=Npe(t,r),L=kpe(t.nombreCompleto,j=>{a(j),b(!1)});return()=>{D(),L()}},[t]);const y=D=>{p(D)},T=()=>{m&&(i(m),c("activity"),p(null))},k=ne.useCallback(async(D,L)=>{if(!s)return;const j={actividadId:s.id,estudianteId:t.nombreCompleto,fechaCompletado:new Date().toISOString(),...D,retroalimentacionDetallada:L};try{const H=await Ipe(j);f({...j,id:H}),c("result")}catch(H){console.error("Error saving submission:",H),alert("No se pudo guardar tu respuesta. El error fue: "+H.message)}},[s,t.nombreCompleto]);if(g)return l.jsx("div",{className:"text-center py-10",children:"Cargando actividades..."});if(o==="activity"&&s)return l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("h1",{className:"text-3xl font-bold text-slate-800",children:[s.asignatura,": ",s.tipos.join(", ")]}),l.jsxs("p",{className:"text-slate-500 mb-6",children:["Plazo: ",s.plazoEntrega]}),l.jsx(Rpe,{actividad:s,onComplete:k,currentUser:t})]});if(o==="result"&&u){const D=u.retroalimentacionDetallada,L=u.puntajesPorSeccion||{},j=(H,U)=>{const E=U>0?H/U:0;return E<.4?"bg-red-100 text-red-800":E<.7?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"};return l.jsxs("div",{className:"space-y-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Retroalimentación de la Actividad"}),D?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Retroalimentación General"}),l.jsx("p",{className:"text-slate-600 mb-6",children:D.resumenGeneral}),l.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-4 rounded-lg mb-6",children:[l.jsx("span",{className:"text-lg font-bold",children:"Puntaje Total:"}),l.jsxs("span",{className:`px-4 py-2 text-xl font-bold rounded-full ${j(u.puntaje,u.puntajeMaximo)}`,children:[u.puntaje," / ",u.puntajeMaximo]})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-green-600 mb-2",children:"✓ Áreas de Fortaleza"}),l.jsx("ul",{className:"list-disc list-inside space-y-1 text-slate-600",children:D.areasDeFortaleza.map((H,U)=>l.jsx("li",{children:H},U))})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-red-600 mb-2",children:"✗ Áreas de Mejora"}),l.jsx("ul",{className:"list-disc list-inside space-y-1 text-slate-600",children:D.areasDeMejora.map((H,U)=>l.jsx("li",{children:H},U))})]})]})]}),l.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Object.entries(L).map(([H,{puntaje:U,puntajeMaximo:E}])=>{var _;return l.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("h3",{className:"text-xl font-bold",children:H}),l.jsxs("span",{className:`px-3 py-1 text-sm font-bold rounded-full ${j(U,E)}`,children:[U," / ",E]})]}),l.jsx("p",{className:"text-slate-500 text-sm",children:(_=D.feedbackPorSeccion)==null?void 0:_[H]})]},H)})}),l.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Plan de Mejora Sugerido"}),l.jsx("div",{className:"space-y-4",children:D.planDeMejora.map((H,U)=>l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"bg-blue-500 text-white rounded-full h-8 w-8 flex-shrink-0 flex items-center justify-center font-bold mt-1",children:"✓"}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold",children:H.paso}),l.jsx("p",{className:"text-slate-600 text-sm",children:H.detalle})]})]},U))})]})]}):l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md text-center",children:[l.jsx("h2",{className:"text-3xl font-bold text-green-600 mb-4",children:"¡Actividad Completada!"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 max-w-sm mx-auto my-8",children:[l.jsxs("div",{className:"p-4 bg-slate-100 rounded-lg",children:[l.jsx("p",{className:"text-sm text-slate-500",children:"Puntaje"}),l.jsxs("p",{className:"text-2xl font-bold",children:[u.puntaje," / ",u.puntajeMaximo]})]}),l.jsxs("div",{className:"p-4 bg-slate-100 rounded-lg",children:[l.jsx("p",{className:"text-sm text-slate-500",children:"Calificación"}),l.jsx("p",{className:"text-2xl font-bold",children:u.calificacion})]})]}),l.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg text-left",children:[l.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:"Retroalimentación"}),l.jsx("p",{className:"text-blue-700 whitespace-pre-wrap",children:u.retroalimentacion})]})]}),l.jsx("button",{onClick:()=>{c("list"),f(null)},className:"w-full mt-4 bg-slate-800 text-white font-bold py-3 px-6 rounded-lg hover:bg-slate-700",children:"Volver a Actividades"})]})}return l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[m&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full animate-fade-in-up",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Confirmar inicio de actividad"}),l.jsxs("p",{className:"mt-4 text-slate-600",children:["¿Estás seguro de que deseas comenzar esta actividad? ",l.jsx("strong",{children:"Tendrás solo una oportunidad para responder."})]}),l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Sin embargo, puedes guardar tu progreso antes de enviarlo. Una vez enviado, no habrá una segunda oportunidad."}),l.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>p(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cancelar"}),l.jsx("button",{onClick:T,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Sí, comenzar"})]})]})}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Auto-aprendizaje"}),l.jsx("p",{className:"text-slate-500 mb-6",children:"Completa las actividades remotas asignadas por tus profesores."}),l.jsx("div",{className:"space-y-4",children:e.length>0?e.map(D=>{const L=n.find(H=>H.actividadId===D.id),j=!!L;return l.jsx("div",{className:`p-4 border rounded-lg ${j?"bg-green-50":"bg-slate-50"}`,children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-bold text-slate-800",children:[D.asignatura," - ",D.tipos.join(", ")]}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",D.plazoEntrega]})]}),j?l.jsxs("div",{className:"text-right",children:[l.jsx("button",{onClick:()=>{f(L),c("result")},className:"font-semibold text-blue-700 hover:underline",children:"Ver Resultados"}),l.jsxs("p",{className:"text-sm text-slate-600",children:["Puntaje: ",L.puntaje,"/",L.puntajeMaximo]})]}):l.jsx("button",{onClick:()=>y(D),className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Comenzar"})]})},D.id)}):l.jsx("p",{className:"text-center text-slate-500 py-10",children:"No hay actividades disponibles en este momento."})})]})},Tw="estudiantes_inclusion",Upe="usuarios",CM=t=>{const e=t.data();return{id:t.id,...e}},Mpe=t=>{const e=er(Nt(Tt,Tw));return br(e,n=>{const a=n.docs.map(s=>CM(s));t(a)},n=>{console.error("Error al suscribirse a estudiantes de inclusión:",n),t([])})},Ppe=t=>{const e=er(Nt(Tt,Upe));return br(e,n=>{const a=n.docs.map(s=>CM(s));t(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),t([])})},jpe=async t=>{try{return(await Sa(Nt(Tt,Tw),t)).id}catch(e){throw console.error("Error al agregar estudiante a inclusión:",e),new Error("No se pudo agregar al estudiante.")}},Ope=async(t,e)=>{try{const{id:r,...n}=e,a=_r(Tt,Tw,t);await Zi(a,n)}catch(r){throw console.error("Error al actualizar estudiante de inclusión:",r),new Error("No se pudo actualizar la ficha del estudiante.")}},Qpe=async t=>{try{const e=_r(Tt,Tw,t);await Oi(e)}catch(e){throw console.error("Error al eliminar estudiante de inclusión:",e),new Error("No se pudo eliminar al estudiante.")}},Hpe=({student:t,onClose:e,onSave:r,profesores:n})=>{const[a,s]=ne.useState("intervenciones"),[i,o]=ne.useState(t);ne.useEffect(()=>{o(t)},[t]);const[c,u]=ne.useState(null),f={responsable:"",accion:"",observaciones:""},[m,p]=ne.useState(f),[g,b]=ne.useState({trimestre:"T1",meta:""}),[y,T]=ne.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[k,D]=ne.useState(null),[L,j]=ne.useState(!1),H={motivo:"",acuerdos:"",asistentes:""},[U,E]=ne.useState(H),_=()=>{r(i),e()},B=()=>{if(!m.responsable||!m.accion){alert("Responsable y Acción son campos obligatorios.");return}let ue;c?ue=(i.intervenciones||[]).map(Pe=>Pe.id===c.id?{...Pe,...m}:Pe):ue=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...m},...i.intervenciones||[]];const se=ue.sort((Pe,at)=>new Date(at.fecha).getTime()-new Date(Pe.fecha).getTime());o(Pe=>({...Pe,intervenciones:se})),p(f),u(null)},Q=ue=>{u(ue),p({responsable:ue.responsable,accion:ue.accion,observaciones:ue.observaciones})},R=ue=>{window.confirm("¿Eliminar esta intervención?")&&o(se=>({...se,intervenciones:(se.intervenciones||[]).filter(Pe=>Pe.id!==ue)}))},F=ue=>{const{name:se,value:Pe}=ue.target;o(at=>({...at,[se]:Pe,fechaActualizacionApoyos:new Date().toISOString()}))},V=()=>{if(!g.meta.trim())return;const ue={...g,id:crypto.randomUUID(),cumplida:!1};o(se=>({...se,metasProgreso:[...se.metasProgreso||[],ue]})),b({trimestre:"T1",meta:""})},X=ue=>{o(se=>({...se,metasProgreso:(se.metasProgreso||[]).map(Pe=>Pe.id===ue?{...Pe,cumplida:!Pe.cumplida}:Pe)}))},oe=ue=>{o(se=>({...se,metasProgreso:(se.metasProgreso||[]).filter(Pe=>Pe.id!==ue)}))},te=ne.useMemo(()=>{const ue=i.metasProgreso||[];if(ue.length===0)return{percent:0,color:"bg-slate-300"};const se=ue.filter(De=>De.cumplida).length,Pe=Math.round(se/ue.length*100),at=Pe<40?"bg-red-500":Pe<75?"bg-yellow-500":"bg-green-500";return{percent:Pe,color:at}},[i.metasProgreso]),ae=ne.useMemo(()=>{if(!i.fechaActualizacionApoyos)return!0;const ue=new Date(i.fechaActualizacionApoyos),se=new Date;return se.setMonth(se.getMonth()-3),ue<se},[i.fechaActualizacionApoyos]),q=()=>{if(!y.titulo.trim()||!y.fecha)return;const ue={...y,id:crypto.randomUUID(),resuelta:!1};o(se=>({...se,alertas:[...se.alertas||[],ue].sort((Pe,at)=>new Date(Pe.fecha).getTime()-new Date(at.fecha).getTime())})),T({titulo:"",fecha:new Date().toISOString().split("T")[0]})},J=ue=>{o(se=>({...se,alertas:(se.alertas||[]).map(Pe=>Pe.id===ue?{...Pe,resuelta:!Pe.resuelta}:Pe)}))},W=ue=>{o(se=>({...se,alertas:(se.alertas||[]).filter(Pe=>Pe.id!==ue)}))},de=ue=>{ue.target.files&&ue.target.files[0]&&D(ue.target.files[0])},P=()=>{if(!k)return;j(!0);const ue=new FileReader;ue.readAsDataURL(k),ue.onloadend=()=>{const se={id:crypto.randomUUID(),nombre:k.name,url:ue.result,fechaSubida:new Date().toISOString()};o(Pe=>({...Pe,archivos:[se,...Pe.archivos||[]]})),D(null),j(!1)},ue.onerror=()=>{alert("Error al leer el archivo."),j(!1)}},K=ue=>{window.confirm("¿Eliminar este archivo?")&&o(se=>({...se,archivos:(se.archivos||[]).filter(Pe=>Pe.id!==ue)}))},Y=()=>{if(!U.motivo.trim()||!U.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const ue={...U,id:crypto.randomUUID(),fecha:new Date().toISOString()};o(se=>({...se,reuniones:[ue,...se.reuniones||[]].sort((Pe,at)=>new Date(at.fecha).getTime()-new Date(Pe.fecha).getTime())})),E(H)},ee=ue=>{window.confirm("¿Eliminar este registro de reunión?")&&o(se=>({...se,reuniones:(se.reuniones||[]).filter(Pe=>Pe.id!==ue)}))},Ae=()=>{var et,ht,Et;const ue=new ir("p","mm","a4"),se=20,Pe=ue.internal.pageSize.getWidth(),at=ue.internal.pageSize.getHeight();let De=se;const Ee=At=>{At.setFontSize(10),At.setTextColor(100),At.text("Ficha de Seguimiento - Módulo Inclusión",se,15)};Ee(ue),ue.setFontSize(18),ue.setFont("helvetica","bold"),ue.setTextColor(40),ue.text(i.nombre,se,De+10),De+=15,ue.setFontSize(11),ue.setFont("helvetica","normal"),ue.setTextColor(80),ue.text(`Curso: ${i.curso}`,se,De),ue.text(`Dificultad: ${i.dificultad}`,se,De+6),De+=15;const Le=At=>{De+At>at-se&&(ue.addPage(),Ee(ue),De=se)},it=At=>{Le(15),ue.setFontSize(14),ue.setFont("helvetica","bold"),ue.text(At,se,De),De+=10};if((et=i.intervenciones)!=null&&et.length&&(it("Historial de Intervenciones"),Yo(ue,{startY:De,head:[["Fecha","Responsable","Acción","Observaciones"]],body:i.intervenciones.map(At=>[new Date(At.fecha).toLocaleDateString("es-CL"),At.responsable,At.accion,At.observaciones||""]),theme:"grid",didDrawPage:At=>Ee(ue)}),De=ue.lastAutoTable.finalY+10),i.adaptacionesCurriculares||i.apoyosRecibidos){Le(30),it("Seguimiento y Apoyos"),ue.setFontSize(11),ue.setFont("helvetica","normal");const At=`Adaptaciones: ${i.adaptacionesCurriculares||"No registradas."}
Apoyos: ${i.apoyosRecibidos||"No registrados."}`,jt=ue.splitTextToSize(At,Pe-se*2);ue.text(jt,se,De),De+=jt.length*5+10}(ht=i.metasProgreso)!=null&&ht.length&&(Le(30),it("Metas de Progreso"),Yo(ue,{startY:De,head:[["Trimestre","Meta","Estado"]],body:i.metasProgreso.map(At=>[At.trimestre,At.meta,At.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:At=>Ee(ue)}),De=ue.lastAutoTable.finalY+10),(Et=i.reuniones)!=null&&Et.length&&(it("Reuniones con Apoderados"),Yo(ue,{startY:De,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:i.reuniones.map(At=>[new Date(At.fecha).toLocaleDateString("es-CL"),At.motivo,At.acuerdos,At.asistentes]),theme:"grid",didDrawPage:At=>Ee(ue)})),ue.save(`Ficha_Inclusion_${i.nombre.replace(/\s/g,"_")}.pdf`)},Se=()=>l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:c?"Editando Intervención":"Registrar Nueva Intervención"}),l.jsxs("select",{value:m.responsable,onChange:ue=>p(se=>({...se,responsable:ue.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione Responsable..."}),n.map(ue=>l.jsx("option",{value:ue,children:ue},ue))]}),l.jsx("textarea",{value:m.accion,onChange:ue=>p(se=>({...se,accion:ue.target.value})),placeholder:"Acción realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("textarea",{value:m.observaciones,onChange:ue=>p(se=>({...se,observaciones:ue.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsxs("div",{className:"flex justify-end gap-2",children:[c&&l.jsx("button",{onClick:()=>{u(null),p(f)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md",children:"Cancelar Edición"}),l.jsx("button",{onClick:B,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md",children:c?"Actualizar":"Guardar"})]})]}),l.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:(i.intervenciones||[]).map(ue=>l.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:ue.accion}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:ue.observaciones}),l.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(ue.fecha).toLocaleString("es-CL")," - ",ue.responsable]})]}),l.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[l.jsx("button",{onClick:()=>Q(ue),className:"text-blue-500",children:"✏️"}),l.jsx("button",{onClick:()=>R(ue.id),className:"text-red-500",children:"🗑️"})]})]})},ue.id))})]}),ge=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),ae&&l.jsx("span",{title:"Información no actualizada en los últimos 3 meses",className:"text-yellow-500 text-xl",children:"⚠️"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),l.jsx("textarea",{name:"adaptacionesCurriculares",value:i.adaptacionesCurriculares||"",onChange:F,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),l.jsx("textarea",{name:"apoyosRecibidos",value:i.apoyosRecibidos||"",onChange:F,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",te.percent,"%"]}),l.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:l.jsx("div",{className:`${te.color} h-4 rounded-full transition-all duration-500`,style:{width:`${te.percent}%`}})})]}),l.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[l.jsxs("select",{value:g.trimestre,onChange:ue=>b(se=>({...se,trimestre:ue.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"T1",children:"T1"}),l.jsx("option",{value:"T2",children:"T2"}),l.jsx("option",{value:"T3",children:"T3"})]}),l.jsx("input",{value:g.meta,onChange:ue=>b(se=>({...se,meta:ue.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:V,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm",children:"Agregar"})]}),l.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:(i.metasProgreso||[]).map(ue=>l.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[l.jsx("input",{type:"checkbox",checked:ue.cumplida,onChange:()=>X(ue.id),className:"h-5 w-5 rounded text-amber-500"}),l.jsxs("span",{className:`flex-grow text-sm ${ue.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[l.jsxs("strong",{children:[ue.trimestre,":"]})," ",ue.meta]}),l.jsx("button",{onClick:()=>oe(ue.id),className:"text-red-500 text-sm",children:"🗑️"})]},ue.id))})]})]}),pe=()=>l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),l.jsx("input",{type:"text",value:y.titulo,onChange:ue=>T(se=>({...se,titulo:ue.target.value})),placeholder:"Título de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),l.jsx("input",{type:"date",value:y.fecha,onChange:ue=>T(se=>({...se,fecha:ue.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),l.jsx("button",{onClick:q,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md",children:"Agendar"})]}),l.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(i.alertas||[]).map(ue=>l.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[l.jsx("input",{type:"checkbox",checked:ue.resuelta,onChange:()=>J(ue.id),className:"h-5 w-5 rounded text-amber-500"}),l.jsxs("span",{className:`flex-grow text-sm ${ue.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[ue.titulo," (",new Date(ue.fecha+"T12:00:00").toLocaleDateString(),")"]}),l.jsx("button",{onClick:()=>W(ue.id),className:"text-red-500 text-sm",children:"🗑️"})]},ue.id))})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),l.jsx("input",{type:"file",onChange:de,className:"w-full text-sm"}),l.jsx("button",{onClick:P,disabled:!k||L,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400",children:L?"Subiendo...":"Subir"})]}),l.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(i.archivos||[]).map(ue=>l.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[l.jsx("a",{href:ue.url,download:ue.nombre,className:"text-sm text-blue-600 hover:underline truncate",children:ue.nombre}),l.jsx("button",{onClick:()=>K(ue.id),className:"text-red-500 text-sm ml-2",children:"🗑️"})]},ue.id))})]})]}),ye=()=>l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunión"}),l.jsx("input",{value:U.motivo,onChange:ue=>E(se=>({...se,motivo:ue.target.value})),placeholder:"Motivo de la reunión...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("textarea",{value:U.acuerdos,onChange:ue=>E(se=>({...se,acuerdos:ue.target.value})),placeholder:"Acuerdos...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("input",{value:U.asistentes,onChange:ue=>E(se=>({...se,asistentes:ue.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("div",{className:"text-right",children:l.jsx("button",{onClick:Y,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md",children:"Guardar Reunión"})})]}),l.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:(i.reuniones||[]).map(ue=>l.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:ue.motivo}),l.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:[l.jsx("strong",{children:"Acuerdos:"})," ",ue.acuerdos]}),l.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(ue.fecha).toLocaleString("es-CL")," - Asistentes: ",ue.asistentes]})]}),l.jsx("button",{onClick:()=>ee(ue.id),className:"text-red-500 flex-shrink-0 ml-4",children:"🗑️"})]})},ue.id))})]});return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:ue=>ue.stopPropagation(),children:[l.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",t.nombre]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[t.curso," - ",t.dificultad]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:Ae,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200",children:"Exportar PDF"}),l.jsx("button",{onClick:e,className:"text-2xl text-slate-500 hover:text-slate-800",children:"×"})]})]}),l.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:l.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(ue=>l.jsx("button",{onClick:()=>s(ue),className:`${a===ue?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize`,children:ue==="alertas"?"Alertas y Archivos":ue==="seguimiento"?"Seguimiento y Metas":ue},ue))})}),l.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[a==="intervenciones"&&Se(),a==="seguimiento"&&ge(),a==="reuniones"&&ye(),a==="alertas"&&pe()]}),l.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[l.jsx("button",{onClick:e,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cerrar"}),l.jsx("button",{onClick:_,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios y Cerrar"})]})]})})},Vpe=({student:t,onClose:e,onConfirm:r})=>{const[n,a]=ne.useState($v[0]),s=()=>{r(t,n)};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:i=>i.stopPropagation(),children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",t.nombreCompleto," al PIE"]}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),l.jsx("select",{id:"dificultad",value:n,onChange:i=>a(i.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:$v.map(i=>l.jsx("option",{value:i,children:i},i))})]}),l.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cancelar"}),l.jsx("button",{type:"button",onClick:s,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Confirmar e Ingresar"})]})]})})},X3=({currentUser:t})=>{const[e,r]=ne.useState([]),[n,a]=ne.useState([]),[s,i]=ne.useState(!0),[o,c]=ne.useState(null),[u,f]=ne.useState(null),[m,p]=ne.useState(""),[g,b]=ne.useState(""),[y,T]=ne.useState("");ne.useEffect(()=>{i(!0);const _=Mpe(Q=>{r(Q),i(!1)}),B=Ppe(Q=>{a(Q)});return()=>{_(),B()}},[]);const k=async(_,B)=>{if(e.some(R=>R.nombre===_.nombreCompleto)){alert("Este estudiante ya está en el programa de inclusión.");return}const Q={nombre:_.nombreCompleto,curso:_.curso||"",dificultad:B,intervenciones:[],metasProgreso:[],alertas:[],archivos:[],reuniones:[],adaptacionesCurriculares:"",apoyosRecibidos:"",fechaActualizacionApoyos:new Date().toISOString()};try{await jpe(Q)}catch(R){console.error("Error al agregar estudiante:",R),alert("Hubo un error al agregar al estudiante al programa.")}},D=async _=>{try{await Ope(_.id,_)}catch(B){console.error("Error al actualizar la ficha:",B),alert("Hubo un error al guardar los cambios en la ficha.")}},L=async _=>{if(window.confirm("¿Está seguro de que desea eliminar a este estudiante del programa de inclusión? Esta acción es irreversible."))try{await Qpe(_),(o==null?void 0:o.id)===_&&c(null)}catch(B){console.error("Error al eliminar estudiante:",B),alert("Hubo un error al eliminar al estudiante.")}},j=_=>{if(U.length===0){alert("No hay datos para exportar.");return}const B=U.map(Q=>{var R;return{Nombre:Q.nombre,Curso:Q.curso,Dificultad:Q.dificultad,"N° Intervenciones":((R=Q.intervenciones)==null?void 0:R.length)||0,"Alertas Pendientes":(Q.alertas||[]).filter(F=>!F.resuelta).length}});if(_==="xlsx"){const Q=Dl.json_to_sheet(B),R=Dl.book_new();Dl.book_append_sheet(R,Q,"Estudiantes_Inclusion"),sS(R,"Estudiantes_Inclusion.xlsx")}else{const Q=new ir;Q.text("Listado de Estudiantes - Programa de Inclusión",14,15),Yo(Q,{startY:20,head:[Object.keys(B[0])],body:B.map(Object.values)}),Q.save("Estudiantes_Inclusion.pdf")}},H=ne.useMemo(()=>n.filter(_=>{var B;return _.profile===Pt.ESTUDIANTE&&(((B=t.cursos)==null?void 0:B.includes(_.curso||""))||t.profile===Pt.SUBDIRECCION)}).filter(_=>!e.some(B=>B.nombre===_.nombreCompleto)),[n,e,t]),U=ne.useMemo(()=>e.filter(_=>_.nombre.toLowerCase().includes(m.toLowerCase())&&(g===""||_.curso===g)&&(y===""||_.dificultad===y)).sort((_,B)=>_.nombre.localeCompare(B.nombre)),[e,m,g,y]),E=ne.useMemo(()=>n.filter(_=>_.profile===Pt.PROFESORADO).map(_=>_.nombreCompleto).sort(),[n]);return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusión Escolar (PIE)"}),s?l.jsx("div",{className:"text-center py-10",children:"Cargando datos del programa..."}):l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes en PIE (",U.length,")"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>j("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),l.jsx("button",{onClick:()=>j("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[l.jsx("input",{type:"text",placeholder:"Buscar por nombre...",value:m,onChange:_=>p(_.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsxs("select",{value:g,onChange:_=>b(_.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todos los Cursos"}),Za.map(_=>l.jsx("option",{children:_},_))]}),l.jsxs("select",{value:y,onChange:_=>T(_.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todas las Dificultades"}),$v.map(_=>l.jsx("option",{children:_},_))]})]}),l.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:U.map(_=>l.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:_.nombre}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[_.curso," - ",_.dificultad]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>c(_),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Ficha"}),l.jsx("button",{onClick:()=>L(_.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full text-lg",children:"🗑️"})]})]},_.id))})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante desde Nómina"}),l.jsx("ul",{className:"space-y-2 max-h-[60vh] overflow-y-auto",children:H.map(_=>l.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-sm text-slate-800 dark:text-slate-200",children:_.nombreCompleto}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:_.curso})]}),l.jsx("button",{onClick:()=>f(_),className:"text-2xl text-green-500 hover:text-green-700",children:"+"})]},_.id))})]})]}),u&&l.jsx(Vpe,{student:u,onClose:()=>f(null),onConfirm:(_,B)=>{k(_,B),f(null)}}),o&&l.jsx(Hpe,{student:o,onClose:()=>c(null),onSave:D,profesores:E})]})},EM="asistencia_dual",Gpe=t=>{var r,n;const e=t.data();return{id:t.id,...e,fechaHora:((n=(r=e.fechaHora)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaHora}},zpe=(t,e)=>{const r=er(Nt(Tt,EM),Tn("emailEstudiante","==",t),fn("fechaHora","desc"));return br(r,a=>{const s=a.docs.map(i=>Gpe(i));e(s)},a=>{console.error("Error subscribing to personal attendance:",a),e([])})},qpe=async t=>{try{const e={...t,fechaHora:Ar.fromDate(new Date(t.fechaHora))};await Sa(Nt(Tt,EM),e)}catch(e){throw console.error("Error adding attendance record:",e),new Error("Could not save the attendance record.")}},Kpe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),Wpe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm-3.707-4.293a1 1 0 001.414 1.414L10 12.414l2.293 2.293a1 1 0 001.414-1.414L11.414 11l2.293-2.293a1 1 0 00-1.414-1.414L10 9.586 7.707 7.293a1 1 0 00-1.414 1.414L8.586 11 6.293 13.293a1 1 0 000 1.414z",clipRule:"evenodd"})}),$pe=({currentUser:t})=>{const[e,r]=ne.useState(t.curso||""),[n,a]=ne.useState([]),[s,i]=ne.useState(!1),[o,c]=ne.useState(!0),[u,f]=ne.useState(null);ne.useEffect(()=>{if(!t.email){c(!1);return}c(!0);const p=zpe(t.email,g=>{a(g),c(!1)});return()=>p()},[t.email]);const m=p=>{if(!e){f({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}i(!0),f(null),navigator.geolocation.getCurrentPosition(async g=>{const b={nombreEstudiante:t.nombreCompleto,emailEstudiante:t.email,curso:e,tipo:p,fechaHora:new Date().toISOString(),ubicacion:{latitud:g.coords.latitude,longitud:g.coords.longitude}};try{await qpe(b),f({text:`¡Marca de ${p} registrada con éxito!`,type:"success"})}catch(y){console.error("Error saving record to Firestore:",y),f({text:"No se pudo guardar el registro en la nube.",type:"error"})}finally{i(!1)}},g=>{console.error("Geolocation error:",g);let b="No se pudo obtener la ubicación.";switch(g.code){case g.PERMISSION_DENIED:b="Permiso de ubicación denegado. Por favor, habilite la ubicación en su navegador y dispositivo.";break;case g.POSITION_UNAVAILABLE:b="La información de ubicación no está disponible en este momento. Verifique su conexión y GPS.";break;case g.TIMEOUT:b="La solicitud de ubicación ha tardado demasiado. Inténtelo de nuevo en un lugar con mejor señal.";break;default:b=`Ocurrió un error desconocido al obtener la ubicación (código: ${g.code}).`;break}f({text:b,type:"error"}),i(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Asistencia a Empresa"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Registre su entrada y salida de la empresa de práctica."}),l.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione su curso"}),l.jsxs("select",{id:"curso",value:e,onChange:p=>r(p.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2 dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"-- Mi curso --"}),Qf.map(p=>l.jsx("option",{value:p,children:p},p))]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[l.jsx("button",{onClick:()=>m("Entrada"),disabled:s||!e,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),l.jsx("button",{onClick:()=>m("Salida"),disabled:s||!e,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),s&&l.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-400 pt-4 flex items-center justify-center gap-2",children:[l.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l.jsx("span",{children:"Obteniendo ubicación..."})]}),u&&l.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${u.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.text})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Mi Historial de Asistencia"}),l.jsx("div",{className:"overflow-x-auto max-h-96",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha y Hora"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tipo"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o?l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"Cargando historial..."})}):n.length>0?n.map(p=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(p.fechaHora).toLocaleString("es-CL")}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:l.jsxs("span",{className:`px-3 py-1 inline-flex items-center gap-1.5 text-xs leading-5 font-semibold rounded-full ${p.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[p.tipo==="Entrada"?l.jsx(Kpe,{}):l.jsx(Wpe,{}),p.tipo]})}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:p.curso})]},p.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},Jpe=async()=>{try{console.log("🔍 Debugging users collection...");const t=Nt(Gr,"users"),e=er(t,cu(10)),r=await ps(e),n={exists:!0,totalDocs:r.size,sampleDocs:[],fieldAnalysis:{}},a=new Set;return r.forEach((s,i)=>{const o=s.data(),c={id:s.id,data:o,fields:Object.keys(o)};n.sampleDocs.push(c),Object.keys(o).forEach(u=>a.add(u))}),n.fieldAnalysis={allFields:Array.from(a),commonFields:Array.from(a).filter(s=>n.sampleDocs.filter(o=>s in o.data).length>n.sampleDocs.length*.5)},console.log("Users collection debug result:",n),n}catch(t){return console.error("Error debugging users collection:",t),{exists:!1,error:t instanceof Error?t.message:"Unknown error"}}},Ype=async(t,e)=>{var c,u,f;const r=new Date(t,e,1),n=new Date(t,e+1,0,23,59,59,999),a=Ar.fromDate(r),s=Ar.fromDate(n),i=["asistenciaDual","asistenciaEmpresa","asistencia","attendance","checkins"],o={};for(const m of i)try{const p=Nt(Gr,m);try{const g=er(p,Tn("fechaHora",">=",a),Tn("fechaHora","<=",s)),b=await ps(g);o[m]={exists:!0,hasDateField:!0,count:b.size,sampleDoc:((c=b.docs[0])==null?void 0:c.data())||null}}catch{const b=["fecha","timestamp","createdAt"];let y=!1;for(const T of b)try{const k=er(p,Tn(T,">=",a),Tn(T,"<=",s)),D=await ps(k);o[m]={exists:!0,hasDateField:T,count:D.size,sampleDoc:((u=D.docs[0])==null?void 0:u.data())||null},y=!0;break}catch{continue}if(!y){const T=er(p,fn("__name__"),cu(5)),k=await ps(T);o[m]={exists:!0,hasDateField:!1,count:k.size,sampleDoc:((f=k.docs[0])==null?void 0:f.data())||null,note:"No date field found for filtering"}}}}catch(p){o[m]={exists:!1,error:p instanceof Error?p.message:"Unknown error"}}return console.log("Debug Asistencia Collections:",o),o},Xpe=(t,e,r,n)=>{try{const a=new Date(t,e,1);a.setHours(0,0,0,0);const s=new Date(t,e+1,0);s.setHours(23,59,59,999),console.log(`🔍 Buscando registros entre: ${a.toISOString()} y ${s.toISOString()}`),console.log(`📅 Mes actual: ${t}-${(e+1).toString().padStart(2,"0")}`);const i=Ar.fromDate(a),o=Ar.fromDate(s),c=[],u=new Map,f=()=>{const p=Array.from(u.values());console.log(`📊 Total registros encontrados: ${p.length}`),p.length>0&&console.log("📅 Registros por día:",p.reduce((g,b)=>{let y;b.fechaHora instanceof Date?y=b.fechaHora:typeof b.fechaHora=="string"?y=new Date(b.fechaHora):y=new Date;const T=y.getDate();return g[T]=(g[T]||0)+1,g},{})),r(p)};return["asistencia_dual","asistenciaEmpresa","asistencia_empresa","asistenciaDual","asistencia"].forEach(p=>{try{console.log(`🔍 Configurando suscripción para: ${p}`);const g=Nt(Gr,p),b=er(g,Tn("fechaHora",">=",i),Tn("fechaHora","<=",o),fn("fechaHora","desc")),y=br(b,T=>{console.log(`📋 ${p}: ${T.size} documentos encontrados con filtro`),T.size>0?(console.log(`✅ Registros encontrados en ${p}:`),Array.from(u.keys()).filter(D=>D.startsWith(`${p}_`)).forEach(D=>u.delete(D)),T.docs.forEach((D,L)=>{var j;if(L<5){const H=D.data();let U;(j=H.fechaHora)!=null&&j.toDate?U=H.fechaHora.toDate():typeof H.fechaHora=="string"?U=new Date(H.fechaHora):U=new Date,console.log(`   ${L+1}. ${H.emailEstudiante} - ${U.toLocaleString()} - ${H.tipo}`),console.log(`      📅 Fecha original: ${H.fechaHora} (tipo: ${typeof H.fechaHora})`)}}),T.forEach(D=>{var E;const L=D.data();let j;(E=L.fechaHora)!=null&&E.toDate?j=L.fechaHora.toDate():typeof L.fechaHora=="string"?j=new Date(L.fechaHora):L.fechaHora instanceof Date?j=L.fechaHora:L.fechaHora?j=new Date(L.fechaHora):j=new Date;const H={id:D.id,emailEstudiante:L.emailEstudiante||L.email||"",nombreEstudiante:L.nombreEstudiante||L.nombre||"",curso:L.curso||"",fechaHora:j,tipo:L.tipo,ubicacion:L.ubicacion||null,observaciones:L.observaciones||"",...L},U=`${p}_${D.id}`;u.set(U,H)}),f()):console.log(`⚪ ${p}: vacía, manteniendo datos existentes`)},T=>{console.warn(`⚠️ Error con filtro en ${p}:`,T),console.log(`🔄 Intentando estrategia alternativa en ${p}...`);const k=er(g,cu(200)),D=br(k,j=>{if(console.log(`📋 ${p} (sin filtro): ${j.size} documentos`),j.size>0){const U=j.docs[0].data();console.log(`📄 Estructura en ${p}:`,Object.keys(U)),console.log("📄 Primer documento:",U)}const H=j.docs.filter(U=>{var B;const E=U.data();if(!E.fechaHora)return!1;let _;return(B=E.fechaHora)!=null&&B.toDate?_=E.fechaHora.toDate():typeof E.fechaHora=="string"?_=new Date(E.fechaHora):E.fechaHora instanceof Date?_=E.fechaHora:_=new Date(E.fechaHora),_>=a&&_<=s});console.log(`📅 ${p}: ${H.length} registros después de filtro manual`),H.length>0&&(Array.from(u.keys()).filter(E=>E.startsWith(`${p}_`)).forEach(E=>u.delete(E)),H.forEach(E=>{var F;const _=E.data();let B;(F=_.fechaHora)!=null&&F.toDate?B=_.fechaHora.toDate():typeof _.fechaHora=="string"?B=new Date(_.fechaHora):_.fechaHora instanceof Date?B=_.fechaHora:B=new Date(_.fechaHora);const Q={id:E.id,emailEstudiante:_.emailEstudiante||_.email||"",nombreEstudiante:_.nombreEstudiante||_.nombre||"",curso:_.curso||"",fechaHora:B,tipo:_.tipo,ubicacion:_.ubicacion||null,observaciones:_.observaciones||"",..._},R=`${p}_${E.id}`;u.set(R,Q)}),f())}),L=c.findIndex(j=>j===y);L>=0?c[L]=D:c.push(D)});c.push(y)}catch(g){console.warn(`❌ Error configurando ${p}:`,g)}}),()=>{c.forEach(p=>{try{p()}catch(g){console.warn("Error unsubscribing:",g)}})}}catch(a){return console.error("Error setting up subscribeToAsistenciaByMonth:",a),n&&n(new Error(`Error al configurar suscripción: ${a instanceof Error?a.message:"Error desconocido"}`)),()=>{}}},Zpe=(t,e)=>{try{console.log("🔍 Buscando usuarios en múltiples colecciones...");const r=["usuarios","users"],n=[],a=new Map,s=()=>{const o=Array.from(a.values());console.log(`📊 Total usuarios encontrados: ${o.length}`);const c=o.reduce((f,m)=>(f[m.profile]=(f[m.profile]||0)+1,f),{});console.log("👥 Usuarios por perfil:",c);const u=o.filter(f=>f.profile===Pt.ESTUDIANTE);console.log(`🎓 Estudiantes encontrados: ${u.length}`),u.forEach(f=>{console.log(`   - ${f.nombreCompleto} (${f.curso}) - ${f.email}`)}),t(o)};let i=!1;return r.forEach(o=>{try{const c=Nt(Gr,o),u=er(c),f=br(u,m=>{m.size>0?(console.log(`✅ Encontrados ${m.size} usuarios en colección: ${o}`),i=!0,Array.from(a.keys()).filter(g=>g.startsWith(`${o}_`)).forEach(g=>a.delete(g)),m.forEach(g=>{var b,y,T,k;try{const D=g.data(),L=D.email||D.userEmail||D.mail||D.correo||"",j=D.nombreCompleto||D.displayName||D.name||D.nombre||D.fullName||"",H=D.curso||D.course||D.class||D.grade||"";let U=D.profile||D.role||D.tipo||D.userType||Pt.ESTUDIANTE;if(typeof U=="string"){const B=U.toLowerCase();B.includes("estudiante")||B.includes("student")||B.includes("alumno")?U=Pt.ESTUDIANTE:B.includes("coordinador")||B.includes("coordinator")?U=Pt.COORDINADOR_TP:B.includes("profesor")||B.includes("teacher")||B.includes("docente")?U=Pt.PROFESOR:(B.includes("subdireccion")||B.includes("subdir"))&&(U=Pt.COORDINADOR_TP)}const E={id:g.id,email:L,nombreCompleto:j,curso:H,profile:U,activo:D.activo!==!1,fechaCreacion:((y=(b=D.fechaCreacion)==null?void 0:b.toDate)==null?void 0:y.call(b))||new Date(D.fechaCreacion)||new Date,ultimaActividad:((k=(T=D.ultimaActividad)==null?void 0:T.toDate)==null?void 0:k.call(T))||new Date(D.ultimaActividad)||new Date,...D},_=`${o}_${g.id}`;a.set(_,E)}catch(D){console.warn(`Error procesando documento ${g.id} en ${o}:`,D)}}),s()):console.log(`⚪ Colección ${o}: vacía`)},m=>{console.warn(`⚠️ Error en colección ${o}:`,m)});n.push(f)}catch(c){console.warn(`❌ Error configurando ${o}:`,c)}}),setTimeout(()=>{i||(console.error("❌ No se encontraron usuarios en ninguna colección"),e&&e(new Error("No se encontraron colecciones de usuarios con datos")))},3e3),()=>{n.forEach(o=>{try{o()}catch(c){console.warn("Error unsubscribing:",c)}})}}catch(r){return console.error("Error setting up multi-collection users subscription:",r),e&&e(new Error(`Error al configurar suscripción multi-colección: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},ege=(t,e)=>{try{console.log("Setting up users subscription...");const r=Nt(Gr,"users"),n=er(r);return br(n,s=>{console.log(`Raw users snapshot size: ${s.size}`);const i=[];s.forEach(f=>{var m,p,g,b;try{const y=f.data();console.log(`Processing user doc ${f.id}:`,y);const T=y.email||y.userEmail||y.mail||"",k=y.nombreCompleto||y.displayName||y.name||y.nombre||"",D=y.curso||y.course||y.class||"";let L=y.profile||y.role||y.tipo||Pt.ESTUDIANTE;if(typeof L=="string"){const H=L.toLowerCase();H.includes("estudiante")||H.includes("student")||H.includes("alumno")?L=Pt.ESTUDIANTE:H.includes("coordinador")||H.includes("coordinator")?L=Pt.COORDINADOR_TP:H.includes("profesor")||H.includes("teacher")||H.includes("docente")?L=Pt.PROFESOR:(H.includes("subdireccion")||H.includes("subdir"))&&(L=Pt.COORDINADOR_TP)}const j={id:f.id,email:T,nombreCompleto:k,curso:D,profile:L,activo:y.activo!==!1,fechaCreacion:((p=(m=y.fechaCreacion)==null?void 0:m.toDate)==null?void 0:p.call(m))||new Date(y.fechaCreacion)||new Date,ultimaActividad:((b=(g=y.ultimaActividad)==null?void 0:g.toDate)==null?void 0:b.call(g))||new Date(y.ultimaActividad)||new Date,...y};i.push(j)}catch(y){console.warn(`Error processing user document ${f.id}:`,y)}}),i.sort((f,m)=>f.nombreCompleto.localeCompare(m.nombreCompleto)),console.log(`Processed ${i.length} users successfully`);const o=i.reduce((f,m)=>(f[m.profile]=(f[m.profile]||0)+1,f),{});console.log("Users by profile:",o);const c=i.filter(f=>f.profile===Pt.ESTUDIANTE);console.log(`Estudiantes: ${c.length}`);const u=c.filter(f=>f.curso);console.log(`Estudiantes con curso: ${u.length}`),t(i)},s=>{console.error("Error in subscribeToAllUsers:",s),e&&e(new Error(`Error al cargar usuarios: ${s.message}`))})}catch(r){return console.error("Error setting up subscribeToAllUsers:",r),e&&e(new Error(`Error al configurar suscripción de usuarios: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},L1=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},tge=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),rge=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H9.5l3.5 3.5L11.59 18 6 12.41 11.59 7 13 8.41 9.5 11H17v2z"})}),nge=()=>{const[t,e]=ne.useState([]),[r,n]=ne.useState([]),[a,s]=ne.useState(!0),[i,o]=ne.useState(null),[c,u]=ne.useState(new Date),[f,m]=ne.useState("todos"),[p,g]=ne.useState("");ne.useEffect(()=>{s(!0),o(null);const U=c.getFullYear(),E=c.getMonth();console.log("=== INICIANDO CARGA DE DATOS ==="),console.log("Año:",U,"Mes:",E);let _=!1,B=!1;const Q=()=>{_&&B&&(console.log("=== CARGA COMPLETA ==="),s(!1))};(async()=>{console.log("🧪 INICIANDO PRUEBA DIRECTA SIMPLE...");try{const F=Nt(Gr,"asistencia_dual"),V=er(F,cu(5)),X=await ps(V);if(console.log(`✅ asistencia_dual - Documentos encontrados: ${X.size}`),X.size>0)X.docs.forEach((oe,te)=>{const ae=oe.data();console.log(`   ${te+1}. ${oe.id.slice(0,8)} - ${ae.emailEstudiante} - ${ae.tipo}`),console.log("      Fecha original:",ae.fechaHora),console.log("      Todos los campos:",Object.keys(ae))});else{console.log("❌ No se encontraron documentos en asistencia_dual");const oe=["asistenciaEmpresa","asistencia_empresa"];for(const te of oe)try{const ae=Nt(Gr,te),q=er(ae,cu(3)),J=await ps(q);if(console.log(`📋 ${te}: ${J.size} documentos`),J.size>0){const W=J.docs[0].data();console.log("   Estructura:",Object.keys(W)),console.log("   Email:",W.emailEstudiante||W.email),console.log("   Fecha:",W.fechaHora||W.fecha)}}catch(ae){console.log(`❌ ${te}: ${ae instanceof Error?ae.message:"Error"}`)}}}catch(F){console.error("❌ Error en prueba directa:",F),F.code==="permission-denied"?(console.log("🔒 PROBLEMA: Permisos de Firestore denegados"),console.log("💡 Ve a Firebase Console → Firestore → Rules y verifica los permisos")):F.code==="failed-precondition"&&(console.log("📊 PROBLEMA: Faltan índices en Firestore"),console.log("💡 Ve a Firebase Console → Firestore → Indexes"))}})(),Ype(U,E).then(F=>{console.log("🔍 Debug info for collections:",F),Object.entries(F).forEach(([V,X])=>{if(X.exists&&X.totalDocs>0){if(console.log(`
📋 COLECCIÓN ${V.toUpperCase()}:`),console.log(`   📊 Total documentos: ${X.totalDocs}`),console.log(`   📅 Documentos del período: ${X.count}`),console.log(`   🔑 Campo de fecha: ${X.hasDateField}`),X.sampleDoc){console.log("   📄 Documento ejemplo:",X.sampleDoc);const oe=X.sampleDoc,te=oe.emailEstudiante||oe.email||oe.userEmail||oe.correo||"NO ENCONTRADO",ae=oe.tipo||oe.type||oe.action||oe.tipoRegistro||"NO ENCONTRADO",q=oe.fechaHora||oe.fecha||oe.timestamp||oe.createdAt||"NO ENCONTRADO";console.log(`   📧 Email estudiante: ${te}`),console.log(`   📝 Tipo registro: ${ae}`),console.log(`   📅 Fecha: ${q}`),console.log("   🗂️ Todos los campos:",Object.keys(oe))}X.filteredDocs&&X.filteredDocs.length>0&&(console.log("   📋 Registros del período encontrados:",X.filteredDocs.length),X.filteredDocs.forEach((oe,te)=>{te<3&&console.log(`      ${te+1}. ID: ${oe.id}`,oe.data)}))}else X.exists?console.log(`⚪ Colección ${V}: vacía`):console.log(`❌ Colección ${V}: no existe`)})}).catch(F=>{console.error("Debug error:",F)}),Jpe().then(F=>{console.log("🔍 Debug info for users:",F),(!F.exists||F.totalDocs===0)&&(console.log('⚠️ Colección "users" vacía o no existe. Buscando alternativas...'),["usuarios","estudiantes","profiles","accounts","members"].forEach(async X=>{var oe;try{const te=Nt(Gr,X),ae=er(te,cu(5)),q=await ps(ae);q.size>0?(console.log(`✅ Encontrada colección alternativa: ${X} con ${q.size} documentos`),console.log("Documento muestra:",(oe=q.docs[0])==null?void 0:oe.data())):console.log(`❌ Colección ${X}: vacía`)}catch{console.log(`❌ Colección ${X}: no existe`)}}))}).catch(F=>{console.error("Users debug error:",F)});try{console.log("Configurando suscripción a asistencia...");const F=Xpe(U,E,X=>{if(console.log("✅ Received registros:",X.length),X.length>0){console.log("📋 ANÁLISIS DE REGISTROS RECIBIDOS:"),console.log("Sample registro:",X[0]);const oe=[...new Set(X.map(de=>de.emailEstudiante).filter(Boolean))];console.log("📧 Emails de estudiantes en registros:",oe);const te=[...new Set(X.map(de=>de.tipo).filter(Boolean))];console.log("📝 Tipos de registro encontrados:",te);const ae=X.reduce((de,P)=>{const K=new Date(P.fechaHora).getDate();return de[K]||(de[K]=[]),de[K].push(P),de},{});console.log("📅 Registros por día del mes:",Object.keys(ae).map(de=>({dia:parseInt(de),cantidad:ae[parseInt(de)].length})));const q=r.map(de=>de.email).filter(Boolean);console.log("👥 Emails de estudiantes cargados:",q);const J=oe.filter(de=>q.includes(de)),W=oe.filter(de=>!q.includes(de));console.log("✅ Emails que coinciden:",J),console.log("❌ Emails que NO coinciden:",W)}else console.log("⚠️ No se encontraron registros de asistencia para el período");e(X),_=!0,Q()},X=>{console.error("❌ Error fetching asistencia:",X),o("Error al cargar datos de asistencia: "+X.message),_=!0,Q()});console.log("Configurando suscripción a usuarios...");const V=Zpe(X=>{if(console.log("✅ Received users (multi-collection):",X.length),X.length>0){console.log("Sample user:",X[0]);const oe=X.filter(te=>te.profile===Pt.ESTUDIANTE&&te.curso);console.log("Dual students found:",oe.length),oe.forEach(te=>{console.log(`- ${te.nombreCompleto} (${te.curso}) - ${te.email}`)})}n(X),B=!0,Q()},X=>{console.error("❌ Error fetching users (multi-collection):",X),console.log("🔄 Intentando con función original de usuarios...");const oe=ege(te=>{console.log("✅ Received users (fallback):",te.length),n(te),B=!0,Q()},te=>{console.error("❌ Error en fallback también:",te),o("Error al cargar estudiantes: "+X.message),B=!0,Q()})});return()=>{console.log("Limpiando suscripciones..."),F&&F(),V&&V()}}catch(F){console.error("❌ Error setting up subscriptions:",F),o("Error al inicializar conexiones: "+(F instanceof Error?F.message:"Error desconocido")),s(!1)}},[c]);const{monthDays:b,monthName:y,year:T}=ne.useMemo(()=>{const U=c.getFullYear(),E=c.getMonth();return{monthDays:new Date(U,E+1,0).getDate(),monthName:c.toLocaleString("es-CL",{month:"long"}),year:U}},[c]),k=ne.useMemo(()=>{let U=r.filter(E=>E.profile===Pt.ESTUDIANTE&&E.curso&&Qf.includes(L1(E.curso)));if(f!=="todos"&&(U=U.filter(E=>L1(E.curso||"")===f)),p&&(U=U.filter(E=>E.nombreCompleto.toLowerCase().includes(p.toLowerCase()))),t.length>0){const E=[...new Set(t.map(Q=>Q.emailEstudiante).filter(Boolean))],_=U.map(Q=>Q.email),B=E.filter(Q=>!_.includes(Q));if(B.length>0){console.log("📝 Agregando estudiantes faltantes con registros:",B);const R=B.map(F=>{const V=t.find(X=>X.emailEstudiante===F);return{id:F,email:F,nombreCompleto:(V==null?void 0:V.nombreEstudiante)||F.split("@")[0],curso:(V==null?void 0:V.curso)||"3ºC",profile:Pt.ESTUDIANTE,activo:!0,fechaCreacion:new Date,ultimaActividad:new Date}}).filter(F=>{const V=f==="todos"||L1(F.curso)===f,X=!p||F.nombreCompleto.toLowerCase().includes(p.toLowerCase());return V&&X&&Qf.includes(L1(F.curso))});U=[...U,...R]}}return console.log(`👥 Estudiantes filtrados para mostrar: ${U.length}`),U.forEach(E=>{console.log(`   - ${E.nombreCompleto} (${E.curso}) - ${E.email}`)}),U.sort((E,_)=>E.nombreCompleto.localeCompare(_.nombreCompleto))},[r,f,p,t]),D=ne.useMemo(()=>{console.log("🔄 Procesando datos de asistencia para la tabla..."),console.log(`📊 Total registros a procesar: ${t.length}`),console.log(`👥 Estudiantes disponibles: ${k.length}`);const U=new Map;return t.length===0?(console.log("⚠️ No hay registros para procesar aún"),U):(t.forEach((E,_)=>{const B=E.emailEstudiante;if(!B)return;let Q;if(E.fechaHora instanceof Date)Q=E.fechaHora;else if(E.fechaHora&&typeof E.fechaHora=="object"&&"toDate"in E.fechaHora)Q=E.fechaHora.toDate();else if(typeof E.fechaHora=="string")Q=new Date(E.fechaHora);else{console.warn("Fecha no válida en registro:",E);return}const R=Q.getDate(),F=Q.getMonth(),V=Q.getFullYear();_<3&&console.log(`📅 Registro ${_+1}:`,{email:B,tipo:E.tipo,fechaOriginal:E.fechaHora,fechaProcesada:Q.toLocaleString(),año:V,mes:F,día:R}),U.has(B)||U.set(B,new Map);const X=U.get(B);X.has(R)||X.set(R,{});const oe=X.get(R);E.tipo==="Entrada"?(!oe.entrada||Q<new Date(oe.entrada.fechaHora))&&(oe.entrada=E):E.tipo==="Salida"&&(!oe.salida||Q>new Date(oe.salida.fechaHora))&&(oe.salida=E)}),console.log("📋 Datos de asistencia procesados:",{estudiantesConRegistros:U.size,estudiantes:Array.from(U.keys()),registrosPorEstudiante:Array.from(U.entries()).map(([E,_])=>({email:E,dias:Array.from(_.keys()),totalRegistros:Array.from(_.values()).reduce((B,Q)=>B+(Q.entrada?1:0)+(Q.salida?1:0),0)}))}),U)},[t]),L=U=>{u(E=>{const _=new Date(E);return _.setMonth(_.getMonth()+U),_})},j=U=>{U!=null&&U.latitud&&(U!=null&&U.longitud)&&window.open(`https://www.google.com/maps?q=${U.latitud},${U.longitud}`,"_blank")},H=["D","L","M","M","J","V","S"];return i?l.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:l.jsx("div",{className:"text-red-600 bg-red-100 dark:bg-red-900/30 p-4 rounded-md",children:i})}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[l.jsx("button",{onClick:()=>L(-1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes anterior",children:"←"}),l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${y} ${T}`}),l.jsx("button",{onClick:()=>L(1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes siguiente",children:"→"})]}),l.jsxs("select",{value:f,onChange:U=>m(U.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"todos",children:"Todos los Cursos"}),Qf.map(U=>l.jsx("option",{value:U,children:U},U))]}),l.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:p,onChange:U=>g(U.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a?l.jsxs("div",{className:"text-center text-amber-600 py-10",children:[l.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mb-4"}),l.jsx("div",{children:"Cargando datos de asistencia..."})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:b},(U,E)=>{const B=new Date(T,c.getMonth(),E+1).getDay(),Q=B===0||B===6;return l.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${Q?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[l.jsx("div",{className:"font-semibold",children:H[B]}),l.jsx("div",{children:E+1})]},E)})]})}),l.jsx("tbody",{children:k.length>0?k.map(U=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[l.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:U.nombreCompleto}),Array.from({length:b},(E,_)=>{var V;const B=_+1,Q=(V=D.get(U.email))==null?void 0:V.get(B),R=new Date(T,c.getMonth(),_+1),F=R.getDay()===0||R.getDay()===6;return U.email==="alexis.robles@industrialderecoleta.cl"&&B===2&&console.log("🔍 Verificando día 2 para Alexis:",{email:U.email,day:B,hasDataForStudent:D.has(U.email),studentDayRecords:Q,allAttendanceKeys:Array.from(D.keys()),daysForStudent:D.get(U.email)?Array.from(D.get(U.email).keys()):[]}),l.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${F?"bg-slate-100 dark:bg-slate-700/50":""}`,children:l.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(Q==null?void 0:Q.entrada)&&l.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var X;return j((X=Q.entrada)==null?void 0:X.ubicacion)},children:[l.jsx(tge,{}),l.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(Q.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]}),(Q==null?void 0:Q.salida)&&l.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var X;return j((X=Q.salida)==null?void 0:X.ubicacion)},children:[l.jsx(rge,{}),l.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(Q.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]})]})},B)})]},U.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:b+1,className:"text-center p-8 text-slate-500",children:"No hay estudiantes en el curso seleccionado o que coincidan con la búsqueda."})})})]})})]})},Bw="evaluaciones_formativas",Nw="calificaciones_formativas",uS="trabajos_grupales_formativos",age="usuarios",dS=t=>{var r,n,a,s;const e=t.data();return{id:t.id,...e,fecha:((n=(r=e.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||e.fecha,fechaPresentacion:((s=(a=e.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||e.fechaPresentacion}},sge=(t,e,r)=>{const n=er(Nt(Tt,Bw),Tn("curso","==",t),Tn("asignatura","==",e),fn("fecha","asc"));return br(n,a=>{r(a.docs.map(s=>dS(s)))},a=>{console.error("Error al suscribirse a evaluaciones:",a),r([])})},ige=async(t,e)=>{const r=a5(Tt),n=_r(Nt(Tt,Bw));r.set(n,{...t,fecha:Ar.fromDate(new Date(t.fecha+"T00:00:00"))});const a=_r(Tt,Nw,n.id);return r.set(a,e),await r.commit(),n.id},oge=async(t,e)=>{const r=_r(Tt,Bw,t);await Zi(r,e,{merge:!0})},lge=async t=>{const e=a5(Tt);e.delete(_r(Tt,Bw,t)),e.delete(_r(Tt,Nw,t)),await e.commit()},cge=(t,e)=>{if(t.length===0)return e({}),()=>{};const r=t.map(n=>{const a=_r(Tt,Nw,n);return br(a,s=>{s.exists()&&e({[n]:s.data()})})});return()=>r.forEach(n=>n())},Age=async(t,e)=>{const r=_r(Tt,Nw,t);await Zi(r,e,{merge:!0})},uge=(t,e,r)=>{const n=er(Nt(Tt,uS),Tn("curso","==",t),Tn("asignatura","==",e),fn("fechaPresentacion","desc"));return br(n,a=>{r(a.docs.map(s=>dS(s)))},a=>{console.error("Error al suscribirse a trabajos grupales:",a),r([])})},dge=async t=>{const e={...t,fechaPresentacion:Ar.fromDate(new Date(t.fechaPresentacion+"T00:00:00"))};await Sa(Nt(Tt,uS),e)},fge=async(t,e)=>{const r=_r(Tt,uS,t);await Zi(r,e,{merge:!0})},hge=t=>{const e=er(Nt(Tt,age));return br(e,r=>{t(r.docs.map(n=>dS(n)))},r=>{console.error("Error al suscribirse a usuarios:",r),t([])})},_M=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},w2={"Lengua y Literatura":"📚",Matemática:"➗",Inglés:"🇬🇧",Filosofía:"🤔","Historia y Geografía":"🌍","Educación Ciudadana":"🏛️",Ciencias:"🔬","Ciencias para la Ciudadanía":"💡",Artes:"🎨",Música:"🎵","Educación Física":"🏃‍♂️",Orientación:"🧭","Mecánica Industrial":"⚙️","Mecánica Automotriz":"🚗",Emprendimiento:"💼",Tecnología:"💻","Pensamiento Lógico":"🧠","Competencia Lectora":"📖",Default:"✏️"},SM=t=>t.startsWith("1º")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:t.startsWith("2º")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:t.startsWith("3º")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:t.startsWith("4º")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},mge=({cursos:t,onSelect:e})=>l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),t.length>0?l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:t.map(r=>{const n=SM(r);return l.jsxs("div",{className:"space-y-2 text-center",children:[l.jsxs("button",{onClick:()=>e(r),className:`relative w-full h-48 rounded-md shadow-lg ${n.bg} ${n.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[l.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${n.spine} rounded-l-md`}),l.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${n.text}`,children:[l.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:r.slice(0,2)}),l.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:r.slice(2)})]})]}),l.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:r})]},r)})}):l.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[l.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),l.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),pge=({curso:t,asignaturas:e,onSelect:r,onBack:n})=>{const a=SM(t);return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[l.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:"← Volver a Cursos"}),l.jsxs("div",{className:`p-2 rounded-md ${a.bg} ${a.text} font-bold`,children:["Libro de Clases: ",t]})]}),l.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),e.length>0?l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:e.map(s=>l.jsxs("button",{onClick:()=>r(s),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[l.jsx("span",{className:"text-2xl",children:w2[s]||w2.Default}),l.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:s})]},s))}):l.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[l.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),l.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},gge=({curso:t,asignatura:e,allUsers:r,onBack:n})=>{const[a,s]=ne.useState([]),[i,o]=ne.useState({}),[c,u]=ne.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[f,m]=ne.useState(null),[p,g]=ne.useState(null),[b,y]=ne.useState(!0),T=ne.useMemo(()=>r.filter(_=>_.profile===Pt.ESTUDIANTE&&_M(_.curso||"")===t).map(_=>_.nombreCompleto).sort((_,B)=>_.localeCompare(B)),[r,t]);ne.useEffect(()=>{y(!0);const _=sge(t,e,B=>{s(B);const Q=B.map(F=>F.id),R=cge(Q,F=>{o(V=>({...V,...F}))});return y(!1),()=>R()});return()=>_()},[t,e]);const k=_=>{const{name:B,value:Q}=_.target;f?m(R=>R?{...R,[B]:Q}:null):u(R=>({...R,[B]:Q}))},D=async _=>{if(_.preventDefault(),g(null),!c.nombreActividad.trim()){g("El nombre de la actividad es obligatorio.");return}const B={asignatura:e,curso:t,...c},Q=T.reduce((R,F)=>(R[F]="trabajado",R),{});try{await ige(B,Q),u({fecha:new Date().toISOString().split("T")[0],nombreActividad:""})}catch(R){console.error(R),g("No se pudo crear la evaluación.")}},L=(_,B)=>{var V;const R=(((V=i[_])==null?void 0:V[B])||"trabajado")==="trabajado"?"no trabajado":"trabajado",F={...i,[_]:{...i[_]||{},[B]:R}};o(F),Age(_,{[B]:R}).catch(X=>{console.error("Error updating grade:",X)})},j=_=>m(_),H=async()=>{if(f)try{await oge(f.id,{nombreActividad:f.nombreActividad,fecha:f.fecha}),m(null)}catch(_){console.error(_),g("No se pudo guardar la edición.")}},U=async _=>{if(window.confirm("¿Eliminar esta evaluación y todas sus calificaciones?"))try{await lge(_)}catch(B){console.error(B),g("No se pudo eliminar la evaluación.")}},E=ne.useCallback(_=>{if(a.length===0)return"-";let B=0,Q=0;return a.forEach(R=>{var V;const F=(V=i[R.id])==null?void 0:V[_];F==="trabajado"?(B+=7,Q++):F==="no trabajado"&&(B+=2,Q++)}),Q===0?"-":(B/Q).toFixed(1)},[i,a]);return b?l.jsx("div",{className:"text-center py-10",children:"Cargando calificaciones..."}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),l.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[t," / ",e]})]}),l.jsxs("form",{onSubmit:D,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluación"}),l.jsxs("div",{className:"w-full",children:[l.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),l.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:c.nombreActividad,onChange:k,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{className:"w-full",children:[l.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),l.jsx("input",{id:"fecha",type:"date",name:"fecha",value:c.fecha,onChange:k,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx("div",{className:"w-full",children:l.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),p&&l.jsx("p",{className:"text-red-500 text-sm col-span-full",children:p})]}),l.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),a.map(_=>l.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(f==null?void 0:f.id)===_.id?l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("input",{type:"text",name:"nombreActividad",value:f.nombreActividad,onChange:k,className:"text-xs p-1 w-full dark:bg-slate-600"}),l.jsx("input",{type:"date",name:"fecha",value:f.fecha,onChange:k,className:"text-xs p-1 w-full dark:bg-slate-600"}),l.jsx("button",{onClick:H,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:"✓"})]}):l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"font-semibold",children:_.nombreActividad}),l.jsx("span",{className:"font-normal text-slate-500",children:_.fecha}),l.jsxs("div",{className:"flex gap-2 mt-1",children:[l.jsx("button",{onClick:()=>j(_),className:"text-blue-500 hover:text-blue-700",children:"✏️"}),l.jsx("button",{onClick:()=>U(_.id),className:"text-red-500 hover:text-red-700",children:"🗑️"})]})]})},_.id)),l.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:T.map(_=>l.jsxs("tr",{children:[l.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:_}),a.map(B=>{var F;const R=((F=i[B.id])==null?void 0:F[_])==="trabajado";return l.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:l.jsx("button",{onClick:()=>L(B.id,_),className:`text-3xl transition-opacity duration-200 ${R?"opacity-100":"opacity-20"}`,children:w2[e]||w2.Default})},B.id)}),l.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:E(_)})]},_))})]})})]})},xge=({curso:t,asignatura:e,allUsers:r,onBack:n})=>{const[a,s]=ne.useState([]),[i,o]=ne.useState(null),[c,u]=ne.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[f,m]=ne.useState({}),[p,g]=ne.useState(2),b=ne.useMemo(()=>r.filter(j=>j.profile===Pt.ESTUDIANTE&&_M(j.curso||"")===t).sort((j,H)=>j.nombreCompleto.localeCompare(H.nombreCompleto)),[r,t]);ne.useEffect(()=>{const j=uge(t,e,s);return()=>j()},[t,e]),ne.useEffect(()=>{if(i){const j={};i.grupos.forEach(H=>{H.integrantes.forEach(U=>{j[U.nombre]={groupNumber:String(H.numero),role:U.rol||""}})}),m(j)}else m({})},[i]);const y=async j=>{if(j.preventDefault(),!c.nombre.trim())return;const H={curso:t,asignatura:e,nombreActividad:c.nombre,fechaPresentacion:c.fecha,grupos:[]};try{await dge(H),u({nombre:"",fecha:new Date().toISOString().split("T")[0]})}catch(U){console.error(U),alert("No se pudo crear la actividad grupal.")}},T=async()=>{if(!i)return;const j=new Map;for(const U of b){const E=f[U.nombreCompleto];if(E&&E.groupNumber){const _=parseInt(E.groupNumber,10);isNaN(_)||(j.has(_)||j.set(_,[]),j.get(_).push({nombre:U.nombreCompleto,rol:E.role||void 0}))}}const H=Array.from(j.entries()).map(([U,E])=>({numero:U,integrantes:E})).sort((U,E)=>U.numero-E.numero);try{await fge(i.id,{grupos:H}),alert("Grupos guardados con éxito.")}catch(U){console.error(U),alert("No se pudieron guardar los grupos.")}},k=()=>{if(p<2){alert("Debe haber al menos 2 grupos.");return}const j=[...b].sort(()=>Math.random()-.5),H={};j.forEach((U,E)=>{var _;H[U.nombreCompleto]={groupNumber:String(E%p+1),role:((_=f[U.nombreCompleto])==null?void 0:_.role)||""}}),m(H)},D=(j,H,U)=>{m(E=>({...E,[j]:{...E[j]||{groupNumber:"",role:""},[H]:U}}))},L=ne.useMemo(()=>{const j=new Map;return Object.entries(f).forEach(([H,U])=>{U.groupNumber&&(j.has(U.groupNumber)||j.set(U.groupNumber,[]),j.get(U.groupNumber).push({nombre:H,rol:U.role}))}),Array.from(j.entries()).sort((H,U)=>parseInt(H[0])-parseInt(U[0]))},[f]);return i?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("button",{onClick:()=>o(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a Actividades"}),l.jsx("h2",{className:"text-2xl font-bold",children:i.nombreActividad})]}),l.jsx("button",{onClick:T,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"md:col-span-1 space-y-4",children:[l.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignación"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"number",value:p,onChange:j=>g(parseInt(j.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),l.jsx("button",{onClick:k,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),l.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Nómina del Curso"}),l.jsx("table",{className:"w-full text-sm",children:l.jsx("tbody",{children:b.map(j=>{var H;return l.jsxs("tr",{children:[l.jsx("td",{className:"py-1 pr-2",children:j.nombreCompleto}),l.jsx("td",{className:"py-1",children:l.jsx("input",{type:"number",value:((H=f[j.nombreCompleto])==null?void 0:H.groupNumber)||"",onChange:U=>D(j.nombreCompleto,"groupNumber",U.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N°"})})]},j.id)})})})]})]}),l.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:L.map(([j,H])=>l.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[l.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",j]}),l.jsx("ul",{className:"space-y-2",children:H.map(U=>l.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[l.jsx("span",{className:"flex-1 truncate",children:U.nombre}),l.jsxs("select",{value:U.rol||"",onChange:E=>D(U.nombre,"role",E.target.value),className:"p-1 border rounded text-xs w-32",children:[l.jsx("option",{value:"",children:"-- Asignar Rol --"}),MR.map(E=>l.jsx("option",{value:E,children:E},E))]})]},U.nombre))})]},j))})]})]})]}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),l.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[t," / ",e]})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),l.jsxs("form",{onSubmit:y,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[l.jsx("input",{value:c.nombre,onChange:j=>u({...c,nombre:j.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),l.jsx("input",{type:"date",value:c.fecha,onChange:j=>u({...c,fecha:j.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),a.map(j=>l.jsxs("button",{onClick:()=>o(j),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[l.jsx("p",{className:"font-bold",children:j.nombreActividad}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",j.fechaPresentacion]})]},j.id))]})]})},vge=({currentUser:t})=>{const[e,r]=ne.useState("calificaciones"),[n,a]=ne.useState(null),[s,i]=ne.useState(null),[o,c]=ne.useState([]),[u,f]=ne.useState(!0);ne.useEffect(()=>{f(!0);const y=hge(T=>{c(T),f(!1)});return()=>y()},[]);const m=ne.useMemo(()=>t.cursos||[],[t.cursos]),p=ne.useMemo(()=>t.asignaturas||[],[t.asignaturas]),g=({tab:y,label:T})=>l.jsx("button",{onClick:()=>r(y),className:`${e===y?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:T}),b=()=>{if(u)return l.jsx("div",{className:"text-center py-10",children:"Cargando datos de usuario..."});if(!n)return l.jsx(mge,{cursos:m,onSelect:a});if(!s)return l.jsx(pge,{curso:n,asignaturas:p,onSelect:i,onBack:()=>a(null)});if(e==="calificaciones")return l.jsx(gge,{curso:n,asignatura:s,allUsers:o,onBack:()=>i(null)});if(e==="grupos")return l.jsx(xge,{curso:n,asignatura:s,allUsers:o,onBack:()=>i(null)})};return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx(g,{tab:"calificaciones",label:"Calificaciones"}),l.jsx(g,{tab:"grupos",label:"Trabajos Grupales"})]})}),l.jsx("div",{className:"mt-6",children:b()})]})},cx="acompanamientos",wge=async()=>{try{const t=er(Nt(Gr,cx),fn("fecha","desc"));return(await ps(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener acompañamientos:",t),new Error("No se pudieron cargar los registros de acompañamiento")}},yge=async t=>{try{return{id:(await Sa(Nt(Gr,cx),{...t,fecha:t.fecha||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear acompañamiento:",e),new Error("No se pudo crear el registro de acompañamiento")}},bge=async(t,e)=>{try{const r=_r(Gr,cx,t);await $g(r,{...e,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar acompañamiento:",r,"ID:",t),new Error("No se pudo actualizar el registro de acompañamiento")}},Cge=async t=>{try{const e=_r(Gr,cx,t);await Oi(e)}catch(e){throw console.error("Error al eliminar acompañamiento:",e,"ID:",t),new Error("No se pudo eliminar el registro de acompañamiento")}},Ege=async t=>{try{const e=er(Nt(Gr,cx),Tn("docente","==",t),fn("fecha","desc"));return(await ps(e)).docs.map(n=>({id:n.id,...n.data()}))}catch(e){throw console.error("Error al obtener acompañamientos por docente:",e),new Error("No se pudieron cargar los acompañamientos del docente")}},_ge=async()=>{try{const t=_r(Gr,"configuracion","rubricaAcompanamiento"),e=await Wg(t);return e.exists()?e.data().rubrica:null}catch(t){return console.error("Error al obtener rúbrica personalizada:",t),null}},Sge=()=>{const[t,e]=ne.useState([]),[r,n]=ne.useState([]),[a,s]=ne.useState(!1),[i,o]=ne.useState(!1),[c,u]=ne.useState(null),[f,m]=ne.useState("list"),[p,g]=ne.useState(null),[b,y]=ne.useState(!1),[T,k]=ne.useState(!1),D=jp,L=ne.useMemo(()=>({fecha:new Date().toISOString(),docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[j,H]=ne.useState(L),U=ne.useCallback(async()=>{s(!0);try{const q=await wge();e(q),u(null)}catch(q){console.error("Error al cargar acompañamientos desde Firestore",q),u("No se pudieron cargar los registros de acompañamiento desde la nube.")}finally{s(!1)}},[]),E=ne.useCallback(async()=>{o(!0);try{const J=(await vM()).filter(W=>W.profile===Pt.PROFESORADO).map(W=>W.nombreCompleto).sort();n(J)}catch(q){console.error("Error al cargar profesores desde Firestore",q),u("No se pudieron cargar la lista de profesores desde la nube.")}finally{o(!1)}},[]);ne.useEffect(()=>{U(),E()},[U,E]);const _=q=>{H(J=>({...J,[q.target.name]:q.target.value}))},B=(q,J)=>{H(W=>({...W,rubricaResultados:{...W.rubricaResultados,[q]:J}}))},Q=async()=>{y(!0);const{rubricaResultados:q,observacionesGenerales:J}=j;let W=`Resultados de la Rúbrica:
`;D.forEach(P=>{P.criteria.forEach(K=>{const Y=q[K.name];if(Y&&K.levels[Y-1]){const ee=K.levels[Y-1];W+=`- Criterio: "${K.name}" | Nivel: ${Y} (${ee})
`}})}),W+=`
Observaciones Generales del Evaluador:
${J||"No se proveyeron observaciones adicionales."}`;const de=`
            Eres un asesor pedagógico experto. Tu tarea es generar una retroalimentación formal, técnica y constructiva para un docente, basada en una observación de clase.
            La retroalimentación debe ser estructurada y usar un lenguaje pedagógico preciso.

            A continuación, los datos de la observación:
            ${W}

            Genera una retroalimentación que incluya obligatoriamente los siguientes puntos en formato Markdown:
            - ## Fortalezas Observadas: Destaca 2 o 3 puntos positivos clave, conectándolos con los criterios de la rúbrica.
            - ## Áreas de Mejora: Identifica 2 o 3 aspectos donde el docente puede mejorar, explicando el porqué con base en la evidencia.
            - ## Sugerencias y Pasos a Seguir: Ofrece recomendaciones concretas, prácticas y accionables que el docente pueda implementar.
        `;try{Pl("Acompañamiento - Consolidar Feedback");const Y=(await new mg({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).models.generateContent({model:"gemini-2.5-flash",contents:de})).text.replace(/(\*\*|\*)/g,"");H(ee=>({...ee,retroalimentacionConsolidada:Y}))}catch(P){console.error("Error al generar retroalimentación con IA",P),alert("No se pudo generar la retroalimentación. Inténtelo de nuevo.")}finally{y(!1)}},R=async()=>{const q=p;if(!q)return;k(!0);const J=t.find(ye=>ye.id===q);if(!J){k(!1);return}const W=new ir({orientation:"p",unit:"mm",format:"a4"}),de=20,P=W.internal.pageSize.getWidth(),K=W.internal.pageSize.getHeight(),Y=P-de*2;let ee=de;const Ae=ye=>{ye.setFont("helvetica","bold"),ye.setFontSize(10),ye.setTextColor(100),ye.text("LICEO INDUSTRIAL DE RECOLETA",P/2,15,{align:"center"})};Ae(W),W.setFont("helvetica","bold"),W.setFontSize(18),W.setTextColor(40),W.text("Informe de Acompañamiento Docente",P/2,ee+10,{align:"center"}),ee+=25,Yo(W,{startY:ee,body:[[{content:"Docente:",styles:{fontStyle:"bold"}},J.docente],[{content:"Fecha:",styles:{fontStyle:"bold"}},new Date(J.fecha).toLocaleDateString("es-CL")],[{content:"Asignatura:",styles:{fontStyle:"bold"}},J.asignatura],[{content:"Curso:",styles:{fontStyle:"bold"}},J.curso]],theme:"plain",styles:{fontSize:11,cellPadding:2,textColor:[50,50,50]},columnStyles:{0:{cellWidth:35}}}),ee=W.lastAutoTable.finalY+10;const Se=[],ge=["Débil","Incipiente","Satisfactorio","Avanzado"];D.forEach(ye=>{Se.push([{content:ye.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40],halign:"left"}}]),ye.criteria.forEach(ue=>{const se=J.rubricaResultados[ue.name],Pe=se?ge[se-1]:"No evaluado";Se.push([ue.name,Pe])})}),Yo(W,{startY:ee,head:[["Indicador","Nivel de Logro"]],body:Se,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},didDrawPage:ye=>{ye.pageNumber>1&&Ae(W)}}),ee=W.lastAutoTable.finalY+15;const pe=(ye,ue)=>{ee>K-de-10&&(W.addPage(),Ae(W),ee=de),W.setFont("helvetica",ue.style),W.setFontSize(ue.size);const se=W.splitTextToSize(ye,Y),Pe=se.length*(ue.size*.352778*1.15);ee+Pe>K-de&&(W.addPage(),Ae(W),ee=de),W.text(se,de,ee,{align:"left"}),ee+=Pe+(ue.isTitle?5:8)};J.retroalimentacionConsolidada?J.retroalimentacionConsolidada.split(/(?=## )/).forEach(ue=>{if(ue.trim()){const se=ue.trim().split(`
`),Pe=se[0].replace("## ",""),at=se.slice(1).join(`
`).trim();pe(Pe,{size:14,style:"bold",isTitle:!0}),pe(at,{size:11,style:"normal",isTitle:!1})}}):(pe("Retroalimentación Consolidada",{size:14,style:"bold",isTitle:!0}),pe("No se ha generado retroalimentación.",{size:11,style:"normal",isTitle:!1})),W.save(`Acompanamiento_${J.docente.replace(/\s/g,"_")}_${new Date(J.fecha).toLocaleDateString("es-CL")}.pdf`),k(!1)},F=async q=>{if(q.preventDefault(),!j.docente||!j.curso||!j.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}try{let J=p;if(p)await bge(p,j);else{const W=await yge(j);g(W.id),H({...j}),J=W.id}await U(),J&&alert("¡Guardado correctamente!")}catch(J){console.error("Error al guardar acompañamiento:",J),u("Error al guardar el registro en la nube.")}},V=()=>{H(L),g(null),m("form"),u(null)},X=q=>{H(q),g(q.id),m("form"),u(null)},oe=async q=>{if(window.confirm("¿Está seguro de que desea eliminar este registro de acompañamiento?"))try{await Cge(q),await U()}catch(J){console.error("Error al eliminar acompañamiento:",J),u("No se pudo eliminar el registro en la nube.")}},te=()=>l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Acompañamiento"}),l.jsx("button",{onClick:V,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Crear Nuevo"})]}),a&&l.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando registros desde la nube..."}),c&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:c}),!a&&t.length===0&&l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay registros de acompañamiento en la nube."}),l.jsx("div",{className:"space-y-4",children:!a&&t.length>0&&t.map(q=>l.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:q.docente}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[q.curso," - ",q.asignatura]}),l.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(q.fecha).toLocaleDateString("es-CL")]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>X(q),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver y Editar"}),l.jsx("button",{onClick:()=>oe(q.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},q.id))})]}),ae=()=>l.jsx("div",{className:"animate-fade-in",children:l.jsxs("form",{onSubmit:F,className:"space-y-8",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:p?"Editando Acompañamiento":"Nuevo Acompañamiento Docente"}),l.jsx("button",{type:"button",onClick:()=>m("list"),className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold",children:"← Volver al listado"})]}),c&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:c}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),l.jsxs("select",{name:"docente",value:j.docente,onChange:_,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:i,children:[l.jsx("option",{value:"",children:i?"Cargando...":"Seleccione"}),r.map(q=>l.jsx("option",{value:q,children:q},q))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),l.jsxs("select",{name:"curso",value:j.curso,onChange:_,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione"}),Za.map(q=>l.jsx("option",{value:q,children:q},q))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsxs("select",{name:"asignatura",value:j.asignatura,onChange:_,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione"}),Xo.map(q=>l.jsx("option",{value:q,children:q},q))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),l.jsx("input",{type:"text",name:"bloques",value:j.bloques,onChange:_,placeholder:"Ej: 3-4",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Débil (1)"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:D.map(q=>l.jsx(a_.Fragment,{children:q.criteria.map((J,W)=>l.jsxs("tr",{children:[W===0&&l.jsx("td",{rowSpan:q.criteria.length,className:"px-3 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600",children:q.domain}),l.jsx("td",{className:"px-3 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:J.name}),J.levels.map((de,P)=>{const K=P+1,Y=j.rubricaResultados[J.name]===K;return l.jsx("td",{onClick:()=>B(J.name,K),className:`px-3 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${Y?"bg-amber-100 dark:bg-amber-900/30":"hover:bg-amber-50 dark:hover:bg-slate-700"}`,children:de},K)})]},J.name))},q.domain))})]})}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones Generales"}),l.jsx("textarea",{name:"observacionesGenerales",value:j.observacionesGenerales,onChange:_,rows:5,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("label",{htmlFor:"retroalimentacionConsolidada",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Retroalimentación Consolidada"}),l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("textarea",{name:"retroalimentacionConsolidada",value:j.retroalimentacionConsolidada,onChange:_,rows:8,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Haga clic en 'Consolidar' para generar la retroalimentación aquí..."}),l.jsx("button",{type:"button",onClick:Q,disabled:b,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:bg-slate-400",children:b?"...":"Consolidar"})]})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t dark:border-slate-700",children:[l.jsx("button",{type:"button",onClick:R,disabled:!p||T,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400",children:T?"...":"Exportar PDF"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Acompañamiento"})]})]})});return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Acompañamiento Docente"}),l.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:f==="list"?te():ae()})]})},fS="mensajes_internos",Tge="usuarios",TM="mensajes_read_status",BM=t=>{var r,n;const e=t.data();return{id:t.id,...e,fecha:((n=(r=e.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fecha}},Bge=(t,e)=>{const r=er(Nt(Tt,fS),Tn("participants","array-contains",t),fn("fecha","desc"));return br(r,a=>{const s=a.docs.map(i=>BM(i));e(s)},a=>{console.error("Error al suscribirse a los mensajes:",a),e([])})},Nge=async t=>{try{const e={...t,participants:[t.de,t.para],fecha:Ar.fromDate(new Date)};await Sa(Nt(Tt,fS),e)}catch(e){throw console.error("Error al enviar el mensaje:",e),new Error("No se pudo enviar el mensaje.")}},kge=async t=>{try{const e=_r(Tt,fS,t);await Oi(e)}catch(e){throw console.error("Error al eliminar el mensaje:",e),new Error("No se pudo eliminar el mensaje.")}},Ige=(t,e)=>{const r=_r(Tt,TM,t);return br(r,a=>{a.exists()?e(a.data()):e({announcements:[],messages:[]})},a=>{console.error("Error al suscribirse al estado de lectura:",a),e({announcements:[],messages:[]})})},Fge=async(t,e)=>{try{const r=_r(Tt,TM,t);await Zi(r,{messages:xz(e)},{merge:!0})}catch(r){throw console.error("Error al marcar mensaje como leído:",r),new Error("No se pudo actualizar el estado de lectura.")}},Dge=t=>{const e=er(Nt(Tt,Tge),fn("nombreCompleto","asc"));return br(e,n=>{const a=n.docs.map(s=>BM(s));t(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),t([])})},Rge=({currentUser:t,refreshUnreadCount:e})=>{const[r,n]=ne.useState("inbox"),[a,s]=ne.useState([]),[i,o]=ne.useState([]),[c,u]=ne.useState(null),[f,m]=ne.useState({announcements:[],messages:[]}),[p,g]=ne.useState(!0),b={para:"",asunto:"",cuerpo:""},[y,T]=ne.useState(b);ne.useEffect(()=>{if(!t.id||!t.email){g(!1);return}g(!0);const E=Bge(t.email,Q=>{s(Q),g(!1)}),_=Dge(o),B=Ige(t.id,Q=>{m(Q),e()});return()=>{E(),_(),B()}},[t.id,t.email,e]);const k=E=>{u(E),r==="inbox"&&!f.messages.includes(E.id)&&Fge(t.id,E.id).catch(_=>{console.error("Failed to mark message as read:",_)})},D=async E=>{if(E.preventDefault(),!y.para||!y.asunto.trim()||!y.cuerpo.trim()){alert("Destinatario, asunto y cuerpo son obligatorios.");return}const _={de:t.email,para:y.para,asunto:y.asunto,cuerpo:y.cuerpo};try{await Nge(_),T(b),n("sent")}catch(B){console.error("Error sending message:",B),alert("No se pudo enviar el mensaje. Inténtelo de nuevo.")}},L=async E=>{if(window.confirm("¿Está seguro de que desea eliminar este mensaje? Esta acción es irreversible."))try{await kge(E),u(null)}catch(_){console.error("Error deleting message:",_),alert("No se pudo eliminar el mensaje.")}},j=E=>{T({para:E.de,asunto:`Re: ${E.asunto}`,cuerpo:`

--- Mensaje Original ---
De: ${E.de}
Fecha: ${new Date(E.fecha).toLocaleString("es-CL")}

${E.cuerpo}`}),n("compose")},H=ne.useMemo(()=>a.filter(E=>E.para===t.email),[a,t.email]),U=ne.useMemo(()=>a.filter(E=>E.de===t.email),[a,t.email]);return p?l.jsx("div",{className:"flex items-center justify-center h-full",children:"Cargando mensajería..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-md flex overflow-hidden min-h-[75vh]",children:[l.jsxs("aside",{className:"w-1/4 md:w-1/5 border-r bg-slate-50 dark:bg-slate-800 flex flex-col",children:[l.jsx("div",{className:"p-4 border-b dark:border-slate-700",children:l.jsx("button",{onClick:()=>{n("compose"),u(null),T(b)},className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Redactar"})}),l.jsxs("nav",{className:"p-2 space-y-1",children:[l.jsx("button",{onClick:()=>{n("inbox"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="inbox"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Recibidos"}),l.jsx("button",{onClick:()=>{n("sent"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="sent"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Enviados"})]})]}),r!=="compose"&&l.jsx("div",{className:"w-1/3 md:w-2/5 border-r dark:border-slate-700 overflow-y-auto",children:(r==="inbox"?H:U).map(E=>{const _=r==="inbox"&&!f.messages.includes(E.id);return l.jsxs("div",{onClick:()=>k(E),className:`p-4 border-b dark:border-slate-700 cursor-pointer ${(c==null?void 0:c.id)===E.id?"bg-amber-50 dark:bg-amber-900/20":"hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsx("p",{className:`font-bold truncate ${_?"text-slate-800 dark:text-slate-200":"text-slate-600 dark:text-slate-400"}`,children:r==="inbox"?E.de:`Para: ${E.para}`}),_&&l.jsx("span",{className:"h-2.5 w-2.5 bg-blue-500 rounded-full flex-shrink-0 ml-2 mt-1"})]}),l.jsx("p",{className:`truncate text-sm ${_?"text-slate-700 dark:text-slate-300 font-semibold":"text-slate-500 dark:text-slate-400"}`,children:E.asunto}),l.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:new Date(E.fecha).toLocaleString("es-CL")})]},E.id)})}),l.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:r==="compose"?l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Nuevo Mensaje"}),l.jsxs("form",{onSubmit:D,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"para",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Para:"}),l.jsxs("select",{id:"para",value:y.para,onChange:E=>T({...y,para:E.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione un destinatario..."}),i.filter(E=>E.email!==t.email).map(E=>l.jsxs("option",{value:E.email,children:[E.nombreCompleto," (",E.email,")"]},E.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asunto:"}),l.jsx("input",{type:"text",id:"asunto",value:y.asunto,onChange:E=>T({...y,asunto:E.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"cuerpo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cuerpo del Mensaje:"}),l.jsx("textarea",{id:"cuerpo",value:y.cuerpo,onChange:E=>T({...y,cuerpo:E.target.value}),required:!0,rows:12,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx("div",{className:"text-right",children:l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Enviar Mensaje"})})]})]}):c?l.jsxs("div",{children:[l.jsxs("div",{className:"border-b dark:border-slate-700 pb-4 mb-4",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:c.asunto}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[l.jsx("strong",{children:"De:"})," ",c.de," ",l.jsx("br",{}),l.jsx("strong",{children:"Para:"})," ",c.para," ",l.jsx("br",{}),l.jsx("strong",{children:"Fecha:"})," ",new Date(c.fecha).toLocaleString("es-CL")]})]}),l.jsx("div",{className:"whitespace-pre-wrap text-slate-700 dark:text-slate-300",children:c.cuerpo}),l.jsxs("div",{className:"mt-8 pt-4 border-t dark:border-slate-700 flex gap-2",children:[r==="inbox"&&l.jsx("button",{onClick:()=>j(c),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Responder"}),l.jsx("button",{onClick:()=>L(c.id),className:"bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-200 dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900/60",children:"Eliminar"})]})]}):l.jsx("div",{className:"flex items-center justify-center h-full text-center text-slate-500 dark:text-slate-400",children:l.jsx("p",{children:"Seleccione un mensaje para leerlo."})})})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var FE=function(t,e){return FE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},FE(t,e)};function Ec(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");FE(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var DE=function(){return DE=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},DE.apply(this,arguments)};function qi(t,e,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function o(f){try{u(n.next(f))}catch(m){i(m)}}function c(f){try{u(n.throw(f))}catch(m){i(m)}}function u(f){f.done?s(f.value):a(f.value).then(o,c)}u((n=n.apply(t,[])).next())})}function Si(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(u){return function(f){return c([u,f])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(f){u=[6,f],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function U1(t,e,r){if(arguments.length===2)for(var n=0,a=e.length,s;n<a;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||e)}var wu=function(){function t(e,r,n,a){this.left=e,this.top=r,this.width=n,this.height=a}return t.prototype.add=function(e,r,n,a){return new t(this.left+e,this.top+r,this.width+n,this.height+a)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),kw=function(t,e){return wu.fromClientRect(t,e.getBoundingClientRect())},Lge=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),a=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new wu(0,0,n,a)},Iw=function(t){for(var e=[],r=0,n=t.length;r<n;){var a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((a&1023)<<10)+(s&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},Wa=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=t[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},Z3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Uge=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var M1=0;M1<Z3.length;M1++)Uge[Z3.charCodeAt(M1)]=M1;var eF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Sp=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var P1=0;P1<eF.length;P1++)Sp[eF.charCodeAt(P1)]=P1;var Mge=function(t){var e=t.length*.75,r=t.length,n,a=0,s,i,o,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),f=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=Sp[t.charCodeAt(n)],i=Sp[t.charCodeAt(n+1)],o=Sp[t.charCodeAt(n+2)],c=Sp[t.charCodeAt(n+3)],f[a++]=s<<2|i>>4,f[a++]=(i&15)<<4|o>>2,f[a++]=(o&3)<<6|c&63;return u},Pge=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},jge=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Kf=5,hS=11,Yb=2,Oge=hS-Kf,NM=65536>>Kf,Qge=1<<Kf,Xb=Qge-1,Hge=1024>>Kf,Vge=NM+Hge,Gge=Vge,zge=32,qge=Gge+zge,Kge=65536>>hS,Wge=1<<Oge,$ge=Wge-1,tF=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},Jge=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},Yge=function(t,e){var r=Mge(t),n=Array.isArray(r)?jge(r):new Uint32Array(r),a=Array.isArray(r)?Pge(r):new Uint16Array(r),s=24,i=tF(a,s/2,n[4]/2),o=n[5]===2?tF(a,(s+n[4])/2):Jge(n,Math.ceil((s+n[4])/4));return new Xge(n[0],n[1],n[2],n[3],i,o)},Xge=function(){function t(e,r,n,a,s,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Kf],r=(r<<Yb)+(e&Xb),this.data[r];if(e<=65535)return r=this.index[NM+(e-55296>>Kf)],r=(r<<Yb)+(e&Xb),this.data[r];if(e<this.highStart)return r=qge-Kge+(e>>hS),r=this.index[r],r+=e>>Kf&$ge,r=this.index[r],r=(r<<Yb)+(e&Xb),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),rF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Zge=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var j1=0;j1<rF.length;j1++)Zge[rF.charCodeAt(j1)]=j1;var exe="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",nF=50,txe=1,kM=2,IM=3,rxe=4,nxe=5,aF=7,FM=8,sF=9,_d=10,RE=11,iF=12,LE=13,axe=14,Tp=15,UE=16,O1=17,up=18,sxe=19,oF=20,ME=21,dp=22,Zb=23,n0=24,Go=25,Bp=26,Np=27,a0=28,ixe=29,Lf=30,oxe=31,Q1=32,H1=33,PE=34,jE=35,OE=36,Fg=37,QE=38,Ev=39,_v=40,eC=41,DM=42,lxe=43,cxe=[9001,65288],RM="!",en="×",V1="÷",HE=Yge(exe),ru=[Lf,OE],VE=[txe,kM,IM,nxe],LM=[_d,FM],lF=[Np,Bp],Axe=VE.concat(LM),cF=[QE,Ev,_v,PE,jE],uxe=[Tp,LE],dxe=function(t,e){e===void 0&&(e="strict");var r=[],n=[],a=[];return t.forEach(function(s,i){var o=HE.get(s);if(o>nF?(a.push(!0),o-=nF):a.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(i),r.push(UE);if(o===rxe||o===RE){if(i===0)return n.push(i),r.push(Lf);var c=r[i-1];return Axe.indexOf(c)===-1?(n.push(n[i-1]),r.push(c)):(n.push(i),r.push(Lf))}if(n.push(i),o===oxe)return r.push(e==="strict"?ME:Fg);if(o===DM||o===ixe)return r.push(Lf);if(o===lxe)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(Fg):r.push(Lf);r.push(o)}),[n,r,a]},tC=function(t,e,r,n){var a=n[r];if(Array.isArray(t)?t.indexOf(a)!==-1:t===a)for(var s=r;s<=n.length;){s++;var i=n[s];if(i===e)return!0;if(i!==_d)break}if(a===_d)for(var s=r;s>0;){s--;var o=n[s];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var c=r;c<=n.length;){c++;var i=n[c];if(i===e)return!0;if(i!==_d)break}if(o!==_d)break}return!1},AF=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===_d)r--;else return n}return 0},fxe=function(t,e,r,n,a){if(r[n]===0)return en;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return en;var i=s-1,o=s+1,c=e[s],u=i>=0?e[i]:0,f=e[o];if(c===kM&&f===IM)return en;if(VE.indexOf(c)!==-1)return RM;if(VE.indexOf(f)!==-1||LM.indexOf(f)!==-1)return en;if(AF(s,e)===FM)return V1;if(HE.get(t[s])===RE||(c===Q1||c===H1)&&HE.get(t[o])===RE||c===aF||f===aF||c===sF||[_d,LE,Tp].indexOf(c)===-1&&f===sF||[O1,up,sxe,n0,a0].indexOf(f)!==-1||AF(s,e)===dp||tC(Zb,dp,s,e)||tC([O1,up],ME,s,e)||tC(iF,iF,s,e))return en;if(c===_d)return V1;if(c===Zb||f===Zb)return en;if(f===UE||c===UE)return V1;if([LE,Tp,ME].indexOf(f)!==-1||c===axe||u===OE&&uxe.indexOf(c)!==-1||c===a0&&f===OE||f===oF||ru.indexOf(f)!==-1&&c===Go||ru.indexOf(c)!==-1&&f===Go||c===Np&&[Fg,Q1,H1].indexOf(f)!==-1||[Fg,Q1,H1].indexOf(c)!==-1&&f===Bp||ru.indexOf(c)!==-1&&lF.indexOf(f)!==-1||lF.indexOf(c)!==-1&&ru.indexOf(f)!==-1||[Np,Bp].indexOf(c)!==-1&&(f===Go||[dp,Tp].indexOf(f)!==-1&&e[o+1]===Go)||[dp,Tp].indexOf(c)!==-1&&f===Go||c===Go&&[Go,a0,n0].indexOf(f)!==-1)return en;if([Go,a0,n0,O1,up].indexOf(f)!==-1)for(var m=s;m>=0;){var p=e[m];if(p===Go)return en;if([a0,n0].indexOf(p)!==-1)m--;else break}if([Np,Bp].indexOf(f)!==-1)for(var m=[O1,up].indexOf(c)!==-1?i:s;m>=0;){var p=e[m];if(p===Go)return en;if([a0,n0].indexOf(p)!==-1)m--;else break}if(QE===c&&[QE,Ev,PE,jE].indexOf(f)!==-1||[Ev,PE].indexOf(c)!==-1&&[Ev,_v].indexOf(f)!==-1||[_v,jE].indexOf(c)!==-1&&f===_v||cF.indexOf(c)!==-1&&[oF,Bp].indexOf(f)!==-1||cF.indexOf(f)!==-1&&c===Np||ru.indexOf(c)!==-1&&ru.indexOf(f)!==-1||c===n0&&ru.indexOf(f)!==-1||ru.concat(Go).indexOf(c)!==-1&&f===dp&&cxe.indexOf(t[o])===-1||ru.concat(Go).indexOf(f)!==-1&&c===up)return en;if(c===eC&&f===eC){for(var g=r[s],b=1;g>0&&(g--,e[g]===eC);)b++;if(b%2!==0)return en}return c===Q1&&f===H1?en:V1},hxe=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=dxe(t,e.lineBreak),n=r[0],a=r[1],s=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(a=a.map(function(o){return[Go,Lf,DM].indexOf(o)!==-1?Fg:o}));var i=e.wordBreak==="keep-all"?s.map(function(o,c){return o&&t[c]>=19968&&t[c]<=40959}):void 0;return[n,a,i]},mxe=function(){function t(e,r,n,a){this.codePoints=e,this.required=r===RM,this.start=n,this.end=a}return t.prototype.slice=function(){return Wa.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),pxe=function(t,e){var r=Iw(t),n=hxe(r,e),a=n[0],s=n[1],i=n[2],o=r.length,c=0,u=0;return{next:function(){if(u>=o)return{done:!0,value:null};for(var f=en;u<o&&(f=fxe(r,s,a,++u,i))===en;);if(f!==en||u===o){var m=new mxe(r,f,c,u);return c=u,{value:m,done:!1}}return{done:!0,value:null}}}},gxe=1,xxe=2,Ax=4,uF=8,y2=10,dF=47,Xp=92,vxe=9,wxe=32,G1=34,fp=61,yxe=35,bxe=36,Cxe=37,z1=39,q1=40,hp=41,Exe=95,vo=45,_xe=33,Sxe=60,Txe=62,Bxe=64,Nxe=91,kxe=93,Ixe=61,Fxe=123,K1=63,Dxe=125,fF=124,Rxe=126,Lxe=128,hF=65533,rC=42,Pf=43,Uxe=44,Mxe=58,Pxe=59,Dg=46,jxe=0,Oxe=8,Qxe=11,Hxe=14,Vxe=31,Gxe=127,nA=-1,UM=48,MM=97,PM=101,zxe=102,qxe=117,Kxe=122,jM=65,OM=69,QM=70,Wxe=85,$xe=90,ki=function(t){return t>=UM&&t<=57},Jxe=function(t){return t>=55296&&t<=57343},s0=function(t){return ki(t)||t>=jM&&t<=QM||t>=MM&&t<=zxe},Yxe=function(t){return t>=MM&&t<=Kxe},Xxe=function(t){return t>=jM&&t<=$xe},Zxe=function(t){return Yxe(t)||Xxe(t)},e1e=function(t){return t>=Lxe},W1=function(t){return t===y2||t===vxe||t===wxe},b2=function(t){return Zxe(t)||e1e(t)||t===Exe},mF=function(t){return b2(t)||ki(t)||t===vo},t1e=function(t){return t>=jxe&&t<=Oxe||t===Qxe||t>=Hxe&&t<=Vxe||t===Gxe},md=function(t,e){return t!==Xp?!1:e!==y2},$1=function(t,e,r){return t===vo?b2(e)||md(e,r):b2(t)?!0:!!(t===Xp&&md(t,e))},nC=function(t,e,r){return t===Pf||t===vo?ki(e)?!0:e===Dg&&ki(r):ki(t===Dg?e:t)},r1e=function(t){var e=0,r=1;(t[e]===Pf||t[e]===vo)&&(t[e]===vo&&(r=-1),e++);for(var n=[];ki(t[e]);)n.push(t[e++]);var a=n.length?parseInt(Wa.apply(void 0,n),10):0;t[e]===Dg&&e++;for(var s=[];ki(t[e]);)s.push(t[e++]);var i=s.length,o=i?parseInt(Wa.apply(void 0,s),10):0;(t[e]===OM||t[e]===PM)&&e++;var c=1;(t[e]===Pf||t[e]===vo)&&(t[e]===vo&&(c=-1),e++);for(var u=[];ki(t[e]);)u.push(t[e++]);var f=u.length?parseInt(Wa.apply(void 0,u),10):0;return r*(a+o*Math.pow(10,-i))*Math.pow(10,c*f)},n1e={type:2},a1e={type:3},s1e={type:4},i1e={type:13},o1e={type:8},l1e={type:21},c1e={type:9},A1e={type:10},u1e={type:11},d1e={type:12},f1e={type:14},J1={type:23},h1e={type:1},m1e={type:25},p1e={type:24},g1e={type:26},x1e={type:27},v1e={type:28},w1e={type:29},y1e={type:31},GE={type:32},HM=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(Iw(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==GE;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case G1:return this.consumeStringToken(G1);case yxe:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(mF(r)||md(n,a)){var s=$1(r,n,a)?xxe:gxe,i=this.consumeName();return{type:5,value:i,flags:s}}break;case bxe:if(this.peekCodePoint(0)===fp)return this.consumeCodePoint(),i1e;break;case z1:return this.consumeStringToken(z1);case q1:return n1e;case hp:return a1e;case rC:if(this.peekCodePoint(0)===fp)return this.consumeCodePoint(),f1e;break;case Pf:if(nC(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Uxe:return s1e;case vo:var o=e,c=this.peekCodePoint(0),u=this.peekCodePoint(1);if(nC(o,c,u))return this.reconsumeCodePoint(e),this.consumeNumericToken();if($1(o,c,u))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(c===vo&&u===Txe)return this.consumeCodePoint(),this.consumeCodePoint(),p1e;break;case Dg:if(nC(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case dF:if(this.peekCodePoint(0)===rC)for(this.consumeCodePoint();;){var f=this.consumeCodePoint();if(f===rC&&(f=this.consumeCodePoint(),f===dF))return this.consumeToken();if(f===nA)return this.consumeToken()}break;case Mxe:return g1e;case Pxe:return x1e;case Sxe:if(this.peekCodePoint(0)===_xe&&this.peekCodePoint(1)===vo&&this.peekCodePoint(2)===vo)return this.consumeCodePoint(),this.consumeCodePoint(),m1e;break;case Bxe:var m=this.peekCodePoint(0),p=this.peekCodePoint(1),g=this.peekCodePoint(2);if($1(m,p,g)){var i=this.consumeName();return{type:7,value:i}}break;case Nxe:return v1e;case Xp:if(md(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case kxe:return w1e;case Ixe:if(this.peekCodePoint(0)===fp)return this.consumeCodePoint(),o1e;break;case Fxe:return u1e;case Dxe:return d1e;case qxe:case Wxe:var b=this.peekCodePoint(0),y=this.peekCodePoint(1);return b===Pf&&(s0(y)||y===K1)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case fF:if(this.peekCodePoint(0)===fp)return this.consumeCodePoint(),c1e;if(this.peekCodePoint(0)===fF)return this.consumeCodePoint(),l1e;break;case Rxe:if(this.peekCodePoint(0)===fp)return this.consumeCodePoint(),A1e;break;case nA:return GE}return W1(e)?(this.consumeWhiteSpace(),y1e):ki(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):b2(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Wa(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();s0(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===K1&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(Wa.apply(void 0,e.map(function(c){return c===K1?UM:c})),16),s=parseInt(Wa.apply(void 0,e.map(function(c){return c===K1?QM:c})),16);return{type:30,start:a,end:s}}var i=parseInt(Wa.apply(void 0,e),16);if(this.peekCodePoint(0)===vo&&s0(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];s0(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var s=parseInt(Wa.apply(void 0,o),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===q1?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===q1?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===nA)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===z1||r===G1){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===nA||this.peekCodePoint(0)===hp)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),J1)}for(;;){var a=this.consumeCodePoint();if(a===nA||a===hp)return{type:22,value:Wa.apply(void 0,e)};if(W1(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===nA||this.peekCodePoint(0)===hp?(this.consumeCodePoint(),{type:22,value:Wa.apply(void 0,e)}):(this.consumeBadUrlRemnants(),J1);if(a===G1||a===z1||a===q1||t1e(a))return this.consumeBadUrlRemnants(),J1;if(a===Xp)if(md(a,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),J1;else e.push(a)}},t.prototype.consumeWhiteSpace=function(){for(;W1(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===hp||e===nA)return;md(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var a=Math.min(r,e);n+=Wa.apply(void 0,this._value.splice(0,a)),e-=a}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var a=this._value[n];if(a===nA||a===void 0||a===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===y2)return this._value.splice(0,n),h1e;if(a===Xp){var s=this._value[n+1];s!==nA&&s!==void 0&&(s===y2?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):md(a,s)&&(r+=this.consumeStringSlice(n),r+=Wa(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=Ax,n=this.peekCodePoint(0);for((n===Pf||n===vo)&&e.push(this.consumeCodePoint());ki(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===Dg&&ki(a))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=uF;ki(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===OM||n===PM)&&((a===Pf||a===vo)&&ki(s)||ki(a)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=uF;ki(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[r1e(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if($1(a,s,i)){var o=this.consumeName();return{type:15,number:r,flags:n,unit:o}}return a===Cxe?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(s0(e)){for(var r=Wa(e);s0(this.peekCodePoint(0))&&r.length<6;)r+=Wa(this.consumeCodePoint());W1(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||Jxe(n)||n>1114111?hF:n}return e===nA?hF:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(mF(r))e+=Wa(r);else if(md(r,this.peekCodePoint(0)))e+=Wa(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),VM=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new HM;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||C1e(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?GE:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),ux=function(t){return t.type===15},xm=function(t){return t.type===17},Kn=function(t){return t.type===20},b1e=function(t){return t.type===0},zE=function(t,e){return Kn(t)&&t.value===e},GM=function(t){return t.type!==31},tm=function(t){return t.type!==31&&t.type!==4},EA=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},C1e=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},Yd=function(t){return t.type===17||t.type===15},fs=function(t){return t.type===16||Yd(t)},zM=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},ii={type:17,number:0,flags:Ax},mS={type:16,number:50,flags:Ax},Sd={type:16,number:100,flags:Ax},kp=function(t,e,r){var n=t[0],a=t[1];return[aa(n,e),aa(typeof a<"u"?a:n,r)]},aa=function(t,e){if(t.type===16)return t.number/100*e;if(ux(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},qM="deg",KM="grad",WM="rad",$M="turn",Fw={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case qM:return Math.PI*e.number/180;case KM:return Math.PI/200*e.number;case WM:return e.number;case $M:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},JM=function(t){return t.type===15&&(t.unit===qM||t.unit===KM||t.unit===WM||t.unit===$M)},YM=function(t){var e=t.filter(Kn).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ii,ii];case"to top":case"bottom":return Rl(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ii,Sd];case"to right":case"left":return Rl(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Sd,Sd];case"to bottom":case"top":return Rl(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Sd,ii];case"to left":case"right":return Rl(270)}return 0},Rl=function(t){return Math.PI*t/180},Rd={name:"color",parse:function(t,e){if(e.type===18){var r=E1e[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),a=e.value.substring(1,2),s=e.value.substring(2,3);return Td(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),a=e.value.substring(1,2),s=e.value.substring(2,3),i=e.value.substring(3,4);return Td(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),a=e.value.substring(2,4),s=e.value.substring(4,6);return Td(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),a=e.value.substring(2,4),s=e.value.substring(4,6),i=e.value.substring(6,8);return Td(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(i,16)/255)}}if(e.type===20){var o=fu[e.value.toUpperCase()];if(typeof o<"u")return o}return fu.TRANSPARENT}},Ld=function(t){return(255&t)===0},js=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,a=255&t>>24;return e<255?"rgba("+a+","+n+","+r+","+e/255+")":"rgb("+a+","+n+","+r+")"},Td=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},pF=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},gF=function(t,e){var r=e.filter(tm);if(r.length===3){var n=r.map(pF),a=n[0],s=n[1],i=n[2];return Td(a,s,i,1)}if(r.length===4){var o=r.map(pF),a=o[0],s=o[1],i=o[2],c=o[3];return Td(a,s,i,c)}return 0};function aC(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var xF=function(t,e){var r=e.filter(tm),n=r[0],a=r[1],s=r[2],i=r[3],o=(n.type===17?Rl(n.number):Fw.parse(t,n))/(Math.PI*2),c=fs(a)?a.number/100:0,u=fs(s)?s.number/100:0,f=typeof i<"u"&&fs(i)?aa(i,1):1;if(c===0)return Td(u*255,u*255,u*255,1);var m=u<=.5?u*(c+1):u+c-u*c,p=u*2-m,g=aC(p,m,o+1/3),b=aC(p,m,o),y=aC(p,m,o-1/3);return Td(g*255,b*255,y*255,f)},E1e={hsl:xF,hsla:xF,rgb:gF,rgba:gF},Zp=function(t,e){return Rd.parse(t,VM.create(e).parseComponentValue())},fu={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},_1e={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Kn(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},S1e={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Dw=function(t,e){var r=Rd.parse(t,e[0]),n=e[1];return n&&fs(n)?{color:r,stop:n}:{color:r,stop:null}},vF=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=ii),n.stop===null&&(n.stop=Sd);for(var a=[],s=0,i=0;i<t.length;i++){var o=t[i].stop;if(o!==null){var c=aa(o,e);c>s?a.push(c):a.push(s),s=c}else a.push(null)}for(var u=null,i=0;i<a.length;i++){var f=a[i];if(f===null)u===null&&(u=i);else if(u!==null){for(var m=i-u,p=a[u-1],g=(f-p)/(m+1),b=1;b<=m;b++)a[u+b-1]=g*b;u=null}}return t.map(function(y,T){var k=y.color;return{color:k,stop:Math.max(Math.min(1,a[T]/e),0)}})},T1e=function(t,e,r){var n=e/2,a=r/2,s=aa(t[0],e)-n,i=a-aa(t[1],r);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},B1e=function(t,e,r){var n=typeof t=="number"?t:T1e(t,e,r),a=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),s=e/2,i=r/2,o=a/2,c=Math.sin(n-Math.PI/2)*o,u=Math.cos(n-Math.PI/2)*o;return[a,s-u,s+u,i-c,i+c]},fc=function(t,e){return Math.sqrt(t*t+e*e)},wF=function(t,e,r,n,a){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(i,o){var c=o[0],u=o[1],f=fc(r-c,n-u);return(a?f<i.optimumDistance:f>i.optimumDistance)?{optimumCorner:o,optimumDistance:f}:i},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},N1e=function(t,e,r,n,a){var s=0,i=0;switch(t.size){case 0:t.shape===0?s=i=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-n)),i=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(t.shape===0)s=i=Math.min(fc(e,r),fc(e,r-a),fc(e-n,r),fc(e-n,r-a));else if(t.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(e),Math.abs(e-n)),c=wF(n,a,e,r,!0),u=c[0],f=c[1];s=fc(u-e,(f-r)/o),i=o*s}break;case 1:t.shape===0?s=i=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-n)),i=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(t.shape===0)s=i=Math.max(fc(e,r),fc(e,r-a),fc(e-n,r),fc(e-n,r-a));else if(t.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(e),Math.abs(e-n)),m=wF(n,a,e,r,!1),u=m[0],f=m[1];s=fc(u-e,(f-r)/o),i=o*s}break}return Array.isArray(t.size)&&(s=aa(t.size[0],n),i=t.size.length===2?aa(t.size[1],a):s),[s,i]},k1e=function(t,e){var r=Rl(180),n=[];return EA(e).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&i.value==="to"){r=YM(a);return}else if(JM(i)){r=Fw.parse(t,i);return}}var o=Dw(t,a);n.push(o)}),{angle:r,stops:n,type:1}},Y1=function(t,e){var r=Rl(180),n=[];return EA(e).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=YM(a);return}else if(JM(i)){r=(Fw.parse(t,i)+Rl(270))%Rl(360);return}}var o=Dw(t,a);n.push(o)}),{angle:r,stops:n,type:1}},I1e=function(t,e){var r=Rl(180),n=[],a=1,s=0,i=3,o=[];return EA(e).forEach(function(c,u){var f=c[0];if(u===0){if(Kn(f)&&f.value==="linear"){a=1;return}else if(Kn(f)&&f.value==="radial"){a=2;return}}if(f.type===18){if(f.name==="from"){var m=Rd.parse(t,f.values[0]);n.push({stop:ii,color:m})}else if(f.name==="to"){var m=Rd.parse(t,f.values[0]);n.push({stop:Sd,color:m})}else if(f.name==="color-stop"){var p=f.values.filter(tm);if(p.length===2){var m=Rd.parse(t,p[1]),g=p[0];xm(g)&&n.push({stop:{type:16,number:g.number*100,flags:g.flags},color:m})}}}}),a===1?{angle:(r+Rl(180))%Rl(360),stops:n,type:a}:{size:i,shape:s,stops:n,position:o,type:a}},XM="closest-side",ZM="farthest-side",eP="closest-corner",tP="farthest-corner",rP="circle",nP="ellipse",aP="cover",sP="contain",F1e=function(t,e){var r=0,n=3,a=[],s=[];return EA(e).forEach(function(i,o){var c=!0;if(o===0){var u=!1;c=i.reduce(function(m,p){if(u)if(Kn(p))switch(p.value){case"center":return s.push(mS),m;case"top":case"left":return s.push(ii),m;case"right":case"bottom":return s.push(Sd),m}else(fs(p)||Yd(p))&&s.push(p);else if(Kn(p))switch(p.value){case rP:return r=0,!1;case nP:return r=1,!1;case"at":return u=!0,!1;case XM:return n=0,!1;case aP:case ZM:return n=1,!1;case sP:case eP:return n=2,!1;case tP:return n=3,!1}else if(Yd(p)||fs(p))return Array.isArray(n)||(n=[]),n.push(p),!1;return m},c)}if(c){var f=Dw(t,i);a.push(f)}}),{size:n,shape:r,stops:a,position:s,type:2}},X1=function(t,e){var r=0,n=3,a=[],s=[];return EA(e).forEach(function(i,o){var c=!0;if(o===0?c=i.reduce(function(f,m){if(Kn(m))switch(m.value){case"center":return s.push(mS),!1;case"top":case"left":return s.push(ii),!1;case"right":case"bottom":return s.push(Sd),!1}else if(fs(m)||Yd(m))return s.push(m),!1;return f},c):o===1&&(c=i.reduce(function(f,m){if(Kn(m))switch(m.value){case rP:return r=0,!1;case nP:return r=1,!1;case sP:case XM:return n=0,!1;case ZM:return n=1,!1;case eP:return n=2,!1;case aP:case tP:return n=3,!1}else if(Yd(m)||fs(m))return Array.isArray(n)||(n=[]),n.push(m),!1;return f},c)),c){var u=Dw(t,i);a.push(u)}}),{size:n,shape:r,stops:a,position:s,type:2}},D1e=function(t){return t.type===1},R1e=function(t){return t.type===2},pS={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=iP[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function L1e(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!iP[t.name])}var iP={"linear-gradient":k1e,"-moz-linear-gradient":Y1,"-ms-linear-gradient":Y1,"-o-linear-gradient":Y1,"-webkit-linear-gradient":Y1,"radial-gradient":F1e,"-moz-radial-gradient":X1,"-ms-radial-gradient":X1,"-o-radial-gradient":X1,"-webkit-radial-gradient":X1,"-webkit-gradient":I1e},U1e={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return tm(n)&&L1e(n)}).map(function(n){return pS.parse(t,n)})}},M1e={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Kn(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},P1e={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return EA(e).map(function(r){return r.filter(fs)}).map(zM)}},j1e={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return EA(e).map(function(r){return r.filter(Kn).map(function(n){return n.value}).join(" ")}).map(O1e)}},O1e=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Q0;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(Q0||(Q0={}));var Q1e={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return EA(e).map(function(r){return r.filter(H1e)})}},H1e=function(t){return Kn(t)||fs(t)},Rw=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},V1e=Rw("top"),G1e=Rw("right"),z1e=Rw("bottom"),q1e=Rw("left"),Lw=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return zM(r.filter(fs))}}},K1e=Lw("top-left"),W1e=Lw("top-right"),$1e=Lw("bottom-right"),J1e=Lw("bottom-left"),Uw=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Y1e=Uw("top"),X1e=Uw("right"),Z1e=Uw("bottom"),eve=Uw("left"),Mw=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return ux(r)?r.number:0}}},tve=Mw("top"),rve=Mw("right"),nve=Mw("bottom"),ave=Mw("left"),sve={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},ive={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},ove={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Kn).reduce(function(r,n){return r|lve(n.value)},0)}},lve=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},cve={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Ave={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},C2;(function(t){t.NORMAL="normal",t.STRICT="strict"})(C2||(C2={}));var uve={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return C2.STRICT;case"normal":default:return C2.NORMAL}}},dve={name:"line-height",initialValue:"normal",prefix:!1,type:4},yF=function(t,e){return Kn(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:fs(t)?aa(t,e):e},fve={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:pS.parse(t,e)}},hve={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},qE={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Pw=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},mve=Pw("top"),pve=Pw("right"),gve=Pw("bottom"),xve=Pw("left"),vve={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Kn).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},wve={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},jw=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},yve=jw("top"),bve=jw("right"),Cve=jw("bottom"),Eve=jw("left"),_ve={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Sve={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Tve={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&zE(e[0],"none")?[]:EA(e).map(function(r){for(var n={color:fu.TRANSPARENT,offsetX:ii,offsetY:ii,blur:ii},a=0,s=0;s<r.length;s++){var i=r[s];Yd(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:n.blur=i,a++):n.color=Rd.parse(t,i)}return n})}},Bve={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Nve={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=Fve[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},kve=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},Ive=function(t){var e=t.filter(function(c){return c.type===17}).map(function(c){return c.number}),r=e[0],n=e[1];e[2],e[3];var a=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],o=e[13];return e[14],e[15],e.length===16?[r,n,a,s,i,o]:null},Fve={matrix:kve,matrix3d:Ive},bF={type:16,number:50,flags:Ax},Dve=[bF,bF],Rve={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(fs);return r.length!==2?Dve:[r[0],r[1]]}},Lve={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},eg;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(eg||(eg={}));var Uve={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return eg.BREAK_ALL;case"keep-all":return eg.KEEP_ALL;case"normal":default:return eg.NORMAL}}},Mve={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(xm(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},oP={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},Pve={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return xm(e)?e.number:1}},jve={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ove={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Kn).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},Qve={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},Hve={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Vve={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(xm(e))return e.number;if(Kn(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},Gve={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Kn).map(function(r){return r.value})}},zve={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},_s=function(t,e){return(t&e)!==0},qve={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},Kve={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=e.filter(GM),s=0;s<a.length;s++){var i=a[s],o=a[s+1];if(i.type===20){var c=o&&xm(o)?o.number:1;n.push({counter:i.value,increment:c})}}return n}},Wve={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(GM),a=0;a<n.length;a++){var s=n[a],i=n[a+1];if(Kn(s)&&s.value!=="none"){var o=i&&xm(i)?i.number:0;r.push({counter:s.value,reset:o})}}return r}},$ve={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(ux).map(function(r){return oP.parse(t,r)})}},Jve={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],a=e.filter(b1e);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var i=a[s].value,o=a[s+1].value;n.push({open:i,close:o})}return n}},CF=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},Yve={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&zE(e[0],"none")?[]:EA(e).map(function(r){for(var n={color:255,offsetX:ii,offsetY:ii,blur:ii,spread:ii,inset:!1},a=0,s=0;s<r.length;s++){var i=r[s];zE(i,"inset")?n.inset=!0:Yd(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:a===2?n.blur=i:n.spread=i,a++):n.color=Rd.parse(t,i)}return n})}},Xve={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(Kn).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},Zve={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},e2e={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return ux(e)?e.number:0}},t2e=function(){function t(e,r){var n,a;this.animationDuration=$t(e,$ve,r.animationDuration),this.backgroundClip=$t(e,_1e,r.backgroundClip),this.backgroundColor=$t(e,S1e,r.backgroundColor),this.backgroundImage=$t(e,U1e,r.backgroundImage),this.backgroundOrigin=$t(e,M1e,r.backgroundOrigin),this.backgroundPosition=$t(e,P1e,r.backgroundPosition),this.backgroundRepeat=$t(e,j1e,r.backgroundRepeat),this.backgroundSize=$t(e,Q1e,r.backgroundSize),this.borderTopColor=$t(e,V1e,r.borderTopColor),this.borderRightColor=$t(e,G1e,r.borderRightColor),this.borderBottomColor=$t(e,z1e,r.borderBottomColor),this.borderLeftColor=$t(e,q1e,r.borderLeftColor),this.borderTopLeftRadius=$t(e,K1e,r.borderTopLeftRadius),this.borderTopRightRadius=$t(e,W1e,r.borderTopRightRadius),this.borderBottomRightRadius=$t(e,$1e,r.borderBottomRightRadius),this.borderBottomLeftRadius=$t(e,J1e,r.borderBottomLeftRadius),this.borderTopStyle=$t(e,Y1e,r.borderTopStyle),this.borderRightStyle=$t(e,X1e,r.borderRightStyle),this.borderBottomStyle=$t(e,Z1e,r.borderBottomStyle),this.borderLeftStyle=$t(e,eve,r.borderLeftStyle),this.borderTopWidth=$t(e,tve,r.borderTopWidth),this.borderRightWidth=$t(e,rve,r.borderRightWidth),this.borderBottomWidth=$t(e,nve,r.borderBottomWidth),this.borderLeftWidth=$t(e,ave,r.borderLeftWidth),this.boxShadow=$t(e,Yve,r.boxShadow),this.color=$t(e,sve,r.color),this.direction=$t(e,ive,r.direction),this.display=$t(e,ove,r.display),this.float=$t(e,cve,r.cssFloat),this.fontFamily=$t(e,Qve,r.fontFamily),this.fontSize=$t(e,Hve,r.fontSize),this.fontStyle=$t(e,zve,r.fontStyle),this.fontVariant=$t(e,Gve,r.fontVariant),this.fontWeight=$t(e,Vve,r.fontWeight),this.letterSpacing=$t(e,Ave,r.letterSpacing),this.lineBreak=$t(e,uve,r.lineBreak),this.lineHeight=$t(e,dve,r.lineHeight),this.listStyleImage=$t(e,fve,r.listStyleImage),this.listStylePosition=$t(e,hve,r.listStylePosition),this.listStyleType=$t(e,qE,r.listStyleType),this.marginTop=$t(e,mve,r.marginTop),this.marginRight=$t(e,pve,r.marginRight),this.marginBottom=$t(e,gve,r.marginBottom),this.marginLeft=$t(e,xve,r.marginLeft),this.opacity=$t(e,Pve,r.opacity);var s=$t(e,vve,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=$t(e,wve,r.overflowWrap),this.paddingTop=$t(e,yve,r.paddingTop),this.paddingRight=$t(e,bve,r.paddingRight),this.paddingBottom=$t(e,Cve,r.paddingBottom),this.paddingLeft=$t(e,Eve,r.paddingLeft),this.paintOrder=$t(e,Xve,r.paintOrder),this.position=$t(e,Sve,r.position),this.textAlign=$t(e,_ve,r.textAlign),this.textDecorationColor=$t(e,jve,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=$t(e,Ove,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=$t(e,Tve,r.textShadow),this.textTransform=$t(e,Bve,r.textTransform),this.transform=$t(e,Nve,r.transform),this.transformOrigin=$t(e,Rve,r.transformOrigin),this.visibility=$t(e,Lve,r.visibility),this.webkitTextStrokeColor=$t(e,Zve,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=$t(e,e2e,r.webkitTextStrokeWidth),this.wordBreak=$t(e,Uve,r.wordBreak),this.zIndex=$t(e,Mve,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return Ld(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return _s(this.display,4)||_s(this.display,33554432)||_s(this.display,268435456)||_s(this.display,536870912)||_s(this.display,67108864)||_s(this.display,134217728)},t}(),r2e=function(){function t(e,r){this.content=$t(e,qve,r.content),this.quotes=$t(e,Jve,r.quotes)}return t}(),EF=function(){function t(e,r){this.counterIncrement=$t(e,Kve,r.counterIncrement),this.counterReset=$t(e,Wve,r.counterReset)}return t}(),$t=function(t,e,r){var n=new HM,a=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(a);var s=new VM(n.read());switch(e.type){case 2:var i=s.parseComponentValue();return e.parse(t,Kn(i)?i.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return Fw.parse(t,s.parseComponentValue());case"color":return Rd.parse(t,s.parseComponentValue());case"image":return pS.parse(t,s.parseComponentValue());case"length":var o=s.parseComponentValue();return Yd(o)?o:ii;case"length-percentage":var c=s.parseComponentValue();return fs(c)?c:ii;case"time":return oP.parse(t,s.parseComponentValue())}break}},n2e="data-html2canvas-debug",a2e=function(t){var e=t.getAttribute(n2e);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},KE=function(t,e){var r=a2e(t);return r===1||e===r},_A=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,KE(r,3))debugger;this.styles=new t2e(e,window.getComputedStyle(r,null)),JE(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=kw(this.context,r),KE(r,4)&&(this.flags|=16)}return t}(),s2e="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",_F="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ip=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Z1=0;Z1<_F.length;Z1++)Ip[_F.charCodeAt(Z1)]=Z1;var i2e=function(t){var e=t.length*.75,r=t.length,n,a=0,s,i,o,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),f=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=Ip[t.charCodeAt(n)],i=Ip[t.charCodeAt(n+1)],o=Ip[t.charCodeAt(n+2)],c=Ip[t.charCodeAt(n+3)],f[a++]=s<<2|i>>4,f[a++]=(i&15)<<4|o>>2,f[a++]=(o&3)<<6|c&63;return u},o2e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},l2e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Wf=5,gS=11,sC=2,c2e=gS-Wf,lP=65536>>Wf,A2e=1<<Wf,iC=A2e-1,u2e=1024>>Wf,d2e=lP+u2e,f2e=d2e,h2e=32,m2e=f2e+h2e,p2e=65536>>gS,g2e=1<<c2e,x2e=g2e-1,SF=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},v2e=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},w2e=function(t,e){var r=i2e(t),n=Array.isArray(r)?l2e(r):new Uint32Array(r),a=Array.isArray(r)?o2e(r):new Uint16Array(r),s=24,i=SF(a,s/2,n[4]/2),o=n[5]===2?SF(a,(s+n[4])/2):v2e(n,Math.ceil((s+n[4])/4));return new y2e(n[0],n[1],n[2],n[3],i,o)},y2e=function(){function t(e,r,n,a,s,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Wf],r=(r<<sC)+(e&iC),this.data[r];if(e<=65535)return r=this.index[lP+(e-55296>>Wf)],r=(r<<sC)+(e&iC),this.data[r];if(e<this.highStart)return r=m2e-p2e+(e>>gS),r=this.index[r],r+=e>>Wf&x2e,r=this.index[r],r=(r<<sC)+(e&iC),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),TF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b2e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ev=0;ev<TF.length;ev++)b2e[TF.charCodeAt(ev)]=ev;var C2e=1,oC=2,lC=3,BF=4,NF=5,E2e=7,kF=8,cC=9,AC=10,IF=11,FF=12,DF=13,RF=14,uC=15,_2e=function(t){for(var e=[],r=0,n=t.length;r<n;){var a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((a&1023)<<10)+(s&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},S2e=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=t[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},T2e=w2e(s2e),Bl="×",dC="÷",B2e=function(t){return T2e.get(t)},N2e=function(t,e,r){var n=r-2,a=e[n],s=e[r-1],i=e[r];if(s===oC&&i===lC)return Bl;if(s===oC||s===lC||s===BF||i===oC||i===lC||i===BF)return dC;if(s===kF&&[kF,cC,IF,FF].indexOf(i)!==-1||(s===IF||s===cC)&&(i===cC||i===AC)||(s===FF||s===AC)&&i===AC||i===DF||i===NF||i===E2e||s===C2e)return Bl;if(s===DF&&i===RF){for(;a===NF;)a=e[--n];if(a===RF)return Bl}if(s===uC&&i===uC){for(var o=0;a===uC;)o++,a=e[--n];if(o%2===0)return Bl}return dC},k2e=function(t){var e=_2e(t),r=e.length,n=0,a=0,s=e.map(B2e);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=Bl;n<r&&(i=N2e(e,s,++n))===Bl;);if(i!==Bl||n===r){var o=S2e.apply(null,e.slice(a,n));return a=n,{value:o,done:!1}}return{done:!0,value:null}}}},I2e=function(t){for(var e=k2e(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},F2e=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(t.body.removeChild(n),s===e)return!0}}return!1},D2e=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,a=Iw(n.data).map(function(c){return Wa(c)}),s=0,i={},o=a.every(function(c,u){r.setStart(n,s),r.setEnd(n,s+c.length);var f=r.getBoundingClientRect();s+=c.length;var m=f.x>i.x||f.y>i.y;return i=f,u===0?!0:m});return t.body.removeChild(e),o},R2e=function(){return typeof new Image().crossOrigin<"u"},L2e=function(){return typeof new XMLHttpRequest().responseType=="string"},U2e=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},LF=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},M2e=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=e.toDataURL();a.src=s;var i=WE(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),UF(i).then(function(o){n.drawImage(o,0,0);var c=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=t.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",LF(c)?UF(WE(r,r,0,0,u)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),LF(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},WE=function(t,e,r,n,a){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(a),i},UF=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},ti={get SUPPORT_RANGE_BOUNDS(){var t=F2e(document);return Object.defineProperty(ti,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=ti.SUPPORT_RANGE_BOUNDS&&D2e(document);return Object.defineProperty(ti,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=U2e(document);return Object.defineProperty(ti,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?M2e(document):Promise.resolve(!1);return Object.defineProperty(ti,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=R2e();return Object.defineProperty(ti,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=L2e();return Object.defineProperty(ti,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ti,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(ti,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},tg=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),P2e=function(t,e,r,n){var a=Q2e(e,r),s=[],i=0;return a.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(ti.SUPPORT_RANGE_BOUNDS){var c=MF(n,i,o.length).getClientRects();if(c.length>1){var u=xS(o),f=0;u.forEach(function(p){s.push(new tg(p,wu.fromDOMRectList(t,MF(n,f+i,p.length).getClientRects()))),f+=p.length})}else s.push(new tg(o,wu.fromDOMRectList(t,c)))}else{var m=n.splitText(o.length);s.push(new tg(o,j2e(t,n))),n=m}else ti.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));i+=o.length}),s},j2e=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var a=e.parentNode;if(a){a.replaceChild(n,e);var s=kw(t,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return wu.EMPTY},MF=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(t,e),a.setEnd(t,e+r),a},xS=function(t){if(ti.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return I2e(t)},O2e=function(t,e){if(ti.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return V2e(t,e)},Q2e=function(t,e){return e.letterSpacing!==0?xS(t):O2e(t,e)},H2e=[32,160,4961,65792,65793,4153,4241],V2e=function(t,e){for(var r=pxe(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],a,s=function(){if(a.value){var i=a.value.slice(),o=Iw(i),c="";o.forEach(function(u){H2e.indexOf(u)===-1?c+=Wa(u):(c.length&&n.push(c),n.push(Wa(u)),c="")}),c.length&&n.push(c)}};!(a=r.next()).done;)s();return n},G2e=function(){function t(e,r,n){this.text=z2e(r.data,n.textTransform),this.textBounds=P2e(e,this.text,n,r)}return t}(),z2e=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(q2e,K2e);case 2:return t.toUpperCase();default:return t}},q2e=/(^|\s|:|-|\(|\))([a-z])/g,K2e=function(t,e,r){return t.length>0?e+r.toUpperCase():t},cP=function(t){Ec(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return e}(_A),AP=function(t){Ec(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return e}(_A),uP=function(t){Ec(e,t);function e(r,n){var a=t.call(this,r,n)||this,s=new XMLSerializer,i=kw(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return e}(_A),dP=function(t){Ec(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.value=n.value,a}return e}(_A),$E=function(t){Ec(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return e}(_A),W2e=[{type:15,flags:0,unit:"px",number:3}],$2e=[{type:16,flags:0,number:50}],J2e=function(t){return t.width>t.height?new wu(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new wu(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},Y2e=function(t){var e=t.type===X2e?new Array(t.value.length+1).join("•"):t.value;return e.length===0?t.placeholder||"":e},E2="checkbox",_2="radio",X2e="password",PF=707406591,vS=function(t){Ec(e,t);function e(r,n){var a=t.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=Y2e(n),(a.type===E2||a.type===_2)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=J2e(a.bounds)),a.type){case E2:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=W2e;break;case _2:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=$2e;break}return a}return e}(_A),fP=function(t){Ec(e,t);function e(r,n){var a=t.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return e}(_A),hP=function(t){Ec(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.value=n.value,a}return e}(_A),mP=function(t){Ec(e,t);function e(r,n){var a=t.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=gP(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?Zp(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):fu.TRANSPARENT,i=n.contentWindow.document.body?Zp(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):fu.TRANSPARENT;a.backgroundColor=Ld(s)?Ld(i)?a.styles.backgroundColor:i:s}}catch{}return a}return e}(_A),Z2e=["OL","UL","MENU"],Sv=function(t,e,r,n){for(var a=e.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,xP(a)&&a.data.trim().length>0)r.textNodes.push(new G2e(t,a,r.styles));else if(E0(a))if(bP(a)&&a.assignedNodes)a.assignedNodes().forEach(function(o){return Sv(t,o,r,n)});else{var i=pP(t,a);i.styles.isVisible()&&(ewe(a,i,n)?i.flags|=4:twe(i.styles)&&(i.flags|=2),Z2e.indexOf(a.tagName)!==-1&&(i.flags|=8),r.elements.push(i),a.slot,a.shadowRoot?Sv(t,a.shadowRoot,i,n):!S2(a)&&!vP(a)&&!T2(a)&&Sv(t,a,i,n))}},pP=function(t,e){return YE(e)?new cP(t,e):wP(e)?new AP(t,e):vP(e)?new uP(t,e):rwe(e)?new dP(t,e):nwe(e)?new $E(t,e):awe(e)?new vS(t,e):T2(e)?new fP(t,e):S2(e)?new hP(t,e):yP(e)?new mP(t,e):new _A(t,e)},gP=function(t,e){var r=pP(t,e);return r.flags|=4,Sv(t,e,r,r),r},ewe=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||wS(t)&&r.styles.isTransparent()},twe=function(t){return t.isPositioned()||t.isFloating()},xP=function(t){return t.nodeType===Node.TEXT_NODE},E0=function(t){return t.nodeType===Node.ELEMENT_NODE},JE=function(t){return E0(t)&&typeof t.style<"u"&&!Tv(t)},Tv=function(t){return typeof t.className=="object"},rwe=function(t){return t.tagName==="LI"},nwe=function(t){return t.tagName==="OL"},awe=function(t){return t.tagName==="INPUT"},swe=function(t){return t.tagName==="HTML"},vP=function(t){return t.tagName==="svg"},wS=function(t){return t.tagName==="BODY"},wP=function(t){return t.tagName==="CANVAS"},jF=function(t){return t.tagName==="VIDEO"},YE=function(t){return t.tagName==="IMG"},yP=function(t){return t.tagName==="IFRAME"},OF=function(t){return t.tagName==="STYLE"},iwe=function(t){return t.tagName==="SCRIPT"},S2=function(t){return t.tagName==="TEXTAREA"},T2=function(t){return t.tagName==="SELECT"},bP=function(t){return t.tagName==="SLOT"},QF=function(t){return t.tagName.indexOf("-")>0},owe=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,a=e.counterReset,s=!0;n!==null&&n.forEach(function(o){var c=r.counters[o.counter];c&&o.increment!==0&&(s=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=o.increment)});var i=[];return s&&a.forEach(function(o){var c=r.counters[o.counter];i.push(o.counter),c||(c=r.counters[o.counter]=[]),c.push(o.reset)}),i},t}(),HF={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},VF={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},lwe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},cwe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},i0=function(t,e,r,n,a,s){return t<e||t>r?Rg(t,a,s.length>0):n.integers.reduce(function(i,o,c){for(;t>=o;)t-=o,i+=n.values[c];return i},"")+s},CP=function(t,e,r,n){var a="";do r||t--,a=n(t)+a,t/=e;while(t*e>=e);return a},qa=function(t,e,r,n,a){var s=r-e+1;return(t<0?"-":"")+(CP(Math.abs(t),s,n,function(i){return Wa(Math.floor(i%s)+e)})+a)},Nf=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return CP(Math.abs(t),n,!1,function(a){return e[Math.floor(a%n)]})+r},x0=1,dd=2,fd=4,Fp=8,nu=function(t,e,r,n,a,s){if(t<-9999||t>9999)return Rg(t,4,a.length>0);var i=Math.abs(t),o=a;if(i===0)return e[0]+o;for(var c=0;i>0&&c<=4;c++){var u=i%10;u===0&&_s(s,x0)&&o!==""?o=e[u]+o:u>1||u===1&&c===0||u===1&&c===1&&_s(s,dd)||u===1&&c===1&&_s(s,fd)&&t>100||u===1&&c>1&&_s(s,Fp)?o=e[u]+(c>0?r[c-1]:"")+o:u===1&&c>0&&(o=r[c-1]+o),i=Math.floor(i/10)}return(t<0?n:"")+o},GF="十百千萬",zF="拾佰仟萬",qF="マイナス",fC="마이너스",Rg=function(t,e,r){var n=r?". ":"",a=r?"、":"",s=r?", ":"",i=r?" ":"";switch(e){case 0:return"•"+i;case 1:return"◦"+i;case 2:return"◾"+i;case 5:var o=qa(t,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return Nf(t,"〇一二三四五六七八九",a);case 6:return i0(t,1,3999,HF,3,n).toLowerCase();case 7:return i0(t,1,3999,HF,3,n);case 8:return qa(t,945,969,!1,n);case 9:return qa(t,97,122,!1,n);case 10:return qa(t,65,90,!1,n);case 11:return qa(t,1632,1641,!0,n);case 12:case 49:return i0(t,1,9999,VF,3,n);case 35:return i0(t,1,9999,VF,3,n).toLowerCase();case 13:return qa(t,2534,2543,!0,n);case 14:case 30:return qa(t,6112,6121,!0,n);case 15:return Nf(t,"子丑寅卯辰巳午未申酉戌亥",a);case 16:return Nf(t,"甲乙丙丁戊己庚辛壬癸",a);case 17:case 48:return nu(t,"零一二三四五六七八九",GF,"負",a,dd|fd|Fp);case 47:return nu(t,"零壹貳參肆伍陸柒捌玖",zF,"負",a,x0|dd|fd|Fp);case 42:return nu(t,"零一二三四五六七八九",GF,"负",a,dd|fd|Fp);case 41:return nu(t,"零壹贰叁肆伍陆柒捌玖",zF,"负",a,x0|dd|fd|Fp);case 26:return nu(t,"〇一二三四五六七八九","十百千万",qF,a,0);case 25:return nu(t,"零壱弐参四伍六七八九","拾百千万",qF,a,x0|dd|fd);case 31:return nu(t,"영일이삼사오육칠팔구","십백천만",fC,s,x0|dd|fd);case 33:return nu(t,"零一二三四五六七八九","十百千萬",fC,s,0);case 32:return nu(t,"零壹貳參四五六七八九","拾百千",fC,s,x0|dd|fd);case 18:return qa(t,2406,2415,!0,n);case 20:return i0(t,1,19999,cwe,3,n);case 21:return qa(t,2790,2799,!0,n);case 22:return qa(t,2662,2671,!0,n);case 22:return i0(t,1,10999,lwe,3,n);case 23:return Nf(t,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Nf(t,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return qa(t,3302,3311,!0,n);case 28:return Nf(t,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",a);case 29:return Nf(t,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",a);case 34:return qa(t,3792,3801,!0,n);case 37:return qa(t,6160,6169,!0,n);case 38:return qa(t,4160,4169,!0,n);case 39:return qa(t,2918,2927,!0,n);case 40:return qa(t,1776,1785,!0,n);case 43:return qa(t,3046,3055,!0,n);case 44:return qa(t,3174,3183,!0,n);case 45:return qa(t,3664,3673,!0,n);case 46:return qa(t,3872,3881,!0,n);case 3:default:return qa(t,48,57,!0,n)}},EP="data-html2canvas-ignore",KF=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new owe,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,a=Awe(e,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,o=a.contentWindow,c=o.document,u=fwe(a).then(function(){return qi(n,void 0,void 0,function(){var f,m;return Si(this,function(p){switch(p.label){case 0:return this.scrolledElements.forEach(gwe),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),f=this.options.onclone,m=this.clonedReferenceElement,typeof m>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:p.sent(),p.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,dwe(c)]:[3,4];case 3:p.sent(),p.label=4;case 4:return typeof f=="function"?[2,Promise.resolve().then(function(){return f(c,m)}).then(function(){return a})]:[2,a]}})})});return c.open(),c.write(mwe(document.doctype)+"<html></html>"),pwe(this.referenceElement.ownerDocument,s,i),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},t.prototype.createElementClone=function(e){if(KE(e,2))debugger;if(wP(e))return this.createCanvasClone(e);if(jF(e))return this.createVideoClone(e);if(OF(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return YE(r)&&(YE(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),QF(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return hC(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),a=e.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var a=e.cloneNode(!1);try{a.width=e.width,a.height=e.height;var s=e.getContext("2d"),i=a.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var o=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(o){var c=o.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return a},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var a=e.ownerDocument.createElement("canvas");return a.width=e.offsetWidth,a.height=e.offsetHeight,a},t.prototype.appendChildNode=function(e,r,n){(!E0(r)||!iwe(r)&&!r.hasAttribute(EP)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!E0(r)||!OF(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var a=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(E0(s)&&bP(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(o){return a.appendChildNode(r,o,n)})}else this.appendChildNode(r,s,n)},t.prototype.cloneNode=function(e,r){if(xP(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&E0(e)&&(JE(e)||Tv(e))){var a=this.createElementClone(e);a.style.transitionProperty="none";var s=n.getComputedStyle(e),i=n.getComputedStyle(e,":before"),o=n.getComputedStyle(e,":after");this.referenceElement===e&&JE(a)&&(this.clonedReferenceElement=a),wS(a)&&wwe(a);var c=this.counters.parse(new EF(this.context,s)),u=this.resolvePseudoContent(e,a,i,rg.BEFORE);QF(e)&&(r=!0),jF(e)||this.cloneChildNodes(e,a,r),u&&a.insertBefore(u,a.firstChild);var f=this.resolvePseudoContent(e,a,o,rg.AFTER);return f&&a.appendChild(f),this.counters.pop(c),(s&&(this.options.copyStyles||Tv(e))&&!yP(e)||r)&&hC(s,a),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([a,e.scrollLeft,e.scrollTop]),(S2(e)||T2(e))&&(S2(a)||T2(a))&&(a.value=e.value),a}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,a){var s=this;if(n){var i=n.content,o=r.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new EF(this.context,n));var c=new r2e(this.context,n),u=o.createElement("html2canvaspseudoelement");hC(n,u),c.content.forEach(function(m){if(m.type===0)u.appendChild(o.createTextNode(m.value));else if(m.type===22){var p=o.createElement("img");p.src=m.value,p.style.opacity="1",u.appendChild(p)}else if(m.type===18){if(m.name==="attr"){var g=m.values.filter(Kn);g.length&&u.appendChild(o.createTextNode(e.getAttribute(g[0].value)||""))}else if(m.name==="counter"){var b=m.values.filter(tm),y=b[0],T=b[1];if(y&&Kn(y)){var k=s.counters.getCounterValue(y.value),D=T&&Kn(T)?qE.parse(s.context,T.value):3;u.appendChild(o.createTextNode(Rg(k,D,!1)))}}else if(m.name==="counters"){var L=m.values.filter(tm),y=L[0],j=L[1],T=L[2];if(y&&Kn(y)){var H=s.counters.getCounterValues(y.value),U=T&&Kn(T)?qE.parse(s.context,T.value):3,E=j&&j.type===0?j.value:"",_=H.map(function(R){return Rg(R,U,!1)}).join(E);u.appendChild(o.createTextNode(_))}}}else if(m.type===20)switch(m.value){case"open-quote":u.appendChild(o.createTextNode(CF(c.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(o.createTextNode(CF(c.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(o.createTextNode(m.value))}}),u.className=XE+" "+ZE;var f=a===rg.BEFORE?" "+XE:" "+ZE;return Tv(r)?r.className.baseValue+=f:r.className+=f,u}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),rg;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(rg||(rg={}));var Awe=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(EP,"true"),t.body.appendChild(r),r},uwe=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},dwe=function(t){return Promise.all([].slice.call(t.images,0).map(uwe))},fwe=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),e(t))},50)}})},hwe=["all","d","content"],hC=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);hwe.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},mwe=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},pwe=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},gwe=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},xwe=":before",vwe=":after",XE="___html2canvas___pseudoelement_before",ZE="___html2canvas___pseudoelement_after",WF=`{
    content: "" !important;
    display: none !important;
}`,wwe=function(t){ywe(t,"."+XE+xwe+WF+`
         .`+ZE+vwe+WF)},ywe=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},_P=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),bwe=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(pC(e)||Swe(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return qi(this,void 0,void 0,function(){var r,n,a,s,i=this;return Si(this,function(o){switch(o.label){case 0:return r=_P.isSameOrigin(e),n=!mC(e)&&this._options.useCORS===!0&&ti.SUPPORT_CORS_IMAGES&&!r,a=!mC(e)&&!r&&!pC(e)&&typeof this._options.proxy=="string"&&ti.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!mC(e)&&!pC(e)&&!a&&!n?[2]:(s=e,a?[4,this.proxy(s)]:[3,2]);case 1:s=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(c,u){var f=new Image;f.onload=function(){return c(f)},f.onerror=u,(Twe(s)||n)&&(f.crossOrigin="anonymous"),f.src=s,f.complete===!0&&setTimeout(function(){return c(f)},500),i._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=e.substring(0,256);return new Promise(function(s,i){var o=ti.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(o==="text")s(c.response);else{var m=new FileReader;m.addEventListener("load",function(){return s(m.result)},!1),m.addEventListener("error",function(p){return i(p)},!1),m.readAsDataURL(c.response)}else i("Failed to proxy resource "+a+" with status code "+c.status)},c.onerror=i;var u=n.indexOf("?")>-1?"&":"?";if(c.open("GET",""+n+u+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=o),r._options.imageTimeout){var f=r._options.imageTimeout;c.timeout=f,c.ontimeout=function(){return i("Timed out ("+f+"ms) proxying "+a)}}c.send()})},t}(),Cwe=/^data:image\/svg\+xml/i,Ewe=/^data:image\/.*;base64,/i,_we=/^data:image\/.*/i,Swe=function(t){return ti.SUPPORT_SVG_DRAWING||!Bwe(t)},mC=function(t){return _we.test(t)},Twe=function(t){return Ewe.test(t)},pC=function(t){return t.substr(0,4)==="blob"},Bwe=function(t){return t.substr(-3).toLowerCase()==="svg"||Cwe.test(t)},qt=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),o0=function(t,e,r){return new qt(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},tv=function(){function t(e,r,n,a){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=a}return t.prototype.subdivide=function(e,r){var n=o0(this.start,this.startControl,e),a=o0(this.startControl,this.endControl,e),s=o0(this.endControl,this.end,e),i=o0(n,a,e),o=o0(a,s,e),c=o0(i,o,e);return r?new t(this.start,n,i,c):new t(c,o,s,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),kl=function(t){return t.type===1},Nwe=function(){function t(e){var r=e.styles,n=e.bounds,a=kp(r.borderTopLeftRadius,n.width,n.height),s=a[0],i=a[1],o=kp(r.borderTopRightRadius,n.width,n.height),c=o[0],u=o[1],f=kp(r.borderBottomRightRadius,n.width,n.height),m=f[0],p=f[1],g=kp(r.borderBottomLeftRadius,n.width,n.height),b=g[0],y=g[1],T=[];T.push((s+c)/n.width),T.push((b+m)/n.width),T.push((i+y)/n.height),T.push((u+p)/n.height);var k=Math.max.apply(Math,T);k>1&&(s/=k,i/=k,c/=k,u/=k,m/=k,p/=k,b/=k,y/=k);var D=n.width-c,L=n.height-p,j=n.width-m,H=n.height-y,U=r.borderTopWidth,E=r.borderRightWidth,_=r.borderBottomWidth,B=r.borderLeftWidth,Q=aa(r.paddingTop,e.bounds.width),R=aa(r.paddingRight,e.bounds.width),F=aa(r.paddingBottom,e.bounds.width),V=aa(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?ma(n.left+B/3,n.top+U/3,s-B/3,i-U/3,In.TOP_LEFT):new qt(n.left+B/3,n.top+U/3),this.topRightBorderDoubleOuterBox=s>0||i>0?ma(n.left+D,n.top+U/3,c-E/3,u-U/3,In.TOP_RIGHT):new qt(n.left+n.width-E/3,n.top+U/3),this.bottomRightBorderDoubleOuterBox=m>0||p>0?ma(n.left+j,n.top+L,m-E/3,p-_/3,In.BOTTOM_RIGHT):new qt(n.left+n.width-E/3,n.top+n.height-_/3),this.bottomLeftBorderDoubleOuterBox=b>0||y>0?ma(n.left+B/3,n.top+H,b-B/3,y-_/3,In.BOTTOM_LEFT):new qt(n.left+B/3,n.top+n.height-_/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?ma(n.left+B*2/3,n.top+U*2/3,s-B*2/3,i-U*2/3,In.TOP_LEFT):new qt(n.left+B*2/3,n.top+U*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?ma(n.left+D,n.top+U*2/3,c-E*2/3,u-U*2/3,In.TOP_RIGHT):new qt(n.left+n.width-E*2/3,n.top+U*2/3),this.bottomRightBorderDoubleInnerBox=m>0||p>0?ma(n.left+j,n.top+L,m-E*2/3,p-_*2/3,In.BOTTOM_RIGHT):new qt(n.left+n.width-E*2/3,n.top+n.height-_*2/3),this.bottomLeftBorderDoubleInnerBox=b>0||y>0?ma(n.left+B*2/3,n.top+H,b-B*2/3,y-_*2/3,In.BOTTOM_LEFT):new qt(n.left+B*2/3,n.top+n.height-_*2/3),this.topLeftBorderStroke=s>0||i>0?ma(n.left+B/2,n.top+U/2,s-B/2,i-U/2,In.TOP_LEFT):new qt(n.left+B/2,n.top+U/2),this.topRightBorderStroke=s>0||i>0?ma(n.left+D,n.top+U/2,c-E/2,u-U/2,In.TOP_RIGHT):new qt(n.left+n.width-E/2,n.top+U/2),this.bottomRightBorderStroke=m>0||p>0?ma(n.left+j,n.top+L,m-E/2,p-_/2,In.BOTTOM_RIGHT):new qt(n.left+n.width-E/2,n.top+n.height-_/2),this.bottomLeftBorderStroke=b>0||y>0?ma(n.left+B/2,n.top+H,b-B/2,y-_/2,In.BOTTOM_LEFT):new qt(n.left+B/2,n.top+n.height-_/2),this.topLeftBorderBox=s>0||i>0?ma(n.left,n.top,s,i,In.TOP_LEFT):new qt(n.left,n.top),this.topRightBorderBox=c>0||u>0?ma(n.left+D,n.top,c,u,In.TOP_RIGHT):new qt(n.left+n.width,n.top),this.bottomRightBorderBox=m>0||p>0?ma(n.left+j,n.top+L,m,p,In.BOTTOM_RIGHT):new qt(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=b>0||y>0?ma(n.left,n.top+H,b,y,In.BOTTOM_LEFT):new qt(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||i>0?ma(n.left+B,n.top+U,Math.max(0,s-B),Math.max(0,i-U),In.TOP_LEFT):new qt(n.left+B,n.top+U),this.topRightPaddingBox=c>0||u>0?ma(n.left+Math.min(D,n.width-E),n.top+U,D>n.width+E?0:Math.max(0,c-E),Math.max(0,u-U),In.TOP_RIGHT):new qt(n.left+n.width-E,n.top+U),this.bottomRightPaddingBox=m>0||p>0?ma(n.left+Math.min(j,n.width-B),n.top+Math.min(L,n.height-_),Math.max(0,m-E),Math.max(0,p-_),In.BOTTOM_RIGHT):new qt(n.left+n.width-E,n.top+n.height-_),this.bottomLeftPaddingBox=b>0||y>0?ma(n.left+B,n.top+Math.min(H,n.height-_),Math.max(0,b-B),Math.max(0,y-_),In.BOTTOM_LEFT):new qt(n.left+B,n.top+n.height-_),this.topLeftContentBox=s>0||i>0?ma(n.left+B+V,n.top+U+Q,Math.max(0,s-(B+V)),Math.max(0,i-(U+Q)),In.TOP_LEFT):new qt(n.left+B+V,n.top+U+Q),this.topRightContentBox=c>0||u>0?ma(n.left+Math.min(D,n.width+B+V),n.top+U+Q,D>n.width+B+V?0:c-B+V,u-(U+Q),In.TOP_RIGHT):new qt(n.left+n.width-(E+R),n.top+U+Q),this.bottomRightContentBox=m>0||p>0?ma(n.left+Math.min(j,n.width-(B+V)),n.top+Math.min(L,n.height+U+Q),Math.max(0,m-(E+R)),p-(_+F),In.BOTTOM_RIGHT):new qt(n.left+n.width-(E+R),n.top+n.height-(_+F)),this.bottomLeftContentBox=b>0||y>0?ma(n.left+B+V,n.top+H,Math.max(0,b-(B+V)),y-(_+F),In.BOTTOM_LEFT):new qt(n.left+B+V,n.top+n.height-(_+F))}return t}(),In;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(In||(In={}));var ma=function(t,e,r,n,a){var s=4*((Math.sqrt(2)-1)/3),i=r*s,o=n*s,c=t+r,u=e+n;switch(a){case In.TOP_LEFT:return new tv(new qt(t,u),new qt(t,u-o),new qt(c-i,e),new qt(c,e));case In.TOP_RIGHT:return new tv(new qt(t,e),new qt(t+i,e),new qt(c,u-o),new qt(c,u));case In.BOTTOM_RIGHT:return new tv(new qt(c,e),new qt(c,e+o),new qt(t+i,u),new qt(t,u));case In.BOTTOM_LEFT:default:return new tv(new qt(c,u),new qt(c-i,u),new qt(t,e+o),new qt(t,e))}},B2=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},kwe=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},N2=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},Iwe=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),rv=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),Fwe=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),Dwe=function(t){return t.type===0},SP=function(t){return t.type===1},Rwe=function(t){return t.type===2},$F=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},Lwe=function(t,e,r,n,a){return t.map(function(s,i){switch(i){case 0:return s.add(e,r);case 1:return s.add(e+n,r);case 2:return s.add(e+n,r+a);case 3:return s.add(e,r+a)}return s})},TP=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),BP=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new Nwe(this.container),this.container.styles.opacity<1&&this.effects.push(new Fwe(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new Iwe(n,a,s))}if(this.container.styles.overflowX!==0){var i=B2(this.curves),o=N2(this.curves);$F(i,o)?this.effects.push(new rv(i,6)):(this.effects.push(new rv(i,2)),this.effects.push(new rv(o,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(c){return!SP(c)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=B2(n.curves),o=N2(n.curves);$F(i,o)||a.unshift(new rv(o,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(c){return _s(c.target,e)})},t}(),e_=function(t,e,r,n){t.container.elements.forEach(function(a){var s=_s(a.flags,4),i=_s(a.flags,2),o=new BP(a,t);_s(a.styles.display,2048)&&n.push(o);var c=_s(a.flags,8)?[]:n;if(s||i){var u=s||a.styles.isPositioned()?r:e,f=new TP(o);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var m=a.styles.zIndex.order;if(m<0){var p=0;u.negativeZIndex.some(function(b,y){return m>b.element.container.styles.zIndex.order?(p=y,!1):p>0}),u.negativeZIndex.splice(p,0,f)}else if(m>0){var g=0;u.positiveZIndex.some(function(b,y){return m>=b.element.container.styles.zIndex.order?(g=y+1,!1):g>0}),u.positiveZIndex.splice(g,0,f)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(f)}else a.styles.isFloating()?u.nonPositionedFloats.push(f):u.nonPositionedInlineLevel.push(f);e_(o,f,s?f:r,c)}else a.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),e_(o,e,r,c);_s(a.flags,8)&&NP(a,c)})},NP=function(t,e){for(var r=t instanceof $E?t.start:1,n=t instanceof $E?t.reversed:!1,a=0;a<e.length;a++){var s=e[a];s.container instanceof dP&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=Rg(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},Uwe=function(t){var e=new BP(t,null),r=new TP(e),n=[];return e_(e,r,r,n),NP(e.container,n),r},JF=function(t,e){switch(e){case 0:return Ll(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Ll(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Ll(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Ll(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},Mwe=function(t,e){switch(e){case 0:return Ll(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Ll(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Ll(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Ll(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},Pwe=function(t,e){switch(e){case 0:return Ll(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Ll(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Ll(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Ll(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},jwe=function(t,e){switch(e){case 0:return nv(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return nv(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return nv(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return nv(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},nv=function(t,e){var r=[];return kl(t)?r.push(t.subdivide(.5,!1)):r.push(t),kl(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},Ll=function(t,e,r,n){var a=[];return kl(t)?a.push(t.subdivide(.5,!1)):a.push(t),kl(r)?a.push(r.subdivide(.5,!0)):a.push(r),kl(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),kl(e)?a.push(e.subdivide(.5,!1).reverse()):a.push(e),a},kP=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},k2=function(t){var e=t.styles,r=t.bounds,n=aa(e.paddingLeft,r.width),a=aa(e.paddingRight,r.width),s=aa(e.paddingTop,r.width),i=aa(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+a),-(e.borderTopWidth+e.borderBottomWidth+s+i))},Owe=function(t,e){return t===0?e.bounds:t===2?k2(e):kP(e)},Qwe=function(t,e){return t===0?e.bounds:t===2?k2(e):kP(e)},gC=function(t,e,r){var n=Owe(v0(t.styles.backgroundOrigin,e),t),a=Qwe(v0(t.styles.backgroundClip,e),t),s=Hwe(v0(t.styles.backgroundSize,e),r,n),i=s[0],o=s[1],c=kp(v0(t.styles.backgroundPosition,e),n.width-i,n.height-o),u=Vwe(v0(t.styles.backgroundRepeat,e),c,s,n,a),f=Math.round(n.left+c[0]),m=Math.round(n.top+c[1]);return[u,f,m,i,o]},l0=function(t){return Kn(t)&&t.value===Q0.AUTO},av=function(t){return typeof t=="number"},Hwe=function(t,e,r){var n=e[0],a=e[1],s=e[2],i=t[0],o=t[1];if(!i)return[0,0];if(fs(i)&&o&&fs(o))return[aa(i,r.width),aa(o,r.height)];var c=av(s);if(Kn(i)&&(i.value===Q0.CONTAIN||i.value===Q0.COVER)){if(av(s)){var u=r.width/r.height;return u<s!=(i.value===Q0.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var f=av(n),m=av(a),p=f||m;if(l0(i)&&(!o||l0(o))){if(f&&m)return[n,a];if(!c&&!p)return[r.width,r.height];if(p&&c){var g=f?n:a*s,b=m?a:n/s;return[g,b]}var y=f?n:r.width,T=m?a:r.height;return[y,T]}if(c){var k=0,D=0;return fs(i)?k=aa(i,r.width):fs(o)&&(D=aa(o,r.height)),l0(i)?k=D*s:(!o||l0(o))&&(D=k/s),[k,D]}var L=null,j=null;if(fs(i)?L=aa(i,r.width):o&&fs(o)&&(j=aa(o,r.height)),L!==null&&(!o||l0(o))&&(j=f&&m?L/n*a:r.height),j!==null&&l0(i)&&(L=f&&m?j/a*n:r.width),L!==null&&j!==null)return[L,j];throw new Error("Unable to calculate background-size for element")},v0=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},Vwe=function(t,e,r,n,a){var s=e[0],i=e[1],o=r[0],c=r[1];switch(t){case 2:return[new qt(Math.round(n.left),Math.round(n.top+i)),new qt(Math.round(n.left+n.width),Math.round(n.top+i)),new qt(Math.round(n.left+n.width),Math.round(c+n.top+i)),new qt(Math.round(n.left),Math.round(c+n.top+i))];case 3:return[new qt(Math.round(n.left+s),Math.round(n.top)),new qt(Math.round(n.left+s+o),Math.round(n.top)),new qt(Math.round(n.left+s+o),Math.round(n.height+n.top)),new qt(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new qt(Math.round(n.left+s),Math.round(n.top+i)),new qt(Math.round(n.left+s+o),Math.round(n.top+i)),new qt(Math.round(n.left+s+o),Math.round(n.top+i+c)),new qt(Math.round(n.left+s),Math.round(n.top+i+c))];default:return[new qt(Math.round(a.left),Math.round(a.top)),new qt(Math.round(a.left+a.width),Math.round(a.top)),new qt(Math.round(a.left+a.width),Math.round(a.height+a.top)),new qt(Math.round(a.left),Math.round(a.height+a.top))]}},Gwe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",YF="Hidden Text",zwe=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),a.src=Gwe,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(YF)),n.appendChild(s),n.appendChild(a);var o=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(YF)),n.style.lineHeight="normal",a.style.verticalAlign="super";var c=a.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:o,middle:c}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),IP=function(){function t(e,r){this.context=e,this.options=r}return t}(),qwe=1e4,Kwe=function(t){Ec(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new zwe(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},e.prototype.applyEffect=function(r){this.ctx.save(),Rwe(r)&&(this.ctx.globalAlpha=r.opacity),Dwe(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),SP(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return qi(this,void 0,void 0,function(){var n;return Si(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return qi(this,void 0,void 0,function(){return Si(this,function(n){switch(n.label){case 0:if(_s(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var i=xS(r.text);i.reduce(function(o,c){return s.ctx.fillText(c,o,r.bounds.top+a),o+s.ctx.measureText(c).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),a=Xwe(r.fontFamily).join(", "),s=ux(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},e.prototype.renderTextNode=function(r,n){return qi(this,void 0,void 0,function(){var a,s,i,o,c,u,f,m,p=this;return Si(this,function(g){return a=this.createFontStyle(n),s=a[0],i=a[1],o=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(i,o),u=c.baseline,f=c.middle,m=n.paintOrder,r.textBounds.forEach(function(b){m.forEach(function(y){switch(y){case 0:p.ctx.fillStyle=js(n.color),p.renderTextWithLetterSpacing(b,n.letterSpacing,u);var T=n.textShadow;T.length&&b.text.trim().length&&(T.slice(0).reverse().forEach(function(k){p.ctx.shadowColor=js(k.color),p.ctx.shadowOffsetX=k.offsetX.number*p.options.scale,p.ctx.shadowOffsetY=k.offsetY.number*p.options.scale,p.ctx.shadowBlur=k.blur.number,p.renderTextWithLetterSpacing(b,n.letterSpacing,u)}),p.ctx.shadowColor="",p.ctx.shadowOffsetX=0,p.ctx.shadowOffsetY=0,p.ctx.shadowBlur=0),n.textDecorationLine.length&&(p.ctx.fillStyle=js(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(k){switch(k){case 1:p.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top+u),b.bounds.width,1);break;case 2:p.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top),b.bounds.width,1);break;case 3:p.ctx.fillRect(b.bounds.left,Math.ceil(b.bounds.top+f),b.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&b.text.trim().length&&(p.ctx.strokeStyle=js(n.webkitTextStrokeColor),p.ctx.lineWidth=n.webkitTextStrokeWidth,p.ctx.lineJoin=window.chrome?"miter":"round",p.ctx.strokeText(b.text,b.bounds.left,b.bounds.top+u)),p.ctx.strokeStyle="",p.ctx.lineWidth=0,p.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=k2(r),i=N2(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return qi(this,void 0,void 0,function(){var n,a,s,i,o,c,D,D,u,f,m,p,j,g,b,H,y,T,k,D,L,j,H;return Si(this,function(U){switch(U.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,i=0,o=n.textNodes,U.label=1;case 1:return i<o.length?(c=o[i],[4,this.renderTextNode(c,s)]):[3,4];case 2:U.sent(),U.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof cP))return[3,8];U.label=5;case 5:return U.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return D=U.sent(),this.renderReplacedElement(n,a,D),[3,8];case 7:return U.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof AP&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof uP))return[3,12];U.label=9;case 9:return U.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return D=U.sent(),this.renderReplacedElement(n,a,D),[3,12];case 11:return U.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof mP&&n.tree?(u=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:f=U.sent(),n.width&&n.height&&this.ctx.drawImage(f,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),U.label=14;case 14:if(n instanceof vS&&(m=Math.min(n.bounds.width,n.bounds.height),n.type===E2?n.checked&&(this.ctx.save(),this.path([new qt(n.bounds.left+m*.39363,n.bounds.top+m*.79),new qt(n.bounds.left+m*.16,n.bounds.top+m*.5549),new qt(n.bounds.left+m*.27347,n.bounds.top+m*.44071),new qt(n.bounds.left+m*.39694,n.bounds.top+m*.5649),new qt(n.bounds.left+m*.72983,n.bounds.top+m*.23),new qt(n.bounds.left+m*.84,n.bounds.top+m*.34085),new qt(n.bounds.left+m*.39363,n.bounds.top+m*.79)]),this.ctx.fillStyle=js(PF),this.ctx.fill(),this.ctx.restore()):n.type===_2&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+m/2,n.bounds.top+m/2,m/4,0,Math.PI*2,!0),this.ctx.fillStyle=js(PF),this.ctx.fill(),this.ctx.restore())),Wwe(n)&&n.value.length){switch(p=this.createFontStyle(s),j=p[0],g=p[1],b=this.fontMetrics.getMetrics(j,g).baseline,this.ctx.font=j,this.ctx.fillStyle=js(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Jwe(n.styles.textAlign),H=k2(n),y=0,n.styles.textAlign){case 1:y+=H.width/2;break;case 2:y+=H.width;break}T=H.add(y,0,0,-H.height/2+1),this.ctx.save(),this.path([new qt(H.left,H.top),new qt(H.left+H.width,H.top),new qt(H.left+H.width,H.top+H.height),new qt(H.left,H.top+H.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new tg(n.value,T),s.letterSpacing,b),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!_s(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(k=n.styles.listStyleImage,k.type!==0)return[3,18];D=void 0,L=k.url,U.label=15;case 15:return U.trys.push([15,17,,18]),[4,this.context.cache.match(L)];case 16:return D=U.sent(),this.ctx.drawImage(D,n.bounds.left-(D.width+10),n.bounds.top),[3,18];case 17:return U.sent(),this.context.logger.error("Error loading list-style-image "+L),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(j=this.createFontStyle(s)[0],this.ctx.font=j,this.ctx.fillStyle=js(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",H=new wu(n.bounds.left,n.bounds.top+aa(n.styles.paddingTop,n.bounds.width),n.bounds.width,yF(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new tg(r.listValue,H),s.letterSpacing,yF(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),U.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return qi(this,void 0,void 0,function(){var n,a,k,s,i,k,o,c,k,u,f,k,m,p,k,g,b,k,y,T,k;return Si(this,function(D){switch(D.label){case 0:if(_s(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:D.sent(),n=0,a=r.negativeZIndex,D.label=2;case 2:return n<a.length?(k=a[n],[4,this.renderStack(k)]):[3,5];case 3:D.sent(),D.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:D.sent(),s=0,i=r.nonInlineLevel,D.label=7;case 7:return s<i.length?(k=i[s],[4,this.renderNode(k)]):[3,10];case 8:D.sent(),D.label=9;case 9:return s++,[3,7];case 10:o=0,c=r.nonPositionedFloats,D.label=11;case 11:return o<c.length?(k=c[o],[4,this.renderStack(k)]):[3,14];case 12:D.sent(),D.label=13;case 13:return o++,[3,11];case 14:u=0,f=r.nonPositionedInlineLevel,D.label=15;case 15:return u<f.length?(k=f[u],[4,this.renderStack(k)]):[3,18];case 16:D.sent(),D.label=17;case 17:return u++,[3,15];case 18:m=0,p=r.inlineLevel,D.label=19;case 19:return m<p.length?(k=p[m],[4,this.renderNode(k)]):[3,22];case 20:D.sent(),D.label=21;case 21:return m++,[3,19];case 22:g=0,b=r.zeroOrAutoZIndexOrTransformedOrOpacity,D.label=23;case 23:return g<b.length?(k=b[g],[4,this.renderStack(k)]):[3,26];case 24:D.sent(),D.label=25;case 25:return g++,[3,23];case 26:y=0,T=r.positiveZIndex,D.label=27;case 27:return y<T.length?(k=T[y],[4,this.renderStack(k)]):[3,30];case 28:D.sent(),D.label=29;case 29:return y++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var i=kl(a)?a.start:a;s===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),kl(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},e.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},e.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,o=i.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,a);var c=o.getContext("2d");return c.drawImage(r,0,0,r.width,r.height,0,0,n,a),o},e.prototype.renderBackgroundImage=function(r){return qi(this,void 0,void 0,function(){var n,a,s,i,o,c;return Si(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,a=function(f){var m,p,g,Q,te,ae,V,X,_,b,Q,te,ae,V,X,y,T,k,D,L,j,H,U,E,_,B,Q,R,F,V,X,oe,te,ae,q,J,W,de,P,K,Y,ee;return Si(this,function(Ae){switch(Ae.label){case 0:if(f.type!==0)return[3,5];m=void 0,p=f.url,Ae.label=1;case 1:return Ae.trys.push([1,3,,4]),[4,s.context.cache.match(p)];case 2:return m=Ae.sent(),[3,4];case 3:return Ae.sent(),s.context.logger.error("Error loading background-image "+p),[3,4];case 4:return m&&(g=gC(r,n,[m.width,m.height,m.width/m.height]),Q=g[0],te=g[1],ae=g[2],V=g[3],X=g[4],_=s.ctx.createPattern(s.resizeImage(m,V,X),"repeat"),s.renderRepeat(Q,_,te,ae)),[3,6];case 5:D1e(f)?(b=gC(r,n,[null,null,null]),Q=b[0],te=b[1],ae=b[2],V=b[3],X=b[4],y=B1e(f.angle,V,X),T=y[0],k=y[1],D=y[2],L=y[3],j=y[4],H=document.createElement("canvas"),H.width=V,H.height=X,U=H.getContext("2d"),E=U.createLinearGradient(k,L,D,j),vF(f.stops,T).forEach(function(Se){return E.addColorStop(Se.stop,js(Se.color))}),U.fillStyle=E,U.fillRect(0,0,V,X),V>0&&X>0&&(_=s.ctx.createPattern(H,"repeat"),s.renderRepeat(Q,_,te,ae))):R1e(f)&&(B=gC(r,n,[null,null,null]),Q=B[0],R=B[1],F=B[2],V=B[3],X=B[4],oe=f.position.length===0?[mS]:f.position,te=aa(oe[0],V),ae=aa(oe[oe.length-1],X),q=N1e(f,te,ae,V,X),J=q[0],W=q[1],J>0&&W>0&&(de=s.ctx.createRadialGradient(R+te,F+ae,0,R+te,F+ae,J),vF(f.stops,J*2).forEach(function(Se){return de.addColorStop(Se.stop,js(Se.color))}),s.path(Q),s.ctx.fillStyle=de,J!==W?(P=r.bounds.left+.5*r.bounds.width,K=r.bounds.top+.5*r.bounds.height,Y=W/J,ee=1/Y,s.ctx.save(),s.ctx.translate(P,K),s.ctx.transform(1,0,0,Y,0,0),s.ctx.translate(-P,-K),s.ctx.fillRect(R,ee*(F-K)+K,V,X*ee),s.ctx.restore()):s.ctx.fill())),Ae.label=6;case 6:return n--,[2]}})},s=this,i=0,o=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return i<o.length?(c=o[i],[5,a(c)]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,a){return qi(this,void 0,void 0,function(){return Si(this,function(s){return this.path(JF(a,n)),this.ctx.fillStyle=js(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,a,s){return qi(this,void 0,void 0,function(){var i,o;return Si(this,function(c){switch(c.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return c.sent(),[2];case 2:return i=Mwe(s,a),this.path(i),this.ctx.fillStyle=js(r),this.ctx.fill(),o=Pwe(s,a),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return qi(this,void 0,void 0,function(){var n,a,s,i,o,c,u,f,m=this;return Si(this,function(p){switch(p.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!Ld(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=$we(v0(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),Ld(n.backgroundColor)||(this.ctx.fillStyle=js(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:p.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(g){m.ctx.save();var b=B2(r.curves),y=g.inset?0:qwe,T=Lwe(b,-y+(g.inset?1:-1)*g.spread.number,(g.inset?1:-1)*g.spread.number,g.spread.number*(g.inset?-2:2),g.spread.number*(g.inset?-2:2));g.inset?(m.path(b),m.ctx.clip(),m.mask(T)):(m.mask(b),m.ctx.clip(),m.path(T)),m.ctx.shadowOffsetX=g.offsetX.number+y,m.ctx.shadowOffsetY=g.offsetY.number,m.ctx.shadowColor=js(g.color),m.ctx.shadowBlur=g.blur.number,m.ctx.fillStyle=g.inset?js(g.color):"rgba(0,0,0,1)",m.ctx.fill(),m.ctx.restore()}),p.label=2;case 2:o=0,c=0,u=s,p.label=3;case 3:return c<u.length?(f=u[c],f.style!==0&&!Ld(f.color)&&f.width>0?f.style!==2?[3,5]:[4,this.renderDashedDottedBorder(f.color,f.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return p.sent(),[3,11];case 5:return f.style!==3?[3,7]:[4,this.renderDashedDottedBorder(f.color,f.width,o,r.curves,3)];case 6:return p.sent(),[3,11];case 7:return f.style!==4?[3,9]:[4,this.renderDoubleBorder(f.color,f.width,o,r.curves)];case 8:return p.sent(),[3,11];case 9:return[4,this.renderSolidBorder(f.color,o,r.curves)];case 10:p.sent(),p.label=11;case 11:o++,p.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,a,s,i){return qi(this,void 0,void 0,function(){var o,c,u,f,m,p,g,b,y,T,k,D,L,j,H,U,H,U;return Si(this,function(E){return this.ctx.save(),o=jwe(s,a),c=JF(s,a),i===2&&(this.path(c),this.ctx.clip()),kl(c[0])?(u=c[0].start.x,f=c[0].start.y):(u=c[0].x,f=c[0].y),kl(c[1])?(m=c[1].end.x,p=c[1].end.y):(m=c[1].x,p=c[1].y),a===0||a===2?g=Math.abs(u-m):g=Math.abs(f-p),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(c.slice(0,2)),b=n<3?n*3:n*2,y=n<3?n*2:n,i===3&&(b=n,y=n),T=!0,g<=b*2?T=!1:g<=b*2+y?(k=g/(2*b+y),b*=k,y*=k):(D=Math.floor((g+y)/(b+y)),L=(g-D*b)/(D-1),j=(g-(D+1)*b)/D,y=j<=0||Math.abs(y-L)<Math.abs(y-j)?L:j),T&&(i===3?this.ctx.setLineDash([0,b+y]):this.ctx.setLineDash([b,y])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=js(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(kl(c[0])&&(H=c[3],U=c[0],this.ctx.beginPath(),this.formatPath([new qt(H.end.x,H.end.y),new qt(U.start.x,U.start.y)]),this.ctx.stroke()),kl(c[1])&&(H=c[1],U=c[2],this.ctx.beginPath(),this.formatPath([new qt(H.end.x,H.end.y),new qt(U.start.x,U.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return qi(this,void 0,void 0,function(){var n;return Si(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=js(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=Uwe(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(IP),Wwe=function(t){return t instanceof hP||t instanceof fP?!0:t instanceof vS&&t.type!==_2&&t.type!==E2},$we=function(t,e){switch(t){case 0:return B2(e);case 2:return kwe(e);case 1:default:return N2(e)}},Jwe=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},Ywe=["-apple-system","system-ui"],Xwe=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return Ywe.indexOf(e)===-1}):t},Zwe=function(t){Ec(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return e.prototype.render=function(r){return qi(this,void 0,void 0,function(){var n,a;return Si(this,function(s){switch(s.label){case 0:return n=WE(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,eye(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=js(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(IP),eye=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},tye=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,U1([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,U1([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,U1([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,U1([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),rye=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new tye({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new bwe(this,e)}return t.instanceCount=1,t}(),FP=function(t,e){return e===void 0&&(e={}),nye(t,e)};typeof window<"u"&&_P.setContext(window);var nye=function(t,e){return qi(void 0,void 0,void 0,function(){var r,n,a,s,i,o,c,u,f,m,p,g,b,y,T,k,D,L,j,H,E,U,E,_,B,Q,R,F,V,X,oe,te,ae,q,J,W,de,P,K,Y;return Si(this,function(ee){switch(ee.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(_=e.allowTaint)!==null&&_!==void 0?_:!1,imageTimeout:(B=e.imageTimeout)!==null&&B!==void 0?B:15e3,proxy:e.proxy,useCORS:(Q=e.useCORS)!==null&&Q!==void 0?Q:!1},s=DE({logging:(R=e.logging)!==null&&R!==void 0?R:!0,cache:e.cache},a),i={windowWidth:(F=e.windowWidth)!==null&&F!==void 0?F:n.innerWidth,windowHeight:(V=e.windowHeight)!==null&&V!==void 0?V:n.innerHeight,scrollX:(X=e.scrollX)!==null&&X!==void 0?X:n.pageXOffset,scrollY:(oe=e.scrollY)!==null&&oe!==void 0?oe:n.pageYOffset},o=new wu(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),c=new rye(s,o),u=(te=e.foreignObjectRendering)!==null&&te!==void 0?te:!1,f={allowTaint:(ae=e.allowTaint)!==null&&ae!==void 0?ae:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:u,copyStyles:u},c.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),m=new KF(c,t,f),p=m.clonedReferenceElement,p?[4,m.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return g=ee.sent(),b=wS(p)||swe(p)?Lge(p.ownerDocument):kw(c,p),y=b.width,T=b.height,k=b.left,D=b.top,L=aye(c,p,e.backgroundColor),j={canvas:e.canvas,backgroundColor:L,scale:(J=(q=e.scale)!==null&&q!==void 0?q:n.devicePixelRatio)!==null&&J!==void 0?J:1,x:((W=e.x)!==null&&W!==void 0?W:0)+k,y:((de=e.y)!==null&&de!==void 0?de:0)+D,width:(P=e.width)!==null&&P!==void 0?P:Math.ceil(y),height:(K=e.height)!==null&&K!==void 0?K:Math.ceil(T)},u?(c.logger.debug("Document cloned, using foreign object rendering"),E=new Zwe(c,j),[4,E.render(p)]):[3,3];case 2:return H=ee.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+k+","+D+" with size "+y+"x"+T+" using computed rendering"),c.logger.debug("Starting DOM parsing"),U=gP(c,p),L===U.styles.backgroundColor&&(U.styles.backgroundColor=fu.TRANSPARENT),c.logger.debug("Starting renderer for element at "+j.x+","+j.y+" with size "+j.width+"x"+j.height),E=new Kwe(c,j),[4,E.render(U)];case 4:H=ee.sent(),ee.label=5;case 5:return(!((Y=e.removeContainer)!==null&&Y!==void 0)||Y)&&(KF.destroy(g)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,H]}})})},aye=function(t,e,r){var n=e.ownerDocument,a=n.documentElement?Zp(t,getComputedStyle(n.documentElement).backgroundColor):fu.TRANSPARENT,s=n.body?Zp(t,getComputedStyle(n.body).backgroundColor):fu.TRANSPARENT,i=typeof r=="string"?Zp(t,r):r===null?fu.TRANSPARENT:4294967295;return e===n.documentElement?Ld(a)?Ld(s)?i:s:a:i};const sye=Object.freeze(Object.defineProperty({__proto__:null,default:FP},Symbol.toStringTag,{value:"Module"})),Ow="proyectos_interdisciplinarios",DP="entregas_interdisciplinarias",iye="usuarios",yS=t=>{const e=t.data();return{id:t.id,...e}},oye=t=>{const e=er(Nt(Tt,Ow),fn("nombreProyecto","asc"));return br(e,n=>{const a=n.docs.map(s=>yS(s));t(a)},n=>{console.error("Error al suscribirse a las planificaciones:",n),t([])})},lye=async t=>{try{return(await Sa(Nt(Tt,Ow),t)).id}catch(e){throw console.error("Error al crear la planificación:",e),new Error("No se pudo crear la planificación.")}},XF=async(t,e)=>{try{const{id:r,...n}=e,a=_r(Tt,Ow,t);await Zi(a,n)}catch(r){throw console.error("Error al actualizar la planificación:",r),new Error("No se pudo actualizar la planificación.")}},cye=async t=>{try{const e=_r(Tt,Ow,t);await Oi(e)}catch(e){throw console.error("Error al eliminar la planificación:",e),new Error("No se pudo eliminar la planificación.")}},Aye=(t,e)=>{const r=er(Nt(Tt,DP),Tn("planificacionId","==",t));return br(r,a=>{const s=a.docs.map(i=>yS(i));e(s)},a=>{console.error("Error al suscribirse a las entregas:",a),e([])})},ZF=async(t,e)=>{try{const r=_r(Tt,DP,t);await Zi(r,{feedbackProfesor:e,fechaFeedback:Ar.fromDate(new Date)},{merge:!0})}catch(r){throw console.error("Error al guardar la retroalimentación:",r),new Error("No se pudo guardar la retroalimentación.")}},uye=t=>{const e=er(Nt(Tt,iye));return br(e,n=>{const a=n.docs.map(s=>yS(s));t(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),t([])})},dye=({planificaciones:t,onActivityUpdate:e})=>{const[r,n]=ne.useState(null),a=ne.useMemo(()=>{const c=[];return t.forEach(u=>{(u.actividades||[]).forEach(f=>c.push({...f,planId:u.id,type:"activity"})),(u.fechasClave||[]).forEach(f=>c.push({id:f.id,planId:u.id,type:"keyDate",nombre:f.nombre,fechaInicio:f.fecha,fechaFin:f.fecha,responsables:u.docentesResponsables,asignaturaPrincipal:"Milestone"}))}),c.sort((u,f)=>new Date(u.fechaInicio).getTime()-new Date(f.fechaInicio).getTime())},[t]),s=ne.useCallback(c=>{if(c.type==="keyDate")return{text:"Fecha Clave",color:"bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-300"};const u=new Date;u.setHours(0,0,0,0);const f=new Date(`${c.fechaInicio}T00:00:00`),m=new Date(`${c.fechaFin}T00:00:00`);return m<u?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:f<=u&&m>=u?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"}},[]),i=({name:c})=>{const u=(c||"").split(" ").map(g=>g[0]).join("").toUpperCase(),f=g=>{let b=0;for(let y=0;y<g.length;y++)b=g.charCodeAt(y)+((b<<5)-b);return b},m=["bg-pink-100 text-pink-800 dark:bg-pink-900/50 dark:text-pink-300","bg-indigo-100 text-indigo-800 dark:bg-indigo-900/50 dark:text-indigo-300","bg-teal-100 text-teal-800 dark:bg-teal-900/50 dark:text-teal-300","bg-orange-100 text-orange-800 dark:bg-orange-900/50 dark:text-orange-300","bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300","bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300","bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"],p=Math.abs(f(c))%m.length;return l.jsx("div",{className:`w-9 h-9 rounded-full ${m[p]} flex items-center justify-center font-bold text-sm ring-2 ring-white dark:ring-slate-800`,children:u.slice(0,2)})},o=({data:c,onClose:u,onSave:f})=>{const[m,p]=ne.useState(c.activity),g=y=>{p({...m,[y.target.name]:y.target.value})},b=()=>{f(c.planId,m),u()};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg p-6 animate-fade-in-up",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Editar Actividad"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Nombre"}),l.jsx("input",{name:"nombre",value:m.nombre,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Responsables"}),l.jsx("input",{name:"responsables",value:m.responsables,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Inicio"}),l.jsx("input",{type:"date",name:"fechaInicio",value:m.fechaInicio,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Fin"}),l.jsx("input",{type:"date",name:"fechaFin",value:m.fechaFin,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),l.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[l.jsx("button",{onClick:u,className:"px-4 py-2 bg-slate-200 dark:bg-slate-600 rounded-md font-semibold",children:"Cancelar"}),l.jsx("button",{onClick:b,className:"px-4 py-2 bg-amber-500 text-white rounded-md font-semibold",children:"Guardar"})]})]})})};return a.length===0?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Cronograma del Proyecto"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),l.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades para mostrar. Cree una planificación primero."})]}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg",children:[l.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-slate-200",children:"Cronograma del Proyecto"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[l.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Tarea"}),l.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),l.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Inicio"}),l.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Fin"}),l.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Asignado"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.map(c=>{const u=s(c),f=c.type==="activity";return l.jsxs("tr",{className:`${f?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":""}`,onClick:()=>f&&n({planId:c.planId,activity:c}),children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base font-medium text-slate-900 dark:text-slate-200",children:c.nombre}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full ${u.color}`,children:u.text})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:c.fechaInicio}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:c.fechaFin}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx(i,{name:c.responsables||"N/A"})})]},c.id)})})]})}),r&&l.jsx(o,{data:r,onClose:()=>n(null),onSave:e})]})},fye=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),hye=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197M15 21a6 6 0 006-5.197M15 12a4 4 0 110-8 4 4 0 010 8z"})}),mye=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{d:"M12 14l9-5-9-5-9 5 9 5z"}),l.jsx("path",{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 14l9-5-9-5-9 5 9 5zm0 0v6"})]}),pye=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),gye=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),xye=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6H8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})}),vye=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),wye=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),t_=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),ud=({icon:t,label:e,children:r,aiButton:n})=>l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("div",{className:"flex items-center gap-3 text-slate-500 dark:text-slate-400 font-medium",children:[t,l.jsx("span",{children:e})]}),n]}),r]}),yye=({initialPlan:t,onSave:e,onCancel:r})=>{const[n,a]=ne.useState(t||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[s,i]=ne.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""}),[o,c]=ne.useState({nombre:"",fecha:""}),[u,f]=ne.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""}),[m,p]=ne.useState(!1),[g,b]=ne.useState(!1),[y,T]=ne.useState(!1);ne.useEffect(()=>{a(t||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[t]);const k=async _=>{if(!n.descripcionProyecto.trim()){alert("Por favor, ingrese una descripción del proyecto para usar la IA.");return}_==="objetivos"?p(!0):b(!0);const B="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";let Q="";_==="objetivos"?Q=`Basado en la siguiente descripción de un proyecto escolar interdisciplinario, genera 3 a 5 objetivos de aprendizaje claros, medibles y concisos. La respuesta debe ser solo el texto de los objetivos, formateado en una lista con guiones.
            Descripción del Proyecto: "${n.descripcionProyecto}"`:Q=`Basado en la siguiente descripción y objetivos de un proyecto escolar interdisciplinario, genera una lista de 5 a 7 indicadores de logro concretos y observables que permitan evaluar el cumplimiento de los objetivos. La respuesta debe ser solo el texto de los indicadores, formateado en una lista con guiones.
            Descripción del Proyecto: "${n.descripcionProyecto}"
            Objetivos (si existen): "${n.objetivos||"Aún no definidos, genéralos a partir de la descripción."}"`;try{const oe=(await(await new Xi(B).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(Q)).response).text();a(te=>({...te,[_]:oe.replace(/(\*\*|\*)/g,"")}))}catch(R){console.error(`Error al generar ${_}`,R),alert(`Hubo un error al generar los ${_}. Inténtelo de nuevo.`)}finally{_==="objetivos"?p(!1):b(!1)}},D=async()=>{if(!n.descripcionProyecto.trim()){alert("Por favor, ingrese una descripción del proyecto para usar la IA.");return}T(!0);const _="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",B=`
            Basado en la descripción de un proyecto escolar, genera una estructura completa. La respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            Descripción del proyecto: "${n.descripcionProyecto}"
            Docentes responsables: "${n.docentesResponsables}"
            Asignaturas involucradas: "${n.asignaturas.join(", ")}"

            El JSON debe tener tres claves: 'actividades', 'fechasClave', y 'tareas'.
            1. 'actividades': Un array de 3 a 5 objetos. Cada objeto debe tener: "nombre" (string), "fechaInicio" (string "YYYY-MM-DD"), "fechaFin" (string "YYYY-MM-DD"), y "responsables" (string, uno de los docentes).
            2. 'fechasClave': Un array de 2 a 3 objetos (hitos importantes). Cada objeto debe tener: "nombre" (string) y "fecha" (string "YYYY-MM-DD").
            3. 'tareas': Un array de 2 a 3 objetos (tareas para estudiantes). Cada objeto debe tener: "instrucciones" (string detallado) y "fechaEntrega" (string "YYYY-MM-DD").
            Las fechas deben ser lógicas y secuenciales. Asume que el proyecto comienza hoy.
        `;try{const oe=(await(await new Xi(_).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(B)).response).text().replace(/^```json\s*|```\s*$/g,""),te=JSON.parse(oe);a(ae=>{var q,J,W;return{...ae,actividades:((q=te.actividades)==null?void 0:q.map(de=>({...de,id:crypto.randomUUID()})))||ae.actividades,fechasClave:((J=te.fechasClave)==null?void 0:J.map(de=>({...de,id:crypto.randomUUID()})))||ae.fechasClave,tareas:((W=te.tareas)==null?void 0:W.map((de,P)=>({...de,id:crypto.randomUUID(),numero:P+1})))||ae.tareas}})}catch(Q){console.error("Error al generar la estructura del proyecto:",Q),alert("No se pudo generar la estructura del proyecto. Intente de nuevo.")}finally{T(!1)}},L=_=>{a(B=>({...B,[_.target.name]:_.target.value}))},j=(_,B)=>{a(Q=>{const R=Q[_],F=R.includes(B)?R.filter(V=>V!==B):[...R,B];return{...Q,[_]:F}})},H=()=>{if(!s.nombre||!s.fechaInicio||!s.fechaFin){alert("Nombre y fechas son obligatorios para la actividad.");return}a(_=>({..._,actividades:[..._.actividades||[],{...s,id:crypto.randomUUID()}]})),i({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""})},U=()=>{!o.nombre||!o.fecha||(a(_=>({..._,fechasClave:[..._.fechasClave||[],{...o,id:crypto.randomUUID()}]})),c({nombre:"",fecha:""}))},E=()=>{var B;if(!u.instrucciones||!u.fechaEntrega){alert("Instrucciones y fecha son obligatorios para la tarea.");return}const _={id:crypto.randomUUID(),numero:(((B=n.tareas)==null?void 0:B.length)||0)+1,...u};a(Q=>({...Q,tareas:[...Q.tareas||[],_]})),f({instrucciones:"",fechaEntrega:"",recursoUrl:""})};return l.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:[l.jsx("div",{className:"text-center mb-12",children:l.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-slate-800 dark:text-slate-200",children:t?"Editando Proyecto":"Nuevo Proyecto Interdisciplinario"})}),l.jsxs("div",{className:"space-y-6",children:[l.jsx(ud,{icon:l.jsx(fye,{}),label:"Nombre del Proyecto",children:l.jsx("input",{name:"nombreProyecto",value:n.nombreProyecto,onChange:L,placeholder:"Ingrese el nombre del proyecto...",className:"w-full mt-1 bg-transparent text-lg font-semibold focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),l.jsx(ud,{icon:l.jsx(hye,{}),label:"Profesores",children:l.jsx("input",{name:"docentesResponsables",value:n.docentesResponsables,onChange:L,placeholder:"Ingrese nombres separados por comas...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),l.jsx(ud,{icon:l.jsx(mye,{}),label:"Cursos",children:l.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2 mt-2",children:Za.map(_=>l.jsx("button",{type:"button",onClick:()=>j("cursos",_),className:`w-full text-center p-2 rounded-md text-sm transition-colors ${n.cursos.includes(_)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:_},_))})}),l.jsx(ud,{icon:l.jsx(pye,{}),label:"Asignaturas",children:l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 mt-2",children:Xo.map(_=>l.jsx("button",{type:"button",onClick:()=>j("asignaturas",_),className:`w-full text-left p-2 rounded-md text-sm transition-colors ${n.asignaturas.includes(_)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:_},_))})}),l.jsx(ud,{icon:l.jsx(gye,{}),label:"Descripción del Proyecto",children:l.jsx("textarea",{name:"descripcionProyecto",value:n.descripcionProyecto,onChange:L,placeholder:"Detalle aquí la metodología, el producto final esperado y el propósito del proyecto. Esta información es clave para la IA.",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[100px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),l.jsx(ud,{icon:l.jsx(xye,{}),label:"Objetivos",aiButton:l.jsx("button",{type:"button",onClick:()=>k("objetivos"),disabled:!n.descripcionProyecto.trim()||m,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:l.jsx(t_,{})}),children:m?l.jsx("div",{className:"p-4 text-center",children:"Generando..."}):l.jsx("textarea",{name:"objetivos",value:n.objetivos,onChange:L,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),l.jsx(ud,{icon:l.jsx(vye,{}),label:"Indicadores de Éxito",aiButton:l.jsx("button",{type:"button",onClick:()=>k("indicadoresLogro"),disabled:!n.descripcionProyecto.trim()||g,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:l.jsx(t_,{})}),children:g?l.jsx("div",{className:"p-4 text-center",children:"Generando..."}):l.jsx("textarea",{name:"indicadoresLogro",value:n.indicadoresLogro,onChange:L,placeholder:"Liste los indicadores de logro o evaluación...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),l.jsx(ud,{icon:l.jsx(wye,{}),label:"Carta Gantt",children:l.jsxs("div",{className:"space-y-4 mt-2",children:[l.jsx("div",{className:"text-center border-b pb-4 mb-4 dark:border-slate-700",children:l.jsx("button",{type:"button",onClick:D,disabled:y||!n.descripcionProyecto,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:y?"Generando...":"✨ Sugerir Estructura con IA"})}),l.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[l.jsx("h4",{className:"text-sm font-semibold",children:"Actividades"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2 items-end",children:[l.jsx("input",{value:s.nombre,onChange:_=>i({...s,nombre:_.target.value}),placeholder:"Nombre",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),l.jsx("input",{type:"date",value:s.fechaInicio,onChange:_=>i({...s,fechaInicio:_.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),l.jsx("input",{type:"date",value:s.fechaFin,onChange:_=>i({...s,fechaFin:_.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:H,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),l.jsx("ul",{className:"text-xs",children:n.actividades.map(_=>l.jsx("li",{children:_.nombre},_.id))})]}),l.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[l.jsx("h4",{className:"text-sm font-semibold",children:"Fechas Clave (Hitos)"}),l.jsxs("div",{className:"grid grid-cols-3 gap-2 items-end",children:[l.jsx("input",{value:o.nombre,onChange:_=>c({...o,nombre:_.target.value}),placeholder:"Hito",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 col-span-1"}),l.jsx("input",{type:"date",value:o.fecha,onChange:_=>c({...o,fecha:_.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:U,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),l.jsx("ul",{className:"text-xs",children:n.fechasClave.map(_=>l.jsxs("li",{children:[_.nombre," (",_.fecha,")"]},_.id))})]}),l.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[l.jsx("h4",{className:"text-sm font-semibold",children:"Tareas para Estudiantes"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 items-end",children:[l.jsx("input",{value:u.instrucciones,onChange:_=>f({...u,instrucciones:_.target.value}),placeholder:"Instrucciones",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),l.jsx("input",{type:"date",value:u.fechaEntrega,onChange:_=>f({...u,fechaEntrega:_.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{type:"button",onClick:E,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),l.jsx("ul",{className:"text-xs",children:(n.tareas||[]).map(_=>l.jsxs("li",{children:[_.numero,". ",_.instrucciones]},_.id))})]})]})}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6",children:[l.jsx("button",{onClick:r,className:"px-8 py-3 bg-slate-200 text-slate-700 rounded-lg font-semibold hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),l.jsx("button",{onClick:()=>e(n),className:"px-8 py-3 bg-slate-800 text-white rounded-lg font-semibold hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:t?"Guardar Cambios":"Guardar Proyecto"})]})]})]})},e6=()=>{const[t,e]=ne.useState([]),[r,n]=ne.useState(!0),[a,s]=ne.useState("list"),[i,o]=ne.useState(null),[c,u]=ne.useState(null),[f,m]=ne.useState(null);ne.useEffect(()=>{n(!0);const L=oye(j=>{e(j),n(!1)});return()=>L()},[]);const p=ne.useCallback(async(L,j)=>{const H=t.find(U=>U.id===L);if(H){const U={...H,actividades:(H.actividades||[]).map(E=>E.id===j.id?j:E)};await XF(L,U)}},[t]),g=async L=>{try{"id"in L&&L.id?await XF(L.id,L):await lye(L),s("list"),o(null)}catch(j){console.error("Error al guardar la planificación:",j),alert("No se pudo guardar la planificación.")}},b=L=>{o(L),s("form")},y=async L=>{if(console.log("ID recibido por handleDelete:",L),!L){console.error("handleDelete fue llamado con un ID inválido:",L),alert("Error: No se puede eliminar un proyecto sin un ID válido.");return}if(window.confirm("¿Está seguro de eliminar esta planificación?"))try{await cye(L)}catch(j){console.error("Error al eliminar la planificación:",j),alert("No se pudo eliminar la planificación.")}},T=()=>{o(null),s("form")},k=async L=>{u(L.id);const j=new ir("p","mm","a4"),H=15,U=j.internal.pageSize.getWidth(),E=j.internal.pageSize.getHeight(),_=U-H*2;let B=H;const Q=22,R=14,F=11,V=()=>{j.setFont("helvetica","normal"),j.setFontSize(9),j.setTextColor(150),j.text("Proyecto Interdisciplinario",H,12),j.text("Liceo Industrial de Recoleta",U-H,12,{align:"right"}),j.setDrawColor(220),j.line(H,15,U-H,15)},X=J=>{B+J>E-H&&(j.addPage(),V(),B=H+15)},oe=(J,W)=>{if(!W||Array.isArray(W)&&W.length===0||typeof W=="string"&&!W.trim())return;const de=10;j.setFontSize(F);const P=Array.isArray(W)?W.join(", "):String(W),K=j.splitTextToSize(P,_),Y=K.length*(F*.35*1.15);X(de+Y+12),j.setFont("helvetica","bold"),j.setFontSize(R),j.setTextColor(40),j.text(J,H,B),B+=6,j.setDrawColor(200),j.line(H,B,H+30,B),B+=8,j.setFont("helvetica","normal"),j.setFontSize(F),j.setTextColor(80),j.text(K,H,B),B+=Y+12};V(),B=H+20,j.setFont("helvetica","bold"),j.setFontSize(Q),j.setTextColor(0);const te=j.splitTextToSize(L.nombreProyecto,_);if(j.text(te,H,B),B+=te.length*(Q*.4)+10,Yo(j,{startY:B,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},L.docentesResponsables],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},L.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},L.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:F,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold"}}}),B=j.lastAutoTable.finalY+15,oe("Descripción del Proyecto",L.descripcionProyecto),oe("Objetivos de Aprendizaje",L.objetivos),oe("Indicadores de Logro",L.indicadoresLogro),L.tareas&&L.tareas.length>0){const J=L.tareas.map(de=>[de.numero.toString(),de.instrucciones,de.fechaEntrega]),W=(J.length+1)*10+15;X(W+15),j.setFont("helvetica","bold"),j.setFontSize(R),j.setTextColor(40),j.text("Tareas para Estudiantes",H,B),B+=10,Yo(j,{startY:B,head:[["#","Instrucciones","Fecha de Entrega"]],body:J,theme:"striped",headStyles:{fillColor:[52,73,94]}}),B=j.lastAutoTable.finalY+15}const ae=document.getElementById("gantt-container-vertical");if(ae)try{const W=(await FP(ae,{scale:2,backgroundColor:"#ffffff"})).toDataURL("image/png");j.addPage(),V(),B=H+15,j.setFont("helvetica","bold"),j.setFontSize(R),j.setTextColor(40),j.text("Cronograma del Proyecto",H,B),B+=10;const de=j.getImageProperties(W),P=_,K=de.height*P/de.width;j.addImage(W,"PNG",H,B,P,K)}catch(J){console.error("Error generating timeline image:",J)}const q=j.internal.pages.length-1;for(let J=1;J<=q;J++)j.setPage(J),j.setFont("helvetica","normal"),j.setFontSize(9),j.setTextColor(150),j.text(`Página ${J} de ${q}`,U-H,j.internal.pageSize.getHeight()-10,{align:"right"});j.save(`Proyecto_${L.nombreProyecto.replace(/\s/g,"_")}.pdf`),u(null)},D=({plan:L,onBack:j})=>{var oe,te;const[H,U]=ne.useState([]),[E,_]=ne.useState([]),[B,Q]=ne.useState(((oe=L.tareas)==null?void 0:oe[0])||null),[R,F]=ne.useState(null);ne.useEffect(()=>{const ae=uye(U),q=Aye(L.id,_);return()=>{ae(),q()}},[L.id]);const V=ne.useMemo(()=>H.filter(ae=>ae.profile===Pt.ESTUDIANTE&&L.cursos.includes(ae.curso||"")).sort((ae,q)=>ae.nombreCompleto.localeCompare(q.nombreCompleto)),[H,L.cursos]),X=async ae=>{var W;F(ae.id);const q="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",J=`
                Eres un profesor asistente. Genera una retroalimentación constructiva para la entrega de un estudiante.
                - Instrucciones de la tarea: "${B==null?void 0:B.instrucciones}"
                - Comentario del estudiante: "${ae.observacionesEstudiante||"No dejó comentarios."}"
                - Enlace entregado: "${ae.enlaceUrl||"No aplica"}"
                - Archivo entregado: "${((W=ae.archivoAdjunto)==null?void 0:W.nombre)||"No aplica"}"
                
                La retroalimentación debe ser breve (2-3 frases), motivadora, y enfocada en cómo podría mejorar.
            `;try{const ee=(await(await new Xi(q).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(J)).response).text().replace(/(\*\*|\*)/g,"");await ZF(ae.id,ee)}catch(de){console.error("Error al generar feedback con IA:",de),alert("No se pudo generar la retroalimentación.")}finally{F(null)}};return B?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("h2",{className:"text-2xl font-bold text-slate-800",children:["Entregas de Tareas: ",L.nombreProyecto]}),l.jsx("button",{onClick:j,className:"font-semibold",children:"← Volver a Proyectos"})]}),l.jsx("select",{value:B.id,onChange:ae=>{var q;return Q(((q=L.tareas)==null?void 0:q.find(J=>J.id===ae.target.value))||null)},className:"mb-4 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600",children:(te=L.tareas)==null?void 0:te.map(ae=>l.jsxs("option",{value:ae.id,children:["Tarea ",ae.numero,": ",ae.instrucciones]},ae.id))}),l.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:V.map(ae=>{const q=E.find(J=>J.tareaId===B.id&&J.estudianteId===ae.id);return l.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[l.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[ae.nombreCompleto," - ",q!=null&&q.completada?l.jsx("span",{className:"text-green-600",children:"Entregado"}):l.jsx("span",{className:"text-red-600",children:"Pendiente"})]}),q?l.jsxs("div",{className:"text-sm mt-2 space-y-2",children:[q.observacionesEstudiante&&l.jsxs("p",{children:[l.jsx("strong",{children:"Comentario:"})," ",q.observacionesEstudiante]}),q.enlaceUrl&&l.jsxs("p",{children:[l.jsx("strong",{children:"Enlace:"})," ",l.jsx("a",{href:q.enlaceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:q.enlaceUrl})]}),q.archivoAdjunto&&l.jsxs("p",{children:[l.jsx("strong",{children:"Archivo:"})," ",l.jsx("a",{href:q.archivoAdjunto.url,download:q.archivoAdjunto.nombre,className:"text-blue-500 hover:underline",children:q.archivoAdjunto.nombre})]}),l.jsxs("div",{className:"flex items-end gap-2",children:[l.jsx("textarea",{placeholder:"Escribir retroalimentación...",defaultValue:q.feedbackProfesor||"",onBlur:J=>ZF(q.id,J.target.value),rows:2,className:"w-full mt-2 p-1 border rounded-md dark:bg-slate-700 dark:border-slate-600 flex-grow"},q.id),l.jsx("button",{onClick:()=>X(q),disabled:R===q.id,className:"p-2 rounded-md hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50",title:"Generar Feedback con IA",children:R===q.id?"...":l.jsx(t_,{})})]})]}):l.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"El estudiante aún no ha realizado la entrega."})]},ae.id)})})]}):l.jsx("div",{className:"text-center p-8",children:"Este proyecto no tiene tareas asignadas."})};return r?l.jsx("div",{className:"text-center py-10",children:"Cargando proyectos..."}):f?l.jsx(D,{plan:f,onBack:()=>m(null)}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[a==="list"?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Proyectos Interdisciplinarios"}),l.jsx("button",{onClick:T,className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Crear Nuevo"})]}),l.jsx("div",{className:"space-y-4",children:t.map(L=>(console.log("Inspeccionando objeto plan:",L),l.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:L.nombreProyecto}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Cursos: ",(L.cursos||[]).join(", ")]})]}),l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("button",{onClick:()=>m(L),className:"text-green-600 hover:text-green-800 dark:text-green-400 font-semibold text-sm",children:"Ver Entregas"}),l.jsx("button",{onClick:()=>k(L),disabled:c===L.id,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm disabled:opacity-50",children:c===L.id?"Exportando...":"Exportar PDF"}),l.jsx("button",{onClick:()=>b(L),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Editar"}),l.jsx("button",{onClick:()=>y(L.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]})},L.id)))})]}):l.jsx(yye,{initialPlan:i,onSave:g,onCancel:()=>{s("list"),o(null)}}),t.length>0&&l.jsx("div",{id:"gantt-container-vertical",children:l.jsx(dye,{planificaciones:t,onActivityUpdate:p})})]})},xC="pañolMaquinas",t6="pañolRegistros",bye=()=>{const[t,e]=ne.useState([]),[r,n]=ne.useState([]),a={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[s,i]=ne.useState(a),[o,c]=ne.useState(null),u={nombre:"",especialidad:"Industrial"},[f,m]=ne.useState(u),[p,g]=ne.useState(null),[b,y]=ne.useState({maquinaId:"",curso:"",profesor:"",fecha:""});ne.useEffect(()=>{try{const F=localStorage.getItem(xC);if(F&&JSON.parse(F).length>0)e(JSON.parse(F));else{const X=[{id:crypto.randomUUID(),nombre:"Torno",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Fresadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora MIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora TIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Torno CNC",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Elevador",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Compresor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta de motor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta hidráulica",especialidad:"Automotriz"}];e(X),localStorage.setItem(xC,JSON.stringify(X))}const V=localStorage.getItem(t6);V&&n(JSON.parse(V))}catch(F){console.error("Error al cargar datos de Pañol desde localStorage",F)}},[]);const T=ne.useCallback(F=>{e(F),localStorage.setItem(xC,JSON.stringify(F))},[]),k=ne.useCallback(F=>{n(F),localStorage.setItem(t6,JSON.stringify(F))},[]),D=F=>{F.preventDefault(),f.nombre.trim()&&(T(p?t.map(V=>V.id===p.id?{...p,...f}:V):[{...f,id:crypto.randomUUID()},...t]),m(u),g(null))},L=ne.useCallback(F=>{if(r.some(V=>V.maquinaId===F)){alert("No se puede eliminar una máquina con registros de uso. Elimine los registros primero.");return}window.confirm("¿Eliminar esta máquina?")&&T(t.filter(V=>V.id!==F))},[t,r,T]),j=F=>{F.preventDefault();const V=o||s;if(!V.curso||!V.profesorResponsable.trim()||!V.maquinaId||V.totalHoras<=0){alert("Curso, Profesor, Máquina y un Total de Horas mayor a cero son obligatorios.");return}k(o?r.map(X=>X.id===o.id?o:X):[{...s,id:crypto.randomUUID()},...r]),i(a),c(null)},H=ne.useCallback(F=>{window.confirm("¿Eliminar este registro de uso?")&&k(r.filter(V=>V.id!==F))},[r,k]),U=ne.useMemo(()=>r.filter(F=>(b.maquinaId===""||F.maquinaId===b.maquinaId)&&(b.curso===""||F.curso===b.curso)&&(b.profesor===""||F.profesorResponsable.toLowerCase().includes(b.profesor.toLowerCase()))&&(b.fecha===""||F.fecha===b.fecha)).sort((F,V)=>new Date(V.fecha).getTime()-new Date(F.fecha).getTime()),[r,b]),E=ne.useMemo(()=>new Map(t.map(F=>[F.id,F])),[t]),_=()=>{const F=U.map(oe=>{var te,ae;return{Fecha:oe.fecha,Curso:oe.curso,Profesor:oe.profesorResponsable,Máquina:((te=E.get(oe.maquinaId))==null?void 0:te.nombre)||"N/A",Especialidad:((ae=E.get(oe.maquinaId))==null?void 0:ae.especialidad)||"N/A","Total Horas":oe.totalHoras,Observaciones:oe.observaciones}}),V=Dl.json_to_sheet(F),X=Dl.book_new();Dl.book_append_sheet(X,V,"RegistrosPañol"),sS(X,"Registros_Pañol.xlsx")},B=()=>{const F=new ir;Yo(F,{head:[["Fecha","Curso","Profesor","Máquina","Especialidad","Total Horas","Observaciones"]],body:U.map(V=>{var X,oe;return[V.fecha,V.curso,V.profesorResponsable,((X=E.get(V.maquinaId))==null?void 0:X.nombre)||"N/A",((oe=E.get(V.maquinaId))==null?void 0:oe.especialidad)||"N/A",V.totalHoras,V.observaciones]}),margin:{top:20,right:10,bottom:20,left:10},didDrawPage:V=>{F.setFontSize(10),F.setFont("helvetica","bold"),F.text("LICEO INDUSTRIAL DE RECOLETA",V.settings.margin.left,15)}}),F.save("Registros_Pañol.pdf")},Q="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",R=()=>{const F=o||s,V=o?c:i;return l.jsxs("form",{onSubmit:j,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium",children:"Fecha"}),l.jsx("input",{name:"fecha",type:"date",value:F.fecha,onChange:X=>V({...F,fecha:X.target.value}),className:Q,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium",children:"Curso"}),l.jsxs("select",{name:"curso",value:F.curso,onChange:X=>V({...F,curso:X.target.value}),className:Q,required:!0,children:[l.jsx("option",{value:"",children:"Curso"}),Za.map(X=>l.jsx("option",{children:X},X))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium",children:"Profesor"}),l.jsxs("select",{name:"profesorResponsable",value:F.profesorResponsable,onChange:X=>V({...F,profesorResponsable:X.target.value}),className:Q,required:!0,children:[l.jsx("option",{value:"",children:"Profesor Responsable"}),qC.map(X=>l.jsx("option",{value:X,children:X},X))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium",children:"Máquina"}),l.jsxs("select",{name:"maquinaId",value:F.maquinaId,onChange:X=>V({...F,maquinaId:X.target.value}),className:Q,required:!0,children:[l.jsx("option",{value:"",children:"Máquina"}),t.map(X=>l.jsx("option",{value:X.id,children:X.nombre},X.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium",children:"Total de Horas"}),l.jsx("input",{name:"totalHoras",type:"number",value:F.totalHoras,onChange:X=>V({...F,totalHoras:Number(X.target.value)}),className:Q,required:!0,min:"0.5",step:"0.5"})]}),l.jsxs("div",{className:"lg:col-span-3",children:[l.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),l.jsx("textarea",{name:"observaciones",value:F.observaciones,onChange:X=>V({...F,observaciones:X.target.value}),placeholder:"Observaciones...",className:`${Q}`,rows:1})]})]}),l.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o&&l.jsx("button",{type:"button",onClick:()=>c(null),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:o?"Actualizar":"Registrar"})]})]})};return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Pañol: Registro de Uso de Máquinas"}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-3 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:o?`Editando Registro #${o.id.substring(0,4)}`:"Nuevo Registro de Uso"}),R()]}),l.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Administrar Máquinas"}),l.jsxs("form",{onSubmit:D,className:"flex gap-2 mb-4",children:[l.jsx("input",{value:f.nombre,onChange:F=>m({...f,nombre:F.target.value}),placeholder:"Nombre máquina",className:Q}),l.jsxs("select",{value:f.especialidad,onChange:F=>m({...f,especialidad:F.target.value}),className:Q,children:[l.jsx("option",{value:"Industrial",children:"Industrial"}),l.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),l.jsx("button",{type:"submit",className:"bg-slate-200 p-2 rounded-lg font-bold",children:p?"✓":"+"})]}),l.jsx("ul",{className:"space-y-2 max-h-60 overflow-y-auto",children:t.map(F=>l.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[l.jsxs("span",{children:[F.nombre," ",l.jsxs("span",{className:"text-xs text-slate-500",children:["(",F.especialidad,")"]})]}),l.jsxs("div",{className:"space-x-2",children:[l.jsx("button",{onClick:()=>{g(F),m(F)},className:"text-blue-500",children:"✏️"}),l.jsx("button",{onClick:()=>L(F.id),className:"text-red-500",children:"🗑️"})]})]},F.id))})]}),l.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Historial de Uso"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:_,className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),l.jsx("button",{onClick:B,className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[l.jsx("input",{type:"date",value:b.fecha,onChange:F=>y({...b,fecha:F.target.value}),className:Q}),l.jsxs("select",{value:b.curso,onChange:F=>y({...b,curso:F.target.value}),className:Q,children:[l.jsx("option",{value:"",children:"Todos los Cursos"}),Za.map(F=>l.jsx("option",{children:F},F))]}),l.jsxs("select",{value:b.maquinaId,onChange:F=>y({...b,maquinaId:F.target.value}),className:Q,children:[l.jsx("option",{value:"",children:"Todas las Máquinas"}),t.map(F=>l.jsx("option",{value:F.id,children:F.nombre},F.id))]}),l.jsx("input",{value:b.profesor,onChange:F=>y({...b,profesor:F.target.value}),placeholder:"Buscar profesor...",className:Q})]}),l.jsx("div",{className:"max-h-96 overflow-y-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Máquina"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Profesor"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Total Horas"}),l.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-500 uppercase",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:U.map(F=>{var V;return l.jsxs("tr",{children:[l.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:F.fecha}),l.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((V=E.get(F.maquinaId))==null?void 0:V.nombre)||"N/A"}),l.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[F.profesorResponsable," (",F.curso,")"]}),l.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:F.totalHoras}),l.jsxs("td",{className:"px-3 py-2 text-center",children:[l.jsx("button",{onClick:()=>c(F),className:"text-blue-500",children:"✏️"}),l.jsx("button",{onClick:()=>H(F.id),className:"text-red-500 ml-2",children:"🗑️"})]})]},F.id)})})]})})]})]})]})},RP="recursos_crucigramas",Qw="recursos_lineas_de_tiempo",LP="recursos_sopas_de_letras",bS=t=>{var r,n,a,s;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion,createdAt:((s=(a=e.createdAt)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||e.createdAt}},Cye=t=>{const e=er(Nt(Tt,RP),fn("fechaCreacion","desc"));return br(e,r=>{const n=r.docs.map(a=>bS(a));t(n)},r=>{console.error("Error al suscribirse a los crucigramas:",r),t([])})},Eye=async(t,e)=>{try{const r={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,fechaCreacion:Ar.fromDate(new Date)};return(await Sa(Nt(Tt,RP),r)).id}catch(r){throw console.error("Error al guardar el crucigrama:",r),new Error("No se pudo guardar el crucigrama.")}},_ye=t=>{const e=er(Nt(Tt,Qw),fn("createdAt","desc"));return br(e,r=>{const n=r.docs.map(a=>bS(a));t(n)},r=>{console.error("Error al suscribirse a las líneas de tiempo:",r),t([])})},Sye=async(t,e)=>{try{const{id:r,...n}=t,a=_r(Tt,Qw,r);await Zi(a,{...n,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:Ar.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar la línea de tiempo:",r),new Error("No se pudo guardar la línea de tiempo.")}},Tye=async(t,e)=>{try{const r={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:Ar.fromDate(new Date)};return(await Sa(Nt(Tt,Qw),r)).id}catch(r){throw console.error("Error al crear la línea de tiempo:",r),new Error("No se pudo crear la línea de tiempo.")}},Bye=async t=>{try{const e=_r(Tt,Qw,t);await Oi(e)}catch(e){throw console.error("Error al eliminar la línea de tiempo:",e),new Error("No se pudo eliminar la línea de tiempo.")}},Nye=t=>{const e=er(Nt(Tt,LP),fn("createdAt","desc"));return br(e,r=>{const n=r.docs.map(a=>bS(a));t(n)},r=>{console.error("Error al suscribirse a las sopas de letras:",r),t([])})},kye=async(t,e)=>{try{const r={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:Ar.fromDate(new Date)};return(await Sa(Nt(Tt,LP),r)).id}catch(r){throw console.error("Error al guardar la sopa de letras:",r),new Error("No se pudo guardar la sopa de letras.")}},Iye=({onBack:t,currentUser:e})=>{};function Fye(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const r=document.implementation.createHTMLDocument(),n=r.createElement("base"),a=r.createElement("a");return r.head.appendChild(n),r.body.appendChild(a),e&&(n.href=e),a.href=t,a.href}const Dye=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function Ud(t){const e=[];for(let r=0,n=t.length;r<n;r++)e.push(t[r]);return e}let c0=null;function UP(t={}){return c0||(t.includeStyleProperties?(c0=t.includeStyleProperties,c0):(c0=Ud(window.getComputedStyle(document.documentElement)),c0))}function I2(t,e){const n=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return n?parseFloat(n.replace("px","")):0}function Rye(t){const e=I2(t,"border-left-width"),r=I2(t,"border-right-width");return t.clientWidth+e+r}function Lye(t){const e=I2(t,"border-top-width"),r=I2(t,"border-bottom-width");return t.clientHeight+e+r}function MP(t,e={}){const r=e.width||Rye(t),n=e.height||Lye(t);return{width:r,height:n}}function Uye(){let t,e;try{e=process}catch{}const r=e&&e.env?e.env.devicePixelRatio:null;return r&&(t=parseInt(r,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const Vo=16384;function Mye(t){(t.width>Vo||t.height>Vo)&&(t.width>Vo&&t.height>Vo?t.width>t.height?(t.height*=Vo/t.width,t.width=Vo):(t.width*=Vo/t.height,t.height=Vo):t.width>Vo?(t.height*=Vo/t.width,t.width=Vo):(t.width*=Vo/t.height,t.height=Vo))}function F2(t){return new Promise((e,r)=>{const n=new Image;n.onload=()=>{n.decode().then(()=>{requestAnimationFrame(()=>e(n))})},n.onerror=r,n.crossOrigin="anonymous",n.decoding="async",n.src=t})}async function Pye(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function jye(t,e,r){const n="http://www.w3.org/2000/svg",a=document.createElementNS(n,"svg"),s=document.createElementNS(n,"foreignObject");return a.setAttribute("width",`${e}`),a.setAttribute("height",`${r}`),a.setAttribute("viewBox",`0 0 ${e} ${r}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),a.appendChild(s),s.appendChild(t),Pye(a)}const Co=(t,e)=>{if(t instanceof e)return!0;const r=Object.getPrototypeOf(t);return r===null?!1:r.constructor.name===e.name||Co(r,e)};function Oye(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function Qye(t,e){return UP(e).map(r=>{const n=t.getPropertyValue(r),a=t.getPropertyPriority(r);return`${r}: ${n}${a?" !important":""};`}).join(" ")}function Hye(t,e,r,n){const a=`.${t}:${e}`,s=r.cssText?Oye(r):Qye(r,n);return document.createTextNode(`${a}{${s}}`)}function r6(t,e,r,n){const a=window.getComputedStyle(t,r),s=a.getPropertyValue("content");if(s===""||s==="none")return;const i=Dye();try{e.className=`${e.className} ${i}`}catch{return}const o=document.createElement("style");o.appendChild(Hye(i,r,a,n)),e.appendChild(o)}function Vye(t,e,r){r6(t,e,":before",r),r6(t,e,":after",r)}const n6="application/font-woff",a6="image/jpeg",Gye={woff:n6,woff2:n6,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:a6,jpeg:a6,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function zye(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function CS(t){const e=zye(t).toLowerCase();return Gye[e]||""}function qye(t){return t.split(/,/)[1]}function r_(t){return t.search(/^(data:)/)!==-1}function Kye(t,e){return`data:${e};base64,${t}`}async function PP(t,e,r){const n=await fetch(t,e);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const a=await n.blob();return new Promise((s,i)=>{const o=new FileReader;o.onerror=i,o.onloadend=()=>{try{s(r({res:n,result:o.result}))}catch(c){i(c)}},o.readAsDataURL(a)})}const vC={};function Wye(t,e,r){let n=t.replace(/\?.*/,"");return r&&(n=t),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),e?`[${e}]${n}`:n}async function ES(t,e,r){const n=Wye(t,e,r.includeQueryParams);if(vC[n]!=null)return vC[n];r.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let a;try{const s=await PP(t,r.fetchRequestInit,({res:i,result:o})=>(e||(e=i.headers.get("Content-Type")||""),qye(o)));a=Kye(s,e)}catch(s){a=r.imagePlaceholder||"";let i=`Failed to fetch resource: ${t}`;s&&(i=typeof s=="string"?s:s.message),i&&console.warn(i)}return vC[n]=a,a}async function $ye(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):F2(e)}async function Jye(t,e){if(t.currentSrc){const s=document.createElement("canvas"),i=s.getContext("2d");s.width=t.clientWidth,s.height=t.clientHeight,i==null||i.drawImage(t,0,0,s.width,s.height);const o=s.toDataURL();return F2(o)}const r=t.poster,n=CS(r),a=await ES(r,n,e);return F2(a)}async function Yye(t,e){var r;try{if(!((r=t==null?void 0:t.contentDocument)===null||r===void 0)&&r.body)return await Hw(t.contentDocument.body,e,!0)}catch{}return t.cloneNode(!1)}async function Xye(t,e){return Co(t,HTMLCanvasElement)?$ye(t):Co(t,HTMLVideoElement)?Jye(t,e):Co(t,HTMLIFrameElement)?Yye(t,e):t.cloneNode(jP(t))}const Zye=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT",jP=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SVG";async function ebe(t,e,r){var n,a;if(jP(e))return e;let s=[];return Zye(t)&&t.assignedNodes?s=Ud(t.assignedNodes()):Co(t,HTMLIFrameElement)&&(!((n=t.contentDocument)===null||n===void 0)&&n.body)?s=Ud(t.contentDocument.body.childNodes):s=Ud(((a=t.shadowRoot)!==null&&a!==void 0?a:t).childNodes),s.length===0||Co(t,HTMLVideoElement)||await s.reduce((i,o)=>i.then(()=>Hw(o,r)).then(c=>{c&&e.appendChild(c)}),Promise.resolve()),e}function tbe(t,e,r){const n=e.style;if(!n)return;const a=window.getComputedStyle(t);a.cssText?(n.cssText=a.cssText,n.transformOrigin=a.transformOrigin):UP(r).forEach(s=>{let i=a.getPropertyValue(s);s==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),Co(t,HTMLIFrameElement)&&s==="display"&&i==="inline"&&(i="block"),s==="d"&&e.getAttribute("d")&&(i=`path(${e.getAttribute("d")})`),n.setProperty(s,i,a.getPropertyPriority(s))})}function rbe(t,e){Co(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),Co(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function nbe(t,e){if(Co(t,HTMLSelectElement)){const r=e,n=Array.from(r.children).find(a=>t.value===a.getAttribute("value"));n&&n.setAttribute("selected","")}}function abe(t,e,r){return Co(e,Element)&&(tbe(t,e,r),Vye(t,e,r),rbe(t,e),nbe(t,e)),e}async function sbe(t,e){const r=t.querySelectorAll?t.querySelectorAll("use"):[];if(r.length===0)return t;const n={};for(let s=0;s<r.length;s++){const o=r[s].getAttribute("xlink:href");if(o){const c=t.querySelector(o),u=document.querySelector(o);!c&&u&&!n[o]&&(n[o]=await Hw(u,e,!0))}}const a=Object.values(n);if(a.length){const s="http://www.w3.org/1999/xhtml",i=document.createElementNS(s,"svg");i.setAttribute("xmlns",s),i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.style.display="none";const o=document.createElementNS(s,"defs");i.appendChild(o);for(let c=0;c<a.length;c++)o.appendChild(a[c]);t.appendChild(i)}return t}async function Hw(t,e,r){return!r&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(n=>Xye(n,e)).then(n=>ebe(t,n,e)).then(n=>abe(t,n,e)).then(n=>sbe(n,e))}const OP=/url\((['"]?)([^'"]+?)\1\)/g,ibe=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,obe=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function lbe(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function cbe(t){const e=[];return t.replace(OP,(r,n,a)=>(e.push(a),r)),e.filter(r=>!r_(r))}async function Abe(t,e,r,n,a){try{const s=r?Fye(e,r):e,i=CS(e);let o;return a||(o=await ES(s,i,n)),t.replace(lbe(e),`$1${o}$3`)}catch{}return t}function ube(t,{preferredFontFormat:e}){return e?t.replace(obe,r=>{for(;;){const[n,,a]=ibe.exec(r)||[];if(!a)return"";if(a===e)return`src: ${n};`}}):t}function QP(t){return t.search(OP)!==-1}async function HP(t,e,r){if(!QP(t))return t;const n=ube(t,r);return cbe(n).reduce((s,i)=>s.then(o=>Abe(o,i,e,r)),Promise.resolve(n))}async function A0(t,e,r){var n;const a=(n=e.style)===null||n===void 0?void 0:n.getPropertyValue(t);if(a){const s=await HP(a,null,r);return e.style.setProperty(t,s,e.style.getPropertyPriority(t)),!0}return!1}async function dbe(t,e){await A0("background",t,e)||await A0("background-image",t,e),await A0("mask",t,e)||await A0("-webkit-mask",t,e)||await A0("mask-image",t,e)||await A0("-webkit-mask-image",t,e)}async function fbe(t,e){const r=Co(t,HTMLImageElement);if(!(r&&!r_(t.src))&&!(Co(t,SVGImageElement)&&!r_(t.href.baseVal)))return;const n=r?t.src:t.href.baseVal,a=await ES(n,CS(n),e);await new Promise((s,i)=>{t.onload=s,t.onerror=e.onImageErrorHandler?(...c)=>{try{s(e.onImageErrorHandler(...c))}catch(u){i(u)}}:i;const o=t;o.decode&&(o.decode=s),o.loading==="lazy"&&(o.loading="eager"),r?(t.srcset="",t.src=a):t.href.baseVal=a})}async function hbe(t,e){const n=Ud(t.childNodes).map(a=>VP(a,e));await Promise.all(n).then(()=>t)}async function VP(t,e){Co(t,Element)&&(await dbe(t,e),await fbe(t,e),await hbe(t,e))}function mbe(t,e){const{style:r}=t;e.backgroundColor&&(r.backgroundColor=e.backgroundColor),e.width&&(r.width=`${e.width}px`),e.height&&(r.height=`${e.height}px`);const n=e.style;return n!=null&&Object.keys(n).forEach(a=>{r[a]=n[a]}),t}const s6={};async function i6(t){let e=s6[t];if(e!=null)return e;const n=await(await fetch(t)).text();return e={url:t,cssText:n},s6[t]=e,e}async function o6(t,e){let r=t.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,s=(r.match(/url\([^)]+\)/g)||[]).map(async i=>{let o=i.replace(n,"$1");return o.startsWith("https://")||(o=new URL(o,t.url).href),PP(o,e.fetchRequestInit,({result:c})=>(r=r.replace(i,`url(${c})`),[i,c]))});return Promise.all(s).then(()=>r)}function l6(t){if(t==null)return[];const e=[],r=/(\/\*[\s\S]*?\*\/)/gi;let n=t.replace(r,"");const a=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const c=a.exec(n);if(c===null)break;e.push(c[0])}n=n.replace(a,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(i,"gi");for(;;){let c=s.exec(n);if(c===null){if(c=o.exec(n),c===null)break;s.lastIndex=o.lastIndex}else o.lastIndex=s.lastIndex;e.push(c[0])}return e}async function pbe(t,e){const r=[],n=[];return t.forEach(a=>{if("cssRules"in a)try{Ud(a.cssRules||[]).forEach((s,i)=>{if(s.type===CSSRule.IMPORT_RULE){let o=i+1;const c=s.href,u=i6(c).then(f=>o6(f,e)).then(f=>l6(f).forEach(m=>{try{a.insertRule(m,m.startsWith("@import")?o+=1:a.cssRules.length)}catch(p){console.error("Error inserting rule from remote css",{rule:m,error:p})}})).catch(f=>{console.error("Error loading remote css",f.toString())});n.push(u)}})}catch(s){const i=t.find(o=>o.href==null)||document.styleSheets[0];a.href!=null&&n.push(i6(a.href).then(o=>o6(o,e)).then(o=>l6(o).forEach(c=>{i.insertRule(c,i.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",s)}}),Promise.all(n).then(()=>(t.forEach(a=>{if("cssRules"in a)try{Ud(a.cssRules||[]).forEach(s=>{r.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${a.href}`,s)}}),r))}function gbe(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>QP(e.style.getPropertyValue("src")))}async function xbe(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=Ud(t.ownerDocument.styleSheets),n=await pbe(r,e);return gbe(n)}function GP(t){return t.trim().replace(/["']/g,"")}function vbe(t){const e=new Set;function r(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(s=>{e.add(GP(s))}),Array.from(n.children).forEach(s=>{s instanceof HTMLElement&&r(s)})}return r(t),e}async function wbe(t,e){const r=await xbe(t,e),n=vbe(t);return(await Promise.all(r.filter(s=>n.has(GP(s.style.fontFamily))).map(s=>{const i=s.parentStyleSheet?s.parentStyleSheet.href:null;return HP(s.cssText,i,e)}))).join(`
`)}async function ybe(t,e){const r=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await wbe(t,e);if(r){const n=document.createElement("style"),a=document.createTextNode(r);n.appendChild(a),t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)}}async function bbe(t,e={}){const{width:r,height:n}=MP(t,e),a=await Hw(t,e,!0);return await ybe(a,e),await VP(a,e),mbe(a,e),await jye(a,r,n)}async function Cbe(t,e={}){const{width:r,height:n}=MP(t,e),a=await bbe(t,e),s=await F2(a),i=document.createElement("canvas"),o=i.getContext("2d"),c=e.pixelRatio||Uye(),u=e.canvasWidth||r,f=e.canvasHeight||n;return i.width=u*c,i.height=f*c,e.skipAutoScale||Mye(i),i.style.width=`${u}`,i.style.height=`${f}`,e.backgroundColor&&(o.fillStyle=e.backgroundColor,o.fillRect(0,0,i.width,i.height)),o.drawImage(s,0,0,i.width,i.height),i}async function _S(t,e={}){return(await Cbe(t,e)).toDataURL()}const Ebe=()=>l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),_be=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Sbe=({onBack:t,currentUser:e})=>{const[r,n]=ne.useState([]),[a,s]=ne.useState("Media"),[i,o]=ne.useState(10),[c,u]=ne.useState(!1),[f,m]=ne.useState(Array(10).fill("")),[p,g]=ne.useState(""),[b,y]=ne.useState(null),[T,k]=ne.useState({ai:!1,puzzle:!1,data:!0}),D=ne.useRef(null);ne.useEffect(()=>{k(R=>({...R,data:!0}));const Q=Nye(R=>{n(R),k(F=>({...F,data:!1}))});return()=>Q()},[]),ne.useEffect(()=>{m(Q=>{const R=Array(i).fill("");for(let F=0;F<Math.min(Q.length,i);F++)R[F]=Q[F];return R})},[i]);const L=(Q,R)=>{const F=[...f];F[Q]=R,m(F)},j=async()=>{if(p.trim()){k(Q=>({...Q,ai:!0}));try{const Q="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",F=new Xi(Q).getGenerativeModel({model:"gemini-1.5-flash-latest"}),V=`
                Genera una lista de ${i} palabras clave en español, estrictamente relacionadas con el tema "${p}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una sola clave: "palabras".
                El valor de "palabras" debe ser un array de ${i} strings.
                Cada string en el array debe ser una sola palabra, sin espacios ni caracteres especiales.
            `,ae=(await(await F.generateContent(V)).response).text().replace(/^```json\s*|```\s*$/g,""),q=JSON.parse(ae);if(!q.palabras||!Array.isArray(q.palabras))throw new Error("La respuesta de la IA no contiene el array 'palabras' esperado.");const W=[...q.palabras.map(de=>de.toUpperCase().replace(/[^A-ZÑ]/g,"")).slice(0,i)];for(;W.length<i;)W.push("");m(W)}catch(Q){console.error("Error generating words with AI:",Q),alert("No se pudieron generar las palabras. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{k(Q=>({...Q,ai:!1}))}}},H=(Q,R,F,V,X,oe)=>{for(let te=0;te<Q.length;te++){const ae=F+te*X.y,q=V+te*X.x;if(ae<0||ae>=oe||q<0||q>=oe||R[ae][q]&&R[ae][q]!==Q[te])return!1}return!0},U=(Q,R,F,V,X)=>{for(let oe=0;oe<Q.length;oe++)R[F+oe*X.y][V+oe*X.x]=Q[oe]},E=async()=>{k(ae=>({...ae,puzzle:!0})),y(null),await new Promise(ae=>setTimeout(ae,100));const Q=f.map(ae=>ae.toUpperCase().replace(/[^A-ZÑ]/g,"")).filter(Boolean);if(Q.length===0){alert("Por favor, ingrese al menos una palabra válida."),k(ae=>({...ae,puzzle:!1}));return}const R=Math.max(...Q.map(ae=>ae.length));let F=Math.max(R,Q.length)+2;a==="Media"&&(F+=3),a==="Difícil"&&(F+=5),F=Math.min(Math.max(F,10),25);const V=Array(F).fill(null).map(()=>Array(F).fill(null)),X=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];a!=="Fácil"&&X.push({x:1,y:-1}),a==="Difícil"&&X.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const ae of Q.sort((q,J)=>J.length-q.length)){let q=!1;for(let J=0;J<100;J++){const W=X[Math.floor(Math.random()*X.length)],de=Math.floor(Math.random()*F),P=Math.floor(Math.random()*F);if(H(ae,V,de,P,W,F)){U(ae,V,de,P,W),q=!0;break}}q||console.warn(`No se pudo colocar la palabra: ${ae}`)}const oe=V.map(ae=>ae.map(q=>q||"ABCDEFGHIJKLMNOPQRSTUVWXYZÑ"[Math.floor(Math.random()*27)])),te={tema:p||"Personalizado",grid:oe,words:Q.sort()};try{const ae=await kye(te,e);y({...te,id:ae,createdAt:new Date().toISOString()})}catch(ae){console.error("Error saving puzzle:",ae),alert("No se pudo guardar la sopa de letras.")}finally{k(ae=>({...ae,puzzle:!1}))}},_=()=>{D.current&&_S(D.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(Q=>{const R=document.createElement("a");R.download="sopa-de-letras.png",R.href=Q,R.click()}).catch(Q=>{console.error("oops, something went wrong!",Q),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})},B=()=>b?l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{ref:D,className:"p-6 bg-white",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[l.jsx("div",{className:"md:col-span-2",children:l.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${b.grid.length}, minmax(0, 1fr))`},children:b.grid.flat().map((Q,R)=>l.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:Q},R))})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),l.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:b.words.map(Q=>l.jsx("li",{children:Q},Q))})]})]})}),l.jsxs("div",{className:"flex justify-end gap-4",children:[l.jsx("button",{onClick:()=>y(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),l.jsx("button",{onClick:_,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]}):null;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-4xl",children:"🅰️"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),l.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),!b&&l.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),l.jsxs("select",{value:a,onChange:Q=>s(Q.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{children:"Fácil"}),l.jsx("option",{children:"Media"}),l.jsx("option",{children:"Difícil"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(Q=>l.jsx("button",{onClick:()=>{o(Q),u(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!c&&i===Q?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:Q},Q)),l.jsx("button",{onClick:()=>u(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${c?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),c&&l.jsx("input",{type:"number",value:i,onChange:Q=>o(parseInt(Q.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{id:"ai-theme",type:"text",value:p,onChange:Q=>g(Q.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:j,disabled:T.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:T.ai?l.jsx(Ebe,{}):l.jsxs(l.Fragment,{children:[l.jsx(_be,{}),l.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:f.map((Q,R)=>l.jsx("input",{type:"text",value:Q,onChange:F=>L(R,F.target.value),placeholder:`Palabra ${R+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},R))})]}),l.jsx("div",{className:"text-right pt-4",children:l.jsx("button",{onClick:E,disabled:T.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:T.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),b&&B()]})},Tbe=()=>l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Bbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Nbe=({timeline:t,onSave:e,onBack:r})=>{const[n,a]=ne.useState(t),[s,i]=ne.useState(null),o=ne.useRef(null),c=(g,b,y)=>{a(T=>({...T,events:T.events.map(k=>k.id===g?{...k,[b]:y}:k)}))},u=()=>{const g={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:"🗓️"},b=[...n.events,g].sort((y,T)=>parseInt(y.date)-parseInt(T.date));a(y=>({...y,events:b}))},f=g=>{a(b=>({...b,events:b.events.filter(y=>y.id!==g)}))},m=async g=>{if(!g.description.trim()){alert("Escribe al menos una idea en la descripción para que la IA la complete.");return}i(g.id);const b="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",y=`
            Para una línea de tiempo sobre "${n.tema}", toma la siguiente idea para un hito y mejórala.
            Idea del usuario: "${g.description}"

            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional, con tres claves:
            1. "date": El año o fecha más precisa y relevante para esta idea.
            2. "description": Una descripción concisa (máximo 15 palabras) para la línea de tiempo.
            3. "icon": Un único emoji que represente el hito.
        `;try{const H=(await(await new Xi(b).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(y)).response).text().replace(/^```json\s*|```\s*$/g,""),U=JSON.parse(H);a(E=>({...E,events:E.events.map(_=>_.id===g.id?{..._,date:U.date,description:U.description,icon:U.icon}:_).sort((_,B)=>parseInt(_.date)-parseInt(B.date))}))}catch(T){console.error("Error al generar descripción del hito:",T),alert("No se pudo autocompletar el hito.")}finally{i(null)}},p=()=>{o.current&&_S(o.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(g=>{const b=document.createElement("a");b.download=`linea-tiempo-${n.tema.replace(/\s+/g,"_")}.png`,b.href=g,b.click()}).catch(g=>{console.error("Error al generar la imagen:",g),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:n.tema}),l.jsx("button",{onClick:r,className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver a la lista"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:l.jsxs("div",{ref:o,className:"relative p-10",children:[l.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),l.jsx("div",{className:"relative",children:n.events.sort((g,b)=>parseInt(g.date)-parseInt(b.date)).map((g,b)=>{const y=b%2===0;return l.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[l.jsx("div",{className:"w-1/2",children:y&&l.jsx("div",{className:"text-right pr-8",children:l.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[l.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:g.icon}),l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:g.date}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:g.description})]})})}),l.jsx("div",{className:"z-10 flex-shrink-0",children:l.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),l.jsx("div",{className:"w-1/2",children:!y&&l.jsx("div",{className:"text-left pl-8",children:l.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[l.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:g.icon}),l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:g.date}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:g.description})]})})})]},g.id)})})]})}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),l.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:n.events.map(g=>l.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[l.jsx("input",{type:"text",value:g.date,onChange:b=>c(g.id,"date",b.target.value),placeholder:"Año/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx("textarea",{value:g.description,onChange:b=>c(g.id,"description",b.target.value),placeholder:"Descripción",rows:2,className:"flex-grow w-full bg-transparent text-sm dark:text-slate-300"}),l.jsx("button",{onClick:()=>m(g),disabled:s===g.id,className:"p-2 rounded-md bg-slate-100 hover:bg-slate-200 dark:bg-slate-600 dark:hover:bg-slate-500 disabled:opacity-50",title:"Autocompletar con IA",children:s===g.id?l.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"}):l.jsx(Bbe,{})})]}),l.jsx("button",{onClick:()=>f(g.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},g.id))}),l.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[l.jsx("button",{onClick:u,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Añadir Hito"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:p,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),l.jsx("button",{onClick:()=>e(n),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},kbe=({onBack:t,currentUser:e})=>{const[r,n]=ne.useState("list"),[a,s]=ne.useState([]),[i,o]=ne.useState(null),[c,u]=ne.useState(!1),[f,m]=ne.useState(!0),[p,g]=ne.useState(""),[b,y]=ne.useState(""),[T,k]=ne.useState("");ne.useEffect(()=>{m(!0);const H=_ye(U=>{s(U),m(!1)});return()=>H()},[]);const D=async H=>{if(H.preventDefault(),!p.trim()){alert("El tema es obligatorio.");return}u(!0);const U="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",E=b&&T?`entre ${b} y ${T}`:b?`a partir de ${b}`:T?`hasta ${T}`:"",_=`
            Genera una línea de tiempo sobre el tema "${p}" ${E}.
            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            El objeto debe tener una clave "events", que es un array de 5 a 10 objetos.
            Cada objeto en el array "events" debe tener tres claves:
            1. "date": Un string con la fecha o el año del hito.
            2. "description": Un string con la descripción breve del hito (máximo 15 palabras).
            3. "icon": Un string con un único emoji que represente el hito.
            Ordena los eventos cronológicamente.
        `;try{const X=(await(await new Xi(U).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(_)).response).text().replace(/^```json\s*|```\s*$/g,""),oe=JSON.parse(X);if(!oe.events||!Array.isArray(oe.events))throw new Error("La respuesta de la IA no tiene el formato de eventos esperado.");const te={tema:p,fechaInicio:b,fechaFin:T,events:oe.events.map(q=>({id:crypto.randomUUID(),date:q.date||"Sin fecha",description:q.description||"Sin descripción",icon:q.icon||"🗓️"}))},ae=await Tye(te,e);o({...te,id:ae,createdAt:new Date().toISOString()}),n("editor")}catch(B){console.error("AI Generation Error:",B),alert("Hubo un error al generar la línea de tiempo. Por favor, revisa el formato del tema o inténtalo de nuevo.")}finally{u(!1)}},L=async H=>{try{await Sye(H,e),n("list"),o(null)}catch(U){console.error("Error saving timeline:",U),alert("No se pudo guardar la línea de tiempo.")}},j=async H=>{if(window.confirm("¿Eliminar esta línea de tiempo?"))try{await Bye(H)}catch(U){console.error("Error deleting timeline:",U),alert("No se pudo eliminar la línea de tiempo.")}};return r==="editor"&&i?l.jsx(Nbe,{timeline:i,onSave:L,onBack:()=>n("list")}):f?l.jsx("div",{className:"text-center py-10",children:"Cargando líneas de tiempo..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-4xl",children:"🕒"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo"}),l.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),l.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Línea de Tiempo"}),l.jsxs("form",{onSubmit:D,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",id:"tema",value:p,onChange:H=>g(H.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),l.jsx("input",{type:"text",id:"fechaInicio",value:b,onChange:H=>y(H.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Término (Opcional)"}),l.jsx("input",{type:"text",id:"fechaFin",value:T,onChange:H=>k(H.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),l.jsx("div",{className:"text-right",children:l.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:c?l.jsx(Tbe,{}):"Generar con IA"})})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo Guardadas"}),a.length>0?a.map(H=>l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:H.tema}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(H.createdAt).toLocaleDateString("es-CL")]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>{o(H),n("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),l.jsx("button",{onClick:()=>j(H.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},H.id)):l.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay líneas de tiempo guardadas."})]})]})},Ibe=()=>l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c6=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Fbe=({onBack:t,currentUser:e})=>{const[r,n]=ne.useState([]),[a,s]=ne.useState(10),[i,o]=ne.useState(!1),[c,u]=ne.useState(Array(10).fill("")),[f,m]=ne.useState(Array(10).fill("")),[p,g]=ne.useState(""),[b,y]=ne.useState(null),[T,k]=ne.useState(!1),[D,L]=ne.useState({ai:!1,puzzle:!1,data:!0}),[j,H]=ne.useState(null),U=ne.useRef(null);ne.useEffect(()=>{L(oe=>({...oe,data:!0}));const X=Cye(oe=>{n(oe),L(te=>({...te,data:!1}))});return()=>X()},[]),ne.useEffect(()=>{const X=a;u(oe=>Array.from({length:X},(te,ae)=>oe[ae]||"")),m(oe=>Array.from({length:X},(te,ae)=>oe[ae]||""))},[a]);const E=(X,oe)=>{const te=[...c];te[X]=oe,u(te)},_=(X,oe)=>{const te=[...f];te[X]=oe,m(te)},B=async()=>{if(p.trim()){L(X=>({...X,ai:!0}));try{const X="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",te=new Xi(X).getGenerativeModel({model:"gemini-1.5-flash-latest"}),ae=`
                Genera una lista de ${a} palabras y sus pistas correspondientes para un crucigrama, basado en el tema "${p}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una clave "items", que es un array de ${a} objetos.
                Cada objeto en el array "items" debe tener dos claves:
                1. "word": Un string con la palabra (sin espacios y en mayúsculas).
                2. "clue": Un string con la pista para esa palabra.
            `,de=(await(await te.generateContent(ae)).response).text().replace(/^```json\s*|```\s*$/g,""),P=JSON.parse(de);if(!P.items||!Array.isArray(P.items))throw new Error("La respuesta de la IA no contiene la lista de 'items' esperada.");const K=P.items.map(ee=>(ee.word||"").toUpperCase().replace(/\s/g,"")),Y=P.items.map(ee=>ee.clue||"");u(Array.from({length:a},(ee,Ae)=>K[Ae]||"")),m(Array.from({length:a},(ee,Ae)=>Y[Ae]||""))}catch(X){console.error("Error generating words/clues with AI:",X),alert("No se pudieron generar las palabras y pistas. Inténtelo de nuevo.")}finally{L(X=>({...X,ai:!1}))}}},Q=async X=>{const oe=c[X];if(!oe||!oe.trim()){alert("Por favor, escribe una palabra antes de generar su pista.");return}H(X);try{const te="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",q=new Xi(te).getGenerativeModel({model:"gemini-1.5-flash-latest"}),J=`Para un crucigrama con el tema "${p||"general"}", genera una pista concisa y creativa para la palabra "${oe}". La respuesta debe ser un único objeto JSON válido sin texto adicional, con una sola clave: "clue".`,K=(await(await q.generateContent(J)).response).text().replace(/^```json\s*|```\s*$/g,""),Y=JSON.parse(K);Y.clue&&_(X,Y.clue)}catch(te){console.error("Error generating clue with AI:",te),alert("No se pudo generar la pista.")}finally{H(null)}},R=ne.useCallback(()=>{try{const X=c.map((Le,it)=>({word:Le.toUpperCase().replace(/[^A-ZÑ]/g,""),clue:f[it]})).filter(Le=>Le.word.length>0);if(X.length===0)return alert("Por favor, ingrese al menos una palabra válida."),null;X.sort((Le,it)=>it.word.length-Le.word.length);const oe=X[0].word.length,te=Math.max(oe,X.length)*2;let ae=Array.from({length:te},()=>Array(te).fill(null));const q=[],J=X.shift(),W=Math.floor(te/2),de=Math.floor((te-J.word.length)/2);for(let Le=0;Le<J.word.length;Le++)ae[W][de+Le]=J.word[Le];q.push({word:J.word,clue:J.clue,direction:"across",row:W,col:de});for(const Le of X){let it={score:-1,row:-1,col:-1,direction:"across"};for(const et of q)for(let ht=0;ht<et.word.length;ht++)for(let Et=0;Et<Le.word.length;Et++)if(et.word[ht]===Le.word[Et]){let At=0,jt,Kt,Yt;et.direction==="across"?(Yt="down",jt=et.row-Et,Kt=et.col+ht):(Yt="across",jt=et.row+ht,Kt=et.col-Et);let Qt=!0;for(let Gt=0;Gt<Le.word.length;Gt++){const Wt=jt+(Yt==="down"?Gt:0),kt=Kt+(Yt==="across"?Gt:0);if(Wt<0||Wt>=te||kt<0||kt>=te){Qt=!1;break}const It=ae[Wt][kt],_t=Wt===et.row+(et.direction==="down"?ht:0)&&kt===et.col+(et.direction==="across"?ht:0);if(It&&!_t){Qt=!1;break}if(It&&_t&&It!==Le.word[Et]){Qt=!1;break}if(!_t){if(Yt==="across"&&(Wt>0&&ae[Wt-1][kt]||Wt<te-1&&ae[Wt+1][kt])){Qt=!1;break}if(Yt==="down"&&(kt>0&&ae[Wt][kt-1]||kt<te-1&&ae[Wt][kt+1])){Qt=!1;break}}It&&At++}Qt&&At>it.score&&(it={score:At,row:jt,col:Kt,direction:Yt})}if(it.score>-1){for(let et=0;et<Le.word.length;et++){const ht=it.row+(it.direction==="down"?et:0),Et=it.col+(it.direction==="across"?et:0);ae[ht][Et]=Le.word[et]}q.push({word:Le.word,clue:Le.clue,direction:it.direction,row:it.row,col:it.col})}}let P=te,K=-1,Y=te,ee=-1;q.forEach(Le=>{P=Math.min(P,Le.row),K=Math.max(K,Le.row+(Le.direction==="down"?Le.word.length-1:0)),Y=Math.min(Y,Le.col),ee=Math.max(ee,Le.col+(Le.direction==="across"?Le.word.length-1:0))}),K===-1&&(P=q[0].row,K=q[0].row,Y=q[0].col,ee=q[0].col+q[0].word.length-1);const Ae=1,Se=Math.max(0,P-Ae),ge=Math.min(te,K+1+Ae),pe=Math.max(0,Y-Ae),ye=Math.min(te,ee+1+Ae),ue=ae.slice(Se,ge).map(Le=>Le.slice(pe,ye)),se=q.map(Le=>({...Le,row:Le.row-Se,col:Le.col-pe})).sort((Le,it)=>Le.row-it.row||Le.col-it.col);let Pe=1;const at=[],De=new Map;se.forEach(Le=>{const it=`${Le.row},${Le.col}`;De.has(it)||De.set(it,Pe++),at.push({...Le,number:De.get(it)})});const Ee=ue.map(Le=>Le.map(it=>({char:it,number:null})));return at.forEach(Le=>{const it=`${Le.row},${Le.col}`;Ee[Le.row]&&Ee[Le.row][Le.col]!==void 0&&(Ee[Le.row][Le.col].number=De.get(it))}),{grid:Ee,clues:{across:at.filter(Le=>Le.direction==="across").sort((Le,it)=>Le.number-it.number),down:at.filter(Le=>Le.direction==="down").sort((Le,it)=>Le.number-it.number)}}}catch(X){return console.error("Error generating crossword grid:",X),alert("Ocurrió un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[c,f]),F=async()=>{L(oe=>({...oe,puzzle:!0})),y(null),await new Promise(oe=>setTimeout(oe,100));const X=R();if(X){const oe={tema:p||"Personalizado",grid:X.grid,clues:X.clues};try{const te=await Eye(oe,e);y({...oe,id:te,fechaCreacion:new Date().toISOString(),creadorId:e.id,creadorNombre:e.nombreCompleto})}catch(te){console.error("Error saving puzzle:",te),alert("No se pudo guardar el crucigrama en la base de datos.")}}L(oe=>({...oe,puzzle:!1}))},V=()=>{U.current&&(k(!1),setTimeout(()=>{_S(U.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(X=>{const oe=document.createElement("a");oe.download="crucigrama.png",oe.href=X,oe.click()}).catch(X=>console.error("Error generating image",X))},100))};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-4xl",children:"✏️"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),l.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),b?l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{ref:U,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[l.jsx("div",{children:l.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${b.grid[0].length}, 2rem)`},children:b.grid.flat().map((X,oe)=>l.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:X.char?"white":"black"},children:[X.number&&l.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:X.number}),T&&X.char&&l.jsx("span",{children:X.char})]},oe))})}),l.jsxs("div",{className:"text-sm",children:[l.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),l.jsx("ul",{className:"space-y-1",children:b.clues.across.map(X=>l.jsxs("li",{children:[l.jsxs("strong",{children:[X.number,"."]})," ",X.clue]},`${X.word}-${X.clue}`))}),l.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),l.jsx("ul",{className:"space-y-1",children:b.clues.down.map(X=>l.jsxs("li",{children:[l.jsxs("strong",{children:[X.number,"."]})," ",X.clue]},`${X.word}-${X.clue}`))})]})]})}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("label",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",checked:T,onChange:()=>k(!T),className:"h-5 w-5 rounded"}),l.jsx("span",{children:"Mostrar Solución"})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:()=>y(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),l.jsx("button",{onClick:V,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):l.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(X=>l.jsx("button",{onClick:()=>{s(X),o(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!i&&a===X?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:X},X)),l.jsx("button",{onClick:()=>o(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${i?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),i&&l.jsx("input",{type:"number",value:a,onChange:X=>s(parseInt(X.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{id:"ai-theme",type:"text",value:p,onChange:X=>g(X.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:B,disabled:D.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:D.ai?l.jsx(Ibe,{}):l.jsxs(l.Fragment,{children:[l.jsx(c6,{}),l.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),l.jsx("div",{className:"space-y-3",children:Array.from({length:a}).map((X,oe)=>l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[l.jsx("input",{type:"text",value:c[oe],onChange:te=>E(oe,te.target.value),placeholder:`Palabra ${oe+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[l.jsx("textarea",{value:f[oe],onChange:te=>_(oe,te.target.value),placeholder:`Pista ${oe+1}`,rows:1,className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:()=>Q(oe),disabled:j===oe,className:"p-2 bg-slate-200 dark:bg-slate-600 rounded-md hover:bg-slate-300 disabled:opacity-50",title:"Generar Pista con IA",children:j===oe?l.jsx("div",{className:"w-5 h-5 border-2 border-slate-400 border-t-amber-500 rounded-full animate-spin"}):l.jsx(c6,{})})]})]},oe))}),l.jsx("div",{className:"text-right pt-4",children:l.jsx("button",{onClick:F,disabled:D.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:D.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},Dbe=[{id:"sopaDeLetras",icon:"🅰️",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"🧠",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"✏️",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"🕒",nombre:"Líneas de Tiempo",descripcion:"Construye líneas de tiempo para comprender procesos, hechos históricos o secuencias."}],Rbe=({recurso:t,onClick:e})=>l.jsxs("button",{onClick:e,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[l.jsx("div",{className:"text-6xl mb-4",children:t.icon}),l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:t.nombre}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:t.descripcion})]}),Lbe=()=>{const[t,e]=ne.useState("menu"),r=()=>t==="mapasMentales"?l.jsx(Iye,{onBack:()=>e("menu")}):t==="sopaDeLetras"?l.jsx(Sbe,{onBack:()=>e("menu")}):t==="lineasDeTiempo"?l.jsx(kbe,{onBack:()=>e("menu")}):t==="crucigramas"?l.jsx(Fbe,{onBack:()=>e("menu")}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Dbe.map(n=>l.jsx(Rbe,{recurso:n,onClick:()=>e(n.id)},n.id))})]});return l.jsx("div",{className:"animate-fade-in space-y-6",children:r()})},Ube="evaluaciones_formativas",Mbe="calificaciones_formativas",zP="trabajos_grupales_formativos",qP=t=>{var r,n,a,s;const e=t.data();return{id:t.id,...e,fecha:((n=(r=e.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||e.fecha,fechaPresentacion:((s=(a=e.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||e.fechaPresentacion}},Pbe=(t,e)=>{const r=er(Nt(Tt,Ube),Tn("curso","==",t));return br(r,n=>{e(n.docs.map(a=>qP(a)))},n=>{console.error("Error subscribing to student evaluations:",n),e([])})},jbe=t=>{const e=er(Nt(Tt,Mbe));return br(e,r=>{const n={};r.forEach(a=>{n[a.id]=a.data()}),t(n)},r=>{console.error("Error subscribing to grades:",r),t({})})},Obe=(t,e)=>{const r=er(Nt(Tt,zP),Tn("curso","==",t));return br(r,n=>{e(n.docs.map(a=>qP(a)))},n=>{console.error("Error subscribing to group projects:",n),e([])})},Qbe=async t=>{try{const{id:e,...r}=t,n=_r(Tt,zP,e);await Zi(n,r)}catch(e){throw console.error("Error updating group project:",e),new Error("Could not update group project.")}},Hbe=({currentUser:t})=>{const[e,r]=ne.useState([]),[n,a]=ne.useState({}),[s,i]=ne.useState([]),[o,c]=ne.useState(!0),[u,f]=ne.useState(null),[m,p]=ne.useState(!1),[g,b]=ne.useState(null),y=ne.useRef(null);ne.useEffect(()=>{if(!t.curso){c(!1);return}c(!0);const j=Pbe(t.curso,r),H=jbe(a),U=Obe(t.curso,E=>{i(E),c(!1)});return()=>{j(),H(),U()}},[t.curso]);const T=ne.useMemo(()=>{if(!t.curso)return[];const H=e.filter(U=>U.curso===t.curso).reduce((U,E)=>((U[E.asignatura]=U[E.asignatura]||[]).push(E),U),{});return Object.entries(H).map(([U,E])=>{let _=0,B=0;const Q=E.map(F=>{var oe;const V=(oe=n[F.id])==null?void 0:oe[t.nombreCompleto];let X="No Trabajado";return V==="trabajado"?(_+=7,B++,X="Trabajado"):V==="no trabajado"&&(_+=2,B++,X="No Trabajado"),{id:F.id,nombreActividad:F.nombreActividad,fecha:F.fecha,estado:X}}).filter(F=>{var V;return(V=n[F.id])==null?void 0:V[t.nombreCompleto]}),R=B>0?(_/B).toFixed(1):"N/A";return{asignatura:U,promedio:R,actividades:Q.sort((F,V)=>new Date(V.fecha).getTime()-new Date(F.fecha).getTime())}}).filter(U=>U.actividades.length>0).sort((U,E)=>U.asignatura.localeCompare(E.asignatura))},[e,n,t]);ne.useEffect(()=>{if(T.reduce((B,Q)=>B+Q.actividades.length,0)===0){f(null);return}const H=T.reduce((B,Q)=>{const R=parseFloat(Q.promedio);return isNaN(R)?B:B+R},0),U=T.length>0?H/T.length:0,E=g1.find(B=>U>=B.promedioMin&&U<=B.promedioMax)||null,_=g1.filter(B=>U>=B.promedioMin);if(f({puntajeTotal:0,promedio:U,rangoActual:E,insigniasGanadas:_}),y.current!==null){const B=g1.find(Q=>y.current>=Q.promedioMin&&y.current<=Q.promedioMax)||null;E&&(!B||E.nombre!==B.nombre)&&b(E)}y.current=U},[T]);const k=ne.useMemo(()=>t.curso?s.filter(j=>j.curso===t.curso).map(j=>{const H=j.grupos.find(U=>U.integrantes.some(E=>E.nombre===t.nombreCompleto));return H?{...j,miGrupo:H}:null}).filter(j=>j!==null).sort((j,H)=>new Date(H.fechaPresentacion).getTime()-new Date(j.fechaPresentacion).getTime()):[],[s,t]),D=async(j,H)=>{const U=s.find(_=>_.id===j);if(!U)return;const E={...U,grupos:U.grupos.map(_=>_.integrantes.some(Q=>Q.nombre===t.nombreCompleto)?{..._,integrantes:_.integrantes.map(Q=>Q.nombre===t.nombreCompleto?{...Q,rol:H||void 0}:Q)}:_)};try{await Qbe(E)}catch(_){console.error("Error updating role:",_),alert("No se pudo actualizar el rol.")}},L=j=>{const H=parseFloat(j);return isNaN(H)?"bg-slate-400":H<4?"bg-red-500":H<5.5?"bg-yellow-500":"bg-green-500"};return o?l.jsx("div",{className:"text-center py-10",children:"Cargando tu rendimiento..."}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[g&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>b(null),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:j=>j.stopPropagation(),children:[l.jsx("div",{className:"text-8xl animate-bounce",children:g.emoji}),l.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"¡Subiste de Rango!"}),l.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:g.nombre}),l.jsx("p",{className:"text-slate-600 mt-4",children:g.mensaje}),l.jsx("button",{onClick:()=>b(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"¡Genial!"})]})}),m&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>p(!1),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:j=>j.stopPropagation(),children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),l.jsx("div",{className:"overflow-y-auto space-y-3",children:g1.map(j=>{const H=u==null?void 0:u.insigniasGanadas.some(U=>U.nombre===j.nombre);return l.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${H?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[l.jsx("div",{className:"text-5xl",children:j.emoji}),l.jsxs("div",{children:[l.jsx("h3",{className:`font-bold ${H?"text-amber-700":"text-slate-600"}`,children:j.nombre}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",j.promedioMin," y ",j.promedioMax]})]})]},j.nombre)})})]})}),l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),l.jsx("p",{className:"text-slate-500 mb-6",children:"Aquí puedes ver un resumen de tu trabajo en clases por cada asignatura."}),u&&u.rangoActual&&l.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),l.jsx("h2",{className:"text-3xl font-bold",children:u.rangoActual.nombre}),l.jsx("button",{onClick:()=>p(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-7xl",children:u.rangoActual.emoji}),l.jsx("p",{className:"font-bold text-2xl mt-2",children:u.promedio.toFixed(1)}),l.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),T.length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:T.map(j=>l.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800",children:j.asignatura}),l.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),l.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${L(j.promedio)}`,children:j.promedio})]}),l.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),j.actividades.map(H=>l.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-700",children:H.nombreActividad}),l.jsx("p",{className:"text-xs text-slate-500",children:new Date(H.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),l.jsx("span",{className:`font-semibold ${H.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:H.estado==="Trabajado"?"✅ Trabajado":"❌ No Trabajado"})]},H.id))]})]},j.asignatura))}):l.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[l.jsx("span",{className:"text-5xl",children:"📊"}),l.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Aún sin registros"}),l.jsx("p",{className:"text-slate-500 mt-2",children:"Todavía no tienes evaluaciones formativas registradas por tus profesores."})]})]}),k.length>0&&l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),l.jsx("div",{className:"space-y-4",children:k.map(j=>{const H=j.miGrupo.integrantes.filter(E=>E.nombre!==t.nombreCompleto&&E.rol).map(E=>E.rol),U=MR.filter(E=>!H.includes(E));return l.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[l.jsx("h3",{className:"font-bold text-slate-800",children:j.nombreActividad}),l.jsxs("p",{className:"text-sm text-slate-500",children:[j.asignatura," - Presentación: ",new Date(j.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),l.jsxs("div",{className:"mt-3 pt-3 border-t",children:[l.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",j.miGrupo.numero]}),l.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:j.miGrupo.integrantes.map(E=>l.jsxs("li",{className:"grid grid-cols-2 items-center",children:[l.jsx("span",{className:E.nombre===t.nombreCompleto?"font-bold":"",children:E.nombre}),E.nombre===t.nombreCompleto?l.jsxs("select",{value:E.rol||"",onChange:_=>D(j.id,_.target.value),className:"text-sm p-1 border rounded w-full",children:[l.jsx("option",{value:"",children:"-- Seleccionar rol --"}),E.rol&&!U.includes(E.rol)&&l.jsx("option",{value:E.rol,children:E.rol}),U.map(_=>l.jsx("option",{value:_,children:_},_))]}):l.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:E.rol||"Sin rol"})]},E.nombre))})]})]},j.id)})})]})]})},Vbe="proyectos_interdisciplinarios",KP="entregas_interdisciplinarias",WP=t=>{var r,n,a,s;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion,fechaCompletado:((s=(a=e.fechaCompletado)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||e.fechaCompletado}},Gbe=(t,e)=>{const r=er(Nt(Tt,Vbe),Tn("cursos","array-contains",t));return br(r,n=>{const a=n.docs.map(s=>WP(s));e(a)},n=>{console.error("Error al suscribirse a los proyectos:",n),e([])})},zbe=(t,e)=>{const r=er(Nt(Tt,KP),Tn("estudianteId","==",t));return br(r,n=>{const a=n.docs.map(s=>WP(s));e(a)},n=>{console.error("Error al suscribirse a las entregas:",n),e([])})},qbe=async t=>{try{const{id:e,...r}=t,n=_r(Tt,KP,e),a={...r,fechaCompletado:Ar.fromDate(new Date(r.fechaCompletado||Date.now()))};await Zi(n,a,{merge:!0})}catch(e){throw console.error("Error al actualizar la entrega:",e),new Error("No se pudo guardar la entrega.")}},Kbe=({currentUser:t})=>{const[e,r]=ne.useState([]),[n,a]=ne.useState([]),[s,i]=ne.useState(null),[o,c]=ne.useState(!0);ne.useEffect(()=>{if(!t.curso||!t.id){c(!1);return}c(!0);const m=Gbe(t.curso,r),p=zbe(t.id,g=>{a(g),c(!1)});return()=>{m(),p()}},[t.curso,t.id]);const u=async m=>{try{await qbe(m)}catch(p){console.error("Failed to update submission:",p),alert("Hubo un error al guardar tu entrega.")}},f=({plan:m,tarea:p})=>{const g=ne.useMemo(()=>{const H=n.find(U=>U.planificacionId===m.id&&U.tareaId===p.id);return H||{id:`${m.id}_${p.id}_${t.id}`,planificacionId:m.id,tareaId:p.id,estudianteId:t.id,estudianteNombre:t.nombreCompleto,completada:!1}},[m.id,p.id,n]),[b,y]=ne.useState(!1),[T,k]=ne.useState({observaciones:g.observacionesEstudiante||"",enlace:g.enlaceUrl||""}),D=H=>{var E;const U=(E=H.target.files)==null?void 0:E[0];U&&(alert(`Simulación: Archivo "${U.name}" listo para subir.`),u({...g,archivoAdjunto:{nombre:U.name,url:`simulated/path/${U.name}`},fechaCompletado:new Date().toISOString()}))},L=()=>{u({...g,observacionesEstudiante:T.observaciones,enlaceUrl:T.enlace,fechaCompletado:new Date().toISOString()})},j=()=>{u({...g,completada:!g.completada,fechaCompletado:new Date().toISOString()})};return l.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("input",{type:"checkbox",checked:g.completada,onChange:j,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("p",{className:`font-semibold ${g.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",p.numero,": ",p.instrucciones]}),l.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",p.fechaEntrega]}),p.recursoUrl&&l.jsx("a",{href:p.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),l.jsx("button",{onClick:()=>y(!b),className:"text-sm font-semibold",children:b?"Ocultar":"Entregar"})]}),b&&l.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[l.jsx("textarea",{value:T.observaciones,onChange:H=>k({...T,observaciones:H.target.value}),onBlur:L,placeholder:"Añadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),l.jsx("input",{type:"url",value:T.enlace,onChange:H=>k({...T,enlace:H.target.value}),onBlur:L,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),l.jsx("input",{type:"file",onChange:D,className:"text-sm"}),g.archivoAdjunto&&l.jsxs("p",{className:"text-xs text-green-600",children:["✓ Archivo subido: ",g.archivoAdjunto.nombre]})]}),g.feedbackProfesor&&l.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[l.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentación del profesor:"}),l.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:g.feedbackProfesor})]})]})};return o?l.jsx("div",{className:"text-center py-10",children:"Cargando tus proyectos..."}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),e.length>0?e.map(m=>{const p=m.tareas||[],b=n.filter(T=>T.planificacionId===m.id).filter(T=>T.completada).length,y=p.length>0?b/p.length*100:0;return l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[l.jsxs("button",{onClick:()=>i(s===m.id?null:m.id),className:"w-full text-left",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:m.nombreProyecto}),l.jsxs("div",{className:"mt-2 space-y-1",children:[l.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[l.jsx("span",{children:"Progreso"}),l.jsxs("span",{children:[Math.round(y),"%"]})]}),l.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:l.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${y}%`}})})]})]}),s===m.id&&l.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:p.length>0?p.map(T=>l.jsx(f,{plan:m,tarea:T},T.id)):l.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto aún no tiene tareas asignadas."})})]},m.id)}):l.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[l.jsx("span",{className:"text-5xl",children:"🎉"}),l.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"¡Todo al día!"}),l.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},Wbe=({data:t})=>l.jsx("div",{className:"space-y-4",children:t.map((r,n)=>l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:r.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),l.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[r.value.toFixed(2)," / 4.00"]})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:l.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${r.value/4*100}%`}})})]},r.label+n))}),$be=({currentUser:t})=>{const[e,r]=ne.useState([]),[n,a]=ne.useState(!1),[s,i]=ne.useState(null),[o,c]=ne.useState(null),[u,f]=ne.useState(jp),m=ne.useCallback(async()=>{a(!0);try{const T=(await Ege(t.nombreCompleto)).sort((k,D)=>new Date(D.fecha).getTime()-new Date(k.fecha).getTime());r(T),i(null)}catch(y){console.error("Error al cargar acompañamientos desde Firestore",y),i("No se pudieron cargar tus acompañamientos desde la nube.")}finally{a(!1)}},[t.nombreCompleto]),p=ne.useCallback(async()=>{try{const y=await _ge();y&&f(y)}catch(y){console.error("Error al cargar rúbrica personalizada",y)}},[]);ne.useEffect(()=>{m(),p()},[m,p]);const g=ne.useMemo(()=>{if(!o)return[];const y={};return u.forEach(T=>{y[T.domain]={total:0,count:0},T.criteria.forEach(k=>{const D=o.rubricaResultados[k.name];D&&(y[T.domain].total+=D,y[T.domain].count++)})}),Object.entries(y).map(([T,k])=>({label:T,value:k.count>0?k.total/k.count:0}))},[o,u]),b=y=>{const T=new ir;T.setFont("helvetica","bold"),T.setFontSize(10),T.setTextColor(100),T.text("LICEO INDUSTRIAL DE RECOLETA",T.internal.pageSize.getWidth()/2,15,{align:"center"}),T.setFont("helvetica","bold"),T.setFontSize(16),T.setTextColor(40),T.text("Informe de Acompañamiento Docente",T.internal.pageSize.getWidth()/2,25,{align:"center"}),T.setFontSize(12),T.setFont("helvetica","normal"),Yo(T,{startY:35,body:[["Docente:",y.docente],["Fecha:",new Date(y.fecha).toLocaleDateString("es-CL")],["Asignatura:",y.asignatura],["Curso:",y.curso],["Bloques:",y.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let k=T.lastAutoTable.finalY+15;if(Object.keys(y.rubricaResultados).length>0){const j=[],H=["Débil","Incipiente","Satisfactorio","Avanzado"];u.forEach(U=>{j.push([{content:U.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),U.criteria.forEach(E=>{const _=y.rubricaResultados[E.name],B=_?H[_-1]:"No evaluado";j.push([E.name,B])})}),Yo(T,{startY:k,head:[["Indicador","Nivel de Logro"]],body:j,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),k=T.lastAutoTable.finalY+15}const D=(j,H)=>{if(!H)return;k>250&&(T.addPage(),k=20,T.setFont("helvetica","bold"),T.setFontSize(10),T.setTextColor(100),T.text("LICEO INDUSTRIAL DE RECOLETA",T.internal.pageSize.getWidth()/2,15,{align:"center"}),k=25),T.setFont("helvetica","bold"),T.setFontSize(14),T.setTextColor(40),T.text(j,14,k),k+=8,T.setFont("helvetica","normal"),T.setFontSize(11),T.setTextColor(60);const U=T.splitTextToSize(H.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);T.text(U,14,k),k+=U.length*5+10};D("Observaciones Generales",y.observacionesGenerales),D("Retroalimentación Consolidada",y.retroalimentacionConsolidada);const L=T.getNumberOfPages();for(let j=1;j<=L;j++)T.setPage(j),T.setFontSize(8),T.setTextColor(128),T.text(`Página ${j} de ${L}`,T.internal.pageSize.getWidth()/2,T.internal.pageSize.getHeight()-10,{align:"center"});T.save(`Acompanamiento_${t.nombreCompleto.replace(/\s/g,"_")}_${new Date(y.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return o?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("button",{onClick:()=>c(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a mi historial"}),l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompañamiento"}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(o.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",o.curso," - ",o.asignatura]})]}),l.jsxs("button",{onClick:()=>b(o),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[l.jsx(UR,{})," Exportar PDF"]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsx("div",{className:"lg:col-span-2 space-y-6",children:l.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[l.jsx("h3",{children:"Retroalimentación Consolidada (IA)"}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:l.jsx("p",{className:"whitespace-pre-wrap",children:o.retroalimentacionConsolidada||"No se ha generado retroalimentación."})}),l.jsx("h3",{children:"Observaciones Generales"}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:l.jsx("p",{className:"whitespace-pre-wrap",children:o.observacionesGenerales||"Sin observaciones."})})]})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeño por Dominio"}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:l.jsx(Wbe,{data:g})})]})]})]}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompañamientos"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aquí encontrarás el historial de tus observaciones de clase y la retroalimentación asociada."}),n&&l.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompañamientos desde la nube..."}),s&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),!n&&e.length===0&&l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompañamientos registrados en la nube."}),l.jsx("div",{className:"space-y-4",children:!n&&e.length>0?e.map(y=>l.jsx("button",{onClick:()=>c(y),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[y.curso," - ",y.asignatura]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(y.fecha).toLocaleDateString("es-CL"),y.bloques&&` | Bloques: ${y.bloques}`]}),Object.keys(y.rubricaResultados).length>0&&l.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(y.rubricaResultados).length," criterios"]})]}),l.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},y.id)):!n&&l.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[l.jsx("span",{className:"text-5xl",children:"👍"}),l.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Aún no tienes acompañamientos de clase registrados."})]})})]})},Jbe=t=>{console.log("🔄 Iniciando suscripción a todas las planificaciones...");try{const e=Nt(Gr,"planificaciones"),r=er(e,fn("fechaCreacion","desc"));return br(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Todas las planificaciones cargadas:",s.length),t(s)},a=>{throw console.error("❌ Error al cargar todas las planificaciones:",a),a})}catch(e){throw console.error("❌ Error al configurar suscripción a todas las planificaciones:",e),e}},Ybe=(t,e)=>{if(console.log("🔄 Iniciando suscripción a planificaciones del usuario:",t),!t)throw console.error("❌ userId no proporcionado"),new Error("userId es requerido");try{const r=Nt(Gr,"planificaciones"),n=er(r,Tn("userId","==",t),fn("fechaCreacion","desc"));return br(n,s=>{const i=[];s.forEach(o=>{const c=o.data();i.push({id:o.id,...c})}),console.log("✅ Planificaciones del usuario cargadas:",i.length),e(i)},s=>{throw console.error("❌ Error al cargar planificaciones del usuario:",s),s})}catch(r){throw console.error("❌ Error al configurar suscripción a planificaciones del usuario:",r),r}},Xbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),Zbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),eCe=()=>l.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),tCe=({plan:t,onClose:e})=>{const r=a=>l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-lg",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",a.objetivosAprendizaje]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Indicadores de Evaluación:"})," ",a.indicadoresEvaluacion]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[l.jsx("strong",{children:"Contenidos Clave:"})," ",a.contenidos]})]}),l.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",a.cantidadClases,")"]}),l.jsx("div",{className:"space-y-3 max-h-[40vh] overflow-y-auto pr-2",children:a.detallesLeccion.map((s,i)=>l.jsxs("div",{className:"p-3 border dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",children:[l.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",i+1,": ",s.actividades]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[l.jsxs("span",{children:[l.jsx("strong",{children:"Objetivo:"})," ",s.objetivosAprendizaje]}),l.jsxs("span",{children:[l.jsx("strong",{children:"Contenidos:"})," ",s.contenidosConceptuales]}),l.jsxs("span",{children:[l.jsx("strong",{children:"Habilidad (Bloom):"})," ",s.habilidadesBloom]}),l.jsxs("span",{children:[l.jsx("strong",{children:"Perfil de Egreso:"})," ",s.perfilEgreso]}),l.jsxs("span",{className:"md:col-span-2",children:[l.jsx("strong",{children:"Interdisciplinariedad:"})," ",s.asignaturasInterdisciplinariedad]})]})]},i))})]}),n=a=>l.jsxs("div",{className:"space-y-4",children:[l.jsxs("p",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-lg",children:[l.jsx("strong",{children:"Contenidos:"})," ",a.contenidos]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:"Inicio"}),l.jsx("p",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600 whitespace-pre-wrap",children:a.momentosClase.inicio})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:"Desarrollo"}),l.jsx("p",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600 whitespace-pre-wrap",children:a.momentosClase.desarrollo})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:"Cierre"}),l.jsx("p",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600 whitespace-pre-wrap",children:a.momentosClase.cierre})]})]})]});return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:e,children:l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:a=>a.stopPropagation(),children:[l.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:t.tipo==="Unidad"?t.nombreUnidad:t.nombreClase}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[t.asignatura," | ",t.nivel," | Autor: ",t.autor||"N/A"]})]}),l.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:l.jsx(Zbe,{})})]}),l.jsx("main",{className:"p-4 flex-1 overflow-y-auto",children:t.tipo==="Unidad"?r(t):n(t)})]})})},rCe=t=>{const[e,r]=ne.useState([]),[n,a]=ne.useState(!0),[s,i]=ne.useState(null),o=ne.useMemo(()=>(t==null?void 0:t.profile)==="SUBDIRECCION",[t]);return ne.useEffect(()=>{if(!(t!=null&&t.email)&&!(t!=null&&t.id)){i("Usuario no autenticado"),a(!1);return}console.log("🔄 Configurando suscripción a planificaciones..."),console.log("🔍 Usuario actual:",{email:t.email,id:t.id,profile:t.profile,canViewAll:o});try{let c;if(o)console.log("👑 Cargando todas las planificaciones (vista admin)"),c=Jbe(u=>{console.log("✅ Planificaciones admin cargadas:",u.length),r(u),a(!1),i(null)});else{const u=t.email||t.id||"";console.log("👤 Cargando planificaciones del usuario:",u),c=Ybe(u,f=>{console.log("✅ Planificaciones del usuario cargadas:",f.length),r(f),a(!1),i(null)})}return c}catch(c){console.error("❌ Error al configurar suscripción:",c),i(c instanceof Error?c.message:"Error al conectar con la base de datos"),a(!1)}},[t,o]),{planificaciones:e,loading:n,error:s,canViewAllPlans:o}},nCe=({currentUser:t})=>{console.log("🔍 SeguimientoCurricular - currentUser recibido:",t),console.log("🔍 currentUser.email:",t==null?void 0:t.email),console.log("🔍 currentUser.id:",t==null?void 0:t.id),console.log("🔍 currentUser.profile:",t==null?void 0:t.profile);const{planificaciones:e,loading:r,error:n,canViewAllPlans:a}=rCe(t),[s,i]=ne.useState("1º"),[o,c]=ne.useState(null),[u,f]=ne.useState(null),m=ne.useMemo(()=>{const y={"1º":"1º Medio","2º":"2º Medio","3º":"3º Medio","4º":"4º Medio"}[s];return e.filter(T=>T.nivel===y)},[e,s]),p=b=>{c(y=>y===b?null:b)},g=[{key:"1º",label:"1º Medio"},{key:"2º",label:"2º Medio"},{key:"3º",label:"3º Medio"},{key:"4º",label:"4º Medio"}];return!t||!t.email&&!t.id?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),l.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(t)]})]})}):r?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-4xl mx-auto",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Seguimiento Curricular"}),l.jsx("div",{className:"flex justify-center items-center py-12",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(eCe,{}),l.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Cargando planificaciones..."})]})})]}):n?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-4xl mx-auto",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Seguimiento Curricular"}),l.jsx("div",{className:"flex justify-center items-center py-12",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-red-600 dark:text-red-400 mb-2",children:"Error al cargar las planificaciones"}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:n})]})})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-4xl mx-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento Curricular"}),a&&l.jsx("div",{className:"text-sm text-amber-600 dark:text-amber-400 font-medium",children:"👑 Vista administrativa - Todas las planificaciones"})]}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:l.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:g.map(b=>l.jsx("button",{onClick:()=>i(b.key),className:`${s===b.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg transition-colors focus:outline-none`,children:b.label},b.key))})}),e.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"No hay planificaciones disponibles"}),l.jsx("p",{className:"text-sm text-slate-400 dark:text-slate-500 mt-2",children:a?"Ningún profesor ha creado planificaciones aún":"Crea planificaciones desde el módulo de Planificación"})]}):l.jsx("div",{className:"space-y-4",children:Xo.map(b=>{const y=m.filter(k=>k.asignatura===b);if(y.length===0)return null;const T=o===b;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[l.jsxs("button",{onClick:()=>p(b),className:"w-full flex justify-between items-center p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:b}),l.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 py-1 rounded-full text-xs font-medium",children:[y.length," planificación",y.length!==1?"es":""]})]}),l.jsx("span",{className:`transform transition-transform duration-200 ${T?"rotate-180":""}`,children:l.jsx(Xbe,{})})]}),T&&l.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 animate-fade-in-up",children:l.jsx("ul",{className:"space-y-3",children:y.map(k=>l.jsx("li",{children:l.jsx("button",{onClick:()=>f(k),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors group",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200 group-hover:text-amber-600 dark:group-hover:text-amber-400 transition-colors",children:k.tipo==="Unidad"?k.nombreUnidad:k.nombreClase}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:[l.jsx("span",{className:"font-medium",children:"Autor:"})," ",k.autor||"No especificado"]}),l.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["Creado: ",new Date(k.fechaCreacion).toLocaleDateString("es-CL")]})]}),l.jsx("div",{className:"ml-3",children:l.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${k.tipo==="Unidad"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"}`,children:k.tipo})})]})})},k.id))})})]},b)})})]}),u&&l.jsx(tCe,{plan:u,onClose:()=>f(null)})]})},SS="analisis",aCe=async()=>{try{const t=er(Nt(Gr,SS),fn("uploadDate","desc"));return(await ps(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener análisis:",t),new Error("No se pudieron cargar los análisis taxonómicos")}},sCe=async t=>{try{return{id:(await Sa(Nt(Gr,SS),{...t,uploadDate:t.uploadDate||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear análisis:",e),new Error("No se pudo crear el análisis taxonómico")}},iCe=async t=>{try{const e=_r(Gr,SS,t);await Oi(e)}catch(e){throw console.error("Error al eliminar análisis:",e,"ID:",t),new Error("No se pudo eliminar el análisis taxonómico")}},A6=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],u6={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},oCe=()=>l.jsxs("svg",{className:"animate-spin h-5 w-5 text-slate-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d6=({currentUser:t})=>{const[e,r]=ne.useState([]),[n,a]=ne.useState(!1),[s,i]=ne.useState(null),[o,c]=ne.useState(null),[u,f]=ne.useState(""),[m,p]=ne.useState(!1),[g,b]=ne.useState(null),[y,T]=ne.useState(null),k=ne.useCallback(async()=>{a(!0);try{const U=await aCe();r(U),i(null)}catch(U){console.error("Error al cargar análisis desde Firestore",U),i("No se pudieron cargar los análisis desde la nube.")}finally{a(!1)}},[]);ne.useEffect(()=>{k()},[k]);const D=async U=>{var _;const E=(_=U.target.files)==null?void 0:_[0];if(E){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(E.type)){i("Por favor, suba un archivo PDF o DOCX válido."),b(null),T(null),f("");return}b(E),f(E.name),i(null);const Q=new FileReader;Q.onloadend=()=>{const R=Q.result.split(",")[1];if(!R){i("No se pudo procesar el archivo. Puede que esté vacío o corrupto."),T(null);return}T({mimeType:E.type,data:R})},Q.onerror=()=>{i("Error al leer el archivo."),T(null)},Q.readAsDataURL(E)}},L=async()=>{if(!u.trim()||!y){i("Debe subir un documento PDF o DOCX y asignarle un nombre para analizar.");return}p(!0),i(null);const U=`
            Eres un experto en pedagogía y en la Taxonomía de Bloom. Analiza el siguiente documento de una evaluación educativa.
            Tu tarea es:
            1. Identificar cada pregunta o ítem de evaluación en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonomía de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados.
        `,E={type:ln.OBJECT,properties:{analysisResults:{type:ln.ARRAY,description:"Un array con cada pregunta identificada y su clasificación de Bloom.",items:{type:ln.OBJECT,properties:{question:{type:ln.STRING,description:"El texto exacto de la pregunta."},habilidadBloom:{type:ln.STRING,description:"El nivel de Bloom correspondiente.",enum:A6}},required:["question","habilidadBloom"]}},summary:{type:ln.OBJECT,description:"Un resumen con el conteo de preguntas por cada nivel de Bloom.",properties:{Recordar:{type:ln.INTEGER},Comprender:{type:ln.INTEGER},Aplicar:{type:ln.INTEGER},Analizar:{type:ln.INTEGER},Evaluar:{type:ln.INTEGER},Crear:{type:ln.INTEGER}}}},required:["analysisResults","summary"]};try{Pl("Análisis Taxonómico");const _=new mg({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),B={inlineData:{mimeType:y.mimeType,data:y.data}},Q=await _.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{text:U},B]},config:{responseMimeType:"application/json",responseSchema:E}}),R=JSON.parse(Q.text),F={documentName:u,uploadDate:new Date().toISOString(),userId:t.id,analysisResults:R.analysisResults,summary:R.summary},V=await sCe(F);await k(),c(V),f(""),b(null),T(null)}catch(_){console.error(_),i("Hubo un error al analizar el documento. Asegúrese de que el archivo no esté protegido o vacío. Inténtelo de nuevo.")}finally{p(!1)}},j=async U=>{if(window.confirm("¿Está seguro de eliminar este análisis?"))try{await iCe(U),await k(),(o==null?void 0:o.id)===U&&c(null)}catch(E){console.error("Error al eliminar análisis:",E),i("No se pudo eliminar el análisis en la nube.")}},H=ne.useMemo(()=>o?Object.values(o.summary).reduce((U,E)=>U+(E||0),0):0,[o]);return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Análisis Taxonómico de Evaluaciones"}),n&&l.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando análisis desde la nube..."}),s&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),l.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:l.jsxs("div",{className:"space-y-1 text-center",children:[l.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:l.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),l.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[l.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500 focus-within:outline-none",children:[l.jsx("span",{children:"Cargue un archivo"}),l.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:D,accept:".pdf,.doc,.docx,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"})]}),l.jsx("p",{className:"pl-1",children:"o arrástrelo aquí"})]}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500",children:g?g.name:"PDF, DOCX hasta 10MB"})]})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento/Prueba"}),l.jsx("input",{type:"text",id:"documentName",value:u,onChange:U=>f(U.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx("button",{onClick:L,disabled:m||!y,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:m?l.jsx(oCe,{}):"Analizar con IA"})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Análisis"}),!n&&e.length===0&&l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay análisis guardados en la nube."}),l.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:!n&&e.length>0&&e.map(U=>l.jsxs("button",{onClick:()=>c(U),className:`w-full text-left p-3 rounded-md border ${(o==null?void 0:o.id)===U.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/30 dark:border-amber-700":"bg-slate-50 hover:bg-slate-100 dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[l.jsx("p",{className:"font-semibold truncate",children:U.documentName}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:new Date(U.uploadDate).toLocaleString("es-CL")})]},U.id))})]})]}),l.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:o?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:o.documentName}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(o.uploadDate).toLocaleString("es-CL")]})]}),l.jsx("button",{onClick:()=>j(o.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado Taxonómico (",H," preguntas)"]}),l.jsx("div",{className:"space-y-3",children:A6.map(U=>{const E=o.summary[U]||0,_=H>0?E/H*100:0;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:U}),l.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[E," (",_.toFixed(0),"%)"]})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:l.jsx("div",{className:`${u6[U]} h-4 rounded-full`,style:{width:`${_}%`}})})]},U)})})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Análisis"}),l.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / Ítem"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o.analysisResults.map((U,E)=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:U.question}),l.jsx("td",{className:"px-4 py-3 text-sm",children:l.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${u6[U.habilidadBloom]}`,children:U.habilidadBloom})})]},E))})]})})]})]}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[l.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📊"}),l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Análisis"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo análisis o seleccione uno del historial para ver los resultados aquí."})]})})]})]})},lCe=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},cCe=({currentUser:t,onLogout:e,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,unreadMessagesCount:s,refreshUnreadCount:i})=>{const o=t.profile,c=ne.useMemo(()=>{const k=Oz[o];return o!==Pt.ESTUDIANTE?k:k.filter(D=>{if(D.name==="Asistencia a Empresa"){const L=lCe(t.curso||"");return L.startsWith("3º")||L.startsWith("4º")}return!0})},[o,t.curso]),[u,f]=ne.useState(null),[m,p]=ne.useState(!1);ne.useEffect(()=>{c&&c.length>0?f(c[0]):f(null)},[o,c]);const g=ne.useCallback(k=>{f(k),window.innerWidth<768&&p(!1)},[]),b=ne.useCallback(k=>{const D=c.find(L=>L.name===k);D&&g(D)},[c,g]),y=()=>l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center justify-center h-16 border-b border-slate-700 px-4 flex-shrink-0",children:[l.jsx(Ez,{}),l.jsx("span",{className:"ml-3 text-white font-bold text-xl whitespace-nowrap",children:"Gestión LIR"})]}),l.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto sidebar-scroll",children:c.map(k=>l.jsxs("button",{onClick:()=>g(k),className:`w-full flex items-center py-3 px-4 rounded-lg transition-colors duration-200 text-left ${(u==null?void 0:u.name)===k.name?"bg-slate-900 text-amber-400 font-semibold":"text-slate-300 hover:bg-slate-700 hover:text-white"}`,children:[k.icon,l.jsx("span",{className:"ml-4",children:k.name})]},k.name))})]}),T=()=>{if(!u)return l.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex items-center justify-center",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xl",children:"Seleccione un módulo del menú para comenzar."})});if(u.name==="Calendario Académico")return l.jsx(Bre,{profile:o});if(u.name==="Muro de Anuncios")return l.jsx(Dre,{currentUser:t});if(u.name==="Mensajería Interna")return l.jsx(Rge,{currentUser:t,refreshUnreadCount:i});if(u.name==="Generador de Actas")return l.jsx(jre,{});if(o===Pt.SUBDIRECCION){if(u.name==="Dashboard")return l.jsx(hq,{currentUser:t});if(u.name==="Administración")return l.jsx(cpe,{});if(u.name==="Seguimiento Curricular")return l.jsx(nCe,{currentUser:t});if(u.name==="Acompañamiento docente")return l.jsx(Sge,{currentUser:t});if(u.name==="Análisis Taxonómico")return l.jsx(d6,{currentUser:t});if(u.name==="Interdisciplinario")return l.jsx(e6,{});if(u.name==="Registro de inasistencias y reemplazos docentes")return l.jsx(cq,{currentUser:t});if(u.name==="Crear horarios")return l.jsx(Yq,{});if(u.name==="Seguimiento de acciones pedagógicas")return l.jsx(rK,{});if(u.name==="Inclusión")return l.jsx(X3,{currentUser:t})}if(o===Pt.PROFESORADO){if(u.name==="Planificación")return l.jsx(wre,{currentUser:t});if(u.name==="Mis Acompañamientos")return l.jsx($be,{currentUser:t});if(u.name==="Recursos de Aprendizaje")return l.jsx(Lbe,{});if(u.name==="Análisis Taxonómico")return l.jsx(d6,{currentUser:t});if(u.name==="Interdisciplinario")return l.jsx(e6,{});if(u.name==="Inclusión")return l.jsx(X3,{currentUser:t});if(u.name==="Actividades Remotas")return l.jsx(Tpe,{});if(u.name==="Evaluación de Aprendizajes")return l.jsx(Oae,{});if(u.name==="Evaluaciones Formativas")return l.jsx(vge,{currentUser:t})}if(o===Pt.COORDINACION_TP){if(u.name==="Seguimiento Dual")return l.jsx(vpe,{});if(u.name==="Asistencia Dual")return l.jsx(nge,{});if(u.name==="Pañol")return l.jsx(bye,{})}if(o===Pt.ESTUDIANTE){if(u.name==="Auto-aprendizaje")return l.jsx(Lpe,{currentUser:t});if(u.name==="Evaluación Formativa")return l.jsx(Hbe,{currentUser:t});if(u.name==="Tareas Interdisciplinarias")return l.jsx(Kbe,{currentUser:t});if(u.name==="Asistencia a Empresa")return l.jsx($pe,{currentUser:t})}return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:u.name}),l.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:l.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aquí irá la funcionalidad de ",l.jsx("span",{className:"font-semibold",children:u.name}),"."]})})]})};return l.jsxs("div",{className:"h-screen flex flex-col bg-slate-100",children:[l.jsx(Wz,{currentUser:t,onLogout:e,onNavigate:b,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,toggleSidebar:()=>p(!m),unreadMessagesCount:s,refreshUnreadCount:i}),l.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[m&&l.jsx("div",{onClick:()=>p(!1),className:"fixed inset-0 bg-black opacity-50 z-20 md:hidden"}),l.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 w-72 bg-slate-800 text-white flex flex-col transform md:translate-x-0 ${m?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out`,children:l.jsx(y,{})}),l.jsx("main",{className:"flex-1 overflow-y-auto",children:l.jsx("div",{className:"p-6 md:p-8",children:T()})})]})]})},ACe=({onSelectProfile:t,isAdminView:e=!1})=>l.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[l.jsxs("div",{className:"text-center mb-10",children:[l.jsx("div",{className:"mb-4 flex justify-center items-center",children:l.jsx(s5,{})}),l.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:e?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:jz.map(r=>l.jsxs("button",{onClick:()=>t(r.id),className:"group bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md hover:shadow-xl hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-amber-400 focus:ring-opacity-50 transition-all duration-300 ease-in-out flex flex-col items-center justify-center text-center",children:[l.jsx("div",{className:"text-slate-700 dark:text-slate-300 group-hover:text-amber-400 transition-colors duration-300",children:r.icon}),l.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-800 dark:text-slate-200",children:r.label})]},r.id))}),l.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]}),uCe=()=>{const[t,e]=ne.useState(null),[r,n]=ne.useState(null),[a,s]=ne.useState(!0),[i,o]=ne.useState(null),[c,u]=ne.useState(!1),[f,m]=ne.useState(null);ne.useEffect(()=>{const D=WQ(Yg,async L=>{if(e(L),L)try{const j=await Cz(L.email);j?(n(j),j.profile===Pt.SUBDIRECCION&&u(!0)):(o("Usuario no encontrado en la base de datos. Contacte al administrador."),await fb())}catch{o("Error al conectar con la base de datos."),await fb()}else n(null),m(null),u(!1),o(null);s(!1)});return()=>D()},[]);const p=async(D,L)=>{if(o(null),!D.trim()||!L.trim()){o("Por favor ingrese email y contraseña");return}try{await yz(D.trim(),L)}catch(j){switch(j.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":o("Credenciales inválidas. Verifique su email y contraseña.");break;case"auth/too-many-requests":o("Demasiados intentos fallidos. Intente más tarde.");break;case"auth/network-request-failed":o("Error de conexión. Verifique su internet.");break;default:o("Ocurrió un error al intentar iniciar sesión.")}}},g=async D=>{try{await bz(D)}catch(L){console.error("Error al enviar email de recuperación:",L)}},b=D=>{m(D),u(!1)},y=()=>{u(!0),m(null)},T=async()=>{try{await fb()}catch(D){console.error("Error al cerrar sesión:",D)}};if(a)return l.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"mb-4 flex justify-center items-center",children:l.jsx(s5,{})}),l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicación..."})]})});if(!t||!r)return l.jsx(Gz,{onLoginAttempt:p,onForgotPasswordRequest:g,error:i});if(c&&r.profile===Pt.SUBDIRECCION)return l.jsx(ACe,{onSelectProfile:b,isAdminView:!0});const k=f||r.profile;return l.jsx(cCe,{currentUser:{...r,profile:k},onLogout:T,onChangeProfile:r.profile===Pt.SUBDIRECCION?y:void 0,canChangeProfile:r.profile===Pt.SUBDIRECCION})},$P=document.getElementById("root");if(!$P)throw new Error("Could not find root element to mount to");const dCe=lO.createRoot($P);dCe.render(l.jsx(a_.StrictMode,{children:l.jsx(uCe,{})}));export{On as _,fCe as c,f6 as g};
