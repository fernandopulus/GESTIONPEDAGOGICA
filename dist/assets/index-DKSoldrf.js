var xpe=Object.defineProperty;var vpe=(e,t,r)=>t in e?xpe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Wp=(e,t,r)=>vpe(e,typeof t!="symbol"?t+"":t,r);function bpe(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var oyt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ll(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ype(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var r3={exports:{}},Gy={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nH;function wpe(){if(nH)return Gy;nH=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,s){var i=null;if(s!==void 0&&(i=""+s),a.key!==void 0&&(i=""+a.key),"key"in a){s={};for(var o in a)o!=="key"&&(s[o]=a[o])}else s=a;return a=s.ref,{$$typeof:e,type:n,key:i,ref:a!==void 0?a:null,props:s}}return Gy.Fragment=t,Gy.jsx=r,Gy.jsxs=r,Gy}var aH;function Epe(){return aH||(aH=1,r3.exports=wpe()),r3.exports}var l=Epe(),n3={exports:{}},dn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sH;function Cpe(){if(sH)return dn;sH=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function h(J){return J===null||typeof J!="object"?null:(J=f&&J[f]||J["@@iterator"],typeof J=="function"?J:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,x={};function v(J,te,M){this.props=J,this.context=te,this.refs=x,this.updater=M||m}v.prototype.isReactComponent={},v.prototype.setState=function(J,te){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,te,"setState")},v.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function y(){}y.prototype=v.prototype;function w(J,te,M){this.props=J,this.context=te,this.refs=x,this.updater=M||m}var _=w.prototype=new y;_.constructor=w,g(_,v.prototype),_.isPureReactComponent=!0;var T=Array.isArray,B={H:null,A:null,T:null,S:null,V:null},j=Object.prototype.hasOwnProperty;function E(J,te,M,H,Y,Z){return M=Z.ref,{$$typeof:e,type:J,key:te,ref:M!==void 0?M:null,props:Z}}function N(J,te){return E(J.type,te,void 0,void 0,void 0,J.props)}function I(J){return typeof J=="object"&&J!==null&&J.$$typeof===e}function L(J){var te={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(M){return te[M]})}var D=/\/+/g;function k(J,te){return typeof J=="object"&&J!==null&&J.key!=null?L(""+J.key):te.toString(36)}function P(){}function R(J){switch(J.status){case"fulfilled":return J.value;case"rejected":throw J.reason;default:switch(typeof J.status=="string"?J.then(P,P):(J.status="pending",J.then(function(te){J.status==="pending"&&(J.status="fulfilled",J.value=te)},function(te){J.status==="pending"&&(J.status="rejected",J.reason=te)})),J.status){case"fulfilled":return J.value;case"rejected":throw J.reason}}throw J}function W(J,te,M,H,Y){var Z=typeof J;(Z==="undefined"||Z==="boolean")&&(J=null);var ae=!1;if(J===null)ae=!0;else switch(Z){case"bigint":case"string":case"number":ae=!0;break;case"object":switch(J.$$typeof){case e:case t:ae=!0;break;case d:return ae=J._init,W(ae(J._payload),te,M,H,Y)}}if(ae)return Y=Y(J),ae=H===""?"."+k(J,0):H,T(Y)?(M="",ae!=null&&(M=ae.replace(D,"$&/")+"/"),W(Y,te,M,"",function(ce){return ce})):Y!=null&&(I(Y)&&(Y=N(Y,M+(Y.key==null||J&&J.key===Y.key?"":(""+Y.key).replace(D,"$&/")+"/")+ae)),te.push(Y)),1;ae=0;var le=H===""?".":H+":";if(T(J))for(var ie=0;ie<J.length;ie++)H=J[ie],Z=le+k(H,ie),ae+=W(H,te,M,Z,Y);else if(ie=h(J),typeof ie=="function")for(J=ie.call(J),ie=0;!(H=J.next()).done;)H=H.value,Z=le+k(H,ie++),ae+=W(H,te,M,Z,Y);else if(Z==="object"){if(typeof J.then=="function")return W(R(J),te,M,H,Y);throw te=String(J),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return ae}function V(J,te,M){if(J==null)return J;var H=[],Y=0;return W(J,H,"","",function(Z){return te.call(M,Z,Y++)}),H}function G(J){if(J._status===-1){var te=J._result;te=te(),te.then(function(M){(J._status===0||J._status===-1)&&(J._status=1,J._result=M)},function(M){(J._status===0||J._status===-1)&&(J._status=2,J._result=M)}),J._status===-1&&(J._status=0,J._result=te)}if(J._status===1)return J._result.default;throw J._result}var z=typeof reportError=="function"?reportError:function(J){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof J=="object"&&J!==null&&typeof J.message=="string"?String(J.message):String(J),error:J});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",J);return}console.error(J)};function K(){}return dn.Children={map:V,forEach:function(J,te,M){V(J,function(){te.apply(this,arguments)},M)},count:function(J){var te=0;return V(J,function(){te++}),te},toArray:function(J){return V(J,function(te){return te})||[]},only:function(J){if(!I(J))throw Error("React.Children.only expected to receive a single React element child.");return J}},dn.Component=v,dn.Fragment=r,dn.Profiler=a,dn.PureComponent=w,dn.StrictMode=n,dn.Suspense=c,dn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,dn.__COMPILER_RUNTIME={__proto__:null,c:function(J){return B.H.useMemoCache(J)}},dn.cache=function(J){return function(){return J.apply(null,arguments)}},dn.cloneElement=function(J,te,M){if(J==null)throw Error("The argument must be a React element, but you passed "+J+".");var H=g({},J.props),Y=J.key,Z=void 0;if(te!=null)for(ae in te.ref!==void 0&&(Z=void 0),te.key!==void 0&&(Y=""+te.key),te)!j.call(te,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&te.ref===void 0||(H[ae]=te[ae]);var ae=arguments.length-2;if(ae===1)H.children=M;else if(1<ae){for(var le=Array(ae),ie=0;ie<ae;ie++)le[ie]=arguments[ie+2];H.children=le}return E(J.type,Y,void 0,void 0,Z,H)},dn.createContext=function(J){return J={$$typeof:i,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null},J.Provider=J,J.Consumer={$$typeof:s,_context:J},J},dn.createElement=function(J,te,M){var H,Y={},Z=null;if(te!=null)for(H in te.key!==void 0&&(Z=""+te.key),te)j.call(te,H)&&H!=="key"&&H!=="__self"&&H!=="__source"&&(Y[H]=te[H]);var ae=arguments.length-2;if(ae===1)Y.children=M;else if(1<ae){for(var le=Array(ae),ie=0;ie<ae;ie++)le[ie]=arguments[ie+2];Y.children=le}if(J&&J.defaultProps)for(H in ae=J.defaultProps,ae)Y[H]===void 0&&(Y[H]=ae[H]);return E(J,Z,void 0,void 0,null,Y)},dn.createRef=function(){return{current:null}},dn.forwardRef=function(J){return{$$typeof:o,render:J}},dn.isValidElement=I,dn.lazy=function(J){return{$$typeof:d,_payload:{_status:-1,_result:J},_init:G}},dn.memo=function(J,te){return{$$typeof:u,type:J,compare:te===void 0?null:te}},dn.startTransition=function(J){var te=B.T,M={};B.T=M;try{var H=J(),Y=B.S;Y!==null&&Y(M,H),typeof H=="object"&&H!==null&&typeof H.then=="function"&&H.then(K,z)}catch(Z){z(Z)}finally{B.T=te}},dn.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},dn.use=function(J){return B.H.use(J)},dn.useActionState=function(J,te,M){return B.H.useActionState(J,te,M)},dn.useCallback=function(J,te){return B.H.useCallback(J,te)},dn.useContext=function(J){return B.H.useContext(J)},dn.useDebugValue=function(){},dn.useDeferredValue=function(J,te){return B.H.useDeferredValue(J,te)},dn.useEffect=function(J,te,M){var H=B.H;if(typeof M=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return H.useEffect(J,te)},dn.useId=function(){return B.H.useId()},dn.useImperativeHandle=function(J,te,M){return B.H.useImperativeHandle(J,te,M)},dn.useInsertionEffect=function(J,te){return B.H.useInsertionEffect(J,te)},dn.useLayoutEffect=function(J,te){return B.H.useLayoutEffect(J,te)},dn.useMemo=function(J,te){return B.H.useMemo(J,te)},dn.useOptimistic=function(J,te){return B.H.useOptimistic(J,te)},dn.useReducer=function(J,te,M){return B.H.useReducer(J,te,M)},dn.useRef=function(J){return B.H.useRef(J)},dn.useState=function(J){return B.H.useState(J)},dn.useSyncExternalStore=function(J,te,M){return B.H.useSyncExternalStore(J,te,M)},dn.useTransition=function(){return B.H.useTransition()},dn.version="19.1.1",dn}var iH;function Cb(){return iH||(iH=1,n3.exports=Cpe()),n3.exports}var S=Cb();const Ze=Ll(S),aN=bpe({__proto__:null,default:Ze},[S]);var a3={exports:{}},Ky={},s3={exports:{}},i3={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oH;function _pe(){return oH||(oH=1,function(e){function t(V,G){var z=V.length;V.push(G);e:for(;0<z;){var K=z-1>>>1,J=V[K];if(0<a(J,G))V[K]=G,V[z]=J,z=K;else break e}}function r(V){return V.length===0?null:V[0]}function n(V){if(V.length===0)return null;var G=V[0],z=V.pop();if(z!==G){V[0]=z;e:for(var K=0,J=V.length,te=J>>>1;K<te;){var M=2*(K+1)-1,H=V[M],Y=M+1,Z=V[Y];if(0>a(H,z))Y<J&&0>a(Z,H)?(V[K]=Z,V[Y]=z,K=Y):(V[K]=H,V[M]=z,K=M);else if(Y<J&&0>a(Z,z))V[K]=Z,V[Y]=z,K=Y;else break e}}return G}function a(V,G){var z=V.sortIndex-G.sortIndex;return z!==0?z:V.id-G.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var c=[],u=[],d=1,f=null,h=3,m=!1,g=!1,x=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function T(V){for(var G=r(u);G!==null;){if(G.callback===null)n(u);else if(G.startTime<=V)n(u),G.sortIndex=G.expirationTime,t(c,G);else break;G=r(u)}}function B(V){if(x=!1,T(V),!g)if(r(c)!==null)g=!0,j||(j=!0,k());else{var G=r(u);G!==null&&W(B,G.startTime-V)}}var j=!1,E=-1,N=5,I=-1;function L(){return v?!0:!(e.unstable_now()-I<N)}function D(){if(v=!1,j){var V=e.unstable_now();I=V;var G=!0;try{e:{g=!1,x&&(x=!1,w(E),E=-1),m=!0;var z=h;try{t:{for(T(V),f=r(c);f!==null&&!(f.expirationTime>V&&L());){var K=f.callback;if(typeof K=="function"){f.callback=null,h=f.priorityLevel;var J=K(f.expirationTime<=V);if(V=e.unstable_now(),typeof J=="function"){f.callback=J,T(V),G=!0;break t}f===r(c)&&n(c),T(V)}else n(c);f=r(c)}if(f!==null)G=!0;else{var te=r(u);te!==null&&W(B,te.startTime-V),G=!1}}break e}finally{f=null,h=z,m=!1}G=void 0}}finally{G?k():j=!1}}}var k;if(typeof _=="function")k=function(){_(D)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,R=P.port2;P.port1.onmessage=D,k=function(){R.postMessage(null)}}else k=function(){y(D,0)};function W(V,G){E=y(function(){V(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(V){switch(h){case 1:case 2:case 3:var G=3;break;default:G=h}var z=h;h=G;try{return V()}finally{h=z}},e.unstable_requestPaint=function(){v=!0},e.unstable_runWithPriority=function(V,G){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var z=h;h=V;try{return G()}finally{h=z}},e.unstable_scheduleCallback=function(V,G,z){var K=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?K+z:K):z=K,V){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=z+J,V={id:d++,callback:G,priorityLevel:V,startTime:z,expirationTime:J,sortIndex:-1},z>K?(V.sortIndex=z,t(u,V),r(c)===null&&V===r(u)&&(x?(w(E),E=-1):x=!0,W(B,z-K))):(V.sortIndex=J,t(c,V),g||m||(g=!0,j||(j=!0,k()))),V},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(V){var G=h;return function(){var z=h;h=G;try{return V.apply(this,arguments)}finally{h=z}}}}(i3)),i3}var lH;function Spe(){return lH||(lH=1,s3.exports=_pe()),s3.exports}var o3={exports:{}},Ko={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cH;function Npe(){if(cH)return Ko;cH=1;var e=Cb();function t(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(c,u,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:f==null?null:""+f,children:c,containerInfo:u,implementation:d}}var i=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Ko.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Ko.createPortal=function(c,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return s(c,u,null,d)},Ko.flushSync=function(c){var u=i.T,d=n.p;try{if(i.T=null,n.p=2,c)return c()}finally{i.T=u,n.p=d,n.d.f()}},Ko.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,n.d.C(c,u))},Ko.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},Ko.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var d=u.as,f=o(d,u.crossOrigin),h=typeof u.integrity=="string"?u.integrity:void 0,m=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?n.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:f,integrity:h,fetchPriority:m}):d==="script"&&n.d.X(c,{crossOrigin:f,integrity:h,fetchPriority:m,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Ko.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=o(u.as,u.crossOrigin);n.d.M(c,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&n.d.M(c)},Ko.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,f=o(d,u.crossOrigin);n.d.L(c,d,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Ko.preloadModule=function(c,u){if(typeof c=="string")if(u){var d=o(u.as,u.crossOrigin);n.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else n.d.m(c)},Ko.requestFormReset=function(c){n.d.r(c)},Ko.unstable_batchedUpdates=function(c,u){return c(u)},Ko.useFormState=function(c,u,d){return i.H.useFormState(c,u,d)},Ko.useFormStatus=function(){return i.H.useHostTransitionStatus()},Ko.version="19.1.1",Ko}var uH;function kee(){if(uH)return o3.exports;uH=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),o3.exports=Npe(),o3.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dH;function kpe(){if(dH)return Ky;dH=1;var e=Spe(),t=Cb(),r=kee();function n(A){var p="https://react.dev/errors/"+A;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+A+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function s(A){var p=A,b=A;if(A.alternate)for(;p.return;)p=p.return;else{A=p;do p=A,(p.flags&4098)!==0&&(b=p.return),A=p.return;while(A)}return p.tag===3?b:null}function i(A){if(A.tag===13){var p=A.memoizedState;if(p===null&&(A=A.alternate,A!==null&&(p=A.memoizedState)),p!==null)return p.dehydrated}return null}function o(A){if(s(A)!==A)throw Error(n(188))}function c(A){var p=A.alternate;if(!p){if(p=s(A),p===null)throw Error(n(188));return p!==A?null:A}for(var b=A,C=p;;){var U=b.return;if(U===null)break;var q=U.alternate;if(q===null){if(C=U.return,C!==null){b=C;continue}break}if(U.child===q.child){for(q=U.child;q;){if(q===b)return o(U),A;if(q===C)return o(U),p;q=q.sibling}throw Error(n(188))}if(b.return!==C.return)b=U,C=q;else{for(var ue=!1,ye=U.child;ye;){if(ye===b){ue=!0,b=U,C=q;break}if(ye===C){ue=!0,C=U,b=q;break}ye=ye.sibling}if(!ue){for(ye=q.child;ye;){if(ye===b){ue=!0,b=q,C=U;break}if(ye===C){ue=!0,C=q,b=U;break}ye=ye.sibling}if(!ue)throw Error(n(189))}}if(b.alternate!==C)throw Error(n(190))}if(b.tag!==3)throw Error(n(188));return b.stateNode.current===b?A:p}function u(A){var p=A.tag;if(p===5||p===26||p===27||p===6)return A;for(A=A.child;A!==null;){if(p=u(A),p!==null)return p;A=A.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),_=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function k(A){return A===null||typeof A!="object"?null:(A=D&&A[D]||A["@@iterator"],typeof A=="function"?A:null)}var P=Symbol.for("react.client.reference");function R(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===P?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case g:return"Fragment";case v:return"Profiler";case x:return"StrictMode";case B:return"Suspense";case j:return"SuspenseList";case I:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case m:return"Portal";case _:return(A.displayName||"Context")+".Provider";case w:return(A._context.displayName||"Context")+".Consumer";case T:var p=A.render;return A=A.displayName,A||(A=p.displayName||p.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case E:return p=A.displayName||null,p!==null?p:R(A.type)||"Memo";case N:p=A._payload,A=A._init;try{return R(A(p))}catch{}}return null}var W=Array.isArray,V=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z={pending:!1,data:null,method:null,action:null},K=[],J=-1;function te(A){return{current:A}}function M(A){0>J||(A.current=K[J],K[J]=null,J--)}function H(A,p){J++,K[J]=A.current,A.current=p}var Y=te(null),Z=te(null),ae=te(null),le=te(null);function ie(A,p){switch(H(ae,p),H(Z,A),H(Y,null),p.nodeType){case 9:case 11:A=(A=p.documentElement)&&(A=A.namespaceURI)?jQ(A):0;break;default:if(A=p.tagName,p=p.namespaceURI)p=jQ(p),A=IQ(p,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}M(Y),H(Y,A)}function ce(){M(Y),M(Z),M(ae)}function Ae(A){A.memoizedState!==null&&H(le,A);var p=Y.current,b=IQ(p,A.type);p!==b&&(H(Z,A),H(Y,b))}function Fe(A){Z.current===A&&(M(Y),M(Z)),le.current===A&&(M(le),Qy._currentValue=z)}var ne=Object.prototype.hasOwnProperty,_e=e.unstable_scheduleCallback,Ie=e.unstable_cancelCallback,Se=e.unstable_shouldYield,me=e.unstable_requestPaint,Be=e.unstable_now,Le=e.unstable_getCurrentPriorityLevel,We=e.unstable_ImmediatePriority,be=e.unstable_UserBlockingPriority,Oe=e.unstable_NormalPriority,Pe=e.unstable_LowPriority,qe=e.unstable_IdlePriority,et=e.log,ct=e.unstable_setDisableYieldValue,pt=null,Ft=null;function Ut(A){if(typeof et=="function"&&ct(A),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(pt,A)}catch{}}var Rt=Math.clz32?Math.clz32:jr,Ht=Math.log,yt=Math.LN2;function jr(A){return A>>>=0,A===0?32:31-(Ht(A)/yt|0)|0}var rr=256,on=4194304;function kr(A){var p=A&42;if(p!==0)return p;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function Kr(A,p,b){var C=A.pendingLanes;if(C===0)return 0;var U=0,q=A.suspendedLanes,ue=A.pingedLanes;A=A.warmLanes;var ye=C&134217727;return ye!==0?(C=ye&~q,C!==0?U=kr(C):(ue&=ye,ue!==0?U=kr(ue):b||(b=ye&~A,b!==0&&(U=kr(b))))):(ye=C&~q,ye!==0?U=kr(ye):ue!==0?U=kr(ue):b||(b=C&~A,b!==0&&(U=kr(b)))),U===0?0:p!==0&&p!==U&&(p&q)===0&&(q=U&-U,b=p&-p,q>=b||q===32&&(b&4194048)!==0)?p:U}function Fn(A,p){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&p)===0}function Rr(A,p){switch(A){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bs(){var A=rr;return rr<<=1,(rr&4194048)===0&&(rr=256),A}function pn(){var A=on;return on<<=1,(on&62914560)===0&&(on=4194304),A}function da(A){for(var p=[],b=0;31>b;b++)p.push(A);return p}function Da(A,p){A.pendingLanes|=p,p!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function an(A,p,b,C,U,q){var ue=A.pendingLanes;A.pendingLanes=b,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=b,A.entangledLanes&=b,A.errorRecoveryDisabledLanes&=b,A.shellSuspendCounter=0;var ye=A.entanglements,Re=A.expirationTimes,lt=A.hiddenUpdates;for(b=ue&~b;0<b;){var kt=31-Rt(b),Dt=1<<kt;ye[kt]=0,Re[kt]=-1;var ft=lt[kt];if(ft!==null)for(lt[kt]=null,kt=0;kt<ft.length;kt++){var At=ft[kt];At!==null&&(At.lane&=-536870913)}b&=~Dt}C!==0&&gr(A,C,0),q!==0&&U===0&&A.tag!==0&&(A.suspendedLanes|=q&~(ue&~p))}function gr(A,p,b){A.pendingLanes|=p,A.suspendedLanes&=~p;var C=31-Rt(p);A.entangledLanes|=p,A.entanglements[C]=A.entanglements[C]|1073741824|b&4194090}function tt(A,p){var b=A.entangledLanes|=p;for(A=A.entanglements;b;){var C=31-Rt(b),U=1<<C;U&p|A[C]&p&&(A[C]|=p),b&=~U}}function gt(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function Je(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function xt(){var A=G.p;return A!==0?A:(A=window.event,A===void 0?32:YQ(A.type))}function Et(A,p){var b=G.p;try{return G.p=A,p()}finally{G.p=b}}var bt=Math.random().toString(36).slice(2),ar="__reactFiber$"+bt,vr="__reactProps$"+bt,Yr="__reactContainer$"+bt,tn="__reactEvents$"+bt,Xr="__reactListeners$"+bt,he="__reactHandles$"+bt,Te="__reactResources$"+bt,Ce="__reactMarker$"+bt;function we(A){delete A[ar],delete A[vr],delete A[tn],delete A[Xr],delete A[he]}function Ne(A){var p=A[ar];if(p)return p;for(var b=A.parentNode;b;){if(p=b[Yr]||b[ar]){if(b=p.alternate,p.child!==null||b!==null&&b.child!==null)for(A=PQ(A);A!==null;){if(b=A[ar])return b;A=PQ(A)}return p}A=b,b=A.parentNode}return null}function je(A){if(A=A[ar]||A[Yr]){var p=A.tag;if(p===5||p===6||p===13||p===26||p===27||p===3)return A}return null}function Ye(A){var p=A.tag;if(p===5||p===26||p===27||p===6)return A.stateNode;throw Error(n(33))}function dt(A){var p=A[Te];return p||(p=A[Te]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function $e(A){A[Ce]=!0}var nt=new Set,it={};function Ot(A,p){zt(A,p),zt(A+"Capture",p)}function zt(A,p){for(it[A]=p,A=0;A<p.length;A++)nt.add(p[A])}var Zt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vt={},Kt={};function Br(A){return ne.call(Kt,A)?!0:ne.call(Vt,A)?!1:Zt.test(A)?Kt[A]=!0:(Vt[A]=!0,!1)}function ln(A,p,b){if(Br(p))if(b===null)A.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":A.removeAttribute(p);return;case"boolean":var C=p.toLowerCase().slice(0,5);if(C!=="data-"&&C!=="aria-"){A.removeAttribute(p);return}}A.setAttribute(p,""+b)}}function cn(A,p,b){if(b===null)A.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(p);return}A.setAttribute(p,""+b)}}function hn(A,p,b,C){if(C===null)A.removeAttribute(b);else{switch(typeof C){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(b);return}A.setAttributeNS(p,b,""+C)}}var ys,Po;function ws(A){if(ys===void 0)try{throw Error()}catch(b){var p=b.stack.trim().match(/\n( *(at )?)/);ys=p&&p[1]||"",Po=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ys+A+Po}var ci=!1;function Us(A,p){if(!A||ci)return"";ci=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var C={DetermineComponentFrameRoot:function(){try{if(p){var Dt=function(){throw Error()};if(Object.defineProperty(Dt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Dt,[])}catch(At){var ft=At}Reflect.construct(A,[],Dt)}else{try{Dt.call()}catch(At){ft=At}A.call(Dt.prototype)}}else{try{throw Error()}catch(At){ft=At}(Dt=A())&&typeof Dt.catch=="function"&&Dt.catch(function(){})}}catch(At){if(At&&ft&&typeof At.stack=="string")return[At.stack,ft.stack]}return[null,null]}};C.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var U=Object.getOwnPropertyDescriptor(C.DetermineComponentFrameRoot,"name");U&&U.configurable&&Object.defineProperty(C.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var q=C.DetermineComponentFrameRoot(),ue=q[0],ye=q[1];if(ue&&ye){var Re=ue.split(`
`),lt=ye.split(`
`);for(U=C=0;C<Re.length&&!Re[C].includes("DetermineComponentFrameRoot");)C++;for(;U<lt.length&&!lt[U].includes("DetermineComponentFrameRoot");)U++;if(C===Re.length||U===lt.length)for(C=Re.length-1,U=lt.length-1;1<=C&&0<=U&&Re[C]!==lt[U];)U--;for(;1<=C&&0<=U;C--,U--)if(Re[C]!==lt[U]){if(C!==1||U!==1)do if(C--,U--,0>U||Re[C]!==lt[U]){var kt=`
`+Re[C].replace(" at new "," at ");return A.displayName&&kt.includes("<anonymous>")&&(kt=kt.replace("<anonymous>",A.displayName)),kt}while(1<=C&&0<=U);break}}}finally{ci=!1,Error.prepareStackTrace=b}return(b=A?A.displayName||A.name:"")?ws(b):""}function Ni(A){switch(A.tag){case 26:case 27:case 5:return ws(A.type);case 16:return ws("Lazy");case 13:return ws("Suspense");case 19:return ws("SuspenseList");case 0:case 15:return Us(A.type,!1);case 11:return Us(A.type.render,!1);case 1:return Us(A.type,!0);case 31:return ws("Activity");default:return""}}function Ea(A){try{var p="";do p+=Ni(A),A=A.return;while(A);return p}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}function ui(A){switch(typeof A){case"bigint":case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function vf(A){var p=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function x0(A){var p=vf(A)?"checked":"value",b=Object.getOwnPropertyDescriptor(A.constructor.prototype,p),C=""+A[p];if(!A.hasOwnProperty(p)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var U=b.get,q=b.set;return Object.defineProperty(A,p,{configurable:!0,get:function(){return U.call(this)},set:function(ue){C=""+ue,q.call(this,ue)}}),Object.defineProperty(A,p,{enumerable:b.enumerable}),{getValue:function(){return C},setValue:function(ue){C=""+ue},stopTracking:function(){A._valueTracker=null,delete A[p]}}}}function hu(A){A._valueTracker||(A._valueTracker=x0(A))}function LA(A){if(!A)return!1;var p=A._valueTracker;if(!p)return!0;var b=p.getValue(),C="";return A&&(C=vf(A)?A.checked?"true":"false":A.value),A=C,A!==b?(p.setValue(A),!0):!1}function ki(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}var bf=/[\n"\\]/g;function On(A){return A.replace(bf,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function Bi(A,p,b,C,U,q,ue,ye){A.name="",ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"?A.type=ue:A.removeAttribute("type"),p!=null?ue==="number"?(p===0&&A.value===""||A.value!=p)&&(A.value=""+ui(p)):A.value!==""+ui(p)&&(A.value=""+ui(p)):ue!=="submit"&&ue!=="reset"||A.removeAttribute("value"),p!=null?pu(A,ue,ui(p)):b!=null?pu(A,ue,ui(b)):C!=null&&A.removeAttribute("value"),U==null&&q!=null&&(A.defaultChecked=!!q),U!=null&&(A.checked=U&&typeof U!="function"&&typeof U!="symbol"),ye!=null&&typeof ye!="function"&&typeof ye!="symbol"&&typeof ye!="boolean"?A.name=""+ui(ye):A.removeAttribute("name")}function mu(A,p,b,C,U,q,ue,ye){if(q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"&&(A.type=q),p!=null||b!=null){if(!(q!=="submit"&&q!=="reset"||p!=null))return;b=b!=null?""+ui(b):"",p=p!=null?""+ui(p):b,ye||p===A.value||(A.value=p),A.defaultValue=p}C=C??U,C=typeof C!="function"&&typeof C!="symbol"&&!!C,A.checked=ye?A.checked:!!C,A.defaultChecked=!!C,ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"&&(A.name=ue)}function pu(A,p,b){p==="number"&&ki(A.ownerDocument)===A||A.defaultValue===""+b||(A.defaultValue=""+b)}function Ul(A,p,b,C){if(A=A.options,p){p={};for(var U=0;U<b.length;U++)p["$"+b[U]]=!0;for(b=0;b<A.length;b++)U=p.hasOwnProperty("$"+A[b].value),A[b].selected!==U&&(A[b].selected=U),U&&C&&(A[b].defaultSelected=!0)}else{for(b=""+ui(b),p=null,U=0;U<A.length;U++){if(A[U].value===b){A[U].selected=!0,C&&(A[U].defaultSelected=!0);return}p!==null||A[U].disabled||(p=A[U])}p!==null&&(p.selected=!0)}}function zn(A,p,b){if(p!=null&&(p=""+ui(p),p!==A.value&&(A.value=p),b==null)){A.defaultValue!==p&&(A.defaultValue=p);return}A.defaultValue=b!=null?""+ui(b):""}function gu(A,p,b,C){if(p==null){if(C!=null){if(b!=null)throw Error(n(92));if(W(C)){if(1<C.length)throw Error(n(93));C=C[0]}b=C}b==null&&(b=""),p=b}b=ui(p),A.defaultValue=b,C=A.textContent,C===b&&C!==""&&C!==null&&(A.value=C)}function Ro(A,p){if(p){var b=A.firstChild;if(b&&b===A.lastChild&&b.nodeType===3){b.nodeValue=p;return}}A.textContent=p}var wc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function v0(A,p,b){var C=p.indexOf("--")===0;b==null||typeof b=="boolean"||b===""?C?A.setProperty(p,""):p==="float"?A.cssFloat="":A[p]="":C?A.setProperty(p,b):typeof b!="number"||b===0||wc.has(p)?p==="float"?A.cssFloat=b:A[p]=(""+b).trim():A[p]=b+"px"}function MA(A,p,b){if(p!=null&&typeof p!="object")throw Error(n(62));if(A=A.style,b!=null){for(var C in b)!b.hasOwnProperty(C)||p!=null&&p.hasOwnProperty(C)||(C.indexOf("--")===0?A.setProperty(C,""):C==="float"?A.cssFloat="":A[C]="");for(var U in p)C=p[U],p.hasOwnProperty(U)&&b[U]!==C&&v0(A,U,C)}else for(var q in p)p.hasOwnProperty(q)&&v0(A,q,p[q])}function UA(A){if(A.indexOf("-")===-1)return!1;switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ec=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Cc(A){return yf.test(""+A)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":A}var Ql=null;function fa(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var _c=null,Hl=null;function Or(A){var p=je(A);if(p&&(A=p.stateNode)){var b=A[vr]||null;e:switch(A=p.stateNode,p.type){case"input":if(Bi(A,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name),p=b.name,b.type==="radio"&&p!=null){for(b=A;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll('input[name="'+On(""+p)+'"][type="radio"]'),p=0;p<b.length;p++){var C=b[p];if(C!==A&&C.form===A.form){var U=C[vr]||null;if(!U)throw Error(n(90));Bi(C,U.value,U.defaultValue,U.defaultValue,U.checked,U.defaultChecked,U.type,U.name)}}for(p=0;p<b.length;p++)C=b[p],C.form===A.form&&LA(C)}break e;case"textarea":zn(A,b.value,b.defaultValue);break e;case"select":p=b.value,p!=null&&Ul(A,!!b.multiple,p,!1)}}}var Vl=!1;function b0(A,p,b){if(Vl)return A(p,b);Vl=!0;try{var C=A(p);return C}finally{if(Vl=!1,(_c!==null||Hl!==null)&&(d_(),_c&&(p=_c,A=Hl,Hl=_c=null,Or(p),A)))for(p=0;p<A.length;p++)Or(A[p])}}function zi(A,p){var b=A.stateNode;if(b===null)return null;var C=b[vr]||null;if(C===null)return null;b=C[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(A=A.type,C=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!C;break e;default:A=!1}if(A)return null;if(b&&typeof b!="function")throw Error(n(231,p,typeof b));return b}var Lo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ho=!1;if(Lo)try{var zl={};Object.defineProperty(zl,"passive",{get:function(){ho=!0}}),window.addEventListener("test",zl,zl),window.removeEventListener("test",zl,zl)}catch{ho=!1}var Mo=null,xu=null,Sc=null;function QA(){if(Sc)return Sc;var A,p=xu,b=p.length,C,U="value"in Mo?Mo.value:Mo.textContent,q=U.length;for(A=0;A<b&&p[A]===U[A];A++);var ue=b-A;for(C=1;C<=ue&&p[b-C]===U[q-C];C++);return Sc=U.slice(A,1<C?1-C:void 0)}function Uo(A){var p=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&p===13&&(A=13)):A=p,A===10&&(A=13),32<=A||A===13?A:0}function $i(){return!0}function $l(){return!1}function Es(A){function p(b,C,U,q,ue){this._reactName=b,this._targetInst=U,this.type=C,this.nativeEvent=q,this.target=ue,this.currentTarget=null;for(var ye in A)A.hasOwnProperty(ye)&&(b=A[ye],this[ye]=b?b(q):q[ye]);return this.isDefaultPrevented=(q.defaultPrevented!=null?q.defaultPrevented:q.returnValue===!1)?$i:$l,this.isPropagationStopped=$l,this}return d(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=$i)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=$i)},persist:function(){},isPersistent:$i}),p}var bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vu=Es(bn),Gl=d({},bn,{view:0,detail:0}),HA=Es(Gl),pd,gd,yl,Gi=d({},Gl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Eu,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==yl&&(yl&&A.type==="mousemove"?(pd=A.screenX-yl.screenX,gd=A.screenY-yl.screenY):gd=pd=0,yl=A),pd)},movementY:function(A){return"movementY"in A?A.movementY:gd}}),Cs=Es(Gi),y0=d({},Gi,{dataTransfer:0}),bu=Es(y0),Ti=d({},Gl,{relatedTarget:0}),yu=Es(Ti),Nc=d({},bn,{animationName:0,elapsedTime:0,pseudoElement:0}),wf=Es(Nc),xd=d({},bn,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),Ef=Es(xd),VA=d({},bn,{data:0}),vd=Es(VA),wu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yd(A){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(A):(A=Cf[A])?!!p[A]:!1}function Eu(){return yd}var w0=d({},Gl,{key:function(A){if(A.key){var p=wu[A.key]||A.key;if(p!=="Unidentified")return p}return A.type==="keypress"?(A=Uo(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?bd[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Eu,charCode:function(A){return A.type==="keypress"?Uo(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?Uo(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),kc=Es(w0),Cu=d({},Gi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wd=Es(Cu),Ki=d({},Gl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Eu}),_f=Es(Ki),X=d({},bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),fe=Es(X),De=d({},Gi,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),Me=Es(De),Ge=d({},bn,{newState:0,oldState:0}),vt=Es(Ge),Mt=[9,13,27,32],er=Lo&&"CompositionEvent"in window,O=null;Lo&&"documentMode"in document&&(O=document.documentMode);var re=Lo&&"TextEvent"in window&&!O,oe=Lo&&(!er||O&&8<O&&11>=O),ve=" ",ze=!1;function ot(A,p){switch(A){case"keyup":return Mt.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qt(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var Dr=!1;function yn(A,p){switch(A){case"compositionend":return Qt(p);case"keypress":return p.which!==32?null:(ze=!0,ve);case"textInput":return A=p.data,A===ve&&ze?null:A;default:return null}}function Jr(A,p){if(Dr)return A==="compositionend"||!er&&ot(A,p)?(A=QA(),Sc=xu=Mo=null,Dr=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return oe&&p.locale!=="ko"?null:p.data;default:return null}}var $n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function aa(A){var p=A&&A.nodeName&&A.nodeName.toLowerCase();return p==="input"?!!$n[A.type]:p==="textarea"}function Kl(A,p,b,C){_c?Hl?Hl.push(C):Hl=[C]:_c=C,p=g_(p,"onChange"),0<p.length&&(b=new vu("onChange","change",null,b,C),A.push({event:b,listeners:p}))}var os=null,Qo=null;function _u(A){SQ(A,0)}function Sf(A){var p=Ye(A);if(LA(p))return A}function E0(A,p){if(A==="change")return p}var zA=!1;if(Lo){var Qs;if(Lo){var Nf="oninput"in document;if(!Nf){var $A=document.createElement("div");$A.setAttribute("oninput","return;"),Nf=typeof $A.oninput=="function"}Qs=Nf}else Qs=!1;zA=Qs&&(!document.documentMode||9<document.documentMode)}function GA(){os&&(os.detachEvent("onpropertychange",C0),Qo=os=null)}function C0(A){if(A.propertyName==="value"&&Sf(Qo)){var p=[];Kl(p,Qo,A,fa(A)),b0(_u,p)}}function Ho(A,p,b){A==="focusin"?(GA(),os=p,Qo=b,os.attachEvent("onpropertychange",C0)):A==="focusout"&&GA()}function ly(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return Sf(Qo)}function Np(A,p){if(A==="click")return Sf(p)}function Px(A,p){if(A==="input"||A==="change")return Sf(p)}function ql(A,p){return A===p&&(A!==0||1/A===1/p)||A!==A&&p!==p}var di=typeof Object.is=="function"?Object.is:ql;function kf(A,p){if(di(A,p))return!0;if(typeof A!="object"||A===null||typeof p!="object"||p===null)return!1;var b=Object.keys(A),C=Object.keys(p);if(b.length!==C.length)return!1;for(C=0;C<b.length;C++){var U=b[C];if(!ne.call(p,U)||!di(A[U],p[U]))return!1}return!0}function kp(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function Ed(A,p){var b=kp(A);A=0;for(var C;b;){if(b.nodeType===3){if(C=A+b.textContent.length,A<=p&&C>=p)return{node:b,offset:p-A};A=C}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=kp(b)}}function Bf(A,p){return A&&p?A===p?!0:A&&A.nodeType===3?!1:p&&p.nodeType===3?Bf(A,p.parentNode):"contains"in A?A.contains(p):A.compareDocumentPosition?!!(A.compareDocumentPosition(p)&16):!1:!1}function mo(A){A=A!=null&&A.ownerDocument!=null&&A.ownerDocument.defaultView!=null?A.ownerDocument.defaultView:window;for(var p=ki(A.document);p instanceof A.HTMLIFrameElement;){try{var b=typeof p.contentWindow.location.href=="string"}catch{b=!1}if(b)A=p.contentWindow;else break;p=ki(A.document)}return p}function ji(A){var p=A&&A.nodeName&&A.nodeName.toLowerCase();return p&&(p==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||p==="textarea"||A.contentEditable==="true")}var Tf=Lo&&"documentMode"in document&&11>=document.documentMode,Vo=null,Bc=null,Su=null,Tc=!1;function Ya(A,p,b){var C=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;Tc||Vo==null||Vo!==ki(C)||(C=Vo,"selectionStart"in C&&ji(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),Su&&kf(Su,C)||(Su=C,C=g_(Bc,"onSelect"),0<C.length&&(p=new vu("onSelect","select",null,p,b),A.push({event:p,listeners:C}),p.target=Vo)))}function jc(A,p){var b={};return b[A.toLowerCase()]=p.toLowerCase(),b["Webkit"+A]="webkit"+p,b["Moz"+A]="moz"+p,b}var _s={animationend:jc("Animation","AnimationEnd"),animationiteration:jc("Animation","AnimationIteration"),animationstart:jc("Animation","AnimationStart"),transitionrun:jc("Transition","TransitionRun"),transitionstart:jc("Transition","TransitionStart"),transitioncancel:jc("Transition","TransitionCancel"),transitionend:jc("Transition","TransitionEnd")},zo={},KA={};Lo&&(KA=document.createElement("div").style,"AnimationEvent"in window||(delete _s.animationend.animation,delete _s.animationiteration.animation,delete _s.animationstart.animation),"TransitionEvent"in window||delete _s.transitionend.transition);function Nu(A){if(zo[A])return zo[A];if(!_s[A])return A;var p=_s[A],b;for(b in p)if(p.hasOwnProperty(b)&&b in KA)return zo[A]=p[b];return A}var _0=Nu("animationend"),jf=Nu("animationiteration"),If=Nu("animationstart"),Ff=Nu("transitionrun"),qA=Nu("transitionstart"),S0=Nu("transitioncancel"),Of=Nu("transitionend"),Cd=new Map,WA="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");WA.push("scrollEnd");function Ja(A,p){Cd.set(A,p),Ot(p,[A])}var wl=new WeakMap;function gn(A,p){if(typeof A=="object"&&A!==null){var b=wl.get(A);return b!==void 0?b:(p={value:A,source:p,stack:Ea(p)},wl.set(A,p),p)}return{value:A,source:p,stack:Ea(p)}}var xn=[],Ca=0,ls=0;function Wl(){for(var A=Ca,p=ls=Ca=0;p<A;){var b=xn[p];xn[p++]=null;var C=xn[p];xn[p++]=null;var U=xn[p];xn[p++]=null;var q=xn[p];if(xn[p++]=null,C!==null&&U!==null){var ue=C.pending;ue===null?U.next=U:(U.next=ue.next,ue.next=U),C.pending=U}q!==0&&Rx(b,U,q)}}function Df(A,p,b,C){xn[Ca++]=A,xn[Ca++]=p,xn[Ca++]=b,xn[Ca++]=C,ls|=C,A.lanes|=C,A=A.alternate,A!==null&&(A.lanes|=C)}function Pf(A,p,b,C){return Df(A,p,b,C),XA(A)}function _d(A,p){return Df(A,null,null,p),XA(A)}function Rx(A,p,b){A.lanes|=b;var C=A.alternate;C!==null&&(C.lanes|=b);for(var U=!1,q=A.return;q!==null;)q.childLanes|=b,C=q.alternate,C!==null&&(C.childLanes|=b),q.tag===22&&(A=q.stateNode,A===null||A._visibility&1||(U=!0)),A=q,q=q.return;return A.tag===3?(q=A.stateNode,U&&p!==null&&(U=31-Rt(b),A=q.hiddenUpdates,C=A[U],C===null?A[U]=[p]:C.push(p),p.lane=b|536870912),q):null}function XA(A){if(50<Fy)throw Fy=0,Sj=null,Error(n(185));for(var p=A.return;p!==null;)A=p,p=A.return;return A.tag===3?A.stateNode:null}var fi={};function Xl(A,p,b,C){this.tag=A,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qi(A,p,b,C){return new Xl(A,p,b,C)}function N0(A){return A=A.prototype,!(!A||!A.isReactComponent)}function ku(A,p){var b=A.alternate;return b===null?(b=qi(A.tag,p,A.key,A.mode),b.elementType=A.elementType,b.type=A.type,b.stateNode=A.stateNode,b.alternate=A,A.alternate=b):(b.pendingProps=p,b.type=A.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=A.flags&65011712,b.childLanes=A.childLanes,b.lanes=A.lanes,b.child=A.child,b.memoizedProps=A.memoizedProps,b.memoizedState=A.memoizedState,b.updateQueue=A.updateQueue,p=A.dependencies,b.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},b.sibling=A.sibling,b.index=A.index,b.ref=A.ref,b.refCleanup=A.refCleanup,b}function Bp(A,p){A.flags&=65011714;var b=A.alternate;return b===null?(A.childLanes=0,A.lanes=p,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=b.childLanes,A.lanes=b.lanes,A.child=b.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=b.memoizedProps,A.memoizedState=b.memoizedState,A.updateQueue=b.updateQueue,A.type=b.type,p=b.dependencies,A.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),A}function YA(A,p,b,C,U,q){var ue=0;if(C=A,typeof A=="function")N0(A)&&(ue=1);else if(typeof A=="string")ue=spe(A,b,Y.current)?26:A==="html"||A==="head"||A==="body"?27:5;else e:switch(A){case I:return A=qi(31,b,p,U),A.elementType=I,A.lanes=q,A;case g:return Sd(b.children,U,q,p);case x:ue=8,U|=24;break;case v:return A=qi(12,b,p,U|2),A.elementType=v,A.lanes=q,A;case B:return A=qi(13,b,p,U),A.elementType=B,A.lanes=q,A;case j:return A=qi(19,b,p,U),A.elementType=j,A.lanes=q,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case y:case _:ue=10;break e;case w:ue=9;break e;case T:ue=11;break e;case E:ue=14;break e;case N:ue=16,C=null;break e}ue=29,b=Error(n(130,A===null?"null":typeof A,"")),C=null}return p=qi(ue,b,p,U),p.elementType=A,p.type=C,p.lanes=q,p}function Sd(A,p,b,C){return A=qi(7,A,C,p),A.lanes=b,A}function Lx(A,p,b){return A=qi(6,A,null,p),A.lanes=b,A}function Tp(A,p,b){return p=qi(4,A.children!==null?A.children:[],A.key,p),p.lanes=b,p.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},p}var Rf=[],Nd=0,k0=null,Mx=0,Yl=[],El=0,JA=null,kd=1,Bd="";function ZA(A,p){Rf[Nd++]=Mx,Rf[Nd++]=k0,k0=A,Mx=p}function DC(A,p,b){Yl[El++]=kd,Yl[El++]=Bd,Yl[El++]=JA,JA=A;var C=kd;A=Bd;var U=32-Rt(C)-1;C&=~(1<<U),b+=1;var q=32-Rt(p)+U;if(30<q){var ue=U-U%5;q=(C&(1<<ue)-1).toString(32),C>>=ue,U-=ue,kd=1<<32-Rt(p)+U|b<<U|C,Bd=q+A}else kd=1<<q|b<<U|C,Bd=A}function jp(A){A.return!==null&&(ZA(A,1),DC(A,1,0))}function Ip(A){for(;A===k0;)k0=Rf[--Nd],Rf[Nd]=null,Mx=Rf[--Nd],Rf[Nd]=null;for(;A===JA;)JA=Yl[--El],Yl[El]=null,Bd=Yl[--El],Yl[El]=null,kd=Yl[--El],Yl[El]=null}var Hs=null,Za=null,Un=!1,Lf=null,Bu=!1,cy=Error(n(519));function eh(A){var p=Error(n(418,""));throw B0(gn(p,A)),cy}function PC(A){var p=A.stateNode,b=A.type,C=A.memoizedProps;switch(p[ar]=A,p[vr]=C,b){case"dialog":Nn("cancel",p),Nn("close",p);break;case"iframe":case"object":case"embed":Nn("load",p);break;case"video":case"audio":for(b=0;b<Dy.length;b++)Nn(Dy[b],p);break;case"source":Nn("error",p);break;case"img":case"image":case"link":Nn("error",p),Nn("load",p);break;case"details":Nn("toggle",p);break;case"input":Nn("invalid",p),mu(p,C.value,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name,!0),hu(p);break;case"select":Nn("invalid",p);break;case"textarea":Nn("invalid",p),gu(p,C.value,C.defaultValue,C.children),hu(p)}b=C.children,typeof b!="string"&&typeof b!="number"&&typeof b!="bigint"||p.textContent===""+b||C.suppressHydrationWarning===!0||TQ(p.textContent,b)?(C.popover!=null&&(Nn("beforetoggle",p),Nn("toggle",p)),C.onScroll!=null&&Nn("scroll",p),C.onScrollEnd!=null&&Nn("scrollend",p),C.onClick!=null&&(p.onclick=x_),p=!0):p=!1,p||eh(A)}function Td(A){for(Hs=A.return;Hs;)switch(Hs.tag){case 5:case 13:Bu=!1;return;case 27:case 3:Bu=!0;return;default:Hs=Hs.return}}function po(A){if(A!==Hs)return!1;if(!Un)return Td(A),Un=!0,!1;var p=A.tag,b;if((b=p!==3&&p!==27)&&((b=p===5)&&(b=A.type,b=!(b!=="form"&&b!=="button")||Hj(A.type,A.memoizedProps)),b=!b),b&&Za&&eh(A),Td(A),p===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));e:{for(A=A.nextSibling,p=0;A;){if(A.nodeType===8)if(b=A.data,b==="/$"){if(p===0){Za=Ld(A.nextSibling);break e}p--}else b!=="$"&&b!=="$!"&&b!=="$?"||p++;A=A.nextSibling}Za=null}}else p===27?(p=Za,G0(A.type)?(A=Gj,Gj=null,Za=A):Za=p):Za=Hs?Ld(A.stateNode.nextSibling):null;return!0}function Cl(){Za=Hs=null,Un=!1}function RC(){var A=Lf;return A!==null&&(ec===null?ec=A:ec.push.apply(ec,A),Lf=null),A}function B0(A){Lf===null?Lf=[A]:Lf.push(A)}var Tu=te(null),Ai=null,jd=null;function Mf(A,p,b){H(Tu,p._currentValue),p._currentValue=b}function ju(A){A._currentValue=Tu.current,M(Tu)}function Ux(A,p,b){for(;A!==null;){var C=A.alternate;if((A.childLanes&p)!==p?(A.childLanes|=p,C!==null&&(C.childLanes|=p)):C!==null&&(C.childLanes&p)!==p&&(C.childLanes|=p),A===b)break;A=A.return}}function Qx(A,p,b,C){var U=A.child;for(U!==null&&(U.return=A);U!==null;){var q=U.dependencies;if(q!==null){var ue=U.child;q=q.firstContext;e:for(;q!==null;){var ye=q;q=U;for(var Re=0;Re<p.length;Re++)if(ye.context===p[Re]){q.lanes|=b,ye=q.alternate,ye!==null&&(ye.lanes|=b),Ux(q.return,b,A),C||(ue=null);break e}q=ye.next}}else if(U.tag===18){if(ue=U.return,ue===null)throw Error(n(341));ue.lanes|=b,q=ue.alternate,q!==null&&(q.lanes|=b),Ux(ue,b,A),ue=null}else ue=U.child;if(ue!==null)ue.return=U;else for(ue=U;ue!==null;){if(ue===A){ue=null;break}if(U=ue.sibling,U!==null){U.return=ue.return,ue=U;break}ue=ue.return}U=ue}}function T0(A,p,b,C){A=null;for(var U=p,q=!1;U!==null;){if(!q){if((U.flags&524288)!==0)q=!0;else if((U.flags&262144)!==0)break}if(U.tag===10){var ue=U.alternate;if(ue===null)throw Error(n(387));if(ue=ue.memoizedProps,ue!==null){var ye=U.type;di(U.pendingProps.value,ue.value)||(A!==null?A.push(ye):A=[ye])}}else if(U===le.current){if(ue=U.alternate,ue===null)throw Error(n(387));ue.memoizedState.memoizedState!==U.memoizedState.memoizedState&&(A!==null?A.push(Qy):A=[Qy])}U=U.return}A!==null&&Qx(p,A,b,C),p.flags|=262144}function Hx(A){for(A=A.firstContext;A!==null;){if(!di(A.context._currentValue,A.memoizedValue))return!0;A=A.next}return!1}function Iu(A){Ai=A,jd=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function Vs(A){return Vx(Ai,A)}function Uf(A,p){return Ai===null&&Iu(A),Vx(A,p)}function Vx(A,p){var b=p._currentValue;if(p={context:p,memoizedValue:b,next:null},jd===null){if(A===null)throw Error(n(308));jd=p,A.dependencies={lanes:0,firstContext:p},A.flags|=524288}else jd=jd.next=p;return b}var YT=typeof AbortController<"u"?AbortController:function(){var A=[],p=this.signal={aborted:!1,addEventListener:function(b,C){A.push(C)}};this.abort=function(){p.aborted=!0,A.forEach(function(b){return b()})}},LC=e.unstable_scheduleCallback,JT=e.unstable_NormalPriority,zs={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function uy(){return{controller:new YT,data:new Map,refCount:0}}function Fp(A){A.refCount--,A.refCount===0&&LC(JT,function(){A.controller.abort()})}var Op=null,dy=0,th=0,Id=null;function ZT(A,p){if(Op===null){var b=Op=[];dy=0,th=Fj(),Id={status:"pending",value:void 0,then:function(C){b.push(C)}}}return dy++,p.then(MC,MC),p}function MC(){if(--dy===0&&Op!==null){Id!==null&&(Id.status="fulfilled");var A=Op;Op=null,th=0,Id=null;for(var p=0;p<A.length;p++)(0,A[p])()}}function UC(A,p){var b=[],C={status:"pending",value:null,reason:null,then:function(U){b.push(U)}};return A.then(function(){C.status="fulfilled",C.value=p;for(var U=0;U<b.length;U++)(0,b[U])(p)},function(U){for(C.status="rejected",C.reason=U,U=0;U<b.length;U++)(0,b[U])(void 0)}),C}var F=V.S;V.S=function(A,p){typeof p=="object"&&p!==null&&typeof p.then=="function"&&ZT(A,p),F!==null&&F(A,p)};var Q=te(null);function ee(){var A=Q.current;return A!==null?A:Ra.pooledCache}function se(A,p){p===null?H(Q,Q.current):H(Q,p.pool)}function de(){var A=ee();return A===null?null:{parent:zs._currentValue,pool:A}}var pe=Error(n(460)),ge=Error(n(474)),xe=Error(n(542)),Ee={then:function(){}};function ke(A){return A=A.status,A==="fulfilled"||A==="rejected"}function Ue(){}function st(A,p,b){switch(b=A[b],b===void 0?A.push(p):b!==p&&(p.then(Ue,Ue),p=b),p.status){case"fulfilled":return p.value;case"rejected":throw A=p.reason,jt(A),A;default:if(typeof p.status=="string")p.then(Ue,Ue);else{if(A=Ra,A!==null&&100<A.shellSuspendCounter)throw Error(n(482));A=p,A.status="pending",A.then(function(C){if(p.status==="pending"){var U=p;U.status="fulfilled",U.value=C}},function(C){if(p.status==="pending"){var U=p;U.status="rejected",U.reason=C}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw A=p.reason,jt(A),A}throw rt=p,pe}}var rt=null;function Ke(){if(rt===null)throw Error(n(459));var A=rt;return rt=null,A}function jt(A){if(A===pe||A===xe)throw Error(n(483))}var mt=!1;function Qe(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ve(A,p){A=A.updateQueue,p.updateQueue===A&&(p.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function Nt(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function It(A,p,b){var C=A.updateQueue;if(C===null)return null;if(C=C.shared,(ha&2)!==0){var U=C.pending;return U===null?p.next=p:(p.next=U.next,U.next=p),C.pending=p,p=XA(A),Rx(A,null,b),p}return Df(A,C,p,b),XA(A)}function Bt(A,p,b){if(p=p.updateQueue,p!==null&&(p=p.shared,(b&4194048)!==0)){var C=p.lanes;C&=A.pendingLanes,b|=C,p.lanes=b,tt(A,b)}}function nr(A,p){var b=A.updateQueue,C=A.alternate;if(C!==null&&(C=C.updateQueue,b===C)){var U=null,q=null;if(b=b.firstBaseUpdate,b!==null){do{var ue={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};q===null?U=q=ue:q=q.next=ue,b=b.next}while(b!==null);q===null?U=q=p:q=q.next=p}else U=q=p;b={baseState:C.baseState,firstBaseUpdate:U,lastBaseUpdate:q,shared:C.shared,callbacks:C.callbacks},A.updateQueue=b;return}A=b.lastBaseUpdate,A===null?b.firstBaseUpdate=p:A.next=p,b.lastBaseUpdate=p}var Yt=!1;function yr(){if(Yt){var A=Id;if(A!==null)throw A}}function tr(A,p,b,C){Yt=!1;var U=A.updateQueue;mt=!1;var q=U.firstBaseUpdate,ue=U.lastBaseUpdate,ye=U.shared.pending;if(ye!==null){U.shared.pending=null;var Re=ye,lt=Re.next;Re.next=null,ue===null?q=lt:ue.next=lt,ue=Re;var kt=A.alternate;kt!==null&&(kt=kt.updateQueue,ye=kt.lastBaseUpdate,ye!==ue&&(ye===null?kt.firstBaseUpdate=lt:ye.next=lt,kt.lastBaseUpdate=Re))}if(q!==null){var Dt=U.baseState;ue=0,kt=lt=Re=null,ye=q;do{var ft=ye.lane&-536870913,At=ft!==ye.lane;if(At?(Ln&ft)===ft:(C&ft)===ft){ft!==0&&ft===th&&(Yt=!0),kt!==null&&(kt=kt.next={lane:0,tag:ye.tag,payload:ye.payload,callback:null,next:null});e:{var qr=A,Pr=ye;ft=p;var Sa=b;switch(Pr.tag){case 1:if(qr=Pr.payload,typeof qr=="function"){Dt=qr.call(Sa,Dt,ft);break e}Dt=qr;break e;case 3:qr.flags=qr.flags&-65537|128;case 0:if(qr=Pr.payload,ft=typeof qr=="function"?qr.call(Sa,Dt,ft):qr,ft==null)break e;Dt=d({},Dt,ft);break e;case 2:mt=!0}}ft=ye.callback,ft!==null&&(A.flags|=64,At&&(A.flags|=8192),At=U.callbacks,At===null?U.callbacks=[ft]:At.push(ft))}else At={lane:ft,tag:ye.tag,payload:ye.payload,callback:ye.callback,next:null},kt===null?(lt=kt=At,Re=Dt):kt=kt.next=At,ue|=ft;if(ye=ye.next,ye===null){if(ye=U.shared.pending,ye===null)break;At=ye,ye=At.next,At.next=null,U.lastBaseUpdate=At,U.shared.pending=null}}while(!0);kt===null&&(Re=Dt),U.baseState=Re,U.firstBaseUpdate=lt,U.lastBaseUpdate=kt,q===null&&(U.shared.lanes=0),H0|=ue,A.lanes=ue,A.memoizedState=Dt}}function Pn(A,p){if(typeof A!="function")throw Error(n(191,A));A.call(p)}function Gn(A,p){var b=A.callbacks;if(b!==null)for(A.callbacks=null,A=0;A<b.length;A++)Pn(b[A],p)}var mn=te(null),un=te(0);function sa(A,p){A=dh,H(un,A),H(mn,p),dh=A|p.baseLanes}function Kn(){H(un,dh),H(mn,mn.current)}function Zr(){dh=un.current,M(mn),M(un)}var Aa=0,Tr=null,Hr=null,Dn=null,Rn=!1,hi=!1,$s=!1,cs=0,us=0,Ss=null,Jl=0;function qn(){throw Error(n(321))}function Ns(A,p){if(p===null)return!1;for(var b=0;b<p.length&&b<A.length;b++)if(!di(A[b],p[b]))return!1;return!0}function Ic(A,p,b,C,U,q){return Aa=q,Tr=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,V.H=A===null||A.memoizedState===null?u9:d9,$s=!1,q=b(C,U),$s=!1,hi&&(q=rh(p,b,C,U)),Qf(A),q}function Qf(A){V.H=JC;var p=Hr!==null&&Hr.next!==null;if(Aa=0,Dn=Hr=Tr=null,Rn=!1,us=0,Ss=null,p)throw Error(n(300));A===null||Wi||(A=A.dependencies,A!==null&&Hx(A)&&(Wi=!0))}function rh(A,p,b,C){Tr=A;var U=0;do{if(hi&&(Ss=null),us=0,hi=!1,25<=U)throw Error(n(301));if(U+=1,Dn=Hr=null,A.updateQueue!=null){var q=A.updateQueue;q.lastEffect=null,q.events=null,q.stores=null,q.memoCache!=null&&(q.memoCache.index=0)}V.H=pme,q=p(b,C)}while(hi);return q}function Hf(){var A=V.H,p=A.useState()[0];return p=typeof p.then=="function"?Vf(p):p,A=A.useState()[0],(Hr!==null?Hr.memoizedState:null)!==A&&(Tr.flags|=1024),p}function Pa(){var A=cs!==0;return cs=0,A}function Dp(A,p,b){p.updateQueue=A.updateQueue,p.flags&=-2053,A.lanes&=~b}function zx(A){if(Rn){for(A=A.memoizedState;A!==null;){var p=A.queue;p!==null&&(p.pending=null),A=A.next}Rn=!1}Aa=0,Dn=Hr=Tr=null,hi=!1,us=cs=0,Ss=null}function go(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dn===null?Tr.memoizedState=Dn=A:Dn=Dn.next=A,Dn}function Va(){if(Hr===null){var A=Tr.alternate;A=A!==null?A.memoizedState:null}else A=Hr.next;var p=Dn===null?Tr.memoizedState:Dn.next;if(p!==null)Dn=p,Hr=A;else{if(A===null)throw Tr.alternate===null?Error(n(467)):Error(n(310));Hr=A,A={memoizedState:Hr.memoizedState,baseState:Hr.baseState,baseQueue:Hr.baseQueue,queue:Hr.queue,next:null},Dn===null?Tr.memoizedState=Dn=A:Dn=Dn.next=A}return Dn}function nh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vf(A){var p=us;return us+=1,Ss===null&&(Ss=[]),A=st(Ss,A,p),p=Tr,(Dn===null?p.memoizedState:Dn.next)===null&&(p=p.alternate,V.H=p===null||p.memoizedState===null?u9:d9),A}function $o(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return Vf(A);if(A.$$typeof===_)return Vs(A)}throw Error(n(438,String(A)))}function zf(A){var p=null,b=Tr.updateQueue;if(b!==null&&(p=b.memoCache),p==null){var C=Tr.alternate;C!==null&&(C=C.updateQueue,C!==null&&(C=C.memoCache,C!=null&&(p={data:C.data.map(function(U){return U.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),b===null&&(b=nh(),Tr.updateQueue=b),b.memoCache=p,b=p.data[p.index],b===void 0)for(b=p.data[p.index]=Array(A),C=0;C<A;C++)b[C]=L;return p.index++,b}function Go(A,p){return typeof p=="function"?p(A):p}function Pp(A){var p=Va();return j0(p,Hr,A)}function j0(A,p,b){var C=A.queue;if(C===null)throw Error(n(311));C.lastRenderedReducer=b;var U=A.baseQueue,q=C.pending;if(q!==null){if(U!==null){var ue=U.next;U.next=q.next,q.next=ue}p.baseQueue=U=q,C.pending=null}if(q=A.baseState,U===null)A.memoizedState=q;else{p=U.next;var ye=ue=null,Re=null,lt=p,kt=!1;do{var Dt=lt.lane&-536870913;if(Dt!==lt.lane?(Ln&Dt)===Dt:(Aa&Dt)===Dt){var ft=lt.revertLane;if(ft===0)Re!==null&&(Re=Re.next={lane:0,revertLane:0,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null}),Dt===th&&(kt=!0);else if((Aa&ft)===ft){lt=lt.next,ft===th&&(kt=!0);continue}else Dt={lane:0,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},Re===null?(ye=Re=Dt,ue=q):Re=Re.next=Dt,Tr.lanes|=ft,H0|=ft;Dt=lt.action,$s&&b(q,Dt),q=lt.hasEagerState?lt.eagerState:b(q,Dt)}else ft={lane:Dt,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},Re===null?(ye=Re=ft,ue=q):Re=Re.next=ft,Tr.lanes|=Dt,H0|=Dt;lt=lt.next}while(lt!==null&&lt!==p);if(Re===null?ue=q:Re.next=ye,!di(q,A.memoizedState)&&(Wi=!0,kt&&(b=Id,b!==null)))throw b;A.memoizedState=q,A.baseState=ue,A.baseQueue=Re,C.lastRenderedState=q}return U===null&&(C.lanes=0),[A.memoizedState,C.dispatch]}function $x(A){var p=Va(),b=p.queue;if(b===null)throw Error(n(311));b.lastRenderedReducer=A;var C=b.dispatch,U=b.pending,q=p.memoizedState;if(U!==null){b.pending=null;var ue=U=U.next;do q=A(q,ue.action),ue=ue.next;while(ue!==U);di(q,p.memoizedState)||(Wi=!0),p.memoizedState=q,p.baseQueue===null&&(p.baseState=q),b.lastRenderedState=q}return[q,C]}function Rp(A,p,b){var C=Tr,U=Va(),q=Un;if(q){if(b===void 0)throw Error(n(407));b=b()}else b=p();var ue=!di((Hr||U).memoizedState,b);ue&&(U.memoizedState=b,Wi=!0),U=U.queue;var ye=I0.bind(null,C,U,A);if(D0(2048,8,ye,[A]),U.getSnapshot!==p||ue||Dn!==null&&Dn.memoizedState.tag&1){if(C.flags|=2048,Od(9,Qp(),Lp.bind(null,C,U,b,p),null),Ra===null)throw Error(n(349));q||(Aa&124)!==0||Gx(C,p,b)}return b}function Gx(A,p,b){A.flags|=16384,A={getSnapshot:p,value:b},p=Tr.updateQueue,p===null?(p=nh(),Tr.updateQueue=p,p.stores=[A]):(b=p.stores,b===null?p.stores=[A]:b.push(A))}function Lp(A,p,b,C){p.value=b,p.getSnapshot=C,QC(p)&&HC(A)}function I0(A,p,b){return b(function(){QC(p)&&HC(A)})}function QC(A){var p=A.getSnapshot;A=A.value;try{var b=p();return!di(A,b)}catch{return!0}}function HC(A){var p=_d(A,2);p!==null&&Lc(p,A,2)}function Mp(A){var p=go();if(typeof A=="function"){var b=A;if(A=b(),$s){Ut(!0);try{b()}finally{Ut(!1)}}}return p.memoizedState=p.baseState=A,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Go,lastRenderedState:A},p}function Fd(A,p,b,C){return A.baseState=b,j0(A,Hr,typeof C=="function"?C:Go)}function ej(A,p,b,C,U){if(YC(A))throw Error(n(485));if(A=p.action,A!==null){var q={payload:U,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ue){q.listeners.push(ue)}};V.T!==null?b(!0):q.isTransition=!1,C(q),b=p.pending,b===null?(q.next=p.pending=q,VC(p,q)):(q.next=b.next,p.pending=b.next=q)}}function VC(A,p){var b=p.action,C=p.payload,U=A.state;if(p.isTransition){var q=V.T,ue={};V.T=ue;try{var ye=b(U,C),Re=V.S;Re!==null&&Re(ue,ye),zC(A,p,ye)}catch(lt){F0(A,p,lt)}finally{V.T=q}}else try{q=b(U,C),zC(A,p,q)}catch(lt){F0(A,p,lt)}}function zC(A,p,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(C){fy(A,p,C)},function(C){return F0(A,p,C)}):fy(A,p,b)}function fy(A,p,b){p.status="fulfilled",p.value=b,Ay(p),A.state=b,p=A.pending,p!==null&&(b=p.next,b===p?A.pending=null:(b=b.next,p.next=b,VC(A,b)))}function F0(A,p,b){var C=A.pending;if(A.pending=null,C!==null){C=C.next;do p.status="rejected",p.reason=b,Ay(p),p=p.next;while(p!==C)}A.action=null}function Ay(A){A=A.listeners;for(var p=0;p<A.length;p++)(0,A[p])()}function hy(A,p){return p}function Up(A,p){if(Un){var b=Ra.formState;if(b!==null){e:{var C=Tr;if(Un){if(Za){t:{for(var U=Za,q=Bu;U.nodeType!==8;){if(!q){U=null;break t}if(U=Ld(U.nextSibling),U===null){U=null;break t}}q=U.data,U=q==="F!"||q==="F"?U:null}if(U){Za=Ld(U.nextSibling),C=U.data==="F!";break e}}eh(C)}C=!1}C&&(p=b[0])}}return b=go(),b.memoizedState=b.baseState=p,C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hy,lastRenderedState:p},b.queue=C,b=o9.bind(null,Tr,C),C.dispatch=b,C=Mp(!1),q=tj.bind(null,Tr,!1,C.queue),C=go(),U={state:p,dispatch:null,action:A,pending:null},C.queue=U,b=ej.bind(null,Tr,U,q,b),U.dispatch=b,C.memoizedState=A,[p,b,!1]}function Kx(A){var p=Va();return O0(p,Hr,A)}function O0(A,p,b){if(p=j0(A,p,hy)[0],A=Pp(Go)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var C=Vf(p)}catch(ue){throw ue===pe?xe:ue}else C=p;p=Va();var U=p.queue,q=U.dispatch;return b!==p.memoizedState&&(Tr.flags|=2048,Od(9,Qp(),$C.bind(null,U,b),null)),[C,q,A]}function $C(A,p){A.action=p}function GC(A){var p=Va(),b=Hr;if(b!==null)return O0(p,b,A);Va(),p=p.memoizedState,b=Va();var C=b.queue.dispatch;return b.memoizedState=A,[p,C,!1]}function Od(A,p,b,C){return A={tag:A,create:b,deps:C,inst:p,next:null},p=Tr.updateQueue,p===null&&(p=nh(),Tr.updateQueue=p),b=p.lastEffect,b===null?p.lastEffect=A.next=A:(C=b.next,b.next=A,A.next=C,p.lastEffect=A),A}function Qp(){return{destroy:void 0,resource:void 0}}function qx(){return Va().memoizedState}function Fc(A,p,b,C){var U=go();C=C===void 0?null:C,Tr.flags|=A,U.memoizedState=Od(1|p,Qp(),b,C)}function D0(A,p,b,C){var U=Va();C=C===void 0?null:C;var q=U.memoizedState.inst;Hr!==null&&C!==null&&Ns(C,Hr.memoizedState.deps)?U.memoizedState=Od(p,q,b,C):(Tr.flags|=A,U.memoizedState=Od(1|p,q,b,C))}function my(A,p){Fc(8390656,8,A,p)}function KC(A,p){D0(2048,8,A,p)}function py(A,p){return D0(4,2,A,p)}function ah(A,p){return D0(4,4,A,p)}function qC(A,p){if(typeof p=="function"){A=A();var b=p(A);return function(){typeof b=="function"?b():p(null)}}if(p!=null)return A=A(),p.current=A,function(){p.current=null}}function gy(A,p,b){b=b!=null?b.concat([A]):null,D0(4,4,qC.bind(null,p,A),b)}function xy(){}function vy(A,p){var b=Va();p=p===void 0?null:p;var C=b.memoizedState;return p!==null&&Ns(p,C[1])?C[0]:(b.memoizedState=[A,p],A)}function WC(A,p){var b=Va();p=p===void 0?null:p;var C=b.memoizedState;if(p!==null&&Ns(p,C[1]))return C[0];if(C=A(),$s){Ut(!0);try{A()}finally{Ut(!1)}}return b.memoizedState=[C,p],C}function sh(A,p,b){return b===void 0||(Aa&1073741824)!==0?A.memoizedState=p:(A.memoizedState=b,A=nQ(),Tr.lanes|=A,H0|=A,b)}function Wx(A,p,b,C){return di(b,p)?b:mn.current!==null?(A=sh(A,b,C),di(A,p)||(Wi=!0),A):(Aa&42)===0?(Wi=!0,A.memoizedState=b):(A=nQ(),Tr.lanes|=A,H0|=A,p)}function Hp(A,p,b,C,U){var q=G.p;G.p=q!==0&&8>q?q:8;var ue=V.T,ye={};V.T=ye,tj(A,!1,p,b);try{var Re=U(),lt=V.S;if(lt!==null&&lt(ye,Re),Re!==null&&typeof Re=="object"&&typeof Re.then=="function"){var kt=UC(Re,C);Ey(A,p,kt,Rc(A))}else Ey(A,p,C,Rc(A))}catch(Dt){Ey(A,p,{then:function(){},status:"rejected",reason:Dt},Rc())}finally{G.p=q,V.T=ue}}function Dd(){}function Fu(A,p,b,C){if(A.tag!==5)throw Error(n(476));var U=Pd(A).queue;Hp(A,U,p,z,b===null?Dd:function(){return Vp(A),b(C)})}function Pd(A){var p=A.memoizedState;if(p!==null)return p;p={memoizedState:z,baseState:z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Go,lastRenderedState:z},next:null};var b={};return p.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Go,lastRenderedState:b},next:null},A.memoizedState=p,A=A.alternate,A!==null&&(A.memoizedState=p),p}function Vp(A){var p=Pd(A).next.queue;Ey(A,p,{},Rc())}function zp(){return Vs(Qy)}function by(){return Va().memoizedState}function XC(){return Va().memoizedState}function yy(A){for(var p=A.return;p!==null;){switch(p.tag){case 24:case 3:var b=Rc();A=Nt(b);var C=It(p,A,b);C!==null&&(Lc(C,p,b),Bt(C,p,b)),p={cache:uy()},A.payload=p;return}p=p.return}}function wy(A,p,b){var C=Rc();b={lane:C,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null},YC(A)?l9(p,b):(b=Pf(A,p,b,C),b!==null&&(Lc(b,A,C),c9(b,p,C)))}function o9(A,p,b){var C=Rc();Ey(A,p,b,C)}function Ey(A,p,b,C){var U={lane:C,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null};if(YC(A))l9(p,U);else{var q=A.alternate;if(A.lanes===0&&(q===null||q.lanes===0)&&(q=p.lastRenderedReducer,q!==null))try{var ue=p.lastRenderedState,ye=q(ue,b);if(U.hasEagerState=!0,U.eagerState=ye,di(ye,ue))return Df(A,p,U,0),Ra===null&&Wl(),!1}catch{}finally{}if(b=Pf(A,p,U,C),b!==null)return Lc(b,A,C),c9(b,p,C),!0}return!1}function tj(A,p,b,C){if(C={lane:2,revertLane:Fj(),action:C,hasEagerState:!1,eagerState:null,next:null},YC(A)){if(p)throw Error(n(479))}else p=Pf(A,b,C,2),p!==null&&Lc(p,A,2)}function YC(A){var p=A.alternate;return A===Tr||p!==null&&p===Tr}function l9(A,p){hi=Rn=!0;var b=A.pending;b===null?p.next=p:(p.next=b.next,b.next=p),A.pending=p}function c9(A,p,b){if((b&4194048)!==0){var C=p.lanes;C&=A.pendingLanes,b|=C,p.lanes=b,tt(A,b)}}var JC={readContext:Vs,use:$o,useCallback:qn,useContext:qn,useEffect:qn,useImperativeHandle:qn,useLayoutEffect:qn,useInsertionEffect:qn,useMemo:qn,useReducer:qn,useRef:qn,useState:qn,useDebugValue:qn,useDeferredValue:qn,useTransition:qn,useSyncExternalStore:qn,useId:qn,useHostTransitionStatus:qn,useFormState:qn,useActionState:qn,useOptimistic:qn,useMemoCache:qn,useCacheRefresh:qn},u9={readContext:Vs,use:$o,useCallback:function(A,p){return go().memoizedState=[A,p===void 0?null:p],A},useContext:Vs,useEffect:my,useImperativeHandle:function(A,p,b){b=b!=null?b.concat([A]):null,Fc(4194308,4,qC.bind(null,p,A),b)},useLayoutEffect:function(A,p){return Fc(4194308,4,A,p)},useInsertionEffect:function(A,p){Fc(4,2,A,p)},useMemo:function(A,p){var b=go();p=p===void 0?null:p;var C=A();if($s){Ut(!0);try{A()}finally{Ut(!1)}}return b.memoizedState=[C,p],C},useReducer:function(A,p,b){var C=go();if(b!==void 0){var U=b(p);if($s){Ut(!0);try{b(p)}finally{Ut(!1)}}}else U=p;return C.memoizedState=C.baseState=U,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:U},C.queue=A,A=A.dispatch=wy.bind(null,Tr,A),[C.memoizedState,A]},useRef:function(A){var p=go();return A={current:A},p.memoizedState=A},useState:function(A){A=Mp(A);var p=A.queue,b=o9.bind(null,Tr,p);return p.dispatch=b,[A.memoizedState,b]},useDebugValue:xy,useDeferredValue:function(A,p){var b=go();return sh(b,A,p)},useTransition:function(){var A=Mp(!1);return A=Hp.bind(null,Tr,A.queue,!0,!1),go().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,p,b){var C=Tr,U=go();if(Un){if(b===void 0)throw Error(n(407));b=b()}else{if(b=p(),Ra===null)throw Error(n(349));(Ln&124)!==0||Gx(C,p,b)}U.memoizedState=b;var q={value:b,getSnapshot:p};return U.queue=q,my(I0.bind(null,C,q,A),[A]),C.flags|=2048,Od(9,Qp(),Lp.bind(null,C,q,b,p),null),b},useId:function(){var A=go(),p=Ra.identifierPrefix;if(Un){var b=Bd,C=kd;b=(C&~(1<<32-Rt(C)-1)).toString(32)+b,p="«"+p+"R"+b,b=cs++,0<b&&(p+="H"+b.toString(32)),p+="»"}else b=Jl++,p="«"+p+"r"+b.toString(32)+"»";return A.memoizedState=p},useHostTransitionStatus:zp,useFormState:Up,useActionState:Up,useOptimistic:function(A){var p=go();p.memoizedState=p.baseState=A;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=b,p=tj.bind(null,Tr,!0,b),b.dispatch=p,[A,p]},useMemoCache:zf,useCacheRefresh:function(){return go().memoizedState=yy.bind(null,Tr)}},d9={readContext:Vs,use:$o,useCallback:vy,useContext:Vs,useEffect:KC,useImperativeHandle:gy,useInsertionEffect:py,useLayoutEffect:ah,useMemo:WC,useReducer:Pp,useRef:qx,useState:function(){return Pp(Go)},useDebugValue:xy,useDeferredValue:function(A,p){var b=Va();return Wx(b,Hr.memoizedState,A,p)},useTransition:function(){var A=Pp(Go)[0],p=Va().memoizedState;return[typeof A=="boolean"?A:Vf(A),p]},useSyncExternalStore:Rp,useId:by,useHostTransitionStatus:zp,useFormState:Kx,useActionState:Kx,useOptimistic:function(A,p){var b=Va();return Fd(b,Hr,A,p)},useMemoCache:zf,useCacheRefresh:XC},pme={readContext:Vs,use:$o,useCallback:vy,useContext:Vs,useEffect:KC,useImperativeHandle:gy,useInsertionEffect:py,useLayoutEffect:ah,useMemo:WC,useReducer:$x,useRef:qx,useState:function(){return $x(Go)},useDebugValue:xy,useDeferredValue:function(A,p){var b=Va();return Hr===null?sh(b,A,p):Wx(b,Hr.memoizedState,A,p)},useTransition:function(){var A=$x(Go)[0],p=Va().memoizedState;return[typeof A=="boolean"?A:Vf(A),p]},useSyncExternalStore:Rp,useId:by,useHostTransitionStatus:zp,useFormState:GC,useActionState:GC,useOptimistic:function(A,p){var b=Va();return Hr!==null?Fd(b,Hr,A,p):(b.baseState=A,[A,b.queue.dispatch])},useMemoCache:zf,useCacheRefresh:XC},Xx=null,Cy=0;function ZC(A){var p=Cy;return Cy+=1,Xx===null&&(Xx=[]),st(Xx,A,p)}function _y(A,p){p=p.props.ref,A.ref=p!==void 0?p:null}function e_(A,p){throw p.$$typeof===f?Error(n(525)):(A=Object.prototype.toString.call(p),Error(n(31,A==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":A)))}function f9(A){var p=A._init;return p(A._payload)}function A9(A){function p(Xe,He){if(A){var at=Xe.deletions;at===null?(Xe.deletions=[He],Xe.flags|=16):at.push(He)}}function b(Xe,He){if(!A)return null;for(;He!==null;)p(Xe,He),He=He.sibling;return null}function C(Xe){for(var He=new Map;Xe!==null;)Xe.key!==null?He.set(Xe.key,Xe):He.set(Xe.index,Xe),Xe=Xe.sibling;return He}function U(Xe,He){return Xe=ku(Xe,He),Xe.index=0,Xe.sibling=null,Xe}function q(Xe,He,at){return Xe.index=at,A?(at=Xe.alternate,at!==null?(at=at.index,at<He?(Xe.flags|=67108866,He):at):(Xe.flags|=67108866,He)):(Xe.flags|=1048576,He)}function ue(Xe){return A&&Xe.alternate===null&&(Xe.flags|=67108866),Xe}function ye(Xe,He,at,Tt){return He===null||He.tag!==6?(He=Lx(at,Xe.mode,Tt),He.return=Xe,He):(He=U(He,at),He.return=Xe,He)}function Re(Xe,He,at,Tt){var hr=at.type;return hr===g?kt(Xe,He,at.props.children,Tt,at.key):He!==null&&(He.elementType===hr||typeof hr=="object"&&hr!==null&&hr.$$typeof===N&&f9(hr)===He.type)?(He=U(He,at.props),_y(He,at),He.return=Xe,He):(He=YA(at.type,at.key,at.props,null,Xe.mode,Tt),_y(He,at),He.return=Xe,He)}function lt(Xe,He,at,Tt){return He===null||He.tag!==4||He.stateNode.containerInfo!==at.containerInfo||He.stateNode.implementation!==at.implementation?(He=Tp(at,Xe.mode,Tt),He.return=Xe,He):(He=U(He,at.children||[]),He.return=Xe,He)}function kt(Xe,He,at,Tt,hr){return He===null||He.tag!==7?(He=Sd(at,Xe.mode,Tt,hr),He.return=Xe,He):(He=U(He,at),He.return=Xe,He)}function Dt(Xe,He,at){if(typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint")return He=Lx(""+He,Xe.mode,at),He.return=Xe,He;if(typeof He=="object"&&He!==null){switch(He.$$typeof){case h:return at=YA(He.type,He.key,He.props,null,Xe.mode,at),_y(at,He),at.return=Xe,at;case m:return He=Tp(He,Xe.mode,at),He.return=Xe,He;case N:var Tt=He._init;return He=Tt(He._payload),Dt(Xe,He,at)}if(W(He)||k(He))return He=Sd(He,Xe.mode,at,null),He.return=Xe,He;if(typeof He.then=="function")return Dt(Xe,ZC(He),at);if(He.$$typeof===_)return Dt(Xe,Uf(Xe,He),at);e_(Xe,He)}return null}function ft(Xe,He,at,Tt){var hr=He!==null?He.key:null;if(typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint")return hr!==null?null:ye(Xe,He,""+at,Tt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case h:return at.key===hr?Re(Xe,He,at,Tt):null;case m:return at.key===hr?lt(Xe,He,at,Tt):null;case N:return hr=at._init,at=hr(at._payload),ft(Xe,He,at,Tt)}if(W(at)||k(at))return hr!==null?null:kt(Xe,He,at,Tt,null);if(typeof at.then=="function")return ft(Xe,He,ZC(at),Tt);if(at.$$typeof===_)return ft(Xe,He,Uf(Xe,at),Tt);e_(Xe,at)}return null}function At(Xe,He,at,Tt,hr){if(typeof Tt=="string"&&Tt!==""||typeof Tt=="number"||typeof Tt=="bigint")return Xe=Xe.get(at)||null,ye(He,Xe,""+Tt,hr);if(typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case h:return Xe=Xe.get(Tt.key===null?at:Tt.key)||null,Re(He,Xe,Tt,hr);case m:return Xe=Xe.get(Tt.key===null?at:Tt.key)||null,lt(He,Xe,Tt,hr);case N:var wn=Tt._init;return Tt=wn(Tt._payload),At(Xe,He,at,Tt,hr)}if(W(Tt)||k(Tt))return Xe=Xe.get(at)||null,kt(He,Xe,Tt,hr,null);if(typeof Tt.then=="function")return At(Xe,He,at,ZC(Tt),hr);if(Tt.$$typeof===_)return At(Xe,He,at,Uf(He,Tt),hr);e_(He,Tt)}return null}function qr(Xe,He,at,Tt){for(var hr=null,wn=null,Er=He,Lr=He=0,Yi=null;Er!==null&&Lr<at.length;Lr++){Er.index>Lr?(Yi=Er,Er=null):Yi=Er.sibling;var Wn=ft(Xe,Er,at[Lr],Tt);if(Wn===null){Er===null&&(Er=Yi);break}A&&Er&&Wn.alternate===null&&p(Xe,Er),He=q(Wn,He,Lr),wn===null?hr=Wn:wn.sibling=Wn,wn=Wn,Er=Yi}if(Lr===at.length)return b(Xe,Er),Un&&ZA(Xe,Lr),hr;if(Er===null){for(;Lr<at.length;Lr++)Er=Dt(Xe,at[Lr],Tt),Er!==null&&(He=q(Er,He,Lr),wn===null?hr=Er:wn.sibling=Er,wn=Er);return Un&&ZA(Xe,Lr),hr}for(Er=C(Er);Lr<at.length;Lr++)Yi=At(Er,Xe,Lr,at[Lr],Tt),Yi!==null&&(A&&Yi.alternate!==null&&Er.delete(Yi.key===null?Lr:Yi.key),He=q(Yi,He,Lr),wn===null?hr=Yi:wn.sibling=Yi,wn=Yi);return A&&Er.forEach(function(Y0){return p(Xe,Y0)}),Un&&ZA(Xe,Lr),hr}function Pr(Xe,He,at,Tt){if(at==null)throw Error(n(151));for(var hr=null,wn=null,Er=He,Lr=He=0,Yi=null,Wn=at.next();Er!==null&&!Wn.done;Lr++,Wn=at.next()){Er.index>Lr?(Yi=Er,Er=null):Yi=Er.sibling;var Y0=ft(Xe,Er,Wn.value,Tt);if(Y0===null){Er===null&&(Er=Yi);break}A&&Er&&Y0.alternate===null&&p(Xe,Er),He=q(Y0,He,Lr),wn===null?hr=Y0:wn.sibling=Y0,wn=Y0,Er=Yi}if(Wn.done)return b(Xe,Er),Un&&ZA(Xe,Lr),hr;if(Er===null){for(;!Wn.done;Lr++,Wn=at.next())Wn=Dt(Xe,Wn.value,Tt),Wn!==null&&(He=q(Wn,He,Lr),wn===null?hr=Wn:wn.sibling=Wn,wn=Wn);return Un&&ZA(Xe,Lr),hr}for(Er=C(Er);!Wn.done;Lr++,Wn=at.next())Wn=At(Er,Xe,Lr,Wn.value,Tt),Wn!==null&&(A&&Wn.alternate!==null&&Er.delete(Wn.key===null?Lr:Wn.key),He=q(Wn,He,Lr),wn===null?hr=Wn:wn.sibling=Wn,wn=Wn);return A&&Er.forEach(function(gpe){return p(Xe,gpe)}),Un&&ZA(Xe,Lr),hr}function Sa(Xe,He,at,Tt){if(typeof at=="object"&&at!==null&&at.type===g&&at.key===null&&(at=at.props.children),typeof at=="object"&&at!==null){switch(at.$$typeof){case h:e:{for(var hr=at.key;He!==null;){if(He.key===hr){if(hr=at.type,hr===g){if(He.tag===7){b(Xe,He.sibling),Tt=U(He,at.props.children),Tt.return=Xe,Xe=Tt;break e}}else if(He.elementType===hr||typeof hr=="object"&&hr!==null&&hr.$$typeof===N&&f9(hr)===He.type){b(Xe,He.sibling),Tt=U(He,at.props),_y(Tt,at),Tt.return=Xe,Xe=Tt;break e}b(Xe,He);break}else p(Xe,He);He=He.sibling}at.type===g?(Tt=Sd(at.props.children,Xe.mode,Tt,at.key),Tt.return=Xe,Xe=Tt):(Tt=YA(at.type,at.key,at.props,null,Xe.mode,Tt),_y(Tt,at),Tt.return=Xe,Xe=Tt)}return ue(Xe);case m:e:{for(hr=at.key;He!==null;){if(He.key===hr)if(He.tag===4&&He.stateNode.containerInfo===at.containerInfo&&He.stateNode.implementation===at.implementation){b(Xe,He.sibling),Tt=U(He,at.children||[]),Tt.return=Xe,Xe=Tt;break e}else{b(Xe,He);break}else p(Xe,He);He=He.sibling}Tt=Tp(at,Xe.mode,Tt),Tt.return=Xe,Xe=Tt}return ue(Xe);case N:return hr=at._init,at=hr(at._payload),Sa(Xe,He,at,Tt)}if(W(at))return qr(Xe,He,at,Tt);if(k(at)){if(hr=k(at),typeof hr!="function")throw Error(n(150));return at=hr.call(at),Pr(Xe,He,at,Tt)}if(typeof at.then=="function")return Sa(Xe,He,ZC(at),Tt);if(at.$$typeof===_)return Sa(Xe,He,Uf(Xe,at),Tt);e_(Xe,at)}return typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint"?(at=""+at,He!==null&&He.tag===6?(b(Xe,He.sibling),Tt=U(He,at),Tt.return=Xe,Xe=Tt):(b(Xe,He),Tt=Lx(at,Xe.mode,Tt),Tt.return=Xe,Xe=Tt),ue(Xe)):b(Xe,He)}return function(Xe,He,at,Tt){try{Cy=0;var hr=Sa(Xe,He,at,Tt);return Xx=null,hr}catch(Er){if(Er===pe||Er===xe)throw Er;var wn=qi(29,Er,null,Xe.mode);return wn.lanes=Tt,wn.return=Xe,wn}finally{}}}var Yx=A9(!0),h9=A9(!1),Ou=te(null),$f=null;function P0(A){var p=A.alternate;H(Ii,Ii.current&1),H(Ou,A),$f===null&&(p===null||mn.current!==null||p.memoizedState!==null)&&($f=A)}function m9(A){if(A.tag===22){if(H(Ii,Ii.current),H(Ou,A),$f===null){var p=A.alternate;p!==null&&p.memoizedState!==null&&($f=A)}}else R0()}function R0(){H(Ii,Ii.current),H(Ou,Ou.current)}function ih(A){M(Ou),$f===A&&($f=null),M(Ii)}var Ii=te(0);function t_(A){for(var p=A;p!==null;){if(p.tag===13){var b=p.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||$j(b)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===A)break;for(;p.sibling===null;){if(p.return===null||p.return===A)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}function rj(A,p,b,C){p=A.memoizedState,b=b(C,p),b=b==null?p:d({},p,b),A.memoizedState=b,A.lanes===0&&(A.updateQueue.baseState=b)}var nj={enqueueSetState:function(A,p,b){A=A._reactInternals;var C=Rc(),U=Nt(C);U.payload=p,b!=null&&(U.callback=b),p=It(A,U,C),p!==null&&(Lc(p,A,C),Bt(p,A,C))},enqueueReplaceState:function(A,p,b){A=A._reactInternals;var C=Rc(),U=Nt(C);U.tag=1,U.payload=p,b!=null&&(U.callback=b),p=It(A,U,C),p!==null&&(Lc(p,A,C),Bt(p,A,C))},enqueueForceUpdate:function(A,p){A=A._reactInternals;var b=Rc(),C=Nt(b);C.tag=2,p!=null&&(C.callback=p),p=It(A,C,b),p!==null&&(Lc(p,A,b),Bt(p,A,b))}};function p9(A,p,b,C,U,q,ue){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(C,q,ue):p.prototype&&p.prototype.isPureReactComponent?!kf(b,C)||!kf(U,q):!0}function g9(A,p,b,C){A=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(b,C),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(b,C),p.state!==A&&nj.enqueueReplaceState(p,p.state,null)}function $p(A,p){var b=p;if("ref"in p){b={};for(var C in p)C!=="ref"&&(b[C]=p[C])}if(A=A.defaultProps){b===p&&(b=d({},b));for(var U in A)b[U]===void 0&&(b[U]=A[U])}return b}var r_=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function x9(A){r_(A)}function v9(A){console.error(A)}function b9(A){r_(A)}function n_(A,p){try{var b=A.onUncaughtError;b(p.value,{componentStack:p.stack})}catch(C){setTimeout(function(){throw C})}}function y9(A,p,b){try{var C=A.onCaughtError;C(b.value,{componentStack:b.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(U){setTimeout(function(){throw U})}}function aj(A,p,b){return b=Nt(b),b.tag=3,b.payload={element:null},b.callback=function(){n_(A,p)},b}function w9(A){return A=Nt(A),A.tag=3,A}function E9(A,p,b,C){var U=b.type.getDerivedStateFromError;if(typeof U=="function"){var q=C.value;A.payload=function(){return U(q)},A.callback=function(){y9(p,b,C)}}var ue=b.stateNode;ue!==null&&typeof ue.componentDidCatch=="function"&&(A.callback=function(){y9(p,b,C),typeof U!="function"&&(V0===null?V0=new Set([this]):V0.add(this));var ye=C.stack;this.componentDidCatch(C.value,{componentStack:ye!==null?ye:""})})}function gme(A,p,b,C,U){if(b.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){if(p=b.alternate,p!==null&&T0(p,b,U,!0),b=Ou.current,b!==null){switch(b.tag){case 13:return $f===null?kj():b.alternate===null&&ks===0&&(ks=3),b.flags&=-257,b.flags|=65536,b.lanes=U,C===Ee?b.flags|=16384:(p=b.updateQueue,p===null?b.updateQueue=new Set([C]):p.add(C),Tj(A,C,U)),!1;case 22:return b.flags|=65536,C===Ee?b.flags|=16384:(p=b.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([C])},b.updateQueue=p):(b=p.retryQueue,b===null?p.retryQueue=new Set([C]):b.add(C)),Tj(A,C,U)),!1}throw Error(n(435,b.tag))}return Tj(A,C,U),kj(),!1}if(Un)return p=Ou.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=U,C!==cy&&(A=Error(n(422),{cause:C}),B0(gn(A,b)))):(C!==cy&&(p=Error(n(423),{cause:C}),B0(gn(p,b))),A=A.current.alternate,A.flags|=65536,U&=-U,A.lanes|=U,C=gn(C,b),U=aj(A.stateNode,C,U),nr(A,U),ks!==4&&(ks=2)),!1;var q=Error(n(520),{cause:C});if(q=gn(q,b),Iy===null?Iy=[q]:Iy.push(q),ks!==4&&(ks=2),p===null)return!0;C=gn(C,b),b=p;do{switch(b.tag){case 3:return b.flags|=65536,A=U&-U,b.lanes|=A,A=aj(b.stateNode,C,A),nr(b,A),!1;case 1:if(p=b.type,q=b.stateNode,(b.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(V0===null||!V0.has(q))))return b.flags|=65536,U&=-U,b.lanes|=U,U=w9(U),E9(U,A,b,C),nr(b,U),!1}b=b.return}while(b!==null);return!1}var C9=Error(n(461)),Wi=!1;function xo(A,p,b,C){p.child=A===null?h9(p,null,b,C):Yx(p,A.child,b,C)}function _9(A,p,b,C,U){b=b.render;var q=p.ref;if("ref"in C){var ue={};for(var ye in C)ye!=="ref"&&(ue[ye]=C[ye])}else ue=C;return Iu(p),C=Ic(A,p,b,ue,q,U),ye=Pa(),A!==null&&!Wi?(Dp(A,p,U),oh(A,p,U)):(Un&&ye&&jp(p),p.flags|=1,xo(A,p,C,U),p.child)}function S9(A,p,b,C,U){if(A===null){var q=b.type;return typeof q=="function"&&!N0(q)&&q.defaultProps===void 0&&b.compare===null?(p.tag=15,p.type=q,N9(A,p,q,C,U)):(A=YA(b.type,null,C,p,p.mode,U),A.ref=p.ref,A.return=p,p.child=A)}if(q=A.child,!fj(A,U)){var ue=q.memoizedProps;if(b=b.compare,b=b!==null?b:kf,b(ue,C)&&A.ref===p.ref)return oh(A,p,U)}return p.flags|=1,A=ku(q,C),A.ref=p.ref,A.return=p,p.child=A}function N9(A,p,b,C,U){if(A!==null){var q=A.memoizedProps;if(kf(q,C)&&A.ref===p.ref)if(Wi=!1,p.pendingProps=C=q,fj(A,U))(A.flags&131072)!==0&&(Wi=!0);else return p.lanes=A.lanes,oh(A,p,U)}return sj(A,p,b,C,U)}function k9(A,p,b){var C=p.pendingProps,U=C.children,q=A!==null?A.memoizedState:null;if(C.mode==="hidden"){if((p.flags&128)!==0){if(C=q!==null?q.baseLanes|b:b,A!==null){for(U=p.child=A.child,q=0;U!==null;)q=q|U.lanes|U.childLanes,U=U.sibling;p.childLanes=q&~C}else p.childLanes=0,p.child=null;return B9(A,p,C,b)}if((b&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},A!==null&&se(p,q!==null?q.cachePool:null),q!==null?sa(p,q):Kn(),m9(p);else return p.lanes=p.childLanes=536870912,B9(A,p,q!==null?q.baseLanes|b:b,b)}else q!==null?(se(p,q.cachePool),sa(p,q),R0(),p.memoizedState=null):(A!==null&&se(p,null),Kn(),R0());return xo(A,p,U,b),p.child}function B9(A,p,b,C){var U=ee();return U=U===null?null:{parent:zs._currentValue,pool:U},p.memoizedState={baseLanes:b,cachePool:U},A!==null&&se(p,null),Kn(),m9(p),A!==null&&T0(A,p,C,!0),null}function a_(A,p){var b=p.ref;if(b===null)A!==null&&A.ref!==null&&(p.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(n(284));(A===null||A.ref!==b)&&(p.flags|=4194816)}}function sj(A,p,b,C,U){return Iu(p),b=Ic(A,p,b,C,void 0,U),C=Pa(),A!==null&&!Wi?(Dp(A,p,U),oh(A,p,U)):(Un&&C&&jp(p),p.flags|=1,xo(A,p,b,U),p.child)}function T9(A,p,b,C,U,q){return Iu(p),p.updateQueue=null,b=rh(p,C,b,U),Qf(A),C=Pa(),A!==null&&!Wi?(Dp(A,p,q),oh(A,p,q)):(Un&&C&&jp(p),p.flags|=1,xo(A,p,b,q),p.child)}function j9(A,p,b,C,U){if(Iu(p),p.stateNode===null){var q=fi,ue=b.contextType;typeof ue=="object"&&ue!==null&&(q=Vs(ue)),q=new b(C,q),p.memoizedState=q.state!==null&&q.state!==void 0?q.state:null,q.updater=nj,p.stateNode=q,q._reactInternals=p,q=p.stateNode,q.props=C,q.state=p.memoizedState,q.refs={},Qe(p),ue=b.contextType,q.context=typeof ue=="object"&&ue!==null?Vs(ue):fi,q.state=p.memoizedState,ue=b.getDerivedStateFromProps,typeof ue=="function"&&(rj(p,b,ue,C),q.state=p.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof q.getSnapshotBeforeUpdate=="function"||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(ue=q.state,typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount(),ue!==q.state&&nj.enqueueReplaceState(q,q.state,null),tr(p,C,q,U),yr(),q.state=p.memoizedState),typeof q.componentDidMount=="function"&&(p.flags|=4194308),C=!0}else if(A===null){q=p.stateNode;var ye=p.memoizedProps,Re=$p(b,ye);q.props=Re;var lt=q.context,kt=b.contextType;ue=fi,typeof kt=="object"&&kt!==null&&(ue=Vs(kt));var Dt=b.getDerivedStateFromProps;kt=typeof Dt=="function"||typeof q.getSnapshotBeforeUpdate=="function",ye=p.pendingProps!==ye,kt||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(ye||lt!==ue)&&g9(p,q,C,ue),mt=!1;var ft=p.memoizedState;q.state=ft,tr(p,C,q,U),yr(),lt=p.memoizedState,ye||ft!==lt||mt?(typeof Dt=="function"&&(rj(p,b,Dt,C),lt=p.memoizedState),(Re=mt||p9(p,b,Re,C,ft,lt,ue))?(kt||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount()),typeof q.componentDidMount=="function"&&(p.flags|=4194308)):(typeof q.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=C,p.memoizedState=lt),q.props=C,q.state=lt,q.context=ue,C=Re):(typeof q.componentDidMount=="function"&&(p.flags|=4194308),C=!1)}else{q=p.stateNode,Ve(A,p),ue=p.memoizedProps,kt=$p(b,ue),q.props=kt,Dt=p.pendingProps,ft=q.context,lt=b.contextType,Re=fi,typeof lt=="object"&&lt!==null&&(Re=Vs(lt)),ye=b.getDerivedStateFromProps,(lt=typeof ye=="function"||typeof q.getSnapshotBeforeUpdate=="function")||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(ue!==Dt||ft!==Re)&&g9(p,q,C,Re),mt=!1,ft=p.memoizedState,q.state=ft,tr(p,C,q,U),yr();var At=p.memoizedState;ue!==Dt||ft!==At||mt||A!==null&&A.dependencies!==null&&Hx(A.dependencies)?(typeof ye=="function"&&(rj(p,b,ye,C),At=p.memoizedState),(kt=mt||p9(p,b,kt,C,ft,At,Re)||A!==null&&A.dependencies!==null&&Hx(A.dependencies))?(lt||typeof q.UNSAFE_componentWillUpdate!="function"&&typeof q.componentWillUpdate!="function"||(typeof q.componentWillUpdate=="function"&&q.componentWillUpdate(C,At,Re),typeof q.UNSAFE_componentWillUpdate=="function"&&q.UNSAFE_componentWillUpdate(C,At,Re)),typeof q.componentDidUpdate=="function"&&(p.flags|=4),typeof q.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof q.componentDidUpdate!="function"||ue===A.memoizedProps&&ft===A.memoizedState||(p.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||ue===A.memoizedProps&&ft===A.memoizedState||(p.flags|=1024),p.memoizedProps=C,p.memoizedState=At),q.props=C,q.state=At,q.context=Re,C=kt):(typeof q.componentDidUpdate!="function"||ue===A.memoizedProps&&ft===A.memoizedState||(p.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||ue===A.memoizedProps&&ft===A.memoizedState||(p.flags|=1024),C=!1)}return q=C,a_(A,p),C=(p.flags&128)!==0,q||C?(q=p.stateNode,b=C&&typeof b.getDerivedStateFromError!="function"?null:q.render(),p.flags|=1,A!==null&&C?(p.child=Yx(p,A.child,null,U),p.child=Yx(p,null,b,U)):xo(A,p,b,U),p.memoizedState=q.state,A=p.child):A=oh(A,p,U),A}function I9(A,p,b,C){return Cl(),p.flags|=256,xo(A,p,b,C),p.child}var ij={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function oj(A){return{baseLanes:A,cachePool:de()}}function lj(A,p,b){return A=A!==null?A.childLanes&~b:0,p&&(A|=Du),A}function F9(A,p,b){var C=p.pendingProps,U=!1,q=(p.flags&128)!==0,ue;if((ue=q)||(ue=A!==null&&A.memoizedState===null?!1:(Ii.current&2)!==0),ue&&(U=!0,p.flags&=-129),ue=(p.flags&32)!==0,p.flags&=-33,A===null){if(Un){if(U?P0(p):R0(),Un){var ye=Za,Re;if(Re=ye){e:{for(Re=ye,ye=Bu;Re.nodeType!==8;){if(!ye){ye=null;break e}if(Re=Ld(Re.nextSibling),Re===null){ye=null;break e}}ye=Re}ye!==null?(p.memoizedState={dehydrated:ye,treeContext:JA!==null?{id:kd,overflow:Bd}:null,retryLane:536870912,hydrationErrors:null},Re=qi(18,null,null,0),Re.stateNode=ye,Re.return=p,p.child=Re,Hs=p,Za=null,Re=!0):Re=!1}Re||eh(p)}if(ye=p.memoizedState,ye!==null&&(ye=ye.dehydrated,ye!==null))return $j(ye)?p.lanes=32:p.lanes=536870912,null;ih(p)}return ye=C.children,C=C.fallback,U?(R0(),U=p.mode,ye=s_({mode:"hidden",children:ye},U),C=Sd(C,U,b,null),ye.return=p,C.return=p,ye.sibling=C,p.child=ye,U=p.child,U.memoizedState=oj(b),U.childLanes=lj(A,ue,b),p.memoizedState=ij,C):(P0(p),cj(p,ye))}if(Re=A.memoizedState,Re!==null&&(ye=Re.dehydrated,ye!==null)){if(q)p.flags&256?(P0(p),p.flags&=-257,p=uj(A,p,b)):p.memoizedState!==null?(R0(),p.child=A.child,p.flags|=128,p=null):(R0(),U=C.fallback,ye=p.mode,C=s_({mode:"visible",children:C.children},ye),U=Sd(U,ye,b,null),U.flags|=2,C.return=p,U.return=p,C.sibling=U,p.child=C,Yx(p,A.child,null,b),C=p.child,C.memoizedState=oj(b),C.childLanes=lj(A,ue,b),p.memoizedState=ij,p=U);else if(P0(p),$j(ye)){if(ue=ye.nextSibling&&ye.nextSibling.dataset,ue)var lt=ue.dgst;ue=lt,C=Error(n(419)),C.stack="",C.digest=ue,B0({value:C,source:null,stack:null}),p=uj(A,p,b)}else if(Wi||T0(A,p,b,!1),ue=(b&A.childLanes)!==0,Wi||ue){if(ue=Ra,ue!==null&&(C=b&-b,C=(C&42)!==0?1:gt(C),C=(C&(ue.suspendedLanes|b))!==0?0:C,C!==0&&C!==Re.retryLane))throw Re.retryLane=C,_d(A,C),Lc(ue,A,C),C9;ye.data==="$?"||kj(),p=uj(A,p,b)}else ye.data==="$?"?(p.flags|=192,p.child=A.child,p=null):(A=Re.treeContext,Za=Ld(ye.nextSibling),Hs=p,Un=!0,Lf=null,Bu=!1,A!==null&&(Yl[El++]=kd,Yl[El++]=Bd,Yl[El++]=JA,kd=A.id,Bd=A.overflow,JA=p),p=cj(p,C.children),p.flags|=4096);return p}return U?(R0(),U=C.fallback,ye=p.mode,Re=A.child,lt=Re.sibling,C=ku(Re,{mode:"hidden",children:C.children}),C.subtreeFlags=Re.subtreeFlags&65011712,lt!==null?U=ku(lt,U):(U=Sd(U,ye,b,null),U.flags|=2),U.return=p,C.return=p,C.sibling=U,p.child=C,C=U,U=p.child,ye=A.child.memoizedState,ye===null?ye=oj(b):(Re=ye.cachePool,Re!==null?(lt=zs._currentValue,Re=Re.parent!==lt?{parent:lt,pool:lt}:Re):Re=de(),ye={baseLanes:ye.baseLanes|b,cachePool:Re}),U.memoizedState=ye,U.childLanes=lj(A,ue,b),p.memoizedState=ij,C):(P0(p),b=A.child,A=b.sibling,b=ku(b,{mode:"visible",children:C.children}),b.return=p,b.sibling=null,A!==null&&(ue=p.deletions,ue===null?(p.deletions=[A],p.flags|=16):ue.push(A)),p.child=b,p.memoizedState=null,b)}function cj(A,p){return p=s_({mode:"visible",children:p},A.mode),p.return=A,A.child=p}function s_(A,p){return A=qi(22,A,null,p),A.lanes=0,A.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},A}function uj(A,p,b){return Yx(p,A.child,null,b),A=cj(p,p.pendingProps.children),A.flags|=2,p.memoizedState=null,A}function O9(A,p,b){A.lanes|=p;var C=A.alternate;C!==null&&(C.lanes|=p),Ux(A.return,p,b)}function dj(A,p,b,C,U){var q=A.memoizedState;q===null?A.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:C,tail:b,tailMode:U}:(q.isBackwards=p,q.rendering=null,q.renderingStartTime=0,q.last=C,q.tail=b,q.tailMode=U)}function D9(A,p,b){var C=p.pendingProps,U=C.revealOrder,q=C.tail;if(xo(A,p,C.children,b),C=Ii.current,(C&2)!==0)C=C&1|2,p.flags|=128;else{if(A!==null&&(A.flags&128)!==0)e:for(A=p.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&O9(A,b,p);else if(A.tag===19)O9(A,b,p);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===p)break e;for(;A.sibling===null;){if(A.return===null||A.return===p)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}C&=1}switch(H(Ii,C),U){case"forwards":for(b=p.child,U=null;b!==null;)A=b.alternate,A!==null&&t_(A)===null&&(U=b),b=b.sibling;b=U,b===null?(U=p.child,p.child=null):(U=b.sibling,b.sibling=null),dj(p,!1,U,b,q);break;case"backwards":for(b=null,U=p.child,p.child=null;U!==null;){if(A=U.alternate,A!==null&&t_(A)===null){p.child=U;break}A=U.sibling,U.sibling=b,b=U,U=A}dj(p,!0,b,null,q);break;case"together":dj(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function oh(A,p,b){if(A!==null&&(p.dependencies=A.dependencies),H0|=p.lanes,(b&p.childLanes)===0)if(A!==null){if(T0(A,p,b,!1),(b&p.childLanes)===0)return null}else return null;if(A!==null&&p.child!==A.child)throw Error(n(153));if(p.child!==null){for(A=p.child,b=ku(A,A.pendingProps),p.child=b,b.return=p;A.sibling!==null;)A=A.sibling,b=b.sibling=ku(A,A.pendingProps),b.return=p;b.sibling=null}return p.child}function fj(A,p){return(A.lanes&p)!==0?!0:(A=A.dependencies,!!(A!==null&&Hx(A)))}function xme(A,p,b){switch(p.tag){case 3:ie(p,p.stateNode.containerInfo),Mf(p,zs,A.memoizedState.cache),Cl();break;case 27:case 5:Ae(p);break;case 4:ie(p,p.stateNode.containerInfo);break;case 10:Mf(p,p.type,p.memoizedProps.value);break;case 13:var C=p.memoizedState;if(C!==null)return C.dehydrated!==null?(P0(p),p.flags|=128,null):(b&p.child.childLanes)!==0?F9(A,p,b):(P0(p),A=oh(A,p,b),A!==null?A.sibling:null);P0(p);break;case 19:var U=(A.flags&128)!==0;if(C=(b&p.childLanes)!==0,C||(T0(A,p,b,!1),C=(b&p.childLanes)!==0),U){if(C)return D9(A,p,b);p.flags|=128}if(U=p.memoizedState,U!==null&&(U.rendering=null,U.tail=null,U.lastEffect=null),H(Ii,Ii.current),C)break;return null;case 22:case 23:return p.lanes=0,k9(A,p,b);case 24:Mf(p,zs,A.memoizedState.cache)}return oh(A,p,b)}function P9(A,p,b){if(A!==null)if(A.memoizedProps!==p.pendingProps)Wi=!0;else{if(!fj(A,b)&&(p.flags&128)===0)return Wi=!1,xme(A,p,b);Wi=(A.flags&131072)!==0}else Wi=!1,Un&&(p.flags&1048576)!==0&&DC(p,Mx,p.index);switch(p.lanes=0,p.tag){case 16:e:{A=p.pendingProps;var C=p.elementType,U=C._init;if(C=U(C._payload),p.type=C,typeof C=="function")N0(C)?(A=$p(C,A),p.tag=1,p=j9(null,p,C,A,b)):(p.tag=0,p=sj(null,p,C,A,b));else{if(C!=null){if(U=C.$$typeof,U===T){p.tag=11,p=_9(null,p,C,A,b);break e}else if(U===E){p.tag=14,p=S9(null,p,C,A,b);break e}}throw p=R(C)||C,Error(n(306,p,""))}}return p;case 0:return sj(A,p,p.type,p.pendingProps,b);case 1:return C=p.type,U=$p(C,p.pendingProps),j9(A,p,C,U,b);case 3:e:{if(ie(p,p.stateNode.containerInfo),A===null)throw Error(n(387));C=p.pendingProps;var q=p.memoizedState;U=q.element,Ve(A,p),tr(p,C,null,b);var ue=p.memoizedState;if(C=ue.cache,Mf(p,zs,C),C!==q.cache&&Qx(p,[zs],b,!0),yr(),C=ue.element,q.isDehydrated)if(q={element:C,isDehydrated:!1,cache:ue.cache},p.updateQueue.baseState=q,p.memoizedState=q,p.flags&256){p=I9(A,p,C,b);break e}else if(C!==U){U=gn(Error(n(424)),p),B0(U),p=I9(A,p,C,b);break e}else{switch(A=p.stateNode.containerInfo,A.nodeType){case 9:A=A.body;break;default:A=A.nodeName==="HTML"?A.ownerDocument.body:A}for(Za=Ld(A.firstChild),Hs=p,Un=!0,Lf=null,Bu=!0,b=h9(p,null,C,b),p.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling}else{if(Cl(),C===U){p=oh(A,p,b);break e}xo(A,p,C,b)}p=p.child}return p;case 26:return a_(A,p),A===null?(b=UQ(p.type,null,p.pendingProps,null))?p.memoizedState=b:Un||(b=p.type,A=p.pendingProps,C=v_(ae.current).createElement(b),C[ar]=p,C[vr]=A,bo(C,b,A),$e(C),p.stateNode=C):p.memoizedState=UQ(p.type,A.memoizedProps,p.pendingProps,A.memoizedState),null;case 27:return Ae(p),A===null&&Un&&(C=p.stateNode=RQ(p.type,p.pendingProps,ae.current),Hs=p,Bu=!0,U=Za,G0(p.type)?(Gj=U,Za=Ld(C.firstChild)):Za=U),xo(A,p,p.pendingProps.children,b),a_(A,p),A===null&&(p.flags|=4194304),p.child;case 5:return A===null&&Un&&((U=C=Za)&&(C=Gme(C,p.type,p.pendingProps,Bu),C!==null?(p.stateNode=C,Hs=p,Za=Ld(C.firstChild),Bu=!1,U=!0):U=!1),U||eh(p)),Ae(p),U=p.type,q=p.pendingProps,ue=A!==null?A.memoizedProps:null,C=q.children,Hj(U,q)?C=null:ue!==null&&Hj(U,ue)&&(p.flags|=32),p.memoizedState!==null&&(U=Ic(A,p,Hf,null,null,b),Qy._currentValue=U),a_(A,p),xo(A,p,C,b),p.child;case 6:return A===null&&Un&&((A=b=Za)&&(b=Kme(b,p.pendingProps,Bu),b!==null?(p.stateNode=b,Hs=p,Za=null,A=!0):A=!1),A||eh(p)),null;case 13:return F9(A,p,b);case 4:return ie(p,p.stateNode.containerInfo),C=p.pendingProps,A===null?p.child=Yx(p,null,C,b):xo(A,p,C,b),p.child;case 11:return _9(A,p,p.type,p.pendingProps,b);case 7:return xo(A,p,p.pendingProps,b),p.child;case 8:return xo(A,p,p.pendingProps.children,b),p.child;case 12:return xo(A,p,p.pendingProps.children,b),p.child;case 10:return C=p.pendingProps,Mf(p,p.type,C.value),xo(A,p,C.children,b),p.child;case 9:return U=p.type._context,C=p.pendingProps.children,Iu(p),U=Vs(U),C=C(U),p.flags|=1,xo(A,p,C,b),p.child;case 14:return S9(A,p,p.type,p.pendingProps,b);case 15:return N9(A,p,p.type,p.pendingProps,b);case 19:return D9(A,p,b);case 31:return C=p.pendingProps,b=p.mode,C={mode:C.mode,children:C.children},A===null?(b=s_(C,b),b.ref=p.ref,p.child=b,b.return=p,p=b):(b=ku(A.child,C),b.ref=p.ref,p.child=b,b.return=p,p=b),p;case 22:return k9(A,p,b);case 24:return Iu(p),C=Vs(zs),A===null?(U=ee(),U===null&&(U=Ra,q=uy(),U.pooledCache=q,q.refCount++,q!==null&&(U.pooledCacheLanes|=b),U=q),p.memoizedState={parent:C,cache:U},Qe(p),Mf(p,zs,U)):((A.lanes&b)!==0&&(Ve(A,p),tr(p,null,null,b),yr()),U=A.memoizedState,q=p.memoizedState,U.parent!==C?(U={parent:C,cache:C},p.memoizedState=U,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=U),Mf(p,zs,C)):(C=q.cache,Mf(p,zs,C),C!==U.cache&&Qx(p,[zs],b,!0))),xo(A,p,p.pendingProps.children,b),p.child;case 29:throw p.pendingProps}throw Error(n(156,p.tag))}function lh(A){A.flags|=4}function R9(A,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)A.flags&=-16777217;else if(A.flags|=16777216,!$Q(p)){if(p=Ou.current,p!==null&&((Ln&4194048)===Ln?$f!==null:(Ln&62914560)!==Ln&&(Ln&536870912)===0||p!==$f))throw rt=Ee,ge;A.flags|=8192}}function i_(A,p){p!==null&&(A.flags|=4),A.flags&16384&&(p=A.tag!==22?pn():536870912,A.lanes|=p,tv|=p)}function Sy(A,p){if(!Un)switch(A.tailMode){case"hidden":p=A.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?A.tail=null:b.sibling=null;break;case"collapsed":b=A.tail;for(var C=null;b!==null;)b.alternate!==null&&(C=b),b=b.sibling;C===null?p||A.tail===null?A.tail=null:A.tail.sibling=null:C.sibling=null}}function ds(A){var p=A.alternate!==null&&A.alternate.child===A.child,b=0,C=0;if(p)for(var U=A.child;U!==null;)b|=U.lanes|U.childLanes,C|=U.subtreeFlags&65011712,C|=U.flags&65011712,U.return=A,U=U.sibling;else for(U=A.child;U!==null;)b|=U.lanes|U.childLanes,C|=U.subtreeFlags,C|=U.flags,U.return=A,U=U.sibling;return A.subtreeFlags|=C,A.childLanes=b,p}function vme(A,p,b){var C=p.pendingProps;switch(Ip(p),p.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ds(p),null;case 1:return ds(p),null;case 3:return b=p.stateNode,C=null,A!==null&&(C=A.memoizedState.cache),p.memoizedState.cache!==C&&(p.flags|=2048),ju(zs),ce(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(A===null||A.child===null)&&(po(p)?lh(p):A===null||A.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,RC())),ds(p),null;case 26:return b=p.memoizedState,A===null?(lh(p),b!==null?(ds(p),R9(p,b)):(ds(p),p.flags&=-16777217)):b?b!==A.memoizedState?(lh(p),ds(p),R9(p,b)):(ds(p),p.flags&=-16777217):(A.memoizedProps!==C&&lh(p),ds(p),p.flags&=-16777217),null;case 27:Fe(p),b=ae.current;var U=p.type;if(A!==null&&p.stateNode!=null)A.memoizedProps!==C&&lh(p);else{if(!C){if(p.stateNode===null)throw Error(n(166));return ds(p),null}A=Y.current,po(p)?PC(p):(A=RQ(U,C,b),p.stateNode=A,lh(p))}return ds(p),null;case 5:if(Fe(p),b=p.type,A!==null&&p.stateNode!=null)A.memoizedProps!==C&&lh(p);else{if(!C){if(p.stateNode===null)throw Error(n(166));return ds(p),null}if(A=Y.current,po(p))PC(p);else{switch(U=v_(ae.current),A){case 1:A=U.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:A=U.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":A=U.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":A=U.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":A=U.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof C.is=="string"?U.createElement("select",{is:C.is}):U.createElement("select"),C.multiple?A.multiple=!0:C.size&&(A.size=C.size);break;default:A=typeof C.is=="string"?U.createElement(b,{is:C.is}):U.createElement(b)}}A[ar]=p,A[vr]=C;e:for(U=p.child;U!==null;){if(U.tag===5||U.tag===6)A.appendChild(U.stateNode);else if(U.tag!==4&&U.tag!==27&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===p)break e;for(;U.sibling===null;){if(U.return===null||U.return===p)break e;U=U.return}U.sibling.return=U.return,U=U.sibling}p.stateNode=A;e:switch(bo(A,b,C),b){case"button":case"input":case"select":case"textarea":A=!!C.autoFocus;break e;case"img":A=!0;break e;default:A=!1}A&&lh(p)}}return ds(p),p.flags&=-16777217,null;case 6:if(A&&p.stateNode!=null)A.memoizedProps!==C&&lh(p);else{if(typeof C!="string"&&p.stateNode===null)throw Error(n(166));if(A=ae.current,po(p)){if(A=p.stateNode,b=p.memoizedProps,C=null,U=Hs,U!==null)switch(U.tag){case 27:case 5:C=U.memoizedProps}A[ar]=p,A=!!(A.nodeValue===b||C!==null&&C.suppressHydrationWarning===!0||TQ(A.nodeValue,b)),A||eh(p)}else A=v_(A).createTextNode(C),A[ar]=p,p.stateNode=A}return ds(p),null;case 13:if(C=p.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(U=po(p),C!==null&&C.dehydrated!==null){if(A===null){if(!U)throw Error(n(318));if(U=p.memoizedState,U=U!==null?U.dehydrated:null,!U)throw Error(n(317));U[ar]=p}else Cl(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;ds(p),U=!1}else U=RC(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=U),U=!0;if(!U)return p.flags&256?(ih(p),p):(ih(p),null)}if(ih(p),(p.flags&128)!==0)return p.lanes=b,p;if(b=C!==null,A=A!==null&&A.memoizedState!==null,b){C=p.child,U=null,C.alternate!==null&&C.alternate.memoizedState!==null&&C.alternate.memoizedState.cachePool!==null&&(U=C.alternate.memoizedState.cachePool.pool);var q=null;C.memoizedState!==null&&C.memoizedState.cachePool!==null&&(q=C.memoizedState.cachePool.pool),q!==U&&(C.flags|=2048)}return b!==A&&b&&(p.child.flags|=8192),i_(p,p.updateQueue),ds(p),null;case 4:return ce(),A===null&&Rj(p.stateNode.containerInfo),ds(p),null;case 10:return ju(p.type),ds(p),null;case 19:if(M(Ii),U=p.memoizedState,U===null)return ds(p),null;if(C=(p.flags&128)!==0,q=U.rendering,q===null)if(C)Sy(U,!1);else{if(ks!==0||A!==null&&(A.flags&128)!==0)for(A=p.child;A!==null;){if(q=t_(A),q!==null){for(p.flags|=128,Sy(U,!1),A=q.updateQueue,p.updateQueue=A,i_(p,A),p.subtreeFlags=0,A=b,b=p.child;b!==null;)Bp(b,A),b=b.sibling;return H(Ii,Ii.current&1|2),p.child}A=A.sibling}U.tail!==null&&Be()>c_&&(p.flags|=128,C=!0,Sy(U,!1),p.lanes=4194304)}else{if(!C)if(A=t_(q),A!==null){if(p.flags|=128,C=!0,A=A.updateQueue,p.updateQueue=A,i_(p,A),Sy(U,!0),U.tail===null&&U.tailMode==="hidden"&&!q.alternate&&!Un)return ds(p),null}else 2*Be()-U.renderingStartTime>c_&&b!==536870912&&(p.flags|=128,C=!0,Sy(U,!1),p.lanes=4194304);U.isBackwards?(q.sibling=p.child,p.child=q):(A=U.last,A!==null?A.sibling=q:p.child=q,U.last=q)}return U.tail!==null?(p=U.tail,U.rendering=p,U.tail=p.sibling,U.renderingStartTime=Be(),p.sibling=null,A=Ii.current,H(Ii,C?A&1|2:A&1),p):(ds(p),null);case 22:case 23:return ih(p),Zr(),C=p.memoizedState!==null,A!==null?A.memoizedState!==null!==C&&(p.flags|=8192):C&&(p.flags|=8192),C?(b&536870912)!==0&&(p.flags&128)===0&&(ds(p),p.subtreeFlags&6&&(p.flags|=8192)):ds(p),b=p.updateQueue,b!==null&&i_(p,b.retryQueue),b=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(b=A.memoizedState.cachePool.pool),C=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(C=p.memoizedState.cachePool.pool),C!==b&&(p.flags|=2048),A!==null&&M(Q),null;case 24:return b=null,A!==null&&(b=A.memoizedState.cache),p.memoizedState.cache!==b&&(p.flags|=2048),ju(zs),ds(p),null;case 25:return null;case 30:return null}throw Error(n(156,p.tag))}function bme(A,p){switch(Ip(p),p.tag){case 1:return A=p.flags,A&65536?(p.flags=A&-65537|128,p):null;case 3:return ju(zs),ce(),A=p.flags,(A&65536)!==0&&(A&128)===0?(p.flags=A&-65537|128,p):null;case 26:case 27:case 5:return Fe(p),null;case 13:if(ih(p),A=p.memoizedState,A!==null&&A.dehydrated!==null){if(p.alternate===null)throw Error(n(340));Cl()}return A=p.flags,A&65536?(p.flags=A&-65537|128,p):null;case 19:return M(Ii),null;case 4:return ce(),null;case 10:return ju(p.type),null;case 22:case 23:return ih(p),Zr(),A!==null&&M(Q),A=p.flags,A&65536?(p.flags=A&-65537|128,p):null;case 24:return ju(zs),null;case 25:return null;default:return null}}function L9(A,p){switch(Ip(p),p.tag){case 3:ju(zs),ce();break;case 26:case 27:case 5:Fe(p);break;case 4:ce();break;case 13:ih(p);break;case 19:M(Ii);break;case 10:ju(p.type);break;case 22:case 23:ih(p),Zr(),A!==null&&M(Q);break;case 24:ju(zs)}}function Ny(A,p){try{var b=p.updateQueue,C=b!==null?b.lastEffect:null;if(C!==null){var U=C.next;b=U;do{if((b.tag&A)===A){C=void 0;var q=b.create,ue=b.inst;C=q(),ue.destroy=C}b=b.next}while(b!==U)}}catch(ye){Ta(p,p.return,ye)}}function L0(A,p,b){try{var C=p.updateQueue,U=C!==null?C.lastEffect:null;if(U!==null){var q=U.next;C=q;do{if((C.tag&A)===A){var ue=C.inst,ye=ue.destroy;if(ye!==void 0){ue.destroy=void 0,U=p;var Re=b,lt=ye;try{lt()}catch(kt){Ta(U,Re,kt)}}}C=C.next}while(C!==q)}}catch(kt){Ta(p,p.return,kt)}}function M9(A){var p=A.updateQueue;if(p!==null){var b=A.stateNode;try{Gn(p,b)}catch(C){Ta(A,A.return,C)}}}function U9(A,p,b){b.props=$p(A.type,A.memoizedProps),b.state=A.memoizedState;try{b.componentWillUnmount()}catch(C){Ta(A,p,C)}}function ky(A,p){try{var b=A.ref;if(b!==null){switch(A.tag){case 26:case 27:case 5:var C=A.stateNode;break;case 30:C=A.stateNode;break;default:C=A.stateNode}typeof b=="function"?A.refCleanup=b(C):b.current=C}}catch(U){Ta(A,p,U)}}function Gf(A,p){var b=A.ref,C=A.refCleanup;if(b!==null)if(typeof C=="function")try{C()}catch(U){Ta(A,p,U)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(U){Ta(A,p,U)}else b.current=null}function Q9(A){var p=A.type,b=A.memoizedProps,C=A.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":b.autoFocus&&C.focus();break e;case"img":b.src?C.src=b.src:b.srcSet&&(C.srcset=b.srcSet)}}catch(U){Ta(A,A.return,U)}}function Aj(A,p,b){try{var C=A.stateNode;Qme(C,A.type,b,p),C[vr]=p}catch(U){Ta(A,A.return,U)}}function H9(A){return A.tag===5||A.tag===3||A.tag===26||A.tag===27&&G0(A.type)||A.tag===4}function hj(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||H9(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.tag===27&&G0(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function mj(A,p,b){var C=A.tag;if(C===5||C===6)A=A.stateNode,p?(b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b).insertBefore(A,p):(p=b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b,p.appendChild(A),b=b._reactRootContainer,b!=null||p.onclick!==null||(p.onclick=x_));else if(C!==4&&(C===27&&G0(A.type)&&(b=A.stateNode,p=null),A=A.child,A!==null))for(mj(A,p,b),A=A.sibling;A!==null;)mj(A,p,b),A=A.sibling}function o_(A,p,b){var C=A.tag;if(C===5||C===6)A=A.stateNode,p?b.insertBefore(A,p):b.appendChild(A);else if(C!==4&&(C===27&&G0(A.type)&&(b=A.stateNode),A=A.child,A!==null))for(o_(A,p,b),A=A.sibling;A!==null;)o_(A,p,b),A=A.sibling}function V9(A){var p=A.stateNode,b=A.memoizedProps;try{for(var C=A.type,U=p.attributes;U.length;)p.removeAttributeNode(U[0]);bo(p,C,b),p[ar]=A,p[vr]=b}catch(q){Ta(A,A.return,q)}}var ch=!1,Gs=!1,pj=!1,z9=typeof WeakSet=="function"?WeakSet:Set,Xi=null;function yme(A,p){if(A=A.containerInfo,Uj=__,A=mo(A),ji(A)){if("selectionStart"in A)var b={start:A.selectionStart,end:A.selectionEnd};else e:{b=(b=A.ownerDocument)&&b.defaultView||window;var C=b.getSelection&&b.getSelection();if(C&&C.rangeCount!==0){b=C.anchorNode;var U=C.anchorOffset,q=C.focusNode;C=C.focusOffset;try{b.nodeType,q.nodeType}catch{b=null;break e}var ue=0,ye=-1,Re=-1,lt=0,kt=0,Dt=A,ft=null;t:for(;;){for(var At;Dt!==b||U!==0&&Dt.nodeType!==3||(ye=ue+U),Dt!==q||C!==0&&Dt.nodeType!==3||(Re=ue+C),Dt.nodeType===3&&(ue+=Dt.nodeValue.length),(At=Dt.firstChild)!==null;)ft=Dt,Dt=At;for(;;){if(Dt===A)break t;if(ft===b&&++lt===U&&(ye=ue),ft===q&&++kt===C&&(Re=ue),(At=Dt.nextSibling)!==null)break;Dt=ft,ft=Dt.parentNode}Dt=At}b=ye===-1||Re===-1?null:{start:ye,end:Re}}else b=null}b=b||{start:0,end:0}}else b=null;for(Qj={focusedElem:A,selectionRange:b},__=!1,Xi=p;Xi!==null;)if(p=Xi,A=p.child,(p.subtreeFlags&1024)!==0&&A!==null)A.return=p,Xi=A;else for(;Xi!==null;){switch(p=Xi,q=p.alternate,A=p.flags,p.tag){case 0:break;case 11:case 15:break;case 1:if((A&1024)!==0&&q!==null){A=void 0,b=p,U=q.memoizedProps,q=q.memoizedState,C=b.stateNode;try{var qr=$p(b.type,U,b.elementType===b.type);A=C.getSnapshotBeforeUpdate(qr,q),C.__reactInternalSnapshotBeforeUpdate=A}catch(Pr){Ta(b,b.return,Pr)}}break;case 3:if((A&1024)!==0){if(A=p.stateNode.containerInfo,b=A.nodeType,b===9)zj(A);else if(b===1)switch(A.nodeName){case"HEAD":case"HTML":case"BODY":zj(A);break;default:A.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((A&1024)!==0)throw Error(n(163))}if(A=p.sibling,A!==null){A.return=p.return,Xi=A;break}Xi=p.return}}function $9(A,p,b){var C=b.flags;switch(b.tag){case 0:case 11:case 15:M0(A,b),C&4&&Ny(5,b);break;case 1:if(M0(A,b),C&4)if(A=b.stateNode,p===null)try{A.componentDidMount()}catch(ue){Ta(b,b.return,ue)}else{var U=$p(b.type,p.memoizedProps);p=p.memoizedState;try{A.componentDidUpdate(U,p,A.__reactInternalSnapshotBeforeUpdate)}catch(ue){Ta(b,b.return,ue)}}C&64&&M9(b),C&512&&ky(b,b.return);break;case 3:if(M0(A,b),C&64&&(A=b.updateQueue,A!==null)){if(p=null,b.child!==null)switch(b.child.tag){case 27:case 5:p=b.child.stateNode;break;case 1:p=b.child.stateNode}try{Gn(A,p)}catch(ue){Ta(b,b.return,ue)}}break;case 27:p===null&&C&4&&V9(b);case 26:case 5:M0(A,b),p===null&&C&4&&Q9(b),C&512&&ky(b,b.return);break;case 12:M0(A,b);break;case 13:M0(A,b),C&4&&q9(A,b),C&64&&(A=b.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(b=Tme.bind(null,b),qme(A,b))));break;case 22:if(C=b.memoizedState!==null||ch,!C){p=p!==null&&p.memoizedState!==null||Gs,U=ch;var q=Gs;ch=C,(Gs=p)&&!q?U0(A,b,(b.subtreeFlags&8772)!==0):M0(A,b),ch=U,Gs=q}break;case 30:break;default:M0(A,b)}}function G9(A){var p=A.alternate;p!==null&&(A.alternate=null,G9(p)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(p=A.stateNode,p!==null&&we(p)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}var es=null,Zl=!1;function uh(A,p,b){for(b=b.child;b!==null;)K9(A,p,b),b=b.sibling}function K9(A,p,b){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(pt,b)}catch{}switch(b.tag){case 26:Gs||Gf(b,p),uh(A,p,b),b.memoizedState?b.memoizedState.count--:b.stateNode&&(b=b.stateNode,b.parentNode.removeChild(b));break;case 27:Gs||Gf(b,p);var C=es,U=Zl;G0(b.type)&&(es=b.stateNode,Zl=!1),uh(A,p,b),Ry(b.stateNode),es=C,Zl=U;break;case 5:Gs||Gf(b,p);case 6:if(C=es,U=Zl,es=null,uh(A,p,b),es=C,Zl=U,es!==null)if(Zl)try{(es.nodeType===9?es.body:es.nodeName==="HTML"?es.ownerDocument.body:es).removeChild(b.stateNode)}catch(q){Ta(b,p,q)}else try{es.removeChild(b.stateNode)}catch(q){Ta(b,p,q)}break;case 18:es!==null&&(Zl?(A=es,DQ(A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A,b.stateNode),$y(A)):DQ(es,b.stateNode));break;case 4:C=es,U=Zl,es=b.stateNode.containerInfo,Zl=!0,uh(A,p,b),es=C,Zl=U;break;case 0:case 11:case 14:case 15:Gs||L0(2,b,p),Gs||L0(4,b,p),uh(A,p,b);break;case 1:Gs||(Gf(b,p),C=b.stateNode,typeof C.componentWillUnmount=="function"&&U9(b,p,C)),uh(A,p,b);break;case 21:uh(A,p,b);break;case 22:Gs=(C=Gs)||b.memoizedState!==null,uh(A,p,b),Gs=C;break;default:uh(A,p,b)}}function q9(A,p){if(p.memoizedState===null&&(A=p.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{$y(A)}catch(b){Ta(p,p.return,b)}}function wme(A){switch(A.tag){case 13:case 19:var p=A.stateNode;return p===null&&(p=A.stateNode=new z9),p;case 22:return A=A.stateNode,p=A._retryCache,p===null&&(p=A._retryCache=new z9),p;default:throw Error(n(435,A.tag))}}function gj(A,p){var b=wme(A);p.forEach(function(C){var U=jme.bind(null,A,C);b.has(C)||(b.add(C),C.then(U,U))})}function Oc(A,p){var b=p.deletions;if(b!==null)for(var C=0;C<b.length;C++){var U=b[C],q=A,ue=p,ye=ue;e:for(;ye!==null;){switch(ye.tag){case 27:if(G0(ye.type)){es=ye.stateNode,Zl=!1;break e}break;case 5:es=ye.stateNode,Zl=!1;break e;case 3:case 4:es=ye.stateNode.containerInfo,Zl=!0;break e}ye=ye.return}if(es===null)throw Error(n(160));K9(q,ue,U),es=null,Zl=!1,q=U.alternate,q!==null&&(q.return=null),U.return=null}if(p.subtreeFlags&13878)for(p=p.child;p!==null;)W9(p,A),p=p.sibling}var Rd=null;function W9(A,p){var b=A.alternate,C=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:Oc(p,A),Dc(A),C&4&&(L0(3,A,A.return),Ny(3,A),L0(5,A,A.return));break;case 1:Oc(p,A),Dc(A),C&512&&(Gs||b===null||Gf(b,b.return)),C&64&&ch&&(A=A.updateQueue,A!==null&&(C=A.callbacks,C!==null&&(b=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=b===null?C:b.concat(C))));break;case 26:var U=Rd;if(Oc(p,A),Dc(A),C&512&&(Gs||b===null||Gf(b,b.return)),C&4){var q=b!==null?b.memoizedState:null;if(C=A.memoizedState,b===null)if(C===null)if(A.stateNode===null){e:{C=A.type,b=A.memoizedProps,U=U.ownerDocument||U;t:switch(C){case"title":q=U.getElementsByTagName("title")[0],(!q||q[Ce]||q[ar]||q.namespaceURI==="http://www.w3.org/2000/svg"||q.hasAttribute("itemprop"))&&(q=U.createElement(C),U.head.insertBefore(q,U.querySelector("head > title"))),bo(q,C,b),q[ar]=A,$e(q),C=q;break e;case"link":var ue=VQ("link","href",U).get(C+(b.href||""));if(ue){for(var ye=0;ye<ue.length;ye++)if(q=ue[ye],q.getAttribute("href")===(b.href==null||b.href===""?null:b.href)&&q.getAttribute("rel")===(b.rel==null?null:b.rel)&&q.getAttribute("title")===(b.title==null?null:b.title)&&q.getAttribute("crossorigin")===(b.crossOrigin==null?null:b.crossOrigin)){ue.splice(ye,1);break t}}q=U.createElement(C),bo(q,C,b),U.head.appendChild(q);break;case"meta":if(ue=VQ("meta","content",U).get(C+(b.content||""))){for(ye=0;ye<ue.length;ye++)if(q=ue[ye],q.getAttribute("content")===(b.content==null?null:""+b.content)&&q.getAttribute("name")===(b.name==null?null:b.name)&&q.getAttribute("property")===(b.property==null?null:b.property)&&q.getAttribute("http-equiv")===(b.httpEquiv==null?null:b.httpEquiv)&&q.getAttribute("charset")===(b.charSet==null?null:b.charSet)){ue.splice(ye,1);break t}}q=U.createElement(C),bo(q,C,b),U.head.appendChild(q);break;default:throw Error(n(468,C))}q[ar]=A,$e(q),C=q}A.stateNode=C}else zQ(U,A.type,A.stateNode);else A.stateNode=HQ(U,C,A.memoizedProps);else q!==C?(q===null?b.stateNode!==null&&(b=b.stateNode,b.parentNode.removeChild(b)):q.count--,C===null?zQ(U,A.type,A.stateNode):HQ(U,C,A.memoizedProps)):C===null&&A.stateNode!==null&&Aj(A,A.memoizedProps,b.memoizedProps)}break;case 27:Oc(p,A),Dc(A),C&512&&(Gs||b===null||Gf(b,b.return)),b!==null&&C&4&&Aj(A,A.memoizedProps,b.memoizedProps);break;case 5:if(Oc(p,A),Dc(A),C&512&&(Gs||b===null||Gf(b,b.return)),A.flags&32){U=A.stateNode;try{Ro(U,"")}catch(At){Ta(A,A.return,At)}}C&4&&A.stateNode!=null&&(U=A.memoizedProps,Aj(A,U,b!==null?b.memoizedProps:U)),C&1024&&(pj=!0);break;case 6:if(Oc(p,A),Dc(A),C&4){if(A.stateNode===null)throw Error(n(162));C=A.memoizedProps,b=A.stateNode;try{b.nodeValue=C}catch(At){Ta(A,A.return,At)}}break;case 3:if(w_=null,U=Rd,Rd=b_(p.containerInfo),Oc(p,A),Rd=U,Dc(A),C&4&&b!==null&&b.memoizedState.isDehydrated)try{$y(p.containerInfo)}catch(At){Ta(A,A.return,At)}pj&&(pj=!1,X9(A));break;case 4:C=Rd,Rd=b_(A.stateNode.containerInfo),Oc(p,A),Dc(A),Rd=C;break;case 12:Oc(p,A),Dc(A);break;case 13:Oc(p,A),Dc(A),A.child.flags&8192&&A.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(Ej=Be()),C&4&&(C=A.updateQueue,C!==null&&(A.updateQueue=null,gj(A,C)));break;case 22:U=A.memoizedState!==null;var Re=b!==null&&b.memoizedState!==null,lt=ch,kt=Gs;if(ch=lt||U,Gs=kt||Re,Oc(p,A),Gs=kt,ch=lt,Dc(A),C&8192)e:for(p=A.stateNode,p._visibility=U?p._visibility&-2:p._visibility|1,U&&(b===null||Re||ch||Gs||Gp(A)),b=null,p=A;;){if(p.tag===5||p.tag===26){if(b===null){Re=b=p;try{if(q=Re.stateNode,U)ue=q.style,typeof ue.setProperty=="function"?ue.setProperty("display","none","important"):ue.display="none";else{ye=Re.stateNode;var Dt=Re.memoizedProps.style,ft=Dt!=null&&Dt.hasOwnProperty("display")?Dt.display:null;ye.style.display=ft==null||typeof ft=="boolean"?"":(""+ft).trim()}}catch(At){Ta(Re,Re.return,At)}}}else if(p.tag===6){if(b===null){Re=p;try{Re.stateNode.nodeValue=U?"":Re.memoizedProps}catch(At){Ta(Re,Re.return,At)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===A)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===A)break e;for(;p.sibling===null;){if(p.return===null||p.return===A)break e;b===p&&(b=null),p=p.return}b===p&&(b=null),p.sibling.return=p.return,p=p.sibling}C&4&&(C=A.updateQueue,C!==null&&(b=C.retryQueue,b!==null&&(C.retryQueue=null,gj(A,b))));break;case 19:Oc(p,A),Dc(A),C&4&&(C=A.updateQueue,C!==null&&(A.updateQueue=null,gj(A,C)));break;case 30:break;case 21:break;default:Oc(p,A),Dc(A)}}function Dc(A){var p=A.flags;if(p&2){try{for(var b,C=A.return;C!==null;){if(H9(C)){b=C;break}C=C.return}if(b==null)throw Error(n(160));switch(b.tag){case 27:var U=b.stateNode,q=hj(A);o_(A,q,U);break;case 5:var ue=b.stateNode;b.flags&32&&(Ro(ue,""),b.flags&=-33);var ye=hj(A);o_(A,ye,ue);break;case 3:case 4:var Re=b.stateNode.containerInfo,lt=hj(A);mj(A,lt,Re);break;default:throw Error(n(161))}}catch(kt){Ta(A,A.return,kt)}A.flags&=-3}p&4096&&(A.flags&=-4097)}function X9(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var p=A;X9(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),A=A.sibling}}function M0(A,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)$9(A,p.alternate,p),p=p.sibling}function Gp(A){for(A=A.child;A!==null;){var p=A;switch(p.tag){case 0:case 11:case 14:case 15:L0(4,p,p.return),Gp(p);break;case 1:Gf(p,p.return);var b=p.stateNode;typeof b.componentWillUnmount=="function"&&U9(p,p.return,b),Gp(p);break;case 27:Ry(p.stateNode);case 26:case 5:Gf(p,p.return),Gp(p);break;case 22:p.memoizedState===null&&Gp(p);break;case 30:Gp(p);break;default:Gp(p)}A=A.sibling}}function U0(A,p,b){for(b=b&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var C=p.alternate,U=A,q=p,ue=q.flags;switch(q.tag){case 0:case 11:case 15:U0(U,q,b),Ny(4,q);break;case 1:if(U0(U,q,b),C=q,U=C.stateNode,typeof U.componentDidMount=="function")try{U.componentDidMount()}catch(lt){Ta(C,C.return,lt)}if(C=q,U=C.updateQueue,U!==null){var ye=C.stateNode;try{var Re=U.shared.hiddenCallbacks;if(Re!==null)for(U.shared.hiddenCallbacks=null,U=0;U<Re.length;U++)Pn(Re[U],ye)}catch(lt){Ta(C,C.return,lt)}}b&&ue&64&&M9(q),ky(q,q.return);break;case 27:V9(q);case 26:case 5:U0(U,q,b),b&&C===null&&ue&4&&Q9(q),ky(q,q.return);break;case 12:U0(U,q,b);break;case 13:U0(U,q,b),b&&ue&4&&q9(U,q);break;case 22:q.memoizedState===null&&U0(U,q,b),ky(q,q.return);break;case 30:break;default:U0(U,q,b)}p=p.sibling}}function xj(A,p){var b=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(b=A.memoizedState.cachePool.pool),A=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(A=p.memoizedState.cachePool.pool),A!==b&&(A!=null&&A.refCount++,b!=null&&Fp(b))}function vj(A,p){A=null,p.alternate!==null&&(A=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==A&&(p.refCount++,A!=null&&Fp(A))}function Kf(A,p,b,C){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)Y9(A,p,b,C),p=p.sibling}function Y9(A,p,b,C){var U=p.flags;switch(p.tag){case 0:case 11:case 15:Kf(A,p,b,C),U&2048&&Ny(9,p);break;case 1:Kf(A,p,b,C);break;case 3:Kf(A,p,b,C),U&2048&&(A=null,p.alternate!==null&&(A=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==A&&(p.refCount++,A!=null&&Fp(A)));break;case 12:if(U&2048){Kf(A,p,b,C),A=p.stateNode;try{var q=p.memoizedProps,ue=q.id,ye=q.onPostCommit;typeof ye=="function"&&ye(ue,p.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(Re){Ta(p,p.return,Re)}}else Kf(A,p,b,C);break;case 13:Kf(A,p,b,C);break;case 23:break;case 22:q=p.stateNode,ue=p.alternate,p.memoizedState!==null?q._visibility&2?Kf(A,p,b,C):By(A,p):q._visibility&2?Kf(A,p,b,C):(q._visibility|=2,Jx(A,p,b,C,(p.subtreeFlags&10256)!==0)),U&2048&&xj(ue,p);break;case 24:Kf(A,p,b,C),U&2048&&vj(p.alternate,p);break;default:Kf(A,p,b,C)}}function Jx(A,p,b,C,U){for(U=U&&(p.subtreeFlags&10256)!==0,p=p.child;p!==null;){var q=A,ue=p,ye=b,Re=C,lt=ue.flags;switch(ue.tag){case 0:case 11:case 15:Jx(q,ue,ye,Re,U),Ny(8,ue);break;case 23:break;case 22:var kt=ue.stateNode;ue.memoizedState!==null?kt._visibility&2?Jx(q,ue,ye,Re,U):By(q,ue):(kt._visibility|=2,Jx(q,ue,ye,Re,U)),U&&lt&2048&&xj(ue.alternate,ue);break;case 24:Jx(q,ue,ye,Re,U),U&&lt&2048&&vj(ue.alternate,ue);break;default:Jx(q,ue,ye,Re,U)}p=p.sibling}}function By(A,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var b=A,C=p,U=C.flags;switch(C.tag){case 22:By(b,C),U&2048&&xj(C.alternate,C);break;case 24:By(b,C),U&2048&&vj(C.alternate,C);break;default:By(b,C)}p=p.sibling}}var Ty=8192;function Zx(A){if(A.subtreeFlags&Ty)for(A=A.child;A!==null;)J9(A),A=A.sibling}function J9(A){switch(A.tag){case 26:Zx(A),A.flags&Ty&&A.memoizedState!==null&&ope(Rd,A.memoizedState,A.memoizedProps);break;case 5:Zx(A);break;case 3:case 4:var p=Rd;Rd=b_(A.stateNode.containerInfo),Zx(A),Rd=p;break;case 22:A.memoizedState===null&&(p=A.alternate,p!==null&&p.memoizedState!==null?(p=Ty,Ty=16777216,Zx(A),Ty=p):Zx(A));break;default:Zx(A)}}function Z9(A){var p=A.alternate;if(p!==null&&(A=p.child,A!==null)){p.child=null;do p=A.sibling,A.sibling=null,A=p;while(A!==null)}}function jy(A){var p=A.deletions;if((A.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var C=p[b];Xi=C,tQ(C,A)}Z9(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)eQ(A),A=A.sibling}function eQ(A){switch(A.tag){case 0:case 11:case 15:jy(A),A.flags&2048&&L0(9,A,A.return);break;case 3:jy(A);break;case 12:jy(A);break;case 22:var p=A.stateNode;A.memoizedState!==null&&p._visibility&2&&(A.return===null||A.return.tag!==13)?(p._visibility&=-3,l_(A)):jy(A);break;default:jy(A)}}function l_(A){var p=A.deletions;if((A.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var C=p[b];Xi=C,tQ(C,A)}Z9(A)}for(A=A.child;A!==null;){switch(p=A,p.tag){case 0:case 11:case 15:L0(8,p,p.return),l_(p);break;case 22:b=p.stateNode,b._visibility&2&&(b._visibility&=-3,l_(p));break;default:l_(p)}A=A.sibling}}function tQ(A,p){for(;Xi!==null;){var b=Xi;switch(b.tag){case 0:case 11:case 15:L0(8,b,p);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var C=b.memoizedState.cachePool.pool;C!=null&&C.refCount++}break;case 24:Fp(b.memoizedState.cache)}if(C=b.child,C!==null)C.return=b,Xi=C;else e:for(b=A;Xi!==null;){C=Xi;var U=C.sibling,q=C.return;if(G9(C),C===b){Xi=null;break e}if(U!==null){U.return=q,Xi=U;break e}Xi=q}}}var Eme={getCacheForType:function(A){var p=Vs(zs),b=p.data.get(A);return b===void 0&&(b=A(),p.data.set(A,b)),b}},Cme=typeof WeakMap=="function"?WeakMap:Map,ha=0,Ra=null,Sn=null,Ln=0,ma=0,Pc=null,Q0=!1,ev=!1,bj=!1,dh=0,ks=0,H0=0,Kp=0,yj=0,Du=0,tv=0,Iy=null,ec=null,wj=!1,Ej=0,c_=1/0,u_=null,V0=null,vo=0,z0=null,rv=null,nv=0,Cj=0,_j=null,rQ=null,Fy=0,Sj=null;function Rc(){if((ha&2)!==0&&Ln!==0)return Ln&-Ln;if(V.T!==null){var A=th;return A!==0?A:Fj()}return xt()}function nQ(){Du===0&&(Du=(Ln&536870912)===0||Un?bs():536870912);var A=Ou.current;return A!==null&&(A.flags|=32),Du}function Lc(A,p,b){(A===Ra&&(ma===2||ma===9)||A.cancelPendingCommit!==null)&&(av(A,0),$0(A,Ln,Du,!1)),Da(A,b),((ha&2)===0||A!==Ra)&&(A===Ra&&((ha&2)===0&&(Kp|=b),ks===4&&$0(A,Ln,Du,!1)),qf(A))}function aQ(A,p,b){if((ha&6)!==0)throw Error(n(327));var C=!b&&(p&124)===0&&(p&A.expiredLanes)===0||Fn(A,p),U=C?Nme(A,p):Bj(A,p,!0),q=C;do{if(U===0){ev&&!C&&$0(A,p,0,!1);break}else{if(b=A.current.alternate,q&&!_me(b)){U=Bj(A,p,!1),q=!1;continue}if(U===2){if(q=p,A.errorRecoveryDisabledLanes&q)var ue=0;else ue=A.pendingLanes&-536870913,ue=ue!==0?ue:ue&536870912?536870912:0;if(ue!==0){p=ue;e:{var ye=A;U=Iy;var Re=ye.current.memoizedState.isDehydrated;if(Re&&(av(ye,ue).flags|=256),ue=Bj(ye,ue,!1),ue!==2){if(bj&&!Re){ye.errorRecoveryDisabledLanes|=q,Kp|=q,U=4;break e}q=ec,ec=U,q!==null&&(ec===null?ec=q:ec.push.apply(ec,q))}U=ue}if(q=!1,U!==2)continue}}if(U===1){av(A,0),$0(A,p,0,!0);break}e:{switch(C=A,q=U,q){case 0:case 1:throw Error(n(345));case 4:if((p&4194048)!==p)break;case 6:$0(C,p,Du,!Q0);break e;case 2:ec=null;break;case 3:case 5:break;default:throw Error(n(329))}if((p&62914560)===p&&(U=Ej+300-Be(),10<U)){if($0(C,p,Du,!Q0),Kr(C,0,!0)!==0)break e;C.timeoutHandle=FQ(sQ.bind(null,C,b,ec,u_,wj,p,Du,Kp,tv,Q0,q,2,-0,0),U);break e}sQ(C,b,ec,u_,wj,p,Du,Kp,tv,Q0,q,0,-0,0)}}break}while(!0);qf(A)}function sQ(A,p,b,C,U,q,ue,ye,Re,lt,kt,Dt,ft,At){if(A.timeoutHandle=-1,Dt=p.subtreeFlags,(Dt&8192||(Dt&16785408)===16785408)&&(Uy={stylesheets:null,count:0,unsuspend:ipe},J9(p),Dt=lpe(),Dt!==null)){A.cancelPendingCommit=Dt(fQ.bind(null,A,p,q,b,C,U,ue,ye,Re,kt,1,ft,At)),$0(A,q,ue,!lt);return}fQ(A,p,q,b,C,U,ue,ye,Re)}function _me(A){for(var p=A;;){var b=p.tag;if((b===0||b===11||b===15)&&p.flags&16384&&(b=p.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var C=0;C<b.length;C++){var U=b[C],q=U.getSnapshot;U=U.value;try{if(!di(q(),U))return!1}catch{return!1}}if(b=p.child,p.subtreeFlags&16384&&b!==null)b.return=p,p=b;else{if(p===A)break;for(;p.sibling===null;){if(p.return===null||p.return===A)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function $0(A,p,b,C){p&=~yj,p&=~Kp,A.suspendedLanes|=p,A.pingedLanes&=~p,C&&(A.warmLanes|=p),C=A.expirationTimes;for(var U=p;0<U;){var q=31-Rt(U),ue=1<<q;C[q]=-1,U&=~ue}b!==0&&gr(A,b,p)}function d_(){return(ha&6)===0?(Oy(0),!1):!0}function Nj(){if(Sn!==null){if(ma===0)var A=Sn.return;else A=Sn,jd=Ai=null,zx(A),Xx=null,Cy=0,A=Sn;for(;A!==null;)L9(A.alternate,A),A=A.return;Sn=null}}function av(A,p){var b=A.timeoutHandle;b!==-1&&(A.timeoutHandle=-1,Vme(b)),b=A.cancelPendingCommit,b!==null&&(A.cancelPendingCommit=null,b()),Nj(),Ra=A,Sn=b=ku(A.current,null),Ln=p,ma=0,Pc=null,Q0=!1,ev=Fn(A,p),bj=!1,tv=Du=yj=Kp=H0=ks=0,ec=Iy=null,wj=!1,(p&8)!==0&&(p|=p&32);var C=A.entangledLanes;if(C!==0)for(A=A.entanglements,C&=p;0<C;){var U=31-Rt(C),q=1<<U;p|=A[U],C&=~q}return dh=p,Wl(),b}function iQ(A,p){Tr=null,V.H=JC,p===pe||p===xe?(p=Ke(),ma=3):p===ge?(p=Ke(),ma=4):ma=p===C9?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,Pc=p,Sn===null&&(ks=1,n_(A,gn(p,A.current)))}function oQ(){var A=V.H;return V.H=JC,A===null?JC:A}function lQ(){var A=V.A;return V.A=Eme,A}function kj(){ks=4,Q0||(Ln&4194048)!==Ln&&Ou.current!==null||(ev=!0),(H0&134217727)===0&&(Kp&134217727)===0||Ra===null||$0(Ra,Ln,Du,!1)}function Bj(A,p,b){var C=ha;ha|=2;var U=oQ(),q=lQ();(Ra!==A||Ln!==p)&&(u_=null,av(A,p)),p=!1;var ue=ks;e:do try{if(ma!==0&&Sn!==null){var ye=Sn,Re=Pc;switch(ma){case 8:Nj(),ue=6;break e;case 3:case 2:case 9:case 6:Ou.current===null&&(p=!0);var lt=ma;if(ma=0,Pc=null,sv(A,ye,Re,lt),b&&ev){ue=0;break e}break;default:lt=ma,ma=0,Pc=null,sv(A,ye,Re,lt)}}Sme(),ue=ks;break}catch(kt){iQ(A,kt)}while(!0);return p&&A.shellSuspendCounter++,jd=Ai=null,ha=C,V.H=U,V.A=q,Sn===null&&(Ra=null,Ln=0,Wl()),ue}function Sme(){for(;Sn!==null;)cQ(Sn)}function Nme(A,p){var b=ha;ha|=2;var C=oQ(),U=lQ();Ra!==A||Ln!==p?(u_=null,c_=Be()+500,av(A,p)):ev=Fn(A,p);e:do try{if(ma!==0&&Sn!==null){p=Sn;var q=Pc;t:switch(ma){case 1:ma=0,Pc=null,sv(A,p,q,1);break;case 2:case 9:if(ke(q)){ma=0,Pc=null,uQ(p);break}p=function(){ma!==2&&ma!==9||Ra!==A||(ma=7),qf(A)},q.then(p,p);break e;case 3:ma=7;break e;case 4:ma=5;break e;case 7:ke(q)?(ma=0,Pc=null,uQ(p)):(ma=0,Pc=null,sv(A,p,q,7));break;case 5:var ue=null;switch(Sn.tag){case 26:ue=Sn.memoizedState;case 5:case 27:var ye=Sn;if(!ue||$Q(ue)){ma=0,Pc=null;var Re=ye.sibling;if(Re!==null)Sn=Re;else{var lt=ye.return;lt!==null?(Sn=lt,f_(lt)):Sn=null}break t}}ma=0,Pc=null,sv(A,p,q,5);break;case 6:ma=0,Pc=null,sv(A,p,q,6);break;case 8:Nj(),ks=6;break e;default:throw Error(n(462))}}kme();break}catch(kt){iQ(A,kt)}while(!0);return jd=Ai=null,V.H=C,V.A=U,ha=b,Sn!==null?0:(Ra=null,Ln=0,Wl(),ks)}function kme(){for(;Sn!==null&&!Se();)cQ(Sn)}function cQ(A){var p=P9(A.alternate,A,dh);A.memoizedProps=A.pendingProps,p===null?f_(A):Sn=p}function uQ(A){var p=A,b=p.alternate;switch(p.tag){case 15:case 0:p=T9(b,p,p.pendingProps,p.type,void 0,Ln);break;case 11:p=T9(b,p,p.pendingProps,p.type.render,p.ref,Ln);break;case 5:zx(p);default:L9(b,p),p=Sn=Bp(p,dh),p=P9(b,p,dh)}A.memoizedProps=A.pendingProps,p===null?f_(A):Sn=p}function sv(A,p,b,C){jd=Ai=null,zx(p),Xx=null,Cy=0;var U=p.return;try{if(gme(A,U,p,b,Ln)){ks=1,n_(A,gn(b,A.current)),Sn=null;return}}catch(q){if(U!==null)throw Sn=U,q;ks=1,n_(A,gn(b,A.current)),Sn=null;return}p.flags&32768?(Un||C===1?A=!0:ev||(Ln&536870912)!==0?A=!1:(Q0=A=!0,(C===2||C===9||C===3||C===6)&&(C=Ou.current,C!==null&&C.tag===13&&(C.flags|=16384))),dQ(p,A)):f_(p)}function f_(A){var p=A;do{if((p.flags&32768)!==0){dQ(p,Q0);return}A=p.return;var b=vme(p.alternate,p,dh);if(b!==null){Sn=b;return}if(p=p.sibling,p!==null){Sn=p;return}Sn=p=A}while(p!==null);ks===0&&(ks=5)}function dQ(A,p){do{var b=bme(A.alternate,A);if(b!==null){b.flags&=32767,Sn=b;return}if(b=A.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!p&&(A=A.sibling,A!==null)){Sn=A;return}Sn=A=b}while(A!==null);ks=6,Sn=null}function fQ(A,p,b,C,U,q,ue,ye,Re){A.cancelPendingCommit=null;do A_();while(vo!==0);if((ha&6)!==0)throw Error(n(327));if(p!==null){if(p===A.current)throw Error(n(177));if(q=p.lanes|p.childLanes,q|=ls,an(A,b,q,ue,ye,Re),A===Ra&&(Sn=Ra=null,Ln=0),rv=p,z0=A,nv=b,Cj=q,_j=U,rQ=C,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,Ime(Oe,function(){return gQ(),null})):(A.callbackNode=null,A.callbackPriority=0),C=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||C){C=V.T,V.T=null,U=G.p,G.p=2,ue=ha,ha|=4;try{yme(A,p,b)}finally{ha=ue,G.p=U,V.T=C}}vo=1,AQ(),hQ(),mQ()}}function AQ(){if(vo===1){vo=0;var A=z0,p=rv,b=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||b){b=V.T,V.T=null;var C=G.p;G.p=2;var U=ha;ha|=4;try{W9(p,A);var q=Qj,ue=mo(A.containerInfo),ye=q.focusedElem,Re=q.selectionRange;if(ue!==ye&&ye&&ye.ownerDocument&&Bf(ye.ownerDocument.documentElement,ye)){if(Re!==null&&ji(ye)){var lt=Re.start,kt=Re.end;if(kt===void 0&&(kt=lt),"selectionStart"in ye)ye.selectionStart=lt,ye.selectionEnd=Math.min(kt,ye.value.length);else{var Dt=ye.ownerDocument||document,ft=Dt&&Dt.defaultView||window;if(ft.getSelection){var At=ft.getSelection(),qr=ye.textContent.length,Pr=Math.min(Re.start,qr),Sa=Re.end===void 0?Pr:Math.min(Re.end,qr);!At.extend&&Pr>Sa&&(ue=Sa,Sa=Pr,Pr=ue);var Xe=Ed(ye,Pr),He=Ed(ye,Sa);if(Xe&&He&&(At.rangeCount!==1||At.anchorNode!==Xe.node||At.anchorOffset!==Xe.offset||At.focusNode!==He.node||At.focusOffset!==He.offset)){var at=Dt.createRange();at.setStart(Xe.node,Xe.offset),At.removeAllRanges(),Pr>Sa?(At.addRange(at),At.extend(He.node,He.offset)):(at.setEnd(He.node,He.offset),At.addRange(at))}}}}for(Dt=[],At=ye;At=At.parentNode;)At.nodeType===1&&Dt.push({element:At,left:At.scrollLeft,top:At.scrollTop});for(typeof ye.focus=="function"&&ye.focus(),ye=0;ye<Dt.length;ye++){var Tt=Dt[ye];Tt.element.scrollLeft=Tt.left,Tt.element.scrollTop=Tt.top}}__=!!Uj,Qj=Uj=null}finally{ha=U,G.p=C,V.T=b}}A.current=p,vo=2}}function hQ(){if(vo===2){vo=0;var A=z0,p=rv,b=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||b){b=V.T,V.T=null;var C=G.p;G.p=2;var U=ha;ha|=4;try{$9(A,p.alternate,p)}finally{ha=U,G.p=C,V.T=b}}vo=3}}function mQ(){if(vo===4||vo===3){vo=0,me();var A=z0,p=rv,b=nv,C=rQ;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?vo=5:(vo=0,rv=z0=null,pQ(A,A.pendingLanes));var U=A.pendingLanes;if(U===0&&(V0=null),Je(b),p=p.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(pt,p,void 0,(p.current.flags&128)===128)}catch{}if(C!==null){p=V.T,U=G.p,G.p=2,V.T=null;try{for(var q=A.onRecoverableError,ue=0;ue<C.length;ue++){var ye=C[ue];q(ye.value,{componentStack:ye.stack})}}finally{V.T=p,G.p=U}}(nv&3)!==0&&A_(),qf(A),U=A.pendingLanes,(b&4194090)!==0&&(U&42)!==0?A===Sj?Fy++:(Fy=0,Sj=A):Fy=0,Oy(0)}}function pQ(A,p){(A.pooledCacheLanes&=p)===0&&(p=A.pooledCache,p!=null&&(A.pooledCache=null,Fp(p)))}function A_(A){return AQ(),hQ(),mQ(),gQ()}function gQ(){if(vo!==5)return!1;var A=z0,p=Cj;Cj=0;var b=Je(nv),C=V.T,U=G.p;try{G.p=32>b?32:b,V.T=null,b=_j,_j=null;var q=z0,ue=nv;if(vo=0,rv=z0=null,nv=0,(ha&6)!==0)throw Error(n(331));var ye=ha;if(ha|=4,eQ(q.current),Y9(q,q.current,ue,b),ha=ye,Oy(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(pt,q)}catch{}return!0}finally{G.p=U,V.T=C,pQ(A,p)}}function xQ(A,p,b){p=gn(b,p),p=aj(A.stateNode,p,2),A=It(A,p,2),A!==null&&(Da(A,2),qf(A))}function Ta(A,p,b){if(A.tag===3)xQ(A,A,b);else for(;p!==null;){if(p.tag===3){xQ(p,A,b);break}else if(p.tag===1){var C=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(V0===null||!V0.has(C))){A=gn(b,A),b=w9(2),C=It(p,b,2),C!==null&&(E9(b,C,p,A),Da(C,2),qf(C));break}}p=p.return}}function Tj(A,p,b){var C=A.pingCache;if(C===null){C=A.pingCache=new Cme;var U=new Set;C.set(p,U)}else U=C.get(p),U===void 0&&(U=new Set,C.set(p,U));U.has(b)||(bj=!0,U.add(b),A=Bme.bind(null,A,p,b),p.then(A,A))}function Bme(A,p,b){var C=A.pingCache;C!==null&&C.delete(p),A.pingedLanes|=A.suspendedLanes&b,A.warmLanes&=~b,Ra===A&&(Ln&b)===b&&(ks===4||ks===3&&(Ln&62914560)===Ln&&300>Be()-Ej?(ha&2)===0&&av(A,0):yj|=b,tv===Ln&&(tv=0)),qf(A)}function vQ(A,p){p===0&&(p=pn()),A=_d(A,p),A!==null&&(Da(A,p),qf(A))}function Tme(A){var p=A.memoizedState,b=0;p!==null&&(b=p.retryLane),vQ(A,b)}function jme(A,p){var b=0;switch(A.tag){case 13:var C=A.stateNode,U=A.memoizedState;U!==null&&(b=U.retryLane);break;case 19:C=A.stateNode;break;case 22:C=A.stateNode._retryCache;break;default:throw Error(n(314))}C!==null&&C.delete(p),vQ(A,b)}function Ime(A,p){return _e(A,p)}var h_=null,iv=null,jj=!1,m_=!1,Ij=!1,qp=0;function qf(A){A!==iv&&A.next===null&&(iv===null?h_=iv=A:iv=iv.next=A),m_=!0,jj||(jj=!0,Ome())}function Oy(A,p){if(!Ij&&m_){Ij=!0;do for(var b=!1,C=h_;C!==null;){if(A!==0){var U=C.pendingLanes;if(U===0)var q=0;else{var ue=C.suspendedLanes,ye=C.pingedLanes;q=(1<<31-Rt(42|A)+1)-1,q&=U&~(ue&~ye),q=q&201326741?q&201326741|1:q?q|2:0}q!==0&&(b=!0,EQ(C,q))}else q=Ln,q=Kr(C,C===Ra?q:0,C.cancelPendingCommit!==null||C.timeoutHandle!==-1),(q&3)===0||Fn(C,q)||(b=!0,EQ(C,q));C=C.next}while(b);Ij=!1}}function Fme(){bQ()}function bQ(){m_=jj=!1;var A=0;qp!==0&&(Hme()&&(A=qp),qp=0);for(var p=Be(),b=null,C=h_;C!==null;){var U=C.next,q=yQ(C,p);q===0?(C.next=null,b===null?h_=U:b.next=U,U===null&&(iv=b)):(b=C,(A!==0||(q&3)!==0)&&(m_=!0)),C=U}Oy(A)}function yQ(A,p){for(var b=A.suspendedLanes,C=A.pingedLanes,U=A.expirationTimes,q=A.pendingLanes&-62914561;0<q;){var ue=31-Rt(q),ye=1<<ue,Re=U[ue];Re===-1?((ye&b)===0||(ye&C)!==0)&&(U[ue]=Rr(ye,p)):Re<=p&&(A.expiredLanes|=ye),q&=~ye}if(p=Ra,b=Ln,b=Kr(A,A===p?b:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),C=A.callbackNode,b===0||A===p&&(ma===2||ma===9)||A.cancelPendingCommit!==null)return C!==null&&C!==null&&Ie(C),A.callbackNode=null,A.callbackPriority=0;if((b&3)===0||Fn(A,b)){if(p=b&-b,p===A.callbackPriority)return p;switch(C!==null&&Ie(C),Je(b)){case 2:case 8:b=be;break;case 32:b=Oe;break;case 268435456:b=qe;break;default:b=Oe}return C=wQ.bind(null,A),b=_e(b,C),A.callbackPriority=p,A.callbackNode=b,p}return C!==null&&C!==null&&Ie(C),A.callbackPriority=2,A.callbackNode=null,2}function wQ(A,p){if(vo!==0&&vo!==5)return A.callbackNode=null,A.callbackPriority=0,null;var b=A.callbackNode;if(A_()&&A.callbackNode!==b)return null;var C=Ln;return C=Kr(A,A===Ra?C:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),C===0?null:(aQ(A,C,p),yQ(A,Be()),A.callbackNode!=null&&A.callbackNode===b?wQ.bind(null,A):null)}function EQ(A,p){if(A_())return null;aQ(A,p,!0)}function Ome(){zme(function(){(ha&6)!==0?_e(We,Fme):bQ()})}function Fj(){return qp===0&&(qp=bs()),qp}function CQ(A){return A==null||typeof A=="symbol"||typeof A=="boolean"?null:typeof A=="function"?A:Cc(""+A)}function _Q(A,p){var b=p.ownerDocument.createElement("input");return b.name=p.name,b.value=p.value,A.id&&b.setAttribute("form",A.id),p.parentNode.insertBefore(b,p),A=new FormData(A),b.parentNode.removeChild(b),A}function Dme(A,p,b,C,U){if(p==="submit"&&b&&b.stateNode===U){var q=CQ((U[vr]||null).action),ue=C.submitter;ue&&(p=(p=ue[vr]||null)?CQ(p.formAction):ue.getAttribute("formAction"),p!==null&&(q=p,ue=null));var ye=new vu("action","action",null,C,U);A.push({event:ye,listeners:[{instance:null,listener:function(){if(C.defaultPrevented){if(qp!==0){var Re=ue?_Q(U,ue):new FormData(U);Fu(b,{pending:!0,data:Re,method:U.method,action:q},null,Re)}}else typeof q=="function"&&(ye.preventDefault(),Re=ue?_Q(U,ue):new FormData(U),Fu(b,{pending:!0,data:Re,method:U.method,action:q},q,Re))},currentTarget:U}]})}}for(var Oj=0;Oj<WA.length;Oj++){var Dj=WA[Oj],Pme=Dj.toLowerCase(),Rme=Dj[0].toUpperCase()+Dj.slice(1);Ja(Pme,"on"+Rme)}Ja(_0,"onAnimationEnd"),Ja(jf,"onAnimationIteration"),Ja(If,"onAnimationStart"),Ja("dblclick","onDoubleClick"),Ja("focusin","onFocus"),Ja("focusout","onBlur"),Ja(Ff,"onTransitionRun"),Ja(qA,"onTransitionStart"),Ja(S0,"onTransitionCancel"),Ja(Of,"onTransitionEnd"),zt("onMouseEnter",["mouseout","mouseover"]),zt("onMouseLeave",["mouseout","mouseover"]),zt("onPointerEnter",["pointerout","pointerover"]),zt("onPointerLeave",["pointerout","pointerover"]),Ot("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ot("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ot("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ot("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ot("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ot("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lme=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dy));function SQ(A,p){p=(p&4)!==0;for(var b=0;b<A.length;b++){var C=A[b],U=C.event;C=C.listeners;e:{var q=void 0;if(p)for(var ue=C.length-1;0<=ue;ue--){var ye=C[ue],Re=ye.instance,lt=ye.currentTarget;if(ye=ye.listener,Re!==q&&U.isPropagationStopped())break e;q=ye,U.currentTarget=lt;try{q(U)}catch(kt){r_(kt)}U.currentTarget=null,q=Re}else for(ue=0;ue<C.length;ue++){if(ye=C[ue],Re=ye.instance,lt=ye.currentTarget,ye=ye.listener,Re!==q&&U.isPropagationStopped())break e;q=ye,U.currentTarget=lt;try{q(U)}catch(kt){r_(kt)}U.currentTarget=null,q=Re}}}}function Nn(A,p){var b=p[tn];b===void 0&&(b=p[tn]=new Set);var C=A+"__bubble";b.has(C)||(NQ(p,A,2,!1),b.add(C))}function Pj(A,p,b){var C=0;p&&(C|=4),NQ(b,A,C,p)}var p_="_reactListening"+Math.random().toString(36).slice(2);function Rj(A){if(!A[p_]){A[p_]=!0,nt.forEach(function(b){b!=="selectionchange"&&(Lme.has(b)||Pj(b,!1,A),Pj(b,!0,A))});var p=A.nodeType===9?A:A.ownerDocument;p===null||p[p_]||(p[p_]=!0,Pj("selectionchange",!1,p))}}function NQ(A,p,b,C){switch(YQ(p)){case 2:var U=dpe;break;case 8:U=fpe;break;default:U=Yj}b=U.bind(null,p,b,A),U=void 0,!ho||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(U=!0),C?U!==void 0?A.addEventListener(p,b,{capture:!0,passive:U}):A.addEventListener(p,b,!0):U!==void 0?A.addEventListener(p,b,{passive:U}):A.addEventListener(p,b,!1)}function Lj(A,p,b,C,U){var q=C;if((p&1)===0&&(p&2)===0&&C!==null)e:for(;;){if(C===null)return;var ue=C.tag;if(ue===3||ue===4){var ye=C.stateNode.containerInfo;if(ye===U)break;if(ue===4)for(ue=C.return;ue!==null;){var Re=ue.tag;if((Re===3||Re===4)&&ue.stateNode.containerInfo===U)return;ue=ue.return}for(;ye!==null;){if(ue=Ne(ye),ue===null)return;if(Re=ue.tag,Re===5||Re===6||Re===26||Re===27){C=q=ue;continue e}ye=ye.parentNode}}C=C.return}b0(function(){var lt=q,kt=fa(b),Dt=[];e:{var ft=Cd.get(A);if(ft!==void 0){var At=vu,qr=A;switch(A){case"keypress":if(Uo(b)===0)break e;case"keydown":case"keyup":At=kc;break;case"focusin":qr="focus",At=yu;break;case"focusout":qr="blur",At=yu;break;case"beforeblur":case"afterblur":At=yu;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":At=Cs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":At=bu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":At=_f;break;case _0:case jf:case If:At=wf;break;case Of:At=fe;break;case"scroll":case"scrollend":At=HA;break;case"wheel":At=Me;break;case"copy":case"cut":case"paste":At=Ef;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":At=wd;break;case"toggle":case"beforetoggle":At=vt}var Pr=(p&4)!==0,Sa=!Pr&&(A==="scroll"||A==="scrollend"),Xe=Pr?ft!==null?ft+"Capture":null:ft;Pr=[];for(var He=lt,at;He!==null;){var Tt=He;if(at=Tt.stateNode,Tt=Tt.tag,Tt!==5&&Tt!==26&&Tt!==27||at===null||Xe===null||(Tt=zi(He,Xe),Tt!=null&&Pr.push(Py(He,Tt,at))),Sa)break;He=He.return}0<Pr.length&&(ft=new At(ft,qr,null,b,kt),Dt.push({event:ft,listeners:Pr}))}}if((p&7)===0){e:{if(ft=A==="mouseover"||A==="pointerover",At=A==="mouseout"||A==="pointerout",ft&&b!==Ql&&(qr=b.relatedTarget||b.fromElement)&&(Ne(qr)||qr[Yr]))break e;if((At||ft)&&(ft=kt.window===kt?kt:(ft=kt.ownerDocument)?ft.defaultView||ft.parentWindow:window,At?(qr=b.relatedTarget||b.toElement,At=lt,qr=qr?Ne(qr):null,qr!==null&&(Sa=s(qr),Pr=qr.tag,qr!==Sa||Pr!==5&&Pr!==27&&Pr!==6)&&(qr=null)):(At=null,qr=lt),At!==qr)){if(Pr=Cs,Tt="onMouseLeave",Xe="onMouseEnter",He="mouse",(A==="pointerout"||A==="pointerover")&&(Pr=wd,Tt="onPointerLeave",Xe="onPointerEnter",He="pointer"),Sa=At==null?ft:Ye(At),at=qr==null?ft:Ye(qr),ft=new Pr(Tt,He+"leave",At,b,kt),ft.target=Sa,ft.relatedTarget=at,Tt=null,Ne(kt)===lt&&(Pr=new Pr(Xe,He+"enter",qr,b,kt),Pr.target=at,Pr.relatedTarget=Sa,Tt=Pr),Sa=Tt,At&&qr)t:{for(Pr=At,Xe=qr,He=0,at=Pr;at;at=ov(at))He++;for(at=0,Tt=Xe;Tt;Tt=ov(Tt))at++;for(;0<He-at;)Pr=ov(Pr),He--;for(;0<at-He;)Xe=ov(Xe),at--;for(;He--;){if(Pr===Xe||Xe!==null&&Pr===Xe.alternate)break t;Pr=ov(Pr),Xe=ov(Xe)}Pr=null}else Pr=null;At!==null&&kQ(Dt,ft,At,Pr,!1),qr!==null&&Sa!==null&&kQ(Dt,Sa,qr,Pr,!0)}}e:{if(ft=lt?Ye(lt):window,At=ft.nodeName&&ft.nodeName.toLowerCase(),At==="select"||At==="input"&&ft.type==="file")var hr=E0;else if(aa(ft))if(zA)hr=Px;else{hr=ly;var wn=Ho}else At=ft.nodeName,!At||At.toLowerCase()!=="input"||ft.type!=="checkbox"&&ft.type!=="radio"?lt&&UA(lt.elementType)&&(hr=E0):hr=Np;if(hr&&(hr=hr(A,lt))){Kl(Dt,hr,b,kt);break e}wn&&wn(A,ft,lt),A==="focusout"&&lt&&ft.type==="number"&&lt.memoizedProps.value!=null&&pu(ft,"number",ft.value)}switch(wn=lt?Ye(lt):window,A){case"focusin":(aa(wn)||wn.contentEditable==="true")&&(Vo=wn,Bc=lt,Su=null);break;case"focusout":Su=Bc=Vo=null;break;case"mousedown":Tc=!0;break;case"contextmenu":case"mouseup":case"dragend":Tc=!1,Ya(Dt,b,kt);break;case"selectionchange":if(Tf)break;case"keydown":case"keyup":Ya(Dt,b,kt)}var Er;if(er)e:{switch(A){case"compositionstart":var Lr="onCompositionStart";break e;case"compositionend":Lr="onCompositionEnd";break e;case"compositionupdate":Lr="onCompositionUpdate";break e}Lr=void 0}else Dr?ot(A,b)&&(Lr="onCompositionEnd"):A==="keydown"&&b.keyCode===229&&(Lr="onCompositionStart");Lr&&(oe&&b.locale!=="ko"&&(Dr||Lr!=="onCompositionStart"?Lr==="onCompositionEnd"&&Dr&&(Er=QA()):(Mo=kt,xu="value"in Mo?Mo.value:Mo.textContent,Dr=!0)),wn=g_(lt,Lr),0<wn.length&&(Lr=new vd(Lr,A,null,b,kt),Dt.push({event:Lr,listeners:wn}),Er?Lr.data=Er:(Er=Qt(b),Er!==null&&(Lr.data=Er)))),(Er=re?yn(A,b):Jr(A,b))&&(Lr=g_(lt,"onBeforeInput"),0<Lr.length&&(wn=new vd("onBeforeInput","beforeinput",null,b,kt),Dt.push({event:wn,listeners:Lr}),wn.data=Er)),Dme(Dt,A,lt,b,kt)}SQ(Dt,p)})}function Py(A,p,b){return{instance:A,listener:p,currentTarget:b}}function g_(A,p){for(var b=p+"Capture",C=[];A!==null;){var U=A,q=U.stateNode;if(U=U.tag,U!==5&&U!==26&&U!==27||q===null||(U=zi(A,b),U!=null&&C.unshift(Py(A,U,q)),U=zi(A,p),U!=null&&C.push(Py(A,U,q))),A.tag===3)return C;A=A.return}return[]}function ov(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5&&A.tag!==27);return A||null}function kQ(A,p,b,C,U){for(var q=p._reactName,ue=[];b!==null&&b!==C;){var ye=b,Re=ye.alternate,lt=ye.stateNode;if(ye=ye.tag,Re!==null&&Re===C)break;ye!==5&&ye!==26&&ye!==27||lt===null||(Re=lt,U?(lt=zi(b,q),lt!=null&&ue.unshift(Py(b,lt,Re))):U||(lt=zi(b,q),lt!=null&&ue.push(Py(b,lt,Re)))),b=b.return}ue.length!==0&&A.push({event:p,listeners:ue})}var Mme=/\r\n?/g,Ume=/\u0000|\uFFFD/g;function BQ(A){return(typeof A=="string"?A:""+A).replace(Mme,`
`).replace(Ume,"")}function TQ(A,p){return p=BQ(p),BQ(A)===p}function x_(){}function _a(A,p,b,C,U,q){switch(b){case"children":typeof C=="string"?p==="body"||p==="textarea"&&C===""||Ro(A,C):(typeof C=="number"||typeof C=="bigint")&&p!=="body"&&Ro(A,""+C);break;case"className":cn(A,"class",C);break;case"tabIndex":cn(A,"tabindex",C);break;case"dir":case"role":case"viewBox":case"width":case"height":cn(A,b,C);break;case"style":MA(A,C,q);break;case"data":if(p!=="object"){cn(A,"data",C);break}case"src":case"href":if(C===""&&(p!=="a"||b!=="href")){A.removeAttribute(b);break}if(C==null||typeof C=="function"||typeof C=="symbol"||typeof C=="boolean"){A.removeAttribute(b);break}C=Cc(""+C),A.setAttribute(b,C);break;case"action":case"formAction":if(typeof C=="function"){A.setAttribute(b,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof q=="function"&&(b==="formAction"?(p!=="input"&&_a(A,p,"name",U.name,U,null),_a(A,p,"formEncType",U.formEncType,U,null),_a(A,p,"formMethod",U.formMethod,U,null),_a(A,p,"formTarget",U.formTarget,U,null)):(_a(A,p,"encType",U.encType,U,null),_a(A,p,"method",U.method,U,null),_a(A,p,"target",U.target,U,null)));if(C==null||typeof C=="symbol"||typeof C=="boolean"){A.removeAttribute(b);break}C=Cc(""+C),A.setAttribute(b,C);break;case"onClick":C!=null&&(A.onclick=x_);break;case"onScroll":C!=null&&Nn("scroll",A);break;case"onScrollEnd":C!=null&&Nn("scrollend",A);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(n(61));if(b=C.__html,b!=null){if(U.children!=null)throw Error(n(60));A.innerHTML=b}}break;case"multiple":A.multiple=C&&typeof C!="function"&&typeof C!="symbol";break;case"muted":A.muted=C&&typeof C!="function"&&typeof C!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(C==null||typeof C=="function"||typeof C=="boolean"||typeof C=="symbol"){A.removeAttribute("xlink:href");break}b=Cc(""+C),A.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":C!=null&&typeof C!="function"&&typeof C!="symbol"?A.setAttribute(b,""+C):A.removeAttribute(b);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":C&&typeof C!="function"&&typeof C!="symbol"?A.setAttribute(b,""):A.removeAttribute(b);break;case"capture":case"download":C===!0?A.setAttribute(b,""):C!==!1&&C!=null&&typeof C!="function"&&typeof C!="symbol"?A.setAttribute(b,C):A.removeAttribute(b);break;case"cols":case"rows":case"size":case"span":C!=null&&typeof C!="function"&&typeof C!="symbol"&&!isNaN(C)&&1<=C?A.setAttribute(b,C):A.removeAttribute(b);break;case"rowSpan":case"start":C==null||typeof C=="function"||typeof C=="symbol"||isNaN(C)?A.removeAttribute(b):A.setAttribute(b,C);break;case"popover":Nn("beforetoggle",A),Nn("toggle",A),ln(A,"popover",C);break;case"xlinkActuate":hn(A,"http://www.w3.org/1999/xlink","xlink:actuate",C);break;case"xlinkArcrole":hn(A,"http://www.w3.org/1999/xlink","xlink:arcrole",C);break;case"xlinkRole":hn(A,"http://www.w3.org/1999/xlink","xlink:role",C);break;case"xlinkShow":hn(A,"http://www.w3.org/1999/xlink","xlink:show",C);break;case"xlinkTitle":hn(A,"http://www.w3.org/1999/xlink","xlink:title",C);break;case"xlinkType":hn(A,"http://www.w3.org/1999/xlink","xlink:type",C);break;case"xmlBase":hn(A,"http://www.w3.org/XML/1998/namespace","xml:base",C);break;case"xmlLang":hn(A,"http://www.w3.org/XML/1998/namespace","xml:lang",C);break;case"xmlSpace":hn(A,"http://www.w3.org/XML/1998/namespace","xml:space",C);break;case"is":ln(A,"is",C);break;case"innerText":case"textContent":break;default:(!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(b=Ec.get(b)||b,ln(A,b,C))}}function Mj(A,p,b,C,U,q){switch(b){case"style":MA(A,C,q);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(n(61));if(b=C.__html,b!=null){if(U.children!=null)throw Error(n(60));A.innerHTML=b}}break;case"children":typeof C=="string"?Ro(A,C):(typeof C=="number"||typeof C=="bigint")&&Ro(A,""+C);break;case"onScroll":C!=null&&Nn("scroll",A);break;case"onScrollEnd":C!=null&&Nn("scrollend",A);break;case"onClick":C!=null&&(A.onclick=x_);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!it.hasOwnProperty(b))e:{if(b[0]==="o"&&b[1]==="n"&&(U=b.endsWith("Capture"),p=b.slice(2,U?b.length-7:void 0),q=A[vr]||null,q=q!=null?q[b]:null,typeof q=="function"&&A.removeEventListener(p,q,U),typeof C=="function")){typeof q!="function"&&q!==null&&(b in A?A[b]=null:A.hasAttribute(b)&&A.removeAttribute(b)),A.addEventListener(p,C,U);break e}b in A?A[b]=C:C===!0?A.setAttribute(b,""):ln(A,b,C)}}}function bo(A,p,b){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nn("error",A),Nn("load",A);var C=!1,U=!1,q;for(q in b)if(b.hasOwnProperty(q)){var ue=b[q];if(ue!=null)switch(q){case"src":C=!0;break;case"srcSet":U=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,p));default:_a(A,p,q,ue,b,null)}}U&&_a(A,p,"srcSet",b.srcSet,b,null),C&&_a(A,p,"src",b.src,b,null);return;case"input":Nn("invalid",A);var ye=q=ue=U=null,Re=null,lt=null;for(C in b)if(b.hasOwnProperty(C)){var kt=b[C];if(kt!=null)switch(C){case"name":U=kt;break;case"type":ue=kt;break;case"checked":Re=kt;break;case"defaultChecked":lt=kt;break;case"value":q=kt;break;case"defaultValue":ye=kt;break;case"children":case"dangerouslySetInnerHTML":if(kt!=null)throw Error(n(137,p));break;default:_a(A,p,C,kt,b,null)}}mu(A,q,ye,Re,lt,ue,U,!1),hu(A);return;case"select":Nn("invalid",A),C=ue=q=null;for(U in b)if(b.hasOwnProperty(U)&&(ye=b[U],ye!=null))switch(U){case"value":q=ye;break;case"defaultValue":ue=ye;break;case"multiple":C=ye;default:_a(A,p,U,ye,b,null)}p=q,b=ue,A.multiple=!!C,p!=null?Ul(A,!!C,p,!1):b!=null&&Ul(A,!!C,b,!0);return;case"textarea":Nn("invalid",A),q=U=C=null;for(ue in b)if(b.hasOwnProperty(ue)&&(ye=b[ue],ye!=null))switch(ue){case"value":C=ye;break;case"defaultValue":U=ye;break;case"children":q=ye;break;case"dangerouslySetInnerHTML":if(ye!=null)throw Error(n(91));break;default:_a(A,p,ue,ye,b,null)}gu(A,C,U,q),hu(A);return;case"option":for(Re in b)if(b.hasOwnProperty(Re)&&(C=b[Re],C!=null))switch(Re){case"selected":A.selected=C&&typeof C!="function"&&typeof C!="symbol";break;default:_a(A,p,Re,C,b,null)}return;case"dialog":Nn("beforetoggle",A),Nn("toggle",A),Nn("cancel",A),Nn("close",A);break;case"iframe":case"object":Nn("load",A);break;case"video":case"audio":for(C=0;C<Dy.length;C++)Nn(Dy[C],A);break;case"image":Nn("error",A),Nn("load",A);break;case"details":Nn("toggle",A);break;case"embed":case"source":case"link":Nn("error",A),Nn("load",A);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(lt in b)if(b.hasOwnProperty(lt)&&(C=b[lt],C!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,p));default:_a(A,p,lt,C,b,null)}return;default:if(UA(p)){for(kt in b)b.hasOwnProperty(kt)&&(C=b[kt],C!==void 0&&Mj(A,p,kt,C,b,void 0));return}}for(ye in b)b.hasOwnProperty(ye)&&(C=b[ye],C!=null&&_a(A,p,ye,C,b,null))}function Qme(A,p,b,C){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var U=null,q=null,ue=null,ye=null,Re=null,lt=null,kt=null;for(At in b){var Dt=b[At];if(b.hasOwnProperty(At)&&Dt!=null)switch(At){case"checked":break;case"value":break;case"defaultValue":Re=Dt;default:C.hasOwnProperty(At)||_a(A,p,At,null,C,Dt)}}for(var ft in C){var At=C[ft];if(Dt=b[ft],C.hasOwnProperty(ft)&&(At!=null||Dt!=null))switch(ft){case"type":q=At;break;case"name":U=At;break;case"checked":lt=At;break;case"defaultChecked":kt=At;break;case"value":ue=At;break;case"defaultValue":ye=At;break;case"children":case"dangerouslySetInnerHTML":if(At!=null)throw Error(n(137,p));break;default:At!==Dt&&_a(A,p,ft,At,C,Dt)}}Bi(A,ue,ye,Re,lt,kt,q,U);return;case"select":At=ue=ye=ft=null;for(q in b)if(Re=b[q],b.hasOwnProperty(q)&&Re!=null)switch(q){case"value":break;case"multiple":At=Re;default:C.hasOwnProperty(q)||_a(A,p,q,null,C,Re)}for(U in C)if(q=C[U],Re=b[U],C.hasOwnProperty(U)&&(q!=null||Re!=null))switch(U){case"value":ft=q;break;case"defaultValue":ye=q;break;case"multiple":ue=q;default:q!==Re&&_a(A,p,U,q,C,Re)}p=ye,b=ue,C=At,ft!=null?Ul(A,!!b,ft,!1):!!C!=!!b&&(p!=null?Ul(A,!!b,p,!0):Ul(A,!!b,b?[]:"",!1));return;case"textarea":At=ft=null;for(ye in b)if(U=b[ye],b.hasOwnProperty(ye)&&U!=null&&!C.hasOwnProperty(ye))switch(ye){case"value":break;case"children":break;default:_a(A,p,ye,null,C,U)}for(ue in C)if(U=C[ue],q=b[ue],C.hasOwnProperty(ue)&&(U!=null||q!=null))switch(ue){case"value":ft=U;break;case"defaultValue":At=U;break;case"children":break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(n(91));break;default:U!==q&&_a(A,p,ue,U,C,q)}zn(A,ft,At);return;case"option":for(var qr in b)if(ft=b[qr],b.hasOwnProperty(qr)&&ft!=null&&!C.hasOwnProperty(qr))switch(qr){case"selected":A.selected=!1;break;default:_a(A,p,qr,null,C,ft)}for(Re in C)if(ft=C[Re],At=b[Re],C.hasOwnProperty(Re)&&ft!==At&&(ft!=null||At!=null))switch(Re){case"selected":A.selected=ft&&typeof ft!="function"&&typeof ft!="symbol";break;default:_a(A,p,Re,ft,C,At)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pr in b)ft=b[Pr],b.hasOwnProperty(Pr)&&ft!=null&&!C.hasOwnProperty(Pr)&&_a(A,p,Pr,null,C,ft);for(lt in C)if(ft=C[lt],At=b[lt],C.hasOwnProperty(lt)&&ft!==At&&(ft!=null||At!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(n(137,p));break;default:_a(A,p,lt,ft,C,At)}return;default:if(UA(p)){for(var Sa in b)ft=b[Sa],b.hasOwnProperty(Sa)&&ft!==void 0&&!C.hasOwnProperty(Sa)&&Mj(A,p,Sa,void 0,C,ft);for(kt in C)ft=C[kt],At=b[kt],!C.hasOwnProperty(kt)||ft===At||ft===void 0&&At===void 0||Mj(A,p,kt,ft,C,At);return}}for(var Xe in b)ft=b[Xe],b.hasOwnProperty(Xe)&&ft!=null&&!C.hasOwnProperty(Xe)&&_a(A,p,Xe,null,C,ft);for(Dt in C)ft=C[Dt],At=b[Dt],!C.hasOwnProperty(Dt)||ft===At||ft==null&&At==null||_a(A,p,Dt,ft,C,At)}var Uj=null,Qj=null;function v_(A){return A.nodeType===9?A:A.ownerDocument}function jQ(A){switch(A){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function IQ(A,p){if(A===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return A===1&&p==="foreignObject"?0:A}function Hj(A,p){return A==="textarea"||A==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var Vj=null;function Hme(){var A=window.event;return A&&A.type==="popstate"?A===Vj?!1:(Vj=A,!0):(Vj=null,!1)}var FQ=typeof setTimeout=="function"?setTimeout:void 0,Vme=typeof clearTimeout=="function"?clearTimeout:void 0,OQ=typeof Promise=="function"?Promise:void 0,zme=typeof queueMicrotask=="function"?queueMicrotask:typeof OQ<"u"?function(A){return OQ.resolve(null).then(A).catch($me)}:FQ;function $me(A){setTimeout(function(){throw A})}function G0(A){return A==="head"}function DQ(A,p){var b=p,C=0,U=0;do{var q=b.nextSibling;if(A.removeChild(b),q&&q.nodeType===8)if(b=q.data,b==="/$"){if(0<C&&8>C){b=C;var ue=A.ownerDocument;if(b&1&&Ry(ue.documentElement),b&2&&Ry(ue.body),b&4)for(b=ue.head,Ry(b),ue=b.firstChild;ue;){var ye=ue.nextSibling,Re=ue.nodeName;ue[Ce]||Re==="SCRIPT"||Re==="STYLE"||Re==="LINK"&&ue.rel.toLowerCase()==="stylesheet"||b.removeChild(ue),ue=ye}}if(U===0){A.removeChild(q),$y(p);return}U--}else b==="$"||b==="$?"||b==="$!"?U++:C=b.charCodeAt(0)-48;else C=0;b=q}while(b);$y(p)}function zj(A){var p=A.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var b=p;switch(p=p.nextSibling,b.nodeName){case"HTML":case"HEAD":case"BODY":zj(b),we(b);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(b.rel.toLowerCase()==="stylesheet")continue}A.removeChild(b)}}function Gme(A,p,b,C){for(;A.nodeType===1;){var U=b;if(A.nodeName.toLowerCase()!==p.toLowerCase()){if(!C&&(A.nodeName!=="INPUT"||A.type!=="hidden"))break}else if(C){if(!A[Ce])switch(p){case"meta":if(!A.hasAttribute("itemprop"))break;return A;case"link":if(q=A.getAttribute("rel"),q==="stylesheet"&&A.hasAttribute("data-precedence"))break;if(q!==U.rel||A.getAttribute("href")!==(U.href==null||U.href===""?null:U.href)||A.getAttribute("crossorigin")!==(U.crossOrigin==null?null:U.crossOrigin)||A.getAttribute("title")!==(U.title==null?null:U.title))break;return A;case"style":if(A.hasAttribute("data-precedence"))break;return A;case"script":if(q=A.getAttribute("src"),(q!==(U.src==null?null:U.src)||A.getAttribute("type")!==(U.type==null?null:U.type)||A.getAttribute("crossorigin")!==(U.crossOrigin==null?null:U.crossOrigin))&&q&&A.hasAttribute("async")&&!A.hasAttribute("itemprop"))break;return A;default:return A}}else if(p==="input"&&A.type==="hidden"){var q=U.name==null?null:""+U.name;if(U.type==="hidden"&&A.getAttribute("name")===q)return A}else return A;if(A=Ld(A.nextSibling),A===null)break}return null}function Kme(A,p,b){if(p==="")return null;for(;A.nodeType!==3;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!b||(A=Ld(A.nextSibling),A===null))return null;return A}function $j(A){return A.data==="$!"||A.data==="$?"&&A.ownerDocument.readyState==="complete"}function qme(A,p){var b=A.ownerDocument;if(A.data!=="$?"||b.readyState==="complete")p();else{var C=function(){p(),b.removeEventListener("DOMContentLoaded",C)};b.addEventListener("DOMContentLoaded",C),A._reactRetry=C}}function Ld(A){for(;A!=null;A=A.nextSibling){var p=A.nodeType;if(p===1||p===3)break;if(p===8){if(p=A.data,p==="$"||p==="$!"||p==="$?"||p==="F!"||p==="F")break;if(p==="/$")return null}}return A}var Gj=null;function PQ(A){A=A.previousSibling;for(var p=0;A;){if(A.nodeType===8){var b=A.data;if(b==="$"||b==="$!"||b==="$?"){if(p===0)return A;p--}else b==="/$"&&p++}A=A.previousSibling}return null}function RQ(A,p,b){switch(p=v_(b),A){case"html":if(A=p.documentElement,!A)throw Error(n(452));return A;case"head":if(A=p.head,!A)throw Error(n(453));return A;case"body":if(A=p.body,!A)throw Error(n(454));return A;default:throw Error(n(451))}}function Ry(A){for(var p=A.attributes;p.length;)A.removeAttributeNode(p[0]);we(A)}var Pu=new Map,LQ=new Set;function b_(A){return typeof A.getRootNode=="function"?A.getRootNode():A.nodeType===9?A:A.ownerDocument}var fh=G.d;G.d={f:Wme,r:Xme,D:Yme,C:Jme,L:Zme,m:epe,X:rpe,S:tpe,M:npe};function Wme(){var A=fh.f(),p=d_();return A||p}function Xme(A){var p=je(A);p!==null&&p.tag===5&&p.type==="form"?Vp(p):fh.r(A)}var lv=typeof document>"u"?null:document;function MQ(A,p,b){var C=lv;if(C&&typeof p=="string"&&p){var U=On(p);U='link[rel="'+A+'"][href="'+U+'"]',typeof b=="string"&&(U+='[crossorigin="'+b+'"]'),LQ.has(U)||(LQ.add(U),A={rel:A,crossOrigin:b,href:p},C.querySelector(U)===null&&(p=C.createElement("link"),bo(p,"link",A),$e(p),C.head.appendChild(p)))}}function Yme(A){fh.D(A),MQ("dns-prefetch",A,null)}function Jme(A,p){fh.C(A,p),MQ("preconnect",A,p)}function Zme(A,p,b){fh.L(A,p,b);var C=lv;if(C&&A&&p){var U='link[rel="preload"][as="'+On(p)+'"]';p==="image"&&b&&b.imageSrcSet?(U+='[imagesrcset="'+On(b.imageSrcSet)+'"]',typeof b.imageSizes=="string"&&(U+='[imagesizes="'+On(b.imageSizes)+'"]')):U+='[href="'+On(A)+'"]';var q=U;switch(p){case"style":q=cv(A);break;case"script":q=uv(A)}Pu.has(q)||(A=d({rel:"preload",href:p==="image"&&b&&b.imageSrcSet?void 0:A,as:p},b),Pu.set(q,A),C.querySelector(U)!==null||p==="style"&&C.querySelector(Ly(q))||p==="script"&&C.querySelector(My(q))||(p=C.createElement("link"),bo(p,"link",A),$e(p),C.head.appendChild(p)))}}function epe(A,p){fh.m(A,p);var b=lv;if(b&&A){var C=p&&typeof p.as=="string"?p.as:"script",U='link[rel="modulepreload"][as="'+On(C)+'"][href="'+On(A)+'"]',q=U;switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":q=uv(A)}if(!Pu.has(q)&&(A=d({rel:"modulepreload",href:A},p),Pu.set(q,A),b.querySelector(U)===null)){switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(b.querySelector(My(q)))return}C=b.createElement("link"),bo(C,"link",A),$e(C),b.head.appendChild(C)}}}function tpe(A,p,b){fh.S(A,p,b);var C=lv;if(C&&A){var U=dt(C).hoistableStyles,q=cv(A);p=p||"default";var ue=U.get(q);if(!ue){var ye={loading:0,preload:null};if(ue=C.querySelector(Ly(q)))ye.loading=5;else{A=d({rel:"stylesheet",href:A,"data-precedence":p},b),(b=Pu.get(q))&&Kj(A,b);var Re=ue=C.createElement("link");$e(Re),bo(Re,"link",A),Re._p=new Promise(function(lt,kt){Re.onload=lt,Re.onerror=kt}),Re.addEventListener("load",function(){ye.loading|=1}),Re.addEventListener("error",function(){ye.loading|=2}),ye.loading|=4,y_(ue,p,C)}ue={type:"stylesheet",instance:ue,count:1,state:ye},U.set(q,ue)}}}function rpe(A,p){fh.X(A,p);var b=lv;if(b&&A){var C=dt(b).hoistableScripts,U=uv(A),q=C.get(U);q||(q=b.querySelector(My(U)),q||(A=d({src:A,async:!0},p),(p=Pu.get(U))&&qj(A,p),q=b.createElement("script"),$e(q),bo(q,"link",A),b.head.appendChild(q)),q={type:"script",instance:q,count:1,state:null},C.set(U,q))}}function npe(A,p){fh.M(A,p);var b=lv;if(b&&A){var C=dt(b).hoistableScripts,U=uv(A),q=C.get(U);q||(q=b.querySelector(My(U)),q||(A=d({src:A,async:!0,type:"module"},p),(p=Pu.get(U))&&qj(A,p),q=b.createElement("script"),$e(q),bo(q,"link",A),b.head.appendChild(q)),q={type:"script",instance:q,count:1,state:null},C.set(U,q))}}function UQ(A,p,b,C){var U=(U=ae.current)?b_(U):null;if(!U)throw Error(n(446));switch(A){case"meta":case"title":return null;case"style":return typeof b.precedence=="string"&&typeof b.href=="string"?(p=cv(b.href),b=dt(U).hoistableStyles,C=b.get(p),C||(C={type:"style",instance:null,count:0,state:null},b.set(p,C)),C):{type:"void",instance:null,count:0,state:null};case"link":if(b.rel==="stylesheet"&&typeof b.href=="string"&&typeof b.precedence=="string"){A=cv(b.href);var q=dt(U).hoistableStyles,ue=q.get(A);if(ue||(U=U.ownerDocument||U,ue={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},q.set(A,ue),(q=U.querySelector(Ly(A)))&&!q._p&&(ue.instance=q,ue.state.loading=5),Pu.has(A)||(b={rel:"preload",as:"style",href:b.href,crossOrigin:b.crossOrigin,integrity:b.integrity,media:b.media,hrefLang:b.hrefLang,referrerPolicy:b.referrerPolicy},Pu.set(A,b),q||ape(U,A,b,ue.state))),p&&C===null)throw Error(n(528,""));return ue}if(p&&C!==null)throw Error(n(529,""));return null;case"script":return p=b.async,b=b.src,typeof b=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=uv(b),b=dt(U).hoistableScripts,C=b.get(p),C||(C={type:"script",instance:null,count:0,state:null},b.set(p,C)),C):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,A))}}function cv(A){return'href="'+On(A)+'"'}function Ly(A){return'link[rel="stylesheet"]['+A+"]"}function QQ(A){return d({},A,{"data-precedence":A.precedence,precedence:null})}function ape(A,p,b,C){A.querySelector('link[rel="preload"][as="style"]['+p+"]")?C.loading=1:(p=A.createElement("link"),C.preload=p,p.addEventListener("load",function(){return C.loading|=1}),p.addEventListener("error",function(){return C.loading|=2}),bo(p,"link",b),$e(p),A.head.appendChild(p))}function uv(A){return'[src="'+On(A)+'"]'}function My(A){return"script[async]"+A}function HQ(A,p,b){if(p.count++,p.instance===null)switch(p.type){case"style":var C=A.querySelector('style[data-href~="'+On(b.href)+'"]');if(C)return p.instance=C,$e(C),C;var U=d({},b,{"data-href":b.href,"data-precedence":b.precedence,href:null,precedence:null});return C=(A.ownerDocument||A).createElement("style"),$e(C),bo(C,"style",U),y_(C,b.precedence,A),p.instance=C;case"stylesheet":U=cv(b.href);var q=A.querySelector(Ly(U));if(q)return p.state.loading|=4,p.instance=q,$e(q),q;C=QQ(b),(U=Pu.get(U))&&Kj(C,U),q=(A.ownerDocument||A).createElement("link"),$e(q);var ue=q;return ue._p=new Promise(function(ye,Re){ue.onload=ye,ue.onerror=Re}),bo(q,"link",C),p.state.loading|=4,y_(q,b.precedence,A),p.instance=q;case"script":return q=uv(b.src),(U=A.querySelector(My(q)))?(p.instance=U,$e(U),U):(C=b,(U=Pu.get(q))&&(C=d({},b),qj(C,U)),A=A.ownerDocument||A,U=A.createElement("script"),$e(U),bo(U,"link",C),A.head.appendChild(U),p.instance=U);case"void":return null;default:throw Error(n(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(C=p.instance,p.state.loading|=4,y_(C,b.precedence,A));return p.instance}function y_(A,p,b){for(var C=b.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),U=C.length?C[C.length-1]:null,q=U,ue=0;ue<C.length;ue++){var ye=C[ue];if(ye.dataset.precedence===p)q=ye;else if(q!==U)break}q?q.parentNode.insertBefore(A,q.nextSibling):(p=b.nodeType===9?b.head:b,p.insertBefore(A,p.firstChild))}function Kj(A,p){A.crossOrigin==null&&(A.crossOrigin=p.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=p.referrerPolicy),A.title==null&&(A.title=p.title)}function qj(A,p){A.crossOrigin==null&&(A.crossOrigin=p.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=p.referrerPolicy),A.integrity==null&&(A.integrity=p.integrity)}var w_=null;function VQ(A,p,b){if(w_===null){var C=new Map,U=w_=new Map;U.set(b,C)}else U=w_,C=U.get(b),C||(C=new Map,U.set(b,C));if(C.has(A))return C;for(C.set(A,null),b=b.getElementsByTagName(A),U=0;U<b.length;U++){var q=b[U];if(!(q[Ce]||q[ar]||A==="link"&&q.getAttribute("rel")==="stylesheet")&&q.namespaceURI!=="http://www.w3.org/2000/svg"){var ue=q.getAttribute(p)||"";ue=A+ue;var ye=C.get(ue);ye?ye.push(q):C.set(ue,[q])}}return C}function zQ(A,p,b){A=A.ownerDocument||A,A.head.insertBefore(b,p==="title"?A.querySelector("head > title"):null)}function spe(A,p,b){if(b===1||p.itemProp!=null)return!1;switch(A){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;switch(p.rel){case"stylesheet":return A=p.disabled,typeof p.precedence=="string"&&A==null;default:return!0}case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function $Q(A){return!(A.type==="stylesheet"&&(A.state.loading&3)===0)}var Uy=null;function ipe(){}function ope(A,p,b){if(Uy===null)throw Error(n(475));var C=Uy;if(p.type==="stylesheet"&&(typeof b.media!="string"||matchMedia(b.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var U=cv(b.href),q=A.querySelector(Ly(U));if(q){A=q._p,A!==null&&typeof A=="object"&&typeof A.then=="function"&&(C.count++,C=E_.bind(C),A.then(C,C)),p.state.loading|=4,p.instance=q,$e(q);return}q=A.ownerDocument||A,b=QQ(b),(U=Pu.get(U))&&Kj(b,U),q=q.createElement("link"),$e(q);var ue=q;ue._p=new Promise(function(ye,Re){ue.onload=ye,ue.onerror=Re}),bo(q,"link",b),p.instance=q}C.stylesheets===null&&(C.stylesheets=new Map),C.stylesheets.set(p,A),(A=p.state.preload)&&(p.state.loading&3)===0&&(C.count++,p=E_.bind(C),A.addEventListener("load",p),A.addEventListener("error",p))}}function lpe(){if(Uy===null)throw Error(n(475));var A=Uy;return A.stylesheets&&A.count===0&&Wj(A,A.stylesheets),0<A.count?function(p){var b=setTimeout(function(){if(A.stylesheets&&Wj(A,A.stylesheets),A.unsuspend){var C=A.unsuspend;A.unsuspend=null,C()}},6e4);return A.unsuspend=p,function(){A.unsuspend=null,clearTimeout(b)}}:null}function E_(){if(this.count--,this.count===0){if(this.stylesheets)Wj(this,this.stylesheets);else if(this.unsuspend){var A=this.unsuspend;this.unsuspend=null,A()}}}var C_=null;function Wj(A,p){A.stylesheets=null,A.unsuspend!==null&&(A.count++,C_=new Map,p.forEach(cpe,A),C_=null,E_.call(A))}function cpe(A,p){if(!(p.state.loading&4)){var b=C_.get(A);if(b)var C=b.get(null);else{b=new Map,C_.set(A,b);for(var U=A.querySelectorAll("link[data-precedence],style[data-precedence]"),q=0;q<U.length;q++){var ue=U[q];(ue.nodeName==="LINK"||ue.getAttribute("media")!=="not all")&&(b.set(ue.dataset.precedence,ue),C=ue)}C&&b.set(null,C)}U=p.instance,ue=U.getAttribute("data-precedence"),q=b.get(ue)||C,q===C&&b.set(null,U),b.set(ue,U),this.count++,C=E_.bind(this),U.addEventListener("load",C),U.addEventListener("error",C),q?q.parentNode.insertBefore(U,q.nextSibling):(A=A.nodeType===9?A.head:A,A.insertBefore(U,A.firstChild)),p.state.loading|=4}}var Qy={$$typeof:_,Provider:null,Consumer:null,_currentValue:z,_currentValue2:z,_threadCount:0};function upe(A,p,b,C,U,q,ue,ye){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=da(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=da(0),this.hiddenUpdates=da(null),this.identifierPrefix=C,this.onUncaughtError=U,this.onCaughtError=q,this.onRecoverableError=ue,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ye,this.incompleteTransitions=new Map}function GQ(A,p,b,C,U,q,ue,ye,Re,lt,kt,Dt){return A=new upe(A,p,b,ue,ye,Re,lt,Dt),p=1,q===!0&&(p|=24),q=qi(3,null,null,p),A.current=q,q.stateNode=A,p=uy(),p.refCount++,A.pooledCache=p,p.refCount++,q.memoizedState={element:C,isDehydrated:b,cache:p},Qe(q),A}function KQ(A){return A?(A=fi,A):fi}function qQ(A,p,b,C,U,q){U=KQ(U),C.context===null?C.context=U:C.pendingContext=U,C=Nt(p),C.payload={element:b},q=q===void 0?null:q,q!==null&&(C.callback=q),b=It(A,C,p),b!==null&&(Lc(b,A,p),Bt(b,A,p))}function WQ(A,p){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var b=A.retryLane;A.retryLane=b!==0&&b<p?b:p}}function Xj(A,p){WQ(A,p),(A=A.alternate)&&WQ(A,p)}function XQ(A){if(A.tag===13){var p=_d(A,67108864);p!==null&&Lc(p,A,67108864),Xj(A,67108864)}}var __=!0;function dpe(A,p,b,C){var U=V.T;V.T=null;var q=G.p;try{G.p=2,Yj(A,p,b,C)}finally{G.p=q,V.T=U}}function fpe(A,p,b,C){var U=V.T;V.T=null;var q=G.p;try{G.p=8,Yj(A,p,b,C)}finally{G.p=q,V.T=U}}function Yj(A,p,b,C){if(__){var U=Jj(C);if(U===null)Lj(A,p,C,S_,b),JQ(A,C);else if(hpe(U,A,p,b,C))C.stopPropagation();else if(JQ(A,C),p&4&&-1<Ape.indexOf(A)){for(;U!==null;){var q=je(U);if(q!==null)switch(q.tag){case 3:if(q=q.stateNode,q.current.memoizedState.isDehydrated){var ue=kr(q.pendingLanes);if(ue!==0){var ye=q;for(ye.pendingLanes|=2,ye.entangledLanes|=2;ue;){var Re=1<<31-Rt(ue);ye.entanglements[1]|=Re,ue&=~Re}qf(q),(ha&6)===0&&(c_=Be()+500,Oy(0))}}break;case 13:ye=_d(q,2),ye!==null&&Lc(ye,q,2),d_(),Xj(q,2)}if(q=Jj(C),q===null&&Lj(A,p,C,S_,b),q===U)break;U=q}U!==null&&C.stopPropagation()}else Lj(A,p,C,null,b)}}function Jj(A){return A=fa(A),Zj(A)}var S_=null;function Zj(A){if(S_=null,A=Ne(A),A!==null){var p=s(A);if(p===null)A=null;else{var b=p.tag;if(b===13){if(A=i(p),A!==null)return A;A=null}else if(b===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;A=null}else p!==A&&(A=null)}}return S_=A,null}function YQ(A){switch(A){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Le()){case We:return 2;case be:return 8;case Oe:case Pe:return 32;case qe:return 268435456;default:return 32}default:return 32}}var e3=!1,K0=null,q0=null,W0=null,Hy=new Map,Vy=new Map,X0=[],Ape="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function JQ(A,p){switch(A){case"focusin":case"focusout":K0=null;break;case"dragenter":case"dragleave":q0=null;break;case"mouseover":case"mouseout":W0=null;break;case"pointerover":case"pointerout":Hy.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vy.delete(p.pointerId)}}function zy(A,p,b,C,U,q){return A===null||A.nativeEvent!==q?(A={blockedOn:p,domEventName:b,eventSystemFlags:C,nativeEvent:q,targetContainers:[U]},p!==null&&(p=je(p),p!==null&&XQ(p)),A):(A.eventSystemFlags|=C,p=A.targetContainers,U!==null&&p.indexOf(U)===-1&&p.push(U),A)}function hpe(A,p,b,C,U){switch(p){case"focusin":return K0=zy(K0,A,p,b,C,U),!0;case"dragenter":return q0=zy(q0,A,p,b,C,U),!0;case"mouseover":return W0=zy(W0,A,p,b,C,U),!0;case"pointerover":var q=U.pointerId;return Hy.set(q,zy(Hy.get(q)||null,A,p,b,C,U)),!0;case"gotpointercapture":return q=U.pointerId,Vy.set(q,zy(Vy.get(q)||null,A,p,b,C,U)),!0}return!1}function ZQ(A){var p=Ne(A.target);if(p!==null){var b=s(p);if(b!==null){if(p=b.tag,p===13){if(p=i(b),p!==null){A.blockedOn=p,Et(A.priority,function(){if(b.tag===13){var C=Rc();C=gt(C);var U=_d(b,C);U!==null&&Lc(U,b,C),Xj(b,C)}});return}}else if(p===3&&b.stateNode.current.memoizedState.isDehydrated){A.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}A.blockedOn=null}function N_(A){if(A.blockedOn!==null)return!1;for(var p=A.targetContainers;0<p.length;){var b=Jj(A.nativeEvent);if(b===null){b=A.nativeEvent;var C=new b.constructor(b.type,b);Ql=C,b.target.dispatchEvent(C),Ql=null}else return p=je(b),p!==null&&XQ(p),A.blockedOn=b,!1;p.shift()}return!0}function eH(A,p,b){N_(A)&&b.delete(p)}function mpe(){e3=!1,K0!==null&&N_(K0)&&(K0=null),q0!==null&&N_(q0)&&(q0=null),W0!==null&&N_(W0)&&(W0=null),Hy.forEach(eH),Vy.forEach(eH)}function k_(A,p){A.blockedOn===p&&(A.blockedOn=null,e3||(e3=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,mpe)))}var B_=null;function tH(A){B_!==A&&(B_=A,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){B_===A&&(B_=null);for(var p=0;p<A.length;p+=3){var b=A[p],C=A[p+1],U=A[p+2];if(typeof C!="function"){if(Zj(C||b)===null)continue;break}var q=je(b);q!==null&&(A.splice(p,3),p-=3,Fu(q,{pending:!0,data:U,method:b.method,action:C},C,U))}}))}function $y(A){function p(Re){return k_(Re,A)}K0!==null&&k_(K0,A),q0!==null&&k_(q0,A),W0!==null&&k_(W0,A),Hy.forEach(p),Vy.forEach(p);for(var b=0;b<X0.length;b++){var C=X0[b];C.blockedOn===A&&(C.blockedOn=null)}for(;0<X0.length&&(b=X0[0],b.blockedOn===null);)ZQ(b),b.blockedOn===null&&X0.shift();if(b=(A.ownerDocument||A).$$reactFormReplay,b!=null)for(C=0;C<b.length;C+=3){var U=b[C],q=b[C+1],ue=U[vr]||null;if(typeof q=="function")ue||tH(b);else if(ue){var ye=null;if(q&&q.hasAttribute("formAction")){if(U=q,ue=q[vr]||null)ye=ue.formAction;else if(Zj(U)!==null)continue}else ye=ue.action;typeof ye=="function"?b[C+1]=ye:(b.splice(C,3),C-=3),tH(b)}}}function t3(A){this._internalRoot=A}T_.prototype.render=t3.prototype.render=function(A){var p=this._internalRoot;if(p===null)throw Error(n(409));var b=p.current,C=Rc();qQ(b,C,A,p,null,null)},T_.prototype.unmount=t3.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var p=A.containerInfo;qQ(A.current,2,null,A,null,null),d_(),p[Yr]=null}};function T_(A){this._internalRoot=A}T_.prototype.unstable_scheduleHydration=function(A){if(A){var p=xt();A={blockedOn:null,target:A,priority:p};for(var b=0;b<X0.length&&p!==0&&p<X0[b].priority;b++);X0.splice(b,0,A),b===0&&ZQ(A)}};var rH=t.version;if(rH!=="19.1.1")throw Error(n(527,rH,"19.1.1"));G.findDOMNode=function(A){var p=A._reactInternals;if(p===void 0)throw typeof A.render=="function"?Error(n(188)):(A=Object.keys(A).join(","),Error(n(268,A)));return A=c(p),A=A!==null?u(A):null,A=A===null?null:A.stateNode,A};var ppe={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var j_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!j_.isDisabled&&j_.supportsFiber)try{pt=j_.inject(ppe),Ft=j_}catch{}}return Ky.createRoot=function(A,p){if(!a(A))throw Error(n(299));var b=!1,C="",U=x9,q=v9,ue=b9,ye=null;return p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(C=p.identifierPrefix),p.onUncaughtError!==void 0&&(U=p.onUncaughtError),p.onCaughtError!==void 0&&(q=p.onCaughtError),p.onRecoverableError!==void 0&&(ue=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(ye=p.unstable_transitionCallbacks)),p=GQ(A,1,!1,null,null,b,C,U,q,ue,ye,null),A[Yr]=p.current,Rj(A),new t3(p)},Ky.hydrateRoot=function(A,p,b){if(!a(A))throw Error(n(299));var C=!1,U="",q=x9,ue=v9,ye=b9,Re=null,lt=null;return b!=null&&(b.unstable_strictMode===!0&&(C=!0),b.identifierPrefix!==void 0&&(U=b.identifierPrefix),b.onUncaughtError!==void 0&&(q=b.onUncaughtError),b.onCaughtError!==void 0&&(ue=b.onCaughtError),b.onRecoverableError!==void 0&&(ye=b.onRecoverableError),b.unstable_transitionCallbacks!==void 0&&(Re=b.unstable_transitionCallbacks),b.formState!==void 0&&(lt=b.formState)),p=GQ(A,1,!0,p,b??null,C,U,q,ue,ye,Re,lt),p.context=KQ(null),b=p.current,C=Rc(),C=gt(C),U=Nt(C),U.callback=null,It(b,U,C),b=C,p.current.lanes=b,Da(p,b),qf(p),A[Yr]=p.current,Rj(A),new T_(p)},Ky.version="19.1.1",Ky}var fH;function Bpe(){if(fH)return a3.exports;fH=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),a3.exports=kpe(),a3.exports}var Tpe=Bpe();const jpe=Ll(Tpe),Ipe=()=>{};var AH={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bee=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let a=e.charCodeAt(n);a<128?t[r++]=a:a<2048?(t[r++]=a>>6|192,t[r++]=a&63|128):(a&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=a>>18|240,t[r++]=a>>12&63|128,t[r++]=a>>6&63|128,t[r++]=a&63|128):(t[r++]=a>>12|224,t[r++]=a>>6&63|128,t[r++]=a&63|128)}return t},Fpe=function(e){const t=[];let r=0,n=0;for(;r<e.length;){const a=e[r++];if(a<128)t[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=e[r++];t[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=e[r++],i=e[r++],o=e[r++],c=((a&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536;t[n++]=String.fromCharCode(55296+(c>>10)),t[n++]=String.fromCharCode(56320+(c&1023))}else{const s=e[r++],i=e[r++];t[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63)}}return t.join("")},Tee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<e.length;a+=3){const s=e[a],i=a+1<e.length,o=i?e[a+1]:0,c=a+2<e.length,u=c?e[a+2]:0,d=s>>2,f=(s&3)<<4|o>>4;let h=(o&15)<<2|u>>6,m=u&63;c||(m=64,i||(h=64)),n.push(r[d],r[f],r[h],r[m])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Bee(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Fpe(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<e.length;){const s=r[e.charAt(a++)],o=a<e.length?r[e.charAt(a)]:0;++a;const u=a<e.length?r[e.charAt(a)]:64;++a;const f=a<e.length?r[e.charAt(a)]:64;if(++a,s==null||o==null||u==null||f==null)throw new Ope;const h=s<<2|o>>4;if(n.push(h),u!==64){const m=o<<4&240|u>>2;if(n.push(m),f!==64){const g=u<<6&192|f;n.push(g)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ope extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Dpe=function(e){const t=Bee(e);return Tee.encodeByteArray(t,!0)},sN=function(e){return Dpe(e).replace(/\./g,"")},jee=function(e){try{return Tee.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ppe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rpe=()=>Ppe().__FIREBASE_DEFAULTS__,Lpe=()=>{if(typeof process>"u"||typeof AH>"u")return;const e=AH.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Mpe=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&jee(e[1]);return t&&JSON.parse(t)},xk=()=>{try{return Ipe()||Rpe()||Lpe()||Mpe()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Iee=e=>{var t,r;return(r=(t=xk())==null?void 0:t.emulatorHosts)==null?void 0:r[e]},SR=e=>{const t=Iee(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),n]:[t.substring(0,r),n]},Fee=()=>{var e;return(e=xk())==null?void 0:e.config},Oee=e=>{var t;return(t=xk())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Upe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function vk(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dee(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=t||"demo-project",a=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[sN(JSON.stringify(r)),sN(JSON.stringify(i)),""].join(".")}const Yw={};function Qpe(){const e={prod:[],emulator:[]};for(const t of Object.keys(Yw))Yw[t]?e.emulator.push(t):e.prod.push(t);return e}function Hpe(e){let t=document.getElementById(e),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),r=!0),{created:r,element:t}}let hH=!1;function bk(e,t){if(typeof window>"u"||typeof document>"u"||!l0(window.location.host)||Yw[e]===t||Yw[e]||hH)return;Yw[e]=t;function r(h){return`__firebase__banner__${h}`}const n="__firebase__banner",s=Qpe().prod.length>0;function i(){const h=document.getElementById(n);h&&h.remove()}function o(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function c(h,m){h.setAttribute("width","24"),h.setAttribute("id",m),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function u(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{hH=!0,i()},h}function d(h,m){h.setAttribute("id",m),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function f(){const h=Hpe(n),m=r("text"),g=document.getElementById(m)||document.createElement("span"),x=r("learnmore"),v=document.getElementById(x)||document.createElement("a"),y=r("preprendIcon"),w=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const _=h.element;o(_),d(v,x);const T=u();c(w,y),_.append(w,g,v,T),document.body.appendChild(_)}s?(g.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Vpe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pl())}function zpe(){var t;const e=(t=xk())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $pe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Gpe(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Kpe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qpe(){const e=pl();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Wpe(){return!zpe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xpe(){try{return typeof indexedDB=="object"}catch{return!1}}function Ype(){return new Promise((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;t(((s=a.error)==null?void 0:s.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jpe="FirebaseError";class ff extends Error{constructor(t,r,n){super(r),this.code=t,this.customData=n,this.name=Jpe,Object.setPrototypeOf(this,ff.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,IE.prototype.create)}}class IE{constructor(t,r,n){this.service=t,this.serviceName=r,this.errors=n}create(t,...r){const n=r[0]||{},a=`${this.service}/${t}`,s=this.errors[t],i=s?Zpe(s,n):"Error",o=`${this.serviceName}: ${i} (${a}).`;return new ff(a,o,n)}}function Zpe(e,t){return e.replace(ege,(r,n)=>{const a=t[n];return a!=null?String(a):`<${n}?>`})}const ege=/\{\$([^}]+)}/g;function tge(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function $m(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const a of r){if(!n.includes(a))return!1;const s=e[a],i=t[a];if(mH(s)&&mH(i)){if(!$m(s,i))return!1}else if(s!==i)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function mH(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(a=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function Nw(e){const t={};return e.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");t[decodeURIComponent(a)]=decodeURIComponent(s)}}),t}function kw(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function rge(e,t){const r=new nge(e,t);return r.subscribe.bind(r)}class nge{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,n){let a;if(t===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");age(t,["next","error","complete"])?a=t:a={next:t,error:r,complete:n},a.next===void 0&&(a.next=l3),a.error===void 0&&(a.error=l3),a.complete===void 0&&(a.complete=l3);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function age(e,t){if(typeof e!="object"||e===null)return!1;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}function l3(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(e){return e&&e._delegate?e._delegate:e}class Vh{constructor(t,r,n){this.name=t,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sge=class{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const n=new Upe;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(t==null?void 0:t.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(oge(t))try{this.getOrInitializeService({instanceIdentifier:ng})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(t=ng){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ng){return this.instances.has(t)}getOptions(t=ng){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&i.resolve(a)}return a}onInit(t,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(t),this.onInitCallbacks.set(n,a);const s=this.instances.get(n);return s&&t(s,n),()=>{a.delete(t)}}invokeOnInitCallbacks(t,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:ige(t),options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=ng){return this.component?this.component.multipleInstances?t:ng:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function ige(e){return e===ng?void 0:e}function oge(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lge{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new sge(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Bn||(Bn={}));const cge={debug:Bn.DEBUG,verbose:Bn.VERBOSE,info:Bn.INFO,warn:Bn.WARN,error:Bn.ERROR,silent:Bn.SILENT},uge=Bn.INFO,dge={[Bn.DEBUG]:"log",[Bn.VERBOSE]:"log",[Bn.INFO]:"info",[Bn.WARN]:"warn",[Bn.ERROR]:"error"},fge=(e,t,...r)=>{if(t<e.logLevel)return;const n=new Date().toISOString(),a=dge[t];if(a)console[a](`[${n}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let NR=class{constructor(t){this.name=t,this._logLevel=uge,this._logHandler=fge,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Bn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?cge[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Bn.DEBUG,...t),this._logHandler(this,Bn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Bn.VERBOSE,...t),this._logHandler(this,Bn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Bn.INFO,...t),this._logHandler(this,Bn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Bn.WARN,...t),this._logHandler(this,Bn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Bn.ERROR,...t),this._logHandler(this,Bn.ERROR,...t)}};const Age=(e,t)=>t.some(r=>e instanceof r);let pH,gH;function hge(){return pH||(pH=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mge(){return gH||(gH=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Pee=new WeakMap,lO=new WeakMap,Ree=new WeakMap,c3=new WeakMap,kR=new WeakMap;function pge(e){const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{r(jm(e.result)),a()},i=()=>{n(e.error),a()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(r=>{r instanceof IDBCursor&&Pee.set(r,e)}).catch(()=>{}),kR.set(t,e),t}function gge(e){if(lO.has(e))return;const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{r(),a()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});lO.set(e,t)}let cO={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return lO.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Ree.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return jm(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function xge(e){cO=e(cO)}function vge(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(u3(this),t,...r);return Ree.set(n,t.sort?t.sort():[t]),jm(n)}:mge().includes(e)?function(...t){return e.apply(u3(this),t),jm(Pee.get(this))}:function(...t){return jm(e.apply(u3(this),t))}}function bge(e){return typeof e=="function"?vge(e):(e instanceof IDBTransaction&&gge(e),Age(e,hge())?new Proxy(e,cO):e)}function jm(e){if(e instanceof IDBRequest)return pge(e);if(c3.has(e))return c3.get(e);const t=bge(e);return t!==e&&(c3.set(e,t),kR.set(t,e)),t}const u3=e=>kR.get(e);function yge(e,t,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const i=indexedDB.open(e,t),o=jm(i);return n&&i.addEventListener("upgradeneeded",c=>{n(jm(i.result),c.oldVersion,c.newVersion,jm(i.transaction),c)}),r&&i.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),o.then(c=>{s&&c.addEventListener("close",()=>s()),a&&c.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const wge=["get","getKey","getAll","getAllKeys","count"],Ege=["put","add","delete","clear"],d3=new Map;function xH(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(d3.get(t))return d3.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,a=Ege.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||wge.includes(r)))return;const s=async function(i,...o){const c=this.transaction(i,a?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(o.shift())),(await Promise.all([u[r](...o),a&&c.done]))[0]};return d3.set(t,s),s}xge(e=>({...e,get:(t,r,n)=>xH(t,r)||e.get(t,r,n),has:(t,r)=>!!xH(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cge{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(_ge(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function _ge(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const uO="@firebase/app",vH="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh=new NR("@firebase/app"),Sge="@firebase/app-compat",Nge="@firebase/analytics-compat",kge="@firebase/analytics",Bge="@firebase/app-check-compat",Tge="@firebase/app-check",jge="@firebase/auth",Ige="@firebase/auth-compat",Fge="@firebase/database",Oge="@firebase/data-connect",Dge="@firebase/database-compat",Pge="@firebase/functions",Rge="@firebase/functions-compat",Lge="@firebase/installations",Mge="@firebase/installations-compat",Uge="@firebase/messaging",Qge="@firebase/messaging-compat",Hge="@firebase/performance",Vge="@firebase/performance-compat",zge="@firebase/remote-config",$ge="@firebase/remote-config-compat",Gge="@firebase/storage",Kge="@firebase/storage-compat",qge="@firebase/firestore",Wge="@firebase/ai",Xge="@firebase/firestore-compat",Yge="firebase",Jge="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO="[DEFAULT]",Zge={[uO]:"fire-core",[Sge]:"fire-core-compat",[kge]:"fire-analytics",[Nge]:"fire-analytics-compat",[Tge]:"fire-app-check",[Bge]:"fire-app-check-compat",[jge]:"fire-auth",[Ige]:"fire-auth-compat",[Fge]:"fire-rtdb",[Oge]:"fire-data-connect",[Dge]:"fire-rtdb-compat",[Pge]:"fire-fn",[Rge]:"fire-fn-compat",[Lge]:"fire-iid",[Mge]:"fire-iid-compat",[Uge]:"fire-fcm",[Qge]:"fire-fcm-compat",[Hge]:"fire-perf",[Vge]:"fire-perf-compat",[zge]:"fire-rc",[$ge]:"fire-rc-compat",[Gge]:"fire-gcs",[Kge]:"fire-gcs-compat",[qge]:"fire-fst",[Xge]:"fire-fst-compat",[Wge]:"fire-vertex","fire-js":"fire-js",[Yge]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2=new Map,exe=new Map,fO=new Map;function bH(e,t){try{e.container.addComponent(t)}catch(r){zh.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function Gm(e){const t=e.name;if(fO.has(t))return zh.debug(`There were multiple attempts to register component ${t}.`),!1;fO.set(t,e);for(const r of k2.values())bH(r,e);for(const r of exe.values())bH(r,e);return!0}function OE(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function Kc(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const txe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Im=new IE("app","Firebase",txe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rxe{constructor(t,r,n){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Vh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Im.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx=Jge;function BR(e,t={}){let r=e;typeof t!="object"&&(t={name:t});const n={name:dO,automaticDataCollectionEnabled:!0,...t},a=n.name;if(typeof a!="string"||!a)throw Im.create("bad-app-name",{appName:String(a)});if(r||(r=Fee()),!r)throw Im.create("no-options");const s=k2.get(a);if(s){if($m(r,s.options)&&$m(n,s.config))return s;throw Im.create("duplicate-app",{appName:a})}const i=new lge(a);for(const c of fO.values())i.addComponent(c);const o=new rxe(r,n,i);return k2.set(a,o),o}function yk(e=dO){const t=k2.get(e);if(!t&&e===dO&&Fee())return BR();if(!t)throw Im.create("no-app",{appName:e});return t}function yH(){return Array.from(k2.values())}function sd(e,t,r){let n=Zge[e]??e;r&&(n+=`-${r}`);const a=n.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const i=[`Unable to register library "${n}" with version "${t}":`];a&&i.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&s&&i.push("and"),s&&i.push(`version name "${t}" contains illegal characters (whitespace or "/")`),zh.warn(i.join(" "));return}Gm(new Vh(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nxe="firebase-heartbeat-database",axe=1,B2="firebase-heartbeat-store";let f3=null;function Lee(){return f3||(f3=yge(nxe,axe,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(B2)}catch(r){console.warn(r)}}}}).catch(e=>{throw Im.create("idb-open",{originalErrorMessage:e.message})})),f3}async function sxe(e){try{const r=(await Lee()).transaction(B2),n=await r.objectStore(B2).get(Mee(e));return await r.done,n}catch(t){if(t instanceof ff)zh.warn(t.message);else{const r=Im.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});zh.warn(r.message)}}}async function wH(e,t){try{const n=(await Lee()).transaction(B2,"readwrite");await n.objectStore(B2).put(t,Mee(e)),await n.done}catch(r){if(r instanceof ff)zh.warn(r.message);else{const n=Im.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});zh.warn(n.message)}}}function Mee(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ixe=1024,oxe=30;class lxe{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new uxe(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=EH();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats.length>oxe){const i=dxe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){zh.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=EH(),{heartbeatsToSend:n,unsentEntries:a}=cxe(this._heartbeatsCache.heartbeats),s=sN(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return zh.warn(r),""}}}function EH(){return new Date().toISOString().substring(0,10)}function cxe(e,t=ixe){const r=[];let n=e.slice();for(const a of e){const s=r.find(i=>i.agent===a.agent);if(s){if(s.dates.push(a.date),CH(r)>t){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),CH(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class uxe{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Xpe()?Ype().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await sxe(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return wH(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return wH(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function CH(e){return sN(JSON.stringify({version:2,heartbeats:e})).length}function dxe(e){if(e.length===0)return-1;let t=0,r=e[0].date;for(let n=1;n<e.length;n++)e[n].date<r&&(r=e[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fxe(e){Gm(new Vh("platform-logger",t=>new Cge(t),"PRIVATE")),Gm(new Vh("heartbeat",t=>new lxe(t),"PRIVATE")),sd(uO,vH,e),sd(uO,vH,"esm2020"),sd("fire-js","")}fxe("");function Uee(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Axe=Uee,Qee=new IE("auth","Firebase",Uee());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN=new NR("@firebase/auth");function hxe(e,...t){iN.logLevel<=Bn.WARN&&iN.warn(`Auth (${mx}): ${e}`,...t)}function dS(e,...t){iN.logLevel<=Bn.ERROR&&iN.error(`Auth (${mx}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(e,...t){throw TR(e,...t)}function bA(e,...t){return TR(e,...t)}function Hee(e,t,r){const n={...Axe(),[t]:r};return new IE("auth","Firebase",n).create(t,{appName:e.name})}function Fm(e){return Hee(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function TR(e,...t){if(typeof e!="string"){const r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return Qee.create(e,...t)}function $r(e,t,...r){if(!e)throw TR(t,...r)}function _h(e){const t="INTERNAL ASSERTION FAILED: "+e;throw dS(t),new Error(t)}function $h(e,t){e||_h(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function mxe(){return _H()==="http:"||_H()==="https:"}function _H(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pxe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mxe()||Gpe()||"connection"in navigator)?navigator.onLine:!0}function gxe(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(t,r){this.shortDelay=t,this.longDelay=r,$h(r>t,"Short delay should be less than long delay!"),this.isMobile=Vpe()||Kpe()}get(){return pxe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(e,t){$h(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vee{static initialize(t,r,n){this.fetchImpl=t,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_h("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_h("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_h("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xxe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vxe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bxe=new DE(3e4,6e4);function Ap(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function c0(e,t,r,n,a={}){return zee(e,a,async()=>{let s={},i={};n&&(t==="GET"?i=n:s={body:JSON.stringify(n)});const o=FE({key:e.config.apiKey,...i}).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);const u={method:t,headers:c,...s};return $pe()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&l0(e.emulatorConfig.host)&&(u.credentials="include"),Vee.fetch()(await $ee(e,e.config.apiHost,r,o),u)})}async function zee(e,t,r){e._canInitEmulator=!1;const n={...xxe,...t};try{const a=new wxe(e),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw I_(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const o=s.ok?i.errorMessage:i.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw I_(e,"credential-already-in-use",i);if(c==="EMAIL_EXISTS")throw I_(e,"email-already-in-use",i);if(c==="USER_DISABLED")throw I_(e,"user-disabled",i);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Hee(e,d,u);lf(e,d)}}catch(a){if(a instanceof ff)throw a;lf(e,"network-request-failed",{message:String(a)})}}async function wk(e,t,r,n,a={}){const s=await c0(e,t,r,n,a);return"mfaPendingCredential"in s&&lf(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function $ee(e,t,r,n){const a=`${t}${r}?${n}`,s=e,i=s.config.emulator?jR(e.config,a):`${e.config.apiScheme}://${a}`;return vxe.includes(r)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(i).toString():i}function yxe(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class wxe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(bA(this.auth,"network-request-failed")),bxe.get())})}}function I_(e,t,r){const n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=bA(e,t,n);return a.customData._tokenResponse=r,a}function SH(e){return e!==void 0&&e.enterprise!==void 0}class Exe{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return yxe(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Cxe(e,t){return c0(e,"GET","/v2/recaptchaConfig",Ap(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _xe(e,t){return c0(e,"POST","/v1/accounts:delete",t)}async function oN(e,t){return c0(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Sxe(e,t=!1){const r=Jn(e),n=await r.getIdToken(t),a=IR(n);$r(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:Jw(A3(a.auth_time)),issuedAtTime:Jw(A3(a.iat)),expirationTime:Jw(A3(a.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function A3(e){return Number(e)*1e3}function IR(e){const[t,r,n]=e.split(".");if(t===void 0||r===void 0||n===void 0)return dS("JWT malformed, contained fewer than 3 sections"),null;try{const a=jee(r);return a?JSON.parse(a):(dS("Failed to decode base64 JWT payload"),null)}catch(a){return dS("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function NH(e){const t=IR(e);return $r(t,"internal-error"),$r(typeof t.exp<"u","internal-error"),$r(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T2(e,t,r=!1){if(r)return t;try{return await t}catch(n){throw n instanceof ff&&Nxe(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}function Nxe({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kxe{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jw(this.lastLoginAt),this.creationTime=Jw(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lN(e){var f;const t=e.auth,r=await e.getIdToken(),n=await T2(e,oN(t,{idToken:r}));$r(n==null?void 0:n.users.length,t,"internal-error");const a=n.users[0];e._notifyReloadListener(a);const s=(f=a.providerUserInfo)!=null&&f.length?Gee(a.providerUserInfo):[],i=Txe(e.providerData,s),o=e.isAnonymous,c=!(e.email&&a.passwordHash)&&!(i!=null&&i.length),u=o?c:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new hO(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(e,d)}async function Bxe(e){const t=Jn(e);await lN(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Txe(e,t){return[...e.filter(n=>!t.some(a=>a.providerId===n.providerId)),...t]}function Gee(e){return e.map(({providerId:t,...r})=>({providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jxe(e,t){const r=await zee(e,{},async()=>{const n=FE({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:s}=e.config,i=await $ee(e,a,"/v1/token",`key=${s}`),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:n};return e.emulatorConfig&&l0(e.emulatorConfig.host)&&(c.credentials="include"),Vee.fetch()(i,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function Ixe(e,t){return c0(e,"POST","/v2/accounts:revokeToken",Ap(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){$r(t.idToken,"internal-error"),$r(typeof t.idToken<"u","internal-error"),$r(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):NH(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){$r(t.length!==0,"internal-error");const r=NH(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:($r(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await jxe(t,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(t,r,n){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,i=new A1;return n&&($r(typeof n=="string","internal-error",{appName:t}),i.refreshToken=n),a&&($r(typeof a=="string","internal-error",{appName:t}),i.accessToken=a),s&&($r(typeof s=="number","internal-error",{appName:t}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new A1,this.toJSON())}_performRefresh(){return _h("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(e,t){$r(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class qd{constructor({uid:t,auth:r,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new kxe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new hO(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const r=await T2(this,this.stsTokenManager.getToken(this.auth,t));return $r(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return Sxe(this,t)}reload(){return Bxe(this)}_assign(t){this!==t&&($r(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>({...r})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new qd({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(t){$r(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),r&&await lN(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kc(this.auth.app))return Promise.reject(Fm(this.auth));const t=await this.getIdToken();return await T2(this,_xe(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){const n=r.displayName??void 0,a=r.email??void 0,s=r.phoneNumber??void 0,i=r.photoURL??void 0,o=r.tenantId??void 0,c=r._redirectEventId??void 0,u=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:f,emailVerified:h,isAnonymous:m,providerData:g,stsTokenManager:x}=r;$r(f&&x,t,"internal-error");const v=A1.fromJSON(this.name,x);$r(typeof f=="string",t,"internal-error"),J0(n,t.name),J0(a,t.name),$r(typeof h=="boolean",t,"internal-error"),$r(typeof m=="boolean",t,"internal-error"),J0(s,t.name),J0(i,t.name),J0(o,t.name),J0(c,t.name),J0(u,t.name),J0(d,t.name);const y=new qd({uid:f,auth:t,email:a,emailVerified:h,displayName:n,isAnonymous:m,photoURL:i,phoneNumber:s,tenantId:o,stsTokenManager:v,createdAt:u,lastLoginAt:d});return g&&Array.isArray(g)&&(y.providerData=g.map(w=>({...w}))),c&&(y._redirectEventId=c),y}static async _fromIdTokenResponse(t,r,n=!1){const a=new A1;a.updateFromServerResponse(r);const s=new qd({uid:r.localId,auth:t,stsTokenManager:a,isAnonymous:n});return await lN(s),s}static async _fromGetAccountInfoResponse(t,r,n){const a=r.users[0];$r(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?Gee(a.providerUserInfo):[],i=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),o=new A1;o.updateFromIdToken(n);const c=new qd({uid:a.localId,auth:t,stsTokenManager:o,isAnonymous:i}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new hO(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kH=new Map;function Sh(e){$h(e instanceof Function,"Expected a class definition");let t=kH.get(e);return t?($h(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,kH.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kee{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}Kee.type="NONE";const BH=Kee;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(e,t,r){return`firebase:${e}:${t}:${r}`}class h1{constructor(t,r,n){this.persistence=t,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=fS(this.userKey,a.apiKey,s),this.fullPersistenceKey=fS("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const r=await oN(this.auth,{idToken:t}).catch(()=>{});return r?qd._fromGetAccountInfoResponse(this.auth,r,t):null}return qd._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,n="authUser"){if(!r.length)return new h1(Sh(BH),t,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||Sh(BH);const i=fS(n,t.config.apiKey,t.name);let o=null;for(const u of r)try{const d=await u._get(i);if(d){let f;if(typeof d=="string"){const h=await oN(t,{idToken:d}).catch(()=>{});if(!h)break;f=await qd._fromGetAccountInfoResponse(t,h,d)}else f=qd._fromJSON(t,d);u!==s&&(o=f),s=u;break}}catch{}const c=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new h1(s,t,n):(s=c[0],o&&await s._set(i,o.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(i)}catch{}})),new h1(s,t,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TH(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Yee(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(qee(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Zee(t))return"Blackberry";if(ete(t))return"Webos";if(Wee(t))return"Safari";if((t.includes("chrome/")||Xee(t))&&!t.includes("edge/"))return"Chrome";if(Jee(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function qee(e=pl()){return/firefox\//i.test(e)}function Wee(e=pl()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Xee(e=pl()){return/crios\//i.test(e)}function Yee(e=pl()){return/iemobile/i.test(e)}function Jee(e=pl()){return/android/i.test(e)}function Zee(e=pl()){return/blackberry/i.test(e)}function ete(e=pl()){return/webos/i.test(e)}function FR(e=pl()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Fxe(e=pl()){var t;return FR(e)&&!!((t=window.navigator)!=null&&t.standalone)}function Oxe(){return qpe()&&document.documentMode===10}function tte(e=pl()){return FR(e)||Jee(e)||ete(e)||Zee(e)||/windows phone/i.test(e)||Yee(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rte(e,t=[]){let r;switch(e){case"Browser":r=TH(pl());break;case"Worker":r=`${TH(pl())}-${e}`;break;default:r=e}const n=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${mx}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dxe{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const n=s=>new Promise((i,o)=>{try{const c=t(s);i(c)}catch(c){o(c)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const n of this.queue)await n(t),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pxe(e,t={}){return c0(e,"GET","/v2/passwordPolicy",Ap(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rxe=6;class Lxe{constructor(t){var n;const r=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??Rxe,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=t.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,r),this.validatePasswordCharacterOptions(t,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(t,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=t.length>=n),a&&(r.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<t.length;a++)n=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mxe{constructor(t,r,n,a){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jH(this),this.idTokenSubscription=new jH(this),this.beforeStateQueue=new Dxe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Qee,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=Sh(r)),this._initializationPromise=this.queue(async()=>{var n,a,s;if(!this._deleted&&(this.persistenceManager=await h1.create(this,t),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await oN(this,{idToken:t}),n=await qd._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(Kc(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=n==null?void 0:n._redirectEventId,c=await this.tryRedirectSignIn(t);(!i||i===o)&&(c!=null&&c.user)&&(n=c.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return $r(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await lN(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=gxe()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Kc(this.app))return Promise.reject(Fm(this));const r=t?Jn(t):null;return r&&$r(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&$r(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Kc(this.app)?Promise.reject(Fm(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Kc(this.app)?Promise.reject(Fm(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Sh(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Pxe(this),r=new Lxe(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new IE("auth","Firebase",t())}onAuthStateChanged(t,r,n){return this.registerStateListener(this.authStateSubscription,t,r,n)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,n){return this.registerStateListener(this.idTokenSubscription,t,r,n)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await Ixe(this,n)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,r){const n=await this.getOrInitRedirectPersistenceManager(r);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&Sh(t)||this._popupRedirectResolver;$r(r,this,"argument-error"),this.redirectPersistenceManager=await h1.create(this,[Sh(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===t?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if($r(o,this,"internal-error"),o.then(()=>{i||s(this.currentUser)}),typeof r=="function"){const c=t.addObserver(r,n,a);return()=>{i=!0,c()}}else{const c=t.addObserver(r);return()=>{i=!0,c()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return $r(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=rte(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var r;if(Kc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return t!=null&&t.error&&hxe(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function px(e){return Jn(e)}class jH{constructor(t){this.auth=t,this.observer=null,this.addObserver=rge(r=>this.observer=r)}get next(){return $r(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ek={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Uxe(e){Ek=e}function nte(e){return Ek.loadJS(e)}function Qxe(){return Ek.recaptchaEnterpriseScript}function Hxe(){return Ek.gapiScript}function Vxe(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class zxe{constructor(){this.enterprise=new $xe}ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}class $xe{ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}const Gxe="recaptcha-enterprise",ate="NO_RECAPTCHA";class Kxe{constructor(t){this.type=Gxe,this.auth=px(t)}async verify(t="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(i,o)=>{Cxe(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new Exe(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,i(u.siteKey)}}).catch(c=>{o(c)})})}function a(s,i,o){const c=window.grecaptcha;SH(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:t}).then(u=>{i(u)}).catch(()=>{i(ate)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new zxe().execute("siteKey",{action:"verify"}):new Promise((s,i)=>{n(this.auth).then(o=>{if(!r&&SH(window.grecaptcha))a(o,s,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Qxe();c.length!==0&&(c+=o),nte(c).then(()=>{a(o,s,i)}).catch(u=>{i(u)})}}).catch(o=>{i(o)})})}}async function IH(e,t,r,n=!1,a=!1){const s=new Kxe(e);let i;if(a)i=ate;else try{i=await s.verify(r)}catch{i=await s.verify(r,!0)}const o={...t};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function mO(e,t,r,n,a){var s;if((s=e._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await IH(e,t,r,r==="getOobCode");return n(e,i)}else return n(e,t).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await IH(e,t,r,r==="getOobCode");return n(e,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qxe(e,t){const r=OE(e,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if($m(s,t??{}))return a;lf(a,"already-initialized")}return r.initialize({options:t})}function Wxe(e,t){const r=(t==null?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Sh);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,t==null?void 0:t.popupRedirectResolver)}function Xxe(e,t,r){const n=px(e);$r(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const a=!1,s=ste(t),{host:i,port:o}=Yxe(t),c=o===null?"":`:${o}`,u={url:`${s}//${i}${c}/`},d=Object.freeze({host:i,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){$r(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),$r($m(u,n.config.emulator)&&$m(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,l0(i)?(vk(`${s}//${i}${c}`),bk("Auth",!0)):Jxe()}function ste(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Yxe(e){const t=ste(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:FH(n.substr(s.length+1))}}else{const[s,i]=n.split(":");return{host:s,port:FH(i)}}}function FH(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Jxe(){function e(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return _h("not implemented")}_getIdTokenResponse(t){return _h("not implemented")}_linkToIdToken(t,r){return _h("not implemented")}_getReauthenticationResolver(t){return _h("not implemented")}}async function Zxe(e,t){return c0(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eve(e,t){return wk(e,"POST","/v1/accounts:signInWithPassword",Ap(e,t))}async function tve(e,t){return c0(e,"POST","/v1/accounts:sendOobCode",Ap(e,t))}async function rve(e,t){return tve(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nve(e,t){return wk(e,"POST","/v1/accounts:signInWithEmailLink",Ap(e,t))}async function ave(e,t){return wk(e,"POST","/v1/accounts:signInWithEmailLink",Ap(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2 extends OR{constructor(t,r,n,a=null){super("password",n),this._email=t,this._password=r,this._tenantId=a}static _fromEmailAndPassword(t,r){return new j2(t,r,"password")}static _fromEmailAndCode(t,r,n=null){return new j2(t,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mO(t,r,"signInWithPassword",eve);case"emailLink":return nve(t,{email:this._email,oobCode:this._password});default:lf(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mO(t,n,"signUpPassword",Zxe);case"emailLink":return ave(t,{idToken:r,email:this._email,oobCode:this._password});default:lf(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m1(e,t){return wk(e,"POST","/v1/accounts:signInWithIdp",Ap(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sve="http://localhost";class $g extends OR{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new $g(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):lf("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:a,...s}=r;if(!n||!a)return null;const i=new $g(n,a);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(t){const r=this.buildRequest();return m1(t,r)}_linkToIdToken(t,r){const n=this.buildRequest();return n.idToken=r,m1(t,n)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,m1(t,r)}buildRequest(){const t={requestUri:sve,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=FE(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ive(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ove(e){const t=Nw(kw(e)).link,r=t?Nw(kw(t)).deep_link_id:null,n=Nw(kw(e)).deep_link_id;return(n?Nw(kw(n)).link:null)||n||r||t||e}class DR{constructor(t){const r=Nw(kw(t)),n=r.apiKey??null,a=r.oobCode??null,s=ive(r.mode??null);$r(n&&a&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=a,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(t){const r=ove(t);try{return new DR(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(){this.providerId=_b.PROVIDER_ID}static credential(t,r){return j2._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const n=DR.parseLink(r);return $r(n,"argument-error"),j2._fromEmailAndCode(t,n.code,n.tenantId)}}_b.PROVIDER_ID="password";_b.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_b.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ite{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE extends ite{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm extends PE{constructor(){super("facebook.com")}static credential(t){return $g._fromParams({providerId:mm.PROVIDER_ID,signInMethod:mm.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return mm.credentialFromTaggedObject(t)}static credentialFromError(t){return mm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return mm.credential(t.oauthAccessToken)}catch{return null}}}mm.FACEBOOK_SIGN_IN_METHOD="facebook.com";mm.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm extends PE{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return $g._fromParams({providerId:pm.PROVIDER_ID,signInMethod:pm.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return pm.credentialFromTaggedObject(t)}static credentialFromError(t){return pm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:n}=t;if(!r&&!n)return null;try{return pm.credential(r,n)}catch{return null}}}pm.GOOGLE_SIGN_IN_METHOD="google.com";pm.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm extends PE{constructor(){super("github.com")}static credential(t){return $g._fromParams({providerId:gm.PROVIDER_ID,signInMethod:gm.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return gm.credentialFromTaggedObject(t)}static credentialFromError(t){return gm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return gm.credential(t.oauthAccessToken)}catch{return null}}}gm.GITHUB_SIGN_IN_METHOD="github.com";gm.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm extends PE{constructor(){super("twitter.com")}static credential(t,r){return $g._fromParams({providerId:xm.PROVIDER_ID,signInMethod:xm.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return xm.credentialFromTaggedObject(t)}static credentialFromError(t){return xm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=t;if(!r||!n)return null;try{return xm.credential(r,n)}catch{return null}}}xm.TWITTER_SIGN_IN_METHOD="twitter.com";xm.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,n,a=!1){const s=await qd._fromIdTokenResponse(t,n,a),i=OH(n);return new L1({user:s,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(t,r,n){await t._updateTokensIfNecessary(n,!0);const a=OH(n);return new L1({user:t,providerId:a,_tokenResponse:n,operationType:r})}}function OH(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN extends ff{constructor(t,r,n,a){super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,cN.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,r,n,a){return new cN(t,r,n,a)}}function ote(e,t,r,n){return(t==="reauthenticate"?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?cN._fromErrorAndOperation(e,s,t,n):s})}async function lve(e,t,r=!1){const n=await T2(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return L1._forOperation(e,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cve(e,t,r=!1){const{auth:n}=e;if(Kc(n.app))return Promise.reject(Fm(n));const a="reauthenticate";try{const s=await T2(e,ote(n,a,t,e),r);$r(s.idToken,n,"internal-error");const i=IR(s.idToken);$r(i,n,"internal-error");const{sub:o}=i;return $r(e.uid===o,n,"user-mismatch"),L1._forOperation(e,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&lf(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lte(e,t,r=!1){if(Kc(e.app))return Promise.reject(Fm(e));const n="signIn",a=await ote(e,n,t),s=await L1._fromIdTokenResponse(e,n,a);return r||await e._updateCurrentUser(s.user),s}async function uve(e,t){return lte(px(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dve(e){const t=px(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function fve(e,t,r){const n=px(e);await mO(n,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",rve)}function Ave(e,t,r){return Kc(e.app)?Promise.reject(Fm(e)):uve(Jn(e),_b.credential(t,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&dve(e),n})}function hve(e,t,r,n){return Jn(e).onIdTokenChanged(t,r,n)}function mve(e,t,r){return Jn(e).beforeAuthStateChanged(t,r)}function cte(e,t,r,n){return Jn(e).onAuthStateChanged(t,r,n)}function pve(e){return Jn(e).signOut()}const uN="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ute{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(uN,"1"),this.storage.removeItem(uN),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gve=1e3,xve=10;class dte extends ute{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tte(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&t(r,a,n)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((i,o,c)=>{this.notifyListeners(i,c)});return}const n=t.key;r?this.detachListener():this.stopPolling();const a=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},s=this.storage.getItem(n);Oxe()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,xve):a()}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:n}),!0)})},gve)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}dte.type="LOCAL";const vve=dte;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fte extends ute{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}fte.type="SESSION";const Ate=fte;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bve(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(a=>a.isListeningto(t));if(r)return r;const n=new Ck(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:n,eventType:a,data:s}=r.data,i=this.handlersMap[a];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const o=Array.from(i).map(async u=>u(r.origin,s)),c=await bve(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:c})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ck.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(e="",t=10){let r="";for(let n=0;n<t;n++)r+=Math.floor(Math.random()*10);return e+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yve{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,i;return new Promise((o,c)=>{const u=PR("",20);a.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);i={messageChannel:a,onMessage(f){const h=f;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(h.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(i),a.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:t,eventId:u,data:r},[a.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(){return window}function wve(e){yA().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hte(){return typeof yA().WorkerGlobalScope<"u"&&typeof yA().importScripts=="function"}async function Eve(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Cve(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function _ve(){return hte()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mte="firebaseLocalStorageDb",Sve=1,dN="firebaseLocalStorage",pte="fbase_key";class RE{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function _k(e,t){return e.transaction([dN],t?"readwrite":"readonly").objectStore(dN)}function Nve(){const e=indexedDB.deleteDatabase(mte);return new RE(e).toPromise()}function pO(){const e=indexedDB.open(mte,Sve);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{const n=e.result;try{n.createObjectStore(dN,{keyPath:pte})}catch(a){r(a)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(dN)?t(n):(n.close(),await Nve(),t(await pO()))})})}async function DH(e,t,r){const n=_k(e,!0).put({[pte]:t,value:r});return new RE(n).toPromise()}async function kve(e,t){const r=_k(e,!1).get(t),n=await new RE(r).toPromise();return n===void 0?null:n.value}function PH(e,t){const r=_k(e,!0).delete(t);return new RE(r).toPromise()}const Bve=800,Tve=3;class gte{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await pO(),this.db)}async _withRetries(t){let r=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(r++>Tve)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hte()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ck._getInstance(_ve()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await Eve(),!this.activeServiceWorker)return;this.sender=new yve(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(r=t[0])!=null&&r.fulfilled&&(n=t[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Cve()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await pO();return await DH(t,uN,"1"),await PH(t,uN),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>DH(n,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(n=>kve(n,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>PH(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const s=_k(a,!1).getAll();return new RE(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(t.length!==0)for(const{fbase_key:a,value:s}of t)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Bve)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gte.type="LOCAL";const jve=gte;new DE(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ive(e,t){return t?Sh(t):($r(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR extends OR{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return m1(t,this._buildIdpRequest())}_linkToIdToken(t,r){return m1(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return m1(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function Fve(e){return lte(e.auth,new RR(e),e.bypassAuthState)}function Ove(e){const{auth:t,user:r}=e;return $r(r,t,"internal-error"),cve(r,new RR(e),e.bypassAuthState)}async function Dve(e){const{auth:t,user:r}=e;return $r(r,t,"internal-error"),lve(r,new RR(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xte{constructor(t,r,n,a,s=!1){this.auth=t,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:i,type:o}=t;if(i){this.reject(i);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Fve;case"linkViaPopup":case"linkViaRedirect":return Dve;case"reauthViaPopup":case"reauthViaRedirect":return Ove;default:lf(this.auth,"internal-error")}}resolve(t){$h(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){$h(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pve=new DE(2e3,1e4);class Zv extends xte{constructor(t,r,n,a,s){super(t,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,Zv.currentPopupAction&&Zv.currentPopupAction.cancel(),Zv.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return $r(t,this.auth,"internal-error"),t}async onExecution(){$h(this.filter.length===1,"Popup operations only handle one event");const t=PR();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(bA(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(bA(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zv.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bA(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Pve.get())};t()}}Zv.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rve="pendingRedirect",AS=new Map;class Lve extends xte{constructor(t,r,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let t=AS.get(this.auth._key());if(!t){try{const n=await Mve(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(r){t=()=>Promise.reject(r)}AS.set(this.auth._key(),t)}return this.bypassAuthState||AS.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Mve(e,t){const r=Hve(t),n=Qve(e);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function Uve(e,t){AS.set(e._key(),t)}function Qve(e){return Sh(e._redirectPersistence)}function Hve(e){return fS(Rve,e.config.apiKey,e.name)}async function Vve(e,t,r=!1){if(Kc(e.app))return Promise.reject(Fm(e));const n=px(e),a=Ive(n,t),i=await new Lve(n,a,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,t)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zve=600*1e3;class $ve{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(r=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Gve(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var n;if(t.error&&!vte(t)){const a=((n=t.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(bA(this.auth,a))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const n=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=zve&&this.cachedEventUids.clear(),this.cachedEventUids.has(RH(t))}saveEventToCache(t){this.cachedEventUids.add(RH(t)),this.lastProcessedEventTime=Date.now()}}function RH(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function vte({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function Gve(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vte(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kve(e,t={}){return c0(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qve=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Wve=/^https?/;async function Xve(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Kve(e);for(const r of t)try{if(Yve(r))return}catch{}lf(e,"unauthorized-domain")}function Yve(e){const t=AO(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return i.hostname===""&&n===""?r==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!Wve.test(r))return!1;if(qve.test(e))return n===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jve=new DE(3e4,6e4);function LH(){const e=yA().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}}function Zve(e){return new Promise((t,r)=>{var a,s,i;function n(){LH(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{LH(),r(bA(e,"network-request-failed"))},timeout:Jve.get()})}if((s=(a=yA().gapi)==null?void 0:a.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((i=yA().gapi)!=null&&i.load)n();else{const o=Vxe("iframefcb");return yA()[o]=()=>{gapi.load?n():r(bA(e,"network-request-failed"))},nte(`${Hxe()}?onload=${o}`).catch(c=>r(c))}}).catch(t=>{throw hS=null,t})}let hS=null;function e1e(e){return hS=hS||Zve(e),hS}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1e=new DE(5e3,15e3),r1e="__/auth/iframe",n1e="emulator/auth/iframe",a1e={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},s1e=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function i1e(e){const t=e.config;$r(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?jR(t,n1e):`https://${e.config.authDomain}/${r1e}`,n={apiKey:t.apiKey,appName:e.name,v:mx},a=s1e.get(e.config.apiHost);a&&(n.eid=a);const s=e._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${FE(n).slice(1)}`}async function o1e(e){const t=await e1e(e),r=yA().gapi;return $r(r,e,"internal-error"),t.open({where:document.body,url:i1e(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:a1e,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const i=bA(e,"network-request-failed"),o=yA().setTimeout(()=>{s(i)},t1e.get());function c(){yA().clearTimeout(o),a(n)}n.ping(c).then(c,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1e={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},c1e=500,u1e=600,d1e="_blank",f1e="http://localhost";class MH{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function A1e(e,t,r,n=c1e,a=u1e){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const c={...l1e,width:n.toString(),height:a.toString(),top:s,left:i},u=pl().toLowerCase();r&&(o=Xee(u)?d1e:r),qee(u)&&(t=t||f1e,c.scrollbars="yes");const d=Object.entries(c).reduce((h,[m,g])=>`${h}${m}=${g},`,"");if(Fxe(u)&&o!=="_self")return h1e(t||"",o),new MH(null);const f=window.open(t||"",o,d);$r(f,e,"popup-blocked");try{f.focus()}catch{}return new MH(f)}function h1e(e,t){const r=document.createElement("a");r.href=e,r.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1e="__/auth/handler",p1e="emulator/auth/handler",g1e=encodeURIComponent("fac");async function UH(e,t,r,n,a,s){$r(e.config.authDomain,e,"auth-domain-config-required"),$r(e.config.apiKey,e,"invalid-api-key");const i={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:mx,eventId:a};if(t instanceof ite){t.setDefaultLanguage(e.languageCode),i.providerId=t.providerId||"",tge(t.getCustomParameters())||(i.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,f]of Object.entries({}))i[d]=f}if(t instanceof PE){const d=t.getScopes().filter(f=>f!=="");d.length>0&&(i.scopes=d.join(","))}e.tenantId&&(i.tid=e.tenantId);const o=i;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const c=await e._getAppCheckToken(),u=c?`#${g1e}=${encodeURIComponent(c)}`:"";return`${x1e(e)}?${FE(o).slice(1)}${u}`}function x1e({config:e}){return e.emulator?jR(e,p1e):`https://${e.authDomain}/${m1e}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h3="webStorageSupport";class v1e{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ate,this._completeRedirectFn=Vve,this._overrideRedirectResult=Uve}async _openPopup(t,r,n,a){var i;$h((i=this.eventManagers[t._key()])==null?void 0:i.manager,"_initialize() not called before _openPopup()");const s=await UH(t,r,n,AO(),a);return A1e(t,s,PR())}async _openRedirect(t,r,n,a){await this._originValidation(t);const s=await UH(t,r,n,AO(),a);return wve(s),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):($h(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(t);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(t){const r=await o1e(t),n=new $ve(t);return r.register("authEvent",a=>($r(a==null?void 0:a.authEvent,t,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=r,n}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(h3,{type:h3},a=>{var i;const s=(i=a==null?void 0:a[0])==null?void 0:i[h3];s!==void 0&&r(!!s),lf(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Xve(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return tte()||Wee()||FR()}}const b1e=v1e;var QH="@firebase/auth",HH="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1e{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(n=>{t((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){$r(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1e(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function E1e(e){Gm(new Vh("auth",(t,{options:r})=>{const n=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=n.options;$r(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:i,authDomain:o,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rte(e)},u=new Mxe(n,a,s,c);return Wxe(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,n)=>{t.getProvider("auth-internal").initialize()})),Gm(new Vh("auth-internal",t=>{const r=px(t.getProvider("auth").getImmediate());return(n=>new y1e(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),sd(QH,HH,w1e(e)),sd(QH,HH,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1e=300,_1e=Oee("authIdTokenMaxAge")||C1e;let VH=null;const S1e=e=>async t=>{const r=t&&await t.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>_1e)return;const a=r==null?void 0:r.token;VH!==a&&(VH=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function bte(e=yk()){const t=OE(e,"auth");if(t.isInitialized())return t.getImmediate();const r=qxe(e,{popupRedirectResolver:b1e,persistence:[jve,vve,Ate]}),n=Oee("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const i=S1e(s.toString());mve(r,i,()=>i(r.currentUser)),hve(r,o=>i(o))}}const a=Iee("auth");return a&&Xxe(r,`http://${a}`),r}function N1e(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}Uxe({loadJS(e){return new Promise((t,r)=>{const n=document.createElement("script");n.setAttribute("src",e),n.onload=t,n.onerror=a=>{const s=bA("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",N1e().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});E1e("Browser");var k1e="firebase",B1e="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sd(k1e,B1e,"app");var zH=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Om,yte;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(E,N){function I(){}I.prototype=N.prototype,E.D=N.prototype,E.prototype=new I,E.prototype.constructor=E,E.C=function(L,D,k){for(var P=Array(arguments.length-2),R=2;R<arguments.length;R++)P[R-2]=arguments[R];return N.prototype[D].apply(L,P)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(E,N,I){I||(I=0);var L=Array(16);if(typeof N=="string")for(var D=0;16>D;++D)L[D]=N.charCodeAt(I++)|N.charCodeAt(I++)<<8|N.charCodeAt(I++)<<16|N.charCodeAt(I++)<<24;else for(D=0;16>D;++D)L[D]=N[I++]|N[I++]<<8|N[I++]<<16|N[I++]<<24;N=E.g[0],I=E.g[1],D=E.g[2];var k=E.g[3],P=N+(k^I&(D^k))+L[0]+3614090360&4294967295;N=I+(P<<7&4294967295|P>>>25),P=k+(D^N&(I^D))+L[1]+3905402710&4294967295,k=N+(P<<12&4294967295|P>>>20),P=D+(I^k&(N^I))+L[2]+606105819&4294967295,D=k+(P<<17&4294967295|P>>>15),P=I+(N^D&(k^N))+L[3]+3250441966&4294967295,I=D+(P<<22&4294967295|P>>>10),P=N+(k^I&(D^k))+L[4]+4118548399&4294967295,N=I+(P<<7&4294967295|P>>>25),P=k+(D^N&(I^D))+L[5]+1200080426&4294967295,k=N+(P<<12&4294967295|P>>>20),P=D+(I^k&(N^I))+L[6]+2821735955&4294967295,D=k+(P<<17&4294967295|P>>>15),P=I+(N^D&(k^N))+L[7]+4249261313&4294967295,I=D+(P<<22&4294967295|P>>>10),P=N+(k^I&(D^k))+L[8]+1770035416&4294967295,N=I+(P<<7&4294967295|P>>>25),P=k+(D^N&(I^D))+L[9]+2336552879&4294967295,k=N+(P<<12&4294967295|P>>>20),P=D+(I^k&(N^I))+L[10]+4294925233&4294967295,D=k+(P<<17&4294967295|P>>>15),P=I+(N^D&(k^N))+L[11]+2304563134&4294967295,I=D+(P<<22&4294967295|P>>>10),P=N+(k^I&(D^k))+L[12]+1804603682&4294967295,N=I+(P<<7&4294967295|P>>>25),P=k+(D^N&(I^D))+L[13]+4254626195&4294967295,k=N+(P<<12&4294967295|P>>>20),P=D+(I^k&(N^I))+L[14]+2792965006&4294967295,D=k+(P<<17&4294967295|P>>>15),P=I+(N^D&(k^N))+L[15]+1236535329&4294967295,I=D+(P<<22&4294967295|P>>>10),P=N+(D^k&(I^D))+L[1]+4129170786&4294967295,N=I+(P<<5&4294967295|P>>>27),P=k+(I^D&(N^I))+L[6]+3225465664&4294967295,k=N+(P<<9&4294967295|P>>>23),P=D+(N^I&(k^N))+L[11]+643717713&4294967295,D=k+(P<<14&4294967295|P>>>18),P=I+(k^N&(D^k))+L[0]+3921069994&4294967295,I=D+(P<<20&4294967295|P>>>12),P=N+(D^k&(I^D))+L[5]+3593408605&4294967295,N=I+(P<<5&4294967295|P>>>27),P=k+(I^D&(N^I))+L[10]+38016083&4294967295,k=N+(P<<9&4294967295|P>>>23),P=D+(N^I&(k^N))+L[15]+3634488961&4294967295,D=k+(P<<14&4294967295|P>>>18),P=I+(k^N&(D^k))+L[4]+3889429448&4294967295,I=D+(P<<20&4294967295|P>>>12),P=N+(D^k&(I^D))+L[9]+568446438&4294967295,N=I+(P<<5&4294967295|P>>>27),P=k+(I^D&(N^I))+L[14]+3275163606&4294967295,k=N+(P<<9&4294967295|P>>>23),P=D+(N^I&(k^N))+L[3]+4107603335&4294967295,D=k+(P<<14&4294967295|P>>>18),P=I+(k^N&(D^k))+L[8]+1163531501&4294967295,I=D+(P<<20&4294967295|P>>>12),P=N+(D^k&(I^D))+L[13]+2850285829&4294967295,N=I+(P<<5&4294967295|P>>>27),P=k+(I^D&(N^I))+L[2]+4243563512&4294967295,k=N+(P<<9&4294967295|P>>>23),P=D+(N^I&(k^N))+L[7]+1735328473&4294967295,D=k+(P<<14&4294967295|P>>>18),P=I+(k^N&(D^k))+L[12]+2368359562&4294967295,I=D+(P<<20&4294967295|P>>>12),P=N+(I^D^k)+L[5]+4294588738&4294967295,N=I+(P<<4&4294967295|P>>>28),P=k+(N^I^D)+L[8]+2272392833&4294967295,k=N+(P<<11&4294967295|P>>>21),P=D+(k^N^I)+L[11]+1839030562&4294967295,D=k+(P<<16&4294967295|P>>>16),P=I+(D^k^N)+L[14]+4259657740&4294967295,I=D+(P<<23&4294967295|P>>>9),P=N+(I^D^k)+L[1]+2763975236&4294967295,N=I+(P<<4&4294967295|P>>>28),P=k+(N^I^D)+L[4]+1272893353&4294967295,k=N+(P<<11&4294967295|P>>>21),P=D+(k^N^I)+L[7]+4139469664&4294967295,D=k+(P<<16&4294967295|P>>>16),P=I+(D^k^N)+L[10]+3200236656&4294967295,I=D+(P<<23&4294967295|P>>>9),P=N+(I^D^k)+L[13]+681279174&4294967295,N=I+(P<<4&4294967295|P>>>28),P=k+(N^I^D)+L[0]+3936430074&4294967295,k=N+(P<<11&4294967295|P>>>21),P=D+(k^N^I)+L[3]+3572445317&4294967295,D=k+(P<<16&4294967295|P>>>16),P=I+(D^k^N)+L[6]+76029189&4294967295,I=D+(P<<23&4294967295|P>>>9),P=N+(I^D^k)+L[9]+3654602809&4294967295,N=I+(P<<4&4294967295|P>>>28),P=k+(N^I^D)+L[12]+3873151461&4294967295,k=N+(P<<11&4294967295|P>>>21),P=D+(k^N^I)+L[15]+530742520&4294967295,D=k+(P<<16&4294967295|P>>>16),P=I+(D^k^N)+L[2]+3299628645&4294967295,I=D+(P<<23&4294967295|P>>>9),P=N+(D^(I|~k))+L[0]+4096336452&4294967295,N=I+(P<<6&4294967295|P>>>26),P=k+(I^(N|~D))+L[7]+1126891415&4294967295,k=N+(P<<10&4294967295|P>>>22),P=D+(N^(k|~I))+L[14]+2878612391&4294967295,D=k+(P<<15&4294967295|P>>>17),P=I+(k^(D|~N))+L[5]+4237533241&4294967295,I=D+(P<<21&4294967295|P>>>11),P=N+(D^(I|~k))+L[12]+1700485571&4294967295,N=I+(P<<6&4294967295|P>>>26),P=k+(I^(N|~D))+L[3]+2399980690&4294967295,k=N+(P<<10&4294967295|P>>>22),P=D+(N^(k|~I))+L[10]+4293915773&4294967295,D=k+(P<<15&4294967295|P>>>17),P=I+(k^(D|~N))+L[1]+2240044497&4294967295,I=D+(P<<21&4294967295|P>>>11),P=N+(D^(I|~k))+L[8]+1873313359&4294967295,N=I+(P<<6&4294967295|P>>>26),P=k+(I^(N|~D))+L[15]+4264355552&4294967295,k=N+(P<<10&4294967295|P>>>22),P=D+(N^(k|~I))+L[6]+2734768916&4294967295,D=k+(P<<15&4294967295|P>>>17),P=I+(k^(D|~N))+L[13]+1309151649&4294967295,I=D+(P<<21&4294967295|P>>>11),P=N+(D^(I|~k))+L[4]+4149444226&4294967295,N=I+(P<<6&4294967295|P>>>26),P=k+(I^(N|~D))+L[11]+3174756917&4294967295,k=N+(P<<10&4294967295|P>>>22),P=D+(N^(k|~I))+L[2]+718787259&4294967295,D=k+(P<<15&4294967295|P>>>17),P=I+(k^(D|~N))+L[9]+3951481745&4294967295,E.g[0]=E.g[0]+N&4294967295,E.g[1]=E.g[1]+(D+(P<<21&4294967295|P>>>11))&4294967295,E.g[2]=E.g[2]+D&4294967295,E.g[3]=E.g[3]+k&4294967295}n.prototype.u=function(E,N){N===void 0&&(N=E.length);for(var I=N-this.blockSize,L=this.B,D=this.h,k=0;k<N;){if(D==0)for(;k<=I;)a(this,E,k),k+=this.blockSize;if(typeof E=="string"){for(;k<N;)if(L[D++]=E.charCodeAt(k++),D==this.blockSize){a(this,L),D=0;break}}else for(;k<N;)if(L[D++]=E[k++],D==this.blockSize){a(this,L),D=0;break}}this.h=D,this.o+=N},n.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var N=1;N<E.length-8;++N)E[N]=0;var I=8*this.o;for(N=E.length-8;N<E.length;++N)E[N]=I&255,I/=256;for(this.u(E),E=Array(16),N=I=0;4>N;++N)for(var L=0;32>L;L+=8)E[I++]=this.g[N]>>>L&255;return E};function s(E,N){var I=o;return Object.prototype.hasOwnProperty.call(I,E)?I[E]:I[E]=N(E)}function i(E,N){this.h=N;for(var I=[],L=!0,D=E.length-1;0<=D;D--){var k=E[D]|0;L&&k==N||(I[D]=k,L=!1)}this.g=I}var o={};function c(E){return-128<=E&&128>E?s(E,function(N){return new i([N|0],0>N?-1:0)}):new i([E|0],0>E?-1:0)}function u(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return v(u(-E));for(var N=[],I=1,L=0;E>=I;L++)N[L]=E/I|0,I*=4294967296;return new i(N,0)}function d(E,N){if(E.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(E.charAt(0)=="-")return v(d(E.substring(1),N));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=u(Math.pow(N,8)),L=f,D=0;D<E.length;D+=8){var k=Math.min(8,E.length-D),P=parseInt(E.substring(D,D+k),N);8>k?(k=u(Math.pow(N,k)),L=L.j(k).add(u(P))):(L=L.j(I),L=L.add(u(P)))}return L}var f=c(0),h=c(1),m=c(16777216);e=i.prototype,e.m=function(){if(x(this))return-v(this).m();for(var E=0,N=1,I=0;I<this.g.length;I++){var L=this.i(I);E+=(0<=L?L:4294967296+L)*N,N*=4294967296}return E},e.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(g(this))return"0";if(x(this))return"-"+v(this).toString(E);for(var N=u(Math.pow(E,6)),I=this,L="";;){var D=T(I,N).g;I=y(I,D.j(N));var k=((0<I.g.length?I.g[0]:I.h)>>>0).toString(E);if(I=D,g(I))return k+L;for(;6>k.length;)k="0"+k;L=k+L}},e.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function g(E){if(E.h!=0)return!1;for(var N=0;N<E.g.length;N++)if(E.g[N]!=0)return!1;return!0}function x(E){return E.h==-1}e.l=function(E){return E=y(this,E),x(E)?-1:g(E)?0:1};function v(E){for(var N=E.g.length,I=[],L=0;L<N;L++)I[L]=~E.g[L];return new i(I,~E.h).add(h)}e.abs=function(){return x(this)?v(this):this},e.add=function(E){for(var N=Math.max(this.g.length,E.g.length),I=[],L=0,D=0;D<=N;D++){var k=L+(this.i(D)&65535)+(E.i(D)&65535),P=(k>>>16)+(this.i(D)>>>16)+(E.i(D)>>>16);L=P>>>16,k&=65535,P&=65535,I[D]=P<<16|k}return new i(I,I[I.length-1]&-2147483648?-1:0)};function y(E,N){return E.add(v(N))}e.j=function(E){if(g(this)||g(E))return f;if(x(this))return x(E)?v(this).j(v(E)):v(v(this).j(E));if(x(E))return v(this.j(v(E)));if(0>this.l(m)&&0>E.l(m))return u(this.m()*E.m());for(var N=this.g.length+E.g.length,I=[],L=0;L<2*N;L++)I[L]=0;for(L=0;L<this.g.length;L++)for(var D=0;D<E.g.length;D++){var k=this.i(L)>>>16,P=this.i(L)&65535,R=E.i(D)>>>16,W=E.i(D)&65535;I[2*L+2*D]+=P*W,w(I,2*L+2*D),I[2*L+2*D+1]+=k*W,w(I,2*L+2*D+1),I[2*L+2*D+1]+=P*R,w(I,2*L+2*D+1),I[2*L+2*D+2]+=k*R,w(I,2*L+2*D+2)}for(L=0;L<N;L++)I[L]=I[2*L+1]<<16|I[2*L];for(L=N;L<2*N;L++)I[L]=0;return new i(I,0)};function w(E,N){for(;(E[N]&65535)!=E[N];)E[N+1]+=E[N]>>>16,E[N]&=65535,N++}function _(E,N){this.g=E,this.h=N}function T(E,N){if(g(N))throw Error("division by zero");if(g(E))return new _(f,f);if(x(E))return N=T(v(E),N),new _(v(N.g),v(N.h));if(x(N))return N=T(E,v(N)),new _(v(N.g),N.h);if(30<E.g.length){if(x(E)||x(N))throw Error("slowDivide_ only works with positive integers.");for(var I=h,L=N;0>=L.l(E);)I=B(I),L=B(L);var D=j(I,1),k=j(L,1);for(L=j(L,2),I=j(I,2);!g(L);){var P=k.add(L);0>=P.l(E)&&(D=D.add(I),k=P),L=j(L,1),I=j(I,1)}return N=y(E,D.j(N)),new _(D,N)}for(D=f;0<=E.l(N);){for(I=Math.max(1,Math.floor(E.m()/N.m())),L=Math.ceil(Math.log(I)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),k=u(I),P=k.j(N);x(P)||0<P.l(E);)I-=L,k=u(I),P=k.j(N);g(k)&&(k=h),D=D.add(k),E=y(E,P)}return new _(D,E)}e.A=function(E){return T(this,E).h},e.and=function(E){for(var N=Math.max(this.g.length,E.g.length),I=[],L=0;L<N;L++)I[L]=this.i(L)&E.i(L);return new i(I,this.h&E.h)},e.or=function(E){for(var N=Math.max(this.g.length,E.g.length),I=[],L=0;L<N;L++)I[L]=this.i(L)|E.i(L);return new i(I,this.h|E.h)},e.xor=function(E){for(var N=Math.max(this.g.length,E.g.length),I=[],L=0;L<N;L++)I[L]=this.i(L)^E.i(L);return new i(I,this.h^E.h)};function B(E){for(var N=E.g.length+1,I=[],L=0;L<N;L++)I[L]=E.i(L)<<1|E.i(L-1)>>>31;return new i(I,E.h)}function j(E,N){var I=N>>5;N%=32;for(var L=E.g.length-I,D=[],k=0;k<L;k++)D[k]=0<N?E.i(k+I)>>>N|E.i(k+I+1)<<32-N:E.i(k+I);return new i(D,E.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,yte=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=u,i.fromString=d,Om=i}).apply(typeof zH<"u"?zH:typeof self<"u"?self:typeof window<"u"?window:{});var F_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wte,Bw,Ete,mS,gO,Cte,_te,Ste;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(O,re,oe){return O==Array.prototype||O==Object.prototype||(O[re]=oe.value),O};function r(O){O=[typeof globalThis=="object"&&globalThis,O,typeof window=="object"&&window,typeof self=="object"&&self,typeof F_=="object"&&F_];for(var re=0;re<O.length;++re){var oe=O[re];if(oe&&oe.Math==Math)return oe}throw Error("Cannot find global object")}var n=r(this);function a(O,re){if(re)e:{var oe=n;O=O.split(".");for(var ve=0;ve<O.length-1;ve++){var ze=O[ve];if(!(ze in oe))break e;oe=oe[ze]}O=O[O.length-1],ve=oe[O],re=re(ve),re!=ve&&re!=null&&t(oe,O,{configurable:!0,writable:!0,value:re})}}function s(O,re){O instanceof String&&(O+="");var oe=0,ve=!1,ze={next:function(){if(!ve&&oe<O.length){var ot=oe++;return{value:re(ot,O[ot]),done:!1}}return ve=!0,{done:!0,value:void 0}}};return ze[Symbol.iterator]=function(){return ze},ze}a("Array.prototype.values",function(O){return O||function(){return s(this,function(re,oe){return oe})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function c(O){var re=typeof O;return re=re!="object"?re:O?Array.isArray(O)?"array":re:"null",re=="array"||re=="object"&&typeof O.length=="number"}function u(O){var re=typeof O;return re=="object"&&O!=null||re=="function"}function d(O,re,oe){return O.call.apply(O.bind,arguments)}function f(O,re,oe){if(!O)throw Error();if(2<arguments.length){var ve=Array.prototype.slice.call(arguments,2);return function(){var ze=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ze,ve),O.apply(re,ze)}}return function(){return O.apply(re,arguments)}}function h(O,re,oe){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,h.apply(null,arguments)}function m(O,re){var oe=Array.prototype.slice.call(arguments,1);return function(){var ve=oe.slice();return ve.push.apply(ve,arguments),O.apply(this,ve)}}function g(O,re){function oe(){}oe.prototype=re.prototype,O.aa=re.prototype,O.prototype=new oe,O.prototype.constructor=O,O.Qb=function(ve,ze,ot){for(var Qt=Array(arguments.length-2),Dr=2;Dr<arguments.length;Dr++)Qt[Dr-2]=arguments[Dr];return re.prototype[ze].apply(ve,Qt)}}function x(O){const re=O.length;if(0<re){const oe=Array(re);for(let ve=0;ve<re;ve++)oe[ve]=O[ve];return oe}return[]}function v(O,re){for(let oe=1;oe<arguments.length;oe++){const ve=arguments[oe];if(c(ve)){const ze=O.length||0,ot=ve.length||0;O.length=ze+ot;for(let Qt=0;Qt<ot;Qt++)O[ze+Qt]=ve[Qt]}else O.push(ve)}}class y{constructor(re,oe){this.i=re,this.j=oe,this.h=0,this.g=null}get(){let re;return 0<this.h?(this.h--,re=this.g,this.g=re.next,re.next=null):re=this.i(),re}}function w(O){return/^[\s\xa0]*$/.test(O)}function _(){var O=o.navigator;return O&&(O=O.userAgent)?O:""}function T(O){return T[" "](O),O}T[" "]=function(){};var B=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function j(O,re,oe){for(const ve in O)re.call(oe,O[ve],ve,O)}function E(O,re){for(const oe in O)re.call(void 0,O[oe],oe,O)}function N(O){const re={};for(const oe in O)re[oe]=O[oe];return re}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(O,re){let oe,ve;for(let ze=1;ze<arguments.length;ze++){ve=arguments[ze];for(oe in ve)O[oe]=ve[oe];for(let ot=0;ot<I.length;ot++)oe=I[ot],Object.prototype.hasOwnProperty.call(ve,oe)&&(O[oe]=ve[oe])}}function D(O){var re=1;O=O.split(":");const oe=[];for(;0<re&&O.length;)oe.push(O.shift()),re--;return O.length&&oe.push(O.join(":")),oe}function k(O){o.setTimeout(()=>{throw O},0)}function P(){var O=K;let re=null;return O.g&&(re=O.g,O.g=O.g.next,O.g||(O.h=null),re.next=null),re}class R{constructor(){this.h=this.g=null}add(re,oe){const ve=W.get();ve.set(re,oe),this.h?this.h.next=ve:this.g=ve,this.h=ve}}var W=new y(()=>new V,O=>O.reset());class V{constructor(){this.next=this.g=this.h=null}set(re,oe){this.h=re,this.g=oe,this.next=null}reset(){this.next=this.g=this.h=null}}let G,z=!1,K=new R,J=()=>{const O=o.Promise.resolve(void 0);G=()=>{O.then(te)}};var te=()=>{for(var O;O=P();){try{O.h.call(O.g)}catch(oe){k(oe)}var re=W;re.j(O),100>re.h&&(re.h++,O.next=re.g,re.g=O)}z=!1};function M(){this.s=this.s,this.C=this.C}M.prototype.s=!1,M.prototype.ma=function(){this.s||(this.s=!0,this.N())},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(O,re){this.type=O,this.g=this.target=re,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var Y=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var O=!1,re=Object.defineProperty({},"passive",{get:function(){O=!0}});try{const oe=()=>{};o.addEventListener("test",oe,re),o.removeEventListener("test",oe,re)}catch{}return O}();function Z(O,re){if(H.call(this,O?O.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,O){var oe=this.type=O.type,ve=O.changedTouches&&O.changedTouches.length?O.changedTouches[0]:null;if(this.target=O.target||O.srcElement,this.g=re,re=O.relatedTarget){if(B){e:{try{T(re.nodeName);var ze=!0;break e}catch{}ze=!1}ze||(re=null)}}else oe=="mouseover"?re=O.fromElement:oe=="mouseout"&&(re=O.toElement);this.relatedTarget=re,ve?(this.clientX=ve.clientX!==void 0?ve.clientX:ve.pageX,this.clientY=ve.clientY!==void 0?ve.clientY:ve.pageY,this.screenX=ve.screenX||0,this.screenY=ve.screenY||0):(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0),this.button=O.button,this.key=O.key||"",this.ctrlKey=O.ctrlKey,this.altKey=O.altKey,this.shiftKey=O.shiftKey,this.metaKey=O.metaKey,this.pointerId=O.pointerId||0,this.pointerType=typeof O.pointerType=="string"?O.pointerType:ae[O.pointerType]||"",this.state=O.state,this.i=O,O.defaultPrevented&&Z.aa.h.call(this)}}g(Z,H);var ae={2:"touch",3:"pen",4:"mouse"};Z.prototype.h=function(){Z.aa.h.call(this);var O=this.i;O.preventDefault?O.preventDefault():O.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),ie=0;function ce(O,re,oe,ve,ze){this.listener=O,this.proxy=null,this.src=re,this.type=oe,this.capture=!!ve,this.ha=ze,this.key=++ie,this.da=this.fa=!1}function Ae(O){O.da=!0,O.listener=null,O.proxy=null,O.src=null,O.ha=null}function Fe(O){this.src=O,this.g={},this.h=0}Fe.prototype.add=function(O,re,oe,ve,ze){var ot=O.toString();O=this.g[ot],O||(O=this.g[ot]=[],this.h++);var Qt=_e(O,re,ve,ze);return-1<Qt?(re=O[Qt],oe||(re.fa=!1)):(re=new ce(re,this.src,ot,!!ve,ze),re.fa=oe,O.push(re)),re};function ne(O,re){var oe=re.type;if(oe in O.g){var ve=O.g[oe],ze=Array.prototype.indexOf.call(ve,re,void 0),ot;(ot=0<=ze)&&Array.prototype.splice.call(ve,ze,1),ot&&(Ae(re),O.g[oe].length==0&&(delete O.g[oe],O.h--))}}function _e(O,re,oe,ve){for(var ze=0;ze<O.length;++ze){var ot=O[ze];if(!ot.da&&ot.listener==re&&ot.capture==!!oe&&ot.ha==ve)return ze}return-1}var Ie="closure_lm_"+(1e6*Math.random()|0),Se={};function me(O,re,oe,ve,ze){if(Array.isArray(re)){for(var ot=0;ot<re.length;ot++)me(O,re[ot],oe,ve,ze);return null}return oe=ct(oe),O&&O[le]?O.K(re,oe,u(ve)?!!ve.capture:!1,ze):Be(O,re,oe,!1,ve,ze)}function Be(O,re,oe,ve,ze,ot){if(!re)throw Error("Invalid event type");var Qt=u(ze)?!!ze.capture:!!ze,Dr=qe(O);if(Dr||(O[Ie]=Dr=new Fe(O)),oe=Dr.add(re,oe,ve,Qt,ot),oe.proxy)return oe;if(ve=Le(),oe.proxy=ve,ve.src=O,ve.listener=oe,O.addEventListener)Y||(ze=Qt),ze===void 0&&(ze=!1),O.addEventListener(re.toString(),ve,ze);else if(O.attachEvent)O.attachEvent(Oe(re.toString()),ve);else if(O.addListener&&O.removeListener)O.addListener(ve);else throw Error("addEventListener and attachEvent are unavailable.");return oe}function Le(){function O(oe){return re.call(O.src,O.listener,oe)}const re=Pe;return O}function We(O,re,oe,ve,ze){if(Array.isArray(re))for(var ot=0;ot<re.length;ot++)We(O,re[ot],oe,ve,ze);else ve=u(ve)?!!ve.capture:!!ve,oe=ct(oe),O&&O[le]?(O=O.i,re=String(re).toString(),re in O.g&&(ot=O.g[re],oe=_e(ot,oe,ve,ze),-1<oe&&(Ae(ot[oe]),Array.prototype.splice.call(ot,oe,1),ot.length==0&&(delete O.g[re],O.h--)))):O&&(O=qe(O))&&(re=O.g[re.toString()],O=-1,re&&(O=_e(re,oe,ve,ze)),(oe=-1<O?re[O]:null)&&be(oe))}function be(O){if(typeof O!="number"&&O&&!O.da){var re=O.src;if(re&&re[le])ne(re.i,O);else{var oe=O.type,ve=O.proxy;re.removeEventListener?re.removeEventListener(oe,ve,O.capture):re.detachEvent?re.detachEvent(Oe(oe),ve):re.addListener&&re.removeListener&&re.removeListener(ve),(oe=qe(re))?(ne(oe,O),oe.h==0&&(oe.src=null,re[Ie]=null)):Ae(O)}}}function Oe(O){return O in Se?Se[O]:Se[O]="on"+O}function Pe(O,re){if(O.da)O=!0;else{re=new Z(re,this);var oe=O.listener,ve=O.ha||O.src;O.fa&&be(O),O=oe.call(ve,re)}return O}function qe(O){return O=O[Ie],O instanceof Fe?O:null}var et="__closure_events_fn_"+(1e9*Math.random()>>>0);function ct(O){return typeof O=="function"?O:(O[et]||(O[et]=function(re){return O.handleEvent(re)}),O[et])}function pt(){M.call(this),this.i=new Fe(this),this.M=this,this.F=null}g(pt,M),pt.prototype[le]=!0,pt.prototype.removeEventListener=function(O,re,oe,ve){We(this,O,re,oe,ve)};function Ft(O,re){var oe,ve=O.F;if(ve)for(oe=[];ve;ve=ve.F)oe.push(ve);if(O=O.M,ve=re.type||re,typeof re=="string")re=new H(re,O);else if(re instanceof H)re.target=re.target||O;else{var ze=re;re=new H(ve,O),L(re,ze)}if(ze=!0,oe)for(var ot=oe.length-1;0<=ot;ot--){var Qt=re.g=oe[ot];ze=Ut(Qt,ve,!0,re)&&ze}if(Qt=re.g=O,ze=Ut(Qt,ve,!0,re)&&ze,ze=Ut(Qt,ve,!1,re)&&ze,oe)for(ot=0;ot<oe.length;ot++)Qt=re.g=oe[ot],ze=Ut(Qt,ve,!1,re)&&ze}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var O=this.i,re;for(re in O.g){for(var oe=O.g[re],ve=0;ve<oe.length;ve++)Ae(oe[ve]);delete O.g[re],O.h--}}this.F=null},pt.prototype.K=function(O,re,oe,ve){return this.i.add(String(O),re,!1,oe,ve)},pt.prototype.L=function(O,re,oe,ve){return this.i.add(String(O),re,!0,oe,ve)};function Ut(O,re,oe,ve){if(re=O.i.g[String(re)],!re)return!0;re=re.concat();for(var ze=!0,ot=0;ot<re.length;++ot){var Qt=re[ot];if(Qt&&!Qt.da&&Qt.capture==oe){var Dr=Qt.listener,yn=Qt.ha||Qt.src;Qt.fa&&ne(O.i,Qt),ze=Dr.call(yn,ve)!==!1&&ze}}return ze&&!ve.defaultPrevented}function Rt(O,re,oe){if(typeof O=="function")oe&&(O=h(O,oe));else if(O&&typeof O.handleEvent=="function")O=h(O.handleEvent,O);else throw Error("Invalid listener argument");return 2147483647<Number(re)?-1:o.setTimeout(O,re||0)}function Ht(O){O.g=Rt(()=>{O.g=null,O.i&&(O.i=!1,Ht(O))},O.l);const re=O.h;O.h=null,O.m.apply(null,re)}class yt extends M{constructor(re,oe){super(),this.m=re,this.l=oe,this.h=null,this.i=!1,this.g=null}j(re){this.h=arguments,this.g?this.i=!0:Ht(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jr(O){M.call(this),this.h=O,this.g={}}g(jr,M);var rr=[];function on(O){j(O.g,function(re,oe){this.g.hasOwnProperty(oe)&&be(re)},O),O.g={}}jr.prototype.N=function(){jr.aa.N.call(this),on(this)},jr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kr=o.JSON.stringify,Kr=o.JSON.parse,Fn=class{stringify(O){return o.JSON.stringify(O,void 0)}parse(O){return o.JSON.parse(O,void 0)}};function Rr(){}Rr.prototype.h=null;function bs(O){return O.h||(O.h=O.i())}function pn(){}var da={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Da(){H.call(this,"d")}g(Da,H);function an(){H.call(this,"c")}g(an,H);var gr={},tt=null;function gt(){return tt=tt||new pt}gr.La="serverreachability";function Je(O){H.call(this,gr.La,O)}g(Je,H);function xt(O){const re=gt();Ft(re,new Je(re))}gr.STAT_EVENT="statevent";function Et(O,re){H.call(this,gr.STAT_EVENT,O),this.stat=re}g(Et,H);function bt(O){const re=gt();Ft(re,new Et(re,O))}gr.Ma="timingevent";function ar(O,re){H.call(this,gr.Ma,O),this.size=re}g(ar,H);function vr(O,re){if(typeof O!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){O()},re)}function Yr(){this.g=!0}Yr.prototype.xa=function(){this.g=!1};function tn(O,re,oe,ve,ze,ot){O.info(function(){if(O.g)if(ot)for(var Qt="",Dr=ot.split("&"),yn=0;yn<Dr.length;yn++){var Jr=Dr[yn].split("=");if(1<Jr.length){var $n=Jr[0];Jr=Jr[1];var aa=$n.split("_");Qt=2<=aa.length&&aa[1]=="type"?Qt+($n+"="+Jr+"&"):Qt+($n+"=redacted&")}}else Qt=null;else Qt=ot;return"XMLHTTP REQ ("+ve+") [attempt "+ze+"]: "+re+`
`+oe+`
`+Qt})}function Xr(O,re,oe,ve,ze,ot,Qt){O.info(function(){return"XMLHTTP RESP ("+ve+") [ attempt "+ze+"]: "+re+`
`+oe+`
`+ot+" "+Qt})}function he(O,re,oe,ve){O.info(function(){return"XMLHTTP TEXT ("+re+"): "+Ce(O,oe)+(ve?" "+ve:"")})}function Te(O,re){O.info(function(){return"TIMEOUT: "+re})}Yr.prototype.info=function(){};function Ce(O,re){if(!O.g)return re;if(!re)return null;try{var oe=JSON.parse(re);if(oe){for(O=0;O<oe.length;O++)if(Array.isArray(oe[O])){var ve=oe[O];if(!(2>ve.length)){var ze=ve[1];if(Array.isArray(ze)&&!(1>ze.length)){var ot=ze[0];if(ot!="noop"&&ot!="stop"&&ot!="close")for(var Qt=1;Qt<ze.length;Qt++)ze[Qt]=""}}}}return kr(oe)}catch{return re}}var we={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ne={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},je;function Ye(){}g(Ye,Rr),Ye.prototype.g=function(){return new XMLHttpRequest},Ye.prototype.i=function(){return{}},je=new Ye;function dt(O,re,oe,ve){this.j=O,this.i=re,this.l=oe,this.R=ve||1,this.U=new jr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $e}function $e(){this.i=null,this.g="",this.h=!1}var nt={},it={};function Ot(O,re,oe){O.L=1,O.v=gu(Bi(re)),O.m=oe,O.P=!0,zt(O,null)}function zt(O,re){O.F=Date.now(),Kt(O),O.A=Bi(O.v);var oe=O.A,ve=O.R;Array.isArray(ve)||(ve=[String(ve)]),Or(oe.i,"t",ve),O.C=0,oe=O.j.J,O.h=new $e,O.g=fe(O.j,oe?re:null,!O.m),0<O.O&&(O.M=new yt(h(O.Y,O,O.g),O.O)),re=O.U,oe=O.g,ve=O.ca;var ze="readystatechange";Array.isArray(ze)||(ze&&(rr[0]=ze.toString()),ze=rr);for(var ot=0;ot<ze.length;ot++){var Qt=me(oe,ze[ot],ve||re.handleEvent,!1,re.h||re);if(!Qt)break;re.g[Qt.key]=Qt}re=O.H?N(O.H):{},O.m?(O.u||(O.u="POST"),re["Content-Type"]="application/x-www-form-urlencoded",O.g.ea(O.A,O.u,O.m,re)):(O.u="GET",O.g.ea(O.A,O.u,null,re)),xt(),tn(O.i,O.u,O.A,O.l,O.R,O.m)}dt.prototype.ca=function(O){O=O.target;const re=this.M;re&&Cs(O)==3?re.j():this.Y(O)},dt.prototype.Y=function(O){try{if(O==this.g)e:{const aa=Cs(this.g);var re=this.g.Ba();const Kl=this.g.Z();if(!(3>aa)&&(aa!=3||this.g&&(this.h.h||this.g.oa()||y0(this.g)))){this.J||aa!=4||re==7||(re==8||0>=Kl?xt(3):xt(2)),ln(this);var oe=this.g.Z();this.X=oe;t:if(Zt(this)){var ve=y0(this.g);O="";var ze=ve.length,ot=Cs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hn(this),cn(this);var Qt="";break t}this.h.i=new o.TextDecoder}for(re=0;re<ze;re++)this.h.h=!0,O+=this.h.i.decode(ve[re],{stream:!(ot&&re==ze-1)});ve.length=0,this.h.g+=O,this.C=0,Qt=this.h.g}else Qt=this.g.oa();if(this.o=oe==200,Xr(this.i,this.u,this.A,this.l,this.R,aa,oe),this.o){if(this.T&&!this.K){t:{if(this.g){var Dr,yn=this.g;if((Dr=yn.g?yn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Dr)){var Jr=Dr;break t}}Jr=null}if(oe=Jr)he(this.i,this.l,oe,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ys(this,oe);else{this.o=!1,this.s=3,bt(12),hn(this),cn(this);break e}}if(this.P){oe=!0;let os;for(;!this.J&&this.C<Qt.length;)if(os=Vt(this,Qt),os==it){aa==4&&(this.s=4,bt(14),oe=!1),he(this.i,this.l,null,"[Incomplete Response]");break}else if(os==nt){this.s=4,bt(15),he(this.i,this.l,Qt,"[Invalid Chunk]"),oe=!1;break}else he(this.i,this.l,os,null),ys(this,os);if(Zt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),aa!=4||Qt.length!=0||this.h.h||(this.s=1,bt(16),oe=!1),this.o=this.o&&oe,!oe)he(this.i,this.l,Qt,"[Invalid Chunked Response]"),hn(this),cn(this);else if(0<Qt.length&&!this.W){this.W=!0;var $n=this.j;$n.g==this&&$n.ba&&!$n.M&&($n.j.info("Great, no buffering proxy detected. Bytes received: "+Qt.length),Eu($n),$n.M=!0,bt(11))}}else he(this.i,this.l,Qt,null),ys(this,Qt);aa==4&&hn(this),this.o&&!this.J&&(aa==4?Cu(this.j,this):(this.o=!1,Kt(this)))}else bu(this.g),oe==400&&0<Qt.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),hn(this),cn(this)}}}catch{}finally{}};function Zt(O){return O.g?O.u=="GET"&&O.L!=2&&O.j.Ca:!1}function Vt(O,re){var oe=O.C,ve=re.indexOf(`
`,oe);return ve==-1?it:(oe=Number(re.substring(oe,ve)),isNaN(oe)?nt:(ve+=1,ve+oe>re.length?it:(re=re.slice(ve,ve+oe),O.C=ve+oe,re)))}dt.prototype.cancel=function(){this.J=!0,hn(this)};function Kt(O){O.S=Date.now()+O.I,Br(O,O.I)}function Br(O,re){if(O.B!=null)throw Error("WatchDog timer not null");O.B=vr(h(O.ba,O),re)}function ln(O){O.B&&(o.clearTimeout(O.B),O.B=null)}dt.prototype.ba=function(){this.B=null;const O=Date.now();0<=O-this.S?(Te(this.i,this.A),this.L!=2&&(xt(),bt(17)),hn(this),this.s=2,cn(this)):Br(this,this.S-O)};function cn(O){O.j.G==0||O.J||Cu(O.j,O)}function hn(O){ln(O);var re=O.M;re&&typeof re.ma=="function"&&re.ma(),O.M=null,on(O.U),O.g&&(re=O.g,O.g=null,re.abort(),re.ma())}function ys(O,re){try{var oe=O.j;if(oe.G!=0&&(oe.g==O||Ni(oe.h,O))){if(!O.K&&Ni(oe.h,O)&&oe.G==3){try{var ve=oe.Da.g.parse(re)}catch{ve=null}if(Array.isArray(ve)&&ve.length==3){var ze=ve;if(ze[0]==0){e:if(!oe.u){if(oe.g)if(oe.g.F+3e3<O.F)kc(oe),wf(oe);else break e;yd(oe),bt(18)}}else oe.za=ze[1],0<oe.za-oe.T&&37500>ze[2]&&oe.F&&oe.v==0&&!oe.C&&(oe.C=vr(h(oe.Za,oe),6e3));if(1>=Us(oe.h)&&oe.ca){try{oe.ca()}catch{}oe.ca=void 0}}else Ki(oe,11)}else if((O.K||oe.g==O)&&kc(oe),!w(re))for(ze=oe.Da.g.parse(re),re=0;re<ze.length;re++){let Jr=ze[re];if(oe.T=Jr[0],Jr=Jr[1],oe.G==2)if(Jr[0]=="c"){oe.K=Jr[1],oe.ia=Jr[2];const $n=Jr[3];$n!=null&&(oe.la=$n,oe.j.info("VER="+oe.la));const aa=Jr[4];aa!=null&&(oe.Aa=aa,oe.j.info("SVER="+oe.Aa));const Kl=Jr[5];Kl!=null&&typeof Kl=="number"&&0<Kl&&(ve=1.5*Kl,oe.L=ve,oe.j.info("backChannelRequestTimeoutMs_="+ve)),ve=oe;const os=O.g;if(os){const Qo=os.g?os.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qo){var ot=ve.h;ot.g||Qo.indexOf("spdy")==-1&&Qo.indexOf("quic")==-1&&Qo.indexOf("h2")==-1||(ot.j=ot.l,ot.g=new Set,ot.h&&(Ea(ot,ot.h),ot.h=null))}if(ve.D){const _u=os.g?os.g.getResponseHeader("X-HTTP-Session-Id"):null;_u&&(ve.ya=_u,zn(ve.I,ve.D,_u))}}oe.G=3,oe.l&&oe.l.ua(),oe.ba&&(oe.R=Date.now()-O.F,oe.j.info("Handshake RTT: "+oe.R+"ms")),ve=oe;var Qt=O;if(ve.qa=X(ve,ve.J?ve.ia:null,ve.W),Qt.K){ui(ve.h,Qt);var Dr=Qt,yn=ve.L;yn&&(Dr.I=yn),Dr.B&&(ln(Dr),Kt(Dr)),ve.g=Qt}else Cf(ve);0<oe.i.length&&Ef(oe)}else Jr[0]!="stop"&&Jr[0]!="close"||Ki(oe,7);else oe.G==3&&(Jr[0]=="stop"||Jr[0]=="close"?Jr[0]=="stop"?Ki(oe,7):Nc(oe):Jr[0]!="noop"&&oe.l&&oe.l.ta(Jr),oe.v=0)}}xt(4)}catch{}}var Po=class{constructor(O,re){this.g=O,this.map=re}};function ws(O){this.l=O||10,o.PerformanceNavigationTiming?(O=o.performance.getEntriesByType("navigation"),O=0<O.length&&(O[0].nextHopProtocol=="hq"||O[0].nextHopProtocol=="h2")):O=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=O?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ci(O){return O.h?!0:O.g?O.g.size>=O.j:!1}function Us(O){return O.h?1:O.g?O.g.size:0}function Ni(O,re){return O.h?O.h==re:O.g?O.g.has(re):!1}function Ea(O,re){O.g?O.g.add(re):O.h=re}function ui(O,re){O.h&&O.h==re?O.h=null:O.g&&O.g.has(re)&&O.g.delete(re)}ws.prototype.cancel=function(){if(this.i=vf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const O of this.g.values())O.cancel();this.g.clear()}};function vf(O){if(O.h!=null)return O.i.concat(O.h.D);if(O.g!=null&&O.g.size!==0){let re=O.i;for(const oe of O.g.values())re=re.concat(oe.D);return re}return x(O.i)}function x0(O){if(O.V&&typeof O.V=="function")return O.V();if(typeof Map<"u"&&O instanceof Map||typeof Set<"u"&&O instanceof Set)return Array.from(O.values());if(typeof O=="string")return O.split("");if(c(O)){for(var re=[],oe=O.length,ve=0;ve<oe;ve++)re.push(O[ve]);return re}re=[],oe=0;for(ve in O)re[oe++]=O[ve];return re}function hu(O){if(O.na&&typeof O.na=="function")return O.na();if(!O.V||typeof O.V!="function"){if(typeof Map<"u"&&O instanceof Map)return Array.from(O.keys());if(!(typeof Set<"u"&&O instanceof Set)){if(c(O)||typeof O=="string"){var re=[];O=O.length;for(var oe=0;oe<O;oe++)re.push(oe);return re}re=[],oe=0;for(const ve in O)re[oe++]=ve;return re}}}function LA(O,re){if(O.forEach&&typeof O.forEach=="function")O.forEach(re,void 0);else if(c(O)||typeof O=="string")Array.prototype.forEach.call(O,re,void 0);else for(var oe=hu(O),ve=x0(O),ze=ve.length,ot=0;ot<ze;ot++)re.call(void 0,ve[ot],oe&&oe[ot],O)}var ki=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bf(O,re){if(O){O=O.split("&");for(var oe=0;oe<O.length;oe++){var ve=O[oe].indexOf("="),ze=null;if(0<=ve){var ot=O[oe].substring(0,ve);ze=O[oe].substring(ve+1)}else ot=O[oe];re(ot,ze?decodeURIComponent(ze.replace(/\+/g," ")):"")}}}function On(O){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,O instanceof On){this.h=O.h,mu(this,O.j),this.o=O.o,this.g=O.g,pu(this,O.s),this.l=O.l;var re=O.i,oe=new Ql;oe.i=re.i,re.g&&(oe.g=new Map(re.g),oe.h=re.h),Ul(this,oe),this.m=O.m}else O&&(re=String(O).match(ki))?(this.h=!1,mu(this,re[1]||"",!0),this.o=Ro(re[2]||""),this.g=Ro(re[3]||"",!0),pu(this,re[4]),this.l=Ro(re[5]||"",!0),Ul(this,re[6]||"",!0),this.m=Ro(re[7]||"")):(this.h=!1,this.i=new Ql(null,this.h))}On.prototype.toString=function(){var O=[],re=this.j;re&&O.push(wc(re,MA,!0),":");var oe=this.g;return(oe||re=="file")&&(O.push("//"),(re=this.o)&&O.push(wc(re,MA,!0),"@"),O.push(encodeURIComponent(String(oe)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),oe=this.s,oe!=null&&O.push(":",String(oe))),(oe=this.l)&&(this.g&&oe.charAt(0)!="/"&&O.push("/"),O.push(wc(oe,oe.charAt(0)=="/"?Ec:UA,!0))),(oe=this.i.toString())&&O.push("?",oe),(oe=this.m)&&O.push("#",wc(oe,Cc)),O.join("")};function Bi(O){return new On(O)}function mu(O,re,oe){O.j=oe?Ro(re,!0):re,O.j&&(O.j=O.j.replace(/:$/,""))}function pu(O,re){if(re){if(re=Number(re),isNaN(re)||0>re)throw Error("Bad port number "+re);O.s=re}else O.s=null}function Ul(O,re,oe){re instanceof Ql?(O.i=re,b0(O.i,O.h)):(oe||(re=wc(re,yf)),O.i=new Ql(re,O.h))}function zn(O,re,oe){O.i.set(re,oe)}function gu(O){return zn(O,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),O}function Ro(O,re){return O?re?decodeURI(O.replace(/%25/g,"%2525")):decodeURIComponent(O):""}function wc(O,re,oe){return typeof O=="string"?(O=encodeURI(O).replace(re,v0),oe&&(O=O.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O):null}function v0(O){return O=O.charCodeAt(0),"%"+(O>>4&15).toString(16)+(O&15).toString(16)}var MA=/[#\/\?@]/g,UA=/[#\?:]/g,Ec=/[#\?]/g,yf=/[#\?@]/g,Cc=/#/g;function Ql(O,re){this.h=this.g=null,this.i=O||null,this.j=!!re}function fa(O){O.g||(O.g=new Map,O.h=0,O.i&&bf(O.i,function(re,oe){O.add(decodeURIComponent(re.replace(/\+/g," ")),oe)}))}e=Ql.prototype,e.add=function(O,re){fa(this),this.i=null,O=Vl(this,O);var oe=this.g.get(O);return oe||this.g.set(O,oe=[]),oe.push(re),this.h+=1,this};function _c(O,re){fa(O),re=Vl(O,re),O.g.has(re)&&(O.i=null,O.h-=O.g.get(re).length,O.g.delete(re))}function Hl(O,re){return fa(O),re=Vl(O,re),O.g.has(re)}e.forEach=function(O,re){fa(this),this.g.forEach(function(oe,ve){oe.forEach(function(ze){O.call(re,ze,ve,this)},this)},this)},e.na=function(){fa(this);const O=Array.from(this.g.values()),re=Array.from(this.g.keys()),oe=[];for(let ve=0;ve<re.length;ve++){const ze=O[ve];for(let ot=0;ot<ze.length;ot++)oe.push(re[ve])}return oe},e.V=function(O){fa(this);let re=[];if(typeof O=="string")Hl(this,O)&&(re=re.concat(this.g.get(Vl(this,O))));else{O=Array.from(this.g.values());for(let oe=0;oe<O.length;oe++)re=re.concat(O[oe])}return re},e.set=function(O,re){return fa(this),this.i=null,O=Vl(this,O),Hl(this,O)&&(this.h-=this.g.get(O).length),this.g.set(O,[re]),this.h+=1,this},e.get=function(O,re){return O?(O=this.V(O),0<O.length?String(O[0]):re):re};function Or(O,re,oe){_c(O,re),0<oe.length&&(O.i=null,O.g.set(Vl(O,re),x(oe)),O.h+=oe.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const O=[],re=Array.from(this.g.keys());for(var oe=0;oe<re.length;oe++){var ve=re[oe];const ot=encodeURIComponent(String(ve)),Qt=this.V(ve);for(ve=0;ve<Qt.length;ve++){var ze=ot;Qt[ve]!==""&&(ze+="="+encodeURIComponent(String(Qt[ve]))),O.push(ze)}}return this.i=O.join("&")};function Vl(O,re){return re=String(re),O.j&&(re=re.toLowerCase()),re}function b0(O,re){re&&!O.j&&(fa(O),O.i=null,O.g.forEach(function(oe,ve){var ze=ve.toLowerCase();ve!=ze&&(_c(this,ve),Or(this,ze,oe))},O)),O.j=re}function zi(O,re){const oe=new Yr;if(o.Image){const ve=new Image;ve.onload=m(ho,oe,"TestLoadImage: loaded",!0,re,ve),ve.onerror=m(ho,oe,"TestLoadImage: error",!1,re,ve),ve.onabort=m(ho,oe,"TestLoadImage: abort",!1,re,ve),ve.ontimeout=m(ho,oe,"TestLoadImage: timeout",!1,re,ve),o.setTimeout(function(){ve.ontimeout&&ve.ontimeout()},1e4),ve.src=O}else re(!1)}function Lo(O,re){const oe=new Yr,ve=new AbortController,ze=setTimeout(()=>{ve.abort(),ho(oe,"TestPingServer: timeout",!1,re)},1e4);fetch(O,{signal:ve.signal}).then(ot=>{clearTimeout(ze),ot.ok?ho(oe,"TestPingServer: ok",!0,re):ho(oe,"TestPingServer: server error",!1,re)}).catch(()=>{clearTimeout(ze),ho(oe,"TestPingServer: error",!1,re)})}function ho(O,re,oe,ve,ze){try{ze&&(ze.onload=null,ze.onerror=null,ze.onabort=null,ze.ontimeout=null),ve(oe)}catch{}}function zl(){this.g=new Fn}function Mo(O,re,oe){const ve=oe||"";try{LA(O,function(ze,ot){let Qt=ze;u(ze)&&(Qt=kr(ze)),re.push(ve+ot+"="+encodeURIComponent(Qt))})}catch(ze){throw re.push(ve+"type="+encodeURIComponent("_badmap")),ze}}function xu(O){this.l=O.Ub||null,this.j=O.eb||!1}g(xu,Rr),xu.prototype.g=function(){return new Sc(this.l,this.j)},xu.prototype.i=function(O){return function(){return O}}({});function Sc(O,re){pt.call(this),this.D=O,this.o=re,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(Sc,pt),e=Sc.prototype,e.open=function(O,re){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=O,this.A=re,this.readyState=1,$i(this)},e.send=function(O){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const re={headers:this.u,method:this.B,credentials:this.m,cache:void 0};O&&(re.body=O),(this.D||o).fetch(new Request(this.A,re)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Uo(this)),this.readyState=0},e.Sa=function(O){if(this.g&&(this.l=O,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=O.headers,this.readyState=2,$i(this)),this.g&&(this.readyState=3,$i(this),this.g)))if(this.responseType==="arraybuffer")O.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in O){if(this.j=O.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;QA(this)}else O.text().then(this.Ra.bind(this),this.ga.bind(this))};function QA(O){O.j.read().then(O.Pa.bind(O)).catch(O.ga.bind(O))}e.Pa=function(O){if(this.g){if(this.o&&O.value)this.response.push(O.value);else if(!this.o){var re=O.value?O.value:new Uint8Array(0);(re=this.v.decode(re,{stream:!O.done}))&&(this.response=this.responseText+=re)}O.done?Uo(this):$i(this),this.readyState==3&&QA(this)}},e.Ra=function(O){this.g&&(this.response=this.responseText=O,Uo(this))},e.Qa=function(O){this.g&&(this.response=O,Uo(this))},e.ga=function(){this.g&&Uo(this)};function Uo(O){O.readyState=4,O.l=null,O.j=null,O.v=null,$i(O)}e.setRequestHeader=function(O,re){this.u.append(O,re)},e.getResponseHeader=function(O){return this.h&&this.h.get(O.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const O=[],re=this.h.entries();for(var oe=re.next();!oe.done;)oe=oe.value,O.push(oe[0]+": "+oe[1]),oe=re.next();return O.join(`\r
`)};function $i(O){O.onreadystatechange&&O.onreadystatechange.call(O)}Object.defineProperty(Sc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(O){this.m=O?"include":"same-origin"}});function $l(O){let re="";return j(O,function(oe,ve){re+=ve,re+=":",re+=oe,re+=`\r
`}),re}function Es(O,re,oe){e:{for(ve in oe){var ve=!1;break e}ve=!0}ve||(oe=$l(oe),typeof O=="string"?oe!=null&&encodeURIComponent(String(oe)):zn(O,re,oe))}function bn(O){pt.call(this),this.headers=new Map,this.o=O||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(bn,pt);var vu=/^https?$/i,Gl=["POST","PUT"];e=bn.prototype,e.Ha=function(O){this.J=O},e.ea=function(O,re,oe,ve){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+O);re=re?re.toUpperCase():"GET",this.D=O,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():je.g(),this.v=this.o?bs(this.o):bs(je),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(re,String(O),!0),this.B=!1}catch(ot){HA(this,ot);return}if(O=oe||"",oe=new Map(this.headers),ve)if(Object.getPrototypeOf(ve)===Object.prototype)for(var ze in ve)oe.set(ze,ve[ze]);else if(typeof ve.keys=="function"&&typeof ve.get=="function")for(const ot of ve.keys())oe.set(ot,ve.get(ot));else throw Error("Unknown input type for opt_headers: "+String(ve));ve=Array.from(oe.keys()).find(ot=>ot.toLowerCase()=="content-type"),ze=o.FormData&&O instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Gl,re,void 0))||ve||ze||oe.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ot,Qt]of oe)this.g.setRequestHeader(ot,Qt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Gi(this),this.u=!0,this.g.send(O),this.u=!1}catch(ot){HA(this,ot)}};function HA(O,re){O.h=!1,O.g&&(O.j=!0,O.g.abort(),O.j=!1),O.l=re,O.m=5,pd(O),yl(O)}function pd(O){O.A||(O.A=!0,Ft(O,"complete"),Ft(O,"error"))}e.abort=function(O){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=O||7,Ft(this,"complete"),Ft(this,"abort"),yl(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yl(this,!0)),bn.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?gd(this):this.bb())},e.bb=function(){gd(this)};function gd(O){if(O.h&&typeof i<"u"&&(!O.v[1]||Cs(O)!=4||O.Z()!=2)){if(O.u&&Cs(O)==4)Rt(O.Ea,0,O);else if(Ft(O,"readystatechange"),Cs(O)==4){O.h=!1;try{const Qt=O.Z();e:switch(Qt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var re=!0;break e;default:re=!1}var oe;if(!(oe=re)){var ve;if(ve=Qt===0){var ze=String(O.D).match(ki)[1]||null;!ze&&o.self&&o.self.location&&(ze=o.self.location.protocol.slice(0,-1)),ve=!vu.test(ze?ze.toLowerCase():"")}oe=ve}if(oe)Ft(O,"complete"),Ft(O,"success");else{O.m=6;try{var ot=2<Cs(O)?O.g.statusText:""}catch{ot=""}O.l=ot+" ["+O.Z()+"]",pd(O)}}finally{yl(O)}}}}function yl(O,re){if(O.g){Gi(O);const oe=O.g,ve=O.v[0]?()=>{}:null;O.g=null,O.v=null,re||Ft(O,"ready");try{oe.onreadystatechange=ve}catch{}}}function Gi(O){O.I&&(o.clearTimeout(O.I),O.I=null)}e.isActive=function(){return!!this.g};function Cs(O){return O.g?O.g.readyState:0}e.Z=function(){try{return 2<Cs(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(O){if(this.g){var re=this.g.responseText;return O&&re.indexOf(O)==0&&(re=re.substring(O.length)),Kr(re)}};function y0(O){try{if(!O.g)return null;if("response"in O.g)return O.g.response;switch(O.H){case"":case"text":return O.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in O.g)return O.g.mozResponseArrayBuffer}return null}catch{return null}}function bu(O){const re={};O=(O.g&&2<=Cs(O)&&O.g.getAllResponseHeaders()||"").split(`\r
`);for(let ve=0;ve<O.length;ve++){if(w(O[ve]))continue;var oe=D(O[ve]);const ze=oe[0];if(oe=oe[1],typeof oe!="string")continue;oe=oe.trim();const ot=re[ze]||[];re[ze]=ot,ot.push(oe)}E(re,function(ve){return ve.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ti(O,re,oe){return oe&&oe.internalChannelParams&&oe.internalChannelParams[O]||re}function yu(O){this.Aa=0,this.i=[],this.j=new Yr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ti("failFast",!1,O),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ti("baseRetryDelayMs",5e3,O),this.cb=Ti("retryDelaySeedMs",1e4,O),this.Wa=Ti("forwardChannelMaxRetries",2,O),this.wa=Ti("forwardChannelRequestTimeoutMs",2e4,O),this.pa=O&&O.xmlHttpFactory||void 0,this.Xa=O&&O.Tb||void 0,this.Ca=O&&O.useFetchStreams||!1,this.L=void 0,this.J=O&&O.supportsCrossDomainXhr||!1,this.K="",this.h=new ws(O&&O.concurrentRequestLimit),this.Da=new zl,this.P=O&&O.fastHandshake||!1,this.O=O&&O.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=O&&O.Rb||!1,O&&O.xa&&this.j.xa(),O&&O.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&O&&O.detectBufferingProxy||!1,this.ja=void 0,O&&O.longPollingTimeout&&0<O.longPollingTimeout&&(this.ja=O.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=yu.prototype,e.la=8,e.G=1,e.connect=function(O,re,oe,ve){bt(0),this.W=O,this.H=re||{},oe&&ve!==void 0&&(this.H.OSID=oe,this.H.OAID=ve),this.F=this.X,this.I=X(this,null,this.W),Ef(this)};function Nc(O){if(xd(O),O.G==3){var re=O.U++,oe=Bi(O.I);if(zn(oe,"SID",O.K),zn(oe,"RID",re),zn(oe,"TYPE","terminate"),wu(O,oe),re=new dt(O,O.j,re),re.L=2,re.v=gu(Bi(oe)),oe=!1,o.navigator&&o.navigator.sendBeacon)try{oe=o.navigator.sendBeacon(re.v.toString(),"")}catch{}!oe&&o.Image&&(new Image().src=re.v,oe=!0),oe||(re.g=fe(re.j,null),re.g.ea(re.v)),re.F=Date.now(),Kt(re)}_f(O)}function wf(O){O.g&&(Eu(O),O.g.cancel(),O.g=null)}function xd(O){wf(O),O.u&&(o.clearTimeout(O.u),O.u=null),kc(O),O.h.cancel(),O.s&&(typeof O.s=="number"&&o.clearTimeout(O.s),O.s=null)}function Ef(O){if(!ci(O.h)&&!O.s){O.s=!0;var re=O.Ga;G||J(),z||(G(),z=!0),K.add(re,O),O.B=0}}function VA(O,re){return Us(O.h)>=O.h.j-(O.s?1:0)?!1:O.s?(O.i=re.D.concat(O.i),!0):O.G==1||O.G==2||O.B>=(O.Va?0:O.Wa)?!1:(O.s=vr(h(O.Ga,O,re),wd(O,O.B)),O.B++,!0)}e.Ga=function(O){if(this.s)if(this.s=null,this.G==1){if(!O){this.U=Math.floor(1e5*Math.random()),O=this.U++;const ze=new dt(this,this.j,O);let ot=this.o;if(this.S&&(ot?(ot=N(ot),L(ot,this.S)):ot=this.S),this.m!==null||this.O||(ze.H=ot,ot=null),this.P)e:{for(var re=0,oe=0;oe<this.i.length;oe++){t:{var ve=this.i[oe];if("__data__"in ve.map&&(ve=ve.map.__data__,typeof ve=="string")){ve=ve.length;break t}ve=void 0}if(ve===void 0)break;if(re+=ve,4096<re){re=oe;break e}if(re===4096||oe===this.i.length-1){re=oe+1;break e}}re=1e3}else re=1e3;re=bd(this,ze,re),oe=Bi(this.I),zn(oe,"RID",O),zn(oe,"CVER",22),this.D&&zn(oe,"X-HTTP-Session-Id",this.D),wu(this,oe),ot&&(this.O?re="headers="+encodeURIComponent(String($l(ot)))+"&"+re:this.m&&Es(oe,this.m,ot)),Ea(this.h,ze),this.Ua&&zn(oe,"TYPE","init"),this.P?(zn(oe,"$req",re),zn(oe,"SID","null"),ze.T=!0,Ot(ze,oe,null)):Ot(ze,oe,re),this.G=2}}else this.G==3&&(O?vd(this,O):this.i.length==0||ci(this.h)||vd(this))};function vd(O,re){var oe;re?oe=re.l:oe=O.U++;const ve=Bi(O.I);zn(ve,"SID",O.K),zn(ve,"RID",oe),zn(ve,"AID",O.T),wu(O,ve),O.m&&O.o&&Es(ve,O.m,O.o),oe=new dt(O,O.j,oe,O.B+1),O.m===null&&(oe.H=O.o),re&&(O.i=re.D.concat(O.i)),re=bd(O,oe,1e3),oe.I=Math.round(.5*O.wa)+Math.round(.5*O.wa*Math.random()),Ea(O.h,oe),Ot(oe,ve,re)}function wu(O,re){O.H&&j(O.H,function(oe,ve){zn(re,ve,oe)}),O.l&&LA({},function(oe,ve){zn(re,ve,oe)})}function bd(O,re,oe){oe=Math.min(O.i.length,oe);var ve=O.l?h(O.l.Na,O.l,O):null;e:{var ze=O.i;let ot=-1;for(;;){const Qt=["count="+oe];ot==-1?0<oe?(ot=ze[0].g,Qt.push("ofs="+ot)):ot=0:Qt.push("ofs="+ot);let Dr=!0;for(let yn=0;yn<oe;yn++){let Jr=ze[yn].g;const $n=ze[yn].map;if(Jr-=ot,0>Jr)ot=Math.max(0,ze[yn].g-100),Dr=!1;else try{Mo($n,Qt,"req"+Jr+"_")}catch{ve&&ve($n)}}if(Dr){ve=Qt.join("&");break e}}}return O=O.i.splice(0,oe),re.D=O,ve}function Cf(O){if(!O.g&&!O.u){O.Y=1;var re=O.Fa;G||J(),z||(G(),z=!0),K.add(re,O),O.v=0}}function yd(O){return O.g||O.u||3<=O.v?!1:(O.Y++,O.u=vr(h(O.Fa,O),wd(O,O.v)),O.v++,!0)}e.Fa=function(){if(this.u=null,w0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var O=2*this.R;this.j.info("BP detection timer enabled: "+O),this.A=vr(h(this.ab,this),O)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),wf(this),w0(this))};function Eu(O){O.A!=null&&(o.clearTimeout(O.A),O.A=null)}function w0(O){O.g=new dt(O,O.j,"rpc",O.Y),O.m===null&&(O.g.H=O.o),O.g.O=0;var re=Bi(O.qa);zn(re,"RID","rpc"),zn(re,"SID",O.K),zn(re,"AID",O.T),zn(re,"CI",O.F?"0":"1"),!O.F&&O.ja&&zn(re,"TO",O.ja),zn(re,"TYPE","xmlhttp"),wu(O,re),O.m&&O.o&&Es(re,O.m,O.o),O.L&&(O.g.I=O.L);var oe=O.g;O=O.ia,oe.L=1,oe.v=gu(Bi(re)),oe.m=null,oe.P=!0,zt(oe,O)}e.Za=function(){this.C!=null&&(this.C=null,wf(this),yd(this),bt(19))};function kc(O){O.C!=null&&(o.clearTimeout(O.C),O.C=null)}function Cu(O,re){var oe=null;if(O.g==re){kc(O),Eu(O),O.g=null;var ve=2}else if(Ni(O.h,re))oe=re.D,ui(O.h,re),ve=1;else return;if(O.G!=0){if(re.o)if(ve==1){oe=re.m?re.m.length:0,re=Date.now()-re.F;var ze=O.B;ve=gt(),Ft(ve,new ar(ve,oe)),Ef(O)}else Cf(O);else if(ze=re.s,ze==3||ze==0&&0<re.X||!(ve==1&&VA(O,re)||ve==2&&yd(O)))switch(oe&&0<oe.length&&(re=O.h,re.i=re.i.concat(oe)),ze){case 1:Ki(O,5);break;case 4:Ki(O,10);break;case 3:Ki(O,6);break;default:Ki(O,2)}}}function wd(O,re){let oe=O.Ta+Math.floor(Math.random()*O.cb);return O.isActive()||(oe*=2),oe*re}function Ki(O,re){if(O.j.info("Error code "+re),re==2){var oe=h(O.fb,O),ve=O.Xa;const ze=!ve;ve=new On(ve||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||mu(ve,"https"),gu(ve),ze?zi(ve.toString(),oe):Lo(ve.toString(),oe)}else bt(2);O.G=0,O.l&&O.l.sa(re),_f(O),xd(O)}e.fb=function(O){O?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function _f(O){if(O.G=0,O.ka=[],O.l){const re=vf(O.h);(re.length!=0||O.i.length!=0)&&(v(O.ka,re),v(O.ka,O.i),O.h.i.length=0,x(O.i),O.i.length=0),O.l.ra()}}function X(O,re,oe){var ve=oe instanceof On?Bi(oe):new On(oe);if(ve.g!="")re&&(ve.g=re+"."+ve.g),pu(ve,ve.s);else{var ze=o.location;ve=ze.protocol,re=re?re+"."+ze.hostname:ze.hostname,ze=+ze.port;var ot=new On(null);ve&&mu(ot,ve),re&&(ot.g=re),ze&&pu(ot,ze),oe&&(ot.l=oe),ve=ot}return oe=O.D,re=O.ya,oe&&re&&zn(ve,oe,re),zn(ve,"VER",O.la),wu(O,ve),ve}function fe(O,re,oe){if(re&&!O.J)throw Error("Can't create secondary domain capable XhrIo object.");return re=O.Ca&&!O.pa?new bn(new xu({eb:oe})):new bn(O.pa),re.Ha(O.J),re}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function De(){}e=De.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Me(){}Me.prototype.g=function(O,re){return new Ge(O,re)};function Ge(O,re){pt.call(this),this.g=new yu(re),this.l=O,this.h=re&&re.messageUrlParams||null,O=re&&re.messageHeaders||null,re&&re.clientProtocolHeaderRequired&&(O?O["X-Client-Protocol"]="webchannel":O={"X-Client-Protocol":"webchannel"}),this.g.o=O,O=re&&re.initMessageHeaders||null,re&&re.messageContentType&&(O?O["X-WebChannel-Content-Type"]=re.messageContentType:O={"X-WebChannel-Content-Type":re.messageContentType}),re&&re.va&&(O?O["X-WebChannel-Client-Profile"]=re.va:O={"X-WebChannel-Client-Profile":re.va}),this.g.S=O,(O=re&&re.Sb)&&!w(O)&&(this.g.m=O),this.v=re&&re.supportsCrossDomainXhr||!1,this.u=re&&re.sendRawJson||!1,(re=re&&re.httpSessionIdParam)&&!w(re)&&(this.g.D=re,O=this.h,O!==null&&re in O&&(O=this.h,re in O&&delete O[re])),this.j=new er(this)}g(Ge,pt),Ge.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ge.prototype.close=function(){Nc(this.g)},Ge.prototype.o=function(O){var re=this.g;if(typeof O=="string"){var oe={};oe.__data__=O,O=oe}else this.u&&(oe={},oe.__data__=kr(O),O=oe);re.i.push(new Po(re.Ya++,O)),re.G==3&&Ef(re)},Ge.prototype.N=function(){this.g.l=null,delete this.j,Nc(this.g),delete this.g,Ge.aa.N.call(this)};function vt(O){Da.call(this),O.__headers__&&(this.headers=O.__headers__,this.statusCode=O.__status__,delete O.__headers__,delete O.__status__);var re=O.__sm__;if(re){e:{for(const oe in re){O=oe;break e}O=void 0}(this.i=O)&&(O=this.i,re=re!==null&&O in re?re[O]:void 0),this.data=re}else this.data=O}g(vt,Da);function Mt(){an.call(this),this.status=1}g(Mt,an);function er(O){this.g=O}g(er,De),er.prototype.ua=function(){Ft(this.g,"a")},er.prototype.ta=function(O){Ft(this.g,new vt(O))},er.prototype.sa=function(O){Ft(this.g,new Mt)},er.prototype.ra=function(){Ft(this.g,"b")},Me.prototype.createWebChannel=Me.prototype.g,Ge.prototype.send=Ge.prototype.o,Ge.prototype.open=Ge.prototype.m,Ge.prototype.close=Ge.prototype.close,Ste=function(){return new Me},_te=function(){return gt()},Cte=gr,gO={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},we.NO_ERROR=0,we.TIMEOUT=8,we.HTTP_ERROR=6,mS=we,Ne.COMPLETE="complete",Ete=Ne,pn.EventType=da,da.OPEN="a",da.CLOSE="b",da.ERROR="c",da.MESSAGE="d",pt.prototype.listen=pt.prototype.K,Bw=pn,bn.prototype.listenOnce=bn.prototype.L,bn.prototype.getLastError=bn.prototype.Ka,bn.prototype.getLastErrorCode=bn.prototype.Ba,bn.prototype.getStatus=bn.prototype.Z,bn.prototype.getResponseJson=bn.prototype.Oa,bn.prototype.getResponseText=bn.prototype.oa,bn.prototype.send=bn.prototype.ea,bn.prototype.setWithCredentials=bn.prototype.Ha,wte=bn}).apply(typeof F_<"u"?F_:typeof self<"u"?self:typeof window<"u"?window:{});const $H="@firebase/firestore",GH="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nl=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};nl.UNAUTHENTICATED=new nl(null),nl.GOOGLE_CREDENTIALS=new nl("google-credentials-uid"),nl.FIRST_PARTY=new nl("first-party-uid"),nl.MOCK_USER=new nl("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sb="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg=new NR("@firebase/firestore");function zv(){return Gg.logLevel}function dr(e,...t){if(Gg.logLevel<=Bn.DEBUG){const r=t.map(LR);Gg.debug(`Firestore (${Sb}): ${e}`,...r)}}function Gh(e,...t){if(Gg.logLevel<=Bn.ERROR){const r=t.map(LR);Gg.error(`Firestore (${Sb}): ${e}`,...r)}}function Kg(e,...t){if(Gg.logLevel<=Bn.WARN){const r=t.map(LR);Gg.warn(`Firestore (${Sb}): ${e}`,...r)}}function LR(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(e,t,r){let n="Unexpected state";typeof t=="string"?n=t:r=t,Nte(e,n,r)}function Nte(e,t,r){let n=`FIRESTORE (${Sb}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw Gh(n),new Error(n)}function ca(e,t,r,n){let a="Unexpected state";typeof r=="string"?a=r:n=r,e||Nte(t,a,n)}function nn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xt extends ff{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kte{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Bte{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(nl.UNAUTHENTICATED))}shutdown(){}}class T1e{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class j1e{constructor(t){this.t=t,this.currentUser=nl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){ca(this.o===void 0,42304);let n=this.i;const a=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new Oh;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Oh,t.enqueueRetryable(()=>a(this.currentUser))};const i=()=>{const c=s;t.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},o=c=>{dr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(c=>o(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(dr("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Oh)}},0),i()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==t?(dr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ca(typeof n.accessToken=="string",31837,{l:n}),new kte(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ca(t===null||typeof t=="string",2055,{h:t}),new nl(t)}}class I1e{constructor(t,r,n){this.P=t,this.T=r,this.I=n,this.type="FirstParty",this.user=nl.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class F1e{constructor(t,r,n){this.P=t,this.T=r,this.I=n}getToken(){return Promise.resolve(new I1e(this.P,this.T,this.I))}start(t,r){t.enqueueRetryable(()=>r(nl.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class KH{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class O1e{constructor(t,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Kc(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,r){ca(this.o===void 0,3512);const n=s=>{s.error!=null&&dr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.m;return this.m=s.token,dr("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>n(s))};const a=s=>{dr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?a(s):dr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new KH(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(ca(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new KH(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1e(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let n=0;n<e;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=D1e(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=t.charAt(a[s]%62))}return n}}function Tn(e,t){return e<t?-1:e>t?1:0}function xO(e,t){const r=Math.min(e.length,t.length);for(let n=0;n<r;n++){const a=e.charAt(n),s=t.charAt(n);if(a!==s)return m3(a)===m3(s)?Tn(a,s):m3(a)?1:-1}return Tn(e.length,t.length)}const P1e=55296,R1e=57343;function m3(e){const t=e.charCodeAt(0);return t>=P1e&&t<=R1e}function M1(e,t,r){return e.length===t.length&&e.every((n,a)=>r(n,t[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qH="__name__";class nA{constructor(t,r,n){r===void 0?r=0:r>t.length&&Gr(637,{offset:r,range:t.length}),n===void 0?n=t.length-r:n>t.length-r&&Gr(1746,{length:n,range:t.length-r}),this.segments=t,this.offset=r,this.len=n}get length(){return this.len}isEqual(t){return nA.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof nA?t.forEach(n=>{r.push(n)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,n=this.limit();r<n;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const n=Math.min(t.length,r.length);for(let a=0;a<n;a++){const s=nA.compareSegments(t.get(a),r.get(a));if(s!==0)return s}return Tn(t.length,r.length)}static compareSegments(t,r){const n=nA.isNumericId(t),a=nA.isNumericId(r);return n&&!a?-1:!n&&a?1:n&&a?nA.extractNumericId(t).compare(nA.extractNumericId(r)):xO(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Om.fromString(t.substring(4,t.length-2))}}class Ia extends nA{construct(t,r,n){return new Ia(t,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const n of t){if(n.indexOf("//")>=0)throw new Xt(_t.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new Ia(r)}static emptyPath(){return new Ia([])}}const L1e=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ao extends nA{construct(t,r,n){return new ao(t,r,n)}static isValidIdentifier(t){return L1e.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ao.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qH}static keyField(){return new ao([qH])}static fromServerFormat(t){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new Xt(_t.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;a<t.length;){const o=t[a];if(o==="\\"){if(a+1===t.length)throw new Xt(_t.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Xt(_t.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=c,a+=2}else o==="`"?(i=!i,a++):o!=="."||i?(n+=o,a++):(s(),a++)}if(s(),i)throw new Xt(_t.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ao(r)}static emptyPath(){return new ao([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(t){this.path=t}static fromPath(t){return new wr(Ia.fromString(t))}static fromName(t){return new wr(Ia.fromString(t).popFirst(5))}static empty(){return new wr(Ia.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ia.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return Ia.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new wr(new Ia(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tte(e,t,r){if(!r)throw new Xt(_t.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function jte(e,t,r,n){if(t===!0&&n===!0)throw new Xt(_t.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function WH(e){if(!wr.isDocumentKey(e))throw new Xt(_t.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function XH(e){if(wr.isDocumentKey(e))throw new Xt(_t.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Ite(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Nk(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Gr(12329,{type:typeof e})}function hl(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Xt(_t.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Nk(e);throw new Xt(_t.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}function M1e(e,t){if(t<=0)throw new Xt(_t.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(e,t){const r={typeString:e};return t&&(r.value=t),r}function LE(e,t){if(!Ite(e))throw new Xt(_t.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in t)if(t[n]){const a=t[n].typeString,s="value"in t[n]?{value:t[n].value}:void 0;if(!(n in e)){r=`JSON missing required field: '${n}'`;break}const i=e[n];if(a&&typeof i!==a){r=`JSON field '${n}' must be a ${a}.`;break}if(s!==void 0&&i!==s.value){r=`Expected '${n}' field to equal '${s.value}'`;break}}if(r)throw new Xt(_t.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YH=-62135596800,JH=1e6;class ir{static now(){return ir.fromMillis(Date.now())}static fromDate(t){return ir.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),n=Math.floor((t-1e3*r)*JH);return new ir(r,n)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Xt(_t.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Xt(_t.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<YH)throw new Xt(_t.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Xt(_t.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/JH}_compareTo(t){return this.seconds===t.seconds?Tn(this.nanoseconds,t.nanoseconds):Tn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ir._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(LE(t,ir._jsonSchema))return new ir(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-YH;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ir._jsonSchemaVersion="firestore/timestamp/1.0",ir._jsonSchema={type:_i("string",ir._jsonSchemaVersion),seconds:_i("number"),nanoseconds:_i("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{static fromTimestamp(t){return new en(t)}static min(){return new en(new ir(0,0))}static max(){return new en(new ir(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2=-1;function U1e(e,t){const r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,a=en.fromTimestamp(n===1e9?new ir(r+1,0):new ir(r,n));return new Km(a,wr.empty(),t)}function Q1e(e){return new Km(e.readTime,e.key,I2)}class Km{constructor(t,r,n){this.readTime=t,this.documentKey=r,this.largestBatchId=n}static min(){return new Km(en.min(),wr.empty(),I2)}static max(){return new Km(en.max(),wr.empty(),I2)}}function H1e(e,t){let r=e.readTime.compareTo(t.readTime);return r!==0?r:(r=wr.comparator(e.documentKey,t.documentKey),r!==0?r:Tn(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1e="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class z1e{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nb(e){if(e.code!==_t.FAILED_PRECONDITION||e.message!==V1e)throw e;dr("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&Gr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new Pt((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof Pt?r:Pt.resolve(r)}catch(r){return Pt.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):Pt.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):Pt.reject(r)}static resolve(t){return new Pt((r,n)=>{r(t)})}static reject(t){return new Pt((r,n)=>{n(t)})}static waitFor(t){return new Pt((r,n)=>{let a=0,s=0,i=!1;t.forEach(o=>{++a,o.next(()=>{++s,i&&s===a&&r()},c=>n(c))}),i=!0,s===a&&r()})}static or(t){let r=Pt.resolve(!1);for(const n of t)r=r.next(a=>a?Pt.resolve(a):n());return r}static forEach(t,r){const n=[];return t.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(t,r){return new Pt((n,a)=>{const s=t.length,i=new Array(s);let o=0;for(let c=0;c<s;c++){const u=c;r(t[u]).next(d=>{i[u]=d,++o,o===s&&n(i)},d=>a(d))}})}static doWhile(t,r){return new Pt((n,a)=>{const s=()=>{t()===!0?r().next(()=>{s()},a):n()};s()})}}function $1e(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function kb(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}kk.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=-1;function Bk(e){return e==null}function fN(e){return e===0&&1/e==-1/0}function G1e(e){return typeof e=="number"&&Number.isInteger(e)&&!fN(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fte="";function K1e(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t=ZH(t)),t=q1e(e.get(r),t);return ZH(t)}function q1e(e,t){let r=t;const n=e.length;for(let a=0;a<n;a++){const s=e.charAt(a);switch(s){case"\0":r+="";break;case Fte:r+="";break;default:r+=s}}return r}function ZH(e){return e+Fte+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eV(e){let t=0;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function hp(e,t){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function Ote(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(t,r){this.comparator=t,this.root=r||So.EMPTY}insert(t,r){return new ms(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,So.BLACK,null,null))}remove(t){return new ms(this.comparator,this.root.remove(t,this.comparator).copy(null,null,So.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(t,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(t){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(t,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,n)=>(t(r,n),!1))}toString(){const t=[];return this.inorderTraversal((r,n)=>(t.push(`${r}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new O_(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new O_(this.root,t,this.comparator,!1)}getReverseIterator(){return new O_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new O_(this.root,t,this.comparator,!0)}}class O_{constructor(t,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=r?n(t.key,r):1,r&&a&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class So{constructor(t,r,n,a,s){this.key=t,this.value=r,this.color=n??So.RED,this.left=a??So.EMPTY,this.right=s??So.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,n,a,s){return new So(t??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,n){let a=this;const s=n(t,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(t,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return So.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let n,a=this;if(r(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(t,a.key)===0){if(a.right.isEmpty())return So.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,So.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,So.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Gr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Gr(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Gr(27949);return t+(this.isRed()?0:1)}}So.EMPTY=null,So.RED=!0,So.BLACK=!1;So.EMPTY=new class{constructor(){this.size=0}get key(){throw Gr(57766)}get value(){throw Gr(16141)}get color(){throw Gr(16727)}get left(){throw Gr(29726)}get right(){throw Gr(36894)}copy(t,r,n,a,s){return this}insert(t,r,n){return new So(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(t){this.comparator=t,this.data=new ms(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,n)=>(t(r),!1))}forEachInRange(t,r){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,t[1])>=0)return;r(a.key)}}forEachWhile(t,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new tV(this.data.getIterator())}getIteratorFrom(t){return new tV(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(n=>{r=r.add(n)}),r}isEqual(t){if(!(t instanceof Pi)||this.size!==t.size)return!1;const r=this.data.getIterator(),n=t.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new Pi(this.comparator);return r.data=t,r}}class tV{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(t){this.fields=t,t.sort(ao.comparator)}static empty(){return new Zc([])}unionWith(t){let r=new Pi(ao.comparator);for(const n of this.fields)r=r.add(n);for(const n of t)r=r.add(n);return new Zc(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return M1(this.fields,t.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dte extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Dte("Invalid base64 string: "+s):s}}(t);return new co(r)}static fromUint8Array(t){const r=function(a){let s="";for(let i=0;i<a.length;++i)s+=String.fromCharCode(a[i]);return s}(t);return new co(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Tn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}co.EMPTY_BYTE_STRING=new co("");const W1e=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qm(e){if(ca(!!e,39018),typeof e=="string"){let t=0;const r=W1e.exec(e);if(ca(!!r,46558,{timestamp:e}),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),t=Number(a)}const n=new Date(e);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:Ys(e.seconds),nanos:Ys(e.nanos)}}function Ys(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Wm(e){return typeof e=="string"?co.fromBase64String(e):co.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pte="server_timestamp",Rte="__type__",Lte="__previous_value__",Mte="__local_write_time__";function Tk(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[Rte])==null?void 0:n.stringValue)===Pte}function jk(e){const t=e.mapValue.fields[Lte];return Tk(t)?jk(t):t}function F2(e){const t=qm(e.mapValue.fields[Mte].timestampValue);return new ir(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1e{constructor(t,r,n,a,s,i,o,c,u,d){this.databaseId=t,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const AN="(default)";class U1{constructor(t,r){this.projectId=t,this.database=r||AN}static empty(){return new U1("","")}get isDefaultDatabase(){return this.database===AN}isEqual(t){return t instanceof U1&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ute="__type__",Y1e="__max__",D_={mapValue:{}},Qte="__vector__",hN="value";function Xm(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Tk(e)?4:Z1e(e)?9007199254740991:J1e(e)?10:11:Gr(28295,{value:e})}function BA(e,t){if(e===t)return!0;const r=Xm(e);if(r!==Xm(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return F2(e).isEqual(F2(t));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const i=qm(a.timestampValue),o=qm(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(a,s){return Wm(a.bytesValue).isEqual(Wm(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(a,s){return Ys(a.geoPointValue.latitude)===Ys(s.geoPointValue.latitude)&&Ys(a.geoPointValue.longitude)===Ys(s.geoPointValue.longitude)}(e,t);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return Ys(a.integerValue)===Ys(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const i=Ys(a.doubleValue),o=Ys(s.doubleValue);return i===o?fN(i)===fN(o):isNaN(i)&&isNaN(o)}return!1}(e,t);case 9:return M1(e.arrayValue.values||[],t.arrayValue.values||[],BA);case 10:case 11:return function(a,s){const i=a.mapValue.fields||{},o=s.mapValue.fields||{};if(eV(i)!==eV(o))return!1;for(const c in i)if(i.hasOwnProperty(c)&&(o[c]===void 0||!BA(i[c],o[c])))return!1;return!0}(e,t);default:return Gr(52216,{left:e})}}function O2(e,t){return(e.values||[]).find(r=>BA(r,t))!==void 0}function Q1(e,t){if(e===t)return 0;const r=Xm(e),n=Xm(t);if(r!==n)return Tn(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Tn(e.booleanValue,t.booleanValue);case 2:return function(s,i){const o=Ys(s.integerValue||s.doubleValue),c=Ys(i.integerValue||i.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1}(e,t);case 3:return rV(e.timestampValue,t.timestampValue);case 4:return rV(F2(e),F2(t));case 5:return xO(e.stringValue,t.stringValue);case 6:return function(s,i){const o=Wm(s),c=Wm(i);return o.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(s,i){const o=s.split("/"),c=i.split("/");for(let u=0;u<o.length&&u<c.length;u++){const d=Tn(o[u],c[u]);if(d!==0)return d}return Tn(o.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,i){const o=Tn(Ys(s.latitude),Ys(i.latitude));return o!==0?o:Tn(Ys(s.longitude),Ys(i.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return nV(e.arrayValue,t.arrayValue);case 10:return function(s,i){var h,m,g,x;const o=s.fields||{},c=i.fields||{},u=(h=o[hN])==null?void 0:h.arrayValue,d=(m=c[hN])==null?void 0:m.arrayValue,f=Tn(((g=u==null?void 0:u.values)==null?void 0:g.length)||0,((x=d==null?void 0:d.values)==null?void 0:x.length)||0);return f!==0?f:nV(u,d)}(e.mapValue,t.mapValue);case 11:return function(s,i){if(s===D_.mapValue&&i===D_.mapValue)return 0;if(s===D_.mapValue)return 1;if(i===D_.mapValue)return-1;const o=s.fields||{},c=Object.keys(o),u=i.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const h=xO(c[f],d[f]);if(h!==0)return h;const m=Q1(o[c[f]],u[d[f]]);if(m!==0)return m}return Tn(c.length,d.length)}(e.mapValue,t.mapValue);default:throw Gr(23264,{he:r})}}function rV(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Tn(e,t);const r=qm(e),n=qm(t),a=Tn(r.seconds,n.seconds);return a!==0?a:Tn(r.nanos,n.nanos)}function nV(e,t){const r=e.values||[],n=t.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=Q1(r[a],n[a]);if(s)return s}return Tn(r.length,n.length)}function H1(e){return vO(e)}function vO(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){const n=qm(r);return`time(${n.seconds},${n.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(r){return Wm(r).toBase64()}(e.bytesValue):"referenceValue"in e?function(r){return wr.fromName(r).toString()}(e.referenceValue):"geoPointValue"in e?function(r){return`geo(${r.latitude},${r.longitude})`}(e.geoPointValue):"arrayValue"in e?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=vO(s);return n+"]"}(e.arrayValue):"mapValue"in e?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const i of n)s?s=!1:a+=",",a+=`${i}:${vO(r.fields[i])}`;return a+"}"}(e.mapValue):Gr(61005,{value:e})}function pS(e){switch(Xm(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=jk(e);return t?16+pS(t):16;case 5:return 2*e.stringValue.length;case 6:return Wm(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((a,s)=>a+pS(s),0)}(e.arrayValue);case 10:case 11:return function(n){let a=0;return hp(n.fields,(s,i)=>{a+=s.length+pS(i)}),a}(e.mapValue);default:throw Gr(13486,{value:e})}}function mN(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function bO(e){return!!e&&"integerValue"in e}function UR(e){return!!e&&"arrayValue"in e}function aV(e){return!!e&&"nullValue"in e}function sV(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function gS(e){return!!e&&"mapValue"in e}function J1e(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[Ute])==null?void 0:n.stringValue)===Qte}function Zw(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return hp(e.mapValue.fields,(r,n)=>t.mapValue.fields[r]=Zw(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=Zw(e.arrayValue.values[r]);return t}return{...e}}function Z1e(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Y1e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(t){this.value=t}static empty(){return new cc({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let n=0;n<t.length-1;++n)if(r=(r.mapValue.fields||{})[t.get(n)],!gS(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=Zw(r)}setAll(t){let r=ao.emptyPath(),n={},a=[];t.forEach((i,o)=>{if(!r.isImmediateParentOf(o)){const c=this.getFieldsMap(r);this.applyChanges(c,n,a),n={},a=[],r=o.popLast()}i?n[o.lastSegment()]=Zw(i):a.push(o.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(t){const r=this.field(t.popLast());gS(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return BA(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<t.length;++n){let a=r.mapValue.fields[t.get(n)];gS(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[t.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(t,r,n){hp(r,(a,s)=>t[a]=s);for(const a of n)delete t[a]}clone(){return new cc(Zw(this.value))}}function Hte(e){const t=[];return hp(e.fields,(r,n)=>{const a=new ao([r]);if(gS(n)){const s=Hte(n.mapValue).fields;if(s.length===0)t.push(a);else for(const i of s)t.push(a.child(i))}else t.push(a)}),new Zc(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(t,r,n,a,s,i,o){this.key=t,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(t){return new ol(t,0,en.min(),en.min(),en.min(),cc.empty(),0)}static newFoundDocument(t,r,n,a){return new ol(t,1,r,en.min(),n,a,0)}static newNoDocument(t,r){return new ol(t,2,r,en.min(),en.min(),cc.empty(),0)}static newUnknownDocument(t,r){return new ol(t,3,r,en.min(),en.min(),cc.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(en.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=cc.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=cc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=en.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ol&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ol(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(t,r){this.position=t,this.inclusive=r}}function iV(e,t,r){let n=0;for(let a=0;a<e.position.length;a++){const s=t[a],i=e.position[a];if(s.field.isKeyField()?n=wr.comparator(wr.fromName(i.referenceValue),r.key):n=Q1(i,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function oV(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!BA(e.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(t,r="asc"){this.field=t,this.dir=r}}function ebe(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vte{}class Ci extends Vte{constructor(t,r,n){super(),this.field=t,this.op=r,this.value=n}static create(t,r,n){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,n):new rbe(t,r,n):r==="array-contains"?new sbe(t,n):r==="in"?new ibe(t,n):r==="not-in"?new obe(t,n):r==="array-contains-any"?new lbe(t,n):new Ci(t,r,n)}static createKeyFieldInFilter(t,r,n){return r==="in"?new nbe(t,n):new abe(t,n)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Q1(r,this.value)):r!==null&&Xm(this.value)===Xm(r)&&this.matchesComparison(Q1(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Gr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cf extends Vte{constructor(t,r){super(),this.filters=t,this.op=r,this.Pe=null}static create(t,r){return new cf(t,r)}matches(t){return zte(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function zte(e){return e.op==="and"}function $te(e){return tbe(e)&&zte(e)}function tbe(e){for(const t of e.filters)if(t instanceof cf)return!1;return!0}function yO(e){if(e instanceof Ci)return e.field.canonicalString()+e.op.toString()+H1(e.value);if($te(e))return e.filters.map(t=>yO(t)).join(",");{const t=e.filters.map(r=>yO(r)).join(",");return`${e.op}(${t})`}}function Gte(e,t){return e instanceof Ci?function(n,a){return a instanceof Ci&&n.op===a.op&&n.field.isEqual(a.field)&&BA(n.value,a.value)}(e,t):e instanceof cf?function(n,a){return a instanceof cf&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,i,o)=>s&&Gte(i,a.filters[o]),!0):!1}(e,t):void Gr(19439)}function Kte(e){return e instanceof Ci?function(r){return`${r.field.canonicalString()} ${r.op} ${H1(r.value)}`}(e):e instanceof cf?function(r){return r.op.toString()+" {"+r.getFilters().map(Kte).join(" ,")+"}"}(e):"Filter"}class rbe extends Ci{constructor(t,r,n){super(t,r,n),this.key=wr.fromName(n.referenceValue)}matches(t){const r=wr.comparator(t.key,this.key);return this.matchesComparison(r)}}class nbe extends Ci{constructor(t,r){super(t,"in",r),this.keys=qte("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class abe extends Ci{constructor(t,r){super(t,"not-in",r),this.keys=qte("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function qte(e,t){var r;return(((r=t.arrayValue)==null?void 0:r.values)||[]).map(n=>wr.fromName(n.referenceValue))}class sbe extends Ci{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return UR(r)&&O2(r.arrayValue,this.value)}}class ibe extends Ci{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&O2(this.value.arrayValue,r)}}class obe extends Ci{constructor(t,r){super(t,"not-in",r)}matches(t){if(O2(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&r.nullValue===void 0&&!O2(this.value.arrayValue,r)}}class lbe extends Ci{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!UR(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>O2(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cbe{constructor(t,r=null,n=[],a=[],s=null,i=null,o=null){this.path=t,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=i,this.endAt=o,this.Te=null}}function lV(e,t=null,r=[],n=[],a=null,s=null,i=null){return new cbe(e,t,r,n,a,s,i)}function QR(e){const t=nn(e);if(t.Te===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(n=>yO(n)).join(","),r+="|ob:",r+=t.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),Bk(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(n=>H1(n)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(n=>H1(n)).join(",")),t.Te=r}return t.Te}function HR(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!ebe(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!Gte(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!oV(e.startAt,t.startAt)&&oV(e.endAt,t.endAt)}function wO(e){return wr.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(t,r=null,n=[],a=[],s=null,i="F",o=null,c=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ube(e,t,r,n,a,s,i,o){return new gx(e,t,r,n,a,s,i,o)}function Ik(e){return new gx(e)}function cV(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function VR(e){return e.collectionGroup!==null}function p1(e){const t=nn(e);if(t.Ie===null){t.Ie=[];const r=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),r.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new Pi(ao.comparator);return i.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(t).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new D2(s,n))}),r.has(ao.keyField().canonicalString())||t.Ie.push(new D2(ao.keyField(),n))}return t.Ie}function wA(e){const t=nn(e);return t.Ee||(t.Ee=dbe(t,p1(e))),t.Ee}function dbe(e,t){if(e.limitType==="F")return lV(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new D2(a.field,s)});const r=e.endAt?new V1(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new V1(e.startAt.position,e.startAt.inclusive):null;return lV(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}function EO(e,t){const r=e.filters.concat([t]);return new gx(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function pN(e,t,r){return new gx(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function Fk(e,t){return HR(wA(e),wA(t))&&e.limitType===t.limitType}function Wte(e){return`${QR(wA(e))}|lt:${e.limitType}`}function $v(e){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>Kte(a)).join(", ")}]`),Bk(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>H1(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>H1(a)).join(",")),`Target(${n})`}(wA(e))}; limitType=${e.limitType})`}function Ok(e,t){return t.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):wr.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(e,t)&&function(n,a){for(const s of p1(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(e,t)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(e,t)&&function(n,a){return!(n.startAt&&!function(i,o,c){const u=iV(i,o,c);return i.inclusive?u<=0:u<0}(n.startAt,p1(n),a)||n.endAt&&!function(i,o,c){const u=iV(i,o,c);return i.inclusive?u>=0:u>0}(n.endAt,p1(n),a))}(e,t)}function fbe(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Xte(e){return(t,r)=>{let n=!1;for(const a of p1(e)){const s=Abe(a,t,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function Abe(e,t,r){const n=e.field.isKeyField()?wr.comparator(t.key,r.key):function(s,i,o){const c=i.data.field(s),u=o.data.field(s);return c!==null&&u!==null?Q1(c,u):Gr(42886)}(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return-1*n;default:return Gr(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,t))return s}}has(t){return this.get(t)!==void 0}set(t,r){const n=this.mapKeyFn(t),a=this.inner[n];if(a===void 0)return this.inner[n]=[[t,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],t))return void(a[s]=[t,r]);a.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],t))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(t){hp(this.inner,(r,n)=>{for(const[a,s]of n)t(a,s)})}isEmpty(){return Ote(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hbe=new ms(wr.comparator);function Kh(){return hbe}const Yte=new ms(wr.comparator);function Tw(...e){let t=Yte;for(const r of e)t=t.insert(r.key,r);return t}function Jte(e){let t=Yte;return e.forEach((r,n)=>t=t.insert(r,n.overlayedDocument)),t}function mg(){return e2()}function Zte(){return e2()}function e2(){return new xx(e=>e.toString(),(e,t)=>e.isEqual(t))}const mbe=new ms(wr.comparator),pbe=new Pi(wr.comparator);function jn(...e){let t=pbe;for(const r of e)t=t.add(r);return t}const gbe=new Pi(Tn);function xbe(){return gbe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fN(t)?"-0":t}}function ere(e){return{integerValue:""+e}}function vbe(e,t){return G1e(t)?ere(t):zR(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(){this._=void 0}}function bbe(e,t,r){return e instanceof P2?function(a,s){const i={fields:{[Rte]:{stringValue:Pte},[Mte]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&Tk(s)&&(s=jk(s)),s&&(i.fields[Lte]=s),{mapValue:i}}(r,t):e instanceof z1?rre(e,t):e instanceof R2?nre(e,t):function(a,s){const i=tre(a,s),o=uV(i)+uV(a.Ae);return bO(i)&&bO(a.Ae)?ere(o):zR(a.serializer,o)}(e,t)}function ybe(e,t,r){return e instanceof z1?rre(e,t):e instanceof R2?nre(e,t):r}function tre(e,t){return e instanceof gN?function(n){return bO(n)||function(s){return!!s&&"doubleValue"in s}(n)}(t)?t:{integerValue:0}:null}class P2 extends Dk{}class z1 extends Dk{constructor(t){super(),this.elements=t}}function rre(e,t){const r=are(t);for(const n of e.elements)r.some(a=>BA(a,n))||r.push(n);return{arrayValue:{values:r}}}class R2 extends Dk{constructor(t){super(),this.elements=t}}function nre(e,t){let r=are(t);for(const n of e.elements)r=r.filter(a=>!BA(a,n));return{arrayValue:{values:r}}}class gN extends Dk{constructor(t,r){super(),this.serializer=t,this.Ae=r}}function uV(e){return Ys(e.integerValue||e.doubleValue)}function are(e){return UR(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sre{constructor(t,r){this.field=t,this.transform=r}}function wbe(e,t){return e.field.isEqual(t.field)&&function(n,a){return n instanceof z1&&a instanceof z1||n instanceof R2&&a instanceof R2?M1(n.elements,a.elements,BA):n instanceof gN&&a instanceof gN?BA(n.Ae,a.Ae):n instanceof P2&&a instanceof P2}(e.transform,t.transform)}class Ebe{constructor(t,r){this.version=t,this.transformResults=r}}class Dl{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new Dl}static exists(t){return new Dl(void 0,t)}static updateTime(t){return new Dl(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function xS(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Pk{}function ire(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Rk(e.key,Dl.none()):new ME(e.key,e.data,Dl.none());{const r=e.data,n=cc.empty();let a=new Pi(ao.comparator);for(let s of t.fields)if(!a.has(s)){let i=r.field(s);i===null&&s.length>1&&(s=s.popLast(),i=r.field(s)),i===null?n.delete(s):n.set(s,i),a=a.add(s)}return new mp(e.key,n,new Zc(a.toArray()),Dl.none())}}function Cbe(e,t,r){e instanceof ME?function(a,s,i){const o=a.value.clone(),c=fV(a.fieldTransforms,s,i.transformResults);o.setAll(c),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(e,t,r):e instanceof mp?function(a,s,i){if(!xS(a.precondition,s))return void s.convertToUnknownDocument(i.version);const o=fV(a.fieldTransforms,s,i.transformResults),c=s.data;c.setAll(ore(a)),c.setAll(o),s.convertToFoundDocument(i.version,c).setHasCommittedMutations()}(e,t,r):function(a,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,t,r)}function t2(e,t,r,n){return e instanceof ME?function(s,i,o,c){if(!xS(s.precondition,i))return o;const u=s.value.clone(),d=AV(s.fieldTransforms,c,i);return u.setAll(d),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(e,t,r,n):e instanceof mp?function(s,i,o,c){if(!xS(s.precondition,i))return o;const u=AV(s.fieldTransforms,c,i),d=i.data;return d.setAll(ore(s)),d.setAll(u),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,r,n):function(s,i,o){return xS(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(e,t,r)}function _be(e,t){let r=null;for(const n of e.fieldTransforms){const a=t.data.field(n.field),s=tre(n.transform,a||null);s!=null&&(r===null&&(r=cc.empty()),r.set(n.field,s))}return r||null}function dV(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&M1(n,a,(s,i)=>wbe(s,i))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ME extends Pk{constructor(t,r,n,a=[]){super(),this.key=t,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class mp extends Pk{constructor(t,r,n,a,s=[]){super(),this.key=t,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ore(e){const t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=e.data.field(r);t.set(r,n)}}),t}function fV(e,t,r){const n=new Map;ca(e.length===r.length,32656,{Re:r.length,Ve:e.length});for(let a=0;a<r.length;a++){const s=e[a],i=s.transform,o=t.data.field(s.field);n.set(s.field,ybe(i,o,r[a]))}return n}function AV(e,t,r){const n=new Map;for(const a of e){const s=a.transform,i=r.data.field(a.field);n.set(a.field,bbe(s,i,t))}return n}class Rk extends Pk{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Sbe extends Pk{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nbe{constructor(t,r,n,a){this.batchId=t,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(t,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(t.key)&&Cbe(s,t,n[a])}}applyToLocalView(t,r){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(r=t2(n,t,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(r=t2(n,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const n=Zte();return this.mutations.forEach(a=>{const s=t.get(a.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=r.has(a.key)?null:o;const c=ire(i,o);c!==null&&n.set(a.key,c),i.isValidDocument()||i.convertToNoDocument(en.min())}),n}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),jn())}isEqual(t){return this.batchId===t.batchId&&M1(this.mutations,t.mutations,(r,n)=>dV(r,n))&&M1(this.baseMutations,t.baseMutations,(r,n)=>dV(r,n))}}class $R{constructor(t,r,n,a){this.batch=t,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(t,r,n){ca(t.mutations.length===n.length,58842,{me:t.mutations.length,fe:n.length});let a=function(){return mbe}();const s=t.mutations;for(let i=0;i<s.length;i++)a=a.insert(s[i].key,n[i].version);return new $R(t,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kbe{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bbe{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pi,Mn;function Tbe(e){switch(e){case _t.OK:return Gr(64938);case _t.CANCELLED:case _t.UNKNOWN:case _t.DEADLINE_EXCEEDED:case _t.RESOURCE_EXHAUSTED:case _t.INTERNAL:case _t.UNAVAILABLE:case _t.UNAUTHENTICATED:return!1;case _t.INVALID_ARGUMENT:case _t.NOT_FOUND:case _t.ALREADY_EXISTS:case _t.PERMISSION_DENIED:case _t.FAILED_PRECONDITION:case _t.ABORTED:case _t.OUT_OF_RANGE:case _t.UNIMPLEMENTED:case _t.DATA_LOSS:return!0;default:return Gr(15467,{code:e})}}function lre(e){if(e===void 0)return Gh("GRPC error has no .code"),_t.UNKNOWN;switch(e){case pi.OK:return _t.OK;case pi.CANCELLED:return _t.CANCELLED;case pi.UNKNOWN:return _t.UNKNOWN;case pi.DEADLINE_EXCEEDED:return _t.DEADLINE_EXCEEDED;case pi.RESOURCE_EXHAUSTED:return _t.RESOURCE_EXHAUSTED;case pi.INTERNAL:return _t.INTERNAL;case pi.UNAVAILABLE:return _t.UNAVAILABLE;case pi.UNAUTHENTICATED:return _t.UNAUTHENTICATED;case pi.INVALID_ARGUMENT:return _t.INVALID_ARGUMENT;case pi.NOT_FOUND:return _t.NOT_FOUND;case pi.ALREADY_EXISTS:return _t.ALREADY_EXISTS;case pi.PERMISSION_DENIED:return _t.PERMISSION_DENIED;case pi.FAILED_PRECONDITION:return _t.FAILED_PRECONDITION;case pi.ABORTED:return _t.ABORTED;case pi.OUT_OF_RANGE:return _t.OUT_OF_RANGE;case pi.UNIMPLEMENTED:return _t.UNIMPLEMENTED;case pi.DATA_LOSS:return _t.DATA_LOSS;default:return Gr(39323,{code:e})}}(Mn=pi||(pi={}))[Mn.OK=0]="OK",Mn[Mn.CANCELLED=1]="CANCELLED",Mn[Mn.UNKNOWN=2]="UNKNOWN",Mn[Mn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mn[Mn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mn[Mn.NOT_FOUND=5]="NOT_FOUND",Mn[Mn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mn[Mn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mn[Mn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mn[Mn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mn[Mn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mn[Mn.ABORTED=10]="ABORTED",Mn[Mn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mn[Mn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mn[Mn.INTERNAL=13]="INTERNAL",Mn[Mn.UNAVAILABLE=14]="UNAVAILABLE",Mn[Mn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jbe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ibe=new Om([4294967295,4294967295],0);function hV(e){const t=jbe().encode(e),r=new yte;return r.update(t),new Uint8Array(r.digest())}function mV(e){const t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),a=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Om([r,n],0),new Om([a,s],0)]}class GR{constructor(t,r,n){if(this.bitmap=t,this.padding=r,this.hashCount=n,r<0||r>=8)throw new jw(`Invalid padding: ${r}`);if(n<0)throw new jw(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new jw(`Invalid hash count: ${n}`);if(t.length===0&&r!==0)throw new jw(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*t.length-r,this.pe=Om.fromNumber(this.ge)}ye(t,r,n){let a=t.add(r.multiply(Om.fromNumber(n)));return a.compare(Ibe)===1&&(a=new Om([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const r=hV(t),[n,a]=mV(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);if(!this.we(i))return!1}return!0}static create(t,r,n){const a=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),i=new GR(s,a,r);return n.forEach(o=>i.insert(o)),i}insert(t){if(this.ge===0)return;const r=hV(t),[n,a]=mV(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);this.Se(i)}}Se(t){const r=Math.floor(t/8),n=t%8;this.bitmap[r]|=1<<n}}class jw extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(t,r,n,a,s){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,r,n){const a=new Map;return a.set(t,UE.createSynthesizedTargetChangeForCurrentChange(t,r,n)),new Lk(en.min(),a,new ms(Tn),Kh(),jn())}}class UE{constructor(t,r,n,a,s){this.resumeToken=t,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,r,n){return new UE(n,r,jn(),jn(),jn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(t,r,n,a){this.be=t,this.removedTargetIds=r,this.key=n,this.De=a}}class cre{constructor(t,r){this.targetId=t,this.Ce=r}}class ure{constructor(t,r,n=co.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=r,this.resumeToken=n,this.cause=a}}class pV{constructor(){this.ve=0,this.Fe=gV(),this.Me=co.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=jn(),r=jn(),n=jn();return this.Fe.forEach((a,s)=>{switch(s){case 0:t=t.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Gr(38017,{changeType:s})}}),new UE(this.Me,this.xe,t,r,n)}qe(){this.Oe=!1,this.Fe=gV()}Qe(t,r){this.Oe=!0,this.Fe=this.Fe.insert(t,r)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,ca(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Fbe{constructor(t){this.Ge=t,this.ze=new Map,this.je=Kh(),this.Je=P_(),this.He=P_(),this.Ye=new ms(Tn)}Ze(t){for(const r of t.be)t.De&&t.De.isFoundDocument()?this.Xe(r,t.De):this.et(r,t.key,t.De);for(const r of t.removedTargetIds)this.et(r,t.key,t.De)}tt(t){this.forEachTarget(t,r=>{const n=this.nt(r);switch(t.state){case 0:this.rt(r)&&n.Le(t.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(t.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(t.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(t.resumeToken));break;default:Gr(56790,{state:t.state})}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.ze.forEach((n,a)=>{this.rt(a)&&r(a)})}st(t){const r=t.targetId,n=t.Ce.count,a=this.ot(r);if(a){const s=a.target;if(wO(s))if(n===0){const i=new wr(s.path);this.et(r,i,ol.newNoDocument(i,en.min()))}else ca(n===1,20013,{expectedCount:n});else{const i=this._t(r);if(i!==n){const o=this.ut(t),c=o?this.ct(o,t,i):1;if(c!==0){this.it(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,u)}}}}}ut(t){const r=t.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let i,o;try{i=Wm(n).toUint8Array()}catch(c){if(c instanceof Dte)return Kg("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new GR(i,a,s)}catch(c){return Kg(c instanceof jw?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.ge===0?null:o}ct(t,r,n){return r.Ce.count===n-this.Pt(t,r.targetId)?0:2}Pt(t,r){const n=this.Ge.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const i=this.Ge.ht(),o=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;t.mightContain(o)||(this.et(r,s,null),a++)}),a}Tt(t){const r=new Map;this.ze.forEach((s,i)=>{const o=this.ot(i);if(o){if(s.current&&wO(o.target)){const c=new wr(o.target.path);this.It(c).has(i)||this.Et(i,c)||this.et(i,c,ol.newNoDocument(c,t))}s.Be&&(r.set(i,s.ke()),s.qe())}});let n=jn();this.He.forEach((s,i)=>{let o=!0;i.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(s))}),this.je.forEach((s,i)=>i.setReadTime(t));const a=new Lk(t,r,this.Ye,this.je,n);return this.je=Kh(),this.Je=P_(),this.He=P_(),this.Ye=new ms(Tn),a}Xe(t,r){if(!this.rt(t))return;const n=this.Et(t,r.key)?2:0;this.nt(t).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(t)),this.He=this.He.insert(r.key,this.dt(r.key).add(t))}et(t,r,n){if(!this.rt(t))return;const a=this.nt(t);this.Et(t,r)?a.Qe(r,1):a.$e(r),this.He=this.He.insert(r,this.dt(r).delete(t)),this.He=this.He.insert(r,this.dt(r).add(t)),n&&(this.je=this.je.insert(r,n))}removeTarget(t){this.ze.delete(t)}_t(t){const r=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let r=this.ze.get(t);return r||(r=new pV,this.ze.set(t,r)),r}dt(t){let r=this.He.get(t);return r||(r=new Pi(Tn),this.He=this.He.insert(t,r)),r}It(t){let r=this.Je.get(t);return r||(r=new Pi(Tn),this.Je=this.Je.insert(t,r)),r}rt(t){const r=this.ot(t)!==null;return r||dr("WatchChangeAggregator","Detected inactive target",t),r}ot(t){const r=this.ze.get(t);return r&&r.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new pV),this.Ge.getRemoteKeysForTarget(t).forEach(r=>{this.et(t,r,null)})}Et(t,r){return this.Ge.getRemoteKeysForTarget(t).has(r)}}function P_(){return new ms(wr.comparator)}function gV(){return new ms(wr.comparator)}const Obe={asc:"ASCENDING",desc:"DESCENDING"},Dbe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Pbe={and:"AND",or:"OR"};class Rbe{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function CO(e,t){return e.useProto3Json||Bk(t)?t:{value:t}}function xN(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function dre(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Lbe(e,t){return xN(e,t.toTimestamp())}function EA(e){return ca(!!e,49232),en.fromTimestamp(function(r){const n=qm(r);return new ir(n.seconds,n.nanos)}(e))}function KR(e,t){return _O(e,t).canonicalString()}function _O(e,t){const r=function(a){return new Ia(["projects",a.projectId,"databases",a.database])}(e).child("documents");return t===void 0?r:r.child(t)}function fre(e){const t=Ia.fromString(e);return ca(gre(t),10190,{key:t.toString()}),t}function SO(e,t){return KR(e.databaseId,t.path)}function p3(e,t){const r=fre(t);if(r.get(1)!==e.databaseId.projectId)throw new Xt(_t.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new Xt(_t.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new wr(hre(r))}function Are(e,t){return KR(e.databaseId,t)}function Mbe(e){const t=fre(e);return t.length===4?Ia.emptyPath():hre(t)}function NO(e){return new Ia(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function hre(e){return ca(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function xV(e,t,r){return{name:SO(e,t),fields:r.value.mapValue.fields}}function Ube(e,t){let r;if("targetChange"in t){t.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Gr(39313,{state:u})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(ca(d===void 0||typeof d=="string",58123),co.fromBase64String(d||"")):(ca(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),co.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),i=t.targetChange.cause,o=i&&function(u){const d=u.code===void 0?_t.UNKNOWN:lre(u.code);return new Xt(d,u.message||"")}(i);r=new ure(n,a,s,o||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const a=p3(e,n.document.name),s=EA(n.document.updateTime),i=n.document.createTime?EA(n.document.createTime):en.min(),o=new cc({mapValue:{fields:n.document.fields}}),c=ol.newFoundDocument(a,s,i,o),u=n.targetIds||[],d=n.removedTargetIds||[];r=new vS(u,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const a=p3(e,n.document),s=n.readTime?EA(n.readTime):en.min(),i=ol.newNoDocument(a,s),o=n.removedTargetIds||[];r=new vS([],o,i.key,i)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const a=p3(e,n.document),s=n.removedTargetIds||[];r=new vS([],s,a,null)}else{if(!("filter"in t))return Gr(11601,{Rt:t});{t.filter;const n=t.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,i=new Bbe(a,s),o=n.targetId;r=new cre(o,i)}}return r}function Qbe(e,t){let r;if(t instanceof ME)r={update:xV(e,t.key,t.value)};else if(t instanceof Rk)r={delete:SO(e,t.key)};else if(t instanceof mp)r={update:xV(e,t.key,t.data),updateMask:Xbe(t.fieldMask)};else{if(!(t instanceof Sbe))return Gr(16599,{Vt:t.type});r={verify:SO(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(n=>function(s,i){const o=i.transform;if(o instanceof P2)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof z1)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof R2)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof gN)return{fieldPath:i.field.canonicalString(),increment:o.Ae};throw Gr(20930,{transform:i.transform})}(0,n))),t.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:Lbe(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Gr(27497)}(e,t.precondition)),r}function Hbe(e,t){return e&&e.length>0?(ca(t!==void 0,14353),e.map(r=>function(a,s){let i=a.updateTime?EA(a.updateTime):EA(s);return i.isEqual(en.min())&&(i=EA(s)),new Ebe(i,a.transformResults||[])}(r,t))):[]}function Vbe(e,t){return{documents:[Are(e,t.path)]}}function zbe(e,t){const r={structuredQuery:{}},n=t.path;let a;t.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=Are(e,a);const s=function(u){if(u.length!==0)return pre(cf.create(u,"and"))}(t.filters);s&&(r.structuredQuery.where=s);const i=function(u){if(u.length!==0)return u.map(d=>function(h){return{field:Gv(h.field),direction:Kbe(h.dir)}}(d))}(t.orderBy);i&&(r.structuredQuery.orderBy=i);const o=CO(e,t.limit);return o!==null&&(r.structuredQuery.limit=o),t.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{ft:r,parent:a}}function $be(e){let t=Mbe(e.parent);const r=e.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){ca(n===1,65062);const d=r.from[0];d.allDescendants?a=d.collectionId:t=t.child(d.collectionId)}let s=[];r.where&&(s=function(f){const h=mre(f);return h instanceof cf&&$te(h)?h.getFilters():[h]}(r.where));let i=[];r.orderBy&&(i=function(f){return f.map(h=>function(g){return new D2(Kv(g.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(r.orderBy));let o=null;r.limit&&(o=function(f){let h;return h=typeof f=="object"?f.value:f,Bk(h)?null:h}(r.limit));let c=null;r.startAt&&(c=function(f){const h=!!f.before,m=f.values||[];return new V1(m,h)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const h=!f.before,m=f.values||[];return new V1(m,h)}(r.endAt)),ube(t,a,i,s,o,"F",c,u)}function Gbe(e,t){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Gr(28987,{purpose:a})}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function mre(e){return e.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Kv(r.unaryFilter.field);return Ci.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=Kv(r.unaryFilter.field);return Ci.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Kv(r.unaryFilter.field);return Ci.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Kv(r.unaryFilter.field);return Ci.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Gr(61313);default:return Gr(60726)}}(e):e.fieldFilter!==void 0?function(r){return Ci.create(Kv(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Gr(58110);default:return Gr(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(r){return cf.create(r.compositeFilter.filters.map(n=>mre(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Gr(1026)}}(r.compositeFilter.op))}(e):Gr(30097,{filter:e})}function Kbe(e){return Obe[e]}function qbe(e){return Dbe[e]}function Wbe(e){return Pbe[e]}function Gv(e){return{fieldPath:e.canonicalString()}}function Kv(e){return ao.fromServerFormat(e.fieldPath)}function pre(e){return e instanceof Ci?function(r){if(r.op==="=="){if(sV(r.value))return{unaryFilter:{field:Gv(r.field),op:"IS_NAN"}};if(aV(r.value))return{unaryFilter:{field:Gv(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(sV(r.value))return{unaryFilter:{field:Gv(r.field),op:"IS_NOT_NAN"}};if(aV(r.value))return{unaryFilter:{field:Gv(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gv(r.field),op:qbe(r.op),value:r.value}}}(e):e instanceof cf?function(r){const n=r.getFilters().map(a=>pre(a));return n.length===1?n[0]:{compositeFilter:{op:Wbe(r.op),filters:n}}}(e):Gr(54877,{filter:e})}function Xbe(e){const t=[];return e.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function gre(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(t,r,n,a,s=en.min(),i=en.min(),o=co.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(t){return new wm(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new wm(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new wm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new wm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ybe{constructor(t){this.yt=t}}function Jbe(e){const t=$be({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?pN(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zbe{constructor(){this.Cn=new eye}addToCollectionParentIndex(t,r){return this.Cn.add(r),Pt.resolve()}getCollectionParents(t,r){return Pt.resolve(this.Cn.getEntries(r))}addFieldIndex(t,r){return Pt.resolve()}deleteFieldIndex(t,r){return Pt.resolve()}deleteAllFieldIndexes(t){return Pt.resolve()}createTargetIndexes(t,r){return Pt.resolve()}getDocumentsMatchingTarget(t,r){return Pt.resolve(null)}getIndexType(t,r){return Pt.resolve(0)}getFieldIndexes(t,r){return Pt.resolve([])}getNextCollectionGroupToUpdate(t){return Pt.resolve(null)}getMinOffset(t,r){return Pt.resolve(Km.min())}getMinOffsetFromCollectionGroup(t,r){return Pt.resolve(Km.min())}updateCollectionGroup(t,r,n){return Pt.resolve()}updateIndexEntries(t,r){return Pt.resolve()}}class eye{constructor(){this.index={}}add(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r]||new Pi(Ia.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(t){return(this.index[t]||new Pi(Ia.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vV={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xre=41943040;class ac{static withCacheSize(t){return new ac(t,ac.DEFAULT_COLLECTION_PERCENTILE,ac.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,r,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ac.DEFAULT_COLLECTION_PERCENTILE=10,ac.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ac.DEFAULT=new ac(xre,ac.DEFAULT_COLLECTION_PERCENTILE,ac.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ac.DISABLED=new ac(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new $1(0)}static cr(){return new $1(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV="LruGarbageCollector",tye=1048576;function yV([e,t],[r,n]){const a=Tn(e,r);return a===0?Tn(t,n):a}class rye{constructor(t){this.Ir=t,this.buffer=new Pi(yV),this.Er=0}dr(){return++this.Er}Ar(t){const r=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();yV(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class nye{constructor(t,r,n){this.garbageCollector=t,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){dr(bV,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){kb(r)?dr(bV,"Ignoring IndexedDB error during garbage collection: ",r):await Nb(r)}await this.Vr(3e5)})}}class aye{constructor(t,r){this.mr=t,this.params=r}calculateTargetCount(t,r){return this.mr.gr(t).next(n=>Math.floor(r/100*n))}nthSequenceNumber(t,r){if(r===0)return Pt.resolve(kk.ce);const n=new rye(r);return this.mr.forEachTarget(t,a=>n.Ar(a.sequenceNumber)).next(()=>this.mr.pr(t,a=>n.Ar(a))).next(()=>n.maxValue)}removeTargets(t,r,n){return this.mr.removeTargets(t,r,n)}removeOrphanedDocuments(t,r){return this.mr.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(dr("LruGarbageCollector","Garbage collection skipped; disabled"),Pt.resolve(vV)):this.getCacheSize(t).next(n=>n<this.params.cacheSizeCollectionThreshold?(dr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vV):this.yr(t,r))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,r){let n,a,s,i,o,c,u;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(dr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),a=this.params.maximumSequenceNumbersToCollect):a=f,i=Date.now(),this.nthSequenceNumber(t,a))).next(f=>(n=f,o=Date.now(),this.removeTargets(t,n,r))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(t,n))).next(f=>(u=Date.now(),zv()<=Bn.DEBUG&&dr("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${a} in `+(o-i)+`ms
	Removed ${s} targets in `+(c-o)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),Pt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:f})))}}function sye(e,t){return new aye(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iye{constructor(){this.changes=new xx(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,ol.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Pt.resolve(n):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oye{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lye{constructor(t,r,n,a){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(t,r){let n=null;return this.documentOverlayCache.getOverlay(t,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(t,r))).next(a=>(n!==null&&t2(n.mutation,a,Zc.empty(),ir.now()),a))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.getLocalViewOfDocuments(t,n,jn()).next(()=>n))}getLocalViewOfDocuments(t,r,n=jn()){const a=mg();return this.populateOverlays(t,a,r).next(()=>this.computeViews(t,r,a,n).next(s=>{let i=Tw();return s.forEach((o,c)=>{i=i.insert(o,c.overlayedDocument)}),i}))}getOverlayedDocuments(t,r){const n=mg();return this.populateOverlays(t,n,r).next(()=>this.computeViews(t,r,n,jn()))}populateOverlays(t,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(t,a).next(s=>{s.forEach((i,o)=>{r.set(i,o)})})}computeViews(t,r,n,a){let s=Kh();const i=e2(),o=function(){return e2()}();return r.forEach((c,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof mp)?s=s.insert(u.key,u):d!==void 0?(i.set(u.key,d.mutation.getFieldMask()),t2(d.mutation,u,d.mutation.getFieldMask(),ir.now())):i.set(u.key,Zc.empty())}),this.recalculateAndSaveOverlays(t,s).next(c=>(c.forEach((u,d)=>i.set(u,d)),r.forEach((u,d)=>o.set(u,new oye(d,i.get(u)??null))),o))}recalculateAndSaveOverlays(t,r){const n=e2();let a=new ms((i,o)=>i-o),s=jn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(i=>{for(const o of i)o.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||Zc.empty();d=o.applyToLocalView(u,d),n.set(c,d);const f=(a.get(o.batchId)||jn()).add(c);a=a.insert(o.batchId,f)})}).next(()=>{const i=[],o=a.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),u=c.key,d=c.value,f=Zte();d.forEach(h=>{if(!s.has(h)){const m=ire(r.get(h),n.get(h));m!==null&&f.set(h,m),s=s.add(h)}}),i.push(this.documentOverlayCache.saveOverlays(t,u,f))}return Pt.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,r,n,a){return function(i){return wr.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):VR(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,n,a):this.getDocumentsMatchingCollectionQuery(t,r,n,a)}getNextDocuments(t,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,n,a).next(s=>{const i=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,n.largestBatchId,a-s.size):Pt.resolve(mg());let o=I2,c=s;return i.next(u=>Pt.forEach(u,(d,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),s.get(d)?Pt.resolve():this.remoteDocumentCache.getEntry(t,d).next(h=>{c=c.insert(d,h)}))).next(()=>this.populateOverlays(t,u,s)).next(()=>this.computeViews(t,c,u,jn())).next(d=>({batchId:o,changes:Jte(d)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new wr(r)).next(n=>{let a=Tw();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(t,r,n,a){const s=r.collectionGroup;let i=Tw();return this.indexManager.getCollectionParents(t,s).next(o=>Pt.forEach(o,c=>{const u=function(f,h){return new gx(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(t,u,n,a).next(d=>{d.forEach((f,h)=>{i=i.insert(f,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(t,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,n,s,a))).next(i=>{s.forEach((c,u)=>{const d=u.getKey();i.get(d)===null&&(i=i.insert(d,ol.newInvalidDocument(d)))});let o=Tw();return i.forEach((c,u)=>{const d=s.get(c);d!==void 0&&t2(d.mutation,u,Zc.empty(),ir.now()),Ok(r,u)&&(o=o.insert(c,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cye{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,r){return Pt.resolve(this.Lr.get(r))}saveBundleMetadata(t,r){return this.Lr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:EA(a.createTime)}}(r)),Pt.resolve()}getNamedQuery(t,r){return Pt.resolve(this.kr.get(r))}saveNamedQuery(t,r){return this.kr.set(r.name,function(a){return{name:a.name,query:Jbe(a.bundledQuery),readTime:EA(a.readTime)}}(r)),Pt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uye{constructor(){this.overlays=new ms(wr.comparator),this.qr=new Map}getOverlay(t,r){return Pt.resolve(this.overlays.get(r))}getOverlays(t,r){const n=mg();return Pt.forEach(r,a=>this.getOverlay(t,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(t,r,n){return n.forEach((a,s)=>{this.St(t,r,s)}),Pt.resolve()}removeOverlaysForBatchId(t,r,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(n)),Pt.resolve()}getOverlaysForCollection(t,r,n){const a=mg(),s=r.length+1,i=new wr(r.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const c=o.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&a.set(c.getKey(),c)}return Pt.resolve(a)}getOverlaysForCollectionGroup(t,r,n,a){let s=new ms((u,d)=>u-d);const i=this.overlays.getIterator();for(;i.hasNext();){const u=i.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=mg(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=mg(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>o.set(u,d)),!(o.size()>=a)););return Pt.resolve(o)}St(t,r,n){const a=this.overlays.get(n.key);if(a!==null){const i=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new kbe(r,n));let s=this.qr.get(r);s===void 0&&(s=jn(),this.qr.set(r,s)),this.qr.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dye{constructor(){this.sessionToken=co.EMPTY_BYTE_STRING}getSessionToken(t){return Pt.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,Pt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(){this.Qr=new Pi(eo.$r),this.Ur=new Pi(eo.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,r){const n=new eo(t,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(t,r){t.forEach(n=>this.addReference(n,r))}removeReference(t,r){this.Gr(new eo(t,r))}zr(t,r){t.forEach(n=>this.removeReference(n,r))}jr(t){const r=new wr(new Ia([])),n=new eo(r,t),a=new eo(r,t+1),s=[];return this.Ur.forEachInRange([n,a],i=>{this.Gr(i),s.push(i.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const r=new wr(new Ia([])),n=new eo(r,t),a=new eo(r,t+1);let s=jn();return this.Ur.forEachInRange([n,a],i=>{s=s.add(i.key)}),s}containsKey(t){const r=new eo(t,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&t.isEqual(n.key)}}class eo{constructor(t,r){this.key=t,this.Yr=r}static $r(t,r){return wr.comparator(t.key,r.key)||Tn(t.Yr,r.Yr)}static Kr(t,r){return Tn(t.Yr,r.Yr)||wr.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fye{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Pi(eo.$r)}checkEmpty(t){return Pt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,n,a){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Nbe(s,r,n,a);this.mutationQueue.push(i);for(const o of a)this.Zr=this.Zr.add(new eo(o.key,s)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return Pt.resolve(i)}lookupMutationBatch(t,r){return Pt.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(t,r){const n=r+1,a=this.ei(n),s=a<0?0:a;return Pt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Pt.resolve(this.mutationQueue.length===0?MR:this.tr-1)}getAllMutationBatches(t){return Pt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const n=new eo(r,0),a=new eo(r,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,a],i=>{const o=this.Xr(i.Yr);s.push(o)}),Pt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,r){let n=new Pi(Tn);return r.forEach(a=>{const s=new eo(a,0),i=new eo(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,i],o=>{n=n.add(o.Yr)})}),Pt.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(t,r){const n=r.path,a=n.length+1;let s=n;wr.isDocumentKey(s)||(s=s.child(""));const i=new eo(new wr(s),0);let o=new Pi(Tn);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(o=o.add(c.Yr)),!0)},i),Pt.resolve(this.ti(o))}ti(t){const r=[];return t.forEach(n=>{const a=this.Xr(n);a!==null&&r.push(a)}),r}removeMutationBatch(t,r){ca(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Pt.forEach(r.mutations,a=>{const s=new eo(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Zr=n})}ir(t){}containsKey(t,r){const n=new eo(r,0),a=this.Zr.firstAfterOrEqual(n);return Pt.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,Pt.resolve()}ni(t,r){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const r=this.ei(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aye{constructor(t){this.ri=t,this.docs=function(){return new ms(wr.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,i=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const n=this.docs.get(r);return Pt.resolve(n?n.document.mutableCopy():ol.newInvalidDocument(r))}getEntries(t,r){let n=Kh();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():ol.newInvalidDocument(a))}),Pt.resolve(n)}getDocumentsMatchingQuery(t,r,n,a){let s=Kh();const i=r.path,o=new wr(i.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!i.isPrefixOf(u.path))break;u.path.length>i.length+1||H1e(Q1e(d),n)<=0||(a.has(d.key)||Ok(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Pt.resolve(s)}getAllFromCollectionGroup(t,r,n,a){Gr(9500)}ii(t,r){return Pt.forEach(this.docs,n=>r(n))}newChangeBuffer(t){return new hye(this)}getSize(t){return Pt.resolve(this.size)}}class hye extends iye{constructor(t){super(),this.Nr=t}applyChanges(t){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.Nr.addEntry(t,a)):this.Nr.removeEntry(n)}),Pt.waitFor(r)}getFromCache(t,r){return this.Nr.getEntry(t,r)}getAllFromCache(t,r){return this.Nr.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mye{constructor(t){this.persistence=t,this.si=new xx(r=>QR(r),HR),this.lastRemoteSnapshotVersion=en.min(),this.highestTargetId=0,this.oi=0,this._i=new qR,this.targetCount=0,this.ai=$1.ur()}forEachTarget(t,r){return this.si.forEach((n,a)=>r(a)),Pt.resolve()}getLastRemoteSnapshotVersion(t){return Pt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Pt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Pt.resolve(this.highestTargetId)}setTargetsMetadata(t,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),Pt.resolve()}Pr(t){this.si.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.ai=new $1(r),this.highestTargetId=r),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,r){return this.Pr(r),this.targetCount+=1,Pt.resolve()}updateTargetData(t,r){return this.Pr(r),Pt.resolve()}removeTargetData(t,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,Pt.resolve()}removeTargets(t,r,n){let a=0;const s=[];return this.si.forEach((i,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.si.delete(i),s.push(this.removeMatchingKeysForTargetId(t,o.targetId)),a++)}),Pt.waitFor(s).next(()=>a)}getTargetCount(t){return Pt.resolve(this.targetCount)}getTargetData(t,r){const n=this.si.get(r)||null;return Pt.resolve(n)}addMatchingKeys(t,r,n){return this._i.Wr(r,n),Pt.resolve()}removeMatchingKeys(t,r,n){this._i.zr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(i=>{s.push(a.markPotentiallyOrphaned(t,i))}),Pt.waitFor(s)}removeMatchingKeysForTargetId(t,r){return this._i.jr(r),Pt.resolve()}getMatchingKeysForTargetId(t,r){const n=this._i.Hr(r);return Pt.resolve(n)}containsKey(t,r){return Pt.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vre{constructor(t,r){this.ui={},this.overlays={},this.ci=new kk(0),this.li=!1,this.li=!0,this.hi=new dye,this.referenceDelegate=t(this),this.Pi=new mye(this),this.indexManager=new Zbe,this.remoteDocumentCache=function(a){return new Aye(a)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new Ybe(r),this.Ii=new cye(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new uye,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let n=this.ui[t.toKey()];return n||(n=new fye(r,this.referenceDelegate),this.ui[t.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,r,n){dr("MemoryPersistence","Starting transaction:",t);const a=new pye(this.ci.next());return this.referenceDelegate.Ei(),n(a).next(s=>this.referenceDelegate.di(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Ai(t,r){return Pt.or(Object.values(this.ui).map(n=>()=>n.containsKey(t,r)))}}class pye extends z1e{constructor(t){super(),this.currentSequenceNumber=t}}class WR{constructor(t){this.persistence=t,this.Ri=new qR,this.Vi=null}static mi(t){return new WR(t)}get fi(){if(this.Vi)return this.Vi;throw Gr(60996)}addReference(t,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),Pt.resolve()}removeReference(t,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),Pt.resolve()}markPotentiallyOrphaned(t,r){return this.fi.add(r.toString()),Pt.resolve()}removeTarget(t,r){this.Ri.jr(r.targetId).forEach(a=>this.fi.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,r.targetId).next(a=>{a.forEach(s=>this.fi.add(s.toString()))}).next(()=>n.removeTargetData(t,r))}Ei(){this.Vi=new Set}di(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Pt.forEach(this.fi,n=>{const a=wr.fromPath(n);return this.gi(t,a).next(s=>{s||r.removeEntry(a,en.min())})}).next(()=>(this.Vi=null,r.apply(t)))}updateLimboDocument(t,r){return this.gi(t,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(t){return 0}gi(t,r){return Pt.or([()=>Pt.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Ai(t,r)])}}class vN{constructor(t,r){this.persistence=t,this.pi=new xx(n=>K1e(n.path),(n,a)=>n.isEqual(a)),this.garbageCollector=sye(this,r)}static mi(t,r){return new vN(t,r)}Ei(){}di(t){return Pt.resolve()}forEachTarget(t,r){return this.persistence.getTargetCache().forEachTarget(t,r)}gr(t){const r=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(n=>r.next(a=>n+a))}wr(t){let r=0;return this.pr(t,n=>{r++}).next(()=>r)}pr(t,r){return Pt.forEach(this.pi,(n,a)=>this.br(t,n,a).next(s=>s?Pt.resolve():r(a)))}removeTargets(t,r,n){return this.persistence.getTargetCache().removeTargets(t,r,n)}removeOrphanedDocuments(t,r){let n=0;const a=this.persistence.getRemoteDocumentCache(),s=a.newChangeBuffer();return a.ii(t,i=>this.br(t,i,r).next(o=>{o||(n++,s.removeEntry(i,en.min()))})).next(()=>s.apply(t)).next(()=>n)}markPotentiallyOrphaned(t,r){return this.pi.set(r,t.currentSequenceNumber),Pt.resolve()}removeTarget(t,r){const n=r.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),Pt.resolve()}removeReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),Pt.resolve()}updateLimboDocument(t,r){return this.pi.set(r,t.currentSequenceNumber),Pt.resolve()}Ti(t){let r=t.key.toString().length;return t.isFoundDocument()&&(r+=pS(t.data.value)),r}br(t,r,n){return Pt.or([()=>this.persistence.Ai(t,r),()=>this.persistence.getTargetCache().containsKey(t,r),()=>{const a=this.pi.get(r);return Pt.resolve(a!==void 0&&a>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(t,r,n,a){this.targetId=t,this.fromCache=r,this.Es=n,this.ds=a}static As(t,r){let n=jn(),a=jn();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new XR(t,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gye{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xye{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Wpe()?8:$1e(pl())>0?6:4}()}initialize(t,r){this.ps=t,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(t,r,n,a){const s={result:null};return this.ys(t,r).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.ws(t,r,a,n).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new gye;return this.Ss(t,r,i).next(o=>{if(s.result=o,this.Vs)return this.bs(t,r,i,o.size)})}).next(()=>s.result)}bs(t,r,n,a){return n.documentReadCount<this.fs?(zv()<=Bn.DEBUG&&dr("QueryEngine","SDK will not create cache indexes for query:",$v(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Pt.resolve()):(zv()<=Bn.DEBUG&&dr("QueryEngine","Query:",$v(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?(zv()<=Bn.DEBUG&&dr("QueryEngine","The SDK decides to create cache indexes for query:",$v(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,wA(r))):Pt.resolve())}ys(t,r){if(cV(r))return Pt.resolve(null);let n=wA(r);return this.indexManager.getIndexType(t,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=pN(r,null,"F"),n=wA(r)),this.indexManager.getDocumentsMatchingTarget(t,n).next(s=>{const i=jn(...s);return this.ps.getDocuments(t,i).next(o=>this.indexManager.getMinOffset(t,n).next(c=>{const u=this.Ds(r,o);return this.Cs(r,u,i,c.readTime)?this.ys(t,pN(r,null,"F")):this.vs(t,u,r,c)}))})))}ws(t,r,n,a){return cV(r)||a.isEqual(en.min())?Pt.resolve(null):this.ps.getDocuments(t,n).next(s=>{const i=this.Ds(r,s);return this.Cs(r,i,n,a)?Pt.resolve(null):(zv()<=Bn.DEBUG&&dr("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),$v(r)),this.vs(t,i,r,U1e(a,I2)).next(o=>o))})}Ds(t,r){let n=new Pi(Xte(t));return r.forEach((a,s)=>{Ok(t,s)&&(n=n.add(s))}),n}Cs(t,r,n,a){if(t.limit===null)return!1;if(n.size!==r.size)return!0;const s=t.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Ss(t,r,n){return zv()<=Bn.DEBUG&&dr("QueryEngine","Using full collection scan to execute query:",$v(r)),this.ps.getDocumentsMatchingQuery(t,r,Km.min(),n)}vs(t,r,n,a){return this.ps.getDocumentsMatchingQuery(t,n,a).next(s=>(r.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR="LocalStore",vye=3e8;class bye{constructor(t,r,n,a){this.persistence=t,this.Fs=r,this.serializer=a,this.Ms=new ms(Tn),this.xs=new xx(s=>QR(s),HR),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(n)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new lye(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.Ms))}}function yye(e,t,r,n){return new bye(e,t,r,n)}async function bre(e,t){const r=nn(e);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.Bs(t),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const i=[],o=[];let c=jn();for(const u of a){i.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({Ls:u,removedBatchIds:i,addedBatchIds:o}))})})}function wye(e,t){const r=nn(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=t.batch.keys(),s=r.Ns.newChangeBuffer({trackRemovals:!0});return function(o,c,u,d){const f=u.batch,h=f.keys();let m=Pt.resolve();return h.forEach(g=>{m=m.next(()=>d.getEntry(c,g)).next(x=>{const v=u.docVersions.get(g);ca(v!==null,48541),x.version.compareTo(v)<0&&(f.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),d.addEntry(x)))})}),m.next(()=>o.mutationQueue.removeMutationBatch(c,f))}(r,n,t,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let c=jn();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(c=c.add(o.batch.mutations[u].key));return c}(t))).next(()=>r.localDocuments.getDocuments(n,a))})}function yre(e){const t=nn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Pi.getLastRemoteSnapshotVersion(r))}function Eye(e,t){const r=nn(e),n=t.snapshotVersion;let a=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=r.Ns.newChangeBuffer({trackRemovals:!0});a=r.Ms;const o=[];t.targetChanges.forEach((d,f)=>{const h=a.get(f);if(!h)return;o.push(r.Pi.removeMatchingKeys(s,d.removedDocuments,f).next(()=>r.Pi.addMatchingKeys(s,d.addedDocuments,f)));let m=h.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?m=m.withResumeToken(co.EMPTY_BYTE_STRING,en.min()).withLastLimboFreeSnapshotVersion(en.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,n)),a=a.insert(f,m),function(x,v,y){return x.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=vye?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(h,m,d)&&o.push(r.Pi.updateTargetData(s,m))});let c=Kh(),u=jn();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),o.push(Cye(s,i,t.documentUpdates).next(d=>{c=d.ks,u=d.qs})),!n.isEqual(en.min())){const d=r.Pi.getLastRemoteSnapshotVersion(s).next(f=>r.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n));o.push(d)}return Pt.waitFor(o).next(()=>i.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(r.Ms=a,s))}function Cye(e,t,r){let n=jn(),a=jn();return r.forEach(s=>n=n.add(s)),t.getEntries(e,n).next(s=>{let i=Kh();return r.forEach((o,c)=>{const u=s.get(o);c.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(o)),c.isNoDocument()&&c.version.isEqual(en.min())?(t.removeEntry(o,c.readTime),i=i.insert(o,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(c),i=i.insert(o,c)):dr(YR,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",c.version)}),{ks:i,qs:a}})}function _ye(e,t){const r=nn(e);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=MR),r.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function Sye(e,t){const r=nn(e);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Pi.getTargetData(n,t).next(s=>s?(a=s,Pt.resolve(a)):r.Pi.allocateTargetId(n).next(i=>(a=new wm(t,i,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(t,n.targetId)),n})}async function kO(e,t,r){const n=nn(e),a=n.Ms.get(t),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,i=>n.persistence.referenceDelegate.removeTarget(i,a))}catch(i){if(!kb(i))throw i;dr(YR,`Failed to update sequence numbers for target ${t}: ${i}`)}n.Ms=n.Ms.remove(t),n.xs.delete(a.target)}function wV(e,t,r){const n=nn(e);let a=en.min(),s=jn();return n.persistence.runTransaction("Execute query","readwrite",i=>function(c,u,d){const f=nn(c),h=f.xs.get(d);return h!==void 0?Pt.resolve(f.Ms.get(h)):f.Pi.getTargetData(u,d)}(n,i,wA(t)).next(o=>{if(o)return a=o.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(i,o.targetId).next(c=>{s=c})}).next(()=>n.Fs.getDocumentsMatchingQuery(i,t,r?a:en.min(),r?s:jn())).next(o=>(Nye(n,fbe(t),o),{documents:o,Qs:s})))}function Nye(e,t,r){let n=e.Os.get(t)||en.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),e.Os.set(t,n)}class EV{constructor(){this.activeTargetIds=xbe()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class kye{constructor(){this.Mo=new EV,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,n){}addLocalQueryTarget(t,r=!0){return r&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,r,n){this.xo[t]=r}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new EV,Promise.resolve()}handleUserChange(t,r,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bye{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV="ConnectivityMonitor";class _V{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){dr(CV,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){dr(CV,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let R_=null;function BO(){return R_===null?R_=function(){return 268435456+Math.round(2147483648*Math.random())}():R_++,"0x"+R_.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3="RestConnection",Tye={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class jye{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+t.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===AN?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(t,r,n,a,s){const i=BO(),o=this.zo(t,r.toUriEncodedString());dr(g3,`Sending RPC '${t}' ${i}:`,o,n);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,a,s);const{host:u}=new URL(o),d=l0(u);return this.Jo(t,o,c,n,d).then(f=>(dr(g3,`Received RPC '${t}' ${i}: `,f),f),f=>{throw Kg(g3,`RPC '${t}' ${i} failed with error: `,f,"url: ",o,"request:",n),f})}Ho(t,r,n,a,s,i){return this.Go(t,r,n,a,s)}jo(t,r,n){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Sb}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,s)=>t[s]=a),n&&n.headers.forEach((a,s)=>t[s]=a)}zo(t,r){const n=Tye[t];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iye{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo="WebChannelConnection";class Fye extends jye{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,r,n,a,s){const i=BO();return new Promise((o,c)=>{const u=new wte;u.setWithCredentials(!0),u.listenOnce(Ete.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case mS.NO_ERROR:const f=u.getResponseJson();dr(qo,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(f)),o(f);break;case mS.TIMEOUT:dr(qo,`RPC '${t}' ${i} timed out`),c(new Xt(_t.DEADLINE_EXCEEDED,"Request time out"));break;case mS.HTTP_ERROR:const h=u.getStatus();if(dr(qo,`RPC '${t}' ${i} failed with status:`,h,"response text:",u.getResponseText()),h>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const x=function(y){const w=y.toLowerCase().replace(/_/g,"-");return Object.values(_t).indexOf(w)>=0?w:_t.UNKNOWN}(g.status);c(new Xt(x,g.message))}else c(new Xt(_t.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Xt(_t.UNAVAILABLE,"Connection failed."));break;default:Gr(9055,{l_:t,streamId:i,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{dr(qo,`RPC '${t}' ${i} completed.`)}});const d=JSON.stringify(a);dr(qo,`RPC '${t}' ${i} sending request:`,a),u.send(r,"POST",d,n,15)})}T_(t,r,n){const a=BO(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=Ste(),o=_te(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=s.join("");dr(qo,`Creating RPC '${t}' stream ${a}: ${d}`,c);const f=i.createWebChannel(d,c);this.I_(f);let h=!1,m=!1;const g=new Iye({Yo:v=>{m?dr(qo,`Not sending because RPC '${t}' stream ${a} is closed:`,v):(h||(dr(qo,`Opening RPC '${t}' stream ${a} transport.`),f.open(),h=!0),dr(qo,`RPC '${t}' stream ${a} sending:`,v),f.send(v))},Zo:()=>f.close()}),x=(v,y,w)=>{v.listen(y,_=>{try{w(_)}catch(T){setTimeout(()=>{throw T},0)}})};return x(f,Bw.EventType.OPEN,()=>{m||(dr(qo,`RPC '${t}' stream ${a} transport opened.`),g.o_())}),x(f,Bw.EventType.CLOSE,()=>{m||(m=!0,dr(qo,`RPC '${t}' stream ${a} transport closed`),g.a_(),this.E_(f))}),x(f,Bw.EventType.ERROR,v=>{m||(m=!0,Kg(qo,`RPC '${t}' stream ${a} transport errored. Name:`,v.name,"Message:",v.message),g.a_(new Xt(_t.UNAVAILABLE,"The operation could not be completed")))}),x(f,Bw.EventType.MESSAGE,v=>{var y;if(!m){const w=v.data[0];ca(!!w,16349);const _=w,T=(_==null?void 0:_.error)||((y=_[0])==null?void 0:y.error);if(T){dr(qo,`RPC '${t}' stream ${a} received error:`,T);const B=T.status;let j=function(I){const L=pi[I];if(L!==void 0)return lre(L)}(B),E=T.message;j===void 0&&(j=_t.INTERNAL,E="Unknown error status: "+B+" with message "+T.message),m=!0,g.a_(new Xt(j,E)),f.close()}else dr(qo,`RPC '${t}' stream ${a} received:`,w),g.u_(w)}}),x(o,Cte.STAT_EVENT,v=>{v.stat===gO.PROXY?dr(qo,`RPC '${t}' stream ${a} detected buffering proxy`):v.stat===gO.NOPROXY&&dr(qo,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{g.__()},0),g}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(r=>r===t)}}function x3(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(e){return new Rbe(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wre{constructor(t,r,n=1e3,a=1.5,s=6e4){this.Mi=t,this.timerId=r,this.d_=n,this.A_=a,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,r-n);a>0&&dr("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV="PersistentStream";class Ere{constructor(t,r,n,a,s,i,o,c){this.Mi=t,this.S_=n,this.b_=a,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new wre(t,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():r&&r.code===_t.RESOURCE_EXHAUSTED?(Gh(r.toString()),Gh("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===_t.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(r)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.D_===r&&this.G_(n,a)},n=>{t(()=>{const a=new Xt(_t.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)})})}G_(t,r){const n=this.W_(this.D_);this.stream=this.j_(t,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{n(()=>this.z_(a))}),this.stream.onMessage(a=>{n(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return dr(SV,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return r=>{this.Mi.enqueueAndForget(()=>this.D_===t?r():(dr(SV,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Oye extends Ere{constructor(t,r,n,a,s,i){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}j_(t,r){return this.connection.T_("Listen",t,r)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const r=Ube(this.serializer,t),n=function(s){if(!("targetChange"in s))return en.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?en.min():i.readTime?EA(i.readTime):en.min()}(t);return this.listener.H_(r,n)}Y_(t){const r={};r.database=NO(this.serializer),r.addTarget=function(s,i){let o;const c=i.target;if(o=wO(c)?{documents:Vbe(s,c)}:{query:zbe(s,c).ft},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=dre(s,i.resumeToken);const u=CO(s,i.expectedCount);u!==null&&(o.expectedCount=u)}else if(i.snapshotVersion.compareTo(en.min())>0){o.readTime=xN(s,i.snapshotVersion.toTimestamp());const u=CO(s,i.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,t);const n=Gbe(this.serializer,t);n&&(r.labels=n),this.q_(r)}Z_(t){const r={};r.database=NO(this.serializer),r.removeTarget=t,this.q_(r)}}class Dye extends Ere{constructor(t,r,n,a,s,i){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,r){return this.connection.T_("Write",t,r)}J_(t){return ca(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ca(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ca(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const r=Hbe(t.writeResults,t.commitTime),n=EA(t.commitTime);return this.listener.na(n,r)}ra(){const t={};t.database=NO(this.serializer),this.q_(t)}ea(t){const r={streamToken:this.lastStreamToken,writes:t.map(n=>Qbe(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pye{}class Rye extends Pye{constructor(t,r,n,a){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Xt(_t.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,r,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Go(t,_O(r,n),a,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===_t.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Xt(_t.UNKNOWN,s.toString())})}Ho(t,r,n,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Ho(t,_O(r,n),a,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===_t.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Xt(_t.UNKNOWN,i.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Lye{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gh(r),this.aa=!1):dr("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg="RemoteStore";class Mye{constructor(t,r,n,a,s){this.localStore=t,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(i=>{n.enqueueAndForget(async()=>{vx(this)&&(dr(qg,"Restarting streams for network reachability change."),await async function(c){const u=nn(c);u.Ea.add(4),await QE(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Uk(u)}(this))})}),this.Ra=new Lye(n,a)}}async function Uk(e){if(vx(e))for(const t of e.da)await t(!0)}async function QE(e){for(const t of e.da)await t(!1)}function Cre(e,t){const r=nn(e);r.Ia.has(t.targetId)||(r.Ia.set(t.targetId,t),tL(r)?eL(r):Bb(r).O_()&&ZR(r,t))}function JR(e,t){const r=nn(e),n=Bb(r);r.Ia.delete(t),n.O_()&&_re(r,t),r.Ia.size===0&&(n.O_()?n.L_():vx(r)&&r.Ra.set("Unknown"))}function ZR(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(en.min())>0){const r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}Bb(e).Y_(t)}function _re(e,t){e.Va.Ue(t),Bb(e).Z_(t)}function eL(e){e.Va=new Fbe({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Bb(e).start(),e.Ra.ua()}function tL(e){return vx(e)&&!Bb(e).x_()&&e.Ia.size>0}function vx(e){return nn(e).Ea.size===0}function Sre(e){e.Va=void 0}async function Uye(e){e.Ra.set("Online")}async function Qye(e){e.Ia.forEach((t,r)=>{ZR(e,t)})}async function Hye(e,t){Sre(e),tL(e)?(e.Ra.ha(t),eL(e)):e.Ra.set("Unknown")}async function Vye(e,t,r){if(e.Ra.set("Online"),t instanceof ure&&t.state===2&&t.cause)try{await async function(a,s){const i=s.cause;for(const o of s.targetIds)a.Ia.has(o)&&(await a.remoteSyncer.rejectListen(o,i),a.Ia.delete(o),a.Va.removeTarget(o))}(e,t)}catch(n){dr(qg,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await bN(e,n)}else if(t instanceof vS?e.Va.Ze(t):t instanceof cre?e.Va.st(t):e.Va.tt(t),!r.isEqual(en.min()))try{const n=await yre(e.localStore);r.compareTo(n)>=0&&await function(s,i){const o=s.Va.Tt(i);return o.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(c.resumeToken,i))}}),o.targetMismatches.forEach((c,u)=>{const d=s.Ia.get(c);if(!d)return;s.Ia.set(c,d.withResumeToken(co.EMPTY_BYTE_STRING,d.snapshotVersion)),_re(s,c);const f=new wm(d.target,c,u,d.sequenceNumber);ZR(s,f)}),s.remoteSyncer.applyRemoteEvent(o)}(e,r)}catch(n){dr(qg,"Failed to raise snapshot:",n),await bN(e,n)}}async function bN(e,t,r){if(!kb(t))throw t;e.Ea.add(1),await QE(e),e.Ra.set("Offline"),r||(r=()=>yre(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{dr(qg,"Retrying IndexedDB access"),await r(),e.Ea.delete(1),await Uk(e)})}function Nre(e,t){return t().catch(r=>bN(e,r,t))}async function Qk(e){const t=nn(e),r=Ym(t);let n=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:MR;for(;zye(t);)try{const a=await _ye(t.localStore,n);if(a===null){t.Ta.length===0&&r.L_();break}n=a.batchId,$ye(t,a)}catch(a){await bN(t,a)}kre(t)&&Bre(t)}function zye(e){return vx(e)&&e.Ta.length<10}function $ye(e,t){e.Ta.push(t);const r=Ym(e);r.O_()&&r.X_&&r.ea(t.mutations)}function kre(e){return vx(e)&&!Ym(e).x_()&&e.Ta.length>0}function Bre(e){Ym(e).start()}async function Gye(e){Ym(e).ra()}async function Kye(e){const t=Ym(e);for(const r of e.Ta)t.ea(r.mutations)}async function qye(e,t,r){const n=e.Ta.shift(),a=$R.from(n,t,r);await Nre(e,()=>e.remoteSyncer.applySuccessfulWrite(a)),await Qk(e)}async function Wye(e,t){t&&Ym(e).X_&&await async function(n,a){if(function(i){return Tbe(i)&&i!==_t.ABORTED}(a.code)){const s=n.Ta.shift();Ym(n).B_(),await Nre(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await Qk(n)}}(e,t),kre(e)&&Bre(e)}async function NV(e,t){const r=nn(e);r.asyncQueue.verifyOperationInProgress(),dr(qg,"RemoteStore received new credentials");const n=vx(r);r.Ea.add(3),await QE(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.Ea.delete(3),await Uk(r)}async function Xye(e,t){const r=nn(e);t?(r.Ea.delete(2),await Uk(r)):t||(r.Ea.add(2),await QE(r),r.Ra.set("Unknown"))}function Bb(e){return e.ma||(e.ma=function(r,n,a){const s=nn(r);return s.sa(),new Oye(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:Uye.bind(null,e),t_:Qye.bind(null,e),r_:Hye.bind(null,e),H_:Vye.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),tL(e)?eL(e):e.Ra.set("Unknown")):(await e.ma.stop(),Sre(e))})),e.ma}function Ym(e){return e.fa||(e.fa=function(r,n,a){const s=nn(r);return s.sa(),new Dye(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Gye.bind(null,e),r_:Wye.bind(null,e),ta:Kye.bind(null,e),na:qye.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Qk(e)):(await e.fa.stop(),e.Ta.length>0&&(dr(qg,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(t,r,n,a,s){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new Oh,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,n,a,s){const i=Date.now()+n,o=new rL(t,r,i,a,s);return o.start(n),o}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Xt(_t.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nL(e,t){if(Gh("AsyncQueue",`${t}: ${e}`),kb(e))return new Xt(_t.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{static emptySet(t){return new g1(t.comparator)}constructor(t){this.comparator=t?(r,n)=>t(r,n)||wr.comparator(r.key,n.key):(r,n)=>wr.comparator(r.key,n.key),this.keyedMap=Tw(),this.sortedSet=new ms(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,n)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof g1)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const n=new g1;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(){this.ga=new ms(wr.comparator)}track(t){const r=t.doc.key,n=this.ga.get(r);n?t.type!==0&&n.type===3?this.ga=this.ga.insert(r,t):t.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.ga=this.ga.remove(r):t.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):Gr(63341,{Rt:t,pa:n}):this.ga=this.ga.insert(r,t)}ya(){const t=[];return this.ga.inorderTraversal((r,n)=>{t.push(n)}),t}}class G1{constructor(t,r,n,a,s,i,o,c,u){this.query=t,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(t,r,n,a,s){const i=[];return r.forEach(o=>{i.push({type:0,doc:o})}),new G1(t,r,g1.emptySet(r),i,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Fk(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,n=t.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yye{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class Jye{constructor(){this.queries=BV(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const a=nn(r),s=a.queries;a.queries=BV(),s.forEach((i,o)=>{for(const c of o.Sa)c.onError(n)})})(this,new Xt(_t.ABORTED,"Firestore shutting down"))}}function BV(){return new xx(e=>Wte(e),Fk)}async function aL(e,t){const r=nn(e);let n=3;const a=t.query;let s=r.queries.get(a);s?!s.ba()&&t.Da()&&(n=2):(s=new Yye,n=t.Da()?0:1);try{switch(n){case 0:s.wa=await r.onListen(a,!0);break;case 1:s.wa=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(i){const o=nL(i,`Initialization of query '${$v(t.query)}' failed`);return void t.onError(o)}r.queries.set(a,s),s.Sa.push(t),t.va(r.onlineState),s.wa&&t.Fa(s.wa)&&iL(r)}async function sL(e,t){const r=nn(e),n=t.query;let a=3;const s=r.queries.get(n);if(s){const i=s.Sa.indexOf(t);i>=0&&(s.Sa.splice(i,1),s.Sa.length===0?a=t.Da()?0:1:!s.ba()&&t.Da()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function Zye(e,t){const r=nn(e);let n=!1;for(const a of t){const s=a.query,i=r.queries.get(s);if(i){for(const o of i.Sa)o.Fa(a)&&(n=!0);i.wa=a}}n&&iL(r)}function ewe(e,t,r){const n=nn(e),a=n.queries.get(t);if(a)for(const s of a.Sa)s.onError(r);n.queries.delete(t)}function iL(e){e.Ca.forEach(t=>{t.next()})}var TO,TV;(TV=TO||(TO={})).Ma="default",TV.Cache="cache";class oL{constructor(t,r,n){this.query=t,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(t){if(!this.options.includeMetadataChanges){const n=[];for(const a of t.docChanges)a.type!==3&&n.push(a);t=new G1(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),r=!0):this.La(t,this.onlineState)&&(this.ka(t),r=!0),this.Na=t,r}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),r=!0),r}La(t,r){if(!t.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(t){t=G1.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==TO.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tre{constructor(t){this.key=t}}class jre{constructor(t){this.key=t}}class twe{constructor(t,r){this.query=t,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=jn(),this.mutatedKeys=jn(),this.eu=Xte(t),this.tu=new g1(this.eu)}get nu(){return this.Ya}ru(t,r){const n=r?r.iu:new kV,a=r?r.tu:this.tu;let s=r?r.mutatedKeys:this.mutatedKeys,i=a,o=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((d,f)=>{const h=a.get(d),m=Ok(this.query,f)?f:null,g=!!h&&this.mutatedKeys.has(h.key),x=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let v=!1;h&&m?h.data.isEqual(m.data)?g!==x&&(n.track({type:3,doc:m}),v=!0):this.su(h,m)||(n.track({type:2,doc:m}),v=!0,(c&&this.eu(m,c)>0||u&&this.eu(m,u)<0)&&(o=!0)):!h&&m?(n.track({type:0,doc:m}),v=!0):h&&!m&&(n.track({type:1,doc:h}),v=!0,(c||u)&&(o=!0)),v&&(m?(i=i.add(m),s=x?s.add(d):s.delete(d)):(i=i.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{tu:i,iu:n,Cs:o,mutatedKeys:s}}su(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,n,a){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const i=t.iu.ya();i.sort((d,f)=>function(m,g){const x=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Gr(20277,{Rt:v})}};return x(m)-x(g)}(d.type,f.type)||this.eu(d.doc,f.doc)),this.ou(n),a=a??!1;const o=r&&!a?this._u():[],c=this.Xa.size===0&&this.current&&!a?1:0,u=c!==this.Za;return this.Za=c,i.length!==0||u?{snapshot:new G1(this.query,t.tu,s,i,t.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new kV,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=jn(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return t.forEach(n=>{this.Xa.has(n)||r.push(new jre(n))}),this.Xa.forEach(n=>{t.has(n)||r.push(new Tre(n))}),r}cu(t){this.Ya=t.Qs,this.Xa=jn();const r=this.ru(t.documents);return this.applyChanges(r,!0)}lu(){return G1.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const lL="SyncEngine";class rwe{constructor(t,r,n){this.query=t,this.targetId=r,this.view=n}}class nwe{constructor(t){this.key=t,this.hu=!1}}class awe{constructor(t,r,n,a,s,i){this.localStore=t,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new xx(o=>Wte(o),Fk),this.Iu=new Map,this.Eu=new Set,this.du=new ms(wr.comparator),this.Au=new Map,this.Ru=new qR,this.Vu={},this.mu=new Map,this.fu=$1.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function swe(e,t,r=!0){const n=Rre(e);let a;const s=n.Tu.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.lu()):a=await Ire(n,t,r,!0),a}async function iwe(e,t){const r=Rre(e);await Ire(r,t,!0,!1)}async function Ire(e,t,r,n){const a=await Sye(e.localStore,wA(t)),s=a.targetId,i=e.sharedClientState.addLocalQueryTarget(s,r);let o;return n&&(o=await owe(e,t,s,i==="current",a.resumeToken)),e.isPrimaryClient&&r&&Cre(e.remoteStore,a),o}async function owe(e,t,r,n,a){e.pu=(f,h,m)=>async function(x,v,y,w){let _=v.view.ru(y);_.Cs&&(_=await wV(x.localStore,v.query,!1).then(({documents:E})=>v.view.ru(E,_)));const T=w&&w.targetChanges.get(v.targetId),B=w&&w.targetMismatches.get(v.targetId)!=null,j=v.view.applyChanges(_,x.isPrimaryClient,T,B);return IV(x,v.targetId,j.au),j.snapshot}(e,f,h,m);const s=await wV(e.localStore,t,!0),i=new twe(t,s.Qs),o=i.ru(s.documents),c=UE.createSynthesizedTargetChangeForCurrentChange(r,n&&e.onlineState!=="Offline",a),u=i.applyChanges(o,e.isPrimaryClient,c);IV(e,r,u.au);const d=new rwe(t,r,i);return e.Tu.set(t,d),e.Iu.has(r)?e.Iu.get(r).push(t):e.Iu.set(r,[t]),u.snapshot}async function lwe(e,t,r){const n=nn(e),a=n.Tu.get(t),s=n.Iu.get(a.targetId);if(s.length>1)return n.Iu.set(a.targetId,s.filter(i=>!Fk(i,t))),void n.Tu.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await kO(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&JR(n.remoteStore,a.targetId),jO(n,a.targetId)}).catch(Nb)):(jO(n,a.targetId),await kO(n.localStore,a.targetId,!0))}async function cwe(e,t){const r=nn(e),n=r.Tu.get(t),a=r.Iu.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),JR(r.remoteStore,n.targetId))}async function uwe(e,t,r){const n=gwe(e);try{const a=await function(i,o){const c=nn(i),u=ir.now(),d=o.reduce((m,g)=>m.add(g.key),jn());let f,h;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let g=Kh(),x=jn();return c.Ns.getEntries(m,d).next(v=>{g=v,g.forEach((y,w)=>{w.isValidDocument()||(x=x.add(y))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,g)).next(v=>{f=v;const y=[];for(const w of o){const _=_be(w,f.get(w.key).overlayedDocument);_!=null&&y.push(new mp(w.key,_,Hte(_.value.mapValue),Dl.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,y,o)}).next(v=>{h=v;const y=v.applyToLocalDocumentSet(f,x);return c.documentOverlayCache.saveOverlays(m,v.batchId,y)})}).then(()=>({batchId:h.batchId,changes:Jte(f)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(a.batchId),function(i,o,c){let u=i.Vu[i.currentUser.toKey()];u||(u=new ms(Tn)),u=u.insert(o,c),i.Vu[i.currentUser.toKey()]=u}(n,a.batchId,r),await HE(n,a.changes),await Qk(n.remoteStore)}catch(a){const s=nL(a,"Failed to persist write");r.reject(s)}}async function Fre(e,t){const r=nn(e);try{const n=await Eye(r.localStore,t);t.targetChanges.forEach((a,s)=>{const i=r.Au.get(s);i&&(ca(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?i.hu=!0:a.modifiedDocuments.size>0?ca(i.hu,14607):a.removedDocuments.size>0&&(ca(i.hu,42227),i.hu=!1))}),await HE(r,n,t)}catch(n){await Nb(n)}}function jV(e,t,r){const n=nn(e);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Tu.forEach((s,i)=>{const o=i.view.va(t);o.snapshot&&a.push(o.snapshot)}),function(i,o){const c=nn(i);c.onlineState=o;let u=!1;c.queries.forEach((d,f)=>{for(const h of f.Sa)h.va(o)&&(u=!0)}),u&&iL(c)}(n.eventManager,t),a.length&&n.Pu.H_(a),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function dwe(e,t,r){const n=nn(e);n.sharedClientState.updateQueryState(t,"rejected",r);const a=n.Au.get(t),s=a&&a.key;if(s){let i=new ms(wr.comparator);i=i.insert(s,ol.newNoDocument(s,en.min()));const o=jn().add(s),c=new Lk(en.min(),new Map,new ms(Tn),i,o);await Fre(n,c),n.du=n.du.remove(s),n.Au.delete(t),cL(n)}else await kO(n.localStore,t,!1).then(()=>jO(n,t,r)).catch(Nb)}async function fwe(e,t){const r=nn(e),n=t.batch.batchId;try{const a=await wye(r.localStore,t);Dre(r,n,null),Ore(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await HE(r,a)}catch(a){await Nb(a)}}async function Awe(e,t,r){const n=nn(e);try{const a=await function(i,o){const c=nn(i);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,o).next(f=>(ca(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,o)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,t);Dre(n,t,r),Ore(n,t),n.sharedClientState.updateMutationState(t,"rejected",r),await HE(n,a)}catch(a){await Nb(a)}}function Ore(e,t){(e.mu.get(t)||[]).forEach(r=>{r.resolve()}),e.mu.delete(t)}function Dre(e,t,r){const n=nn(e);let a=n.Vu[n.currentUser.toKey()];if(a){const s=a.get(t);s&&(r?s.reject(r):s.resolve(),a=a.remove(t)),n.Vu[n.currentUser.toKey()]=a}}function jO(e,t,r=null){e.sharedClientState.removeLocalQueryTarget(t);for(const n of e.Iu.get(t))e.Tu.delete(n),r&&e.Pu.yu(n,r);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(n=>{e.Ru.containsKey(n)||Pre(e,n)})}function Pre(e,t){e.Eu.delete(t.path.canonicalString());const r=e.du.get(t);r!==null&&(JR(e.remoteStore,r),e.du=e.du.remove(t),e.Au.delete(r),cL(e))}function IV(e,t,r){for(const n of r)n instanceof Tre?(e.Ru.addReference(n.key,t),hwe(e,n)):n instanceof jre?(dr(lL,"Document no longer in limbo: "+n.key),e.Ru.removeReference(n.key,t),e.Ru.containsKey(n.key)||Pre(e,n.key)):Gr(19791,{wu:n})}function hwe(e,t){const r=t.key,n=r.path.canonicalString();e.du.get(r)||e.Eu.has(n)||(dr(lL,"New document in limbo: "+r),e.Eu.add(n),cL(e))}function cL(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const r=new wr(Ia.fromString(t)),n=e.fu.next();e.Au.set(n,new nwe(r)),e.du=e.du.insert(r,n),Cre(e.remoteStore,new wm(wA(Ik(r.path)),n,"TargetPurposeLimboResolution",kk.ce))}}async function HE(e,t,r){const n=nn(e),a=[],s=[],i=[];n.Tu.isEmpty()||(n.Tu.forEach((o,c)=>{i.push(n.pu(c,t,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))==null?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){a.push(u);const f=XR.As(c.targetId,u);s.push(f)}}))}),await Promise.all(i),n.Pu.H_(a),await async function(c,u){const d=nn(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Pt.forEach(u,h=>Pt.forEach(h.Es,m=>d.persistence.referenceDelegate.addReference(f,h.targetId,m)).next(()=>Pt.forEach(h.ds,m=>d.persistence.referenceDelegate.removeReference(f,h.targetId,m)))))}catch(f){if(!kb(f))throw f;dr(YR,"Failed to update sequence numbers: "+f)}for(const f of u){const h=f.targetId;if(!f.fromCache){const m=d.Ms.get(h),g=m.snapshotVersion,x=m.withLastLimboFreeSnapshotVersion(g);d.Ms=d.Ms.insert(h,x)}}}(n.localStore,s))}async function mwe(e,t){const r=nn(e);if(!r.currentUser.isEqual(t)){dr(lL,"User change. New user:",t.toKey());const n=await bre(r.localStore,t);r.currentUser=t,function(s,i){s.mu.forEach(o=>{o.forEach(c=>{c.reject(new Xt(_t.CANCELLED,i))})}),s.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await HE(r,n.Ls)}}function pwe(e,t){const r=nn(e),n=r.Au.get(t);if(n&&n.hu)return jn().add(n.key);{let a=jn();const s=r.Iu.get(t);if(!s)return a;for(const i of s){const o=r.Tu.get(i);a=a.unionWith(o.view.nu)}return a}}function Rre(e){const t=nn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Fre.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=pwe.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=dwe.bind(null,t),t.Pu.H_=Zye.bind(null,t.eventManager),t.Pu.yu=ewe.bind(null,t.eventManager),t}function gwe(e){const t=nn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=fwe.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Awe.bind(null,t),t}class yN{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Mk(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return yye(this.persistence,new xye,t.initialUser,this.serializer)}Cu(t){return new vre(WR.mi,this.serializer)}Du(t){return new kye}async terminate(){var t,r;(t=this.gcScheduler)==null||t.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yN.provider={build:()=>new yN};class xwe extends yN{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,r){ca(this.persistence.referenceDelegate instanceof vN,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new nye(n,t.asyncQueue,r)}Cu(t){const r=this.cacheSizeBytes!==void 0?ac.withCacheSize(this.cacheSizeBytes):ac.DEFAULT;return new vre(n=>vN.mi(n,r),this.serializer)}}class IO{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>jV(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=mwe.bind(null,this.syncEngine),await Xye(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Jye}()}createDatastore(t){const r=Mk(t.databaseInfo.databaseId),n=function(s){return new Fye(s)}(t.databaseInfo);return function(s,i,o,c){return new Rye(s,i,o,c)}(t.authCredentials,t.appCheckCredentials,n,r)}createRemoteStore(t){return function(n,a,s,i,o){return new Mye(n,a,s,i,o)}(this.localStore,this.datastore,t.asyncQueue,r=>jV(this.syncEngine,r,0),function(){return _V.v()?new _V:new Bye}())}createSyncEngine(t,r){return function(a,s,i,o,c,u,d){const f=new awe(a,s,i,o,c,u);return d&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(a){const s=nn(a);dr(qg,"RemoteStore shutting down."),s.Ea.add(5),await QE(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(r=this.eventManager)==null||r.terminate()}}IO.provider={build:()=>new IO};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Gh("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,r){setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="FirestoreClient";class vwe{constructor(t,r,n,a,s){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=nl.UNAUTHENTICATED,this.clientId=Sk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async i=>{dr(Jm,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(dr(Jm,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Oh;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const n=nL(r,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function v3(e,t){e.asyncQueue.verifyOperationInProgress(),dr(Jm,"Initializing OfflineComponentProvider");const r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async a=>{n.isEqual(a)||(await bre(t.localStore,a),n=a)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function FV(e,t){e.asyncQueue.verifyOperationInProgress();const r=await bwe(e);dr(Jm,"Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(n=>NV(t.remoteStore,n)),e.setAppCheckTokenChangeListener((n,a)=>NV(t.remoteStore,a)),e._onlineComponents=t}async function bwe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){dr(Jm,"Using user provided OfflineComponentProvider");try{await v3(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(a){return a.name==="FirebaseError"?a.code===_t.FAILED_PRECONDITION||a.code===_t.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;Kg("Error using user provided cache. Falling back to memory cache: "+r),await v3(e,new yN)}}else dr(Jm,"Using default OfflineComponentProvider"),await v3(e,new xwe(void 0));return e._offlineComponents}async function Lre(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(dr(Jm,"Using user provided OnlineComponentProvider"),await FV(e,e._uninitializedComponentsProvider._online)):(dr(Jm,"Using default OnlineComponentProvider"),await FV(e,new IO))),e._onlineComponents}function ywe(e){return Lre(e).then(t=>t.syncEngine)}async function wN(e){const t=await Lre(e),r=t.eventManager;return r.onListen=swe.bind(null,t.syncEngine),r.onUnlisten=lwe.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=iwe.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=cwe.bind(null,t.syncEngine),r}function wwe(e,t,r={}){const n=new Oh;return e.asyncQueue.enqueueAndForget(async()=>function(s,i,o,c,u){const d=new uL({next:h=>{d.Nu(),i.enqueueAndForget(()=>sL(s,f));const m=h.docs.has(o);!m&&h.fromCache?u.reject(new Xt(_t.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&h.fromCache&&c&&c.source==="server"?u.reject(new Xt(_t.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new oL(Ik(o.path),d,{includeMetadataChanges:!0,qa:!0});return aL(s,f)}(await wN(e),e.asyncQueue,t,r,n)),n.promise}function Ewe(e,t,r={}){const n=new Oh;return e.asyncQueue.enqueueAndForget(async()=>function(s,i,o,c,u){const d=new uL({next:h=>{d.Nu(),i.enqueueAndForget(()=>sL(s,f)),h.fromCache&&c.source==="server"?u.reject(new Xt(_t.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new oL(o,d,{includeMetadataChanges:!0,qa:!0});return aL(s,f)}(await wN(e),e.asyncQueue,t,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mre(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ure="firestore.googleapis.com",DV=!0;class PV{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Xt(_t.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ure,this.ssl=DV}else this.host=t.host,this.ssl=t.ssl??DV;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=xre;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<tye)throw new Xt(_t.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}jte("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Mre(t.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Xt(_t.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Xt(_t.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Xt(_t.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Hk{constructor(t,r,n,a){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new PV({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Xt(_t.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Xt(_t.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new PV(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new Bte;switch(n.type){case"firstParty":return new F1e(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Xt(_t.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=OV.get(r);n&&(dr("ComponentProvider","Removing Datastore"),OV.delete(r),n.terminate())}(this),Promise.resolve()}}function Qre(e,t,r,n={}){var u;e=hl(e,Hk);const a=l0(t),s=e._getSettings(),i={...s,emulatorOptions:e._getEmulatorOptions()},o=`${t}:${r}`;a&&(vk(`https://${o}`),bk("Firestore",!0)),s.host!==Ure&&s.host!==o&&Kg("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:o,ssl:a,emulatorOptions:n};if(!$m(c,i)&&(e._setSettings(c),n.mockUserToken)){let d,f;if(typeof n.mockUserToken=="string")d=n.mockUserToken,f=nl.MOCK_USER;else{d=Dee(n.mockUserToken,(u=e._app)==null?void 0:u.options.projectId);const h=n.mockUserToken.sub||n.mockUserToken.user_id;if(!h)throw new Xt(_t.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new nl(h)}e._authCredentials=new T1e(new kte(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(t,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Af(this.firestore,t,this._query)}}class fs{constructor(t,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Dh(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new fs(this.firestore,t,this._key)}toJSON(){return{type:fs._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,r,n){if(LE(r,fs._jsonSchema))return new fs(t,n||null,new wr(Ia.fromString(r.referencePath)))}}fs._jsonSchemaVersion="firestore/documentReference/1.0",fs._jsonSchema={type:_i("string",fs._jsonSchemaVersion),referencePath:_i("string")};class Dh extends Af{constructor(t,r,n){super(t,r,Ik(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new fs(this.firestore,null,new wr(t))}withConverter(t){return new Dh(this.firestore,t,this._path)}}function wt(e,t,...r){if(e=Jn(e),Tte("collection","path",t),e instanceof Hk){const n=Ia.fromString(t,...r);return XH(n),new Dh(e,null,n)}{if(!(e instanceof fs||e instanceof Dh))throw new Xt(_t.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ia.fromString(t,...r));return XH(n),new Dh(e.firestore,null,n)}}function cr(e,t,...r){if(e=Jn(e),arguments.length===1&&(t=Sk.newId()),Tte("doc","path",t),e instanceof Hk){const n=Ia.fromString(t,...r);return WH(n),new fs(e,null,new wr(n))}{if(!(e instanceof fs||e instanceof Dh))throw new Xt(_t.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ia.fromString(t,...r));return WH(n),new fs(e.firestore,e instanceof Dh?e.converter:null,new wr(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV="AsyncQueue";class LV{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new wre(this,"async_queue_retry"),this._c=()=>{const n=x3();n&&dr(RV,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=t;const r=x3();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const r=x3();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const r=new Oh;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!kb(t))throw t;dr(RV,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const r=this.ac.then(()=>(this.rc=!0,t().catch(n=>{throw this.nc=n,this.rc=!1,Gh("INTERNAL UNHANDLED ERROR: ",MV(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(t,r,n){this.uc(),this.oc.indexOf(t)>-1&&(r=0);const a=rL.createAndSchedule(this,t,r,n,s=>this.hc(s));return this.tc.push(a),a}uc(){this.nc&&Gr(47125,{Pc:MV(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const r of this.tc)if(r.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const r=this.tc.indexOf(t);this.tc.splice(r,1)}}function MV(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UV(e){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(e,["next","error","complete"])}class uf extends Hk{constructor(t,r,n,a){super(t,r,n,a),this.type="firestore",this._queue=new LV,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new LV(t),this._firestoreClient=void 0,await t}}}function dL(e,t){const r=typeof e=="object"?e:yk(),n=typeof e=="string"?e:AN,a=OE(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=SR("firestore");s&&Qre(a,...s)}return a}function Tb(e){if(e._terminated)throw new Xt(_t.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Cwe(e),e._firestoreClient}function Cwe(e){var n,a,s;const t=e._freezeSettings(),r=function(o,c,u,d){return new X1e(o,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Mre(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((n=e._app)==null?void 0:n.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(a=t.localCache)!=null&&a._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new vwe(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&function(o){const c=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(c),_online:c}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new qc(co.fromBase64String(t))}catch(r){throw new Xt(_t.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new qc(co.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:qc._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(LE(t,qc._jsonSchema))return qc.fromBase64String(t.bytes)}}qc._jsonSchemaVersion="firestore/bytes/1.0",qc._jsonSchema={type:_i("string",qc._jsonSchemaVersion),bytes:_i("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new Xt(_t.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ao(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Xt(_t.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Xt(_t.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Tn(this._lat,t._lat)||Tn(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Zd._jsonSchemaVersion}}static fromJSON(t){if(LE(t,Zd._jsonSchema))return new Zd(t.latitude,t.longitude)}}Zd._jsonSchemaVersion="firestore/geoPoint/1.0",Zd._jsonSchema={type:_i("string",Zd._jsonSchemaVersion),latitude:_i("number"),longitude:_i("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:ef._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(LE(t,ef._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(r=>typeof r=="number"))return new ef(t.vectorValues);throw new Xt(_t.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ef._jsonSchemaVersion="firestore/vectorValue/1.0",ef._jsonSchema={type:_i("string",ef._jsonSchemaVersion),vectorValues:_i("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _we=/^__.*__$/;class Swe{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return this.fieldMask!==null?new mp(t,this.data,this.fieldMask,r,this.fieldTransforms):new ME(t,this.data,r,this.fieldTransforms)}}class Hre{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return new mp(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function Vre(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Gr(40011,{Ac:e})}}class Vk{constructor(t,r,n,a,s,i){this.settings=t,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Vk({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.gc(t),n}yc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return EN(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(Vre(this.Ac)&&_we.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class Nwe{constructor(t,r,n){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=n||Mk(t)}Cc(t,r,n,a=!1){return new Vk({Ac:t,methodName:r,Dc:n,path:ao.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fb(e){const t=e._freezeSettings(),r=Mk(e._databaseId);return new Nwe(e._databaseId,!!t.ignoreUndefinedProperties,r)}function fL(e,t,r,n,a,s={}){const i=e.Cc(s.merge||s.mergeFields?2:0,t,r,a);mL("Data must be an object, but it was:",i,n);const o=Kre(n,i);let c,u;if(s.merge)c=new Zc(i.fieldMask),u=i.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const h=FO(t,f,r);if(!i.contains(h))throw new Xt(_t.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);Wre(d,h)||d.push(h)}c=new Zc(d),u=i.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=i.fieldTransforms;return new Swe(new cc(o),c,u)}class zk extends Ib{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof zk}}function kwe(e,t,r){return new Vk({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:r},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class AL extends Ib{_toFieldTransform(t){return new sre(t.path,new P2)}isEqual(t){return t instanceof AL}}class hL extends Ib{constructor(t,r){super(t),this.vc=r}_toFieldTransform(t){const r=kwe(this,t,!0),n=this.vc.map(s=>Ob(s,r)),a=new z1(n);return new sre(t.path,a)}isEqual(t){return t instanceof hL&&$m(this.vc,t.vc)}}function zre(e,t,r,n){const a=e.Cc(1,t,r);mL("Data must be an object, but it was:",a,n);const s=[],i=cc.empty();hp(n,(c,u)=>{const d=pL(t,c,r);u=Jn(u);const f=a.yc(d);if(u instanceof zk)s.push(d);else{const h=Ob(u,f);h!=null&&(s.push(d),i.set(d,h))}});const o=new Zc(s);return new Hre(i,o,a.fieldTransforms)}function $re(e,t,r,n,a,s){const i=e.Cc(1,t,r),o=[FO(t,n,r)],c=[a];if(s.length%2!=0)throw new Xt(_t.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)o.push(FO(t,s[h])),c.push(s[h+1]);const u=[],d=cc.empty();for(let h=o.length-1;h>=0;--h)if(!Wre(u,o[h])){const m=o[h];let g=c[h];g=Jn(g);const x=i.yc(m);if(g instanceof zk)u.push(m);else{const v=Ob(g,x);v!=null&&(u.push(m),d.set(m,v))}}const f=new Zc(u);return new Hre(d,f,i.fieldTransforms)}function Gre(e,t,r,n=!1){return Ob(r,e.Cc(n?4:3,t))}function Ob(e,t){if(qre(e=Jn(e)))return mL("Unsupported field value:",t,e),Kre(e,t);if(e instanceof Ib)return function(n,a){if(!Vre(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(n,a){const s=[];let i=0;for(const o of n){let c=Ob(o,a.wc(i));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),i++}return{arrayValue:{values:s}}}(e,t)}return function(n,a){if((n=Jn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return vbe(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=ir.fromDate(n);return{timestampValue:xN(a.serializer,s)}}if(n instanceof ir){const s=new ir(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:xN(a.serializer,s)}}if(n instanceof Zd)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof qc)return{bytesValue:dre(a.serializer,n._byteString)};if(n instanceof fs){const s=a.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw a.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:KR(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof ef)return function(i,o){return{mapValue:{fields:{[Ute]:{stringValue:Qte},[hN]:{arrayValue:{values:i.toArray().map(u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return zR(o.serializer,u)})}}}}}}(n,a);throw a.Sc(`Unsupported field value: ${Nk(n)}`)}(e,t)}function Kre(e,t){const r={};return Ote(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):hp(e,(n,a)=>{const s=Ob(a,t.mc(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function qre(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof ir||e instanceof Zd||e instanceof qc||e instanceof fs||e instanceof Ib||e instanceof ef)}function mL(e,t,r){if(!qre(r)||!Ite(r)){const n=Nk(r);throw n==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+n)}}function FO(e,t,r){if((t=Jn(t))instanceof jb)return t._internalPath;if(typeof t=="string")return pL(e,t);throw EN("Field path arguments must be of type string or ",e,!1,void 0,r)}const Bwe=new RegExp("[~\\*/\\[\\]]");function pL(e,t,r){if(t.search(Bwe)>=0)throw EN(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new jb(...t.split("."))._internalPath}catch{throw EN(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function EN(e,t,r,n,a){const s=n&&!n.isEmpty(),i=a!==void 0;let o=`Function ${t}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(s||i)&&(c+=" (found",s&&(c+=` in field ${n}`),i&&(c+=` in document ${a}`),c+=")"),new Xt(_t.INVALID_ARGUMENT,o+e+c)}function Wre(e,t){return e.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(t,r,n,a,s){this._firestore=t,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new fs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Twe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field($k("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Twe extends gL{data(){return super.data()}}function $k(e,t){return typeof t=="string"?pL(e,t):t instanceof jb?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xre(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Xt(_t.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xL{}class VE extends xL{}function $t(e,t,...r){let n=[];t instanceof xL&&n.push(t),n=n.concat(r),function(s){const i=s.filter(c=>c instanceof Gk).length,o=s.filter(c=>c instanceof zE).length;if(i>1||i>0&&o>0)throw new Xt(_t.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class zE extends VE{constructor(t,r,n){super(),this._field=t,this._op=r,this._value=n,this.type="where"}static _create(t,r,n){return new zE(t,r,n)}_apply(t){const r=this._parse(t);return Jre(t._query,r),new Af(t.firestore,t.converter,EO(t._query,r))}_parse(t){const r=Fb(t.firestore);return function(s,i,o,c,u,d,f){let h;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Xt(_t.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){HV(f,d);const g=[];for(const x of f)g.push(QV(c,s,x));h={arrayValue:{values:g}}}else h=QV(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||HV(f,d),h=Gre(o,i,f,d==="in"||d==="not-in");return Ci.create(u,d,h)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function Qr(e,t,r){const n=t,a=$k("where",e);return zE._create(a,n,r)}class Gk extends xL{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new Gk(t,r)}_parse(t){const r=this._queryConstraints.map(n=>n._parse(t)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:cf.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(a,s){let i=a;const o=s.getFlattenedFilters();for(const c of o)Jre(i,c),i=EO(i,c)}(t._query,r),new Af(t.firestore,t.converter,EO(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Kk extends VE{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new Kk(t,r)}_apply(t){const r=function(a,s,i){if(a.startAt!==null)throw new Xt(_t.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Xt(_t.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new D2(s,i)}(t._query,this._field,this._direction);return new Af(t.firestore,t.converter,function(a,s){const i=a.explicitOrderBy.concat([s]);return new gx(a.path,a.collectionGroup,i,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(t._query,r))}}function xr(e,t="asc"){const r=t,n=$k("orderBy",e);return Kk._create(n,r)}class qk extends VE{constructor(t,r,n){super(),this.type=t,this._limit=r,this._limitType=n}static _create(t,r,n){return new qk(t,r,n)}_apply(t){return new Af(t.firestore,t.converter,pN(t._query,this._limit,this._limitType))}}function tf(e){return M1e("limit",e),qk._create("limit",e,"F")}class Wk extends VE{constructor(t,r,n){super(),this.type=t,this._docOrFields=r,this._inclusive=n}static _create(t,r,n){return new Wk(t,r,n)}_apply(t){const r=jwe(t,this.type,this._docOrFields,this._inclusive);return new Af(t.firestore,t.converter,function(a,s){return new gx(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,s,a.endAt)}(t._query,r))}}function Yre(...e){return Wk._create("startAfter",e,!1)}function jwe(e,t,r,n){if(r[0]=Jn(r[0]),r[0]instanceof gL)return function(s,i,o,c,u){if(!c)throw new Xt(_t.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const d=[];for(const f of p1(s))if(f.field.isKeyField())d.push(mN(i,c.key));else{const h=c.data.field(f.field);if(Tk(h))throw new Xt(_t.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const m=f.field.canonicalString();throw new Xt(_t.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(h)}return new V1(d,u)}(e._query,e.firestore._databaseId,t,r[0]._document,n);{const a=Fb(e.firestore);return function(i,o,c,u,d,f){const h=i.explicitOrderBy;if(d.length>h.length)throw new Xt(_t.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let g=0;g<d.length;g++){const x=d[g];if(h[g].field.isKeyField()){if(typeof x!="string")throw new Xt(_t.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof x}`);if(!VR(i)&&x.indexOf("/")!==-1)throw new Xt(_t.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${x}' contains a slash.`);const v=i.path.child(Ia.fromString(x));if(!wr.isDocumentKey(v))throw new Xt(_t.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${v}' is not because it contains an odd number of segments.`);const y=new wr(v);m.push(mN(o,y))}else{const v=Gre(c,u,x);m.push(v)}}return new V1(m,f)}(e._query,e.firestore._databaseId,a,t,r,n)}}function QV(e,t,r){if(typeof(r=Jn(r))=="string"){if(r==="")throw new Xt(_t.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VR(t)&&r.indexOf("/")!==-1)throw new Xt(_t.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=t.path.child(Ia.fromString(r));if(!wr.isDocumentKey(n))throw new Xt(_t.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return mN(e,new wr(n))}if(r instanceof fs)return mN(e,r._key);throw new Xt(_t.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nk(r)}.`)}function HV(e,t){if(!Array.isArray(e)||e.length===0)throw new Xt(_t.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Jre(e,t){const r=function(a,s){for(const i of a)for(const o of i.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(e.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new Xt(_t.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Xt(_t.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class Zre{convertValue(t,r="none"){switch(Xm(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ys(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(Wm(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw Gr(62114,{value:t})}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const n={};return hp(t,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(t){var n,a,s;const r=(s=(a=(n=t.fields)==null?void 0:n[hN].arrayValue)==null?void 0:a.values)==null?void 0:s.map(i=>Ys(i.doubleValue));return new ef(r)}convertGeoPoint(t){return new Zd(Ys(t.latitude),Ys(t.longitude))}convertArray(t,r){return(t.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(t,r){switch(r){case"previous":const n=jk(t);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(F2(t));default:return null}}convertTimestamp(t){const r=qm(t);return new ir(r.seconds,r.nanos)}convertDocumentKey(t,r){const n=Ia.fromString(t);ca(gre(n),9688,{name:t});const a=new U1(n.get(1),n.get(3)),s=new wr(n.popFirst(5));return a.isEqual(r)||Gh(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vL(e,t,r){let n;return n=e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t,n}class e1{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Dm extends gL{constructor(t,r,n,a,s,i){super(t,r,n,a,i),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new r2(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const n=this._document.data.field($k("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Xt(_t.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,r={};return r.type=Dm._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}Dm._jsonSchemaVersion="firestore/documentSnapshot/1.0",Dm._jsonSchema={type:_i("string",Dm._jsonSchemaVersion),bundleSource:_i("string","DocumentSnapshot"),bundleName:_i("string"),bundle:_i("string")};class r2 extends Dm{data(t={}){return super.data(t)}}class Pm{constructor(t,r,n,a){this._firestore=t,this._userDataWriter=r,this._snapshot=a,this.metadata=new e1(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(n=>{t.call(r,new r2(this._firestore,this._userDataWriter,n.key,n,new e1(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Xt(_t.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let i=0;return a._snapshot.docChanges.map(o=>{const c=new r2(a._firestore,a._userDataWriter,o.doc.key,o.doc,new e1(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:i++}})}{let i=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const c=new r2(a._firestore,a._userDataWriter,o.doc.key,o.doc,new e1(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return o.type!==0&&(u=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),d=i.indexOf(o.doc.key)),{type:Iwe(o.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Xt(_t.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Pm._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Sk.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],a=[];return this.docs.forEach(s=>{s._document!==null&&(r.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),a.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Iwe(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Gr(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(e){e=hl(e,fs);const t=hl(e.firestore,uf);return wwe(Tb(t),e._key).then(r=>ene(t,e,r))}Pm._jsonSchemaVersion="firestore/querySnapshot/1.0",Pm._jsonSchema={type:_i("string",Pm._jsonSchemaVersion),bundleSource:_i("string","QuerySnapshot"),bundleName:_i("string"),bundle:_i("string")};class bL extends Zre{constructor(t){super(),this.firestore=t}convertBytes(t){return new qc(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new fs(this.firestore,null,r)}}function Hn(e){e=hl(e,Af);const t=hl(e.firestore,uf),r=Tb(t),n=new bL(t);return Xre(e._query),Ewe(r,e._query).then(a=>new Pm(t,n,e,a))}function Mi(e,t,r){e=hl(e,fs);const n=hl(e.firestore,uf),a=vL(e.converter,t,r);return Db(n,[fL(Fb(n),"setDoc",e._key,a,e.converter!==null,r).toMutation(e._key,Dl.none())])}function du(e,t,r,...n){e=hl(e,fs);const a=hl(e.firestore,uf),s=Fb(a);let i;return i=typeof(t=Jn(t))=="string"||t instanceof jb?$re(s,"updateDoc",e._key,t,r,n):zre(s,"updateDoc",e._key,t),Db(a,[i.toMutation(e._key,Dl.exists(!0))])}function is(e){return Db(hl(e.firestore,uf),[new Rk(e._key,Dl.none())])}function _n(e,t){const r=hl(e.firestore,uf),n=cr(e),a=vL(e.converter,t);return Db(r,[fL(Fb(e.firestore),"addDoc",n._key,a,e.converter!==null,{}).toMutation(n._key,Dl.exists(!1))]).then(()=>n)}function pr(e,...t){var c,u,d;e=Jn(e);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof t[n]!="object"||UV(t[n])||(r=t[n++]);const a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(UV(t[n])){const f=t[n];t[n]=(c=f.next)==null?void 0:c.bind(f),t[n+1]=(u=f.error)==null?void 0:u.bind(f),t[n+2]=(d=f.complete)==null?void 0:d.bind(f)}let s,i,o;if(e instanceof fs)i=hl(e.firestore,uf),o=Ik(e._key.path),s={next:f=>{t[n]&&t[n](ene(i,e,f))},error:t[n+1],complete:t[n+2]};else{const f=hl(e,Af);i=hl(f.firestore,uf),o=f._query;const h=new bL(i);s={next:m=>{t[n]&&t[n](new Pm(i,h,f,m))},error:t[n+1],complete:t[n+2]},Xre(e._query)}return function(h,m,g,x){const v=new uL(x),y=new oL(m,v,g);return h.asyncQueue.enqueueAndForget(async()=>aL(await wN(h),y)),()=>{v.Nu(),h.asyncQueue.enqueueAndForget(async()=>sL(await wN(h),y))}}(Tb(i),o,a,s)}function Db(e,t){return function(n,a){const s=new Oh;return n.asyncQueue.enqueueAndForget(async()=>uwe(await ywe(n),a,s)),s.promise}(Tb(e),t)}function ene(e,t,r){const n=r.docs.get(t._key),a=new bL(e);return new Dm(e,a,t._key,n,new e1(r.hasPendingWrites,r.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tne{constructor(t,r){this._firestore=t,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Fb(t)}set(t,r,n){this._verifyNotCommitted();const a=b3(t,this._firestore),s=vL(a.converter,r,n),i=fL(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(i.toMutation(a._key,Dl.none())),this}update(t,r,n,...a){this._verifyNotCommitted();const s=b3(t,this._firestore);let i;return i=typeof(r=Jn(r))=="string"||r instanceof jb?$re(this._dataReader,"WriteBatch.update",s._key,r,n,a):zre(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(i.toMutation(s._key,Dl.exists(!0))),this}delete(t){this._verifyNotCommitted();const r=b3(t,this._firestore);return this._mutations=this._mutations.concat(new Rk(r._key,Dl.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Xt(_t.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function b3(e,t){if((e=Jn(e)).firestore!==t)throw new Xt(_t.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function Ri(){return new AL("serverTimestamp")}function rne(...e){return new hL("arrayUnion",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(e){return Tb(e=hl(e,uf)),new tne(e,t=>Db(e,t))}(function(t,r=!0){(function(a){Sb=a})(mx),Gm(new Vh("firestore",(n,{instanceIdentifier:a,options:s})=>{const i=n.getProvider("app").getImmediate(),o=new uf(new j1e(n.getProvider("auth-internal")),new O1e(i,n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Xt(_t.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new U1(u.options.projectId,d)}(i,a),i);return s={useFetchStreams:r,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),sd($H,GH,t),sd($H,GH,"esm2020")})();const Fwe=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Zre,Bytes:qc,CollectionReference:Dh,DocumentReference:fs,DocumentSnapshot:Dm,FieldPath:jb,FieldValue:Ib,Firestore:uf,FirestoreError:Xt,GeoPoint:Zd,Query:Af,QueryCompositeFilterConstraint:Gk,QueryConstraint:VE,QueryDocumentSnapshot:r2,QueryFieldFilterConstraint:zE,QueryLimitConstraint:qk,QueryOrderByConstraint:Kk,QuerySnapshot:Pm,QueryStartAtConstraint:Wk,SnapshotMetadata:e1,Timestamp:ir,VectorValue:ef,WriteBatch:tne,_AutoId:Sk,_ByteString:co,_DatabaseId:U1,_DocumentKey:wr,_EmptyAuthCredentialsProvider:Bte,_FieldPath:ao,_cast:hl,_logWarn:Kg,_validateIsNotUsedTogether:jte,addDoc:_n,arrayUnion:rne,collection:wt,connectFirestoreEmulator:Qre,deleteDoc:is,doc:cr,ensureFirestoreConfigured:Tb,executeWrite:Db,getDoc:bx,getDocs:Hn,getFirestore:dL,limit:tf,onSnapshot:pr,orderBy:xr,query:$t,serverTimestamp:Ri,setDoc:Mi,startAfter:Yre,updateDoc:du,where:Qr,writeBatch:yx},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nne="firebasestorage.googleapis.com",ane="storageBucket",Owe=120*1e3,Dwe=600*1e3,Pwe=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends ff{constructor(t,r,n=0){super(y3(t),`Firebase Storage: ${r} (${y3(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,vs.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return y3(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Wa;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Wa||(Wa={}));function y3(e){return"storage/"+e}function yL(){const e="An unknown error occurred, please check the error payload for server response.";return new vs(Wa.UNKNOWN,e)}function Rwe(e){return new vs(Wa.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function Lwe(e){return new vs(Wa.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Mwe(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new vs(Wa.UNAUTHENTICATED,e)}function Uwe(){return new vs(Wa.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Qwe(e){return new vs(Wa.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function sne(){return new vs(Wa.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ine(){return new vs(Wa.CANCELED,"User canceled the upload/download.")}function Hwe(e){return new vs(Wa.INVALID_URL,"Invalid URL '"+e+"'.")}function Vwe(e){return new vs(Wa.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function zwe(){return new vs(Wa.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ane+"' property when initializing the app?")}function one(){return new vs(Wa.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function $we(){return new vs(Wa.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function Gwe(){return new vs(Wa.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Kwe(e){return new vs(Wa.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function OO(e){return new vs(Wa.INVALID_ARGUMENT,e)}function lne(){return new vs(Wa.APP_DELETED,"The Firebase app was deleted.")}function qwe(e){return new vs(Wa.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function n2(e,t){return new vs(Wa.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function qy(e){throw new vs(Wa.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let n;try{n=jl.makeFromUrl(t,r)}catch{return new jl(t,"")}if(n.path==="")return n;throw Vwe(t)}static makeFromUrl(t,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function s(T){T.path.charAt(T.path.length-1)==="/"&&(T.path_=T.path_.slice(0,-1))}const i="(/(.*))?$",o=new RegExp("^gs://"+a+i,"i"),c={bucket:1,path:3};function u(T){T.path_=decodeURIComponent(T.path)}const d="v[A-Za-z0-9_]+",f=r.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${d}/b/${a}/o${h}`,"i"),g={bucket:1,path:3},x=r===nne?"(?:storage.googleapis.com|storage.cloud.google.com)":r,v="([^?#]*)",y=new RegExp(`^https?://${x}/${a}/${v}`,"i"),_=[{regex:o,indices:c,postModify:s},{regex:m,indices:g,postModify:u},{regex:y,indices:{bucket:1,path:2},postModify:u}];for(let T=0;T<_.length;T++){const B=_[T],j=B.regex.exec(t);if(j){const E=j[B.indices.bucket];let N=j[B.indices.path];N||(N=""),n=new jl(E,N),B.postModify(n);break}}if(n==null)throw Hwe(t);return n}}class Wwe{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xwe(e,t,r){let n=1,a=null,s=null,i=!1,o=0;function c(){return o===2}let u=!1;function d(...v){u||(u=!0,t.apply(null,v))}function f(v){a=setTimeout(()=>{a=null,e(m,c())},v)}function h(){s&&clearTimeout(s)}function m(v,...y){if(u){h();return}if(v){h(),d.call(null,v,...y);return}if(c()||i){h(),d.call(null,v,...y);return}n<64&&(n*=2);let _;o===1?(o=2,_=0):_=(n+Math.random())*1e3,f(_)}let g=!1;function x(v){g||(g=!0,h(),!u&&(a!==null?(v||(o=2),clearTimeout(a),f(0)):v||(o=1)))}return f(0),s=setTimeout(()=>{i=!0,x(!0)},r),x}function Ywe(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jwe(e){return e!==void 0}function Zwe(e){return typeof e=="function"}function e2e(e){return typeof e=="object"&&!Array.isArray(e)}function Xk(e){return typeof e=="string"||e instanceof String}function VV(e){return wL()&&e instanceof Blob}function wL(){return typeof Blob<"u"}function DO(e,t,r,n){if(n<t)throw OO(`Invalid value for '${e}'. Expected ${t} or greater.`);if(n>r)throw OO(`Invalid value for '${e}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(e,t,r){let n=t;return r==null&&(n=`https://${t}`),`${r}://${n}/v0${e}`}function cne(e){const t=encodeURIComponent;let r="?";for(const n in e)if(e.hasOwnProperty(n)){const a=t(n)+"="+t(e[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var Ng;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Ng||(Ng={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function une(e,t){const r=e>=500&&e<600,a=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return r||a||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2e{constructor(t,r,n,a,s,i,o,c,u,d,f,h=!0,m=!1){this.url_=t,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=s,this.additionalRetryCodes_=i,this.callback_=o,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=h,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,x)=>{this.resolve_=g,this.reject_=x,this.start_()})}start_(){const t=(n,a)=>{if(a){n(!1,new L_(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const i=o=>{const c=o.loaded,u=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&s.addUploadProgressListener(i),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(i),this.pendingConnection_=null;const o=s.getErrorCode()===Ng.NO_ERROR,c=s.getStatus();if(!o||une(c,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===Ng.ABORT;n(!1,new L_(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;n(!0,new L_(u,s))})},r=(n,a)=>{const s=this.resolve_,i=this.reject_,o=a.connection;if(a.wasSuccessCode)try{const c=this.callback_(o,o.getResponse());Jwe(c)?s(c):s()}catch(c){i(c)}else if(o!==null){const c=yL();c.serverResponse=o.getErrorText(),this.errorCallback_?i(this.errorCallback_(o,c)):i(c)}else if(a.canceled){const c=this.appDelete_?lne():ine();i(c)}else{const c=sne();i(c)}};this.canceled_?r(!1,new L_(!1,null,!0)):this.backoffId_=Xwe(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&Ywe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class L_{constructor(t,r,n){this.wasSuccessCode=t,this.connection=r,this.canceled=!!n}}function r2e(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function n2e(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function a2e(e,t){t&&(e["X-Firebase-GMPID"]=t)}function s2e(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function i2e(e,t,r,n,a,s,i=!0,o=!1){const c=cne(e.urlParams),u=e.url+c,d=Object.assign({},e.headers);return a2e(d,t),r2e(d,r),n2e(d,s),s2e(d,n),new t2e(u,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,a,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2e(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function l2e(...e){const t=o2e();if(t!==void 0){const r=new t;for(let n=0;n<e.length;n++)r.append(e[n]);return r.getBlob()}else{if(wL())return new Blob(e);throw new vs(Wa.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function c2e(e,t,r){return e.webkitSlice?e.webkitSlice(t,r):e.mozSlice?e.mozSlice(t,r):e.slice?e.slice(t,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2e(e){if(typeof atob>"u")throw Kwe("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class w3{constructor(t,r){this.data=t,this.contentType=r||null}}function d2e(e,t){switch(e){case hA.RAW:return new w3(dne(t));case hA.BASE64:case hA.BASE64URL:return new w3(fne(e,t));case hA.DATA_URL:return new w3(A2e(t),h2e(t))}throw yL()}function dne(e){const t=[];for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n<=127)t.push(n);else if(n<=2047)t.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<e.length-1&&(e.charCodeAt(r+1)&64512)===56320))t.push(239,191,189);else{const s=n,i=e.charCodeAt(++r);n=65536|(s&1023)<<10|i&1023,t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?t.push(239,191,189):t.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(t)}function f2e(e){let t;try{t=decodeURIComponent(e)}catch{throw n2(hA.DATA_URL,"Malformed data URL.")}return dne(t)}function fne(e,t){switch(e){case hA.BASE64:{const a=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(a||s)throw n2(e,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case hA.BASE64URL:{const a=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(a||s)throw n2(e,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=u2e(t)}catch(a){throw a.message.includes("polyfill")?a:n2(e,"Invalid character found")}const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}class Ane{constructor(t){this.base64=!1,this.contentType=null;const r=t.match(/^data:([^,]+)?,/);if(r===null)throw n2(hA.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=m2e(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=t.substring(t.indexOf(",")+1)}}function A2e(e){const t=new Ane(e);return t.base64?fne(hA.BASE64,t.rest):f2e(t.rest)}function h2e(e){return new Ane(e).contentType}function m2e(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(t,r){let n=0,a="";VV(t)?(this.data_=t,n=t.size,a=t.type):t instanceof ArrayBuffer?(r?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(r?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(t,r){if(VV(this.data_)){const n=this.data_,a=c2e(n,t,r);return a===null?null:new yh(a)}else{const n=new Uint8Array(this.data_.buffer,t,r-t);return new yh(n,!0)}}static getBlob(...t){if(wL()){const r=t.map(n=>n instanceof yh?n.data_:n);return new yh(l2e.apply(null,r))}else{const r=t.map(i=>Xk(i)?d2e(hA.RAW,i).data:i.data_);let n=0;r.forEach(i=>{n+=i.byteLength});const a=new Uint8Array(n);let s=0;return r.forEach(i=>{for(let o=0;o<i.length;o++)a[s++]=i[o]}),new yh(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EL(e){let t;try{t=JSON.parse(e)}catch{return null}return e2e(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2e(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function g2e(e,t){const r=t.split("/").filter(n=>n.length>0).join("/");return e.length===0?r:e+"/"+r}function hne(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2e(e,t){return t}class _l{constructor(t,r,n,a){this.server=t,this.local=r||t,this.writable=!!n,this.xform=a||x2e}}let M_=null;function v2e(e){return!Xk(e)||e.length<2?e:hne(e)}function CL(){if(M_)return M_;const e=[];e.push(new _l("bucket")),e.push(new _l("generation")),e.push(new _l("metageneration")),e.push(new _l("name","fullPath",!0));function t(s,i){return v2e(i)}const r=new _l("name");r.xform=t,e.push(r);function n(s,i){return i!==void 0?Number(i):i}const a=new _l("size");return a.xform=n,e.push(a),e.push(new _l("timeCreated")),e.push(new _l("updated")),e.push(new _l("md5Hash",null,!0)),e.push(new _l("cacheControl",null,!0)),e.push(new _l("contentDisposition",null,!0)),e.push(new _l("contentEncoding",null,!0)),e.push(new _l("contentLanguage",null,!0)),e.push(new _l("contentType",null,!0)),e.push(new _l("metadata","customMetadata",!0)),M_=e,M_}function b2e(e,t){function r(){const n=e.bucket,a=e.fullPath,s=new jl(n,a);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:r})}function y2e(e,t,r){const n={};n.type="file";const a=r.length;for(let s=0;s<a;s++){const i=r[s];n[i.local]=i.xform(n,t[i.server])}return b2e(n,e),n}function mne(e,t,r){const n=EL(t);return n===null?null:y2e(e,n,r)}function w2e(e,t,r,n){const a=EL(t);if(a===null||!Xk(a.downloadTokens))return null;const s=a.downloadTokens;if(s.length===0)return null;const i=encodeURIComponent;return s.split(",").map(u=>{const d=e.bucket,f=e.fullPath,h="/b/"+i(d)+"/o/"+i(f),m=wx(h,r,n),g=cne({alt:"media",token:u});return m+g})[0]}function pne(e,t){const r={},n=t.length;for(let a=0;a<n;a++){const s=t[a];s.writable&&(r[s.server]=e[s.local])}return JSON.stringify(r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zV="prefixes",$V="items";function E2e(e,t,r){const n={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[zV])for(const a of r[zV]){const s=a.replace(/\/$/,""),i=e._makeStorageReference(new jl(t,s));n.prefixes.push(i)}if(r[$V])for(const a of r[$V]){const s=e._makeStorageReference(new jl(t,a.name));n.items.push(s)}return n}function C2e(e,t,r){const n=EL(r);return n===null?null:E2e(e,t,n)}class pp{constructor(t,r,n,a){this.url=t,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA(e){if(!e)throw yL()}function _L(e,t){function r(n,a){const s=mne(e,a,t);return CA(s!==null),s}return r}function _2e(e,t){function r(n,a){const s=C2e(e,t,a);return CA(s!==null),s}return r}function S2e(e,t){function r(n,a){const s=mne(e,a,t);return CA(s!==null),w2e(s,a,e.host,e._protocol)}return r}function Pb(e){function t(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=Uwe():a=Mwe():r.getStatus()===402?a=Lwe(e.bucket):r.getStatus()===403?a=Qwe(e.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return t}function SL(e){const t=Pb(e);function r(n,a){let s=t(n,a);return n.getStatus()===404&&(s=Rwe(e.path)),s.serverResponse=a.serverResponse,s}return r}function N2e(e,t,r){const n=t.fullServerUrl(),a=wx(n,e.host,e._protocol),s="GET",i=e.maxOperationRetryTime,o=new pp(a,s,_L(e,r),i);return o.errorHandler=SL(t),o}function k2e(e,t,r,n,a){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",r.length>0&&(s.delimiter=r),n&&(s.pageToken=n),a&&(s.maxResults=a);const i=t.bucketOnlyServerUrl(),o=wx(i,e.host,e._protocol),c="GET",u=e.maxOperationRetryTime,d=new pp(o,c,_2e(e,t.bucket),u);return d.urlParams=s,d.errorHandler=Pb(t),d}function B2e(e,t,r){const n=t.fullServerUrl(),a=wx(n,e.host,e._protocol),s="GET",i=e.maxOperationRetryTime,o=new pp(a,s,S2e(e,r),i);return o.errorHandler=SL(t),o}function T2e(e,t){const r=t.fullServerUrl(),n=wx(r,e.host,e._protocol),a="DELETE",s=e.maxOperationRetryTime;function i(c,u){}const o=new pp(n,a,i,s);return o.successCodes=[200,204],o.errorHandler=SL(t),o}function j2e(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function gne(e,t,r){const n=Object.assign({},r);return n.fullPath=e.path,n.size=t.size(),n.contentType||(n.contentType=j2e(null,t)),n}function xne(e,t,r,n,a){const s=t.bucketOnlyServerUrl(),i={"X-Goog-Upload-Protocol":"multipart"};function o(){let _="";for(let T=0;T<2;T++)_=_+Math.random().toString().slice(2);return _}const c=o();i["Content-Type"]="multipart/related; boundary="+c;const u=gne(t,n,a),d=pne(u,r),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,h=`\r
--`+c+"--",m=yh.getBlob(f,n,h);if(m===null)throw one();const g={name:u.fullPath},x=wx(s,e.host,e._protocol),v="POST",y=e.maxUploadRetryTime,w=new pp(x,v,_L(e,r),y);return w.urlParams=g,w.headers=i,w.body=m.uploadData(),w.errorHandler=Pb(t),w}class CN{constructor(t,r,n,a){this.current=t,this.total=r,this.finalized=!!n,this.metadata=a||null}}function NL(e,t){let r=null;try{r=e.getResponseHeader("X-Goog-Upload-Status")}catch{CA(!1)}return CA(!!r&&(t||["active"]).indexOf(r)!==-1),r}function I2e(e,t,r,n,a){const s=t.bucketOnlyServerUrl(),i=gne(t,n,a),o={name:i.fullPath},c=wx(s,e.host,e._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.size()}`,"X-Goog-Upload-Header-Content-Type":i.contentType,"Content-Type":"application/json; charset=utf-8"},f=pne(i,r),h=e.maxUploadRetryTime;function m(x){NL(x);let v;try{v=x.getResponseHeader("X-Goog-Upload-URL")}catch{CA(!1)}return CA(Xk(v)),v}const g=new pp(c,u,m,h);return g.urlParams=o,g.headers=d,g.body=f,g.errorHandler=Pb(t),g}function F2e(e,t,r,n){const a={"X-Goog-Upload-Command":"query"};function s(u){const d=NL(u,["active","final"]);let f=null;try{f=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{CA(!1)}f||CA(!1);const h=Number(f);return CA(!isNaN(h)),new CN(h,n.size(),d==="final")}const i="POST",o=e.maxUploadRetryTime,c=new pp(r,i,s,o);return c.headers=a,c.errorHandler=Pb(t),c}const GV=256*1024;function O2e(e,t,r,n,a,s,i,o){const c=new CN(0,0);if(i?(c.current=i.current,c.total=i.total):(c.current=0,c.total=n.size()),n.size()!==c.total)throw $we();const u=c.total-c.current;let d=u;a>0&&(d=Math.min(d,a));const f=c.current,h=f+d;let m="";d===0?m="finalize":u===d?m="upload, finalize":m="upload";const g={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${c.current}`},x=n.slice(f,h);if(x===null)throw one();function v(T,B){const j=NL(T,["active","final"]),E=c.current+d,N=n.size();let I;return j==="final"?I=_L(t,s)(T,B):I=null,new CN(E,N,j==="final",I)}const y="POST",w=t.maxUploadRetryTime,_=new pp(r,y,v,w);return _.headers=g,_.body=x.uploadData(),_.progressCallback=o||null,_.errorHandler=Pb(e),_}const sc={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function E3(e){switch(e){case"running":case"pausing":case"canceling":return sc.RUNNING;case"paused":return sc.PAUSED;case"success":return sc.SUCCESS;case"canceled":return sc.CANCELED;case"error":return sc.ERROR;default:return sc.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2e{constructor(t,r,n){if(Zwe(t)||r!=null||n!=null)this.next=t,this.error=r??void 0,this.complete=n??void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(e){return(...t)=>{Promise.resolve().then(()=>e(...t))}}class P2e{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ng.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ng.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ng.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,r,n,a,s){if(this.sent_)throw qy("cannot .send() more than once");if(l0(t)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,t,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw qy("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw qy("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw qy("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw qy("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class R2e extends P2e{initXhr(){this.xhr_.responseType="text"}}function wh(){return new R2e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2e{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(t,r,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=r,this._metadata=n,this._mappings=CL(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{if(this._request=void 0,this._chunkMultiplier=1,a._codeEquals(Wa.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(une(a.status,[]))if(s)a=sne();else{this.sleepTime=Math.max(this.sleepTime*2,Pwe),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=a,this._transition("error")}},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals(Wa.CANCELED)?this.completeTransitions_():(this._error=a,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((a,s)=>{this._resolve=a,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return r=>this._updateProgress(t+r)}_shouldDoResumable(t){return t.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([r,n])=>{switch(this._state){case"running":t(r,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((t,r)=>{const n=I2e(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,wh,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((r,n)=>{const a=F2e(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(a,wh,r,n);this._request=s,s.getPromise().then(i=>{i=i,this._request=void 0,this._updateProgress(i.current),this._needToFetchStatus=!1,i.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=GV*this._chunkMultiplier,r=new CN(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((a,s)=>{let i;try{i=O2e(this._ref._location,this._ref.storage,n,this._blob,t,this._mappings,r,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const o=this._ref.storage._makeRequest(i,wh,a,s,!1);this._request=o,o.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){GV*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,r)=>{const n=N2e(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(n,wh,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,r)=>{const n=xne(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,wh,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const r=this._transferred;this._transferred=t,this._transferred!==r&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const r=this._state==="paused";this._state=t,r&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=ine(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const t=E3(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,r,n,a){const s=new D2e(r||void 0,n||void 0,a||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,r){return this._promise.then(t,r)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const r=this._observers.indexOf(t);r!==-1&&this._observers.splice(r,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(r=>{this._notifyObserver(r)})}_finishPromise(){if(this._resolve!==void 0){let t=!0;switch(E3(this._state)){case sc.SUCCESS:dv(this._resolve.bind(null,this.snapshot))();break;case sc.CANCELED:case sc.ERROR:const r=this._reject;dv(r.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(E3(this._state)){case sc.RUNNING:case sc.PAUSED:t.next&&dv(t.next.bind(t,this.snapshot))();break;case sc.SUCCESS:t.complete&&dv(t.complete.bind(t))();break;case sc.CANCELED:case sc.ERROR:t.error&&dv(t.error.bind(t,this._error))();break;default:t.error&&dv(t.error.bind(t,this._error))()}}resume(){const t=this._state==="paused"||this._state==="pausing";return t&&this._transition("running"),t}pause(){const t=this._state==="running";return t&&this._transition("pausing"),t}cancel(){const t=this._state==="running"||this._state==="pausing";return t&&this._transition("canceling"),t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(t,r){this._service=t,r instanceof jl?this._location=r:this._location=jl.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new Wg(t,r)}get root(){const t=new jl(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return hne(this._location.path)}get storage(){return this._service}get parent(){const t=p2e(this._location.path);if(t===null)return null;const r=new jl(this._location.bucket,t);return new Wg(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw qwe(t)}}function M2e(e,t,r){e._throwIfRoot("uploadBytes");const n=xne(e.storage,e._location,CL(),new yh(t,!0),r);return e.storage.makeRequestWithTokens(n,wh).then(a=>({metadata:a,ref:e}))}function U2e(e,t,r){return e._throwIfRoot("uploadBytesResumable"),new L2e(e,new yh(t),r)}function Q2e(e){const t={prefixes:[],items:[]};return vne(e,t).then(()=>t)}async function vne(e,t,r){const a=await H2e(e,{pageToken:r});t.prefixes.push(...a.prefixes),t.items.push(...a.items),a.nextPageToken!=null&&await vne(e,t,a.nextPageToken)}function H2e(e,t){t!=null&&typeof t.maxResults=="number"&&DO("options.maxResults",1,1e3,t.maxResults);const r=t||{},n=k2e(e.storage,e._location,"/",r.pageToken,r.maxResults);return e.storage.makeRequestWithTokens(n,wh)}function V2e(e){e._throwIfRoot("getDownloadURL");const t=B2e(e.storage,e._location,CL());return e.storage.makeRequestWithTokens(t,wh).then(r=>{if(r===null)throw Gwe();return r})}function z2e(e){e._throwIfRoot("deleteObject");const t=T2e(e.storage,e._location);return e.storage.makeRequestWithTokens(t,wh)}function $2e(e,t){const r=g2e(e._location.path,t),n=new jl(e._location.bucket,r);return new Wg(e.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G2e(e){return/^[A-Za-z]+:\/\//.test(e)}function K2e(e,t){return new Wg(e,t)}function bne(e,t){if(e instanceof kL){const r=e;if(r._bucket==null)throw zwe();const n=new Wg(r,r._bucket);return t!=null?bne(n,t):n}else return t!==void 0?$2e(e,t):e}function q2e(e,t){if(t&&G2e(t)){if(e instanceof kL)return K2e(e,t);throw OO("To use ref(service, url), the first argument must be a Storage instance.")}else return bne(e,t)}function KV(e,t){const r=t==null?void 0:t[ane];return r==null?null:jl.makeFromBucketSpec(r,e)}function W2e(e,t,r,n={}){e.host=`${t}:${r}`;const a=l0(t);a&&(vk(`https://${e.host}/b`),bk("Storage",!0)),e._isUsingEmulator=!0,e._protocol=a?"https":"http";const{mockUserToken:s}=n;s&&(e._overrideAuthToken=typeof s=="string"?s:Dee(s,e.app.options.projectId))}class kL{constructor(t,r,n,a,s,i=!1){this.app=t,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=s,this._isUsingEmulator=i,this._bucket=null,this._host=nne,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Owe,this._maxUploadRetryTime=Dwe,this._requests=new Set,a!=null?this._bucket=jl.makeFromBucketSpec(a,this._host):this._bucket=KV(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=jl.makeFromBucketSpec(this._url,t):this._bucket=KV(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){DO("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){DO("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(Kc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Wg(this,t)}_makeRequest(t,r,n,a,s=!0){if(this._deleted)return new Wwe(lne());{const i=i2e(t,this._appId,n,a,r,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(t,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,n,a).getPromise()}}const qV="@firebase/storage",WV="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yne="storage";function BL(e,t,r){return e=Jn(e),M2e(e,t,r)}function X2e(e,t,r){return e=Jn(e),U2e(e,t,r)}function Y2e(e){return e=Jn(e),Q2e(e)}function Yk(e){return e=Jn(e),V2e(e)}function J2e(e){return e=Jn(e),z2e(e)}function $E(e,t){return e=Jn(e),q2e(e,t)}function TL(e=yk(),t){e=Jn(e);const n=OE(e,yne).getImmediate({identifier:t}),a=SR("storage");return a&&Z2e(n,...a),n}function Z2e(e,t,r,n={}){W2e(e,t,r,n)}function eEe(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),n=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new kL(r,n,a,t,mx)}function tEe(){Gm(new Vh(yne,eEe,"PUBLIC").setMultipleInstances(!0)),sd(qV,WV,""),sd(qV,WV,"esm2020")}tEe();const rEe={apiKey:"AIzaSyAfL9dpeLfpWQPg4orpFSh3X5dzXrSsBwc",authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},jL=BR(rEe),GE=bte(jL),Fr=dL(jL),IL=TL(jL),wne="AIzaSyDn2nxyD4XMxRJdyLgo_9MNRlPPb7f0u5w",Ene=Object.freeze(Object.defineProperty({__proto__:null,GEMINI_API_KEY:wne,auth:GE,db:Fr,storage:IL},Symbol.toStringTag,{value:"Module"})),nEe=async(e,t)=>{try{return(await Ave(GE,e,t)).user}catch(r){throw console.error("Error en loginUser helper:",r),r}},C3=async()=>{try{await pve(GE)}catch(e){throw console.error("Error en logoutUser helper:",e),e}},aEe=async e=>{try{await fve(GE,e)}catch(t){throw console.error("Error en resetPassword helper:",t),t}},Cne=async e=>{try{const t=cr(Fr,"usuarios",e),r=await bx(t);return r.exists()?{id:r.id,...r.data()}:(console.warn(`No se encontró perfil en Firestore para: ${e}`),null)}catch(t){throw console.error("Error en getUserProfile helper:",t),t}};var Jt=(e=>(e.SUBDIRECCION="SUBDIRECCION",e.PROFESORADO="PROFESORADO",e.COORDINACION_TP="COORDINACION_TP",e.ESTUDIANTE="ESTUDIANTE",e))(Jt||{}),An=(e=>(e.EVALUACION="Evaluación",e.ACTO="Acto",e.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",e.SALIDA_PEDAGOGICA="Salida Pedagógica",e))(An||{}),cg=(e=>(e.PRUEBA_PARCIAL="Prueba parcial",e.GUIA_APRENDIZAJE="Guía de Aprendizaje",e.RUBRICA="Rúbrica",e.PAUTA_COTEJO="Pauta de Cotejo",e))(cg||{});const sEe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m-1 4h1m5-4h1m-1 4h1"})}),iEe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:si,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 3.75H6A2.25 2.25 0 003.75 6v1.5M16.5 3.75H18A2.25 2.25 0 0120.25 6v1.5m0 9V18A2.25 2.25 0 0118 20.25h-1.5m-9 0H6A2.25 2.25 0 013.75 18v-1.5M15 12a3 3 0 11-6 0 3 3 0 016 0z"})}),si="w-6 h-6",Jk="w-24 h-24",FL=()=>l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestión Pedagógica LIR",className:"w-32 h-32 object-contain"}),oEe=()=>l.jsxs("svg",{className:"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M9 18h6"}),l.jsx("path",{d:"M10 22h4"}),l.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),lEe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),cEe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:si,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Iw=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:si,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),Fw=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:si,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),_ne=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),uEe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Jk,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),dEe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Jk,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),fEe=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Jk,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 010 1.255c-.008.378.137.75.43.99l1.004.828c.421.346.564.95.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.68 6.68 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.68 6.68 0 01-.22-.127c-.325-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.369-.491l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 010-1.255c.008-.378-.137-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),AEe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Jk,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),hEe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:si,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),XV=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:si,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),U_=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:si,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),_3=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:si,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Q_=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:si,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),S3=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:si,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),YV=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:si,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),mEe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:si,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),pEe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:si,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),gEe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:si,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),xEe=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:si,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),H_=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:si,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),vEe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:si,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),N3=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:si,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),bEe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:si,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.528-1.036.94-2.197 1.088-3.386l-.7M11.42 15.17l-1.06-1.06a4.5 4.5 0 01-5.656-5.656l-1.06 1.06c-1.37.66-2.58 1.6-3.58 2.75a4.5 4.5 0 00-1.06 5.656l1.06 1.06c1.15.998 2.52 1.93 3.99 2.58l1.06-1.06a4.5 4.5 0 015.656-5.656l3.032 2.496m-3.582-2.58a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06m-3.032-2.496a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06"})}),yEe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:si,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),JV=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:si,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),wEe=[{id:Jt.SUBDIRECCION,label:"Subdirección Pedagógica",icon:l.jsx(uEe,{})},{id:Jt.PROFESORADO,label:"Profesorado",icon:l.jsx(dEe,{})},{id:Jt.COORDINACION_TP,label:"Coordinación TP",icon:l.jsx(fEe,{})},{id:Jt.ESTUDIANTE,label:"Estudiantes",icon:l.jsx(AEe,{})}],EEe={[Jt.SUBDIRECCION]:[{name:"Dashboard",icon:l.jsx(hEe,{})},{name:"Administración",icon:l.jsx(xEe,{})},{name:"Seguimiento Curricular",icon:l.jsx(yEe,{})},{name:"Acompañamiento docente",icon:l.jsx(gEe,{})},{name:"Análisis Taxonómico",icon:l.jsx(JV,{})},{name:"Interdisciplinario",icon:l.jsx(N3,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:l.jsx(XV,{})},{name:"Crear horarios",icon:l.jsx(_3,{})},{name:"Seguimiento de acciones pedagógicas",icon:l.jsx(Q_,{})},{name:"Inclusión",icon:l.jsx(H_,{})},{name:"Calendario Académico",icon:l.jsx(U_,{})},{name:"Muro de Anuncios",icon:l.jsx(Iw,{})},{name:"Mensajería Interna",icon:l.jsx(Fw,{})},{name:"Generador de Actas",icon:l.jsx(S3,{})}],[Jt.PROFESORADO]:[{name:"Planificación",icon:l.jsx(YV,{})},{name:"Mis Acompañamientos",icon:l.jsx(vEe,{})},{name:"Recursos de Aprendizaje",icon:l.jsx(mEe,{})},{name:"Análisis Taxonómico",icon:l.jsx(JV,{})},{name:"Interdisciplinario",icon:l.jsx(N3,{})},{name:"Inclusión",icon:l.jsx(H_,{})},{name:"Actividades Remotas",icon:l.jsx(pEe,{})},{name:"Evaluación de Aprendizajes",icon:l.jsx(S3,{})},{name:"Evaluaciones Formativas",icon:l.jsx(Q_,{})},{name:"Desarrollo Profesional",icon:l.jsx(H_,{})},{name:"Evaluación de Competencias",icon:l.jsx(iEe,{})},{name:"Calendario Académico",icon:l.jsx(U_,{})},{name:"Muro de Anuncios",icon:l.jsx(Iw,{})},{name:"Mensajería Interna",icon:l.jsx(Fw,{})},{name:"Generador de Actas",icon:l.jsx(XV,{})}],[Jt.COORDINACION_TP]:[{name:"Seguimiento Dual",icon:l.jsx(Q_,{})},{name:"Asistencia Dual",icon:l.jsx(_3,{})},{name:"Pañol",icon:l.jsx(bEe,{})},{name:"Gestión de Empresas",icon:l.jsx(sEe,{})},{name:"Calendario Académico",icon:l.jsx(U_,{})},{name:"Muro de Anuncios",icon:l.jsx(Iw,{})},{name:"Mensajería Interna",icon:l.jsx(Fw,{})},{name:"Alternancia TP",icon:"🔄"},{name:"Desarrollo Profesional",icon:l.jsx(H_,{})},{name:"Generador de Actas",icon:l.jsx(S3,{})}],[Jt.ESTUDIANTE]:[{name:"Auto-aprendizaje",icon:l.jsx(YV,{})},{name:"Evaluación Formativa",icon:l.jsx(Q_,{})},{name:"Tareas Interdisciplinarias",icon:l.jsx(N3,{})},{name:"Asistencia a Empresa",icon:l.jsx(_3,{})},{name:"Calendario Académico",icon:l.jsx(U_,{})},{name:"Muro de Anuncios",icon:l.jsx(Iw,{})},{name:"Mensajería Interna",icon:l.jsx(Fw,{})}]},ZV=["1º Medio","2º Medio","3º Medio","4º Medio"],jo=["Lengua y Literatura","Matemática","Inglés","Filosofía","Historia y Geografía","Educación Ciudadana","Ciencias","Ciencias para la Ciudadanía","Artes","Música","Educación Física","Orientación","Mecánica Industrial","Mecánica Automotriz","Emprendimiento","Tecnología","Pensamiento Lógico","Competencia Lectora"],Ac=["1ºA","1ºB","1ºC","1ºD","1ºE","2ºA","2ºB","2ºC","2ºD","3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],PO=["Nelson Laubreaux","Julian Seguel","Martin Moya","Leonel Moya","Miguel Becerra"],x1={[An.EVALUACION]:{label:"Evaluación",icon:"📝",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[An.ACTO]:{label:"Acto",icon:"🏛️",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[An.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"🎯",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[An.SALIDA_PEDAGOGICA]:{label:"Salida Pedagógica",icon:"🚌",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},CEe=Object.values(cg),k3=["Humanidades","TP","Ciencias","Interdisciplinario","Gestión Pedagógica","Equipo Directivo","Equipo de Gestión","Consejo Escolar"],B3=["Vinculado","Desvinculado","En proceso","Empresa"],kg=["3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],_Ee=["Quiz","Comprensión de Lectura","Términos Pareados","Desarrollo"],_N=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limítrofe","Trastorno Déficit Atencional (TDA)","Trastorno Déficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Específica del Aprendizaje","Dificultad Específica de Aprendizaje en Matemáticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarización"],a2=[{domain:"Dominio A: Preparación de la Enseñanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que enseña, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que enseña, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemológicas o metodológicas en su área.","Conoce y comprende los principios y conceptos centrales de las disciplinas que enseña, atendiendo a la permanente actualización curricular en su área.","Conoce, comprende y cuestiona los principios centrales de la disciplina que enseña a la luz de nuevos paradigmas epistemológicos o teóricos, permitiendo que el trabajo o la exposición conceptual invite al desarrollo del pensamiento crítico o la investigación continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificación o gestión de la clase estándar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relación al contexto y características del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Selección de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las características de sus estudiantes y a la relación con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didácticos de aprendizaje, siendo congruentes al contenido pero no a las características de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejándose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didácticos de aprendizaje congruentes con la complejidad de los contenidos y las características de sus alumnos.","Conoce y selecciona distintos recursos didácticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisición de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluación",levels:["Establece estrategias de evaluación incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo además, las metodologías empleadas previamente en clases.","Establece estrategias de evaluación coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexión, y, la retroalimentación descriptiva."]},{name:"Estrategias de enseñanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes diseñan e implementan estrategias de enseñanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes diseñan e implementan estrategias efectivas de enseñanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes diseñan e implementan estrategias avanzadas de enseñanza-aprendizaje tales como (ABP, ABD, Gamificación, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creación de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empatía",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vínculos fundados en el respeto y/o en la empatía.","Establece un clima de relaciones interpersonales respetuosas y empáticas con la mayoría de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos, generando situaciones concretas de cooperación y ayuda mutua entre él/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Interés por las especialidades",levels:["No transmite interés por las especialidades, centrándose exclusivamente en su área de desempeño.","Transmite interés general por las especialidades, no obstante no es capaz de acercarse a las características concretas de los módulos.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha área de desempeño."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implícitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estándar que implican un desarrollo mecánico y que no tienden hacia la consolidación de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus características personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivación por el aprendizaje",levels:["No transmite motivación por el aprendizaje, la búsqueda o la indagación.","Transmite una motivación positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autónoma","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda.","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemático en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participación."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseñanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentación de objetivos",levels:["Al iniciar las clases no presenta el objetivo o sólo lo enuncia sin profundizar en él.","Al iniciar las clases presenta el objetivo de aprendizaje y el propósito, pero no logra dar cuenta de la relación con el futuro laboral de los estudiantes o con otras áreas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionándolo con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a través de la relación con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro."]},{name:"Clase en función de objetivos",levels:["No realiza su clase en función de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currículum nacional","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando sólo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional y en el PEI."]},{name:"Introducción de nueva información",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva información, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisión conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolación que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentación",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes sólo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal, a través de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensión y desempeño de sus estudiantes.","Monitorea parcialmente el grado de comprensión y desempeño de sus estudiantes, no siempre a través de evidencia.","Monitorea constantemente el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo."]},{name:"Orientación a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales, no obstante, la orientación es superficial y no predispone la construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores en consonancia a elementos propios del PEI."]},{name:"Conclusión de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicación que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora además preguntas de metacognición y/o autoevaluación."]},{name:"Abordaje de errores",levels:["No aborda los errores, únicamente los señala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a través de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogéneo, descuidando la diversidad y las características particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias según nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],Sne=["Líder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],V_=[{nombre:"Aprendiz Emergente",emoji:"🌱",promedioMin:1,promedioMax:3.9,mensaje:"¡Estás comenzando tu viaje de aprendizaje! Sigue esforzándote."},{nombre:"Explorador del Conocimiento",emoji:"🧭",promedioMin:4,promedioMax:4.9,mensaje:"¡Buen trabajo! Estás construyendo una base sólida."},{nombre:"Arquitecto de Ideas",emoji:"🏛️",promedioMin:5,promedioMax:5.9,mensaje:"¡Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"🎓",promedioMin:6,promedioMax:6.5,mensaje:"¡Impresionante! Tu dedicación te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"🌟",promedioMin:6.6,promedioMax:7,mensaje:"¡Extraordinario! Eres una inspiración para tus compañeros."}],SEe=["Mecánica Industrial","Mecánica Automotriz"],NEe=["INACAP","UNAB","DUOC","Universidad de Las Américas"],kEe={"Mecánica Automotriz":["3ºA","3ºB","4ºA","4ºB"],"Mecánica Industrial":["3ºC","3ºD","4ºC","4ºD"]},BEe=["Pasantía","Visita","Certificación","Formación en empresa"],TEe={"Mecánica Industrial":["Soldadura industrial","Mantenimiento de herramientas","Medición y verificación","Mecánica de banco","Torneado de piezas y conjuntos mecánicos","Fresado de piezas mecánicas","Taladrado de piezas mecánicas","Rectificado de piezas mecánicas","Fabricación asistida por computador (CNC)"],"Mecánica Automotriz":["Ajuste de motores","Lectura de planos y manuales técnicos","Manejo de residuos y desechos automotrices","Mantenimiento de sistemas de seguridad y confortabilidad","Mantenimiento de sistemas eléctricos y electrónicos","Mantenimiento de motores","Mantenimiento de sistemas hidráulicos y neumáticos","Mantenimiento de los sistemas de transmisión y frenos","Mantenimiento de sistemas de dirección y suspensión","Emprendimiento y empleabilidad"]},jEe={"Mecánica Automotriz":{"Ajuste de motores":["Reparar y probar el funcionamiento de motores (gasolina, diésel, gas e híbridos), incluyendo sistemas de control de emisiones, lubricación y refrigeración, usando herramientas e instrumentos apropiados y siguiendo especificaciones del fabricante."],"Lectura de planos y manuales técnicos":["Leer e interpretar información técnica (manuales, planos, diagramas y normas de emisiones) para resolver diagnósticos y fallas."],"Manejo de residuos y desechos automotrices":["Aplicar procedimientos y normativas de seguridad, higiene y cuidado ambiental en la manipulación y disposición de residuos y desechos automotrices."],"Mantenimiento de sistemas de seguridad y confortabilidad":["Diagnosticar, reparar y mantener sistemas de seguridad (frenos ABS, airbags) y confortabilidad (climatización, cierre centralizado, asientos eléctricos) según especificaciones técnicas."],"Mantenimiento de sistemas eléctricos y electrónicos":["Reemplazar, ajustar y probar sistemas eléctricos y electrónicos automotrices, siguiendo procedimientos y normas internacionales."],"Mantenimiento de motores":["Realizar mantenimiento preventivo y correctivo de motores y sus sistemas asociados, verificando tolerancias y parámetros operativos según especificaciones."],"Mantenimiento de sistemas hidráulicos y neumáticos":["Inspeccionar, diagnosticar y reparar sistemas hidráulicos y neumáticos de vehículos automotrices."],"Mantenimiento de los sistemas de transmisión y frenos":["Verificar, ajustar o reemplazar componentes de transmisión y frenos, según manual del fabricante."],"Mantenimiento de sistemas de dirección y suspensión":["Diagnosticar, alinear y corregir sistemas de dirección y suspensión, cumpliendo normas de seguridad."],"Emprendimiento y empleabilidad":["Desarrollar un proyecto o plan de negocio relacionado con el sector automotriz, aplicando conceptos de gestión, marketing y normativa vigente."]},"Mecánica Industrial":{"Soldadura industrial":["Ejecutar procesos de corte y soldadura (oxiacetileno, arco manual, TIG, MIG) en distintas posiciones y materiales, aplicando normas de seguridad, higiene y cuidado ambiental."],"Mantenimiento de herramientas":["Mantener y reparar herramientas manuales y de máquinas, asegurando su operatividad y prolongando su vida útil."],"Medición y verificación":["Utilizar instrumentos de medición y verificación para controlar dimensiones y tolerancias según planos y especificaciones técnicas."],"Mecánica de banco":["Realizar operaciones manuales de mecanizado, ajuste, limado, roscado y ensamblaje, siguiendo planos y tolerancias indicadas."],"Torneado de piezas y conjuntos mecánicos":["Operar tornos convencionales para fabricar piezas y conjuntos mecánicos, cumpliendo con las especificaciones técnicas y de seguridad."],"Fresado de piezas mecánicas":["Operar fresadoras para fabricar piezas mecánicas, seleccionando herramientas de corte y parámetros de mecanizado adecuados."],"Taladrado de piezas mecánicas":["Ejecutar operaciones de taladrado, escariado y roscado en taladros de banco o columna, cumpliendo especificaciones técnicas y de seguridad."],"Rectificado de piezas mecánicas":["Utilizar rectificadoras para mejorar el acabado y precisión dimensional de piezas mecánicas, cumpliendo tolerancias indicadas."],"Fabricación asistida por computador (CNC)":["Programar y operar máquinas CNC para fabricar piezas mecánicas con precisión, optimizando procesos y aplicando normas de seguridad."]}},Eh={"Liderazgo Curricular":["Planificación y organización del currículo","Asegurar la cobertura y secuenciación de los contenidos","Monitoreo del cumplimiento de los planes de estudio"],"Prácticas Pedagógicas en el Aula":["Estrategias de enseñanza y metodologías activas","Evaluación de los aprendizajes para retroalimentar el proceso","Uso de recursos y tecnologías para apoyar la enseñanza"],"Acompañamiento y Desarrollo Profesional Docente":["Observación de clases y retroalimentación","Planes de formación continua y actualización pedagógica","Fomento de comunidades de aprendizaje docente"],"Monitoreo y Evaluación de los Aprendizajes":["Uso de datos e indicadores para tomar decisiones pedagógicas","Evaluaciones internas y externas","Ajuste de estrategias según resultados y metas de aprendizaje"]},ez=["Pendiente","En Proceso","Cumplida"],tz=["PROFESORADO","SUBDIRECCION","COORDINACION_TP"],IEe=({onLoginAttempt:e,onForgotPasswordRequest:t,error:r})=>{const[n,a]=S.useState(""),[s,i]=S.useState(""),[o,c]=S.useState("login"),u=h=>{h.preventDefault(),e(n,s)},d=h=>{h.preventDefault(),t(n),c("forgot_sent")},f=()=>o==="forgot"?l.jsxs("form",{onSubmit:d,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico Registrado"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:h=>a(h.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),l.jsx("div",{children:l.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperación"})}),l.jsx("div",{className:"text-sm text-center",children:l.jsx("button",{type:"button",onClick:()=>c("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesión"})})]}):o==="forgot_sent"?l.jsxs("div",{className:"text-center",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),l.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",l.jsx("strong",{children:n}),", hemos enviado un enlace para restablecer su contraseña."]}),l.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulación, revise la consola del navegador para ver el enlace)."}),l.jsx("button",{type:"button",onClick:()=>{c("login"),a("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:"← Volver a Iniciar Sesión"})]}):l.jsxs("form",{onSubmit:u,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:h=>a(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contraseña"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:s,onChange:h=>i(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),r&&l.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:l.jsx("p",{children:r})}),l.jsx("div",{className:"text-sm text-center",children:l.jsx("button",{type:"button",onClick:()=>c("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"¿Olvidó su contraseña?"})}),l.jsx("div",{children:l.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return l.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[l.jsxs("div",{className:"text-center mb-10",children:[l.jsx("div",{className:"mb-4 flex justify-center items-center",children:l.jsx(FL,{})}),l.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:o==="login"?"Bienvenido/a, por favor inicie sesión":"Recuperación de Contraseña"})]}),l.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:f()}),l.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},z_=({trigger:e,children:t,onOpen:r})=>{const[n,a]=S.useState(!1),s=S.useRef(null),i=()=>{const c=!n;a(c),c&&r&&r()},o=c=>{s.current&&!s.current.contains(c.target)&&a(!1)};return S.useEffect(()=>(document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}),[]),l.jsxs("div",{className:"relative",ref:s,children:[l.jsx("div",{onClick:i,children:e}),n&&l.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>a(!1),children:t})]})},rz="usuariosLiceo",FEe=({user:e,onClose:t,onSave:r})=>{const[n,a]=S.useState({nombreCompleto:e.nombreCompleto,email:e.email,fotoUrl:e.fotoUrl||""}),s=o=>{a({...n,[o.target.name]:o.target.value})},i=o=>{o.preventDefault();const c={...e,...n};try{const u=localStorage.getItem(rz);let d=u?JSON.parse(u):[];const f=d.findIndex(h=>h.id===e.id);f>-1?d[f]=c:d.push(c),localStorage.setItem(rz,JSON.stringify(d)),r(c),t()}catch(u){console.error("Failed to save user profile:",u),alert("No se pudo guardar el perfil.")}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:o=>o.stopPropagation(),children:l.jsxs("form",{onSubmit:i,children:[l.jsxs("div",{className:"p-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),l.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:n.fotoUrl,onChange:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),l.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:n.nombreCompleto,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrónico"}),l.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Función"}),l.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.profile})]})]})]}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[l.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},nz="usuariosLiceo",OEe=({user:e,onClose:t,onSave:r})=>{const[n,a]=S.useState(""),[s,i]=S.useState(""),[o,c]=S.useState(null),u=d=>{if(d.preventDefault(),c(null),!n){c("La contraseña no puede estar en blanco.");return}if(n!==s){c("Las contraseñas no coinciden.");return}const f={...e,password:n};try{const h=localStorage.getItem(nz);let m=h?JSON.parse(h):[];const g=m.findIndex(x=>x.id===e.id);g>-1?m[g]=f:m.push(f),localStorage.setItem(nz,JSON.stringify(m)),r(f),t()}catch(h){console.error("Failed to save new password:",h),c("No se pudo guardar la nueva contraseña.")}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:d=>d.stopPropagation(),children:l.jsxs("form",{onSubmit:u,children:[l.jsxs("div",{className:"p-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuración de Cuenta"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),l.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.email})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contraseña"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:n,onChange:d=>a(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contraseña"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:s,onChange:d=>i(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),o&&l.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:l.jsx("p",{children:o})})]})]}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[l.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contraseña"})]})]})})})};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DEe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),PEe=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),az=e=>{const t=PEe(e);return t.charAt(0).toUpperCase()+t.slice(1)},Nne=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),REe=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var LEe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MEe=S.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:s,iconNode:i,...o},c)=>S.createElement("svg",{ref:c,...LEe,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:Nne("lucide",a),...!s&&!REe(o)&&{"aria-hidden":"true"},...o},[...i.map(([u,d])=>S.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=(e,t)=>{const r=S.forwardRef(({className:n,...a},s)=>S.createElement(MEe,{ref:s,iconNode:t,className:Nne(`lucide-${DEe(az(e))}`,`lucide-${e}`,n),...a}));return r.displayName=az(e),r};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UEe=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],QEe=Gt("activity",UEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HEe=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],$_=Gt("arrow-left",HEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VEe=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],zEe=Gt("bell-ring",VEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Ee=[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],GEe=Gt("book-marked",$Ee);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KEe=[["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V4a1 1 0 0 0-1-1h-5a4 4 0 0 0-4 4 4 4 0 0 0-4-4H3a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h6a3 3 0 0 1 3 3 3 3 0 0 1 3-3h6a1 1 0 0 0 1-1v-1.3",key:"8arnkb"}]],qEe=Gt("book-open-check",KEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WEe=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],df=Gt("book-open",WEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XEe=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],YEe=Gt("brain-circuit",XEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JEe=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],L2=Gt("brain",JEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZEe=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],kne=Gt("briefcase",ZEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eCe=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],SN=Gt("building-2",eCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tCe=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],rCe=Gt("building",tCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nCe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],aCe=Gt("calendar-check",nCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sCe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],id=Gt("calendar",sCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iCe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Wd=Gt("chart-column",iCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oCe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],lCe=Gt("chart-line",oCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cCe=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],uCe=Gt("chart-no-axes-column",cCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dCe=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Bne=Gt("chart-pie",dCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fCe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],M2=Gt("chevron-left",fCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ACe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],OL=Gt("chevron-right",ACe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hCe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],rf=Gt("circle-alert",hCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mCe=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],DL=Gt("circle-check-big",mCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pCe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],io=Gt("circle-check",pCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gCe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],G_=Gt("circle-plus",gCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xCe=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],vCe=Gt("clipboard-check",xCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bCe=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Xg=Gt("clipboard-list",bCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yCe=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Em=Gt("clock",yCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wCe=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Zm=Gt("download",wCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ECe=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],CCe=Gt("factory",ECe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Ce=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],SCe=Gt("file-check",_Ce);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NCe=[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]],kCe=Gt("file-pen",NCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BCe=[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M15.033 13.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56v-4.704a.645.645 0 0 1 .967-.56z",key:"1tzo1f"}]],TCe=Gt("file-play",BCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jCe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],ICe=Gt("file-spreadsheet",jCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FCe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],nf=Gt("file-text",FCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OCe=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M2 10h20",key:"1ir3d8"}]],DCe=Gt("folder-closed",OCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PCe=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],sz=Gt("folder-open",PCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RCe=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],PL=Gt("funnel",RCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LCe=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],NN=Gt("gauge",LCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MCe=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Yg=Gt("graduation-cap",MCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UCe=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],QCe=Gt("hash",UCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HCe=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],Tne=Gt("hourglass",HCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VCe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],zCe=Gt("image",VCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Ce=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],GCe=Gt("info",$Ce);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KCe=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],jne=Gt("layout-dashboard",KCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qCe=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],RL=Gt("layers",qCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WCe=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],XCe=Gt("layout-grid",WCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YCe=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],JCe=Gt("layout-list",YCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZCe=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],iz=Gt("link-2",ZCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e_e=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],t_e=Gt("link",e_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_e=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],s2=Gt("list-checks",r_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_e=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Cm=Gt("loader-circle",n_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_e=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],s_e=Gt("mail",a_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_e=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],kN=Gt("map-pin",i_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_e=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],l_e=Gt("megaphone",o_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_e=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],u_e=Gt("menu",c_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_e=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Ine=Gt("message-square",d_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_e=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],oz=Gt("notebook-pen",f_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_e=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],h_e=Gt("palette",A_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_e=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],RO=Gt("pen-line",m_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_e=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],LL=Gt("pencil",p_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_e=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],x_e=Gt("percent",g_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_e=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],od=Gt("plus",v_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b_e=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],y_e=Gt("puzzle",b_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_e=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],Fne=Gt("refresh-ccw",w_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_e=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],C_e=Gt("route",E_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __e=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],S_e=Gt("ruler",__e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_e=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],qh=Gt("save",N_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_e=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],T3=Gt("school",k_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_e=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],lz=Gt("scroll-text",B_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_e=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Zk=Gt("search",T_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_e=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],I_e=Gt("settings",j_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F_e=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],O_e=Gt("shield-check",F_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_e=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Bg=Gt("sparkles",D_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_e=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],One=Gt("square-pen",P_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],LO=Gt("square-plus",R_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_e=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],M_e=Gt("star",L_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],K1=Gt("target",U_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_e=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Do=Gt("trash-2",Q_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_e=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],BN=Gt("trending-up",H_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_e=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 12h.01",key:"yjnet6"}],["path",{d:"M18 16h.01",key:"plv8zi"}],["path",{d:"M22 7a1 1 0 0 0-1-1h-2a2 2 0 0 1-1.143-.359L13.143 2.36a2 2 0 0 0-2.286-.001L6.143 5.64A2 2 0 0 1 5 6H3a1 1 0 0 0-1 1v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2z",key:"1ogmi3"}],["path",{d:"M6 12h.01",key:"c2rlol"}],["path",{d:"M6 16h.01",key:"1pmjb7"}],["circle",{cx:"12",cy:"10",r:"2",key:"1yojzk"}]],z_e=Gt("university",V_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_e=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],KE=Gt("upload",$_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_e=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],K_e=Gt("user-minus",G_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_e=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],W_e=Gt("user-plus",q_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_e=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],U2=Gt("user",X_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_e=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],Wy=Gt("users-round",Y_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_e=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],hc=Gt("users",J_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_e=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],ug=Gt("video",Z_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5e=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],t5e=Gt("wand-sparkles",e5e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5e=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],bS=Gt("wrench",r5e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5e=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],TN=Gt("x",n5e);async function a5e(e){const t={...e,docenteEmailLower:e.docenteEmail?e.docenteEmail.toLowerCase():e.docenteEmailLower,leida:!1,createdAt:Ri()};return Object.keys(t).forEach(n=>t[n]===void 0&&delete t[n]),(await _n(wt(Fr,"notificaciones"),t)).id}function s5e(e,t){const r=[];let n=[],a=[];const s=()=>{const i=new Map;[...n,...a].forEach(c=>{c.id&&(i.has(c.id)||i.set(c.id,c))});const o=Array.from(i.values()).sort((c,u)=>{var h,m;const d=(h=c.createdAt)!=null&&h.toDate?c.createdAt.toDate().getTime():0;return((m=u.createdAt)!=null&&m.toDate?u.createdAt.toDate().getTime():0)-d});t(o)};if(e.email){const i=$t(wt(Fr,"notificaciones"),Qr("docenteEmailLower","==",e.email.toLowerCase()),xr("createdAt","desc"));r.push(pr(i,o=>{n=o.docs.map(c=>({id:c.id,...c.data()})),s()}))}if(e.nombreCompleto){const i=$t(wt(Fr,"notificaciones"),Qr("docenteNombre","==",e.nombreCompleto),xr("createdAt","desc"));r.push(pr(i,o=>{a=o.docs.map(c=>({id:c.id,...c.data()})),s()}))}return()=>r.forEach(i=>i())}async function i5e(e){const t=cr(Fr,"notificaciones",e);await du(t,{leida:!0})}async function o5e(e){const t=cr(Fr,"notificaciones",e);await is(t)}const cz="anunciosMuro",uz="mensajesInternos",dz="lir-read-status",l5e=({user:e})=>{if(e.fotoUrl)return l.jsx("img",{src:e.fotoUrl,alt:e.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const t=e.nombreCompleto||"",r=String(t).split(" ").filter(n=>n).map(n=>n[0]).join("").toUpperCase();return l.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:r.substring(0,2)})},c5e=({currentUser:e,onLogout:t,onNavigate:r,onUserUpdate:n,onChangeProfile:a,canChangeProfile:s,toggleSidebar:i,unreadMessagesCount:o,refreshUnreadCount:c})=>{const[u,d]=S.useState([]),[f,h]=S.useState([]),[m,g]=S.useState(!1),[x,v]=S.useState(!1),[y,w]=S.useState([]),_=S.useCallback(()=>{try{const I=localStorage.getItem(`${dz}-${e.id}`);return I?JSON.parse(I):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[e.id]),T=S.useCallback(I=>{try{localStorage.setItem(`${dz}-${e.id}`,JSON.stringify(I))}catch(L){console.error("Failed to set read status:",L)}},[e.id]);S.useEffect(()=>{const I=JSON.parse(localStorage.getItem(cz)||"[]"),L=_();d(I.filter(k=>!L.announcements.includes(k.id)));const D=JSON.parse(localStorage.getItem(uz)||"[]");h(D.filter(k=>k.para===e.email).sort((k,P)=>new Date(P.fecha).getTime()-new Date(k.fecha).getTime()).slice(0,5))},[e.id,_,o]),S.useEffect(()=>{if(!(e!=null&&e.email))return;const I=s5e({email:e.email,nombreCompleto:e.nombreCompleto},L=>{const D=L.filter(k=>k.tipo&&(k.tipo.toLowerCase()==="pie"||k.tipo==="nueva_intervencion"));w(D)});return()=>I()},[e==null?void 0:e.email,e==null?void 0:e.nombreCompleto]);const B=()=>{const I=_(),L=JSON.parse(localStorage.getItem(cz)||"[]").map(D=>D.id);I.announcements=L,T(I),d([])},j=()=>{const I=_(),D=JSON.parse(localStorage.getItem(uz)||"[]").filter(k=>k.para===e.email).map(k=>k.id);I.messages=[...new Set([...I.messages,...D])],T(I),c()},E=y.filter(I=>!I.leida).length,N=I=>{var L;try{const D=(L=I.createdAt)!=null&&L.toDate?I.createdAt.toDate():new Date(I.createdAt);return D?D.toLocaleString("es-CL"):""}catch{return""}};return l.jsxs(l.Fragment,{children:[l.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:l.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:i,children:l.jsx(lEe,{})}),l.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>r("Dashboard"),children:[l.jsxs("svg",{className:"w-8 h-8 text-slate-700 dark:text-slate-200",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20V6.5A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v13Z",stroke:"currentColor",strokeWidth:"1.5"}),l.jsx("path",{d:"M16 4.5V17",stroke:"currentColor",strokeWidth:"1.5"})]}),l.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestión LIR"})]})]}),l.jsx("div",{className:"flex-1 flex justify-center",children:l.jsx("button",{onClick:()=>r("Calendario Académico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Académico",children:l.jsx(cEe,{})})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"flex items-center gap-3",children:l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754153206/ChatGPT_Image_2_ago_2025_12_46_35_p.m._qsqj5e.png",alt:"Logo LIR",className:"h-10 w-10 object-contain"})}),l.jsx(z_,{onOpen:B,trigger:l.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Anuncios",children:[l.jsx(Iw,{}),u.length>0&&l.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:u.length})]}),children:l.jsxs("div",{className:"p-2",children:[l.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),l.jsxs("ul",{className:"mt-1",children:[u.slice(0,3).map(I=>l.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[l.jsx("p",{className:"font-bold dark:text-slate-200",children:I.titulo}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:I.mensaje})]},I.id)),u.length===0&&l.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]}),l.jsx("button",{onClick:()=>r("Muro de Anuncios"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ver todo"})]})}),l.jsx(z_,{trigger:l.jsxs("button",{className:"relative p-2 rounded-full bg-sky-100 hover:bg-sky-200 text-sky-700 dark:bg-sky-900/30 dark:hover:bg-sky-900/40 dark:text-sky-300 transition-colors",title:"Notificaciones PIE",children:[l.jsx(y_e,{className:"w-5 h-5"}),E>0&&l.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:E})]}),children:l.jsxs("div",{className:"p-2 w-80",children:[l.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Notificaciones PIE"}),l.jsxs("ul",{className:"mt-1 max-h-80 overflow-y-auto divide-y dark:divide-slate-700",children:[y.length===0&&l.jsx("li",{className:"p-3 text-sm text-slate-500 dark:text-slate-400",children:"No hay notificaciones."}),y.map(I=>l.jsx("li",{className:"p-2 text-sm",children:l.jsxs("div",{className:"flex justify-between items-start gap-2",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-semibold text-slate-800 dark:text-slate-200",children:I.titulo}),l.jsx("div",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-line",children:I.mensaje}),I.estudianteNombre&&l.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Estudiante: ",l.jsx("b",{children:I.estudianteNombre})]}),l.jsx("div",{className:"text-[11px] text-slate-400 mt-1",children:N(I)})]}),l.jsxs("div",{className:"flex-shrink-0 flex flex-col gap-1",children:[!I.leida&&l.jsx("button",{onClick:()=>I.id&&i5e(I.id),className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded hover:bg-green-200",children:"Marcar leída"}),l.jsx("button",{onClick:()=>I.id&&o5e(I.id),className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded hover:bg-red-200",children:"Eliminar"})]})]})},I.id))]})]})}),l.jsx(z_,{onOpen:j,trigger:l.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[l.jsx(Fw,{}),o>0&&l.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:o})]}),children:l.jsxs("div",{className:"p-2",children:[l.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),l.jsxs("ul",{className:"mt-1",children:[f.slice(0,3).map(I=>l.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[l.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",I.de]}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:I.asunto})]},I.id)),f.length===0&&l.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]}),l.jsx("button",{onClick:()=>r("Mensajería Interna"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ir a la bandeja"})]})}),l.jsx(z_,{trigger:l.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:l.jsx(l5e,{user:e})}),children:l.jsxs("div",{className:"p-2",children:[l.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:e.nombreCompleto}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:e.profile})]}),l.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[l.jsx("li",{children:l.jsx("button",{onClick:()=>g(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),l.jsx("li",{children:l.jsx("button",{onClick:()=>v(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuración"})}),s&&l.jsx("li",{children:l.jsx("button",{onClick:a,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"👑 Cambiar Vista"})}),l.jsx("li",{children:l.jsx("button",{onClick:t,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesión"})})]})]})})]})]})}),m&&l.jsx(FEe,{user:e,onClose:()=>g(!1),onSave:n}),x&&l.jsx(OEe,{user:e,onClose:()=>v(!1),onSave:n})]})},u5e={apiKey:void 0,authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},ML=yH().length?yH()[0]:BR(u5e),ht=dL(ML),MO=bte(ML),d5e=TL(ML),qE="reemplazos_docentes",f5e="usuarios",UL=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaActualizacion:((s=(a=t.fechaActualizacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaActualizacion}},A5e=e=>{const t=e.data();return{id:e.id,...t}},h5e=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:ir.fromDate(new Date),fechaActualizacion:ir.fromDate(new Date)};return(await _n(wt(ht,qE),r)).id}catch(r){throw console.error("Error al guardar reemplazo:",r),new Error("No se pudo guardar el reemplazo")}},m5e=async(e,t)=>{try{const r=cr(ht,qE,e),n=await bx(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar este reemplazo");await is(r)}catch(r){throw console.error("Error al eliminar reemplazo:",r),new Error("No se pudo eliminar el reemplazo")}},p5e=(e,t,r=50)=>{try{const n=$t(wt(ht,qE),Qr("userId","==",e),xr("diaAusencia","desc"),tf(r));return pr(n,a=>{const s=a.docs.map(UL);t(s)},a=>{console.error("Error en suscripción a reemplazos:",a),t([])})}catch(n){return console.error("Error al crear la suscripción de reemplazos:",n),()=>{}}},g5e=e=>{try{const t=$t(wt(ht,f5e),Qr("profile","==",Jt.PROFESORADO));return pr(t,n=>{const a=n.docs.map(A5e);e(a)},n=>{console.error("Error al obtener la lista de profesores:",n),e([])})}catch(t){return console.error("Error al crear la suscripción de profesores:",t),()=>{}}},x5e=async e=>{try{const t=$t(wt(ht,qE),Qr("userId","==",e)),n=(await Hn(t)).docs.map(UL),a=n.length,s=n.filter(o=>o.resultado==="Hora realizada").length,i=n.filter(o=>o.resultado==="Hora cubierta, no realizada").length;return{totalReemplazos:a,horasRealizadas:s,horasCubiertas:i,porcentajeRealizadas:a>0?s/a*100:0}}catch(t){throw console.error("Error al obtener estadísticas:",t),new Error("No se pudieron obtener las estadísticas")}},v5e=async(e,t)=>{try{if(!t.trim())return[];const r=$t(wt(ht,qE),Qr("userId","==",e),xr("diaAusencia","desc"),tf(100)),a=(await Hn(r)).docs.map(UL),s=t.toLowerCase();return a.filter(i=>i.docenteAusente.toLowerCase().includes(s)||i.docenteReemplazante.toLowerCase().includes(s)||i.curso.toLowerCase().includes(s)||i.diaAusencia.includes(s)||i.asignaturaAusente.toLowerCase().includes(s)||i.asignaturaReemplazante.toLowerCase().includes(s))}catch(r){return console.error("Error en búsqueda de reemplazos:",r),[]}},b5e=Array.from({length:12},(e,t)=>t+1),fz={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},y5e=e=>{const[t,r]=S.useState([]),[n,a]=S.useState(!0),[s,i]=S.useState(null);S.useEffect(()=>e?p5e(e,f=>{r(f),a(!1)}):void 0,[e]);const o=S.useCallback(async d=>{try{return i(null),await h5e(d,e)}catch(f){throw i(f instanceof Error?f.message:"Error al guardar"),f}},[e]),c=S.useCallback(async d=>{try{i(null),await m5e(d,e)}catch(f){throw i(f instanceof Error?f.message:"Error al eliminar"),f}},[e]),u=S.useCallback(async d=>{try{return i(null),d.trim()?await v5e(e,d):t}catch(f){return i(f instanceof Error?f.message:"Error en la búsqueda"),[]}},[e,t]);return{reemplazos:t,loading:n,error:s,save:o,remove:c,search:u}},w5e=()=>{const[e,t]=S.useState([]),[r,n]=S.useState(!0);S.useEffect(()=>g5e(i=>{t(i),n(!1)}),[]);const a=S.useMemo(()=>e.map(s=>s.nombreCompleto).sort(),[e]);return{profesores:e,profesorNames:a,loading:r}},fv=({label:e,icon:t,children:r})=>l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:e}),l.jsxs("div",{className:"relative",children:[t&&l.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:t}),r]})]}),E5e="inline-flex items-center justify-center rounded-xl border text-sm px-3 py-2 transition-all",C5e="bg-emerald-50 border-emerald-200 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-200 dark:border-emerald-700",_5e="bg-white border-slate-200 text-slate-600 hover:bg-slate-50 dark:bg-slate-800 dark:text-slate-300 dark:border-slate-700 dark:hover:bg-slate-700",Z0=({title:e,value:t,icon:r})=>l.jsxs("div",{className:"flex items-center gap-4 rounded-xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[l.jsx("div",{className:"grid place-items-center h-12 w-12 rounded-xl bg-gradient-to-br from-slate-100 to-slate-200 text-slate-700 dark:from-slate-700 dark:to-slate-600 dark:text-slate-200",children:r}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:e}),l.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:t})]})]}),S5e=({data:e})=>{const t=Math.max(1,...e.map(r=>r.value));return l.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[l.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Distribución (graficable)"}),l.jsx("div",{className:"grid gap-3",children:e.map(r=>l.jsxs("div",{children:[l.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[l.jsx("span",{children:r.label}),l.jsx("span",{children:r.value})]}),l.jsx("div",{className:"h-2 w-full rounded bg-slate-200/60 dark:bg-slate-700",children:l.jsx("div",{className:"h-2 rounded bg-slate-900 dark:bg-amber-500",style:{width:`${r.value/t*100}%`}})})]},r.label))})]})},N5e=({data:e})=>{const t=Math.max(1,...e.map(n=>n.value)),r=["from-indigo-500 to-sky-500","from-emerald-500 to-lime-500","from-amber-500 to-orange-600","from-fuchsia-500 to-pink-500","from-cyan-500 to-teal-500","from-rose-500 to-red-500","from-violet-500 to-purple-500"];return l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[l.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[l.jsx(Wd,{className:"h-5 w-5 text-slate-400"}),l.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Reemplazos / Inasistencias por curso (mes actual)"})]}),e.length===0?l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No hay registros este mes."}):l.jsx("div",{className:"grid gap-3",children:e.map((n,a)=>l.jsxs("div",{className:"w-full",children:[l.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[l.jsx("span",{className:"font-medium",children:n.label}),l.jsx("span",{children:n.value})]}),l.jsx("div",{className:"h-3 w-full rounded-lg bg-slate-100 dark:bg-slate-700",children:l.jsx("div",{className:`h-3 rounded-lg bg-gradient-to-r ${r[a%r.length]}`,style:{width:`${n.value/t*100}%`}})})]},n.label))})]})},k5e=({userId:e,reemplazos:t})=>{const[r,n]=S.useState(null),[a,s]=S.useState(!1),i=S.useCallback(async()=>{try{s(!0);const v=await x5e(e);n(v)}finally{s(!1)}},[e]);S.useEffect(()=>{e&&i()},[e,i]);const o=new Date,c=o.getMonth(),u=o.getFullYear(),d=S.useMemo(()=>(t||[]).filter(v=>{const y=new Date(v.diaAusencia+"T00:00:00");return y.getMonth()===c&&y.getFullYear()===u}),[t,c,u]),f=new Set(d.map(v=>v.docenteAusente).filter(Boolean)),h=new Set(d.map(v=>v.docenteReemplazante).filter(Boolean)),m=new Set(d.map(v=>v.curso).filter(Boolean)),g=new Set(d.map(v=>v.asignaturaAusente).filter(Boolean)),x=[{label:"Prof. ausentes",value:f.size},{label:"Prof. que reemplazan",value:h.size},{label:"Cursos",value:m.size},{label:"Asignaturas ausentes",value:g.size}];return a||!r?l.jsx("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:l.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-500",children:[l.jsx(Cm,{className:"h-5 w-5 animate-spin"}),"Cargando estadísticas…"]})}):l.jsxs("div",{className:"grid gap-4",children:[l.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[l.jsx(Z0,{title:"Total",value:r.totalReemplazos,icon:l.jsx(zEe,{className:"h-6 w-6"})}),l.jsx(Z0,{title:"Realizadas",value:r.horasRealizadas,icon:l.jsx(io,{className:"h-6 w-6"})}),l.jsx(Z0,{title:"Cubiertas",value:r.horasCubiertas,icon:l.jsx(vCe,{className:"h-6 w-6"})}),l.jsx(Z0,{title:"Efectividad",value:`${r.porcentajeRealizadas.toFixed(1)}%`,icon:l.jsx(x_e,{className:"h-6 w-6"})})]}),l.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[l.jsx(Z0,{title:"Profesores ausentes",value:f.size,icon:l.jsx(K_e,{className:"h-6 w-6"})}),l.jsx(Z0,{title:"Profesores que reemplazan",value:h.size,icon:l.jsx(W_e,{className:"h-6 w-6"})}),l.jsx(Z0,{title:"Cursos (únicos)",value:m.size,icon:l.jsx(hc,{className:"h-6 w-6"})}),l.jsx(Z0,{title:"Asignaturas ausentes",value:g.size,icon:l.jsx(df,{className:"h-6 w-6"})})]}),l.jsx(S5e,{data:x})]})},B5e=({currentUser:e})=>{const t=e.email||e.id||"",{reemplazos:r,save:n,remove:a,search:s,loading:i,error:o}=y5e(t),{profesorNames:c,loading:u}=w5e(),[d,f]=S.useState(fz),[h,m]=S.useState(""),[g,x]=S.useState([]),[v,y]=S.useState(null),[w,_]=S.useState(!1),[T,B]=S.useState(!1);S.useEffect(()=>{(async()=>{if(!h.trim())return x(r);B(!0);try{const z=await s(h);x(z)}finally{B(!1)}})()},[r,h,s]);const j=S.useCallback(G=>{const{name:z,value:K}=G.target;f(J=>({...J,[z]:K}))},[]),E=S.useCallback(G=>{f(z=>{const J=z.bloquesAfectados.includes(G)?z.bloquesAfectados.filter(te=>te!==G):[...z.bloquesAfectados,G].sort((te,M)=>te-M);return{...z,bloquesAfectados:J}})},[]),N=S.useCallback(async G=>{G.preventDefault(),y(null),_(!0);const{docenteAusente:z,asignaturaAusente:K,curso:J,diaAusencia:te,bloquesAfectados:M,docenteReemplazante:H,asignaturaReemplazante:Y}=d;if(!z||!K||!J||!te||!H||!Y||M.length===0){y("Todos los campos son obligatorios y debe seleccionar al menos un bloque."),_(!1);return}if(z===H){y("El docente ausente y el reemplazante no pueden ser la misma persona."),_(!1);return}try{const Z=K.trim().toLowerCase()===Y.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",ae={...d,resultado:Z};await n(ae),f(fz);const le=document.createElement("div");le.className="fixed top-4 right-4 z-50 rounded-lg bg-emerald-600 px-4 py-2 text-white shadow-lg",le.textContent=Z==="Hora realizada"?"✅ Reemplazo registrado — Hora realizada":"⚠️ Reemplazo registrado — Hora cubierta, no realizada",document.body.appendChild(le),setTimeout(()=>{document.body.contains(le)&&document.body.removeChild(le)},2500)}catch(Z){console.error(Z),y("Error al guardar el reemplazo. Intente nuevamente.")}finally{_(!1)}},[d,n]),I=S.useCallback(async G=>{if(window.confirm("¿Eliminar este registro?"))try{await a(G)}catch(z){console.error(z),alert("No se pudo eliminar. Intente nuevamente.")}},[a]),L="w-full rounded-lg border bg-white px-10 py-2.5 text-slate-700 placeholder-slate-400 shadow-sm outline-none transition focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100";if(!e||!e.email&&!e.id)return l.jsx("div",{className:"grid place-items-center rounded-xl border border-slate-200 bg-white p-8 text-center shadow-sm dark:border-slate-700 dark:bg-slate-800",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Error: Usuario no autenticado."})});const D=new Date,k=D.getMonth(),P=D.getFullYear(),R=S.useMemo(()=>(r||[]).filter(G=>{if(!G.diaAusencia)return!1;const z=new Date(G.diaAusencia+"T00:00:00");return z.getMonth()===k&&z.getFullYear()===P}),[r,k,P]),W=S.useMemo(()=>{const G={};for(const z of R){const K=z.curso||"Sin curso";G[K]=(G[K]||0)+1}return G},[R]),V=S.useMemo(()=>Object.entries(W).sort(([G],[z])=>G.localeCompare(z,"es")).map(([G,z])=>({label:G,value:z})),[W]);return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"mb-1 text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Estadísticas del Mes"}),l.jsx(k5e,{userId:t,reemplazos:r})]}),l.jsx(N5e,{data:V}),l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Registro de Inasistencias y Reemplazos"}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Complete el formulario para registrar una nueva suplencia."})]}),u?l.jsxs("div",{className:"flex items-center justify-center gap-2 py-8 text-slate-500",children:[l.jsx(Cm,{className:"h-5 w-5 animate-spin"})," Cargando profesores…"]}):l.jsxs("form",{onSubmit:N,className:"space-y-8",children:[l.jsxs("div",{className:"grid gap-8 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(hc,{className:"h-5 w-5 text-slate-400"}),l.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Ausente"})]}),l.jsx(fv,{label:"Nombre",icon:l.jsx(Yg,{className:"h-5 w-5"}),children:l.jsxs("select",{name:"docenteAusente",value:d.docenteAusente,onChange:j,className:L,required:!0,disabled:w,children:[l.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(G=>l.jsx("option",{value:G,children:G},G))]})}),l.jsx(fv,{label:"Asignatura",icon:l.jsx(df,{className:"h-5 w-5"}),children:l.jsxs("select",{name:"asignaturaAusente",value:d.asignaturaAusente,onChange:j,className:L,required:!0,disabled:w,children:[l.jsx("option",{value:"",children:"Seleccione una asignatura"}),jo.map(G=>l.jsx("option",{value:G,children:G},G))]})}),l.jsx(fv,{label:"Curso",icon:l.jsx(hc,{className:"h-5 w-5"}),children:l.jsxs("select",{name:"curso",value:d.curso,onChange:j,className:L,required:!0,disabled:w,children:[l.jsx("option",{value:"",children:"Seleccione un curso"}),Ac.map(G=>l.jsx("option",{value:G,children:G},G))]})}),l.jsx(fv,{label:"Día de ausencia",icon:l.jsx(id,{className:"h-5 w-5"}),children:l.jsx("input",{type:"date",name:"diaAusencia",value:d.diaAusencia,onChange:j,className:L,required:!0,disabled:w})}),l.jsxs("div",{children:[l.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[l.jsx(Em,{className:"h-5 w-5 text-slate-400"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Bloques afectados"})]}),l.jsx("div",{className:"grid grid-cols-4 gap-2 sm:grid-cols-6",children:b5e.map(G=>{const z=d.bloquesAfectados.includes(G);return l.jsx("button",{type:"button",onClick:()=>E(G),disabled:w,className:`${E5e} ${z?C5e:_5e}`,"aria-pressed":z,children:G},G)})})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(hc,{className:"h-5 w-5 text-slate-400"}),l.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Reemplazante"})]}),l.jsx(fv,{label:"Nombre",icon:l.jsx(Yg,{className:"h-5 w-5"}),children:l.jsxs("select",{name:"docenteReemplazante",value:d.docenteReemplazante,onChange:j,className:L,required:!0,disabled:w,children:[l.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(G=>l.jsx("option",{value:G,children:G},G))]})}),l.jsx(fv,{label:"Asignatura",icon:l.jsx(df,{className:"h-5 w-5"}),children:l.jsxs("select",{name:"asignaturaReemplazante",value:d.asignaturaReemplazante,onChange:j,className:L,required:!0,disabled:w,children:[l.jsx("option",{value:"",children:"Seleccione una asignatura"}),jo.map(G=>l.jsx("option",{value:G,children:G},G))]})}),d.asignaturaAusente&&d.asignaturaReemplazante&&l.jsxs("div",{className:"mt-4 rounded-xl border-2 border-dashed border-slate-200 p-4 dark:border-slate-700",children:[l.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Vista previa del resultado"}),l.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[l.jsx(io,{className:"h-4 w-4"}),d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Hora realizada":"Hora cubierta, no realizada"]}),l.jsx("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Las asignaturas coinciden.":"Las asignaturas no coinciden."})]})]})]}),(v||o)&&l.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4 text-red-700 dark:border-red-800 dark:bg-red-900/20 dark:text-red-300",children:v||o}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{type:"submit",disabled:w||u,className:"inline-flex items-center gap-2 rounded-xl bg-slate-900 px-5 py-2.5 font-semibold text-white shadow hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:w?l.jsxs(l.Fragment,{children:[l.jsx(Cm,{className:"h-4 w-4 animate-spin"})," Registrando…"]}):l.jsxs(l.Fragment,{children:[l.jsx(qh,{className:"h-4 w-4"})," Registrar Reemplazo"]})})})]})]}),l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[l.jsxs("div",{className:"mb-4 flex items-center justify-between gap-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Historial de Reemplazos"}),l.jsxs("div",{className:"relative w-full max-w-md",children:[l.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:T?l.jsx(Cm,{className:"h-5 w-5 animate-spin"}):l.jsx(Zk,{className:"h-5 w-5"})}),l.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)…",value:h,onChange:G=>m(G.target.value),className:L,disabled:T})]})]}),i?l.jsxs("div",{className:"flex items-center justify-center gap-2 py-10 text-slate-500",children:[l.jsx(Cm,{className:"h-5 w-5 animate-spin"})," Cargando reemplazos…"]}):l.jsxs("div",{className:"overflow-x-auto",children:[l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:l.jsx("tr",{children:["Fecha","Curso","Docente Ausente","Docente Reemplazante","Bloques","Resultado","Acciones"].map(G=>l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-500 dark:text-slate-400",children:G},G))})}),l.jsx("tbody",{className:"divide-y divide-slate-200 bg-white dark:divide-slate-700 dark:bg-slate-800",children:g.length>0?g.map(G=>l.jsxs("tr",{className:"transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/40",children:[l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-200",children:new Date(G.diaAusencia+"T12:00:00").toLocaleDateString("es-CL")}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:G.curso}),l.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[G.docenteAusente,l.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:G.asignaturaAusente})]}),l.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[G.docenteReemplazante,l.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:G.asignaturaReemplazante})]}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:G.bloquesAfectados.join(", ")}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:l.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${G.resultado==="Hora realizada"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[l.jsx(io,{className:"h-4 w-4"}),G.resultado]})}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:l.jsx("button",{onClick:()=>I(G.id),title:"Eliminar registro",className:"rounded-full p-2 text-red-600 hover:bg-red-50 hover:text-red-700 dark:text-red-300 dark:hover:bg-red-900/30",disabled:w,children:l.jsx(Do,{className:"h-4 w-4"})})})]},G.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:h?"No se encontraron resultados para tu búsqueda.":"Aún no hay registros."})})})]}),g.length>0&&!h&&l.jsxs("div",{className:"mt-4 text-center text-sm text-slate-500 dark:text-slate-400",children:["Mostrando los últimos ",g.length," registros"]})]})]})]})},T5e=e=>{console.log("🔄 Iniciando suscripción a todos los reemplazos...");try{const t=wt(Fr,"reemplazos"),r=$t(t,xr("fecha","desc"));return pr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Reemplazos cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar reemplazos:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a reemplazos:",t),t}},j5e=e=>{console.log("🔄 Iniciando suscripción a todos los acompañamientos...");try{const t=wt(Fr,"acompanamientos"),r=$t(t,xr("fecha","desc"));return pr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Acompañamientos cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar acompañamientos:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a acompañamientos:",t),t}},I5e=e=>{console.log("🔄 Iniciando suscripción a todos los eventos del calendario...");try{const t=wt(Fr,"calendar_events"),r=$t(t,xr("date","asc"));return pr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Eventos del calendario cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar eventos del calendario:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a eventos del calendario:",t),t}},Wf=({title:e,value:t,description:r,isLoading:n=!1})=>l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),n?l.jsxs("div",{className:"flex items-center mt-2",children:[l.jsx("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:t}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]})]}),Xp=({title:e,data:t,colorClass:r,valueFormatter:n=s=>String(s),isLoading:a=!1})=>{const s=S.useMemo(()=>t.map(o=>typeof o.value=="number"?o.value:parseFloat(String(o.value))||0),[t]),i=S.useMemo(()=>Math.max(...s,1),[s]);return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),a?l.jsxs("div",{className:"flex justify-center items-center py-8",children:[l.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando datos..."})]}):l.jsx("div",{className:"space-y-4",children:t.length>0?t.sort((o,c)=>(typeof c.value=="number"?c.value:0)-(typeof o.value=="number"?o.value:0)).map((o,c)=>{const u=typeof o.value=="number"?o.value:parseFloat(String(o.value))||0;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:o.label}),l.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:n(o.value)})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:l.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${u/i*100}%`}})})]},o.label+c)}):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},F5e=()=>{const[e,t]=S.useState([]),[r,n]=S.useState([]),[a,s]=S.useState([]),[i,o]=S.useState(!0),[c,u]=S.useState(null);return S.useEffect(()=>{console.log("🔄 Iniciando carga de datos del dashboard...");let d=0;const f=3,h=()=>{d++,d>=f&&(o(!1),console.log("✅ Todos los datos del dashboard cargados"))};try{const m=T5e(v=>{t(v),h()}),g=j5e(v=>{n(v),h()}),x=I5e(v=>{s(v),h()});return()=>{m(),g(),x()}}catch(m){console.error("❌ Error al configurar suscripciones del dashboard:",m),u(m instanceof Error?m.message:"Error al cargar datos del dashboard"),o(!1)}},[]),{registros:e,acompanamientos:r,calendarEvents:a,loading:i,error:c}},O5e=({currentUser:e})=>{var f,h;console.log("=== DASHBOARD SUBDIRECCION DEBUG ==="),console.log("🔍 Dashboard - currentUser completo:",e),console.log("🔍 Dashboard - currentUser.profile:",e==null?void 0:e.profile),console.log("🔍 Dashboard - Verificación de perfil:",(e==null?void 0:e.profile)==="SUBDIRECCION"),console.log("🔍 Dashboard - Typeof profile:",typeof(e==null?void 0:e.profile)),console.log("🔍 Dashboard - Profile length:",(f=e==null?void 0:e.profile)==null?void 0:f.length),console.log("🔍 Dashboard - Profile con comillas:",`"${e==null?void 0:e.profile}"`),console.log("🔍 Dashboard - Comparación con trim:",((h=e==null?void 0:e.profile)==null?void 0:h.trim())==="SUBDIRECCION"),console.log("=====================================");const{registros:t,acompanamientos:r,calendarEvents:n,loading:a,error:s}=F5e(),[i,o]=S.useState(a2);if(console.log("🔍 Dashboard - Datos recibidos:",{registros:t.length,acompanamientos:r.length,calendarEvents:n.length,loading:a,error:s,currentUser:e==null?void 0:e.profile}),S.useEffect(()=>{try{const m=localStorage.getItem("acompanamientoDocenteCustomRubrica");o(m?JSON.parse(m):a2)}catch(m){console.error("Error al leer rúbrica personalizada",m),o(a2)}},[]),console.log("🔍 Dashboard - Verificando permisos..."),console.log("🔍 Dashboard - currentUser existe:",!!e),console.log("🔍 Dashboard - profile value:",`"${e==null?void 0:e.profile}"`),console.log("🔍 Dashboard - comparación exacta:",(e==null?void 0:e.profile)==="SUBDIRECCION"),!e)return console.log("❌ Dashboard - currentUser es null/undefined"),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando usuario..."}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Esperando datos del usuario autenticado..."})]});if(e.profile!=="SUBDIRECCION")return console.log("❌ Dashboard - Perfil no autorizado:",e.profile),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("span",{className:"text-6xl mb-4",children:"🚫"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acceso Restringido"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Este dashboard está disponible solo para usuarios con perfil de Subdirección."}),l.jsxs("div",{className:"mt-4 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs text-slate-600 dark:text-slate-400",children:[l.jsx("p",{children:l.jsx("strong",{children:"Debug Info:"})}),l.jsxs("p",{children:['Su perfil actual: "',e.profile,'"']}),l.jsx("p",{children:'Perfil requerido: "SUBDIRECCION"'}),l.jsxs("p",{children:["Usuario: ",e.email||e.nombreCompleto]})]})]});if(console.log("✅ Dashboard - Permisos verificados correctamente"),s)return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("span",{className:"text-6xl mb-4",children:"⚠️"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error al Cargar Datos"}),l.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg max-w-md mb-4",children:s}),l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Recargar Página"})]});const c=S.useMemo(()=>{const m=t.length;if(m===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const g=t.filter(B=>B.resultado==="Hora realizada").length,x=m-g,v=`${(g/m*100).toFixed(1)}%`,y=(B,j)=>B.reduce((E,N)=>{const I=N[j];return typeof I=="string"&&(E[I]=(E[I]||0)+1),E},{}),w=y(t,"docenteAusente"),_=y(t,"docenteReemplazante"),T=y(t,"curso");return{totalInasistencias:m,horasRealizadas:g,horasCubiertas:x,tasaCobertura:v,inasistenciasPorDocente:Object.entries(w).map(([B,j])=>({label:B,value:j})),reemplazosPorDocente:Object.entries(_).map(([B,j])=>({label:B,value:j})),inasistenciasPorCurso:Object.entries(T).map(([B,j])=>({label:B,value:j})),distribucionResultados:[{label:"Hora Realizada",value:g},{label:"Hora Cubierta",value:x}]}},[t]),u=S.useMemo(()=>{const m=r.length;if(m===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const g=new Map;i.forEach(j=>{j.criteria.forEach(E=>{g.set(E.name,j.domain)})});let x=0,v=0;const y={},w={};r.forEach(j=>{y[j.docente]||(y[j.docente]={total:0,count:0}),Object.entries(j.rubricaResultados).forEach(([E,N])=>{x+=N,v++,y[j.docente].total+=N,y[j.docente].count++;const I=g.get(E);I&&(w[I]||(w[I]={total:0,count:0}),w[I].total+=N,w[I].count++)})});const _=v>0?(x/v).toFixed(2):"N/A",T=Object.entries(y).map(([j,E])=>({label:j,value:E.count>0?(E.total/E.count).toFixed(2):0})),B=Object.entries(w).map(([j,E])=>({label:j,value:E.count>0?(E.total/E.count).toFixed(2):0}));return{totalAcompanamientos:m,promedioGeneral:_,desempenoPorDocente:T,desempenoPorDominio:B}},[r,i]),d=S.useMemo(()=>{const m={[An.EVALUACION]:0,[An.ACTO]:0,[An.ACTIVIDAD_FOCALIZADA]:0,[An.SALIDA_PEDAGOGICA]:0};for(const x of n)m.hasOwnProperty(x.type)&&m[x.type]++;const g=Object.entries(m).map(([x,v])=>({label:x1[x].label,value:v}));return{totalEvaluaciones:m[An.EVALUACION],totalActos:m[An.ACTO],totalActividadesFocalizadas:m[An.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:m[An.SALIDA_PEDAGOGICA],distribucionEventos:g}},[n]);return a?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando Dashboard"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Obteniendo datos desde la base de datos..."})]}):c.totalInasistencias===0&&u.totalAcompanamientos===0&&n.length===0?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("span",{className:"text-6xl mb-4",children:"📊"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdirección"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Aún no hay datos para mostrar. Comience por añadir registros en los módulos correspondientes."}),l.jsxs("div",{className:"text-sm text-slate-400 dark:text-slate-500",children:[l.jsx("p",{children:"• Módulo de Inasistencias y Reemplazos"}),l.jsx("p",{children:"• Módulo de Acompañamiento Docente"}),l.jsx("p",{children:"• Calendario Académico"})]})]}):l.jsxs("div",{className:"space-y-12 animate-fade-in",children:[l.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 text-white p-6 rounded-xl shadow-lg",children:[l.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Subdirección"}),l.jsx("p",{className:"text-amber-100",children:"Vista consolidada de datos institucionales"}),l.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["Última actualización: ",new Date().toLocaleString("es-CL")]})]}),t.length>0&&l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📋 Dashboard de Inasistencias y Reemplazos"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(Wf,{title:"Total Inasistencias",value:c.totalInasistencias,description:"Registros totales",isLoading:a}),l.jsx(Wf,{title:"Horas Realizadas",value:c.horasRealizadas,description:"Reemplazo con misma asignatura",isLoading:a}),l.jsx(Wf,{title:"Horas Cubiertas",value:c.horasCubiertas,description:"Reemplazo con otra asignatura",isLoading:a}),l.jsx(Wf,{title:"Tasa de Cobertura Efectiva",value:c.tasaCobertura,description:"% de horas realizadas",isLoading:a})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsx(Xp,{title:"Inasistencias por Docente",data:c.inasistenciasPorDocente,colorClass:"bg-red-400",isLoading:a}),l.jsx(Xp,{title:"Reemplazos por Docente",data:c.reemplazosPorDocente,colorClass:"bg-sky-400",isLoading:a}),l.jsx(Xp,{title:"Inasistencias por Curso",data:c.inasistenciasPorCurso,colorClass:"bg-amber-400",isLoading:a}),l.jsx(Xp,{title:"Distribución de Resultados",data:c.distribucionResultados,colorClass:"bg-green-400",isLoading:a})]})]}),r.length>0&&l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"👥 Dashboard de Acompañamiento Docente"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(Wf,{title:"Total Acompañamientos",value:u.totalAcompanamientos,description:"Registros realizados",isLoading:a}),l.jsx(Wf,{title:"Promedio General",value:u.promedioGeneral,description:"Calificación promedio (1-4)",isLoading:a})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsx(Xp,{title:"Desempeño Promedio por Docente",data:u.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:m=>Number(m).toFixed(2),isLoading:a}),l.jsx(Xp,{title:"Desempeño Promedio por Dominio",data:u.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:m=>Number(m).toFixed(2),isLoading:a})]})]}),n.length>0&&l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📅 Resumen del Calendario Académico"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(Wf,{title:"Evaluaciones",value:d.totalEvaluaciones,description:"Eventos registrados",isLoading:a}),l.jsx(Wf,{title:"Actos",value:d.totalActos,description:"Eventos registrados",isLoading:a}),l.jsx(Wf,{title:"Act. Focalizadas",value:d.totalActividadesFocalizadas,description:"Eventos registrados",isLoading:a}),l.jsx(Wf,{title:"Salidas Pedagógicas",value:d.totalSalidasPedagogicas,description:"Eventos registrados",isLoading:a})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsx(Xp,{title:"Distribución de Eventos del Calendario",data:d.distribucionEventos,colorClass:"bg-violet-400",isLoading:a}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Próximos Eventos"}),a?l.jsxs("div",{className:"flex justify-center items-center py-8",children:[l.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando eventos..."})]}):l.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[n.filter(m=>new Date(m.date)>=new Date).slice(0,5).map((m,g)=>{var x,v;return l.jsx("div",{className:"p-3 border dark:border-slate-600 rounded-md",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:m.responsables||"Evento sin título"}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(m.date).toLocaleDateString("es-CL")}),m.ubicacion&&l.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["📍 ",m.ubicacion]})]}),l.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${((x=x1[m.type])==null?void 0:x.color)||"bg-gray-100 text-gray-800"}`,children:((v=x1[m.type])==null?void 0:v.label)||m.type})]})},m.id||g)}),n.filter(m=>new Date(m.date)>=new Date).length===0&&l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay eventos próximos programados"})]})]})]})]}),l.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"📈 Resumen Ejecutivo"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:t.length+r.length+n.length}),l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Total de registros en el sistema"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:new Set([...t.map(m=>m.docenteAusente),...r.map(m=>m.docente)]).size}),l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Docentes con registros"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[Math.round(t.filter(m=>m.resultado==="Hora realizada").length/Math.max(t.length,1)*100),"%"]}),l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Efectividad en cobertura"})]})]})]}),l.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-6",children:[l.jsx("p",{children:"Dashboard de Subdirección - Sistema de Gestión Pedagógica"}),l.jsx("p",{children:"Los datos se actualizan en tiempo real desde la base de datos"})]})]})},Q2={black:"#000",white:"#fff"},Av={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},hv={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},mv={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},pv={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},gv={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},Xy={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},D5e={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function Jg(e,...t){const r=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(n=>r.searchParams.append("args[]",n)),`Minified MUI error #${e}; visit ${r} for the full message.`}const QL="$$material";function jN(){return jN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jN.apply(null,arguments)}function P5e(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function R5e(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var L5e=function(){function e(r){var n=this;this._insertTag=function(a){var s;n.tags.length===0?n.insertionPoint?s=n.insertionPoint.nextSibling:n.prepend?s=n.container.firstChild:s=n.before:s=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(a,s),n.tags.push(a)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(R5e(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var s=P5e(a);try{s.insertRule(n,s.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){var a;return(a=n.parentNode)==null?void 0:a.removeChild(n)}),this.tags=[],this.ctr=0},e}(),el="-ms-",IN="-moz-",ea="-webkit-",Dne="comm",HL="rule",VL="decl",M5e="@import",Pne="@keyframes",U5e="@layer",Q5e=Math.abs,eB=String.fromCharCode,H5e=Object.assign;function V5e(e,t){return ko(e,0)^45?(((t<<2^ko(e,0))<<2^ko(e,1))<<2^ko(e,2))<<2^ko(e,3):0}function Rne(e){return e.trim()}function z5e(e,t){return(e=t.exec(e))?e[0]:e}function ra(e,t,r){return e.replace(t,r)}function UO(e,t){return e.indexOf(t)}function ko(e,t){return e.charCodeAt(t)|0}function H2(e,t,r){return e.slice(t,r)}function iA(e){return e.length}function zL(e){return e.length}function K_(e,t){return t.push(e),e}function $5e(e,t){return e.map(t).join("")}var tB=1,q1=1,Lne=0,gc=0,yi=0,Rb="";function rB(e,t,r,n,a,s,i){return{value:e,root:t,parent:r,type:n,props:a,children:s,line:tB,column:q1,length:i,return:""}}function Yy(e,t){return H5e(rB("",null,null,"",null,null,0),e,{length:-e.length},t)}function G5e(){return yi}function K5e(){return yi=gc>0?ko(Rb,--gc):0,q1--,yi===10&&(q1=1,tB--),yi}function tu(){return yi=gc<Lne?ko(Rb,gc++):0,q1++,yi===10&&(q1=1,tB++),yi}function _A(){return ko(Rb,gc)}function yS(){return gc}function WE(e,t){return H2(Rb,e,t)}function V2(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Mne(e){return tB=q1=1,Lne=iA(Rb=e),gc=0,[]}function Une(e){return Rb="",e}function wS(e){return Rne(WE(gc-1,QO(e===91?e+2:e===40?e+1:e)))}function q5e(e){for(;(yi=_A())&&yi<33;)tu();return V2(e)>2||V2(yi)>3?"":" "}function W5e(e,t){for(;--t&&tu()&&!(yi<48||yi>102||yi>57&&yi<65||yi>70&&yi<97););return WE(e,yS()+(t<6&&_A()==32&&tu()==32))}function QO(e){for(;tu();)switch(yi){case e:return gc;case 34:case 39:e!==34&&e!==39&&QO(yi);break;case 40:e===41&&QO(e);break;case 92:tu();break}return gc}function X5e(e,t){for(;tu()&&e+yi!==57;)if(e+yi===84&&_A()===47)break;return"/*"+WE(t,gc-1)+"*"+eB(e===47?e:tu())}function Y5e(e){for(;!V2(_A());)tu();return WE(e,gc)}function J5e(e){return Une(ES("",null,null,null,[""],e=Mne(e),0,[0],e))}function ES(e,t,r,n,a,s,i,o,c){for(var u=0,d=0,f=i,h=0,m=0,g=0,x=1,v=1,y=1,w=0,_="",T=a,B=s,j=n,E=_;v;)switch(g=w,w=tu()){case 40:if(g!=108&&ko(E,f-1)==58){UO(E+=ra(wS(w),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:E+=wS(w);break;case 9:case 10:case 13:case 32:E+=q5e(g);break;case 92:E+=W5e(yS()-1,7);continue;case 47:switch(_A()){case 42:case 47:K_(Z5e(X5e(tu(),yS()),t,r),c);break;default:E+="/"}break;case 123*x:o[u++]=iA(E)*y;case 125*x:case 59:case 0:switch(w){case 0:case 125:v=0;case 59+d:y==-1&&(E=ra(E,/\f/g,"")),m>0&&iA(E)-f&&K_(m>32?hz(E+";",n,r,f-1):hz(ra(E," ","")+";",n,r,f-2),c);break;case 59:E+=";";default:if(K_(j=Az(E,t,r,u,d,a,o,_,T=[],B=[],f),s),w===123)if(d===0)ES(E,t,j,j,T,s,f,o,B);else switch(h===99&&ko(E,3)===110?100:h){case 100:case 108:case 109:case 115:ES(e,j,j,n&&K_(Az(e,j,j,0,0,a,o,_,a,T=[],f),B),a,B,f,o,n?T:B);break;default:ES(E,j,j,j,[""],B,0,o,B)}}u=d=m=0,x=y=1,_=E="",f=i;break;case 58:f=1+iA(E),m=g;default:if(x<1){if(w==123)--x;else if(w==125&&x++==0&&K5e()==125)continue}switch(E+=eB(w),w*x){case 38:y=d>0?1:(E+="\f",-1);break;case 44:o[u++]=(iA(E)-1)*y,y=1;break;case 64:_A()===45&&(E+=wS(tu())),h=_A(),d=f=iA(_=E+=Y5e(yS())),w++;break;case 45:g===45&&iA(E)==2&&(x=0)}}return s}function Az(e,t,r,n,a,s,i,o,c,u,d){for(var f=a-1,h=a===0?s:[""],m=zL(h),g=0,x=0,v=0;g<n;++g)for(var y=0,w=H2(e,f+1,f=Q5e(x=i[g])),_=e;y<m;++y)(_=Rne(x>0?h[y]+" "+w:ra(w,/&\f/g,h[y])))&&(c[v++]=_);return rB(e,t,r,a===0?HL:o,c,u,d)}function Z5e(e,t,r){return rB(e,t,r,Dne,eB(G5e()),H2(e,2,-2),0)}function hz(e,t,r,n){return rB(e,t,r,VL,H2(e,0,n),H2(e,n+1,-1),n)}function v1(e,t){for(var r="",n=zL(e),a=0;a<n;a++)r+=t(e[a],a,e,t)||"";return r}function eSe(e,t,r,n){switch(e.type){case U5e:if(e.children.length)break;case M5e:case VL:return e.return=e.return||e.value;case Dne:return"";case Pne:return e.return=e.value+"{"+v1(e.children,n)+"}";case HL:e.value=e.props.join(",")}return iA(r=v1(e.children,n))?e.return=e.value+"{"+r+"}":""}function tSe(e){var t=zL(e);return function(r,n,a,s){for(var i="",o=0;o<t;o++)i+=e[o](r,n,a,s)||"";return i}}function rSe(e){return function(t){t.root||(t=t.return)&&e(t)}}function Qne(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var nSe=function(t,r,n){for(var a=0,s=0;a=s,s=_A(),a===38&&s===12&&(r[n]=1),!V2(s);)tu();return WE(t,gc)},aSe=function(t,r){var n=-1,a=44;do switch(V2(a)){case 0:a===38&&_A()===12&&(r[n]=1),t[n]+=nSe(gc-1,r,n);break;case 2:t[n]+=wS(a);break;case 4:if(a===44){t[++n]=_A()===58?"&\f":"",r[n]=t[n].length;break}default:t[n]+=eB(a)}while(a=tu());return t},sSe=function(t,r){return Une(aSe(Mne(t),r))},mz=new WeakMap,iSe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,n=t.parent,a=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!mz.get(n))&&!a){mz.set(t,!0);for(var s=[],i=sSe(r,s),o=n.props,c=0,u=0;c<i.length;c++)for(var d=0;d<o.length;d++,u++)t.props[u]=s[c]?i[c].replace(/&\f/g,o[d]):o[d]+" "+i[c]}}},oSe=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function Hne(e,t){switch(V5e(e,t)){case 5103:return ea+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ea+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return ea+e+IN+e+el+e+e;case 6828:case 4268:return ea+e+el+e+e;case 6165:return ea+e+el+"flex-"+e+e;case 5187:return ea+e+ra(e,/(\w+).+(:[^]+)/,ea+"box-$1$2"+el+"flex-$1$2")+e;case 5443:return ea+e+el+"flex-item-"+ra(e,/flex-|-self/,"")+e;case 4675:return ea+e+el+"flex-line-pack"+ra(e,/align-content|flex-|-self/,"")+e;case 5548:return ea+e+el+ra(e,"shrink","negative")+e;case 5292:return ea+e+el+ra(e,"basis","preferred-size")+e;case 6060:return ea+"box-"+ra(e,"-grow","")+ea+e+el+ra(e,"grow","positive")+e;case 4554:return ea+ra(e,/([^-])(transform)/g,"$1"+ea+"$2")+e;case 6187:return ra(ra(ra(e,/(zoom-|grab)/,ea+"$1"),/(image-set)/,ea+"$1"),e,"")+e;case 5495:case 3959:return ra(e,/(image-set\([^]*)/,ea+"$1$`$1");case 4968:return ra(ra(e,/(.+:)(flex-)?(.*)/,ea+"box-pack:$3"+el+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ea+e+e;case 4095:case 3583:case 4068:case 2532:return ra(e,/(.+)-inline(.+)/,ea+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(iA(e)-1-t>6)switch(ko(e,t+1)){case 109:if(ko(e,t+4)!==45)break;case 102:return ra(e,/(.+:)(.+)-([^]+)/,"$1"+ea+"$2-$3$1"+IN+(ko(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~UO(e,"stretch")?Hne(ra(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(ko(e,t+1)!==115)break;case 6444:switch(ko(e,iA(e)-3-(~UO(e,"!important")&&10))){case 107:return ra(e,":",":"+ea)+e;case 101:return ra(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ea+(ko(e,14)===45?"inline-":"")+"box$3$1"+ea+"$2$3$1"+el+"$2box$3")+e}break;case 5936:switch(ko(e,t+11)){case 114:return ea+e+el+ra(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return ea+e+el+ra(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return ea+e+el+ra(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return ea+e+el+e+e}return e}var lSe=function(t,r,n,a){if(t.length>-1&&!t.return)switch(t.type){case VL:t.return=Hne(t.value,t.length);break;case Pne:return v1([Yy(t,{value:ra(t.value,"@","@"+ea)})],a);case HL:if(t.length)return $5e(t.props,function(s){switch(z5e(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return v1([Yy(t,{props:[ra(s,/:(read-\w+)/,":"+IN+"$1")]})],a);case"::placeholder":return v1([Yy(t,{props:[ra(s,/:(plac\w+)/,":"+ea+"input-$1")]}),Yy(t,{props:[ra(s,/:(plac\w+)/,":"+IN+"$1")]}),Yy(t,{props:[ra(s,/:(plac\w+)/,el+"input-$1")]})],a)}return""})}},cSe=[lSe],uSe=function(t){var r=t.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(x){var v=x.getAttribute("data-emotion");v.indexOf(" ")!==-1&&(document.head.appendChild(x),x.setAttribute("data-s",""))})}var a=t.stylisPlugins||cSe,s={},i,o=[];i=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(x){for(var v=x.getAttribute("data-emotion").split(" "),y=1;y<v.length;y++)s[v[y]]=!0;o.push(x)});var c,u=[iSe,oSe];{var d,f=[eSe,rSe(function(x){d.insert(x)})],h=tSe(u.concat(a,f)),m=function(v){return v1(J5e(v),h)};c=function(v,y,w,_){d=w,m(v?v+"{"+y.styles+"}":y.styles),_&&(g.inserted[y.name]=!0)}}var g={key:r,sheet:new L5e({key:r,container:i,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:c};return g.sheet.hydrate(o),g},j3={exports:{}},ia={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pz;function dSe(){if(pz)return ia;pz=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,i=e?Symbol.for("react.provider"):60109,o=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,m=e?Symbol.for("react.memo"):60115,g=e?Symbol.for("react.lazy"):60116,x=e?Symbol.for("react.block"):60121,v=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,w=e?Symbol.for("react.scope"):60119;function _(B){if(typeof B=="object"&&B!==null){var j=B.$$typeof;switch(j){case t:switch(B=B.type,B){case c:case u:case n:case s:case a:case f:return B;default:switch(B=B&&B.$$typeof,B){case o:case d:case g:case m:case i:return B;default:return j}}case r:return j}}}function T(B){return _(B)===u}return ia.AsyncMode=c,ia.ConcurrentMode=u,ia.ContextConsumer=o,ia.ContextProvider=i,ia.Element=t,ia.ForwardRef=d,ia.Fragment=n,ia.Lazy=g,ia.Memo=m,ia.Portal=r,ia.Profiler=s,ia.StrictMode=a,ia.Suspense=f,ia.isAsyncMode=function(B){return T(B)||_(B)===c},ia.isConcurrentMode=T,ia.isContextConsumer=function(B){return _(B)===o},ia.isContextProvider=function(B){return _(B)===i},ia.isElement=function(B){return typeof B=="object"&&B!==null&&B.$$typeof===t},ia.isForwardRef=function(B){return _(B)===d},ia.isFragment=function(B){return _(B)===n},ia.isLazy=function(B){return _(B)===g},ia.isMemo=function(B){return _(B)===m},ia.isPortal=function(B){return _(B)===r},ia.isProfiler=function(B){return _(B)===s},ia.isStrictMode=function(B){return _(B)===a},ia.isSuspense=function(B){return _(B)===f},ia.isValidElementType=function(B){return typeof B=="string"||typeof B=="function"||B===n||B===u||B===s||B===a||B===f||B===h||typeof B=="object"&&B!==null&&(B.$$typeof===g||B.$$typeof===m||B.$$typeof===i||B.$$typeof===o||B.$$typeof===d||B.$$typeof===v||B.$$typeof===y||B.$$typeof===w||B.$$typeof===x)},ia.typeOf=_,ia}var gz;function Vne(){return gz||(gz=1,j3.exports=dSe()),j3.exports}var I3,xz;function fSe(){if(xz)return I3;xz=1;var e=Vne(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[e.ForwardRef]=n,s[e.Memo]=a;function i(g){return e.isMemo(g)?a:s[g.$$typeof]||t}var o=Object.defineProperty,c=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,h=Object.prototype;function m(g,x,v){if(typeof x!="string"){if(h){var y=f(x);y&&y!==h&&m(g,y,v)}var w=c(x);u&&(w=w.concat(u(x)));for(var _=i(g),T=i(x),B=0;B<w.length;++B){var j=w[B];if(!r[j]&&!(v&&v[j])&&!(T&&T[j])&&!(_&&_[j])){var E=d(x,j);try{o(g,j,E)}catch{}}}}return g}return I3=m,I3}fSe();var ASe=!0;function zne(e,t,r){var n="";return r.split(" ").forEach(function(a){e[a]!==void 0?t.push(e[a]+";"):a&&(n+=a+" ")}),n}var $L=function(t,r,n){var a=t.key+"-"+r.name;(n===!1||ASe===!1)&&t.registered[a]===void 0&&(t.registered[a]=r.styles)},$ne=function(t,r,n){$L(t,r,n);var a=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var s=r;do t.insert(r===s?"."+a:"",s,t.sheet,!0),s=s.next;while(s!==void 0)}};function hSe(e){for(var t=0,r,n=0,a=e.length;a>=4;++n,a-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(a){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var mSe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},pSe=/[A-Z]|^ms/g,gSe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Gne=function(t){return t.charCodeAt(1)===45},vz=function(t){return t!=null&&typeof t!="boolean"},F3=Qne(function(e){return Gne(e)?e:e.replace(pSe,"-$&").toLowerCase()}),bz=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(gSe,function(n,a,s){return oA={name:a,styles:s,next:oA},a})}return mSe[t]!==1&&!Gne(t)&&typeof r=="number"&&r!==0?r+"px":r};function z2(e,t,r){if(r==null)return"";var n=r;if(n.__emotion_styles!==void 0)return n;switch(typeof r){case"boolean":return"";case"object":{var a=r;if(a.anim===1)return oA={name:a.name,styles:a.styles,next:oA},a.name;var s=r;if(s.styles!==void 0){var i=s.next;if(i!==void 0)for(;i!==void 0;)oA={name:i.name,styles:i.styles,next:oA},i=i.next;var o=s.styles+";";return o}return xSe(e,t,r)}case"function":{if(e!==void 0){var c=oA,u=r(e);return oA=c,z2(e,t,u)}break}}var d=r;if(t==null)return d;var f=t[d];return f!==void 0?f:d}function xSe(e,t,r){var n="";if(Array.isArray(r))for(var a=0;a<r.length;a++)n+=z2(e,t,r[a])+";";else for(var s in r){var i=r[s];if(typeof i!="object"){var o=i;t!=null&&t[o]!==void 0?n+=s+"{"+t[o]+"}":vz(o)&&(n+=F3(s)+":"+bz(s,o)+";")}else if(Array.isArray(i)&&typeof i[0]=="string"&&(t==null||t[i[0]]===void 0))for(var c=0;c<i.length;c++)vz(i[c])&&(n+=F3(s)+":"+bz(s,i[c])+";");else{var u=z2(e,t,i);switch(s){case"animation":case"animationName":{n+=F3(s)+":"+u+";";break}default:n+=s+"{"+u+"}"}}}return n}var yz=/label:\s*([^\s;{]+)\s*(;|$)/g,oA;function nB(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,a="";oA=void 0;var s=e[0];if(s==null||s.raw===void 0)n=!1,a+=z2(r,t,s);else{var i=s;a+=i[0]}for(var o=1;o<e.length;o++)if(a+=z2(r,t,e[o]),n){var c=s;a+=c[o]}yz.lastIndex=0;for(var u="",d;(d=yz.exec(a))!==null;)u+="-"+d[1];var f=hSe(a)+u;return{name:f,styles:a,next:oA}}var vSe=function(t){return t()},bSe=aN.useInsertionEffect?aN.useInsertionEffect:!1,Kne=bSe||vSe,qne=S.createContext(typeof HTMLElement<"u"?uSe({key:"css"}):null);qne.Provider;var Wne=function(t){return S.forwardRef(function(r,n){var a=S.useContext(qne);return t(r,a,n)})},GL=S.createContext({}),KL={}.hasOwnProperty,HO="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",ySe=function(t,r){var n={};for(var a in r)KL.call(r,a)&&(n[a]=r[a]);return n[HO]=t,n},wSe=function(t){var r=t.cache,n=t.serialized,a=t.isStringTag;return $L(r,n,a),Kne(function(){return $ne(r,n,a)}),null},ESe=Wne(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var a=e[HO],s=[n],i="";typeof e.className=="string"?i=zne(t.registered,s,e.className):e.className!=null&&(i=e.className+" ");var o=nB(s,void 0,S.useContext(GL));i+=t.key+"-"+o.name;var c={};for(var u in e)KL.call(e,u)&&u!=="css"&&u!==HO&&(c[u]=e[u]);return c.className=i,r&&(c.ref=r),S.createElement(S.Fragment,null,S.createElement(wSe,{cache:t,serialized:o,isStringTag:typeof a=="string"}),S.createElement(a,c))}),CSe=ESe,wz=function(t,r){var n=arguments;if(r==null||!KL.call(r,"css"))return S.createElement.apply(void 0,n);var a=n.length,s=new Array(a);s[0]=CSe,s[1]=ySe(t,r);for(var i=2;i<a;i++)s[i]=n[i];return S.createElement.apply(null,s)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(wz||(wz={}));function qL(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return nB(t)}function XE(){var e=qL.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var _Se=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,SSe=Qne(function(e){return _Se.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),NSe=SSe,kSe=function(t){return t!=="theme"},Ez=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?NSe:kSe},Cz=function(t,r,n){var a;if(r){var s=r.shouldForwardProp;a=t.__emotion_forwardProp&&s?function(i){return t.__emotion_forwardProp(i)&&s(i)}:s}return typeof a!="function"&&n&&(a=t.__emotion_forwardProp),a},BSe=function(t){var r=t.cache,n=t.serialized,a=t.isStringTag;return $L(r,n,a),Kne(function(){return $ne(r,n,a)}),null},TSe=function e(t,r){var n=t.__emotion_real===t,a=n&&t.__emotion_base||t,s,i;r!==void 0&&(s=r.label,i=r.target);var o=Cz(t,r,n),c=o||Ez(a),u=!c("as");return function(){var d=arguments,f=n&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(s!==void 0&&f.push("label:"+s+";"),d[0]==null||d[0].raw===void 0)f.push.apply(f,d);else{var h=d[0];f.push(h[0]);for(var m=d.length,g=1;g<m;g++)f.push(d[g],h[g])}var x=Wne(function(v,y,w){var _=u&&v.as||a,T="",B=[],j=v;if(v.theme==null){j={};for(var E in v)j[E]=v[E];j.theme=S.useContext(GL)}typeof v.className=="string"?T=zne(y.registered,B,v.className):v.className!=null&&(T=v.className+" ");var N=nB(f.concat(B),y.registered,j);T+=y.key+"-"+N.name,i!==void 0&&(T+=" "+i);var I=u&&o===void 0?Ez(_):c,L={};for(var D in v)u&&D==="as"||I(D)&&(L[D]=v[D]);return L.className=T,w&&(L.ref=w),S.createElement(S.Fragment,null,S.createElement(BSe,{cache:y,serialized:N,isStringTag:typeof _=="string"}),S.createElement(_,L))});return x.displayName=s!==void 0?s:"Styled("+(typeof a=="string"?a:a.displayName||a.name||"Component")+")",x.defaultProps=t.defaultProps,x.__emotion_real=x,x.__emotion_base=a,x.__emotion_styles=f,x.__emotion_forwardProp=o,Object.defineProperty(x,"toString",{value:function(){return"."+i}}),x.withComponent=function(v,y){var w=e(v,jN({},r,y,{shouldForwardProp:Cz(x,y,!0)}));return w.apply(void 0,f)},x}},jSe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],VO=TSe.bind(null);jSe.forEach(function(e){VO[e]=VO(e)});function Xne(e,t){return VO(e,t)}function ISe(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const _z=[];function Tg(e){return _z[0]=e,nB(_z)}var O3={exports:{}},Na={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sz;function FSe(){if(Sz)return Na;Sz=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.for("react.view_transition"),m=Symbol.for("react.client.reference");function g(x){if(typeof x=="object"&&x!==null){var v=x.$$typeof;switch(v){case e:switch(x=x.type,x){case r:case a:case n:case c:case u:case h:return x;default:switch(x=x&&x.$$typeof,x){case i:case o:case f:case d:return x;case s:return x;default:return v}}case t:return v}}}return Na.ContextConsumer=s,Na.ContextProvider=i,Na.Element=e,Na.ForwardRef=o,Na.Fragment=r,Na.Lazy=f,Na.Memo=d,Na.Portal=t,Na.Profiler=a,Na.StrictMode=n,Na.Suspense=c,Na.SuspenseList=u,Na.isContextConsumer=function(x){return g(x)===s},Na.isContextProvider=function(x){return g(x)===i},Na.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===e},Na.isForwardRef=function(x){return g(x)===o},Na.isFragment=function(x){return g(x)===r},Na.isLazy=function(x){return g(x)===f},Na.isMemo=function(x){return g(x)===d},Na.isPortal=function(x){return g(x)===t},Na.isProfiler=function(x){return g(x)===a},Na.isStrictMode=function(x){return g(x)===n},Na.isSuspense=function(x){return g(x)===c},Na.isSuspenseList=function(x){return g(x)===u},Na.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===r||x===a||x===n||x===c||x===u||typeof x=="object"&&x!==null&&(x.$$typeof===f||x.$$typeof===d||x.$$typeof===i||x.$$typeof===s||x.$$typeof===o||x.$$typeof===m||x.getModuleId!==void 0)},Na.typeOf=g,Na}var Nz;function OSe(){return Nz||(Nz=1,O3.exports=FSe()),O3.exports}var Yne=OSe();function uA(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Jne(e){if(S.isValidElement(e)||Yne.isValidElementType(e)||!uA(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=Jne(e[r])}),t}function ru(e,t,r={clone:!0}){const n=r.clone?{...e}:e;return uA(e)&&uA(t)&&Object.keys(t).forEach(a=>{S.isValidElement(t[a])||Yne.isValidElementType(t[a])?n[a]=t[a]:uA(t[a])&&Object.prototype.hasOwnProperty.call(e,a)&&uA(e[a])?n[a]=ru(e[a],t[a],r):r.clone?n[a]=uA(t[a])?Jne(t[a]):t[a]:n[a]=t[a]}),n}const DSe=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,n)=>r.val-n.val),t.reduce((r,n)=>({...r,[n.key]:n.val}),{})};function PSe(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:n=5,...a}=e,s=DSe(t),i=Object.keys(s);function o(h){return`@media (min-width:${typeof t[h]=="number"?t[h]:h}${r})`}function c(h){return`@media (max-width:${(typeof t[h]=="number"?t[h]:h)-n/100}${r})`}function u(h,m){const g=i.indexOf(m);return`@media (min-width:${typeof t[h]=="number"?t[h]:h}${r}) and (max-width:${(g!==-1&&typeof t[i[g]]=="number"?t[i[g]]:m)-n/100}${r})`}function d(h){return i.indexOf(h)+1<i.length?u(h,i[i.indexOf(h)+1]):o(h)}function f(h){const m=i.indexOf(h);return m===0?o(i[1]):m===i.length-1?c(i[m]):u(h,i[i.indexOf(h)+1]).replace("@media","@media not all and")}return{keys:i,values:s,up:o,down:c,between:u,only:d,not:f,unit:r,...a}}function kz(e,t){if(!e.containerQueries)return t;const r=Object.keys(t).filter(n=>n.startsWith("@container")).sort((n,a)=>{var i,o;const s=/min-width:\s*([0-9.]+)/;return+(((i=n.match(s))==null?void 0:i[1])||0)-+(((o=a.match(s))==null?void 0:o[1])||0)});return r.length?r.reduce((n,a)=>{const s=t[a];return delete n[a],n[a]=s,n},{...t}):t}function RSe(e,t){return t==="@"||t.startsWith("@")&&(e.some(r=>t.startsWith(`@${r}`))||!!t.match(/^@\d/))}function LSe(e,t){const r=t.match(/^@([^/]+)?\/?(.+)?$/);if(!r)return null;const[,n,a]=r,s=Number.isNaN(+n)?n||0:+n;return e.containerQueries(a).up(s)}function MSe(e){const t=(s,i)=>s.replace("@media",i?`@container ${i}`:"@container");function r(s,i){s.up=(...o)=>t(e.breakpoints.up(...o),i),s.down=(...o)=>t(e.breakpoints.down(...o),i),s.between=(...o)=>t(e.breakpoints.between(...o),i),s.only=(...o)=>t(e.breakpoints.only(...o),i),s.not=(...o)=>{const c=t(e.breakpoints.not(...o),i);return c.includes("not all and")?c.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):c}}const n={},a=s=>(r(n,s),n);return r(a),{...e,containerQueries:a}}const USe={borderRadius:4};function i2(e,t){return t?ru(e,t,{clone:!1}):e}const aB={xs:0,sm:600,md:900,lg:1200,xl:1536},Bz={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${aB[e]}px)`},QSe={containerQueries:e=>({up:t=>{let r=typeof t=="number"?t:aB[t]||t;return typeof r=="number"&&(r=`${r}px`),e?`@container ${e} (min-width:${r})`:`@container (min-width:${r})`}})};function Wh(e,t,r){const n=e.theme||{};if(Array.isArray(t)){const s=n.breakpoints||Bz;return t.reduce((i,o,c)=>(i[s.up(s.keys[c])]=r(t[c]),i),{})}if(typeof t=="object"){const s=n.breakpoints||Bz;return Object.keys(t).reduce((i,o)=>{if(RSe(s.keys,o)){const c=LSe(n.containerQueries?n:QSe,o);c&&(i[c]=r(t[o],o))}else if(Object.keys(s.values||aB).includes(o)){const c=s.up(o);i[c]=r(t[o],o)}else{const c=o;i[c]=t[c]}return i},{})}return r(t)}function HSe(e={}){var r;return((r=e.keys)==null?void 0:r.reduce((n,a)=>{const s=e.up(a);return n[s]={},n},{}))||{}}function Tz(e,t){return e.reduce((r,n)=>{const a=r[n];return(!a||Object.keys(a).length===0)&&delete r[n],r},t)}function Zs(e){if(typeof e!="string")throw new Error(Jg(7));return e.charAt(0).toUpperCase()+e.slice(1)}function sB(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const n=`vars.${t}`.split(".").reduce((a,s)=>a&&a[s]?a[s]:null,e);if(n!=null)return n}return t.split(".").reduce((n,a)=>n&&n[a]!=null?n[a]:null,e)}function FN(e,t,r,n=r){let a;return typeof e=="function"?a=e(r):Array.isArray(e)?a=e[r]||n:a=sB(e,r)||n,t&&(a=t(a,n,e)),a}function ii(e){const{prop:t,cssProperty:r=e.prop,themeKey:n,transform:a}=e,s=i=>{if(i[t]==null)return null;const o=i[t],c=i.theme,u=sB(c,n)||{};return Wh(i,o,f=>{let h=FN(u,a,f);return f===h&&typeof f=="string"&&(h=FN(u,a,`${t}${f==="default"?"":Zs(f)}`,f)),r===!1?h:{[r]:h}})};return s.propTypes={},s.filterProps=[t],s}function VSe(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const zSe={m:"margin",p:"padding"},$Se={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},jz={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},GSe=VSe(e=>{if(e.length>2)if(jz[e])e=jz[e];else return[e];const[t,r]=e.split(""),n=zSe[t],a=$Se[r]||"";return Array.isArray(a)?a.map(s=>n+s):[n+a]}),WL=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],XL=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...WL,...XL];function YE(e,t,r,n){const a=sB(e,t,!0)??r;return typeof a=="number"||typeof a=="string"?s=>typeof s=="string"?s:typeof a=="string"?a.startsWith("var(")&&s===0?0:a.startsWith("var(")&&s===1?a:`calc(${s} * ${a})`:a*s:Array.isArray(a)?s=>{if(typeof s=="string")return s;const i=Math.abs(s),o=a[i];return s>=0?o:typeof o=="number"?-o:typeof o=="string"&&o.startsWith("var(")?`calc(-1 * ${o})`:`-${o}`}:typeof a=="function"?a:()=>{}}function YL(e){return YE(e,"spacing",8)}function JE(e,t){return typeof t=="string"||t==null?t:e(t)}function KSe(e,t){return r=>e.reduce((n,a)=>(n[a]=JE(t,r),n),{})}function qSe(e,t,r,n){if(!t.includes(r))return null;const a=GSe(r),s=KSe(a,n),i=e[r];return Wh(e,i,s)}function Zne(e,t){const r=YL(e.theme);return Object.keys(e).map(n=>qSe(e,t,n,r)).reduce(i2,{})}function Bs(e){return Zne(e,WL)}Bs.propTypes={};Bs.filterProps=WL;function Ts(e){return Zne(e,XL)}Ts.propTypes={};Ts.filterProps=XL;function eae(e=8,t=YL({spacing:e})){if(e.mui)return e;const r=(...n)=>(n.length===0?[1]:n).map(s=>{const i=t(s);return typeof i=="number"?`${i}px`:i}).join(" ");return r.mui=!0,r}function iB(...e){const t=e.reduce((n,a)=>(a.filterProps.forEach(s=>{n[s]=a}),n),{}),r=n=>Object.keys(n).reduce((a,s)=>t[s]?i2(a,t[s](n)):a,{});return r.propTypes={},r.filterProps=e.reduce((n,a)=>n.concat(a.filterProps),[]),r}function Xu(e){return typeof e!="number"?e:`${e}px solid`}function fd(e,t){return ii({prop:e,themeKey:"borders",transform:t})}const WSe=fd("border",Xu),XSe=fd("borderTop",Xu),YSe=fd("borderRight",Xu),JSe=fd("borderBottom",Xu),ZSe=fd("borderLeft",Xu),eNe=fd("borderColor"),tNe=fd("borderTopColor"),rNe=fd("borderRightColor"),nNe=fd("borderBottomColor"),aNe=fd("borderLeftColor"),sNe=fd("outline",Xu),iNe=fd("outlineColor"),oB=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=YE(e.theme,"shape.borderRadius",4),r=n=>({borderRadius:JE(t,n)});return Wh(e,e.borderRadius,r)}return null};oB.propTypes={};oB.filterProps=["borderRadius"];iB(WSe,XSe,YSe,JSe,ZSe,eNe,tNe,rNe,nNe,aNe,oB,sNe,iNe);const lB=e=>{if(e.gap!==void 0&&e.gap!==null){const t=YE(e.theme,"spacing",8),r=n=>({gap:JE(t,n)});return Wh(e,e.gap,r)}return null};lB.propTypes={};lB.filterProps=["gap"];const cB=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=YE(e.theme,"spacing",8),r=n=>({columnGap:JE(t,n)});return Wh(e,e.columnGap,r)}return null};cB.propTypes={};cB.filterProps=["columnGap"];const uB=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=YE(e.theme,"spacing",8),r=n=>({rowGap:JE(t,n)});return Wh(e,e.rowGap,r)}return null};uB.propTypes={};uB.filterProps=["rowGap"];const oNe=ii({prop:"gridColumn"}),lNe=ii({prop:"gridRow"}),cNe=ii({prop:"gridAutoFlow"}),uNe=ii({prop:"gridAutoColumns"}),dNe=ii({prop:"gridAutoRows"}),fNe=ii({prop:"gridTemplateColumns"}),ANe=ii({prop:"gridTemplateRows"}),hNe=ii({prop:"gridTemplateAreas"}),mNe=ii({prop:"gridArea"});iB(lB,cB,uB,oNe,lNe,cNe,uNe,dNe,fNe,ANe,hNe,mNe);function b1(e,t){return t==="grey"?t:e}const pNe=ii({prop:"color",themeKey:"palette",transform:b1}),gNe=ii({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:b1}),xNe=ii({prop:"backgroundColor",themeKey:"palette",transform:b1});iB(pNe,gNe,xNe);function Wc(e){return e<=1&&e!==0?`${e*100}%`:e}const vNe=ii({prop:"width",transform:Wc}),JL=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{var a,s,i,o,c;const n=((i=(s=(a=e.theme)==null?void 0:a.breakpoints)==null?void 0:s.values)==null?void 0:i[r])||aB[r];return n?((c=(o=e.theme)==null?void 0:o.breakpoints)==null?void 0:c.unit)!=="px"?{maxWidth:`${n}${e.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:Wc(r)}};return Wh(e,e.maxWidth,t)}return null};JL.filterProps=["maxWidth"];const bNe=ii({prop:"minWidth",transform:Wc}),yNe=ii({prop:"height",transform:Wc}),wNe=ii({prop:"maxHeight",transform:Wc}),ENe=ii({prop:"minHeight",transform:Wc});ii({prop:"size",cssProperty:"width",transform:Wc});ii({prop:"size",cssProperty:"height",transform:Wc});const CNe=ii({prop:"boxSizing"});iB(vNe,JL,bNe,yNe,wNe,ENe,CNe);const ZE={border:{themeKey:"borders",transform:Xu},borderTop:{themeKey:"borders",transform:Xu},borderRight:{themeKey:"borders",transform:Xu},borderBottom:{themeKey:"borders",transform:Xu},borderLeft:{themeKey:"borders",transform:Xu},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Xu},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:oB},color:{themeKey:"palette",transform:b1},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:b1},backgroundColor:{themeKey:"palette",transform:b1},p:{style:Ts},pt:{style:Ts},pr:{style:Ts},pb:{style:Ts},pl:{style:Ts},px:{style:Ts},py:{style:Ts},padding:{style:Ts},paddingTop:{style:Ts},paddingRight:{style:Ts},paddingBottom:{style:Ts},paddingLeft:{style:Ts},paddingX:{style:Ts},paddingY:{style:Ts},paddingInline:{style:Ts},paddingInlineStart:{style:Ts},paddingInlineEnd:{style:Ts},paddingBlock:{style:Ts},paddingBlockStart:{style:Ts},paddingBlockEnd:{style:Ts},m:{style:Bs},mt:{style:Bs},mr:{style:Bs},mb:{style:Bs},ml:{style:Bs},mx:{style:Bs},my:{style:Bs},margin:{style:Bs},marginTop:{style:Bs},marginRight:{style:Bs},marginBottom:{style:Bs},marginLeft:{style:Bs},marginX:{style:Bs},marginY:{style:Bs},marginInline:{style:Bs},marginInlineStart:{style:Bs},marginInlineEnd:{style:Bs},marginBlock:{style:Bs},marginBlockStart:{style:Bs},marginBlockEnd:{style:Bs},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:lB},rowGap:{style:uB},columnGap:{style:cB},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Wc},maxWidth:{style:JL},minWidth:{transform:Wc},height:{transform:Wc},maxHeight:{transform:Wc},minHeight:{transform:Wc},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function _Ne(...e){const t=e.reduce((n,a)=>n.concat(Object.keys(a)),[]),r=new Set(t);return e.every(n=>r.size===Object.keys(n).length)}function SNe(e,t){return typeof e=="function"?e(t):e}function NNe(){function e(r,n,a,s){const i={[r]:n,theme:a},o=s[r];if(!o)return{[r]:n};const{cssProperty:c=r,themeKey:u,transform:d,style:f}=o;if(n==null)return null;if(u==="typography"&&n==="inherit")return{[r]:n};const h=sB(a,u)||{};return f?f(i):Wh(i,n,g=>{let x=FN(h,d,g);return g===x&&typeof g=="string"&&(x=FN(h,d,`${r}${g==="default"?"":Zs(g)}`,g)),c===!1?x:{[c]:x}})}function t(r){const{sx:n,theme:a={},nested:s}=r||{};if(!n)return null;const i=a.unstable_sxConfig??ZE;function o(c){let u=c;if(typeof c=="function")u=c(a);else if(typeof c!="object")return c;if(!u)return null;const d=HSe(a.breakpoints),f=Object.keys(d);let h=d;return Object.keys(u).forEach(m=>{const g=SNe(u[m],a);if(g!=null)if(typeof g=="object")if(i[m])h=i2(h,e(m,g,a,i));else{const x=Wh({theme:a},g,v=>({[m]:v}));_Ne(x,g)?h[m]=t({sx:g,theme:a,nested:!0}):h=i2(h,x)}else h=i2(h,e(m,g,a,i))}),!s&&a.modularCssLayers?{"@layer sx":kz(a,Tz(f,h))}:kz(a,Tz(f,h))}return Array.isArray(n)?n.map(o):o(n)}return t}const Zg=NNe();Zg.filterProps=["sx"];function kNe(e,t){var n;const r=this;if(r.vars){if(!((n=r.colorSchemes)!=null&&n[e])||typeof r.getColorSchemeSelector!="function")return{};let a=r.getColorSchemeSelector(e);return a==="&"?t:((a.includes("data-")||a.includes("."))&&(a=`*:where(${a.replace(/\s*&$/,"")}) &`),{[a]:t})}return r.palette.mode===e?t:{}}function ZL(e={},...t){const{breakpoints:r={},palette:n={},spacing:a,shape:s={},...i}=e,o=PSe(r),c=eae(a);let u=ru({breakpoints:o,direction:"ltr",components:{},palette:{mode:"light",...n},spacing:c,shape:{...USe,...s}},i);return u=MSe(u),u.applyStyles=kNe,u=t.reduce((d,f)=>ru(d,f),u),u.unstable_sxConfig={...ZE,...i==null?void 0:i.unstable_sxConfig},u.unstable_sx=function(f){return Zg({sx:f,theme:this})},u}function BNe(e){return Object.keys(e).length===0}function TNe(e=null){const t=S.useContext(GL);return!t||BNe(t)?e:t}const jNe=ZL();function tae(e=jNe){return TNe(e)}const INe=e=>{var n;const t={systemProps:{},otherProps:{}},r=((n=e==null?void 0:e.theme)==null?void 0:n.unstable_sxConfig)??ZE;return Object.keys(e).forEach(a=>{r[a]?t.systemProps[a]=e[a]:t.otherProps[a]=e[a]}),t};function rae(e){const{sx:t,...r}=e,{systemProps:n,otherProps:a}=INe(r);let s;return Array.isArray(t)?s=[n,...t]:typeof t=="function"?s=(...i)=>{const o=t(...i);return uA(o)?{...n,...o}:n}:s={...n,...t},{...a,sx:s}}const Iz=e=>e,FNe=()=>{let e=Iz;return{configure(t){e=t},generate(t){return e(t)},reset(){e=Iz}}},nae=FNe();function aae(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=aae(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Sr(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=aae(e))&&(n&&(n+=" "),n+=t);return n}function ONe(e={}){const{themeId:t,defaultTheme:r,defaultClassName:n="MuiBox-root",generateClassName:a}=e,s=Xne("div",{shouldForwardProp:o=>o!=="theme"&&o!=="sx"&&o!=="as"})(Zg);return S.forwardRef(function(c,u){const d=tae(r),{className:f,component:h="div",...m}=rae(c);return l.jsx(s,{as:h,ref:u,className:Sr(f,a?a(n):n),theme:t&&d[t]||d,...m})})}const DNe={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Lb(e,t,r="Mui"){const n=DNe[t];return n?`${r}-${n}`:`${nae.generate(e)}-${t}`}function Ex(e,t,r="Mui"){const n={};return t.forEach(a=>{n[a]=Lb(e,a,r)}),n}function sae(e){const{variants:t,...r}=e,n={variants:t,style:Tg(r),isProcessed:!0};return n.style===r||t&&t.forEach(a=>{typeof a.style!="function"&&(a.style=Tg(a.style))}),n}const PNe=ZL();function D3(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function pg(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}function RNe(e){return e?(t,r)=>r[e]:null}function LNe(e,t,r){e.theme=QNe(e.theme)?r:e.theme[t]||e.theme}function CS(e,t,r){const n=typeof t=="function"?t(e):t;if(Array.isArray(n))return n.flatMap(a=>CS(e,a,r));if(Array.isArray(n==null?void 0:n.variants)){let a;if(n.isProcessed)a=r?pg(n.style,r):n.style;else{const{variants:s,...i}=n;a=r?pg(Tg(i),r):i}return iae(e,n.variants,[a],r)}return n!=null&&n.isProcessed?r?pg(Tg(n.style),r):n.style:r?pg(Tg(n),r):n}function iae(e,t,r=[],n=void 0){var s;let a;e:for(let i=0;i<t.length;i+=1){const o=t[i];if(typeof o.props=="function"){if(a??(a={...e,...e.ownerState,ownerState:e.ownerState}),!o.props(a))continue}else for(const c in o.props)if(e[c]!==o.props[c]&&((s=e.ownerState)==null?void 0:s[c])!==o.props[c])continue e;typeof o.style=="function"?(a??(a={...e,...e.ownerState,ownerState:e.ownerState}),r.push(n?pg(Tg(o.style(a)),n):o.style(a))):r.push(n?pg(Tg(o.style),n):o.style)}return r}function MNe(e={}){const{themeId:t,defaultTheme:r=PNe,rootShouldForwardProp:n=D3,slotShouldForwardProp:a=D3}=e;function s(o){LNe(o,t,r)}return(o,c={})=>{ISe(o,j=>j.filter(E=>E!==Zg));const{name:u,slot:d,skipVariantsResolver:f,skipSx:h,overridesResolver:m=RNe(VNe(d)),...g}=c,x=u&&u.startsWith("Mui")||d?"components":"custom",v=f!==void 0?f:d&&d!=="Root"&&d!=="root"||!1,y=h||!1;let w=D3;d==="Root"||d==="root"?w=n:d?w=a:HNe(o)&&(w=void 0);const _=Xne(o,{shouldForwardProp:w,label:UNe(),...g}),T=j=>{if(j.__emotion_real===j)return j;if(typeof j=="function")return function(N){return CS(N,j,N.theme.modularCssLayers?x:void 0)};if(uA(j)){const E=sae(j);return function(I){return E.variants?CS(I,E,I.theme.modularCssLayers?x:void 0):I.theme.modularCssLayers?pg(E.style,x):E.style}}return j},B=(...j)=>{const E=[],N=j.map(T),I=[];if(E.push(s),u&&m&&I.push(function(P){var G,z;const W=(z=(G=P.theme.components)==null?void 0:G[u])==null?void 0:z.styleOverrides;if(!W)return null;const V={};for(const K in W)V[K]=CS(P,W[K],P.theme.modularCssLayers?"theme":void 0);return m(P,V)}),u&&!v&&I.push(function(P){var V,G;const R=P.theme,W=(G=(V=R==null?void 0:R.components)==null?void 0:V[u])==null?void 0:G.variants;return W?iae(P,W,[],P.theme.modularCssLayers?"theme":void 0):null}),y||I.push(Zg),Array.isArray(N[0])){const k=N.shift(),P=new Array(E.length).fill(""),R=new Array(I.length).fill("");let W;W=[...P,...k,...R],W.raw=[...P,...k.raw,...R],E.unshift(W)}const L=[...E,...N,...I],D=_(...L);return o.muiName&&(D.muiName=o.muiName),D};return _.withConfig&&(B.withConfig=_.withConfig),B}}function UNe(e,t){return void 0}function QNe(e){for(const t in e)return!1;return!0}function HNe(e){return typeof e=="string"&&e.charCodeAt(0)>96}function VNe(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function ON(e,t,r=!1){const n={...t};for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)){const s=a;if(s==="components"||s==="slots")n[s]={...e[s],...n[s]};else if(s==="componentsProps"||s==="slotProps"){const i=e[s],o=t[s];if(!o)n[s]=i||{};else if(!i)n[s]=o;else{n[s]={...o};for(const c in i)if(Object.prototype.hasOwnProperty.call(i,c)){const u=c;n[s][u]=ON(i[u],o[u],r)}}}else s==="className"&&r&&t.className?n.className=Sr(e==null?void 0:e.className,t==null?void 0:t.className):s==="style"&&r&&t.style?n.style={...e==null?void 0:e.style,...t==null?void 0:t.style}:n[s]===void 0&&(n[s]=e[s])}return n}const zNe=typeof window<"u"?S.useLayoutEffect:S.useEffect;function $Ne(e,t=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,r))}function e8(e,t=0,r=1){return $Ne(e,t,r)}function GNe(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(n=>n+n)),r?`rgb${r.length===4?"a":""}(${r.map((n,a)=>a<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3).join(", ")})`:""}function ep(e){if(e.type)return e;if(e.charAt(0)==="#")return ep(GNe(e));const t=e.indexOf("("),r=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(r))throw new Error(Jg(9,e));let n=e.substring(t+1,e.length-1),a;if(r==="color"){if(n=n.split(" "),a=n.shift(),n.length===4&&n[3].charAt(0)==="/"&&(n[3]=n[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(a))throw new Error(Jg(10,a))}else n=n.split(",");return n=n.map(s=>parseFloat(s)),{type:r,values:n,colorSpace:a}}const KNe=e=>{const t=ep(e);return t.values.slice(0,3).map((r,n)=>t.type.includes("hsl")&&n!==0?`${r}%`:r).join(" ")},Ow=(e,t)=>{try{return KNe(e)}catch{return e}};function dB(e){const{type:t,colorSpace:r}=e;let{values:n}=e;return t.includes("rgb")?n=n.map((a,s)=>s<3?parseInt(a,10):a):t.includes("hsl")&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),t.includes("color")?n=`${r} ${n.join(" ")}`:n=`${n.join(", ")}`,`${t}(${n})`}function oae(e){e=ep(e);const{values:t}=e,r=t[0],n=t[1]/100,a=t[2]/100,s=n*Math.min(a,1-a),i=(u,d=(u+r/30)%12)=>a-s*Math.max(Math.min(d-3,9-d,1),-1);let o="rgb";const c=[Math.round(i(0)*255),Math.round(i(8)*255),Math.round(i(4)*255)];return e.type==="hsla"&&(o+="a",c.push(t[3])),dB({type:o,values:c})}function zO(e){e=ep(e);let t=e.type==="hsl"||e.type==="hsla"?ep(oae(e)).values:e.values;return t=t.map(r=>(e.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function qNe(e,t){const r=zO(e),n=zO(t);return(Math.max(r,n)+.05)/(Math.min(r,n)+.05)}function DN(e,t){return e=ep(e),t=e8(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,dB(e)}function Yp(e,t,r){try{return DN(e,t)}catch{return e}}function fB(e,t){if(e=ep(e),t=e8(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let r=0;r<3;r+=1)e.values[r]*=1-t;return dB(e)}function pa(e,t,r){try{return fB(e,t)}catch{return e}}function AB(e,t){if(e=ep(e),t=e8(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.includes("color"))for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return dB(e)}function ga(e,t,r){try{return AB(e,t)}catch{return e}}function WNe(e,t=.15){return zO(e)>.5?fB(e,t):AB(e,t)}function q_(e,t,r){try{return WNe(e,t)}catch{return e}}const XNe=S.createContext(void 0);function YNe(e){const{theme:t,name:r,props:n}=e;if(!t||!t.components||!t.components[r])return n;const a=t.components[r];return a.defaultProps?ON(a.defaultProps,n,t.components.mergeClassNameAndStyle):!a.styleOverrides&&!a.variants?ON(a,n,t.components.mergeClassNameAndStyle):n}function JNe({props:e,name:t}){const r=S.useContext(XNe);return YNe({props:e,name:t,theme:{components:r}})}let Fz=0;function ZNe(e){const[t,r]=S.useState(e),n=e||t;return S.useEffect(()=>{t==null&&(Fz+=1,r(`mui-${Fz}`))},[t]),n}const e4e={...aN},Oz=e4e.useId;function t4e(e){if(Oz!==void 0){const t=Oz();return e??t}return ZNe(e)}const Dz={theme:void 0};function r4e(e){let t,r;return function(a){let s=t;return(s===void 0||a.theme!==r)&&(Dz.theme=a.theme,s=sae(e(Dz)),t=s,r=a.theme),s}}function n4e(e=""){function t(...n){if(!n.length)return"";const a=n[0];return typeof a=="string"&&!a.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${a}${t(...n.slice(1))})`:`, ${a}`}return(n,...a)=>`var(--${e?`${e}-`:""}${n}${t(...a)})`}const Pz=(e,t,r,n=[])=>{let a=e;t.forEach((s,i)=>{i===t.length-1?Array.isArray(a)?a[Number(s)]=r:a&&typeof a=="object"&&(a[s]=r):a&&typeof a=="object"&&(a[s]||(a[s]=n.includes(s)?[]:{}),a=a[s])})},a4e=(e,t,r)=>{function n(a,s=[],i=[]){Object.entries(a).forEach(([o,c])=>{(!r||r&&!r([...s,o]))&&c!=null&&(typeof c=="object"&&Object.keys(c).length>0?n(c,[...s,o],Array.isArray(c)?[...i,o]:i):t([...s,o],c,i))})}n(e)},s4e=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(n=>e.includes(n))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function P3(e,t){const{prefix:r,shouldSkipGeneratingVar:n}=t||{},a={},s={},i={};return a4e(e,(o,c,u)=>{if((typeof c=="string"||typeof c=="number")&&(!n||!n(o,c))){const d=`--${r?`${r}-`:""}${o.join("-")}`,f=s4e(o,c);Object.assign(a,{[d]:f}),Pz(s,o,`var(${d})`,u),Pz(i,o,`var(${d}, ${f})`,u)}},o=>o[0]==="vars"),{css:a,vars:s,varsWithDefaults:i}}function i4e(e,t={}){const{getSelector:r=y,disableCssColorScheme:n,colorSchemeSelector:a,enableContrastVars:s}=t,{colorSchemes:i={},components:o,defaultColorScheme:c="light",...u}=e,{vars:d,css:f,varsWithDefaults:h}=P3(u,t);let m=h;const g={},{[c]:x,...v}=i;if(Object.entries(v||{}).forEach(([T,B])=>{const{vars:j,css:E,varsWithDefaults:N}=P3(B,t);m=ru(m,N),g[T]={css:E,vars:j}}),x){const{css:T,vars:B,varsWithDefaults:j}=P3(x,t);m=ru(m,j),g[c]={css:T,vars:B}}function y(T,B){var E,N;let j=a;if(a==="class"&&(j=".%s"),a==="data"&&(j="[data-%s]"),a!=null&&a.startsWith("data-")&&!a.includes("%s")&&(j=`[${a}="%s"]`),T){if(j==="media")return e.defaultColorScheme===T?":root":{[`@media (prefers-color-scheme: ${((N=(E=i[T])==null?void 0:E.palette)==null?void 0:N.mode)||T})`]:{":root":B}};if(j)return e.defaultColorScheme===T?`:root, ${j.replace("%s",String(T))}`:j.replace("%s",String(T))}return":root"}return{vars:m,generateThemeVars:()=>{let T={...d};return Object.entries(g).forEach(([,{vars:B}])=>{T=ru(T,B)}),T},generateStyleSheets:()=>{var I,L;const T=[],B=e.defaultColorScheme||"light";function j(D,k){Object.keys(k).length&&T.push(typeof D=="string"?{[D]:{...k}}:D)}j(r(void 0,{...f}),f);const{[B]:E,...N}=g;if(E){const{css:D}=E,k=(L=(I=i[B])==null?void 0:I.palette)==null?void 0:L.mode,P=!n&&k?{colorScheme:k,...D}:{...D};j(r(B,{...P}),P)}return Object.entries(N).forEach(([D,{css:k}])=>{var W,V;const P=(V=(W=i[D])==null?void 0:W.palette)==null?void 0:V.mode,R=!n&&P?{colorScheme:P,...k}:{...k};j(r(D,{...R}),R)}),s&&T.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),T}}}function o4e(e){return function(r){return e==="media"?`@media (prefers-color-scheme: ${r})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${r}"] &`:e==="class"?`.${r} &`:e==="data"?`[data-${r}] &`:`${e.replace("%s",r)} &`:"&"}}function eC(e,t,r=void 0){const n={};for(const a in e){const s=e[a];let i="",o=!0;for(let c=0;c<s.length;c+=1){const u=s[c];u&&(i+=(o===!0?"":" ")+t(u),o=!1,r&&r[u]&&(i+=" "+r[u]))}n[a]=i}return n}function lae(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Q2.white,default:Q2.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const cae=lae();function uae(){return{text:{primary:Q2.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Q2.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const $O=uae();function Rz(e,t,r,n){const a=n.light||n,s=n.dark||n*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=AB(e.main,a):t==="dark"&&(e.dark=fB(e.main,s)))}function Lz(e,t,r,n,a){const s=a.light||a,i=a.dark||a*1.5;t[r]||(t.hasOwnProperty(n)?t[r]=t[n]:r==="light"?t.light=`color-mix(in ${e}, ${t.main}, #fff ${(s*100).toFixed(0)}%)`:r==="dark"&&(t.dark=`color-mix(in ${e}, ${t.main}, #000 ${(i*100).toFixed(0)}%)`))}function l4e(e="light"){return e==="dark"?{main:mv[200],light:mv[50],dark:mv[400]}:{main:mv[700],light:mv[400],dark:mv[800]}}function c4e(e="light"){return e==="dark"?{main:hv[200],light:hv[50],dark:hv[400]}:{main:hv[500],light:hv[300],dark:hv[700]}}function u4e(e="light"){return e==="dark"?{main:Av[500],light:Av[300],dark:Av[700]}:{main:Av[700],light:Av[400],dark:Av[800]}}function d4e(e="light"){return e==="dark"?{main:pv[400],light:pv[300],dark:pv[700]}:{main:pv[700],light:pv[500],dark:pv[900]}}function f4e(e="light"){return e==="dark"?{main:gv[400],light:gv[300],dark:gv[700]}:{main:gv[800],light:gv[500],dark:gv[900]}}function A4e(e="light"){return e==="dark"?{main:Xy[400],light:Xy[300],dark:Xy[700]}:{main:"#ed6c02",light:Xy[500],dark:Xy[900]}}function h4e(e){return`oklch(from ${e} var(--__l) 0 h / var(--__a))`}function t8(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:n=.2,colorSpace:a,...s}=e,i=e.primary||l4e(t),o=e.secondary||c4e(t),c=e.error||u4e(t),u=e.info||d4e(t),d=e.success||f4e(t),f=e.warning||A4e(t);function h(v){return a?h4e(v):qNe(v,$O.text.primary)>=r?$O.text.primary:cae.text.primary}const m=({color:v,name:y,mainShade:w=500,lightShade:_=300,darkShade:T=700})=>{if(v={...v},!v.main&&v[w]&&(v.main=v[w]),!v.hasOwnProperty("main"))throw new Error(Jg(11,y?` (${y})`:"",w));if(typeof v.main!="string")throw new Error(Jg(12,y?` (${y})`:"",JSON.stringify(v.main)));return a?(Lz(a,v,"light",_,n),Lz(a,v,"dark",T,n)):(Rz(v,"light",_,n),Rz(v,"dark",T,n)),v.contrastText||(v.contrastText=h(v.main)),v};let g;return t==="light"?g=lae():t==="dark"&&(g=uae()),ru({common:{...Q2},mode:t,primary:m({color:i,name:"primary"}),secondary:m({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:m({color:c,name:"error"}),warning:m({color:f,name:"warning"}),info:m({color:u,name:"info"}),success:m({color:d,name:"success"}),grey:D5e,contrastThreshold:r,getContrastText:h,augmentColor:m,tonalOffset:n,...g},s)}function m4e(e){const t={};return Object.entries(e).forEach(n=>{const[a,s]=n;typeof s=="object"&&(t[a]=`${s.fontStyle?`${s.fontStyle} `:""}${s.fontVariant?`${s.fontVariant} `:""}${s.fontWeight?`${s.fontWeight} `:""}${s.fontStretch?`${s.fontStretch} `:""}${s.fontSize||""}${s.lineHeight?`/${s.lineHeight} `:""}${s.fontFamily||""}`)}),t}function p4e(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function g4e(e){return Math.round(e*1e5)/1e5}const Mz={textTransform:"uppercase"},Uz='"Roboto", "Helvetica", "Arial", sans-serif';function x4e(e,t){const{fontFamily:r=Uz,fontSize:n=14,fontWeightLight:a=300,fontWeightRegular:s=400,fontWeightMedium:i=500,fontWeightBold:o=700,htmlFontSize:c=16,allVariants:u,pxToRem:d,...f}=typeof t=="function"?t(e):t,h=n/14,m=d||(v=>`${v/c*h}rem`),g=(v,y,w,_,T)=>({fontFamily:r,fontWeight:v,fontSize:m(y),lineHeight:w,...r===Uz?{letterSpacing:`${g4e(_/y)}em`}:{},...T,...u}),x={h1:g(a,96,1.167,-1.5),h2:g(a,60,1.2,-.5),h3:g(s,48,1.167,0),h4:g(s,34,1.235,.25),h5:g(s,24,1.334,0),h6:g(i,20,1.6,.15),subtitle1:g(s,16,1.75,.15),subtitle2:g(i,14,1.57,.1),body1:g(s,16,1.5,.15),body2:g(s,14,1.43,.15),button:g(i,14,1.75,.4,Mz),caption:g(s,12,1.66,.4),overline:g(s,12,2.66,1,Mz),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return ru({htmlFontSize:c,pxToRem:m,fontFamily:r,fontSize:n,fontWeightLight:a,fontWeightRegular:s,fontWeightMedium:i,fontWeightBold:o,...x},f,{clone:!1})}const v4e=.2,b4e=.14,y4e=.12;function ts(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${v4e})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${b4e})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${y4e})`].join(",")}const w4e=["none",ts(0,2,1,-1,0,1,1,0,0,1,3,0),ts(0,3,1,-2,0,2,2,0,0,1,5,0),ts(0,3,3,-2,0,3,4,0,0,1,8,0),ts(0,2,4,-1,0,4,5,0,0,1,10,0),ts(0,3,5,-1,0,5,8,0,0,1,14,0),ts(0,3,5,-1,0,6,10,0,0,1,18,0),ts(0,4,5,-2,0,7,10,1,0,2,16,1),ts(0,5,5,-3,0,8,10,1,0,3,14,2),ts(0,5,6,-3,0,9,12,1,0,3,16,2),ts(0,6,6,-3,0,10,14,1,0,4,18,3),ts(0,6,7,-4,0,11,15,1,0,4,20,3),ts(0,7,8,-4,0,12,17,2,0,5,22,4),ts(0,7,8,-4,0,13,19,2,0,5,24,4),ts(0,7,9,-4,0,14,21,2,0,5,26,4),ts(0,8,9,-5,0,15,22,2,0,6,28,5),ts(0,8,10,-5,0,16,24,2,0,6,30,5),ts(0,8,11,-5,0,17,26,2,0,6,32,5),ts(0,9,11,-5,0,18,28,2,0,7,34,6),ts(0,9,12,-6,0,19,29,2,0,7,36,6),ts(0,10,13,-6,0,20,31,3,0,8,38,7),ts(0,10,13,-6,0,21,33,3,0,8,40,7),ts(0,10,14,-6,0,22,35,3,0,8,42,7),ts(0,11,14,-7,0,23,36,3,0,9,44,8),ts(0,11,15,-7,0,24,38,3,0,9,46,8)],E4e={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},C4e={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Qz(e){return`${Math.round(e)}ms`}function _4e(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function S4e(e){const t={...E4e,...e.easing},r={...C4e,...e.duration};return{getAutoHeightDuration:_4e,create:(a=["all"],s={})=>{const{duration:i=r.standard,easing:o=t.easeInOut,delay:c=0,...u}=s;return(Array.isArray(a)?a:[a]).map(d=>`${d} ${typeof i=="string"?i:Qz(i)} ${o} ${typeof c=="string"?c:Qz(c)}`).join(",")},...e,easing:t,duration:r}}const N4e={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function k4e(e){return uA(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function dae(e={}){const t={...e};function r(n){const a=Object.entries(n);for(let s=0;s<a.length;s++){const[i,o]=a[s];!k4e(o)||i.startsWith("unstable_")?delete n[i]:uA(o)&&(n[i]={...o},r(n[i]))}}return r(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function Hz(e){return typeof e=="number"?`${(e*100).toFixed(0)}%`:`calc((${e}) * 100%)`}const B4e=e=>{if(!Number.isNaN(+e))return+e;const t=e.match(/\d*\.?\d+/g);if(!t)return 0;let r=0;for(let n=0;n<t.length;n+=1)r+=+t[n];return r};function T4e(e){Object.assign(e,{alpha(t,r){const n=this||e;return n.colorSpace?`oklch(from ${t} l c h / ${typeof r=="string"?`calc(${r})`:r})`:n.vars?`rgba(${t.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof r=="string"?`calc(${r})`:r})`:DN(t,B4e(r))},lighten(t,r){const n=this||e;return n.colorSpace?`color-mix(in ${n.colorSpace}, ${t}, #fff ${Hz(r)})`:AB(t,r)},darken(t,r){const n=this||e;return n.colorSpace?`color-mix(in ${n.colorSpace}, ${t}, #000 ${Hz(r)})`:fB(t,r)}})}function GO(e={},...t){const{breakpoints:r,mixins:n={},spacing:a,palette:s={},transitions:i={},typography:o={},shape:c,colorSpace:u,...d}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(Jg(20));const f=t8({...s,colorSpace:u}),h=ZL(e);let m=ru(h,{mixins:p4e(h.breakpoints,n),palette:f,shadows:w4e.slice(),typography:x4e(f,o),transitions:S4e(i),zIndex:{...N4e}});return m=ru(m,d),m=t.reduce((g,x)=>ru(g,x),m),m.unstable_sxConfig={...ZE,...d==null?void 0:d.unstable_sxConfig},m.unstable_sx=function(x){return Zg({sx:x,theme:this})},m.toRuntimeSource=dae,T4e(m),m}function KO(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const j4e=[...Array(25)].map((e,t)=>{if(t===0)return"none";const r=KO(t);return`linear-gradient(rgba(255 255 255 / ${r}), rgba(255 255 255 / ${r}))`});function fae(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function Aae(e){return e==="dark"?j4e:[]}function I4e(e){const{palette:t={mode:"light"},opacity:r,overlays:n,colorSpace:a,...s}=e,i=t8({...t,colorSpace:a});return{palette:i,opacity:{...fae(i.mode),...r},overlays:n||Aae(i.mode),...s}}function F4e(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const O4e=e=>[...[...Array(25)].map((t,r)=>`--${e?`${e}-`:""}overlays-${r}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],D4e=e=>(t,r)=>{const n=e.rootSelector||":root",a=e.colorSchemeSelector;let s=a;if(a==="class"&&(s=".%s"),a==="data"&&(s="[data-%s]"),a!=null&&a.startsWith("data-")&&!a.includes("%s")&&(s=`[${a}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const i={};return O4e(e.cssVarPrefix).forEach(o=>{i[o]=r[o],delete r[o]}),s==="media"?{[n]:r,"@media (prefers-color-scheme: dark)":{[n]:i}}:s?{[s.replace("%s",t)]:i,[`${n}, ${s.replace("%s",t)}`]:r}:{[n]:{...r,...i}}}if(s&&s!=="media")return`${n}, ${s.replace("%s",String(t))}`}else if(t){if(s==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[n]:r}};if(s)return s.replace("%s",String(t))}return n};function P4e(e,t){t.forEach(r=>{e[r]||(e[r]={})})}function St(e,t,r){!e[t]&&r&&(e[t]=r)}function Dw(e){return typeof e!="string"||!e.startsWith("hsl")?e:oae(e)}function Ah(e,t){`${t}Channel`in e||(e[`${t}Channel`]=Ow(Dw(e[t])))}function R4e(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const Xf=e=>{try{return e()}catch{}},L4e=(e="mui")=>n4e(e);function R3(e,t,r,n,a){if(!r)return;r=r===!0?{}:r;const s=a==="dark"?"dark":"light";if(!n){t[a]=I4e({...r,palette:{mode:s,...r==null?void 0:r.palette},colorSpace:e});return}const{palette:i,...o}=GO({...n,palette:{mode:s,...r==null?void 0:r.palette},colorSpace:e});return t[a]={...r,palette:i,opacity:{...fae(s),...r==null?void 0:r.opacity},overlays:(r==null?void 0:r.overlays)||Aae(s)},o}function M4e(e={},...t){const{colorSchemes:r={light:!0},defaultColorScheme:n,disableCssColorScheme:a=!1,cssVarPrefix:s="mui",nativeColor:i=!1,shouldSkipGeneratingVar:o=F4e,colorSchemeSelector:c=r.light&&r.dark?"media":void 0,rootSelector:u=":root",...d}=e,f=Object.keys(r)[0],h=n||(r.light&&f!=="light"?"light":f),m=L4e(s),{[h]:g,light:x,dark:v,...y}=r,w={...y};let _=g;if((h==="dark"&&!("dark"in r)||h==="light"&&!("light"in r))&&(_=!0),!_)throw new Error(Jg(21,h));let T;i&&(T="oklch");const B=R3(T,w,_,d,h);x&&!w.light&&R3(T,w,x,void 0,"light"),v&&!w.dark&&R3(T,w,v,void 0,"dark");let j={defaultColorScheme:h,...B,cssVarPrefix:s,colorSchemeSelector:c,rootSelector:u,getCssVar:m,colorSchemes:w,font:{...m4e(B.typography),...B.font},spacing:R4e(d.spacing)};Object.keys(j.colorSchemes).forEach(D=>{const k=j.colorSchemes[D].palette,P=W=>{const V=W.split("-"),G=V[1],z=V[2];return m(W,k[G][z])};k.mode==="light"&&(St(k.common,"background","#fff"),St(k.common,"onBackground","#000")),k.mode==="dark"&&(St(k.common,"background","#000"),St(k.common,"onBackground","#fff"));function R(W,V,G){if(T){let z;return W===Yp&&(z=`transparent ${((1-G)*100).toFixed(0)}%`),W===pa&&(z=`#000 ${(G*100).toFixed(0)}%`),W===ga&&(z=`#fff ${(G*100).toFixed(0)}%`),`color-mix(in ${T}, ${V}, ${z})`}return W(V,G)}if(P4e(k,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),k.mode==="light"){St(k.Alert,"errorColor",R(pa,k.error.light,.6)),St(k.Alert,"infoColor",R(pa,k.info.light,.6)),St(k.Alert,"successColor",R(pa,k.success.light,.6)),St(k.Alert,"warningColor",R(pa,k.warning.light,.6)),St(k.Alert,"errorFilledBg",P("palette-error-main")),St(k.Alert,"infoFilledBg",P("palette-info-main")),St(k.Alert,"successFilledBg",P("palette-success-main")),St(k.Alert,"warningFilledBg",P("palette-warning-main")),St(k.Alert,"errorFilledColor",Xf(()=>k.getContrastText(k.error.main))),St(k.Alert,"infoFilledColor",Xf(()=>k.getContrastText(k.info.main))),St(k.Alert,"successFilledColor",Xf(()=>k.getContrastText(k.success.main))),St(k.Alert,"warningFilledColor",Xf(()=>k.getContrastText(k.warning.main))),St(k.Alert,"errorStandardBg",R(ga,k.error.light,.9)),St(k.Alert,"infoStandardBg",R(ga,k.info.light,.9)),St(k.Alert,"successStandardBg",R(ga,k.success.light,.9)),St(k.Alert,"warningStandardBg",R(ga,k.warning.light,.9)),St(k.Alert,"errorIconColor",P("palette-error-main")),St(k.Alert,"infoIconColor",P("palette-info-main")),St(k.Alert,"successIconColor",P("palette-success-main")),St(k.Alert,"warningIconColor",P("palette-warning-main")),St(k.AppBar,"defaultBg",P("palette-grey-100")),St(k.Avatar,"defaultBg",P("palette-grey-400")),St(k.Button,"inheritContainedBg",P("palette-grey-300")),St(k.Button,"inheritContainedHoverBg",P("palette-grey-A100")),St(k.Chip,"defaultBorder",P("palette-grey-400")),St(k.Chip,"defaultAvatarColor",P("palette-grey-700")),St(k.Chip,"defaultIconColor",P("palette-grey-700")),St(k.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),St(k.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),St(k.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),St(k.LinearProgress,"primaryBg",R(ga,k.primary.main,.62)),St(k.LinearProgress,"secondaryBg",R(ga,k.secondary.main,.62)),St(k.LinearProgress,"errorBg",R(ga,k.error.main,.62)),St(k.LinearProgress,"infoBg",R(ga,k.info.main,.62)),St(k.LinearProgress,"successBg",R(ga,k.success.main,.62)),St(k.LinearProgress,"warningBg",R(ga,k.warning.main,.62)),St(k.Skeleton,"bg",T?R(Yp,k.text.primary,.11):`rgba(${P("palette-text-primaryChannel")} / 0.11)`),St(k.Slider,"primaryTrack",R(ga,k.primary.main,.62)),St(k.Slider,"secondaryTrack",R(ga,k.secondary.main,.62)),St(k.Slider,"errorTrack",R(ga,k.error.main,.62)),St(k.Slider,"infoTrack",R(ga,k.info.main,.62)),St(k.Slider,"successTrack",R(ga,k.success.main,.62)),St(k.Slider,"warningTrack",R(ga,k.warning.main,.62));const W=T?R(pa,k.background.default,.6825):q_(k.background.default,.8);St(k.SnackbarContent,"bg",W),St(k.SnackbarContent,"color",Xf(()=>T?$O.text.primary:k.getContrastText(W))),St(k.SpeedDialAction,"fabHoverBg",q_(k.background.paper,.15)),St(k.StepConnector,"border",P("palette-grey-400")),St(k.StepContent,"border",P("palette-grey-400")),St(k.Switch,"defaultColor",P("palette-common-white")),St(k.Switch,"defaultDisabledColor",P("palette-grey-100")),St(k.Switch,"primaryDisabledColor",R(ga,k.primary.main,.62)),St(k.Switch,"secondaryDisabledColor",R(ga,k.secondary.main,.62)),St(k.Switch,"errorDisabledColor",R(ga,k.error.main,.62)),St(k.Switch,"infoDisabledColor",R(ga,k.info.main,.62)),St(k.Switch,"successDisabledColor",R(ga,k.success.main,.62)),St(k.Switch,"warningDisabledColor",R(ga,k.warning.main,.62)),St(k.TableCell,"border",R(ga,R(Yp,k.divider,1),.88)),St(k.Tooltip,"bg",R(Yp,k.grey[700],.92))}if(k.mode==="dark"){St(k.Alert,"errorColor",R(ga,k.error.light,.6)),St(k.Alert,"infoColor",R(ga,k.info.light,.6)),St(k.Alert,"successColor",R(ga,k.success.light,.6)),St(k.Alert,"warningColor",R(ga,k.warning.light,.6)),St(k.Alert,"errorFilledBg",P("palette-error-dark")),St(k.Alert,"infoFilledBg",P("palette-info-dark")),St(k.Alert,"successFilledBg",P("palette-success-dark")),St(k.Alert,"warningFilledBg",P("palette-warning-dark")),St(k.Alert,"errorFilledColor",Xf(()=>k.getContrastText(k.error.dark))),St(k.Alert,"infoFilledColor",Xf(()=>k.getContrastText(k.info.dark))),St(k.Alert,"successFilledColor",Xf(()=>k.getContrastText(k.success.dark))),St(k.Alert,"warningFilledColor",Xf(()=>k.getContrastText(k.warning.dark))),St(k.Alert,"errorStandardBg",R(pa,k.error.light,.9)),St(k.Alert,"infoStandardBg",R(pa,k.info.light,.9)),St(k.Alert,"successStandardBg",R(pa,k.success.light,.9)),St(k.Alert,"warningStandardBg",R(pa,k.warning.light,.9)),St(k.Alert,"errorIconColor",P("palette-error-main")),St(k.Alert,"infoIconColor",P("palette-info-main")),St(k.Alert,"successIconColor",P("palette-success-main")),St(k.Alert,"warningIconColor",P("palette-warning-main")),St(k.AppBar,"defaultBg",P("palette-grey-900")),St(k.AppBar,"darkBg",P("palette-background-paper")),St(k.AppBar,"darkColor",P("palette-text-primary")),St(k.Avatar,"defaultBg",P("palette-grey-600")),St(k.Button,"inheritContainedBg",P("palette-grey-800")),St(k.Button,"inheritContainedHoverBg",P("palette-grey-700")),St(k.Chip,"defaultBorder",P("palette-grey-700")),St(k.Chip,"defaultAvatarColor",P("palette-grey-300")),St(k.Chip,"defaultIconColor",P("palette-grey-300")),St(k.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),St(k.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),St(k.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),St(k.LinearProgress,"primaryBg",R(pa,k.primary.main,.5)),St(k.LinearProgress,"secondaryBg",R(pa,k.secondary.main,.5)),St(k.LinearProgress,"errorBg",R(pa,k.error.main,.5)),St(k.LinearProgress,"infoBg",R(pa,k.info.main,.5)),St(k.LinearProgress,"successBg",R(pa,k.success.main,.5)),St(k.LinearProgress,"warningBg",R(pa,k.warning.main,.5)),St(k.Skeleton,"bg",T?R(Yp,k.text.primary,.13):`rgba(${P("palette-text-primaryChannel")} / 0.13)`),St(k.Slider,"primaryTrack",R(pa,k.primary.main,.5)),St(k.Slider,"secondaryTrack",R(pa,k.secondary.main,.5)),St(k.Slider,"errorTrack",R(pa,k.error.main,.5)),St(k.Slider,"infoTrack",R(pa,k.info.main,.5)),St(k.Slider,"successTrack",R(pa,k.success.main,.5)),St(k.Slider,"warningTrack",R(pa,k.warning.main,.5));const W=T?R(ga,k.background.default,.985):q_(k.background.default,.98);St(k.SnackbarContent,"bg",W),St(k.SnackbarContent,"color",Xf(()=>T?cae.text.primary:k.getContrastText(W))),St(k.SpeedDialAction,"fabHoverBg",q_(k.background.paper,.15)),St(k.StepConnector,"border",P("palette-grey-600")),St(k.StepContent,"border",P("palette-grey-600")),St(k.Switch,"defaultColor",P("palette-grey-300")),St(k.Switch,"defaultDisabledColor",P("palette-grey-600")),St(k.Switch,"primaryDisabledColor",R(pa,k.primary.main,.55)),St(k.Switch,"secondaryDisabledColor",R(pa,k.secondary.main,.55)),St(k.Switch,"errorDisabledColor",R(pa,k.error.main,.55)),St(k.Switch,"infoDisabledColor",R(pa,k.info.main,.55)),St(k.Switch,"successDisabledColor",R(pa,k.success.main,.55)),St(k.Switch,"warningDisabledColor",R(pa,k.warning.main,.55)),St(k.TableCell,"border",R(pa,R(Yp,k.divider,1),.68)),St(k.Tooltip,"bg",R(Yp,k.grey[700],.92))}Ah(k.background,"default"),Ah(k.background,"paper"),Ah(k.common,"background"),Ah(k.common,"onBackground"),Ah(k,"divider"),Object.keys(k).forEach(W=>{const V=k[W];W!=="tonalOffset"&&V&&typeof V=="object"&&(V.main&&St(k[W],"mainChannel",Ow(Dw(V.main))),V.light&&St(k[W],"lightChannel",Ow(Dw(V.light))),V.dark&&St(k[W],"darkChannel",Ow(Dw(V.dark))),V.contrastText&&St(k[W],"contrastTextChannel",Ow(Dw(V.contrastText))),W==="text"&&(Ah(k[W],"primary"),Ah(k[W],"secondary")),W==="action"&&(V.active&&Ah(k[W],"active"),V.selected&&Ah(k[W],"selected")))})}),j=t.reduce((D,k)=>ru(D,k),j);const E={prefix:s,disableCssColorScheme:a,shouldSkipGeneratingVar:o,getSelector:D4e(j),enableContrastVars:i},{vars:N,generateThemeVars:I,generateStyleSheets:L}=i4e(j,E);return j.vars=N,Object.entries(j.colorSchemes[j.defaultColorScheme]).forEach(([D,k])=>{j[D]=k}),j.generateThemeVars=I,j.generateStyleSheets=L,j.generateSpacing=function(){return eae(d.spacing,YL(this))},j.getColorSchemeSelector=o4e(c),j.spacing=j.generateSpacing(),j.shouldSkipGeneratingVar=o,j.unstable_sxConfig={...ZE,...d==null?void 0:d.unstable_sxConfig},j.unstable_sx=function(k){return Zg({sx:k,theme:this})},j.toRuntimeSource=dae,j}function Vz(e,t,r){e.colorSchemes&&r&&(e.colorSchemes[t]={...r!==!0&&r,palette:t8({...r===!0?{}:r.palette,mode:t})})}function hae(e={},...t){const{palette:r,cssVariables:n=!1,colorSchemes:a=r?void 0:{light:!0},defaultColorScheme:s=r==null?void 0:r.mode,...i}=e,o=s||"light",c=a==null?void 0:a[o],u={...a,...r?{[o]:{...typeof c!="boolean"&&c,palette:r}}:void 0};if(n===!1){if(!("colorSchemes"in e))return GO(e,...t);let d=r;"palette"in e||u[o]&&(u[o]!==!0?d=u[o].palette:o==="dark"&&(d={mode:"dark"}));const f=GO({...e,palette:d},...t);return f.defaultColorScheme=o,f.colorSchemes=u,f.palette.mode==="light"&&(f.colorSchemes.light={...u.light!==!0&&u.light,palette:f.palette},Vz(f,"dark",u.dark)),f.palette.mode==="dark"&&(f.colorSchemes.dark={...u.dark!==!0&&u.dark,palette:f.palette},Vz(f,"light",u.light)),f}return!r&&!("light"in u)&&o==="light"&&(u.light=!0),M4e({...i,colorSchemes:u,defaultColorScheme:o,...typeof n!="boolean"&&n},...t)}const mae=hae();function U4e(){const e=tae(mae);return e[QL]||e}function Q4e(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const pae=e=>Q4e(e)&&e!=="classes",fu=MNe({themeId:QL,defaultTheme:mae,rootShouldForwardProp:pae});function H4e(){return rae}const tC=r4e;function Mb(e){return JNe(e)}function _S(e){const t=S.useRef(e);return zNe(()=>{t.current=e}),S.useRef((...r)=>(0,t.current)(...r)).current}function zz(...e){const t=S.useRef(void 0),r=S.useCallback(n=>{const a=e.map(s=>{if(s==null)return null;if(typeof s=="function"){const i=s,o=i(n);return typeof o=="function"?o:()=>{i(null)}}return s.current=n,()=>{s.current=null}});return()=>{a.forEach(s=>s==null?void 0:s())}},e);return S.useMemo(()=>e.every(n=>n==null)?null:n=>{t.current&&(t.current(),t.current=void 0),n!=null&&(t.current=r(n))},e)}function V4e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function qO(e,t){return qO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},qO(e,t)}function z4e(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,qO(e,t)}var r8=kee();const $z=Ze.createContext(null);function $4e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function n8(e,t){var r=function(s){return t&&S.isValidElement(s)?t(s):s},n=Object.create(null);return e&&S.Children.map(e,function(a){return a}).forEach(function(a){n[a.key]=r(a)}),n}function G4e(e,t){e=e||{},t=t||{};function r(d){return d in t?t[d]:e[d]}var n=Object.create(null),a=[];for(var s in e)s in t?a.length&&(n[s]=a,a=[]):a.push(s);var i,o={};for(var c in t){if(n[c])for(i=0;i<n[c].length;i++){var u=n[c][i];o[n[c][i]]=r(u)}o[c]=r(c)}for(i=0;i<a.length;i++)o[a[i]]=r(a[i]);return o}function gg(e,t,r){return r[t]!=null?r[t]:e.props[t]}function K4e(e,t){return n8(e.children,function(r){return S.cloneElement(r,{onExited:t.bind(null,r),in:!0,appear:gg(r,"appear",e),enter:gg(r,"enter",e),exit:gg(r,"exit",e)})})}function q4e(e,t,r){var n=n8(e.children),a=G4e(t,n);return Object.keys(a).forEach(function(s){var i=a[s];if(S.isValidElement(i)){var o=s in t,c=s in n,u=t[s],d=S.isValidElement(u)&&!u.props.in;c&&(!o||d)?a[s]=S.cloneElement(i,{onExited:r.bind(null,i),in:!0,exit:gg(i,"exit",e),enter:gg(i,"enter",e)}):!c&&o&&!d?a[s]=S.cloneElement(i,{in:!1}):c&&o&&S.isValidElement(u)&&(a[s]=S.cloneElement(i,{onExited:r.bind(null,i),in:u.props.in,exit:gg(i,"exit",e),enter:gg(i,"enter",e)}))}}),a}var W4e=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},X4e={component:"div",childFactory:function(t){return t}},a8=function(e){z4e(t,e);function t(n,a){var s;s=e.call(this,n,a)||this;var i=s.handleExited.bind($4e(s));return s.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},s}var r=t.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(a,s){var i=s.children,o=s.handleExited,c=s.firstRender;return{children:c?K4e(a,o):q4e(a,i,o),firstRender:!1}},r.handleExited=function(a,s){var i=n8(this.props.children);a.key in i||(a.props.onExited&&a.props.onExited(s),this.mounted&&this.setState(function(o){var c=jN({},o.children);return delete c[a.key],{children:c}}))},r.render=function(){var a=this.props,s=a.component,i=a.childFactory,o=V4e(a,["component","childFactory"]),c=this.state.contextValue,u=W4e(this.state.children).map(i);return delete o.appear,delete o.enter,delete o.exit,s===null?Ze.createElement($z.Provider,{value:c},u):Ze.createElement($z.Provider,{value:c},Ze.createElement(s,o,u))},t}(Ze.Component);a8.propTypes={};a8.defaultProps=X4e;const Gz={};function gae(e,t){const r=S.useRef(Gz);return r.current===Gz&&(r.current=e(t)),r}const Y4e=[];function J4e(e){S.useEffect(e,Y4e)}class s8{constructor(){Wp(this,"currentId",null);Wp(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});Wp(this,"disposeEffect",()=>this.clear)}static create(){return new s8}start(t,r){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,r()},t)}}function Z4e(){const e=gae(s8.create).current;return J4e(e.disposeEffect),e}function eke(e){return Lb("MuiPaper",e)}Ex("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const tke=e=>{const{square:t,elevation:r,variant:n,classes:a}=e,s={root:["root",n,!t&&"rounded",n==="elevation"&&`elevation${r}`]};return eC(s,eke,a)},rke=fu("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],!r.square&&t.rounded,r.variant==="elevation"&&t[`elevation${r.elevation}`]]}})(tC(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow"),variants:[{props:({ownerState:t})=>!t.square,style:{borderRadius:e.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(e.vars||e).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),nke=S.forwardRef(function(t,r){var m;const n=Mb({props:t,name:"MuiPaper"}),a=U4e(),{className:s,component:i="div",elevation:o=1,square:c=!1,variant:u="elevation",...d}=n,f={...n,component:i,elevation:o,square:c,variant:u},h=tke(f);return l.jsx(rke,{as:i,ownerState:f,className:Sr(h.root,s),ref:r,...d,style:{...u==="elevation"&&{"--Paper-shadow":(a.vars||a).shadows[o],...a.vars&&{"--Paper-overlay":(m=a.vars.overlays)==null?void 0:m[o]},...!a.vars&&a.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${DN("#fff",KO(o))}, ${DN("#fff",KO(o))})`}},...d.style}})});function Kz(e){try{return e.matches(":focus-visible")}catch{}return!1}class PN{constructor(){Wp(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new PN}static use(){const t=gae(PN.create).current,[r,n]=S.useState(!1);return t.shouldMount=r,t.setShouldMount=n,S.useEffect(t.mountEffect,[r]),t}mount(){return this.mounted||(this.mounted=ske(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...t){this.mount().then(()=>{var r;return(r=this.ref.current)==null?void 0:r.start(...t)})}stop(...t){this.mount().then(()=>{var r;return(r=this.ref.current)==null?void 0:r.stop(...t)})}pulsate(...t){this.mount().then(()=>{var r;return(r=this.ref.current)==null?void 0:r.pulsate(...t)})}}function ake(){return PN.use()}function ske(){let e,t;const r=new Promise((n,a)=>{e=n,t=a});return r.resolve=e,r.reject=t,r}function ike(e){const{className:t,classes:r,pulsate:n=!1,rippleX:a,rippleY:s,rippleSize:i,in:o,onExited:c,timeout:u}=e,[d,f]=S.useState(!1),h=Sr(t,r.ripple,r.rippleVisible,n&&r.ripplePulsate),m={width:i,height:i,top:-(i/2)+s,left:-(i/2)+a},g=Sr(r.child,d&&r.childLeaving,n&&r.childPulsate);return!o&&!d&&f(!0),S.useEffect(()=>{if(!o&&c!=null){const x=setTimeout(c,u);return()=>{clearTimeout(x)}}},[c,o,u]),l.jsx("span",{className:h,style:m,children:l.jsx("span",{className:g})})}const Wu=Ex("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),WO=550,oke=80,lke=XE`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,cke=XE`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,uke=XE`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,dke=fu("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),fke=fu(ike,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Wu.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${lke};
    animation-duration: ${WO}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${Wu.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${Wu.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Wu.childLeaving} {
    opacity: 0;
    animation-name: ${cke};
    animation-duration: ${WO}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${Wu.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${uke};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,Ake=S.forwardRef(function(t,r){const n=Mb({props:t,name:"MuiTouchRipple"}),{center:a=!1,classes:s={},className:i,...o}=n,[c,u]=S.useState([]),d=S.useRef(0),f=S.useRef(null);S.useEffect(()=>{f.current&&(f.current(),f.current=null)},[c]);const h=S.useRef(!1),m=Z4e(),g=S.useRef(null),x=S.useRef(null),v=S.useCallback(T=>{const{pulsate:B,rippleX:j,rippleY:E,rippleSize:N,cb:I}=T;u(L=>[...L,l.jsx(fke,{classes:{ripple:Sr(s.ripple,Wu.ripple),rippleVisible:Sr(s.rippleVisible,Wu.rippleVisible),ripplePulsate:Sr(s.ripplePulsate,Wu.ripplePulsate),child:Sr(s.child,Wu.child),childLeaving:Sr(s.childLeaving,Wu.childLeaving),childPulsate:Sr(s.childPulsate,Wu.childPulsate)},timeout:WO,pulsate:B,rippleX:j,rippleY:E,rippleSize:N},d.current)]),d.current+=1,f.current=I},[s]),y=S.useCallback((T={},B={},j=()=>{})=>{const{pulsate:E=!1,center:N=a||B.pulsate,fakeElement:I=!1}=B;if((T==null?void 0:T.type)==="mousedown"&&h.current){h.current=!1;return}(T==null?void 0:T.type)==="touchstart"&&(h.current=!0);const L=I?null:x.current,D=L?L.getBoundingClientRect():{width:0,height:0,left:0,top:0};let k,P,R;if(N||T===void 0||T.clientX===0&&T.clientY===0||!T.clientX&&!T.touches)k=Math.round(D.width/2),P=Math.round(D.height/2);else{const{clientX:W,clientY:V}=T.touches&&T.touches.length>0?T.touches[0]:T;k=Math.round(W-D.left),P=Math.round(V-D.top)}if(N)R=Math.sqrt((2*D.width**2+D.height**2)/3),R%2===0&&(R+=1);else{const W=Math.max(Math.abs((L?L.clientWidth:0)-k),k)*2+2,V=Math.max(Math.abs((L?L.clientHeight:0)-P),P)*2+2;R=Math.sqrt(W**2+V**2)}T!=null&&T.touches?g.current===null&&(g.current=()=>{v({pulsate:E,rippleX:k,rippleY:P,rippleSize:R,cb:j})},m.start(oke,()=>{g.current&&(g.current(),g.current=null)})):v({pulsate:E,rippleX:k,rippleY:P,rippleSize:R,cb:j})},[a,v,m]),w=S.useCallback(()=>{y({},{pulsate:!0})},[y]),_=S.useCallback((T,B)=>{if(m.clear(),(T==null?void 0:T.type)==="touchend"&&g.current){g.current(),g.current=null,m.start(0,()=>{_(T,B)});return}g.current=null,u(j=>j.length>0?j.slice(1):j),f.current=B},[m]);return S.useImperativeHandle(r,()=>({pulsate:w,start:y,stop:_}),[w,y,_]),l.jsx(dke,{className:Sr(Wu.root,s.root,i),ref:x,...o,children:l.jsx(a8,{component:null,exit:!0,children:c})})});function hke(e){return Lb("MuiButtonBase",e)}const mke=Ex("MuiButtonBase",["root","disabled","focusVisible"]),pke=e=>{const{disabled:t,focusVisible:r,focusVisibleClassName:n,classes:a}=e,i=eC({root:["root",t&&"disabled",r&&"focusVisible"]},hke,a);return r&&n&&(i.root+=` ${n}`),i},gke=fu("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${mke.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),xke=S.forwardRef(function(t,r){const n=Mb({props:t,name:"MuiButtonBase"}),{action:a,centerRipple:s=!1,children:i,className:o,component:c="button",disabled:u=!1,disableRipple:d=!1,disableTouchRipple:f=!1,focusRipple:h=!1,focusVisibleClassName:m,LinkComponent:g="a",onBlur:x,onClick:v,onContextMenu:y,onDragLeave:w,onFocus:_,onFocusVisible:T,onKeyDown:B,onKeyUp:j,onMouseDown:E,onMouseLeave:N,onMouseUp:I,onTouchEnd:L,onTouchMove:D,onTouchStart:k,tabIndex:P=0,TouchRippleProps:R,touchRippleRef:W,type:V,...G}=n,z=S.useRef(null),K=ake(),J=zz(K.ref,W),[te,M]=S.useState(!1);u&&te&&M(!1),S.useImperativeHandle(a,()=>({focusVisible:()=>{M(!0),z.current.focus()}}),[]);const H=K.shouldMount&&!d&&!u;S.useEffect(()=>{te&&h&&!d&&K.pulsate()},[d,h,te,K]);const Y=hh(K,"start",E,f),Z=hh(K,"stop",y,f),ae=hh(K,"stop",w,f),le=hh(K,"stop",I,f),ie=hh(K,"stop",Pe=>{te&&Pe.preventDefault(),N&&N(Pe)},f),ce=hh(K,"start",k,f),Ae=hh(K,"stop",L,f),Fe=hh(K,"stop",D,f),ne=hh(K,"stop",Pe=>{Kz(Pe.target)||M(!1),x&&x(Pe)},!1),_e=_S(Pe=>{z.current||(z.current=Pe.currentTarget),Kz(Pe.target)&&(M(!0),T&&T(Pe)),_&&_(Pe)}),Ie=()=>{const Pe=z.current;return c&&c!=="button"&&!(Pe.tagName==="A"&&Pe.href)},Se=_S(Pe=>{h&&!Pe.repeat&&te&&Pe.key===" "&&K.stop(Pe,()=>{K.start(Pe)}),Pe.target===Pe.currentTarget&&Ie()&&Pe.key===" "&&Pe.preventDefault(),B&&B(Pe),Pe.target===Pe.currentTarget&&Ie()&&Pe.key==="Enter"&&!u&&(Pe.preventDefault(),v&&v(Pe))}),me=_S(Pe=>{h&&Pe.key===" "&&te&&!Pe.defaultPrevented&&K.stop(Pe,()=>{K.pulsate(Pe)}),j&&j(Pe),v&&Pe.target===Pe.currentTarget&&Ie()&&Pe.key===" "&&!Pe.defaultPrevented&&v(Pe)});let Be=c;Be==="button"&&(G.href||G.to)&&(Be=g);const Le={};Be==="button"?(Le.type=V===void 0?"button":V,Le.disabled=u):(!G.href&&!G.to&&(Le.role="button"),u&&(Le["aria-disabled"]=u));const We=zz(r,z),be={...n,centerRipple:s,component:c,disabled:u,disableRipple:d,disableTouchRipple:f,focusRipple:h,tabIndex:P,focusVisible:te},Oe=pke(be);return l.jsxs(gke,{as:Be,className:Sr(Oe.root,o),ownerState:be,onBlur:ne,onClick:v,onContextMenu:Z,onFocus:_e,onKeyDown:Se,onKeyUp:me,onMouseDown:Y,onMouseLeave:ie,onMouseUp:le,onDragLeave:ae,onTouchEnd:Ae,onTouchMove:Fe,onTouchStart:ce,ref:We,tabIndex:u?-1:P,type:V,...Le,...G,children:[i,H?l.jsx(Ake,{ref:J,center:s,...R}):null]})});function hh(e,t,r,n=!1){return _S(a=>(r&&r(a),n||e[t](a),!0))}function vke(e){return typeof e.main=="string"}function bke(e,t=[]){if(!vke(e))return!1;for(const r of t)if(!e.hasOwnProperty(r)||typeof e[r]!="string")return!1;return!0}function i8(e=[]){return([,t])=>t&&bke(t,e)}function yke(e){return Lb("MuiCircularProgress",e)}Ex("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const em=44,XO=XE`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,YO=XE`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,wke=typeof XO!="string"?qL`
        animation: ${XO} 1.4s linear infinite;
      `:null,Eke=typeof YO!="string"?qL`
        animation: ${YO} 1.4s ease-in-out infinite;
      `:null,Cke=e=>{const{classes:t,variant:r,color:n,disableShrink:a}=e,s={root:["root",r,`color${Zs(n)}`],svg:["svg"],circle:["circle",`circle${Zs(r)}`,a&&"circleDisableShrink"]};return eC(s,yke,t)},_ke=fu("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`color${Zs(r.color)}`]]}})(tC(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:wke||{animation:`${XO} 1.4s linear infinite`}},...Object.entries(e.palette).filter(i8()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),Ske=fu("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),Nke=fu("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.circle,t[`circle${Zs(r.variant)}`],r.disableShrink&&t.circleDisableShrink]}})(tC(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:Eke||{animation:`${YO} 1.4s ease-in-out infinite`}}]}))),xae=S.forwardRef(function(t,r){const n=Mb({props:t,name:"MuiCircularProgress"}),{className:a,color:s="primary",disableShrink:i=!1,size:o=40,style:c,thickness:u=3.6,value:d=0,variant:f="indeterminate",...h}=n,m={...n,color:s,disableShrink:i,size:o,thickness:u,value:d,variant:f},g=Cke(m),x={},v={},y={};if(f==="determinate"){const w=2*Math.PI*((em-u)/2);x.strokeDasharray=w.toFixed(3),y["aria-valuenow"]=Math.round(d),x.strokeDashoffset=`${((100-d)/100*w).toFixed(3)}px`,v.transform="rotate(-90deg)"}return l.jsx(_ke,{className:Sr(g.root,a),style:{width:o,height:o,...v,...c},ownerState:m,ref:r,role:"progressbar",...y,...h,children:l.jsx(Ske,{className:g.svg,ownerState:m,viewBox:`${em/2} ${em/2} ${em} ${em}`,children:l.jsx(Nke,{className:g.circle,style:x,ownerState:m,cx:em,cy:em,r:(em-u)/2,fill:"none",strokeWidth:u})})})});function kke(e){return Lb("MuiTypography",e)}Ex("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const Bke={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Tke=H4e(),jke=e=>{const{align:t,gutterBottom:r,noWrap:n,paragraph:a,variant:s,classes:i}=e,o={root:["root",s,e.align!=="inherit"&&`align${Zs(t)}`,r&&"gutterBottom",n&&"noWrap",a&&"paragraph"]};return eC(o,kke,i)},Ike=fu("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.variant&&t[r.variant],r.align!=="inherit"&&t[`align${Zs(r.align)}`],r.noWrap&&t.noWrap,r.gutterBottom&&t.gutterBottom,r.paragraph&&t.paragraph]}})(tC(({theme:e})=>{var t;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([r,n])=>r!=="inherit"&&n&&typeof n=="object").map(([r,n])=>({props:{variant:r},style:n})),...Object.entries(e.palette).filter(i8()).map(([r])=>({props:{color:r},style:{color:(e.vars||e).palette[r].main}})),...Object.entries(((t=e.palette)==null?void 0:t.text)||{}).filter(([,r])=>typeof r=="string").map(([r])=>({props:{color:`text${Zs(r)}`},style:{color:(e.vars||e).palette.text[r]}})),{props:({ownerState:r})=>r.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:r})=>r.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:r})=>r.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:r})=>r.paragraph,style:{marginBottom:16}}]}})),qz={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},L3=S.forwardRef(function(t,r){const{color:n,...a}=Mb({props:t,name:"MuiTypography"}),s=!Bke[n],i=Tke({...a,...s&&{color:n}}),{align:o="inherit",className:c,component:u,gutterBottom:d=!1,noWrap:f=!1,paragraph:h=!1,variant:m="body1",variantMapping:g=qz,...x}=i,v={...i,align:o,color:n,className:c,component:u,gutterBottom:d,noWrap:f,paragraph:h,variant:m,variantMapping:g},y=u||(h?"p":g[m]||qz[m])||"span",w=jke(v);return l.jsx(Ike,{as:y,ref:r,className:Sr(w.root,c),...x,ownerState:v,style:{...o!=="inherit"&&{"--Typography-textAlign":o},...x.style}})}),Fke=Ex("MuiBox",["root"]),Oke=hae(),Wz=ONe({themeId:QL,defaultTheme:Oke,defaultClassName:Fke.root,generateClassName:nae.generate});function Dke(e){return Lb("MuiButton",e)}const Jp=Ex("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),Pke=S.createContext({}),Rke=S.createContext(void 0),Lke=e=>{const{color:t,disableElevation:r,fullWidth:n,size:a,variant:s,loading:i,loadingPosition:o,classes:c}=e,u={root:["root",i&&"loading",s,`${s}${Zs(t)}`,`size${Zs(a)}`,`${s}Size${Zs(a)}`,`color${Zs(t)}`,r&&"disableElevation",n&&"fullWidth",i&&`loadingPosition${Zs(o)}`],startIcon:["icon","startIcon",`iconSize${Zs(a)}`],endIcon:["icon","endIcon",`iconSize${Zs(a)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},d=eC(u,Dke,c);return{...c,...d}},vae=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],Mke=fu(xke,{shouldForwardProp:e=>pae(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`${r.variant}${Zs(r.color)}`],t[`size${Zs(r.size)}`],t[`${r.variant}Size${Zs(r.size)}`],r.color==="inherit"&&t.colorInherit,r.disableElevation&&t.disableElevation,r.fullWidth&&t.fullWidth,r.loading&&t.loading]}})(tC(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],r=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${Jp.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${Jp.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${Jp.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${Jp.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(i8()).map(([n])=>({props:{color:n},style:{"--variant-textColor":(e.vars||e).palette[n].main,"--variant-outlinedColor":(e.vars||e).palette[n].main,"--variant-outlinedBorder":e.alpha((e.vars||e).palette[n].main,.5),"--variant-containedColor":(e.vars||e).palette[n].contrastText,"--variant-containedBg":(e.vars||e).palette[n].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[n].dark,"--variant-textBg":e.alpha((e.vars||e).palette[n].main,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[n].main,"--variant-outlinedBg":e.alpha((e.vars||e).palette[n].main,(e.vars||e).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:r,"--variant-textBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Jp.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Jp.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${Jp.loading}`]:{color:"transparent"}}}]}})),Uke=fu("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.startIcon,r.loading&&t.startIconLoadingStart,t[`iconSize${Zs(r.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...vae]})),Qke=fu("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.endIcon,r.loading&&t.endIconLoadingEnd,t[`iconSize${Zs(r.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...vae]})),Hke=fu("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),Xz=fu("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),Vke=S.forwardRef(function(t,r){const n=S.useContext(Pke),a=S.useContext(Rke),s=ON(n,t),i=Mb({props:s,name:"MuiButton"}),{children:o,color:c="primary",component:u="button",className:d,disabled:f=!1,disableElevation:h=!1,disableFocusRipple:m=!1,endIcon:g,focusVisibleClassName:x,fullWidth:v=!1,id:y,loading:w=null,loadingIndicator:_,loadingPosition:T="center",size:B="medium",startIcon:j,type:E,variant:N="text",...I}=i,L=t4e(y),D=_??l.jsx(xae,{"aria-labelledby":L,color:"inherit",size:16}),k={...i,color:c,component:u,disabled:f,disableElevation:h,disableFocusRipple:m,fullWidth:v,loading:w,loadingIndicator:D,loadingPosition:T,size:B,type:E,variant:N},P=Lke(k),R=(j||w&&T==="start")&&l.jsx(Uke,{className:P.startIcon,ownerState:k,children:j||l.jsx(Xz,{className:P.loadingIconPlaceholder,ownerState:k})}),W=(g||w&&T==="end")&&l.jsx(Qke,{className:P.endIcon,ownerState:k,children:g||l.jsx(Xz,{className:P.loadingIconPlaceholder,ownerState:k})}),V=a||"",G=typeof w=="boolean"?l.jsx("span",{className:P.loadingWrapper,style:{display:"contents"},children:w&&l.jsx(Hke,{className:P.loadingIndicator,ownerState:k,children:D})}):null;return l.jsxs(Mke,{ownerState:k,className:Sr(n.className,P.root,d,V),component:u,disabled:f||w,focusRipple:!m,focusVisibleClassName:Sr(P.focusVisible,x),ref:r,type:E,id:w?L:y,...I,classes:P,children:[R,T!=="end"&&G,o,T==="end"&&G,W]})});var Yz;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(Yz||(Yz={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jz;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(Jz||(Jz={}));var Zz;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Zz||(Zz={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e$=["user","model","function","system"];var t$;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(t$||(t$={}));var r$;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(r$||(r$={}));var n$;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(n$||(n$={}));var a$;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(a$||(a$={}));var o2;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(o2||(o2={}));var s$;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(s$||(s$={}));var i$;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(i$||(i$={}));var o$;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(o$||(o$={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class xv extends dl{constructor(t,r){super(t),this.response=r}}class bae extends dl{constructor(t,r,n,a){super(t),this.status=r,this.statusText=n,this.errorDetails=a}}class Rm extends dl{}class yae extends dl{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zke="https://generativelanguage.googleapis.com",$ke="v1beta",Gke="0.24.1",Kke="genai-js";var ex;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(ex||(ex={}));class qke{constructor(t,r,n,a,s){this.model=t,this.task=r,this.apiKey=n,this.stream=a,this.requestOptions=s}toString(){var t,r;const n=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||$ke;let s=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||zke}/${n}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}function Wke(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${Kke}/${Gke}`),t.join(" ")}async function Xke(e){var t;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",Wke(e.requestOptions)),r.append("x-goog-api-key",e.apiKey);let n=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(a){throw new Rm(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${a.message}`)}for(const[a,s]of n.entries()){if(a==="x-goog-api-key")throw new Rm(`Cannot set reserved header name ${a}`);if(a==="x-goog-api-client")throw new Rm(`Header name ${a} can only be set using the apiClient field`);r.append(a,s)}}return r}async function Yke(e,t,r,n,a,s){const i=new qke(e,t,r,n,s);return{url:i.toString(),fetchOptions:Object.assign(Object.assign({},tBe(s)),{method:"POST",headers:await Xke(i),body:a})}}async function rC(e,t,r,n,a,s={},i=fetch){const{url:o,fetchOptions:c}=await Yke(e,t,r,n,a,s);return Jke(o,c,i)}async function Jke(e,t,r=fetch){let n;try{n=await r(e,t)}catch(a){Zke(a,e)}return n.ok||await eBe(n,e),n}function Zke(e,t){let r=e;throw r.name==="AbortError"?(r=new yae(`Request aborted when fetching ${t.toString()}: ${e.message}`),r.stack=e.stack):e instanceof bae||e instanceof Rm||(r=new dl(`Error fetching from ${t.toString()}: ${e.message}`),r.stack=e.stack),r}async function eBe(e,t){let r="",n;try{const a=await e.json();r=a.error.message,a.error.details&&(r+=` ${JSON.stringify(a.error.details)}`,n=a.error.details)}catch{}throw new bae(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,n)}function tBe(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const r=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>r.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o8(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),SS(e.candidates[0]))throw new xv(`${dm(e)}`,e);return rBe(e)}else if(e.promptFeedback)throw new xv(`Text not available. ${dm(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),SS(e.candidates[0]))throw new xv(`${dm(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),l$(e)[0]}else if(e.promptFeedback)throw new xv(`Function call not available. ${dm(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),SS(e.candidates[0]))throw new xv(`${dm(e)}`,e);return l$(e)}else if(e.promptFeedback)throw new xv(`Function call not available. ${dm(e)}`,e)},e}function rBe(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const i of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)i.text&&s.push(i.text),i.executableCode&&s.push("\n```"+i.executableCode.language+`
`+i.executableCode.code+"\n```\n"),i.codeExecutionResult&&s.push("\n```\n"+i.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function l$(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const i of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)i.functionCall&&s.push(i.functionCall);if(s.length>0)return s}const nBe=[o2.RECITATION,o2.SAFETY,o2.LANGUAGE];function SS(e){return!!e.finishReason&&nBe.includes(e.finishReason)}function dm(e){var t,r,n;let a="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)a+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(a+=` due to ${e.promptFeedback.blockReason}`),!((r=e.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(a+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((n=e.candidates)===null||n===void 0)&&n[0]){const s=e.candidates[0];SS(s)&&(a+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(a+=`: ${s.finishMessage}`))}return a}function $2(e){return this instanceof $2?(this.v=e,this):new $2(e)}function aBe(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,s=[];return a={},i("next"),i("throw"),i("return"),a[Symbol.asyncIterator]=function(){return this},a;function i(h){n[h]&&(a[h]=function(m){return new Promise(function(g,x){s.push([h,m,g,x])>1||o(h,m)})})}function o(h,m){try{c(n[h](m))}catch(g){f(s[0][3],g)}}function c(h){h.value instanceof $2?Promise.resolve(h.value.v).then(u,d):f(s[0][2],h)}function u(h){o("next",h)}function d(h){o("throw",h)}function f(h,m){h(m),s.shift(),s.length&&o(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c$=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function sBe(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=lBe(t),[n,a]=r.tee();return{stream:oBe(n),response:iBe(a)}}async function iBe(e){const t=[],r=e.getReader();for(;;){const{done:n,value:a}=await r.read();if(n)return o8(cBe(t));t.push(a)}}function oBe(e){return aBe(this,arguments,function*(){const r=e.getReader();for(;;){const{value:n,done:a}=yield $2(r.read());if(a)break;yield yield $2(o8(n))}})}function lBe(e){const t=e.getReader();return new ReadableStream({start(n){let a="";return s();function s(){return t.read().then(({value:i,done:o})=>{if(o){if(a.trim()){n.error(new dl("Failed to parse stream"));return}n.close();return}a+=i;let c=a.match(c$),u;for(;c;){try{u=JSON.parse(c[1])}catch{n.error(new dl(`Error parsing JSON response: "${c[1]}"`));return}n.enqueue(u),a=a.substring(c[0].length),c=a.match(c$)}return s()}).catch(i=>{let o=i;throw o.stack=i.stack,o.name==="AbortError"?o=new yae("Request aborted when reading from the stream"):o=new dl("Error reading from the stream"),o})}}})}function cBe(e){const t=e[e.length-1],r={promptFeedback:t==null?void 0:t.promptFeedback};for(const n of e){if(n.candidates){let a=0;for(const s of n.candidates)if(r.candidates||(r.candidates=[]),r.candidates[a]||(r.candidates[a]={index:a}),r.candidates[a].citationMetadata=s.citationMetadata,r.candidates[a].groundingMetadata=s.groundingMetadata,r.candidates[a].finishReason=s.finishReason,r.candidates[a].finishMessage=s.finishMessage,r.candidates[a].safetyRatings=s.safetyRatings,s.content&&s.content.parts){r.candidates[a].content||(r.candidates[a].content={role:s.content.role||"user",parts:[]});const i={};for(const o of s.content.parts)o.text&&(i.text=o.text),o.functionCall&&(i.functionCall=o.functionCall),o.executableCode&&(i.executableCode=o.executableCode),o.codeExecutionResult&&(i.codeExecutionResult=o.codeExecutionResult),Object.keys(i).length===0&&(i.text=""),r.candidates[a].content.parts.push(i)}a++}n.usageMetadata&&(r.usageMetadata=n.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wae(e,t,r,n){const a=await rC(t,ex.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(r),n);return sBe(a)}async function Eae(e,t,r,n){const s=await(await rC(t,ex.GENERATE_CONTENT,e,!1,JSON.stringify(r),n)).json();return{response:o8(s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cae(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function G2(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const r of e)typeof r=="string"?t.push({text:r}):t.push(r);return uBe(t)}function uBe(e){const t={role:"user",parts:[]},r={role:"function",parts:[]};let n=!1,a=!1;for(const s of e)"functionResponse"in s?(r.parts.push(s),a=!0):(t.parts.push(s),n=!0);if(n&&a)throw new dl("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!a)throw new dl("No content is provided for sending chat message.");return n?t:r}function dBe(e,t){var r;let n={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(r=t==null?void 0:t.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const a=e.generateContentRequest!=null;if(e.contents){if(a)throw new Rm("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=e.contents}else if(a)n=Object.assign(Object.assign({},n),e.generateContentRequest);else{const s=G2(e);n.contents=[s]}return{generateContentRequest:n}}function u$(e){let t;return e.contents?t=e:t={contents:[G2(e)]},e.systemInstruction&&(t.systemInstruction=Cae(e.systemInstruction)),t}function fBe(e){return typeof e=="string"||Array.isArray(e)?{content:G2(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d$=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],ABe={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function hBe(e){let t=!1;for(const r of e){const{role:n,parts:a}=r;if(!t&&n!=="user")throw new dl(`First content should be with role 'user', got ${n}`);if(!e$.includes(n))throw new dl(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(e$)}`);if(!Array.isArray(a))throw new dl("Content should have 'parts' property with an array of Parts");if(a.length===0)throw new dl("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const o of a)for(const c of d$)c in o&&(s[c]+=1);const i=ABe[n];for(const o of d$)if(!i.includes(o)&&s[o]>0)throw new dl(`Content with role '${n}' can't contain '${o}' part`);t=!0}}function f$(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const r=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const n of r.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A$="SILENT_ERROR";class mBe{constructor(t,r,n,a={}){this.model=r,this.params=n,this._requestOptions=a,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,n!=null&&n.history&&(hBe(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,r={}){var n,a,s,i,o,c;await this._sendPromise;const u=G2(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r);let h;return this._sendPromise=this._sendPromise.then(()=>Eae(this._apiKey,this.model,d,f)).then(m=>{var g;if(f$(m.response)){this._history.push(u);const x=Object.assign({parts:[],role:"model"},(g=m.response.candidates)===null||g===void 0?void 0:g[0].content);this._history.push(x)}else{const x=dm(m.response);x&&console.warn(`sendMessage() was unsuccessful. ${x}. Inspect response object for details.`)}h=m}).catch(m=>{throw this._sendPromise=Promise.resolve(),m}),await this._sendPromise,h}async sendMessageStream(t,r={}){var n,a,s,i,o,c;await this._sendPromise;const u=G2(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r),h=wae(this._apiKey,this.model,d,f);return this._sendPromise=this._sendPromise.then(()=>h).catch(m=>{throw new Error(A$)}).then(m=>m.response).then(m=>{if(f$(m)){this._history.push(u);const g=Object.assign({},m.candidates[0].content);g.role||(g.role="model"),this._history.push(g)}else{const g=dm(m);g&&console.warn(`sendMessageStream() was unsuccessful. ${g}. Inspect response object for details.`)}}).catch(m=>{m.message!==A$&&console.error(m)}),h}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pBe(e,t,r,n){return(await rC(t,ex.COUNT_TOKENS,e,!1,JSON.stringify(r),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gBe(e,t,r,n){return(await rC(t,ex.EMBED_CONTENT,e,!1,JSON.stringify(r),n)).json()}async function xBe(e,t,r,n){const a=r.requests.map(i=>Object.assign(Object.assign({},i),{model:t}));return(await rC(t,ex.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:a}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h${constructor(t,r,n={}){this.apiKey=t,this._requestOptions=n,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=Cae(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(t,r={}){var n;const a=u$(t),s=Object.assign(Object.assign({},this._requestOptions),r);return Eae(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}async generateContentStream(t,r={}){var n;const a=u$(t),s=Object.assign(Object.assign({},this._requestOptions),r);return wae(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}startChat(t){var r;return new mBe(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},t),this._requestOptions)}async countTokens(t,r={}){const n=dBe(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),a=Object.assign(Object.assign({},this._requestOptions),r);return pBe(this.apiKey,this.model,n,a)}async embedContent(t,r={}){const n=fBe(t),a=Object.assign(Object.assign({},this._requestOptions),r);return gBe(this.apiKey,this.model,n,a)}async batchEmbedContents(t,r={}){const n=Object.assign(Object.assign({},this._requestOptions),r);return xBe(this.apiKey,this.model,t,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(t){this.apiKey=t}getGenerativeModel(t,r){if(!t.model)throw new dl("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new h$(this.apiKey,t,r)}getGenerativeModelFromCachedContent(t,r,n){if(!t.name)throw new Rm("Cached content must contain a `name` field.");if(!t.model)throw new Rm("Cached content must contain a `model` field.");const a=["model","systemInstruction"];for(const i of a)if(r!=null&&r[i]&&t[i]&&(r==null?void 0:r[i])!==t[i]){if(i==="model"){const o=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,c=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(o===c)continue}throw new Rm(`Different value for "${i}" specified in modelParams (${r[i]}) and cachedContent (${t[i]})`)}const s=Object.assign(Object.assign({},r),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new h$(this.apiKey,s,n)}}const vBe=()=>{const[e,t]=S.useState(!1),[r,n]=S.useState(null),[a,s]=S.useState(null),i=async()=>{t(!0),n(null);try{const h=(await(await new ps(wne).getGenerativeModel({model:"gemini-pro"}).generateContent(`Genera un horario semanal para un curso técnico profesional. 
                     El horario debe incluir:
                     - 5 días (Lunes a Viernes)
                     - 8 bloques por día
                     - Asignaturas técnicas y generales
                     Retorna SOLO un objeto JSON con la siguiente estructura:
                     {
                       "horario": {
                         "lunes": {"bloque1": "asignatura", ...},
                         "martes": {"bloque1": "asignatura", ...},
                         ...
                       }
                     }`)).response).text();try{const m=h.replace(/```json\n?|\n?```/g,"").trim(),g=JSON.parse(m);s(g)}catch(m){console.error("Error parsing JSON:",m),n("Error al procesar el horario generado")}}catch(o){console.error("Error calling Gemini API:",o),n("Error al generar el horario")}finally{t(!1)}};return l.jsxs(Wz,{sx:{p:3},children:[l.jsx(L3,{variant:"h4",gutterBottom:!0,children:"Generador de Horarios"}),l.jsx(Vke,{variant:"contained",onClick:i,disabled:e,sx:{mb:3},children:e?"Generando...":"Generar Horario"}),e&&l.jsx(Wz,{sx:{display:"flex",justifyContent:"center",my:3},children:l.jsx(xae,{})}),r&&l.jsx(L3,{color:"error",sx:{my:2},children:r}),a&&l.jsxs(nke,{sx:{p:3,mt:2},children:[l.jsx(L3,{variant:"h6",gutterBottom:!0,children:"Horario Generado:"}),l.jsx("pre",{style:{whiteSpace:"pre-wrap"},children:JSON.stringify(a,null,2)})]})]})},hB="acciones_pedagogicas",bBe=(e,t)=>{var a,s,i,o;if(t.dimension||t.subdimension||t.indicadores||t.avance!==void 0)return{id:e,fechaRegistro:t.fechaRegistro??"",responsable:t.responsable??"",dimension:t.dimension??"",subdimension:t.subdimension??"",descripcion:t.descripcion??"",objetivos:t.objetivos??"",indicadores:Array.isArray(t.indicadores)?t.indicadores:t.indicadores?String(t.indicadores).split(",").map(c=>c.trim()).filter(Boolean):[],cobertura:t.cobertura??"",fechaInicio:t.fechaInicio??"",fechaCumplimiento:t.fechaCumplimiento??"",estado:t.estado??"Pendiente",avance:typeof t.avance=="number"?t.avance:0,enlaces:Array.isArray(t.enlaces)?t.enlaces:t.enlaces?[String(t.enlaces)]:[],creadoTs:typeof t.creadoTs=="number"?t.creadoTs:((s=(a=t.creadoTs)==null?void 0:a.toMillis)==null?void 0:s.call(a))??Date.now()};const r=t,n=r.enlaceDocumento?[String(r.enlaceDocumento)]:[];return{id:e,fechaRegistro:r.fechaRegistro??"",responsable:r.responsable??"",dimension:r.area??"",subdimension:"",descripcion:r.descripcion??"",objetivos:"",indicadores:[],cobertura:"",fechaInicio:"",fechaCumplimiento:r.fechaCumplimiento??"",estado:r.estado??"Pendiente",avance:0,enlaces:n,creadoTs:typeof r.creadoTs=="number"?r.creadoTs:((o=(i=r.creadoTs)==null?void 0:i.toMillis)==null?void 0:o.call(i))??Date.now()}};async function yBe(){const e=[];try{const t=$t(wt(ht,hB),xr("creadoTs","desc"));(await Hn(t)).docs.forEach(n=>e.push(bBe(n.id,n.data())))}catch{}return e.sort((t,r)=>(r.creadoTs??0)-(t.creadoTs??0))}async function wBe(e){const t={fechaRegistro:e.fechaRegistro??new Date().toISOString().slice(0,10),responsable:e.responsable??"",dimension:e.dimension??e.area??"",subdimension:e.subdimension??"",descripcion:e.descripcion??"",objetivos:e.objetivos??"",indicadores:Array.isArray(e.indicadores)?e.indicadores:e.indicadores?String(e.indicadores).split(",").map(r=>r.trim()).filter(Boolean):[],cobertura:e.cobertura??"",fechaInicio:e.fechaInicio??"",fechaCumplimiento:e.fechaCumplimiento??"",estado:e.estado??"Pendiente",avance:typeof e.avance=="number"?e.avance:0,enlaces:Array.isArray(e.enlaces)?e.enlaces:e.enlaces?[String(e.enlaces)]:e.enlaceDocumento?[String(e.enlaceDocumento)]:[],creadoTs:ir.now()};await _n(wt(ht,hB),t)}async function EBe(e,t){const r=cr(wt(ht,hB),e),n={...t};n.area&&!n.dimension&&(n.dimension=n.area,delete n.area),n.enlaceDocumento&&(n.enlaces=[String(n.enlaceDocumento)],delete n.enlaceDocumento),Array.isArray(n.indicadores)===!1&&typeof n.indicadores=="string"&&(n.indicadores=String(n.indicadores).split(",").map(a=>a.trim()).filter(Boolean)),await du(r,n)}async function CBe(e){const t=cr(wt(ht,hB),e);await is(t)}var M3={},U3={},m$;function _Be(){return m$||(m$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t}(U3)),U3}var Q3={},p$;function _ae(){return p$||(p$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t}(Q3)),Q3}var H3={},g$;function Sae(){return g$||(g$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t}(H3)),H3}var V3={},x$;function l8(){return x$||(x$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],a=r.length;if(a===0)return n;let s=0,i="",o="",c=!1;for(r.charCodeAt(0)===46&&(n.push(""),s++);s<a;){const u=r[s];o?u==="\\"&&s+1<a?(s++,i+=r[s]):u===o?o="":i+=u:c?u==='"'||u==="'"?o=u:u==="]"?(c=!1,n.push(i),i=""):i+=u:u==="["?(c=!0,i&&(n.push(i),i="")):u==="."?i&&(n.push(i),i=""):i+=u,s++}return i&&n.push(i),n}e.toPath=t}(V3)),V3}var v$;function c8(){return v$||(v$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_Be(),r=_ae(),n=Sae(),a=l8();function s(o,c,u){if(o==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?r.isDeepKey(c)?s(o,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=o[c];return d===void 0?u:d}default:{if(Array.isArray(c))return i(o,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?u:d}}}function i(o,c,u){if(c.length===0)return u;let d=o;for(let f=0;f<c.length;f++){if(d==null||t.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}e.get=s}(M3)),M3}var z3,b$;function SBe(){return b$||(b$=1,z3=c8().get),z3}var NBe=SBe();const tp=Ll(NBe);var kBe=Vne(),oo=e=>e===0?0:e>0?1:-1,su=e=>typeof e=="number"&&e!=+e,xg=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,fr=e=>(typeof e=="number"||e instanceof Number)&&!su(e),TA=e=>fr(e)||typeof e=="string",BBe=0,K2=e=>{var t=++BBe;return"".concat(e||"").concat(t)},Pl=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!fr(t)&&typeof t!="string")return n;var s;if(xg(t)){if(r==null)return n;var i=t.indexOf("%");s=r*parseFloat(t.slice(0,i))/100}else s=+t;return su(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},Nae=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1},t1=(e,t)=>fr(e)&&fr(t)?r=>e+r*(t-e):()=>t;function vv(e,t,r){return fr(e)&&fr(t)?e+r*(t-e):t}function TBe(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):tp(n,t))===r)}var Rs=e=>e===null||typeof e>"u",nC=e=>Rs(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),jBe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function u8(e){if(typeof e!="string")return!1;var t=jBe;return t.includes(e)}var IBe=["viewBox","children"],y$=["points","pathLength"],$3={svg:IBe,polygon:y$,polyline:y$},d8=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(S.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{u8(a)&&(n[a]=s=>r[a](r,s))}),n},FBe=(e,t,r)=>n=>(e(t,r,n),null),Cx=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var s=e[a];u8(a)&&typeof s=="function"&&(n||(n={}),n[a]=FBe(s,t,r))}),n},OBe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function kae(e){if(typeof e!="string")return!1;var t=OBe;return t.includes(e)}function vl(e){var t=Object.entries(e).filter(r=>{var[n]=r;return kae(n)});return Object.fromEntries(t)}var w$=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",E$=null,G3=null,Bae=e=>{if(e===E$&&Array.isArray(G3))return G3;var t=[];return S.Children.forEach(e,r=>{Rs(r)||(kBe.isFragment(r)?t=t.concat(Bae(r.props.children)):t.push(r))}),G3=t,E$=e,t};function aC(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>w$(a)):n=[w$(t)],Bae(e).forEach(a=>{var s=tp(a,"type.displayName")||tp(a,"type.name");n.indexOf(s)!==-1&&r.push(a)}),r}var DBe=(e,t,r,n)=>{var a;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(a=n&&($3==null?void 0:$3[n]))!==null&&a!==void 0?a:[],i=t.startsWith("data-"),o=typeof e!="function"&&(!!n&&s.includes(t)||kae(t)),c=!!r&&u8(t);return i||o||c},Yn=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(S.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(s=>{var i;DBe((i=n)===null||i===void 0?void 0:i[s],s,t,r)&&(a[s]=n[s])}),a},PBe=["children","width","height","viewBox","className","style","title","desc"];function JO(){return JO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},JO.apply(null,arguments)}function RBe(e,t){if(e==null)return{};var r,n,a=LBe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function LBe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var f8=S.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:s,className:i,style:o,title:c,desc:u}=e,d=RBe(e,PBe),f=s||{width:n,height:a,x:0,y:0},h=Sr("recharts-surface",i);return S.createElement("svg",JO({},Yn(d,!0,"svg"),{className:h,width:n,height:a,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),S.createElement("title",null,c),S.createElement("desc",null,u),r)}),MBe=["children","className"];function ZO(){return ZO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ZO.apply(null,arguments)}function UBe(e,t){if(e==null)return{};var r,n,a=QBe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function QBe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var gs=S.forwardRef((e,t)=>{var{children:r,className:n}=e,a=UBe(e,MBe),s=Sr("recharts-layer",n);return S.createElement("g",ZO({className:s},Yn(a,!0),{ref:t}),r)}),Tae=S.createContext(null),HBe=()=>S.useContext(Tae);function Ua(e){return function(){return e}}const jae=Math.cos,RN=Math.sin,hf=Math.sqrt,LN=Math.PI,mB=2*LN,eD=Math.PI,tD=2*eD,ag=1e-6,VBe=tD-ag;function Iae(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function zBe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Iae;const r=10**t;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class $Be{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Iae:zBe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,s,i){this._append`C${+t},${+r},${+n},${+a},${this._x1=+s},${this._y1=+i}`}arcTo(t,r,n,a,s){if(t=+t,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let i=this._x1,o=this._y1,c=n-t,u=a-r,d=i-t,f=o-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>ag)if(!(Math.abs(f*c-u*d)>ag)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-i,g=a-o,x=c*c+u*u,v=m*m+g*g,y=Math.sqrt(x),w=Math.sqrt(h),_=s*Math.tan((eD-Math.acos((x+h-v)/(2*y*w)))/2),T=_/w,B=_/y;Math.abs(T-1)>ag&&this._append`L${t+T*d},${r+T*f}`,this._append`A${s},${s},0,0,${+(f*m>d*g)},${this._x1=t+B*c},${this._y1=r+B*u}`}}arc(t,r,n,a,s,i){if(t=+t,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(a),c=n*Math.sin(a),u=t+o,d=r+c,f=1^i,h=i?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>ag||Math.abs(this._y1-d)>ag)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%tD+tD),h>VBe?this._append`A${n},${n},0,1,${f},${t-o},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>ag&&this._append`A${n},${n},0,${+(h>=eD)},${f},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function A8(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new $Be(t)}function h8(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Fae(e){this._context=e}Fae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function pB(e){return new Fae(e)}function Oae(e){return e[0]}function Dae(e){return e[1]}function Pae(e,t){var r=Ua(!0),n=null,a=pB,s=null,i=A8(o);e=typeof e=="function"?e:e===void 0?Oae:Ua(e),t=typeof t=="function"?t:t===void 0?Dae:Ua(t);function o(c){var u,d=(c=h8(c)).length,f,h=!1,m;for(n==null&&(s=a(m=i())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(f,u,c),+t(f,u,c));if(m)return s=null,m+""||null}return o.x=function(c){return arguments.length?(e=typeof c=="function"?c:Ua(+c),o):e},o.y=function(c){return arguments.length?(t=typeof c=="function"?c:Ua(+c),o):t},o.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Ua(!!c),o):r},o.curve=function(c){return arguments.length?(a=c,n!=null&&(s=a(n)),o):a},o.context=function(c){return arguments.length?(c==null?n=s=null:s=a(n=c),o):n},o}function W_(e,t,r){var n=null,a=Ua(!0),s=null,i=pB,o=null,c=A8(u);e=typeof e=="function"?e:e===void 0?Oae:Ua(+e),t=typeof t=="function"?t:Ua(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?Dae:Ua(+r);function u(f){var h,m,g,x=(f=h8(f)).length,v,y=!1,w,_=new Array(x),T=new Array(x);for(s==null&&(o=i(w=c())),h=0;h<=x;++h){if(!(h<x&&a(v=f[h],h,f))===y)if(y=!y)m=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),g=h-1;g>=m;--g)o.point(_[g],T[g]);o.lineEnd(),o.areaEnd()}y&&(_[h]=+e(v,h,f),T[h]=+t(v,h,f),o.point(n?+n(v,h,f):_[h],r?+r(v,h,f):T[h]))}if(w)return o=null,w+""||null}function d(){return Pae().defined(a).curve(i).context(s)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Ua(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Ua(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Ua(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Ua(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Ua(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Ua(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Ua(!!f),u):a},u.curve=function(f){return arguments.length?(i=f,s!=null&&(o=i(s)),u):i},u.context=function(f){return arguments.length?(f==null?s=o=null:o=i(s=f),u):s},u}class Rae{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function GBe(e){return new Rae(e,!0)}function KBe(e){return new Rae(e,!1)}const m8={draw(e,t){const r=hf(t/LN);e.moveTo(r,0),e.arc(0,0,r,0,mB)}},qBe={draw(e,t){const r=hf(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},Lae=hf(1/3),WBe=Lae*2,XBe={draw(e,t){const r=hf(t/WBe),n=r*Lae;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},YBe={draw(e,t){const r=hf(t),n=-r/2;e.rect(n,n,r,r)}},JBe=.8908130915292852,Mae=RN(LN/10)/RN(7*LN/10),ZBe=RN(mB/10)*Mae,eTe=-jae(mB/10)*Mae,tTe={draw(e,t){const r=hf(t*JBe),n=ZBe*r,a=eTe*r;e.moveTo(0,-r),e.lineTo(n,a);for(let s=1;s<5;++s){const i=mB*s/5,o=jae(i),c=RN(i);e.lineTo(c*r,-o*r),e.lineTo(o*n-c*a,c*n+o*a)}e.closePath()}},K3=hf(3),rTe={draw(e,t){const r=-hf(t/(K3*3));e.moveTo(0,r*2),e.lineTo(-K3*r,-r),e.lineTo(K3*r,-r),e.closePath()}},Ru=-.5,Lu=hf(3)/2,rD=1/hf(12),nTe=(rD/2+1)*3,aTe={draw(e,t){const r=hf(t/nTe),n=r/2,a=r*rD,s=n,i=r*rD+r,o=-s,c=i;e.moveTo(n,a),e.lineTo(s,i),e.lineTo(o,c),e.lineTo(Ru*n-Lu*a,Lu*n+Ru*a),e.lineTo(Ru*s-Lu*i,Lu*s+Ru*i),e.lineTo(Ru*o-Lu*c,Lu*o+Ru*c),e.lineTo(Ru*n+Lu*a,Ru*a-Lu*n),e.lineTo(Ru*s+Lu*i,Ru*i-Lu*s),e.lineTo(Ru*o+Lu*c,Ru*c-Lu*o),e.closePath()}};function sTe(e,t){let r=null,n=A8(a);e=typeof e=="function"?e:Ua(e||m8),t=typeof t=="function"?t:Ua(t===void 0?64:+t);function a(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:Ua(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:Ua(+s),a):t},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function MN(){}function UN(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Uae(e){this._context=e}Uae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:UN(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:UN(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function iTe(e){return new Uae(e)}function Qae(e){this._context=e}Qae.prototype={areaStart:MN,areaEnd:MN,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:UN(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function oTe(e){return new Qae(e)}function Hae(e){this._context=e}Hae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:UN(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function lTe(e){return new Hae(e)}function Vae(e){this._context=e}Vae.prototype={areaStart:MN,areaEnd:MN,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function cTe(e){return new Vae(e)}function C$(e){return e<0?-1:1}function _$(e,t,r){var n=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(n||a<0&&-0),i=(r-e._y1)/(a||n<0&&-0),o=(s*a+i*n)/(n+a);return(C$(s)+C$(i))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs(o))||0}function S$(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function q3(e,t,r){var n=e._x0,a=e._y0,s=e._x1,i=e._y1,o=(s-n)/3;e._context.bezierCurveTo(n+o,a+o*t,s-o,i-o*r,s,i)}function QN(e){this._context=e}QN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:q3(this,this._t0,S$(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,q3(this,S$(this,r=_$(this,e,t)),r);break;default:q3(this,this._t0,r=_$(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function zae(e){this._context=new $ae(e)}(zae.prototype=Object.create(QN.prototype)).point=function(e,t){QN.prototype.point.call(this,t,e)};function $ae(e){this._context=e}$ae.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,s){this._context.bezierCurveTo(t,e,n,r,s,a)}};function uTe(e){return new QN(e)}function dTe(e){return new zae(e)}function Gae(e){this._context=e}Gae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=N$(e),a=N$(t),s=0,i=1;i<r;++s,++i)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],e[i],t[i]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function N$(e){var t,r=e.length-1,n,a=new Array(r),s=new Array(r),i=new Array(r);for(a[0]=0,s[0]=2,i[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,s[t]=4,i[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,s[r-1]=7,i[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/s[t-1],s[t]-=n,i[t]-=n*i[t-1];for(a[r-1]=i[r-1]/s[r-1],t=r-2;t>=0;--t)a[t]=(i[t]-a[t+1])/s[t];for(s[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function fTe(e){return new Gae(e)}function gB(e,t){this._context=e,this._t=t}gB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function ATe(e){return new gB(e,.5)}function hTe(e){return new gB(e,0)}function mTe(e){return new gB(e,1)}function W1(e,t){if((i=e.length)>1)for(var r=1,n,a,s=e[t[0]],i,o=s.length;r<i;++r)for(a=s,s=e[t[r]],n=0;n<o;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function nD(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function pTe(e,t){return e[t]}function gTe(e){const t=[];return t.key=e,t}function xTe(){var e=Ua([]),t=nD,r=W1,n=pTe;function a(s){var i=Array.from(e.apply(this,arguments),gTe),o,c=i.length,u=-1,d;for(const f of s)for(o=0,++u;o<c;++o)(i[o][u]=[0,+n(f,i[o].key,u,s)]).data=f;for(o=0,d=h8(t(i));o<c;++o)i[d[o]].index=o;return r(i,d),i}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Ua(Array.from(s)),a):e},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:Ua(+s),a):n},a.order=function(s){return arguments.length?(t=s==null?nD:typeof s=="function"?s:Ua(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(r=s??W1,a):r},a}function vTe(e,t){if((n=e.length)>0){for(var r,n,a=0,s=e[0].length,i;a<s;++a){for(i=r=0;r<n;++r)i+=e[r][a][1]||0;if(i)for(r=0;r<n;++r)e[r][a][1]/=i}W1(e,t)}}function bTe(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,s=n.length;r<s;++r){for(var i=0,o=0;i<a;++i)o+=e[i][r][1]||0;n[r][1]+=n[r][0]=-o/2}W1(e,t)}}function yTe(e,t){if(!(!((i=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,s,i;n<s;++n){for(var o=0,c=0,u=0;o<i;++o){for(var d=e[t[o]],f=d[n][1]||0,h=d[n-1][1]||0,m=(f-h)/2,g=0;g<o;++g){var x=e[t[g]],v=x[n][1]||0,y=x[n-1][1]||0;m+=v-y}c+=f,u+=m*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,W1(e,t)}}var wTe=["type","size","sizeType"];function aD(){return aD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},aD.apply(null,arguments)}function k$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function B$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k$(Object(r),!0).forEach(function(n){ETe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ETe(e,t,r){return(t=CTe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CTe(e){var t=_Te(e,"string");return typeof t=="symbol"?t:t+""}function _Te(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function STe(e,t){if(e==null)return{};var r,n,a=NTe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function NTe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Kae={symbolCircle:m8,symbolCross:qBe,symbolDiamond:XBe,symbolSquare:YBe,symbolStar:tTe,symbolTriangle:rTe,symbolWye:aTe},kTe=Math.PI/180,BTe=e=>{var t="symbol".concat(nC(e));return Kae[t]||m8},TTe=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*kTe;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},jTe=(e,t)=>{Kae["symbol".concat(nC(e))]=t},p8=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=STe(e,wTe),s=B$(B$({},a),{},{type:t,size:r,sizeType:n}),i=()=>{var f=BTe(t),h=sTe().type(f).size(TTe(r,n,t));return h()},{className:o,cx:c,cy:u}=s,d=Yn(s,!0);return c===+c&&u===+u&&r===+r?S.createElement("path",aD({},d,{className:Sr("recharts-symbols",o),transform:"translate(".concat(c,", ").concat(u,")"),d:i()})):null};p8.registerSymbol=jTe;function sD(){return sD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sD.apply(null,arguments)}function T$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ITe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T$(Object(r),!0).forEach(function(n){g8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function g8(e,t,r){return(t=FTe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FTe(e){var t=OTe(e,"string");return typeof t=="symbol"?t:t+""}function OTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mu=32;class x8 extends S.PureComponent{renderIcon(t,r){var{inactiveColor:n}=this.props,a=Mu/2,s=Mu/6,i=Mu/3,o=t.inactive?n:t.color,c=r??t.type;if(c==="none")return null;if(c==="plainline")return S.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:a,x2:Mu,y2:a,className:"recharts-legend-icon"});if(c==="line")return S.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(a,"h").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*i,",").concat(a,`
            H`).concat(Mu,"M").concat(2*i,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(i,",").concat(a),className:"recharts-legend-icon"});if(c==="rect")return S.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(Mu/8,"h").concat(Mu,"v").concat(Mu*3/4,"h").concat(-Mu,"z"),className:"recharts-legend-icon"});if(S.isValidElement(t.legendIcon)){var u=ITe({},t);return delete u.legendIcon,S.cloneElement(t.legendIcon,u)}return S.createElement(p8,{fill:o,cx:a,cy:a,size:Mu,sizeType:"diameter",type:c})}renderItems(){var{payload:t,iconSize:r,layout:n,formatter:a,inactiveColor:s,iconType:i}=this.props,o={x:0,y:0,width:Mu,height:Mu},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((d,f)=>{var h=d.formatter||a,m=Sr({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var g=d.inactive?s:d.color,x=h?h(d.value,d,f):d.value;return S.createElement("li",sD({className:m,style:c,key:"legend-item-".concat(f)},Cx(this.props,d,f)),S.createElement(f8,{width:r,height:r,viewBox:o,style:u,"aria-label":"".concat(x," legend icon")},this.renderIcon(d,i)),S.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},x))})}render(){var{payload:t,layout:r,align:n}=this.props;if(!t||!t.length)return null;var a={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return S.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}g8(x8,"displayName","Legend");g8(x8,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var W3={},X3={},j$;function DTe(){return j$||(j$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let s=0;s<r.length;s++){const i=r[s],o=n(i);a.has(o)||a.set(o,i)}return Array.from(a.values())}e.uniqBy=t}(X3)),X3}var Y3={},I$;function xB(){return I$||(I$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t}(Y3)),Y3}var J3={},Z3={},eI={},F$;function PTe(){return F$||(F$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t}(eI)),eI}var O$;function v8(){return O$||(O$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PTe();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r}(Z3)),Z3}var tI={},D$;function RTe(){return D$||(D$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t}(tI)),tI}var P$;function LTe(){return P$||(P$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=v8(),r=RTe();function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n}(J3)),J3}var rI={},nI={},R$;function MTe(){return R$||(R$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=c8();function r(n){return function(a){return t.get(a,n)}}e.property=r}(nI)),nI}var aI={},sI={},iI={},oI={},L$;function qae(){return L$||(L$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t}(oI)),oI}var lI={},M$;function Wae(){return M$||(M$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t}(lI)),lI}var cI={},U$;function b8(){return U$||(U$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t}(cI)),cI}var Q$;function UTe(){return Q$||(Q$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=y8(),r=qae(),n=Wae(),a=b8();function s(f,h,m){return typeof m!="function"?t.isMatch(f,h):i(f,h,function g(x,v,y,w,_,T){const B=m(x,v,y,w,_,T);return B!==void 0?!!B:i(x,v,g,T)},new Map)}function i(f,h,m,g){if(h===f)return!0;switch(typeof h){case"object":return o(f,h,m,g);case"function":return Object.keys(h).length>0?i(f,{...h},m,g):a.eq(f,h);default:return r.isObject(f)?typeof h=="string"?h==="":!0:a.eq(f,h)}}function o(f,h,m,g){if(h==null)return!0;if(Array.isArray(h))return u(f,h,m,g);if(h instanceof Map)return c(f,h,m,g);if(h instanceof Set)return d(f,h,m,g);const x=Object.keys(h);if(f==null)return x.length===0;if(x.length===0)return!0;if(g&&g.has(h))return g.get(h)===f;g&&g.set(h,f);try{for(let v=0;v<x.length;v++){const y=x[v];if(!n.isPrimitive(f)&&!(y in f)||h[y]===void 0&&f[y]!==void 0||h[y]===null&&f[y]!==null||!m(f[y],h[y],y,f,h,g))return!1}return!0}finally{g&&g.delete(h)}}function c(f,h,m,g){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[x,v]of h.entries()){const y=f.get(x);if(m(y,v,x,f,h,g)===!1)return!1}return!0}function u(f,h,m,g){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const x=new Set;for(let v=0;v<h.length;v++){const y=h[v];let w=!1;for(let _=0;_<f.length;_++){if(x.has(_))continue;const T=f[_];let B=!1;if(m(T,y,v,f,h,g)&&(B=!0),B){x.add(_),w=!0;break}}if(!w)return!1}return!0}function d(f,h,m,g){return h.size===0?!0:f instanceof Set?u([...f],[...h],m,g):!1}e.isMatchWith=s,e.isSetMatch=d}(iI)),iI}var H$;function y8(){return H$||(H$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UTe();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r}(sI)),sI}var uI={},dI={},fI={},V$;function Xae(){return V$||(V$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t}(fI)),fI}var AI={},z$;function w8(){return z$||(z$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t}(AI)),AI}var hI={},$$;function E8(){return $$||($$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",i="[object Symbol]",o="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",m="[object Object]",g="[object Error]",x="[object DataView]",v="[object Uint8Array]",y="[object Uint8ClampedArray]",w="[object Uint16Array]",_="[object Uint32Array]",T="[object BigUint64Array]",B="[object Int8Array]",j="[object Int16Array]",E="[object Int32Array]",N="[object BigInt64Array]",I="[object Float32Array]",L="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=N,e.bigUint64ArrayTag=T,e.booleanTag=a,e.dataViewTag=x,e.dateTag=o,e.errorTag=g,e.float32ArrayTag=I,e.float64ArrayTag=L,e.functionTag=f,e.int16ArrayTag=j,e.int32ArrayTag=E,e.int8ArrayTag=B,e.mapTag=c,e.numberTag=n,e.objectTag=m,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=i,e.uint16ArrayTag=w,e.uint32ArrayTag=_,e.uint8ArrayTag=v,e.uint8ClampedArrayTag=y}(hI)),hI}var mI={},G$;function QTe(){return G$||(G$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t}(mI)),mI}var K$;function Yae(){return K$||(K$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xae(),r=w8(),n=E8(),a=Wae(),s=QTe();function i(d,f){return o(d,void 0,d,new Map,f)}function o(d,f,h,m=new Map,g=void 0){const x=g==null?void 0:g(d,f,h,m);if(x!=null)return x;if(a.isPrimitive(d))return d;if(m.has(d))return m.get(d);if(Array.isArray(d)){const v=new Array(d.length);m.set(d,v);for(let y=0;y<d.length;y++)v[y]=o(d[y],y,h,m,g);return Object.hasOwn(d,"index")&&(v.index=d.index),Object.hasOwn(d,"input")&&(v.input=d.input),v}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const v=new RegExp(d.source,d.flags);return v.lastIndex=d.lastIndex,v}if(d instanceof Map){const v=new Map;m.set(d,v);for(const[y,w]of d)v.set(y,o(w,y,h,m,g));return v}if(d instanceof Set){const v=new Set;m.set(d,v);for(const y of d)v.add(o(y,void 0,h,m,g));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const v=new(Object.getPrototypeOf(d)).constructor(d.length);m.set(d,v);for(let y=0;y<d.length;y++)v[y]=o(d[y],y,h,m,g);return v}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const v=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return m.set(d,v),c(v,d,h,m,g),v}if(typeof File<"u"&&d instanceof File){const v=new File([d],d.name,{type:d.type});return m.set(d,v),c(v,d,h,m,g),v}if(d instanceof Blob){const v=new Blob([d],{type:d.type});return m.set(d,v),c(v,d,h,m,g),v}if(d instanceof Error){const v=new d.constructor;return m.set(d,v),v.message=d.message,v.name=d.name,v.stack=d.stack,v.cause=d.cause,c(v,d,h,m,g),v}if(typeof d=="object"&&u(d)){const v=Object.create(Object.getPrototypeOf(d));return m.set(d,v),c(v,d,h,m,g),v}return d}function c(d,f,h=d,m,g){const x=[...Object.keys(f),...t.getSymbols(f)];for(let v=0;v<x.length;v++){const y=x[v],w=Object.getOwnPropertyDescriptor(d,y);(w==null||w.writable)&&(d[y]=o(f[y],y,h,m,g))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=i,e.cloneDeepWithImpl=o,e.copyProperties=c}(dI)),dI}var q$;function HTe(){return q$||(q$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Yae();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r}(uI)),uI}var W$;function VTe(){return W$||(W$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=y8(),r=HTe();function n(a){return a=r.cloneDeep(a),s=>t.isMatch(s,a)}e.matches=n}(aI)),aI}var pI={},gI={},xI={},X$;function zTe(){return X$||(X$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Yae(),r=E8();function n(a,s){return t.cloneDeepWith(a,(i,o,c,u)=>{const d=s==null?void 0:s(i,o,c,u);if(d!=null)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(f,a),f}case r.argumentsTag:{const f={};return t.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n}(xI)),xI}var Y$;function $Te(){return Y$||(Y$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zTe();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r}(gI)),gI}var vI={},bI={},J$;function Jae(){return J$||(J$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r}(bI)),bI}var yI={},Z$;function GTe(){return Z$||(Z$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=w8();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r}(yI)),yI}var eG;function KTe(){return eG||(eG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_ae(),r=Jae(),n=GTe(),a=l8();function s(i,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&t.isDeepKey(o)&&(i==null?void 0:i[o])==null?c=a.toPath(o):c=[o],c.length===0)return!1;let u=i;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=s}(vI)),vI}var tG;function qTe(){return tG||(tG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=y8(),r=Sae(),n=$Te(),a=c8(),s=KTe();function i(o,c){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,o);return d===void 0?s.has(u,o):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=i}(pI)),pI}var rG;function C8(){return rG||(rG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xB(),r=MTe(),n=VTe(),a=qTe();function s(i){if(i==null)return t.identity;switch(typeof i){case"function":return i;case"object":return Array.isArray(i)&&i.length===2?a.matchesProperty(i[0],i[1]):n.matches(i);case"string":case"symbol":case"number":return r.property(i)}}e.iteratee=s}(rI)),rI}var nG;function WTe(){return nG||(nG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DTe(),r=xB(),n=LTe(),a=C8();function s(i,o=r.identity){return n.isArrayLikeObject(i)?t.uniqBy(Array.from(i),a.iteratee(o)):[]}e.uniqBy=s}(W3)),W3}var wI,aG;function XTe(){return aG||(aG=1,wI=WTe().uniqBy),wI}var YTe=XTe();const sG=Ll(YTe);function Zae(e,t,r){return t===!0?sG(e,r):typeof t=="function"?sG(e,t):e}var EI={exports:{}},CI={},_I={exports:{}},SI={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iG;function JTe(){if(iG)return SI;iG=1;var e=Cb();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,s=e.useLayoutEffect,i=e.useDebugValue;function o(f,h){var m=h(),g=n({inst:{value:m,getSnapshot:h}}),x=g[0].inst,v=g[1];return s(function(){x.value=m,x.getSnapshot=h,c(x)&&v({inst:x})},[f,m,h]),a(function(){return c(x)&&v({inst:x}),f(function(){c(x)&&v({inst:x})})},[f]),i(m),m}function c(f){var h=f.getSnapshot;f=f.value;try{var m=h();return!r(f,m)}catch{return!0}}function u(f,h){return h()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return SI.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,SI}var oG;function ZTe(){return oG||(oG=1,_I.exports=JTe()),_I.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lG;function eje(){if(lG)return CI;lG=1;var e=Cb(),t=ZTe();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,a=t.useSyncExternalStore,s=e.useRef,i=e.useEffect,o=e.useMemo,c=e.useDebugValue;return CI.useSyncExternalStoreWithSelector=function(u,d,f,h,m){var g=s(null);if(g.current===null){var x={hasValue:!1,value:null};g.current=x}else x=g.current;g=o(function(){function y(j){if(!w){if(w=!0,_=j,j=h(j),m!==void 0&&x.hasValue){var E=x.value;if(m(E,j))return T=E}return T=j}if(E=T,n(_,j))return E;var N=h(j);return m!==void 0&&m(E,N)?(_=j,E):(_=j,T=N)}var w=!1,_,T,B=f===void 0?null:f;return[function(){return y(d())},B===null?void 0:function(){return y(B())}]},[d,f,h,m]);var v=a(u,g[0],g[1]);return i(function(){x.hasValue=!0,x.value=v},[v]),c(v),v},CI}var cG;function tje(){return cG||(cG=1,EI.exports=eje()),EI.exports}var ese=tje();const rje=Ll(ese);var _8=S.createContext(null),nje=e=>e,Xa=()=>{var e=S.useContext(_8);return e?e.store.dispatch:nje},NS=()=>{},aje=()=>NS,sje=(e,t)=>e===t;function or(e){var t=S.useContext(_8);return ese.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:aje,t?t.store.getState:NS,t?t.store.getState:NS,t?e:NS,sje)}function ije(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function oje(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function lje(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var uG=e=>Array.isArray(e)?e:[e];function cje(e){const t=Array.isArray(e[0])?e[0]:e;return lje(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function uje(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var dje=class{constructor(e){this.value=e}deref(){return this.value}},fje=typeof WeakRef<"u"?WeakRef:dje,Aje=0,dG=1;function X_(){return{s:Aje,v:void 0,o:null,p:null}}function tse(e,t={}){let r=X_();const{resultEqualityCheck:n}=t;let a,s=0;function i(){var f;let o=r;const{length:c}=arguments;for(let h=0,m=c;h<m;h++){const g=arguments[h];if(typeof g=="function"||typeof g=="object"&&g!==null){let x=o.o;x===null&&(o.o=x=new WeakMap);const v=x.get(g);v===void 0?(o=X_(),x.set(g,o)):o=v}else{let x=o.p;x===null&&(o.p=x=new Map);const v=x.get(g);v===void 0?(o=X_(),x.set(g,o)):o=v}}const u=o;let d;if(o.s===dG)d=o.v;else if(d=e.apply(null,arguments),s++,n){const h=((f=a==null?void 0:a.deref)==null?void 0:f.call(a))??a;h!=null&&n(h,d)&&(d=h,s!==0&&s--),a=typeof d=="object"&&d!==null||typeof d=="function"?new fje(d):d}return u.s=dG,u.v=d,d}return i.clearCache=()=>{r=X_(),i.resetResultsCount()},i.resultsCount=()=>s,i.resetResultsCount=()=>{s=0},i}function hje(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let s=0,i=0,o,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),ije(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:h=[],argsMemoize:m=tse,argsMemoizeOptions:g=[]}=d,x=uG(h),v=uG(g),y=cje(a),w=f(function(){return s++,u.apply(null,arguments)},...x),_=m(function(){i++;const B=uje(y,arguments);return o=w.apply(null,B),o},...v);return Object.assign(_,{resultFunc:u,memoizedResultFunc:w,dependencies:y,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>o,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:m})};return Object.assign(n,{withTypes:()=>n}),n}var ut=hje(tse),mje=Object.assign((e,t=ut)=>{oje(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((i,o,c)=>(i[r[c]]=o,i),{}))},{withTypes:()=>mje}),NI={},kI={},BI={},fG;function pje(){return fG||(fG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const i=t(n),o=t(a);if(i===o&&i===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?o-i:i-o}return 0};e.compareValues=r}(BI)),BI}var TI={},jI={},AG;function rse(){return AG||(AG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t}(jI)),jI}var hG;function gje(){return hG||(hG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rse(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,i){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||i!=null&&Object.hasOwn(i,s)}e.isKey=a}(TI)),TI}var mG;function xje(){return mG||(mG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pje(),r=gje(),n=l8();function a(s,i,o,c){if(s==null)return[];o=c?void 0:o,Array.isArray(s)||(s=Object.values(s)),Array.isArray(i)||(i=i==null?[null]:[i]),i.length===0&&(i=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(m=>String(m));const u=(m,g)=>{let x=m;for(let v=0;v<g.length&&x!=null;++v)x=x[g[v]];return x},d=(m,g)=>g==null||m==null?g:typeof m=="object"&&"key"in m?Object.hasOwn(g,m.key)?g[m.key]:u(g,m.path):typeof m=="function"?m(g):Array.isArray(m)?u(g,m):typeof g=="object"?g[m]:g,f=i.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||r.isKey(m)?m:{key:m,path:n.toPath(m)}));return s.map(m=>({original:m,criteria:f.map(g=>d(g,m))})).slice().sort((m,g)=>{for(let x=0;x<f.length;x++){const v=t.compareValues(m.criteria[x],g.criteria[x],o[x]);if(v!==0)return v}return 0}).map(m=>m.original)}e.orderBy=a}(kI)),kI}var II={},pG;function vje(){return pG||(pG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],s=Math.floor(n),i=(o,c)=>{for(let u=0;u<o.length;u++){const d=o[u];Array.isArray(d)&&c<s?i(d,c+1):a.push(d)}};return i(r,0),a}e.flatten=t}(II)),II}var FI={},gG;function nse(){return gG||(gG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Jae(),r=v8(),n=qae(),a=b8();function s(i,o,c){return n.isObject(c)&&(typeof o=="number"&&r.isArrayLike(c)&&t.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?a.eq(c[o],i):!1}e.isIterateeCall=s}(FI)),FI}var xG;function bje(){return xG||(xG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xje(),r=vje(),n=nse();function a(s,...i){const o=i.length;return o>1&&n.isIterateeCall(s,i[0],i[1])?i=[]:o>2&&n.isIterateeCall(i[0],i[1],i[2])&&(i=[i[0]]),t.orderBy(s,r.flatten(i),["asc"])}e.sortBy=a}(NI)),NI}var OI,vG;function yje(){return vG||(vG=1,OI=bje().sortBy),OI}var wje=yje();const vB=Ll(wje);var ase=e=>e.legend.settings,Eje=e=>e.legend.size,Cje=e=>e.legend.payload,_je=ut([Cje,ase],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?vB(n,r):n});function Sje(){return or(_je)}var Y_=1;function sse(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=S.useState({height:0,left:0,top:0,width:0}),n=S.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),i={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(i.height-t.height)>Y_||Math.abs(i.left-t.left)>Y_||Math.abs(i.top-t.top)>Y_||Math.abs(i.width-t.width)>Y_)&&r({height:i.height,left:i.left,top:i.top,width:i.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Eo(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Nje=typeof Symbol=="function"&&Symbol.observable||"@@observable",bG=Nje,DI=()=>Math.random().toString(36).substring(7).split("").join("."),kje={INIT:`@@redux/INIT${DI()}`,REPLACE:`@@redux/REPLACE${DI()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${DI()}`},HN=kje;function S8(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function ise(e,t,r){if(typeof e!="function")throw new Error(Eo(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Eo(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Eo(1));return r(ise)(e,t)}let n=e,a=t,s=new Map,i=s,o=0,c=!1;function u(){i===s&&(i=new Map,s.forEach((v,y)=>{i.set(y,v)}))}function d(){if(c)throw new Error(Eo(3));return a}function f(v){if(typeof v!="function")throw new Error(Eo(4));if(c)throw new Error(Eo(5));let y=!0;u();const w=o++;return i.set(w,v),function(){if(y){if(c)throw new Error(Eo(6));y=!1,u(),i.delete(w),s=null}}}function h(v){if(!S8(v))throw new Error(Eo(7));if(typeof v.type>"u")throw new Error(Eo(8));if(typeof v.type!="string")throw new Error(Eo(17));if(c)throw new Error(Eo(9));try{c=!0,a=n(a,v)}finally{c=!1}return(s=i).forEach(w=>{w()}),v}function m(v){if(typeof v!="function")throw new Error(Eo(10));n=v,h({type:HN.REPLACE})}function g(){const v=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Eo(11));function w(){const T=y;T.next&&T.next(d())}return w(),{unsubscribe:v(w)}},[bG](){return this}}}return h({type:HN.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:m,[bG]:g}}function Bje(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:HN.INIT})>"u")throw new Error(Eo(12));if(typeof r(void 0,{type:HN.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Eo(13))})}function ose(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const i=t[s];typeof e[i]=="function"&&(r[i]=e[i])}const n=Object.keys(r);let a;try{Bje(r)}catch(s){a=s}return function(i={},o){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],h=r[f],m=i[f],g=h(m,o);if(typeof g>"u")throw o&&o.type,new Error(Eo(14));u[f]=g,c=c||g!==m}return c=c||n.length!==Object.keys(i).length,c?u:i}}function VN(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function Tje(...e){return t=>(r,n)=>{const a=t(r,n);let s=()=>{throw new Error(Eo(15))};const i={getState:a.getState,dispatch:(c,...u)=>s(c,...u)},o=e.map(c=>c(i));return s=VN(...o)(a.dispatch),{...a,dispatch:s}}}function lse(e){return S8(e)&&"type"in e&&typeof e.type=="string"}var cse=Symbol.for("immer-nothing"),yG=Symbol.for("immer-draftable"),iu=Symbol.for("immer-state");function $d(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var X1=Object.getPrototypeOf;function tx(e){return!!e&&!!e[iu]}function Xh(e){var t;return e?use(e)||Array.isArray(e)||!!e[yG]||!!((t=e.constructor)!=null&&t[yG])||yB(e)||wB(e):!1}var jje=Object.prototype.constructor.toString();function use(e){if(!e||typeof e!="object")return!1;const t=X1(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===jje}function zN(e,t){bB(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function bB(e){const t=e[iu];return t?t.type_:Array.isArray(e)?1:yB(e)?2:wB(e)?3:0}function iD(e,t){return bB(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function dse(e,t,r){const n=bB(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function Ije(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function yB(e){return e instanceof Map}function wB(e){return e instanceof Set}function sg(e){return e.copy_||e.base_}function oD(e,t){if(yB(e))return new Map(e);if(wB(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=use(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[iu];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const i=a[s],o=n[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(X1(e),n)}else{const n=X1(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function N8(e,t=!1){return EB(e)||tx(e)||!Xh(e)||(bB(e)>1&&(e.set=e.add=e.clear=e.delete=Fje),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>N8(n,!0))),e}function Fje(){$d(2)}function EB(e){return Object.isFrozen(e)}var Oje={};function rx(e){const t=Oje[e];return t||$d(0,e),t}var q2;function fse(){return q2}function Dje(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function wG(e,t){t&&(rx("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function lD(e){cD(e),e.drafts_.forEach(Pje),e.drafts_=null}function cD(e){e===q2&&(q2=e.parent_)}function EG(e){return q2=Dje(q2,e)}function Pje(e){const t=e[iu];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function CG(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[iu].modified_&&(lD(t),$d(4)),Xh(e)&&(e=$N(t,e),t.parent_||GN(t,e)),t.patches_&&rx("Patches").generateReplacementPatches_(r[iu].base_,e,t.patches_,t.inversePatches_)):e=$N(t,r,[]),lD(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==cse?e:void 0}function $N(e,t,r){if(EB(t))return t;const n=t[iu];if(!n)return zN(t,(a,s)=>_G(e,n,t,a,s,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return GN(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let s=a,i=!1;n.type_===3&&(s=new Set(a),a.clear(),i=!0),zN(s,(o,c)=>_G(e,n,a,o,c,r,i)),GN(e,a,!1),r&&e.patches_&&rx("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function _G(e,t,r,n,a,s,i){if(tx(a)){const o=s&&t&&t.type_!==3&&!iD(t.assigned_,n)?s.concat(n):void 0,c=$N(e,a,o);if(dse(r,n,c),tx(c))e.canAutoFreeze_=!1;else return}else i&&r.add(a);if(Xh(a)&&!EB(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;$N(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&GN(e,a)}}function GN(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&N8(t,r)}function Rje(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:fse(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=k8;r&&(a=[n],s=W2);const{revoke:i,proxy:o}=Proxy.revocable(a,s);return n.draft_=o,n.revoke_=i,o}var k8={get(e,t){if(t===iu)return e;const r=sg(e);if(!iD(r,t))return Lje(e,r,t);const n=r[t];return e.finalized_||!Xh(n)?n:n===PI(e.base_,t)?(RI(e),e.copy_[t]=dD(n,e)):n},has(e,t){return t in sg(e)},ownKeys(e){return Reflect.ownKeys(sg(e))},set(e,t,r){const n=Ase(sg(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=PI(sg(e),t),s=a==null?void 0:a[iu];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(Ije(r,a)&&(r!==void 0||iD(e.base_,t)))return!0;RI(e),uD(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return PI(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,RI(e),uD(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=sg(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){$d(11)},getPrototypeOf(e){return X1(e.base_)},setPrototypeOf(){$d(12)}},W2={};zN(k8,(e,t)=>{W2[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});W2.deleteProperty=function(e,t){return W2.set.call(this,e,t,void 0)};W2.set=function(e,t,r){return k8.set.call(this,e[0],t,r,e[0])};function PI(e,t){const r=e[iu];return(r?sg(r):e)[t]}function Lje(e,t,r){var a;const n=Ase(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function Ase(e,t){if(!(t in e))return;let r=X1(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=X1(r)}}function uD(e){e.modified_||(e.modified_=!0,e.parent_&&uD(e.parent_))}function RI(e){e.copy_||(e.copy_=oD(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Mje=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const i=this;return function(c=s,...u){return i.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&$d(6),n!==void 0&&typeof n!="function"&&$d(7);let a;if(Xh(t)){const s=EG(this),i=dD(t,void 0);let o=!0;try{a=r(i),o=!1}finally{o?lD(s):cD(s)}return wG(s,n),CG(a,s)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===cse&&(a=void 0),this.autoFreeze_&&N8(a,!0),n){const s=[],i=[];rx("Patches").generateReplacementPatches_(t,a,s,i),n(s,i)}return a}else $d(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(i,...o)=>this.produceWithPatches(i,c=>t(c,...o));let n,a;return[this.produce(t,r,(i,o)=>{n=i,a=o}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Xh(e)||$d(8),tx(e)&&(e=Ph(e));const t=EG(this),r=dD(e,void 0);return r[iu].isManual_=!0,cD(t),r}finishDraft(e,t){const r=e&&e[iu];(!r||!r.isManual_)&&$d(9);const{scope_:n}=r;return wG(n,t),CG(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=rx("Patches").applyPatches_;return tx(e)?n(e,t):this.produce(e,a=>n(a,t))}};function dD(e,t){const r=yB(e)?rx("MapSet").proxyMap_(e,t):wB(e)?rx("MapSet").proxySet_(e,t):Rje(e,t);return(t?t.scope_:fse()).drafts_.push(r),r}function Ph(e){return tx(e)||$d(10,e),hse(e)}function hse(e){if(!Xh(e)||EB(e))return e;const t=e[iu];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=oD(e,t.scope_.immer_.useStrictShallowCopy_)}else r=oD(e,!0);return zN(r,(n,a)=>{dse(r,n,hse(a))}),t&&(t.finalized_=!1),r}var ou=new Mje,mse=ou.produce;ou.produceWithPatches.bind(ou);ou.setAutoFreeze.bind(ou);ou.setUseStrictShallowCopy.bind(ou);ou.applyPatches.bind(ou);ou.createDraft.bind(ou);ou.finishDraft.bind(ou);function pse(e){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,e):a(s)}var Uje=pse(),Qje=pse,Hje=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?VN:VN.apply(null,arguments)};function cd(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(nu(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>lse(n)&&n.type===e,r}var gse=class Pw extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Pw.prototype)}static get[Symbol.species](){return Pw}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Pw(...t[0].concat(this)):new Pw(...t.concat(this))}};function SG(e){return Xh(e)?mse(e,()=>{}):e}function J_(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function Vje(e){return typeof e=="boolean"}var zje=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=t??{};let i=new gse;return r&&(Vje(r)?i.push(Uje):i.push(Qje(r.extraArgument))),i},$je="RTK_autoBatch",NG=e=>t=>{setTimeout(t,e)},Gje=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,s=!1,i=!1;const o=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:NG(10):e.type==="callback"?e.queueNotification:NG(e.timeout),u=()=>{i=!1,s&&(s=!1,o.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>a&&d(),h=n.subscribe(f);return o.add(d),()=>{h(),o.delete(d)}},dispatch(d){var f;try{return a=!((f=d==null?void 0:d.meta)!=null&&f[$je]),s=!a,s&&(i||(i=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},Kje=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new gse(e);return n&&a.push(Gje(typeof n=="object"?n:void 0)),a};function qje(e){const t=zje(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:i=void 0}=e||{};let o;if(typeof r=="function")o=r;else if(S8(r))o=ose(r);else throw new Error(nu(1));let c;typeof n=="function"?c=n(t):c=t();let u=VN;a&&(u=Hje({trace:!1,...typeof a=="object"&&a}));const d=Tje(...c),f=Kje(d);let h=typeof i=="function"?i(f):f();const m=u(...h);return ise(o,s,m)}function xse(e){const t={},r=[];let n;const a={addCase(s,i){const o=typeof s=="string"?s:s.type;if(!o)throw new Error(nu(28));if(o in t)throw new Error(nu(29));return t[o]=i,a},addMatcher(s,i){return r.push({matcher:s,reducer:i}),a},addDefaultCase(s){return n=s,a}};return e(a),[t,r,n]}function Wje(e){return typeof e=="function"}function Xje(e,t){let[r,n,a]=xse(t),s;if(Wje(e))s=()=>SG(e());else{const o=SG(e);s=()=>o}function i(o=s(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,f)=>{if(f)if(tx(d)){const m=f(d,c);return m===void 0?d:m}else{if(Xh(d))return mse(d,h=>f(h,c));{const h=f(d,c);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},o)}return i.getInitialState=s,i}var Yje="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Jje=(e=21)=>{let t="",r=e;for(;r--;)t+=Yje[Math.random()*64|0];return t},Zje=Symbol.for("rtk-slice-createasyncthunk");function e3e(e,t){return`${e}/${t}`}function t3e({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[Zje];return function(a){const{name:s,reducerPath:i=s}=a;if(!s)throw new Error(nu(11));const o=(typeof a.reducers=="function"?a.reducers(n3e()):a.reducers)||{},c=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(T,B){const j=typeof T=="string"?T:T.type;if(!j)throw new Error(nu(12));if(j in u.sliceCaseReducersByType)throw new Error(nu(13));return u.sliceCaseReducersByType[j]=B,d},addMatcher(T,B){return u.sliceMatchers.push({matcher:T,reducer:B}),d},exposeAction(T,B){return u.actionCreators[T]=B,d},exposeCaseReducer(T,B){return u.sliceCaseReducersByName[T]=B,d}};c.forEach(T=>{const B=o[T],j={reducerName:T,type:e3e(s,T),createNotation:typeof a.reducers=="function"};s3e(B)?o3e(j,B,d,t):a3e(j,B,d)});function f(){const[T={},B=[],j=void 0]=typeof a.extraReducers=="function"?xse(a.extraReducers):[a.extraReducers],E={...T,...u.sliceCaseReducersByType};return Xje(a.initialState,N=>{for(let I in E)N.addCase(I,E[I]);for(let I of u.sliceMatchers)N.addMatcher(I.matcher,I.reducer);for(let I of B)N.addMatcher(I.matcher,I.reducer);j&&N.addDefaultCase(j)})}const h=T=>T,m=new Map,g=new WeakMap;let x;function v(T,B){return x||(x=f()),x(T,B)}function y(){return x||(x=f()),x.getInitialState()}function w(T,B=!1){function j(N){let I=N[T];return typeof I>"u"&&B&&(I=J_(g,j,y)),I}function E(N=h){const I=J_(m,B,()=>new WeakMap);return J_(I,N,()=>{const L={};for(const[D,k]of Object.entries(a.selectors??{}))L[D]=r3e(k,N,()=>J_(g,N,y),B);return L})}return{reducerPath:T,getSelectors:E,get selectors(){return E(j)},selectSlice:j}}const _={name:s,reducer:v,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:y,...w(i),injectInto(T,{reducerPath:B,...j}={}){const E=B??i;return T.inject({reducerPath:E,reducer:v},j),{..._,...w(E,!0)}}};return _}}function r3e(e,t,r,n){function a(s,...i){let o=t(s);return typeof o>"u"&&n&&(o=r()),e(o,...i)}return a.unwrapped=e,a}var Au=t3e();function n3e(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function a3e({type:e,reducerName:t,createNotation:r},n,a){let s,i;if("reducer"in n){if(r&&!i3e(n))throw new Error(nu(17));s=n.reducer,i=n.prepare}else s=n;a.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,i?cd(e,i):cd(e))}function s3e(e){return e._reducerDefinitionType==="asyncThunk"}function i3e(e){return e._reducerDefinitionType==="reducerWithPrepare"}function o3e({type:e,reducerName:t},r,n,a){if(!a)throw new Error(nu(18));const{payloadCreator:s,fulfilled:i,pending:o,rejected:c,settled:u,options:d}=r,f=a(e,s,d);n.exposeAction(t,f),i&&n.addCase(f.fulfilled,i),o&&n.addCase(f.pending,o),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:i||Z_,pending:o||Z_,rejected:c||Z_,settled:u||Z_})}function Z_(){}var l3e="task",vse="listener",bse="completed",B8="cancelled",c3e=`task-${B8}`,u3e=`task-${bse}`,fD=`${vse}-${B8}`,d3e=`${vse}-${bse}`,CB=class{constructor(e){Wp(this,"name","TaskAbortError");Wp(this,"message");this.code=e,this.message=`${l3e} ${B8} (reason: ${e})`}},T8=(e,t)=>{if(typeof e!="function")throw new TypeError(nu(32))},KN=()=>{},yse=(e,t=KN)=>(e.catch(t),e),wse=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),jg=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Ig=e=>{if(e.aborted){const{reason:t}=e;throw new CB(t)}};function Ese(e,t){let r=KN;return new Promise((n,a)=>{const s=()=>a(new CB(e.reason));if(e.aborted){s();return}r=wse(e,s),t.finally(()=>r()).then(n,a)}).finally(()=>{r=KN})}var f3e=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof CB?"cancelled":"rejected",error:r}}finally{t==null||t()}},qN=e=>t=>yse(Ese(e,t).then(r=>(Ig(e),r))),Cse=e=>{const t=qN(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:y1}=Object,kG={},_B="listenerMiddleware",A3e=(e,t)=>{const r=n=>wse(e,()=>jg(n,e.reason));return(n,a)=>{T8(n);const s=new AbortController;r(s);const i=f3e(async()=>{Ig(e),Ig(s.signal);const o=await n({pause:qN(s.signal),delay:Cse(s.signal),signal:s.signal});return Ig(s.signal),o},()=>jg(s,u3e));return a!=null&&a.autoJoin&&t.push(i.catch(KN)),{result:qN(e)(i),cancel(){jg(s,c3e)}}}},h3e=(e,t)=>{const r=async(n,a)=>{Ig(t);let s=()=>{};const o=[new Promise((c,u)=>{let d=e({predicate:n,effect:(f,h)=>{h.unsubscribe(),c([f,h.getState(),h.getOriginalState()])}});s=()=>{d(),u()}})];a!=null&&o.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await Ese(t,Promise.race(o));return Ig(t),c}finally{s()}};return(n,a)=>yse(r(n,a))},_se=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:s}=e;if(t)a=cd(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(nu(21));return T8(s),{predicate:a,type:t,effect:s}},Sse=y1(e=>{const{type:t,predicate:r,effect:n}=_se(e);return{id:Jje(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(nu(22))}}},{withTypes:()=>Sse}),BG=(e,t)=>{const{type:r,effect:n,predicate:a}=_se(t);return Array.from(e.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},AD=e=>{e.pending.forEach(t=>{jg(t,fD)})},m3e=e=>()=>{e.forEach(AD),e.clear()},TG=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Nse=y1(cd(`${_B}/add`),{withTypes:()=>Nse}),p3e=cd(`${_B}/removeAll`),kse=y1(cd(`${_B}/remove`),{withTypes:()=>kse}),g3e=(...e)=>{console.error(`${_B}/error`,...e)},sC=(e={})=>{const t=new Map,{extra:r,onError:n=g3e}=e;T8(n);const a=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f!=null&&f.cancelActive&&AD(d)}),s=d=>{const f=BG(t,d)??Sse(d);return a(f)};y1(s,{withTypes:()=>s});const i=d=>{const f=BG(t,d);return f&&(f.unsubscribe(),d.cancelActive&&AD(f)),!!f};y1(i,{withTypes:()=>i});const o=async(d,f,h,m)=>{const g=new AbortController,x=h3e(s,g.signal),v=[];try{d.pending.add(g),await Promise.resolve(d.effect(f,y1({},h,{getOriginalState:m,condition:(y,w)=>x(y,w).then(Boolean),take:x,delay:Cse(g.signal),pause:qN(g.signal),extra:r,signal:g.signal,fork:A3e(g.signal,v),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((y,w,_)=>{y!==g&&(jg(y,fD),_.delete(y))})},cancel:()=>{jg(g,fD),d.pending.delete(g)},throwIfCancelled:()=>{Ig(g.signal)}})))}catch(y){y instanceof CB||TG(n,y,{raisedBy:"effect"})}finally{await Promise.all(v),jg(g,d3e),d.pending.delete(g)}},c=m3e(t);return{middleware:d=>f=>h=>{if(!lse(h))return f(h);if(Nse.match(h))return s(h.payload);if(p3e.match(h)){c();return}if(kse.match(h))return i(h.payload);let m=d.getState();const g=()=>{if(m===kG)throw new Error(nu(23));return m};let x;try{if(x=f(h),t.size>0){const v=d.getState(),y=Array.from(t.values());for(const w of y){let _=!1;try{_=w.predicate(h,v,m)}catch(T){_=!1,TG(n,T,{raisedBy:"predicate"})}_&&o(w,h,d,g)}}}finally{m=kG}return x},startListening:s,stopListening:i,clearListeners:c}};function nu(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var x3e={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Bse=Au({name:"chartLayout",initialState:x3e,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:v3e,setLayout:b3e,setChartSize:y3e,setScale:w3e}=Bse.actions,E3e=Bse.reducer;function jG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function IG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jG(Object(r),!0).forEach(function(n){C3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function C3e(e,t,r){return(t=_3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _3e(e){var t=S3e(e,"string");return typeof t=="symbol"?t:t+""}function S3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WN=Math.PI/180,N3e=e=>e*180/Math.PI,na=(e,t,r,n)=>({x:e+Math.cos(-WN*n)*r,y:t+Math.sin(-WN*n)*r}),Tse=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},k3e=(e,t)=>{var{x:r,y:n}=e,{x:a,y:s}=t;return Math.sqrt((r-a)**2+(n-s)**2)},B3e=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:s}=t,i=k3e({x:r,y:n},{x:a,y:s});if(i<=0)return{radius:i,angle:0};var o=(r-a)/i,c=Math.acos(o);return n>s&&(c=2*Math.PI-c),{radius:i,angle:N3e(c),angleInRadian:c}},T3e=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:t-s*360,endAngle:r-s*360}},j3e=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),s=Math.floor(n/360),i=Math.min(a,s);return e+i*360},I3e=(e,t)=>{var{x:r,y:n}=e,{radius:a,angle:s}=B3e({x:r,y:n},t),{innerRadius:i,outerRadius:o}=t;if(a<i||a>o||a===0)return null;var{startAngle:c,endAngle:u}=T3e(t),d=s,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?IG(IG({},t),{},{radius:a,angle:j3e(d,t)}):null},jse=e=>!S.isValidElement(e)&&typeof e!="function"&&typeof e!="boolean"&&e!=null?e.className:"";function Ise(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function FG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Yu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FG(Object(r),!0).forEach(function(n){F3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function F3e(e,t,r){return(t=O3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O3e(e){var t=D3e(e,"string");return typeof t=="symbol"?t:t+""}function D3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ha(e,t,r){return Rs(e)||Rs(t)?r:TA(t)?tp(e,t,r):typeof t=="function"?t(e):r}var P3e=(e,t,r,n,a)=>{var s,i=-1,o=(s=t==null?void 0:t.length)!==null&&s!==void 0?s:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var c=0;c<o;c++){var u=c>0?r[c-1].coordinate:r[o-1].coordinate,d=r[c].coordinate,f=c>=o-1?r[0].coordinate:r[c+1].coordinate,h=void 0;if(oo(d-u)!==oo(f-d)){var m=[];if(oo(f-d)===oo(a[1]-a[0])){h=f;var g=d+a[1]-a[0];m[0]=Math.min(g,(g+u)/2),m[1]=Math.max(g,(g+u)/2)}else{h=u;var x=f+a[1]-a[0];m[0]=Math.min(d,(x+d)/2),m[1]=Math.max(d,(x+d)/2)}var v=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>v[0]&&e<=v[1]||e>=m[0]&&e<=m[1]){({index:i}=r[c]);break}}else{var y=Math.min(u,f),w=Math.max(u,f);if(e>(y+d)/2&&e<=(w+d)/2){({index:i}=r[c]);break}}}else if(t){for(var _=0;_<o;_++)if(_===0&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_>0&&_<o-1&&e>(t[_].coordinate+t[_-1].coordinate)/2&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_===o-1&&e>(t[_].coordinate+t[_-1].coordinate)/2){({index:i}=t[_]);break}}return i},R3e=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:s,verticalAlign:i,layout:o}=t;if((o==="vertical"||o==="horizontal"&&i==="middle")&&s!=="center"&&fr(e[s]))return Yu(Yu({},e),{},{[s]:e[s]+(n||0)});if((o==="horizontal"||o==="vertical"&&s==="center")&&i!=="middle"&&fr(e[i]))return Yu(Yu({},e),{},{[i]:e[i]+(a||0)})}return e},gp=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",Fse=(e,t,r,n)=>{if(n)return e.map(o=>o.coordinate);var a,s,i=e.map(o=>(o.coordinate===t&&(a=!0),o.coordinate===r&&(s=!0),o.coordinate));return a||i.push(t),s||i.push(r),i},Ose=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:s,scale:i,realScaleType:o,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:h,axisType:m}=e;if(!i)return null;var g=o==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,x=a==="category"&&i.bandwidth?i.bandwidth()/g:0;if(x=m==="angleAxis"&&s&&s.length>=2?oo(s[0]-s[1])*2*x:x,f||h){var v=(f||h||[]).map((y,w)=>{var _=n?n.indexOf(y):y;return{coordinate:i(_)+x,value:y,offset:x,index:w}});return v.filter(y=>!su(y.coordinate))}return c&&u?u.map((y,w)=>({coordinate:i(y)+x,value:y,index:w,offset:x})):i.ticks&&d!=null?i.ticks(d).map((y,w)=>({coordinate:i(y)+x,value:y,offset:x,index:w})):i.domain().map((y,w)=>({coordinate:i(y)+x,value:n?n[y]:y,index:w,offset:x}))},OG=1e-4,L3e=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-OG,s=Math.max(n[0],n[1])+OG,i=e(t[0]),o=e(t[r-1]);(i<a||i>s||o<a||o>s)&&e.domain([t[0],t[r-1]])}},M3e=(e,t)=>{if(!t||t.length!==2||!fr(t[0])||!fr(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!fr(e[0])||e[0]<r)&&(a[0]=r),(!fr(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},U3e=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0,i=0;i<t;++i){var o=su(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=a,e[i][r][1]=a+o,a=e[i][r][1]):(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1])}},Q3e=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0;s<t;++s){var i=su(e[s][r][1])?e[s][r][0]:e[s][r][1];i>=0?(e[s][r][0]=a,e[s][r][1]=a+i,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},H3e={sign:U3e,expand:vTe,none:W1,silhouette:bTe,wiggle:yTe,positive:Q3e},V3e=(e,t,r)=>{var n=H3e[r],a=xTe().keys(t).value((s,i)=>+Ha(s,i,0)).order(nD).offset(n);return a(e)};function z3e(e){return e==null?void 0:String(e)}var DG=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:s,index:i}=e;if(t.type==="category")return r[i]?r[i].coordinate+n:null;var o=Ha(s,t.dataKey,t.scale.domain()[i]);return Rs(o)?null:t.scale(o)-a/2+n},$3e=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},G3e=e=>{var t=e.flat(2).filter(fr);return[Math.min(...t),Math.max(...t)]},K3e=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],q3e=(e,t,r)=>{if(e!=null)return K3e(Object.keys(e).reduce((n,a)=>{var s=e[a],{stackedData:i}=s,o=i.reduce((c,u)=>{var d=Ise(u,t,r),f=G3e(d);return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},PG=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,RG=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,X2=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=vB(t,d=>d.coordinate),s=1/0,i=1,o=a.length;i<o;i++){var c=a[i],u=a[i-1];s=Math.min((c.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function LG(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:s}=e;return Yu(Yu({},t),{},{dataKey:r,payload:n,value:a,name:s})}function Ub(e,t){if(e)return String(e);if(typeof t=="string")return t}function W3e(e,t,r,n,a){if(r==="horizontal"||r==="vertical"){var s=e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height;return s?{x:e,y:t}:null}return n?I3e({x:e,y:t},n):null}var X3e=(e,t,r,n)=>{var a=t.find(u=>u&&u.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,{radius:i}=n;return Yu(Yu(Yu({},n),na(n.cx,n.cy,i,s)),{},{angle:s,radius:i})}var o=a.coordinate,{angle:c}=n;return Yu(Yu(Yu({},n),na(n.cx,n.cy,o,c)),{},{angle:c,radius:o})}return{x:0,y:0}},Y3e=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,u0=e=>e.layout.width,d0=e=>e.layout.height,J3e=e=>e.layout.scale,Dse=e=>e.layout.margin,j8=ut(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),I8=ut(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Pse="data-recharts-item-index",Rse="data-recharts-item-data-key",SB=60;function MG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MG(Object(r),!0).forEach(function(n){Z3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Z3e(e,t,r){return(t=eIe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eIe(e){var t=tIe(e,"string");return typeof t=="symbol"?t:t+""}function tIe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rIe=e=>e.brush.height,Ui=ut([u0,d0,Dse,rIe,j8,I8,ase,Eje],(e,t,r,n,a,s,i,o)=>{var c=s.reduce((g,x)=>{var{orientation:v}=x;if(!x.mirror&&!x.hide){var y=typeof x.width=="number"?x.width:SB;return tm(tm({},g),{},{[v]:g[v]+y})}return g},{left:r.left||0,right:r.right||0}),u=a.reduce((g,x)=>{var{orientation:v}=x;return!x.mirror&&!x.hide?tm(tm({},g),{},{[v]:tp(g,"".concat(v))+x.height}):g},{top:r.top||0,bottom:r.bottom||0}),d=tm(tm({},u),c),f=d.bottom;d.bottom+=n,d=R3e(d,i,o);var h=e-d.left-d.right,m=t-d.top-d.bottom;return tm(tm({brushBottom:f},d),{},{width:Math.max(h,0),height:Math.max(m,0)})}),nIe=ut(Ui,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Lse=ut(u0,d0,(e,t)=>({x:0,y:0,width:e,height:t})),aIe=S.createContext(null),bc=()=>S.useContext(aIe)!=null,NB=e=>e.brush,kB=ut([NB,Ui,Dse],(e,t,r)=>({height:e.height,x:fr(e.x)?e.x:t.left,y:fr(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:fr(e.width)?e.width:t.width})),F8=()=>{var e,t=bc(),r=or(nIe),n=or(kB),a=(e=or(NB))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},sIe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Mse=()=>{var e;return(e=or(Ui))!==null&&e!==void 0?e:sIe},O8=()=>or(u0),D8=()=>or(d0),iIe={top:0,right:0,bottom:0,left:0},oIe=()=>{var e;return(e=or(t=>t.layout.margin))!==null&&e!==void 0?e:iIe},In=e=>e.layout.layoutType,P8=()=>or(In),lIe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Use=Au({name:"legend",initialState:lIe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=Ph(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:UG,setLegendSettings:cIe,addLegendPayload:Qse,removeLegendPayload:Hse}=Use.actions,uIe=Use.reducer,dIe=["contextPayload"];function hD(){return hD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hD.apply(null,arguments)}function QG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Y1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QG(Object(r),!0).forEach(function(n){R8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function R8(e,t,r){return(t=fIe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fIe(e){var t=AIe(e,"string");return typeof t=="symbol"?t:t+""}function AIe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hIe(e,t){if(e==null)return{};var r,n,a=mIe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function mIe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function pIe(e){return e.value}function gIe(e){var{contextPayload:t}=e,r=hIe(e,dIe),n=Zae(t,e.payloadUniqBy,pIe),a=Y1(Y1({},r),{},{payload:n});return S.isValidElement(e.content)?S.cloneElement(e.content,a):typeof e.content=="function"?S.createElement(e.content,a):S.createElement(x8,a)}function xIe(e,t,r,n,a,s){var{layout:i,align:o,verticalAlign:c}=t,u,d;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(o==="center"&&i==="vertical"?u={left:((n||0)-s.width)/2}:u=o==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?d={top:((a||0)-s.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Y1(Y1({},u),d)}function vIe(e){var t=Xa();return S.useEffect(()=>{t(cIe(e))},[t,e]),null}function bIe(e){var t=Xa();return S.useEffect(()=>(t(UG(e)),()=>{t(UG({width:0,height:0}))}),[t,e]),null}function yIe(e){var t=Sje(),r=HBe(),n=oIe(),{width:a,height:s,wrapperStyle:i,portal:o}=e,[c,u]=sse([t]),d=O8(),f=D8(),h=d-(n.left||0)-(n.right||0),m=Qb.getWidthOrHeight(e.layout,s,a,h),g=o?i:Y1(Y1({position:"absolute",width:(m==null?void 0:m.width)||a||"auto",height:(m==null?void 0:m.height)||s||"auto"},xIe(i,e,n,d,f,c)),i),x=o??r;if(x==null)return null;var v=S.createElement("div",{className:"recharts-legend-wrapper",style:g,ref:u},S.createElement(vIe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),S.createElement(bIe,{width:c.width,height:c.height}),S.createElement(gIe,hD({},e,m,{margin:n,chartWidth:d,chartHeight:f,contextPayload:t})));return r8.createPortal(v,x)}class Qb extends S.PureComponent{static getWidthOrHeight(t,r,n,a){return t==="vertical"&&fr(r)?{height:r}:t==="horizontal"?{width:n||a}:null}render(){return S.createElement(yIe,this.props)}}R8(Qb,"displayName","Legend");R8(Qb,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function mD(){return mD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mD.apply(null,arguments)}function HG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function LI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HG(Object(r),!0).forEach(function(n){wIe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wIe(e,t,r){return(t=EIe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EIe(e){var t=CIe(e,"string");return typeof t=="symbol"?t:t+""}function CIe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _Ie(e){return Array.isArray(e)&&TA(e[0])&&TA(e[1])?e.join(" ~ "):e}var SIe=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:i,itemSorter:o,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=e,m=()=>{if(s&&s.length){var B={padding:0,margin:0},j=(o?vB(s,o):s).map((E,N)=>{if(E.type==="none")return null;var I=E.formatter||i||_Ie,{value:L,name:D}=E,k=L,P=D;if(I){var R=I(L,D,E,N,s);if(Array.isArray(R))[k,P]=R;else if(R!=null)k=R;else return null}var W=LI({display:"block",paddingTop:4,paddingBottom:4,color:E.color||"#000"},n);return S.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(N),style:W},TA(P)?S.createElement("span",{className:"recharts-tooltip-item-name"},P):null,TA(P)?S.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,S.createElement("span",{className:"recharts-tooltip-item-value"},k),S.createElement("span",{className:"recharts-tooltip-item-unit"},E.unit||""))});return S.createElement("ul",{className:"recharts-tooltip-item-list",style:B},j)}return null},g=LI({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),x=LI({margin:0},a),v=!Rs(d),y=v?d:"",w=Sr("recharts-default-tooltip",c),_=Sr("recharts-tooltip-label",u);v&&f&&s!==void 0&&s!==null&&(y=f(d,s));var T=h?{role:"status","aria-live":"assertive"}:{};return S.createElement("div",mD({className:w,style:g},T),S.createElement("p",{className:_,style:x},S.isValidElement(y)?y:"".concat(y)),m())},Jy="recharts-tooltip-wrapper",NIe={visibility:"hidden"};function kIe(e){var{coordinate:t,translateX:r,translateY:n}=e;return Sr(Jy,{["".concat(Jy,"-right")]:fr(r)&&t&&fr(t.x)&&r>=t.x,["".concat(Jy,"-left")]:fr(r)&&t&&fr(t.x)&&r<t.x,["".concat(Jy,"-bottom")]:fr(n)&&t&&fr(t.y)&&n>=t.y,["".concat(Jy,"-top")]:fr(n)&&t&&fr(t.y)&&n<t.y})}function VG(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o,viewBox:c,viewBoxDimension:u}=e;if(s&&fr(s[n]))return s[n];var d=r[n]-o-(a>0?a:0),f=r[n]+a;if(t[n])return i[n]?d:f;var h=c[n];if(h==null)return 0;if(i[n]){var m=d,g=h;return m<g?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var x=f+o,v=h+u;return x>v?Math.max(d,h):Math.max(f,h)}function BIe(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function TIe(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:s,tooltipBox:i,useTranslate3d:o,viewBox:c}=e,u,d,f;return i.height>0&&i.width>0&&r?(d=VG({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.width,viewBox:c,viewBoxDimension:c.width}),f=VG({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.height,viewBox:c,viewBoxDimension:c.height}),u=BIe({translateX:d,translateY:f,useTranslate3d:o})):u=NIe,{cssProperties:u,cssClasses:kIe({translateX:d,translateY:f,coordinate:r})}}function zG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function e5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zG(Object(r),!0).forEach(function(n){pD(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pD(e,t,r){return(t=jIe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jIe(e){var t=IIe(e,"string");return typeof t=="symbol"?t:t+""}function IIe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class FIe extends S.PureComponent{constructor(){super(...arguments),pD(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),pD(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:i,hasPayload:o,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:m,wrapperStyle:g,lastBoundingBox:x,innerRef:v,hasPortalFromProps:y}=this.props,{cssClasses:w,cssProperties:_}=TIe({allowEscapeViewBox:r,coordinate:i,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:x.height,width:x.width},useTranslate3d:h,viewBox:m}),T=y?{}:e5(e5({transition:c&&t?"transform ".concat(n,"ms ").concat(a):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),B=e5(e5({},T),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},g);return S.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:B,ref:v},s)}}var OIe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),_x={isSsr:OIe()},Vse=()=>or(e=>e.rootProps.accessibilityLayer);function lu(e){return Number.isFinite(e)}function J1(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function gD(){return gD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gD.apply(null,arguments)}function $G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function GG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$G(Object(r),!0).forEach(function(n){DIe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$G(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DIe(e,t,r){return(t=PIe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PIe(e){var t=RIe(e,"string");return typeof t=="symbol"?t:t+""}function RIe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KG={curveBasisClosed:oTe,curveBasisOpen:lTe,curveBasis:iTe,curveBumpX:GBe,curveBumpY:KBe,curveLinearClosed:cTe,curveLinear:pB,curveMonotoneX:uTe,curveMonotoneY:dTe,curveNatural:fTe,curveStep:ATe,curveStepAfter:mTe,curveStepBefore:hTe},t5=e=>lu(e.x)&&lu(e.y),Zy=e=>e.x,ew=e=>e.y,LIe=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(nC(e));return(r==="curveMonotone"||r==="curveBump")&&t?KG["".concat(r).concat(t==="vertical"?"Y":"X")]:KG[r]||pB},MIe=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:s=!1}=e,i=LIe(t,a),o=s?r.filter(t5):r,c;if(Array.isArray(n)){var u=s?n.filter(f=>t5(f)):n,d=o.map((f,h)=>GG(GG({},f),{},{base:u[h]}));return a==="vertical"?c=W_().y(ew).x1(Zy).x0(f=>f.base.x):c=W_().x(Zy).y1(ew).y0(f=>f.base.y),c.defined(t5).curve(i),c(d)}return a==="vertical"&&fr(n)?c=W_().y(ew).x1(Zy).x0(n):fr(n)?c=W_().x(Zy).y1(ew).y0(n):c=Pae().x(Zy).y(ew),c.defined(t5).curve(i),c(o)},zse=e=>{var{className:t,points:r,path:n,pathRef:a}=e;if((!r||!r.length)&&!n)return null;var s=r&&r.length?MIe(e):n;return S.createElement("path",gD({},vl(e),d8(e),{className:Sr("recharts-curve",t),d:s===null?void 0:s,ref:a}))},UIe=["x","y","top","left","width","height","className"];function xD(){return xD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xD.apply(null,arguments)}function qG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function QIe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qG(Object(r),!0).forEach(function(n){HIe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HIe(e,t,r){return(t=VIe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VIe(e){var t=zIe(e,"string");return typeof t=="symbol"?t:t+""}function zIe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $Ie(e,t){if(e==null)return{};var r,n,a=GIe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function GIe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var KIe=(e,t,r,n,a,s)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),qIe=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:s=0,height:i=0,className:o}=e,c=$Ie(e,UIe),u=QIe({x:t,y:r,top:n,left:a,width:s,height:i},c);return!fr(t)||!fr(r)||!fr(s)||!fr(i)||!fr(n)||!fr(a)?null:S.createElement("path",xD({},Yn(u,!0),{className:Sr("recharts-cross",o),d:KIe(t,r,s,i,n,a)}))};function WIe(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function WG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function XIe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WG(Object(r),!0).forEach(function(n){YIe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YIe(e,t,r){return(t=JIe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JIe(e){var t=ZIe(e,"string");return typeof t=="symbol"?t:t+""}function ZIe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ad(e,t){var r=XIe({},e),n=t,a=Object.keys(t),s=a.reduce((i,o)=>(i[o]===void 0&&n[o]!==void 0&&(i[o]=n[o]),i),r);return s}var MI={},UI={},QI={},XG;function e6e(){return XG||(XG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t}(QI)),QI}var YG;function t6e(){return YG||(YG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=e6e(),r=Xae(),n=w8(),a=E8(),s=b8();function i(u,d,f){return o(u,d,void 0,void 0,void 0,void 0,f)}function o(u,d,f,h,m,g,x){const v=x(u,d,f,h,m,g);if(v!==void 0)return v;if(typeof u==typeof d)switch(typeof u){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return u===d;case"number":return u===d||Object.is(u,d);case"function":return u===d;case"object":return c(u,d,g,x)}return c(u,d,g,x)}function c(u,d,f,h){if(Object.is(u,d))return!0;let m=n.getTag(u),g=n.getTag(d);if(m===a.argumentsTag&&(m=a.objectTag),g===a.argumentsTag&&(g=a.objectTag),m!==g)return!1;switch(m){case a.stringTag:return u.toString()===d.toString();case a.numberTag:{const y=u.valueOf(),w=d.valueOf();return s.eq(y,w)}case a.booleanTag:case a.dateTag:case a.symbolTag:return Object.is(u.valueOf(),d.valueOf());case a.regexpTag:return u.source===d.source&&u.flags===d.flags;case a.functionTag:return u===d}f=f??new Map;const x=f.get(u),v=f.get(d);if(x!=null&&v!=null)return x===d;f.set(u,d),f.set(d,u);try{switch(m){case a.mapTag:{if(u.size!==d.size)return!1;for(const[y,w]of u.entries())if(!d.has(y)||!o(w,d.get(y),y,u,d,f,h))return!1;return!0}case a.setTag:{if(u.size!==d.size)return!1;const y=Array.from(u.values()),w=Array.from(d.values());for(let _=0;_<y.length;_++){const T=y[_],B=w.findIndex(j=>o(T,j,void 0,u,d,f,h));if(B===-1)return!1;w.splice(B,1)}return!0}case a.arrayTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:case a.bigUint64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.bigInt64ArrayTag:case a.float32ArrayTag:case a.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(u)!==Buffer.isBuffer(d)||u.length!==d.length)return!1;for(let y=0;y<u.length;y++)if(!o(u[y],d[y],y,u,d,f,h))return!1;return!0}case a.arrayBufferTag:return u.byteLength!==d.byteLength?!1:c(new Uint8Array(u),new Uint8Array(d),f,h);case a.dataViewTag:return u.byteLength!==d.byteLength||u.byteOffset!==d.byteOffset?!1:c(new Uint8Array(u),new Uint8Array(d),f,h);case a.errorTag:return u.name===d.name&&u.message===d.message;case a.objectTag:{if(!(c(u.constructor,d.constructor,f,h)||t.isPlainObject(u)&&t.isPlainObject(d)))return!1;const w=[...Object.keys(u),...r.getSymbols(u)],_=[...Object.keys(d),...r.getSymbols(d)];if(w.length!==_.length)return!1;for(let T=0;T<w.length;T++){const B=w[T],j=u[B];if(!Object.hasOwn(d,B))return!1;const E=d[B];if(!o(j,E,B,u,d,f,h))return!1}return!0}default:return!1}}finally{f.delete(u),f.delete(d)}}e.isEqualWith=i}(UI)),UI}var HI={},JG;function r6e(){return JG||(JG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t}(HI)),HI}var ZG;function n6e(){return ZG||(ZG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=t6e(),r=r6e();function n(a,s){return t.isEqualWith(a,s,r.noop)}e.isEqual=n}(MI)),MI}var VI,eK;function a6e(){return eK||(eK=1,VI=n6e().isEqual),VI}var s6e=a6e();const i6e=Ll(s6e);var XN=1e-4,$se=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],Gse=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),tK=(e,t)=>r=>{var n=$se(e,t);return Gse(n,r)},o6e=(e,t)=>r=>{var n=$se(e,t),a=[...n.map((s,i)=>s*i).slice(1),0];return Gse(a,r)},rK=function(){for(var t,r,n,a,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];if(i.length===1)switch(i[0]){case"linear":[t,n,r,a]=[0,0,1,1];break;case"ease":[t,n,r,a]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,a]=[.42,0,1,1];break;case"ease-out":[t,n,r,a]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,a]=[0,0,.58,1];break;default:{var c=i[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,n,r,a]=c[1].split(")")[0].split(",").map(g=>parseFloat(g)))}}else i.length===4&&([t,n,r,a]=i);var u=tK(t,r),d=tK(n,a),f=o6e(t,r),h=g=>g>1?1:g<0?0:g,m=g=>{for(var x=g>1?1:g,v=x,y=0;y<8;++y){var w=u(v)-x,_=f(v);if(Math.abs(w-x)<XN||_<XN)return d(v);v=h(v-w/_)}return d(v)};return m.isStepper=!1,m},l6e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,s=(i,o,c)=>{var u=-(i-o)*r,d=c*n,f=c+(u-d)*a/1e3,h=c*a/1e3+i;return Math.abs(h-o)<XN&&Math.abs(f)<XN?[o,0]:[h,f]};return s.isStepper=!0,s.dt=a,s},Kse=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return rK(e);case"spring":return l6e();default:if(e.split("(")[0]==="cubic-bezier")return rK(e)}return typeof e=="function"?e:null};function nK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function aK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nK(Object(r),!0).forEach(function(n){c6e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function c6e(e,t,r){return(t=u6e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u6e(e){var t=d6e(e,"string");return typeof t=="symbol"?t:t+""}function d6e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var f6e=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),A6e=(e,t,r)=>e.map(n=>"".concat(f6e(n)," ").concat(t,"ms ").concat(r)).join(","),h6e=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),Y2=(e,t)=>Object.keys(t).reduce((r,n)=>aK(aK({},r),{},{[n]:e(n,t[n])}),{});function sK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function No(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sK(Object(r),!0).forEach(function(n){m6e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function m6e(e,t,r){return(t=p6e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p6e(e){var t=g6e(e,"string");return typeof t=="symbol"?t:t+""}function g6e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YN=(e,t,r)=>e+(t-e)*r,vD=e=>{var{from:t,to:r}=e;return t!==r},qse=(e,t,r)=>{var n=Y2((a,s)=>{if(vD(s)){var[i,o]=e(s.from,s.to,s.velocity);return No(No({},s),{},{from:i,velocity:o})}return s},t);return r<1?Y2((a,s)=>vD(s)?No(No({},s),{},{velocity:YN(s.velocity,n[a].velocity,r),from:YN(s.from,n[a].from,r)}):s,t):qse(e,n,r-1)};function x6e(e,t,r,n,a,s){var i,o=n.reduce((h,m)=>No(No({},h),{},{[m]:{from:e[m],velocity:0,to:t[m]}}),{}),c=()=>Y2((h,m)=>m.from,o),u=()=>!Object.values(o).filter(vD).length,d=null,f=h=>{i||(i=h);var m=h-i,g=m/r.dt;o=qse(r,o,g),a(No(No(No({},e),t),c())),i=h,u()||(d=s.setTimeout(f))};return()=>(d=s.setTimeout(f),()=>{d()})}function v6e(e,t,r,n,a,s,i){var o=null,c=a.reduce((f,h)=>No(No({},f),{},{[h]:[e[h],t[h]]}),{}),u,d=f=>{u||(u=f);var h=(f-u)/n,m=Y2((x,v)=>YN(...v,r(h)),c);if(s(No(No(No({},e),t),m)),h<1)o=i.setTimeout(d);else{var g=Y2((x,v)=>YN(...v,r(1)),c);s(No(No(No({},e),t),g))}};return()=>(o=i.setTimeout(d),()=>{o()})}const Wse=(e,t,r,n,a,s)=>{var i=h6e(e,t);return r.isStepper===!0?x6e(e,t,r,i,a,s):v6e(e,t,r,n,i,a,s)};function b6e(e){var t,r=()=>null,n=!1,a=null,s=i=>{if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,[c,...u]=o;if(typeof c=="number"){a=e.setTimeout(s.bind(null,u),c);return}s(c),a=e.setTimeout(s.bind(null,u));return}typeof i=="string"&&(t=i,r(t)),typeof i=="object"&&(t=i,r(t)),typeof i=="function"&&i()}};return{stop:()=>{n=!0},start:i=>{n=!1,a&&(a(),a=null),s(i)},subscribe:i=>(r=i,()=>{r=()=>null}),getTimeoutController:()=>e}}class y6e{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=i=>{i-n>=r?t(i):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{cancelAnimationFrame(a)}}}function w6e(){return b6e(new y6e)}var E6e=S.createContext(w6e);function Xse(e,t){var r=S.useContext(E6e);return S.useMemo(()=>t??r(e),[e,t,r])}var C6e=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function bD(){return bD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bD.apply(null,arguments)}function _6e(e,t){if(e==null)return{};var r,n,a=S6e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function S6e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function iK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function rm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iK(Object(r),!0).forEach(function(n){vg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vg(e,t,r){return(t=N6e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N6e(e){var t=k6e(e,"string");return typeof t=="symbol"?t:t+""}function k6e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class L8 extends S.PureComponent{constructor(t,r){super(t,r),vg(this,"mounted",!1),vg(this,"manager",void 0),vg(this,"stopJSAnimation",null),vg(this,"unSubscribe",null);var{isActive:n,attributeName:a,from:s,to:i,children:o,duration:c,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||c<=0){this.state={style:{}},typeof o=="function"&&(this.state={style:i});return}if(s){if(typeof o=="function"){this.state={style:s};return}this.state={style:a?{[a]:s}:s}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:a,shouldReAnimate:s,to:i,from:o}=this.props,{style:c}=this.state;if(n){if(!r){var u={style:a?{[a]:i}:i};this.state&&c&&(a&&c[a]!==i||!a&&c!==i)&&this.setState(u);return}if(!(i6e(t.to,i)&&t.canBegin&&t.isActive)){var d=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=d||s?o:t.to;if(this.state&&c){var h={style:a?{[a]:f}:f};(a&&c[a]!==f||!a&&c!==f)&&this.setState(h)}this.runAnimation(rm(rm({},this.props),{},{from:f,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:a,easing:s,begin:i,onAnimationEnd:o,onAnimationStart:c}=t,u=Wse(r,n,Kse(s),a,this.changeStyle,this.manager.getTimeoutController()),d=()=>{this.stopJSAnimation=u()};this.manager.start([c,i,d,a,o])}runAnimation(t){var{begin:r,duration:n,attributeName:a,to:s,easing:i,onAnimationStart:o,onAnimationEnd:c,children:u}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof i=="function"||typeof u=="function"||i==="spring"){this.runJSAnimation(t);return}var d=a?{[a]:s}:s,f=A6e(Object.keys(d),n,i);this.manager.start([o,r,rm(rm({},d),{},{transition:f}),n,c])}render(){var t=this.props,{children:r,begin:n,duration:a,attributeName:s,easing:i,isActive:o,from:c,to:u,canBegin:d,onAnimationEnd:f,shouldReAnimate:h,onAnimationReStart:m,animationManager:g}=t,x=_6e(t,C6e),v=S.Children.count(r),y=this.state.style;if(typeof r=="function")return r(y);if(!o||v===0||a<=0)return r;var w=_=>{var{style:T={},className:B}=_.props,j=S.cloneElement(_,rm(rm({},x),{},{style:rm(rm({},T),y),className:B}));return j};return v===1?w(S.Children.only(r)):S.createElement("div",null,S.Children.map(r,_=>w(_)))}}vg(L8,"displayName","Animate");vg(L8,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function JN(e){var t,r=Xse((t=e.attributeName)!==null&&t!==void 0?t:Object.keys(e.to).join(","),e.animationManager);return S.createElement(L8,bD({},e,{animationManager:r}))}function ZN(){return ZN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ZN.apply(null,arguments)}var oK=(e,t,r,n,a)=>{var s=Math.min(Math.abs(r)/2,Math.abs(n)/2),i=n>=0?1:-1,o=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,u;if(s>0&&a instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=a[f]>s?s:a[f];u="M".concat(e,",").concat(t+i*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+o*d[0],",").concat(t)),u+="L ".concat(e+r-o*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+i*d[1])),u+="L ".concat(e+r,",").concat(t+n-i*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-o*d[2],",").concat(t+n)),u+="L ".concat(e+o*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-i*d[3])),u+="Z"}else if(s>0&&a===+a&&a>0){var m=Math.min(s,a);u="M ".concat(e,",").concat(t+i*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+o*m,",").concat(t,`
            L `).concat(e+r-o*m,",").concat(t,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r,",").concat(t+i*m,`
            L `).concat(e+r,",").concat(t+n-i*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r-o*m,",").concat(t+n,`
            L `).concat(e+o*m,",").concat(t+n,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e,",").concat(t+n-i*m," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},B6e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Yse=e=>{var t=Ad(e,B6e),r=S.useRef(null),[n,a]=S.useState(-1);S.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var y=r.current.getTotalLength();y&&a(y)}catch{}},[]);var{x:s,y:i,width:o,height:c,radius:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:m,isAnimationActive:g,isUpdateAnimationActive:x}=t;if(s!==+s||i!==+i||o!==+o||c!==+c||o===0||c===0)return null;var v=Sr("recharts-rectangle",d);return x?S.createElement(JN,{canBegin:n>0,from:{width:o,height:c,x:s,y:i},to:{width:o,height:c,x:s,y:i},duration:h,animationEasing:f,isActive:x},y=>{var{width:w,height:_,x:T,y:B}=y;return S.createElement(JN,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:h,isActive:g,easing:f},S.createElement("path",ZN({},Yn(t,!0),{className:v,d:oK(T,B,w,_,u),ref:r})))}):S.createElement("path",ZN({},Yn(t,!0),{className:v,d:oK(s,i,o,c,u)}))};function Jse(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:s}=e,i=na(t,r,n,a),o=na(t,r,n,s);return{points:[i,o],cx:t,cy:r,radius:n,startAngle:a,endAngle:s}}function yD(){return yD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yD.apply(null,arguments)}var T6e=(e,t)=>{var r=oo(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},r5=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:s,isExternal:i,cornerRadius:o,cornerIsExternal:c}=e,u=o*(i?1:-1)+n,d=Math.asin(o/u)/WN,f=c?a:a+s*d,h=na(t,r,u,f),m=na(t,r,n,f),g=c?a-s*d:a,x=na(t,r,u*Math.cos(d*WN),g);return{center:h,circleTangency:m,lineTangency:x,theta:d}},Zse=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:i}=e,o=T6e(s,i),c=s+o,u=na(t,r,a,s),d=na(t,r,a,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(s>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var h=na(t,r,n,s),m=na(t,r,n,c);f+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(s<=c),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},j6e=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:i,cornerIsExternal:o,startAngle:c,endAngle:u}=e,d=oo(u-c),{circleTangency:f,lineTangency:h,theta:m}=r5({cx:t,cy:r,radius:a,angle:c,sign:d,cornerRadius:s,cornerIsExternal:o}),{circleTangency:g,lineTangency:x,theta:v}=r5({cx:t,cy:r,radius:a,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:o}),y=o?Math.abs(c-u):Math.abs(c-u)-m-v;if(y<0)return i?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):Zse({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var w="M ".concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(y>180),",").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
  `);if(n>0){var{circleTangency:_,lineTangency:T,theta:B}=r5({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),{circleTangency:j,lineTangency:E,theta:N}=r5({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),I=o?Math.abs(c-u):Math.abs(c-u)-B-N;if(I<0&&s===0)return"".concat(w,"L").concat(t,",").concat(r,"Z");w+="L".concat(E.x,",").concat(E.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(j.x,",").concat(j.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(I>180),",").concat(+(d>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(T.x,",").concat(T.y,"Z")}else w+="L".concat(t,",").concat(r,"Z");return w},I6e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},eie=e=>{var t=Ad(e,I6e),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=t;if(s<a||u===d)return null;var h=Sr("recharts-sector",f),m=s-a,g=Pl(i,m,0,!0),x;return g>0&&Math.abs(u-d)<360?x=j6e({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(g,m/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d}):x=Zse({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d}),S.createElement("path",yD({},Yn(t,!0),{className:h,d:x}))};function F6e(e,t,r){var n,a,s,i;if(e==="horizontal")n=t.x,s=n,a=r.top,i=r.top+r.height;else if(e==="vertical")a=t.y,i=a,n=r.left,s=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:o,cy:c,innerRadius:u,outerRadius:d,angle:f}=t,h=na(o,c,u,f),m=na(o,c,d,f);n=h.x,a=h.y,s=m.x,i=m.y}else return Jse(t);return[{x:n,y:a},{x:s,y:i}]}var zI={},$I={},GI={},lK;function O6e(){return lK||(lK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rse();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r}(GI)),GI}var cK;function D6e(){return cK||(cK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=O6e();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r}($I)),$I}var uK;function P6e(){return uK||(uK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nse(),r=D6e();function n(a,s,i){i&&typeof i!="number"&&t.isIterateeCall(a,s,i)&&(s=i=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),i=i===void 0?a<s?1:-1:r.toFinite(i);const o=Math.max(Math.ceil((s-a)/(i||1)),0),c=new Array(o);for(let u=0;u<o;u++)c[u]=a,a+=i;return c}e.range=n}(zI)),zI}var KI,dK;function R6e(){return dK||(dK=1,KI=P6e().range),KI}var L6e=R6e();const tie=Ll(L6e);function Lm(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function M6e(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function M8(e){let t,r,n;e.length!==2?(t=Lm,r=(o,c)=>Lm(e(o),c),n=(o,c)=>e(o)-c):(t=e===Lm||e===M6e?e:U6e,r=e,n=e);function a(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function i(o,c,u=0,d=o.length){const f=a(o,c,u,d-1);return f>u&&n(o[f-1],c)>-n(o[f],c)?f-1:f}return{left:a,center:i,right:s}}function U6e(){return 0}function rie(e){return e===null?NaN:+e}function*Q6e(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const H6e=M8(Lm),iC=H6e.right;M8(rie).center;class fK extends Map{constructor(t,r=$6e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(AK(this,t))}has(t){return super.has(AK(this,t))}set(t,r){return super.set(V6e(this,t),r)}delete(t){return super.delete(z6e(this,t))}}function AK({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function V6e({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function z6e({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function $6e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function G6e(e=Lm){if(e===Lm)return nie;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function nie(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const K6e=Math.sqrt(50),q6e=Math.sqrt(10),W6e=Math.sqrt(2);function e4(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),i=s>=K6e?10:s>=q6e?5:s>=W6e?2:1;let o,c,u;return a<0?(u=Math.pow(10,-a)/i,o=Math.round(e*u),c=Math.round(t*u),o/u<e&&++o,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*i,o=Math.round(e/u),c=Math.round(t/u),o*u<e&&++o,c*u>t&&--c),c<o&&.5<=r&&r<2?e4(e,t,r*2):[o,c,u]}function wD(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,s,i]=n?e4(t,e,r):e4(e,t,r);if(!(s>=a))return[];const o=s-a+1,c=new Array(o);if(n)if(i<0)for(let u=0;u<o;++u)c[u]=(s-u)/-i;else for(let u=0;u<o;++u)c[u]=(s-u)*i;else if(i<0)for(let u=0;u<o;++u)c[u]=(a+u)/-i;else for(let u=0;u<o;++u)c[u]=(a+u)*i;return c}function ED(e,t,r){return t=+t,e=+e,r=+r,e4(e,t,r)[2]}function CD(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?ED(t,e,r):ED(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function hK(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function mK(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function aie(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?nie:G6e(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(t-u*f/c+h)),g=Math.min(n,Math.floor(t+(c-u)*f/c+h));aie(e,t,m,g,a)}const s=e[t];let i=r,o=n;for(tw(e,r,t),a(e[n],s)>0&&tw(e,r,n);i<o;){for(tw(e,i,o),++i,--o;a(e[i],s)<0;)++i;for(;a(e[o],s)>0;)--o}a(e[r],s)===0?tw(e,r,o):(++o,tw(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function tw(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function X6e(e,t,r){if(e=Float64Array.from(Q6e(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return mK(e);if(t>=1)return hK(e);var n,a=(n-1)*t,s=Math.floor(a),i=hK(aie(e,s).subarray(0,s+1)),o=mK(e.subarray(s+1));return i+(o-i)*(a-s)}}function Y6e(e,t,r=rie){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,s=Math.floor(a),i=+r(e[s],s,e),o=+r(e[s+1],s+1,e);return i+(o-i)*(a-s)}}function J6e(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(a);++n<a;)s[n]=e+n*r;return s}function hd(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function f0(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const _D=Symbol("implicit");function BB(){var e=new fK,t=[],r=[],n=_D;function a(s){let i=e.get(s);if(i===void 0){if(n!==_D)return n;e.set(s,i=t.push(s)-1)}return r[i%r.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new fK;for(const i of s)e.has(i)||e.set(i,t.push(i)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return BB(t,r).unknown(n)},hd.apply(a,arguments),a}function U8(){var e=BB().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,s,i,o=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,m=a<n,g=m?a:n,x=m?n:a;s=(x-g)/Math.max(1,h-c+u*2),o&&(s=Math.floor(s)),g+=(x-g-s*(h-c))*d,i=s*(1-c),o&&(g=Math.round(g),i=Math.round(i));var v=J6e(h).map(function(y){return g+s*y});return r(m?v.reverse():v)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,o=!0,f()},e.bandwidth=function(){return i},e.step=function(){return s},e.round=function(h){return arguments.length?(o=!!h,f()):o},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return U8(t(),[n,a]).round(o).paddingInner(c).paddingOuter(u).align(d)},hd.apply(f(),arguments)}function sie(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return sie(t())},e}function Z6e(){return sie(U8.apply(null,arguments).paddingInner(1))}function Q8(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function iie(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function oC(){}var J2=.7,t4=1/J2,w1="\\s*([+-]?\\d+)\\s*",Z2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",SA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",eFe=/^#([0-9a-f]{3,8})$/,tFe=new RegExp(`^rgb\\(${w1},${w1},${w1}\\)$`),rFe=new RegExp(`^rgb\\(${SA},${SA},${SA}\\)$`),nFe=new RegExp(`^rgba\\(${w1},${w1},${w1},${Z2}\\)$`),aFe=new RegExp(`^rgba\\(${SA},${SA},${SA},${Z2}\\)$`),sFe=new RegExp(`^hsl\\(${Z2},${SA},${SA}\\)$`),iFe=new RegExp(`^hsla\\(${Z2},${SA},${SA},${Z2}\\)$`),pK={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Q8(oC,nx,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:gK,formatHex:gK,formatHex8:oFe,formatHsl:lFe,formatRgb:xK,toString:xK});function gK(){return this.rgb().formatHex()}function oFe(){return this.rgb().formatHex8()}function lFe(){return oie(this).formatHsl()}function xK(){return this.rgb().formatRgb()}function nx(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=eFe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?vK(t):r===3?new uc(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?n5(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?n5(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=tFe.exec(e))?new uc(t[1],t[2],t[3],1):(t=rFe.exec(e))?new uc(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=nFe.exec(e))?n5(t[1],t[2],t[3],t[4]):(t=aFe.exec(e))?n5(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=sFe.exec(e))?wK(t[1],t[2]/100,t[3]/100,1):(t=iFe.exec(e))?wK(t[1],t[2]/100,t[3]/100,t[4]):pK.hasOwnProperty(e)?vK(pK[e]):e==="transparent"?new uc(NaN,NaN,NaN,0):null}function vK(e){return new uc(e>>16&255,e>>8&255,e&255,1)}function n5(e,t,r,n){return n<=0&&(e=t=r=NaN),new uc(e,t,r,n)}function cFe(e){return e instanceof oC||(e=nx(e)),e?(e=e.rgb(),new uc(e.r,e.g,e.b,e.opacity)):new uc}function SD(e,t,r,n){return arguments.length===1?cFe(e):new uc(e,t,r,n??1)}function uc(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Q8(uc,SD,iie(oC,{brighter(e){return e=e==null?t4:Math.pow(t4,e),new uc(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?J2:Math.pow(J2,e),new uc(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new uc(Fg(this.r),Fg(this.g),Fg(this.b),r4(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bK,formatHex:bK,formatHex8:uFe,formatRgb:yK,toString:yK}));function bK(){return`#${bg(this.r)}${bg(this.g)}${bg(this.b)}`}function uFe(){return`#${bg(this.r)}${bg(this.g)}${bg(this.b)}${bg((isNaN(this.opacity)?1:this.opacity)*255)}`}function yK(){const e=r4(this.opacity);return`${e===1?"rgb(":"rgba("}${Fg(this.r)}, ${Fg(this.g)}, ${Fg(this.b)}${e===1?")":`, ${e})`}`}function r4(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Fg(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function bg(e){return e=Fg(e),(e<16?"0":"")+e.toString(16)}function wK(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Gd(e,t,r,n)}function oie(e){if(e instanceof Gd)return new Gd(e.h,e.s,e.l,e.opacity);if(e instanceof oC||(e=nx(e)),!e)return new Gd;if(e instanceof Gd)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),s=Math.max(t,r,n),i=NaN,o=s-a,c=(s+a)/2;return o?(t===s?i=(r-n)/o+(r<n)*6:r===s?i=(n-t)/o+2:i=(t-r)/o+4,o/=c<.5?s+a:2-s-a,i*=60):o=c>0&&c<1?0:i,new Gd(i,o,c,e.opacity)}function dFe(e,t,r,n){return arguments.length===1?oie(e):new Gd(e,t,r,n??1)}function Gd(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Q8(Gd,dFe,iie(oC,{brighter(e){return e=e==null?t4:Math.pow(t4,e),new Gd(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?J2:Math.pow(J2,e),new Gd(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new uc(qI(e>=240?e-240:e+120,a,n),qI(e,a,n),qI(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Gd(EK(this.h),a5(this.s),a5(this.l),r4(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=r4(this.opacity);return`${e===1?"hsl(":"hsla("}${EK(this.h)}, ${a5(this.s)*100}%, ${a5(this.l)*100}%${e===1?")":`, ${e})`}`}}));function EK(e){return e=(e||0)%360,e<0?e+360:e}function a5(e){return Math.max(0,Math.min(1,e||0))}function qI(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const H8=e=>()=>e;function fFe(e,t){return function(r){return e+r*t}}function AFe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function hFe(e){return(e=+e)==1?lie:function(t,r){return r-t?AFe(t,r,e):H8(isNaN(t)?r:t)}}function lie(e,t){var r=t-e;return r?fFe(e,r):H8(isNaN(e)?t:e)}const n4=function e(t){var r=hFe(t);function n(a,s){var i=r((a=SD(a)).r,(s=SD(s)).r),o=r(a.g,s.g),c=r(a.b,s.b),u=lie(a.opacity,s.opacity);return function(d){return a.r=i(d),a.g=o(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function mFe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=e[a]*(1-s)+t[a]*s;return n}}function pFe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function gFe(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),s=new Array(r),i;for(i=0;i<n;++i)a[i]=Hb(e[i],t[i]);for(;i<r;++i)s[i]=t[i];return function(o){for(i=0;i<n;++i)s[i]=a[i](o);return s}}function xFe(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function zd(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function vFe(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=Hb(e[a],t[a]):n[a]=t[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var ND=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,WI=new RegExp(ND.source,"g");function bFe(e){return function(){return e}}function yFe(e){return function(t){return e(t)+""}}function cie(e,t){var r=ND.lastIndex=WI.lastIndex=0,n,a,s,i=-1,o=[],c=[];for(e=e+"",t=t+"";(n=ND.exec(e))&&(a=WI.exec(t));)(s=a.index)>r&&(s=t.slice(r,s),o[i]?o[i]+=s:o[++i]=s),(n=n[0])===(a=a[0])?o[i]?o[i]+=a:o[++i]=a:(o[++i]=null,c.push({i,x:zd(n,a)})),r=WI.lastIndex;return r<t.length&&(s=t.slice(r),o[i]?o[i]+=s:o[++i]=s),o.length<2?c[0]?yFe(c[0].x):bFe(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)o[(f=c[d]).i]=f.x(u);return o.join("")})}function Hb(e,t){var r=typeof t,n;return t==null||r==="boolean"?H8(t):(r==="number"?zd:r==="string"?(n=nx(t))?(t=n,n4):cie:t instanceof nx?n4:t instanceof Date?xFe:pFe(t)?mFe:Array.isArray(t)?gFe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?vFe:zd)(e,t)}function V8(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var CK=180/Math.PI,kD={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function uie(e,t,r,n,a,s){var i,o,c;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(c=e*r+t*n)&&(r-=e*c,n-=t*c),(o=Math.sqrt(r*r+n*n))&&(r/=o,n/=o,c/=o),e*n<t*r&&(e=-e,t=-t,c=-c,i=-i),{translateX:a,translateY:s,rotate:Math.atan2(t,e)*CK,skewX:Math.atan(c)*CK,scaleX:i,scaleY:o}}var s5;function wFe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?kD:uie(t.a,t.b,t.c,t.d,t.e,t.f)}function EFe(e){return e==null||(s5||(s5=document.createElementNS("http://www.w3.org/2000/svg","g")),s5.setAttribute("transform",e),!(e=s5.transform.baseVal.consolidate()))?kD:(e=e.matrix,uie(e.a,e.b,e.c,e.d,e.e,e.f))}function die(e,t,r,n){function a(u){return u.length?u.pop()+" ":""}function s(u,d,f,h,m,g){if(u!==f||d!==h){var x=m.push("translate(",null,t,null,r);g.push({i:x-4,x:zd(u,f)},{i:x-2,x:zd(d,h)})}else(f||h)&&m.push("translate("+f+t+h+r)}function i(u,d,f,h){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),h.push({i:f.push(a(f)+"rotate(",null,n)-2,x:zd(u,d)})):d&&f.push(a(f)+"rotate("+d+n)}function o(u,d,f,h){u!==d?h.push({i:f.push(a(f)+"skewX(",null,n)-2,x:zd(u,d)}):d&&f.push(a(f)+"skewX("+d+n)}function c(u,d,f,h,m,g){if(u!==f||d!==h){var x=m.push(a(m)+"scale(",null,",",null,")");g.push({i:x-4,x:zd(u,f)},{i:x-2,x:zd(d,h)})}else(f!==1||h!==1)&&m.push(a(m)+"scale("+f+","+h+")")}return function(u,d){var f=[],h=[];return u=e(u),d=e(d),s(u.translateX,u.translateY,d.translateX,d.translateY,f,h),i(u.rotate,d.rotate,f,h),o(u.skewX,d.skewX,f,h),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,h),u=d=null,function(m){for(var g=-1,x=h.length,v;++g<x;)f[(v=h[g]).i]=v.x(m);return f.join("")}}}var CFe=die(wFe,"px, ","px)","deg)"),_Fe=die(EFe,", ",")",")"),SFe=1e-12;function _K(e){return((e=Math.exp(e))+1/e)/2}function NFe(e){return((e=Math.exp(e))-1/e)/2}function kFe(e){return((e=Math.exp(2*e))-1)/(e+1)}const BFe=function e(t,r,n){function a(s,i){var o=s[0],c=s[1],u=s[2],d=i[0],f=i[1],h=i[2],m=d-o,g=f-c,x=m*m+g*g,v,y;if(x<SFe)y=Math.log(h/u)/t,v=function(E){return[o+E*m,c+E*g,u*Math.exp(t*E*y)]};else{var w=Math.sqrt(x),_=(h*h-u*u+n*x)/(2*u*r*w),T=(h*h-u*u-n*x)/(2*h*r*w),B=Math.log(Math.sqrt(_*_+1)-_),j=Math.log(Math.sqrt(T*T+1)-T);y=(j-B)/t,v=function(E){var N=E*y,I=_K(B),L=u/(r*w)*(I*kFe(t*N+B)-NFe(B));return[o+L*m,c+L*g,u*I/_K(t*N+B)]}}return v.duration=y*1e3*t/Math.SQRT2,v}return a.rho=function(s){var i=Math.max(.001,+s),o=i*i,c=o*o;return e(i,o,c)},a}(Math.SQRT2,2,4);function TFe(e,t){t===void 0&&(t=e,e=Hb);for(var r=0,n=t.length-1,a=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(a,a=t[++r]);return function(i){var o=Math.max(0,Math.min(n-1,Math.floor(i*=n)));return s[o](i-o)}}function jFe(e){return function(){return e}}function a4(e){return+e}var SK=[0,1];function Il(e){return e}function BD(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:jFe(isNaN(t)?NaN:.5)}function IFe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function FFe(e,t,r){var n=e[0],a=e[1],s=t[0],i=t[1];return a<n?(n=BD(a,n),s=r(i,s)):(n=BD(n,a),s=r(s,i)),function(o){return s(n(o))}}function OFe(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),s=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)a[i]=BD(e[i],e[i+1]),s[i]=r(t[i],t[i+1]);return function(o){var c=iC(e,o,1,n)-1;return s[c](a[c](o))}}function lC(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function TB(){var e=SK,t=SK,r=Hb,n,a,s,i=Il,o,c,u;function d(){var h=Math.min(e.length,t.length);return i!==Il&&(i=IFe(e[0],e[h-1])),o=h>2?OFe:FFe,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?s:(c||(c=o(e.map(n),t,r)))(n(i(h)))}return f.invert=function(h){return i(a((u||(u=o(t,e.map(n),zd)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,a4),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=V8,d()},f.clamp=function(h){return arguments.length?(i=h?!0:Il,d()):i!==Il},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,m){return n=h,a=m,d()}}function z8(){return TB()(Il,Il)}function DFe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function s4(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Z1(e){return e=s4(Math.abs(e)),e?e[1]:NaN}function PFe(e,t){return function(r,n){for(var a=r.length,s=[],i=0,o=e[0],c=0;a>0&&o>0&&(c+o+1>n&&(o=Math.max(1,n-c)),s.push(r.substring(a-=o,a+o)),!((c+=o+1)>n));)o=e[i=(i+1)%e.length];return s.reverse().join(t)}}function RFe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var LFe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function eE(e){if(!(t=LFe.exec(e)))throw new Error("invalid format: "+e);var t;return new $8({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}eE.prototype=$8.prototype;function $8(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}$8.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function MFe(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var fie;function UFe(e,t){var r=s4(e,t);if(!r)return e+"";var n=r[0],a=r[1],s=a-(fie=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,i=n.length;return s===i?n:s>i?n+new Array(s-i+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+s4(e,Math.max(0,t+s-1))[0]}function NK(e,t){var r=s4(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const kK={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:DFe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>NK(e*100,t),r:NK,s:UFe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function BK(e){return e}var TK=Array.prototype.map,jK=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function QFe(e){var t=e.grouping===void 0||e.thousands===void 0?BK:PFe(TK.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?BK:RFe(TK.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=eE(f);var h=f.fill,m=f.align,g=f.sign,x=f.symbol,v=f.zero,y=f.width,w=f.comma,_=f.precision,T=f.trim,B=f.type;B==="n"?(w=!0,B="g"):kK[B]||(_===void 0&&(_=12),T=!0,B="g"),(v||h==="0"&&m==="=")&&(v=!0,h="0",m="=");var j=x==="$"?r:x==="#"&&/[boxX]/.test(B)?"0"+B.toLowerCase():"",E=x==="$"?n:/[%p]/.test(B)?i:"",N=kK[B],I=/[defgprs%]/.test(B);_=_===void 0?6:/[gprs]/.test(B)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function L(D){var k=j,P=E,R,W,V;if(B==="c")P=N(D)+P,D="";else{D=+D;var G=D<0||1/D<0;if(D=isNaN(D)?c:N(Math.abs(D),_),T&&(D=MFe(D)),G&&+D==0&&g!=="+"&&(G=!1),k=(G?g==="("?g:o:g==="-"||g==="("?"":g)+k,P=(B==="s"?jK[8+fie/3]:"")+P+(G&&g==="("?")":""),I){for(R=-1,W=D.length;++R<W;)if(V=D.charCodeAt(R),48>V||V>57){P=(V===46?a+D.slice(R+1):D.slice(R))+P,D=D.slice(0,R);break}}}w&&!v&&(D=t(D,1/0));var z=k.length+D.length+P.length,K=z<y?new Array(y-z+1).join(h):"";switch(w&&v&&(D=t(K+D,K.length?y-P.length:1/0),K=""),m){case"<":D=k+D+P+K;break;case"=":D=k+K+D+P;break;case"^":D=K.slice(0,z=K.length>>1)+k+D+P+K.slice(z);break;default:D=K+k+D+P;break}return s(D)}return L.toString=function(){return f+""},L}function d(f,h){var m=u((f=eE(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Z1(h)/3)))*3,x=Math.pow(10,-g),v=jK[8+g/3];return function(y){return m(x*y)+v}}return{format:u,formatPrefix:d}}var i5,G8,Aie;HFe({thousands:",",grouping:[3],currency:["$",""]});function HFe(e){return i5=QFe(e),G8=i5.format,Aie=i5.formatPrefix,i5}function VFe(e){return Math.max(0,-Z1(Math.abs(e)))}function zFe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Z1(t)/3)))*3-Z1(Math.abs(e)))}function $Fe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Z1(t)-Z1(e))+1}function hie(e,t,r,n){var a=CD(e,t,r),s;switch(n=eE(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=zFe(a,i))&&(n.precision=s),Aie(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=$Fe(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=VFe(a))&&(n.precision=s-(n.type==="%")*2);break}}return G8(n)}function xp(e){var t=e.domain;return e.ticks=function(r){var n=t();return wD(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return hie(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,s=n.length-1,i=n[a],o=n[s],c,u,d=10;for(o<i&&(u=i,i=o,o=u,u=a,a=s,s=u);d-- >0;){if(u=ED(i,o,r),u===c)return n[a]=i,n[s]=o,t(n);if(u>0)i=Math.floor(i/u)*u,o=Math.ceil(o/u)*u;else if(u<0)i=Math.ceil(i*u)/u,o=Math.floor(o*u)/u;else break;c=u}return e},e}function mie(){var e=z8();return e.copy=function(){return lC(e,mie())},hd.apply(e,arguments),xp(e)}function pie(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,a4),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return pie(e).unknown(t)},e=arguments.length?Array.from(e,a4):[0,1],xp(r)}function gie(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],s=e[n],i;return s<a&&(i=r,r=n,n=i,i=a,a=s,s=i),e[r]=t.floor(a),e[n]=t.ceil(s),e}function IK(e){return Math.log(e)}function FK(e){return Math.exp(e)}function GFe(e){return-Math.log(-e)}function KFe(e){return-Math.exp(-e)}function qFe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function WFe(e){return e===10?qFe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function XFe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function OK(e){return(t,r)=>-e(-t,r)}function K8(e){const t=e(IK,FK),r=t.domain;let n=10,a,s;function i(){return a=XFe(n),s=WFe(n),r()[0]<0?(a=OK(a),s=OK(s),e(GFe,KFe)):e(IK,FK),t}return t.base=function(o){return arguments.length?(n=+o,i()):n},t.domain=function(o){return arguments.length?(r(o),i()):r()},t.ticks=o=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),m=a(d),g,x;const v=o==null?10:+o;let y=[];if(!(n%1)&&m-h<v){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(g=1;g<n;++g)if(x=h<0?g/s(-h):g*s(h),!(x<u)){if(x>d)break;y.push(x)}}else for(;h<=m;++h)for(g=n-1;g>=1;--g)if(x=h>0?g/s(-h):g*s(h),!(x<u)){if(x>d)break;y.push(x)}y.length*2<v&&(y=wD(u,d,v))}else y=wD(h,m,Math.min(m-h,v)).map(s);return f?y.reverse():y},t.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=eE(c)).precision==null&&(c.trim=!0),c=G8(c)),o===1/0)return c;const u=Math.max(1,n*o/t.ticks().length);return d=>{let f=d/s(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(gie(r(),{floor:o=>s(Math.floor(a(o))),ceil:o=>s(Math.ceil(a(o)))})),t}function xie(){const e=K8(TB()).domain([1,10]);return e.copy=()=>lC(e,xie()).base(e.base()),hd.apply(e,arguments),e}function DK(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function PK(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function q8(e){var t=1,r=e(DK(t),PK(t));return r.constant=function(n){return arguments.length?e(DK(t=+n),PK(t)):t},xp(r)}function vie(){var e=q8(TB());return e.copy=function(){return lC(e,vie()).constant(e.constant())},hd.apply(e,arguments)}function RK(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function YFe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function JFe(e){return e<0?-e*e:e*e}function W8(e){var t=e(Il,Il),r=1;function n(){return r===1?e(Il,Il):r===.5?e(YFe,JFe):e(RK(r),RK(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},xp(t)}function X8(){var e=W8(TB());return e.copy=function(){return lC(e,X8()).exponent(e.exponent())},hd.apply(e,arguments),e}function ZFe(){return X8.apply(null,arguments).exponent(.5)}function LK(e){return Math.sign(e)*e*e}function eOe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function bie(){var e=z8(),t=[0,1],r=!1,n;function a(s){var i=eOe(e(s));return isNaN(i)?n:r?Math.round(i):i}return a.invert=function(s){return e.invert(LK(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,a4)).map(LK)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return bie(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},hd.apply(a,arguments),xp(a)}function yie(){var e=[],t=[],r=[],n;function a(){var i=0,o=Math.max(1,t.length);for(r=new Array(o-1);++i<o;)r[i-1]=Y6e(e,i/o);return s}function s(i){return i==null||isNaN(i=+i)?n:t[iC(r,i)]}return s.invertExtent=function(i){var o=t.indexOf(i);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},s.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let o of i)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(Lm),a()},s.range=function(i){return arguments.length?(t=Array.from(i),a()):t.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return yie().domain(e).range(t).unknown(n)},hd.apply(s,arguments)}function wie(){var e=0,t=1,r=1,n=[.5],a=[0,1],s;function i(c){return c!=null&&c<=c?a[iC(n,c,0,r)]:s}function o(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return i}return i.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,o()):[e,t]},i.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,o()):a.slice()},i.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},i.unknown=function(c){return arguments.length&&(s=c),i},i.thresholds=function(){return n.slice()},i.copy=function(){return wie().domain([e,t]).range(a).unknown(s)},hd.apply(xp(i),arguments)}function Eie(){var e=[.5],t=[0,1],r,n=1;function a(s){return s!=null&&s<=s?t[iC(e,s,0,n)]:r}return a.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var i=t.indexOf(s);return[e[i-1],e[i]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return Eie().domain(e).range(t).unknown(r)},hd.apply(a,arguments)}const XI=new Date,YI=new Date;function Qi(e,t,r,n){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const i=a(s),o=a.ceil(s);return s-i<o-s?i:o},a.offset=(s,i)=>(t(s=new Date(+s),i==null?1:Math.floor(i)),s),a.range=(s,i,o)=>{const c=[];if(s=a.ceil(s),o=o==null?1:Math.floor(o),!(s<i)||!(o>0))return c;let u;do c.push(u=new Date(+s)),t(s,o),e(s);while(u<s&&s<i);return c},a.filter=s=>Qi(i=>{if(i>=i)for(;e(i),!s(i);)i.setTime(i-1)},(i,o)=>{if(i>=i)if(o<0)for(;++o<=0;)for(;t(i,-1),!s(i););else for(;--o>=0;)for(;t(i,1),!s(i););}),r&&(a.count=(s,i)=>(XI.setTime(+s),YI.setTime(+i),e(XI),e(YI),Math.floor(r(XI,YI))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?i=>n(i)%s===0:i=>a.count(0,i)%s===0):a)),a}const i4=Qi(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);i4.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Qi(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):i4);i4.range;const Nh=1e3,td=Nh*60,kh=td*60,Yh=kh*24,Y8=Yh*7,MK=Yh*30,JI=Yh*365,yg=Qi(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Nh)},(e,t)=>(t-e)/Nh,e=>e.getUTCSeconds());yg.range;const J8=Qi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Nh)},(e,t)=>{e.setTime(+e+t*td)},(e,t)=>(t-e)/td,e=>e.getMinutes());J8.range;const Z8=Qi(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*td)},(e,t)=>(t-e)/td,e=>e.getUTCMinutes());Z8.range;const eM=Qi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Nh-e.getMinutes()*td)},(e,t)=>{e.setTime(+e+t*kh)},(e,t)=>(t-e)/kh,e=>e.getHours());eM.range;const tM=Qi(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*kh)},(e,t)=>(t-e)/kh,e=>e.getUTCHours());tM.range;const cC=Qi(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*td)/Yh,e=>e.getDate()-1);cC.range;const jB=Qi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Yh,e=>e.getUTCDate()-1);jB.range;const Cie=Qi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Yh,e=>Math.floor(e/Yh));Cie.range;function Sx(e){return Qi(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*td)/Y8)}const IB=Sx(0),o4=Sx(1),tOe=Sx(2),rOe=Sx(3),eb=Sx(4),nOe=Sx(5),aOe=Sx(6);IB.range;o4.range;tOe.range;rOe.range;eb.range;nOe.range;aOe.range;function Nx(e){return Qi(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Y8)}const FB=Nx(0),l4=Nx(1),sOe=Nx(2),iOe=Nx(3),tb=Nx(4),oOe=Nx(5),lOe=Nx(6);FB.range;l4.range;sOe.range;iOe.range;tb.range;oOe.range;lOe.range;const rM=Qi(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());rM.range;const nM=Qi(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());nM.range;const Jh=Qi(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Jh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Qi(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Jh.range;const Zh=Qi(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Zh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Qi(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Zh.range;function _ie(e,t,r,n,a,s){const i=[[yg,1,Nh],[yg,5,5*Nh],[yg,15,15*Nh],[yg,30,30*Nh],[s,1,td],[s,5,5*td],[s,15,15*td],[s,30,30*td],[a,1,kh],[a,3,3*kh],[a,6,6*kh],[a,12,12*kh],[n,1,Yh],[n,2,2*Yh],[r,1,Y8],[t,1,MK],[t,3,3*MK],[e,1,JI]];function o(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:c(u,d,f),g=m?m.range(u,+d+1):[];return h?g.reverse():g}function c(u,d,f){const h=Math.abs(d-u)/f,m=M8(([,,v])=>v).right(i,h);if(m===i.length)return e.every(CD(u/JI,d/JI,f));if(m===0)return i4.every(Math.max(CD(u,d,f),1));const[g,x]=i[h/i[m-1][2]<i[m][2]/h?m-1:m];return g.every(x)}return[o,c]}const[cOe,uOe]=_ie(Zh,nM,FB,Cie,tM,Z8),[dOe,fOe]=_ie(Jh,rM,IB,cC,eM,J8);function ZI(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function e6(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function rw(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function AOe(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,s=e.days,i=e.shortDays,o=e.months,c=e.shortMonths,u=nw(a),d=aw(a),f=nw(s),h=aw(s),m=nw(i),g=aw(i),x=nw(o),v=aw(o),y=nw(c),w=aw(c),_={a:G,A:z,b:K,B:J,c:null,d:$K,e:$K,f:POe,g:GOe,G:qOe,H:FOe,I:OOe,j:DOe,L:Sie,m:ROe,M:LOe,p:te,q:M,Q:qK,s:WK,S:MOe,u:UOe,U:QOe,V:HOe,w:VOe,W:zOe,x:null,X:null,y:$Oe,Y:KOe,Z:WOe,"%":KK},T={a:H,A:Y,b:Z,B:ae,c:null,d:GK,e:GK,f:ZOe,g:cDe,G:dDe,H:XOe,I:YOe,j:JOe,L:kie,m:eDe,M:tDe,p:le,q:ie,Q:qK,s:WK,S:rDe,u:nDe,U:aDe,V:sDe,w:iDe,W:oDe,x:null,X:null,y:lDe,Y:uDe,Z:fDe,"%":KK},B={a:L,A:D,b:k,B:P,c:R,d:VK,e:VK,f:BOe,g:HK,G:QK,H:zK,I:zK,j:_Oe,L:kOe,m:COe,M:SOe,p:I,q:EOe,Q:jOe,s:IOe,S:NOe,u:xOe,U:vOe,V:bOe,w:gOe,W:yOe,x:W,X:V,y:HK,Y:QK,Z:wOe,"%":TOe};_.x=j(r,_),_.X=j(n,_),_.c=j(t,_),T.x=j(r,T),T.X=j(n,T),T.c=j(t,T);function j(ce,Ae){return function(Fe){var ne=[],_e=-1,Ie=0,Se=ce.length,me,Be,Le;for(Fe instanceof Date||(Fe=new Date(+Fe));++_e<Se;)ce.charCodeAt(_e)===37&&(ne.push(ce.slice(Ie,_e)),(Be=UK[me=ce.charAt(++_e)])!=null?me=ce.charAt(++_e):Be=me==="e"?" ":"0",(Le=Ae[me])&&(me=Le(Fe,Be)),ne.push(me),Ie=_e+1);return ne.push(ce.slice(Ie,_e)),ne.join("")}}function E(ce,Ae){return function(Fe){var ne=rw(1900,void 0,1),_e=N(ne,ce,Fe+="",0),Ie,Se;if(_e!=Fe.length)return null;if("Q"in ne)return new Date(ne.Q);if("s"in ne)return new Date(ne.s*1e3+("L"in ne?ne.L:0));if(Ae&&!("Z"in ne)&&(ne.Z=0),"p"in ne&&(ne.H=ne.H%12+ne.p*12),ne.m===void 0&&(ne.m="q"in ne?ne.q:0),"V"in ne){if(ne.V<1||ne.V>53)return null;"w"in ne||(ne.w=1),"Z"in ne?(Ie=e6(rw(ne.y,0,1)),Se=Ie.getUTCDay(),Ie=Se>4||Se===0?l4.ceil(Ie):l4(Ie),Ie=jB.offset(Ie,(ne.V-1)*7),ne.y=Ie.getUTCFullYear(),ne.m=Ie.getUTCMonth(),ne.d=Ie.getUTCDate()+(ne.w+6)%7):(Ie=ZI(rw(ne.y,0,1)),Se=Ie.getDay(),Ie=Se>4||Se===0?o4.ceil(Ie):o4(Ie),Ie=cC.offset(Ie,(ne.V-1)*7),ne.y=Ie.getFullYear(),ne.m=Ie.getMonth(),ne.d=Ie.getDate()+(ne.w+6)%7)}else("W"in ne||"U"in ne)&&("w"in ne||(ne.w="u"in ne?ne.u%7:"W"in ne?1:0),Se="Z"in ne?e6(rw(ne.y,0,1)).getUTCDay():ZI(rw(ne.y,0,1)).getDay(),ne.m=0,ne.d="W"in ne?(ne.w+6)%7+ne.W*7-(Se+5)%7:ne.w+ne.U*7-(Se+6)%7);return"Z"in ne?(ne.H+=ne.Z/100|0,ne.M+=ne.Z%100,e6(ne)):ZI(ne)}}function N(ce,Ae,Fe,ne){for(var _e=0,Ie=Ae.length,Se=Fe.length,me,Be;_e<Ie;){if(ne>=Se)return-1;if(me=Ae.charCodeAt(_e++),me===37){if(me=Ae.charAt(_e++),Be=B[me in UK?Ae.charAt(_e++):me],!Be||(ne=Be(ce,Fe,ne))<0)return-1}else if(me!=Fe.charCodeAt(ne++))return-1}return ne}function I(ce,Ae,Fe){var ne=u.exec(Ae.slice(Fe));return ne?(ce.p=d.get(ne[0].toLowerCase()),Fe+ne[0].length):-1}function L(ce,Ae,Fe){var ne=m.exec(Ae.slice(Fe));return ne?(ce.w=g.get(ne[0].toLowerCase()),Fe+ne[0].length):-1}function D(ce,Ae,Fe){var ne=f.exec(Ae.slice(Fe));return ne?(ce.w=h.get(ne[0].toLowerCase()),Fe+ne[0].length):-1}function k(ce,Ae,Fe){var ne=y.exec(Ae.slice(Fe));return ne?(ce.m=w.get(ne[0].toLowerCase()),Fe+ne[0].length):-1}function P(ce,Ae,Fe){var ne=x.exec(Ae.slice(Fe));return ne?(ce.m=v.get(ne[0].toLowerCase()),Fe+ne[0].length):-1}function R(ce,Ae,Fe){return N(ce,t,Ae,Fe)}function W(ce,Ae,Fe){return N(ce,r,Ae,Fe)}function V(ce,Ae,Fe){return N(ce,n,Ae,Fe)}function G(ce){return i[ce.getDay()]}function z(ce){return s[ce.getDay()]}function K(ce){return c[ce.getMonth()]}function J(ce){return o[ce.getMonth()]}function te(ce){return a[+(ce.getHours()>=12)]}function M(ce){return 1+~~(ce.getMonth()/3)}function H(ce){return i[ce.getUTCDay()]}function Y(ce){return s[ce.getUTCDay()]}function Z(ce){return c[ce.getUTCMonth()]}function ae(ce){return o[ce.getUTCMonth()]}function le(ce){return a[+(ce.getUTCHours()>=12)]}function ie(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var Ae=j(ce+="",_);return Ae.toString=function(){return ce},Ae},parse:function(ce){var Ae=E(ce+="",!1);return Ae.toString=function(){return ce},Ae},utcFormat:function(ce){var Ae=j(ce+="",T);return Ae.toString=function(){return ce},Ae},utcParse:function(ce){var Ae=E(ce+="",!0);return Ae.toString=function(){return ce},Ae}}}var UK={"-":"",_:" ",0:"0"},uo=/^\s*\d+/,hOe=/^%/,mOe=/[\\^$*+?|[\]().{}]/g;function Zn(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(t)+a:a)}function pOe(e){return e.replace(mOe,"\\$&")}function nw(e){return new RegExp("^(?:"+e.map(pOe).join("|")+")","i")}function aw(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function gOe(e,t,r){var n=uo.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function xOe(e,t,r){var n=uo.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function vOe(e,t,r){var n=uo.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function bOe(e,t,r){var n=uo.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function yOe(e,t,r){var n=uo.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function QK(e,t,r){var n=uo.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function HK(e,t,r){var n=uo.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function wOe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function EOe(e,t,r){var n=uo.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function COe(e,t,r){var n=uo.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function VK(e,t,r){var n=uo.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function _Oe(e,t,r){var n=uo.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function zK(e,t,r){var n=uo.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function SOe(e,t,r){var n=uo.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function NOe(e,t,r){var n=uo.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function kOe(e,t,r){var n=uo.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function BOe(e,t,r){var n=uo.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function TOe(e,t,r){var n=hOe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function jOe(e,t,r){var n=uo.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function IOe(e,t,r){var n=uo.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function $K(e,t){return Zn(e.getDate(),t,2)}function FOe(e,t){return Zn(e.getHours(),t,2)}function OOe(e,t){return Zn(e.getHours()%12||12,t,2)}function DOe(e,t){return Zn(1+cC.count(Jh(e),e),t,3)}function Sie(e,t){return Zn(e.getMilliseconds(),t,3)}function POe(e,t){return Sie(e,t)+"000"}function ROe(e,t){return Zn(e.getMonth()+1,t,2)}function LOe(e,t){return Zn(e.getMinutes(),t,2)}function MOe(e,t){return Zn(e.getSeconds(),t,2)}function UOe(e){var t=e.getDay();return t===0?7:t}function QOe(e,t){return Zn(IB.count(Jh(e)-1,e),t,2)}function Nie(e){var t=e.getDay();return t>=4||t===0?eb(e):eb.ceil(e)}function HOe(e,t){return e=Nie(e),Zn(eb.count(Jh(e),e)+(Jh(e).getDay()===4),t,2)}function VOe(e){return e.getDay()}function zOe(e,t){return Zn(o4.count(Jh(e)-1,e),t,2)}function $Oe(e,t){return Zn(e.getFullYear()%100,t,2)}function GOe(e,t){return e=Nie(e),Zn(e.getFullYear()%100,t,2)}function KOe(e,t){return Zn(e.getFullYear()%1e4,t,4)}function qOe(e,t){var r=e.getDay();return e=r>=4||r===0?eb(e):eb.ceil(e),Zn(e.getFullYear()%1e4,t,4)}function WOe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Zn(t/60|0,"0",2)+Zn(t%60,"0",2)}function GK(e,t){return Zn(e.getUTCDate(),t,2)}function XOe(e,t){return Zn(e.getUTCHours(),t,2)}function YOe(e,t){return Zn(e.getUTCHours()%12||12,t,2)}function JOe(e,t){return Zn(1+jB.count(Zh(e),e),t,3)}function kie(e,t){return Zn(e.getUTCMilliseconds(),t,3)}function ZOe(e,t){return kie(e,t)+"000"}function eDe(e,t){return Zn(e.getUTCMonth()+1,t,2)}function tDe(e,t){return Zn(e.getUTCMinutes(),t,2)}function rDe(e,t){return Zn(e.getUTCSeconds(),t,2)}function nDe(e){var t=e.getUTCDay();return t===0?7:t}function aDe(e,t){return Zn(FB.count(Zh(e)-1,e),t,2)}function Bie(e){var t=e.getUTCDay();return t>=4||t===0?tb(e):tb.ceil(e)}function sDe(e,t){return e=Bie(e),Zn(tb.count(Zh(e),e)+(Zh(e).getUTCDay()===4),t,2)}function iDe(e){return e.getUTCDay()}function oDe(e,t){return Zn(l4.count(Zh(e)-1,e),t,2)}function lDe(e,t){return Zn(e.getUTCFullYear()%100,t,2)}function cDe(e,t){return e=Bie(e),Zn(e.getUTCFullYear()%100,t,2)}function uDe(e,t){return Zn(e.getUTCFullYear()%1e4,t,4)}function dDe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?tb(e):tb.ceil(e),Zn(e.getUTCFullYear()%1e4,t,4)}function fDe(){return"+0000"}function KK(){return"%"}function qK(e){return+e}function WK(e){return Math.floor(+e/1e3)}var bv,Tie,jie;ADe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ADe(e){return bv=AOe(e),Tie=bv.format,bv.parse,jie=bv.utcFormat,bv.utcParse,bv}function hDe(e){return new Date(e)}function mDe(e){return e instanceof Date?+e:+new Date(+e)}function aM(e,t,r,n,a,s,i,o,c,u){var d=z8(),f=d.invert,h=d.domain,m=u(".%L"),g=u(":%S"),x=u("%I:%M"),v=u("%I %p"),y=u("%a %d"),w=u("%b %d"),_=u("%B"),T=u("%Y");function B(j){return(c(j)<j?m:o(j)<j?g:i(j)<j?x:s(j)<j?v:n(j)<j?a(j)<j?y:w:r(j)<j?_:T)(j)}return d.invert=function(j){return new Date(f(j))},d.domain=function(j){return arguments.length?h(Array.from(j,mDe)):h().map(hDe)},d.ticks=function(j){var E=h();return e(E[0],E[E.length-1],j??10)},d.tickFormat=function(j,E){return E==null?B:u(E)},d.nice=function(j){var E=h();return(!j||typeof j.range!="function")&&(j=t(E[0],E[E.length-1],j??10)),j?h(gie(E,j)):d},d.copy=function(){return lC(d,aM(e,t,r,n,a,s,i,o,c,u))},d}function pDe(){return hd.apply(aM(dOe,fOe,Jh,rM,IB,cC,eM,J8,yg,Tie).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function gDe(){return hd.apply(aM(cOe,uOe,Zh,nM,FB,jB,tM,Z8,yg,jie).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function OB(){var e=0,t=1,r,n,a,s,i=Il,o=!1,c;function u(f){return f==null||isNaN(f=+f)?c:i(a===0?.5:(f=(s(f)-r)*a,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=s(e=+e),n=s(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(i=f,u):i};function d(f){return function(h){var m,g;return arguments.length?([m,g]=h,i=f(m,g),u):[i(0),i(1)]}}return u.range=d(Hb),u.rangeRound=d(V8),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function vp(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Iie(){var e=xp(OB()(Il));return e.copy=function(){return vp(e,Iie())},f0.apply(e,arguments)}function Fie(){var e=K8(OB()).domain([1,10]);return e.copy=function(){return vp(e,Fie()).base(e.base())},f0.apply(e,arguments)}function Oie(){var e=q8(OB());return e.copy=function(){return vp(e,Oie()).constant(e.constant())},f0.apply(e,arguments)}function sM(){var e=W8(OB());return e.copy=function(){return vp(e,sM()).exponent(e.exponent())},f0.apply(e,arguments)}function xDe(){return sM.apply(null,arguments).exponent(.5)}function Die(){var e=[],t=Il;function r(n){if(n!=null&&!isNaN(n=+n))return t((iC(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Lm),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>X6e(e,s/n))},r.copy=function(){return Die(t).domain(e)},f0.apply(r,arguments)}function DB(){var e=0,t=.5,r=1,n=1,a,s,i,o,c,u=Il,d,f=!1,h;function m(x){return isNaN(x=+x)?h:(x=.5+((x=+d(x))-s)*(n*x<n*s?o:c),u(f?Math.max(0,Math.min(1,x)):x))}m.domain=function(x){return arguments.length?([e,t,r]=x,a=d(e=+e),s=d(t=+t),i=d(r=+r),o=a===s?0:.5/(s-a),c=s===i?0:.5/(i-s),n=s<a?-1:1,m):[e,t,r]},m.clamp=function(x){return arguments.length?(f=!!x,m):f},m.interpolator=function(x){return arguments.length?(u=x,m):u};function g(x){return function(v){var y,w,_;return arguments.length?([y,w,_]=v,u=TFe(x,[y,w,_]),m):[u(0),u(.5),u(1)]}}return m.range=g(Hb),m.rangeRound=g(V8),m.unknown=function(x){return arguments.length?(h=x,m):h},function(x){return d=x,a=x(e),s=x(t),i=x(r),o=a===s?0:.5/(s-a),c=s===i?0:.5/(i-s),n=s<a?-1:1,m}}function Pie(){var e=xp(DB()(Il));return e.copy=function(){return vp(e,Pie())},f0.apply(e,arguments)}function Rie(){var e=K8(DB()).domain([.1,1,10]);return e.copy=function(){return vp(e,Rie()).base(e.base())},f0.apply(e,arguments)}function Lie(){var e=q8(DB());return e.copy=function(){return vp(e,Lie()).constant(e.constant())},f0.apply(e,arguments)}function iM(){var e=W8(DB());return e.copy=function(){return vp(e,iM()).exponent(e.exponent())},f0.apply(e,arguments)}function vDe(){return iM.apply(null,arguments).exponent(.5)}const Rw=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:U8,scaleDiverging:Pie,scaleDivergingLog:Rie,scaleDivergingPow:iM,scaleDivergingSqrt:vDe,scaleDivergingSymlog:Lie,scaleIdentity:pie,scaleImplicit:_D,scaleLinear:mie,scaleLog:xie,scaleOrdinal:BB,scalePoint:Z6e,scalePow:X8,scaleQuantile:yie,scaleQuantize:wie,scaleRadial:bie,scaleSequential:Iie,scaleSequentialLog:Fie,scaleSequentialPow:sM,scaleSequentialQuantile:Die,scaleSequentialSqrt:xDe,scaleSequentialSymlog:Oie,scaleSqrt:ZFe,scaleSymlog:vie,scaleThreshold:Eie,scaleTime:pDe,scaleUtc:gDe,tickFormat:hie},Symbol.toStringTag,{value:"Module"}));var bp=e=>e.chartData,PB=ut([bp],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),oM=(e,t,r,n)=>n?PB(e):bp(e);function rb(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(lu(t)&&lu(r))return!0}return!1}function XK(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function bDe(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,s;if(lu(r))a=r;else if(typeof r=="function")return;if(lu(n))s=n;else if(typeof n=="function")return;var i=[a,s];if(rb(i))return i}}function yDe(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(rb(n))return XK(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,s]=e,i,o;if(a==="auto")t!=null&&(i=Math.min(...t));else if(fr(a))i=a;else if(typeof a=="function")try{t!=null&&(i=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&PG.test(a)){var c=PG.exec(a);if(c==null||t==null)i=void 0;else{var u=+c[1];i=t[0]-u}}else i=t==null?void 0:t[0];if(s==="auto")t!=null&&(o=Math.max(...t));else if(fr(s))o=s;else if(typeof s=="function")try{t!=null&&(o=s(t==null?void 0:t[1]))}catch{}else if(typeof s=="string"&&RG.test(s)){var d=RG.exec(s);if(d==null||t==null)o=void 0;else{var f=+d[1];o=t[1]+f}}else o=t==null?void 0:t[1];var h=[i,o];if(rb(h))return t==null?h:XK(h,t,r)}}}var Vb=1e9,wDe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},cM,ss=!0,ud="[DecimalError] ",Og=ud+"Invalid argument: ",lM=ud+"Exponent out of range: ",zb=Math.floor,ig=Math.pow,EDe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Xc,to=1e7,za=7,Mie=9007199254740991,c4=zb(Mie/za),Ar={};Ar.absoluteValue=Ar.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ar.comparedTo=Ar.cmp=function(e){var t,r,n,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};Ar.decimalPlaces=Ar.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*za;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ar.dividedBy=Ar.div=function(e){return Rh(this,new this.constructor(e))};Ar.dividedToIntegerBy=Ar.idiv=function(e){var t=this,r=t.constructor;return Fa(Rh(t,new r(e),0,1),r.precision)};Ar.equals=Ar.eq=function(e){return!this.cmp(e)};Ar.exponent=function(){return Si(this)};Ar.greaterThan=Ar.gt=function(e){return this.cmp(e)>0};Ar.greaterThanOrEqualTo=Ar.gte=function(e){return this.cmp(e)>=0};Ar.isInteger=Ar.isint=function(){return this.e>this.d.length-2};Ar.isNegative=Ar.isneg=function(){return this.s<0};Ar.isPositive=Ar.ispos=function(){return this.s>0};Ar.isZero=function(){return this.s===0};Ar.lessThan=Ar.lt=function(e){return this.cmp(e)<0};Ar.lessThanOrEqualTo=Ar.lte=function(e){return this.cmp(e)<1};Ar.logarithm=Ar.log=function(e){var t,r=this,n=r.constructor,a=n.precision,s=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Xc))throw Error(ud+"NaN");if(r.s<1)throw Error(ud+(r.s?"NaN":"-Infinity"));return r.eq(Xc)?new n(0):(ss=!1,t=Rh(tE(r,s),tE(e,s),s),ss=!0,Fa(t,a))};Ar.minus=Ar.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Hie(t,e):Uie(t,(e.s=-e.s,e))};Ar.modulo=Ar.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(ud+"NaN");return r.s?(ss=!1,t=Rh(r,e,0,1).times(e),ss=!0,r.minus(t)):Fa(new n(r),a)};Ar.naturalExponential=Ar.exp=function(){return Qie(this)};Ar.naturalLogarithm=Ar.ln=function(){return tE(this)};Ar.negated=Ar.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ar.plus=Ar.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Uie(t,e):Hie(t,(e.s=-e.s,e))};Ar.precision=Ar.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Og+e);if(t=Si(a)+1,n=a.d.length-1,r=n*za+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ar.squareRoot=Ar.sqrt=function(){var e,t,r,n,a,s,i,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(ud+"NaN")}for(e=Si(o),ss=!1,a=Math.sqrt(+o),a==0||a==1/0?(t=mA(o.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=zb((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=i=r+3;;)if(s=n,n=s.plus(Rh(o,s,i+2)).times(.5),mA(s.d).slice(0,i)===(t=mA(n.d)).slice(0,i)){if(t=t.slice(i-3,i+1),a==i&&t=="4999"){if(Fa(s,r+1,0),s.times(s).eq(o)){n=s;break}}else if(t!="9999")break;i+=4}return ss=!0,Fa(n,r)};Ar.times=Ar.mul=function(e){var t,r,n,a,s,i,o,c,u,d=this,f=d.constructor,h=d.d,m=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=m.length,c<u&&(s=h,h=m,m=s,i=c,c=u,u=i),s=[],i=c+u,n=i;n--;)s.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)o=s[a]+m[n]*h[a-n-1]+t,s[a--]=o%to|0,t=o/to|0;s[a]=(s[a]+t)%to|0}for(;!s[--i];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,ss?Fa(e,f.precision):e};Ar.toDecimalPlaces=Ar.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(jA(e,0,Vb),t===void 0?t=n.rounding:jA(t,0,8),Fa(r,e+Si(r)+1,t))};Ar.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=ax(n,!0):(jA(e,0,Vb),t===void 0?t=a.rounding:jA(t,0,8),n=Fa(new a(n),e+1,t),r=ax(n,!0,e+1)),r};Ar.toFixed=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?ax(a):(jA(e,0,Vb),t===void 0?t=s.rounding:jA(t,0,8),n=Fa(new s(a),e+Si(a)+1,t),r=ax(n.abs(),!1,e+Si(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Ar.toInteger=Ar.toint=function(){var e=this,t=e.constructor;return Fa(new t(e),Si(e)+1,t.rounding)};Ar.toNumber=function(){return+this};Ar.toPower=Ar.pow=function(e){var t,r,n,a,s,i,o=this,c=o.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Xc);if(o=new c(o),!o.s){if(e.s<1)throw Error(ud+"Infinity");return o}if(o.eq(Xc))return o;if(n=c.precision,e.eq(Xc))return Fa(o,n);if(t=e.e,r=e.d.length-1,i=t>=r,s=o.s,i){if((r=d<0?-d:d)<=Mie){for(a=new c(Xc),t=Math.ceil(n/za+4),ss=!1;r%2&&(a=a.times(o),JK(a.d,t)),r=zb(r/2),r!==0;)o=o.times(o),JK(o.d,t);return ss=!0,e.s<0?new c(Xc).div(a):Fa(a,n)}}else if(s<0)throw Error(ud+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,ss=!1,a=e.times(tE(o,n+u)),ss=!0,a=Qie(a),a.s=s,a};Ar.toPrecision=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?(r=Si(a),n=ax(a,r<=s.toExpNeg||r>=s.toExpPos)):(jA(e,1,Vb),t===void 0?t=s.rounding:jA(t,0,8),a=Fa(new s(a),e,t),r=Si(a),n=ax(a,e<=r||r<=s.toExpNeg,e)),n};Ar.toSignificantDigits=Ar.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(jA(e,1,Vb),t===void 0?t=n.rounding:jA(t,0,8)),Fa(new n(r),e,t)};Ar.toString=Ar.valueOf=Ar.val=Ar.toJSON=Ar[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Si(e),r=e.constructor;return ax(e,t<=r.toExpNeg||t>=r.toExpPos)};function Uie(e,t){var r,n,a,s,i,o,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),ss?Fa(t,f):t;if(c=e.d,u=t.d,i=e.e,a=t.e,c=c.slice(),s=i-a,s){for(s<0?(n=c,s=-s,o=u.length):(n=u,a=i,o=c.length),i=Math.ceil(f/za),o=i>o?i+1:o+1,s>o&&(s=o,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(o=c.length,s=u.length,o-s<0&&(s=o,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/to|0,c[s]%=to;for(r&&(c.unshift(r),++a),o=c.length;c[--o]==0;)c.pop();return t.d=c,t.e=a,ss?Fa(t,f):t}function jA(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Og+e)}function mA(e){var t,r,n,a=e.length-1,s="",i=e[0];if(a>0){for(s+=i,t=1;t<a;t++)n=e[t]+"",r=za-n.length,r&&(s+=fm(r)),s+=n;i=e[t],n=i+"",r=za-n.length,r&&(s+=fm(r))}else if(i===0)return"0";for(;i%10===0;)i/=10;return s+i}var Rh=function(){function e(n,a){var s,i=0,o=n.length;for(n=n.slice();o--;)s=n[o]*a+i,n[o]=s%to|0,i=s/to|0;return i&&n.unshift(i),n}function t(n,a,s,i){var o,c;if(s!=i)c=s>i?1:-1;else for(o=c=0;o<s;o++)if(n[o]!=a[o]){c=n[o]>a[o]?1:-1;break}return c}function r(n,a,s){for(var i=0;s--;)n[s]-=i,i=n[s]<a[s]?1:0,n[s]=i*to+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,i){var o,c,u,d,f,h,m,g,x,v,y,w,_,T,B,j,E,N,I=n.constructor,L=n.s==a.s?1:-1,D=n.d,k=a.d;if(!n.s)return new I(n);if(!a.s)throw Error(ud+"Division by zero");for(c=n.e-a.e,E=k.length,B=D.length,m=new I(L),g=m.d=[],u=0;k[u]==(D[u]||0);)++u;if(k[u]>(D[u]||0)&&--c,s==null?w=s=I.precision:i?w=s+(Si(n)-Si(a))+1:w=s,w<0)return new I(0);if(w=w/za+2|0,u=0,E==1)for(d=0,k=k[0],w++;(u<B||d)&&w--;u++)_=d*to+(D[u]||0),g[u]=_/k|0,d=_%k|0;else{for(d=to/(k[0]+1)|0,d>1&&(k=e(k,d),D=e(D,d),E=k.length,B=D.length),T=E,x=D.slice(0,E),v=x.length;v<E;)x[v++]=0;N=k.slice(),N.unshift(0),j=k[0],k[1]>=to/2&&++j;do d=0,o=t(k,x,E,v),o<0?(y=x[0],E!=v&&(y=y*to+(x[1]||0)),d=y/j|0,d>1?(d>=to&&(d=to-1),f=e(k,d),h=f.length,v=x.length,o=t(f,x,h,v),o==1&&(d--,r(f,E<h?N:k,h))):(d==0&&(o=d=1),f=k.slice()),h=f.length,h<v&&f.unshift(0),r(x,f,v),o==-1&&(v=x.length,o=t(k,x,E,v),o<1&&(d++,r(x,E<v?N:k,v))),v=x.length):o===0&&(d++,x=[0]),g[u++]=d,o&&x[0]?x[v++]=D[T]||0:(x=[D[T]],v=1);while((T++<B||x[0]!==void 0)&&w--)}return g[0]||g.shift(),m.e=c,Fa(m,i?s+Si(m)+1:s)}}();function Qie(e,t){var r,n,a,s,i,o,c=0,u=0,d=e.constructor,f=d.precision;if(Si(e)>16)throw Error(lM+Si(e));if(!e.s)return new d(Xc);for(ss=!1,o=f,i=new d(.03125);e.abs().gte(.1);)e=e.times(i),u+=5;for(n=Math.log(ig(2,u))/Math.LN10*2+5|0,o+=n,r=a=s=new d(Xc),d.precision=o;;){if(a=Fa(a.times(e),o),r=r.times(++c),i=s.plus(Rh(a,r,o)),mA(i.d).slice(0,o)===mA(s.d).slice(0,o)){for(;u--;)s=Fa(s.times(s),o);return d.precision=f,t==null?(ss=!0,Fa(s,f)):s}s=i}}function Si(e){for(var t=e.e*za,r=e.d[0];r>=10;r/=10)t++;return t}function t6(e,t,r){if(t>e.LN10.sd())throw ss=!0,r&&(e.precision=r),Error(ud+"LN10 precision limit exceeded");return Fa(new e(e.LN10),t)}function fm(e){for(var t="";e--;)t+="0";return t}function tE(e,t){var r,n,a,s,i,o,c,u,d,f=1,h=10,m=e,g=m.d,x=m.constructor,v=x.precision;if(m.s<1)throw Error(ud+(m.s?"NaN":"-Infinity"));if(m.eq(Xc))return new x(0);if(t==null?(ss=!1,u=v):u=t,m.eq(10))return t==null&&(ss=!0),t6(x,u);if(u+=h,x.precision=u,r=mA(g),n=r.charAt(0),s=Si(m),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=mA(m.d),n=r.charAt(0),f++;s=Si(m),n>1?(m=new x("0."+r),s++):m=new x(n+"."+r.slice(1))}else return c=t6(x,u+2,v).times(s+""),m=tE(new x(n+"."+r.slice(1)),u-h).plus(c),x.precision=v,t==null?(ss=!0,Fa(m,v)):m;for(o=i=m=Rh(m.minus(Xc),m.plus(Xc),u),d=Fa(m.times(m),u),a=3;;){if(i=Fa(i.times(d),u),c=o.plus(Rh(i,new x(a),u)),mA(c.d).slice(0,u)===mA(o.d).slice(0,u))return o=o.times(2),s!==0&&(o=o.plus(t6(x,u+2,v).times(s+""))),o=Rh(o,new x(f),u),x.precision=v,t==null?(ss=!0,Fa(o,v)):o;o=c,a+=2}}function YK(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=zb(r/za),e.d=[],n=(r+1)%za,r<0&&(n+=za),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=za;n<a;)e.d.push(+t.slice(n,n+=za));t=t.slice(n),n=za-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),ss&&(e.e>c4||e.e<-c4))throw Error(lM+r)}else e.s=0,e.e=0,e.d=[0];return e}function Fa(e,t,r){var n,a,s,i,o,c,u,d,f=e.d;for(i=1,s=f[0];s>=10;s/=10)i++;if(n=t-i,n<0)n+=za,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/za),s=f.length,d>=s)return e;for(u=s=f[d],i=1;s>=10;s/=10)i++;n%=za,a=n-za+i}if(r!==void 0&&(s=ig(10,i-a-1),o=u/s%10|0,c=t<0||f[d+1]!==void 0||u%s,c=r<4?(o||c)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||c||r==6&&(n>0?a>0?u/ig(10,i-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(s=Si(e),f.length=1,t=t-s-1,f[0]=ig(10,(za-t%za)%za),e.e=zb(-t/za)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,s=1,d--):(f.length=d+1,s=ig(10,za-n),f[d]=a>0?(u/ig(10,i-a)%ig(10,a)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==to&&(f[0]=1,++e.e);break}else{if(f[d]+=s,f[d]!=to)break;f[d--]=0,s=1}for(n=f.length;f[--n]===0;)f.pop();if(ss&&(e.e>c4||e.e<-c4))throw Error(lM+Si(e));return e}function Hie(e,t){var r,n,a,s,i,o,c,u,d,f,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),ss?Fa(t,m):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),i=u-n,i){for(d=i<0,d?(r=c,i=-i,o=f.length):(r=f,n=u,o=c.length),a=Math.max(Math.ceil(m/za),o)+2,i>a&&(i=a,r.length=1),r.reverse(),a=i;a--;)r.push(0);r.reverse()}else{for(a=c.length,o=f.length,d=a<o,d&&(o=a),a=0;a<o;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}i=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),o=c.length,a=f.length-o;a>0;--a)c[o++]=0;for(a=f.length;a>i;){if(c[--a]<f[a]){for(s=a;s&&c[--s]===0;)c[s]=to-1;--c[s],c[a]+=to}c[a]-=f[a]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,ss?Fa(t,m):t):new h(0)}function ax(e,t,r){var n,a=Si(e),s=mA(e.d),i=s.length;return t?(r&&(n=r-i)>0?s=s.charAt(0)+"."+s.slice(1)+fm(n):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+fm(-a-1)+s,r&&(n=r-i)>0&&(s+=fm(n))):a>=i?(s+=fm(a+1-i),r&&(n=r-a-1)>0&&(s=s+"."+fm(n))):((n=a+1)<i&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-i)>0&&(a+1===i&&(s+="."),s+=fm(n))),e.s<0?"-"+s:s}function JK(e,t){if(e.length>t)return e.length=t,!0}function Vie(e){var t,r,n;function a(s){var i=this;if(!(i instanceof a))return new a(s);if(i.constructor=a,s instanceof a){i.s=s.s,i.e=s.e,i.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Og+s);if(s>0)i.s=1;else if(s<0)s=-s,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(s===~~s&&s<1e7){i.e=0,i.d=[s];return}return YK(i,s.toString())}else if(typeof s!="string")throw Error(Og+s);if(s.charCodeAt(0)===45?(s=s.slice(1),i.s=-1):i.s=1,EDe.test(s))YK(i,s);else throw Error(Og+s)}if(a.prototype=Ar,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=Vie,a.config=a.set=CDe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function CDe(e){if(!e||typeof e!="object")throw Error(ud+"Object expected");var t,r,n,a=["precision",1,Vb,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(zb(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(Og+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Og+r+": "+n);return this}var cM=Vie(wDe);Xc=new cM(1);const ba=cM;var _De=e=>e,zie={},$ie=e=>e===zie,ZK=e=>function t(){return arguments.length===0||arguments.length===1&&$ie(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},Gie=(e,t)=>e===1?t:ZK(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(i=>i!==zie).length;return s>=e?t(...n):Gie(e-s,ZK(function(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];var u=n.map(d=>$ie(d)?o.shift():d);return t(...u,...o)}))}),RB=e=>Gie(e.length,e),TD=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},SDe=RB((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),NDe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return _De;var a=r.reverse(),s=a[0],i=a.slice(1);return function(){return i.reduce((o,c)=>c(o),s(...arguments))}},jD=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),Kie=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t&&a.every((i,o)=>{var c;return i===((c=t)===null||c===void 0?void 0:c[o])})||(t=a,r=e(...a)),r}};function qie(e){var t;return e===0?t=1:t=Math.floor(new ba(e).abs().log(10).toNumber())+1,t}function Wie(e,t,r){for(var n=new ba(e),a=0,s=[];n.lt(t)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}RB((e,t,r)=>{var n=+e,a=+t;return n+r*(a-n)});RB((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});RB((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var Xie=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},Yie=(e,t,r)=>{if(e.lte(0))return new ba(0);var n=qie(e.toNumber()),a=new ba(10).pow(n),s=e.div(a),i=n!==1?.05:.1,o=new ba(Math.ceil(s.div(i).toNumber())).add(r).mul(i),c=o.mul(a);return t?new ba(c.toNumber()):new ba(Math.ceil(c.toNumber()))},kDe=(e,t,r)=>{var n=new ba(1),a=new ba(e);if(!a.isint()&&r){var s=Math.abs(e);s<1?(n=new ba(10).pow(qie(e)-1),a=new ba(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new ba(Math.floor(e)))}else e===0?a=new ba(Math.floor((t-1)/2)):r||(a=new ba(Math.floor(e)));var i=Math.floor((t-1)/2),o=NDe(SDe(c=>a.add(new ba(c-i).mul(n)).toNumber()),TD);return o(0,t)},Jie=function(t,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new ba(0),tickMin:new ba(0),tickMax:new ba(0)};var i=Yie(new ba(r).sub(t).div(n-1),a,s),o;t<=0&&r>=0?o=new ba(0):(o=new ba(t).add(r).div(2),o=o.sub(new ba(o).mod(i)));var c=Math.ceil(o.sub(t).div(i).toNumber()),u=Math.ceil(new ba(r).sub(o).div(i).toNumber()),d=c+u+1;return d>n?Jie(t,r,n,a,s+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:i,tickMin:o.sub(new ba(c).mul(i)),tickMax:o.add(new ba(u).mul(i))})};function BDe(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(n,2),[i,o]=Xie([t,r]);if(i===-1/0||o===1/0){var c=o===1/0?[i,...TD(0,n-1).map(()=>1/0)]:[...TD(0,n-1).map(()=>-1/0),o];return t>r?jD(c):c}if(i===o)return kDe(i,n,a);var{step:u,tickMin:d,tickMax:f}=Jie(i,o,s,a,0),h=Wie(d,f.add(new ba(.1).mul(u)),u);return t>r?jD(h):h}function TDe(e,t){var[r,n]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,i]=Xie([r,n]);if(s===-1/0||i===1/0)return[r,n];if(s===i)return[s];var o=Math.max(t,2),c=Yie(new ba(i).sub(s).div(o-1),a,0),u=[...Wie(new ba(s),new ba(i),c),i];return a===!1&&(u=u.map(d=>Math.round(d))),r>n?jD(u):u}var jDe=Kie(BDe),IDe=Kie(TDe),Zie=e=>e.rootProps.maxBarSize,FDe=e=>e.rootProps.barGap,eoe=e=>e.rootProps.barCategoryGap,ODe=e=>e.rootProps.barSize,uC=e=>e.rootProps.stackOffset,uM=e=>e.options.chartName,dM=e=>e.rootProps.syncId,toe=e=>e.rootProps.syncMethod,fM=e=>e.options.eventEmitter,dA={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},ic={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},LB=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},DDe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:dA.angleAxisId,includeHidden:!1,name:void 0,reversed:dA.reversed,scale:dA.scale,tick:dA.tick,tickCount:void 0,ticks:void 0,type:dA.type,unit:void 0},PDe={allowDataOverflow:ic.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ic.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ic.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ic.scale,tick:ic.tick,tickCount:ic.tickCount,ticks:void 0,type:ic.type,unit:void 0},RDe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:dA.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:dA.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:dA.scale,tick:dA.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},LDe={allowDataOverflow:ic.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ic.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ic.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ic.scale,tick:ic.tick,tickCount:ic.tickCount,ticks:void 0,type:"category",unit:void 0},$b=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?RDe:DDe,dC=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?LDe:PDe,MB=e=>e.polarOptions,AM=ut([u0,d0,Ui],Tse),roe=ut([MB,AM],(e,t)=>{if(e!=null)return Pl(e.innerRadius,t,0)}),noe=ut([MB,AM],(e,t)=>{if(e!=null)return Pl(e.outerRadius,t,t*.8)}),MDe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},aoe=ut([MB],MDe),UDe=ut([$b,aoe],LB),soe=ut([AM,roe,noe],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]}),QDe=ut([dC,soe],LB),Gb=ut([In,MB,roe,noe,u0,d0],(e,t,r,n,a,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:i,cy:o,startAngle:c,endAngle:u}=t;return{cx:Pl(i,a,a/2),cy:Pl(o,s,s/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),Oa=(e,t)=>t,fC=(e,t,r)=>r;function hM(e){return e==null?void 0:e.id}var Hi=e=>{var t=In(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Kb=e=>e.tooltip.settings.axisId,Vi=e=>{var t=Hi(e),r=Kb(e);return qb(e,t,r)};function ioe(e,t,r){var{chartData:n=[]}=t,a=r==null?void 0:r.dataKey,s=new Map;return e.forEach(i=>{var o,c=(o=i.data)!==null&&o!==void 0?o:n;if(!(c==null||c.length===0)){var u=hM(i);c.forEach((d,f)=>{var h=a==null?f:String(Ha(d,a,null)),m=Ha(d,i.dataKey,0),g;s.has(h)?g=s.get(h):g={},Object.assign(g,{[u]:m}),s.set(h,g)})}}),Array.from(s.values())}function UB(e){return e.stackId!=null&&e.dataKey!=null}function eq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function u4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eq(Object(r),!0).forEach(function(n){HDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HDe(e,t,r){return(t=VDe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VDe(e){var t=zDe(e,"string");return typeof t=="symbol"?t:t+""}function zDe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ID=[0,"auto"],Vc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},A0=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??Vc},zc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:ID,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:SB},yp=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??zc},$De={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},mM=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??$De},oi=(e,t,r)=>{switch(t){case"xAxis":return A0(e,r);case"yAxis":return yp(e,r);case"zAxis":return mM(e,r);case"angleAxis":return $b(e,r);case"radiusAxis":return dC(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},GDe=(e,t,r)=>{switch(t){case"xAxis":return A0(e,r);case"yAxis":return yp(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},qb=(e,t,r)=>{switch(t){case"xAxis":return A0(e,r);case"yAxis":return yp(e,r);case"angleAxis":return $b(e,r);case"radiusAxis":return dC(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},ooe=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function pM(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var gM=e=>e.graphicalItems.cartesianItems,KDe=ut([Oa,fC],pM),xM=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),AC=ut([gM,oi,KDe],xM),loe=ut([AC],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(UB)),coe=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),uoe=ut([AC],coe),vM=e=>e.map(t=>t.data).filter(Boolean).flat(1),qDe=ut([AC],vM),bM=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},yM=ut([qDe,oM],bM),wM=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Ha(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:Ha(a,n)}))):e.map(n=>({value:n})),QB=ut([yM,oi,AC],wM);function doe(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function kx(e){return e.filter(t=>TA(t)||t instanceof Date).map(Number).filter(t=>su(t)===!1)}function WDe(e,t,r){return!r||typeof t!="number"||su(t)?[]:r.length?kx(r.flatMap(n=>{var a=Ha(e,n.dataKey),s,i;if(Array.isArray(a)?[s,i]=a:s=i=a,!(!lu(s)||!lu(i)))return[t-s,t+i]})):[]}var XDe=ut([loe,oM,Vi],ioe),foe=(e,t,r)=>{var n={},a=t.reduce((s,i)=>(i.stackId==null||(s[i.stackId]==null&&(s[i.stackId]=[]),s[i.stackId].push(i)),s),n);return Object.fromEntries(Object.entries(a).map(s=>{var[i,o]=s,c=o.map(hM);return[i,{stackedData:V3e(e,c,r),graphicalItems:o}]}))},FD=ut([XDe,loe,uC],foe),Aoe=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:a}=t;if(r!=="zAxis"){var s=q3e(e,n,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},YDe=ut([FD,bp,Oa],Aoe),hoe=(e,t,r,n,a)=>r.length>0?e.flatMap(s=>r.flatMap(i=>{var o,c,u=(o=n[i.id])===null||o===void 0?void 0:o.filter(f=>doe(a,f)),d=Ha(s,(c=t.dataKey)!==null&&c!==void 0?c:i.dataKey);return{value:d,errorDomain:WDe(s,d,u)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(s=>({value:Ha(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),HB=e=>e.errorBars,moe=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>doe(r,n));ut([uoe,HB,Oa],moe);var JDe=ut([yM,oi,uoe,HB,Oa],hoe);function ZDe(e){var{value:t}=e;if(TA(t)||t instanceof Date)return t}var tq=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=kx(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},ePe=(e,t,r)=>{var n=e.map(ZDe).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&Nae(n))?tie(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},EM=e=>{var t;if(e==null||!("domain"in e))return ID;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=kx(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:ID},d4=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),i=Math.min(...s),o=Math.max(...s);return[i,o]}},poe=e=>e.referenceElements.dots,Wb=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),tPe=ut([poe,Oa,fC],Wb),goe=e=>e.referenceElements.areas,rPe=ut([goe,Oa,fC],Wb),xoe=e=>e.referenceElements.lines,nPe=ut([xoe,Oa,fC],Wb),voe=(e,t)=>{var r=kx(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},aPe=ut(tPe,Oa,voe),boe=(e,t)=>{var r=kx(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},sPe=ut([rPe,Oa],boe),yoe=(e,t)=>{var r=kx(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},iPe=ut(nPe,Oa,yoe),oPe=ut(aPe,iPe,sPe,(e,t,r)=>d4(e,r,t)),woe=ut([oi],EM),CM=(e,t,r,n,a,s,i)=>{var o=bDe(t,e.allowDataOverflow);if(o!=null)return o;var c=s==="vertical"&&i==="xAxis"||s==="horizontal"&&i==="yAxis",u=c?d4(r,a,tq(n)):d4(a,tq(n));return yDe(t,u,e.allowDataOverflow)},lPe=ut([oi,woe,YDe,JDe,oPe,In,Oa],CM),cPe=[0,1],_M=(e,t,r,n,a,s,i)=>{if(!((e==null||r==null||r.length===0)&&i===void 0)){var{dataKey:o,type:c}=e,u=gp(t,s);return u&&o==null?tie(0,r.length):c==="category"?ePe(n,e,u):a==="expand"?cPe:i}},SM=ut([oi,In,yM,QB,uC,Oa,lPe],_M),Eoe=(e,t,r,n,a)=>{if(e!=null){var{scale:s,type:i}=e;if(s==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":i==="category"?"band":"linear";if(typeof s=="string"){var o="scale".concat(nC(s));return o in Rw?o:"point"}}},wp=ut([oi,In,ooe,uM,Oa],Eoe);function uPe(e){if(e!=null){if(e in Rw)return Rw[e]();var t="scale".concat(nC(e));if(t in Rw)return Rw[t]()}}function VB(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=uPe(t);if(a!=null){var s=a.domain(r).range(n);return L3e(s),s}}}var NM=(e,t,r)=>{var n=EM(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&rb(e))return jDe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&rb(e))return IDe(e,t.tickCount,t.allowDecimals)}},kM=ut([SM,qb,wp],NM),BM=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&rb(t)&&Array.isArray(r)&&r.length>0){var a=t[0],s=r[0],i=t[1],o=r[r.length-1];return[Math.min(a,s),Math.max(i,o)]}return t},dPe=ut([oi,SM,kM,Oa],BM),fPe=ut(QB,oi,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(kx(e.map(o=>o.value))).sort((o,c)=>o-c);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var s=0;s<n.length-1;s++){var i=n[s+1]-n[s];r=Math.min(r,i)}return r/a}}),Coe=ut(fPe,In,eoe,Ui,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!lu(e))return 0;var s=t==="vertical"?n.height:n.width;if(a==="gap")return e*s/2;if(a==="no-gap"){var i=Pl(r,e*s),o=e*s/2;return o-i-(o-i)/s*i}return 0}),APe=(e,t)=>{var r=A0(e,t);return r==null||typeof r.padding!="string"?0:Coe(e,"xAxis",t,r.padding)},hPe=(e,t)=>{var r=yp(e,t);return r==null||typeof r.padding!="string"?0:Coe(e,"yAxis",t,r.padding)},mPe=ut(A0,APe,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),pPe=ut(yp,hPe,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),gPe=ut([Ui,mPe,kB,NB,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),xPe=ut([Ui,In,pPe,kB,NB,(e,t,r)=>r],(e,t,r,n,a,s)=>{var{padding:i}=a;return s?[n.height-i.bottom,i.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),hC=(e,t,r,n)=>{var a;switch(t){case"xAxis":return gPe(e,r,n);case"yAxis":return xPe(e,r,n);case"zAxis":return(a=mM(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return aoe(e);case"radiusAxis":return soe(e,r);default:return}},_oe=ut([oi,hC],LB),Xb=ut([oi,wp,dPe,_oe],VB);ut([AC,HB,Oa],moe);function Soe(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var zB=(e,t)=>t,$B=(e,t,r)=>r,vPe=ut(j8,zB,$B,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Soe)),bPe=ut(I8,zB,$B,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Soe)),Noe=(e,t)=>({width:e.width,height:t.height}),yPe=(e,t)=>{var r=typeof t.width=="number"?t.width:SB;return{width:r,height:e.height}},koe=ut(Ui,A0,Noe),wPe=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},EPe=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},CPe=ut(d0,Ui,vPe,zB,$B,(e,t,r,n,a)=>{var s={},i;return r.forEach(o=>{var c=Noe(t,o);i==null&&(i=wPe(t,n,e));var u=n==="top"&&!a||n==="bottom"&&a;s[o.id]=i-Number(u)*c.height,i+=(u?-1:1)*c.height}),s}),_Pe=ut(u0,Ui,bPe,zB,$B,(e,t,r,n,a)=>{var s={},i;return r.forEach(o=>{var c=yPe(t,o);i==null&&(i=EPe(t,n,e));var u=n==="left"&&!a||n==="right"&&a;s[o.id]=i-Number(u)*c.width,i+=(u?-1:1)*c.width}),s}),SPe=(e,t)=>{var r=Ui(e),n=A0(e,t);if(n!=null){var a=CPe(e,n.orientation,n.mirror),s=a[t];return s==null?{x:r.left,y:0}:{x:r.left,y:s}}},NPe=(e,t)=>{var r=Ui(e),n=yp(e,t);if(n!=null){var a=_Pe(e,n.orientation,n.mirror),s=a[t];return s==null?{x:0,y:r.top}:{x:s,y:r.top}}},Boe=ut(Ui,yp,(e,t)=>{var r=typeof t.width=="number"?t.width:SB;return{width:r,height:e.height}}),rq=(e,t,r)=>{switch(t){case"xAxis":return koe(e,r).width;case"yAxis":return Boe(e,r).height;default:return}},Toe=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:i}=r,o=gp(e,n),c=t.map(u=>u.value);if(i&&o&&s==="category"&&a&&Nae(c))return c}},mC=ut([In,QB,oi,Oa],Toe),TM=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,i=gp(e,n);if(i&&(a==="number"||s!=="auto"))return t.map(o=>o.value)}},jM=ut([In,QB,qb,Oa],TM),nq=ut([In,GDe,wp,Xb,mC,jM,hC,kM,Oa],(e,t,r,n,a,s,i,o,c)=>{if(t==null)return null;var u=gp(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:s,duplicateDomain:a,isCategorical:u,niceTicks:o,range:i,realScaleType:r,scale:n}}),joe=(e,t,r,n,a,s,i,o,c)=>{if(!(t==null||n==null)){var u=gp(e,c),{type:d,ticks:f,tickCount:h}=t,m=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,g=d==="category"&&n.bandwidth?n.bandwidth()/m:0;g=c==="angleAxis"&&s!=null&&s.length>=2?oo(s[0]-s[1])*2*g:g;var x=f||a;if(x){var v=x.map((y,w)=>{var _=i?i.indexOf(y):y;return{index:w,coordinate:n(_)+g,value:y,offset:g}});return v.filter(y=>!su(y.coordinate))}return u&&o?o.map((y,w)=>({coordinate:n(y)+g,value:y,index:w,offset:g})):n.ticks?n.ticks(h).map(y=>({coordinate:n(y)+g,value:y,offset:g})):n.domain().map((y,w)=>({coordinate:n(y)+g,value:i?i[y]:y,index:w,offset:g}))}},Ioe=ut([In,qb,wp,Xb,kM,hC,mC,jM,Oa],joe),Foe=(e,t,r,n,a,s,i)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var o=gp(e,i),{tickCount:c}=t,u=0;return u=i==="angleAxis"&&(n==null?void 0:n.length)>=2?oo(n[0]-n[1])*2*u:u,o&&s?s.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:a?a[d]:d,index:f,offset:u}))}},nb=ut([In,qb,Xb,hC,mC,jM,Oa],Foe),ab=ut(oi,Xb,(e,t)=>{if(!(e==null||t==null))return u4(u4({},e),{},{scale:t})}),kPe=ut([oi,wp,SM,_oe],VB);ut((e,t,r)=>mM(e,r),kPe,(e,t)=>{if(!(e==null||t==null))return u4(u4({},e),{},{scale:t})});var BPe=ut([In,j8,I8],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Ooe=e=>e.options.defaultTooltipEventType,Doe=e=>e.options.validateTooltipEventTypes;function Poe(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function IM(e,t){var r=Ooe(e),n=Doe(e);return Poe(t,r,n)}function TPe(e){return or(t=>IM(t,e))}var Roe=(e,t)=>{var r,n=Number(t);if(!(su(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},jPe=e=>e.tooltip.settings,vm={active:!1,index:null,dataKey:void 0,coordinate:void 0},IPe={itemInteraction:{click:vm,hover:vm},axisInteraction:{click:vm,hover:vm},keyboardInteraction:vm,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Loe=Au({name:"tooltip",initialState:IPe,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=Ph(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:FPe,removeTooltipEntrySettings:OPe,setTooltipSettingsState:DPe,setActiveMouseOverItemIndex:Moe,mouseLeaveItem:PPe,mouseLeaveChart:Uoe,setActiveClickItemIndex:RPe,setMouseOverAxisIndex:Qoe,setMouseClickAxisIndex:LPe,setSyncInteraction:OD,setKeyboardInteraction:DD}=Loe.actions,MPe=Loe.reducer;function aq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function o5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aq(Object(r),!0).forEach(function(n){UPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UPe(e,t,r){return(t=QPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QPe(e){var t=HPe(e,"string");return typeof t=="symbol"?t:t+""}function HPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VPe(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function zPe(e){return e.index!=null}var Hoe=(e,t,r,n)=>{if(t==null)return vm;var a=VPe(e,t,r);if(a==null)return vm;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(zPe(a)){if(s)return o5(o5({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return o5(o5({},vm),{},{coordinate:a.coordinate})},FM=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!lu(n))return r;var a=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(a,Math.min(n,s)))},Voe=(e,t,r,n,a,s,i,o)=>{if(!(s==null||o==null)){var c=i[0],u=c==null?void 0:o(c.positions,s);if(u!=null)return u;var d=a==null?void 0:a[Number(s)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},zoe=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var i;return((i=s.settings)===null||i===void 0?void 0:i.dataKey)===a})},pC=e=>e.options.tooltipPayloadSearcher,Yb=e=>e.tooltip;function sq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function iq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sq(Object(r),!0).forEach(function(n){$Pe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $Pe(e,t,r){return(t=GPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GPe(e){var t=KPe(e,"string");return typeof t=="symbol"?t:t+""}function KPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qPe(e,t){return e??t}var $oe=(e,t,r,n,a,s,i)=>{if(!(t==null||s==null)){var{chartData:o,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((h,m)=>{var g,{dataDefinedOnItem:x,settings:v}=m,y=qPe(x,o),w=Array.isArray(y)?Ise(y,u,d):y,_=(g=v==null?void 0:v.dataKey)!==null&&g!==void 0?g:n==null?void 0:n.dataKey,T=v==null?void 0:v.nameKey,B;if(n!=null&&n.dataKey&&Array.isArray(w)&&!Array.isArray(w[0])&&i==="axis"?B=TBe(w,n.dataKey,a):B=s(w,t,c,T),Array.isArray(B))B.forEach(E=>{var N=iq(iq({},v),{},{name:E.name,unit:E.unit,color:void 0,fill:void 0});h.push(LG({tooltipEntrySettings:N,dataKey:E.dataKey,payload:E.payload,value:Ha(E.payload,E.dataKey),name:E.name}))});else{var j;h.push(LG({tooltipEntrySettings:v,dataKey:_,payload:B,value:Ha(B,_),name:(j=Ha(B,T))!==null&&j!==void 0?j:v==null?void 0:v.name}))}return h},f)}},OM=ut([Vi,In,ooe,uM,Hi],Eoe),WPe=ut([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),XPe=ut([Hi,Kb],pM),gC=ut([WPe,Vi,XPe],xM),YPe=ut([gC],e=>e.filter(UB)),JPe=ut([gC],vM),Jb=ut([JPe,bp],bM),ZPe=ut([YPe,bp,Vi],ioe),DM=ut([Jb,Vi,gC],wM),eRe=ut([Vi],EM),tRe=ut([gC],e=>e.filter(UB)),rRe=ut([ZPe,tRe,uC],foe),nRe=ut([rRe,bp,Hi],Aoe),aRe=ut([gC],coe),sRe=ut([Jb,Vi,aRe,HB,Hi],hoe),iRe=ut([poe,Hi,Kb],Wb),oRe=ut([iRe,Hi],voe),lRe=ut([goe,Hi,Kb],Wb),cRe=ut([lRe,Hi],boe),uRe=ut([xoe,Hi,Kb],Wb),dRe=ut([uRe,Hi],yoe),fRe=ut([oRe,dRe,cRe],d4),ARe=ut([Vi,eRe,nRe,sRe,fRe,In,Hi],CM),Goe=ut([Vi,In,Jb,DM,uC,Hi,ARe],_M),hRe=ut([Goe,Vi,OM],NM),mRe=ut([Vi,Goe,hRe,Hi],BM),Koe=e=>{var t=Hi(e),r=Kb(e),n=!1;return hC(e,t,r,n)},qoe=ut([Vi,Koe],LB),Woe=ut([Vi,OM,mRe,qoe],VB),pRe=ut([In,DM,Vi,Hi],Toe),gRe=ut([In,DM,Vi,Hi],TM),xRe=(e,t,r,n,a,s,i,o)=>{if(t){var{type:c}=t,u=gp(e,o);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=o==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?oo(a[0]-a[1])*2*f:f,u&&i?i.map((h,m)=>({coordinate:n(h)+f,value:h,index:m,offset:f})):n.domain().map((h,m)=>({coordinate:n(h)+f,value:s?s[h]:h,index:m,offset:f}))}}},h0=ut([In,Vi,OM,Woe,Koe,pRe,gRe,Hi],xRe),PM=ut([Ooe,Doe,jPe],(e,t,r)=>Poe(r.shared,e,t)),Xoe=e=>e.tooltip.settings.trigger,RM=e=>e.tooltip.settings.defaultIndex,GB=ut([Yb,PM,Xoe,RM],Hoe),rp=ut([GB,Jb],FM),Yoe=ut([h0,rp],Roe),Joe=ut([GB],e=>{if(e)return e.dataKey}),Zoe=ut([Yb,PM,Xoe,RM],zoe),vRe=ut([u0,d0,In,Ui,h0,RM,Zoe,pC],Voe),bRe=ut([GB,vRe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),yRe=ut([GB],e=>e.active),wRe=ut([Zoe,rp,bp,Vi,Yoe,pC,PM],$oe),ERe=ut([wRe],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function oq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function lq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oq(Object(r),!0).forEach(function(n){CRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CRe(e,t,r){return(t=_Re(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Re(e){var t=SRe(e,"string");return typeof t=="symbol"?t:t+""}function SRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var NRe=()=>or(Vi),kRe=()=>{var e=NRe(),t=or(h0),r=or(Woe);return X2(lq(lq({},e),{},{scale:r}),t)},BRe=()=>or(uM),LM=(e,t)=>t,ele=(e,t,r)=>r,MM=(e,t,r,n)=>n,TRe=ut(h0,e=>vB(e,t=>t.coordinate)),UM=ut([Yb,LM,ele,MM],Hoe),tle=ut([UM,Jb],FM),jRe=(e,t,r)=>{if(t!=null){var n=Yb(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},rle=ut([Yb,LM,ele,MM],zoe),f4=ut([u0,d0,In,Ui,h0,MM,rle,pC],Voe),IRe=ut([UM,f4],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),nle=ut(h0,tle,Roe),FRe=ut([rle,tle,bp,Vi,nle,pC,LM],$oe),ORe=ut([UM],e=>({isActive:e.active,activeIndex:e.index})),DRe=(e,t,r,n,a,s,i,o)=>{if(!(!e||!t||!n||!a||!s)){var c=W3e(e.chartX,e.chartY,t,r,o);if(c){var u=Y3e(c,t),d=P3e(u,i,s,n,a),f=X3e(t,s,d,c);return{activeIndex:String(d),activeCoordinate:f}}}};function PD(){return PD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},PD.apply(null,arguments)}function cq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function l5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cq(Object(r),!0).forEach(function(n){PRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PRe(e,t,r){return(t=RRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RRe(e){var t=LRe(e,"string");return typeof t=="symbol"?t:t+""}function LRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MRe(e){var{coordinate:t,payload:r,index:n,offset:a,tooltipAxisBandSize:s,layout:i,cursor:o,tooltipEventType:c,chartName:u}=e,d=t,f=r,h=n;if(!o||!d||u!=="ScatterChart"&&c!=="axis")return null;var m,g;if(u==="ScatterChart")m=d,g=qIe;else if(u==="BarChart")m=WIe(i,d,a,s),g=Yse;else if(i==="radial"){var{cx:x,cy:v,radius:y,startAngle:w,endAngle:_}=Jse(d);m={cx:x,cy:v,startAngle:w,endAngle:_,innerRadius:y,outerRadius:y},g=eie}else m={points:F6e(i,d,a)},g=zse;var T=typeof o=="object"&&"className"in o?o.className:void 0,B=l5(l5(l5(l5({stroke:"#ccc",pointerEvents:"none"},a),m),Yn(o,!1)),{},{payload:f,payloadIndex:h,className:Sr("recharts-tooltip-cursor",T)});return S.isValidElement(o)?S.cloneElement(o,B):S.createElement(g,B)}function URe(e){var t=kRe(),r=Mse(),n=P8(),a=BRe();return S.createElement(MRe,PD({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var ale=S.createContext(null),QRe=()=>S.useContext(ale),r6={exports:{}},uq;function HRe(){return uq||(uq=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new a(d,f||c,h),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function i(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,m=f.length,g=new Array(m);h<m;h++)g[h]=f[h].fn;return g},o.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,h,m,g){var x=r?r+u:u;if(!this._events[x])return!1;var v=this._events[x],y=arguments.length,w,_;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,h),!0;case 5:return v.fn.call(v.context,d,f,h,m),!0;case 6:return v.fn.call(v.context,d,f,h,m,g),!0}for(_=1,w=new Array(y-1);_<y;_++)w[_-1]=arguments[_];v.fn.apply(v.context,w)}else{var T=v.length,B;for(_=0;_<T;_++)switch(v[_].once&&this.removeListener(u,v[_].fn,void 0,!0),y){case 1:v[_].fn.call(v[_].context);break;case 2:v[_].fn.call(v[_].context,d);break;case 3:v[_].fn.call(v[_].context,d,f);break;case 4:v[_].fn.call(v[_].context,d,f,h);break;default:if(!w)for(B=1,w=new Array(y-1);B<y;B++)w[B-1]=arguments[B];v[_].fn.apply(v[_].context,w)}}return!0},o.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,h){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return i(this,m),this;var g=this._events[m];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&i(this,m);else{for(var x=0,v=[],y=g.length;x<y;x++)(g[x].fn!==d||h&&!g[x].once||f&&g[x].context!==f)&&v.push(g[x]);v.length?this._events[m]=v.length===1?v[0]:v:i(this,m)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&i(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o}(r6)),r6.exports}var VRe=HRe();const zRe=Ll(VRe);var rE=new zRe,RD="recharts.syncEvent.tooltip",dq="recharts.syncEvent.brush";function QM(e,t){if(t){var r=Number.parseInt(t,10);if(!su(r))return e==null?void 0:e[r]}}var $Re={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},sle=Au({name:"options",initialState:$Re,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),GRe=sle.reducer,{createEventEmitter:KRe}=sle.actions;function qRe(e){return e.tooltip.syncInteraction}var WRe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},ile=Au({name:"chartData",initialState:WRe,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:fq,setDataStartEndIndexes:XRe,setComputedData:fyt}=ile.actions,YRe=ile.reducer,ole=()=>{};function JRe(){var e=or(dM),t=or(fM),r=Xa(),n=or(toe),a=or(h0),s=P8(),i=F8(),o=or(c=>c.rootProps.className);S.useEffect(()=>{if(e==null)return ole;var c=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){r(d);return}if(a!=null){var h;if(typeof n=="function"){var m={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},g=n(a,m);h=a[g]}else n==="value"&&(h=a.find(j=>String(j.value)===d.payload.label));var{coordinate:x}=d.payload;if(h==null||d.payload.active===!1||x==null||i==null){r(OD({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:v,y}=x,w=Math.min(v,i.x+i.width),_=Math.min(y,i.y+i.height),T={x:s==="horizontal"?h.coordinate:w,y:s==="horizontal"?_:h.coordinate},B=OD({active:d.payload.active,coordinate:T,dataKey:d.payload.dataKey,index:String(h.index),label:d.payload.label});r(B)}}};return rE.on(RD,c),()=>{rE.off(RD,c)}},[o,r,t,e,n,a,s,i])}function ZRe(){var e=or(dM),t=or(fM),r=Xa();S.useEffect(()=>{if(e==null)return ole;var n=(a,s,i)=>{t!==i&&e===a&&r(XRe(s))};return rE.on(dq,n),()=>{rE.off(dq,n)}},[r,t,e])}function eLe(){var e=Xa();S.useEffect(()=>{e(KRe())},[e]),JRe(),ZRe()}function tLe(e,t,r,n,a,s){var i=or(h=>jRe(h,e,t)),o=or(fM),c=or(dM),u=or(toe),d=or(qRe),f=d==null?void 0:d.active;S.useEffect(()=>{if(!f&&c!=null&&o!=null){var h=OD({active:s,coordinate:r,dataKey:i,index:a,label:typeof n=="number"?String(n):n});rE.emit(RD,c,h,o)}},[f,r,i,a,n,o,c,u,s])}function Aq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Aq(Object(r),!0).forEach(function(n){rLe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Aq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rLe(e,t,r){return(t=nLe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nLe(e){var t=aLe(e,"string");return typeof t=="symbol"?t:t+""}function aLe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sLe(e){return e.dataKey}function iLe(e,t){return S.isValidElement(e)?S.cloneElement(e,t):typeof e=="function"?S.createElement(e,t):S.createElement(SIe,t)}var mq=[],oLe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!_x.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Bh(e){var t=Ad(e,oLe),{active:r,allowEscapeViewBox:n,animationDuration:a,animationEasing:s,content:i,filterNull:o,isAnimationActive:c,offset:u,payloadUniqBy:d,position:f,reverseDirection:h,useTranslate3d:m,wrapperStyle:g,cursor:x,shared:v,trigger:y,defaultIndex:w,portal:_,axisId:T}=t,B=Xa(),j=typeof w=="number"?String(w):w;S.useEffect(()=>{B(DPe({shared:v,trigger:y,axisId:T,active:r,defaultIndex:j}))},[B,v,y,T,r,j]);var E=F8(),N=Vse(),I=TPe(v),{activeIndex:L,isActive:D}=or(Z=>ORe(Z,I,y,j)),k=or(Z=>FRe(Z,I,y,j)),P=or(Z=>nle(Z,I,y,j)),R=or(Z=>IRe(Z,I,y,j)),W=k,V=QRe(),G=r??D,[z,K]=sse([W,G]),J=I==="axis"?P:void 0;tLe(I,y,R,J,L,G);var te=_??V;if(te==null)return null;var M=W??mq;G||(M=mq),o&&M.length&&(M=Zae(W.filter(Z=>Z.value!=null&&(Z.hide!==!0||t.includeHidden)),d,sLe));var H=M.length>0,Y=S.createElement(FIe,{allowEscapeViewBox:n,animationDuration:a,animationEasing:s,isAnimationActive:c,active:G,coordinate:R,hasPayload:H,offset:u,position:f,reverseDirection:h,useTranslate3d:m,viewBox:E,wrapperStyle:g,lastBoundingBox:z,innerRef:K,hasPortalFromProps:!!_},iLe(i,hq(hq({},t),{},{payload:M,label:J,active:G,coordinate:R,accessibilityLayer:N})));return S.createElement(S.Fragment,null,r8.createPortal(Y,te),G&&S.createElement(URe,{cursor:x,tooltipEventType:I,coordinate:R,payload:W,index:L}))}var n6={},a6={},s6={},pq;function lLe(){return pq||(pq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:s}={}){let i,o=null;const c=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{o!==null&&(r.apply(i,o),i=void 0,o=null)},f=()=>{u&&d(),x()};let h=null;const m=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},n)},g=()=>{h!==null&&(clearTimeout(h),h=null)},x=()=>{g(),i=void 0,o=null},v=()=>{d()},y=function(...w){if(a!=null&&a.aborted)return;i=this,o=w;const _=h==null;m(),c&&_&&d()};return y.schedule=m,y.cancel=x,y.flush=v,a==null||a.addEventListener("abort",x,{once:!0}),y}e.debounce=t}(s6)),s6}var gq;function cLe(){return gq||(gq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lLe();function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:i=!1,trailing:o=!0,maxWait:c}=s,u=Array(2);i&&(u[0]="leading"),o&&(u[1]="trailing");let d,f=null;const h=t.debounce(function(...x){d=n.apply(this,x),f=null},a,{edges:u}),m=function(...x){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,x),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,x),d)},g=()=>(h.flush(),d);return m.cancel=h.cancel,m.flush=g,m}e.debounce=r}(a6)),a6}var xq;function uLe(){return xq||(xq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cLe();function r(n,a=0,s={}){const{leading:i=!0,trailing:o=!0}=s;return t.debounce(n,a,{leading:i,maxWait:a,trailing:o})}e.throttle=r}(n6)),n6}var i6,vq;function dLe(){return vq||(vq=1,i6=uLe().throttle),i6}var fLe=dLe();const ALe=Ll(fLe);var l2=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s]};function bq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function o6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bq(Object(r),!0).forEach(function(n){hLe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hLe(e,t,r){return(t=mLe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mLe(e){var t=pLe(e,"string");return typeof t=="symbol"?t:t+""}function pLe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Th=S.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a="100%",height:s="100%",minWidth:i=0,minHeight:o,maxHeight:c,children:u,debounce:d=0,id:f,className:h,onResize:m,style:g={}}=e,x=S.useRef(null),v=S.useRef();v.current=m,S.useImperativeHandle(t,()=>x.current);var[y,w]=S.useState({containerWidth:n.width,containerHeight:n.height}),_=S.useCallback((B,j)=>{w(E=>{var N=Math.round(B),I=Math.round(j);return E.containerWidth===N&&E.containerHeight===I?E:{containerWidth:N,containerHeight:I}})},[]);S.useEffect(()=>{var B=I=>{var L,{width:D,height:k}=I[0].contentRect;_(D,k),(L=v.current)===null||L===void 0||L.call(v,D,k)};d>0&&(B=ALe(B,d,{trailing:!0,leading:!1}));var j=new ResizeObserver(B),{width:E,height:N}=x.current.getBoundingClientRect();return _(E,N),j.observe(x.current),()=>{j.disconnect()}},[_,d]);var T=S.useMemo(()=>{var{containerWidth:B,containerHeight:j}=y;if(B<0||j<0)return null;l2(xg(a)||xg(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,s),l2(!r||r>0,"The aspect(%s) must be greater than zero.",r);var E=xg(a)?B:a,N=xg(s)?j:s;return r&&r>0&&(E?N=E/r:N&&(E=N*r),c&&N>c&&(N=c)),l2(E>0||N>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,E,N,a,s,i,o,r),S.Children.map(u,I=>S.cloneElement(I,{width:E,height:N,style:o6({width:E,height:N},I.props.style)}))},[r,u,s,c,o,i,y,a]);return S.createElement("div",{id:f?"".concat(f):void 0,className:Sr("recharts-responsive-container",h),style:o6(o6({},g),{},{width:a,height:s,minWidth:i,minHeight:o,maxHeight:c}),ref:x},S.createElement("div",{style:{width:0,height:0,overflow:"visible"}},T))}),np=e=>null;np.displayName="Cell";function gLe(e,t,r){return(t=xLe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xLe(e){var t=vLe(e,"string");return typeof t=="symbol"?t:t+""}function vLe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class bLe{constructor(t){gLe(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function yq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yLe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yq(Object(r),!0).forEach(function(n){wLe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wLe(e,t,r){return(t=ELe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ELe(e){var t=CLe(e,"string");return typeof t=="symbol"?t:t+""}function CLe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _Le={cacheSize:2e3,enableCache:!0},lle=yLe({},_Le),wq=new bLe(lle.cacheSize),SLe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Eq="recharts_measurement_span";function NLe(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",s=t.fontStyle||"",i=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(i,"|").concat(o)}var Cq=(e,t)=>{try{var r=document.getElementById(Eq);r||(r=document.createElement("span"),r.setAttribute("id",Eq),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,SLe,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},c2=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||_x.isSsr)return{width:0,height:0};if(!lle.enableCache)return Cq(t,r);var n=NLe(t,r),a=wq.get(n);if(a)return a;var s=Cq(t,r);return wq.set(n,s),s},_q=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Sq=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,kLe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,BLe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,cle={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},TLe=Object.keys(cle),r1="NaN";function jLe(e,t){return e*cle[t]}class rc{static parse(t){var r,[,n,a]=(r=BLe.exec(t))!==null&&r!==void 0?r:[];return new rc(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,su(t)&&(this.unit=""),r!==""&&!kLe.test(r)&&(this.num=NaN,this.unit=""),TLe.includes(r)&&(this.num=jLe(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new rc(NaN,""):new rc(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new rc(NaN,""):new rc(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new rc(NaN,""):new rc(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new rc(NaN,""):new rc(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return su(this.num)}}function ule(e){if(e.includes(r1))return r1;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,s]=(r=_q.exec(t))!==null&&r!==void 0?r:[],i=rc.parse(n??""),o=rc.parse(s??""),c=a==="*"?i.multiply(o):i.divide(o);if(c.isNaN())return r1;t=t.replace(_q,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,h]=(u=Sq.exec(t))!==null&&u!==void 0?u:[],m=rc.parse(d??""),g=rc.parse(h??""),x=f==="+"?m.add(g):m.subtract(g);if(x.isNaN())return r1;t=t.replace(Sq,x.toString())}return t}var Nq=/\(([^()]*)\)/;function ILe(e){for(var t=e,r;(r=Nq.exec(t))!=null;){var[,n]=r;t=t.replace(Nq,ule(n))}return t}function FLe(e){var t=e.replace(/\s+/g,"");return t=ILe(t),t=ule(t),t}function OLe(e){try{return FLe(e)}catch{return r1}}function l6(e){var t=OLe(e.slice(5,-1));return t===r1?"":t}var DLe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],PLe=["dx","dy","angle","className","breakAll"];function LD(){return LD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},LD.apply(null,arguments)}function kq(e,t){if(e==null)return{};var r,n,a=RLe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function RLe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var dle=/[ \f\n\r\t\v\u2028\u2029]+/,fle=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];Rs(t)||(r?a=t.toString().split(""):a=t.toString().split(dle));var s=a.map(o=>({word:o,width:c2(o,n).width})),i=r?0:c2(" ",n).width;return{wordsWithComputedWidth:s,spaceWidth:i}}catch{return null}},LLe=(e,t,r,n,a)=>{var{maxLines:s,children:i,style:o,breakAll:c}=e,u=fr(s),d=i,f=function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D.reduce((k,P)=>{var{word:R,width:W}=P,V=k[k.length-1];if(V&&(n==null||a||V.width+W+r<Number(n)))V.words.push(R),V.width+=W+r;else{var G={words:[R],width:W};k.push(G)}return k},[])},h=f(t),m=L=>L.reduce((D,k)=>D.width>k.width?D:k);if(!u||a)return h;var g=h.length>s||m(h).width>Number(n);if(!g)return h;for(var x="…",v=L=>{var D=d.slice(0,L),k=fle({breakAll:c,style:o,children:D+x}).wordsWithComputedWidth,P=f(k),R=P.length>s||m(P).width>Number(n);return[R,P]},y=0,w=d.length-1,_=0,T;y<=w&&_<=d.length-1;){var B=Math.floor((y+w)/2),j=B-1,[E,N]=v(j),[I]=v(B);if(!E&&!I&&(y=B+1),E&&I&&(w=B-1),!E&&I){T=N;break}_++}return T||h},Bq=e=>{var t=Rs(e)?[]:e.toString().split(dle);return[{words:t}]},MLe=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:i}=e;if((t||r)&&!_x.isSsr){var o,c,u=fle({breakAll:s,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;o=d,c=f}else return Bq(n);return LLe({breakAll:s,children:n,maxLines:i,style:a},o,c,t,r)}return Bq(n)},Tq="#808080",Zb=S.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:a="1em",capHeight:s="0.71em",scaleToFit:i=!1,textAnchor:o="start",verticalAnchor:c="end",fill:u=Tq}=e,d=kq(e,DLe),f=S.useMemo(()=>MLe({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:i,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,i,d.style,d.width]),{dx:h,dy:m,angle:g,className:x,breakAll:v}=d,y=kq(d,PLe);if(!TA(r)||!TA(n))return null;var w=r+(fr(h)?h:0),_=n+(fr(m)?m:0),T;switch(c){case"start":T=l6("calc(".concat(s,")"));break;case"middle":T=l6("calc(".concat((f.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:T=l6("calc(".concat(f.length-1," * -").concat(a,")"));break}var B=[];if(i){var j=f[0].width,{width:E}=d;B.push("scale(".concat(fr(E)?E/j:1,")"))}return g&&B.push("rotate(".concat(g,", ").concat(w,", ").concat(_,")")),B.length&&(y.transform=B.join(" ")),S.createElement("text",LD({},Yn(y,!0),{ref:t,x:w,y:_,className:Sr("recharts-text",x),textAnchor:o,fill:u.includes("url")?Tq:u}),f.map((N,I)=>{var L=N.words.join(v?"":" ");return S.createElement("tspan",{x:w,dy:I===0?T:a,key:"".concat(L,"-").concat(I)},L)}))});Zb.displayName="Text";var ULe=["offset"],QLe=["labelRef"];function jq(e,t){if(e==null)return{};var r,n,a=HLe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function HLe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Iq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function js(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Iq(Object(r),!0).forEach(function(n){VLe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Iq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VLe(e,t,r){return(t=zLe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zLe(e){var t=$Le(e,"string");return typeof t=="symbol"?t:t+""}function $Le(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ch(){return Ch=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ch.apply(null,arguments)}var GLe=e=>{var{value:t,formatter:r}=e,n=Rs(e.children)?t:e.children;return typeof r=="function"?r(n):n},HM=e=>e!=null&&typeof e=="function",KLe=(e,t)=>{var r=oo(t-e),n=Math.min(Math.abs(t-e),360);return r*n},qLe=(e,t,r,n)=>{var{position:a,offset:s,className:i}=e,{cx:o,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:m}=n,g=(u+d)/2,x=KLe(f,h),v=x>=0?1:-1,y,w;a==="insideStart"?(y=f+v*s,w=m):a==="insideEnd"?(y=h-v*s,w=!m):a==="end"&&(y=h+v*s,w=m),w=x<=0?w:!w;var _=na(o,c,g,y),T=na(o,c,g,y+(w?1:-1)*359),B="M".concat(_.x,",").concat(_.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(w?0:1,`,
    `).concat(T.x,",").concat(T.y),j=Rs(e.id)?K2("recharts-radial-line-"):e.id;return S.createElement("text",Ch({},r,{dominantBaseline:"central",className:Sr("recharts-radial-bar-label",i)}),S.createElement("defs",null,S.createElement("path",{id:j,d:B})),S.createElement("textPath",{xlinkHref:"#".concat(j)},t))},WLe=(e,t,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:i,startAngle:o,endAngle:c}=e,u=(o+c)/2;if(r==="outside"){var{x:d,y:f}=na(n,a,i+t,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=(s+i)/2,{x:m,y:g}=na(n,a,h,u);return{x:m,y:g,textAnchor:"middle",verticalAnchor:"middle"}},XLe=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,{x:s,y:i,width:o,height:c}=t,u=c>=0?1:-1,d=u*n,f=u>0?"end":"start",h=u>0?"start":"end",m=o>=0?1:-1,g=m*n,x=m>0?"end":"start",v=m>0?"start":"end";if(a==="top"){var y={x:s+o/2,y:i-u*n,textAnchor:"middle",verticalAnchor:f};return js(js({},y),r?{height:Math.max(i-r.y,0),width:o}:{})}if(a==="bottom"){var w={x:s+o/2,y:i+c+d,textAnchor:"middle",verticalAnchor:h};return js(js({},w),r?{height:Math.max(r.y+r.height-(i+c),0),width:o}:{})}if(a==="left"){var _={x:s-g,y:i+c/2,textAnchor:x,verticalAnchor:"middle"};return js(js({},_),r?{width:Math.max(_.x-r.x,0),height:c}:{})}if(a==="right"){var T={x:s+o+g,y:i+c/2,textAnchor:v,verticalAnchor:"middle"};return js(js({},T),r?{width:Math.max(r.x+r.width-T.x,0),height:c}:{})}var B=r?{width:o,height:c}:{};return a==="insideLeft"?js({x:s+g,y:i+c/2,textAnchor:v,verticalAnchor:"middle"},B):a==="insideRight"?js({x:s+o-g,y:i+c/2,textAnchor:x,verticalAnchor:"middle"},B):a==="insideTop"?js({x:s+o/2,y:i+d,textAnchor:"middle",verticalAnchor:h},B):a==="insideBottom"?js({x:s+o/2,y:i+c-d,textAnchor:"middle",verticalAnchor:f},B):a==="insideTopLeft"?js({x:s+g,y:i+d,textAnchor:v,verticalAnchor:h},B):a==="insideTopRight"?js({x:s+o-g,y:i+d,textAnchor:x,verticalAnchor:h},B):a==="insideBottomLeft"?js({x:s+g,y:i+c-d,textAnchor:v,verticalAnchor:f},B):a==="insideBottomRight"?js({x:s+o-g,y:i+c-d,textAnchor:x,verticalAnchor:f},B):a&&typeof a=="object"&&(fr(a.x)||xg(a.x))&&(fr(a.y)||xg(a.y))?js({x:s+Pl(a.x,o),y:i+Pl(a.y,c),textAnchor:"end",verticalAnchor:"end"},B):js({x:s+o/2,y:i+c/2,textAnchor:"middle",verticalAnchor:"middle"},B)},YLe=e=>"cx"in e&&fr(e.cx);function lc(e){var{offset:t=5}=e,r=jq(e,ULe),n=js({offset:t},r),{viewBox:a,position:s,value:i,children:o,content:c,className:u="",textBreakAll:d,labelRef:f}=n,h=or(Gb),m=F8(),g=s==="center"?m:h??m,x=a||g;if(!x||Rs(i)&&Rs(o)&&!S.isValidElement(c)&&typeof c!="function")return null;var v=js(js({},n),{},{viewBox:x});if(S.isValidElement(c)){var{labelRef:y}=v,w=jq(v,QLe);return S.cloneElement(c,w)}var _;if(typeof c=="function"){if(_=S.createElement(c,v),S.isValidElement(_))return _}else _=GLe(n);var T=YLe(x),B=Yn(n,!0);if(T&&(s==="insideStart"||s==="insideEnd"||s==="end"))return qLe(n,_,B,x);var j=T?WLe(x,n.offset,n.position):XLe(n,x);return S.createElement(Zb,Ch({ref:f,className:Sr("recharts-label",u)},B,j,{breakAll:d}),_)}lc.displayName="Label";var Ale=e=>{var{cx:t,cy:r,angle:n,startAngle:a,endAngle:s,r:i,radius:o,innerRadius:c,outerRadius:u,x:d,y:f,top:h,left:m,width:g,height:x,clockWise:v,labelViewBox:y}=e;if(y)return y;if(fr(g)&&fr(x)){if(fr(d)&&fr(f))return{x:d,y:f,width:g,height:x};if(fr(h)&&fr(m))return{x:h,y:m,width:g,height:x}}if(fr(d)&&fr(f))return{x:d,y:f,width:0,height:0};if(fr(t)&&fr(r))return{cx:t,cy:r,startAngle:a||n||0,endAngle:s||n||0,innerRadius:c||0,outerRadius:u||o||i||0,clockWise:v};if(e.viewBox)return e.viewBox},JLe=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?S.createElement(lc,Ch({key:"label-implicit"},n)):TA(e)?S.createElement(lc,Ch({key:"label-implicit",value:e},n)):S.isValidElement(e)?e.type===lc?S.cloneElement(e,js({key:"label-implicit"},n)):S.createElement(lc,Ch({key:"label-implicit",content:e},n)):HM(e)?S.createElement(lc,Ch({key:"label-implicit",content:e},n)):e&&typeof e=="object"?S.createElement(lc,Ch({},e,{key:"label-implicit"},n)):null},ZLe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:a,labelRef:s}=t,i=Ale(t),o=aC(a,lc).map((u,d)=>S.cloneElement(u,{viewBox:r||i,key:"label-".concat(d)}));if(!n)return o;var c=JLe(t.label,r||i,s);return[c,...o]};lc.parseViewBox=Ale;lc.renderCallByParent=ZLe;var c6={},u6={},Fq;function e8e(){return Fq||(Fq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t}(u6)),u6}var d6={},Oq;function t8e(){return Oq||(Oq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t}(d6)),d6}var Dq;function r8e(){return Dq||(Dq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=e8e(),r=t8e(),n=v8();function a(s){if(n.isArrayLike(s))return t.last(r.toArray(s))}e.last=a}(c6)),c6}var f6,Pq;function n8e(){return Pq||(Pq=1,f6=r8e().last),f6}var a8e=n8e();const hle=Ll(a8e);var s8e=["valueAccessor"],i8e=["data","dataKey","clockWise","id","textBreakAll"];function A4(){return A4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A4.apply(null,arguments)}function Rq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Lq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Rq(Object(r),!0).forEach(function(n){o8e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function o8e(e,t,r){return(t=l8e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l8e(e){var t=c8e(e,"string");return typeof t=="symbol"?t:t+""}function c8e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mq(e,t){if(e==null)return{};var r,n,a=u8e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function u8e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var d8e=e=>Array.isArray(e.value)?hle(e.value):e.value;function Mm(e){var{valueAccessor:t=d8e}=e,r=Mq(e,s8e),{data:n,dataKey:a,clockWise:s,id:i,textBreakAll:o}=r,c=Mq(r,i8e);return!n||!n.length?null:S.createElement(gs,{className:"recharts-label-list"},n.map((u,d)=>{var f=Rs(a)?t(u,d):Ha(u&&u.payload,a),h=Rs(i)?{}:{id:"".concat(i,"-").concat(d)};return S.createElement(lc,A4({},Yn(u,!0),c,h,{parentViewBox:u.parentViewBox,value:f,textBreakAll:o,viewBox:lc.parseViewBox(Rs(s)?u:Lq(Lq({},u),{},{clockWise:s})),key:"label-".concat(d),index:d}))}))}Mm.displayName="LabelList";function f8e(e,t){return e?e===!0?S.createElement(Mm,{key:"labelList-implicit",data:t}):S.isValidElement(e)||HM(e)?S.createElement(Mm,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?S.createElement(Mm,A4({data:t},e,{key:"labelList-implicit"})):null:null}function A8e(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,a=aC(n,Mm).map((i,o)=>S.cloneElement(i,{data:t,key:"labelList-".concat(o)}));if(!r)return a;var s=f8e(e.label,t);return[s,...a]}Mm.renderCallByParent=A8e;var h8e=["points","className","baseLinePoints","connectNulls"];function n1(){return n1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n1.apply(null,arguments)}function m8e(e,t){if(e==null)return{};var r,n,a=p8e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function p8e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Uq=e=>e&&e.x===+e.x&&e.y===+e.y,g8e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(n=>{Uq(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),Uq(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},u2=(e,t)=>{var r=g8e(e);t&&(r=[r.reduce((a,s)=>[...a,...s],[])]);var n=r.map(a=>a.reduce((s,i,o)=>"".concat(s).concat(o===0?"M":"L").concat(i.x,",").concat(i.y),"")).join("");return r.length===1?"".concat(n,"Z"):n},x8e=(e,t,r)=>{var n=u2(e,r);return"".concat(n.slice(-1)==="Z"?n.slice(0,-1):n,"L").concat(u2(t.reverse(),r).slice(1))},mle=e=>{var{points:t,className:r,baseLinePoints:n,connectNulls:a}=e,s=m8e(e,h8e);if(!t||!t.length)return null;var i=Sr("recharts-polygon",r);if(n&&n.length){var o=s.stroke&&s.stroke!=="none",c=x8e(t,n,a);return S.createElement("g",{className:i},S.createElement("path",n1({},Yn(s,!0),{fill:c.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:c})),o?S.createElement("path",n1({},Yn(s,!0),{fill:"none",d:u2(t,a)})):null,o?S.createElement("path",n1({},Yn(s,!0),{fill:"none",d:u2(n,a)})):null)}var u=u2(t,a);return S.createElement("path",n1({},Yn(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",className:i,d:u}))};function MD(){return MD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},MD.apply(null,arguments)}var VM=e=>{var{cx:t,cy:r,r:n,className:a}=e,s=Sr("recharts-dot",a);return t===+t&&r===+r&&n===+n?S.createElement("circle",MD({},vl(e),d8(e),{className:s,cx:t,cy:r,r:n})):null},zM=e=>e.graphicalItems.polarItems,v8e=ut([Oa,fC],pM),$M=ut([zM,oi,v8e],xM),b8e=ut([$M],vM),GM=ut([b8e,PB],bM),ple=ut([GM,oi,$M],wM),y8e=ut([GM,oi,$M],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(a=>{var s,i=Ha(n,(s=t.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:i,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Ha(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]}))),Qq=()=>{},w8e=ut([oi,woe,Qq,y8e,Qq,In,Oa],CM),gle=ut([oi,In,GM,ple,uC,Oa,w8e],_M),xle=ut([gle,oi,wp],NM),E8e=ut([oi,gle,xle,Oa],BM),KM=(e,t,r)=>{switch(t){case"angleAxis":return $b(e,r);case"radiusAxis":return dC(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},qM=(e,t,r)=>{switch(t){case"angleAxis":return UDe(e,r);case"radiusAxis":return QDe(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},ey=ut([KM,wp,E8e,qM],VB),vle=ut([In,ple,qb,Oa],TM),ty=ut([In,KM,wp,ey,xle,qM,mC,vle,Oa],joe);ut([In,KM,ey,qM,mC,vle,Oa],Foe);var C8e=(e,t)=>ty(e,"angleAxis",t,!1),_8e=ut([C8e],e=>{if(e)return e.map(t=>t.coordinate)}),S8e=(e,t)=>ty(e,"radiusAxis",t,!1),N8e=ut([S8e],e=>{if(e)return e.map(t=>t.coordinate)}),k8e=["gridType","radialLines","angleAxisId","radiusAxisId","cx","cy","innerRadius","outerRadius"];function B8e(e,t){if(e==null)return{};var r,n,a=T8e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function T8e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function e0(){return e0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e0.apply(null,arguments)}function Hq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function sb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Hq(Object(r),!0).forEach(function(n){j8e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function j8e(e,t,r){return(t=I8e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I8e(e){var t=F8e(e,"string");return typeof t=="symbol"?t:t+""}function F8e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var O8e=(e,t,r,n)=>{var a="";return n.forEach((s,i)=>{var o=na(t,r,e,s);i?a+="L ".concat(o.x,",").concat(o.y):a+="M ".concat(o.x,",").concat(o.y)}),a+="Z",a},D8e=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,polarAngles:s,radialLines:i}=e;if(!s||!s.length||!i)return null;var o=sb({stroke:"#ccc"},vl(e));return S.createElement("g",{className:"recharts-polar-grid-angle"},s.map(c=>{var u=na(t,r,n,c),d=na(t,r,a,c);return S.createElement("line",e0({},o,{key:"line-".concat(c),x1:u.x,y1:u.y,x2:d.x,y2:d.y}))}))},P8e=e=>{var{cx:t,cy:r,radius:n,index:a}=e,s=sb(sb({stroke:"#ccc"},vl(e)),{},{fill:"none"});return S.createElement("circle",e0({},s,{className:Sr("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(a),cx:t,cy:r,r:n}))},R8e=e=>{var{radius:t,index:r}=e,n=sb(sb({stroke:"#ccc"},vl(e)),{},{fill:"none"});return S.createElement("path",e0({},n,{className:Sr("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(r),d:O8e(t,e.cx,e.cy,e.polarAngles)}))},L8e=e=>{var{polarRadius:t,gridType:r}=e;return!t||!t.length?null:S.createElement("g",{className:"recharts-polar-grid-concentric"},t.map((n,a)=>{var s=a;return r==="circle"?S.createElement(P8e,e0({key:s},e,{radius:n,index:a})):S.createElement(R8e,e0({key:s},e,{radius:n,index:a}))}))},ble=e=>{var t,r,n,a,s,i,o,c,{gridType:u="polygon",radialLines:d=!0,angleAxisId:f=0,radiusAxisId:h=0,cx:m,cy:g,innerRadius:x,outerRadius:v}=e,y=B8e(e,k8e),w=or(Gb),_=sb({cx:(t=(r=w==null?void 0:w.cx)!==null&&r!==void 0?r:m)!==null&&t!==void 0?t:0,cy:(n=(a=w==null?void 0:w.cy)!==null&&a!==void 0?a:g)!==null&&n!==void 0?n:0,innerRadius:(s=(i=w==null?void 0:w.innerRadius)!==null&&i!==void 0?i:x)!==null&&s!==void 0?s:0,outerRadius:(o=(c=w==null?void 0:w.outerRadius)!==null&&c!==void 0?c:v)!==null&&o!==void 0?o:0},y),{polarAngles:T,polarRadius:B,cx:j,cy:E,innerRadius:N,outerRadius:I}=_,L=or(R=>_8e(R,f)),D=or(R=>N8e(R,h)),k=Array.isArray(T)?T:L,P=Array.isArray(B)?B:D;return I<=0||k==null||P==null?null:S.createElement("g",{className:"recharts-polar-grid"},S.createElement(D8e,e0({cx:j,cy:E,innerRadius:N,outerRadius:I,gridType:u,radialLines:d},_,{polarAngles:k,polarRadius:P})),S.createElement(L8e,e0({cx:j,cy:E,innerRadius:N,outerRadius:I,gridType:u,radialLines:d},_,{polarAngles:k,polarRadius:P})))};ble.displayName="PolarGrid";var A6={},h6={},Vq;function M8e(){return Vq||(Vq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let i=1;i<r.length;i++){const o=r[i],c=n(o);c>s&&(s=c,a=o)}return a}e.maxBy=t}(h6)),h6}var zq;function U8e(){return zq||(zq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=M8e(),r=xB(),n=C8();function a(s,i){if(s!=null)return t.maxBy(Array.from(s),n.iteratee(i??r.identity))}e.maxBy=a}(A6)),A6}var m6,$q;function Q8e(){return $q||($q=1,m6=U8e().maxBy),m6}var H8e=Q8e();const V8e=Ll(H8e);var p6={},g6={},Gq;function z8e(){return Gq||(Gq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let i=1;i<r.length;i++){const o=r[i],c=n(o);c<s&&(s=c,a=o)}return a}e.minBy=t}(g6)),g6}var Kq;function $8e(){return Kq||(Kq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=z8e(),r=xB(),n=C8();function a(s,i){if(s!=null)return t.minBy(Array.from(s),n.iteratee(i??r.identity))}e.minBy=a}(p6)),p6}var x6,qq;function G8e(){return qq||(qq=1,x6=$8e().minBy),x6}var K8e=G8e();const q8e=Ll(K8e);var W8e={radiusAxis:{},angleAxis:{}},yle=Au({name:"polarAxis",initialState:W8e,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:X8e,removeRadiusAxis:Y8e,addAngleAxis:J8e,removeAngleAxis:Z8e}=yle.actions,eMe=yle.reducer,tMe=["cx","cy","angle","axisLine"],rMe=["angle","tickFormatter","stroke","tick"];function nE(){return nE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nE.apply(null,arguments)}function Wq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function pA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wq(Object(r),!0).forEach(function(n){KB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KB(e,t,r){return(t=nMe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nMe(e){var t=aMe(e,"string");return typeof t=="symbol"?t:t+""}function aMe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wle(e,t){if(e==null)return{};var r,n,a=sMe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function sMe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Ele="radiusAxis";function iMe(e){var t=Xa();return S.useEffect(()=>(t(X8e(e)),()=>{t(Y8e(e))})),null}var oMe=(e,t,r,n)=>{var{coordinate:a}=e;return na(r,n,a,t)},lMe=e=>{var t;switch(e){case"left":t="end";break;case"right":t="start";break;default:t="middle";break}return t},cMe=(e,t,r,n)=>{var a=V8e(n,i=>i.coordinate||0),s=q8e(n,i=>i.coordinate||0);return{cx:t,cy:r,startAngle:e,endAngle:e,innerRadius:s.coordinate||0,outerRadius:a.coordinate||0}},uMe=(e,t)=>{var{cx:r,cy:n,angle:a,axisLine:s}=e,i=wle(e,tMe),o=t.reduce((f,h)=>[Math.min(f[0],h.coordinate),Math.max(f[1],h.coordinate)],[1/0,-1/0]),c=na(r,n,o[0],a),u=na(r,n,o[1],a),d=pA(pA(pA({},vl(i)),{},{fill:"none"},Yn(s,!1)),{},{x1:c.x,y1:c.y,x2:u.x,y2:u.y});return S.createElement("line",nE({className:"recharts-polar-radius-axis-line"},d))},dMe=(e,t,r)=>{var n;return S.isValidElement(e)?n=S.cloneElement(e,t):typeof e=="function"?n=e(t):n=S.createElement(Zb,nE({},t,{className:"recharts-polar-radius-axis-tick-value"}),r),n},fMe=(e,t)=>{var{angle:r,tickFormatter:n,stroke:a,tick:s}=e,i=wle(e,rMe),o=lMe(e.orientation),c=vl(i),u=Yn(s,!1),d=t.map((f,h)=>{var m=oMe(f,e.angle,e.cx,e.cy),g=pA(pA(pA(pA({textAnchor:o,transform:"rotate(".concat(90-r,", ").concat(m.x,", ").concat(m.y,")")},c),{},{stroke:"none",fill:a},u),{},{index:h},m),{},{payload:f});return S.createElement(gs,nE({className:Sr("recharts-polar-radius-axis-tick",jse(s)),key:"tick-".concat(f.coordinate)},Cx(e,f,h)),dMe(s,g,n?n(f.value,h):f.value))});return S.createElement(gs,{className:"recharts-polar-radius-axis-ticks"},d)},AMe=e=>{var{radiusAxisId:t}=e,r=or(Gb),n=or(c=>ey(c,"radiusAxis",t)),a=or(c=>ty(c,"radiusAxis",t,!1));if(r==null||!a||!a.length)return null;var s=pA(pA(pA({},e),{},{scale:n},r),{},{radius:r.outerRadius}),{tick:i,axisLine:o}=s;return S.createElement(gs,{className:Sr("recharts-polar-radius-axis",Ele,s.className)},o&&uMe(s,a),i&&fMe(s,a),lc.renderCallByParent(s,cMe(s.angle,s.cx,s.cy,a)))};class qB extends S.PureComponent{render(){return S.createElement(S.Fragment,null,S.createElement(iMe,{domain:this.props.domain,id:this.props.radiusAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:this.props.allowDuplicatedCategory,allowDataOverflow:this.props.allowDataOverflow,reversed:this.props.reversed,includeHidden:this.props.includeHidden,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick}),S.createElement(AMe,this.props))}}KB(qB,"displayName","PolarRadiusAxis");KB(qB,"axisType",Ele);KB(qB,"defaultProps",ic);var hMe=["children"];function t0(){return t0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},t0.apply(null,arguments)}function Xq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function fA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Xq(Object(r),!0).forEach(function(n){WB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WB(e,t,r){return(t=mMe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mMe(e){var t=pMe(e,"string");return typeof t=="symbol"?t:t+""}function pMe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gMe(e,t){if(e==null)return{};var r,n,a=xMe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function xMe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var vMe=Math.PI/180,Yq=1e-5,Cle="angleAxis";function bMe(e){var t=Xa(),r=S.useMemo(()=>{var{children:s}=e,i=gMe(e,hMe);return i},[e]),n=or(s=>$b(s,r.id)),a=r===n;return S.useEffect(()=>(t(J8e(r)),()=>{t(Z8e(r))}),[t,r]),a?e.children:null}var yMe=(e,t)=>{var{cx:r,cy:n,radius:a,orientation:s,tickSize:i}=t,o=i||8,c=na(r,n,a,e.coordinate),u=na(r,n,a+(s==="inner"?-1:1)*o,e.coordinate);return{x1:c.x,y1:c.y,x2:u.x,y2:u.y}},wMe=(e,t)=>{var r=Math.cos(-e.coordinate*vMe);return r>Yq?t==="outer"?"start":"end":r<-Yq?t==="outer"?"end":"start":"middle"},EMe=e=>{var{cx:t,cy:r,radius:n,axisLineType:a,axisLine:s,ticks:i}=e;if(!s)return null;var o=fA(fA({},vl(e)),{},{fill:"none"},Yn(s,!1));if(a==="circle")return S.createElement(VM,t0({className:"recharts-polar-angle-axis-line"},o,{cx:t,cy:r,r:n}));var c=i.map(u=>na(t,r,n,u.coordinate));return S.createElement(mle,t0({className:"recharts-polar-angle-axis-line"},o,{points:c}))},CMe=e=>{var{tick:t,tickProps:r,value:n}=e;return t?S.isValidElement(t)?S.cloneElement(t,r):typeof t=="function"?t(r):S.createElement(Zb,t0({},r,{className:"recharts-polar-angle-axis-tick-value"}),n):null},_Me=e=>{var{tick:t,tickLine:r,tickFormatter:n,stroke:a,ticks:s}=e,i=vl(e),o=Yn(t,!1),c=fA(fA({},i),{},{fill:"none"},Yn(r,!1)),u=s.map((d,f)=>{var h=yMe(d,e),m=wMe(d,e.orientation),g=fA(fA(fA({},i),{},{textAnchor:m,stroke:"none",fill:a},o),{},{index:f,payload:d,x:h.x2,y:h.y2});return S.createElement(gs,t0({className:Sr("recharts-polar-angle-axis-tick",jse(t)),key:"tick-".concat(d.coordinate)},Cx(e,d,f)),r&&S.createElement("line",t0({className:"recharts-polar-angle-axis-tick-line"},c,h)),S.createElement(CMe,{tick:t,tickProps:g,value:n?n(d.value,f):d.value}))});return S.createElement(gs,{className:"recharts-polar-angle-axis-ticks"},u)},SMe=e=>{var{angleAxisId:t}=e,r=or(Gb),n=or(o=>ey(o,"angleAxis",t)),a=bc(),s=or(o=>ty(o,"angleAxis",t,a));if(r==null||!s||!s.length)return null;var i=fA(fA(fA({},e),{},{scale:n},r),{},{radius:r.outerRadius});return S.createElement(gs,{className:Sr("recharts-polar-angle-axis",Cle,i.className)},S.createElement(EMe,t0({},i,{ticks:s})),S.createElement(_Me,t0({},i,{ticks:s})))};class XB extends S.PureComponent{render(){return this.props.radius<=0?null:S.createElement(bMe,{id:this.props.angleAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:!1,allowDataOverflow:!1,reversed:this.props.reversed,includeHidden:!1,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick,domain:this.props.domain},S.createElement(SMe,this.props))}}WB(XB,"displayName","PolarAngleAxis");WB(XB,"axisType",Cle);WB(XB,"defaultProps",dA);function Jq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jq(Object(r),!0).forEach(function(n){NMe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NMe(e,t,r){return(t=kMe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kMe(e){var t=BMe(e,"string");return typeof t=="symbol"?t:t+""}function BMe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TMe=(e,t)=>t,WM=ut([zM,TMe],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),jMe=[],XM=(e,t,r)=>(r==null?void 0:r.length)===0?jMe:r,_le=ut([PB,WM,XM],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var a;if((t==null?void 0:t.data)!=null&&t.data.length>0?a=t.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>Zq(Zq({},t.presentationProps),s.props))),a!=null)return a}}),IMe=ut([_le,WM,XM],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,a)=>{var s,i=Ha(n,t.nameKey,t.name),o;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?o=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?o=n.fill:o=t.fill,{value:Ub(i,t.dataKey),color:o,payload:n,type:t.legendType}})}),FMe=ut([_le,WM,XM,Ui],(e,t,r,n)=>{if(!(t==null||e==null))return SUe({offset:n,pieSettings:t,displayedData:e,cells:r})}),v6={},eW;function OMe(){return eW||(eW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t}(v6)),v6}var b6,tW;function DMe(){return tW||(tW=1,b6=OMe().isPlainObject),b6}var PMe=DMe();const RMe=Ll(PMe);function h4(){return h4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h4.apply(null,arguments)}var rW=(e,t,r,n,a)=>{var s=r-n,i;return i="M ".concat(e,",").concat(t),i+="L ".concat(e+r,",").concat(t),i+="L ".concat(e+r-s/2,",").concat(t+a),i+="L ".concat(e+r-s/2-n,",").concat(t+a),i+="L ".concat(e,",").concat(t," Z"),i},LMe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},MMe=e=>{var t=Ad(e,LMe),r=S.useRef(),[n,a]=S.useState(-1);S.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var v=r.current.getTotalLength();v&&a(v)}catch{}},[]);var{x:s,y:i,upperWidth:o,lowerWidth:c,height:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:m,isUpdateAnimationActive:g}=t;if(s!==+s||i!==+i||o!==+o||c!==+c||u!==+u||o===0&&c===0||u===0)return null;var x=Sr("recharts-trapezoid",d);return g?S.createElement(JN,{canBegin:n>0,from:{upperWidth:0,lowerWidth:0,height:u,x:s,y:i},to:{upperWidth:o,lowerWidth:c,height:u,x:s,y:i},duration:h,animationEasing:f,isActive:g},v=>{var{upperWidth:y,lowerWidth:w,height:_,x:T,y:B}=v;return S.createElement(JN,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:h,easing:f},S.createElement("path",h4({},Yn(t,!0),{className:x,d:rW(T,B,y,w,_),ref:r})))}):S.createElement("g",null,S.createElement("path",h4({},Yn(t,!0),{className:x,d:rW(s,i,o,c,u)})))},UMe=["option","shapeType","propTransformer","activeClassName","isActive"];function QMe(e,t){if(e==null)return{};var r,n,a=HMe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function HMe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function nW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function m4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nW(Object(r),!0).forEach(function(n){VMe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VMe(e,t,r){return(t=zMe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zMe(e){var t=$Me(e,"string");return typeof t=="symbol"?t:t+""}function $Me(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GMe(e,t){return m4(m4({},t),e)}function KMe(e,t){return e==="symbols"}function aW(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return S.createElement(Yse,r);case"trapezoid":return S.createElement(MMe,r);case"sector":return S.createElement(eie,r);case"symbols":if(KMe(t))return S.createElement(p8,r);break;default:return null}}function qMe(e){return S.isValidElement(e)?e.props:e}function Sle(e){var{option:t,shapeType:r,propTransformer:n=GMe,activeClassName:a="recharts-active-shape",isActive:s}=e,i=QMe(e,UMe),o;if(S.isValidElement(t))o=S.cloneElement(t,m4(m4({},i),qMe(t)));else if(typeof t=="function")o=t(i);else if(RMe(t)&&typeof t!="boolean"){var c=n(t,i);o=S.createElement(aW,{shapeType:r,elementProps:c})}else{var u=i;o=S.createElement(aW,{shapeType:r,elementProps:u})}return s?S.createElement(gs,{className:a},o):o}var YM=(e,t)=>{var r=Xa();return(n,a)=>s=>{e==null||e(n,a,s),r(Moe({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},JM=e=>{var t=Xa();return(r,n)=>a=>{e==null||e(r,n,a),t(PPe())}},ZM=(e,t)=>{var r=Xa();return(n,a)=>s=>{e==null||e(n,a,s),r(RPe({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function eU(e){var{fn:t,args:r}=e,n=Xa(),a=bc();return S.useEffect(()=>{if(!a){var s=t(r);return n(FPe(s)),()=>{n(OPe(s))}}},[t,r,n,a]),null}var Nle=()=>{};function WMe(e){var{legendPayload:t}=e,r=Xa(),n=bc();return S.useEffect(()=>n?Nle:(r(Qse(t)),()=>{r(Hse(t))}),[r,n,t]),null}function kle(e){var{legendPayload:t}=e,r=Xa(),n=or(In);return S.useEffect(()=>n!=="centric"&&n!=="radial"?Nle:(r(Qse(t)),()=>{r(Hse(t))}),[r,n,t]),null}function tU(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=S.useRef(K2(t)),n=S.useRef(e);return n.current!==e&&(r.current=K2(t),n.current=e),r.current}var y6,XMe=()=>{var[e]=S.useState(()=>K2("uid-"));return e},YMe=(y6=aN.useId)!==null&&y6!==void 0?y6:XMe;function JMe(e,t){var r=YMe();return t||(e?"".concat(e,"-").concat(r):r)}var ZMe=S.createContext(void 0),rU=e=>{var{id:t,type:r,children:n}=e,a=JMe("recharts-".concat(r),t);return S.createElement(ZMe.Provider,{value:a},n(a))},eUe={cartesianItems:[],polarItems:[]},Ble=Au({name:"graphicalItems",initialState:eUe,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,a=Ph(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},removeCartesianGraphicalItem(e,t){var r=Ph(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=Ph(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:tUe,replaceCartesianGraphicalItem:rUe,removeCartesianGraphicalItem:nUe,addPolarGraphicalItem:aUe,removePolarGraphicalItem:sUe}=Ble.actions,iUe=Ble.reducer;function oUe(e){var t=Xa(),r=S.useRef(null);return S.useEffect(()=>{r.current===null?t(tUe(e)):r.current!==e&&t(rUe({prev:r.current,next:e})),r.current=e},[t,e]),S.useEffect(()=>()=>{r.current&&(t(nUe(r.current)),r.current=null)},[t]),null}function Tle(e){var t=Xa();return S.useEffect(()=>(t(aUe(e)),()=>{t(sUe(e))}),[t,e]),null}function lUe(){}var cUe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},sW={t:0},w6={t:1};function nU(e){var t=Ad(e,cUe),{isActive:r,canBegin:n,duration:a,easing:s,begin:i,onAnimationEnd:o,onAnimationStart:c,children:u}=t,d=Xse("JavascriptAnimate",t.animationManager),[f,h]=S.useState(r?sW:w6),m=S.useRef(null);return S.useEffect(()=>{r||h(w6)},[r]),S.useEffect(()=>{if(!r||!n)return lUe;var g=Wse(sW,w6,Kse(s),a,h,d.getTimeoutController()),x=()=>{m.current=g()};return d.start([c,i,x,a,o]),()=>{d.stop(),m.current&&m.current(),o()}},[r,n,a,s,i,c,o,d]),u(f.t)}var uUe=["onMouseEnter","onClick","onMouseLeave"],dUe=["id"],fUe=["id"];function aU(e,t){if(e==null)return{};var r,n,a=AUe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function AUe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function iW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Os(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iW(Object(r),!0).forEach(function(n){hUe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hUe(e,t,r){return(t=mUe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mUe(e){var t=pUe(e,"string");return typeof t=="symbol"?t:t+""}function pUe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function r0(){return r0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r0.apply(null,arguments)}function gUe(e){var t=S.useMemo(()=>aC(e.children,np),[e.children]),r=or(n=>IMe(n,e.id,t));return r==null?null:S.createElement(kle,{legendPayload:r})}function xUe(e){var{dataKey:t,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:i,name:o,hide:c,tooltipType:u}=e;return{dataDefinedOnItem:n==null?void 0:n.map(d=>d.tooltipPayload),positions:n==null?void 0:n.map(d=>d.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:i,dataKey:t,nameKey:r,name:Ub(o,t),hide:c,type:u,color:i,unit:""}}}var vUe=(e,t)=>e>t?"start":e<t?"end":"middle",bUe=(e,t,r)=>typeof t=="function"?t(e):Pl(t,r,r*.8),yUe=(e,t,r)=>{var{top:n,left:a,width:s,height:i}=t,o=Tse(s,i),c=a+Pl(e.cx,s,s/2),u=n+Pl(e.cy,i,i/2),d=Pl(e.innerRadius,o,0),f=bUe(r,e.outerRadius,o),h=e.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:f,maxRadius:h}},wUe=(e,t)=>{var r=oo(t-e),n=Math.min(Math.abs(t-e),360);return r*n},EUe=(e,t)=>{if(S.isValidElement(e))return S.cloneElement(e,t);if(typeof e=="function")return e(t);var r=Sr("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return S.createElement(zse,r0({},t,{type:"linear",className:r}))},CUe=(e,t,r)=>{if(S.isValidElement(e))return S.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),S.isValidElement(n)))return n;var a=Sr("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return S.createElement(Zb,r0({},t,{alignmentBaseline:"middle",className:a}),n)};function _Ue(e){var{sectors:t,props:r,showLabels:n}=e,{label:a,labelLine:s,dataKey:i}=r;if(!n||!a||!t)return null;var o=vl(r),c=Yn(a,!1),u=Yn(s,!1),d=typeof a=="object"&&"offsetRadius"in a&&a.offsetRadius||20,f=t.map((h,m)=>{var g=(h.startAngle+h.endAngle)/2,x=na(h.cx,h.cy,h.outerRadius+d,g),v=Os(Os(Os(Os({},o),h),{},{stroke:"none"},c),{},{index:m,textAnchor:vUe(x.x,h.cx)},x),y=Os(Os(Os(Os({},o),h),{},{fill:"none",stroke:h.fill},u),{},{index:m,points:[na(h.cx,h.cy,h.outerRadius,g),x],key:"line"});return S.createElement(gs,{key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(m)},s&&EUe(s,y),CUe(a,v,Ha(h,i)))});return S.createElement(gs,{className:"recharts-pie-labels"},f)}function jle(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:a,showLabels:s}=e,i=or(rp),{onMouseEnter:o,onClick:c,onMouseLeave:u}=a,d=aU(a,uUe),f=YM(o,a.dataKey),h=JM(u),m=ZM(c,a.dataKey);return t==null?null:S.createElement(S.Fragment,null,t.map((g,x)=>{if((g==null?void 0:g.startAngle)===0&&(g==null?void 0:g.endAngle)===0&&t.length!==1)return null;var v=r&&String(x)===i,y=i?n:null,w=v?r:y,_=Os(Os({},g),{},{stroke:g.stroke,tabIndex:-1,[Pse]:x,[Rse]:a.dataKey});return S.createElement(gs,r0({tabIndex:-1,className:"recharts-pie-sector"},Cx(d,g,x),{onMouseEnter:f(g,x),onMouseLeave:h(g,x),onClick:m(g,x),key:"sector-".concat(g==null?void 0:g.startAngle,"-").concat(g==null?void 0:g.endAngle,"-").concat(g.midAngle,"-").concat(x)}),S.createElement(Sle,r0({option:w,isActive:v,shapeType:"sector"},_)))}),S.createElement(_Ue,{sectors:t,props:a,showLabels:s}))}function SUe(e){var t,{pieSettings:r,displayedData:n,cells:a,offset:s}=e,{cornerRadius:i,startAngle:o,endAngle:c,dataKey:u,nameKey:d,tooltipType:f}=r,h=Math.abs(r.minAngle),m=wUe(o,c),g=Math.abs(m),x=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,v=n.filter(j=>Ha(j,u,0)!==0).length,y=(g>=360?v:v-1)*x,w=g-v*h-y,_=n.reduce((j,E)=>{var N=Ha(E,u,0);return j+(fr(N)?N:0)},0),T;if(_>0){var B;T=n.map((j,E)=>{var N=Ha(j,u,0),I=Ha(j,d,E),L=yUe(r,s,j),D=(fr(N)?N:0)/_,k,P=Os(Os({},j),a&&a[E]&&a[E].props);E?k=B.endAngle+oo(m)*x*(N!==0?1:0):k=o;var R=k+oo(m)*((N!==0?h:0)+D*w),W=(k+R)/2,V=(L.innerRadius+L.outerRadius)/2,G=[{name:I,value:N,payload:P,dataKey:u,type:f}],z=na(L.cx,L.cy,V,W);return B=Os(Os(Os(Os({},r.presentationProps),{},{percent:D,cornerRadius:i,name:I,tooltipPayload:G,midAngle:W,middleRadius:V,tooltipPosition:z},P),L),{},{value:Ha(j,u),startAngle:k,endAngle:R,payload:P,paddingAngle:oo(m)*x}),B})}return T}function NUe(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:a,animationBegin:s,animationDuration:i,animationEasing:o,activeShape:c,inactiveShape:u,onAnimationStart:d,onAnimationEnd:f}=t,h=tU(t,"recharts-pie-"),m=r.current,[g,x]=S.useState(!0),v=S.useCallback(()=>{typeof f=="function"&&f(),x(!1)},[f]),y=S.useCallback(()=>{typeof d=="function"&&d(),x(!0)},[d]);return S.createElement(nU,{begin:s,duration:i,isActive:a,easing:o,onAnimationStart:y,onAnimationEnd:v,key:h},w=>{var _=[],T=n&&n[0],B=T.startAngle;return n.forEach((j,E)=>{var N=m&&m[E],I=E>0?tp(j,"paddingAngle",0):0;if(N){var L=t1(N.endAngle-N.startAngle,j.endAngle-j.startAngle),D=Os(Os({},j),{},{startAngle:B+I,endAngle:B+L(w)+I});_.push(D),B=D.endAngle}else{var{endAngle:k,startAngle:P}=j,R=t1(0,k-P),W=R(w),V=Os(Os({},j),{},{startAngle:B+I,endAngle:B+W+I});_.push(V),B=V.endAngle}}),r.current=_,S.createElement(gs,null,S.createElement(jle,{sectors:_,activeShape:c,inactiveShape:u,allOtherPieProps:t,showLabels:!g}))})}function kUe(e){var{sectors:t,isAnimationActive:r,activeShape:n,inactiveShape:a}=e,s=S.useRef(null),i=s.current;return r&&t&&t.length&&(!i||i!==t)?S.createElement(NUe,{props:e,previousSectorsRef:s}):S.createElement(jle,{sectors:t,activeShape:n,inactiveShape:a,allOtherPieProps:e,showLabels:!0})}function BUe(e){var{hide:t,className:r,rootTabIndex:n}=e,a=Sr("recharts-pie",r);return t?null:S.createElement(gs,{tabIndex:n,className:a},S.createElement(kUe,e))}var TUe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!_x.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function jUe(e){var{id:t}=e,r=aU(e,dUe),n=S.useMemo(()=>aC(e.children,np),[e.children]),a=or(s=>FMe(s,t,n));return S.createElement(S.Fragment,null,S.createElement(eU,{fn:xUe,args:Os(Os({},e),{},{sectors:a})}),S.createElement(BUe,r0({},r,{sectors:a})))}function YB(e){var t=Ad(e,TUe),{id:r}=t,n=aU(t,fUe),a=vl(n);return S.createElement(rU,{id:r,type:"pie"},s=>S.createElement(S.Fragment,null,S.createElement(Tle,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a}),S.createElement(gUe,r0({},n,{id:s})),S.createElement(jUe,r0({},n,{id:s})),n.children))}YB.displayName="Pie";var IUe=ut([Ui],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),FUe=ut([IUe,u0,d0],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),Ile=()=>or(FUe),OUe=()=>or(ERe);function oW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function lW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oW(Object(r),!0).forEach(function(n){DUe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DUe(e,t,r){return(t=PUe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PUe(e){var t=RUe(e,"string");return typeof t=="symbol"?t:t+""}function RUe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LUe=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:s}=e;if(a===!1||t.x==null||t.y==null)return null;var i=lW(lW({index:r,dataKey:s,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Yn(a,!1)),d8(a)),o;return S.isValidElement(a)?o=S.cloneElement(a,i):typeof a=="function"?o=a(i):o=S.createElement(VM,i),S.createElement(gs,{className:"recharts-active-dot"},o)};function MUe(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a}=e,s=or(rp),i=OUe();if(t==null||i==null)return null;var o=t.find(c=>i.includes(c.payload));return Rs(o)?null:LUe({point:o,childIndex:Number(s),mainColor:r,dataKey:a,activeDot:n})}function cW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function p4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cW(Object(r),!0).forEach(function(n){UUe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UUe(e,t,r){return(t=QUe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QUe(e){var t=HUe(e,"string");return typeof t=="symbol"?t:t+""}function HUe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fle=(e,t)=>ey(e,"radiusAxis",t),VUe=ut([Fle],e=>{if(e!=null)return{scale:e}}),zUe=ut([dC,Fle],(e,t)=>{if(!(e==null||t==null))return p4(p4({},e),{},{scale:t})}),$Ue=(e,t,r,n)=>ty(e,"radiusAxis",t,n),Ole=(e,t,r)=>$b(e,r),Dle=(e,t,r)=>ey(e,"angleAxis",r),GUe=ut([Ole,Dle],(e,t)=>{if(!(e==null||t==null))return p4(p4({},e),{},{scale:t})}),KUe=(e,t,r,n)=>ty(e,"angleAxis",r,n),qUe=ut([Ole,Dle,Gb],(e,t,r)=>{if(!(r==null||t==null))return{scale:t,type:e.type,dataKey:e.dataKey,cx:r.cx,cy:r.cy}}),WUe=(e,t,r,n,a)=>a,XUe=ut([In,zUe,$Ue,GUe,KUe],(e,t,r,n,a)=>gp(e,"radiusAxis")?X2(t,r,!1):X2(n,a,!1)),YUe=ut([zM,WUe],(e,t)=>{if(e.some(r=>r.type==="radar"&&t===r.dataKey))return t}),JUe=ut([VUe,qUe,PB,YUe,XUe],(e,t,r,n,a)=>{var{chartData:s,dataStartIndex:i,dataEndIndex:o}=r;if(!(e==null||t==null||s==null||a==null||n==null)){var c=s.slice(i,o+1);return o7e({radiusAxis:e,angleAxis:t,displayedData:c,dataKey:n,bandSize:a})}}),ZUe=["id"];function e7e(e,t){if(e==null)return{};var r,n,a=t7e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function t7e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function uW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uW(Object(r),!0).forEach(function(n){sU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sU(e,t,r){return(t=r7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r7e(e){var t=n7e(e,"string");return typeof t=="symbol"?t:t+""}function n7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ib(){return ib=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ib.apply(null,arguments)}function iU(e,t){return e&&e!=="none"?e:t}var a7e=e=>{var{dataKey:t,name:r,stroke:n,fill:a,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:iU(n,a),value:Ub(r,t),payload:e}]};function s7e(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:i,tooltipType:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,nameKey:void 0,dataKey:t,name:Ub(s,t),hide:i,type:o,color:iU(r,a),unit:""}}}function i7e(e,t){var r;return S.isValidElement(e)?r=S.cloneElement(e,t):typeof e=="function"?r=e(t):r=S.createElement(VM,ib({},t,{className:Sr("recharts-radar-dot",typeof e!="boolean"?e.className:"")})),r}function o7e(e){var{radiusAxis:t,angleAxis:r,displayedData:n,dataKey:a,bandSize:s}=e,{cx:i,cy:o}=r,c=!1,u=[],d=r.type!=="number"?s??0:0;n.forEach((h,m)=>{var g=Ha(h,r.dataKey,m),x=Ha(h,a),v=r.scale(g)+d,y=Array.isArray(x)?hle(x):x,w=Rs(y)?void 0:t.scale(y);Array.isArray(x)&&x.length>=2&&(c=!0),u.push(Fl(Fl({},na(i,o,w,v)),{},{name:g,value:x,cx:i,cy:o,radius:w,angle:v,payload:h}))});var f=[];return c&&u.forEach(h=>{if(Array.isArray(h.value)){var m=h.value[0],g=Rs(m)?void 0:t.scale(m);f.push(Fl(Fl({},h),{},{radius:g},na(i,o,g,h.angle)))}else f.push(h)}),{points:u,isRange:c,baseLinePoints:f}}function l7e(e){var{points:t,props:r}=e,{dot:n,dataKey:a}=r;if(!n)return null;var{id:s}=r,i=e7e(r,ZUe),o=vl(i),c=Yn(n,!0),u=t.map((d,f)=>{var h=Fl(Fl(Fl({key:"dot-".concat(f),r:3},o),c),{},{dataKey:a,cx:d.x,cy:d.y,index:f,payload:d});return i7e(n,h)});return S.createElement(gs,{className:"recharts-radar-dots"},u)}function Ple(e){var{points:t,props:r,showLabels:n}=e;if(t==null)return null;var{shape:a,isRange:s,baseLinePoints:i,connectNulls:o}=r,c=f=>{var{onMouseEnter:h}=r;h&&h(r,f)},u=f=>{var{onMouseLeave:h}=r;h&&h(r,f)},d;return S.isValidElement(a)?d=S.cloneElement(a,Fl(Fl({},r),{},{points:t})):typeof a=="function"?d=a(Fl(Fl({},r),{},{points:t})):d=S.createElement(mle,ib({},Yn(r,!0),{onMouseEnter:c,onMouseLeave:u,points:t,baseLinePoints:s?i:null,connectNulls:o})),S.createElement(gs,{className:"recharts-radar-polygon"},d,S.createElement(l7e,{props:r,points:t}),n&&Mm.renderCallByParent(r,t))}function c7e(e){var{props:t,previousPointsRef:r}=e,{points:n,isAnimationActive:a,animationBegin:s,animationDuration:i,animationEasing:o,onAnimationEnd:c,onAnimationStart:u}=t,d=r.current,f=tU(t,"recharts-radar-"),[h,m]=S.useState(!0),g=S.useCallback(()=>{typeof c=="function"&&c(),m(!1)},[c]),x=S.useCallback(()=>{typeof u=="function"&&u(),m(!0)},[u]);return S.createElement(nU,{begin:s,duration:i,isActive:a,easing:o,key:"radar-".concat(f),onAnimationEnd:g,onAnimationStart:x},v=>{var y=d&&d.length/n.length,w=v===1?n:n.map((_,T)=>{var B=d&&d[Math.floor(T*y)];if(B){var j=t1(B.x,_.x),E=t1(B.y,_.y);return Fl(Fl({},_),{},{x:j(v),y:E(v)})}var N=t1(_.cx,_.x),I=t1(_.cy,_.y);return Fl(Fl({},_),{},{x:N(v),y:I(v)})});return v>0&&(r.current=w),S.createElement(Ple,{points:w,props:t,showLabels:!h})})}function u7e(e){var{points:t,isAnimationActive:r,isRange:n}=e,a=S.useRef(void 0),s=a.current;return r&&t&&t.length&&!n&&(!s||s!==t)?S.createElement(c7e,{props:e,previousPointsRef:a}):S.createElement(Ple,{points:t,props:e,showLabels:!0})}var d7e={angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!_x.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"};class f7e extends S.PureComponent{render(){var{hide:t,className:r,points:n}=this.props;if(t)return null;var a=Sr("recharts-radar",r);return S.createElement(S.Fragment,null,S.createElement(gs,{className:a},S.createElement(u7e,this.props)),S.createElement(MUe,{points:n,mainColor:iU(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}function A7e(e){var t=bc(),r=or(n=>JUe(n,e.radiusAxisId,e.angleAxisId,t,e.dataKey));return S.createElement(f7e,ib({},e,{points:r==null?void 0:r.points,baseLinePoints:r==null?void 0:r.baseLinePoints,isRange:r==null?void 0:r.isRange}))}class oU extends S.PureComponent{render(){return S.createElement(rU,{id:this.props.id,type:"radar"},t=>S.createElement(S.Fragment,null,S.createElement(Tle,{type:"radar",id:t,data:void 0,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:this.props.angleAxisId,radiusAxisId:this.props.radiusAxisId}),S.createElement(kle,{legendPayload:a7e(this.props)}),S.createElement(eU,{fn:s7e,args:this.props}),S.createElement(A7e,ib({},this.props,{id:t}))))}}sU(oU,"displayName","Radar");sU(oU,"defaultProps",d7e);var h7e="Invariant failed";function m7e(e,t){throw new Error(h7e)}var p7e=["x","y"];function UD(){return UD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},UD.apply(null,arguments)}function dW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function sw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dW(Object(r),!0).forEach(function(n){g7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function g7e(e,t,r){return(t=x7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x7e(e){var t=v7e(e,"string");return typeof t=="symbol"?t:t+""}function v7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function b7e(e,t){if(e==null)return{};var r,n,a=y7e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function y7e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function w7e(e,t){var{x:r,y:n}=e,a=b7e(e,p7e),s="".concat(r),i=parseInt(s,10),o="".concat(n),c=parseInt(o,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),h=parseInt(f,10);return sw(sw(sw(sw(sw({},t),a),i?{x:i}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function Rle(e){return S.createElement(Sle,UD({shapeType:"rectangle",propTransformer:w7e,activeClassName:"recharts-active-bar"},e))}var E7e=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(fr(t))return t;var s=fr(n)||Rs(n);return s?t(n,a):(s||m7e(),r)}},C7e={},Lle=Au({name:"errorBars",initialState:C7e,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:Ayt,removeErrorBar:hyt}=Lle.actions,_7e=Lle.reducer,S7e=["children"];function N7e(e,t){if(e==null)return{};var r,n,a=k7e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function k7e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var B7e={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},T7e=S.createContext(B7e);function j7e(e){var{children:t}=e,r=N7e(e,S7e);return S.createElement(T7e.Provider,{value:r},t)}function Mle(e,t){var r,n,a=or(u=>A0(u,e)),s=or(u=>yp(u,t)),i=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:Vc.allowDataOverflow,o=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:zc.allowDataOverflow,c=i||o;return{needClip:c,needClipX:i,needClipY:o}}function I7e(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=Ile(),{needClipX:s,needClipY:i,needClip:o}=Mle(t,r);if(!o)return null;var{x:c,y:u,width:d,height:f}=a;return S.createElement("clipPath",{id:"clipPath-".concat(n)},S.createElement("rect",{x:s?c:c-d/2,y:i?u:u-f/2,width:s?d:d*2,height:i?f:f*2}))}var F7e=["onMouseEnter","onMouseLeave","onClick"],O7e=["value","background","tooltipPosition"],D7e=["id"],P7e=["onMouseEnter","onClick","onMouseLeave"];function ob(){return ob=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ob.apply(null,arguments)}function fW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ll(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fW(Object(r),!0).forEach(function(n){R7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function R7e(e,t,r){return(t=L7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L7e(e){var t=M7e(e,"string");return typeof t=="symbol"?t:t+""}function M7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function g4(e,t){if(e==null)return{};var r,n,a=U7e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function U7e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Q7e=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:n,value:Ub(r,t),payload:e}]};function H7e(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:i,unit:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:Ub(s,t),hide:i,type:e.tooltipType,color:e.fill,unit:o}}}function V7e(e){var t=or(rp),{data:r,dataKey:n,background:a,allOtherBarProps:s}=e,{onMouseEnter:i,onMouseLeave:o,onClick:c}=s,u=g4(s,F7e),d=YM(i,n),f=JM(o),h=ZM(c,n);if(!a||r==null)return null;var m=Yn(a,!1);return S.createElement(S.Fragment,null,r.map((g,x)=>{var{value:v,background:y,tooltipPosition:w}=g,_=g4(g,O7e);if(!y)return null;var T=d(g,x),B=f(g,x),j=h(g,x),E=ll(ll(ll(ll(ll({option:a,isActive:String(x)===t},_),{},{fill:"#eee"},y),m),Cx(u,g,x)),{},{onMouseEnter:T,onMouseLeave:B,onClick:j,dataKey:n,index:x,className:"recharts-bar-background-rectangle"});return S.createElement(Rle,ob({key:"background-bar-".concat(x)},E))}))}function Ule(e){var{data:t,props:r,showLabels:n}=e,a=vl(r),{id:s}=a,i=g4(a,D7e),{shape:o,dataKey:c,activeBar:u}=r,d=or(rp),f=or(Joe),{onMouseEnter:h,onClick:m,onMouseLeave:g}=r,x=g4(r,P7e),v=YM(h,c),y=JM(g),w=ZM(m,c);return t?S.createElement(S.Fragment,null,t.map((_,T)=>{var B=u&&String(T)===d&&(f==null||c===f),j=B?u:o,E=ll(ll(ll({},i),_),{},{isActive:B,option:j,index:T,dataKey:c});return S.createElement(gs,ob({className:"recharts-bar-rectangle"},Cx(x,_,T),{onMouseEnter:v(_,T),onMouseLeave:y(_,T),onClick:w(_,T),key:"rectangle-".concat(_==null?void 0:_.x,"-").concat(_==null?void 0:_.y,"-").concat(_==null?void 0:_.value,"-").concat(T)}),S.createElement(Rle,E))}),n&&Mm.renderCallByParent(r,t)):null}function z7e(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:s,animationBegin:i,animationDuration:o,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,f=r.current,h=tU(t,"recharts-bar-"),[m,g]=S.useState(!1),x=S.useCallback(()=>{typeof u=="function"&&u(),g(!1)},[u]),v=S.useCallback(()=>{typeof d=="function"&&d(),g(!0)},[d]);return S.createElement(nU,{begin:i,duration:o,isActive:s,easing:c,onAnimationEnd:x,onAnimationStart:v,key:h},y=>{var w=y===1?n:n==null?void 0:n.map((_,T)=>{var B=f&&f[T];if(B)return ll(ll({},_),{},{x:vv(B.x,_.x,y),y:vv(B.y,_.y,y),width:vv(B.width,_.width,y),height:vv(B.height,_.height,y)});if(a==="horizontal"){var j=vv(0,_.height,y);return ll(ll({},_),{},{y:_.y+_.height-j,height:j})}var E=vv(0,_.width,y);return ll(ll({},_),{},{width:E})});return y>0&&(r.current=w??null),w==null?null:S.createElement(gs,null,S.createElement(Ule,{props:t,data:w,showLabels:!m}))})}function $7e(e){var{data:t,isAnimationActive:r}=e,n=S.useRef(null);return r&&t&&t.length&&(n.current==null||n.current!==t)?S.createElement(z7e,{previousRectanglesRef:n,props:e}):S.createElement(Ule,{props:e,data:t,showLabels:!0})}var Qle=0,G7e=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Ha(e,t)}};class K7e extends S.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:i,needClip:o,background:c,id:u}=this.props;if(t)return null;var d=Sr("recharts-bar",a),f=u;return S.createElement(gs,{className:d,id:u},o&&S.createElement("defs",null,S.createElement(I7e,{clipPathId:f,xAxisId:s,yAxisId:i})),S.createElement(gs,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(f,")"):void 0},S.createElement(V7e,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),S.createElement($7e,this.props)),this.props.children)}}var q7e={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!_x.isSsr,legendType:"rect",minPointSize:Qle,xAxisId:0,yAxisId:0};function W7e(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:d}=e,{needClip:f}=Mle(t,r),h=P8(),m=bc(),g=aC(e.children,np),x=or(w=>w9e(w,t,r,m,e.id,g));if(h!=="vertical"&&h!=="horizontal")return null;var v,y=x==null?void 0:x[0];return y==null||y.height==null||y.width==null?v=0:v=h==="vertical"?y.height/2:y.width/2,S.createElement(j7e,{xAxisId:t,yAxisId:r,data:x,dataPointFormatter:G7e,errorBarOffset:v},S.createElement(K7e,ob({},e,{layout:h,needClip:f,data:x,xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function X7e(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:i,yAxis:o,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:h,cells:m}=e,g=t==="horizontal"?o:i,x=d?g.scale.domain():null,v=$3e({numericAxis:g});return f.map((y,w)=>{var _,T,B,j,E,N;d?_=M3e(d[w],x):(_=Ha(y,r),Array.isArray(_)||(_=[v,_]));var I=E7e(n,Qle)(_[1],w);if(t==="horizontal"){var L,[D,k]=[o.scale(_[0]),o.scale(_[1])];T=DG({axis:i,ticks:c,bandSize:s,offset:a.offset,entry:y,index:w}),B=(L=k??D)!==null&&L!==void 0?L:void 0,j=a.size;var P=D-k;if(E=su(P)?0:P,N={x:T,y:h.top,width:j,height:h.height},Math.abs(I)>0&&Math.abs(E)<Math.abs(I)){var R=oo(E||I)*(Math.abs(I)-Math.abs(E));B-=R,E+=R}}else{var[W,V]=[i.scale(_[0]),i.scale(_[1])];if(T=W,B=DG({axis:o,ticks:u,bandSize:s,offset:a.offset,entry:y,index:w}),j=V-W,E=a.size,N={x:h.left,y:B,width:h.width,height:E},Math.abs(I)>0&&Math.abs(j)<Math.abs(I)){var G=oo(j||I)*(Math.abs(I)-Math.abs(j));j+=G}}if(T==null||B==null||j==null||E==null)return null;var z=ll(ll({},y),{},{x:T,y:B,width:j,height:E,value:d?_:_[1],payload:y,background:N,tooltipPosition:{x:T+j/2,y:B+E/2}},m&&m[w]&&m[w].props);return z}).filter(Boolean)}function lb(e){var t=Ad(e,q7e),r=bc();return S.createElement(rU,{id:t.id,type:"bar"},n=>S.createElement(S.Fragment,null,S.createElement(WMe,{legendPayload:Q7e(t)}),S.createElement(eU,{fn:H7e,args:t}),S.createElement(oUe,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:z3e(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),S.createElement(W7e,ob({},t,{id:n}))))}lb.displayName="Bar";function AW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function c5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AW(Object(r),!0).forEach(function(n){Y7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Y7e(e,t,r){return(t=J7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J7e(e){var t=Z7e(e,"string");return typeof t=="symbol"?t:t+""}function Z7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var e9e=(e,t)=>t,t9e=(e,t,r)=>r,r9e=(e,t,r,n)=>n,n9e=(e,t,r,n,a)=>a,xC=ut([gM,n9e],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),a9e=ut([xC],e=>e==null?void 0:e.maxBarSize),s9e=(e,t,r,n,a,s)=>s,hW=(e,t,r)=>{var n=r??e;if(!Rs(n))return Pl(n,t,0)},i9e=ut([In,gM,e9e,t9e,r9e],(e,t,r,n,a)=>t.filter(s=>e==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),o9e=(e,t,r,n)=>{var a=In(e);return a==="horizontal"?FD(e,"yAxis",r,n):FD(e,"xAxis",t,n)},l9e=(e,t,r)=>{var n=In(e);return n==="horizontal"?rq(e,"xAxis",t):rq(e,"yAxis",r)},c9e=(e,t,r)=>{var n={},a=e.filter(UB),s=e.filter(u=>u.stackId==null),i=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),o=Object.entries(i).map(u=>{var[d,f]=u,h=f.map(g=>g.dataKey),m=hW(t,r,f[0].barSize);return{stackId:d,dataKeys:h,barSize:m}}),c=s.map(u=>{var d=[u.dataKey].filter(h=>h!=null),f=hW(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...o,...c]},u9e=ut([i9e,ODe,l9e],c9e),d9e=(e,t,r,n,a)=>{var s,i,o=xC(e,t,r,n,a);if(o!=null){var c=In(e),u=Zie(e),{maxBarSize:d}=o,f=Rs(d)?u:d,h,m;return c==="horizontal"?(h=ab(e,"xAxis",t,n),m=nb(e,"xAxis",t,n)):(h=ab(e,"yAxis",r,n),m=nb(e,"yAxis",r,n)),(s=(i=X2(h,m,!0))!==null&&i!==void 0?i:f)!==null&&s!==void 0?s:0}},Hle=(e,t,r,n)=>{var a=In(e),s,i;return a==="horizontal"?(s=ab(e,"xAxis",t,n),i=nb(e,"xAxis",t,n)):(s=ab(e,"yAxis",r,n),i=nb(e,"yAxis",r,n)),X2(s,i)};function f9e(e,t,r,n,a){var s=n.length;if(!(s<1)){var i=Pl(e,r,0,!0),o,c=[];if(lu(n[0].barSize)){var u=!1,d=r/s,f=n.reduce((y,w)=>y+(w.barSize||0),0);f+=(s-1)*i,f>=r&&(f-=(s-1)*i,i=0),f>=r&&d>0&&(u=!0,d*=.9,f=s*d);var h=(r-f)/2>>0,m={offset:h-i,size:0};o=n.reduce((y,w)=>{var _,T={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:m.offset+m.size+i,size:u?d:(_=w.barSize)!==null&&_!==void 0?_:0}},B=[...y,T];return m=B[B.length-1].position,B},c)}else{var g=Pl(t,r,0,!0);r-2*g-(s-1)*i<=0&&(i=0);var x=(r-2*g-(s-1)*i)/s;x>1&&(x>>=0);var v=lu(a)?Math.min(x,a):x;o=n.reduce((y,w,_)=>[...y,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:g+(x+i)*_+(x-v)/2,size:v}}],c)}return o}}var A9e=(e,t,r,n,a,s,i)=>{var o=Rs(i)?t:i,c=f9e(r,n,a!==s?a:s,e,o);return a!==s&&c!=null&&(c=c.map(u=>c5(c5({},u),{},{position:c5(c5({},u.position),{},{offset:u.position.offset-a/2})}))),c},h9e=ut([u9e,Zie,FDe,eoe,d9e,Hle,a9e],A9e),m9e=(e,t,r,n)=>ab(e,"xAxis",t,n),p9e=(e,t,r,n)=>ab(e,"yAxis",r,n),g9e=(e,t,r,n)=>nb(e,"xAxis",t,n),x9e=(e,t,r,n)=>nb(e,"yAxis",r,n),v9e=ut([h9e,xC],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),b9e=(e,t)=>{var r=hM(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var a=e[n];if(a){var{stackedData:s}=a;if(s)return s.find(i=>i.key===r)}}}},y9e=ut([o9e,xC],b9e),w9e=ut([Ui,m9e,p9e,g9e,x9e,v9e,In,oM,Hle,y9e,xC,s9e],(e,t,r,n,a,s,i,o,c,u,d,f)=>{var{chartData:h,dataStartIndex:m,dataEndIndex:g}=o;if(!(d==null||s==null||i!=="horizontal"&&i!=="vertical"||t==null||r==null||n==null||a==null||c==null)){var{data:x}=d,v;if(x!=null&&x.length>0?v=x:v=h==null?void 0:h.slice(m,g+1),v!=null)return X7e({layout:i,barSettings:d,pos:s,bandSize:c,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,stackedData:u,displayedData:v,offset:e,cells:f})}}),Vle=e=>{var{chartData:t}=e,r=Xa(),n=bc();return S.useEffect(()=>n?()=>{}:(r(fq(t)),()=>{r(fq(void 0))}),[t,r,n]),null},mW={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},zle=Au({name:"brush",initialState:mW,reducers:{setBrushSettings(e,t){return t.payload==null?mW:t.payload}}}),{setBrushSettings:myt}=zle.actions,E9e=zle.reducer;function C9e(e,t,r){return(t=_9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _9e(e){var t=S9e(e,"string");return typeof t=="symbol"?t:t+""}function S9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class lU{static create(t){return new lU(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(r){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}C9e(lU,"EPS",1e-4);function N9e(e){return(e%180+180)%180}var k9e=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=N9e(a),i=s*Math.PI/180,o=Math.atan(n/r),c=i>o&&i<Math.PI-o?n/Math.sin(i):r/Math.cos(i);return Math.abs(c)},B9e={dots:[],areas:[],lines:[]},$le=Au({name:"referenceElements",initialState:B9e,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Ph(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Ph(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Ph(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:pyt,removeDot:gyt,addArea:xyt,removeArea:vyt,addLine:byt,removeLine:yyt}=$le.actions,T9e=$le.reducer,j9e=S.createContext(void 0),I9e=e=>{var{children:t}=e,[r]=S.useState("".concat(K2("recharts"),"-clip")),n=Ile();if(n==null)return null;var{x:a,y:s,width:i,height:o}=n;return S.createElement(j9e.Provider,{value:r},S.createElement("defs",null,S.createElement("clipPath",{id:r},S.createElement("rect",{x:a,y:s,height:o,width:i}))),t)};function E6(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function Gle(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function F9e(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return k9e(n,r)}function O9e(e,t,r){var n=r==="width",{x:a,y:s,width:i,height:o}=e;return t===1?{start:n?a:s,end:n?a+i:s+o}:{start:n?a+i:s+o,end:n?a:s}}function x4(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-a)<=0}function D9e(e,t){return Gle(e,t+1)}function P9e(e,t,r,n,a){for(var s=(n||[]).slice(),{start:i,end:o}=t,c=0,u=1,d=i,f=function(){var g=n==null?void 0:n[c];if(g===void 0)return{v:Gle(n,u)};var x=c,v,y=()=>(v===void 0&&(v=r(g,x)),v),w=g.coordinate,_=c===0||x4(e,w,y,d,o);_||(c=0,d=i,u+=1),_&&(d=w+e*(y()/2+a),c+=u)},h;u<=s.length;)if(h=f(),h)return h.v;return[]}function pW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function rl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pW(Object(r),!0).forEach(function(n){R9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function R9e(e,t,r){return(t=L9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L9e(e){var t=M9e(e,"string");return typeof t=="symbol"?t:t+""}function M9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function U9e(e,t,r,n,a){for(var s=(n||[]).slice(),i=s.length,{start:o}=t,{end:c}=t,u=function(h){var m=s[h],g,x=()=>(g===void 0&&(g=r(m,h)),g);if(h===i-1){var v=e*(m.coordinate+e*x()/2-c);s[h]=m=rl(rl({},m),{},{tickCoord:v>0?m.coordinate-v*e:m.coordinate})}else s[h]=m=rl(rl({},m),{},{tickCoord:m.coordinate});var y=x4(e,m.tickCoord,x,o,c);y&&(c=m.tickCoord-e*(x()/2+a),s[h]=rl(rl({},m),{},{isShow:!0}))},d=i-1;d>=0;d--)u(d);return s}function Q9e(e,t,r,n,a,s){var i=(n||[]).slice(),o=i.length,{start:c,end:u}=t;if(s){var d=n[o-1],f=r(d,o-1),h=e*(d.coordinate+e*f/2-u);i[o-1]=d=rl(rl({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var m=x4(e,d.tickCoord,()=>f,c,u);m&&(u=d.tickCoord-e*(f/2+a),i[o-1]=rl(rl({},d),{},{isShow:!0}))}for(var g=s?o-1:o,x=function(w){var _=i[w],T,B=()=>(T===void 0&&(T=r(_,w)),T);if(w===0){var j=e*(_.coordinate-e*B()/2-c);i[w]=_=rl(rl({},_),{},{tickCoord:j<0?_.coordinate-j*e:_.coordinate})}else i[w]=_=rl(rl({},_),{},{tickCoord:_.coordinate});var E=x4(e,_.tickCoord,B,c,u);E&&(c=_.tickCoord+e*(B()/2+a),i[w]=rl(rl({},_),{},{isShow:!0}))},v=0;v<g;v++)x(v);return i}function cU(e,t,r){var{tick:n,ticks:a,viewBox:s,minTickGap:i,orientation:o,interval:c,tickFormatter:u,unit:d,angle:f}=e;if(!a||!a.length||!n)return[];if(fr(c)||_x.isSsr){var h;return(h=D9e(a,fr(c)?c:0))!==null&&h!==void 0?h:[]}var m=[],g=o==="top"||o==="bottom"?"width":"height",x=d&&g==="width"?c2(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},v=(_,T)=>{var B=typeof u=="function"?u(_.value,T):_.value;return g==="width"?F9e(c2(B,{fontSize:t,letterSpacing:r}),x,f):c2(B,{fontSize:t,letterSpacing:r})[g]},y=a.length>=2?oo(a[1].coordinate-a[0].coordinate):1,w=O9e(s,y,g);return c==="equidistantPreserveStart"?P9e(y,w,v,a,i):(c==="preserveStart"||c==="preserveStartEnd"?m=Q9e(y,w,v,a,i,c==="preserveStartEnd"):m=U9e(y,w,v,a,i),m.filter(_=>_.isShow))}var H9e=["viewBox"],V9e=["viewBox"];function a1(){return a1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a1.apply(null,arguments)}function gW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gW(Object(r),!0).forEach(function(n){uU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xW(e,t){if(e==null)return{};var r,n,a=z9e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function z9e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function uU(e,t,r){return(t=$9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $9e(e){var t=G9e(e,"string");return typeof t=="symbol"?t:t+""}function G9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Ep extends S.Component{constructor(t){super(t),this.tickRefs=S.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,a=xW(t,H9e),s=this.props,{viewBox:i}=s,o=xW(s,V9e);return!E6(n,i)||!E6(a,o)||!E6(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:a,height:s,orientation:i,tickSize:o,mirror:c,tickMargin:u}=this.props,d,f,h,m,g,x,v=c?-1:1,y=t.tickSize||o,w=fr(t.tickCoord)?t.tickCoord:t.coordinate;switch(i){case"top":d=f=t.coordinate,m=n+ +!c*s,h=m-v*y,x=h-v*u,g=w;break;case"left":h=m=t.coordinate,f=r+ +!c*a,d=f-v*y,g=d-v*u,x=w;break;case"right":h=m=t.coordinate,f=r+ +c*a,d=f+v*y,g=d+v*u,x=w;break;default:d=f=t.coordinate,m=n+ +c*s,h=m+v*y,x=h+v*u,g=w;break}return{line:{x1:d,y1:h,x2:f,y2:m},tick:{x:g,y:x}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:a,orientation:s,mirror:i,axisLine:o}=this.props,c=Fi(Fi(Fi({},Yn(this.props,!1)),Yn(o,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var u=+(s==="top"&&!i||s==="bottom"&&i);c=Fi(Fi({},c),{},{x1:t,y1:r+u*a,x2:t+n,y2:r+u*a})}else{var d=+(s==="left"&&!i||s==="right"&&i);c=Fi(Fi({},c),{},{x1:t+d*n,y1:r,x2:t+d*n,y2:r+a})}return S.createElement("line",a1({},c,{className:Sr("recharts-cartesian-axis-line",tp(o,"className"))}))}static renderTickItem(t,r,n){var a,s=Sr(r.className,"recharts-cartesian-axis-tick-value");if(S.isValidElement(t))a=S.cloneElement(t,Fi(Fi({},r),{},{className:s}));else if(typeof t=="function")a=t(Fi(Fi({},r),{},{className:s}));else{var i="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(i=Sr(i,t.className)),a=S.createElement(Zb,a1({},r,{className:i}),n)}return a}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:a,stroke:s,tick:i,tickFormatter:o,unit:c,padding:u}=this.props,d=cU(Fi(Fi({},this.props),{},{ticks:n}),t,r),f=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),m=vl(this.props),g=Yn(i,!1),x=Fi(Fi({},m),{},{fill:"none"},Yn(a,!1)),v=d.map((y,w)=>{var{line:_,tick:T}=this.getTickLineCoord(y),B=Fi(Fi(Fi(Fi({textAnchor:f,verticalAnchor:h},m),{},{stroke:"none",fill:s},g),T),{},{index:w,payload:y,visibleTicksCount:d.length,tickFormatter:o,padding:u});return S.createElement(gs,a1({className:"recharts-cartesian-axis-tick",key:"tick-".concat(y.value,"-").concat(y.coordinate,"-").concat(y.tickCoord)},Cx(this.props,y,w)),a&&S.createElement("line",a1({},x,_,{className:Sr("recharts-cartesian-axis-tick-line",tp(a,"className"))})),i&&Ep.renderTickItem(i,B,"".concat(typeof o=="function"?o(y.value,w):y.value).concat(c||"")))});return v.length>0?S.createElement("g",{className:"recharts-cartesian-axis-ticks"},v):null}render(){var{axisLine:t,width:r,height:n,className:a,hide:s}=this.props;if(s)return null;var{ticks:i}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:S.createElement(gs,{className:Sr("recharts-cartesian-axis",a),ref:o=>{if(o){var c=o.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var u=c[0];if(u){var d=window.getComputedStyle(u).fontSize,f=window.getComputedStyle(u).letterSpacing;(d!==this.state.fontSize||f!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,i),lc.renderCallByParent(this.props))}}uU(Ep,"displayName","CartesianAxis");uU(Ep,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var K9e=["x1","y1","x2","y2","key"],q9e=["offset"],W9e=["xAxisId","yAxisId"],X9e=["xAxisId","yAxisId"];function vW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vW(Object(r),!0).forEach(function(n){Y9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Y9e(e,t,r){return(t=J9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J9e(e){var t=Z9e(e,"string");return typeof t=="symbol"?t:t+""}function Z9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wg(){return wg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wg.apply(null,arguments)}function v4(e,t){if(e==null)return{};var r,n,a=eQe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function eQe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var tQe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:s,height:i,ry:o}=e;return S.createElement("rect",{x:n,y:a,ry:o,width:s,height:i,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Kle(e,t){var r;if(S.isValidElement(e))r=S.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:a,x2:s,y2:i,key:o}=t,c=v4(t,K9e),u=vl(c),{offset:d}=u,f=v4(u,q9e);r=S.createElement("line",wg({},f,{x1:n,y1:a,x2:s,y2:i,fill:"none",key:o}))}return r}function rQe(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:i}=e,o=v4(e,W9e),c=a.map((u,d)=>{var f=cl(cl({},o),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return Kle(n,f)});return S.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function nQe(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:i}=e,o=v4(e,X9e),c=a.map((u,d)=>{var f=cl(cl({},o),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return Kle(n,f)});return S.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function aQe(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:s,height:i,horizontalPoints:o,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var u=o.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var m=!u[h+1],g=m?a+i-f:u[h+1]-f;if(g<=0)return null;var x=h%t.length;return S.createElement("rect",{key:"react-".concat(h),y:f,x:n,height:g,width:s,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return S.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function sQe(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:s,width:i,height:o,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var m=!u[h+1],g=m?a+i-f:u[h+1]-f;if(g<=0)return null;var x=h%r.length;return S.createElement("rect",{key:"react-".concat(h),x:f,y:s,width:g,height:o,stroke:"none",fill:r[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return S.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var iQe=(e,t)=>{var{xAxis:r,width:n,height:a,offset:s}=e;return Fse(cU(cl(cl(cl({},Ep.defaultProps),r),{},{ticks:Ose(r),viewBox:{x:0,y:0,width:n,height:a}})),s.left,s.left+s.width,t)},oQe=(e,t)=>{var{yAxis:r,width:n,height:a,offset:s}=e;return Fse(cU(cl(cl(cl({},Ep.defaultProps),r),{},{ticks:Ose(r),viewBox:{x:0,y:0,width:n,height:a}})),s.top,s.top+s.height,t)},lQe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function aE(e){var t=O8(),r=D8(),n=Mse(),a=cl(cl({},Ad(e,lQe)),{},{x:fr(e.x)?e.x:n.left,y:fr(e.y)?e.y:n.top,width:fr(e.width)?e.width:n.width,height:fr(e.height)?e.height:n.height}),{xAxisId:s,yAxisId:i,x:o,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:h,verticalValues:m}=a,g=bc(),x=or(I=>nq(I,"xAxis",s,g)),v=or(I=>nq(I,"yAxis",i,g));if(!fr(u)||u<=0||!fr(d)||d<=0||!fr(o)||o!==+o||!fr(c)||c!==+c)return null;var y=a.verticalCoordinatesGenerator||iQe,w=a.horizontalCoordinatesGenerator||oQe,{horizontalPoints:_,verticalPoints:T}=a;if((!_||!_.length)&&typeof w=="function"){var B=h&&h.length,j=w({yAxis:v?cl(cl({},v),{},{ticks:B?h:v.ticks}):void 0,width:t,height:r,offset:n},B?!0:f);l2(Array.isArray(j),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof j,"]")),Array.isArray(j)&&(_=j)}if((!T||!T.length)&&typeof y=="function"){var E=m&&m.length,N=y({xAxis:x?cl(cl({},x),{},{ticks:E?m:x.ticks}):void 0,width:t,height:r,offset:n},E?!0:f);l2(Array.isArray(N),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(T=N)}return S.createElement("g",{className:"recharts-cartesian-grid"},S.createElement(tQe,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),S.createElement(aQe,wg({},a,{horizontalPoints:_})),S.createElement(sQe,wg({},a,{verticalPoints:T})),S.createElement(rQe,wg({},a,{offset:n,horizontalPoints:_,xAxis:x,yAxis:v})),S.createElement(nQe,wg({},a,{offset:n,verticalPoints:T,xAxis:x,yAxis:v})))}aE.displayName="CartesianGrid";function bW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bW(Object(r),!0).forEach(function(n){cQe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cQe(e,t,r){return(t=uQe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uQe(e){var t=dQe(e,"string");return typeof t=="symbol"?t:t+""}function dQe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fQe={xAxis:{},yAxis:{},zAxis:{}},qle=Au({name:"cartesianAxis",initialState:fQe,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=yW(yW({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:AQe,removeXAxis:hQe,addYAxis:mQe,removeYAxis:pQe,addZAxis:wyt,removeZAxis:Eyt,updateYAxisWidth:gQe}=qle.actions,xQe=qle.reducer,vQe=["children"],bQe=["dangerouslySetInnerHTML","ticks"];function Wle(e,t,r){return(t=yQe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yQe(e){var t=wQe(e,"string");return typeof t=="symbol"?t:t+""}function wQe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QD(){return QD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},QD.apply(null,arguments)}function Xle(e,t){if(e==null)return{};var r,n,a=EQe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function EQe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function CQe(e){var t=Xa(),r=S.useMemo(()=>{var{children:s}=e,i=Xle(e,vQe);return i},[e]),n=or(s=>A0(s,r.id)),a=r===n;return S.useEffect(()=>(t(AQe(r)),()=>{t(hQe(r))}),[r,t]),a?e.children:null}var _Qe=e=>{var{xAxisId:t,className:r}=e,n=or(Lse),a=bc(),s="xAxis",i=or(m=>Xb(m,s,t,a)),o=or(m=>Ioe(m,s,t,a)),c=or(m=>koe(m,t)),u=or(m=>SPe(m,t));if(c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f}=e,h=Xle(e,bQe);return S.createElement(Ep,QD({},h,{scale:i,x:u.x,y:u.y,width:c.width,height:c.height,className:Sr("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:o}))},SQe=e=>{var t,r,n,a,s;return S.createElement(CQe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter},S.createElement(_Qe,e))};class sx extends S.Component{render(){return S.createElement(SQe,this.props)}}Wle(sx,"displayName","XAxis");Wle(sx,"defaultProps",{allowDataOverflow:Vc.allowDataOverflow,allowDecimals:Vc.allowDecimals,allowDuplicatedCategory:Vc.allowDuplicatedCategory,height:Vc.height,hide:!1,mirror:Vc.mirror,orientation:Vc.orientation,padding:Vc.padding,reversed:Vc.reversed,scale:Vc.scale,tickCount:Vc.tickCount,type:Vc.type,xAxisId:0});var NQe=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=e,i=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>i&&(i=f.width)}});var o=r?r.getBoundingClientRect().width:0,c=a+s,u=i+c+o+(r?n:0);return Math.round(u)}return 0},kQe=["dangerouslySetInnerHTML","ticks"];function Yle(e,t,r){return(t=BQe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BQe(e){var t=TQe(e,"string");return typeof t=="symbol"?t:t+""}function TQe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HD(){return HD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},HD.apply(null,arguments)}function jQe(e,t){if(e==null)return{};var r,n,a=IQe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function IQe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function FQe(e){var t=Xa();return S.useEffect(()=>(t(mQe(e)),()=>{t(pQe(e))}),[e,t]),null}var OQe=e=>{var t,{yAxisId:r,className:n,width:a,label:s}=e,i=S.useRef(null),o=S.useRef(null),c=or(Lse),u=bc(),d=Xa(),f="yAxis",h=or(_=>Xb(_,f,r,u)),m=or(_=>Boe(_,r)),g=or(_=>NPe(_,r)),x=or(_=>Ioe(_,f,r,u));if(S.useLayoutEffect(()=>{var _;if(!(a!=="auto"||!m||HM(s)||S.isValidElement(s))){var T=i.current,B=T==null||(_=T.tickRefs)===null||_===void 0?void 0:_.current,{tickSize:j,tickMargin:E}=T.props,N=NQe({ticks:B,label:o.current,labelGapWithTick:5,tickSize:j,tickMargin:E});Math.round(m.width)!==Math.round(N)&&d(gQe({id:r,width:N}))}},[i,i==null||(t=i.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,m==null?void 0:m.width,m,d,s,r,a]),m==null||g==null)return null;var{dangerouslySetInnerHTML:v,ticks:y}=e,w=jQe(e,kQe);return S.createElement(Ep,HD({},w,{ref:i,labelRef:o,scale:h,x:g.x,y:g.y,width:m.width,height:m.height,className:Sr("recharts-".concat(f," ").concat(f),n),viewBox:c,ticks:x}))},DQe=e=>{var t,r,n,a,s;return S.createElement(S.Fragment,null,S.createElement(FQe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter}),S.createElement(OQe,e))},PQe={allowDataOverflow:zc.allowDataOverflow,allowDecimals:zc.allowDecimals,allowDuplicatedCategory:zc.allowDuplicatedCategory,hide:!1,mirror:zc.mirror,orientation:zc.orientation,padding:zc.padding,reversed:zc.reversed,scale:zc.scale,tickCount:zc.tickCount,type:zc.type,width:zc.width,yAxisId:0};class ix extends S.Component{render(){return S.createElement(DQe,this.props)}}Yle(ix,"displayName","YAxis");Yle(ix,"defaultProps",PQe);var C6={exports:{}},_6={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wW;function RQe(){if(wW)return _6;wW=1;var e=Cb();function t(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,a=e.useRef,s=e.useEffect,i=e.useMemo,o=e.useDebugValue;return _6.useSyncExternalStoreWithSelector=function(c,u,d,f,h){var m=a(null);if(m.current===null){var g={hasValue:!1,value:null};m.current=g}else g=m.current;m=i(function(){function v(B){if(!y){if(y=!0,w=B,B=f(B),h!==void 0&&g.hasValue){var j=g.value;if(h(j,B))return _=j}return _=B}if(j=_,r(w,B))return j;var E=f(B);return h!==void 0&&h(j,E)?(w=B,j):(w=B,_=E)}var y=!1,w,_,T=d===void 0?null:d;return[function(){return v(u())},T===null?void 0:function(){return v(T())}]},[u,d,f,h]);var x=n(c,m[0],m[1]);return s(function(){g.hasValue=!0,g.value=x},[x]),o(x),x},_6}var EW;function LQe(){return EW||(EW=1,C6.exports=RQe()),C6.exports}LQe();function MQe(e){e()}function UQe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){MQe(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var CW={notify(){},get:()=>[]};function QQe(e,t){let r,n=CW,a=0,s=!1;function i(x){d();const v=n.subscribe(x);let y=!1;return()=>{y||(y=!0,v(),f())}}function o(){n.notify()}function c(){g.onStateChange&&g.onStateChange()}function u(){return s}function d(){a++,r||(r=e.subscribe(c),n=UQe())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=CW)}function h(){s||(s=!0,d())}function m(){s&&(s=!1,f())}const g={addNestedSub:i,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:m,getListeners:()=>n};return g}var HQe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",VQe=HQe(),zQe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",$Qe=zQe(),GQe=()=>VQe||$Qe?S.useLayoutEffect:S.useEffect,KQe=GQe(),S6=Symbol.for("react-redux-context"),N6=typeof globalThis<"u"?globalThis:{};function qQe(){if(!S.createContext)return{};const e=N6[S6]??(N6[S6]=new Map);let t=e.get(S.createContext);return t||(t=S.createContext(null),e.set(S.createContext,t)),t}var WQe=qQe();function XQe(e){const{children:t,context:r,serverState:n,store:a}=e,s=S.useMemo(()=>{const c=QQe(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),i=S.useMemo(()=>a.getState(),[a]);KQe(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),i!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,i]);const o=r||WQe;return S.createElement(o.Provider,{value:s},t)}var YQe=XQe,JQe=(e,t)=>t,dU=ut([JQe,In,Gb,Hi,qoe,h0,TRe,Ui],DRe),fU=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},Jle=cd("mouseClick"),Zle=sC();Zle.startListening({actionCreator:Jle,effect:(e,t)=>{var r=e.payload,n=dU(t.getState(),fU(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(LPe({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var VD=cd("mouseMove"),ece=sC();ece.startListening({actionCreator:VD,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=IM(n,n.tooltip.settings.shared),s=dU(n,fU(r));a==="axis"&&((s==null?void 0:s.activeIndex)!=null?t.dispatch(Qoe({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(Uoe()))}});function ZQe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var _W={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},tce=Au({name:"rootProps",initialState:_W,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:_W.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),eHe=tce.reducer,{updateOptions:tHe}=tce.actions,rce=Au({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:rHe}=rce.actions,nHe=rce.reducer,nce=cd("keyDown"),ace=cd("focus"),AU=sC();AU.startListening({actionCreator:nce,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var i=Number(FM(a,Jb(r))),o=h0(r);if(s==="Enter"){var c=f4(r,"axis","hover",String(a.index));t.dispatch(DD({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:c}));return}var u=BPe(r),d=u==="left-to-right"?1:-1,f=s==="ArrowRight"?1:-1,h=i+f*d;if(!(o==null||h>=o.length||h<0)){var m=f4(r,"axis","hover",String(h));t.dispatch(DD({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:m}))}}}}});AU.startListening({actionCreator:ace,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",i=f4(r,"axis","hover",String(s));t.dispatch(DD({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:i}))}}}});var Hu=cd("externalEvent"),sce=sC();sce.startListening({actionCreator:Hu,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:bRe(r),activeDataKey:Joe(r),activeIndex:rp(r),activeLabel:Yoe(r),activeTooltipIndex:rp(r),isTooltipActive:yRe(r)};e.payload.handler(n,e.payload.reactEvent)}}});var aHe=ut([Yb],e=>e.tooltipItemPayloads),sHe=ut([aHe,pC,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(o=>o.settings.dataKey===n);if(a!=null){var{positions:s}=a;if(s!=null){var i=t(s,r);return i}}}),ice=cd("touchMove"),oce=sC();oce.startListening({actionCreator:ice,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=IM(n,n.tooltip.settings.shared);if(a==="axis"){var s=dU(n,fU({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&t.dispatch(Qoe({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(a==="item"){var i,o=r.touches[0],c=document.elementFromPoint(o.clientX,o.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(Pse),d=(i=c.getAttribute(Rse))!==null&&i!==void 0?i:void 0,f=sHe(t.getState(),u,d);t.dispatch(Moe({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var iHe=ose({brush:E9e,cartesianAxis:xQe,chartData:YRe,errorBars:_7e,graphicalItems:iUe,layout:E3e,legend:uIe,options:GRe,polarAxis:eMe,polarOptions:nHe,referenceElements:T9e,rootProps:eHe,tooltip:MPe}),oHe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return qje({reducer:iHe,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([Zle.middleware,ece.middleware,AU.middleware,sce.middleware,oce.middleware]),devTools:{serialize:{replacer:ZQe},name:"recharts-".concat(r)}})};function lce(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=bc(),s=S.useRef(null);if(a)return r;s.current==null&&(s.current=oHe(t,n));var i=_8;return S.createElement(YQe,{context:i,store:s.current},r)}function cce(e){var{layout:t,width:r,height:n,margin:a}=e,s=Xa(),i=bc();return S.useEffect(()=>{i||(s(b3e(t)),s(y3e({width:r,height:n})),s(v3e(a)))},[s,i,t,r,n,a]),null}function uce(e){var t=Xa();return S.useEffect(()=>{t(tHe(e))},[t,e]),null}var lHe=["children"];function cHe(e,t){if(e==null)return{};var r,n,a=uHe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function uHe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function b4(){return b4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b4.apply(null,arguments)}var dHe={width:"100%",height:"100%"},fHe=S.forwardRef((e,t)=>{var r=O8(),n=D8(),a=Vse();if(!J1(r)||!J1(n))return null;var{children:s,otherAttributes:i,title:o,desc:c}=e,u,d;return typeof i.tabIndex=="number"?u=i.tabIndex:u=a?0:void 0,typeof i.role=="string"?d=i.role:d=a?"application":void 0,S.createElement(f8,b4({},i,{title:o,desc:c,role:d,tabIndex:u,width:r,height:n,style:dHe,ref:t}),s)}),AHe=e=>{var{children:t}=e,r=or(kB);if(!r)return null;var{width:n,height:a,y:s,x:i}=r;return S.createElement(f8,{width:n,height:a,x:i,y:s},t)},SW=S.forwardRef((e,t)=>{var{children:r}=e,n=cHe(e,lHe),a=bc();return a?S.createElement(AHe,null,r):S.createElement(fHe,b4({ref:t},n),r)});function hHe(){var e=Xa(),[t,r]=S.useState(null),n=or(J3e);return S.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),s=a.width/t.offsetWidth;lu(s)&&s!==n&&e(w3e(s))}},[t,e,n]),r}function NW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mHe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NW(Object(r),!0).forEach(function(n){pHe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pHe(e,t,r){return(t=gHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gHe(e){var t=xHe(e,"string");return typeof t=="symbol"?t:t+""}function xHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vHe=S.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:i,onDoubleClick:o,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:m,onTouchMove:g,onTouchStart:x,style:v,width:y}=e,w=Xa(),[_,T]=S.useState(null),[B,j]=S.useState(null);eLe();var E=hHe(),N=S.useCallback(M=>{E(M),typeof t=="function"&&t(M),T(M),j(M)},[E,t,T,j]),I=S.useCallback(M=>{w(Jle(M)),w(Hu({handler:s,reactEvent:M}))},[w,s]),L=S.useCallback(M=>{w(VD(M)),w(Hu({handler:u,reactEvent:M}))},[w,u]),D=S.useCallback(M=>{w(Uoe()),w(Hu({handler:d,reactEvent:M}))},[w,d]),k=S.useCallback(M=>{w(VD(M)),w(Hu({handler:f,reactEvent:M}))},[w,f]),P=S.useCallback(()=>{w(ace())},[w]),R=S.useCallback(M=>{w(nce(M.key))},[w]),W=S.useCallback(M=>{w(Hu({handler:i,reactEvent:M}))},[w,i]),V=S.useCallback(M=>{w(Hu({handler:o,reactEvent:M}))},[w,o]),G=S.useCallback(M=>{w(Hu({handler:c,reactEvent:M}))},[w,c]),z=S.useCallback(M=>{w(Hu({handler:h,reactEvent:M}))},[w,h]),K=S.useCallback(M=>{w(Hu({handler:x,reactEvent:M}))},[w,x]),J=S.useCallback(M=>{w(ice(M)),w(Hu({handler:g,reactEvent:M}))},[w,g]),te=S.useCallback(M=>{w(Hu({handler:m,reactEvent:M}))},[w,m]);return S.createElement(ale.Provider,{value:_},S.createElement(Tae.Provider,{value:B},S.createElement("div",{className:Sr("recharts-wrapper",n),style:mHe({position:"relative",cursor:"default",width:y,height:a},v),onClick:I,onContextMenu:W,onDoubleClick:V,onFocus:P,onKeyDown:R,onMouseDown:G,onMouseEnter:L,onMouseLeave:D,onMouseMove:k,onMouseUp:z,onTouchEnd:te,onTouchMove:J,onTouchStart:K,ref:N},r)))}),bHe=["children","className","width","height","style","compact","title","desc"];function yHe(e,t){if(e==null)return{};var r,n,a=wHe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function wHe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var dce=S.forwardRef((e,t)=>{var{children:r,className:n,width:a,height:s,style:i,compact:o,title:c,desc:u}=e,d=yHe(e,bHe),f=vl(d);return o?S.createElement(SW,{otherAttributes:f,title:c,desc:u},r):S.createElement(vHe,{className:n,style:i,width:a,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},S.createElement(SW,{otherAttributes:f,title:c,desc:u,ref:t},S.createElement(I9e,null,r)))}),EHe=["width","height"];function zD(){return zD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zD.apply(null,arguments)}function CHe(e,t){if(e==null)return{};var r,n,a=_He(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function _He(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var SHe={top:5,right:5,bottom:5,left:5},NHe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:SHe,reverseStackOrder:!1,syncMethod:"index"},kHe=S.forwardRef(function(t,r){var n,a=Ad(t.categoricalChartProps,NHe),{width:s,height:i}=a,o=CHe(a,EHe);if(!J1(s)||!J1(i))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,m={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return S.createElement(lce,{preloadedState:{options:m},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:c},S.createElement(Vle,{chartData:h.data}),S.createElement(cce,{width:s,height:i,layout:a.layout,margin:a.margin}),S.createElement(uce,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),S.createElement(dce,zD({},o,{width:s,height:i,ref:r})))}),BHe=["axis","item"],sE=S.forwardRef((e,t)=>S.createElement(kHe,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:BHe,tooltipPayloadSearcher:QM,categoricalChartProps:e,ref:t}));function THe(e){var t=Xa();return S.useEffect(()=>{t(rHe(e))},[t,e]),null}var jHe=["width","height","layout"];function $D(){return $D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$D.apply(null,arguments)}function IHe(e,t){if(e==null)return{};var r,n,a=FHe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function FHe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var OHe={top:5,right:5,bottom:5,left:5},DHe={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:OHe,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},fce=S.forwardRef(function(t,r){var n,a=Ad(t.categoricalChartProps,DHe),{width:s,height:i,layout:o}=a,c=IHe(a,jHe);if(!J1(s)||!J1(i))return null;var{chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h}=t,m={chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h,eventEmitter:void 0};return S.createElement(lce,{preloadedState:{options:m},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:u},S.createElement(Vle,{chartData:a.data}),S.createElement(cce,{width:s,height:i,layout:o,margin:a.margin}),S.createElement(uce,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),S.createElement(THe,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),S.createElement(dce,$D({width:s,height:i},c,{ref:r})))}),PHe=["item"],RHe={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},hU=S.forwardRef((e,t)=>{var r=Ad(e,RHe);return S.createElement(fce,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:PHe,tooltipPayloadSearcher:QM,categoricalChartProps:r,ref:t})}),LHe=["axis"],MHe={layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},UHe=S.forwardRef((e,t)=>{var r=Ad(e,MHe);return S.createElement(fce,{chartName:"RadarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:LHe,tooltipPayloadSearcher:QM,categoricalChartProps:r,ref:t})});const nm=["#0ea5e9","#22c55e","#f59e0b","#ef4444","#8b5cf6","#14b8a6","#a3e635","#f472b6"],kW={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",dimension:"",subdimension:"",descripcion:"",objetivos:"",indicadores:[],cobertura:"",fechaInicio:"",fechaCumplimiento:"",estado:"Pendiente",avance:0,enlaces:[]},iw="rounded-2xl border border-slate-100 dark:border-slate-800 bg-white/80 dark:bg-slate-900/60 shadow-sm backdrop-blur",yo="w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-fuchsia-500/70 focus:border-fuchsia-500/70 transition",Mc="block text-xs font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-400 mb-2",k6="inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition",B6="bg-gradient-to-r from-fuchsia-600 to-rose-500 text-white shadow-sm",T6="bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-200 hover:bg-slate-200/80 dark:hover:bg-slate-700",u5="rounded-2xl p-5 text-white shadow-md bg-gradient-to-br",QHe="from-sky-500 to-indigo-500",HHe="from-emerald-500 to-lime-500",VHe="from-amber-500 to-rose-500",zHe="from-fuchsia-500 to-purple-600",j6={Pendiente:{badge:"bg-rose-50 text-rose-700 ring-1 ring-rose-200 dark:bg-rose-900/30 dark:text-rose-200 dark:ring-rose-800",icon:rf,dot:"bg-rose-500"},"En Proceso":{badge:"bg-amber-50 text-amber-700 ring-1 ring-amber-200 dark:bg-amber-900/30 dark:text-amber-200 dark:ring-amber-800",icon:Tne,dot:"bg-amber-500"},Cumplida:{badge:"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-200 dark:ring-emerald-800",icon:io,dot:"bg-emerald-500"}},$He=e=>{const t=j6[e].icon;return l.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold ${j6[e].badge}`,children:[l.jsx("span",{className:`h-2 w-2 rounded-full ${j6[e].dot}`}),l.jsx(t,{className:"h-4 w-4"})," ",e]})},GHe=()=>{var K,J;const[e,t]=S.useState("registro"),[r,n]=S.useState([]),[a,s]=S.useState(kW),[i,o]=S.useState(null),[c,u]=S.useState(null),[d,f]=S.useState(!1),[h,m]=S.useState(""),[g,x]=S.useState(""),[v,y]=S.useState(""),[w,_]=S.useState(""),T=S.useMemo(()=>Eh[a.dimension]??[],[a.dimension]),B=S.useCallback(async()=>{f(!0);try{const te=await yBe();n(te)}catch(te){console.error(te),u("No se pudieron cargar las acciones.")}finally{f(!1)}},[]);S.useEffect(()=>{B()},[B]);const j=te=>{const{name:M,value:H}=te.target;s(Y=>({...Y,[M]:H}))},E=te=>{const M=te.split(",").map(H=>H.trim()).filter(Boolean);s(H=>({...H,indicadores:M}))},N=te=>{const M=te.split(",").map(H=>H.trim()).filter(Boolean);s(H=>({...H,enlaces:M}))},I=()=>{s(kW),o(null),u(null)},L=async te=>{if(te.preventDefault(),!a.responsable||!a.dimension||!a.subdimension||!a.descripcion||!a.fechaCumplimiento){u("Responsable, dimensión, subdimensión, descripción y fecha de cumplimiento son obligatorios.");return}try{i?await EBe(i,a):await wBe(a),await B(),I(),t("seguimiento")}catch(M){console.error(M),u("Error al guardar la acción.")}},D=te=>{o(te.id),s({...te,enlaces:te.enlaces??[],indicadores:te.indicadores??[]}),window.scrollTo({top:0,behavior:"smooth"}),t("registro")},k=async te=>{confirm("¿Eliminar esta acción?")&&(await CBe(te),await B())},P=S.useMemo(()=>r.filter(te=>{const M=!h||te.responsable.toLowerCase().includes(h.toLowerCase())||te.descripcion.toLowerCase().includes(h.toLowerCase())||te.subdimension.toLowerCase().includes(h.toLowerCase()),H=!g||te.dimension===g,Y=!v||te.subdimension===v,Z=!w||te.estado===w;return M&&H&&Y&&Z}),[r,h,g,v,w]),R=S.useMemo(()=>{const te=new Map;return r.forEach(M=>te.set(M.dimension,(te.get(M.dimension)??0)+1)),Array.from(te.entries()).map(([M,H])=>({name:M,value:H}))},[r]),W=S.useMemo(()=>{const te=new Map;return r.forEach(M=>te.set(M.estado,(te.get(M.estado)??0)+1)),Array.from(te.entries()).map(([M,H])=>({name:M,value:H}))},[r]),V=S.useMemo(()=>{const te=r.map(M=>M.avance??0);return te.length?Math.round(te.reduce((M,H)=>M+H,0)/te.length):0},[r]),G=S.useMemo(()=>{const te=new Map;return r.forEach(M=>te.set(M.subdimension,(te.get(M.subdimension)??0)+1)),Array.from(te.entries()).map(([M,H])=>({name:M,value:H})).sort((M,H)=>H.value-M.value).slice(0,6)},[r]),z=()=>{const te=["id","fechaRegistro","responsable","dimension","subdimension","descripcion","objetivos","indicadores","cobertura","fechaInicio","fechaCumplimiento","estado","avance","enlaces"],M=r.map(le=>[le.id,le.fechaRegistro,le.responsable,le.dimension,le.subdimension,le.descripcion.replace(/\n/g," "),le.objetivos??"",(le.indicadores??[]).join("|"),le.cobertura??"",le.fechaInicio??"",le.fechaCumplimiento,le.estado,le.avance??0,(le.enlaces??[]).join("|")]),H=[te.join(","),...M.map(le=>le.map(ie=>`"${String(ie).replace(/"/g,'""')}"`).join(","))].join(`
`),Y=new Blob([H],{type:"text/csv;charset=utf-8"}),Z=URL.createObjectURL(Y),ae=document.createElement("a");ae.href=Z,ae.download=`pme_acciones_${new Date().toISOString().slice(0,10)}.csv`,ae.click(),URL.revokeObjectURL(Z)};return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"relative overflow-hidden rounded-3xl border border-fuchsia-200/60 dark:border-fuchsia-700/30",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-fuchsia-500/20 via-rose-500/20 to-amber-400/20 blur-3xl"}),l.jsxs("div",{className:"relative p-6 md:p-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4 bg-white/60 dark:bg-slate-900/40 backdrop-blur",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl md:text-3xl font-black bg-gradient-to-r from-fuchsia-600 via-rose-600 to-amber-600 bg-clip-text text-transparent flex items-center gap-3",children:[l.jsx(Bg,{className:"h-6 w-6 text-fuchsia-600"})," Seguimiento de Acciones (PME)"]}),l.jsxs("p",{className:"text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[l.jsx(h_e,{className:"h-4 w-4"})," Registro, seguimiento y dashboard por Dimensión/Subdimensión."]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:B,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white/70 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 hover:bg-white",children:[l.jsx(Fne,{className:"h-4 w-4"})," Refrescar"]}),l.jsxs("button",{onClick:z,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-white bg-gradient-to-r from-fuchsia-600 to-rose-500 hover:opacity-90",children:[l.jsx(Zm,{className:"h-4 w-4"})," CSV"]})]})]})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsxs("button",{onClick:()=>t("registro"),className:`${k6} ${e==="registro"?B6:T6}`,children:[l.jsx(Xg,{className:"h-4 w-4"})," Registro"]}),l.jsxs("button",{onClick:()=>t("seguimiento"),className:`${k6} ${e==="seguimiento"?B6:T6}`,children:[l.jsx(s2,{className:"h-4 w-4"})," Seguimiento"]}),l.jsxs("button",{onClick:()=>t("dashboard"),className:`${k6} ${e==="dashboard"?B6:T6}`,children:[l.jsx(lCe,{className:"h-4 w-4"})," Dashboard"]})]}),e==="registro"&&l.jsx("div",{className:iw,children:l.jsxs("form",{onSubmit:L,className:"p-6 md:p-8 space-y-6",children:[c&&l.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-rose-200 bg-rose-50 p-3 text-rose-700 dark:bg-rose-900/30 dark:text-rose-200 dark:border-rose-800",children:[l.jsx(rf,{className:"h-5 w-5"}),l.jsx("span",{children:c})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:Mc,children:"Fecha de Registro"}),l.jsxs("div",{className:"relative",children:[l.jsx(id,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-fuchsia-500"}),l.jsx("input",{type:"date",name:"fechaRegistro",value:a.fechaRegistro,onChange:j,className:yo+" pl-10"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:Mc,children:"Responsable"}),l.jsxs("div",{className:"relative",children:[l.jsx(U2,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-rose-500"}),l.jsx("input",{type:"text",name:"responsable",placeholder:"Nombre",value:a.responsable,onChange:j,className:yo+" pl-10"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:Mc,children:"Cobertura (niveles/cursos)"}),l.jsxs("div",{className:"relative",children:[l.jsx(K1,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-amber-500"}),l.jsx("input",{type:"text",name:"cobertura",placeholder:"2°A, 2°B, 3°Mecánica...",value:a.cobertura??"",onChange:j,className:yo+" pl-10"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:Mc,children:"Dimensión PME"}),l.jsxs("div",{className:"relative",children:[l.jsx(XCe,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-indigo-500"}),l.jsxs("select",{name:"dimension",value:a.dimension,onChange:j,className:yo+" pl-10",children:[l.jsx("option",{value:"",children:"Selecciona una dimensión"}),Object.keys(Eh).map(te=>l.jsx("option",{value:te,children:te},te))]})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:Mc,children:"Subdimensión"}),l.jsxs("div",{className:"relative",children:[l.jsx(PL,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-sky-500"}),l.jsxs("select",{name:"subdimension",value:a.subdimension,onChange:j,className:yo+" pl-10",disabled:!a.dimension,children:[l.jsx("option",{value:"",children:a.dimension?"Selecciona una subdimensión":"Primero elige una dimensión"}),T.map(te=>l.jsx("option",{value:te,children:te},te))]})]})]}),l.jsxs("div",{className:"md:col-span-3",children:[l.jsx("label",{className:Mc,children:"Descripción de la Acción"}),l.jsxs("div",{className:"relative",children:[l.jsx(nf,{className:"absolute left-3 top-3 h-4 w-4 text-fuchsia-500"}),l.jsx("textarea",{name:"descripcion",value:a.descripcion,onChange:j,rows:3,placeholder:"¿Qué se hará? ¿Dónde y con quién?",className:yo+" pl-10"})]})]}),l.jsxs("div",{className:"md:col-span-3",children:[l.jsx("label",{className:Mc,children:"Objetivos (opcional)"}),l.jsx("textarea",{name:"objetivos",value:a.objetivos??"",onChange:j,rows:2,placeholder:"Propósitos pedagógicos",className:yo})]}),l.jsxs("div",{children:[l.jsx("label",{className:Mc,children:"Indicadores (separados por coma)"}),l.jsx("input",{type:"text",value:(a.indicadores??[]).join(", "),onChange:te=>E(te.target.value),placeholder:"Cobertura OA, asistencia, resultados...",className:yo})]}),l.jsxs("div",{children:[l.jsx("label",{className:Mc,children:"Fecha de Inicio"}),l.jsxs("div",{className:"relative",children:[l.jsx(id,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-violet-500"}),l.jsx("input",{type:"date",name:"fechaInicio",value:a.fechaInicio??"",onChange:j,className:yo+" pl-10"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:Mc,children:"Fecha de Cumplimiento"}),l.jsxs("div",{className:"relative",children:[l.jsx(id,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-emerald-500"}),l.jsx("input",{type:"date",name:"fechaCumplimiento",value:a.fechaCumplimiento,onChange:j,className:yo+" pl-10"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:Mc,children:"Estado"}),l.jsx("select",{name:"estado",value:a.estado,onChange:j,className:yo,children:ez.map(te=>l.jsx("option",{value:te,children:te},te))})]}),l.jsxs("div",{children:[l.jsx("label",{className:Mc,children:"Avance (%)"}),l.jsxs("div",{className:"relative",children:[l.jsx(NN,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-emerald-500"}),l.jsx("input",{type:"number",min:0,max:100,name:"avance",value:a.avance??0,onChange:j,className:yo+" pl-10"})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:Mc,children:"Enlaces de evidencia (separados por coma)"}),l.jsxs("div",{className:"relative",children:[l.jsx(iz,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-indigo-500"}),l.jsx("input",{type:"text",value:(a.enlaces??[]).join(", "),onChange:te=>N(te.target.value),placeholder:"https://..., https://...",className:yo+" pl-10"})]})]})]}),l.jsxs("div",{className:"flex items-center justify-end gap-3",children:[i&&l.jsx("button",{type:"button",onClick:I,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white border border-slate-200 hover:bg-slate-50 dark:bg-slate-800 dark:border-slate-700",children:"Cancelar"}),l.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-white bg-gradient-to-r from-fuchsia-600 via-rose-500 to-amber-500 hover:opacity-90",children:[i?l.jsx(qh,{className:"h-4 w-4"}):l.jsx(od,{className:"h-4 w-4"}),i?"Guardar cambios":"Registrar acción"]})]})]})}),e==="seguimiento"&&l.jsx("div",{className:iw,children:l.jsxs("div",{className:"p-4 md:p-6 space-y-5",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[l.jsxs("div",{className:"relative md:col-span-2",children:[l.jsx(Zk,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-fuchsia-600"}),l.jsx("input",{className:yo+" pl-10",placeholder:"Buscar por responsable, descripción o subdimensión...",value:h,onChange:te=>m(te.target.value)})]}),l.jsxs("select",{value:g,onChange:te=>{x(te.target.value),y("")},className:yo,children:[l.jsx("option",{value:"",children:"Todas las dimensiones"}),Object.keys(Eh).map(te=>l.jsx("option",{value:te,children:te},te))]}),l.jsxs("select",{value:v,onChange:te=>y(te.target.value),className:yo,children:[l.jsx("option",{value:"",children:"Todas las subdimensiones"}),(Eh[g]??Object.values(Eh).flat()).map(te=>l.jsx("option",{value:te,children:te},te))]}),l.jsxs("select",{value:w,onChange:te=>_(te.target.value),className:yo,children:[l.jsx("option",{value:"",children:"Todos los estados"}),ez.map(te=>l.jsx("option",{value:te,children:te},te))]})]}),l.jsx("div",{className:"overflow-x-auto rounded-xl border border-slate-100 dark:border-slate-800",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-800",children:[l.jsx("thead",{className:"bg-gradient-to-r from-fuchsia-50 to-rose-50 dark:from-slate-800 dark:to-slate-800",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-fuchsia-700 dark:text-fuchsia-300",children:"Responsable"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-rose-700 dark:text-rose-300",children:"Dimensión / Subdimensión"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-indigo-700 dark:text-indigo-300",children:"Descripción"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-amber-700 dark:text-amber-300",children:"Fechas"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-emerald-700 dark:text-emerald-300",children:"Estado"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-sky-700 dark:text-sky-300",children:"Avance"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Acciones"})]})}),l.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800 bg-white dark:bg-slate-900/40",children:[P.map(te=>{var M,H;return l.jsxs("tr",{className:"hover:bg-fuchsia-50/50 dark:hover:bg-slate-800/60 transition",children:[l.jsx("td",{className:"px-4 py-4 align-top text-sm",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-fuchsia-500 to-rose-500 text-white flex items-center justify-center font-bold shadow-sm",children:((H=(M=te.responsable)==null?void 0:M.slice(0,1))==null?void 0:H.toUpperCase())||"?"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-slate-900 dark:text-slate-100",children:te.responsable}),l.jsx("div",{className:"text-xs text-slate-500",children:te.cobertura})]})]})}),l.jsxs("td",{className:"px-4 py-4 align-top text-sm",children:[l.jsx("div",{className:"font-semibold text-indigo-700 dark:text-indigo-300",children:te.dimension}),l.jsx("div",{className:"text-xs text-slate-500",children:te.subdimension})]}),l.jsxs("td",{className:"px-4 py-4 align-top text-sm max-w-md",children:[l.jsx("div",{className:"text-slate-700 dark:text-slate-200",children:te.descripcion}),te.enlaces&&te.enlaces.length>0&&l.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:te.enlaces.map((Y,Z)=>l.jsxs("a",{href:Y,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-fuchsia-700 hover:text-fuchsia-900 dark:text-fuchsia-300",children:[l.jsx(iz,{className:"h-3.5 w-3.5"})," Evidencia ",Z+1]},Z))})]}),l.jsxs("td",{className:"px-4 py-4 align-top text-sm whitespace-nowrap",children:[l.jsxs("div",{className:"text-xs text-slate-500",children:["Reg: ",te.fechaRegistro||"-"]}),l.jsxs("div",{className:"text-xs text-slate-500",children:["Ini: ",te.fechaInicio||"-"]}),l.jsxs("div",{className:"text-xs font-semibold text-emerald-700 dark:text-emerald-300",children:["Fin: ",te.fechaCumplimiento]})]}),l.jsx("td",{className:"px-4 py-4 align-top text-center",children:$He(te.estado)}),l.jsxs("td",{className:"px-4 py-4 align-top",children:[l.jsx("div",{className:"w-28 h-2.5 rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-fuchsia-500 via-rose-500 to-amber-500",style:{width:`${Math.min(Math.max(te.avance??0,0),100)}%`}})}),l.jsxs("div",{className:"text-xs text-center mt-1",children:[te.avance??0,"%"]})]}),l.jsx("td",{className:"px-4 py-4 align-top text-center",children:l.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[l.jsx("button",{onClick:()=>D(te),className:"p-2 rounded-lg hover:bg-amber-50 dark:hover:bg-slate-800",title:"Editar",children:l.jsx(LL,{className:"h-5 w-5 text-amber-600"})}),l.jsx("button",{onClick:()=>k(te.id),className:"p-2 rounded-lg hover:bg-rose-50 dark:hover:bg-slate-800",title:"Eliminar",children:l.jsx(Do,{className:"h-5 w-5 text-rose-600"})})]})})]},te.id)}),P.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"px-4 py-12 text-center text-slate-500",children:"Sin registros"})})]})]})})]})}),e==="dashboard"&&l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"xl:col-span-3 grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsx("div",{className:`${u5} ${QHe}`,children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(Wd,{className:"h-10 w-10 opacity-90"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs uppercase/relaxed",children:"Acciones totales"}),l.jsx("div",{className:"text-2xl font-black",children:r.length})]})]})}),l.jsx("div",{className:`${u5} ${HHe}`,children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(io,{className:"h-10 w-10 opacity-90"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs uppercase/relaxed",children:"Cumplidas"}),l.jsx("div",{className:"text-2xl font-black",children:((K=W.find(te=>te.name==="Cumplida"))==null?void 0:K.value)??0})]})]})}),l.jsx("div",{className:`${u5} ${VHe}`,children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(Tne,{className:"h-10 w-10 opacity-90"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs uppercase/relaxed",children:"En proceso"}),l.jsx("div",{className:"text-2xl font-black",children:((J=W.find(te=>te.name==="En Proceso"))==null?void 0:J.value)??0})]})]})}),l.jsx("div",{className:`${u5} ${zHe}`,children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(NN,{className:"h-10 w-10 opacity-90"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs uppercase/relaxed",children:"Avance promedio"}),l.jsxs("div",{className:"text-2xl font-black",children:[V,"%"]})]})]})})]}),l.jsxs("div",{className:iw+" p-5",children:[l.jsx("div",{className:"flex items-center justify-between mb-4",children:l.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-100",children:"Acciones por dimensión"})}),l.jsx("div",{className:"h-64",children:l.jsx(Th,{width:"100%",height:"100%",children:l.jsxs(sE,{data:R,children:[l.jsx(aE,{strokeDasharray:"3 3"}),l.jsx(sx,{dataKey:"name",hide:!0}),l.jsx(ix,{allowDecimals:!1}),l.jsx(Bh,{}),l.jsx(lb,{dataKey:"value",children:R.map((te,M)=>l.jsx(np,{fill:nm[M%nm.length]},M))})]})})}),l.jsx("div",{className:"mt-2 grid grid-cols-1 gap-1",children:R.map((te,M)=>l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx("span",{className:"inline-block h-3 w-3 rounded-sm",style:{background:nm[M%nm.length]}}),l.jsx("span",{className:"flex-1",children:te.name}),l.jsx("span",{className:"font-semibold",children:te.value})]},M))})]}),l.jsxs("div",{className:iw+" p-5",children:[l.jsx("h3",{className:"font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Distribución por estado"}),l.jsx("div",{className:"h-64",children:l.jsx(Th,{width:"100%",height:"100%",children:l.jsxs(hU,{children:[l.jsx(YB,{data:W,dataKey:"value",nameKey:"name",outerRadius:90,label:!0,children:W.map((te,M)=>l.jsx(np,{fill:nm[M%nm.length]},M))}),l.jsx(Qb,{}),l.jsx(Bh,{})]})})})]}),l.jsxs("div",{className:iw+" p-5",children:[l.jsx("h3",{className:"font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Subdimensiones más trabajadas"}),l.jsxs("ul",{className:"space-y-2",children:[G.map((te,M)=>l.jsxs("li",{className:"flex items-center justify-between text-sm",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"inline-block h-2.5 w-2.5 rounded-full",style:{background:nm[M%nm.length]}}),te.name]}),l.jsx("span",{className:"font-semibold",children:te.value})]},M)),G.length===0&&l.jsx("li",{className:"text-slate-500",children:"Sin datos"})]})]})]})]})},JB="planificaciones",Ace="actividades_calendario",hce=e=>{var r,n,a;const t=e.data();return{id:e.id,...t,fechaCreacion:((a=(n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r))==null?void 0:a.toISOString())||t.fechaCreacion}},KHe=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:ir.fromDate(new Date),fechaActualizacion:ir.fromDate(new Date)};return(await _n(wt(ht,JB),r)).id}catch(r){throw console.error("Error al guardar planificación:",r),new Error("No se pudo guardar la planificación")}},qHe=async(e,t,r)=>{try{const n=cr(ht,JB,e),a=await bx(n);if(!a.exists()||a.data().userId!==r)throw new Error("No tienes permisos para actualizar esta planificación");await du(n,{...t,fechaActualizacion:ir.fromDate(new Date)})}catch(n){throw console.error("Error al actualizar planificación:",n),new Error("No se pudo actualizar la planificación")}},WHe=async(e,t)=>{try{const r=cr(ht,JB,e),n=await bx(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar esta planificación");await is(r)}catch(r){throw console.error("Error al eliminar planificación:",r),new Error("No se pudo eliminar la planificación")}},XHe=(e,t)=>{const r=$t(wt(ht,JB),Qr("userId","==",e),xr("fechaCreacion","desc"));return pr(r,n=>{const a=n.docs.map(hce);t(a)},n=>{console.error("Error en suscripción a planificaciones:",n)})},YHe=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:ir.fromDate(new Date),fechaActualizacion:ir.fromDate(new Date)};return(await _n(wt(ht,Ace),r)).id}catch(r){throw console.error("Error al guardar actividad:",r),new Error("No se pudo guardar la actividad")}},JHe=(e,t)=>{const r=$t(wt(ht,Ace),Qr("userId","==",e),xr("fecha","desc"));return pr(r,n=>{const a=n.docs.map(hce);t(a)},n=>{console.error("Error en suscripción a actividades:",n)})},ZHe=e=>{const[t,r]=S.useState([]),[n,a]=S.useState(!0),[s,i]=S.useState(null);return S.useEffect(()=>e?(a(!0),XHe(e,f=>{r(f),a(!1)})):void 0,[e]),{planificaciones:t,loading:n,error:s,save:async d=>{try{return i(null),await KHe(d,e)}catch(f){throw i(f.message||"Error al guardar planificación"),f}},update:async(d,f)=>{try{i(null),await qHe(d,f,e)}catch(h){throw i(h.message||"Error al actualizar planificación"),h}},remove:async d=>{try{i(null),await WHe(d,e)}catch(f){throw i(f.message||"Error al eliminar planificación"),f}}}},GD=e=>{const t=new Date().toISOString();console.log(`[${t}] API Call: ${e}`)},eVe=e=>{const[t,r]=S.useState([]),[n,a]=S.useState(!0),[s,i]=S.useState(null);S.useEffect(()=>e?JHe(e,u=>{r(u),a(!1)}):void 0,[e]);const o=S.useCallback(async c=>{try{return i(null),await YHe(c,e)}catch(u){throw i(u instanceof Error?u.message:"Error al guardar actividad"),u}},[e]);return{actividades:t,loading:n,error:s,save:o}},tVe=({lesson:e,onClose:t,onSave:r,isLoading:n=!1})=>{const[a,s]=S.useState(e),i=c=>{s({...a,[c.target.name]:c.target.value})},o=async()=>{try{await r(a),t()}catch(c){console.error("Error al guardar lección:",c)}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Lección"}),l.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(a).map(([c,u])=>l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:c.replace(/([A-Z])/g," $1")}),l.jsx("textarea",{name:c,value:u,onChange:i,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:n})]},c))}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[l.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Cancelar"}),l.jsxs("button",{onClick:o,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:n,children:[n&&l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})]})})},rVe=({plan:e,onEditLesson:t,onUseLesson:r,isLoading:n=!1,onUpdatePlan:a})=>{const[s,i]=S.useState(e.progreso??0),[o,c]=S.useState(!1),u=async d=>{const f=parseInt(d.target.value,10);i(f),c(!0);try{e.id&&a&&(await a(e.id,{progreso:f}),console.log("✅ Progreso actualizado exitosamente"))}catch(h){console.error("❌ Error completo:",h),alert(`Error al guardar el avance: ${h.message}`),i(e.progreso??0)}finally{c(!1)}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Indicadores de Evaluación:"})," ",e.indicadoresEvaluacion]}),l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Avance de la Unidad"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("input",{type:"range",min:0,max:100,value:s,onChange:u,disabled:o||n}),l.jsxs("span",{className:"font-bold w-12",children:[s,"%"]}),o&&l.jsx("span",{className:"text-xs text-slate-400",children:"Guardando..."})]})]})]}),l.jsx("div",{className:"space-y-4",children:e.detallesLeccion.map((d,f)=>l.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[l.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",f+1,": ",d.actividades]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Objetivo:"})," ",d.objetivosAprendizaje]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Contenidos:"})," ",d.contenidosConceptuales]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Habilidad (Bloom):"})," ",d.habilidadesBloom]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Perfil de Egreso:"})," ",d.perfilEgreso]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Interdisciplinariedad:"})," ",d.asignaturasInterdisciplinariedad]})]}),l.jsxs("div",{className:"flex gap-2 mt-4",children:[l.jsx("button",{onClick:()=>t(f,d),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Editar"}),l.jsx("button",{onClick:()=>r(d,e),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200 disabled:opacity-50",disabled:n,children:"Usar para Plan de Clase"})]})]},f))})]})},nVe=({plan:e,onBack:t,onSave:r,onDelete:n,isLoading:a=!1})=>{const[s,i]=S.useState(e),[o,c]=S.useState(!1),u=f=>{const{name:h,value:m}=f.target,[g,x]=h.split(".");i(g==="momentosClase"?v=>({...v,momentosClase:{...v.momentosClase,[x]:m}}):v=>({...v,[h]:m}))},d=async()=>{c(!0);try{await r(s)}catch(f){console.error("Error al guardar plan de clase:",f)}finally{c(!1)}};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreClase}),l.jsx("button",{onClick:t,className:"text-slate-600 hover:text-slate-900 font-semibold disabled:opacity-50",disabled:a||o,children:"← Volver"})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Inicio"}),l.jsx("textarea",{name:"momentosClase.inicio",value:s.momentosClase.inicio,onChange:u,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]}),l.jsxs("div",{children:[l.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Desarrollo"}),l.jsx("textarea",{name:"momentosClase.desarrollo",value:s.momentosClase.desarrollo,onChange:u,rows:8,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]}),l.jsxs("div",{children:[l.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Cierre"}),l.jsx("textarea",{name:"momentosClase.cierre",value:s.momentosClase.cierre,onChange:u,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]})]}),l.jsx("div",{className:"text-right mt-6",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("button",{onClick:()=>n(e.id),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",disabled:a||o,children:"🗑️ Eliminar Plan"}),l.jsxs("button",{onClick:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:a||o,children:[o&&l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})})]})},aVe=({userId:e})=>{const{actividades:t,save:r}=eVe(e),[n,a]=S.useState("list"),[s,i]=S.useState(null),[o,c]=S.useState(!1),[u,d]=S.useState(!1),f={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[h,m]=S.useState(f);S.useEffect(()=>{n==="summary"&&s&&g()},[n,s,e]);const g=async()=>{if(s)try{d(!1)}catch(j){console.error("Error al verificar evento en calendario:",j)}},x=j=>{const{name:E,value:N}=j.target;m(I=>({...I,[E]:N}))},v=(j,E,N)=>{m(I=>({...I,tareas:I.tareas.map(L=>L.id===j?{...L,[E]:N}:L)}))},y=()=>{m(j=>({...j,tareas:[...j.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},w=j=>{m(E=>({...E,tareas:E.tareas.filter(N=>N.id!==j)}))},_=async j=>{j.preventDefault(),c(!0);const E=`Basado en la siguiente información de una actividad, genera un objetivo claro y conciso para esta.
    - Nombre: ${h.nombre}
    - Descripción: ${h.descripcion}
    - Tareas: ${h.tareas.map(N=>N.descripcion).join(", ")}
    El objetivo debe ser breve, empezar con un verbo en infinitivo y enfocarse en el propósito principal de la actividad.`;try{GD("Planificación - Actividad Calendario");const N="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",P=(await(await new ps(N).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(E)).response).text(),R={...h,objetivo:P.replace(/(\*\*|\*)/g,"")},W=await r(R),V={...R,id:W};i(V),a("summary")}catch(N){console.error("Error al generar objetivo con IA:",N),alert("Hubo un error al generar el objetivo. La actividad se guardará sin él.");try{const I={...h,objetivo:"No generado"},L=await r(I),D={...I,id:L};i(D),a("summary")}catch(I){console.error("Error al guardar actividad:",I),alert("Error al guardar la actividad. Por favor, intente nuevamente.")}}finally{c(!1)}},T=async j=>{if(j)try{d(!0),alert("Actividad marcada como añadida al calendario (funcionalidad en desarrollo).")}catch(E){console.error("Error adding to calendar:",E),alert("Hubo un error al agregar la actividad al calendario.")}},B=`
  w-full px-4 py-2.5 rounded-lg border border-slate-200 
  bg-white dark:bg-slate-800 
  text-slate-900 dark:text-slate-100 
  placeholder:text-slate-400 dark:placeholder:text-slate-500
  focus:border-indigo-500 dark:focus:border-indigo-600 
  focus:ring-2 focus:ring-indigo-500/20 dark:focus:ring-indigo-600/20
  focus:outline-none
  transition-colors
  disabled:opacity-50 disabled:cursor-not-allowed
`;return n==="form"?l.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:l.jsxs("form",{onSubmit:_,className:"space-y-8",children:[l.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[l.jsx("h3",{className:"text-lg font-bold mb-4",children:"Información General"}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("input",{name:"nombre",value:h.nombre,onChange:x,placeholder:"Nombre de la Actividad",className:B,required:!0,disabled:o}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx("input",{name:"fecha",type:"date",value:h.fecha,onChange:x,className:B,required:!0,disabled:o}),l.jsx("input",{name:"hora",type:"time",value:h.hora,onChange:x,className:B,required:!0,disabled:o})]}),l.jsx("textarea",{name:"descripcion",value:h.descripcion,onChange:x,placeholder:"Descripción (objetivos, contenidos, metodología)",rows:4,className:B,required:!0,disabled:o}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx("input",{name:"ubicacion",value:h.ubicacion,onChange:x,placeholder:"Ubicación",className:B,required:!0,disabled:o}),l.jsx("input",{name:"participantes",value:h.participantes,onChange:x,placeholder:"Participantes",className:B,required:!0,disabled:o})]}),l.jsx("textarea",{name:"recursosGenerales",value:h.recursosGenerales,onChange:x,placeholder:"Recursos Generales Necesarios",rows:2,className:B,disabled:o})]})]}),l.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),l.jsx("button",{type:"button",onClick:y,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md disabled:opacity-50",disabled:o,children:"+ Agregar Tarea"})]}),l.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:h.tareas.map((j,E)=>l.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[l.jsx("button",{type:"button",onClick:()=>w(j.id),className:"absolute top-1 right-1 text-red-500 text-lg disabled:opacity-50",disabled:o,children:"×"}),l.jsx("textarea",{value:j.descripcion,onChange:N=>v(j.id,"descripcion",N.target.value),placeholder:`Descripción de la Tarea ${E+1}`,rows:2,className:B,required:!0,disabled:o}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[l.jsx("input",{value:j.responsable,onChange:N=>v(j.id,"responsable",N.target.value),placeholder:"Responsable",className:B,required:!0,disabled:o}),l.jsx("input",{value:j.recursos,onChange:N=>v(j.id,"recursos",N.target.value),placeholder:"Recursos Necesarios",className:B,disabled:o})]})]},j.id))})]}),l.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[l.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),l.jsx("p",{className:"text-sm",children:"Este objetivo se generará automáticamente a partir de la descripción y las tareas ingresadas. Una vez guardada la actividad, podrá revisar y ajustar el objetivo propuesto por el sistema."})]}),l.jsxs("div",{className:"flex justify-end gap-4",children:[l.jsx("button",{type:"button",onClick:()=>a("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg disabled:opacity-50",disabled:o,children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:o,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center disabled:opacity-50",children:o?l.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):n==="summary"&&s?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[l.jsx("span",{className:"text-2xl",children:"✓"}),l.jsxs("div",{children:[l.jsx("h2",{className:"font-bold text-lg",children:"¡Actividad Planificada con Éxito!"}),l.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuación."})]})]}),l.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),l.jsxs("div",{className:"space-y-4 text-sm",children:[l.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[l.jsx("strong",{className:"text-slate-500",children:"Nombre:"}),l.jsx("span",{children:s.nombre})]}),l.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[l.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"}),l.jsx("span",{children:new Date(`${s.fecha}T${s.hora}`).toLocaleString("es-CL")})]}),l.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[l.jsx("p",{className:"font-bold text-slate-500",children:"Descripción:"}),l.jsx("p",{children:s.descripcion})]}),l.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[l.jsx("strong",{className:"text-slate-500",children:"Ubicación:"}),l.jsx("span",{children:s.ubicacion})]}),l.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[l.jsx("strong",{className:"text-slate-500",children:"Participantes:"}),l.jsx("span",{children:s.participantes})]}),l.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[l.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),l.jsx("p",{children:s.recursosGenerales})]}),l.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[l.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),l.jsx("p",{children:s.objetivo})]})]}),l.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[l.jsx("p",{className:"text-sm",children:"¿Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),l.jsx("button",{onClick:()=>T(s),disabled:u,className:`font-bold px-4 py-2 rounded-lg transition-colors ${u?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:u?"✓ Añadido al Calendario":"Añadir al Calendario"})]})]}),l.jsx("button",{onClick:()=>{a("list"),i(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),l.jsx("button",{onClick:()=>{a("form"),m(f)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),l.jsx("div",{className:"space-y-3",children:t.length>0?t.map(j=>l.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:j.nombre}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(j.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",j.ubicacion]})]},j.id)):l.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},sVe=({currentUser:e})=>{const t=e.uid||e.email||e.id||"",{planificaciones:r,save:n,update:a,remove:s,loading:i}=ZHe(t),o={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[c,u]=S.useState(o),[d,f]=S.useState(null),[h,m]=S.useState(!1),[g,x]=S.useState(null),[v,y]=S.useState("unidad"),[w,_]=S.useState(null),[T,B]=S.useState(null),j=S.useMemo(()=>e.asignaturas||[],[e.asignaturas]),E=S.useMemo(()=>{const J=e.cursos||[],te=new Set;return J.forEach(M=>{M.startsWith("1º")?te.add("1º Medio"):M.startsWith("2º")?te.add("2º Medio"):M.startsWith("3º")?te.add("3º Medio"):M.startsWith("4º")&&te.add("4º Medio")}),Array.from(te)},[e.cursos]);S.useEffect(()=>{u(J=>({...J,asignatura:j[0]||"",nivel:E[0]||""})),console.log("🔍 Debug datos usuario y planificaciones:",{currentUser:{uid:e.uid,email:e.email,id:e.id,nombreCompleto:e.nombreCompleto},userId:t,planificacionesCount:r.length,planificacionesAutores:r.map(J=>({id:J.id,autor:J.autor,tipo:J.tipo,coincideConUserId:J.autor===t}))})},[j,E,e,t,r]);const N=J=>{const{name:te,value:M}=J.target;u(H=>({...H,[te]:te==="cantidadClases"?parseInt(M,10):M}))},I=()=>{const{asignatura:J,nivel:te,nombreUnidad:M,contenidos:H,cantidadClases:Y,observaciones:Z,ideasParaUnidad:ae}=c;return`Eres un experto diseñador curricular para la educación media técnico profesional en Chile. Tu tarea es generar una planificación de unidad didáctica completa en formato JSON estructurado, basándote en la información proporcionada.

    **Información Base:**
    - Asignatura: ${J}
    - Nivel: ${te}
    - Nombre de la Unidad: "${M}"
    - Contenidos clave a trabajar (insumo principal): "${H}"
    - Cantidad de clases para la unidad: ${Y}
    - Ideas y perspectiva del docente para la unidad: "${ae||"Ninguna. Sé creativo."}"
    - Observaciones y énfasis del docente: "${Z||"Ninguna"}"

    Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
    1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
    2.  **indicadoresEvaluacion**: Un indicador de evaluación general y observable para la unidad.
    3.  **detallesLeccion**: Un array con EXACTAMENTE ${Y} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
        - **objetivosAprendizaje**: Un objetivo de aprendizaje específico para la lección, redactado en infinitivo.
        - **contenidosConceptuales**: Los conceptos clave que se abordarán en la lección.
        - **habilidadesBloom**: La habilidad principal de la Taxonomía de Bloom que se trabajará (ej: Analizar, Crear, Evaluar).
        - **perfilEgreso**: Conecta la lección con una habilidad del perfil de egreso (ej: "Pensamiento crítico", "Colaboración").
        - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el número de clase entre paréntesis (ej: "Debate grupal (Clase 1)").
        - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podría realizar un trabajo interdisciplinario.

    Asegúrate de que el contenido generado sea coherente, pedagógicamente sólido y esté directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.`},L=async J=>{if(J.preventDefault(),m(!0),x(null),!c.contenidos||!c.nombreUnidad){x("Los campos 'Nombre de Unidad' y 'Contenidos Clave' son obligatorios."),m(!1);return}try{GD("Planificación - Unidad");const te="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",H=new ps(te).getGenerativeModel({model:"gemini-1.5-pro"}),Y=I(),Z={type:"object",properties:{objetivosAprendizaje:{type:"string"},indicadoresEvaluacion:{type:"string"},detallesLeccion:{type:"array",items:{type:"object",properties:{objetivosAprendizaje:{type:"string"},contenidosConceptuales:{type:"string"},habilidadesBloom:{type:"string"},perfilEgreso:{type:"string"},actividades:{type:"string"},asignaturasInterdisciplinariedad:{type:"string"}},required:["objetivosAprendizaje","contenidosConceptuales","habilidadesBloom","perfilEgreso","actividades","asignaturasInterdisciplinariedad"]}}},required:["objetivosAprendizaje","indicadoresEvaluacion","detallesLeccion"]},ie=(await(await H.generateContent({contents:[{parts:[{text:Y}]}],generationConfig:{responseMimeType:"application/json",responseSchema:Z}})).response).text(),ce=JSON.parse(ie),Ae={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Unidad",asignatura:c.asignatura,nivel:c.nivel,nombreUnidad:c.nombreUnidad,contenidos:c.contenidos,cantidadClases:c.cantidadClases,observaciones:c.observaciones,ideasParaUnidad:c.ideasParaUnidad,objetivosAprendizaje:ce.objetivosAprendizaje,indicadoresEvaluacion:ce.indicadoresEvaluacion,detallesLeccion:ce.detallesLeccion};if(d)await a(d.id,Ae),f({...Ae,id:d.id});else{const Fe=await n(Ae);f({...Ae,id:Fe})}}catch(te){console.error("Error al generar planificación con IA",te),x("Ocurrió un error al contactar con la IA. Verifique la configuración y reintente.")}finally{m(!1)}},D=async(J,te)=>{m(!0),x(null);const M=`A partir de la siguiente información de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
    
    - Asignatura: ${te.asignatura}
    - Nivel: ${te.nivel}
    - Objetivo de la clase: ${J.objetivosAprendizaje}
    - Contenidos: ${J.contenidosConceptuales}
    - Actividades sugeridas: ${J.actividades}
    
    Responde SÓLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{GD("Planificación - Utilizar Clase");const H="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",Z=new ps(H).getGenerativeModel({model:"gemini-1.5-pro"}),ae={type:"object",properties:{inicio:{type:"string"},desarrollo:{type:"string"},cierre:{type:"string"}},required:["inicio","desarrollo","cierre"]},ce=(await(await Z.generateContent({contents:[{parts:[{text:M}]}],generationConfig:{responseMimeType:"application/json",responseSchema:ae}})).response).text(),Ae=JSON.parse(ce),Fe={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Clase",asignatura:te.asignatura,nivel:te.nivel,contenidos:J.contenidosConceptuales,observaciones:"",nombreClase:J.actividades,duracionClase:80,momentosClase:Ae,detalleLeccionOrigen:J};await n(Fe),alert('¡Plan de clase generado y guardado en la pestaña "Clase"!'),y("clase")}catch(H){console.error("Error al generar plan de clase con IA",H),x("No se pudo generar el plan de clase. Inténtelo de nuevo.")}finally{m(!1)}},k=J=>{J.tipo==="Unidad"&&(u({asignatura:J.asignatura,nivel:J.nivel,nombreUnidad:J.nombreUnidad,contenidos:J.contenidos,cantidadClases:J.cantidadClases,observaciones:J.observaciones,ideasParaUnidad:J.ideasParaUnidad||""}),f(J),window.scrollTo({top:0,behavior:"smooth"}))},P=async J=>{if(window.confirm("¿Está seguro de que desea eliminar esta planificación?"))try{await s(J),(d==null?void 0:d.id)===J&&(f(null),u(o))}catch(te){console.error("Error al eliminar planificación:",te),alert("Error al eliminar la planificación. Por favor, intente nuevamente.")}},R=async J=>{if(window.confirm("¿Está seguro de que desea eliminar este plan de clase?"))try{await s(J),(w==null?void 0:w.id)===J&&_(null),console.log("✅ Plan de clase eliminado exitosamente")}catch(te){console.error("Error al eliminar plan de clase:",te),alert("Error al eliminar el plan de clase. Por favor, intente nuevamente.")}},W=(J,te)=>{d&&B({planId:d.id,lessonIndex:J,lessonData:te})},V=async J=>{if(T)try{const{planId:te,lessonIndex:M}=T,H=r.find(ae=>ae.id===te&&ae.tipo==="Unidad");if(!H)return;const Y=[...H.detallesLeccion];Y[M]=J;const Z={...H,detallesLeccion:Y};await a(te,Z),f(Z),B(null)}catch(te){console.error("Error al actualizar lección:",te),alert("Error al actualizar la lección. Por favor, intente nuevamente.")}},G="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",z=()=>l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete los campos y use la IA para crear una planificación de unidad estructurada."}),i?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):l.jsxs("form",{onSubmit:L,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsx("select",{name:"asignatura",value:c.asignatura,onChange:N,className:G,disabled:h,children:j.length>0?j.map(J=>l.jsx("option",{value:J,children:J},J)):l.jsx("option",{disabled:!0,children:"No tiene asignaturas asignadas"})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),l.jsx("select",{name:"nivel",value:c.nivel,onChange:N,className:G,disabled:h,children:E.length>0?E.map(J=>l.jsx("option",{value:J,children:J},J)):l.jsx("option",{disabled:!0,children:"No tiene cursos/niveles asignados"})})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Nombre de Unidad ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",name:"nombreUnidad",value:c.nombreUnidad,onChange:N,className:G,placeholder:"Ej: La Célula y sus procesos",disabled:h})]}),l.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[l.jsxs("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Contenidos Clave ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("textarea",{name:"contenidos",value:c.contenidos,onChange:N,rows:3,placeholder:"Ingrese los temas, conceptos clave o unidades que la planificación debe abordar.",className:G,disabled:h})]}),l.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[l.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),l.jsx("textarea",{name:"ideasParaUnidad",value:c.ideasParaUnidad,onChange:N,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificación (ej: enfocar en trabajo colaborativo, usar casos prácticos, conectar con la actualidad).",className:G,disabled:h})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),l.jsx("input",{type:"number",name:"cantidadClases",value:c.cantidadClases,onChange:N,className:G,min:"1",max:"20",disabled:h})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (Énfasis)"}),l.jsx("textarea",{name:"observaciones",value:c.observaciones,onChange:N,rows:1,placeholder:"Ej: clase práctica, modelo ABP, juego, reforzamiento...",className:G,disabled:h})]})]}),l.jsx("div",{className:"pt-4 text-right",children:l.jsx("button",{type:"submit",disabled:h||i,className:"bg-gradient-to-r from-indigo-600 to-indigo-700 text-white font-semibold py-3 px-6 rounded-lg hover:from-indigo-700 hover:to-indigo-800 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 min-w-[180px] shadow-md hover:shadow-lg transition-all",children:h?l.jsx(Fne,{className:"w-5 h-5 animate-spin"}):l.jsxs(l.Fragment,{children:[l.jsx(Bg,{className:"w-5 h-5"}),l.jsx("span",{children:d?"Regenerar Plan":"Generar con IA"})]})})}),g&&l.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:g})]})]}),d&&l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisión y Edición"}),l.jsx(rVe,{plan:d,onEditLesson:W,onUseLesson:D,onUpdatePlan:a,isLoading:h})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),i?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):l.jsx("div",{className:"space-y-4",children:r.filter(J=>J.tipo==="Unidad").length>0?r.filter(J=>J.tipo==="Unidad").map(J=>l.jsx("div",{className:`p-5 border rounded-xl transition-all ${(d==null?void 0:d.id)===J.id?"bg-indigo-50/50 border-indigo-200 dark:bg-indigo-900/20 dark:border-indigo-500/30 shadow-lg shadow-indigo-100/20 dark:shadow-indigo-900/10":"bg-white hover:bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:hover:bg-slate-700/50"}`,children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:J.nombreUnidad}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(J.fechaCreacion).toLocaleString("es-CL")]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",J.contenidos]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:()=>k(J),className:"inline-flex items-center gap-1 px-3 py-1.5 text-indigo-700 bg-indigo-50 hover:bg-indigo-100 dark:text-indigo-300 dark:bg-indigo-900/30 dark:hover:bg-indigo-900/50 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",disabled:h,children:[l.jsx(kCe,{className:"w-4 h-4"}),l.jsx("span",{children:"Editar"})]}),l.jsxs("button",{onClick:()=>P(J.id),title:"Eliminar",className:"inline-flex items-center gap-1 px-3 py-1.5 text-red-700 bg-red-50 hover:bg-red-100 dark:text-red-300 dark:bg-red-900/30 dark:hover:bg-red-900/50 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",disabled:h,children:[l.jsx(Do,{className:"w-4 h-4"}),l.jsx("span",{children:"Eliminar"})]})]})]})},J.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})})]})]}),K=()=>{const J=r.filter(te=>te.tipo==="Clase").sort((te,M)=>new Date(M.fechaCreacion).getTime()-new Date(te.fechaCreacion).getTime());return w?l.jsx(nVe,{plan:w,onBack:()=>_(null),onDelete:R,onSave:async te=>{try{await a(te.id,te),_(te)}catch(M){console.error("Error al actualizar plan de clase:",M),alert("Error al actualizar el plan de clase. Por favor, intente nuevamente.")}},isLoading:h}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-lg border border-slate-100 dark:border-slate-700/50",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx(GEe,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"}),l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Planes de Clase"})]}),i?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):l.jsx("div",{className:"space-y-4",children:J.length>0?J.map(te=>l.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:te.nombreClase}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(te.fechaCreacion).toLocaleString("es-CL")]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",te.contenidos]})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("button",{onClick:()=>_(te),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},te.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaña 'Unidad'."})})]})};return!e||!e.email&&!e.id?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),l.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(e)]})]})}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[l.jsx(jne,{className:"w-8 h-8 text-indigo-600 dark:text-indigo-400"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificación Docente"})]}),l.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-2",children:l.jsxs("nav",{className:"flex space-x-2","aria-label":"Tabs",children:[l.jsxs("button",{onClick:()=>y("unidad"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${v==="unidad"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[l.jsx(df,{className:"w-4 h-4"}),l.jsx("span",{children:"Unidad"})]}),l.jsxs("button",{onClick:()=>y("clase"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${v==="clase"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[l.jsx(z_e,{className:"w-4 h-4"}),l.jsx("span",{children:"Clase"})]}),l.jsxs("button",{onClick:()=>y("calendario"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${v==="calendario"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[l.jsx(id,{className:"w-4 h-4"}),l.jsx("span",{children:"Actividades Calendario"})]})]})}),v==="unidad"&&z(),v==="clase"&&K(),v==="calendario"&&l.jsx(aVe,{userId:t}),T&&l.jsx(tVe,{lesson:T.lessonData,onClose:()=>B(null),onSave:V,isLoading:h})]})},ZB="events",iVe=async()=>{try{const e=$t(wt(Fr,ZB),xr("date","asc"));return(await Hn(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener eventos:",e),new Error("No se pudieron cargar los eventos del calendario")}},oVe=async e=>{try{return{id:(await _n(wt(Fr,ZB),{...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear evento:",t),new Error("No se pudo crear el evento del calendario")}},lVe=async(e,t)=>{try{const r=cr(Fr,ZB,e);await du(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar evento:",r,"ID:",e),new Error("No se pudo actualizar el evento del calendario")}},cVe=async e=>{try{const t=cr(Fr,ZB,e);await is(t)}catch(t){throw console.error("Error al eliminar evento:",t,"ID:",e),new Error("No se pudo eliminar el evento del calendario")}},uVe=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],BW={[An.EVALUACION]:l.jsx(df,{className:"h-4 w-4"}),[An.ACTO]:l.jsx(l_e,{className:"h-4 w-4"}),[An.ACTIVIDAD_FOCALIZADA]:l.jsx(K1,{className:"h-4 w-4"}),[An.SALIDA_PEDAGOGICA]:l.jsx(C_e,{className:"h-4 w-4"})},dVe=e=>{switch(e.type){case An.EVALUACION:return`${e.subtype} - ${e.asignatura}`;case An.ACTO:return`Acto: ${e.ubicacion}`;case An.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case An.SALIDA_PEDAGOGICA:return`Salida: ${e.ubicacion}`;default:return"Evento"}},fVe=({isOpen:e,onClose:t,onSave:r,onDelete:n,event:a,date:s,isLoading:i})=>{const[o,c]=S.useState({});S.useEffect(()=>{c(a||{type:An.EVALUACION,subtype:cg.PRUEBA_PARCIAL,asignatura:jo[0],curso:Ac[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[a,e]);const u="w-full rounded-md border border-white/30 bg-white/10 dark:bg-white/5 text-slate-800 dark:text-slate-100 placeholder-slate-400 backdrop-blur-md shadow-sm focus:outline-none focus:ring-4 focus:ring-yellow-400/30 focus:border-blue-300 dark:border-white/10 dark:focus:border-blue-400",d=x=>{const{name:v,value:y}=x.target;c(w=>({...w,[v]:y}))},f=x=>{c(v=>{if(v.type===An.SALIDA_PEDAGOGICA){const y=v.cursos||[],w=y.includes(x)?y.filter(_=>_!==x):[...y,x];return{...v,cursos:w.sort()}}return v})},h=x=>{var y;x.preventDefault();let v;switch(o.type){case An.EVALUACION:{const w={date:s,type:An.EVALUACION,subtype:o.subtype,asignatura:o.asignatura,curso:o.curso,contenidos:o.contenidos};(o.subtype===cg.RUBRICA||o.subtype===cg.PAUTA_COTEJO)&&((y=o.enlace)!=null&&y.trim())&&(w.enlace=o.enlace.trim()),v=w;break}case An.ACTO:v={date:s,type:An.ACTO,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case An.ACTIVIDAD_FOCALIZADA:v={date:s,type:An.ACTIVIDAD_FOCALIZADA,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case An.SALIDA_PEDAGOGICA:v={date:s,type:An.SALIDA_PEDAGOGICA,responsable:o.responsable,ubicacion:o.ubicacion,cursos:o.cursos};break;default:console.error("Tipo de evento no reconocido");return}r(v)};if(!e)return null;const m=new Date(`${s}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),g=()=>{switch(o.type){case An.EVALUACION:return l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Subtipo"}),l.jsx("select",{id:"subtype",name:"subtype",value:o.subtype,onChange:d,required:!0,className:u,children:CEe.map(x=>l.jsx("option",{value:x,children:x},x))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsx("select",{id:"asignatura",name:"asignatura",value:o.asignatura,onChange:d,required:!0,className:u,children:jo.map(x=>l.jsx("option",{value:x,children:x},x))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Curso"}),l.jsx("select",{id:"curso",name:"curso",value:o.curso,onChange:d,required:!0,className:u,children:Ac.map(x=>l.jsx("option",{value:x,children:x},x))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Contenidos"}),l.jsx("textarea",{id:"contenidos",name:"contenidos",value:o.contenidos||"",onChange:d,required:!0,rows:3,className:u})]}),(o.subtype===cg.RUBRICA||o.subtype===cg.PAUTA_COTEJO)&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),l.jsx("input",{id:"enlace",name:"enlace",type:"url",value:o.enlace||"",onChange:d,placeholder:"https://...",className:u})]})]});case An.ACTO:case An.ACTIVIDAD_FOCALIZADA:return l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsables"}),l.jsx("input",{id:"responsables",name:"responsables",type:"text",value:o.responsables||"",onChange:d,required:!0,className:u})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicación"}),l.jsxs("div",{className:"relative",children:[l.jsx(kN,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),l.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Horario"}),l.jsxs("div",{className:"relative",children:[l.jsx(Em,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),l.jsx("input",{id:"horario",name:"horario",type:"text",value:o.horario||"",onChange:d,required:!0,className:`${u} pl-9`})]})]})]});case An.SALIDA_PEDAGOGICA:return l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsable"}),l.jsx("input",{id:"responsable",name:"responsable",type:"text",value:o.responsable||"",onChange:d,required:!0,className:u})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicación/Destino"}),l.jsxs("div",{className:"relative",children:[l.jsx(kN,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),l.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),l.jsxs("fieldset",{children:[l.jsx("legend",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),l.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border border-white/30 dark:border-white/10 p-2 rounded-md text-slate-700 dark:text-slate-300 bg-white/5 backdrop-blur-md",children:Ac.map(x=>l.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[l.jsx("input",{type:"checkbox",checked:(o.cursos||[]).includes(x),onChange:()=>f(x),className:"h-4 w-4 rounded text-yellow-500 focus:ring-yellow-400"}),l.jsx("span",{children:x})]},x))})]})]});default:return null}};return l.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center p-4",onClick:t,style:{background:"rgba(2, 6, 23, 0.55)"},children:l.jsx("div",{className:"relative w-full max-w-lg overflow-hidden rounded-2xl border border-white/20 bg-gradient-to-br from-blue-50/70 via-white/50 to-yellow-50/70 dark:from-slate-900/70 dark:via-slate-900/60 dark:to-slate-900/70 backdrop-blur-2xl shadow-2xl",onClick:x=>x.stopPropagation(),children:l.jsxs("form",{onSubmit:h,children:[l.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex items-start justify-between mb-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:a?"Editar Evento":"Agregar Evento"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-300/90 font-semibold",children:m})]}),l.jsx("button",{type:"button",onClick:t,className:"rounded-full p-2 hover:bg-white/20 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:l.jsx(TN,{className:"h-5 w-5"})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),l.jsx("select",{id:"type",name:"type",value:o.type,onChange:d,className:u,children:Object.values(An).map(x=>l.jsx("option",{value:x,children:x},x))})]}),g()]})]}),l.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-t border-white/20 flex justify-between items-center",children:[l.jsx("div",{children:a&&n&&l.jsxs("button",{type:"button",onClick:n,disabled:i,className:"inline-flex items-center gap-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:[l.jsx(Do,{className:"h-4 w-4"}),i?"Eliminando...":"Eliminar"]})}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("button",{type:"button",onClick:t,disabled:i,className:"inline-flex items-center gap-2 rounded-lg bg-white/20 px-4 py-2 font-semibold text-slate-800 hover:bg-white/30 backdrop-blur-md dark:bg-white/10 dark:text-slate-100 dark:hover:bg-white/20 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:[l.jsx(TN,{className:"h-4 w-4"}),"Cancelar"]}),l.jsxs("button",{type:"submit",disabled:i,className:"inline-flex items-center gap-2 rounded-lg bg-gradient-to-r from-blue-600 to-yellow-500 px-4 py-2 font-bold text-white hover:opacity-95 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-300/40",children:[l.jsx(qh,{className:"h-4 w-4"}),i?"Guardando...":"Guardar"]})]})]})]})})})},AVe=({profile:e})=>{const[t,r]=S.useState(new Date),[n,a]=S.useState([]),[s,i]=S.useState(!1),[o,c]=S.useState(null),[u,d]=S.useState(!1),[f,h]=S.useState(Object.values(An)),[m,g]=S.useState(!1),[x,v]=S.useState(null),[y,w]=S.useState(null),_=S.useCallback(async()=>{i(!0);try{const D=await iVe();a(D),c(null)}catch(D){console.error("Error al cargar eventos desde Firestore",D),c("No se pudieron cargar los eventos desde la nube.")}finally{i(!1)}},[]);S.useEffect(()=>{_()},[_]);const T=S.useMemo(()=>{const D=t.getFullYear(),k=t.getMonth(),P=new Date(D,k,1).getDay(),R=new Date(D,k+1,0).getDate(),W=[];let V=1;for(let G=0;G<6;G++){const z=[];for(let K=0;K<7;K++)G===0&&K<P||V>R?z.push(null):(z.push(new Date(D,k,V)),V++);if(W.push(z),V>R)break}return W},[t]),B=D=>{h(k=>k.includes(D)?k.filter(P=>P!==D):[...k,D])},j=()=>{f.length===Object.values(An).length?h([]):h(Object.values(An))},E=D=>{e!==Jt.ESTUDIANTE&&(v(D.toISOString().split("T")[0]),w(null),g(!0))},N=(D,k)=>{k.stopPropagation(),e!==Jt.ESTUDIANTE&&(v(D.date),w(D),g(!0))},I=async D=>{d(!0);try{y?await lVe(y.id,D):await oVe(D),await _(),g(!1)}catch(k){console.error("Error al guardar evento:",k);const P=k instanceof Error?k.message:"Error desconocido";c(`Error al guardar el evento: ${P}`)}finally{d(!1)}},L=async()=>{if(y){d(!0);try{await cVe(y.id),await _(),g(!1)}catch(D){console.error("Error al eliminar evento:",D);const k=D instanceof Error?D.message:"Error desconocido";c(`No se pudo eliminar el evento: ${k}`)}finally{d(!1)}}};return l.jsxs("div",{className:`relative overflow-hidden rounded-xl p-6 md:p-8 shadow-md space-y-6 animate-fade-in
                    bg-gradient-to-br from-blue-50 via-white to-yellow-50 dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[l.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[l.jsx("div",{className:"absolute -top-20 -left-16 h-64 w-64 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-yellow-300 to-yellow-200 dark:from-yellow-500/15 dark:to-yellow-400/10"}),l.jsx("div",{className:"absolute bottom-0 right-0 h-72 w-72 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-sky-300 to-blue-300 dark:from-sky-500/15 dark:to-blue-500/15"})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 drop-shadow-sm",children:"Calendario Académico"}),l.jsx("div",{className:"text-slate-600 dark:text-slate-300 text-sm",children:s&&l.jsx("span",{className:"px-2 py-1 rounded bg-white/30 dark:bg-white/10 backdrop-blur-md",children:"Cargando…"})})]}),o&&l.jsx("div",{className:"text-red-700 dark:text-red-400 bg-red-100/70 dark:bg-red-900/30 border border-red-300/50 dark:border-red-800/40 p-3 rounded-lg",children:o}),!s&&n.length===0&&l.jsxs("div",{className:"flex items-start gap-3 rounded-xl border border-yellow-400/40 bg-yellow-50/70 p-4 text-yellow-900 dark:bg-yellow-900/20 dark:text-yellow-300 backdrop-blur-md",children:[l.jsx(GCe,{className:"h-5 w-5 mt-0.5"}),l.jsx("p",{children:"No hay eventos registrados en la nube."})]}),l.jsxs("div",{className:"mb-2 rounded-xl border border-white/30 bg-white/30 dark:bg-white/10 backdrop-blur-xl p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-slate-800 dark:text-slate-200 mb-2",children:[l.jsx(PL,{className:"h-4 w-4"}),l.jsx("h2",{className:"text-lg font-semibold",children:"Filtrar por tipo de evento:"})]}),l.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[l.jsx("button",{onClick:j,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-gradient-to-r from-blue-600 to-yellow-500 text-white hover:opacity-95 transition-colors",children:f.length===Object.values(An).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(An).map(D=>l.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2
                ${f.includes(D)?`shadow-sm ${x1[D].color}`:"bg-white/40 text-slate-700 hover:bg-white/60 dark:bg-white/10 dark:text-slate-300 dark:hover:bg-white/20"}`,children:[l.jsx("input",{type:"checkbox",checked:f.includes(D),onChange:()=>B(D),className:"hidden"}),l.jsx("span",{className:"shrink-0",children:BW[D]}),l.jsx("span",{children:x1[D].label})]},D))]})]}),l.jsxs("div",{className:"rounded-xl overflow-hidden border border-white/30 dark:border-white/10 backdrop-blur-xl bg-white/30 dark:bg-white/5",children:[l.jsxs("header",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-b border-white/20",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()-1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:l.jsx(M2,{className:"h-5 w-5"})}),l.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()+1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:l.jsx(OL,{className:"h-5 w-5"})})]}),l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 capitalize",children:t.toLocaleString("es-CL",{month:"long",year:"numeric"})}),l.jsx("button",{onClick:()=>r(new Date),className:"ml-4 bg-gradient-to-r from-blue-600 to-yellow-500 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:opacity-95",children:"Hoy"})]}),l.jsx("div",{className:"grid grid-cols-7 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:uVe.map(D=>l.jsx("div",{className:`text-center font-semibold text-slate-600 dark:text-slate-300 text-sm py-3
                         bg-white/40 dark:bg-white/10
                         border-b border-r border-slate-200/80 dark:border-slate-700/70`,children:D},D))}),l.jsx("div",{className:"grid grid-cols-7 grid-rows-6 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:T.flat().map((D,k)=>{const P=D&&D.toDateString()===new Date().toDateString(),R=D==null?void 0:D.toISOString().split("T")[0],W=R?n.filter(V=>V.date===R&&f.includes(V.type)):[];return l.jsx("div",{onClick:()=>D&&E(D),className:`border-b border-r border-slate-200/80 dark:border-slate-700/70
                            p-2 h-36 flex flex-col overflow-hidden relative group 
                            ${D?e!==Jt.ESTUDIANTE?"cursor-pointer hover:bg-white/40 dark:hover:bg-white/10":"":"bg-white/30 dark:bg-white/5"}`,children:D&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:`self-end text-sm font-semibold ${P?"bg-gradient-to-r from-blue-600 to-yellow-500 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-700 dark:text-slate-300"}`,children:D.getDate()}),l.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:W.map(V=>l.jsxs("div",{onClick:G=>N(V,G),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${x1[V.type].color}`,children:[l.jsx("span",{className:"shrink-0",children:BW[V.type]}),l.jsx("span",{className:"truncate",children:dVe(V)})]},V.id))}),e!==Jt.ESTUDIANTE&&l.jsx("button",{className:`absolute bottom-1 right-1 rounded-full h-7 w-7 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity 
                                   bg-gradient-to-r from-blue-600 to-yellow-500 text-white shadow`,"aria-label":"Agregar evento",children:l.jsx(od,{className:"h-4 w-4"})})]})},k)})})]}),m&&l.jsx(fVe,{isOpen:m,onClose:()=>g(!1),onSave:I,onDelete:L,event:y,date:x,isLoading:u})]})},eT="anuncios",hVe=async()=>{try{const e=$t(wt(Fr,eT),xr("fechaPublicacion","desc"));return(await Hn(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener anuncios:",e),new Error("No se pudieron cargar los anuncios")}},mVe=async e=>{try{return{id:(await _n(wt(Fr,eT),{...e,fechaPublicacion:e.fechaPublicacion||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear anuncio:",t),new Error("No se pudo crear el anuncio")}},pVe=async(e,t)=>{try{const r=cr(Fr,eT,e);await du(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar anuncio:",r,"ID:",e),new Error("No se pudo actualizar el anuncio")}},gVe=async e=>{try{const t=cr(Fr,eT,e);await is(t)}catch(t){throw console.error("Error al eliminar anuncio:",t,"ID:",e),new Error("No se pudo eliminar el anuncio")}},TW=[{bg:"bg-yellow-200 dark:bg-yellow-800/50",rotate:"transform -rotate-2"},{bg:"bg-lime-200 dark:bg-lime-800/50",rotate:"transform rotate-1"},{bg:"bg-sky-200 dark:bg-sky-800/50",rotate:"transform rotate-2"},{bg:"bg-red-200 dark:bg-red-800/50",rotate:"transform -rotate-1"},{bg:"bg-violet-200 dark:bg-violet-800/50",rotate:"transform rotate-1"}],xVe=({currentUser:e})=>{const[t,r]=S.useState([]),[n,a]=S.useState(!1),[s,i]=S.useState(null),[o,c]=S.useState({titulo:"",mensaje:"",adjunto:""}),[u,d]=S.useState({tipo:"Todos",cursos:[]}),f=S.useCallback(async()=>{a(!0);try{const E=await hVe();r(E),i(null)}catch(E){console.error("Error al cargar anuncios desde Firestore",E),i("No se pudieron cargar los anuncios desde la nube.")}finally{a(!1)}},[]);S.useEffect(()=>{f()},[f]);const h=E=>{const{name:N,value:I}=E.target;c(L=>({...L,[N]:I}))},m=E=>{d({tipo:E,cursos:E==="Cursos"?[]:void 0})},g=E=>{d(N=>{var L;if(N.tipo!=="Cursos")return N;const I=(L=N.cursos)!=null&&L.includes(E)?N.cursos.filter(D=>D!==E):[...N.cursos||[],E];return{...N,cursos:I}})},x=async E=>{if(E.preventDefault(),!o.titulo||!o.mensaje){alert("Título y mensaje son obligatorios.");return}if(u.tipo==="Cursos"&&(!u.cursos||u.cursos.length===0)){alert('Debe seleccionar al menos un curso para el destinatario "Cursos".');return}try{const N={fechaPublicacion:new Date().toISOString(),destacado:!1,autor:e.nombreCompleto,profileCreador:e.profile,destinatarios:u,...o};await mVe(N),await f(),c({titulo:"",mensaje:"",adjunto:""}),d({tipo:"Todos",cursos:[]})}catch(N){console.error("Error al crear anuncio:",N),i("Error al publicar el anuncio en la nube.")}},v=async E=>{if(window.confirm("¿Está seguro de que desea eliminar este anuncio?"))try{await gVe(E),await f()}catch(N){console.error("Error al eliminar anuncio:",N),i("No se pudo eliminar el anuncio en la nube.")}},y=async E=>{try{const N=t.find(I=>I.id===E);N&&(await pVe(E,{destacado:!N.destacado}),await f())}catch(N){console.error("Error al actualizar anuncio:",N),i("No se pudo actualizar el estado del anuncio en la nube.")}},w=S.useMemo(()=>[...t].sort((E,N)=>E.destacado&&!N.destacado?-1:!E.destacado&&N.destacado?1:new Date(N.fechaPublicacion).getTime()-new Date(E.fechaPublicacion).getTime()),[t]),_=S.useMemo(()=>{const E=e.profile,N=e.curso;return w.filter(I=>{if(E===Jt.SUBDIRECCION)return!0;if(!I.destinatarios)return E!==Jt.ESTUDIANTE;const{tipo:L,cursos:D}=I.destinatarios;return L==="Todos"||L==="Profesores"&&E===Jt.PROFESORADO||L==="Coordinación TP"&&E===Jt.COORDINACION_TP?!0:L==="Cursos"?E===Jt.ESTUDIANTE?D==null?void 0:D.includes(N||""):!0:!1})},[w,e]),T=E=>e.profile===Jt.ESTUDIANTE?!1:e.profile===Jt.SUBDIRECCION||e.profile===E.profileCreador,B=()=>e.profile===Jt.SUBDIRECCION||e.profile===Jt.PROFESORADO,j="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Muro de Anuncios"}),n&&l.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anuncios desde la nube..."}),s&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),e.profile!==Jt.ESTUDIANTE?l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Publique un nuevo anuncio para toda la comunidad escolar."}),l.jsxs("form",{onSubmit:x,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Título"}),l.jsx("input",{type:"text",name:"titulo",value:o.titulo,onChange:h,required:!0,className:j})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Mensaje"}),l.jsx("textarea",{name:"mensaje",value:o.mensaje,onChange:h,required:!0,rows:4,className:j})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Destinatarios"}),l.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:["Todos","Cursos","Profesores","Coordinación TP"].map(E=>l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"destinatarioTipo",value:E,checked:u.tipo===E,onChange:()=>m(E),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-slate-300"}),l.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:E.replace("Coordinación TP","Coord. TP")})]},E))})]}),u.tipo==="Cursos"&&l.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Cursos"}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-48 overflow-y-auto",children:Ac.map(E=>{var N;return l.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:(N=u.cursos)==null?void 0:N.includes(E),onChange:()=>g(E),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300 bg-slate-100"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:E})]},E)})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"adjunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace adjunto (Opcional)"}),l.jsx("input",{type:"url",name:"adjunto",value:o.adjunto,onChange:h,placeholder:"https://ejemplo.com/documento.pdf",className:j})]}),l.jsx("div",{className:"pt-2 text-right",children:l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Publicar Anuncio"})})]})]}):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Anuncios de la comunidad escolar. Este módulo es de solo lectura."})]}),!n&&_.length===0&&l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay anuncios para mostrar en la nube."}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 py-4",children:!n&&_.length>0&&_.map((E,N)=>{const I=TW[N%TW.length];return l.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${I.bg} ${I.rotate}`,children:[E.destacado&&l.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:l.jsx("span",{className:"text-5xl",role:"img","aria-label":"Anuncio destacado",children:"📌"})}),l.jsx("h2",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-4 break-words",children:E.titulo}),l.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[100px]",children:E.mensaje}),E.adjunto&&l.jsx("div",{className:"font-sans text-sm mb-4",children:l.jsxs("a",{href:E.adjunto,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-semibold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Ver Adjunto"]})}),l.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold",children:E.autor}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(E.fechaPublicacion).toLocaleString("es-CL")})]}),l.jsxs("div",{className:"flex items-center",children:[B()&&l.jsx("button",{onClick:()=>y(E.id),title:E.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:l.jsx("span",{className:`text-xl transition-opacity ${E.destacado?"opacity-100":"opacity-30"}`,children:"📌"})}),T(E)&&l.jsx("button",{onClick:()=>v(E.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},E.id)})})]})},mce="api_logs",vVe=async(e,t)=>{try{const r={module:e,userId:t.id,userEmail:t.email,userName:t.nombreCompleto,timestamp:ir.fromDate(new Date)};await _n(wt(ht,mce),r)}catch(r){console.error("Error al registrar la llamada a la API en Firestore:",r)}},bVe=e=>{const t=$t(wt(ht,mce),xr("timestamp","desc"));return pr(t,n=>{const a=n.docs.map(s=>{var o,c;const i=s.data();return{id:s.id,...i,timestamp:((c=(o=i.timestamp)==null?void 0:o.toDate)==null?void 0:c.call(o).toISOString())||i.timestamp}});e(a)},n=>{console.error("Error al suscribirse a los logs de API:",n),e([])})},cb=(e,t)=>{if(!t||!t.id||!t.email){console.warn("No se pudo registrar la llamada a la API: el objeto de usuario es inválido o no está en sesión.");return}vVe(e,t)},mU="actas_de_reunion",yVe=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion}},wVe=e=>{const t=$t(wt(ht,mU),xr("fechaCreacion","desc"));return pr(t,n=>{const a=n.docs.map(s=>yVe(s));e(a)},n=>{console.error("Error al suscribirse a las actas:",n),e([])})},EVe=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:ir.fromDate(new Date(e.fechaCreacion))};return(await _n(wt(ht,mU),r)).id}catch(r){throw console.error("Error al crear el acta:",r),new Error("No se pudo crear el acta.")}},CVe=async e=>{try{const t=cr(ht,mU,e);await is(t)}catch(t){throw console.error("Error al eliminar el acta:",t),new Error("No se pudo eliminar el acta.")}},pce=window.SpeechRecognition||window.webkitSpeechRecognition,jW=!!pce,_Ve=({isListening:e})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),SVe=({currentUser:e})=>{const[t,r]=S.useState([]),[n,a]=S.useState(null),[s,i]=S.useState({tipoReunion:k3[0],asistentes:"",textoReunion:""}),[o,c]=S.useState(!1),[u,d]=S.useState(!1),[f,h]=S.useState(!0),[m,g]=S.useState(null),x=S.useRef(null);S.useEffect(()=>{h(!0);const E=wVe(N=>{r(N),!n&&N.length>0&&a(N[0]),h(!1)});return()=>E()},[n]);const v=E=>{const{name:N,value:I}=E.target;i(L=>({...L,[N]:I}))},y=S.useCallback(()=>{var E;if(!jW){g("El reconocimiento de voz no es compatible con este navegador.");return}o?(E=x.current)==null||E.stop():(x.current=new pce,x.current.lang="es-CL",x.current.continuous=!0,x.current.interimResults=!0,x.current.onresult=N=>{let I="";for(let L=N.resultIndex;L<N.results.length;++L)N.results[L].isFinal&&(I+=N.results[L][0].transcript+". ");i(L=>({...L,textoReunion:L.textoReunion+I}))},x.current.onstart=()=>c(!0),x.current.onend=()=>c(!1),x.current.onerror=N=>{console.error("Speech recognition error",N.error),g(`Error de reconocimiento: ${N.error}`),c(!1)},x.current.start())},[o]),w=async E=>{E.preventDefault();const{tipoReunion:N,asistentes:I,textoReunion:L}=s;if(!N||!I.trim()||!L.trim()){g("Todos los campos son obligatorios.");return}d(!0),g(null);try{cb("Generador de Actas");const D="",P=new globalThis.GoogleGenerativeAI(D).getGenerativeModel({model:"gemini-pro"}),R=`
                Analiza el siguiente texto de un acta de reunión y extrae la información clave.
                El texto es una transcripción de lo hablado.
                - Identifica los temas principales discutidos.
                - Extrae un resumen de los acuerdos o decisiones específicas tomadas.
                - Lista cualquier plazo o fecha límite mencionada.
                - Identifica los nombres de las personas a las que se les asignaron responsabilidades o tareas.
                
                Texto del acta:
                "${L}"
                
                Asistentes a la reunión para referencia de nombres: ${I}
            `,z=(await(await P.generateContent(R)).response).text().replace(/^```json\s*|```\s*$/g,""),K=JSON.parse(z),J={fechaCreacion:new Date().toISOString(),...s,...K},te=await EVe(J,e);i({tipoReunion:k3[0],asistentes:"",textoReunion:""})}catch(D){console.error("Error al analizar acta con IA:",D),g("Ocurrió un error al procesar el acta con la IA. Por favor, revise el texto e inténtelo de nuevo.")}finally{d(!1)}},_=async E=>{if(window.confirm("¿Está seguro de que desea eliminar esta acta?"))try{await CVe(E),(n==null?void 0:n.id)===E&&a(t.length>1?t[1]:null)}catch(N){console.error("Error deleting acta:",N),alert("No se pudo eliminar el acta.")}},T=E=>{a(E)},B=E=>E.temas||E.acuerdos||E.plazos||E.responsables?l.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Análisis con IA"}),E.temas&&E.temas.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Temas Tratados"}),l.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.temas.map((I,L)=>l.jsx("li",{children:I},L))})]}),E.acuerdos&&E.acuerdos.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Acuerdos"}),l.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.acuerdos.map((I,L)=>l.jsx("li",{children:I},L))})]}),E.plazos&&E.plazos.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Plazos"}),l.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.plazos.map((I,L)=>l.jsx("li",{children:I},L))})]}),E.responsables&&E.responsables.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Responsables"}),l.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.responsables.map((I,L)=>l.jsx("li",{children:I},L))})]})]}):null,j="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return f?l.jsx("div",{className:"text-center py-10",children:"Cargando actas..."}):l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in",children:[l.jsxs("div",{className:"md:col-span-1 space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generador de Actas"}),l.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:l.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),l.jsx("div",{className:"ml-3",children:l.jsxs("p",{className:"text-sm",children:["Recuerda que las actas debes subirlas por intranet en ",l.jsx("strong",{className:"font-semibold",children:"www.industrialderecoleta.cl"}),". Esta es sólo una herramienta para agilizar redacción."]})})]})}),l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"tipoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Reunión"}),l.jsx("select",{name:"tipoReunion",value:s.tipoReunion,onChange:v,required:!0,className:j,children:k3.map(E=>l.jsx("option",{value:E,children:E},E))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asistentes",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asistentes"}),l.jsx("textarea",{name:"asistentes",value:s.asistentes,onChange:v,required:!0,rows:3,placeholder:"Nombres, separados por comas...",className:j})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"textoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Texto de la Reunión"}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{name:"textoReunion",value:s.textoReunion,onChange:v,required:!0,rows:6,placeholder:"Escriba o use el micrófono para dictar...",className:j}),jW&&l.jsx("button",{type:"button",onClick:y,title:o?"Detener grabación":"Iniciar grabación",className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${o?"bg-red-500 text-white animate-pulse":"bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500"}`,children:l.jsx(_Ve,{isListening:o})})]})]}),m&&l.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:m}),l.jsx("div",{className:"pt-2 text-right",children:l.jsx("button",{type:"submit",disabled:u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 flex items-center justify-center min-w-[120px] disabled:bg-slate-400 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:u?l.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Crear Acta"})})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Actas"}),l.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:t.length>0?t.map(E=>l.jsxs("button",{onClick:()=>T(E),className:`w-full text-left p-3 rounded-lg border transition-colors ${(n==null?void 0:n.id)===E.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 hover:bg-slate-100 border-transparent dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:E.tipoReunion}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(E.fechaCreacion).toLocaleDateString("es-CL")})]},E.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay actas guardadas."})})]})]}),l.jsx("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:n?l.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsx("h1",{className:"text-3xl font-bold mt-0",children:`Acta de Reunión: ${n.tipoReunion}`}),l.jsx("button",{onClick:()=>_(n.id),title:"Eliminar Acta",className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 -mt-2 -mr-2",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[l.jsx("strong",{children:"Fecha:"})," ",new Date(n.fechaCreacion).toLocaleString("es-CL")]}),l.jsx("h2",{children:"Asistentes"}),l.jsx("ul",{className:"list-disc pl-5",children:String(n.asistentes||"").split(",").map((E,N)=>E.trim()&&l.jsx("li",{children:E.trim()},N))}),B(n),l.jsx("h2",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:"Transcripción Original"}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-md whitespace-pre-wrap",children:l.jsx("p",{children:n.textoReunion})})]}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[l.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📄"}),l.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:"Seleccione un Acta"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Elija un acta del historial para ver sus detalles aquí, o cree una nueva usando el formulario."})]})})]})},NVe="modulepreload",kVe=function(e){return"/"+e},IW={},ub=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let i=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=i(r.map(u=>{if(u=kVe(u),u in IW)return;IW[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":NVe,d||(h.as="script"),h.crossOrigin="",h.href=u,c&&h.setAttribute("nonce",c),document.head.appendChild(h),d)return new Promise((m,g)=>{h.addEventListener("load",m),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return a.then(i=>{for(const o of i||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})};function ya(e){"@babel/helpers - typeof";return ya=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ya(e)}var fl=Uint8Array,eu=Uint16Array,pU=Int32Array,tT=new fl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),rT=new fl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),KD=new fl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),gce=function(e,t){for(var r=new eu(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new pU(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},xce=gce(tT,2),vce=xce.b,qD=xce.r;vce[28]=258,qD[258]=28;var bce=gce(rT,0),BVe=bce.b,FW=bce.r,WD=new eu(32768);for(var Ga=0;Ga<32768;++Ga){var am=(Ga&43690)>>1|(Ga&21845)<<1;am=(am&52428)>>2|(am&13107)<<2,am=(am&61680)>>4|(am&3855)<<4,WD[Ga]=((am&65280)>>8|(am&255)<<8)>>1}var NA=function(e,t,r){for(var n=e.length,a=0,s=new eu(t);a<n;++a)e[a]&&++s[e[a]-1];var i=new eu(t);for(a=1;a<t;++a)i[a]=i[a-1]+s[a-1]<<1;var o;if(r){o=new eu(1<<t);var c=15-t;for(a=0;a<n;++a)if(e[a])for(var u=a<<4|e[a],d=t-e[a],f=i[e[a]-1]++<<d,h=f|(1<<d)-1;f<=h;++f)o[WD[f]>>c]=u}else for(o=new eu(n),a=0;a<n;++a)e[a]&&(o[a]=WD[i[e[a]-1]++]>>15-e[a]);return o},ap=new fl(288);for(var Ga=0;Ga<144;++Ga)ap[Ga]=8;for(var Ga=144;Ga<256;++Ga)ap[Ga]=9;for(var Ga=256;Ga<280;++Ga)ap[Ga]=7;for(var Ga=280;Ga<288;++Ga)ap[Ga]=8;var iE=new fl(32);for(var Ga=0;Ga<32;++Ga)iE[Ga]=5;var TVe=NA(ap,9,0),jVe=NA(ap,9,1),IVe=NA(iE,5,0),FVe=NA(iE,5,1),I6=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Md=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},F6=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},gU=function(e){return(e+7)/8|0},yce=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new fl(e.subarray(t,r))},OVe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Vd=function(e,t,r){var n=new Error(t||OVe[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,Vd),!r)throw n;return n},DVe=function(e,t,r,n){var a=e.length,s=0;if(!a||t.f&&!t.l)return r||new fl(0);var i=!r,o=i||t.i!=2,c=t.i;i&&(r=new fl(a*3));var u=function(Fe){var ne=r.length;if(Fe>ne){var _e=new fl(Math.max(ne*2,Fe));_e.set(r),r=_e}},d=t.f||0,f=t.p||0,h=t.b||0,m=t.l,g=t.d,x=t.m,v=t.n,y=a*8;do{if(!m){d=Md(e,f,1);var w=Md(e,f+1,3);if(f+=3,w)if(w==1)m=jVe,g=FVe,x=9,v=5;else if(w==2){var j=Md(e,f,31)+257,E=Md(e,f+10,15)+4,N=j+Md(e,f+5,31)+1;f+=14;for(var I=new fl(N),L=new fl(19),D=0;D<E;++D)L[KD[D]]=Md(e,f+D*3,7);f+=E*3;for(var k=I6(L),P=(1<<k)-1,R=NA(L,k,1),D=0;D<N;){var W=R[Md(e,f,P)];f+=W&15;var _=W>>4;if(_<16)I[D++]=_;else{var V=0,G=0;for(_==16?(G=3+Md(e,f,3),f+=2,V=I[D-1]):_==17?(G=3+Md(e,f,7),f+=3):_==18&&(G=11+Md(e,f,127),f+=7);G--;)I[D++]=V}}var z=I.subarray(0,j),K=I.subarray(j);x=I6(z),v=I6(K),m=NA(z,x,1),g=NA(K,v,1)}else Vd(1);else{var _=gU(f)+4,T=e[_-4]|e[_-3]<<8,B=_+T;if(B>a){c&&Vd(0);break}o&&u(h+T),r.set(e.subarray(_,B),h),t.b=h+=T,t.p=f=B*8,t.f=d;continue}if(f>y){c&&Vd(0);break}}o&&u(h+131072);for(var J=(1<<x)-1,te=(1<<v)-1,M=f;;M=f){var V=m[F6(e,f)&J],H=V>>4;if(f+=V&15,f>y){c&&Vd(0);break}if(V||Vd(2),H<256)r[h++]=H;else if(H==256){M=f,m=null;break}else{var Y=H-254;if(H>264){var D=H-257,Z=tT[D];Y=Md(e,f,(1<<Z)-1)+vce[D],f+=Z}var ae=g[F6(e,f)&te],le=ae>>4;ae||Vd(3),f+=ae&15;var K=BVe[le];if(le>3){var Z=rT[le];K+=F6(e,f)&(1<<Z)-1,f+=Z}if(f>y){c&&Vd(0);break}o&&u(h+131072);var ie=h+Y;if(h<K){var ce=s-K,Ae=Math.min(K,ie);for(ce+h<0&&Vd(3);h<Ae;++h)r[h]=n[ce+h]}for(;h<ie;++h)r[h]=r[h-K]}}t.l=m,t.p=M,t.b=h,t.f=d,m&&(d=1,t.m=x,t.d=g,t.n=v)}while(!d);return h!=r.length&&i?yce(r,0,h):r.subarray(0,h)},mh=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},ow=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},O6=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,s=r.slice();if(!a)return{t:Ece,l:0};if(a==1){var i=new fl(r[0].s+1);return i[r[0].s]=1,{t:i,l:1}}r.sort(function(B,j){return B.f-j.f}),r.push({s:-1,f:25001});var o=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:o.f+c.f,l:o,r:c};d!=a-1;)o=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:o.f+c.f,l:o,r:c};for(var h=s[0].s,n=1;n<a;++n)s[n].s>h&&(h=s[n].s);var m=new eu(h+1),g=XD(r[d-1],m,0);if(g>t){var n=0,x=0,v=g-t,y=1<<v;for(s.sort(function(j,E){return m[E.s]-m[j.s]||j.f-E.f});n<a;++n){var w=s[n].s;if(m[w]>t)x+=y-(1<<g-m[w]),m[w]=t;else break}for(x>>=v;x>0;){var _=s[n].s;m[_]<t?x-=1<<t-m[_]++-1:++n}for(;n>=0&&x;--n){var T=s[n].s;m[T]==t&&(--m[T],++x)}g=t}return{t:new fl(m),l:g}},XD=function(e,t,r){return e.s==-1?Math.max(XD(e.l,t,r+1),XD(e.r,t,r+1)):t[e.s]=r},OW=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new eu(++t),n=0,a=e[0],s=1,i=function(c){r[n++]=c},o=1;o<=t;++o)if(e[o]==a&&o!=t)++s;else{if(!a&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(a),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(a);s=1,a=e[o]}return{c:r.subarray(0,n),n:t}},lw=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},wce=function(e,t,r){var n=r.length,a=gU(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var s=0;s<n;++s)e[a+s+4]=r[s];return(a+4+n)*8},DW=function(e,t,r,n,a,s,i,o,c,u,d){mh(t,d++,r),++a[256];for(var f=O6(a,15),h=f.t,m=f.l,g=O6(s,15),x=g.t,v=g.l,y=OW(h),w=y.c,_=y.n,T=OW(x),B=T.c,j=T.n,E=new eu(19),N=0;N<w.length;++N)++E[w[N]&31];for(var N=0;N<B.length;++N)++E[B[N]&31];for(var I=O6(E,7),L=I.t,D=I.l,k=19;k>4&&!L[KD[k-1]];--k);var P=u+5<<3,R=lw(a,ap)+lw(s,iE)+i,W=lw(a,h)+lw(s,x)+i+14+3*k+lw(E,L)+2*E[16]+3*E[17]+7*E[18];if(c>=0&&P<=R&&P<=W)return wce(t,d,e.subarray(c,c+u));var V,G,z,K;if(mh(t,d,1+(W<R)),d+=2,W<R){V=NA(h,m,0),G=h,z=NA(x,v,0),K=x;var J=NA(L,D,0);mh(t,d,_-257),mh(t,d+5,j-1),mh(t,d+10,k-4),d+=14;for(var N=0;N<k;++N)mh(t,d+3*N,L[KD[N]]);d+=3*k;for(var te=[w,B],M=0;M<2;++M)for(var H=te[M],N=0;N<H.length;++N){var Y=H[N]&31;mh(t,d,J[Y]),d+=L[Y],Y>15&&(mh(t,d,H[N]>>5&127),d+=H[N]>>12)}}else V=TVe,G=ap,z=IVe,K=iE;for(var N=0;N<o;++N){var Z=n[N];if(Z>255){var Y=Z>>18&31;ow(t,d,V[Y+257]),d+=G[Y+257],Y>7&&(mh(t,d,Z>>23&31),d+=tT[Y]);var ae=Z&31;ow(t,d,z[ae]),d+=K[ae],ae>3&&(ow(t,d,Z>>5&8191),d+=rT[ae])}else ow(t,d,V[Z]),d+=G[Z]}return ow(t,d,V[256]),d+G[256]},PVe=new pU([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ece=new fl(0),RVe=function(e,t,r,n,a,s){var i=s.z||e.length,o=new fl(n+i+5*(1+Math.ceil(i/7e3))+a),c=o.subarray(n,o.length-a),u=s.l,d=(s.r||0)&7;if(t){d&&(c[0]=s.r>>3);for(var f=PVe[t-1],h=f>>13,m=f&8191,g=(1<<r)-1,x=s.p||new eu(32768),v=s.h||new eu(g+1),y=Math.ceil(r/3),w=2*y,_=function(Ie){return(e[Ie]^e[Ie+1]<<y^e[Ie+2]<<w)&g},T=new pU(25e3),B=new eu(288),j=new eu(32),E=0,N=0,I=s.i||0,L=0,D=s.w||0,k=0;I+2<i;++I){var P=_(I),R=I&32767,W=v[P];if(x[R]=W,v[P]=R,D<=I){var V=i-I;if((E>7e3||L>24576)&&(V>423||!u)){d=DW(e,c,0,T,B,j,N,L,k,I-k,d),L=E=N=0,k=I;for(var G=0;G<286;++G)B[G]=0;for(var G=0;G<30;++G)j[G]=0}var z=2,K=0,J=m,te=R-W&32767;if(V>2&&P==_(I-te))for(var M=Math.min(h,V)-1,H=Math.min(32767,I),Y=Math.min(258,V);te<=H&&--J&&R!=W;){if(e[I+z]==e[I+z-te]){for(var Z=0;Z<Y&&e[I+Z]==e[I+Z-te];++Z);if(Z>z){if(z=Z,K=te,Z>M)break;for(var ae=Math.min(te,Z-2),le=0,G=0;G<ae;++G){var ie=I-te+G&32767,ce=x[ie],Ae=ie-ce&32767;Ae>le&&(le=Ae,W=ie)}}}R=W,W=x[R],te+=R-W&32767}if(K){T[L++]=268435456|qD[z]<<18|FW[K];var Fe=qD[z]&31,ne=FW[K]&31;N+=tT[Fe]+rT[ne],++B[257+Fe],++j[ne],D=I+z,++E}else T[L++]=e[I],++B[e[I]]}}for(I=Math.max(I,D);I<i;++I)T[L++]=e[I],++B[e[I]];d=DW(e,c,u,T,B,j,N,L,k,I-k,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=v,s.p=x,s.i=I,s.w=D)}else{for(var I=s.w||0;I<i+u;I+=65535){var _e=I+65535;_e>=i&&(c[d/8|0]=u,_e=i),d=wce(c,d+1,e.subarray(I,_e))}s.i=i}return yce(o,0,n+gU(d)+a)},Cce=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,s=r.length|0,i=0;i!=s;){for(var o=Math.min(i+2655,s);i<o;++i)a+=n+=r[i];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},LVe=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),i=new fl(s.length+e.length);i.set(s),i.set(e,s.length),e=i,a.w=s.length}return RVe(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},_ce=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},MVe=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=Cce();a.p(t.dictionary),_ce(e,2,a.d())}},UVe=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Vd(6,"invalid zlib data"),(e[1]>>5&1)==1&&Vd(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function YD(e,t){t||(t={});var r=Cce();r.p(e);var n=LVe(e,t,t.dictionary?6:2,4);return MVe(n,t),_ce(n,n.length-4,r.d()),n}function QVe(e,t){return DVe(e.subarray(UVe(e),-4),{i:2},t,t)}var HVe=typeof TextDecoder<"u"&&new TextDecoder,VVe=0;try{HVe.decode(Ece,{stream:!0}),VVe=1}catch{}var Vr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function D6(){Vr.console&&typeof Vr.console.log=="function"&&Vr.console.log.apply(Vr.console,arguments)}var ja={log:D6,warn:function(e){Vr.console&&(typeof Vr.console.warn=="function"?Vr.console.warn.apply(Vr.console,arguments):D6.call(null,arguments))},error:function(e){Vr.console&&(typeof Vr.console.error=="function"?Vr.console.error.apply(Vr.console,arguments):D6(e))}};function P6(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){og(n.response,t,r)},n.onerror=function(){ja.error("could not download file")},n.send()}function PW(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function d5(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var d2,JD,og=Vr.saveAs||((typeof window>"u"?"undefined":ya(window))!=="object"||window!==Vr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Vr.URL||Vr.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?PW(a.href)?P6(e,t,r):d5(a,a.target="_blank"):d5(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){d5(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(PW(e))P6(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){d5(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:ya(s)!=="object"&&(ja.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return P6(e,t,r);var a=e.type==="application/octet-stream",s=/constructor/i.test(Vr.HTMLElement)||Vr.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||a&&s)&&(typeof FileReader>"u"?"undefined":ya(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=i?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},o.readAsDataURL(e)}else{var c=Vr.URL||Vr.webkitURL,u=c.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Sce(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,i=a.exec(e);i&&(t=s(i),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+o+c+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function R6(e,t){var r=e[0],n=e[1],a=e[2],s=e[3];r=Wo(r,n,a,s,t[0],7,-680876936),s=Wo(s,r,n,a,t[1],12,-389564586),a=Wo(a,s,r,n,t[2],17,606105819),n=Wo(n,a,s,r,t[3],22,-1044525330),r=Wo(r,n,a,s,t[4],7,-176418897),s=Wo(s,r,n,a,t[5],12,1200080426),a=Wo(a,s,r,n,t[6],17,-1473231341),n=Wo(n,a,s,r,t[7],22,-45705983),r=Wo(r,n,a,s,t[8],7,1770035416),s=Wo(s,r,n,a,t[9],12,-1958414417),a=Wo(a,s,r,n,t[10],17,-42063),n=Wo(n,a,s,r,t[11],22,-1990404162),r=Wo(r,n,a,s,t[12],7,1804603682),s=Wo(s,r,n,a,t[13],12,-40341101),a=Wo(a,s,r,n,t[14],17,-1502002290),r=Xo(r,n=Wo(n,a,s,r,t[15],22,1236535329),a,s,t[1],5,-165796510),s=Xo(s,r,n,a,t[6],9,-1069501632),a=Xo(a,s,r,n,t[11],14,643717713),n=Xo(n,a,s,r,t[0],20,-373897302),r=Xo(r,n,a,s,t[5],5,-701558691),s=Xo(s,r,n,a,t[10],9,38016083),a=Xo(a,s,r,n,t[15],14,-660478335),n=Xo(n,a,s,r,t[4],20,-405537848),r=Xo(r,n,a,s,t[9],5,568446438),s=Xo(s,r,n,a,t[14],9,-1019803690),a=Xo(a,s,r,n,t[3],14,-187363961),n=Xo(n,a,s,r,t[8],20,1163531501),r=Xo(r,n,a,s,t[13],5,-1444681467),s=Xo(s,r,n,a,t[2],9,-51403784),a=Xo(a,s,r,n,t[7],14,1735328473),r=Yo(r,n=Xo(n,a,s,r,t[12],20,-1926607734),a,s,t[5],4,-378558),s=Yo(s,r,n,a,t[8],11,-2022574463),a=Yo(a,s,r,n,t[11],16,1839030562),n=Yo(n,a,s,r,t[14],23,-35309556),r=Yo(r,n,a,s,t[1],4,-1530992060),s=Yo(s,r,n,a,t[4],11,1272893353),a=Yo(a,s,r,n,t[7],16,-155497632),n=Yo(n,a,s,r,t[10],23,-1094730640),r=Yo(r,n,a,s,t[13],4,681279174),s=Yo(s,r,n,a,t[0],11,-358537222),a=Yo(a,s,r,n,t[3],16,-722521979),n=Yo(n,a,s,r,t[6],23,76029189),r=Yo(r,n,a,s,t[9],4,-640364487),s=Yo(s,r,n,a,t[12],11,-421815835),a=Yo(a,s,r,n,t[15],16,530742520),r=Jo(r,n=Yo(n,a,s,r,t[2],23,-995338651),a,s,t[0],6,-198630844),s=Jo(s,r,n,a,t[7],10,1126891415),a=Jo(a,s,r,n,t[14],15,-1416354905),n=Jo(n,a,s,r,t[5],21,-57434055),r=Jo(r,n,a,s,t[12],6,1700485571),s=Jo(s,r,n,a,t[3],10,-1894986606),a=Jo(a,s,r,n,t[10],15,-1051523),n=Jo(n,a,s,r,t[1],21,-2054922799),r=Jo(r,n,a,s,t[8],6,1873313359),s=Jo(s,r,n,a,t[15],10,-30611744),a=Jo(a,s,r,n,t[6],15,-1560198380),n=Jo(n,a,s,r,t[13],21,1309151649),r=Jo(r,n,a,s,t[4],6,-145523070),s=Jo(s,r,n,a,t[11],10,-1120210379),a=Jo(a,s,r,n,t[2],15,718787259),n=Jo(n,a,s,r,t[9],21,-343485551),e[0]=_m(r,e[0]),e[1]=_m(n,e[1]),e[2]=_m(a,e[2]),e[3]=_m(s,e[3])}function nT(e,t,r,n,a,s){return t=_m(_m(t,e),_m(n,s)),_m(t<<a|t>>>32-a,r)}function Wo(e,t,r,n,a,s,i){return nT(t&r|~t&n,e,t,a,s,i)}function Xo(e,t,r,n,a,s,i){return nT(t&n|r&~n,e,t,a,s,i)}function Yo(e,t,r,n,a,s,i){return nT(t^r^n,e,t,a,s,i)}function Jo(e,t,r,n,a,s,i){return nT(r^(t|~n),e,t,a,s,i)}function Nce(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)R6(n,zVe(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(R6(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,R6(n,a),n}function zVe(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}d2=Vr.atob.bind(Vr),JD=Vr.btoa.bind(Vr);var RW="0123456789abcdef".split("");function $Ve(e){for(var t="",r=0;r<4;r++)t+=RW[e>>8*r+4&15]+RW[e>>8*r&15];return t}function GVe(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function ZD(e){return Nce(e).map(GVe).join("")}var KVe=function(e){for(var t=0;t<e.length;t++)e[t]=$Ve(e[t]);return e.join("")}(Nce("hello"))!="5d41402abc4b2a76b9719d911017c592";function _m(e,t){if(KVe){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function eP(e,t){var r,n,a,s;if(e!==r){for(var i=(a=e,s=1+(256/e.length>>0),new Array(s+1).join(a)),o=[],c=0;c<256;c++)o[c]=c;var u=0;for(c=0;c<256;c++){var d=o[c];u=(u+d+i.charCodeAt(c))%256,o[c]=o[u],o[u]=d}r=e,n=o}else o=n;var f=t.length,h=0,m=0,g="";for(c=0;c<f;c++)m=(m+(d=o[h=(h+1)%256]))%256,o[h]=o[m],o[m]=d,i=o[(o[h]+o[m])%256],g+=String.fromCharCode(t.charCodeAt(c)^i);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var LW={print:4,modify:8,copy:16,"annot-forms":32};function qv(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(o){if(LW.perm!==void 0)throw new Error("Invalid permission: "+o);a+=LW[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(t+this.padding).substr(0,32),i=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^a)),this.encryptionKey=ZD(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=eP(this.encryptionKey,this.padding)}function Wv(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[n]}return t}function MW(e){if(ya(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var s=Math.random().toString(35);return t[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in t[r]){var i=t[r][s];try{i[0].apply(e,n)}catch(o){Vr.console&&ja.error("jsPDF PubSub Error",o.message,o)}i[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function y4(e){if(!(this instanceof y4))return new y4(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function kce(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function dg(e,t,r,n,a){if(!(this instanceof dg))return new dg(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,kce.call(this,n,a)}function s1(e,t,r,n,a){if(!(this instanceof s1))return new s1(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,kce.call(this,n,a)}function br(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],i=[],o=1,c=16,u="S",d=null;ya(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,s=e.compress||e.compressPdf||s,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),i=e.filters||(s===!0?["FlateEncode"]:i),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,h={},m={internal:{},__private__:{}};m.__private__.PubSub=MW;var g="1.3",x=m.__private__.getPdfVersion=function(){return g};m.__private__.setPdfVersion=function(X){g=X};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return v};var y=m.__private__.getPageFormat=function(X){return v[X]};a=a||"a4";var w={COMPAT:"compat",ADVANCED:"advanced"},_=w.COMPAT;function T(){this.saveGraphicsState(),me(new bt(yt,0,0,-yt,0,Ki()*yt).toString()+" cm"),this.setFontSize(this.getFontSize()/yt),u="n",_=w.ADVANCED}function B(){this.restoreGraphicsState(),u="S",_=w.COMPAT}var j=m.__private__.combineFontStyleAndFontWeight=function(X,fe){if(X=="bold"&&fe=="normal"||X=="bold"&&fe==400||X=="normal"&&fe=="italic"||X=="bold"&&fe=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return fe&&(X=fe==400||fe==="normal"?X==="italic"?"italic":"normal":fe!=700&&fe!=="bold"||X!=="normal"?(fe==700?"bold":fe)+""+X:"bold"),X};m.advancedAPI=function(X){var fe=_===w.COMPAT;return fe&&T.call(this),typeof X!="function"||(X(this),fe&&B.call(this)),this},m.compatAPI=function(X){var fe=_===w.ADVANCED;return fe&&B.call(this),typeof X!="function"||(X(this),fe&&T.call(this)),this},m.isAdvancedAPI=function(){return _===w.ADVANCED};var E,N=function(X){if(_!==w.ADVANCED)throw new Error(X+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},I=m.roundToPrecision=m.__private__.roundToPrecision=function(X,fe){var De=t||fe;if(isNaN(X)||isNaN(De))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return X.toFixed(De).replace(/0+$/,"")};E=m.hpf=m.__private__.hpf=typeof c=="number"?function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.hpf");return I(X,c)}:c==="smart"?function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.hpf");return I(X,X>-1&&X<1?16:5)}:function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.hpf");return I(X,16)};var L=m.f2=m.__private__.f2=function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.f2");return I(X,2)},D=m.__private__.f3=function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.f3");return I(X,3)},k=m.scale=m.__private__.scale=function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.scale");return _===w.COMPAT?X*yt:_===w.ADVANCED?X:void 0},P=function(X){return _===w.COMPAT?Ki()-X:_===w.ADVANCED?X:void 0},R=function(X){return k(P(X))};m.__private__.setPrecision=m.setPrecision=function(X){typeof parseInt(X,10)=="number"&&(t=parseInt(X,10))};var W,V="00000000000000000000000000000000",G=m.__private__.getFileId=function(){return V},z=m.__private__.setFileId=function(X){return V=X!==void 0&&/^[a-fA-F0-9]{32}$/.test(X)?X.toUpperCase():V.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(fa=new qv(d.userPermissions,d.userPassword,d.ownerPassword,V)),V};m.setFileId=function(X){return z(X),this},m.getFileId=function(){return G()};var K=m.__private__.convertDateToPDFDate=function(X){var fe=X.getTimezoneOffset(),De=fe<0?"+":"-",Me=Math.floor(Math.abs(fe/60)),Ge=Math.abs(fe%60),vt=[De,Y(Me),"'",Y(Ge),"'"].join("");return["D:",X.getFullYear(),Y(X.getMonth()+1),Y(X.getDate()),Y(X.getHours()),Y(X.getMinutes()),Y(X.getSeconds()),vt].join("")},J=m.__private__.convertPDFDateToDate=function(X){var fe=parseInt(X.substr(2,4),10),De=parseInt(X.substr(6,2),10)-1,Me=parseInt(X.substr(8,2),10),Ge=parseInt(X.substr(10,2),10),vt=parseInt(X.substr(12,2),10),Mt=parseInt(X.substr(14,2),10);return new Date(fe,De,Me,Ge,vt,Mt,0)},te=m.__private__.setCreationDate=function(X){var fe;if(X===void 0&&(X=new Date),X instanceof Date)fe=K(X);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(X))throw new Error("Invalid argument passed to jsPDF.setCreationDate");fe=X}return W=fe},M=m.__private__.getCreationDate=function(X){var fe=W;return X==="jsDate"&&(fe=J(W)),fe};m.setCreationDate=function(X){return te(X),this},m.getCreationDate=function(X){return M(X)};var H,Y=m.__private__.padd2=function(X){return("0"+parseInt(X)).slice(-2)},Z=m.__private__.padd2Hex=function(X){return("00"+(X=X.toString())).substr(X.length)},ae=0,le=[],ie=[],ce=0,Ae=[],Fe=[],ne=!1,_e=ie,Ie=function(){ae=0,ce=0,ie=[],le=[],Ae=[],Ce=Xr(),we=Xr()};m.__private__.setCustomOutputDestination=function(X){ne=!0,_e=X};var Se=function(X){ne||(_e=X)};m.__private__.resetCustomOutputDestination=function(){ne=!1,_e=ie};var me=m.__private__.out=function(X){return X=X.toString(),ce+=X.length+1,_e.push(X),_e},Be=m.__private__.write=function(X){return me(arguments.length===1?X.toString():Array.prototype.join.call(arguments," "))},Le=m.__private__.getArrayBuffer=function(X){for(var fe=X.length,De=new ArrayBuffer(fe),Me=new Uint8Array(De);fe--;)Me[fe]=X.charCodeAt(fe);return De},We=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return We};var be=e.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(X){return be=_===w.ADVANCED?X/yt:X,this};var Oe,Pe=m.__private__.getFontSize=m.getFontSize=function(){return _===w.COMPAT?be:be*yt},qe=e.R2L||!1;m.__private__.setR2L=m.setR2L=function(X){return qe=X,this},m.__private__.getR2L=m.getR2L=function(){return qe};var et,ct=m.__private__.setZoomMode=function(X){var fe=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(X))Oe=X;else if(isNaN(X)){if(fe.indexOf(X)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+X+'" is not recognized.');Oe=X}else Oe=parseInt(X,10)};m.__private__.getZoomMode=function(){return Oe};var pt,Ft=m.__private__.setPageMode=function(X){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(X)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+X+'" is not recognized.');et=X};m.__private__.getPageMode=function(){return et};var Ut=m.__private__.setLayoutMode=function(X){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(X)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+X+'" is not recognized.');pt=X};m.__private__.getLayoutMode=function(){return pt},m.__private__.setDisplayMode=m.setDisplayMode=function(X,fe,De){return ct(X),Ut(fe),Ft(De),this};var Rt={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(X){if(Object.keys(Rt).indexOf(X)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Rt[X]},m.__private__.getDocumentProperties=function(){return Rt},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(X){for(var fe in Rt)Rt.hasOwnProperty(fe)&&X[fe]&&(Rt[fe]=X[fe]);return this},m.__private__.setDocumentProperty=function(X,fe){if(Object.keys(Rt).indexOf(X)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Rt[X]=fe};var Ht,yt,jr,rr,on,kr={},Kr={},Fn=[],Rr={},bs={},pn={},da={},Da=null,an=0,gr=[],tt=new MW(m),gt=e.hotfixes||[],Je={},xt={},Et=[],bt=function X(fe,De,Me,Ge,vt,Mt){if(!(this instanceof X))return new X(fe,De,Me,Ge,vt,Mt);isNaN(fe)&&(fe=1),isNaN(De)&&(De=0),isNaN(Me)&&(Me=0),isNaN(Ge)&&(Ge=1),isNaN(vt)&&(vt=0),isNaN(Mt)&&(Mt=0),this._matrix=[fe,De,Me,Ge,vt,Mt]};Object.defineProperty(bt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(X){this._matrix[0]=X}}),Object.defineProperty(bt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(X){this._matrix[1]=X}}),Object.defineProperty(bt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(X){this._matrix[2]=X}}),Object.defineProperty(bt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(X){this._matrix[3]=X}}),Object.defineProperty(bt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(X){this._matrix[4]=X}}),Object.defineProperty(bt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(X){this._matrix[5]=X}}),Object.defineProperty(bt.prototype,"a",{get:function(){return this._matrix[0]},set:function(X){this._matrix[0]=X}}),Object.defineProperty(bt.prototype,"b",{get:function(){return this._matrix[1]},set:function(X){this._matrix[1]=X}}),Object.defineProperty(bt.prototype,"c",{get:function(){return this._matrix[2]},set:function(X){this._matrix[2]=X}}),Object.defineProperty(bt.prototype,"d",{get:function(){return this._matrix[3]},set:function(X){this._matrix[3]=X}}),Object.defineProperty(bt.prototype,"e",{get:function(){return this._matrix[4]},set:function(X){this._matrix[4]=X}}),Object.defineProperty(bt.prototype,"f",{get:function(){return this._matrix[5]},set:function(X){this._matrix[5]=X}}),Object.defineProperty(bt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(bt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(bt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(bt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),bt.prototype.join=function(X){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(X)},bt.prototype.multiply=function(X){var fe=X.sx*this.sx+X.shy*this.shx,De=X.sx*this.shy+X.shy*this.sy,Me=X.shx*this.sx+X.sy*this.shx,Ge=X.shx*this.shy+X.sy*this.sy,vt=X.tx*this.sx+X.ty*this.shx+this.tx,Mt=X.tx*this.shy+X.ty*this.sy+this.ty;return new bt(fe,De,Me,Ge,vt,Mt)},bt.prototype.decompose=function(){var X=this.sx,fe=this.shy,De=this.shx,Me=this.sy,Ge=this.tx,vt=this.ty,Mt=Math.sqrt(X*X+fe*fe),er=(X/=Mt)*De+(fe/=Mt)*Me;De-=X*er,Me-=fe*er;var O=Math.sqrt(De*De+Me*Me);return er/=O,X*(Me/=O)<fe*(De/=O)&&(X=-X,fe=-fe,er=-er,Mt=-Mt),{scale:new bt(Mt,0,0,O,0,0),translate:new bt(1,0,0,1,Ge,vt),rotate:new bt(X,fe,-fe,X,0,0),skew:new bt(1,0,er,1,0,0)}},bt.prototype.toString=function(X){return this.join(" ")},bt.prototype.inversed=function(){var X=this.sx,fe=this.shy,De=this.shx,Me=this.sy,Ge=this.tx,vt=this.ty,Mt=1/(X*Me-fe*De),er=Me*Mt,O=-fe*Mt,re=-De*Mt,oe=X*Mt;return new bt(er,O,re,oe,-er*Ge-re*vt,-O*Ge-oe*vt)},bt.prototype.applyToPoint=function(X){var fe=X.x*this.sx+X.y*this.shx+this.tx,De=X.x*this.shy+X.y*this.sy+this.ty;return new bd(fe,De)},bt.prototype.applyToRectangle=function(X){var fe=this.applyToPoint(X),De=this.applyToPoint(new bd(X.x+X.w,X.y+X.h));return new Cf(fe.x,fe.y,De.x-fe.x,De.y-fe.y)},bt.prototype.clone=function(){var X=this.sx,fe=this.shy,De=this.shx,Me=this.sy,Ge=this.tx,vt=this.ty;return new bt(X,fe,De,Me,Ge,vt)},m.Matrix=bt;var ar=m.matrixMult=function(X,fe){return fe.multiply(X)},vr=new bt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=vr;var Yr=function(X,fe){if(!bs[X]){var De=(fe instanceof dg?"Sh":"P")+(Object.keys(Rr).length+1).toString(10);fe.id=De,bs[X]=De,Rr[De]=fe,tt.publish("addPattern",fe)}};m.ShadingPattern=dg,m.TilingPattern=s1,m.addShadingPattern=function(X,fe){return N("addShadingPattern()"),Yr(X,fe),this},m.beginTilingPattern=function(X){N("beginTilingPattern()"),Eu(X.boundingBox[0],X.boundingBox[1],X.boundingBox[2]-X.boundingBox[0],X.boundingBox[3]-X.boundingBox[1],X.matrix)},m.endTilingPattern=function(X,fe){N("endTilingPattern()"),fe.stream=Fe[H].join(`
`),Yr(X,fe),tt.publish("endTilingPattern",fe),Et.pop().restore()};var tn=m.__private__.newObject=function(){var X=Xr();return he(X,!0),X},Xr=m.__private__.newObjectDeferred=function(){return ae++,le[ae]=function(){return ce},ae},he=function(X,fe){return fe=typeof fe=="boolean"&&fe,le[X]=ce,fe&&me(X+" 0 obj"),X},Te=m.__private__.newAdditionalObject=function(){var X={objId:Xr(),content:""};return Ae.push(X),X},Ce=Xr(),we=Xr(),Ne=m.__private__.decodeColorString=function(X){var fe=X.split(" ");if(fe.length!==2||fe[1]!=="g"&&fe[1]!=="G")fe.length===5&&(fe[4]==="k"||fe[4]==="K")&&(fe=[(1-fe[0])*(1-fe[3]),(1-fe[1])*(1-fe[3]),(1-fe[2])*(1-fe[3]),"r"]);else{var De=parseFloat(fe[0]);fe=[De,De,De,"r"]}for(var Me="#",Ge=0;Ge<3;Ge++)Me+=("0"+Math.floor(255*parseFloat(fe[Ge])).toString(16)).slice(-2);return Me},je=m.__private__.encodeColorString=function(X){var fe;typeof X=="string"&&(X={ch1:X});var De=X.ch1,Me=X.ch2,Ge=X.ch3,vt=X.ch4,Mt=X.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof De=="string"&&De.charAt(0)!=="#"){var er=new Sce(De);if(er.ok)De=er.toHex();else if(!/^\d*\.?\d*$/.test(De))throw new Error('Invalid color "'+De+'" passed to jsPDF.encodeColorString.')}if(typeof De=="string"&&/^#[0-9A-Fa-f]{3}$/.test(De)&&(De="#"+De[1]+De[1]+De[2]+De[2]+De[3]+De[3]),typeof De=="string"&&/^#[0-9A-Fa-f]{6}$/.test(De)){var O=parseInt(De.substr(1),16);De=O>>16&255,Me=O>>8&255,Ge=255&O}if(Me===void 0||vt===void 0&&De===Me&&Me===Ge)if(typeof De=="string")fe=De+" "+Mt[0];else switch(X.precision){case 2:fe=L(De/255)+" "+Mt[0];break;case 3:default:fe=D(De/255)+" "+Mt[0]}else if(vt===void 0||ya(vt)==="object"){if(vt&&!isNaN(vt.a)&&vt.a===0)return fe=["1.","1.","1.",Mt[1]].join(" ");if(typeof De=="string")fe=[De,Me,Ge,Mt[1]].join(" ");else switch(X.precision){case 2:fe=[L(De/255),L(Me/255),L(Ge/255),Mt[1]].join(" ");break;default:case 3:fe=[D(De/255),D(Me/255),D(Ge/255),Mt[1]].join(" ")}}else if(typeof De=="string")fe=[De,Me,Ge,vt,Mt[2]].join(" ");else switch(X.precision){case 2:fe=[L(De),L(Me),L(Ge),L(vt),Mt[2]].join(" ");break;case 3:default:fe=[D(De),D(Me),D(Ge),D(vt),Mt[2]].join(" ")}return fe},Ye=m.__private__.getFilters=function(){return i},dt=m.__private__.putStream=function(X){var fe=(X=X||{}).data||"",De=X.filters||Ye(),Me=X.alreadyAppliedFilters||[],Ge=X.addLength1||!1,vt=fe.length,Mt=X.objectId,er=function(Dr){return Dr};if(d!==null&&Mt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(er=fa.encryptor(Mt,0));var O={};De===!0&&(De=["FlateEncode"]);var re=X.additionalKeyValues||[],oe=(O=br.API.processDataByFilters!==void 0?br.API.processDataByFilters(fe,De):{data:fe,reverseChain:[]}).reverseChain+(Array.isArray(Me)?Me.join(" "):Me.toString());if(O.data.length!==0&&(re.push({key:"Length",value:O.data.length}),Ge===!0&&re.push({key:"Length1",value:vt})),oe.length!=0)if(oe.split("/").length-1==1)re.push({key:"Filter",value:oe});else{re.push({key:"Filter",value:"["+oe+"]"});for(var ve=0;ve<re.length;ve+=1)if(re[ve].key==="DecodeParms"){for(var ze=[],ot=0;ot<O.reverseChain.split("/").length-1;ot+=1)ze.push("null");ze.push(re[ve].value),re[ve].value="["+ze.join(" ")+"]"}}me("<<");for(var Qt=0;Qt<re.length;Qt++)me("/"+re[Qt].key+" "+re[Qt].value);me(">>"),O.data.length!==0&&(me("stream"),me(er(O.data)),me("endstream"))},$e=m.__private__.putPage=function(X){var fe=X.number,De=X.data,Me=X.objId,Ge=X.contentsObjId;he(Me,!0),me("<</Type /Page"),me("/Parent "+X.rootDictionaryObjId+" 0 R"),me("/Resources "+X.resourceDictionaryObjId+" 0 R"),me("/MediaBox ["+parseFloat(E(X.mediaBox.bottomLeftX))+" "+parseFloat(E(X.mediaBox.bottomLeftY))+" "+E(X.mediaBox.topRightX)+" "+E(X.mediaBox.topRightY)+"]"),X.cropBox!==null&&me("/CropBox ["+E(X.cropBox.bottomLeftX)+" "+E(X.cropBox.bottomLeftY)+" "+E(X.cropBox.topRightX)+" "+E(X.cropBox.topRightY)+"]"),X.bleedBox!==null&&me("/BleedBox ["+E(X.bleedBox.bottomLeftX)+" "+E(X.bleedBox.bottomLeftY)+" "+E(X.bleedBox.topRightX)+" "+E(X.bleedBox.topRightY)+"]"),X.trimBox!==null&&me("/TrimBox ["+E(X.trimBox.bottomLeftX)+" "+E(X.trimBox.bottomLeftY)+" "+E(X.trimBox.topRightX)+" "+E(X.trimBox.topRightY)+"]"),X.artBox!==null&&me("/ArtBox ["+E(X.artBox.bottomLeftX)+" "+E(X.artBox.bottomLeftY)+" "+E(X.artBox.topRightX)+" "+E(X.artBox.topRightY)+"]"),typeof X.userUnit=="number"&&X.userUnit!==1&&me("/UserUnit "+X.userUnit),tt.publish("putPage",{objId:Me,pageContext:gr[fe],pageNumber:fe,page:De}),me("/Contents "+Ge+" 0 R"),me(">>"),me("endobj");var vt=De.join(`
`);return _===w.ADVANCED&&(vt+=`
Q`),he(Ge,!0),dt({data:vt,filters:Ye(),objectId:Ge}),me("endobj"),Me},nt=m.__private__.putPages=function(){var X,fe,De=[];for(X=1;X<=an;X++)gr[X].objId=Xr(),gr[X].contentsObjId=Xr();for(X=1;X<=an;X++)De.push($e({number:X,data:Fe[X],objId:gr[X].objId,contentsObjId:gr[X].contentsObjId,mediaBox:gr[X].mediaBox,cropBox:gr[X].cropBox,bleedBox:gr[X].bleedBox,trimBox:gr[X].trimBox,artBox:gr[X].artBox,userUnit:gr[X].userUnit,rootDictionaryObjId:Ce,resourceDictionaryObjId:we}));he(Ce,!0),me("<</Type /Pages");var Me="/Kids [";for(fe=0;fe<an;fe++)Me+=De[fe]+" 0 R ";me(Me+"]"),me("/Count "+an),me(">>"),me("endobj"),tt.publish("postPutPages")},it=function(X){tt.publish("putFont",{font:X,out:me,newObject:tn,putStream:dt}),X.isAlreadyPutted!==!0&&(X.objectNumber=tn(),me("<<"),me("/Type /Font"),me("/BaseFont /"+Wv(X.postScriptName)),me("/Subtype /Type1"),typeof X.encoding=="string"&&me("/Encoding /"+X.encoding),me("/FirstChar 32"),me("/LastChar 255"),me(">>"),me("endobj"))},Ot=function(){for(var X in kr)kr.hasOwnProperty(X)&&(f===!1||f===!0&&h.hasOwnProperty(X))&&it(kr[X])},zt=function(X){X.objectNumber=tn();var fe=[];fe.push({key:"Type",value:"/XObject"}),fe.push({key:"Subtype",value:"/Form"}),fe.push({key:"BBox",value:"["+[E(X.x),E(X.y),E(X.x+X.width),E(X.y+X.height)].join(" ")+"]"}),fe.push({key:"Matrix",value:"["+X.matrix.toString()+"]"});var De=X.pages[1].join(`
`);dt({data:De,additionalKeyValues:fe,objectId:X.objectNumber}),me("endobj")},Zt=function(){for(var X in Je)Je.hasOwnProperty(X)&&zt(Je[X])},Vt=function(X,fe){var De,Me=[],Ge=1/(fe-1);for(De=0;De<1;De+=Ge)Me.push(De);if(Me.push(1),X[0].offset!=0){var vt={offset:0,color:X[0].color};X.unshift(vt)}if(X[X.length-1].offset!=1){var Mt={offset:1,color:X[X.length-1].color};X.push(Mt)}for(var er="",O=0,re=0;re<Me.length;re++){for(De=Me[re];De>X[O+1].offset;)O++;var oe=X[O].offset,ve=(De-oe)/(X[O+1].offset-oe),ze=X[O].color,ot=X[O+1].color;er+=Z(Math.round((1-ve)*ze[0]+ve*ot[0]).toString(16))+Z(Math.round((1-ve)*ze[1]+ve*ot[1]).toString(16))+Z(Math.round((1-ve)*ze[2]+ve*ot[2]).toString(16))}return er.trim()},Kt=function(X,fe){fe||(fe=21);var De=tn(),Me=Vt(X.colors,fe),Ge=[];Ge.push({key:"FunctionType",value:"0"}),Ge.push({key:"Domain",value:"[0.0 1.0]"}),Ge.push({key:"Size",value:"["+fe+"]"}),Ge.push({key:"BitsPerSample",value:"8"}),Ge.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ge.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),dt({data:Me,additionalKeyValues:Ge,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:De}),me("endobj"),X.objectNumber=tn(),me("<< /ShadingType "+X.type),me("/ColorSpace /DeviceRGB");var vt="/Coords ["+E(parseFloat(X.coords[0]))+" "+E(parseFloat(X.coords[1]))+" ";X.type===2?vt+=E(parseFloat(X.coords[2]))+" "+E(parseFloat(X.coords[3])):vt+=E(parseFloat(X.coords[2]))+" "+E(parseFloat(X.coords[3]))+" "+E(parseFloat(X.coords[4]))+" "+E(parseFloat(X.coords[5])),me(vt+="]"),X.matrix&&me("/Matrix ["+X.matrix.toString()+"]"),me("/Function "+De+" 0 R"),me("/Extend [true true]"),me(">>"),me("endobj")},Br=function(X,fe){var De=Xr(),Me=tn();fe.push({resourcesOid:De,objectOid:Me}),X.objectNumber=Me;var Ge=[];Ge.push({key:"Type",value:"/Pattern"}),Ge.push({key:"PatternType",value:"1"}),Ge.push({key:"PaintType",value:"1"}),Ge.push({key:"TilingType",value:"1"}),Ge.push({key:"BBox",value:"["+X.boundingBox.map(E).join(" ")+"]"}),Ge.push({key:"XStep",value:E(X.xStep)}),Ge.push({key:"YStep",value:E(X.yStep)}),Ge.push({key:"Resources",value:De+" 0 R"}),X.matrix&&Ge.push({key:"Matrix",value:"["+X.matrix.toString()+"]"}),dt({data:X.stream,additionalKeyValues:Ge,objectId:X.objectNumber}),me("endobj")},ln=function(X){var fe;for(fe in Rr)Rr.hasOwnProperty(fe)&&(Rr[fe]instanceof dg?Kt(Rr[fe]):Rr[fe]instanceof s1&&Br(Rr[fe],X))},cn=function(X){for(var fe in X.objectNumber=tn(),me("<<"),X)switch(fe){case"opacity":me("/ca "+L(X[fe]));break;case"stroke-opacity":me("/CA "+L(X[fe]))}me(">>"),me("endobj")},hn=function(){var X;for(X in pn)pn.hasOwnProperty(X)&&cn(pn[X])},ys=function(){for(var X in me("/XObject <<"),Je)Je.hasOwnProperty(X)&&Je[X].objectNumber>=0&&me("/"+X+" "+Je[X].objectNumber+" 0 R");tt.publish("putXobjectDict"),me(">>")},Po=function(){fa.oid=tn(),me("<<"),me("/Filter /Standard"),me("/V "+fa.v),me("/R "+fa.r),me("/U <"+fa.toHexString(fa.U)+">"),me("/O <"+fa.toHexString(fa.O)+">"),me("/P "+fa.P),me(">>"),me("endobj")},ws=function(){for(var X in me("/Font <<"),kr)kr.hasOwnProperty(X)&&(f===!1||f===!0&&h.hasOwnProperty(X))&&me("/"+X+" "+kr[X].objectNumber+" 0 R");me(">>")},ci=function(){if(Object.keys(Rr).length>0){for(var X in me("/Shading <<"),Rr)Rr.hasOwnProperty(X)&&Rr[X]instanceof dg&&Rr[X].objectNumber>=0&&me("/"+X+" "+Rr[X].objectNumber+" 0 R");tt.publish("putShadingPatternDict"),me(">>")}},Us=function(X){if(Object.keys(Rr).length>0){for(var fe in me("/Pattern <<"),Rr)Rr.hasOwnProperty(fe)&&Rr[fe]instanceof m.TilingPattern&&Rr[fe].objectNumber>=0&&Rr[fe].objectNumber<X&&me("/"+fe+" "+Rr[fe].objectNumber+" 0 R");tt.publish("putTilingPatternDict"),me(">>")}},Ni=function(){if(Object.keys(pn).length>0){var X;for(X in me("/ExtGState <<"),pn)pn.hasOwnProperty(X)&&pn[X].objectNumber>=0&&me("/"+X+" "+pn[X].objectNumber+" 0 R");tt.publish("putGStateDict"),me(">>")}},Ea=function(X){he(X.resourcesOid,!0),me("<<"),me("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ws(),ci(),Us(X.objectOid),Ni(),ys(),me(">>"),me("endobj")},ui=function(){var X=[];Ot(),hn(),Zt(),ln(X),tt.publish("putResources"),X.forEach(Ea),Ea({resourcesOid:we,objectOid:Number.MAX_SAFE_INTEGER}),tt.publish("postPutResources")},vf=function(){tt.publish("putAdditionalObjects");for(var X=0;X<Ae.length;X++){var fe=Ae[X];he(fe.objId,!0),me(fe.content),me("endobj")}tt.publish("postPutAdditionalObjects")},x0=function(X){Kr[X.fontName]=Kr[X.fontName]||{},Kr[X.fontName][X.fontStyle]=X.id},hu=function(X,fe,De,Me,Ge){var vt={id:"F"+(Object.keys(kr).length+1).toString(10),postScriptName:X,fontName:fe,fontStyle:De,encoding:Me,isStandardFont:Ge||!1,metadata:{}};return tt.publish("addFont",{font:vt,instance:this}),kr[vt.id]=vt,x0(vt),vt.id},LA=function(X){for(var fe=0,De=We.length;fe<De;fe++){var Me=hu.call(this,X[fe][0],X[fe][1],X[fe][2],We[fe][3],!0);f===!1&&(h[Me]=!0);var Ge=X[fe][0].split("-");x0({id:Me,fontName:Ge[0],fontStyle:Ge[1]||""})}tt.publish("addFonts",{fonts:kr,dictionary:Kr})},ki=function(X){return X.foo=function(){try{return X.apply(this,arguments)}catch(Me){var fe=Me.stack||"";~fe.indexOf(" at ")&&(fe=fe.split(" at ")[1]);var De="Error in function "+fe.split(`
`)[0].split("<")[0]+": "+Me.message;if(!Vr.console)throw new Error(De);Vr.console.error(De,Me),Vr.alert&&alert(De)}},X.foo.bar=X,X.foo},bf=function(X,fe){var De,Me,Ge,vt,Mt,er,O,re,oe;if(Ge=(fe=fe||{}).sourceEncoding||"Unicode",Mt=fe.outputEncoding,(fe.autoencode||Mt)&&kr[Ht].metadata&&kr[Ht].metadata[Ge]&&kr[Ht].metadata[Ge].encoding&&(vt=kr[Ht].metadata[Ge].encoding,!Mt&&kr[Ht].encoding&&(Mt=kr[Ht].encoding),!Mt&&vt.codePages&&(Mt=vt.codePages[0]),typeof Mt=="string"&&(Mt=vt[Mt]),Mt)){for(O=!1,er=[],De=0,Me=X.length;De<Me;De++)(re=Mt[X.charCodeAt(De)])?er.push(String.fromCharCode(re)):er.push(X[De]),er[De].charCodeAt(0)>>8&&(O=!0);X=er.join("")}for(De=X.length;O===void 0&&De!==0;)X.charCodeAt(De-1)>>8&&(O=!0),De--;if(!O)return X;for(er=fe.noBOM?[]:[254,255],De=0,Me=X.length;De<Me;De++){if((oe=(re=X.charCodeAt(De))>>8)>>8)throw new Error("Character at position "+De+" of string '"+X+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");er.push(oe),er.push(re-(oe<<8))}return String.fromCharCode.apply(void 0,er)},On=m.__private__.pdfEscape=m.pdfEscape=function(X,fe){return bf(X,fe).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Bi=m.__private__.beginPage=function(X){Fe[++an]=[],gr[an]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(X[0]),topRightY:Number(X[1])}},Ul(an),Se(Fe[H])},mu=function(X,fe){var De,Me,Ge;switch(r=fe||r,typeof X=="string"&&(De=y(X.toLowerCase()),Array.isArray(De)&&(Me=De[0],Ge=De[1])),Array.isArray(X)&&(Me=X[0]*yt,Ge=X[1]*yt),isNaN(Me)&&(Me=a[0],Ge=a[1]),(Me>14400||Ge>14400)&&(ja.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Me=Math.min(14400,Me),Ge=Math.min(14400,Ge)),a=[Me,Ge],r.substr(0,1)){case"l":Ge>Me&&(a=[Ge,Me]);break;case"p":Me>Ge&&(a=[Ge,Me])}Bi(a),HA(vu),me(Ti),VA!==0&&me(VA+" J"),vd!==0&&me(vd+" j"),tt.publish("addPage",{pageNumber:an})},pu=function(X){X>0&&X<=an&&(Fe.splice(X,1),gr.splice(X,1),an--,H>an&&(H=an),this.setPage(H))},Ul=function(X){X>0&&X<=an&&(H=X)},zn=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return Fe.length-1},gu=function(X,fe,De){var Me,Ge=void 0;return De=De||{},X=X!==void 0?X:kr[Ht].fontName,fe=fe!==void 0?fe:kr[Ht].fontStyle,Me=X.toLowerCase(),Kr[Me]!==void 0&&Kr[Me][fe]!==void 0?Ge=Kr[Me][fe]:Kr[X]!==void 0&&Kr[X][fe]!==void 0?Ge=Kr[X][fe]:De.disableWarning===!1&&ja.warn("Unable to look up font label for font '"+X+"', '"+fe+"'. Refer to getFontList() for available fonts."),Ge||De.noFallback||(Ge=Kr.times[fe])==null&&(Ge=Kr.times.normal),Ge},Ro=m.__private__.putInfo=function(){var X=tn(),fe=function(Me){return Me};for(var De in d!==null&&(fe=fa.encryptor(X,0)),me("<<"),me("/Producer ("+On(fe("jsPDF "+br.version))+")"),Rt)Rt.hasOwnProperty(De)&&Rt[De]&&me("/"+De.substr(0,1).toUpperCase()+De.substr(1)+" ("+On(fe(Rt[De]))+")");me("/CreationDate ("+On(fe(W))+")"),me(">>"),me("endobj")},wc=m.__private__.putCatalog=function(X){var fe=(X=X||{}).rootDictionaryObjId||Ce;switch(tn(),me("<<"),me("/Type /Catalog"),me("/Pages "+fe+" 0 R"),Oe||(Oe="fullwidth"),Oe){case"fullwidth":me("/OpenAction [3 0 R /FitH null]");break;case"fullheight":me("/OpenAction [3 0 R /FitV null]");break;case"fullpage":me("/OpenAction [3 0 R /Fit]");break;case"original":me("/OpenAction [3 0 R /XYZ null null 1]");break;default:var De=""+Oe;De.substr(De.length-1)==="%"&&(Oe=parseInt(Oe)/100),typeof Oe=="number"&&me("/OpenAction [3 0 R /XYZ null null "+L(Oe)+"]")}switch(pt||(pt="continuous"),pt){case"continuous":me("/PageLayout /OneColumn");break;case"single":me("/PageLayout /SinglePage");break;case"two":case"twoleft":me("/PageLayout /TwoColumnLeft");break;case"tworight":me("/PageLayout /TwoColumnRight")}et&&me("/PageMode /"+et),tt.publish("putCatalog"),me(">>"),me("endobj")},v0=m.__private__.putTrailer=function(){me("trailer"),me("<<"),me("/Size "+(ae+1)),me("/Root "+ae+" 0 R"),me("/Info "+(ae-1)+" 0 R"),d!==null&&me("/Encrypt "+fa.oid+" 0 R"),me("/ID [ <"+V+"> <"+V+"> ]"),me(">>")},MA=m.__private__.putHeader=function(){me("%PDF-"+g),me("%ºß¬à")},UA=m.__private__.putXRef=function(){var X="0000000000";me("xref"),me("0 "+(ae+1)),me("0000000000 65535 f ");for(var fe=1;fe<=ae;fe++)typeof le[fe]=="function"?me((X+le[fe]()).slice(-10)+" 00000 n "):le[fe]!==void 0?me((X+le[fe]).slice(-10)+" 00000 n "):me("0000000000 00000 n ")},Ec=m.__private__.buildDocument=function(){Ie(),Se(ie),tt.publish("buildDocument"),MA(),nt(),vf(),ui(),d!==null&&Po(),Ro(),wc();var X=ce;return UA(),v0(),me("startxref"),me(""+X),me("%%EOF"),Se(Fe[H]),ie.join(`
`)},yf=m.__private__.getBlob=function(X){return new Blob([Le(X)],{type:"application/pdf"})},Cc=m.output=m.__private__.output=ki(function(X,fe){switch(typeof(fe=fe||{})=="string"?fe={filename:fe}:fe.filename=fe.filename||"generated.pdf",X){case void 0:return Ec();case"save":m.save(fe.filename);break;case"arraybuffer":return Le(Ec());case"blob":return yf(Ec());case"bloburi":case"bloburl":if(Vr.URL!==void 0&&typeof Vr.URL.createObjectURL=="function")return Vr.URL&&Vr.URL.createObjectURL(yf(Ec()))||void 0;ja.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var De="",Me=Ec();try{De=JD(Me)}catch{De=JD(unescape(encodeURIComponent(Me)))}return"data:application/pdf;filename="+fe.filename+";base64,"+De;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Vr)==="[object Window]"){var Ge="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",vt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';fe.pdfObjectUrl&&(Ge=fe.pdfObjectUrl,vt="");var Mt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ge+'"'+vt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(fe)+");<\/script></body></html>",er=Vr.open();return er!==null&&er.document.write(Mt),er}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Vr)==="[object Window]"){var O='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(fe.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+fe.filename+'" width="500px" height="400px" /></body></html>',re=Vr.open();if(re!==null){re.document.write(O);var oe=this;re.document.documentElement.querySelector("#pdfViewer").onload=function(){re.document.title=fe.filename,re.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(oe.output("bloburl"))}}return re}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Vr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ve='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",fe)+'"></iframe></body></html>',ze=Vr.open();if(ze!==null&&(ze.document.write(ve),ze.document.title=fe.filename),ze||typeof safari>"u")return ze;break;case"datauri":case"dataurl":return Vr.document.location.href=this.output("datauristring",fe);default:return null}}),Ql=function(X){return Array.isArray(gt)===!0&&gt.indexOf(X)>-1};switch(n){case"pt":yt=1;break;case"mm":yt=72/25.4;break;case"cm":yt=72/2.54;break;case"in":yt=72;break;case"px":yt=Ql("px_scaling")==1?.75:96/72;break;case"pc":case"em":yt=12;break;case"ex":yt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);yt=n}var fa=null;te(),z();var _c=function(X){return d!==null?fa.encryptor(X,0):function(fe){return fe}},Hl=m.__private__.getPageInfo=m.getPageInfo=function(X){if(isNaN(X)||X%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:gr[X].objId,pageNumber:X,pageContext:gr[X]}},Or=m.__private__.getPageInfoByObjId=function(X){if(isNaN(X)||X%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var fe in gr)if(gr[fe].objId===X)break;return Hl(fe)},Vl=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:gr[H].objId,pageNumber:H,pageContext:gr[H]}};m.addPage=function(){return mu.apply(this,arguments),this},m.setPage=function(){return Ul.apply(this,arguments),Se.call(this,Fe[H]),this},m.insertPage=function(X){return this.addPage(),this.movePage(H,X),this},m.movePage=function(X,fe){var De,Me;if(X>fe){De=Fe[X],Me=gr[X];for(var Ge=X;Ge>fe;Ge--)Fe[Ge]=Fe[Ge-1],gr[Ge]=gr[Ge-1];Fe[fe]=De,gr[fe]=Me,this.setPage(fe)}else if(X<fe){De=Fe[X],Me=gr[X];for(var vt=X;vt<fe;vt++)Fe[vt]=Fe[vt+1],gr[vt]=gr[vt+1];Fe[fe]=De,gr[fe]=Me,this.setPage(fe)}return this},m.deletePage=function(){return pu.apply(this,arguments),this},m.__private__.text=m.text=function(X,fe,De,Me,Ge){var vt,Mt,er,O,re,oe,ve,ze,ot,Qt=(Me=Me||{}).scope||this;if(typeof X=="number"&&typeof fe=="number"&&(typeof De=="string"||Array.isArray(De))){var Dr=De;De=fe,fe=X,X=Dr}if(arguments[3]instanceof bt?(N("The transform parameter of text() with a Matrix value"),ot=Ge):(er=arguments[4],O=arguments[5],ya(ve=arguments[3])==="object"&&ve!==null||(typeof er=="string"&&(O=er,er=null),typeof ve=="string"&&(O=ve,ve=null),typeof ve=="number"&&(er=ve,ve=null),Me={flags:ve,angle:er,align:O})),isNaN(fe)||isNaN(De)||X==null)throw new Error("Invalid arguments passed to jsPDF.text");if(X.length===0)return Qt;var yn="",Jr=!1,$n=typeof Me.lineHeightFactor=="number"?Me.lineHeightFactor:bn,aa=Qt.internal.scaleFactor;function Kl(gn){return gn=gn.split("	").join(Array(Me.TabLen||9).join(" ")),On(gn,ve)}function os(gn){for(var xn,Ca=gn.concat(),ls=[],Wl=Ca.length;Wl--;)typeof(xn=Ca.shift())=="string"?ls.push(xn):Array.isArray(gn)&&(xn.length===1||xn[1]===void 0&&xn[2]===void 0)?ls.push(xn[0]):ls.push([xn[0],xn[1],xn[2]]);return ls}function Qo(gn,xn){var Ca;if(typeof gn=="string")Ca=xn(gn)[0];else if(Array.isArray(gn)){for(var ls,Wl,Df=gn.concat(),Pf=[],_d=Df.length;_d--;)typeof(ls=Df.shift())=="string"?Pf.push(xn(ls)[0]):Array.isArray(ls)&&typeof ls[0]=="string"&&(Wl=xn(ls[0],ls[1],ls[2]),Pf.push([Wl[0],Wl[1],Wl[2]]));Ca=Pf}return Ca}var _u=!1,Sf=!0;if(typeof X=="string")_u=!0;else if(Array.isArray(X)){var E0=X.concat();Mt=[];for(var zA,Qs=E0.length;Qs--;)(typeof(zA=E0.shift())!="string"||Array.isArray(zA)&&typeof zA[0]!="string")&&(Sf=!1);_u=Sf}if(_u===!1)throw new Error('Type of text must be string or Array. "'+X+'" is not recognized.');typeof X=="string"&&(X=X.match(/[\r?\n]/)?X.split(/\r\n|\r|\n/g):[X]);var Nf=be/Qt.internal.scaleFactor,$A=Nf*($n-1);switch(Me.baseline){case"bottom":De-=$A;break;case"top":De+=Nf-$A;break;case"hanging":De+=Nf-2*$A;break;case"middle":De+=Nf/2-$A}if((oe=Me.maxWidth||0)>0&&(typeof X=="string"?X=Qt.splitTextToSize(X,oe):Object.prototype.toString.call(X)==="[object Array]"&&(X=X.reduce(function(gn,xn){return gn.concat(Qt.splitTextToSize(xn,oe))},[]))),vt={text:X,x:fe,y:De,options:Me,mutex:{pdfEscape:On,activeFontKey:Ht,fonts:kr,activeFontSize:be}},tt.publish("preProcessText",vt),X=vt.text,er=(Me=vt.options).angle,!(ot instanceof bt)&&er&&typeof er=="number"){er*=Math.PI/180,Me.rotationDirection===0&&(er=-er),_===w.ADVANCED&&(er=-er);var GA=Math.cos(er),C0=Math.sin(er);ot=new bt(GA,C0,-C0,GA,0,0)}else er&&er instanceof bt&&(ot=er);_!==w.ADVANCED||ot||(ot=vr),(re=Me.charSpace||xd)!==void 0&&(yn+=E(k(re))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ze=Me.horizontalScale)!==void 0&&(yn+=E(100*ze)+` Tz
`),Me.lang;var Ho=-1,ly=Me.renderingMode!==void 0?Me.renderingMode:Me.stroke,Np=Qt.internal.getCurrentPageInfo().pageContext;switch(ly){case 0:case!1:case"fill":Ho=0;break;case 1:case!0:case"stroke":Ho=1;break;case 2:case"fillThenStroke":Ho=2;break;case 3:case"invisible":Ho=3;break;case 4:case"fillAndAddForClipping":Ho=4;break;case 5:case"strokeAndAddPathForClipping":Ho=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ho=6;break;case 7:case"addToPathForClipping":Ho=7}var Px=Np.usedRenderingMode!==void 0?Np.usedRenderingMode:-1;Ho!==-1?yn+=Ho+` Tr
`:Px!==-1&&(yn+=`0 Tr
`),Ho!==-1&&(Np.usedRenderingMode=Ho),O=Me.align||"left";var ql,di=be*$n,kf=Qt.internal.pageSize.getWidth(),kp=kr[Ht];re=Me.charSpace||xd,oe=Me.maxWidth||0,ve=Object.assign({autoencode:!0,noBOM:!0},Me.flags);var Ed=[],Bf=function(gn){return Qt.getStringUnitWidth(gn,{font:kp,charSpace:re,fontSize:be,doKerning:!1})*be/aa};if(Object.prototype.toString.call(X)==="[object Array]"){var mo;Mt=os(X),O!=="left"&&(ql=Mt.map(Bf));var ji,Tf=0;if(O==="right"){fe-=ql[0],X=[],Qs=Mt.length;for(var Vo=0;Vo<Qs;Vo++)Vo===0?(ji=Gi(fe),mo=Cs(De)):(ji=k(Tf-ql[Vo]),mo=-di),X.push([Mt[Vo],ji,mo]),Tf=ql[Vo]}else if(O==="center"){fe-=ql[0]/2,X=[],Qs=Mt.length;for(var Bc=0;Bc<Qs;Bc++)Bc===0?(ji=Gi(fe),mo=Cs(De)):(ji=k((Tf-ql[Bc])/2),mo=-di),X.push([Mt[Bc],ji,mo]),Tf=ql[Bc]}else if(O==="left"){X=[],Qs=Mt.length;for(var Su=0;Su<Qs;Su++)X.push(Mt[Su])}else if(O==="justify"&&kp.encoding==="Identity-H"){X=[],Qs=Mt.length,oe=oe!==0?oe:kf;for(var Tc=0,Ya=0;Ya<Qs;Ya++)if(mo=Ya===0?Cs(De):-di,ji=Ya===0?Gi(fe):Tc,Ya<Qs-1){var jc=k((oe-ql[Ya])/(Mt[Ya].split(" ").length-1)),_s=Mt[Ya].split(" ");X.push([_s[0]+" ",ji,mo]),Tc=0;for(var zo=1;zo<_s.length;zo++){var KA=(Bf(_s[zo-1]+" "+_s[zo])-Bf(_s[zo]))*aa+jc;zo==_s.length-1?X.push([_s[zo],KA,0]):X.push([_s[zo]+" ",KA,0]),Tc-=KA}}else X.push([Mt[Ya],ji,mo]);X.push(["",Tc,0])}else{if(O!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(X=[],Qs=Mt.length,oe=oe!==0?oe:kf,Ya=0;Ya<Qs;Ya++)mo=Ya===0?Cs(De):-di,ji=Ya===0?Gi(fe):0,Ya<Qs-1?Ed.push(E(k((oe-ql[Ya])/(Mt[Ya].split(" ").length-1)))):Ed.push(0),X.push([Mt[Ya],ji,mo])}}var Nu=typeof Me.R2L=="boolean"?Me.R2L:qe;Nu===!0&&(X=Qo(X,function(gn,xn,Ca){return[gn.split("").reverse().join(""),xn,Ca]})),vt={text:X,x:fe,y:De,options:Me,mutex:{pdfEscape:On,activeFontKey:Ht,fonts:kr,activeFontSize:be}},tt.publish("postProcessText",vt),X=vt.text,Jr=vt.mutex.isHex||!1;var _0=kr[Ht].encoding;_0!=="WinAnsiEncoding"&&_0!=="StandardEncoding"||(X=Qo(X,function(gn,xn,Ca){return[Kl(gn),xn,Ca]})),Mt=os(X),X=[];for(var jf,If,Ff,qA=0,S0=1,Of=Array.isArray(Mt[0])?S0:qA,Cd="",WA=function(gn,xn,Ca){var ls="";return Ca instanceof bt?(Ca=typeof Me.angle=="number"?ar(Ca,new bt(1,0,0,1,gn,xn)):ar(new bt(1,0,0,1,gn,xn),Ca),_===w.ADVANCED&&(Ca=ar(new bt(1,0,0,-1,0,0),Ca)),ls=Ca.join(" ")+` Tm
`):ls=E(gn)+" "+E(xn)+` Td
`,ls},Ja=0;Ja<Mt.length;Ja++){switch(Cd="",Of){case S0:Ff=(Jr?"<":"(")+Mt[Ja][0]+(Jr?">":")"),jf=parseFloat(Mt[Ja][1]),If=parseFloat(Mt[Ja][2]);break;case qA:Ff=(Jr?"<":"(")+Mt[Ja]+(Jr?">":")"),jf=Gi(fe),If=Cs(De)}Ed!==void 0&&Ed[Ja]!==void 0&&(Cd=Ed[Ja]+` Tw
`),Ja===0?X.push(Cd+WA(jf,If,ot)+Ff):Of===qA?X.push(Cd+Ff):Of===S0&&X.push(Cd+WA(jf,If,ot)+Ff)}X=Of===qA?X.join(` Tj
T* `):X.join(` Tj
`),X+=` Tj
`;var wl=`BT
/`;return wl+=Ht+" "+be+` Tf
`,wl+=E(be*$n)+` TL
`,wl+=Nc+`
`,wl+=yn,wl+=X,me(wl+="ET"),h[Ht]=!0,Qt};var b0=m.__private__.clip=m.clip=function(X){return me(X==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return b0("evenodd")},m.__private__.discardPath=m.discardPath=function(){return me("n"),this};var zi=m.__private__.isValidStyle=function(X){var fe=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(X)!==-1&&(fe=!0),fe};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(X){return zi(X)&&(u=X),this};var Lo=m.__private__.getStyle=m.getStyle=function(X){var fe=u;switch(X){case"D":case"S":fe="S";break;case"F":fe="f";break;case"FD":case"DF":fe="B";break;case"f":case"f*":case"B":case"B*":fe=X}return fe},ho=m.close=function(){return me("h"),this};m.stroke=function(){return me("S"),this},m.fill=function(X){return zl("f",X),this},m.fillEvenOdd=function(X){return zl("f*",X),this},m.fillStroke=function(X){return zl("B",X),this},m.fillStrokeEvenOdd=function(X){return zl("B*",X),this};var zl=function(X,fe){ya(fe)==="object"?Sc(fe,X):me(X)},Mo=function(X){X===null||_===w.ADVANCED&&X===void 0||(X=Lo(X),me(X))};function xu(X,fe,De,Me,Ge){var vt=new s1(fe||this.boundingBox,De||this.xStep,Me||this.yStep,this.gState,Ge||this.matrix);vt.stream=this.stream;var Mt=X+"$$"+this.cloneIndex+++"$$";return Yr(Mt,vt),vt}var Sc=function(X,fe){var De=bs[X.key],Me=Rr[De];if(Me instanceof dg)me("q"),me(QA(fe)),Me.gState&&m.setGState(Me.gState),me(X.matrix.toString()+" cm"),me("/"+De+" sh"),me("Q");else if(Me instanceof s1){var Ge=new bt(1,0,0,-1,0,Ki());X.matrix&&(Ge=Ge.multiply(X.matrix||vr),De=xu.call(Me,X.key,X.boundingBox,X.xStep,X.yStep,Ge).id),me("q"),me("/Pattern cs"),me("/"+De+" scn"),Me.gState&&m.setGState(Me.gState),me(fe),me("Q")}},QA=function(X){switch(X){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Uo=m.moveTo=function(X,fe){return me(E(k(X))+" "+E(R(fe))+" m"),this},$i=m.lineTo=function(X,fe){return me(E(k(X))+" "+E(R(fe))+" l"),this},$l=m.curveTo=function(X,fe,De,Me,Ge,vt){return me([E(k(X)),E(R(fe)),E(k(De)),E(R(Me)),E(k(Ge)),E(R(vt)),"c"].join(" ")),this};m.__private__.line=m.line=function(X,fe,De,Me,Ge){if(isNaN(X)||isNaN(fe)||isNaN(De)||isNaN(Me)||!zi(Ge))throw new Error("Invalid arguments passed to jsPDF.line");return _===w.COMPAT?this.lines([[De-X,Me-fe]],X,fe,[1,1],Ge||"S"):this.lines([[De-X,Me-fe]],X,fe,[1,1]).stroke()},m.__private__.lines=m.lines=function(X,fe,De,Me,Ge,vt){var Mt,er,O,re,oe,ve,ze,ot,Qt,Dr,yn,Jr;if(typeof X=="number"&&(Jr=De,De=fe,fe=X,X=Jr),Me=Me||[1,1],vt=vt||!1,isNaN(fe)||isNaN(De)||!Array.isArray(X)||!Array.isArray(Me)||!zi(Ge)||typeof vt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Uo(fe,De),Mt=Me[0],er=Me[1],re=X.length,Dr=fe,yn=De,O=0;O<re;O++)(oe=X[O]).length===2?(Dr=oe[0]*Mt+Dr,yn=oe[1]*er+yn,$i(Dr,yn)):(ve=oe[0]*Mt+Dr,ze=oe[1]*er+yn,ot=oe[2]*Mt+Dr,Qt=oe[3]*er+yn,Dr=oe[4]*Mt+Dr,yn=oe[5]*er+yn,$l(ve,ze,ot,Qt,Dr,yn));return vt&&ho(),Mo(Ge),this},m.path=function(X){for(var fe=0;fe<X.length;fe++){var De=X[fe],Me=De.c;switch(De.op){case"m":Uo(Me[0],Me[1]);break;case"l":$i(Me[0],Me[1]);break;case"c":$l.apply(this,Me);break;case"h":ho()}}return this},m.__private__.rect=m.rect=function(X,fe,De,Me,Ge){if(isNaN(X)||isNaN(fe)||isNaN(De)||isNaN(Me)||!zi(Ge))throw new Error("Invalid arguments passed to jsPDF.rect");return _===w.COMPAT&&(Me=-Me),me([E(k(X)),E(R(fe)),E(k(De)),E(k(Me)),"re"].join(" ")),Mo(Ge),this},m.__private__.triangle=m.triangle=function(X,fe,De,Me,Ge,vt,Mt){if(isNaN(X)||isNaN(fe)||isNaN(De)||isNaN(Me)||isNaN(Ge)||isNaN(vt)||!zi(Mt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[De-X,Me-fe],[Ge-De,vt-Me],[X-Ge,fe-vt]],X,fe,[1,1],Mt,!0),this},m.__private__.roundedRect=m.roundedRect=function(X,fe,De,Me,Ge,vt,Mt){if(isNaN(X)||isNaN(fe)||isNaN(De)||isNaN(Me)||isNaN(Ge)||isNaN(vt)||!zi(Mt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var er=4/3*(Math.SQRT2-1);return Ge=Math.min(Ge,.5*De),vt=Math.min(vt,.5*Me),this.lines([[De-2*Ge,0],[Ge*er,0,Ge,vt-vt*er,Ge,vt],[0,Me-2*vt],[0,vt*er,-Ge*er,vt,-Ge,vt],[2*Ge-De,0],[-Ge*er,0,-Ge,-vt*er,-Ge,-vt],[0,2*vt-Me],[0,-vt*er,Ge*er,-vt,Ge,-vt]],X+Ge,fe,[1,1],Mt,!0),this},m.__private__.ellipse=m.ellipse=function(X,fe,De,Me,Ge){if(isNaN(X)||isNaN(fe)||isNaN(De)||isNaN(Me)||!zi(Ge))throw new Error("Invalid arguments passed to jsPDF.ellipse");var vt=4/3*(Math.SQRT2-1)*De,Mt=4/3*(Math.SQRT2-1)*Me;return Uo(X+De,fe),$l(X+De,fe-Mt,X+vt,fe-Me,X,fe-Me),$l(X-vt,fe-Me,X-De,fe-Mt,X-De,fe),$l(X-De,fe+Mt,X-vt,fe+Me,X,fe+Me),$l(X+vt,fe+Me,X+De,fe+Mt,X+De,fe),Mo(Ge),this},m.__private__.circle=m.circle=function(X,fe,De,Me){if(isNaN(X)||isNaN(fe)||isNaN(De)||!zi(Me))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(X,fe,De,De,Me)},m.setFont=function(X,fe,De){return De&&(fe=j(fe,De)),Ht=gu(X,fe,{disableWarning:!1}),this};var Es=m.__private__.getFont=m.getFont=function(){return kr[gu.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var X,fe,De={};for(X in Kr)if(Kr.hasOwnProperty(X))for(fe in De[X]=[],Kr[X])Kr[X].hasOwnProperty(fe)&&De[X].push(fe);return De},m.addFont=function(X,fe,De,Me,Ge){var vt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&vt.indexOf(arguments[3])!==-1?Ge=arguments[3]:arguments[3]&&vt.indexOf(arguments[3])==-1&&(De=j(De,Me)),Ge=Ge||"Identity-H",hu.call(this,X,fe,De,Ge)};var bn,vu=e.lineWidth||.200025,Gl=m.__private__.getLineWidth=m.getLineWidth=function(){return vu},HA=m.__private__.setLineWidth=m.setLineWidth=function(X){return vu=X,me(E(k(X))+" w"),this};m.__private__.setLineDash=br.API.setLineDash=br.API.setLineDashPattern=function(X,fe){if(X=X||[],fe=fe||0,isNaN(fe)||!Array.isArray(X))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return X=X.map(function(De){return E(k(De))}).join(" "),fe=E(k(fe)),me("["+X+"] "+fe+" d"),this};var pd=m.__private__.getLineHeight=m.getLineHeight=function(){return be*bn};m.__private__.getLineHeight=m.getLineHeight=function(){return be*bn};var gd=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(X){return typeof(X=X||1.15)=="number"&&(bn=X),this},yl=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return bn};gd(e.lineHeight);var Gi=m.__private__.getHorizontalCoordinate=function(X){return k(X)},Cs=m.__private__.getVerticalCoordinate=function(X){return _===w.ADVANCED?X:gr[H].mediaBox.topRightY-gr[H].mediaBox.bottomLeftY-k(X)},y0=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(X){return E(Gi(X))},bu=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(X){return E(Cs(X))},Ti=e.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Ne(Ti)},m.__private__.setStrokeColor=m.setDrawColor=function(X,fe,De,Me){return Ti=je({ch1:X,ch2:fe,ch3:De,ch4:Me,pdfColorType:"draw",precision:2}),me(Ti),this};var yu=e.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Ne(yu)},m.__private__.setFillColor=m.setFillColor=function(X,fe,De,Me){return yu=je({ch1:X,ch2:fe,ch3:De,ch4:Me,pdfColorType:"fill",precision:2}),me(yu),this};var Nc=e.textColor||"0 g",wf=m.__private__.getTextColor=m.getTextColor=function(){return Ne(Nc)};m.__private__.setTextColor=m.setTextColor=function(X,fe,De,Me){return Nc=je({ch1:X,ch2:fe,ch3:De,ch4:Me,pdfColorType:"text",precision:3}),this};var xd=e.charSpace,Ef=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(xd||0)};m.__private__.setCharSpace=m.setCharSpace=function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return xd=X,this};var VA=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(X){var fe=m.CapJoinStyles[X];if(fe===void 0)throw new Error("Line cap style of '"+X+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return VA=fe,me(fe+" J"),this};var vd=0;m.__private__.setLineJoin=m.setLineJoin=function(X){var fe=m.CapJoinStyles[X];if(fe===void 0)throw new Error("Line join style of '"+X+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return vd=fe,me(fe+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(X){if(X=X||0,isNaN(X))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return me(E(k(X))+" M"),this},m.GState=y4,m.setGState=function(X){(X=typeof X=="string"?pn[da[X]]:wu(null,X)).equals(Da)||(me("/"+X.id+" gs"),Da=X)};var wu=function(X,fe){if(!X||!da[X]){var De=!1;for(var Me in pn)if(pn.hasOwnProperty(Me)&&pn[Me].equals(fe)){De=!0;break}if(De)fe=pn[Me];else{var Ge="GS"+(Object.keys(pn).length+1).toString(10);pn[Ge]=fe,fe.id=Ge}return X&&(da[X]=fe.id),tt.publish("addGState",fe),fe}};m.addGState=function(X,fe){return wu(X,fe),this},m.saveGraphicsState=function(){return me("q"),Fn.push({key:Ht,size:be,color:Nc}),this},m.restoreGraphicsState=function(){me("Q");var X=Fn.pop();return Ht=X.key,be=X.size,Nc=X.color,Da=null,this},m.setCurrentTransformationMatrix=function(X){return me(X.toString()+" cm"),this},m.comment=function(X){return me("#"+X),this};var bd=function(X,fe){var De=X||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return De},set:function(vt){isNaN(vt)||(De=parseFloat(vt))}});var Me=fe||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Me},set:function(vt){isNaN(vt)||(Me=parseFloat(vt))}});var Ge="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ge},set:function(vt){Ge=vt.toString()}}),this},Cf=function(X,fe,De,Me){bd.call(this,X,fe),this.type="rect";var Ge=De||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ge},set:function(Mt){isNaN(Mt)||(Ge=parseFloat(Mt))}});var vt=Me||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return vt},set:function(Mt){isNaN(Mt)||(vt=parseFloat(Mt))}}),this},yd=function(){this.page=an,this.currentPage=H,this.pages=Fe.slice(0),this.pagesContext=gr.slice(0),this.x=jr,this.y=rr,this.matrix=on,this.width=Cu(H),this.height=Ki(H),this.outputDestination=_e,this.id="",this.objectNumber=-1};yd.prototype.restore=function(){an=this.page,H=this.currentPage,gr=this.pagesContext,Fe=this.pages,jr=this.x,rr=this.y,on=this.matrix,wd(H,this.width),_f(H,this.height),_e=this.outputDestination};var Eu=function(X,fe,De,Me,Ge){Et.push(new yd),an=H=0,Fe=[],jr=X,rr=fe,on=Ge,Bi([De,Me])},w0=function(X){if(xt[X])Et.pop().restore();else{var fe=new yd,De="Xo"+(Object.keys(Je).length+1).toString(10);fe.id=De,xt[X]=De,Je[De]=fe,tt.publish("addFormObject",fe),Et.pop().restore()}};for(var kc in m.beginFormObject=function(X,fe,De,Me,Ge){return Eu(X,fe,De,Me,Ge),this},m.endFormObject=function(X){return w0(X),this},m.doFormObject=function(X,fe){var De=Je[xt[X]];return me("q"),me(fe.toString()+" cm"),me("/"+De.id+" Do"),me("Q"),this},m.getFormObject=function(X){var fe=Je[xt[X]];return{x:fe.x,y:fe.y,width:fe.width,height:fe.height,matrix:fe.matrix}},m.save=function(X,fe){return X=X||"generated.pdf",(fe=fe||{}).returnPromise=fe.returnPromise||!1,fe.returnPromise===!1?(og(yf(Ec()),X),typeof og.unload=="function"&&Vr.setTimeout&&setTimeout(og.unload,911),this):new Promise(function(De,Me){try{var Ge=og(yf(Ec()),X);typeof og.unload=="function"&&Vr.setTimeout&&setTimeout(og.unload,911),De(Ge)}catch(vt){Me(vt.message)}})},br.API)br.API.hasOwnProperty(kc)&&(kc==="events"&&br.API.events.length?function(X,fe){var De,Me,Ge;for(Ge=fe.length-1;Ge!==-1;Ge--)De=fe[Ge][0],Me=fe[Ge][1],X.subscribe.apply(X,[De].concat(typeof Me=="function"?[Me]:Me))}(tt,br.API.events):m[kc]=br.API[kc]);var Cu=m.getPageWidth=function(X){return(gr[X=X||H].mediaBox.topRightX-gr[X].mediaBox.bottomLeftX)/yt},wd=m.setPageWidth=function(X,fe){gr[X].mediaBox.topRightX=fe*yt+gr[X].mediaBox.bottomLeftX},Ki=m.getPageHeight=function(X){return(gr[X=X||H].mediaBox.topRightY-gr[X].mediaBox.bottomLeftY)/yt},_f=m.setPageHeight=function(X,fe){gr[X].mediaBox.topRightY=fe*yt+gr[X].mediaBox.bottomLeftY};return m.internal={pdfEscape:On,getStyle:Lo,getFont:Es,getFontSize:Pe,getCharSpace:Ef,getTextColor:wf,getLineHeight:pd,getLineHeightFactor:yl,getLineWidth:Gl,write:Be,getHorizontalCoordinate:Gi,getVerticalCoordinate:Cs,getCoordinateString:y0,getVerticalCoordinateString:bu,collections:{},newObject:tn,newAdditionalObject:Te,newObjectDeferred:Xr,newObjectDeferredBegin:he,getFilters:Ye,putStream:dt,events:tt,scaleFactor:yt,pageSize:{getWidth:function(){return Cu(H)},setWidth:function(X){wd(H,X)},getHeight:function(){return Ki(H)},setHeight:function(X){_f(H,X)}},encryptionOptions:d,encryption:fa,getEncryptor:_c,output:Cc,getNumberOfPages:zn,pages:Fe,out:me,f2:L,f3:D,getPageInfo:Hl,getPageInfoByObjId:Or,getCurrentPageInfo:Vl,getPDFVersion:x,Point:bd,Rectangle:Cf,Matrix:bt,hasHotfix:Ql},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Cu(H)},set:function(X){wd(H,X)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Ki(H)},set:function(X){_f(H,X)},enumerable:!0,configurable:!0}),LA.call(m,We),Ht="F1",mu(a,r),tt.publish("initialized"),m}qv.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},qv.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},qv.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},qv.prototype.processOwnerPassword=function(e,t){return eP(ZD(t).substr(0,5),e)},qv.prototype.encryptor=function(e,t){var r=ZD(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return eP(r,n)}},y4.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||ya(e)!==ya(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},br.API={events:[]},br.version="2.5.2";var Fs=br.API,xU=1,Bx=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},yv=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},rn=function(e){return e.toFixed(2)},sm=function(e){return e.toFixed(5)};Fs.__acroform__={};var yc=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},UW=function(e){return e*xU},eA=function(e){var t=new Tce,r=mr.internal.getHeight(e)||0,n=mr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(rn(n)),Number(rn(r))],t},qVe=Fs.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},WVe=Fs.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},XVe=Fs.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},ei=Fs.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return XVe(e,t-1)},ti=Fs.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return qVe(e,t-1)},ri=Fs.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return WVe(e,t-1)},YVe=Fs.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],s=e[1],i=e[2],o=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(s+o)||0,c.upperRight_X=r(a+i)||0,c.upperRight_Y=n(s)||0,[Number(rn(c.lowerLeft_X)),Number(rn(c.lowerLeft_Y)),Number(rn(c.upperRight_X)),Number(rn(c.upperRight_Y))]},JVe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=tP(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+rn(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=eA(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},tP=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(D){return D.split(`
`)}):a.map(function(D){return[D]});var s=r,i=mr.internal.getHeight(e)||0;i=i<0?-i:i;var o=mr.internal.getWidth(e)||0;o=o<0?-o:o;var c=function(D,k,P){if(D+1<a.length){var R=k+" "+a[D+1][0];return f5(R,e,P).width<=o-4}return!1};s++;e:for(;s>0;){t="",s--;var u,d,f=f5("3",e,s).height,h=e.multiline?i-s:(i-f)/2,m=h+=2,g=0,x=0,v=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+f5(t,e,s=12).width+", FieldWidth:"+o+`
`;break}for(var y="",w=0,_=0;_<a.length;_++)if(a.hasOwnProperty(_)){var T=!1;if(a[_].length!==1&&v!==a[_].length-1){if((f+2)*(w+2)+2>i)continue e;y+=a[_][v],T=!0,x=_,_--}else{y=(y+=a[_][v]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var B=parseInt(_),j=c(B,y,s),E=_>=a.length-1;if(j&&!E){y+=" ",v=0;continue}if(j||E){if(E)x=B;else if(e.multiline&&(f+2)*(w+2)+2>i)continue e}else{if(!e.multiline||(f+2)*(w+2)+2>i)continue e;x=B}}for(var N="",I=g;I<=x;I++){var L=a[I];if(e.multiline){if(I===x){N+=L[v]+" ",v=(v+1)%L.length;continue}if(I===g){N+=L[L.length-1]+" ";continue}}N+=L[0]+" "}switch(N=N.substr(N.length-1)==" "?N.substr(0,N.length-1):N,d=f5(N,e,s).width,e.textAlign){case"right":u=o-d-2;break;case"center":u=(o-d)/2;break;case"left":default:u=2}t+=rn(u)+" "+rn(m)+` Td
`,t+="("+Bx(N)+`) Tj
`,t+=-rn(u)+` 0 Td
`,m=-(s+2),d=0,g=T?x:x+1,w++,y=""}break}return n.text=t,n.fontSize=s,n},f5=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},ZVe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},eze=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},tze=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),ya(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[n]}},rze=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(mf.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(ZVe)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");xU=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new jce,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&eze(s,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var i in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(i)){var o=n[i],c=[],u=o.Rect;if(o.Rect&&(o.Rect=YVe(o.Rect,a)),a.internal.newObjectDeferredBegin(o.objId,!0),o.DA=mr.createDefaultAppearanceStream(o),ya(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(c=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=JVe(o);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var f="";for(var h in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(h)){var m=o.appearanceStreamContent[h];if(f+="/"+h+" ",f+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var i in m)if(m.hasOwnProperty(i)){var g=m[i];typeof g=="function"&&(g=g.call(a,o)),f+="/"+i+" "+g+" ",a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g)}}else typeof(g=m)=="function"&&(g=g.call(a,o)),f+="/"+i+" "+g,a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:o.objId}),a.internal.out("endobj")}s&&tze(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},Bce=Fs.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(i){return i};if(Array.isArray(e)){for(var a="[",s=0;s<e.length;s++)switch(s!==0&&(a+=" "),ya(e[s])){case"boolean":case"number":case"object":a+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+Bx(n(e[s].toString()))+")"):a+=e[s].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},L6=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Bx(n(e))+")"},gA=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};gA.prototype.toString=function(){return this.objId+" 0 R"},gA.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},gA.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:Bce(a,this.objId,this.scope)}):a instanceof gA?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var Tce=function(){gA.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};yc(Tce,gA);var jce=function(){gA.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Bx(r(e))+")"}},set:function(r){e=r}})};yc(jce,gA);var mf=function e(){gA.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ei(t,3)},set:function(y){y?this.F=ti(t,3):this.F=ri(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof w4)return;s="FieldObject"+e.FieldNum++}var y=function(w){return w};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+Bx(y(s))+")"},set:function(y){s=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(y){s=y}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(y){i=y}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/xU:u},set:function(y){u=y}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof w4||this instanceof Dg))return L6(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=y}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof no?h:L6(h,this.objId,this.scope)},set:function(y){y=y.toString(),h=this instanceof no?y:y.substr(0,1)==="("?yv(y.substr(1,y.length-2)):yv(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof no?yv(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof no?"/"+y:y}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof no?m:L6(m,this.objId,this.scope)},set:function(y){y=y.toString(),m=this instanceof no?y:y.substr(0,1)==="("?yv(y.substr(1,y.length-2)):yv(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof no?yv(m.substr(1,m.length-1)):m},set:function(y){y=y.toString(),m=this instanceof no?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(y){y=!!y,x=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(y){g=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,1)},set:function(y){y?this.Ff=ti(this.Ff,1):this.Ff=ri(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,2)},set:function(y){y?this.Ff=ti(this.Ff,2):this.Ff=ri(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,3)},set:function(y){y?this.Ff=ti(this.Ff,3):this.Ff=ri(this.Ff,3)}});var v=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(v!==null)return v},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');v=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(v){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:v=2;break;case"center":case 1:v=1;break;case"left":case 0:default:v=0}}})};yc(mf,gA);var E1=function(){mf.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Bce(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,i,o){o||(o=1);for(var c,u=[];c=i.exec(s);)u.push(c[o]);return u}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,18)},set:function(r){r?this.Ff=ti(this.Ff,18):this.Ff=ri(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=ti(this.Ff,19):this.Ff=ri(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,20)},set:function(r){r?(this.Ff=ti(this.Ff,20),t.sort()):this.Ff=ri(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,22)},set:function(r){r?this.Ff=ti(this.Ff,22):this.Ff=ri(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,23)},set:function(r){r?this.Ff=ti(this.Ff,23):this.Ff=ri(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,27)},set:function(r){r?this.Ff=ti(this.Ff,27):this.Ff=ri(this.Ff,27)}}),this.hasAppearanceStream=!1};yc(E1,mf);var C1=function(){E1.call(this),this.fontName="helvetica",this.combo=!1};yc(C1,E1);var _1=function(){C1.call(this),this.combo=!0};yc(_1,C1);var kS=function(){_1.call(this),this.edit=!0};yc(kS,_1);var no=function(){mf.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,15)},set:function(r){r?this.Ff=ti(this.Ff,15):this.Ff=ri(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,16)},set:function(r){r?this.Ff=ti(this.Ff,16):this.Ff=ri(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,17)},set:function(r){r?this.Ff=ti(this.Ff,17):this.Ff=ri(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,26)},set:function(r){r?this.Ff=ti(this.Ff,26):this.Ff=ri(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+Bx(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){ya(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};yc(no,mf);var BS=function(){no.call(this),this.pushButton=!0};yc(BS,no);var S1=function(){no.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};yc(S1,no);var w4=function(){var e,t;mf.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(o){return o};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,i=[];for(s in i.push("<<"),n)i.push("/"+s+" ("+Bx(a(n[s]))+")");return i.push(">>"),i.join(`
`)},set:function(a){ya(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=mr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};yc(w4,mf),S1.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},S1.prototype.createOption=function(e){var t=new w4;return t.Parent=this,t.optionName=e,this.Kids.push(t),nze.call(this.scope,t),t};var TS=function(){no.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=mr.CheckBox.createAppearanceStream()};yc(TS,no);var Dg=function(){mf.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,13)},set:function(t){t?this.Ff=ti(this.Ff,13):this.Ff=ri(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,21)},set:function(t){t?this.Ff=ti(this.Ff,21):this.Ff=ri(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,23)},set:function(t){t?this.Ff=ti(this.Ff,23):this.Ff=ri(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,24)},set:function(t){t?this.Ff=ti(this.Ff,24):this.Ff=ri(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,25)},set:function(t){t?this.Ff=ti(this.Ff,25):this.Ff=ri(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,26)},set:function(t){t?this.Ff=ti(this.Ff,26):this.Ff=ri(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};yc(Dg,mf);var jS=function(){Dg.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,14)},set:function(e){e?this.Ff=ti(this.Ff,14):this.Ff=ri(this.Ff,14)}}),this.password=!0};yc(jS,Dg);var mr={CheckBox:{createAppearanceStream:function(){return{N:{On:mr.CheckBox.YesNormal},D:{On:mr.CheckBox.YesPushDown,Off:mr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=eA(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=tP(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+rn(mr.internal.getWidth(e))+" "+rn(mr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+rn(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=eA(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],s=mr.internal.getHeight(e),i=mr.internal.getWidth(e),o=tP(e,e.caption);return a.push("1 g"),a.push("0 0 "+rn(i)+" "+rn(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+rn(i-1)+" "+rn(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+rn(o.fontSize)+" Tf "+n),a.push(o.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=eA(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+rn(mr.internal.getWidth(e))+" "+rn(mr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:mr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=mr.RadioButton.Circle.YesNormal,t.D[e]=mr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=eA(e);t.scope=e.scope;var r=[],n=mr.internal.getWidth(e)<=mr.internal.getHeight(e)?mr.internal.getWidth(e)/4:mr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=mr.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+sm(mr.internal.getWidth(e)/2)+" "+sm(mr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=eA(e);t.scope=e.scope;var r=[],n=mr.internal.getWidth(e)<=mr.internal.getHeight(e)?mr.internal.getWidth(e)/4:mr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*mr.internal.Bezier_C).toFixed(5)),i=Number((n*mr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+sm(mr.internal.getWidth(e)/2)+" "+sm(mr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+sm(mr.internal.getWidth(e)/2)+" "+sm(mr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=eA(e);t.scope=e.scope;var r=[],n=mr.internal.getWidth(e)<=mr.internal.getHeight(e)?mr.internal.getWidth(e)/4:mr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*mr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+sm(mr.internal.getWidth(e)/2)+" "+sm(mr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:mr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=mr.RadioButton.Cross.YesNormal,t.D[e]=mr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=eA(e);t.scope=e.scope;var r=[],n=mr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+rn(mr.internal.getWidth(e)-2)+" "+rn(mr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(rn(n.x1.x)+" "+rn(n.x1.y)+" m"),r.push(rn(n.x2.x)+" "+rn(n.x2.y)+" l"),r.push(rn(n.x4.x)+" "+rn(n.x4.y)+" m"),r.push(rn(n.x3.x)+" "+rn(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=eA(e);t.scope=e.scope;var r=mr.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+rn(mr.internal.getWidth(e))+" "+rn(mr.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+rn(mr.internal.getWidth(e)-2)+" "+rn(mr.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(rn(r.x1.x)+" "+rn(r.x1.y)+" m"),n.push(rn(r.x2.x)+" "+rn(r.x2.y)+" l"),n.push(rn(r.x4.x)+" "+rn(r.x4.y)+" m"),n.push(rn(r.x3.x)+" "+rn(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=eA(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+rn(mr.internal.getWidth(e))+" "+rn(mr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};mr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=mr.internal.getWidth(e),r=mr.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},mr.internal.getWidth=function(e){var t=0;return ya(e)==="object"&&(t=UW(e.Rect[2])),t},mr.internal.getHeight=function(e){var t=0;return ya(e)==="object"&&(t=UW(e.Rect[3])),t};var nze=Fs.addField=function(e){if(rze(this,e),!(e instanceof mf))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Fs.AcroFormChoiceField=E1,Fs.AcroFormListBox=C1,Fs.AcroFormComboBox=_1,Fs.AcroFormEditBox=kS,Fs.AcroFormButton=no,Fs.AcroFormPushButton=BS,Fs.AcroFormRadioButton=S1,Fs.AcroFormCheckBox=TS,Fs.AcroFormTextField=Dg,Fs.AcroFormPasswordField=jS,Fs.AcroFormAppearance=mr,Fs.AcroForm={ChoiceField:E1,ListBox:C1,ComboBox:_1,EditBox:kS,Button:no,PushButton:BS,RadioButton:S1,CheckBox:TS,TextField:Dg,PasswordField:jS,Appearance:mr},br.AcroForm={ChoiceField:E1,ListBox:C1,ComboBox:_1,EditBox:kS,Button:no,PushButton:BS,RadioButton:S1,CheckBox:TS,TextField:Dg,PasswordField:jS,Appearance:mr};br.AcroForm;function Ice(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(D,k){var P,R,W,V,G,z=t;if((k=k||t)==="RGBA"||D.data!==void 0&&D.data instanceof Uint8ClampedArray&&"height"in D&&"width"in D)return"RGBA";if(j(D))for(G in r)for(W=r[G],P=0;P<W.length;P+=1){for(V=!0,R=0;R<W[P].length;R+=1)if(W[P][R]!==void 0&&W[P][R]!==D[R]){V=!1;break}if(V===!0){z=G;break}}else for(G in r)for(W=r[G],P=0;P<W.length;P+=1){for(V=!0,R=0;R<W[P].length;R+=1)if(W[P][R]!==void 0&&W[P][R]!==D.charCodeAt(R)){V=!1;break}if(V===!0){z=G;break}}return z===t&&k!==t&&(z=k),z},a=function D(k){for(var P=this.internal.write,R=this.internal.putStream,W=(0,this.internal.getFilters)();W.indexOf("FlateEncode")!==-1;)W.splice(W.indexOf("FlateEncode"),1);k.objectId=this.internal.newObject();var V=[];if(V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Image"}),V.push({key:"Width",value:k.width}),V.push({key:"Height",value:k.height}),k.colorSpace===v.INDEXED?V.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(k.palette.length/3-1)+" "+("sMask"in k&&k.sMask!==void 0?k.objectId+2:k.objectId+1)+" 0 R]"}):(V.push({key:"ColorSpace",value:"/"+k.colorSpace}),k.colorSpace===v.DEVICE_CMYK&&V.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),V.push({key:"BitsPerComponent",value:k.bitsPerComponent}),"decodeParameters"in k&&k.decodeParameters!==void 0&&V.push({key:"DecodeParms",value:"<<"+k.decodeParameters+">>"}),"transparency"in k&&Array.isArray(k.transparency)){for(var G="",z=0,K=k.transparency.length;z<K;z++)G+=k.transparency[z]+" "+k.transparency[z]+" ";V.push({key:"Mask",value:"["+G+"]"})}k.sMask!==void 0&&V.push({key:"SMask",value:k.objectId+1+" 0 R"});var J=k.filter!==void 0?["/"+k.filter]:void 0;if(R({data:k.data,additionalKeyValues:V,alreadyAppliedFilters:J,objectId:k.objectId}),P("endobj"),"sMask"in k&&k.sMask!==void 0){var te="/Predictor "+k.predictor+" /Colors 1 /BitsPerComponent "+k.bitsPerComponent+" /Columns "+k.width,M={width:k.width,height:k.height,colorSpace:"DeviceGray",bitsPerComponent:k.bitsPerComponent,decodeParameters:te,data:k.sMask};"filter"in k&&(M.filter=k.filter),D.call(this,M)}if(k.colorSpace===v.INDEXED){var H=this.internal.newObject();R({data:N(new Uint8Array(k.palette)),objectId:H}),P("endobj")}},s=function(){var D=this.internal.collections.addImage_images;for(var k in D)a.call(this,D[k])},i=function(){var D,k=this.internal.collections.addImage_images,P=this.internal.write;for(var R in k)P("/I"+(D=k[R]).index,D.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",i))},c=function(){var D=this.internal.collections.addImage_images;return o.call(this),D},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(D){return typeof e["process"+D.toUpperCase()]=="function"},f=function(D){return ya(D)==="object"&&D.nodeType===1},h=function(D,k){if(D.nodeName==="IMG"&&D.hasAttribute("src")){var P=""+D.getAttribute("src");if(P.indexOf("data:image/")===0)return d2(unescape(P).split("base64,").pop());var R=e.loadFile(P,!0);if(R!==void 0)return R}if(D.nodeName==="CANVAS"){if(D.width===0||D.height===0)throw new Error("Given canvas must have data. Canvas width: "+D.width+", height: "+D.height);var W;switch(k){case"PNG":W="image/png";break;case"WEBP":W="image/webp";break;case"JPEG":case"JPG":default:W="image/jpeg"}return d2(D.toDataURL(W,1).split("base64,").pop())}},m=function(D){var k=this.internal.collections.addImage_images;if(k){for(var P in k)if(D===k[P].alias)return k[P]}},g=function(D,k,P){return D||k||(D=-96,k=-96),D<0&&(D=-1*P.width*72/D/this.internal.scaleFactor),k<0&&(k=-1*P.height*72/k/this.internal.scaleFactor),D===0&&(D=k*P.width/P.height),k===0&&(k=D*P.height/P.width),[D,k]},x=function(D,k,P,R,W,V){var G=g.call(this,P,R,W),z=this.internal.getCoordinateString,K=this.internal.getVerticalCoordinateString,J=c.call(this);if(P=G[0],R=G[1],J[W.index]=W,V){V*=Math.PI/180;var te=Math.cos(V),M=Math.sin(V),H=function(Z){return Z.toFixed(4)},Y=[H(te),H(M),H(-1*M),H(te),0,0,"cm"]}this.internal.write("q"),V?(this.internal.write([1,"0","0",1,z(D),K(k+R),"cm"].join(" ")),this.internal.write(Y.join(" ")),this.internal.write([z(P),"0","0",z(R),"0","0","cm"].join(" "))):this.internal.write([z(P),"0","0",z(R),z(D),K(k+R),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+W.index+" Do"),this.internal.write("Q")},v=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=e.__addimage__.sHashCode=function(D){var k,P,R=0;if(typeof D=="string")for(P=D.length,k=0;k<P;k++)R=(R<<5)-R+D.charCodeAt(k),R|=0;else if(j(D))for(P=D.byteLength/2,k=0;k<P;k++)R=(R<<5)-R+D[k],R|=0;return R},_=e.__addimage__.validateStringAsBase64=function(D){(D=D||"").toString().trim();var k=!0;return D.length===0&&(k=!1),D.length%4!=0&&(k=!1),/^[A-Za-z0-9+/]+$/.test(D.substr(0,D.length-2))===!1&&(k=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(D.substr(-2))===!1&&(k=!1),k},T=e.__addimage__.extractImageFromDataUrl=function(D){var k=(D=D||"").split("base64,"),P=null;if(k.length===2){var R=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(k[0]);Array.isArray(R)&&(P={mimeType:R[1],charset:R[2],data:k[1]})}return P},B=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(D){return B()&&D instanceof ArrayBuffer};var j=e.__addimage__.isArrayBufferView=function(D){return B()&&typeof Uint32Array<"u"&&(D instanceof Int8Array||D instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&D instanceof Uint8ClampedArray||D instanceof Int16Array||D instanceof Uint16Array||D instanceof Int32Array||D instanceof Uint32Array||D instanceof Float32Array||D instanceof Float64Array)},E=e.__addimage__.binaryStringToUint8Array=function(D){for(var k=D.length,P=new Uint8Array(k),R=0;R<k;R++)P[R]=D.charCodeAt(R);return P},N=e.__addimage__.arrayBufferToBinaryString=function(D){for(var k="",P=j(D)?D:new Uint8Array(D),R=0;R<P.length;R+=8192)k+=String.fromCharCode.apply(null,P.subarray(R,R+8192));return k};e.addImage=function(){var D,k,P,R,W,V,G,z,K;if(typeof arguments[1]=="number"?(k=t,P=arguments[1],R=arguments[2],W=arguments[3],V=arguments[4],G=arguments[5],z=arguments[6],K=arguments[7]):(k=arguments[1],P=arguments[2],R=arguments[3],W=arguments[4],V=arguments[5],G=arguments[6],z=arguments[7],K=arguments[8]),ya(D=arguments[0])==="object"&&!f(D)&&"imageData"in D){var J=D;D=J.imageData,k=J.format||k||t,P=J.x||P||0,R=J.y||R||0,W=J.w||J.width||W,V=J.h||J.height||V,G=J.alias||G,z=J.compression||z,K=J.rotation||J.angle||K}var te=this.internal.getFilters();if(z===void 0&&te.indexOf("FlateEncode")!==-1&&(z="SLOW"),isNaN(P)||isNaN(R))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var M=I.call(this,D,k,G,z);return x.call(this,P,R,W,V,M,K),this};var I=function(D,k,P,R){var W,V,G;if(typeof D=="string"&&n(D)===t){D=unescape(D);var z=L(D,!1);(z!==""||(z=e.loadFile(D,!0))!==void 0)&&(D=z)}if(f(D)&&(D=h(D,k)),k=n(D,k),!d(k))throw new Error("addImage does not support files of type '"+k+"', please ensure that a plugin for '"+k+"' support is added.");if(((G=P)==null||G.length===0)&&(P=function(K){return typeof K=="string"||j(K)?w(K):j(K.data)?w(K.data):null}(D)),(W=m.call(this,P))||(B()&&(D instanceof Uint8Array||k==="RGBA"||(V=D,D=E(D))),W=this["process"+k.toUpperCase()](D,u.call(this),P,function(K){return K&&typeof K=="string"&&(K=K.toUpperCase()),K in e.image_compression?K:y.NONE}(R),V)),!W)throw new Error("An unknown error occurred whilst processing the image.");return W},L=e.__addimage__.convertBase64ToBinaryString=function(D,k){var P;k=typeof k!="boolean"||k;var R,W="";if(typeof D=="string"){R=(P=T(D))!==null?P.data:D;try{W=d2(R)}catch(V){if(k)throw _(R)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+V.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return W};e.getImageProperties=function(D){var k,P,R="";if(f(D)&&(D=h(D)),typeof D=="string"&&n(D)===t&&((R=L(D,!1))===""&&(R=e.loadFile(D)||""),D=R),P=n(D),!d(P))throw new Error("addImage does not support files of type '"+P+"', please ensure that a plugin for '"+P+"' support is added.");if(!B()||D instanceof Uint8Array||(D=E(D)),!(k=this["process"+P.toUpperCase()](D)))throw new Error("An unknown error occurred whilst processing the image");return k.fileType=P,k}})(br.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};br.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,s,i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var h=0;h<u.length;h++){n=u[h];var m=this.internal.pdfEscape,g=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),v=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(x.objId),w=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+m(y(n.contents))+")",s+=" /Popup "+v.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+m(y(w))+") >>",x.content=s;var _=x.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+i(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+_,n.open&&(s+=" /Open true"),s+=" >>",v.content=s,this.internal.write(x.objId,"0 R",v.objId,"0 R");break;case"freetext":a="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var T=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+m(g(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+T+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var B=this.annotations._nameMap[n.options.name];n.options.pageNumber=B.page,n.options.top=B.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+m(g(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var j=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+j+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,s,i){var o=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+s)},options:i,type:"link"})},e.textWithLink=function(r,n,a,s){var i,o,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var d=this.splitTextToSize(r,o).length;i=Math.ceil(u*d)}else o=c,i=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,a-u,o,i,s),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(br.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(x){return t[x.charCodeAt(0)]!==void 0},i=e.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},o=e.__arabicParser__.isArabicEndLetter=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(x){return i(x)&&a.indexOf(x.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(x){var v=0,y=r,w="",_=0;for(v=0;v<x.length;v+=1)y[x.charCodeAt(v)]!==void 0?(_++,typeof(y=y[x.charCodeAt(v)])=="number"&&(w+=String.fromCharCode(y),y=r,_=0),v===x.length-1&&(y=r,w+=x.charAt(v-(_-1)),v-=_-1,_=0)):(y=r,w+=x.charAt(v-_),v-=_,_=0);return w};e.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&n[x.charCodeAt(0)]!==void 0};var h=e.__arabicParser__.getCorrectForm=function(x,v,y){return i(x)?s(x)===!1?-1:!u(x)||!i(v)&&!i(y)||!i(y)&&o(v)||o(x)&&!i(v)||o(x)&&c(v)||o(x)&&o(v)?0:d(x)&&i(v)&&!o(v)&&i(y)&&u(y)?3:o(x)||!i(y)?1:2:-1},m=function(x){var v=0,y=0,w=0,_="",T="",B="",j=(x=x||"").split("\\s+"),E=[];for(v=0;v<j.length;v+=1){for(E.push(""),y=0;y<j[v].length;y+=1)_=j[v][y],T=j[v][y-1],B=j[v][y+1],i(_)?(w=h(_,T,B),E[v]+=w!==-1?String.fromCharCode(t[_.charCodeAt(0)][w]):_):E[v]+=_;E[v]=f(E[v])}return E.join(" ")},g=e.__arabicParser__.processArabic=e.processArabic=function(){var x,v=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(v)){var w=0;for(y=[],w=0;w<v.length;w+=1)Array.isArray(v[w])?y.push([m(v[w][0]),v[w][1],v[w][2]]):y.push([m(v[w])]);x=y}else x=m(v);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};e.events.push(["preProcessText",g])}(br.API),br.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(o){i=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(br.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(x){u=x}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(x){f=x}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(x){h=x}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(x){m=x}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(x){g=x}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),h=u.scaleFactor||this.internal.scaleFactor,m=0,g=0,x=0,v=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=u.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(_,T){return _.concat(v.splitTextToSize(T,y))},[])):c=Array.isArray(c)?c:[c];for(var w=0;w<c.length;w++)m<(x=this.getStringUnitWidth(c[w],{font:f})*d)&&(m=x);return m!==0&&(g=c.length),{w:m/=h,h:Math.max((g*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/h,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=e.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,h=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,m&&h&&(this.printHeaderRow(c.lineNumber,!0),c.y+=h[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};e.table=function(c,u,d,f,h){if(n.call(this),!d)throw new Error("No data for PDF table.");var m,g,x,v,y=[],w=[],_=[],T={},B={},j=[],E=[],N=(h=h||{}).autoSize||!1,I=h.printHeaders!==!1,L=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,D=h.margins||Object.assign({width:this.getPageWidth()},t),k=typeof h.padding=="number"?h.padding:3,P=h.headerBackgroundColor||"#c8c8c8",R=h.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=D,this.internal.__cell__.table_font_size=L,this.internal.__cell__.padding=k,this.internal.__cell__.headerBackgroundColor=P,this.internal.__cell__.headerTextColor=R,this.setFontSize(L),f==null)w=y=Object.keys(d[0]),_=y.map(function(){return"left"});else if(Array.isArray(f)&&ya(f[0])==="object")for(y=f.map(function(J){return J.name}),w=f.map(function(J){return J.prompt||J.name||""}),_=f.map(function(J){return J.align||"left"}),m=0;m<f.length;m+=1)B[f[m].name]=f[m].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(w=y=f,_=y.map(function(){return"left"}));if(N||Array.isArray(f)&&typeof f[0]=="string")for(m=0;m<y.length;m+=1){for(T[v=y[m]]=d.map(function(J){return J[v]}),this.setFont(void 0,"bold"),j.push(this.getTextDimensions(w[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=T[v],this.setFont(void 0,"normal"),x=0;x<g.length;x+=1)j.push(this.getTextDimensions(g[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);B[v]=Math.max.apply(null,j)+k+k,j=[]}if(I){var W={};for(m=0;m<y.length;m+=1)W[y[m]]={},W[y[m]].text=w[m],W[y[m]].align=_[m];var V=o.call(this,W,B);E=y.map(function(J){return new s(c,u,B[J],V,W[J].text,void 0,W[J].align)}),this.setTableHeaderRow(E),this.printHeaderRow(1,!1)}var G=f.reduce(function(J,te){return J[te.name]=te.align,J},{});for(m=0;m<d.length;m+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:m,data:d[m]},this);var z=o.call(this,d[m],B);for(x=0;x<y.length;x+=1){var K=d[m][y[x]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:m,col:x,data:K},this),i.call(this,new s(c,u,B[y[x]],z,K,m+2,G[y[x]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var o=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(c).map(function(m){var g=c[m];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,u[m]-d-d)},this).map(function(m){return this.getLineHeightFactor()*m.length*f/h+d+d},this).reduce(function(m,g){return Math.max(m,g)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){d=this.internal.__cell__.tableHeaderRow[m].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,h.push(d)),d.lineNumber=c;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,d),this.setTextColor(g)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),r=!1}}(br.API);var Fce={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Oce=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],rP=Ice(Oce),Dce=[100,200,300,400,500,600,700,800,900],aze=Ice(Dce);function nP(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return Fce[s=s||"normal"]?s:"normal"}(e.style),n=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(s){return typeof rP[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function QW(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var sze={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},HW={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function VW(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function ize(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},sze,r.genericFontFamilies||{}),s=null,i=null,o=0;o<t.length;++o)if(a[(s=nP(t[o])).family]&&(s.family=a[s.family]),e.hasOwnProperty(s.family)){i=e[s.family];break}if(!(i=i||e[n]))throw new Error("Could not find a font-family for the rule '"+VW(s)+"' and default family '"+n+"'.");if(i=function(c,u){if(u[c])return u[c];var d=rP[c],f=d<=rP.normal?-1:1,h=QW(u,Oce,d,f);if(!h)throw new Error("Could not find a matching font-stretch value for "+c);return h}(s.stretch,i),i=function(c,u){if(u[c])return u[c];for(var d=Fce[c],f=0;f<d.length;++f)if(u[d[f]])return u[d[f]];throw new Error("Could not find a matching font-style for "+c)}(s.style,i),!(i=function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var d=aze[c],f=QW(u,Dce,d,c<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+c);return f}(s.weight,i)))throw new Error("Failed to resolve a font for the rule '"+VW(s)+"'.");return i}function zW(e){return e.trimLeft()}function oze(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function lze(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var A5,$W,GW,M6=["times"];(function(e){var t,r,n,a,s,i,o,c,u,d=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new c,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new i,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new i,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,i=this.internal.Point,o=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var H=M;Object.defineProperty(this,"pdf",{get:function(){return H}});var Y=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Y},set:function(Se){Y=!!Se}});var Z=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Z},set:function(Se){Z=!!Se}});var ae=0;Object.defineProperty(this,"posX",{get:function(){return ae},set:function(Se){isNaN(Se)||(ae=Se)}});var le=0;Object.defineProperty(this,"posY",{get:function(){return le},set:function(Se){isNaN(Se)||(le=Se)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Se){var me;typeof Se=="number"?me=[Se,Se,Se,Se]:((me=new Array(4))[0]=Se[0],me[1]=Se.length>=2?Se[1]:me[0],me[2]=Se.length>=3?Se[2]:me[0],me[3]=Se.length>=4?Se[3]:me[1]),u.margin=me}});var ie=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ie},set:function(Se){ie=Se}});var ce=0;Object.defineProperty(this,"lastBreak",{get:function(){return ce},set:function(Se){ce=Se}});var Ae=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ae},set:function(Se){Ae=Se}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Se){Se instanceof d&&(u=Se)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Se){u.path=Se}});var Fe=[];Object.defineProperty(this,"ctxStack",{get:function(){return Fe},set:function(Se){Fe=Se}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Se){var me;me=h(Se),this.ctx.fillStyle=me.style,this.ctx.isFillTransparent=me.a===0,this.ctx.fillOpacity=me.a,this.pdf.setFillColor(me.r,me.g,me.b,{a:me.a}),this.pdf.setTextColor(me.r,me.g,me.b,{a:me.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Se){var me=h(Se);this.ctx.strokeStyle=me.style,this.ctx.isStrokeTransparent=me.a===0,this.ctx.strokeOpacity=me.a,me.a===0?this.pdf.setDrawColor(255,255,255):(me.a,this.pdf.setDrawColor(me.r,me.g,me.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Se){["butt","round","square"].indexOf(Se)!==-1&&(this.ctx.lineCap=Se,this.pdf.setLineCap(Se))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Se){isNaN(Se)||(this.ctx.lineWidth=Se,this.pdf.setLineWidth(Se))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Se){["bevel","round","miter"].indexOf(Se)!==-1&&(this.ctx.lineJoin=Se,this.pdf.setLineJoin(Se))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Se){isNaN(Se)||(this.ctx.miterLimit=Se,this.pdf.setMiterLimit(Se))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Se){this.ctx.textBaseline=Se}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Se){["right","end","center","left","start"].indexOf(Se)!==-1&&(this.ctx.textAlign=Se)}});var ne=null;function _e(Se,me){if(ne===null){var Be=function(Le){var We=[];return Object.keys(Le).forEach(function(be){Le[be].forEach(function(Oe){var Pe=null;switch(Oe){case"bold":Pe={family:be,weight:"bold"};break;case"italic":Pe={family:be,style:"italic"};break;case"bolditalic":Pe={family:be,weight:"bold",style:"italic"};break;case"":case"normal":Pe={family:be}}Pe!==null&&(Pe.ref={name:be,style:Oe},We.push(Pe))})}),We}(Se.getFontList());ne=function(Le){for(var We={},be=0;be<Le.length;++be){var Oe=nP(Le[be]),Pe=Oe.family,qe=Oe.stretch,et=Oe.style,ct=Oe.weight;We[Pe]=We[Pe]||{},We[Pe][qe]=We[Pe][qe]||{},We[Pe][qe][et]=We[Pe][qe][et]||{},We[Pe][qe][et][ct]=Oe}return We}(Be.concat(me))}return ne}var Ie=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ie},set:function(Se){ne=null,Ie=Se}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Se){var me;if(this.ctx.font=Se,(me=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Se))!==null){var Be=me[1],Le=(me[2],me[3]),We=me[4],be=(me[5],me[6]),Oe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(We)[2];We=Math.floor(Oe==="px"?parseFloat(We)*this.pdf.internal.scaleFactor:Oe==="em"?parseFloat(We)*this.pdf.getFontSize():parseFloat(We)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(We);var Pe=function(Rt){var Ht,yt,jr=[],rr=Rt.trim();if(rr==="")return M6;if(rr in HW)return[HW[rr]];for(;rr!=="";){switch(yt=null,Ht=(rr=zW(rr)).charAt(0)){case'"':case"'":yt=oze(rr.substring(1),Ht);break;default:yt=lze(rr)}if(yt===null||(jr.push(yt[0]),(rr=zW(yt[1]))!==""&&rr.charAt(0)!==","))return M6;rr=rr.replace(/^,/,"")}return jr}(be);if(this.fontFaces){var qe=ize(_e(this.pdf,this.fontFaces),Pe.map(function(Rt){return{family:Rt,stretch:"normal",weight:Le,style:Be}}));this.pdf.setFont(qe.ref.name,qe.ref.style)}else{var et="";(Le==="bold"||parseInt(Le,10)>=700||Be==="bold")&&(et="bold"),Be==="italic"&&(et+="italic"),et.length===0&&(et="normal");for(var ct="",pt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ft=0;Ft<Pe.length;Ft++){if(this.pdf.internal.getFont(Pe[Ft],et,{noFallback:!0,disableWarning:!0})!==void 0){ct=Pe[Ft];break}if(et==="bolditalic"&&this.pdf.internal.getFont(Pe[Ft],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ct=Pe[Ft],et="bold";else if(this.pdf.internal.getFont(Pe[Ft],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ct=Pe[Ft],et="normal";break}}if(ct===""){for(var Ut=0;Ut<Pe.length;Ut++)if(pt[Pe[Ut]]){ct=pt[Pe[Ut]];break}}ct=ct===""?"Times":ct,this.pdf.setFont(ct,et)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Se){this.ctx.globalCompositeOperation=Se}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Se){this.ctx.globalAlpha=Se}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Se){this.ctx.lineDashOffset=Se,te.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Se){this.ctx.lineDash=Se,te.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Se){this.ctx.ignoreClearRect=!!Se}})};f.prototype.setLineDash=function(M){this.lineDash=M},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){T.call(this,"fill",!1)},f.prototype.stroke=function(){T.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(M,H){if(isNaN(M)||isNaN(H))throw ja.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Y=this.ctx.transform.applyToPoint(new i(M,H));this.path.push({type:"mt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new i(M,H)},f.prototype.closePath=function(){var M=new i(0,0),H=0;for(H=this.path.length-1;H!==-1;H--)if(this.path[H].type==="begin"&&ya(this.path[H+1])==="object"&&typeof this.path[H+1].x=="number"){M=new i(this.path[H+1].x,this.path[H+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(M.x,M.y)},f.prototype.lineTo=function(M,H){if(isNaN(M)||isNaN(H))throw ja.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Y=this.ctx.transform.applyToPoint(new i(M,H));this.path.push({type:"lt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new i(Y.x,Y.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),T.call(this,null,!0)},f.prototype.quadraticCurveTo=function(M,H,Y,Z){if(isNaN(Y)||isNaN(Z)||isNaN(M)||isNaN(H))throw ja.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ae=this.ctx.transform.applyToPoint(new i(Y,Z)),le=this.ctx.transform.applyToPoint(new i(M,H));this.path.push({type:"qct",x1:le.x,y1:le.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new i(ae.x,ae.y)},f.prototype.bezierCurveTo=function(M,H,Y,Z,ae,le){if(isNaN(ae)||isNaN(le)||isNaN(M)||isNaN(H)||isNaN(Y)||isNaN(Z))throw ja.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ie=this.ctx.transform.applyToPoint(new i(ae,le)),ce=this.ctx.transform.applyToPoint(new i(M,H)),Ae=this.ctx.transform.applyToPoint(new i(Y,Z));this.path.push({type:"bct",x1:ce.x,y1:ce.y,x2:Ae.x,y2:Ae.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new i(ie.x,ie.y)},f.prototype.arc=function(M,H,Y,Z,ae,le){if(isNaN(M)||isNaN(H)||isNaN(Y)||isNaN(Z)||isNaN(ae))throw ja.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(le=!!le,!this.ctx.transform.isIdentity){var ie=this.ctx.transform.applyToPoint(new i(M,H));M=ie.x,H=ie.y;var ce=this.ctx.transform.applyToPoint(new i(0,Y)),Ae=this.ctx.transform.applyToPoint(new i(0,0));Y=Math.sqrt(Math.pow(ce.x-Ae.x,2)+Math.pow(ce.y-Ae.y,2))}Math.abs(ae-Z)>=2*Math.PI&&(Z=0,ae=2*Math.PI),this.path.push({type:"arc",x:M,y:H,radius:Y,startAngle:Z,endAngle:ae,counterclockwise:le})},f.prototype.arcTo=function(M,H,Y,Z,ae){throw new Error("arcTo not implemented.")},f.prototype.rect=function(M,H,Y,Z){if(isNaN(M)||isNaN(H)||isNaN(Y)||isNaN(Z))throw ja.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,H),this.lineTo(M+Y,H),this.lineTo(M+Y,H+Z),this.lineTo(M,H+Z),this.lineTo(M,H),this.lineTo(M+Y,H),this.lineTo(M,H)},f.prototype.fillRect=function(M,H,Y,Z){if(isNaN(M)||isNaN(H)||isNaN(Y)||isNaN(Z))throw ja.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var ae={};this.lineCap!=="butt"&&(ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,H,Y,Z),this.fill(),ae.hasOwnProperty("lineCap")&&(this.lineCap=ae.lineCap),ae.hasOwnProperty("lineJoin")&&(this.lineJoin=ae.lineJoin)}},f.prototype.strokeRect=function(M,H,Y,Z){if(isNaN(M)||isNaN(H)||isNaN(Y)||isNaN(Z))throw ja.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(M,H,Y,Z),this.stroke())},f.prototype.clearRect=function(M,H,Y,Z){if(isNaN(M)||isNaN(H)||isNaN(Y)||isNaN(Z))throw ja.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,H,Y,Z))},f.prototype.save=function(M){M=typeof M!="boolean"||M;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("q");if(this.pdf.setPage(H),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var Z=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Z}},f.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("Q");this.pdf.setPage(H),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(M){var H,Y,Z,ae;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))H=0,Y=0,Z=0,ae=0;else{var le=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(le!==null)H=parseInt(le[1]),Y=parseInt(le[2]),Z=parseInt(le[3]),ae=1;else if((le=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)H=parseInt(le[1]),Y=parseInt(le[2]),Z=parseInt(le[3]),ae=parseFloat(le[4]);else{if(ae=1,typeof M=="string"&&M.charAt(0)!=="#"){var ie=new Sce(M);M=ie.ok?ie.toHex():"#000000"}M.length===4?(H=M.substring(1,2),H+=H,Y=M.substring(2,3),Y+=Y,Z=M.substring(3,4),Z+=Z):(H=M.substring(1,3),Y=M.substring(3,5),Z=M.substring(5,7)),H=parseInt(H,16),Y=parseInt(Y,16),Z=parseInt(Z,16)}}return{r:H,g:Y,b:Z,a:ae,style:M}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(M,H,Y,Z){if(isNaN(H)||isNaN(Y)||typeof M!="string")throw ja.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Z=isNaN(Z)?void 0:Z,!m.call(this)){var ae=z(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;k.call(this,{text:M,x:H,y:Y,scale:le,angle:ae,align:this.textAlign,maxWidth:Z})}},f.prototype.strokeText=function(M,H,Y,Z){if(isNaN(H)||isNaN(Y)||typeof M!="string")throw ja.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){Z=isNaN(Z)?void 0:Z;var ae=z(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;k.call(this,{text:M,x:H,y:Y,scale:le,renderingMode:"stroke",angle:ae,align:this.textAlign,maxWidth:Z})}},f.prototype.measureText=function(M){if(typeof M!="string")throw ja.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var H=this.pdf,Y=this.pdf.internal.scaleFactor,Z=H.internal.getFontSize(),ae=H.getStringUnitWidth(M)*Z/H.internal.scaleFactor,le=function(ie){var ce=(ie=ie||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ce}}),this};return new le({width:ae*=Math.round(96*Y/72*1e4)/1e4})},f.prototype.scale=function(M,H){if(isNaN(M)||isNaN(H))throw ja.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Y=new c(M,0,0,H,0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},f.prototype.rotate=function(M){if(isNaN(M))throw ja.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var H=new c(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(H)},f.prototype.translate=function(M,H){if(isNaN(M)||isNaN(H))throw ja.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Y=new c(1,0,0,1,M,H);this.ctx.transform=this.ctx.transform.multiply(Y)},f.prototype.transform=function(M,H,Y,Z,ae,le){if(isNaN(M)||isNaN(H)||isNaN(Y)||isNaN(Z)||isNaN(ae)||isNaN(le))throw ja.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ie=new c(M,H,Y,Z,ae,le);this.ctx.transform=this.ctx.transform.multiply(ie)},f.prototype.setTransform=function(M,H,Y,Z,ae,le){M=isNaN(M)?1:M,H=isNaN(H)?0:H,Y=isNaN(Y)?0:Y,Z=isNaN(Z)?1:Z,ae=isNaN(ae)?0:ae,le=isNaN(le)?0:le,this.ctx.transform=new c(M,H,Y,Z,ae,le)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(M,H,Y,Z,ae,le,ie,ce,Ae){var Fe=this.pdf.getImageProperties(M),ne=1,_e=1,Ie=1,Se=1;Z!==void 0&&ce!==void 0&&(Ie=ce/Z,Se=Ae/ae,ne=Fe.width/Z*ce/Z,_e=Fe.height/ae*Ae/ae),le===void 0&&(le=H,ie=Y,H=0,Y=0),Z!==void 0&&ce===void 0&&(ce=Z,Ae=ae),Z===void 0&&ce===void 0&&(ce=Fe.width,Ae=Fe.height);for(var me,Be=this.ctx.transform.decompose(),Le=z(Be.rotate.shx),We=new c,be=(We=(We=(We=We.multiply(Be.translate)).multiply(Be.skew)).multiply(Be.scale)).applyToRectangle(new o(le-H*Ie,ie-Y*Se,Z*ne,ae*_e)),Oe=v.call(this,be),Pe=[],qe=0;qe<Oe.length;qe+=1)Pe.indexOf(Oe[qe])===-1&&Pe.push(Oe[qe]);if(_(Pe),this.autoPaging)for(var et=Pe[0],ct=Pe[Pe.length-1],pt=et;pt<ct+1;pt++){this.pdf.setPage(pt);var Ft=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ut=pt===1?this.posY+this.margin[0]:this.margin[0],Rt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ht=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],yt=pt===1?0:Rt+(pt-2)*Ht;if(this.ctx.clip_path.length!==0){var jr=this.path;me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(me,this.posX+this.margin[3],-yt+Ut+this.ctx.prevPageLastElemOffset),B.call(this,"fill",!0),this.path=jr}var rr=JSON.parse(JSON.stringify(be));rr=w([rr],this.posX+this.margin[3],-yt+Ut+this.ctx.prevPageLastElemOffset)[0];var on=(pt>et||pt<ct)&&x.call(this);on&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ft,Ht,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",rr.x,rr.y,rr.w,rr.h,null,null,Le),on&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(M,"JPEG",be.x,be.y,be.w,be.h,null,null,Le)};var v=function(M,H,Y){var Z=[];H=H||this.pdf.internal.pageSize.width,Y=Y||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ae=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":Z.push(Math.floor((M.y+ae)/Y)+1);break;case"arc":Z.push(Math.floor((M.y+ae-M.radius)/Y)+1),Z.push(Math.floor((M.y+ae+M.radius)/Y)+1);break;case"qct":var le=K(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);Z.push(Math.floor((le.y+ae)/Y)+1),Z.push(Math.floor((le.y+le.h+ae)/Y)+1);break;case"bct":var ie=J(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);Z.push(Math.floor((ie.y+ae)/Y)+1),Z.push(Math.floor((ie.y+ie.h+ae)/Y)+1);break;case"rect":Z.push(Math.floor((M.y+ae)/Y)+1),Z.push(Math.floor((M.y+M.h+ae)/Y)+1)}for(var ce=0;ce<Z.length;ce+=1)for(;this.pdf.internal.getNumberOfPages()<Z[ce];)y.call(this);return Z},y=function(){var M=this.fillStyle,H=this.strokeStyle,Y=this.font,Z=this.lineCap,ae=this.lineWidth,le=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=H,this.font=Y,this.lineCap=Z,this.lineWidth=ae,this.lineJoin=le},w=function(M,H,Y){for(var Z=0;Z<M.length;Z++)switch(M[Z].type){case"bct":M[Z].x2+=H,M[Z].y2+=Y;case"qct":M[Z].x1+=H,M[Z].y1+=Y;case"mt":case"lt":case"arc":default:M[Z].x+=H,M[Z].y+=Y}return M},_=function(M){return M.sort(function(H,Y){return H-Y})},T=function(M,H){for(var Y,Z,ae=this.fillStyle,le=this.strokeStyle,ie=this.lineCap,ce=this.lineWidth,Ae=Math.abs(ce*this.ctx.transform.scaleX),Fe=this.lineJoin,ne=JSON.parse(JSON.stringify(this.path)),_e=JSON.parse(JSON.stringify(this.path)),Ie=[],Se=0;Se<_e.length;Se++)if(_e[Se].x!==void 0)for(var me=v.call(this,_e[Se]),Be=0;Be<me.length;Be+=1)Ie.indexOf(me[Be])===-1&&Ie.push(me[Be]);for(var Le=0;Le<Ie.length;Le++)for(;this.pdf.internal.getNumberOfPages()<Ie[Le];)y.call(this);if(_(Ie),this.autoPaging)for(var We=Ie[0],be=Ie[Ie.length-1],Oe=We;Oe<be+1;Oe++){this.pdf.setPage(Oe),this.fillStyle=ae,this.strokeStyle=le,this.lineCap=ie,this.lineWidth=Ae,this.lineJoin=Fe;var Pe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],qe=Oe===1?this.posY+this.margin[0]:this.margin[0],et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ct=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pt=Oe===1?0:et+(Oe-2)*ct;if(this.ctx.clip_path.length!==0){var Ft=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(Y,this.posX+this.margin[3],-pt+qe+this.ctx.prevPageLastElemOffset),B.call(this,M,!0),this.path=Ft}if(Z=JSON.parse(JSON.stringify(ne)),this.path=w(Z,this.posX+this.margin[3],-pt+qe+this.ctx.prevPageLastElemOffset),H===!1||Oe===0){var Ut=(Oe>We||Oe<be)&&x.call(this);Ut&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Pe,ct,null).clip().discardPath()),B.call(this,M,H),Ut&&this.pdf.restoreGraphicsState()}this.lineWidth=ce}else this.lineWidth=Ae,B.call(this,M,H),this.lineWidth=ce;this.path=ne},B=function(M,H){if((M!=="stroke"||H||!g.call(this))&&(M==="stroke"||H||!m.call(this))){for(var Y,Z,ae=[],le=this.path,ie=0;ie<le.length;ie++){var ce=le[ie];switch(ce.type){case"begin":ae.push({begin:!0});break;case"close":ae.push({close:!0});break;case"mt":ae.push({start:ce,deltas:[],abs:[]});break;case"lt":var Ae=ae.length;if(le[ie-1]&&!isNaN(le[ie-1].x)&&(Y=[ce.x-le[ie-1].x,ce.y-le[ie-1].y],Ae>0)){for(;Ae>=0;Ae--)if(ae[Ae-1].close!==!0&&ae[Ae-1].begin!==!0){ae[Ae-1].deltas.push(Y),ae[Ae-1].abs.push(ce);break}}break;case"bct":Y=[ce.x1-le[ie-1].x,ce.y1-le[ie-1].y,ce.x2-le[ie-1].x,ce.y2-le[ie-1].y,ce.x-le[ie-1].x,ce.y-le[ie-1].y],ae[ae.length-1].deltas.push(Y);break;case"qct":var Fe=le[ie-1].x+2/3*(ce.x1-le[ie-1].x),ne=le[ie-1].y+2/3*(ce.y1-le[ie-1].y),_e=ce.x+2/3*(ce.x1-ce.x),Ie=ce.y+2/3*(ce.y1-ce.y),Se=ce.x,me=ce.y;Y=[Fe-le[ie-1].x,ne-le[ie-1].y,_e-le[ie-1].x,Ie-le[ie-1].y,Se-le[ie-1].x,me-le[ie-1].y],ae[ae.length-1].deltas.push(Y);break;case"arc":ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(ae[ae.length-1].abs)&&ae[ae.length-1].abs.push(ce)}}Z=H?null:M==="stroke"?"stroke":"fill";for(var Be=!1,Le=0;Le<ae.length;Le++)if(ae[Le].arc)for(var We=ae[Le].abs,be=0;be<We.length;be++){var Oe=We[be];Oe.type==="arc"?N.call(this,Oe.x,Oe.y,Oe.radius,Oe.startAngle,Oe.endAngle,Oe.counterclockwise,void 0,H,!Be):P.call(this,Oe.x,Oe.y),Be=!0}else if(ae[Le].close===!0)this.pdf.internal.out("h"),Be=!1;else if(ae[Le].begin!==!0){var Pe=ae[Le].start.x,qe=ae[Le].start.y;R.call(this,ae[Le].deltas,Pe,qe),Be=!0}Z&&I.call(this,Z),H&&L.call(this)}},j=function(M){var H=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Y=H*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-Y;case"top":return M+H-Y;case"hanging":return M+H-2*Y;case"middle":return M+H/2-Y;case"ideographic":return M;case"alphabetic":default:return M}},E=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(H,Y){this.colorStops.push([H,Y])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var N=function(M,H,Y,Z,ae,le,ie,ce,Ae){for(var Fe=V.call(this,Y,Z,ae,le),ne=0;ne<Fe.length;ne++){var _e=Fe[ne];ne===0&&(Ae?D.call(this,_e.x1+M,_e.y1+H):P.call(this,_e.x1+M,_e.y1+H)),W.call(this,M,H,_e.x2,_e.y2,_e.x3,_e.y3,_e.x4,_e.y4)}ce?L.call(this):I.call(this,ie)},I=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},L=function(){this.pdf.clip(),this.pdf.discardPath()},D=function(M,H){this.pdf.internal.out(r(M)+" "+n(H)+" m")},k=function(M){var H;switch(M.align){case"right":case"end":H="right";break;case"center":H="center";break;case"left":case"start":default:H="left"}var Y=this.pdf.getTextDimensions(M.text),Z=j.call(this,M.y),ae=E.call(this,Z)-Y.h,le=this.ctx.transform.applyToPoint(new i(M.x,Z)),ie=this.ctx.transform.decompose(),ce=new c;ce=(ce=(ce=ce.multiply(ie.translate)).multiply(ie.skew)).multiply(ie.scale);for(var Ae,Fe,ne,_e=this.ctx.transform.applyToRectangle(new o(M.x,Z,Y.w,Y.h)),Ie=ce.applyToRectangle(new o(M.x,ae,Y.w,Y.h)),Se=v.call(this,Ie),me=[],Be=0;Be<Se.length;Be+=1)me.indexOf(Se[Be])===-1&&me.push(Se[Be]);if(_(me),this.autoPaging)for(var Le=me[0],We=me[me.length-1],be=Le;be<We+1;be++){this.pdf.setPage(be);var Oe=be===1?this.posY+this.margin[0]:this.margin[0],Pe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qe=this.pdf.internal.pageSize.height-this.margin[2],et=qe-this.margin[0],ct=this.pdf.internal.pageSize.width-this.margin[1],pt=ct-this.margin[3],Ft=be===1?0:Pe+(be-2)*et;if(this.ctx.clip_path.length!==0){var Ut=this.path;Ae=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(Ae,this.posX+this.margin[3],-1*Ft+Oe),B.call(this,"fill",!0),this.path=Ut}var Rt=w([JSON.parse(JSON.stringify(Ie))],this.posX+this.margin[3],-Ft+Oe+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(Fe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Fe*M.scale),ne=this.lineWidth,this.lineWidth=ne*M.scale);var Ht=this.autoPaging!=="text";if(Ht||Rt.y+Rt.h<=qe){if(Ht||Rt.y>=Oe&&Rt.x<=ct){var yt=Ht?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||ct-Rt.x)[0],jr=w([JSON.parse(JSON.stringify(_e))],this.posX+this.margin[3],-Ft+Oe+this.ctx.prevPageLastElemOffset)[0],rr=Ht&&(be>Le||be<We)&&x.call(this);rr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pt,et,null).clip().discardPath()),this.pdf.text(yt,jr.x,jr.y,{angle:M.angle,align:H,renderingMode:M.renderingMode}),rr&&this.pdf.restoreGraphicsState()}}else Rt.y<qe&&(this.ctx.prevPageLastElemOffset+=qe-Rt.y);M.scale>=.01&&(this.pdf.setFontSize(Fe),this.lineWidth=ne)}else M.scale>=.01&&(Fe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Fe*M.scale),ne=this.lineWidth,this.lineWidth=ne*M.scale),this.pdf.text(M.text,le.x+this.posX,le.y+this.posY,{angle:M.angle,align:H,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(Fe),this.lineWidth=ne)},P=function(M,H,Y,Z){Y=Y||0,Z=Z||0,this.pdf.internal.out(r(M+Y)+" "+n(H+Z)+" l")},R=function(M,H,Y){return this.pdf.lines(M,H,Y,null,null)},W=function(M,H,Y,Z,ae,le,ie,ce){this.pdf.internal.out([t(a(Y+M)),t(s(Z+H)),t(a(ae+M)),t(s(le+H)),t(a(ie+M)),t(s(ce+H)),"c"].join(" "))},V=function(M,H,Y,Z){for(var ae=2*Math.PI,le=Math.PI/2;H>Y;)H-=ae;var ie=Math.abs(Y-H);ie<ae&&Z&&(ie=ae-ie);for(var ce=[],Ae=Z?-1:1,Fe=H;ie>1e-5;){var ne=Fe+Ae*Math.min(ie,le);ce.push(G.call(this,M,Fe,ne)),ie-=Math.abs(ne-Fe),Fe=ne}return ce},G=function(M,H,Y){var Z=(Y-H)/2,ae=M*Math.cos(Z),le=M*Math.sin(Z),ie=ae,ce=-le,Ae=ie*ie+ce*ce,Fe=Ae+ie*ae+ce*le,ne=4/3*(Math.sqrt(2*Ae*Fe)-Fe)/(ie*le-ce*ae),_e=ie-ne*ce,Ie=ce+ne*ie,Se=_e,me=-Ie,Be=Z+H,Le=Math.cos(Be),We=Math.sin(Be);return{x1:M*Math.cos(H),y1:M*Math.sin(H),x2:_e*Le-Ie*We,y2:_e*We+Ie*Le,x3:Se*Le-me*We,y3:Se*We+me*Le,x4:M*Math.cos(Y),y4:M*Math.sin(Y)}},z=function(M){return 180*M/Math.PI},K=function(M,H,Y,Z,ae,le){var ie=M+.5*(Y-M),ce=H+.5*(Z-H),Ae=ae+.5*(Y-ae),Fe=le+.5*(Z-le),ne=Math.min(M,ae,ie,Ae),_e=Math.max(M,ae,ie,Ae),Ie=Math.min(H,le,ce,Fe),Se=Math.max(H,le,ce,Fe);return new o(ne,Ie,_e-ne,Se-Ie)},J=function(M,H,Y,Z,ae,le,ie,ce){var Ae,Fe,ne,_e,Ie,Se,me,Be,Le,We,be,Oe,Pe,qe,et=Y-M,ct=Z-H,pt=ae-Y,Ft=le-Z,Ut=ie-ae,Rt=ce-le;for(Fe=0;Fe<41;Fe++)Le=(me=(ne=M+(Ae=Fe/40)*et)+Ae*((Ie=Y+Ae*pt)-ne))+Ae*(Ie+Ae*(ae+Ae*Ut-Ie)-me),We=(Be=(_e=H+Ae*ct)+Ae*((Se=Z+Ae*Ft)-_e))+Ae*(Se+Ae*(le+Ae*Rt-Se)-Be),Fe==0?(be=Le,Oe=We,Pe=Le,qe=We):(be=Math.min(be,Le),Oe=Math.min(Oe,We),Pe=Math.max(Pe,Le),qe=Math.max(qe,We));return new o(Math.round(be),Math.round(Oe),Math.round(Pe-be),Math.round(qe-Oe))},te=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,H,Y=(M=this.ctx.lineDash,H=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:H}));this.prevLineDash!==Y&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Y)}}})(br.API),function(e){var t=function(s){var i,o,c,u,d,f,h,m,g,x;for(o=[],c=0,u=(s+=i="\0\0\0\0".slice(s.length%4||4)).length;u>c;c+=4)(d=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(f=(d=((d=((d=((d=(d-(x=d%85))/85)-(g=d%85))/85)-(m=d%85))/85)-(h=d%85))/85)%85,o.push(f+33,h+33,m+33,g+33,x+33)):o.push(122);return function(v,y){for(var w=y;w>0;w--)v.pop()}(o,i.length),String.fromCharCode.apply(String,o)+"~>"},r=function(s){var i,o,c,u,d,f=String,h="length",m=255,g="charCodeAt",x="slice",v="replace";for(s[x](-2),s=s[x](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),c=[],u=0,d=(s+=i="uuuuu"[x](s[h]%5||5))[h];d>u;u+=5)o=52200625*(s[g](u)-33)+614125*(s[g](u+1)-33)+7225*(s[g](u+2)-33)+85*(s[g](u+3)-33)+(s[g](u+4)-33),c.push(m&o>>24,m&o>>16,m&o>>8,m&o);return function(y,w){for(var _=w;_>0;_--)y.pop()}(c,i[h]),f.fromCharCode.apply(f,c)},n=function(s){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),i.test(s)===!1)return"";for(var o="",c=0;c<s.length;c+=2)o+=String.fromCharCode("0x"+(s[c]+s[c+1]));return o},a=function(s){for(var i=new Uint8Array(s.length),o=s.length;o--;)i[o]=s.charCodeAt(o);return s=(i=YD(i)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};e.processDataByFilters=function(s,i){var o=0,c=s||"",u=[];for(typeof(i=i||[])=="string"&&(i=[i]),o=0;o<i.length;o+=1)switch(i[o]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[o]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(br.API),function(e){e.loadFile=function(t,r,n){return function(a,s,i){s=s!==!1,i=typeof i=="function"?i:function(){};var o=void 0;try{o=function(c,u,d){var f=new XMLHttpRequest,h=0,m=function(g){var x=g.length,v=[],y=String.fromCharCode;for(h=0;h<x;h+=1)v.push(y(255&g.charCodeAt(h)));return v.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(m(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return m(f.responseText)}(a,s,i)}catch{}return o}(t,r,n)},e.loadImageFile=e.loadFile}(br.API),function(e){function t(){return(Vr.html2canvas?Promise.resolve(Vr.html2canvas):ub(()=>Promise.resolve().then(()=>_1t),void 0)).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function r(){return(Vr.DOMPurify?Promise.resolve(Vr.DOMPurify):ub(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var n=function(i){var o=ya(i);return o==="undefined"?"undefined":o==="string"||i instanceof String?"string":o==="number"||i instanceof Number?"number":o==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":o==="object"?"object":"unknown"},a=function(i,o){var c=document.createElement(i);for(var u in o.className&&(c.className=o.className),o.innerHTML&&o.dompurify&&(c.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)c.style[u]=o.style[u];return c},s=function i(o){var c=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),u=i.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,i,1,[i])).set(o)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(i,o){return i.__proto__=o||s.prototype,i},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(i,o){return this.then(function(){switch(o=o||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(r).then(function(c){return this.set({src:a("div",{innerHTML:i,dompurify:c})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},s.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function c(u,d){for(var f=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),h=u.firstChild;h;h=h.nextSibling)d!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||f.appendChild(c(h,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(f.width=u.width,f.height=u.height,f.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(f.value=u.value),f.addEventListener("load",function(){f.scrollTop=u.scrollTop,f.scrollLeft=u.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(t).then(function(o){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,o(this.prop.container,c)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(t).then(function(o){var c=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var h=0;h<u.length;++h){var m=u[h],g=m.src.find(function(x){return x.format==="truetype"});g&&c.addFont(g.url,m.ref.name,m.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,c.context2d.save(!0),o(this.prop.container,f)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(i,o,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(i,o):this.outputPdf(i,o)},s.prototype.outputPdf=function(i,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,o)})},s.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},s.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(i){if(n(i)!=="object")return this;var o=Object.keys(i||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=i[c]};switch(c){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[c]=i[c]}}},this);return this.then(function(){return this.thenList(o)})},s.prototype.get=function(i,o){return this.then(function(){var c=i in s.template.prop?this.prop[i]:this.opt[i];return o?o(c):c})},s.prototype.setMargin=function(i){return this.then(function(){switch(n(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},s.prototype.setPageSize=function(i){function o(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(i=i||br.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:o(i.inner.width,i.k),height:o(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},s.prototype.setProgress=function(i,o,c,u){return i!=null&&(this.progress.val=i),o!=null&&(this.progress.state=o),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(i,o,c,u){return this.setProgress(i?this.progress.val+i:null,o||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(i,o){var c=this;return this.thenCore(i,o,function(u,d){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return c.updateProgress(null,u),f}).then(u,d).then(function(f){return c.updateProgress(1),f})})},s.prototype.thenCore=function(i,o,c){c=c||Promise.prototype.then,i&&(i=i.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=c.call(u,i,o);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(i,o){return Promise.prototype.then.call(this,i,o)},s.prototype.thenList=function(i){var o=this;return i.forEach(function(c){o=o.thenCore(c)}),o},s.prototype.catch=function(i){i&&(i=i.bind(this));var o=Promise.prototype.catch.call(this,i);return s.convert(o,this)},s.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},s.prototype.error=function(i){return this.then(function(){throw new Error(i)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,br.getPageSize=function(i,o,c){if(ya(i)==="object"){var u=i;i=u.orientation,o=u.unit||o,c=u.format||c}o=o||"mm",c=c||"a4",i=(""+(i||"P")).toLowerCase();var d,f=(""+c).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+o}var m,g=0,x=0;if(h.hasOwnProperty(f))g=h[f][1]/d,x=h[f][0]/d;else try{g=c[1],x=c[0]}catch{throw new Error("Invalid format: "+c)}if(i==="p"||i==="portrait")i="p",x>g&&(m=x,x=g,g=m);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",g>x&&(m=x,x=g,g=m)}return{width:x,height:g,unit:o,k:d,orientation:i}},e.html=function(i,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(nP):null;var c=new s(o);return o.worker?c:c.from(i).doCallback()}}(br.API),br.API.addJS=function(e){return GW=e,this.internal.events.subscribe("postPutResources",function(){A5=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(A5+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),$W=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+GW+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){A5!==void 0&&$W!==void 0&&this.internal.out("/Names <</JavaScript "+A5+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var i=a[s],o=n.exec(i);if(o!=null){var c=o[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(i)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var f=r.internal.newObject();d.push(f);var h=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var i={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(i),i},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var i=n.children[s];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var c=r.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(br.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,s,i,o){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=i||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(f){for(var h,m=256*f.charCodeAt(4)+f.charCodeAt(5),g=f.length,x={width:0,height:0,numcomponents:1},v=4;v<g;v+=2){if(v+=m,t.indexOf(f.charCodeAt(v+1))!==-1){h=256*f.charCodeAt(v+5)+f.charCodeAt(v+6),x={width:256*f.charCodeAt(v+7)+f.charCodeAt(v+8),height:h,numcomponents:f.charCodeAt(v+9)};break}m=256*f.charCodeAt(v+2)+f.charCodeAt(v+3)}return x}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:o,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(br.API);var wv,h5,KW,qW,WW,cze=function(){var e,t,r;function n(s){var i,o,c,u,d,f,h,m,g,x,v,y,w,_;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(i=this.readUInt32(),g=(function(){var T,B;for(B=[],T=0;T<4;++T)B.push(String.fromCharCode(this.data[this.pos++]));return B}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,f.delay=1e3*d/u,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(g==="fdAT"&&(this.pos+=4,i-=4),s=(f!=null?f.data:void 0)||this.imgData,y=0;0<=i?y<i:y>i;0<=i?++y:--y)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((x=c-this.transparency.indexed.length)>0)for(w=0;0<=x?w<x:w>x;0<=x?++w:--w)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":h=(v=this.read(i)).indexOf(0),m=String.fromCharCode.apply(String,v.slice(0,h)),this.text[m]=String.fromCharCode.apply(String,v.slice(h+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(_=this.colorType)===4||_===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(s){var i,o;for(o=[],i=0;0<=s?i<s:i>s;0<=s?++i:--i)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(s){var i=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*i),c=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(f,h,m,g){var x,v,y,w,_,T,B,j,E,N,I,L,D,k,P,R,W,V,G,z,K,J=Math.ceil((u.width-f)/m),te=Math.ceil((u.height-h)/g),M=u.width==J&&u.height==te;for(k=i*J,L=M?o:new Uint8Array(k*te),T=s.length,D=0,v=0;D<te&&c<T;){switch(s[c++]){case 0:for(w=W=0;W<k;w=W+=1)L[v++]=s[c++];break;case 1:for(w=V=0;V<k;w=V+=1)x=s[c++],_=w<i?0:L[v-i],L[v++]=(x+_)%256;break;case 2:for(w=G=0;G<k;w=G+=1)x=s[c++],y=(w-w%i)/i,P=D&&L[(D-1)*k+y*i+w%i],L[v++]=(P+x)%256;break;case 3:for(w=z=0;z<k;w=z+=1)x=s[c++],y=(w-w%i)/i,_=w<i?0:L[v-i],P=D&&L[(D-1)*k+y*i+w%i],L[v++]=(x+Math.floor((_+P)/2))%256;break;case 4:for(w=K=0;K<k;w=K+=1)x=s[c++],y=(w-w%i)/i,_=w<i?0:L[v-i],D===0?P=R=0:(P=L[(D-1)*k+y*i+w%i],R=y&&L[(D-1)*k+(y-1)*i+w%i]),B=_+P-R,j=Math.abs(B-_),N=Math.abs(B-P),I=Math.abs(B-R),E=j<=N&&j<=I?_:N<=I?P:R,L[v++]=(x+E)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!M){var H=((h+D*g)*u.width+f)*i,Y=D*k;for(w=0;w<J;w+=1){for(var Z=0;Z<i;Z+=1)o[H++]=L[Y++];H+=(m-1)*i}}D++}}return s=QVe(s),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),o},n.prototype.decodePalette=function(){var s,i,o,c,u,d,f,h,m;for(o=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+o.length),c=0,s=0,i=f=0,h=o.length;f<h;i=f+=3)u[c++]=o[i],u[c++]=o[i+1],u[c++]=o[i+2],u[c++]=(m=d[s++])!=null?m:255;return u},n.prototype.copyToImageData=function(s,i){var o,c,u,d,f,h,m,g,x,v,y;if(c=this.colors,x=null,o=this.hasAlphaChannel,this.palette.length&&(x=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),c=4,o=!0),g=(u=s.data||s).length,f=x||i,d=h=0,c===1)for(;d<g;)m=x?4*i[d/4]:h,v=f[m++],u[d++]=v,u[d++]=v,u[d++]=v,u[d++]=o?f[m++]:255,h=m;else for(;d<g;)m=x?4*i[d/4]:h,u[d++]=f[m++],u[d++]=f[m++],u[d++]=f[m++],u[d++]=o?f[m++]:255,h=m},n.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var a=function(){if(Object.prototype.toString.call(Vr)==="[object Window]"){try{t=Vr.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(s){var i;if(a()===!0)return r.width=s.width,r.height=s.height,r.clearRect(0,0,s.width,s.height),r.putImageData(s,0,0),(i=new Image).src=t.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(s){var i,o,c,u,d,f,h,m;if(this.animation){for(m=[],o=d=0,f=(h=this.animation.frames).length;d<f;o=++d)i=h[o],c=s.createImageData(i.width,i.height),u=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(c,u),i.imageData=c,m.push(i.image=e(c));return m}},n.prototype.renderFrame=function(s,i){var o,c,u;return o=(c=this.animation.frames)[i],u=c[i-1],i===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&s.clearRect(o.xOffset,o.yOffset,o.width,o.height),s.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(s){var i,o,c,u,d,f,h=this;return o=0,f=this.animation,u=f.numFrames,c=f.frames,d=f.numPlays,(i=function(){var m,g;if(m=o++%u,g=c[m],h.renderFrame(s,m),u>1&&o/u<d)return h.animation._timeout=setTimeout(i,g.delay)})()},n.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},n.prototype.render=function(s){var i,o;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,i=s.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(o=i.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),i.putImageData(o,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function uze(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],s=a>>7,i=1<<(7&a)+1;e[t++],e[t++];var o=null,c=null;s&&(o=t,c=i,t+=3*i);var u=!0,d=[],f=0,h=null,m=0,g=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,g=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var x=e[t++];f=e[t++]|e[t++]<<8,h=e[t++],(1&x)==0&&(h=null),m=x>>2&7,t++;break;case 254:for(;;){if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var v=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,T=e[t++],B=T>>6&1,j=1<<(7&T)+1,E=o,N=c,I=!1;T>>7&&(I=!0,E=t,N=j,t+=3*j);var L=t;for(t++;;){var D;if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}d.push({x:v,y,width:w,height:_,has_local_palette:I,palette_offset:E,palette_size:N,data_offset:L,data_length:t-L,transparent_index:h,interlaced:!!B,delay:f,disposal:m});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return g},this.frameInfo=function(k){if(k<0||k>=d.length)throw new Error("Frame index out of range.");return d[k]},this.decodeAndBlitFrameBGRA=function(k,P){var R=this.frameInfo(k),W=R.width*R.height,V=new Uint8Array(W);XW(e,R.data_offset,V,W);var G=R.palette_offset,z=R.transparent_index;z===null&&(z=256);var K=R.width,J=r-K,te=K,M=4*(R.y*r+R.x),H=4*((R.y+R.height)*r+R.x),Y=M,Z=4*J;R.interlaced===!0&&(Z+=4*r*7);for(var ae=8,le=0,ie=V.length;le<ie;++le){var ce=V[le];if(te===0&&(te=K,(Y+=Z)>=H&&(Z=4*J+4*r*(ae-1),Y=M+(K+J)*(ae<<1),ae>>=1)),ce===z)Y+=4;else{var Ae=e[G+3*ce],Fe=e[G+3*ce+1],ne=e[G+3*ce+2];P[Y++]=ne,P[Y++]=Fe,P[Y++]=Ae,P[Y++]=255}--te}},this.decodeAndBlitFrameRGBA=function(k,P){var R=this.frameInfo(k),W=R.width*R.height,V=new Uint8Array(W);XW(e,R.data_offset,V,W);var G=R.palette_offset,z=R.transparent_index;z===null&&(z=256);var K=R.width,J=r-K,te=K,M=4*(R.y*r+R.x),H=4*((R.y+R.height)*r+R.x),Y=M,Z=4*J;R.interlaced===!0&&(Z+=4*r*7);for(var ae=8,le=0,ie=V.length;le<ie;++le){var ce=V[le];if(te===0&&(te=K,(Y+=Z)>=H&&(Z=4*J+4*r*(ae-1),Y=M+(K+J)*(ae<<1),ae>>=1)),ce===z)Y+=4;else{var Ae=e[G+3*ce],Fe=e[G+3*ce+1],ne=e[G+3*ce+2];P[Y++]=Ae,P[Y++]=Fe,P[Y++]=ne,P[Y++]=255}--te}}}function XW(e,t,r,n){for(var a=e[t++],s=1<<a,i=s+1,o=i+1,c=a+1,u=(1<<c)-1,d=0,f=0,h=0,m=e[t++],g=new Int32Array(4096),x=null;;){for(;d<16&&m!==0;)f|=e[t++]<<d,d+=8,m===1?m=e[t++]:--m;if(d<c)break;var v=f&u;if(f>>=c,d-=c,v!==s){if(v===i)break;for(var y=v<o?v:x,w=0,_=y;_>s;)_=g[_]>>8,++w;var T=_;if(h+w+(y!==v?1:0)>n)return void ja.log("Warning, gif stream longer than expected.");r[h++]=T;var B=h+=w;for(y!==v&&(r[h++]=T),_=y;w--;)_=g[_],r[--B]=255&_,_>>=8;x!==null&&o<4096&&(g[o++]=x<<8|T,o>=u+1&&c<12&&(++c,u=u<<1|1)),x=v}else o=i+1,u=(1<<(c=a+1))-1,x=null}return h!==n&&ja.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function U6(e){var t,r,n,a,s,i=Math.floor,o=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),h=new Array(65535),m=new Array(64),g=new Array(64),x=[],v=0,y=7,w=new Array(64),_=new Array(64),T=new Array(64),B=new Array(256),j=new Array(2048),E=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],k=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],P=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],W=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function V(M,H){for(var Y=0,Z=0,ae=new Array,le=1;le<=16;le++){for(var ie=1;ie<=M[le];ie++)ae[H[Z]]=[],ae[H[Z]][0]=Y,ae[H[Z]][1]=le,Z++,Y++;Y*=2}return ae}function G(M){for(var H=M[0],Y=M[1]-1;Y>=0;)H&1<<Y&&(v|=1<<y),Y--,--y<0&&(v==255?(z(255),z(0)):z(v),y=7,v=0)}function z(M){x.push(M)}function K(M){z(M>>8&255),z(255&M)}function J(M,H,Y,Z,ae){for(var le,ie=ae[0],ce=ae[240],Ae=function(We,be){var Oe,Pe,qe,et,ct,pt,Ft,Ut,Rt,Ht,yt=0;for(Rt=0;Rt<8;++Rt){Oe=We[yt],Pe=We[yt+1],qe=We[yt+2],et=We[yt+3],ct=We[yt+4],pt=We[yt+5],Ft=We[yt+6];var jr=Oe+(Ut=We[yt+7]),rr=Oe-Ut,on=Pe+Ft,kr=Pe-Ft,Kr=qe+pt,Fn=qe-pt,Rr=et+ct,bs=et-ct,pn=jr+Rr,da=jr-Rr,Da=on+Kr,an=on-Kr;We[yt]=pn+Da,We[yt+4]=pn-Da;var gr=.707106781*(an+da);We[yt+2]=da+gr,We[yt+6]=da-gr;var tt=.382683433*((pn=bs+Fn)-(an=kr+rr)),gt=.5411961*pn+tt,Je=1.306562965*an+tt,xt=.707106781*(Da=Fn+kr),Et=rr+xt,bt=rr-xt;We[yt+5]=bt+gt,We[yt+3]=bt-gt,We[yt+1]=Et+Je,We[yt+7]=Et-Je,yt+=8}for(yt=0,Rt=0;Rt<8;++Rt){Oe=We[yt],Pe=We[yt+8],qe=We[yt+16],et=We[yt+24],ct=We[yt+32],pt=We[yt+40],Ft=We[yt+48];var ar=Oe+(Ut=We[yt+56]),vr=Oe-Ut,Yr=Pe+Ft,tn=Pe-Ft,Xr=qe+pt,he=qe-pt,Te=et+ct,Ce=et-ct,we=ar+Te,Ne=ar-Te,je=Yr+Xr,Ye=Yr-Xr;We[yt]=we+je,We[yt+32]=we-je;var dt=.707106781*(Ye+Ne);We[yt+16]=Ne+dt,We[yt+48]=Ne-dt;var $e=.382683433*((we=Ce+he)-(Ye=tn+vr)),nt=.5411961*we+$e,it=1.306562965*Ye+$e,Ot=.707106781*(je=he+tn),zt=vr+Ot,Zt=vr-Ot;We[yt+40]=Zt+nt,We[yt+24]=Zt-nt,We[yt+8]=zt+it,We[yt+56]=zt-it,yt++}for(Rt=0;Rt<64;++Rt)Ht=We[Rt]*be[Rt],m[Rt]=Ht>0?Ht+.5|0:Ht-.5|0;return m}(M,H),Fe=0;Fe<64;++Fe)g[E[Fe]]=Ae[Fe];var ne=g[0]-Y;Y=g[0],ne==0?G(Z[0]):(G(Z[h[le=32767+ne]]),G(f[le]));for(var _e=63;_e>0&&g[_e]==0;)_e--;if(_e==0)return G(ie),Y;for(var Ie,Se=1;Se<=_e;){for(var me=Se;g[Se]==0&&Se<=_e;)++Se;var Be=Se-me;if(Be>=16){Ie=Be>>4;for(var Le=1;Le<=Ie;++Le)G(ce);Be&=15}le=32767+g[Se],G(ae[(Be<<4)+h[le]]),G(f[le]),Se++}return _e!=63&&G(ie),Y}function te(M){M=Math.min(Math.max(M,1),100),s!=M&&(function(H){for(var Y=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Z=0;Z<64;Z++){var ae=i((Y[Z]*H+50)/100);ae=Math.min(Math.max(ae,1),255),o[E[Z]]=ae}for(var le=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ie=0;ie<64;ie++){var ce=i((le[ie]*H+50)/100);ce=Math.min(Math.max(ce,1),255),c[E[ie]]=ce}for(var Ae=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Fe=0,ne=0;ne<8;ne++)for(var _e=0;_e<8;_e++)u[Fe]=1/(o[E[Fe]]*Ae[ne]*Ae[_e]*8),d[Fe]=1/(c[E[Fe]]*Ae[ne]*Ae[_e]*8),Fe++}(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),s=M)}this.encode=function(M,H){H&&te(H),x=new Array,v=0,y=7,K(65496),K(65504),K(16),z(74),z(70),z(73),z(70),z(0),z(1),z(1),z(0),K(1),K(1),z(0),z(0),function(){K(65499),K(132),z(0);for(var Pe=0;Pe<64;Pe++)z(o[Pe]);z(1);for(var qe=0;qe<64;qe++)z(c[qe])}(),function(Pe,qe){K(65472),K(17),z(8),K(qe),K(Pe),z(3),z(1),z(17),z(0),z(2),z(17),z(1),z(3),z(17),z(1)}(M.width,M.height),function(){K(65476),K(418),z(0);for(var Pe=0;Pe<16;Pe++)z(N[Pe+1]);for(var qe=0;qe<=11;qe++)z(I[qe]);z(16);for(var et=0;et<16;et++)z(L[et+1]);for(var ct=0;ct<=161;ct++)z(D[ct]);z(1);for(var pt=0;pt<16;pt++)z(k[pt+1]);for(var Ft=0;Ft<=11;Ft++)z(P[Ft]);z(17);for(var Ut=0;Ut<16;Ut++)z(R[Ut+1]);for(var Rt=0;Rt<=161;Rt++)z(W[Rt])}(),K(65498),K(12),z(3),z(1),z(0),z(2),z(17),z(3),z(17),z(0),z(63),z(0);var Y=0,Z=0,ae=0;v=0,y=7,this.encode.displayName="_encode_";for(var le,ie,ce,Ae,Fe,ne,_e,Ie,Se,me=M.data,Be=M.width,Le=M.height,We=4*Be,be=0;be<Le;){for(le=0;le<We;){for(Fe=We*be+le,_e=-1,Ie=0,Se=0;Se<64;Se++)ne=Fe+(Ie=Se>>3)*We+(_e=4*(7&Se)),be+Ie>=Le&&(ne-=We*(be+1+Ie-Le)),le+_e>=We&&(ne-=le+_e-We+4),ie=me[ne++],ce=me[ne++],Ae=me[ne++],w[Se]=(j[ie]+j[ce+256>>0]+j[Ae+512>>0]>>16)-128,_[Se]=(j[ie+768>>0]+j[ce+1024>>0]+j[Ae+1280>>0]>>16)-128,T[Se]=(j[ie+1280>>0]+j[ce+1536>>0]+j[Ae+1792>>0]>>16)-128;Y=J(w,u,Y,t,n),Z=J(_,d,Z,r,a),ae=J(T,d,ae,r,a),le+=32}be+=8}if(y>=0){var Oe=[];Oe[1]=y+1,Oe[0]=(1<<y+1)-1,G(Oe)}return K(65497),new Uint8Array(x)},e=e||50,function(){for(var M=String.fromCharCode,H=0;H<256;H++)B[H]=M(H)}(),t=V(N,I),r=V(k,P),n=V(L,D),a=V(R,W),function(){for(var M=1,H=2,Y=1;Y<=15;Y++){for(var Z=M;Z<H;Z++)h[32767+Z]=Y,f[32767+Z]=[],f[32767+Z][1]=Y,f[32767+Z][0]=Z;for(var ae=-(H-1);ae<=-M;ae++)h[32767+ae]=Y,f[32767+ae]=[],f[32767+ae][1]=Y,f[32767+ae][0]=H-1+ae;M<<=1,H<<=1}}(),function(){for(var M=0;M<256;M++)j[M]=19595*M,j[M+256>>0]=38470*M,j[M+512>>0]=7471*M+32768,j[M+768>>0]=-11059*M,j[M+1024>>0]=-21709*M,j[M+1280>>0]=32768*M+8421375,j[M+1536>>0]=-27439*M,j[M+1792>>0]=-5329*M}(),te(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ud(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function YW(e){function t(N){if(!N)throw Error("assert :P")}function r(N,I,L){for(var D=0;4>D;D++)if(N[I+D]!=L.charCodeAt(D))return!0;return!1}function n(N,I,L,D,k){for(var P=0;P<k;P++)N[I+P]=L[D+P]}function a(N,I,L,D){for(var k=0;k<D;k++)N[I+k]=L}function s(N){return new Int32Array(N)}function i(N,I){for(var L=[],D=0;D<N;D++)L.push(new I);return L}function o(N,I){var L=[];return function D(k,P,R){for(var W=R[P],V=0;V<W&&(k.push(R.length>P+1?[]:new I),!(R.length<P+1));V++)D(k[V],P+1,R)}(L,0,N),L}var c=function(){var N=this;function I(F,Q){for(var ee=1<<Q-1>>>0;F&ee;)ee>>>=1;return ee?(F&ee-1)+ee:F}function L(F,Q,ee,se,de){t(!(se%ee));do F[Q+(se-=ee)]=de;while(0<se)}function D(F,Q,ee,se,de){if(t(2328>=de),512>=de)var pe=s(512);else if((pe=s(de))==null)return 0;return function(ge,xe,Ee,ke,Ue,st){var rt,Ke,jt=xe,mt=1<<Ee,Qe=s(16),Ve=s(16);for(t(Ue!=0),t(ke!=null),t(ge!=null),t(0<Ee),Ke=0;Ke<Ue;++Ke){if(15<ke[Ke])return 0;++Qe[ke[Ke]]}if(Qe[0]==Ue)return 0;for(Ve[1]=0,rt=1;15>rt;++rt){if(Qe[rt]>1<<rt)return 0;Ve[rt+1]=Ve[rt]+Qe[rt]}for(Ke=0;Ke<Ue;++Ke)rt=ke[Ke],0<ke[Ke]&&(st[Ve[rt]++]=Ke);if(Ve[15]==1)return(ke=new k).g=0,ke.value=st[0],L(ge,jt,1,mt,ke),mt;var Nt,It=-1,Bt=mt-1,nr=0,Yt=1,yr=1,tr=1<<Ee;for(Ke=0,rt=1,Ue=2;rt<=Ee;++rt,Ue<<=1){if(Yt+=yr<<=1,0>(yr-=Qe[rt]))return 0;for(;0<Qe[rt];--Qe[rt])(ke=new k).g=rt,ke.value=st[Ke++],L(ge,jt+nr,Ue,tr,ke),nr=I(nr,rt)}for(rt=Ee+1,Ue=2;15>=rt;++rt,Ue<<=1){if(Yt+=yr<<=1,0>(yr-=Qe[rt]))return 0;for(;0<Qe[rt];--Qe[rt]){if(ke=new k,(nr&Bt)!=It){for(jt+=tr,Nt=1<<(It=rt)-Ee;15>It&&!(0>=(Nt-=Qe[It]));)++It,Nt<<=1;mt+=tr=1<<(Nt=It-Ee),ge[xe+(It=nr&Bt)].g=Nt+Ee,ge[xe+It].value=jt-xe-It}ke.g=rt-Ee,ke.value=st[Ke++],L(ge,jt+(nr>>Ee),Ue,tr,ke),nr=I(nr,rt)}}return Yt!=2*Ve[15]-1?0:mt}(F,Q,ee,se,de,pe)}function k(){this.value=this.g=0}function P(){this.value=this.g=0}function R(){this.G=i(5,k),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(Qs,P)}function W(F,Q,ee,se){t(F!=null),t(Q!=null),t(2147483648>se),F.Ca=254,F.I=0,F.b=-8,F.Ka=0,F.oa=Q,F.pa=ee,F.Jd=Q,F.Yc=ee+se,F.Zc=4<=se?ee+se-4+1:ee,le(F)}function V(F,Q){for(var ee=0;0<Q--;)ee|=ce(F,128)<<Q;return ee}function G(F,Q){var ee=V(F,Q);return ie(F)?-ee:ee}function z(F,Q,ee,se){var de,pe=0;for(t(F!=null),t(Q!=null),t(4294967288>se),F.Sb=se,F.Ra=0,F.u=0,F.h=0,4<se&&(se=4),de=0;de<se;++de)pe+=Q[ee+de]<<8*de;F.Ra=pe,F.bb=se,F.oa=Q,F.pa=ee}function K(F){for(;8<=F.u&&F.bb<F.Sb;)F.Ra>>>=8,F.Ra+=F.oa[F.pa+F.bb]<<GA-8>>>0,++F.bb,F.u-=8;Y(F)&&(F.h=1,F.u=0)}function J(F,Q){if(t(0<=Q),!F.h&&Q<=$A){var ee=H(F)&Nf[Q];return F.u+=Q,K(F),ee}return F.h=1,F.u=0}function te(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function M(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function H(F){return F.Ra>>>(F.u&GA-1)>>>0}function Y(F){return t(F.bb<=F.Sb),F.h||F.bb==F.Sb&&F.u>GA}function Z(F,Q){F.u=Q,F.h=Y(F)}function ae(F){F.u>=C0&&(t(F.u>=C0),K(F))}function le(F){t(F!=null&&F.oa!=null),F.pa<F.Zc?(F.I=(F.oa[F.pa++]|F.I<<8)>>>0,F.b+=8):(t(F!=null&&F.oa!=null),F.pa<F.Yc?(F.b+=8,F.I=F.oa[F.pa++]|F.I<<8):F.Ka?F.b=0:(F.I<<=8,F.b+=8,F.Ka=1))}function ie(F){return V(F,1)}function ce(F,Q){var ee=F.Ca;0>F.b&&le(F);var se=F.b,de=ee*Q>>>8,pe=(F.I>>>se>de)+0;for(pe?(ee-=de,F.I-=de+1<<se>>>0):ee=de+1,se=ee,de=0;256<=se;)de+=8,se>>=8;return se=7^de+Ho[se],F.b-=se,F.Ca=(ee<<se)-1,pe}function Ae(F,Q,ee){F[Q+0]=ee>>24&255,F[Q+1]=ee>>16&255,F[Q+2]=ee>>8&255,F[Q+3]=ee>>0&255}function Fe(F,Q){return F[Q+0]<<0|F[Q+1]<<8}function ne(F,Q){return Fe(F,Q)|F[Q+2]<<16}function _e(F,Q){return Fe(F,Q)|Fe(F,Q+2)<<16}function Ie(F,Q){var ee=1<<Q;return t(F!=null),t(0<Q),F.X=s(ee),F.X==null?0:(F.Mb=32-Q,F.Xa=Q,1)}function Se(F,Q){t(F!=null),t(Q!=null),t(F.Xa==Q.Xa),n(Q.X,0,F.X,0,1<<Q.Xa)}function me(){this.X=[],this.Xa=this.Mb=0}function Be(F,Q,ee,se){t(ee!=null),t(se!=null);var de=ee[0],pe=se[0];return de==0&&(de=(F*pe+Q/2)/Q),pe==0&&(pe=(Q*de+F/2)/F),0>=de||0>=pe?0:(ee[0]=de,se[0]=pe,1)}function Le(F,Q){return F+(1<<Q)-1>>>Q}function We(F,Q){return((4278255360&F)+(4278255360&Q)>>>0&4278255360)+((16711935&F)+(16711935&Q)>>>0&16711935)>>>0}function be(F,Q){N[Q]=function(ee,se,de,pe,ge,xe,Ee){var ke;for(ke=0;ke<ge;++ke){var Ue=N[F](xe[Ee+ke-1],de,pe+ke);xe[Ee+ke]=We(ee[se+ke],Ue)}}}function Oe(){this.ud=this.hd=this.jd=0}function Pe(F,Q){return((4278124286&(F^Q))>>>1)+(F&Q)>>>0}function qe(F){return 0<=F&&256>F?F:0>F?0:255<F?255:void 0}function et(F,Q){return qe(F+(F-Q+.5>>1))}function ct(F,Q,ee){return Math.abs(Q-ee)-Math.abs(F-ee)}function pt(F,Q,ee,se,de,pe,ge){for(se=pe[ge-1],ee=0;ee<de;++ee)pe[ge+ee]=se=We(F[Q+ee],se)}function Ft(F,Q,ee,se,de){var pe;for(pe=0;pe<ee;++pe){var ge=F[Q+pe],xe=ge>>8&255,Ee=16711935&(Ee=(Ee=16711935&ge)+((xe<<16)+xe));se[de+pe]=(4278255360&ge)+Ee>>>0}}function Ut(F,Q){Q.jd=F>>0&255,Q.hd=F>>8&255,Q.ud=F>>16&255}function Rt(F,Q,ee,se,de,pe){var ge;for(ge=0;ge<se;++ge){var xe=Q[ee+ge],Ee=xe>>>8,ke=xe,Ue=255&(Ue=(Ue=xe>>>16)+((F.jd<<24>>24)*(Ee<<24>>24)>>>5));ke=255&(ke=(ke=ke+((F.hd<<24>>24)*(Ee<<24>>24)>>>5))+((F.ud<<24>>24)*(Ue<<24>>24)>>>5)),de[pe+ge]=(4278255360&xe)+(Ue<<16)+ke}}function Ht(F,Q,ee,se,de){N[Q]=function(pe,ge,xe,Ee,ke,Ue,st,rt,Ke){for(Ee=st;Ee<rt;++Ee)for(st=0;st<Ke;++st)ke[Ue++]=de(xe[se(pe[ge++])])},N[F]=function(pe,ge,xe,Ee,ke,Ue,st){var rt=8>>pe.b,Ke=pe.Ea,jt=pe.K[0],mt=pe.w;if(8>rt)for(pe=(1<<pe.b)-1,mt=(1<<rt)-1;ge<xe;++ge){var Qe,Ve=0;for(Qe=0;Qe<Ke;++Qe)Qe&pe||(Ve=se(Ee[ke++])),Ue[st++]=de(jt[Ve&mt]),Ve>>=rt}else N["VP8LMapColor"+ee](Ee,ke,jt,mt,Ue,st,ge,xe,Ke)}}function yt(F,Q,ee,se,de){for(ee=Q+ee;Q<ee;){var pe=F[Q++];se[de++]=pe>>16&255,se[de++]=pe>>8&255,se[de++]=pe>>0&255}}function jr(F,Q,ee,se,de){for(ee=Q+ee;Q<ee;){var pe=F[Q++];se[de++]=pe>>16&255,se[de++]=pe>>8&255,se[de++]=pe>>0&255,se[de++]=pe>>24&255}}function rr(F,Q,ee,se,de){for(ee=Q+ee;Q<ee;){var pe=(ge=F[Q++])>>16&240|ge>>12&15,ge=ge>>0&240|ge>>28&15;se[de++]=pe,se[de++]=ge}}function on(F,Q,ee,se,de){for(ee=Q+ee;Q<ee;){var pe=(ge=F[Q++])>>16&248|ge>>13&7,ge=ge>>5&224|ge>>3&31;se[de++]=pe,se[de++]=ge}}function kr(F,Q,ee,se,de){for(ee=Q+ee;Q<ee;){var pe=F[Q++];se[de++]=pe>>0&255,se[de++]=pe>>8&255,se[de++]=pe>>16&255}}function Kr(F,Q,ee,se,de,pe){if(pe==0)for(ee=Q+ee;Q<ee;)Ae(se,((pe=F[Q++])[0]>>24|pe[1]>>8&65280|pe[2]<<8&16711680|pe[3]<<24)>>>0),de+=32;else n(se,de,F,Q,ee)}function Fn(F,Q){N[Q][0]=N[F+"0"],N[Q][1]=N[F+"1"],N[Q][2]=N[F+"2"],N[Q][3]=N[F+"3"],N[Q][4]=N[F+"4"],N[Q][5]=N[F+"5"],N[Q][6]=N[F+"6"],N[Q][7]=N[F+"7"],N[Q][8]=N[F+"8"],N[Q][9]=N[F+"9"],N[Q][10]=N[F+"10"],N[Q][11]=N[F+"11"],N[Q][12]=N[F+"12"],N[Q][13]=N[F+"13"],N[Q][14]=N[F+"0"],N[Q][15]=N[F+"0"]}function Rr(F){return F==Tp||F==Rf||F==Nd||F==k0}function bs(){this.eb=[],this.size=this.A=this.fb=0}function pn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function da(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new bs,this.f.kb=new pn,this.sd=null}function Da(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function an(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function gr(F){return alert("todo:WebPSamplerProcessPlane"),F.T}function tt(F,Q){var ee=F.T,se=Q.ba.f.RGBA,de=se.eb,pe=se.fb+F.ka*se.A,ge=Ai[Q.ba.S],xe=F.y,Ee=F.O,ke=F.f,Ue=F.N,st=F.ea,rt=F.W,Ke=Q.cc,jt=Q.dc,mt=Q.Mc,Qe=Q.Nc,Ve=F.ka,Nt=F.ka+F.T,It=F.U,Bt=It+1>>1;for(Ve==0?ge(xe,Ee,null,null,ke,Ue,st,rt,ke,Ue,st,rt,de,pe,null,null,It):(ge(Q.ec,Q.fc,xe,Ee,Ke,jt,mt,Qe,ke,Ue,st,rt,de,pe-se.A,de,pe,It),++ee);Ve+2<Nt;Ve+=2)Ke=ke,jt=Ue,mt=st,Qe=rt,Ue+=F.Rc,rt+=F.Rc,pe+=2*se.A,ge(xe,(Ee+=2*F.fa)-F.fa,xe,Ee,Ke,jt,mt,Qe,ke,Ue,st,rt,de,pe-se.A,de,pe,It);return Ee+=F.fa,F.j+Nt<F.o?(n(Q.ec,Q.fc,xe,Ee,It),n(Q.cc,Q.dc,ke,Ue,Bt),n(Q.Mc,Q.Nc,st,rt,Bt),ee--):1&Nt||ge(xe,Ee,null,null,ke,Ue,st,rt,ke,Ue,st,rt,de,pe+se.A,null,null,It),ee}function gt(F,Q,ee){var se=F.F,de=[F.J];if(se!=null){var pe=F.U,ge=Q.ba.S,xe=ge==YA||ge==Nd;Q=Q.ba.f.RGBA;var Ee=[0],ke=F.ka;Ee[0]=F.T,F.Kb&&(ke==0?--Ee[0]:(--ke,de[0]-=F.width),F.j+F.ka+F.T==F.o&&(Ee[0]=F.o-F.j-ke));var Ue=Q.eb;ke=Q.fb+ke*Q.A,F=xn(se,de[0],F.width,pe,Ee,Ue,ke+(xe?0:3),Q.A),t(ee==Ee),F&&Rr(ge)&&wl(Ue,ke,xe,pe,Ee,Q.A)}return 0}function Je(F){var Q=F.ma,ee=Q.ba.S,se=11>ee,de=ee==N0||ee==Bp||ee==YA||ee==Sd||ee==12||Rr(ee);if(Q.memory=null,Q.Ib=null,Q.Jb=null,Q.Nd=null,!Sf(Q.Oa,F,de?11:12))return 0;if(de&&Rr(ee)&&Mt(),F.da)alert("todo:use_scaling");else{if(se){if(Q.Ib=gr,F.Kb){if(ee=F.U+1>>1,Q.memory=s(F.U+2*ee),Q.memory==null)return 0;Q.ec=Q.memory,Q.fc=0,Q.cc=Q.ec,Q.dc=Q.fc+F.U,Q.Mc=Q.cc,Q.Nc=Q.dc+ee,Q.Ib=tt,Mt()}}else alert("todo:EmitYUV");de&&(Q.Jb=gt,se&&Ge())}if(se&&!LC){for(F=0;256>F;++F)JT[F]=89858*(F-128)+Vs>>Iu,Fp[F]=-22014*(F-128)+Vs,uy[F]=-45773*(F-128),zs[F]=113618*(F-128)+Vs>>Iu;for(F=Uf;F<Vx;++F)Q=76283*(F-16)+Vs>>Iu,Op[F-Uf]=$n(Q,255),dy[F-Uf]=$n(Q+8>>4,15);LC=1}return 1}function xt(F){var Q=F.ma,ee=F.U,se=F.T;return t(!(1&F.ka)),0>=ee||0>=se?0:(ee=Q.Ib(F,Q),Q.Jb!=null&&Q.Jb(F,Q,ee),Q.Dc+=ee,1)}function Et(F){F.ma.memory=null}function bt(F,Q,ee,se){return J(F,8)!=47?0:(Q[0]=J(F,14)+1,ee[0]=J(F,14)+1,se[0]=J(F,1),J(F,3)!=0?0:!F.h)}function ar(F,Q){if(4>F)return F+1;var ee=F-2>>1;return(2+(1&F)<<ee)+J(Q,ee)+1}function vr(F,Q){return 120<Q?Q-120:1<=(ee=((ee=Bd[Q-1])>>4)*F+(8-(15&ee)))?ee:1;var ee}function Yr(F,Q,ee){var se=H(ee),de=F[Q+=255&se].g-8;return 0<de&&(Z(ee,ee.u+8),se=H(ee),Q+=F[Q].value,Q+=se&(1<<de)-1),Z(ee,ee.u+F[Q].g),F[Q].value}function tn(F,Q,ee){return ee.g+=F.g,ee.value+=F.value<<Q>>>0,t(8>=ee.g),F.g}function Xr(F,Q,ee){var se=F.xc;return t((Q=se==0?0:F.vc[F.md*(ee>>se)+(Q>>se)])<F.Wb),F.Ya[Q]}function he(F,Q,ee,se){var de=F.ab,pe=F.c*Q,ge=F.C;Q=ge+Q;var xe=ee,Ee=se;for(se=F.Ta,ee=F.Ua;0<de--;){var ke=F.gc[de],Ue=ge,st=Q,rt=xe,Ke=Ee,jt=(Ee=se,xe=ee,ke.Ea);switch(t(Ue<st),t(st<=ke.nc),ke.hc){case 2:Px(rt,Ke,(st-Ue)*jt,Ee,xe);break;case 0:var mt=Ue,Qe=st,Ve=Ee,Nt=xe,It=(tr=ke).Ea;mt==0&&(ly(rt,Ke,null,null,1,Ve,Nt),pt(rt,Ke+1,0,0,It-1,Ve,Nt+1),Ke+=It,Nt+=It,++mt);for(var Bt=1<<tr.b,nr=Bt-1,Yt=Le(It,tr.b),yr=tr.K,tr=tr.w+(mt>>tr.b)*Yt;mt<Qe;){var Pn=yr,Gn=tr,mn=1;for(Np(rt,Ke,Ve,Nt-It,1,Ve,Nt);mn<It;){var un=(mn&~nr)+Bt;un>It&&(un=It),(0,Ed[Pn[Gn++]>>8&15])(rt,Ke+ +mn,Ve,Nt+mn-It,un-mn,Ve,Nt+mn),mn=un}Ke+=It,Nt+=It,++mt&nr||(tr+=Yt)}st!=ke.nc&&n(Ee,xe-jt,Ee,xe+(st-Ue-1)*jt,jt);break;case 1:for(jt=rt,Qe=Ke,It=(rt=ke.Ea)-(Nt=rt&~(Ve=(Ke=1<<ke.b)-1)),mt=Le(rt,ke.b),Bt=ke.K,ke=ke.w+(Ue>>ke.b)*mt;Ue<st;){for(nr=Bt,Yt=ke,yr=new Oe,tr=Qe+Nt,Pn=Qe+rt;Qe<tr;)Ut(nr[Yt++],yr),Bf(yr,jt,Qe,Ke,Ee,xe),Qe+=Ke,xe+=Ke;Qe<Pn&&(Ut(nr[Yt++],yr),Bf(yr,jt,Qe,It,Ee,xe),Qe+=It,xe+=It),++Ue&Ve||(ke+=mt)}break;case 3:if(rt==Ee&&Ke==xe&&0<ke.b){for(Qe=Ee,rt=jt=xe+(st-Ue)*jt-(Nt=(st-Ue)*Le(ke.Ea,ke.b)),Ke=Ee,Ve=xe,mt=[],Nt=(It=Nt)-1;0<=Nt;--Nt)mt[Nt]=Ke[Ve+Nt];for(Nt=It-1;0<=Nt;--Nt)Qe[rt+Nt]=mt[Nt];ql(ke,Ue,st,Ee,jt,Ee,xe)}else ql(ke,Ue,st,rt,Ke,Ee,xe)}xe=se,Ee=ee}Ee!=ee&&n(se,ee,xe,Ee,pe)}function Te(F,Q){var ee=F.V,se=F.Ba+F.c*F.C,de=Q-F.C;if(t(Q<=F.l.o),t(16>=de),0<de){var pe=F.l,ge=F.Ta,xe=F.Ua,Ee=pe.width;if(he(F,de,ee,se),de=xe=[xe],t((ee=F.C)<(se=Q)),t(pe.v<pe.va),se>pe.o&&(se=pe.o),ee<pe.j){var ke=pe.j-ee;ee=pe.j,de[0]+=ke*Ee}if(ee>=se?ee=0:(de[0]+=4*pe.v,pe.ka=ee-pe.j,pe.U=pe.va-pe.v,pe.T=se-ee,ee=1),ee){if(xe=xe[0],11>(ee=F.ca).S){var Ue=ee.f.RGBA,st=(se=ee.S,de=pe.U,pe=pe.T,ke=Ue.eb,Ue.A),rt=pe;for(Ue=Ue.fb+F.Ma*Ue.A;0<rt--;){var Ke=ge,jt=xe,mt=de,Qe=ke,Ve=Ue;switch(se){case qi:mo(Ke,jt,mt,Qe,Ve);break;case N0:ji(Ke,jt,mt,Qe,Ve);break;case Tp:ji(Ke,jt,mt,Qe,Ve),wl(Qe,Ve,0,mt,1,0);break;case ku:Bc(Ke,jt,mt,Qe,Ve);break;case Bp:Kr(Ke,jt,mt,Qe,Ve,1);break;case Rf:Kr(Ke,jt,mt,Qe,Ve,1),wl(Qe,Ve,0,mt,1,0);break;case YA:Kr(Ke,jt,mt,Qe,Ve,0);break;case Nd:Kr(Ke,jt,mt,Qe,Ve,0),wl(Qe,Ve,1,mt,1,0);break;case Sd:Tf(Ke,jt,mt,Qe,Ve);break;case k0:Tf(Ke,jt,mt,Qe,Ve),gn(Qe,Ve,mt,1,0);break;case Lx:Vo(Ke,jt,mt,Qe,Ve);break;default:t(0)}xe+=Ee,Ue+=st}F.Ma+=pe}else alert("todo:EmitRescaledRowsYUVA");t(F.Ma<=ee.height)}}F.C=Q,t(F.C<=F.i)}function Ce(F){var Q;if(0<F.ua)return 0;for(Q=0;Q<F.Wb;++Q){var ee=F.Ya[Q].G,se=F.Ya[Q].H;if(0<ee[1][se[1]+0].g||0<ee[2][se[2]+0].g||0<ee[3][se[3]+0].g)return 0}return 1}function we(F,Q,ee,se,de,pe){if(F.Z!=0){var ge=F.qd,xe=F.rd;for(t(Tu[F.Z]!=null);Q<ee;++Q)Tu[F.Z](ge,xe,se,de,se,de,pe),ge=se,xe=de,de+=pe;F.qd=ge,F.rd=xe}}function Ne(F,Q){var ee=F.l.ma,se=ee.Z==0||ee.Z==1?F.l.j:F.C;if(se=F.C<se?se:F.C,t(Q<=F.l.o),Q>se){var de=F.l.width,pe=ee.ca,ge=ee.tb+de*se,xe=F.V,Ee=F.Ba+F.c*se,ke=F.gc;t(F.ab==1),t(ke[0].hc==3),kf(ke[0],se,Q,xe,Ee,pe,ge),we(ee,se,Q,pe,ge,de)}F.C=F.Ma=Q}function je(F,Q,ee,se,de,pe,ge){var xe=F.$/se,Ee=F.$%se,ke=F.m,Ue=F.s,st=ee+F.$,rt=st;de=ee+se*de;var Ke=ee+se*pe,jt=280+Ue.ua,mt=F.Pb?xe:16777216,Qe=0<Ue.ua?Ue.Wa:null,Ve=Ue.wc,Nt=st<Ke?Xr(Ue,Ee,xe):null;t(F.C<pe),t(Ke<=de);var It=!1;e:for(;;){for(;It||st<Ke;){var Bt=0;if(xe>=mt){var nr=st-ee;t((mt=F).Pb),mt.wd=mt.m,mt.xd=nr,0<mt.s.ua&&Se(mt.s.Wa,mt.s.vb),mt=xe+DC}if(Ee&Ve||(Nt=Xr(Ue,Ee,xe)),t(Nt!=null),Nt.Qb&&(Q[st]=Nt.qb,It=!0),!It)if(ae(ke),Nt.jc){Bt=ke,nr=Q;var Yt=st,yr=Nt.pd[H(Bt)&Qs-1];t(Nt.jc),256>yr.g?(Z(Bt,Bt.u+yr.g),nr[Yt]=yr.value,Bt=0):(Z(Bt,Bt.u+yr.g-256),t(256<=yr.value),Bt=yr.value),Bt==0&&(It=!0)}else Bt=Yr(Nt.G[0],Nt.H[0],ke);if(ke.h)break;if(It||256>Bt){if(!It)if(Nt.nd)Q[st]=(Nt.qb|Bt<<8)>>>0;else{if(ae(ke),It=Yr(Nt.G[1],Nt.H[1],ke),ae(ke),nr=Yr(Nt.G[2],Nt.H[2],ke),Yt=Yr(Nt.G[3],Nt.H[3],ke),ke.h)break;Q[st]=(Yt<<24|It<<16|Bt<<8|nr)>>>0}if(It=!1,++st,++Ee>=se&&(Ee=0,++xe,ge!=null&&xe<=pe&&!(xe%16)&&ge(F,xe),Qe!=null))for(;rt<st;)Bt=Q[rt++],Qe.X[(506832829*Bt&4294967295)>>>Qe.Mb]=Bt}else if(280>Bt){if(Bt=ar(Bt-256,ke),nr=Yr(Nt.G[4],Nt.H[4],ke),ae(ke),nr=vr(se,nr=ar(nr,ke)),ke.h)break;if(st-ee<nr||de-st<Bt)break e;for(Yt=0;Yt<Bt;++Yt)Q[st+Yt]=Q[st+Yt-nr];for(st+=Bt,Ee+=Bt;Ee>=se;)Ee-=se,++xe,ge!=null&&xe<=pe&&!(xe%16)&&ge(F,xe);if(t(st<=de),Ee&Ve&&(Nt=Xr(Ue,Ee,xe)),Qe!=null)for(;rt<st;)Bt=Q[rt++],Qe.X[(506832829*Bt&4294967295)>>>Qe.Mb]=Bt}else{if(!(Bt<jt))break e;for(It=Bt-280,t(Qe!=null);rt<st;)Bt=Q[rt++],Qe.X[(506832829*Bt&4294967295)>>>Qe.Mb]=Bt;Bt=st,t(!(It>>>(nr=Qe).Xa)),Q[Bt]=nr.X[It],It=!0}It||t(ke.h==Y(ke))}if(F.Pb&&ke.h&&st<de)t(F.m.h),F.a=5,F.m=F.wd,F.$=F.xd,0<F.s.ua&&Se(F.s.vb,F.s.Wa);else{if(ke.h)break e;ge!=null&&ge(F,xe>pe?pe:xe),F.a=0,F.$=st-ee}return 1}return F.a=3,0}function Ye(F){t(F!=null),F.vc=null,F.yc=null,F.Ya=null;var Q=F.Wa;Q!=null&&(Q.X=null),F.vb=null,t(F!=null)}function dt(){var F=new w0;return F==null?null:(F.a=0,F.xb=B0,Fn("Predictor","VP8LPredictors"),Fn("Predictor","VP8LPredictors_C"),Fn("PredictorAdd","VP8LPredictorsAdd"),Fn("PredictorAdd","VP8LPredictorsAdd_C"),Px=Ft,Bf=Rt,mo=yt,ji=jr,Tf=rr,Vo=on,Bc=kr,N.VP8LMapColor32b=di,N.VP8LMapColor8b=kp,F)}function $e(F,Q,ee,se,de){var pe=1,ge=[F],xe=[Q],Ee=se.m,ke=se.s,Ue=null,st=0;e:for(;;){if(ee)for(;pe&&J(Ee,1);){var rt=ge,Ke=xe,jt=se,mt=1,Qe=jt.m,Ve=jt.gc[jt.ab],Nt=J(Qe,2);if(jt.Oc&1<<Nt)pe=0;else{switch(jt.Oc|=1<<Nt,Ve.hc=Nt,Ve.Ea=rt[0],Ve.nc=Ke[0],Ve.K=[null],++jt.ab,t(4>=jt.ab),Nt){case 0:case 1:Ve.b=J(Qe,3)+2,mt=$e(Le(Ve.Ea,Ve.b),Le(Ve.nc,Ve.b),0,jt,Ve.K),Ve.K=Ve.K[0];break;case 3:var It,Bt=J(Qe,8)+1,nr=16<Bt?0:4<Bt?1:2<Bt?2:3;if(rt[0]=Le(Ve.Ea,nr),Ve.b=nr,It=mt=$e(Bt,1,0,jt,Ve.K)){var Yt,yr=Bt,tr=Ve,Pn=1<<(8>>tr.b),Gn=s(Pn);if(Gn==null)It=0;else{var mn=tr.K[0],un=tr.w;for(Gn[0]=tr.K[0][0],Yt=1;Yt<1*yr;++Yt)Gn[Yt]=We(mn[un+Yt],Gn[Yt-1]);for(;Yt<4*Pn;++Yt)Gn[Yt]=0;tr.K[0]=null,tr.K[0]=Gn,It=1}}mt=It;break;case 2:break;default:t(0)}pe=mt}}if(ge=ge[0],xe=xe[0],pe&&J(Ee,1)&&!(pe=1<=(st=J(Ee,4))&&11>=st)){se.a=3;break e}var sa;if(sa=pe)t:{var Kn,Zr,Aa,Tr=se,Hr=ge,Dn=xe,Rn=st,hi=ee,$s=Tr.m,cs=Tr.s,us=[null],Ss=1,Jl=0,qn=ZA[Rn];r:for(;;){if(hi&&J($s,1)){var Ns=J($s,3)+2,Ic=Le(Hr,Ns),Qf=Le(Dn,Ns),rh=Ic*Qf;if(!$e(Ic,Qf,0,Tr,us))break r;for(us=us[0],cs.xc=Ns,Kn=0;Kn<rh;++Kn){var Hf=us[Kn]>>8&65535;us[Kn]=Hf,Hf>=Ss&&(Ss=Hf+1)}}if($s.h)break r;for(Zr=0;5>Zr;++Zr){var Pa=El[Zr];!Zr&&0<Rn&&(Pa+=1<<Rn),Jl<Pa&&(Jl=Pa)}var Dp=i(Ss*qn,k),zx=Ss,go=i(zx,R);if(go==null)var Va=null;else t(65536>=zx),Va=go;var nh=s(Jl);if(Va==null||nh==null||Dp==null){Tr.a=1;break r}var Vf=Dp;for(Kn=Aa=0;Kn<Ss;++Kn){var $o=Va[Kn],zf=$o.G,Go=$o.H,Pp=0,j0=1,$x=0;for(Zr=0;5>Zr;++Zr){Pa=El[Zr],zf[Zr]=Vf,Go[Zr]=Aa,!Zr&&0<Rn&&(Pa+=1<<Rn);a:{var Rp,Gx=Pa,Lp=Tr,I0=nh,QC=Vf,HC=Aa,Mp=0,Fd=Lp.m,ej=J(Fd,1);if(a(I0,0,0,Gx),ej){var VC=J(Fd,1)+1,zC=J(Fd,1),fy=J(Fd,zC==0?1:8);I0[fy]=1,VC==2&&(I0[fy=J(Fd,8)]=1);var F0=1}else{var Ay=s(19),hy=J(Fd,4)+4;if(19<hy){Lp.a=3;var Up=0;break a}for(Rp=0;Rp<hy;++Rp)Ay[kd[Rp]]=J(Fd,3);var Kx=void 0,O0=void 0,$C=Lp,GC=Ay,Od=Gx,Qp=I0,qx=0,Fc=$C.m,D0=8,my=i(128,k);n:for(;D(my,0,7,GC,19);){if(J(Fc,1)){var KC=2+2*J(Fc,3);if((Kx=2+J(Fc,KC))>Od)break n}else Kx=Od;for(O0=0;O0<Od&&Kx--;){ae(Fc);var py=my[0+(127&H(Fc))];Z(Fc,Fc.u+py.g);var ah=py.value;if(16>ah)Qp[O0++]=ah,ah!=0&&(D0=ah);else{var qC=ah==16,gy=ah-16,xy=Yl[gy],vy=J(Fc,Mx[gy])+xy;if(O0+vy>Od)break n;for(var WC=qC?D0:0;0<vy--;)Qp[O0++]=WC}}qx=1;break n}qx||($C.a=3),F0=qx}(F0=F0&&!Fd.h)&&(Mp=D(QC,HC,8,I0,Gx)),F0&&Mp!=0?Up=Mp:(Lp.a=3,Up=0)}if(Up==0)break r;if(j0&&JA[Zr]==1&&(j0=Vf[Aa].g==0),Pp+=Vf[Aa].g,Aa+=Up,3>=Zr){var sh,Wx=nh[0];for(sh=1;sh<Pa;++sh)nh[sh]>Wx&&(Wx=nh[sh]);$x+=Wx}}if($o.nd=j0,$o.Qb=0,j0&&($o.qb=(zf[3][Go[3]+0].value<<24|zf[1][Go[1]+0].value<<16|zf[2][Go[2]+0].value)>>>0,Pp==0&&256>zf[0][Go[0]+0].value&&($o.Qb=1,$o.qb+=zf[0][Go[0]+0].value<<8)),$o.jc=!$o.Qb&&6>$x,$o.jc){var Hp,Dd=$o;for(Hp=0;Hp<Qs;++Hp){var Fu=Hp,Pd=Dd.pd[Fu],Vp=Dd.G[0][Dd.H[0]+Fu];256<=Vp.value?(Pd.g=Vp.g+256,Pd.value=Vp.value):(Pd.g=0,Pd.value=0,Fu>>=tn(Vp,8,Pd),Fu>>=tn(Dd.G[1][Dd.H[1]+Fu],16,Pd),Fu>>=tn(Dd.G[2][Dd.H[2]+Fu],0,Pd),tn(Dd.G[3][Dd.H[3]+Fu],24,Pd))}}}cs.vc=us,cs.Wb=Ss,cs.Ya=Va,cs.yc=Dp,sa=1;break t}sa=0}if(!(pe=sa)){se.a=3;break e}if(0<st){if(ke.ua=1<<st,!Ie(ke.Wa,st)){se.a=1,pe=0;break e}}else ke.ua=0;var zp=se,by=ge,XC=xe,yy=zp.s,wy=yy.xc;if(zp.c=by,zp.i=XC,yy.md=Le(by,wy),yy.wc=wy==0?-1:(1<<wy)-1,ee){se.xb=RC;break e}if((Ue=s(ge*xe))==null){se.a=1,pe=0;break e}pe=(pe=je(se,Ue,0,ge,xe,xe,null))&&!Ee.h;break e}return pe?(de!=null?de[0]=Ue:(t(Ue==null),t(ee)),se.$=0,ee||Ye(ke)):Ye(ke),pe}function nt(F,Q){var ee=F.c*F.i,se=ee+Q+16*Q;return t(F.c<=Q),F.V=s(se),F.V==null?(F.Ta=null,F.Ua=0,F.a=1,0):(F.Ta=F.V,F.Ua=F.Ba+ee+Q,1)}function it(F,Q){var ee=F.C,se=Q-ee,de=F.V,pe=F.Ba+F.c*ee;for(t(Q<=F.l.o);0<se;){var ge=16<se?16:se,xe=F.l.ma,Ee=F.l.width,ke=Ee*ge,Ue=xe.ca,st=xe.tb+Ee*ee,rt=F.Ta,Ke=F.Ua;he(F,ge,de,pe),Ca(rt,Ke,Ue,st,ke),we(xe,ee,ee+ge,Ue,st,Ee),se-=ge,de+=ge*F.c,ee+=ge}t(ee==Q),F.C=F.Ma=Q}function Ot(){this.ub=this.yd=this.td=this.Rb=0}function zt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Zt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Vt(){this.Yb=function(){var F=[];return function Q(ee,se,de){for(var pe=de[se],ge=0;ge<pe&&(ee.push(de.length>se+1?[]:0),!(de.length<se+1));ge++)Q(ee[ge],se+1,de)}(F,0,[3,11]),F}()}function Kt(){this.jb=s(3),this.Wc=o([4,8],Vt),this.Xc=o([4,17],Vt)}function Br(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function ln(){this.ld=this.La=this.dd=this.tc=0}function cn(){this.Na=this.la=0}function hn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ys(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Po(){this.uc=this.M=this.Nb=0,this.wa=Array(new ln),this.Y=0,this.ya=Array(new ys),this.aa=0,this.l=new Us}function ws(){this.y=s(16),this.f=s(8),this.ea=s(8)}function ci(){this.cb=this.a=0,this.sc="",this.m=new te,this.Od=new Ot,this.Kc=new zt,this.ed=new Br,this.Qa=new Zt,this.Ic=this.$c=this.Aa=0,this.D=new Po,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,te),this.ia=0,this.pb=i(4,hn),this.Pa=new Kt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ws),this.Hd=0,this.rb=Array(new cn),this.sb=0,this.wa=Array(new ln),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ys),this.L=this.aa=0,this.gd=o([4,2],ln),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Us(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ni(){var F=new ci;return F!=null&&(F.a=0,F.sc="OK",F.cb=0,F.Xb=0,Hs||(Hs=x0)),F}function Ea(F,Q,ee){return F.a==0&&(F.a=Q,F.sc=ee,F.cb=0),0}function ui(F,Q,ee){return 3<=ee&&F[Q+0]==157&&F[Q+1]==1&&F[Q+2]==42}function vf(F,Q){if(F==null)return 0;if(F.a=0,F.sc="OK",Q==null)return Ea(F,2,"null VP8Io passed to VP8GetHeaders()");var ee=Q.data,se=Q.w,de=Q.ha;if(4>de)return Ea(F,7,"Truncated header.");var pe=ee[se+0]|ee[se+1]<<8|ee[se+2]<<16,ge=F.Od;if(ge.Rb=!(1&pe),ge.td=pe>>1&7,ge.yd=pe>>4&1,ge.ub=pe>>5,3<ge.td)return Ea(F,3,"Incorrect keyframe parameters.");if(!ge.yd)return Ea(F,4,"Frame not displayable.");se+=3,de-=3;var xe=F.Kc;if(ge.Rb){if(7>de)return Ea(F,7,"cannot parse picture header");if(!ui(ee,se,de))return Ea(F,3,"Bad code word");xe.c=16383&(ee[se+4]<<8|ee[se+3]),xe.Td=ee[se+4]>>6,xe.i=16383&(ee[se+6]<<8|ee[se+5]),xe.Ud=ee[se+6]>>6,se+=7,de-=7,F.za=xe.c+15>>4,F.Ub=xe.i+15>>4,Q.width=xe.c,Q.height=xe.i,Q.Da=0,Q.j=0,Q.v=0,Q.va=Q.width,Q.o=Q.height,Q.da=0,Q.ib=Q.width,Q.hb=Q.height,Q.U=Q.width,Q.T=Q.height,a((pe=F.Pa).jb,0,255,pe.jb.length),t((pe=F.Qa)!=null),pe.Cb=0,pe.Bb=0,pe.Fb=1,a(pe.Zb,0,0,pe.Zb.length),a(pe.Lb,0,0,pe.Lb)}if(ge.ub>de)return Ea(F,7,"bad partition length");W(pe=F.m,ee,se,ge.ub),se+=ge.ub,de-=ge.ub,ge.Rb&&(xe.Ld=ie(pe),xe.Kd=ie(pe)),xe=F.Qa;var Ee,ke=F.Pa;if(t(pe!=null),t(xe!=null),xe.Cb=ie(pe),xe.Cb){if(xe.Bb=ie(pe),ie(pe)){for(xe.Fb=ie(pe),Ee=0;4>Ee;++Ee)xe.Zb[Ee]=ie(pe)?G(pe,7):0;for(Ee=0;4>Ee;++Ee)xe.Lb[Ee]=ie(pe)?G(pe,6):0}if(xe.Bb)for(Ee=0;3>Ee;++Ee)ke.jb[Ee]=ie(pe)?V(pe,8):255}else xe.Bb=0;if(pe.Ka)return Ea(F,3,"cannot parse segment header");if((xe=F.ed).zd=ie(pe),xe.Tb=V(pe,6),xe.wb=V(pe,3),xe.Pc=ie(pe),xe.Pc&&ie(pe)){for(ke=0;4>ke;++ke)ie(pe)&&(xe.vd[ke]=G(pe,6));for(ke=0;4>ke;++ke)ie(pe)&&(xe.od[ke]=G(pe,6))}if(F.L=xe.Tb==0?0:xe.zd?1:2,pe.Ka)return Ea(F,3,"cannot parse filter header");var Ue=de;if(de=Ee=se,se=Ee+Ue,xe=Ue,F.Xb=(1<<V(F.m,2))-1,Ue<3*(ke=F.Xb))ee=7;else{for(Ee+=3*ke,xe-=3*ke,Ue=0;Ue<ke;++Ue){var st=ee[de+0]|ee[de+1]<<8|ee[de+2]<<16;st>xe&&(st=xe),W(F.Jc[+Ue],ee,Ee,st),Ee+=st,xe-=st,de+=3}W(F.Jc[+ke],ee,Ee,xe),ee=Ee<se?0:5}if(ee!=0)return Ea(F,ee,"cannot parse partitions");for(ee=V(Ee=F.m,7),de=ie(Ee)?G(Ee,4):0,se=ie(Ee)?G(Ee,4):0,xe=ie(Ee)?G(Ee,4):0,ke=ie(Ee)?G(Ee,4):0,Ee=ie(Ee)?G(Ee,4):0,Ue=F.Qa,st=0;4>st;++st){if(Ue.Cb){var rt=Ue.Zb[st];Ue.Fb||(rt+=ee)}else{if(0<st){F.pb[st]=F.pb[0];continue}rt=ee}var Ke=F.pb[st];Ke.Sc[0]=jp[$n(rt+de,127)],Ke.Sc[1]=Ip[$n(rt+0,127)],Ke.Eb[0]=2*jp[$n(rt+se,127)],Ke.Eb[1]=101581*Ip[$n(rt+xe,127)]>>16,8>Ke.Eb[1]&&(Ke.Eb[1]=8),Ke.Qc[0]=jp[$n(rt+ke,117)],Ke.Qc[1]=Ip[$n(rt+Ee,127)],Ke.lc=rt+Ee}if(!ge.Rb)return Ea(F,4,"Not a key frame.");for(ie(pe),ge=F.Pa,ee=0;4>ee;++ee){for(de=0;8>de;++de)for(se=0;3>se;++se)for(xe=0;11>xe;++xe)ke=ce(pe,eh[ee][de][se][xe])?V(pe,8):Bu[ee][de][se][xe],ge.Wc[ee][de].Yb[se][xe]=ke;for(de=0;17>de;++de)ge.Xc[ee][de]=ge.Wc[ee][PC[de]]}return F.kc=ie(pe),F.kc&&(F.Bd=V(pe,8)),F.cb=1}function x0(F,Q,ee,se,de,pe,ge){var xe=Q[de].Yb[ee];for(ee=0;16>de;++de){if(!ce(F,xe[ee+0]))return de;for(;!ce(F,xe[ee+1]);)if(xe=Q[++de].Yb[0],ee=0,de==16)return 16;var Ee=Q[de+1].Yb;if(ce(F,xe[ee+2])){var ke=F,Ue=0;if(ce(ke,(rt=xe)[(st=ee)+3]))if(ce(ke,rt[st+6])){for(xe=0,st=2*(Ue=ce(ke,rt[st+8]))+(rt=ce(ke,rt[st+9+Ue])),Ue=0,rt=Za[st];rt[xe];++xe)Ue+=Ue+ce(ke,rt[xe]);Ue+=3+(8<<st)}else ce(ke,rt[st+7])?(Ue=7+2*ce(ke,165),Ue+=ce(ke,145)):Ue=5+ce(ke,159);else Ue=ce(ke,rt[st+4])?3+ce(ke,rt[st+5]):2;xe=Ee[2]}else Ue=1,xe=Ee[1];Ee=ge+Un[de],0>(ke=F).b&&le(ke);var st,rt=ke.b,Ke=(st=ke.Ca>>1)-(ke.I>>rt)>>31;--ke.b,ke.Ca+=Ke,ke.Ca|=1,ke.I-=(st+1&Ke)<<rt,pe[Ee]=((Ue^Ke)-Ke)*se[(0<de)+0]}return 16}function hu(F){var Q=F.rb[F.sb-1];Q.la=0,Q.Na=0,a(F.zc,0,0,F.zc.length),F.ja=0}function LA(F,Q){if(F==null)return 0;if(Q==null)return Ea(F,2,"NULL VP8Io parameter in VP8Decode().");if(!F.cb&&!vf(F,Q))return 0;if(t(F.cb),Q.ac==null||Q.ac(Q)){Q.ob&&(F.L=0);var ee=Id[F.L];if(F.L==2?(F.yb=0,F.zb=0):(F.yb=Q.v-ee>>4,F.zb=Q.j-ee>>4,0>F.yb&&(F.yb=0),0>F.zb&&(F.zb=0)),F.Va=Q.o+15+ee>>4,F.Hb=Q.va+15+ee>>4,F.Hb>F.za&&(F.Hb=F.za),F.Va>F.Ub&&(F.Va=F.Ub),0<F.L){var se=F.ed;for(ee=0;4>ee;++ee){var de;if(F.Qa.Cb){var pe=F.Qa.Lb[ee];F.Qa.Fb||(pe+=se.Tb)}else pe=se.Tb;for(de=0;1>=de;++de){var ge=F.gd[ee][de],xe=pe;if(se.Pc&&(xe+=se.vd[0],de&&(xe+=se.od[0])),0<(xe=0>xe?0:63<xe?63:xe)){var Ee=xe;0<se.wb&&(Ee=4<se.wb?Ee>>2:Ee>>1)>9-se.wb&&(Ee=9-se.wb),1>Ee&&(Ee=1),ge.dd=Ee,ge.tc=2*xe+Ee,ge.ld=40<=xe?2:15<=xe?1:0}else ge.tc=0;ge.La=de}}}ee=0}else Ea(F,6,"Frame setup failed"),ee=F.a;if(ee=ee==0){if(ee){F.$c=0,0<F.Aa||(F.Ic=MC);e:{ee=F.Ic,se=4*(Ee=F.za);var ke=32*Ee,Ue=Ee+1,st=0<F.L?Ee*(0<F.Aa?2:1):0,rt=(F.Aa==2?2:1)*Ee;if((ge=se+832+(de=3*(16*ee+Id[F.L])/2*ke)+(pe=F.Fa!=null&&0<F.Fa.length?F.Kc.c*F.Kc.i:0))!=ge)ee=0;else{if(ge>F.Vb){if(F.Vb=0,F.Ec=s(ge),F.Fc=0,F.Ec==null){ee=Ea(F,1,"no memory during frame initialization.");break e}F.Vb=ge}ge=F.Ec,xe=F.Fc,F.Ac=ge,F.Bc=xe,xe+=se,F.Gd=i(ke,ws),F.Hd=0,F.rb=i(Ue+1,cn),F.sb=1,F.wa=st?i(st,ln):null,F.Y=0,F.D.Nb=0,F.D.wa=F.wa,F.D.Y=F.Y,0<F.Aa&&(F.D.Y+=Ee),t(!0),F.oc=ge,F.pc=xe,xe+=832,F.ya=i(rt,ys),F.aa=0,F.D.ya=F.ya,F.D.aa=F.aa,F.Aa==2&&(F.D.aa+=Ee),F.R=16*Ee,F.B=8*Ee,Ee=(ke=Id[F.L])*F.R,ke=ke/2*F.B,F.sa=ge,F.ta=xe+Ee,F.qa=F.sa,F.ra=F.ta+16*ee*F.R+ke,F.Ha=F.qa,F.Ia=F.ra+8*ee*F.B+ke,F.$c=0,xe+=de,F.mb=pe?ge:null,F.nb=pe?xe:null,t(xe+pe<=F.Fc+F.Vb),hu(F),a(F.Ac,F.Bc,0,se),ee=1}}if(ee){if(Q.ka=0,Q.y=F.sa,Q.O=F.ta,Q.f=F.qa,Q.N=F.ra,Q.ea=F.Ha,Q.Vd=F.Ia,Q.fa=F.R,Q.Rc=F.B,Q.F=null,Q.J=0,!_d){for(ee=-255;255>=ee;++ee)ls[255+ee]=0>ee?-ee:ee;for(ee=-1020;1020>=ee;++ee)Wl[1020+ee]=-128>ee?-128:127<ee?127:ee;for(ee=-112;112>=ee;++ee)Df[112+ee]=-16>ee?-16:15<ee?15:ee;for(ee=-255;510>=ee;++ee)Pf[255+ee]=0>ee?0:255<ee?255:ee;_d=1}Su=Ro,Tc=pu,jc=Ul,_s=zn,zo=gu,Ya=mu,KA=yu,Nu=Nc,_0=Ef,jf=VA,If=wf,Ff=xd,qA=vd,S0=wu,Of=yl,Cd=Gi,WA=Cs,Ja=y0,po[0]=zi,po[1]=v0,po[2]=Vl,po[3]=b0,po[4]=Lo,po[5]=zl,po[6]=ho,po[7]=Mo,po[8]=Sc,po[9]=xu,Td[0]=Ql,Td[1]=UA,Td[2]=Ec,Td[3]=yf,Td[4]=fa,Td[5]=_c,Td[6]=Hl,Cl[0]=$l,Cl[1]=MA,Cl[2]=QA,Cl[3]=Uo,Cl[4]=bn,Cl[5]=Es,Cl[6]=vu,ee=1}else ee=0}ee&&(ee=function(Ke,jt){for(Ke.M=0;Ke.M<Ke.Va;++Ke.M){var mt,Qe=Ke.Jc[Ke.M&Ke.Xb],Ve=Ke.m,Nt=Ke;for(mt=0;mt<Nt.za;++mt){var It=Ve,Bt=Nt,nr=Bt.Ac,Yt=Bt.Bc+4*mt,yr=Bt.zc,tr=Bt.ya[Bt.aa+mt];if(Bt.Qa.Bb?tr.$b=ce(It,Bt.Pa.jb[0])?2+ce(It,Bt.Pa.jb[2]):ce(It,Bt.Pa.jb[1]):tr.$b=0,Bt.kc&&(tr.Ad=ce(It,Bt.Bd)),tr.Za=!ce(It,145)+0,tr.Za){var Pn=tr.Ob,Gn=0;for(Bt=0;4>Bt;++Bt){var mn,un=yr[0+Bt];for(mn=0;4>mn;++mn){un=cy[nr[Yt+mn]][un];for(var sa=Lf[ce(It,un[0])];0<sa;)sa=Lf[2*sa+ce(It,un[sa])];un=-sa,nr[Yt+mn]=un}n(Pn,Gn,nr,Yt,4),Gn+=4,yr[0+Bt]=un}}else un=ce(It,156)?ce(It,128)?1:3:ce(It,163)?2:0,tr.Ob[0]=un,a(nr,Yt,un,4),a(yr,0,un,4);tr.Dd=ce(It,142)?ce(It,114)?ce(It,183)?1:3:2:0}if(Nt.m.Ka)return Ea(Ke,7,"Premature end-of-partition0 encountered.");for(;Ke.ja<Ke.za;++Ke.ja){if(Nt=Qe,It=(Ve=Ke).rb[Ve.sb-1],nr=Ve.rb[Ve.sb+Ve.ja],mt=Ve.ya[Ve.aa+Ve.ja],Yt=Ve.kc?mt.Ad:0)It.la=nr.la=0,mt.Za||(It.Na=nr.Na=0),mt.Hc=0,mt.Gc=0,mt.ia=0;else{var Kn,Zr;if(It=nr,nr=Nt,Yt=Ve.Pa.Xc,yr=Ve.ya[Ve.aa+Ve.ja],tr=Ve.pb[yr.$b],Bt=yr.ad,Pn=0,Gn=Ve.rb[Ve.sb-1],un=mn=0,a(Bt,Pn,0,384),yr.Za)var Aa=0,Tr=Yt[3];else{sa=s(16);var Hr=It.Na+Gn.Na;if(Hr=Hs(nr,Yt[1],Hr,tr.Eb,0,sa,0),It.Na=Gn.Na=(0<Hr)+0,1<Hr)Su(sa,0,Bt,Pn);else{var Dn=sa[0]+3>>3;for(sa=0;256>sa;sa+=16)Bt[Pn+sa]=Dn}Aa=1,Tr=Yt[0]}var Rn=15&It.la,hi=15&Gn.la;for(sa=0;4>sa;++sa){var $s=1&hi;for(Dn=Zr=0;4>Dn;++Dn)Rn=Rn>>1|($s=(Hr=Hs(nr,Tr,Hr=$s+(1&Rn),tr.Sc,Aa,Bt,Pn))>Aa)<<7,Zr=Zr<<2|(3<Hr?3:1<Hr?2:Bt[Pn+0]!=0),Pn+=16;Rn>>=4,hi=hi>>1|$s<<7,mn=(mn<<8|Zr)>>>0}for(Tr=Rn,Aa=hi>>4,Kn=0;4>Kn;Kn+=2){for(Zr=0,Rn=It.la>>4+Kn,hi=Gn.la>>4+Kn,sa=0;2>sa;++sa){for($s=1&hi,Dn=0;2>Dn;++Dn)Hr=$s+(1&Rn),Rn=Rn>>1|($s=0<(Hr=Hs(nr,Yt[2],Hr,tr.Qc,0,Bt,Pn)))<<3,Zr=Zr<<2|(3<Hr?3:1<Hr?2:Bt[Pn+0]!=0),Pn+=16;Rn>>=2,hi=hi>>1|$s<<5}un|=Zr<<4*Kn,Tr|=Rn<<4<<Kn,Aa|=(240&hi)<<Kn}It.la=Tr,Gn.la=Aa,yr.Hc=mn,yr.Gc=un,yr.ia=43690&un?0:tr.ia,Yt=!(mn|un)}if(0<Ve.L&&(Ve.wa[Ve.Y+Ve.ja]=Ve.gd[mt.$b][mt.Za],Ve.wa[Ve.Y+Ve.ja].La|=!Yt),Nt.Ka)return Ea(Ke,7,"Premature end-of-file encountered.")}if(hu(Ke),Ve=jt,Nt=1,mt=(Qe=Ke).D,It=0<Qe.L&&Qe.M>=Qe.zb&&Qe.M<=Qe.Va,Qe.Aa==0)e:{if(mt.M=Qe.M,mt.uc=It,Qo(Qe,mt),Nt=1,mt=(Zr=Qe.D).Nb,It=(un=Id[Qe.L])*Qe.R,nr=un/2*Qe.B,sa=16*mt*Qe.R,Dn=8*mt*Qe.B,Yt=Qe.sa,yr=Qe.ta-It+sa,tr=Qe.qa,Bt=Qe.ra-nr+Dn,Pn=Qe.Ha,Gn=Qe.Ia-nr+Dn,hi=(Rn=Zr.M)==0,mn=Rn>=Qe.Va-1,Qe.Aa==2&&Qo(Qe,Zr),Zr.uc)for($s=(Hr=Qe).D.M,t(Hr.D.uc),Zr=Hr.yb;Zr<Hr.Hb;++Zr){Aa=Zr,Tr=$s;var cs=(us=(Pa=Hr).D).Nb;Kn=Pa.R;var us=us.wa[us.Y+Aa],Ss=Pa.sa,Jl=Pa.ta+16*cs*Kn+16*Aa,qn=us.dd,Ns=us.tc;if(Ns!=0)if(t(3<=Ns),Pa.L==1)0<Aa&&Cd(Ss,Jl,Kn,Ns+4),us.La&&Ja(Ss,Jl,Kn,Ns),0<Tr&&Of(Ss,Jl,Kn,Ns+4),us.La&&WA(Ss,Jl,Kn,Ns);else{var Ic=Pa.B,Qf=Pa.qa,rh=Pa.ra+8*cs*Ic+8*Aa,Hf=Pa.Ha,Pa=Pa.Ia+8*cs*Ic+8*Aa;cs=us.ld,0<Aa&&(Nu(Ss,Jl,Kn,Ns+4,qn,cs),jf(Qf,rh,Hf,Pa,Ic,Ns+4,qn,cs)),us.La&&(Ff(Ss,Jl,Kn,Ns,qn,cs),S0(Qf,rh,Hf,Pa,Ic,Ns,qn,cs)),0<Tr&&(KA(Ss,Jl,Kn,Ns+4,qn,cs),_0(Qf,rh,Hf,Pa,Ic,Ns+4,qn,cs)),us.La&&(If(Ss,Jl,Kn,Ns,qn,cs),qA(Qf,rh,Hf,Pa,Ic,Ns,qn,cs))}}if(Qe.ia&&alert("todo:DitherRow"),Ve.put!=null){if(Zr=16*Rn,Rn=16*(Rn+1),hi?(Ve.y=Qe.sa,Ve.O=Qe.ta+sa,Ve.f=Qe.qa,Ve.N=Qe.ra+Dn,Ve.ea=Qe.Ha,Ve.W=Qe.Ia+Dn):(Zr-=un,Ve.y=Yt,Ve.O=yr,Ve.f=tr,Ve.N=Bt,Ve.ea=Pn,Ve.W=Gn),mn||(Rn-=un),Rn>Ve.o&&(Rn=Ve.o),Ve.F=null,Ve.J=null,Qe.Fa!=null&&0<Qe.Fa.length&&Zr<Rn&&(Ve.J=_f(Qe,Ve,Zr,Rn-Zr),Ve.F=Qe.mb,Ve.F==null&&Ve.F.length==0)){Nt=Ea(Qe,3,"Could not decode alpha data.");break e}Zr<Ve.j&&(un=Ve.j-Zr,Zr=Ve.j,t(!(1&un)),Ve.O+=Qe.R*un,Ve.N+=Qe.B*(un>>1),Ve.W+=Qe.B*(un>>1),Ve.F!=null&&(Ve.J+=Ve.width*un)),Zr<Rn&&(Ve.O+=Ve.v,Ve.N+=Ve.v>>1,Ve.W+=Ve.v>>1,Ve.F!=null&&(Ve.J+=Ve.v),Ve.ka=Zr-Ve.j,Ve.U=Ve.va-Ve.v,Ve.T=Rn-Zr,Nt=Ve.put(Ve))}mt+1!=Qe.Ic||mn||(n(Qe.sa,Qe.ta-It,Yt,yr+16*Qe.R,It),n(Qe.qa,Qe.ra-nr,tr,Bt+8*Qe.B,nr),n(Qe.Ha,Qe.Ia-nr,Pn,Gn+8*Qe.B,nr))}if(!Nt)return Ea(Ke,6,"Output aborted.")}return 1}(F,Q)),Q.bc!=null&&Q.bc(Q),ee&=1}return ee?(F.cb=0,ee):0}function ki(F,Q,ee,se,de){de=F[Q+ee+32*se]+(de>>3),F[Q+ee+32*se]=-256&de?0>de?0:255:de}function bf(F,Q,ee,se,de,pe){ki(F,Q,0,ee,se+de),ki(F,Q,1,ee,se+pe),ki(F,Q,2,ee,se-pe),ki(F,Q,3,ee,se-de)}function On(F){return(20091*F>>16)+F}function Bi(F,Q,ee,se){var de,pe=0,ge=s(16);for(de=0;4>de;++de){var xe=F[Q+0]+F[Q+8],Ee=F[Q+0]-F[Q+8],ke=(35468*F[Q+4]>>16)-On(F[Q+12]),Ue=On(F[Q+4])+(35468*F[Q+12]>>16);ge[pe+0]=xe+Ue,ge[pe+1]=Ee+ke,ge[pe+2]=Ee-ke,ge[pe+3]=xe-Ue,pe+=4,Q++}for(de=pe=0;4>de;++de)xe=(F=ge[pe+0]+4)+ge[pe+8],Ee=F-ge[pe+8],ke=(35468*ge[pe+4]>>16)-On(ge[pe+12]),ki(ee,se,0,0,xe+(Ue=On(ge[pe+4])+(35468*ge[pe+12]>>16))),ki(ee,se,1,0,Ee+ke),ki(ee,se,2,0,Ee-ke),ki(ee,se,3,0,xe-Ue),pe++,se+=32}function mu(F,Q,ee,se){var de=F[Q+0]+4,pe=35468*F[Q+4]>>16,ge=On(F[Q+4]),xe=35468*F[Q+1]>>16;bf(ee,se,0,de+ge,F=On(F[Q+1]),xe),bf(ee,se,1,de+pe,F,xe),bf(ee,se,2,de-pe,F,xe),bf(ee,se,3,de-ge,F,xe)}function pu(F,Q,ee,se,de){Bi(F,Q,ee,se),de&&Bi(F,Q+16,ee,se+4)}function Ul(F,Q,ee,se){Tc(F,Q+0,ee,se,1),Tc(F,Q+32,ee,se+128,1)}function zn(F,Q,ee,se){var de;for(F=F[Q+0]+4,de=0;4>de;++de)for(Q=0;4>Q;++Q)ki(ee,se,Q,de,F)}function gu(F,Q,ee,se){F[Q+0]&&_s(F,Q+0,ee,se),F[Q+16]&&_s(F,Q+16,ee,se+4),F[Q+32]&&_s(F,Q+32,ee,se+128),F[Q+48]&&_s(F,Q+48,ee,se+128+4)}function Ro(F,Q,ee,se){var de,pe=s(16);for(de=0;4>de;++de){var ge=F[Q+0+de]+F[Q+12+de],xe=F[Q+4+de]+F[Q+8+de],Ee=F[Q+4+de]-F[Q+8+de],ke=F[Q+0+de]-F[Q+12+de];pe[0+de]=ge+xe,pe[8+de]=ge-xe,pe[4+de]=ke+Ee,pe[12+de]=ke-Ee}for(de=0;4>de;++de)ge=(F=pe[0+4*de]+3)+pe[3+4*de],xe=pe[1+4*de]+pe[2+4*de],Ee=pe[1+4*de]-pe[2+4*de],ke=F-pe[3+4*de],ee[se+0]=ge+xe>>3,ee[se+16]=ke+Ee>>3,ee[se+32]=ge-xe>>3,ee[se+48]=ke-Ee>>3,se+=64}function wc(F,Q,ee){var se,de=Q-32,pe=fi,ge=255-F[de-1];for(se=0;se<ee;++se){var xe,Ee=pe,ke=ge+F[Q-1];for(xe=0;xe<ee;++xe)F[Q+xe]=Ee[ke+F[de+xe]];Q+=32}}function v0(F,Q){wc(F,Q,4)}function MA(F,Q){wc(F,Q,8)}function UA(F,Q){wc(F,Q,16)}function Ec(F,Q){var ee;for(ee=0;16>ee;++ee)n(F,Q+32*ee,F,Q-32,16)}function yf(F,Q){var ee;for(ee=16;0<ee;--ee)a(F,Q,F[Q-1],16),Q+=32}function Cc(F,Q,ee){var se;for(se=0;16>se;++se)a(Q,ee+32*se,F,16)}function Ql(F,Q){var ee,se=16;for(ee=0;16>ee;++ee)se+=F[Q-1+32*ee]+F[Q+ee-32];Cc(se>>5,F,Q)}function fa(F,Q){var ee,se=8;for(ee=0;16>ee;++ee)se+=F[Q-1+32*ee];Cc(se>>4,F,Q)}function _c(F,Q){var ee,se=8;for(ee=0;16>ee;++ee)se+=F[Q+ee-32];Cc(se>>4,F,Q)}function Hl(F,Q){Cc(128,F,Q)}function Or(F,Q,ee){return F+2*Q+ee+2>>2}function Vl(F,Q){var ee,se=Q-32;for(se=new Uint8Array([Or(F[se-1],F[se+0],F[se+1]),Or(F[se+0],F[se+1],F[se+2]),Or(F[se+1],F[se+2],F[se+3]),Or(F[se+2],F[se+3],F[se+4])]),ee=0;4>ee;++ee)n(F,Q+32*ee,se,0,se.length)}function b0(F,Q){var ee=F[Q-1],se=F[Q-1+32],de=F[Q-1+64],pe=F[Q-1+96];Ae(F,Q+0,16843009*Or(F[Q-1-32],ee,se)),Ae(F,Q+32,16843009*Or(ee,se,de)),Ae(F,Q+64,16843009*Or(se,de,pe)),Ae(F,Q+96,16843009*Or(de,pe,pe))}function zi(F,Q){var ee,se=4;for(ee=0;4>ee;++ee)se+=F[Q+ee-32]+F[Q-1+32*ee];for(se>>=3,ee=0;4>ee;++ee)a(F,Q+32*ee,se,4)}function Lo(F,Q){var ee=F[Q-1+0],se=F[Q-1+32],de=F[Q-1+64],pe=F[Q-1-32],ge=F[Q+0-32],xe=F[Q+1-32],Ee=F[Q+2-32],ke=F[Q+3-32];F[Q+0+96]=Or(se,de,F[Q-1+96]),F[Q+1+96]=F[Q+0+64]=Or(ee,se,de),F[Q+2+96]=F[Q+1+64]=F[Q+0+32]=Or(pe,ee,se),F[Q+3+96]=F[Q+2+64]=F[Q+1+32]=F[Q+0+0]=Or(ge,pe,ee),F[Q+3+64]=F[Q+2+32]=F[Q+1+0]=Or(xe,ge,pe),F[Q+3+32]=F[Q+2+0]=Or(Ee,xe,ge),F[Q+3+0]=Or(ke,Ee,xe)}function ho(F,Q){var ee=F[Q+1-32],se=F[Q+2-32],de=F[Q+3-32],pe=F[Q+4-32],ge=F[Q+5-32],xe=F[Q+6-32],Ee=F[Q+7-32];F[Q+0+0]=Or(F[Q+0-32],ee,se),F[Q+1+0]=F[Q+0+32]=Or(ee,se,de),F[Q+2+0]=F[Q+1+32]=F[Q+0+64]=Or(se,de,pe),F[Q+3+0]=F[Q+2+32]=F[Q+1+64]=F[Q+0+96]=Or(de,pe,ge),F[Q+3+32]=F[Q+2+64]=F[Q+1+96]=Or(pe,ge,xe),F[Q+3+64]=F[Q+2+96]=Or(ge,xe,Ee),F[Q+3+96]=Or(xe,Ee,Ee)}function zl(F,Q){var ee=F[Q-1+0],se=F[Q-1+32],de=F[Q-1+64],pe=F[Q-1-32],ge=F[Q+0-32],xe=F[Q+1-32],Ee=F[Q+2-32],ke=F[Q+3-32];F[Q+0+0]=F[Q+1+64]=pe+ge+1>>1,F[Q+1+0]=F[Q+2+64]=ge+xe+1>>1,F[Q+2+0]=F[Q+3+64]=xe+Ee+1>>1,F[Q+3+0]=Ee+ke+1>>1,F[Q+0+96]=Or(de,se,ee),F[Q+0+64]=Or(se,ee,pe),F[Q+0+32]=F[Q+1+96]=Or(ee,pe,ge),F[Q+1+32]=F[Q+2+96]=Or(pe,ge,xe),F[Q+2+32]=F[Q+3+96]=Or(ge,xe,Ee),F[Q+3+32]=Or(xe,Ee,ke)}function Mo(F,Q){var ee=F[Q+0-32],se=F[Q+1-32],de=F[Q+2-32],pe=F[Q+3-32],ge=F[Q+4-32],xe=F[Q+5-32],Ee=F[Q+6-32],ke=F[Q+7-32];F[Q+0+0]=ee+se+1>>1,F[Q+1+0]=F[Q+0+64]=se+de+1>>1,F[Q+2+0]=F[Q+1+64]=de+pe+1>>1,F[Q+3+0]=F[Q+2+64]=pe+ge+1>>1,F[Q+0+32]=Or(ee,se,de),F[Q+1+32]=F[Q+0+96]=Or(se,de,pe),F[Q+2+32]=F[Q+1+96]=Or(de,pe,ge),F[Q+3+32]=F[Q+2+96]=Or(pe,ge,xe),F[Q+3+64]=Or(ge,xe,Ee),F[Q+3+96]=Or(xe,Ee,ke)}function xu(F,Q){var ee=F[Q-1+0],se=F[Q-1+32],de=F[Q-1+64],pe=F[Q-1+96];F[Q+0+0]=ee+se+1>>1,F[Q+2+0]=F[Q+0+32]=se+de+1>>1,F[Q+2+32]=F[Q+0+64]=de+pe+1>>1,F[Q+1+0]=Or(ee,se,de),F[Q+3+0]=F[Q+1+32]=Or(se,de,pe),F[Q+3+32]=F[Q+1+64]=Or(de,pe,pe),F[Q+3+64]=F[Q+2+64]=F[Q+0+96]=F[Q+1+96]=F[Q+2+96]=F[Q+3+96]=pe}function Sc(F,Q){var ee=F[Q-1+0],se=F[Q-1+32],de=F[Q-1+64],pe=F[Q-1+96],ge=F[Q-1-32],xe=F[Q+0-32],Ee=F[Q+1-32],ke=F[Q+2-32];F[Q+0+0]=F[Q+2+32]=ee+ge+1>>1,F[Q+0+32]=F[Q+2+64]=se+ee+1>>1,F[Q+0+64]=F[Q+2+96]=de+se+1>>1,F[Q+0+96]=pe+de+1>>1,F[Q+3+0]=Or(xe,Ee,ke),F[Q+2+0]=Or(ge,xe,Ee),F[Q+1+0]=F[Q+3+32]=Or(ee,ge,xe),F[Q+1+32]=F[Q+3+64]=Or(se,ee,ge),F[Q+1+64]=F[Q+3+96]=Or(de,se,ee),F[Q+1+96]=Or(pe,de,se)}function QA(F,Q){var ee;for(ee=0;8>ee;++ee)n(F,Q+32*ee,F,Q-32,8)}function Uo(F,Q){var ee;for(ee=0;8>ee;++ee)a(F,Q,F[Q-1],8),Q+=32}function $i(F,Q,ee){var se;for(se=0;8>se;++se)a(Q,ee+32*se,F,8)}function $l(F,Q){var ee,se=8;for(ee=0;8>ee;++ee)se+=F[Q+ee-32]+F[Q-1+32*ee];$i(se>>4,F,Q)}function Es(F,Q){var ee,se=4;for(ee=0;8>ee;++ee)se+=F[Q+ee-32];$i(se>>3,F,Q)}function bn(F,Q){var ee,se=4;for(ee=0;8>ee;++ee)se+=F[Q-1+32*ee];$i(se>>3,F,Q)}function vu(F,Q){$i(128,F,Q)}function Gl(F,Q,ee){var se=F[Q-ee],de=F[Q+0],pe=3*(de-se)+Rx[1020+F[Q-2*ee]-F[Q+ee]],ge=XA[112+(pe+4>>3)];F[Q-ee]=fi[255+se+XA[112+(pe+3>>3)]],F[Q+0]=fi[255+de-ge]}function HA(F,Q,ee,se){var de=F[Q+0],pe=F[Q+ee];return Xl[255+F[Q-2*ee]-F[Q-ee]]>se||Xl[255+pe-de]>se}function pd(F,Q,ee,se){return 4*Xl[255+F[Q-ee]-F[Q+0]]+Xl[255+F[Q-2*ee]-F[Q+ee]]<=se}function gd(F,Q,ee,se,de){var pe=F[Q-3*ee],ge=F[Q-2*ee],xe=F[Q-ee],Ee=F[Q+0],ke=F[Q+ee],Ue=F[Q+2*ee],st=F[Q+3*ee];return 4*Xl[255+xe-Ee]+Xl[255+ge-ke]>se?0:Xl[255+F[Q-4*ee]-pe]<=de&&Xl[255+pe-ge]<=de&&Xl[255+ge-xe]<=de&&Xl[255+st-Ue]<=de&&Xl[255+Ue-ke]<=de&&Xl[255+ke-Ee]<=de}function yl(F,Q,ee,se){var de=2*se+1;for(se=0;16>se;++se)pd(F,Q+se,ee,de)&&Gl(F,Q+se,ee)}function Gi(F,Q,ee,se){var de=2*se+1;for(se=0;16>se;++se)pd(F,Q+se*ee,1,de)&&Gl(F,Q+se*ee,1)}function Cs(F,Q,ee,se){var de;for(de=3;0<de;--de)yl(F,Q+=4*ee,ee,se)}function y0(F,Q,ee,se){var de;for(de=3;0<de;--de)Gi(F,Q+=4,ee,se)}function bu(F,Q,ee,se,de,pe,ge,xe){for(pe=2*pe+1;0<de--;){if(gd(F,Q,ee,pe,ge))if(HA(F,Q,ee,xe))Gl(F,Q,ee);else{var Ee=F,ke=Q,Ue=ee,st=Ee[ke-2*Ue],rt=Ee[ke-Ue],Ke=Ee[ke+0],jt=Ee[ke+Ue],mt=Ee[ke+2*Ue],Qe=27*(Nt=Rx[1020+3*(Ke-rt)+Rx[1020+st-jt]])+63>>7,Ve=18*Nt+63>>7,Nt=9*Nt+63>>7;Ee[ke-3*Ue]=fi[255+Ee[ke-3*Ue]+Nt],Ee[ke-2*Ue]=fi[255+st+Ve],Ee[ke-Ue]=fi[255+rt+Qe],Ee[ke+0]=fi[255+Ke-Qe],Ee[ke+Ue]=fi[255+jt-Ve],Ee[ke+2*Ue]=fi[255+mt-Nt]}Q+=se}}function Ti(F,Q,ee,se,de,pe,ge,xe){for(pe=2*pe+1;0<de--;){if(gd(F,Q,ee,pe,ge))if(HA(F,Q,ee,xe))Gl(F,Q,ee);else{var Ee=F,ke=Q,Ue=ee,st=Ee[ke-Ue],rt=Ee[ke+0],Ke=Ee[ke+Ue],jt=XA[112+((mt=3*(rt-st))+4>>3)],mt=XA[112+(mt+3>>3)],Qe=jt+1>>1;Ee[ke-2*Ue]=fi[255+Ee[ke-2*Ue]+Qe],Ee[ke-Ue]=fi[255+st+mt],Ee[ke+0]=fi[255+rt-jt],Ee[ke+Ue]=fi[255+Ke-Qe]}Q+=se}}function yu(F,Q,ee,se,de,pe){bu(F,Q,ee,1,16,se,de,pe)}function Nc(F,Q,ee,se,de,pe){bu(F,Q,1,ee,16,se,de,pe)}function wf(F,Q,ee,se,de,pe){var ge;for(ge=3;0<ge;--ge)Ti(F,Q+=4*ee,ee,1,16,se,de,pe)}function xd(F,Q,ee,se,de,pe){var ge;for(ge=3;0<ge;--ge)Ti(F,Q+=4,1,ee,16,se,de,pe)}function Ef(F,Q,ee,se,de,pe,ge,xe){bu(F,Q,de,1,8,pe,ge,xe),bu(ee,se,de,1,8,pe,ge,xe)}function VA(F,Q,ee,se,de,pe,ge,xe){bu(F,Q,1,de,8,pe,ge,xe),bu(ee,se,1,de,8,pe,ge,xe)}function vd(F,Q,ee,se,de,pe,ge,xe){Ti(F,Q+4*de,de,1,8,pe,ge,xe),Ti(ee,se+4*de,de,1,8,pe,ge,xe)}function wu(F,Q,ee,se,de,pe,ge,xe){Ti(F,Q+4,1,de,8,pe,ge,xe),Ti(ee,se+4,1,de,8,pe,ge,xe)}function bd(){this.ba=new da,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new an,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Cf(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function yd(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Eu(){this.ua=0,this.Wa=new me,this.vb=new me,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new R,this.yc=new k}function w0(){this.xb=this.a=0,this.l=new Us,this.ca=new da,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new M,this.Pb=0,this.wd=new M,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Eu,this.ab=0,this.gc=i(4,yd),this.Oc=0}function kc(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Us,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Cu(F,Q,ee,se,de,pe,ge){for(F=F==null?0:F[Q+0],Q=0;Q<ge;++Q)de[pe+Q]=F+ee[se+Q]&255,F=de[pe+Q]}function wd(F,Q,ee,se,de,pe,ge){var xe;if(F==null)Cu(null,null,ee,se,de,pe,ge);else for(xe=0;xe<ge;++xe)de[pe+xe]=F[Q+xe]+ee[se+xe]&255}function Ki(F,Q,ee,se,de,pe,ge){if(F==null)Cu(null,null,ee,se,de,pe,ge);else{var xe,Ee=F[Q+0],ke=Ee,Ue=Ee;for(xe=0;xe<ge;++xe)ke=Ue+(Ee=F[Q+xe])-ke,Ue=ee[se+xe]+(-256&ke?0>ke?0:255:ke)&255,ke=Ee,de[pe+xe]=Ue}}function _f(F,Q,ee,se){var de=Q.width,pe=Q.o;if(t(F!=null&&Q!=null),0>ee||0>=se||ee+se>pe)return null;if(!F.Cc){if(F.ga==null){var ge;if(F.ga=new kc,(ge=F.ga==null)||(ge=Q.width*Q.o,t(F.Gb.length==0),F.Gb=s(ge),F.Uc=0,F.Gb==null?ge=0:(F.mb=F.Gb,F.nb=F.Uc,F.rc=null,ge=1),ge=!ge),!ge){ge=F.ga;var xe=F.Fa,Ee=F.P,ke=F.qc,Ue=F.mb,st=F.nb,rt=Ee+1,Ke=ke-1,jt=ge.l;if(t(xe!=null&&Ue!=null&&Q!=null),Tu[0]=null,Tu[1]=Cu,Tu[2]=wd,Tu[3]=Ki,ge.ca=Ue,ge.tb=st,ge.c=Q.width,ge.i=Q.height,t(0<ge.c&&0<ge.i),1>=ke)Q=0;else if(ge.$a=xe[Ee+0]>>0&3,ge.Z=xe[Ee+0]>>2&3,ge.Lc=xe[Ee+0]>>4&3,Ee=xe[Ee+0]>>6&3,0>ge.$a||1<ge.$a||4<=ge.Z||1<ge.Lc||Ee)Q=0;else if(jt.put=xt,jt.ac=Je,jt.bc=Et,jt.ma=ge,jt.width=Q.width,jt.height=Q.height,jt.Da=Q.Da,jt.v=Q.v,jt.va=Q.va,jt.j=Q.j,jt.o=Q.o,ge.$a)e:{t(ge.$a==1),Q=dt();t:for(;;){if(Q==null){Q=0;break e}if(t(ge!=null),ge.mc=Q,Q.c=ge.c,Q.i=ge.i,Q.l=ge.l,Q.l.ma=ge,Q.l.width=ge.c,Q.l.height=ge.i,Q.a=0,z(Q.m,xe,rt,Ke),!$e(ge.c,ge.i,1,Q,null)||(Q.ab==1&&Q.gc[0].hc==3&&Ce(Q.s)?(ge.ic=1,xe=Q.c*Q.i,Q.Ta=null,Q.Ua=0,Q.V=s(xe),Q.Ba=0,Q.V==null?(Q.a=1,Q=0):Q=1):(ge.ic=0,Q=nt(Q,ge.c)),!Q))break t;Q=1;break e}ge.mc=null,Q=0}else Q=Ke>=ge.c*ge.i;ge=!Q}if(ge)return null;F.ga.Lc!=1?F.Ga=0:se=pe-ee}t(F.ga!=null),t(ee+se<=pe);e:{if(Q=(xe=F.ga).c,pe=xe.l.o,xe.$a==0){if(rt=F.rc,Ke=F.Vc,jt=F.Fa,Ee=F.P+1+ee*Q,ke=F.mb,Ue=F.nb+ee*Q,t(Ee<=F.P+F.qc),xe.Z!=0)for(t(Tu[xe.Z]!=null),ge=0;ge<se;++ge)Tu[xe.Z](rt,Ke,jt,Ee,ke,Ue,Q),rt=ke,Ke=Ue,Ue+=Q,Ee+=Q;else for(ge=0;ge<se;++ge)n(ke,Ue,jt,Ee,Q),rt=ke,Ke=Ue,Ue+=Q,Ee+=Q;F.rc=rt,F.Vc=Ke}else{if(t(xe.mc!=null),Q=ee+se,t((ge=xe.mc)!=null),t(Q<=ge.i),ge.C>=Q)Q=1;else if(xe.ic||Ge(),xe.ic){xe=ge.V,rt=ge.Ba,Ke=ge.c;var mt=ge.i,Qe=(jt=1,Ee=ge.$/Ke,ke=ge.$%Ke,Ue=ge.m,st=ge.s,ge.$),Ve=Ke*mt,Nt=Ke*Q,It=st.wc,Bt=Qe<Nt?Xr(st,ke,Ee):null;t(Qe<=Ve),t(Q<=mt),t(Ce(st));t:for(;;){for(;!Ue.h&&Qe<Nt;){if(ke&It||(Bt=Xr(st,ke,Ee)),t(Bt!=null),ae(Ue),256>(mt=Yr(Bt.G[0],Bt.H[0],Ue)))xe[rt+Qe]=mt,++Qe,++ke>=Ke&&(ke=0,++Ee<=Q&&!(Ee%16)&&Ne(ge,Ee));else{if(!(280>mt)){jt=0;break t}mt=ar(mt-256,Ue);var nr,Yt=Yr(Bt.G[4],Bt.H[4],Ue);if(ae(Ue),!(Qe>=(Yt=vr(Ke,Yt=ar(Yt,Ue)))&&Ve-Qe>=mt)){jt=0;break t}for(nr=0;nr<mt;++nr)xe[rt+Qe+nr]=xe[rt+Qe+nr-Yt];for(Qe+=mt,ke+=mt;ke>=Ke;)ke-=Ke,++Ee<=Q&&!(Ee%16)&&Ne(ge,Ee);Qe<Nt&&ke&It&&(Bt=Xr(st,ke,Ee))}t(Ue.h==Y(Ue))}Ne(ge,Ee>Q?Q:Ee);break t}!jt||Ue.h&&Qe<Ve?(jt=0,ge.a=Ue.h?5:3):ge.$=Qe,Q=jt}else Q=je(ge,ge.V,ge.Ba,ge.c,ge.i,Q,it);if(!Q){se=0;break e}}ee+se>=pe&&(F.Cc=1),se=1}if(!se)return null;if(F.Cc&&((se=F.ga)!=null&&(se.mc=null),F.ga=null,0<F.Ga))return alert("todo:WebPDequantizeLevels"),null}return F.nb+ee*de}function X(F,Q,ee,se,de,pe){for(;0<de--;){var ge,xe=F,Ee=Q+(ee?1:0),ke=F,Ue=Q+(ee?0:3);for(ge=0;ge<se;++ge){var st=ke[Ue+4*ge];st!=255&&(st*=32897,xe[Ee+4*ge+0]=xe[Ee+4*ge+0]*st>>23,xe[Ee+4*ge+1]=xe[Ee+4*ge+1]*st>>23,xe[Ee+4*ge+2]=xe[Ee+4*ge+2]*st>>23)}Q+=pe}}function fe(F,Q,ee,se,de){for(;0<se--;){var pe;for(pe=0;pe<ee;++pe){var ge=F[Q+2*pe+0],xe=15&(ke=F[Q+2*pe+1]),Ee=4369*xe,ke=(240&ke|ke>>4)*Ee>>16;F[Q+2*pe+0]=(240&ge|ge>>4)*Ee>>16&240|(15&ge|ge<<4)*Ee>>16>>4&15,F[Q+2*pe+1]=240&ke|xe}Q+=de}}function De(F,Q,ee,se,de,pe,ge,xe){var Ee,ke,Ue=255;for(ke=0;ke<de;++ke){for(Ee=0;Ee<se;++Ee){var st=F[Q+Ee];pe[ge+4*Ee]=st,Ue&=st}Q+=ee,ge+=xe}return Ue!=255}function Me(F,Q,ee,se,de){var pe;for(pe=0;pe<de;++pe)ee[se+pe]=F[Q+pe]>>8}function Ge(){wl=X,gn=fe,xn=De,Ca=Me}function vt(F,Q,ee){N[F]=function(se,de,pe,ge,xe,Ee,ke,Ue,st,rt,Ke,jt,mt,Qe,Ve,Nt,It){var Bt,nr=It-1>>1,Yt=xe[Ee+0]|ke[Ue+0]<<16,yr=st[rt+0]|Ke[jt+0]<<16;t(se!=null);var tr=3*Yt+yr+131074>>2;for(Q(se[de+0],255&tr,tr>>16,mt,Qe),pe!=null&&(tr=3*yr+Yt+131074>>2,Q(pe[ge+0],255&tr,tr>>16,Ve,Nt)),Bt=1;Bt<=nr;++Bt){var Pn=xe[Ee+Bt]|ke[Ue+Bt]<<16,Gn=st[rt+Bt]|Ke[jt+Bt]<<16,mn=Yt+Pn+yr+Gn+524296,un=mn+2*(Pn+yr)>>3;tr=un+Yt>>1,Yt=(mn=mn+2*(Yt+Gn)>>3)+Pn>>1,Q(se[de+2*Bt-1],255&tr,tr>>16,mt,Qe+(2*Bt-1)*ee),Q(se[de+2*Bt-0],255&Yt,Yt>>16,mt,Qe+(2*Bt-0)*ee),pe!=null&&(tr=mn+yr>>1,Yt=un+Gn>>1,Q(pe[ge+2*Bt-1],255&tr,tr>>16,Ve,Nt+(2*Bt-1)*ee),Q(pe[ge+2*Bt+0],255&Yt,Yt>>16,Ve,Nt+(2*Bt+0)*ee)),Yt=Pn,yr=Gn}1&It||(tr=3*Yt+yr+131074>>2,Q(se[de+It-1],255&tr,tr>>16,mt,Qe+(It-1)*ee),pe!=null&&(tr=3*yr+Yt+131074>>2,Q(pe[ge+It-1],255&tr,tr>>16,Ve,Nt+(It-1)*ee)))}}function Mt(){Ai[qi]=jd,Ai[N0]=ju,Ai[ku]=Mf,Ai[Bp]=Ux,Ai[YA]=Qx,Ai[Sd]=T0,Ai[Lx]=Hx,Ai[Tp]=ju,Ai[Rf]=Ux,Ai[Nd]=Qx,Ai[k0]=T0}function er(F){return F&-16384?0>F?0:255:F>>YT}function O(F,Q){return er((19077*F>>8)+(26149*Q>>8)-14234)}function re(F,Q,ee){return er((19077*F>>8)-(6419*Q>>8)-(13320*ee>>8)+8708)}function oe(F,Q){return er((19077*F>>8)+(33050*Q>>8)-17685)}function ve(F,Q,ee,se,de){se[de+0]=O(F,ee),se[de+1]=re(F,Q,ee),se[de+2]=oe(F,Q)}function ze(F,Q,ee,se,de){se[de+0]=oe(F,Q),se[de+1]=re(F,Q,ee),se[de+2]=O(F,ee)}function ot(F,Q,ee,se,de){var pe=re(F,Q,ee);Q=pe<<3&224|oe(F,Q)>>3,se[de+0]=248&O(F,ee)|pe>>5,se[de+1]=Q}function Qt(F,Q,ee,se,de){var pe=240&oe(F,Q)|15;se[de+0]=240&O(F,ee)|re(F,Q,ee)>>4,se[de+1]=pe}function Dr(F,Q,ee,se,de){se[de+0]=255,ve(F,Q,ee,se,de+1)}function yn(F,Q,ee,se,de){ze(F,Q,ee,se,de),se[de+3]=255}function Jr(F,Q,ee,se,de){ve(F,Q,ee,se,de),se[de+3]=255}function $n(F,Q){return 0>F?0:F>Q?Q:F}function aa(F,Q,ee){N[F]=function(se,de,pe,ge,xe,Ee,ke,Ue,st){for(var rt=Ue+(-2&st)*ee;Ue!=rt;)Q(se[de+0],pe[ge+0],xe[Ee+0],ke,Ue),Q(se[de+1],pe[ge+0],xe[Ee+0],ke,Ue+ee),de+=2,++ge,++Ee,Ue+=2*ee;1&st&&Q(se[de+0],pe[ge+0],xe[Ee+0],ke,Ue)}}function Kl(F,Q,ee){return ee==0?F==0?Q==0?6:5:Q==0?4:0:ee}function os(F,Q,ee,se,de){switch(F>>>30){case 3:Tc(Q,ee,se,de,0);break;case 2:Ya(Q,ee,se,de);break;case 1:_s(Q,ee,se,de)}}function Qo(F,Q){var ee,se,de=Q.M,pe=Q.Nb,ge=F.oc,xe=F.pc+40,Ee=F.oc,ke=F.pc+584,Ue=F.oc,st=F.pc+600;for(ee=0;16>ee;++ee)ge[xe+32*ee-1]=129;for(ee=0;8>ee;++ee)Ee[ke+32*ee-1]=129,Ue[st+32*ee-1]=129;for(0<de?ge[xe-1-32]=Ee[ke-1-32]=Ue[st-1-32]=129:(a(ge,xe-32-1,127,21),a(Ee,ke-32-1,127,9),a(Ue,st-32-1,127,9)),se=0;se<F.za;++se){var rt=Q.ya[Q.aa+se];if(0<se){for(ee=-1;16>ee;++ee)n(ge,xe+32*ee-4,ge,xe+32*ee+12,4);for(ee=-1;8>ee;++ee)n(Ee,ke+32*ee-4,Ee,ke+32*ee+4,4),n(Ue,st+32*ee-4,Ue,st+32*ee+4,4)}var Ke=F.Gd,jt=F.Hd+se,mt=rt.ad,Qe=rt.Hc;if(0<de&&(n(ge,xe-32,Ke[jt].y,0,16),n(Ee,ke-32,Ke[jt].f,0,8),n(Ue,st-32,Ke[jt].ea,0,8)),rt.Za){var Ve=ge,Nt=xe-32+16;for(0<de&&(se>=F.za-1?a(Ve,Nt,Ke[jt].y[15],4):n(Ve,Nt,Ke[jt+1].y,0,4)),ee=0;4>ee;ee++)Ve[Nt+128+ee]=Ve[Nt+256+ee]=Ve[Nt+384+ee]=Ve[Nt+0+ee];for(ee=0;16>ee;++ee,Qe<<=2)Ve=ge,Nt=xe+th[ee],po[rt.Ob[ee]](Ve,Nt),os(Qe,mt,16*+ee,Ve,Nt)}else if(Ve=Kl(se,de,rt.Ob[0]),Td[Ve](ge,xe),Qe!=0)for(ee=0;16>ee;++ee,Qe<<=2)os(Qe,mt,16*+ee,ge,xe+th[ee]);for(ee=rt.Gc,Ve=Kl(se,de,rt.Dd),Cl[Ve](Ee,ke),Cl[Ve](Ue,st),Qe=mt,Ve=Ee,Nt=ke,255&(rt=ee>>0)&&(170&rt?jc(Qe,256,Ve,Nt):zo(Qe,256,Ve,Nt)),rt=Ue,Qe=st,255&(ee>>=8)&&(170&ee?jc(mt,320,rt,Qe):zo(mt,320,rt,Qe)),de<F.Ub-1&&(n(Ke[jt].y,0,ge,xe+480,16),n(Ke[jt].f,0,Ee,ke+224,8),n(Ke[jt].ea,0,Ue,st+224,8)),ee=8*pe*F.B,Ke=F.sa,jt=F.ta+16*se+16*pe*F.R,mt=F.qa,rt=F.ra+8*se+ee,Qe=F.Ha,Ve=F.Ia+8*se+ee,ee=0;16>ee;++ee)n(Ke,jt+ee*F.R,ge,xe+32*ee,16);for(ee=0;8>ee;++ee)n(mt,rt+ee*F.B,Ee,ke+32*ee,8),n(Qe,Ve+ee*F.B,Ue,st+32*ee,8)}}function _u(F,Q,ee,se,de,pe,ge,xe,Ee){var ke=[0],Ue=[0],st=0,rt=Ee!=null?Ee.kd:0,Ke=Ee??new Cf;if(F==null||12>ee)return 7;Ke.data=F,Ke.w=Q,Ke.ha=ee,Q=[Q],ee=[ee],Ke.gb=[Ke.gb];e:{var jt=Q,mt=ee,Qe=Ke.gb;if(t(F!=null),t(mt!=null),t(Qe!=null),Qe[0]=0,12<=mt[0]&&!r(F,jt[0],"RIFF")){if(r(F,jt[0]+8,"WEBP")){Qe=3;break e}var Ve=_e(F,jt[0]+4);if(12>Ve||4294967286<Ve){Qe=3;break e}if(rt&&Ve>mt[0]-8){Qe=7;break e}Qe[0]=Ve,jt[0]+=12,mt[0]-=12}Qe=0}if(Qe!=0)return Qe;for(Ve=0<Ke.gb[0],ee=ee[0];;){e:{var Nt=F;mt=Q,Qe=ee;var It=ke,Bt=Ue,nr=jt=[0];if((tr=st=[st])[0]=0,8>Qe[0])Qe=7;else{if(!r(Nt,mt[0],"VP8X")){if(_e(Nt,mt[0]+4)!=10){Qe=3;break e}if(18>Qe[0]){Qe=7;break e}var Yt=_e(Nt,mt[0]+8),yr=1+ne(Nt,mt[0]+12);if(2147483648<=yr*(Nt=1+ne(Nt,mt[0]+15))){Qe=3;break e}nr!=null&&(nr[0]=Yt),It!=null&&(It[0]=yr),Bt!=null&&(Bt[0]=Nt),mt[0]+=18,Qe[0]-=18,tr[0]=1}Qe=0}}if(st=st[0],jt=jt[0],Qe!=0)return Qe;if(mt=!!(2&jt),!Ve&&st)return 3;if(pe!=null&&(pe[0]=!!(16&jt)),ge!=null&&(ge[0]=mt),xe!=null&&(xe[0]=0),ge=ke[0],jt=Ue[0],st&&mt&&Ee==null){Qe=0;break}if(4>ee){Qe=7;break}if(Ve&&st||!Ve&&!st&&!r(F,Q[0],"ALPH")){ee=[ee],Ke.na=[Ke.na],Ke.P=[Ke.P],Ke.Sa=[Ke.Sa];e:{Yt=F,Qe=Q,Ve=ee;var tr=Ke.gb;It=Ke.na,Bt=Ke.P,nr=Ke.Sa,yr=22,t(Yt!=null),t(Ve!=null),Nt=Qe[0];var Pn=Ve[0];for(t(It!=null),t(nr!=null),It[0]=null,Bt[0]=null,nr[0]=0;;){if(Qe[0]=Nt,Ve[0]=Pn,8>Pn){Qe=7;break e}var Gn=_e(Yt,Nt+4);if(4294967286<Gn){Qe=3;break e}var mn=8+Gn+1&-2;if(yr+=mn,0<tr&&yr>tr){Qe=3;break e}if(!r(Yt,Nt,"VP8 ")||!r(Yt,Nt,"VP8L")){Qe=0;break e}if(Pn[0]<mn){Qe=7;break e}r(Yt,Nt,"ALPH")||(It[0]=Yt,Bt[0]=Nt+8,nr[0]=Gn),Nt+=mn,Pn-=mn}}if(ee=ee[0],Ke.na=Ke.na[0],Ke.P=Ke.P[0],Ke.Sa=Ke.Sa[0],Qe!=0)break}ee=[ee],Ke.Ja=[Ke.Ja],Ke.xa=[Ke.xa];e:if(tr=F,Qe=Q,Ve=ee,It=Ke.gb[0],Bt=Ke.Ja,nr=Ke.xa,Yt=Qe[0],Nt=!r(tr,Yt,"VP8 "),yr=!r(tr,Yt,"VP8L"),t(tr!=null),t(Ve!=null),t(Bt!=null),t(nr!=null),8>Ve[0])Qe=7;else{if(Nt||yr){if(tr=_e(tr,Yt+4),12<=It&&tr>It-12){Qe=3;break e}if(rt&&tr>Ve[0]-8){Qe=7;break e}Bt[0]=tr,Qe[0]+=8,Ve[0]-=8,nr[0]=yr}else nr[0]=5<=Ve[0]&&tr[Yt+0]==47&&!(tr[Yt+4]>>5),Bt[0]=Ve[0];Qe=0}if(ee=ee[0],Ke.Ja=Ke.Ja[0],Ke.xa=Ke.xa[0],Q=Q[0],Qe!=0)break;if(4294967286<Ke.Ja)return 3;if(xe==null||mt||(xe[0]=Ke.xa?2:1),ge=[ge],jt=[jt],Ke.xa){if(5>ee){Qe=7;break}xe=ge,rt=jt,mt=pe,F==null||5>ee?F=0:5<=ee&&F[Q+0]==47&&!(F[Q+4]>>5)?(Ve=[0],tr=[0],It=[0],z(Bt=new M,F,Q,ee),bt(Bt,Ve,tr,It)?(xe!=null&&(xe[0]=Ve[0]),rt!=null&&(rt[0]=tr[0]),mt!=null&&(mt[0]=It[0]),F=1):F=0):F=0}else{if(10>ee){Qe=7;break}xe=jt,F==null||10>ee||!ui(F,Q+3,ee-3)?F=0:(rt=F[Q+0]|F[Q+1]<<8|F[Q+2]<<16,mt=16383&(F[Q+7]<<8|F[Q+6]),F=16383&(F[Q+9]<<8|F[Q+8]),1&rt||3<(rt>>1&7)||!(rt>>4&1)||rt>>5>=Ke.Ja||!mt||!F?F=0:(ge&&(ge[0]=mt),xe&&(xe[0]=F),F=1))}if(!F||(ge=ge[0],jt=jt[0],st&&(ke[0]!=ge||Ue[0]!=jt)))return 3;Ee!=null&&(Ee[0]=Ke,Ee.offset=Q-Ee.w,t(4294967286>Q-Ee.w),t(Ee.offset==Ee.ha-ee));break}return Qe==0||Qe==7&&st&&Ee==null?(pe!=null&&(pe[0]|=Ke.na!=null&&0<Ke.na.length),se!=null&&(se[0]=ge),de!=null&&(de[0]=jt),0):Qe}function Sf(F,Q,ee){var se=Q.width,de=Q.height,pe=0,ge=0,xe=se,Ee=de;if(Q.Da=F!=null&&0<F.Da,Q.Da&&(xe=F.cd,Ee=F.bd,pe=F.v,ge=F.j,11>ee||(pe&=-2,ge&=-2),0>pe||0>ge||0>=xe||0>=Ee||pe+xe>se||ge+Ee>de))return 0;if(Q.v=pe,Q.j=ge,Q.va=pe+xe,Q.o=ge+Ee,Q.U=xe,Q.T=Ee,Q.da=F!=null&&0<F.da,Q.da){if(!Be(xe,Ee,ee=[F.ib],pe=[F.hb]))return 0;Q.ib=ee[0],Q.hb=pe[0]}return Q.ob=F!=null&&F.ob,Q.Kb=F==null||!F.Sd,Q.da&&(Q.ob=Q.ib<3*se/4&&Q.hb<3*de/4,Q.Kb=0),1}function E0(F){if(F==null)return 2;if(11>F.S){var Q=F.f.RGBA;Q.fb+=(F.height-1)*Q.A,Q.A=-Q.A}else Q=F.f.kb,F=F.height,Q.O+=(F-1)*Q.fa,Q.fa=-Q.fa,Q.N+=(F-1>>1)*Q.Ab,Q.Ab=-Q.Ab,Q.W+=(F-1>>1)*Q.Db,Q.Db=-Q.Db,Q.F!=null&&(Q.J+=(F-1)*Q.lb,Q.lb=-Q.lb);return 0}function zA(F,Q,ee,se){if(se==null||0>=F||0>=Q)return 2;if(ee!=null){if(ee.Da){var de=ee.cd,pe=ee.bd,ge=-2&ee.v,xe=-2&ee.j;if(0>ge||0>xe||0>=de||0>=pe||ge+de>F||xe+pe>Q)return 2;F=de,Q=pe}if(ee.da){if(!Be(F,Q,de=[ee.ib],pe=[ee.hb]))return 2;F=de[0],Q=pe[0]}}se.width=F,se.height=Q;e:{var Ee=se.width,ke=se.height;if(F=se.S,0>=Ee||0>=ke||!(F>=qi&&13>F))F=2;else{if(0>=se.Rd&&se.sd==null){ge=pe=de=Q=0;var Ue=(xe=Ee*UC[F])*ke;if(11>F||(pe=(ke+1)/2*(Q=(Ee+1)/2),F==12&&(ge=(de=Ee)*ke)),(ke=s(Ue+2*pe+ge))==null){F=1;break e}se.sd=ke,11>F?((Ee=se.f.RGBA).eb=ke,Ee.fb=0,Ee.A=xe,Ee.size=Ue):((Ee=se.f.kb).y=ke,Ee.O=0,Ee.fa=xe,Ee.Fd=Ue,Ee.f=ke,Ee.N=0+Ue,Ee.Ab=Q,Ee.Cd=pe,Ee.ea=ke,Ee.W=0+Ue+pe,Ee.Db=Q,Ee.Ed=pe,F==12&&(Ee.F=ke,Ee.J=0+Ue+2*pe),Ee.Tc=ge,Ee.lb=de)}if(Q=1,de=se.S,pe=se.width,ge=se.height,de>=qi&&13>de)if(11>de)F=se.f.RGBA,Q&=(xe=Math.abs(F.A))*(ge-1)+pe<=F.size,Q&=xe>=pe*UC[de],Q&=F.eb!=null;else{F=se.f.kb,xe=(pe+1)/2,Ue=(ge+1)/2,Ee=Math.abs(F.fa),ke=Math.abs(F.Ab);var st=Math.abs(F.Db),rt=Math.abs(F.lb),Ke=rt*(ge-1)+pe;Q&=Ee*(ge-1)+pe<=F.Fd,Q&=ke*(Ue-1)+xe<=F.Cd,Q=(Q&=st*(Ue-1)+xe<=F.Ed)&Ee>=pe&ke>=xe&st>=xe,Q&=F.y!=null,Q&=F.f!=null,Q&=F.ea!=null,de==12&&(Q&=rt>=pe,Q&=Ke<=F.Tc,Q&=F.F!=null)}else Q=0;F=Q?0:2}}return F!=0||ee!=null&&ee.fd&&(F=E0(se)),F}var Qs=64,Nf=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],$A=24,GA=32,C0=8,Ho=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];be("Predictor0","PredictorAdd0"),N.Predictor0=function(){return 4278190080},N.Predictor1=function(F){return F},N.Predictor2=function(F,Q,ee){return Q[ee+0]},N.Predictor3=function(F,Q,ee){return Q[ee+1]},N.Predictor4=function(F,Q,ee){return Q[ee-1]},N.Predictor5=function(F,Q,ee){return Pe(Pe(F,Q[ee+1]),Q[ee+0])},N.Predictor6=function(F,Q,ee){return Pe(F,Q[ee-1])},N.Predictor7=function(F,Q,ee){return Pe(F,Q[ee+0])},N.Predictor8=function(F,Q,ee){return Pe(Q[ee-1],Q[ee+0])},N.Predictor9=function(F,Q,ee){return Pe(Q[ee+0],Q[ee+1])},N.Predictor10=function(F,Q,ee){return Pe(Pe(F,Q[ee-1]),Pe(Q[ee+0],Q[ee+1]))},N.Predictor11=function(F,Q,ee){var se=Q[ee+0];return 0>=ct(se>>24&255,F>>24&255,(Q=Q[ee-1])>>24&255)+ct(se>>16&255,F>>16&255,Q>>16&255)+ct(se>>8&255,F>>8&255,Q>>8&255)+ct(255&se,255&F,255&Q)?se:F},N.Predictor12=function(F,Q,ee){var se=Q[ee+0];return(qe((F>>24&255)+(se>>24&255)-((Q=Q[ee-1])>>24&255))<<24|qe((F>>16&255)+(se>>16&255)-(Q>>16&255))<<16|qe((F>>8&255)+(se>>8&255)-(Q>>8&255))<<8|qe((255&F)+(255&se)-(255&Q)))>>>0},N.Predictor13=function(F,Q,ee){var se=Q[ee-1];return(et((F=Pe(F,Q[ee+0]))>>24&255,se>>24&255)<<24|et(F>>16&255,se>>16&255)<<16|et(F>>8&255,se>>8&255)<<8|et(F>>0&255,se>>0&255))>>>0};var ly=N.PredictorAdd0;N.PredictorAdd1=pt,be("Predictor2","PredictorAdd2"),be("Predictor3","PredictorAdd3"),be("Predictor4","PredictorAdd4"),be("Predictor5","PredictorAdd5"),be("Predictor6","PredictorAdd6"),be("Predictor7","PredictorAdd7"),be("Predictor8","PredictorAdd8"),be("Predictor9","PredictorAdd9"),be("Predictor10","PredictorAdd10"),be("Predictor11","PredictorAdd11"),be("Predictor12","PredictorAdd12"),be("Predictor13","PredictorAdd13");var Np=N.PredictorAdd2;Ht("ColorIndexInverseTransform","MapARGB","32b",function(F){return F>>8&255},function(F){return F}),Ht("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(F){return F},function(F){return F>>8&255});var Px,ql=N.ColorIndexInverseTransform,di=N.MapARGB,kf=N.VP8LColorIndexInverseTransformAlpha,kp=N.MapAlpha,Ed=N.VP8LPredictorsAdd=[];Ed.length=16,(N.VP8LPredictors=[]).length=16,(N.VP8LPredictorsAdd_C=[]).length=16,(N.VP8LPredictors_C=[]).length=16;var Bf,mo,ji,Tf,Vo,Bc,Su,Tc,Ya,jc,_s,zo,KA,Nu,_0,jf,If,Ff,qA,S0,Of,Cd,WA,Ja,wl,gn,xn,Ca,ls=s(511),Wl=s(2041),Df=s(225),Pf=s(767),_d=0,Rx=Wl,XA=Df,fi=Pf,Xl=ls,qi=0,N0=1,ku=2,Bp=3,YA=4,Sd=5,Lx=6,Tp=7,Rf=8,Nd=9,k0=10,Mx=[2,3,7],Yl=[3,3,11],El=[280,256,256,256,40],JA=[0,1,1,1,0],kd=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Bd=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ZA=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],DC=8,jp=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Ip=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Hs=null,Za=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Un=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Lf=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Bu=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],cy=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],eh=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],PC=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Td=[],po=[],Cl=[],RC=1,B0=2,Tu=[],Ai=[];vt("UpsampleRgbLinePair",ve,3),vt("UpsampleBgrLinePair",ze,3),vt("UpsampleRgbaLinePair",Jr,4),vt("UpsampleBgraLinePair",yn,4),vt("UpsampleArgbLinePair",Dr,4),vt("UpsampleRgba4444LinePair",Qt,2),vt("UpsampleRgb565LinePair",ot,2);var jd=N.UpsampleRgbLinePair,Mf=N.UpsampleBgrLinePair,ju=N.UpsampleRgbaLinePair,Ux=N.UpsampleBgraLinePair,Qx=N.UpsampleArgbLinePair,T0=N.UpsampleRgba4444LinePair,Hx=N.UpsampleRgb565LinePair,Iu=16,Vs=1<<Iu-1,Uf=-227,Vx=482,YT=6,LC=0,JT=s(256),zs=s(256),uy=s(256),Fp=s(256),Op=s(Vx-Uf),dy=s(Vx-Uf);aa("YuvToRgbRow",ve,3),aa("YuvToBgrRow",ze,3),aa("YuvToRgbaRow",Jr,4),aa("YuvToBgraRow",yn,4),aa("YuvToArgbRow",Dr,4),aa("YuvToRgba4444Row",Qt,2),aa("YuvToRgb565Row",ot,2);var th=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Id=[0,2,8],ZT=[8,7,6,4,4,2,2,2,1,1,1,1],MC=1;this.WebPDecodeRGBA=function(F,Q,ee,se,de){var pe=N0,ge=new bd,xe=new da;ge.ba=xe,xe.S=pe,xe.width=[xe.width],xe.height=[xe.height];var Ee=xe.width,ke=xe.height,Ue=new Da;if(Ue==null||F==null)var st=2;else t(Ue!=null),st=_u(F,Q,ee,Ue.width,Ue.height,Ue.Pd,Ue.Qd,Ue.format,null);if(st!=0?Ee=0:(Ee!=null&&(Ee[0]=Ue.width[0]),ke!=null&&(ke[0]=Ue.height[0]),Ee=1),Ee){xe.width=xe.width[0],xe.height=xe.height[0],se!=null&&(se[0]=xe.width),de!=null&&(de[0]=xe.height);e:{if(se=new Us,(de=new Cf).data=F,de.w=Q,de.ha=ee,de.kd=1,Q=[0],t(de!=null),((F=_u(de.data,de.w,de.ha,null,null,null,Q,null,de))==0||F==7)&&Q[0]&&(F=4),(Q=F)==0){if(t(ge!=null),se.data=de.data,se.w=de.w+de.offset,se.ha=de.ha-de.offset,se.put=xt,se.ac=Je,se.bc=Et,se.ma=ge,de.xa){if((F=dt())==null){ge=1;break e}if(function(rt,Ke){var jt=[0],mt=[0],Qe=[0];t:for(;;){if(rt==null)return 0;if(Ke==null)return rt.a=2,0;if(rt.l=Ke,rt.a=0,z(rt.m,Ke.data,Ke.w,Ke.ha),!bt(rt.m,jt,mt,Qe)){rt.a=3;break t}if(rt.xb=B0,Ke.width=jt[0],Ke.height=mt[0],!$e(jt[0],mt[0],1,rt,null))break t;return 1}return t(rt.a!=0),0}(F,se)){if(se=(Q=zA(se.width,se.height,ge.Oa,ge.ba))==0){t:{se=F;r:for(;;){if(se==null){se=0;break t}if(t(se.s.yc!=null),t(se.s.Ya!=null),t(0<se.s.Wb),t((ee=se.l)!=null),t((de=ee.ma)!=null),se.xb!=0){if(se.ca=de.ba,se.tb=de.tb,t(se.ca!=null),!Sf(de.Oa,ee,Bp)){se.a=2;break r}if(!nt(se,ee.width)||ee.da)break r;if((ee.da||Rr(se.ca.S))&&Ge(),11>se.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),se.ca.f.kb.F!=null&&Ge()),se.Pb&&0<se.s.ua&&se.s.vb.X==null&&!Ie(se.s.vb,se.s.Wa.Xa)){se.a=1;break r}se.xb=0}if(!je(se,se.V,se.Ba,se.c,se.i,ee.o,Te))break r;de.Dc=se.Ma,se=1;break t}t(se.a!=0),se=0}se=!se}se&&(Q=F.a)}else Q=F.a}else{if((F=new Ni)==null){ge=1;break e}if(F.Fa=de.na,F.P=de.P,F.qc=de.Sa,vf(F,se)){if((Q=zA(se.width,se.height,ge.Oa,ge.ba))==0){if(F.Aa=0,ee=ge.Oa,t((de=F)!=null),ee!=null){if(0<(Ee=0>(Ee=ee.Md)?0:100<Ee?255:255*Ee/100)){for(ke=Ue=0;4>ke;++ke)12>(st=de.pb[ke]).lc&&(st.ia=Ee*ZT[0>st.lc?0:st.lc]>>3),Ue|=st.ia;Ue&&(alert("todo:VP8InitRandom"),de.ia=1)}de.Ga=ee.Id,100<de.Ga?de.Ga=100:0>de.Ga&&(de.Ga=0)}LA(F,se)||(Q=F.a)}}else Q=F.a}Q==0&&ge.Oa!=null&&ge.Oa.fd&&(Q=E0(ge.ba))}ge=Q}pe=ge!=0?null:11>pe?xe.f.RGBA.eb:xe.f.kb.y}else pe=null;return pe};var UC=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(N,I){for(var L="",D=0;D<4;D++)L+=String.fromCharCode(N[I++]);return L}function d(N,I){return(N[I+0]<<0|N[I+1]<<8|N[I+2]<<16)>>>0}function f(N,I){return(N[I+0]<<0|N[I+1]<<8|N[I+2]<<16|N[I+3]<<24)>>>0}new c;var h=[0],m=[0],g=[],x=new c,v=e,y=function(N,I){var L={},D=0,k=!1,P=0,R=0;if(L.frames=[],!function(H,Y,Z,ae){for(var le=0;le<ae;le++)if(H[Y+le]!=Z.charCodeAt(le))return!0;return!1}(N,I,"RIFF",4)){var W,V;for(f(N,I+=4),I+=8;I<N.length;){var G=u(N,I),z=f(N,I+=4);I+=4;var K=z+(1&z);switch(G){case"VP8 ":case"VP8L":L.frames[D]===void 0&&(L.frames[D]={}),(M=L.frames[D]).src_off=k?R:I-8,M.src_size=P+z+8,D++,k&&(k=!1,P=0,R=0);break;case"VP8X":(M=L.header={}).feature_flags=N[I];var J=I+4;M.canvas_width=1+d(N,J),J+=3,M.canvas_height=1+d(N,J),J+=3;break;case"ALPH":k=!0,P=K+8,R=I-8;break;case"ANIM":(M=L.header).bgcolor=f(N,I),J=I+4,M.loop_count=(W=N)[(V=J)+0]<<0|W[V+1]<<8,J+=2;break;case"ANMF":var te,M;(M=L.frames[D]={}).offset_x=2*d(N,I),I+=3,M.offset_y=2*d(N,I),I+=3,M.width=1+d(N,I),I+=3,M.height=1+d(N,I),I+=3,M.duration=d(N,I),I+=3,te=N[I++],M.dispose=1&te,M.blend=te>>1&1}G!="ANMF"&&(I+=K)}return L}}(v,0);y.response=v,y.rgbaoutput=!0,y.dataurl=!1;var w=y.header?y.header:null,_=y.frames?y.frames:null;if(w){w.loop_counter=w.loop_count,h=[w.canvas_height],m=[w.canvas_width];for(var T=0;T<_.length&&_[T].blend!=0;T++);}var B=_[0],j=x.WebPDecodeRGBA(v,B.src_off,B.src_size,m,h);B.rgba=j,B.imgwidth=m[0],B.imgheight=h[0];for(var E=0;E<m[0]*h[0]*4;E++)g[E]=j[E];return this.width=m,this.height=h,this.data=g,this}(function(e){var t=function(){return typeof YD=="function"},r=function(h,m,g,x){var v=4,y=i;switch(x){case e.image_compression.FAST:v=1,y=s;break;case e.image_compression.MEDIUM:v=6,y=o;break;case e.image_compression.SLOW:v=9,y=c}h=n(h,m,g,y);var w=YD(h,{level:v});return e.__addimage__.arrayBufferToBinaryString(w)},n=function(h,m,g,x){for(var v,y,w,_=h.length/m,T=new Uint8Array(h.length+_),B=d(),j=0;j<_;j+=1){if(w=j*m,v=h.subarray(w,w+m),x)T.set(x(v,g,y),w+j);else{for(var E,N=B.length,I=[];E<N;E+=1)I[E]=B[E](v,g,y);var L=f(I.concat());T.set(I[L],w+j)}y=v}return T},a=function(h){var m=Array.apply([],h);return m.unshift(0),m},s=function(h,m){var g,x=[],v=h.length;x[0]=1;for(var y=0;y<v;y+=1)g=h[y-m]||0,x[y+1]=h[y]-g+256&255;return x},i=function(h,m,g){var x,v=[],y=h.length;v[0]=2;for(var w=0;w<y;w+=1)x=g&&g[w]||0,v[w+1]=h[w]-x+256&255;return v},o=function(h,m,g){var x,v,y=[],w=h.length;y[0]=3;for(var _=0;_<w;_+=1)x=h[_-m]||0,v=g&&g[_]||0,y[_+1]=h[_]+256-(x+v>>>1)&255;return y},c=function(h,m,g){var x,v,y,w,_=[],T=h.length;_[0]=4;for(var B=0;B<T;B+=1)x=h[B-m]||0,v=g&&g[B]||0,y=g&&g[B-m]||0,w=u(x,v,y),_[B+1]=h[B]-w+256&255;return _},u=function(h,m,g){if(h===m&&m===g)return h;var x=Math.abs(m-g),v=Math.abs(h-g),y=Math.abs(h+m-g-g);return x<=v&&x<=y?h:v<=y?m:g},d=function(){return[a,s,i,o,c]},f=function(h){var m=h.map(function(g){return g.reduce(function(x,v){return x+Math.abs(v)},0)});return m.indexOf(Math.min.apply(null,m))};e.processPNG=function(h,m,g,x){var v,y,w,_,T,B,j,E,N,I,L,D,k,P,R,W=this.decode.FLATE_DECODE,V="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(w=new cze(h)).imgData,y=w.bits,v=w.colorSpace,T=w.colors,[4,6].indexOf(w.colorType)!==-1){if(w.bits===8){N=(E=w.pixelBitlength==32?new Uint32Array(w.decodePixels().buffer):w.pixelBitlength==16?new Uint16Array(w.decodePixels().buffer):new Uint8Array(w.decodePixels().buffer)).length,L=new Uint8Array(N*w.colors),I=new Uint8Array(N);var G,z=w.pixelBitlength-w.bits;for(P=0,R=0;P<N;P++){for(k=E[P],G=0;G<z;)L[R++]=k>>>G&255,G+=w.bits;I[P]=k>>>G&255}}if(w.bits===16){N=(E=new Uint32Array(w.decodePixels().buffer)).length,L=new Uint8Array(N*(32/w.pixelBitlength)*w.colors),I=new Uint8Array(N*(32/w.pixelBitlength)),D=w.colors>1,P=0,R=0;for(var K=0;P<N;)k=E[P++],L[R++]=k>>>0&255,D&&(L[R++]=k>>>16&255,k=E[P++],L[R++]=k>>>0&255),I[K++]=k>>>16&255;y=8}x!==e.image_compression.NONE&&t()?(h=r(L,w.width*w.colors,w.colors,x),j=r(I,w.width,1,x)):(h=L,j=I,W=void 0)}if(w.colorType===3&&(v=this.color_spaces.INDEXED,B=w.palette,w.transparency.indexed)){var J=w.transparency.indexed,te=0;for(P=0,N=J.length;P<N;++P)te+=J[P];if((te/=255)===N-1&&J.indexOf(0)!==-1)_=[J.indexOf(0)];else if(te!==N){for(E=w.decodePixels(),I=new Uint8Array(E.length),P=0,N=E.length;P<N;P++)I[P]=J[E[P]];j=r(I,w.width,1)}}var M=function(H){var Y;switch(H){case e.image_compression.FAST:Y=11;break;case e.image_compression.MEDIUM:Y=13;break;case e.image_compression.SLOW:Y=14;break;default:Y=12}return Y}(x);return W===this.decode.FLATE_DECODE&&(V="/Predictor "+M+" "),V+="/Colors "+T+" /BitsPerComponent "+y+" /Columns "+w.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(j&&this.__addimage__.isArrayBuffer(j)||this.__addimage__.isArrayBufferView(j))&&(j=this.__addimage__.arrayBufferToBinaryString(j)),{alias:g,data:h,index:m,filter:W,decodeParameters:V,transparency:_,palette:B,sMask:j,predictor:M,width:w.width,height:w.height,bitsPerComponent:y,colorSpace:v}}}})(br.API),function(e){e.processGIF89A=function(t,r,n,a){var s=new uze(t),i=s.width,o=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:i,height:o},d=new U6(100).encode(u,100);return e.processJPEG.call(this,d,r,n,a)},e.processGIF87A=e.processGIF89A}(br.API),Ud.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ud.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){ja.log("bit decode error:"+r)}},Ud.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var c=this.palette[s>>7-o&1];this.data[i+4*o]=c.blue,this.data[i+4*o+1]=c.green,this.data[i+4*o+2]=c.red,this.data[i+4*o+3]=255}r!==0&&(this.pos+=4-r)}},Ud.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+2*a*4,o=s>>4,c=15&s,u=this.palette[o];if(this.data[i]=u.blue,this.data[i+1]=u.green,this.data[i+2]=u.red,this.data[i+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[i+4]=u.blue,this.data[i+4+1]=u.green,this.data[i+4+2]=u.red,this.data[i+4+3]=255}t!==0&&(this.pos+=4-t)}},Ud.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var i=this.palette[a];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},Ud.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&t)/t*255|0,o=(s>>5&t)/t*255|0,c=(s>>10&t)/t*255|0,u=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=o,this.data[d+2]=i,this.data[d+3]=u}this.pos+=e}},Ud.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,c=(i>>5&r)/r*255|0,u=(i>>11)/t*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=o,this.data[d+3]=255}this.pos+=e}},Ud.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*r;this.data[i]=s,this.data[i+1]=a,this.data[i+2]=n,this.data[i+3]=255}this.pos+=this.width%4}},Ud.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=i}},Ud.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var s=new Ud(t,!1),i=s.width,o=s.height,c={data:s.getData(),width:i,height:o},u=new U6(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(br.API),YW.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var s=new YW(t),i=s.width,o=s.height,c={data:s.getData(),width:i,height:o},u=new U6(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(br.API),br.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,s=new Uint8Array(a/4*3),i=new Uint8Array(a/4),o=0,c=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],h=n[u+2],m=n[u+3];s[o++]=d,s[o++]=f,s[o++]=h,i[c++]=m}var g=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:g,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},br.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},wv=br.API,h5=wv.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),i=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:a.metadata.Unicode.widths,c=o.fof?o.fof:1,u=t.kerning?t.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=t.doKerning!==!1,h=0,m=e.length,g=0,x=o[0]||c,v=[];for(r=0;r<m;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?v.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+i*(1e3/s)||0)/1e3):(h=f&&ya(u[n])==="object"&&!isNaN(parseInt(u[n][g],10))?u[n][g]/d:0,v.push((o[n]||x)/c+h)),g=n;return v},KW=wv.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return wv.processArabic&&(e=wv.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:h5.apply(this,arguments).reduce(function(s,i){return s+i},0)},qW=function(e,t,r,n){for(var a=[],s=0,i=e.length,o=0;s!==i&&o+t[s]<r;)o+=t[s],s++;a.push(e.slice(0,s));var c=s;for(o=0;s!==i;)o+t[s]>n&&(a.push(e.slice(c,s)),o=0,c=s),o+=t[s],s++;return c!==s&&a.push(e.slice(c,s)),a},WW=function(e,t,r){r||(r={});var n,a,s,i,o,c,u,d=[],f=[d],h=r.textIndent||0,m=0,g=0,x=e.split(" "),v=h5.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?x[0].length+2:r.lineIndent||0){var y=Array(c).join(" "),w=[];x.map(function(T){(T=T.split(/\s*\n/)).length>1?w=w.concat(T.map(function(B,j){return(j&&B.length?`
`:"")+B})):w.push(T[0])}),x=w,c=KW.apply(this,[y,r])}for(s=0,i=x.length;s<i;s++){var _=0;if(n=x[s],c&&n[0]==`
`&&(n=n.substr(1),_=1),h+m+(g=(a=h5.apply(this,[n,r])).reduce(function(T,B){return T+B},0))>t||_){if(g>t){for(o=qW.apply(this,[n,a,t-(h+m),t]),d.push(o.shift()),d=[o.pop()];o.length;)f.push([o.shift()]);g=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(T,B){return T+B},0)}else d=[n];f.push(d),h=g+c,m=v}else d.push(n),h+=m+g,m=v}return u=c?function(T,B){return(B?y:"")+T.join(" ")}:function(T){return T.join(" ")},f.map(u)},wv.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var i=1*this.internal.scaleFactor*t/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var o,c,u=[];for(o=0,c=n.length;o<c;o++)u=u.concat(WW.apply(this,[n[o],i,s]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},a=0;a<t.length;a++)r[t[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=t[a];var s=function(f){return"0x"+parseInt(f,10).toString(16)},i=e.__fontmetrics__.compress=function(f){var h,m,g,x,v=["{"];for(var y in f){if(h=f[y],isNaN(parseInt(y,10))?m="'"+y+"'":(y=parseInt(y,10),m=(m=s(y).slice(2)).slice(0,-1)+n[m.slice(-1)]),typeof h=="number")h<0?(g=s(h).slice(3),x="-"):(g=s(h).slice(2),x=""),g=x+g.slice(0,-1)+n[g.slice(-1)];else{if(ya(h)!=="object")throw new Error("Don't know what to do with value type "+ya(h)+".");g=i(h)}v.push(m+g)}return v.push("}"),v.join("")},o=e.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,m,g,x,v={},y=1,w=v,_=[],T="",B="",j=f.length-1,E=1;E<j;E+=1)(x=f[E])=="'"?h?(g=h.join(""),h=void 0):h=[]:h?h.push(x):x=="{"?(_.push([w,g]),w={},g=void 0):x=="}"?((m=_.pop())[0][m[1]]=w,g=void 0,w=m[0]):x=="-"?y=-1:g===void 0?r.hasOwnProperty(x)?(T+=r[x],g=parseInt(T,16)*y,y=1,T=""):T+=x:r.hasOwnProperty(x)?(B+=r[x],w[g]=parseInt(B,16)*y,y=1,g=void 0,B=""):B+=x;return v},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(f){var h=f.font,m=d.Unicode[h.postScriptName];m&&(h.metadata.Unicode={},h.metadata.Unicode.widths=m.widths,h.metadata.Unicode.kerning=m.kerning);var g=u.Unicode[h.postScriptName];g&&(h.metadata.Unicode.encoding=g,h.encoding=g.codePages[0])}])}(br.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(i,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(d2(o)),i.metadata=e.API.TTFFont.open(o),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(a,n)}}])}(br),function(e){function t(){return(Vr.canvg?Promise.resolve(Vr.canvg):ub(()=>import("./index.es-DMzuh2zF.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}br.API.addSvgAsImage=function(r,n,a,s,i,o,c,u){if(isNaN(n)||isNaN(a))throw ja.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(i))throw ja.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=i;var f=d.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,d.width,d.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return t().then(function(g){return g.fromString(f,r,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(h)}).then(function(){m.addImage(d.toDataURL("image/jpeg",1),n,a,s,i,c,u)})}}(),br.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},br.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,s,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(i),c=[],u=0,d=0,f=0;function h(g,x){var v,y=!1;for(v=0;v<g.length;v+=1)g[v]===x&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var m=o.length;for(f=0;f<m;f+=1)r[o[f]].value=r[o[f]].defaultValue,r[o[f]].explicitSet=!1}if(ya(e)==="object"){for(a in e)if(s=e[a],h(o,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&h(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,x=[];for(g in r)r[g].explicitSet===!0&&(r[g].type==="name"?x.push("/"+g+" /"+r[g].value):x.push("/"+g+" "+r[g].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+i.length+o.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+i+o+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(br.API),function(e){var t=e.API,r=t.pdfEscape16=function(s,i){for(var o,c=i.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,h=s.length;f<h;++f){if(o=i.metadata.characterToGlyph(s.charCodeAt(f)),i.metadata.glyIdsUsed.push(o),i.metadata.toUnicode[o]=s.charCodeAt(f),c.indexOf(o)==-1&&(c.push(o),c.push([parseInt(i.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(u[4-o.length],o)}return d.join("")},n=function(s){var i,o,c,u,d,f,h;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,h=(o=Object.keys(s).sort(function(m,g){return m-g})).length;f<h;f++)i=o[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[i]!==void 0&&s[i]!==null&&typeof s[i].toString=="function"&&(u=("0000"+s[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),c.push("<"+i+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(i){var o=i.font,c=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,h=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),m="",g=0;g<h.length;g++)m+=String.fromCharCode(h[g]);var x=u();d({data:m,addLength1:!0,objectId:x}),c("endobj");var v=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:v}),c("endobj");var y=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Wv(o.fontName)),c("/FontFile2 "+x+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),c("/Flags "+o.metadata.flags),c("/StemV "+o.metadata.stemV),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c(">>"),c("endobj");var w=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Wv(o.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+e.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+o.encoding+")"),c(">>"),c(">>"),c("endobj"),o.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+v+" 0 R"),c("/BaseFont /"+Wv(o.fontName)),c("/Encoding /"+o.encoding),c("/DescendantFonts ["+w+" 0 R]"),c(">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(i){var o=i.font,c=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,h="",m=0;m<f.length;m++)h+=String.fromCharCode(f[m]);var g=u();d({data:h,addLength1:!0,objectId:g}),c("endobj");var x=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var v=u();c("<<"),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c("/StemV "+o.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+g+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),c("/FontName /"+Wv(o.fontName)),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c(">>"),c("endobj"),o.objectNumber=u();for(var y=0;y<o.metadata.hmtx.widths.length;y++)o.metadata.hmtx.widths[y]=parseInt(o.metadata.hmtx.widths[y]*(1e3/o.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+Wv(o.fontName)+"/FontDescriptor "+v+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]);var a=function(s){var i,o=s.text||"",c=s.x,u=s.y,d=s.options||{},f=s.mutex||{},h=f.pdfEscape,m=f.activeFontKey,g=f.fonts,x=m,v="",y=0,w="",_=g[x].encoding;if(g[x].encoding!=="Identity-H")return{text:o,x:c,y:u,options:d,mutex:f};for(w=o,x=m,Array.isArray(o)&&(w=o[0]),y=0;y<w.length;y+=1)g[x].metadata.hasOwnProperty("cmap")&&(i=g[x].metadata.cmap.unicode.codeMap[w[y].charCodeAt(0)]),i||w[y].charCodeAt(0)<256&&g[x].metadata.hasOwnProperty("Unicode")?v+=w[y]:v+="";var T="";return parseInt(x.slice(1))<14||_==="WinAnsiEncoding"?T=h(v,x).split("").map(function(B){return B.charCodeAt(0).toString(16)}).join(""):_==="Identity-H"&&(T=r(v,g[x])),f.isHex=!0,{text:T,x:c,y:u,options:d,mutex:f}};t.events.push(["postProcessText",function(s){var i=s.text||"",o=[],c={text:i,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(i)){var u=0;for(u=0;u<i.length;u+=1)Array.isArray(i[u])&&i[u].length===3?o.push([a(Object.assign({},c,{text:i[u][0]})).text,i[u][1],i[u][2]]):o.push(a(Object.assign({},c,{text:i[u]})).text);s.text=o}else s.text=a(Object.assign({},c,{text:i})).text}])}(br),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(br.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,s,i,o,c,u,d,f=t,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},v=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),w=!1,_=0;this.__bidiEngine__={};var T=function(D){var k=D.charCodeAt(),P=k>>8,R=x[P];return R!==void 0?f[256*R+(255&k)]:P===252||P===253?"AL":y.test(P)?"L":P===8?"R":"N"},B=function(D){for(var k,P=0;P<D.length;P++){if((k=T(D.charAt(P)))==="L")return!1;if(k==="R")return!0}return!1},j=function(D,k,P,R){var W,V,G,z,K=k[R];switch(K){case"L":case"R":w=!1;break;case"N":case"AN":break;case"EN":w&&(K="AN");break;case"AL":w=!0,K="R";break;case"WS":K="N";break;case"CS":R<1||R+1>=k.length||(W=P[R-1])!=="EN"&&W!=="AN"||(V=k[R+1])!=="EN"&&V!=="AN"?K="N":w&&(V="AN"),K=V===W?V:"N";break;case"ES":K=(W=R>0?P[R-1]:"B")==="EN"&&R+1<k.length&&k[R+1]==="EN"?"EN":"N";break;case"ET":if(R>0&&P[R-1]==="EN"){K="EN";break}if(w){K="N";break}for(G=R+1,z=k.length;G<z&&k[G]==="ET";)G++;K=G<z&&k[G]==="EN"?"EN":"N";break;case"NSM":if(i&&!o){for(z=k.length,G=R+1;G<z&&k[G]==="NSM";)G++;if(G<z){var J=D[R],te=J>=1425&&J<=2303||J===64286;if(W=k[G],te&&(W==="R"||W==="AL")){K="R";break}}}K=R<1||(W=k[R-1])==="B"?"N":P[R-1];break;case"B":w=!1,a=!0,K=_;break;case"S":s=!0,K="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":w=!1;break;case"BN":K="N"}return K},E=function(D,k,P){var R=D.split("");return P&&N(R,P,{hiLevel:_}),R.reverse(),k&&k.reverse(),R.join("")},N=function(D,k,P){var R,W,V,G,z,K=-1,J=D.length,te=0,M=[],H=_?m:h,Y=[];for(w=!1,a=!1,s=!1,W=0;W<J;W++)Y[W]=T(D[W]);for(V=0;V<J;V++){if(z=te,M[V]=j(D,Y,M,V),R=240&(te=H[z][g[M[V]]]),te&=15,k[V]=G=H[te][5],R>0)if(R===16){for(W=K;W<V;W++)k[W]=1;K=-1}else K=-1;if(H[te][6])K===-1&&(K=V);else if(K>-1){for(W=K;W<V;W++)k[W]=G;K=-1}Y[V]==="B"&&(k[V]=0),P.hiLevel|=G}s&&function(Z,ae,le){for(var ie=0;ie<le;ie++)if(Z[ie]==="S"){ae[ie]=_;for(var ce=ie-1;ce>=0&&Z[ce]==="WS";ce--)ae[ce]=_}}(Y,k,J)},I=function(D,k,P,R,W){if(!(W.hiLevel<D)){if(D===1&&_===1&&!a)return k.reverse(),void(P&&P.reverse());for(var V,G,z,K,J=k.length,te=0;te<J;){if(R[te]>=D){for(z=te+1;z<J&&R[z]>=D;)z++;for(K=te,G=z-1;K<G;K++,G--)V=k[K],k[K]=k[G],k[G]=V,P&&(V=P[K],P[K]=P[G],P[G]=V);te=z}te++}}},L=function(D,k,P){var R=D.split(""),W={hiLevel:_};return P||(P=[]),N(R,P,W),function(V,G,z){if(z.hiLevel!==0&&d)for(var K,J=0;J<V.length;J++)G[J]===1&&(K=v.indexOf(V[J]))>=0&&(V[J]=v[K+1])}(R,P,W),I(2,R,k,P,W),I(1,R,k,P,W),R.join("")};return this.__bidiEngine__.doBidiReorder=function(D,k,P){if(function(W,V){if(V)for(var G=0;G<W.length;G++)V[G]=G;o===void 0&&(o=B(W)),u===void 0&&(u=B(W))}(D,k),i||!c||u)if(i&&c&&o^u)_=o?1:0,D=E(D,k,P);else if(!i&&c&&u)_=o?1:0,D=L(D,k,P),D=E(D,k);else if(!i||o||c||u){if(i&&!c&&o^u)D=E(D,k),o?(_=0,D=L(D,k,P)):(_=1,D=L(D,k,P),D=E(D,k));else if(i&&o&&!c&&u)_=1,D=L(D,k,P),D=E(D,k);else if(!i&&!c&&o^u){var R=d;o?(_=1,D=L(D,k,P),_=0,d=!1,D=L(D,k,P),d=R):(_=0,D=L(D,k,P),D=E(D,k),_=1,d=!1,D=L(D,k,P),d=R,D=E(D,k))}}else _=0,D=L(D,k,P);else _=o?1:0,D=L(D,k,P);return D},this.__bidiEngine__.setOptions=function(D){D&&(i=D.isInputVisual,c=D.isOutputVisual,o=D.isInputRtl,u=D.isOutputRtl,d=D.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text,s=(n.x,n.y,n.options||{}),i=(n.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var o=0;for(i=[],o=0;o<a.length;o+=1)Object.prototype.toString.call(a[o])==="[object Array]"?i.push([r.doBidiReorder(a[o][0]),a[o][1],a[o][2]]):i.push([r.doBidiReorder(a[o])]);n.text=i}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(br),br.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new sp(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new _ze(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new dze(this.contents),this.head=new Aze(this),this.name=new xze(this),this.cmap=new Pce(this),this.toUnicode={},this.hhea=new hze(this),this.maxp=new vze(this),this.hmtx=new bze(this),this.post=new pze(this),this.os2=new mze(this),this.loca=new Cze(this),this.glyf=new yze(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,o,c,u;for(u=[],i=0,o=(c=this.bbox).length;i<o;i++)t=c[i],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),(32768&(r=a>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,s,i,o;for(i=0,s=0,o=(t=""+t).length;0<=o?s<o:s>o;s=0<=o?++s:--s)a=t.charCodeAt(s),i+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return i*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var pf,sp=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,s,i,o,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^i)+256*(255^o)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*i+256*o+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,s;for(s=[],n=0,a=t.length;n<a;n++)r=t[n],s.push(this.writeByte(r));return s},e}(),dze=function(){var e;function t(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,s,i,o,c,u,d,f,h,m,g,x;for(x in m=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(m)/c),i=Math.floor(f/c),d=16*m-f,(a=new sp).writeInt(this.scalarType),a.writeShort(m),a.writeShort(f),a.writeShort(i),a.writeShort(d),s=16*m,u=a.pos+s,o=null,g=[],r)for(h=r[x],a.writeString(x),a.writeInt(e(h)),a.writeInt(u),a.writeInt(h.length),g=g.concat(h),x==="head"&&(o=u),u+=h.length;u%4;)g.push(0),u++;return a.write(g),n=2981146554-e(a.data),a.pos=o+8,a.writeUInt32(n),a.data},e=function(r){var n,a,s,i;for(r=Rce.call(r);r.length%4;)r.push(0);for(s=new sp(r),a=0,n=0,i=r.length;n<i;n=n+=4)a+=s.readUInt32();return 4294967295&a},t}(),fze={}.hasOwnProperty,IA=function(e,t){for(var r in t)fze.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};pf=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var Aze=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return IA(t,pf),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new sp).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),JW=function(){function e(t,r){var n,a,s,i,o,c,u,d,f,h,m,g,x,v,y,w,_;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(m=t.readUInt16(),h=m/2,t.pos+=6,s=function(){var T,B;for(B=[],c=T=0;0<=h?T<h:T>h;c=0<=h?++T:--T)B.push(t.readUInt16());return B}(),t.pos+=2,x=function(){var T,B;for(B=[],c=T=0;0<=h?T<h:T>h;c=0<=h?++T:--T)B.push(t.readUInt16());return B}(),u=function(){var T,B;for(B=[],c=T=0;0<=h?T<h:T>h;c=0<=h?++T:--T)B.push(t.readUInt16());return B}(),d=function(){var T,B;for(B=[],c=T=0;0<=h?T<h:T>h;c=0<=h?++T:--T)B.push(t.readUInt16());return B}(),a=(this.length-t.pos+this.offset)/2,o=function(){var T,B;for(B=[],c=T=0;0<=a?T<a:T>a;c=0<=a?++T:--T)B.push(t.readUInt16());return B}(),c=y=0,_=s.length;y<_;c=++y)for(v=s[c],n=w=g=x[c];g<=v?w<=v:w>=v;n=g<=v?++w:--w)d[c]===0?i=n+u[c]:(i=o[d[c]/2+(n-g)-(h-c)]||0)!==0&&(i+=u[c]),this.codeMap[n]=65535&i}t.pos=f}return e.encode=function(t,r){var n,a,s,i,o,c,u,d,f,h,m,g,x,v,y,w,_,T,B,j,E,N,I,L,D,k,P,R,W,V,G,z,K,J,te,M,H,Y,Z,ae,le,ie,ce,Ae,Fe,ne;switch(R=new sp,i=Object.keys(t).sort(function(_e,Ie){return _e-Ie}),r){case"macroman":for(x=0,v=function(){var _e=[];for(g=0;g<256;++g)_e.push(0);return _e}(),w={0:0},s={},W=0,K=i.length;W<K;W++)w[ce=t[a=i[W]]]==null&&(w[ce]=++x),s[a]={old:t[a],new:w[t[a]]},v[a]=w[t[a]];return R.writeUInt16(1),R.writeUInt16(0),R.writeUInt32(12),R.writeUInt16(0),R.writeUInt16(262),R.writeUInt16(0),R.write(v),{charMap:s,subtable:R.data,maxGlyphID:x+1};case"unicode":for(k=[],f=[],_=0,w={},n={},y=u=null,V=0,J=i.length;V<J;V++)w[B=t[a=i[V]]]==null&&(w[B]=++_),n[a]={old:B,new:w[B]},o=w[B]-a,y!=null&&o===u||(y&&f.push(y),k.push(a),u=o),y=a;for(y&&f.push(y),f.push(65535),k.push(65535),L=2*(I=k.length),N=2*Math.pow(Math.log(I)/Math.LN2,2),h=Math.log(N/2)/Math.LN2,E=2*I-N,c=[],j=[],m=[],g=G=0,te=k.length;G<te;g=++G){if(D=k[g],d=f[g],D===65535){c.push(0),j.push(0);break}if(D-(P=n[D].new)>=32768)for(c.push(0),j.push(2*(m.length+I-g)),a=z=D;D<=d?z<=d:z>=d;a=D<=d?++z:--z)m.push(n[a].new);else c.push(P-D),j.push(0)}for(R.writeUInt16(3),R.writeUInt16(1),R.writeUInt32(12),R.writeUInt16(4),R.writeUInt16(16+8*I+2*m.length),R.writeUInt16(0),R.writeUInt16(L),R.writeUInt16(N),R.writeUInt16(h),R.writeUInt16(E),le=0,M=f.length;le<M;le++)a=f[le],R.writeUInt16(a);for(R.writeUInt16(0),ie=0,H=k.length;ie<H;ie++)a=k[ie],R.writeUInt16(a);for(Ae=0,Y=c.length;Ae<Y;Ae++)o=c[Ae],R.writeUInt16(o);for(Fe=0,Z=j.length;Fe<Z;Fe++)T=j[Fe],R.writeUInt16(T);for(ne=0,ae=m.length;ne<ae;ne++)x=m[ne],R.writeUInt16(x);return{charMap:n,subtable:R.data,maxGlyphID:_+1}}},e}(),Pce=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return IA(t,pf),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,a,s;for(r.pos=this.offset,this.version=r.readUInt16(),s=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)n=new JW(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var a,s;return n==null&&(n="macroman"),a=JW.encode(r,n),(s=new sp).writeUInt16(0),s.writeUInt16(1),a.table=s.data.concat(a.subtable),a},t}(),hze=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return IA(t,pf),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),mze=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return IA(t,pf),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(r.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),pze=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return IA(t,pf),t.prototype.tag="post",t.prototype.parse=function(r){var n,a,s;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var i;for(a=r.readUInt16(),this.glyphNameIndex=[],i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],s=[];r.pos<this.offset+this.length;)n=r.readByte(),s.push(this.names.push(r.readString(n)));return s;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var o,c,u;for(u=[],i=o=0,c=this.file.maxp.numGlyphs;0<=c?o<c:o>c;i=0<=c?++o:--o)u.push(r.readUInt32());return u}).call(this)}},t}(),gze=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},xze=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return IA(t,pf),t.prototype.tag="name",t.prototype.parse=function(r){var n,a,s,i,o,c,u,d,f,h,m;for(r.pos=this.offset,r.readShort(),n=r.readShort(),c=r.readShort(),a=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(u={},i=f=0,h=a.length;f<h;i=++f)s=a[i],r.pos=s.offset,d=r.readString(s.length),o=new gze(d,s),u[m=s.nameID]==null&&(u[m]=[]),u[s.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t}(),vze=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return IA(t,pf),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),bze=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return IA(t,pf),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,a,s,i,o,c,u;for(r.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,f;for(f=[],n=d=0;0<=s?d<s:d>s;n=0<=s?++d:--d)f.push(r.readInt16());return f}(),this.widths=(function(){var d,f,h,m;for(m=[],d=0,f=(h=this.metrics).length;d<f;d++)i=h[d],m.push(i.advance);return m}).call(this),a=this.widths[this.widths.length-1],u=[],n=o=0;0<=s?o<s:o>s;n=0<=s?++o:--o)u.push(this.widths.push(a));return u},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),Rce=[].slice,yze=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return IA(t,pf),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,a,s,i,o,c,u,d,f,h;return r in this.cache?this.cache[r]:(i=this.file.loca,n=this.file.contents,a=i.indexOf(r),(s=i.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+a,o=(c=new sp(n.read(s))).readShort(),d=c.readShort(),h=c.readShort(),u=c.readShort(),f=c.readShort(),this.cache[r]=o===-1?new Eze(c,d,h,u,f):new wze(c,o,d,h,u,f),this.cache[r]))},t.prototype.encode=function(r,n,a){var s,i,o,c,u;for(o=[],i=[],c=0,u=n.length;c<u;c++)s=r[n[c]],i.push(o.length),s&&(o=o.concat(s.encode(a)));return i.push(o.length),{table:o,offsets:i}},t}(),wze=function(){function e(t,r,n,a,s,i){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),Eze=function(){function e(t,r,n,a,s){var i,o;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;o=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&o;)i.pos+=1&o?4:2,128&o?i.pos+=8:64&o?i.pos+=4:8&o&&(i.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new sp(Rce.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),Cze=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return IA(t,pf),t.prototype.tag="loca",t.prototype.parse=function(r){var n,a;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=2)i.push(2*r.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=4)i.push(r.readUInt32());return i}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var a=new Uint32Array(this.offsets.length),s=0,i=0,o=0;o<a.length;++o)if(a[o]=s,i<n.length&&n[i]==o){++i,a[o]=s;var c=this.offsets[o],u=this.offsets[o+1]-c;u>0&&(s+=u)}for(var d=new Array(4*a.length),f=0;f<a.length;++f)d[4*f+3]=255&a[f],d[4*f+2]=(65280&a[f])>>8,d[4*f+1]=(16711680&a[f])>>16,d[4*f]=(4278190080&a[f])>>24;return d},t}(),_ze=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,t={},s=this.subset)n=s[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,s,i,o,c;for(a={},i=0,o=t.length;i<o;i++)a[s=t[i]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],a[s]=n;return a},e.prototype.encode=function(t,r){var n,a,s,i,o,c,u,d,f,h,m,g,x,v,y;for(a in n=Pce.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(t),m={0:0},y=n.charMap)m[(c=y[a]).old]=c.new;for(g in h=n.maxGlyphID,i)g in m||(m[g]=h++);return d=function(w){var _,T;for(_ in T={},w)T[w[_]]=_;return T}(m),f=Object.keys(d).sort(function(w,_){return w-_}),x=function(){var w,_,T;for(T=[],w=0,_=f.length;w<_;w++)o=f[w],T.push(d[o]);return T}(),s=this.font.glyf.encode(i,x,m),u=this.font.loca.encode(s.offsets,x),v={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(v["OS/2"]=this.font.os2.raw()),this.font.directory.encode(v)},e}();br.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,s,i;if(Array.isArray(r))return"["+function(){var o,c,u;for(u=[],o=0,c=r.length;o<c;o++)n=r[o],u.push(t.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)i=r[a],s.push("/"+a+" "+t.convert(i));return s.push(">>"),s.join(`
`)}return""+r},t}();function Lce(e,t,r,n,a){n=n||{};var s=1.15,i=a.internal.scaleFactor,o=a.internal.getFontSize()/i,c=a.getLineHeightFactor?a.getLineHeightFactor():s,u=o*c,d=/\r\n|\r|\n/g,f="",h=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof e=="string"?e.split(d):e,h=f.length||1),r+=o*(2-s),n.valign==="middle"?r-=h/2*u:n.valign==="bottom"&&(r-=h*u),n.halign==="center"||n.halign==="right"){var m=o;if(n.halign==="center"&&(m*=.5),f&&h>=1){for(var g=0;g<f.length;g++)a.text(f[g],t-a.getStringUnitWidth(f[g])*m,r),r+=u;return a}t-=a.getStringUnitWidth(e)*m}return n.halign==="justify"?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}var ZW={},N1=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:ZW=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,a,s;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var i=this.jsPDFDocument.internal.getFont(),o=i.fontStyle,c=i.fontName;if(t.font&&(c=t.font),t.fontStyle){o=t.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(c,o),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var d=e.unifyColor(t.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=e.unifyColor(t.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=e.unifyColor(t.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,a,s){return this.jsPDFDocument.rect(t,r,n,a,s)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return ZW||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),aP=function(e,t){return aP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},aP(e,t)};function Mce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");aP(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Uce=function(e){Mce(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function Sze(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function Nze(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function E4(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,i){return Math.max(s,i)},0);return a}function Qce(e,t,r,n){var a=t.settings.tableLineWidth,s=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:s});var i=Hce(a,!1);i&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,i)}function Hce(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function aT(e,t){var r,n,a,s;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(s=e.bottom)!==null&&s!==void 0?s:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function Vce(e,t){var r=aT(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function kze(e,t,r,n,a){var s={},i=1.3333333333333333,o=Q6(t,function(_){return a.getComputedStyle(_).backgroundColor});o!=null&&(s.fillColor=o);var c=Q6(t,function(_){return a.getComputedStyle(_).color});c!=null&&(s.textColor=c);var u=Tze(n,r);u&&(s.cellPadding=u);var d="borderTopColor",f=i*r,h=n.borderTopWidth;if(n.borderBottomWidth===h&&n.borderRightWidth===h&&n.borderLeftWidth===h){var m=(parseFloat(h)||0)/f;m&&(s.lineWidth=m)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var g=Q6(t,function(_){return a.getComputedStyle(_)[d]});g!=null&&(s.lineColor=g);var x=["left","right","center","justify"];x.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),x=["middle","bottom","top"],x.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var v=parseInt(n.fontSize||"");isNaN(v)||(s.fontSize=v/i);var y=Bze(n);y&&(s.fontStyle=y);var w=(n.fontFamily||"").toLowerCase();return e.indexOf(w)!==-1&&(s.font=w),s}function Bze(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function Q6(e,t){var r=zce(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function zce(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:zce(e.parentElement,t):r}function Tze(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,s=r.map(function(o){return parseInt(o||"0")/n}),i=aT(s,0);return a>i.top&&(i.top=a),a>i.bottom&&(i.bottom=a),i}function $ce(e,t,r,n,a){var s,i;n===void 0&&(n=!1),a===void 0&&(a=!1);var o;typeof t=="string"?o=r.document.querySelector(t):o=t;var c=Object.keys(e.getFontList()),u=e.scaleFactor(),d=[],f=[],h=[];if(!o)return console.error("Html table could not be found with input: ",t),{head:d,body:f,foot:h};for(var m=0;m<o.rows.length;m++){var g=o.rows[m],x=(i=(s=g==null?void 0:g.parentElement)===null||s===void 0?void 0:s.tagName)===null||i===void 0?void 0:i.toLowerCase(),v=jze(c,u,r,g,n,a);v&&(x==="thead"?d.push(v):x==="tfoot"?h.push(v):f.push(v))}return{head:d,body:f,foot:h}}function jze(e,t,r,n,a,s){for(var i=new Uce(n),o=0;o<n.cells.length;o++){var c=n.cells[o],u=r.getComputedStyle(c);if(a||u.display!=="none"){var d=void 0;s&&(d=kze(e,c,t,u,r)),i.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:Ize(c)})}}var f=r.getComputedStyle(n);if(i.length>0&&(a||f.display!=="none"))return i}function Ize(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function Fze(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var s=a[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function jh(e,t,r,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(e),i=1;i<arguments.length;i++){var o=arguments[i];if(o!=null)for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(s[c]=o[c])}return s}function Gce(e,t){var r=new N1(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();Fze(a,n,t);var s=jh({},a,n,t),i;typeof window<"u"&&(i=window);var o=Oze(a,n,t),c=Dze(a,n,t),u=Pze(r,s),d=Lze(r,s,i);return{id:t.tableId,content:d,hooks:c,styles:o,settings:u}}function Oze(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var u=e[c],d=t[c],f=r[c];n.columnStyles=jh({},u,d,f)}else{var h=[e,t,r],m=h.map(function(g){return g[c]||{}});n[c]=jh({},m[0],m[1],m[2])}},s=0,i=Object.keys(n);s<i.length;s++){var o=i[s];a(o)}return n}function Dze(e,t,r){for(var n=[e,t,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,i=n;s<i.length;s++){var o=i[s];o.didParseCell&&a.didParseCell.push(o.didParseCell),o.willDrawCell&&a.willDrawCell.push(o.willDrawCell),o.didDrawCell&&a.didDrawCell.push(o.didDrawCell),o.willDrawPage&&a.willDrawPage.push(o.willDrawPage),o.didDrawPage&&a.didDrawPage.push(o.didDrawPage)}return a}function Pze(e,t){var r,n,a,s,i,o,c,u,d,f,h,m,g=aT(t.margin,40/e.scaleFactor()),x=(r=Rze(e,t.startY))!==null&&r!==void 0?r:g.top,v;t.showFoot===!0?v="everyPage":t.showFoot===!1?v="never":v=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var y;t.showHead===!0?y="everyPage":t.showHead===!1?y="never":y=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var w=(s=t.useCss)!==null&&s!==void 0?s:!1,_=t.theme||(w?"plain":"striped"),T=!!t.horizontalPageBreak,B=(i=t.horizontalPageBreakRepeat)!==null&&i!==void 0?i:null;return{includeHiddenHtml:(o=t.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:w,theme:_,startY:x,margin:g,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=t.tableWidth)!==null&&d!==void 0?d:"auto",showHead:y,showFoot:v,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(h=t.tableLineColor)!==null&&h!==void 0?h:200,horizontalPageBreak:T,horizontalPageBreakRepeat:B,horizontalPageBreakBehaviour:(m=t.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function Rze(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),s=!1;if(r&&r.startPageNumber){var i=r.startPageNumber+r.pageNumber-1;s=i===a}return typeof t=="number"?t:(t==null||t===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function Lze(e,t,r){var n=t.head||[],a=t.body||[],s=t.foot||[];if(t.html){var i=t.includeHiddenHtml;if(r){var o=$ce(e,t.html,r,i,t.useCss)||{};n=o.head||n,a=o.body||n,s=o.foot||n}else console.error("Cannot parse html in non browser environment")}var c=t.columns||Mze(n,a,s);return{columns:c,head:n,body:a,foot:s}}function Mze(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var i=1,o;Array.isArray(n)?o=n[parseInt(s)]:o=n[s],typeof o=="object"&&!Array.isArray(o)&&(i=(o==null?void 0:o.colSpan)||1);for(var c=0;c<i;c++){var u=void 0;Array.isArray(n)?u=a.length:u=s+(c>0?"_".concat(c):"");var d={dataKey:u};a.push(d)}}),a}var sP=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),Uze=function(e){Mce(t,e);function t(r,n,a,s,i,o){var c=e.call(this,r,n,o)||this;return c.cell=a,c.row=s,c.column=i,c.section=s.section,c}return t}(sP),Qze=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,a,s,i){for(var o=0,c=r;o<c.length;o++){var u=c[o],d=new Uze(t,this,n,a,s,i),f=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var s=a[n];s(new sP(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var s=a[n];s(new sP(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,s){return a+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),Kce=function(){function e(t,r,n,a,s){s===void 0&&(s=!1),this.height=0,this.raw=t,t instanceof Uce&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=s}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,a){var s;return Math.max(n,((s=r.cells[a.index])===null||s===void 0?void 0:s.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(a,s){var i=n.cells[s.index];if(!i)return 0;var o=r.getLineHeight(i.styles.fontSize),c=i.padding("vertical"),u=c+o;return u>a?u:a},0)},e}(),qce=function(){function e(t,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var s=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,s=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var i=s!=null?""+s:"",o=/\r\n|\r|\n/g;this.text=i.split(o)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*r,s=n*a+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=aT(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),Hze=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,a=t.allRows();n<a.length;n++){var s=a[n],i=s.cells[this.index];i&&typeof i.styles.cellWidth=="number"&&(r=Math.max(r,i.styles.cellWidth))}return r},e}();function Vze(e,t){zze(e,t);var r=[],n=0;t.columns.forEach(function(s){var i=s.getMaxCustomCellWidth(t);i?s.width=i:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=iP(r,a,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),a&&(a=iP(r,a,function(s){return s.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),Gze(t),Kze(t,e),$ze(t)}function zze(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=Vce(e,t);t.allRows().forEach(function(s){for(var i=0,o=t.columns;i<o.length;i++){var c=o[i],u=s.cells[c.index];if(u){var d=t.hooks.didParseCell;t.callCellHooks(e,d,u,s,c,null);var f=u.padding("horizontal");u.contentWidth=E4(u.text,u.styles,e)+f;var h=E4(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=h+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var m=10/r;u.minWidth=u.styles.minCellWidth||m,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(s){for(var i=0,o=t.columns;i<o.length;i++){var c=o[i],u=s.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function iP(e,t,r){for(var n=t,a=e.reduce(function(m,g){return m+g.wrappedWidth},0),s=0;s<e.length;s++){var i=e[s],o=i.wrappedWidth/a,c=n*o,u=i.width+c,d=r(i),f=u<d?d:u;t-=f-i.width,i.width=f}if(t=Math.round(t*1e10)/1e10,t){var h=e.filter(function(m){return t<0?m.width>r(m):!0});h.length&&(t=iP(h,t,r))}return t}function $ze(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var s=n[a],i=0,o=e.columns;i<o.length;i++){var c=o[i],u=t[c.index];if(r>1)r--,delete s.cells[c.index];else if(u)u.cell.height+=s.height,r=u.cell.colSpan,delete s.cells[c.index],u.left--,u.left<=1&&delete t[c.index];else{var d=s.cells[c.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var f=n.length-a,h=d.rowSpan>f?f:d.rowSpan;t[c.index]={cell:d,left:h,row:s}}}}}function Gze(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,s=0,i=0,o=0;o<e.columns.length;o++){var c=e.columns[o];if(i-=1,i>1&&e.columns[o+1])s+=c.width,delete n.cells[c.index];else if(a){var u=a;delete n.cells[c.index],a=null,u.width=c.width+s}else{var u=n.cells[c.index];if(!u)continue;if(i=u.colSpan,s=0,u.colSpan>1){a=u,s+=c.width;continue}u.width=c.width+s}}}function Kze(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var s=a[n],i=0,o=e.columns;i<o.length;i++){var c=o[i],u=s.cells[c.index];if(u){t.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,d+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=eX(u.text,d,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=eX(u.text,d,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var h=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<h*u.rowSpan?r={height:h,count:u.rowSpan}:r&&r.count>0&&r.height>h&&(h=r.height),h>s.height&&(s.height=h)}}r.count--}}function eX(e,t,r,n,a){return e.map(function(s){return qze(s,t,r,n,a)})}function qze(e,t,r,n,a){var s=1e4*n.scaleFactor();if(t=Math.ceil(t*s)/s,t>=E4(e,r,n))return e;for(;t<E4(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function Wce(e,t){var r=new N1(e),n=Wze(t,r.scaleFactor()),a=new Qze(t,n);return Vze(r,a),r.applyStyles(r.userStyles),a}function Wze(e,t){var r=e.content,n=Yze(r.columns);if(r.head.length===0){var a=tX(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=tX(n,"foot");a&&r.foot.push(a)}var s=e.settings.theme,i=e.styles;return{columns:n,head:H6("head",r.head,n,i,s,t),body:H6("body",r.body,n,i,s,t),foot:H6("foot",r.foot,n,i,s,t)}}function H6(e,t,r,n,a,s){var i={},o=t.map(function(c,u){for(var d=0,f={},h=0,m=0,g=0,x=r;g<x.length;g++){var v=x[g];if(i[v.index]==null||i[v.index].left===0)if(m===0){var y=void 0;Array.isArray(c)?y=c[v.index-h-d]:y=c[v.dataKey];var w={};typeof y=="object"&&!Array.isArray(y)&&(w=(y==null?void 0:y.styles)||{});var _=Jze(e,v,u,a,n,s,w),T=new qce(y,_,e);f[v.dataKey]=T,f[v.index]=T,m=T.colSpan-1,i[v.index]={left:T.rowSpan-1,times:m}}else m--,h++;else i[v.index].left--,m=i[v.index].times,d++}return new Kce(c,u,e,f)});return o}function tX(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var a=Xze(t,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function Xze(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function Yze(e){return e.map(function(t,r){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:r:a=r,new Hze(a,t,r)})}function Jze(e,t,r,n,a,s,i){var o=Nze(n),c;e==="head"?c=a.headStyles:e==="body"?c=a.bodyStyles:e==="foot"&&(c=a.footStyles);var u=jh({},o.table,o[e],a.styles,c),d=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},f=e==="body"?d:{},h=e==="body"&&r%2===0?jh({},o.alternateRow,a.alternateRowStyles):{},m=Sze(s),g=jh({},m,u,h,f);return jh(g,i)}function Zze(e,t,r){var n;r===void 0&&(r={});var a=Vce(e,t),s=new Map,i=[],o=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(h){var m=t.columns.find(function(g){return g.dataKey===h||g.index===h});m&&!s.has(m.index)&&(s.set(m.index,!0),i.push(m.index),o.push(t.columns[m.index]),a-=m.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<t.columns.length;){if(s.has(d)){d++;continue}var f=t.columns[d].wrappedWidth;if(u||a>=f)u=!1,i.push(d),o.push(t.columns[d]),a-=f;else break;d++}return{colIndexes:i,columns:o,lastIndex:d-1}}function e$e(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=Zze(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function Xce(e,t){var r=t.settings,n=r.startY,a=r.margin,s={x:a.left,y:n},i=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),o=n+a.bottom+i;if(r.pageBreak==="avoid"){var c=t.body,u=c.reduce(function(h,m){return h+m.height},0);o+=u}var d=new N1(e);(r.pageBreak==="always"||r.startY!=null&&o>d.pageSize().height)&&(Jce(d),s.y=a.top),t.callWillDrawPageHooks(d,s);var f=jh({},s);t.startPageNumber=d.pageNumber(),r.horizontalPageBreak?t$e(d,t,f,s):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(h){return n0(d,t,h,s,t.columns)}),d.applyStyles(d.userStyles),t.body.forEach(function(h,m){var g=m===t.body.length-1;C4(d,t,h,g,f,s,t.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(h){return n0(d,t,h,s,t.columns)})),Qce(d,t,f,s),t.callEndPageHooks(d,s),t.finalY=s.y,e.lastAutoTable=t,d.applyStyles(d.userStyles)}function t$e(e,t,r,n){var a=e$e(e,t),s=t.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){e.applyStyles(e.userStyles),d>0?f2(e,t,r,n,u.columns,!0):rX(e,t,n,u.columns),r$e(e,t,r,n,u.columns),V6(e,t,n,u.columns)});else for(var i=-1,o=a[0],c=function(){var u=i;if(o){e.applyStyles(e.userStyles);var d=o.columns;i>=0?f2(e,t,r,n,d,!0):rX(e,t,n,d),u=nX(e,t,i+1,n,d),V6(e,t,n,d)}var f=u-i;a.slice(1).forEach(function(h){e.applyStyles(e.userStyles),f2(e,t,r,n,h.columns,!0),nX(e,t,i+1,n,h.columns,f),V6(e,t,n,h.columns)}),i=u};i<t.body.length-1;)c()}function rX(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(s){return n0(e,t,s,r,n)})}function r$e(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(s,i){var o=i===t.body.length-1;C4(e,t,s,o,r,n,a)})}function nX(e,t,r,n,a,s){e.applyStyles(e.userStyles),s=s??t.body.length;var i=Math.min(r+s,t.body.length),o=-1;return t.body.slice(r,i).forEach(function(c,u){var d=r+u===t.body.length-1,f=Yce(e,t,d,n);c.canEntireRowFit(f,a)&&(n0(e,t,c,n,a),o=r+u)}),o}function V6(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(s){return n0(e,t,s,r,n)})}function n$e(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),s=Math.floor((t-a)/n);return Math.max(0,s)}function a$e(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var s=0,i=0,o=r.columns;i<o.length;i++){var c=o[i],u=e.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new qce(u.raw,u.styles,u.section);d=jh(d,u),d.text=[];var f=n$e(u,t,n);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var h=n.scaleFactor(),m=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(h,m),u.contentHeight>=t&&(u.contentHeight=t,d.styles.minCellHeight-=t),u.contentHeight>e.height&&(e.height=u.contentHeight),d.contentHeight=d.getContentHeight(h,m),d.contentHeight>s&&(s=d.contentHeight),a[c.index]=d}}var g=new Kce(e.raw,-1,e.section,a,!0);g.height=s;for(var x=0,v=r.columns;x<v.length;x++){var c=v[x],d=g.cells[c.index];d&&(d.height=g.height);var u=e.cells[c.index];u&&(u.height=e.height)}return g}function s$e(e,t,r,n){var a=e.pageSize().height,s=n.settings.margin,i=s.top+s.bottom,o=a-i;t.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=t.getMinimumRowHeight(n.columns,e),u=c<r;if(c>o)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=t.hasRowSpan(n.columns),f=t.getMaxCellHeight(n.columns)>o;return f?(d&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function C4(e,t,r,n,a,s,i){var o=Yce(e,t,n,s);if(r.canEntireRowFit(o,i))n0(e,t,r,s,i);else if(s$e(e,r,o,t)){var c=a$e(r,o,t,e);n0(e,t,r,s,i),f2(e,t,a,s,i),C4(e,t,c,n,a,s,i)}else f2(e,t,a,s,i),C4(e,t,r,n,a,s,i)}function n0(e,t,r,n,a){n.x=t.settings.margin.left;for(var s=0,i=a;s<i.length;s++){var o=i[s],c=r.cells[o.index];if(!c){n.x+=o.width;continue}e.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=t.callCellHooks(e,t.hooks.willDrawCell,c,r,o,n);if(u===!1){n.x+=o.width;continue}i$e(e,c,n);var d=c.getTextPos();Lce(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,r,o,n),n.x+=o.width}n.y+=r.height}function i$e(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=Hce(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),o$e(e,t,r,n.lineWidth))}function o$e(e,t,r,n){var a,s,i,o;n.top&&(a=r.x,s=r.y,i=r.x+t.width,o=r.y,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,s,i,o)),n.bottom&&(a=r.x,s=r.y+t.height,i=r.x+t.width,o=r.y+t.height,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,s,i,o)),n.left&&(a=r.x,s=r.y,i=r.x,o=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.left,a,s,i,o)),n.right&&(a=r.x+t.width,s=r.y,i=r.x+t.width,o=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.right,a,s,i,o));function c(u,d,f,h,m){e.getDocument().setLineWidth(u),e.getDocument().line(d,f,h,m,"S")}}function Yce(e,t,r,n){var a=t.settings.margin.bottom,s=t.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function f2(e,t,r,n,a,s){a===void 0&&(a=[]),s===void 0&&(s=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!s&&t.foot.forEach(function(o){return n0(e,t,o,n,a)}),t.callEndPageHooks(e,n);var i=t.settings.margin;Qce(e,t,r,n),Jce(e),t.pageNumber++,n.x=i.left,n.y=i.top,r.y=i.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(o){return n0(e,t,o,n,a)}),e.applyStyles(e.userStyles))}function Jce(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function l$e(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=Gce(this,n),s=Wce(this,a);return Xce(this,s),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,a){Lce(t,r,n,a,this)},e.API.autoTableSetDefaults=function(t){return N1.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){N1.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new N1(this),s=$ce(a,t,window,r,!1),i=s.head,o=s.body,c=((n=i[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:o,data:o}}}var z6;function Io(e,t){var r=Gce(e,t),n=Wce(e,r);Xce(e,n)}try{if(typeof window<"u"&&window){var aX=window,sX=aX.jsPDF||((z6=aX.jspdf)===null||z6===void 0?void 0:z6.jsPDF);sX&&l$e(sX)}}catch(e){console.error("Could not apply autoTable plugin",e)}const vU="evaluaciones_pruebas",bU="evaluaciones_rubricas_estaticas",yU="evaluaciones_rubricas_interactivas",c$e="usuarios",sT=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion}},u$e=e=>{const t=$t(wt(ht,vU),xr("fechaCreacion","desc"));return pr(t,n=>{e(n.docs.map(a=>sT(a)))},n=>{console.error("Error al suscribirse a las pruebas:",n),e([])})},d$e=async e=>{try{const{id:t,...r}=e,n=cr(ht,vU,t);await Mi(n,{...r,fechaCreacion:ir.fromDate(new Date(r.fechaCreacion))})}catch(t){throw console.error("Error al guardar la prueba:",t),new Error("No se pudo guardar la prueba.")}},f$e=async e=>{try{await is(cr(ht,vU,e))}catch(t){throw console.error("Error al eliminar la prueba:",t),new Error("No se pudo eliminar la prueba.")}},A$e=e=>{const t=$t(wt(ht,bU),xr("fechaCreacion","desc"));return pr(t,n=>{e(n.docs.map(a=>sT(a)))},n=>{console.error("Error al suscribirse a las rúbricas estáticas:",n),e([])})},h$e=async e=>{try{const{id:t,...r}=e,n=cr(ht,bU,t);await Mi(n,{...r,fechaCreacion:ir.fromDate(new Date(r.fechaCreacion))})}catch(t){throw console.error("Error al guardar la rúbrica estática:",t),new Error("No se pudo guardar la rúbrica.")}},m$e=async e=>{try{await is(cr(ht,bU,e))}catch(t){throw console.error("Error al eliminar la rúbrica estática:",t),new Error("No se pudo eliminar la rúbrica.")}},p$e=e=>{const t=$t(wt(ht,yU));return pr(t,n=>{e(n.docs.map(a=>sT(a)))},n=>{console.error("Error al suscribirse a las rúbricas interactivas:",n),e([])})},g$e=async e=>{try{const{id:t,...r}=e,n=cr(ht,yU,t);await Mi(n,r)}catch(t){throw console.error("Error al guardar la rúbrica interactiva:",t),new Error("No se pudo guardar la rúbrica interactiva.")}},x$e=async e=>{try{return(await _n(wt(ht,yU),e)).id}catch(t){throw console.error("Error al crear la rúbrica interactiva:",t),new Error("No se pudo crear la rúbrica interactiva.")}},v$e=e=>{const t=$t(wt(ht,c$e));return pr(t,n=>{e(n.docs.map(a=>sT(a)))},n=>{console.error("Error al suscribirse a los usuarios:",n),e([])})},b$e=["Selección múltiple","Verdadero o Falso","Desarrollo","Términos pareados","Comprensión de lectura"],iX={"Selección múltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Términos pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de lectura":[1,2,3]},IS=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},y$e=({open:e})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59"}):l.jsxs(l.Fragment,{children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),w$e=({item:e,index:t,showAnswers:r})=>{const n=S.useMemo(()=>e.tipo==="Términos pareados"?[...e.pares.map(a=>a.definicion)].sort(()=>Math.random()-.5):[],[e]);return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[t+1,". ",e.pregunta," (",e.puntaje," pts)"]}),e.habilidadBloom&&l.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:e.habilidadBloom})]}),e.tipo==="Selección múltiple"&&l.jsx("div",{className:"ml-4 mt-2 space-y-2",children:e.opciones.map((a,s)=>{const i=r&&s===e.respuestaCorrecta;return l.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${i?"bg-green-100 dark:bg-green-900/50":""}`,children:[l.jsx("div",{className:"w-5 h-5 border rounded-full"}),l.jsxs("span",{children:[String.fromCharCode(65+s),") ",a]})]},s)})}),e.tipo==="Desarrollo"&&l.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"}),e.tipo==="Verdadero o Falso"&&l.jsxs("div",{className:"mt-2 ml-4 flex items-center gap-4",children:[l.jsx("span",{children:"V ___ F ___"}),r&&l.jsxs("span",{className:"font-bold p-1 rounded bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300",children:["Respuesta: ",e.respuestaCorrecta?"VERDADERO":"FALSO"]})]}),e.tipo==="Términos pareados"&&l.jsxs("div",{className:"mt-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna A: Concepto"}),l.jsx("div",{className:"space-y-2",children:e.pares.map((a,s)=>l.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-3 rounded-lg min-h-[50px] flex items-center",children:[s+1,". ",a.concepto]},s))})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna B: Definición"}),l.jsx("div",{className:"space-y-2",children:n.map((a,s)=>l.jsx("div",{className:"bg-sky-100 dark:bg-sky-900/50 p-3 rounded-lg min-h-[50px] flex items-center",children:a},s))})]})]}),r&&l.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-700",children:[l.jsx("h4",{className:"font-bold text-green-800 dark:text-green-200",children:"Respuestas Correctas:"}),l.jsx("ul",{className:"list-disc list-inside mt-2 text-sm text-slate-700 dark:text-slate-300",children:e.pares.map((a,s)=>l.jsxs("li",{children:[l.jsx("strong",{children:a.concepto})," → ",a.definicion]},s))})]})]}),e.tipo==="Comprensión de lectura"&&l.jsxs("div",{className:"ml-4 mt-2 space-y-4",children:[l.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700/50 rounded-md whitespace-pre-wrap",children:e.texto}),e.preguntas.map((a,s)=>{if(a.tipo==="Selección múltiple"){const i=a;return l.jsxs("div",{className:"pt-2",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&l.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),l.jsx("div",{className:"ml-4 mt-2 space-y-2",children:i.opciones.map((o,c)=>{const u=r&&c===i.respuestaCorrecta;return l.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${u?"bg-green-100 dark:bg-green-900/50":""}`,children:[l.jsx("div",{className:"w-5 h-5 border rounded-full"}),l.jsxs("span",{children:[String.fromCharCode(65+c),") ",o]})]},c)})})]},a.id)}if(a.tipo==="Desarrollo"){const i=a;return l.jsxs("div",{className:"pt-2",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&l.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),l.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"})]},a.id)}return null})]})]},e.id)},E$e=()=>{const[e,t]=S.useState([]),[r,n]=S.useState(null),[a,s]=S.useState(!1),[i,o]=S.useState(!1),[c,u]=S.useState(null),[d,f]=S.useState(!1),h={nombre:"",asignatura:jo[0],nivel:ZV[0],contenido:"",tiposActividad:{},dificultad:"Intermedio",isNee:!1,selectedNee:[]},[m,g]=S.useState(h);S.useEffect(()=>{const E=u$e(t);return()=>E()},[]);const x=E=>{const{name:N,value:I}=E.target;g(L=>({...L,[N]:I}))},v=E=>{g(N=>{const I={...N.tiposActividad};return I[E]?delete I[E]:I[E]=iX[E][0],{...N,tiposActividad:I}})},y=(E,N)=>{g(I=>({...I,tiposActividad:{...I.tiposActividad,[E]:N}}))},w=E=>{g(N=>{const I=N.selectedNee.includes(E)?N.selectedNee.filter(L=>L!==E):[...N.selectedNee,E];return{...N,selectedNee:I}})},_=async E=>{if(E.preventDefault(),!m.nombre.trim()||!m.contenido.trim()||Object.keys(m.tiposActividad).length===0){u("Nombre, Contenido y al menos un tipo de actividad son obligatorios.");return}s(!0),u(null);const N=Object.entries(m.tiposActividad).map(([D,k])=>`- ${k} ítem(s) de tipo '${D}'`).join(`
`),I=m.isNee&&m.selectedNee.length>0?`
            **Adaptación CRÍTICA para Necesidades Educativas Especiales (NEE):**
            Adapta esta prueba para estudiantes con las siguientes características: ${m.selectedNee.join(", ")}.
            Esto implica las siguientes modificaciones OBLIGATORIAS:
            - Usa un lenguaje claro, simple y directo en todas las preguntas e instrucciones.
            - Evita preguntas con doble negación o estructuras gramaticales complejas.
            - En preguntas de desarrollo, desglosa la pregunta en partes más pequeñas si es posible.
            - Para 'Comprensión de Lectura', usa textos más cortos (100-150 palabras) y con vocabulario accesible.
            - Para 'Selección Múltiple', asegúrate de que los distractores sean claramente incorrectos y no ambiguos.`:"",L=`
            Eres un experto en evaluación educativa para la educación media en Chile.
            Genera una prueba o guía de trabajo completa en formato JSON estructurado.
            
            Información base:
            - Nombre de la prueba: ${m.nombre}
            - Asignatura: ${m.asignatura}
            - Nivel: ${m.nivel}
            - Contenido a evaluar: "${m.contenido}"
            - Tipos y cantidad de ítems solicitados:
              ${N}
            - Nivel de Dificultad General: ${m.dificultad}. 'Fácil' implica preguntas directas y de recuerdo. 'Intermedio' incluye aplicación y análisis simple. 'Avanzado' requiere síntesis, evaluación y resolución de problemas complejos.
            
            ${I}

            Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json. El objeto debe contener:
            1. 'objetivo': Un objetivo de aprendizaje claro para la evaluación.
            2. 'instruccionesGenerales': Instrucciones claras para el estudiante.
            3. 'actividades': Un array de objetos, donde cada objeto es una actividad por cada tipo de ítem solicitado. Cada actividad debe tener:
               - 'id': Un UUID generado por ti.
               - 'titulo': Un título descriptivo (ej: "Actividad 1: Selección Múltiple").
               - 'instrucciones': Instrucciones para esa actividad específica.
               - 'items': Un array de preguntas con la cantidad exacta solicitada. Cada pregunta (item) debe tener:
                   - 'id': Un UUID generado por ti.
                   - 'tipo': El tipo de ítem.
                   - 'pregunta': El enunciado de la pregunta.
                   - 'puntaje': Un puntaje numérico.
                   - 'habilidadBloom': La habilidad principal de la Taxonomía de Bloom que se trabaja (ej: Analizar, Crear, Evaluar).
                   - Campos adicionales según el tipo:
                       - Para 'Selección múltiple': 'opciones' (array de EXACTAMENTE 4 strings sin la letra de la alternativa) y 'respuestaCorrecta' (índice numérico de la respuesta correcta, de 0 a 3).
                       - Para 'Verdadero o Falso': 'respuestaCorrecta' (booleano).
                       - Para 'Términos pareados': 'pares' (array de objetos con 'concepto' y 'definicion').
                       - Para 'Comprensión de lectura': 'texto' (un string que DEBE contener un texto original y coherente de 150 a 250 palabras, generado por ti, sobre el contenido a evaluar) y 'preguntas' (un array de sub-preguntas basadas en el texto que acabas de generar, las cuales pueden ser 'Selección múltiple' o 'Desarrollo', y cada una debe tener su propia 'id', 'pregunta', 'puntaje', 'habilidadBloom', etc.).
                       - Para 'Desarrollo': no necesita campos adicionales.
        `;try{cb("Evaluación - Pruebas");const D="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",G=(await(await new ps(D).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(L)).response).text().replace(/^```json\s*|```\s*$/g,""),z=JSON.parse(G);let K=0;z.actividades.forEach(te=>{te.items.forEach(M=>{K+=M.puntaje||0,M.tipo==="Comprensión de lectura"&&M.preguntas&&M.preguntas.forEach(H=>{K+=H.puntaje||0})})});const J={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:m.nombre,asignatura:m.asignatura,nivel:m.nivel,contenidoOriginal:m.contenido,tiposActividadOriginal:m.tiposActividad,objetivo:z.objetivo,instruccionesGenerales:z.instruccionesGenerales,puntajeIdeal:K,actividades:z.actividades,dificultad:m.dificultad,...m.isNee&&{adaptacionNEE:m.selectedNee}};n(J),f(!1)}catch(D){console.error(D),u("Error al generar la prueba con IA. Revisa la consola para más detalles.")}finally{s(!1)}},T=async()=>{if(r)try{await d$e(r),alert("Prueba guardada con éxito.")}catch(E){console.error(E),alert("No se pudo guardar la prueba.")}},B=async E=>{if(window.confirm("¿Eliminar esta prueba?"))try{await f$e(E),(r==null?void 0:r.id)===E&&n(null)}catch(N){console.error(N),alert("No se pudo eliminar la prueba.")}},j=async E=>{o(!0);const N=new br("p","mm","a4"),I=20,L=N.internal.pageSize.getHeight(),D=N.internal.pageSize.getWidth(),k=D-I*2;let P=I;const R=G=>{G.setFillColor(230,230,230),G.rect(0,0,D,25,"F"),G.setFontSize(9),G.setTextColor(0,0,0),G.text("LICEO INDUSTRIAL DE RECOLETA",I,15,{align:"left"}),G.text("SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA",D-I,15,{align:"right"})};R(N),P=30,N.setTextColor(0,0,0),N.setFont("helvetica","bold"),N.setFontSize(16),N.text(E.nombre,D/2,P,{align:"center"}),P+=10,Io(N,{startY:P,body:[[{content:"Asignatura:",styles:{fontStyle:"bold"}},E.asignatura,{content:"Puntaje Ideal:",styles:{fontStyle:"bold"}},E.puntajeIdeal.toString()],[{content:"Nivel:",styles:{fontStyle:"bold"}},E.nivel,"",""],[{content:"OA:",styles:{fontStyle:"bold",valign:"top"}},{content:E.objetivo,colSpan:3}],[{content:"Instrucciones:",styles:{fontStyle:"bold",valign:"top"}},{content:E.instruccionesGenerales,colSpan:3}]],theme:"grid",styles:{fontSize:10,cellPadding:2,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},columnStyles:{0:{cellWidth:30},2:{cellWidth:30}},didDrawPage:G=>{R(N)}}),P=N.lastAutoTable.finalY+10;const W=G=>{P+G>L-I&&(N.addPage(),R(N),P=I+15,N.setTextColor(0,0,0))},V=(G,z)=>{N.setFont("helvetica",z.isBold?"bold":"normal"),N.setFontSize(z.fontSize);const K=Array.isArray(G)?G.join(`
`):G;return N.getTextDimensions(K,{maxWidth:z.width}).h};for(const G of E.actividades){let z=V(G.titulo,{fontSize:12,width:k,isBold:!0})+V(G.instrucciones,{fontSize:10,width:k})+12;W(z),N.setFont("helvetica","bold"),N.setFontSize(12),N.setTextColor(0,0,0),N.text(G.titulo,I,P),P+=8,N.setFont("helvetica","normal"),N.setFontSize(10);const K=N.splitTextToSize(G.instrucciones,k);N.text(K,I,P),P+=K.length*(10*.35*1.15)+4;for(const[J,te]of G.items.entries()){let M=0;const H=`${J+1}. ${te.pregunta} (${te.puntaje} pts)`;switch(M+=V(H,{fontSize:10,width:k,isBold:!0}),te.tipo){case"Selección múltiple":te.opciones.forEach(ae=>{M+=V(ae,{fontSize:10,width:k-5})+3}),M+=7;break;case"Verdadero o Falso":M+=10;break;case"Desarrollo":M+=30;break;case"Términos pareados":M+=te.pares.length*12+20;break;case"Comprensión de lectura":const Z=te;M+=V(Z.texto,{fontSize:10,width:k-10})+10,Z.preguntas.forEach(ae=>{const le=`${ae.pregunta} (${ae.puntaje} pts)`;M+=V(le,{fontSize:10,width:k-5,isBold:!0}),ae.tipo==="Selección múltiple"?(ae.opciones.forEach(ie=>{M+=V(ie,{fontSize:10,width:k-10})+3}),M+=7):ae.tipo==="Desarrollo"&&(M+=30),M+=5}),M+=15;break}W(M),N.setFont("helvetica","bold"),N.setFontSize(10),N.setTextColor(0,0,0);const Y=N.splitTextToSize(H,k);if(N.text(Y,I,P),P+=Y.length*5+4,N.setFont("helvetica","normal"),te.tipo==="Selección múltiple")te.opciones.forEach((Z,ae)=>{N.text(`${String.fromCharCode(65+ae)}) ${Z}`,I+5,P),P+=7});else if(te.tipo==="Verdadero o Falso")N.text("V ______    F ______",I+5,P),P+=10;else if(te.tipo==="Desarrollo")N.setDrawColor(200,200,200),N.setFillColor(245,245,245),N.rect(I,P,k,25,"FD"),P+=30;else if(te.tipo==="Términos pareados"){const Z=[...te.pares.map(le=>le.definicion)].sort(()=>Math.random()-.5),ae=te.pares.map((le,ie)=>[`${ie+1}. ${le.concepto}`,`(   ) ${Z[ie]}`]);Io(N,{startY:P,head:[["Columna A: Concepto","Columna B: Definición"]],body:ae,theme:"grid",styles:{fontSize:9,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},headStyles:{fontStyle:"bold",fillColor:[230,230,230],textColor:[0,0,0]},didDrawPage:le=>R(N)}),P=N.lastAutoTable.finalY+10}else if(te.tipo==="Comprensión de lectura"){const Z=te;N.setFillColor(240,240,240),N.setDrawColor(200,200,200);const ae=N.splitTextToSize(Z.texto,k-10),le=ae.length*(10*.35*1.15)+8;N.rect(I,P,k,le,"FD"),P+=4,N.setFont("helvetica","normal"),N.setFontSize(10),N.setTextColor(0,0,0),N.text(ae,I+5,P),P+=le;for(const[ie,ce]of Z.preguntas.entries()){const Ae=`${ie+1}. ${ce.pregunta} (${ce.puntaje} pts)`;N.setFont("helvetica","bold");const Fe=N.splitTextToSize(Ae,k-5);N.text(Fe,I+5,P),P+=Fe.length*5+4,N.setFont("helvetica","normal"),ce.tipo==="Selección múltiple"?ce.opciones.forEach((ne,_e)=>{N.text(`${String.fromCharCode(65+_e)}) ${ne}`,I+10,P),P+=7}):ce.tipo==="Desarrollo"&&(N.setDrawColor(200,200,200),N.setFillColor(245,245,245),N.rect(I+5,P,k-5,25,"FD"),P+=30)}}P+=5}}N.save(`${E.nombre.replace(/\s/g,"_")}.pdf`),o(!1)};return r?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("button",{onClick:()=>n(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>f(!d),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[l.jsx(y$e,{open:!d})," ",l.jsxs("span",{children:[d?"Ocultar":"Mostrar"," Respuestas"]})]}),l.jsx("button",{onClick:T,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),l.jsxs("button",{onClick:()=>j(r),disabled:i,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[i?"...":l.jsx(_ne,{})," PDF"]})]})]}),l.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[l.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[l.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),l.jsx("span",{children:"SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA"})]}),l.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:r.nombre}),l.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Asignatura:"})," ",r.asignatura]}),l.jsxs("p",{className:"text-right",children:[l.jsx("strong",{children:"Puntaje Ideal:"})," ",r.puntajeIdeal]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Nivel:"})," ",r.nivel]})]}),l.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[l.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",r.dificultad||"Intermedio"]}),r.adaptacionNEE&&r.adaptacionNEE.length>0&&l.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",r.adaptacionNEE.join(", ")]})]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",r.objetivo]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Instrucciones Generales:"})," ",r.instruccionesGenerales]})]}),r.actividades.map(E=>l.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[l.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:E.titulo}),l.jsx("p",{className:"italic text-sm mb-4",children:E.instrucciones}),l.jsx("div",{className:"space-y-6",children:E.items.map((N,I)=>l.jsx(w$e,{item:N,index:I,showAnswers:d},N.id))})]},E.id))]})]}):l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Guía"}),l.jsxs("form",{onSubmit:_,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Guía ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",name:"nombre",value:m.nombre,onChange:x,placeholder:"Ej: Guía N°1 - La Célula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),l.jsx("div",{}),l.jsx("select",{name:"asignatura",value:m.asignatura,onChange:x,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:jo.map(E=>l.jsx("option",{children:E},E))}),l.jsx("select",{name:"nivel",value:m.nivel,onChange:x,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:ZV.map(E=>l.jsx("option",{children:E},E))})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),l.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fácil","Intermedio","Avanzado"].map((E,N)=>l.jsx("button",{type:"button",onClick:()=>g(I=>({...I,dificultad:E})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50
                                            ${N===0?"rounded-l-lg":""} ${N===2?"rounded-r-lg":""}
                                            ${m.dificultad===E?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:E},E))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:m.isNee,onChange:E=>g(N=>({...N,isNee:E.target.checked,selectedNee:E.target.checked?N.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),m.isNee&&l.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:_N.map(E=>l.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:m.selectedNee.includes(E),onChange:()=>w(E),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:E})]},E))})]})]})]}),l.jsx("textarea",{name:"contenido",value:m.contenido,onChange:x,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("div",{className:"space-y-3",children:b$e.map(E=>l.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:!!m.tiposActividad[E],onChange:()=>v(E),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:E})]}),m.tiposActividad[E]&&l.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[l.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),iX[E].map(N=>l.jsx("button",{type:"button",onClick:()=>y(E,N),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${m.tiposActividad[E]===N?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:N},N))]})]},E))}),c&&l.jsx("p",{className:"text-red-500 text-sm",children:c}),l.jsx("div",{className:"text-right",children:l.jsx("button",{type:"submit",disabled:a,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:a?"Generando...":"Generar Prueba"})})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),l.jsx("div",{className:"space-y-2",children:e.length>0?e.map(E=>l.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:E.nombre}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[E.asignatura," - ",E.nivel," (",new Date(E.fechaCreacion).toLocaleDateString(),")"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>n(E),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),l.jsx("button",{onClick:()=>B(E.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},E.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},C$e=({rubricas:e,onSave:t,onDelete:r,onCreate:n})=>{const[a,s]=S.useState(null),[i,o]=S.useState("list"),[c,u]=S.useState(!1),[d,f]=S.useState(""),h=async(B,j)=>{if(!B.trim()||!j.trim()){alert("El título y la descripción son obligatorios.");return}u(!0);const E=`Crea una rúbrica de evaluación detallada sobre "${B}" con el propósito de "${j}". Genera entre 3 y 5 dimensiones de evaluación. Para cada dimensión, crea un descriptor para 4 niveles: Insuficiente, Suficiente, Competente, y Avanzado. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,N={type:"ARRAY",items:{type:"OBJECT",properties:{dimension:{type:"STRING"},insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["dimension","insuficiente","suficiente","competente","avanzado"]}};try{cb("Evaluación - Rúbricas");const I="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",R=(await(await new ps(I).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:E}]}],generationConfig:{responseMimeType:"application/json",responseSchema:N}})).response).text(),W=JSON.parse(R),V={id:crypto.randomUUID(),titulo:B,descripcion:j,fechaCreacion:new Date().toISOString(),dimensiones:W.map(G=>({id:crypto.randomUUID(),nombre:G.dimension,niveles:{insuficiente:G.insuficiente,suficiente:G.suficiente,competente:G.competente,avanzado:G.avanzado}}))};s(V)}catch(I){console.error(I),alert("Error al generar la rúbrica con IA.")}finally{u(!1)}},m=async()=>{if(!d.trim()||!a)return;const B=crypto.randomUUID(),j={id:B,nombre:d,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0};s(I=>I?{...I,dimensiones:[...I.dimensiones,j]}:null),f("");const E=`Para una rúbrica sobre "${a.titulo}", genera los descriptores para los 4 niveles de logro (Insuficiente, Suficiente, Competente, Avanzado) para la nueva dimensión: "${d}". Considera las dimensiones existentes como contexto: ${a.dimensiones.map(I=>I.nombre).join(", ")}. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,N={type:"OBJECT",properties:{insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["insuficiente","suficiente","competente","avanzado"]};try{cb("Evaluación - Rúbricas (Añadir Dimensión)");const I="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",R=(await(await new ps(I).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:E}]}],generationConfig:{responseMimeType:"application/json",responseSchema:N}})).response).text(),W=JSON.parse(R);s(V=>V?{...V,dimensiones:V.dimensiones.map(G=>G.id===B?{...G,niveles:W,isLoading:!1}:G)}:null)}catch(I){console.error("Error generating dimension descriptors:",I),alert("No se pudieron generar los descriptores."),s(L=>L?{...L,dimensiones:L.dimensiones.filter(D=>D.id!==B)}:null)}},g=()=>{if(!a)return;e.some(j=>j.id===a.id)?t(a):n(a),o("list"),s(null)},x=B=>{s(B),o("form")},v=()=>{s({id:crypto.randomUUID(),titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),o("form")},y=(B,j,E)=>{a&&s(N=>N?{...N,dimensiones:N.dimensiones.map(I=>I.id!==B?I:j==="nombre"?{...I,nombre:E}:{...I,niveles:{...I.niveles,[j]:E}})}:null)},w=(B,j)=>{s(E=>E?{...E,[B]:j}:null)},_=B=>{a&&s(j=>j?{...j,dimensiones:j.dimensiones.filter(E=>E.id!==B)}:null)},T=()=>{if(!a)return null;const B="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",j=`${B} resize-none text-sm`;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rúbrica de Aprendizaje"}),l.jsx("button",{onClick:()=>o("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Título de la Rúbrica"}),l.jsx("input",{value:a.titulo,onChange:E=>w("titulo",E.target.value),placeholder:"Ej. Rúbrica de Presentaciones Orales",className:`${B} mt-1`})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripción de la Rúbrica"}),l.jsx("textarea",{value:a.descripcion,onChange:E=>w("descripcion",E.target.value),placeholder:"Describe el propósito y los criterios de evaluación de esta rúbrica.",rows:3,className:`${B} mt-1`})]})]}),a.dimensiones.length===0&&l.jsx("div",{className:"text-center py-4",children:l.jsx("button",{onClick:()=>h(a.titulo,a.descripcion),disabled:c||!a.titulo||!a.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:c?"Generando...":"✨ Generar Rúbrica con IA"})}),a.dimensiones.length>0&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),l.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:l.jsx("tr",{children:["Dimensión","Insuficiente","Suficiente","Competente","Avanzado",""].map(E=>l.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:E},E))})}),l.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.dimensiones.map(E=>l.jsxs("tr",{children:[l.jsx("td",{className:"p-2 w-1/5",children:l.jsx("textarea",{value:E.nombre,onChange:N=>y(E.id,"nombre",N.target.value),rows:4,className:j})}),Object.keys(E.niveles).map(N=>l.jsx("td",{className:"p-2 w-1/5",children:E.isLoading?l.jsx("div",{className:"flex justify-center items-center h-full",children:l.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):l.jsx("textarea",{value:E.niveles[N],onChange:I=>y(E.id,N,I.target.value),rows:4,className:j})},N)),l.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:l.jsx("button",{onClick:()=>_(E.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:"🗑️"})})]},E.id))})]})}),l.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("label",{className:"text-sm font-medium",children:"Añadir Dimensión"}),l.jsx("input",{value:d,onChange:E=>f(E.target.value),placeholder:"Escribe el nombre de la nueva dimensión...",className:`${B} mt-1`})]}),l.jsx("button",{onClick:m,disabled:!d.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]})]}),l.jsx("div",{className:"flex justify-end pt-6 border-t dark:border-slate-700",children:l.jsx("button",{onClick:g,className:"bg-amber-500 text-white font-bold py-2.5 px-6 rounded-lg hover:bg-amber-600",children:"Guardar Rúbrica"})})]})};return i==="list"?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rúbricas"}),l.jsx("button",{onClick:v,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),e.length>0?e.map(B=>l.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:B.titulo}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:B.descripcion})]}),l.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[l.jsx("button",{onClick:()=>x(B),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),l.jsx("button",{onClick:()=>r(B.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},B.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rúbricas guardadas."})]}):T()},_$e=({allUsers:e,rubricasEstaticas:t})=>{const[r,n]=S.useState([]),[a,s]=S.useState(null),[i,o]=S.useState(null),[c,u]=S.useState({rubricaEstaticaId:"",curso:""}),[d,f]=S.useState(null);S.useEffect(()=>{const w=p$e(n);return()=>w()},[]);const h=async w=>{w.preventDefault();const _=t.find(B=>B.id===c.rubricaEstaticaId);if(!_||!c.curso){alert("Debe seleccionar una rúbrica y un curso.");return}const T={nombre:_.titulo,curso:c.curso,asignatura:"N/A",rubricaEstaticaId:_.id,resultados:{}};try{await x$e(T),u({rubricaEstaticaId:"",curso:""})}catch(B){console.error(B),alert("No se pudo crear la evaluación con rúbrica.")}},m=w=>{s(w),o(JSON.parse(JSON.stringify(w)))},g=(w,_,T)=>{i&&o(B=>{if(!B)return null;const j=JSON.parse(JSON.stringify(B));return j.resultados[w]||(j.resultados[w]={puntajes:{},feedback:""}),j.resultados[w].puntajes[_]=T,j})},x=async()=>{if(i)try{await g$e(i),s(i),alert("Cambios guardados.")}catch(w){console.error(w),alert("No se pudieron guardar los cambios.")}},v=S.useCallback(w=>{const _=i,T=t.find(L=>L.id===(_==null?void 0:_.rubricaEstaticaId));if(!_||!T)return{score:0,maxScore:0,grade:"N/A"};const B=T.dimensiones.length*4,j=_.resultados[w];if(!j)return{score:0,maxScore:B,grade:"1.0"};const E=Object.values(j.puntajes).reduce((L,D)=>L+D,0),N=1+6*(E/B),I=B>0?N.toFixed(1):"1.0";return{score:E,maxScore:B,grade:I}},[i,t]),y=async w=>{if(!i)return;const _=t.find(E=>E.id===i.rubricaEstaticaId),T=i.resultados[w];if(!_||!T||Object.keys(T.puntajes).length===0){alert("El estudiante no tiene puntajes para generar feedback.");return}f(w);const j=`Genera una retroalimentación constructiva para un estudiante basada en estos puntajes de rúbrica (de 1 a 4): ${_.dimensiones.map(E=>`${E.nombre}: ${T.puntajes[E.id]||"N/A"}/4`).join("; ")}. El nombre de la evaluación es "${_.titulo}". Destaca fortalezas y sugiere 1-2 áreas de mejora concretas. Sé breve y motivador.`;try{cb("Evaluación - Rúbricas Interactivas (Feedback)");const E="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",k=(await(await new ps(E).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(j)).response).text();o(P=>{if(!P)return null;const R=JSON.parse(JSON.stringify(P));return R.resultados[w].feedback=k.replace(/(\*\*|\*)/g,""),R})}catch(E){console.error(E),alert("Error al generar feedback.")}finally{f(null)}};if(a&&i){const w=t.find(T=>T.id===a.rubricaEstaticaId),_=e.filter(T=>T.profile===Jt.ESTUDIANTE&&IS(T.curso||"")===a.curso).map(T=>T.nombreCompleto).sort();return w?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:a.nombre}),l.jsx("p",{className:"text-slate-500",children:a.curso})]}),l.jsx("button",{onClick:()=>s(null),className:"font-semibold text-slate-600",children:"← Volver"})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border-collapse",children:[l.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border dark:border-slate-600 sticky left-0 bg-slate-100 dark:bg-slate-700 z-10 w-48",children:"Estudiante"}),w.dimensiones.map(T=>l.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:T.nombre},T.id)),l.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Puntaje"}),l.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Nota"}),l.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm w-64",children:"Retroalimentación"})]})}),l.jsx("tbody",{children:_.map(T=>{var N;const{score:B,maxScore:j,grade:E}=v(T);return l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"p-2 border dark:border-slate-600 font-semibold sticky left-0 bg-white dark:bg-slate-800 w-48",children:T}),w.dimensiones.map(I=>l.jsx("td",{className:"p-2 border dark:border-slate-600 text-center",children:l.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3,4].map(L=>{var D;return l.jsx("button",{onClick:()=>g(T,I.id,L),className:`w-7 h-7 rounded-md font-semibold transition-colors ${((D=i.resultados[T])==null?void 0:D.puntajes[I.id])===L?"bg-amber-400 text-white":"bg-slate-200 dark:bg-slate-600 hover:bg-slate-300"}`,children:L},L)})})},I.id)),l.jsxs("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:[B,"/",j]}),l.jsx("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:E}),l.jsx("td",{className:"p-2 border dark:border-slate-600 text-sm",children:l.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[l.jsx("p",{className:"text-xs w-full",children:((N=i.resultados[T])==null?void 0:N.feedback)||"Sin generar"}),l.jsx("button",{onClick:()=>y(T),disabled:d===T,className:"text-xs bg-sky-100 text-sky-700 font-semibold px-2 py-1 rounded-md w-full disabled:opacity-50",children:d===T?"...":"Generar IA"})]})})]},T)})})]})}),l.jsx("div",{className:"mt-6 flex justify-end",children:l.jsx("button",{onClick:x,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})})]}):l.jsxs("div",{children:["Error: Rúbrica base no encontrada. ",l.jsx("button",{onClick:()=>s(null),children:"Volver"})]})}return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear Evaluación con Rúbrica"}),l.jsxs("form",{onSubmit:h,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[l.jsxs("select",{value:c.rubricaEstaticaId,onChange:w=>u({...c,rubricaEstaticaId:w.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[l.jsx("option",{value:"",children:"Seleccione una Rúbrica Guardada"}),t.map(w=>l.jsx("option",{value:w.id,children:w.titulo},w.id))]}),l.jsxs("select",{value:c.curso,onChange:w=>u({...c,curso:w.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[l.jsx("option",{value:"",children:"Seleccione un Curso"}),Ac.map(w=>l.jsx("option",{value:w,children:w},w))]}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear Evaluación"})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones Creadas"}),l.jsx("div",{className:"space-y-2",children:r.map(w=>l.jsxs("button",{onClick:()=>m(w),className:"w-full text-left p-3 rounded-md bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600",children:[l.jsx("p",{className:"font-semibold",children:w.nombre}),l.jsx("p",{className:"text-sm text-slate-500",children:w.curso})]},w.id))})]})]})},S$e=({allUsers:e})=>{const[t,r]=S.useState(""),n=S.useMemo(()=>Array.from(new Set(e.filter(s=>s.profile===Jt.ESTUDIANTE&&s.curso).map(s=>IS(s.curso)))).sort(),[e]),a=S.useMemo(()=>{const s=e.filter(i=>i.profile===Jt.ESTUDIANTE);return t?s.filter(i=>IS(i.curso||"")===t).sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto)):s.sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto))},[e,t]);return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nóminas de Cursos"}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Este es un visor de las nóminas de estudiantes. Para agregar, editar o eliminar estudiantes, utilice el módulo de ",l.jsx("strong",{className:"font-semibold",children:"Administración"}),"."]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Curso"}),l.jsxs("select",{id:"curso-filter",value:t,onChange:s=>r(s.target.value),className:"w-full max-w-xs border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Mostrar Todos los Estudiantes"}),n.map(s=>l.jsx("option",{value:s,children:s},s))]})]}),l.jsx("div",{className:"overflow-x-auto border rounded-lg dark:border-slate-700 max-h-[60vh]",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nombre Completo"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Curso"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Email"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:a.length>0?a.map(s=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:s.nombreCompleto}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:IS(s.curso||"")}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:s.email})]},s.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No hay estudiantes que coincidan con el filtro."})})})]})})]})},N$e=()=>{const[e,t]=S.useState("pruebas"),[r,n]=S.useState([]),[a,s]=S.useState([]),[i,o]=S.useState(!0);S.useEffect(()=>{o(!0);const f=v$e(n),h=A$e(m=>{s(m),o(!1)});return()=>{f(),h()}},[]);const c=async f=>{try{await h$e(f)}catch(h){console.error(h),alert("No se pudo guardar la rúbrica.")}},u=async f=>{try{await m$e(f)}catch(h){console.error(h),alert("No se pudo eliminar la rúbrica.")}},d=({tabName:f,label:h})=>l.jsx("button",{onClick:()=>t(f),className:`${e===f?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:h});return i?l.jsx("div",{className:"text-center py-10",children:"Cargando módulo de evaluaciones..."}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluación de Aprendizajes"}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx(d,{tabName:"pruebas",label:"Pruebas y Guías"}),l.jsx(d,{tabName:"rubricas",label:"Generador de Rúbricas"}),l.jsx(d,{tabName:"rubricasInteractivas",label:"Rúbricas Interactivas"}),l.jsx(d,{tabName:"nominas",label:"Gestión de Nóminas"})]})}),l.jsxs("div",{className:"mt-6",children:[e==="pruebas"&&l.jsx(E$e,{}),e==="rubricas"&&l.jsx(C$e,{rubricas:a,onSave:c,onDelete:u,onCreate:c}),e==="rubricasInteractivas"&&l.jsx(_$e,{allUsers:r,rubricasEstaticas:a}),e==="nominas"&&l.jsx(S$e,{allUsers:r})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var _4={};_4.version="0.18.5";var Zce=1252,k$e=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],wU={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},EU=function(e){k$e.indexOf(e)!=-1&&(Zce=wU[0]=e)};function B$e(){EU(1252)}var Xd=function(e){EU(e)};function CU(){Xd(1200),B$e()}function oX(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function T$e(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function eue(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Lw=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?T$e(e.slice(2)):t==254&&r==255?eue(e.slice(2)):t==65279?e.slice(1):e},m5=function(t){return String.fromCharCode(t)},lX=function(t){return String.fromCharCode(t)},oE,Sm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function lE(e){for(var t="",r=0,n=0,a=0,s=0,i=0,o=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),s=r>>2,n=e.charCodeAt(u++),i=(r&3)<<4|n>>4,a=e.charCodeAt(u++),o=(n&15)<<2|a>>6,c=a&63,isNaN(n)?o=c=64:isNaN(a)&&(c=64),t+=Sm.charAt(s)+Sm.charAt(i)+Sm.charAt(o)+Sm.charAt(c);return t}function cu(e){var t="",r=0,n=0,a=0,s=0,i=0,o=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)s=Sm.indexOf(e.charAt(u++)),i=Sm.indexOf(e.charAt(u++)),r=s<<2|i>>4,t+=String.fromCharCode(r),o=Sm.indexOf(e.charAt(u++)),n=(i&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(n)),c=Sm.indexOf(e.charAt(u++)),a=(o&3)<<6|c,c!==64&&(t+=String.fromCharCode(a));return t}var vn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),m0=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function ip(e){return vn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function cX(e){return vn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Yc=function(t){return vn?m0(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function iT(e){if(typeof ArrayBuffer>"u")return Yc(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function Cp(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function j$e(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function _U(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return _U(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var so=vn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:m0(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function I$e(e){for(var t=[],r=0,n=e.length+250,a=ip(e.length+255),s=0;s<e.length;++s){var i=e.charCodeAt(s);if(i<128)a[r++]=i;else if(i<2048)a[r++]=192|i>>6&31,a[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=e.charCodeAt(++s)&1023;a[r++]=240|i>>8&7,a[r++]=128|i>>2&63,a[r++]=128|o>>6&15|(i&3)<<4,a[r++]=128|o&63}else a[r++]=224|i>>12&15,a[r++]=128|i>>6&63,a[r++]=128|i&63;r>n&&(t.push(a.slice(0,r)),r=0,a=ip(65535),n=65530)}return t.push(a.slice(0,r)),so(t)}var Rl=/\u0000/g,Mw=/[\u0001-\u0006]/g;function k1(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Yd(e,t){var r=""+e;return r.length>=t?r:Ds("0",t-r.length)+r}function SU(e,t){var r=""+e;return r.length>=t?r:Ds(" ",t-r.length)+r}function S4(e,t){var r=""+e;return r.length>=t?r:r+Ds(" ",t-r.length)}function F$e(e,t){var r=""+Math.round(e);return r.length>=t?r:Ds("0",t-r.length)+r}function O$e(e,t){var r=""+e;return r.length>=t?r:Ds("0",t-r.length)+r}var uX=Math.pow(2,32);function Ev(e,t){if(e>uX||e<-uX)return F$e(e,t);var r=Math.round(e);return O$e(r,t)}function N4(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var dX=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],$6=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function D$e(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',e}var Ur={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},fX={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},P$e={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function k4(e,t,r){for(var n=e<0?-1:1,a=e*n,s=0,i=1,o=0,c=1,u=0,d=0,f=Math.floor(a);u<t&&(f=Math.floor(a),o=f*i+s,d=f*u+c,!(a-f<5e-8));)a=1/(a-f),s=i,i=o,c=u,u=d;if(d>t&&(u>t?(d=c,o=s):(d=u,o=i)),!r)return[0,n*o,d];var h=Math.floor(n*o/d);return[h,n*o-h*d,d]}function Eg(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),s=0,i=[],o={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++a==86400&&(o.T=a=0,++n,++o.D)),n===60)i=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),i=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=H$e(c,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=a%60,a=Math.floor(a/60),o.M=a%60,a=Math.floor(a/60),o.H=a,o.q=s,o}var tue=new Date(1899,11,31,0,0,0),R$e=tue.getTime(),L$e=new Date(1900,2,1,0,0,0);function rue(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=L$e&&(r+=1440*60*1e3),(r-(R$e+(e.getTimezoneOffset()-tue.getTimezoneOffset())*6e4))/(1440*60*1e3)}function NU(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function M$e(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function U$e(e){var t=e<0?12:11,r=NU(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function Q$e(e){var t=NU(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function cE(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=U$e(e):t===10?r=e.toFixed(10).substr(0,12):r=Q$e(e),NU(M$e(r.toUpperCase()))}function ox(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):cE(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return dd(14,rue(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function H$e(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function V$e(e,t,r,n){var a="",s=0,i=0,o=r.y,c,u=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:c=o%100,u=2;break;default:c=o%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return $6[r.m-1][1];case 5:return $6[r.m-1][0];default:return $6[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return dX[r.q][0];default:return dX[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Yd(r.S,t.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,s=Math.round(i*(r.S+r.u)),s>=60*i&&(s=0),t==="s"?s===0?"0":""+s/i:(a=Yd(s,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=o,u=1;break}var d=u>0?Yd(c,u):"";return d}function Nm(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var nue=/%/g;function z$e(e,t,r){var n=t.replace(nue,""),a=t.length-n.length;return Lh(e,n,r*Math.pow(10,2*a))+Ds("%",a)}function $$e(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Lh(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function aue(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+aue(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var i=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var sue=/# (\?+)( ?)\/( ?)(\d+)/;function G$e(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),s=Math.floor(a/n),i=a-s*n,o=n;return r+(s===0?"":""+s)+" "+(i===0?Ds(" ",e[1].length+1+e[4].length):SU(i,e[1].length)+e[2]+"/"+e[3]+Yd(o,e[4].length))}function K$e(e,t,r){return r+(t===0?"":""+t)+Ds(" ",e[1].length+2+e[4].length)}var iue=/^#*0*\.([0#]+)/,oue=/\).*[0#]/,lue=/\(###\) ###\\?-####/;function kl(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function AX(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function hX(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function q$e(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function W$e(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Vu(e,t,r){if(e.charCodeAt(0)===40&&!t.match(oue)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Vu("n",n,r):"("+Vu("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return $$e(e,t,r);if(t.indexOf("%")!==-1)return z$e(e,t,r);if(t.indexOf("E")!==-1)return aue(t,r);if(t.charCodeAt(0)===36)return"$"+Vu(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,i,o,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Ev(c,t.length);if(t.match(/^[#?]+$/))return a=Ev(r,0),a==="0"&&(a=""),a.length>t.length?a:kl(t.substr(0,t.length-a.length))+a;if(s=t.match(sue))return G$e(s,c,u);if(t.match(/^#+0+$/))return u+Ev(c,t.length-t.indexOf("0"));if(s=t.match(iue))return a=AX(r,s[1].length).replace(/^([^\.]+)$/,"$1."+kl(s[1])).replace(/\.$/,"."+kl(s[1])).replace(/\.(\d*)$/,function(g,x){return"."+x+Ds("0",kl(s[1]).length-x.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+AX(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+Nm(Ev(c,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Vu(e,t,-r):Nm(""+(Math.floor(r)+q$e(r,s[1].length)))+"."+Yd(hX(r,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return Vu(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=k1(Vu(e,t.replace(/[\\-]/g,""),r)),i=0,k1(k1(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return i<a.length?a.charAt(i++):g==="0"?"0":""}));if(t.match(lue))return a=Vu(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=k4(c,Math.pow(10,i)-1,!1),a=""+u,d=Lh("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=S4(o[2],i),d.length<s[4].length&&(d=kl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=k4(c,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?SU(o[1],i)+s[2]+"/"+s[3]+S4(o[2],i):Ds(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=Ev(r,0),t.length<=a.length?a:kl(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var f=t.indexOf(".")-i,h=t.length-a.length-f;return kl(t.substr(0,f)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return i=hX(r,s[1].length),r<0?"-"+Vu(e,t,-r):Nm(W$e(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Yd(0,3-g.length):"")+g})+"."+Yd(i,s[1].length);switch(t){case"###,##0.00":return Vu(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var m=Nm(Ev(c,0));return m!=="0"?u+m:"";case"###,###.00":return Vu(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Vu(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function X$e(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Lh(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function Y$e(e,t,r){var n=t.replace(nue,""),a=t.length-n.length;return Lh(e,n,r*Math.pow(10,2*a))+Ds("%",a)}function cue(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+cue(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var i=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function tA(e,t,r){if(e.charCodeAt(0)===40&&!t.match(oue)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?tA("n",n,r):"("+tA("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return X$e(e,t,r);if(t.indexOf("%")!==-1)return Y$e(e,t,r);if(t.indexOf("E")!==-1)return cue(t,r);if(t.charCodeAt(0)===36)return"$"+tA(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,i,o,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Yd(c,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:kl(t.substr(0,t.length-a.length))+a;if(s=t.match(sue))return K$e(s,c,u);if(t.match(/^#+0+$/))return u+Yd(c,t.length-t.indexOf("0"));if(s=t.match(iue))return a=(""+r).replace(/^([^\.]+)$/,"$1."+kl(s[1])).replace(/\.$/,"."+kl(s[1])),a=a.replace(/\.(\d*)$/,function(g,x){return"."+x+Ds("0",kl(s[1]).length-x.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+Nm(""+c);if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+tA(e,t,-r):Nm(""+r)+"."+Ds("0",s[1].length);if(s=t.match(/^#,#*,#0/))return tA(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=k1(tA(e,t.replace(/[\\-]/g,""),r)),i=0,k1(k1(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return i<a.length?a.charAt(i++):g==="0"?"0":""}));if(t.match(lue))return a=tA(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=k4(c,Math.pow(10,i)-1,!1),a=""+u,d=Lh("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=S4(o[2],i),d.length<s[4].length&&(d=kl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=k4(c,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?SU(o[1],i)+s[2]+"/"+s[3]+S4(o[2],i):Ds(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:kl(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var f=t.indexOf(".")-i,h=t.length-a.length-f;return kl(t.substr(0,f)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+tA(e,t,-r):Nm(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Yd(0,3-g.length):"")+g})+"."+Yd(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var m=Nm(""+c);return m!=="0"?u+m:"";default:if(t.match(/\.[0#?]*$/))return tA(e,t.slice(0,t.lastIndexOf(".")),r)+kl(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Lh(e,t,r){return(r|0)===r?tA(e,t,r):Vu(e,t,r)}function J$e(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var uue=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function ry(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":N4(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="上午/下午")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(uue))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function Z$e(e,t,r,n){for(var a=[],s="",i=0,o="",c="t",u,d,f,h="H";i<e.length;)switch(o=e.charAt(i)){case"G":if(!N4(e,i))throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"G",v:"General"},i+=7;break;case'"':for(s="";(f=e.charCodeAt(++i))!==34&&i<e.length;)s+=String.fromCharCode(f);a[a.length]={t:"t",v:s},++i;break;case"\\":var m=e.charAt(++i),g=m==="("||m===")"?m:"t";a[a.length]={t:g,v:m},++i;break;case"_":a[a.length]={t:"t",v:" "},i+=2;break;case"@":a[a.length]={t:"T",v:t},++i;break;case"B":case"b":if(e.charAt(i+1)==="1"||e.charAt(i+1)==="2"){if(u==null&&(u=Eg(t,r,e.charAt(i+1)==="2"),u==null))return"";a[a.length]={t:"X",v:e.substr(i,2)},c=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=Eg(t,r),u==null))return"";for(s=o;++i<e.length&&e.charAt(i).toLowerCase()===o;)s+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=h),a[a.length]={t:o,v:s},c=o;break;case"A":case"a":case"上":var x={t:o,v:o};if(u==null&&(u=Eg(t,r)),e.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(x.v=u.H>=12?"P":"A"),x.t="T",h="h",i+=3):e.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(x.v=u.H>=12?"PM":"AM"),x.t="T",i+=5,h="h"):e.substr(i,5).toUpperCase()==="上午/下午"?(u!=null&&(x.v=u.H>=12?"下午":"上午"),x.t="T",i+=5,h="h"):(x.t="t",++i),u==null&&x.t==="T")return"";a[a.length]=x,c=o;break;case"[":for(s=o;e.charAt(i++)!=="]"&&i<e.length;)s+=e.charAt(i);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(uue)){if(u==null&&(u=Eg(t,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",ry(e)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=o;++i<e.length&&(o=e.charAt(i))==="0";)s+=o;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++i<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(i))>-1;)s+=o;a[a.length]={t:"n",v:s};break;case"?":for(s=o;e.charAt(++i)===o;)s+=o;a[a.length]={t:o,v:s},c=o;break;case"*":++i,(e.charAt(i)==" "||e.charAt(i)=="*")&&++i;break;case"(":case")":a[a.length]={t:n===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;i<e.length&&"0123456789".indexOf(e.charAt(++i))>-1;)s+=e.charAt(i);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:o,v:o},++i;break;case"$":a[a.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"t",v:o},++i;break}var v=0,y=0,w;for(i=a.length-1,c="t";i>=0;--i)switch(a[i].t){case"h":case"H":a[i].t=h,c="h",v<1&&(v=1);break;case"s":(w=a[i].v.match(/\.0+$/))&&(y=Math.max(y,w[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":c=a[i].t;break;case"m":c==="s"&&(a[i].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&a[i].v.match(/[Hh]/)&&(v=1),v<2&&a[i].v.match(/[Mm]/)&&(v=2),v<3&&a[i].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var _="",T;for(i=0;i<a.length;++i)switch(a[i].t){case"t":case"T":case" ":case"D":break;case"X":a[i].v="",a[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[i].v=V$e(a[i].t.charCodeAt(0),a[i].v,u,y),a[i].t="t";break;case"n":case"?":for(T=i+1;a[T]!=null&&((o=a[T].t)==="?"||o==="D"||(o===" "||o==="t")&&a[T+1]!=null&&(a[T+1].t==="?"||a[T+1].t==="t"&&a[T+1].v==="/")||a[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(a[T].v==="/"||a[T].v===" "&&a[T+1]!=null&&a[T+1].t=="?"));)a[i].v+=a[T].v,a[T]={v:"",t:";"},++T;_+=a[i].v,i=T-1;break;case"G":a[i].t="t",a[i].v=ox(t,r);break}var B="",j,E;if(_.length>0){_.charCodeAt(0)==40?(j=t<0&&_.charCodeAt(0)===45?-t:t,E=Lh("n",_,j)):(j=t<0&&n>1?-t:t,E=Lh("n",_,j),j<0&&a[0]&&a[0].t=="t"&&(E=E.substr(1),a[0].v="-"+a[0].v)),T=E.length-1;var N=a.length;for(i=0;i<a.length;++i)if(a[i]!=null&&a[i].t!="t"&&a[i].v.indexOf(".")>-1){N=i;break}var I=a.length;if(N===a.length&&E.indexOf("E")===-1){for(i=a.length-1;i>=0;--i)a[i]==null||"n?".indexOf(a[i].t)===-1||(T>=a[i].v.length-1?(T-=a[i].v.length,a[i].v=E.substr(T+1,a[i].v.length)):T<0?a[i].v="":(a[i].v=E.substr(0,T+1),T=-1),a[i].t="t",I=i);T>=0&&I<a.length&&(a[I].v=E.substr(0,T+1)+a[I].v)}else if(N!==a.length&&E.indexOf("E")===-1){for(T=E.indexOf(".")-1,i=N;i>=0;--i)if(!(a[i]==null||"n?".indexOf(a[i].t)===-1)){for(d=a[i].v.indexOf(".")>-1&&i===N?a[i].v.indexOf(".")-1:a[i].v.length-1,B=a[i].v.substr(d+1);d>=0;--d)T>=0&&(a[i].v.charAt(d)==="0"||a[i].v.charAt(d)==="#")&&(B=E.charAt(T--)+B);a[i].v=B,a[i].t="t",I=i}for(T>=0&&I<a.length&&(a[I].v=E.substr(0,T+1)+a[I].v),T=E.indexOf(".")+1,i=N;i<a.length;++i)if(!(a[i]==null||"n?(".indexOf(a[i].t)===-1&&i!==N)){for(d=a[i].v.indexOf(".")>-1&&i===N?a[i].v.indexOf(".")+1:0,B=a[i].v.substr(0,d);d<a[i].v.length;++d)T<E.length&&(B+=E.charAt(T++));a[i].v=B,a[i].t="t",I=i}}}for(i=0;i<a.length;++i)a[i]!=null&&"n?".indexOf(a[i].t)>-1&&(j=n>1&&t<0&&i>0&&a[i-1].v==="-"?-t:t,a[i].v=Lh(a[i].t,a[i].v,j),a[i].t="t");var L="";for(i=0;i!==a.length;++i)a[i]!=null&&(L+=a[i].v);return L}var mX=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function pX(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function eGe(e,t){var r=J$e(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(mX),o=r[1].match(mX);return pX(t,i)?[n,r[0]]:pX(t,o)?[n,r[1]]:[n,r[i!=null&&o!=null?2:1]]}return[n,s]}function dd(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Ur)[e],n==null&&(n=r.table&&r.table[fX[e]]||Ur[fX[e]]),n==null&&(n=P$e[e]||"General");break}if(N4(n,0))return ox(t,r);t instanceof Date&&(t=rue(t,r.date1904));var a=eGe(n,t);if(N4(a[1]))return ox(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return Z$e(a[1],t,r,a[0])}function Mh(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Ur[r]==null){t<0&&(t=r);continue}if(Ur[r]==e){t=r;break}}t<0&&(t=391)}return Ur[t]=e,t}function oT(e){for(var t=0;t!=392;++t)e[t]!==void 0&&Mh(e[t],t)}function ny(){Ur=D$e()}var tGe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},due=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function rGe(e){var t=typeof e=="number"?Ur[e]:e;return t=t.replace(due,"(\\d+)"),new RegExp("^"+t+"$")}function nGe(e,t,r){var n=-1,a=-1,s=-1,i=-1,o=-1,c=-1;(t.match(due)||[]).forEach(function(f,h){var m=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=m;break;case"d":s=m;break;case"h":i=m;break;case"s":c=m;break;case"m":i>=0?o=m:a=m;break}}),c>=0&&o==-1&&a>=0&&(o=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return i==-1&&o==-1&&c==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var aGe=function(){var e={};e.version="1.2.0";function t(){for(var E=0,N=new Array(256),I=0;I!=256;++I)E=I,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,N[I]=E;return typeof Int32Array<"u"?new Int32Array(N):N}var r=t();function n(E){var N=0,I=0,L=0,D=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(L=0;L!=256;++L)D[L]=E[L];for(L=0;L!=256;++L)for(I=E[L],N=256+L;N<4096;N+=256)I=D[N]=I>>>8^E[I&255];var k=[];for(L=1;L!=16;++L)k[L-1]=typeof Int32Array<"u"?D.subarray(L*256,L*256+256):D.slice(L*256,L*256+256);return k}var a=n(r),s=a[0],i=a[1],o=a[2],c=a[3],u=a[4],d=a[5],f=a[6],h=a[7],m=a[8],g=a[9],x=a[10],v=a[11],y=a[12],w=a[13],_=a[14];function T(E,N){for(var I=N^-1,L=0,D=E.length;L<D;)I=I>>>8^r[(I^E.charCodeAt(L++))&255];return~I}function B(E,N){for(var I=N^-1,L=E.length-15,D=0;D<L;)I=_[E[D++]^I&255]^w[E[D++]^I>>8&255]^y[E[D++]^I>>16&255]^v[E[D++]^I>>>24]^x[E[D++]]^g[E[D++]]^m[E[D++]]^h[E[D++]]^f[E[D++]]^d[E[D++]]^u[E[D++]]^c[E[D++]]^o[E[D++]]^i[E[D++]]^s[E[D++]]^r[E[D++]];for(L+=15;D<L;)I=I>>>8^r[(I^E[D++])&255];return~I}function j(E,N){for(var I=N^-1,L=0,D=E.length,k=0,P=0;L<D;)k=E.charCodeAt(L++),k<128?I=I>>>8^r[(I^k)&255]:k<2048?(I=I>>>8^r[(I^(192|k>>6&31))&255],I=I>>>8^r[(I^(128|k&63))&255]):k>=55296&&k<57344?(k=(k&1023)+64,P=E.charCodeAt(L++)&1023,I=I>>>8^r[(I^(240|k>>8&7))&255],I=I>>>8^r[(I^(128|k>>2&63))&255],I=I>>>8^r[(I^(128|P>>6&15|(k&3)<<4))&255],I=I>>>8^r[(I^(128|P&63))&255]):(I=I>>>8^r[(I^(224|k>>12&15))&255],I=I>>>8^r[(I^(128|k>>6&63))&255],I=I>>>8^r[(I^(128|k&63))&255]);return~I}return e.table=r,e.bstr=T,e.buf=B,e.str=j,e}(),Nr=function(){var t={};t.version="1.2.1";function r(he,Te){for(var Ce=he.split("/"),we=Te.split("/"),Ne=0,je=0,Ye=Math.min(Ce.length,we.length);Ne<Ye;++Ne){if(je=Ce[Ne].length-we[Ne].length)return je;if(Ce[Ne]!=we[Ne])return Ce[Ne]<we[Ne]?-1:1}return Ce.length-we.length}function n(he){if(he.charAt(he.length-1)=="/")return he.slice(0,-1).indexOf("/")===-1?he:n(he.slice(0,-1));var Te=he.lastIndexOf("/");return Te===-1?he:he.slice(0,Te+1)}function a(he){if(he.charAt(he.length-1)=="/")return a(he.slice(0,-1));var Te=he.lastIndexOf("/");return Te===-1?he:he.slice(Te+1)}function s(he,Te){typeof Te=="string"&&(Te=new Date(Te));var Ce=Te.getHours();Ce=Ce<<6|Te.getMinutes(),Ce=Ce<<5|Te.getSeconds()>>>1,he.write_shift(2,Ce);var we=Te.getFullYear()-1980;we=we<<4|Te.getMonth()+1,we=we<<5|Te.getDate(),he.write_shift(2,we)}function i(he){var Te=he.read_shift(2)&65535,Ce=he.read_shift(2)&65535,we=new Date,Ne=Ce&31;Ce>>>=5;var je=Ce&15;Ce>>>=4,we.setMilliseconds(0),we.setFullYear(Ce+1980),we.setMonth(je-1),we.setDate(Ne);var Ye=Te&31;Te>>>=5;var dt=Te&63;return Te>>>=6,we.setHours(Te),we.setMinutes(dt),we.setSeconds(Ye<<1),we}function o(he){Bo(he,0);for(var Te={},Ce=0;he.l<=he.length-4;){var we=he.read_shift(2),Ne=he.read_shift(2),je=he.l+Ne,Ye={};switch(we){case 21589:Ce=he.read_shift(1),Ce&1&&(Ye.mtime=he.read_shift(4)),Ne>5&&(Ce&2&&(Ye.atime=he.read_shift(4)),Ce&4&&(Ye.ctime=he.read_shift(4))),Ye.mtime&&(Ye.mt=new Date(Ye.mtime*1e3));break}he.l=je,Te[we]=Ye}return Te}var c;function u(){return c||(c={})}function d(he,Te){if(he[0]==80&&he[1]==75)return pn(he,Te);if((he[0]|32)==109&&(he[1]|32)==105)return Et(he,Te);if(he.length<512)throw new Error("CFB file size "+he.length+" < 512");var Ce=3,we=512,Ne=0,je=0,Ye=0,dt=0,$e=0,nt=[],it=he.slice(0,512);Bo(it,0);var Ot=f(it);switch(Ce=Ot[0],Ce){case 3:we=512;break;case 4:we=4096;break;case 0:if(Ot[1]==0)return pn(he,Te);default:throw new Error("Major Version: Expected 3 or 4 saw "+Ce)}we!==512&&(it=he.slice(0,we),Bo(it,28));var zt=he.slice(0,we);h(it,Ce);var Zt=it.read_shift(4,"i");if(Ce===3&&Zt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Zt);it.l+=4,Ye=it.read_shift(4,"i"),it.l+=4,it.chk("00100000","Mini Stream Cutoff Size: "),dt=it.read_shift(4,"i"),Ne=it.read_shift(4,"i"),$e=it.read_shift(4,"i"),je=it.read_shift(4,"i");for(var Vt=-1,Kt=0;Kt<109&&(Vt=it.read_shift(4,"i"),!(Vt<0));++Kt)nt[Kt]=Vt;var Br=m(he,we);v($e,je,Br,we,nt);var ln=w(Br,Ye,nt,we);ln[Ye].name="!Directory",Ne>0&&dt!==P&&(ln[dt].name="!MiniFAT"),ln[nt[0]].name="!FAT",ln.fat_addrs=nt,ln.ssz=we;var cn={},hn=[],ys=[],Po=[];_(Ye,ln,Br,hn,Ne,cn,ys,dt),g(ys,Po,hn),hn.shift();var ws={FileIndex:ys,FullPaths:Po};return Te&&Te.raw&&(ws.raw={header:zt,sectors:Br}),ws}function f(he){if(he[he.l]==80&&he[he.l+1]==75)return[0,0];he.chk(R,"Header Signature: "),he.l+=16;var Te=he.read_shift(2,"u");return[he.read_shift(2,"u"),Te]}function h(he,Te){var Ce=9;switch(he.l+=2,Ce=he.read_shift(2)){case 9:if(Te!=3)throw new Error("Sector Shift: Expected 9 saw "+Ce);break;case 12:if(Te!=4)throw new Error("Sector Shift: Expected 12 saw "+Ce);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Ce)}he.chk("0600","Mini Sector Shift: "),he.chk("000000000000","Reserved: ")}function m(he,Te){for(var Ce=Math.ceil(he.length/Te)-1,we=[],Ne=1;Ne<Ce;++Ne)we[Ne-1]=he.slice(Ne*Te,(Ne+1)*Te);return we[Ce-1]=he.slice(Ce*Te),we}function g(he,Te,Ce){for(var we=0,Ne=0,je=0,Ye=0,dt=0,$e=Ce.length,nt=[],it=[];we<$e;++we)nt[we]=it[we]=we,Te[we]=Ce[we];for(;dt<it.length;++dt)we=it[dt],Ne=he[we].L,je=he[we].R,Ye=he[we].C,nt[we]===we&&(Ne!==-1&&nt[Ne]!==Ne&&(nt[we]=nt[Ne]),je!==-1&&nt[je]!==je&&(nt[we]=nt[je])),Ye!==-1&&(nt[Ye]=we),Ne!==-1&&we!=nt[we]&&(nt[Ne]=nt[we],it.lastIndexOf(Ne)<dt&&it.push(Ne)),je!==-1&&we!=nt[we]&&(nt[je]=nt[we],it.lastIndexOf(je)<dt&&it.push(je));for(we=1;we<$e;++we)nt[we]===we&&(je!==-1&&nt[je]!==je?nt[we]=nt[je]:Ne!==-1&&nt[Ne]!==Ne&&(nt[we]=nt[Ne]));for(we=1;we<$e;++we)if(he[we].type!==0){if(dt=we,dt!=nt[dt])do dt=nt[dt],Te[we]=Te[dt]+"/"+Te[we];while(dt!==0&&nt[dt]!==-1&&dt!=nt[dt]);nt[we]=-1}for(Te[0]+="/",we=1;we<$e;++we)he[we].type!==2&&(Te[we]+="/")}function x(he,Te,Ce){for(var we=he.start,Ne=he.size,je=[],Ye=we;Ce&&Ne>0&&Ye>=0;)je.push(Te.slice(Ye*k,Ye*k+k)),Ne-=k,Ye=fg(Ce,Ye*4);return je.length===0?Ct(0):so(je).slice(0,he.size)}function v(he,Te,Ce,we,Ne){var je=P;if(he===P){if(Te!==0)throw new Error("DIFAT chain shorter than expected")}else if(he!==-1){var Ye=Ce[he],dt=(we>>>2)-1;if(!Ye)return;for(var $e=0;$e<dt&&(je=fg(Ye,$e*4))!==P;++$e)Ne.push(je);v(fg(Ye,we-4),Te-1,Ce,we,Ne)}}function y(he,Te,Ce,we,Ne){var je=[],Ye=[];Ne||(Ne=[]);var dt=we-1,$e=0,nt=0;for($e=Te;$e>=0;){Ne[$e]=!0,je[je.length]=$e,Ye.push(he[$e]);var it=Ce[Math.floor($e*4/we)];if(nt=$e*4&dt,we<4+nt)throw new Error("FAT boundary crossed: "+$e+" 4 "+we);if(!he[it])break;$e=fg(he[it],nt)}return{nodes:je,data:kX([Ye])}}function w(he,Te,Ce,we){var Ne=he.length,je=[],Ye=[],dt=[],$e=[],nt=we-1,it=0,Ot=0,zt=0,Zt=0;for(it=0;it<Ne;++it)if(dt=[],zt=it+Te,zt>=Ne&&(zt-=Ne),!Ye[zt]){$e=[];var Vt=[];for(Ot=zt;Ot>=0;){Vt[Ot]=!0,Ye[Ot]=!0,dt[dt.length]=Ot,$e.push(he[Ot]);var Kt=Ce[Math.floor(Ot*4/we)];if(Zt=Ot*4&nt,we<4+Zt)throw new Error("FAT boundary crossed: "+Ot+" 4 "+we);if(!he[Kt]||(Ot=fg(he[Kt],Zt),Vt[Ot]))break}je[zt]={nodes:dt,data:kX([$e])}}return je}function _(he,Te,Ce,we,Ne,je,Ye,dt){for(var $e=0,nt=we.length?2:0,it=Te[he].data,Ot=0,zt=0,Zt;Ot<it.length;Ot+=128){var Vt=it.slice(Ot,Ot+128);Bo(Vt,64),zt=Vt.read_shift(2),Zt=OU(Vt,0,zt-nt),we.push(Zt);var Kt={name:Zt,type:Vt.read_shift(1),color:Vt.read_shift(1),L:Vt.read_shift(4,"i"),R:Vt.read_shift(4,"i"),C:Vt.read_shift(4,"i"),clsid:Vt.read_shift(16),state:Vt.read_shift(4,"i"),start:0,size:0},Br=Vt.read_shift(2)+Vt.read_shift(2)+Vt.read_shift(2)+Vt.read_shift(2);Br!==0&&(Kt.ct=T(Vt,Vt.l-8));var ln=Vt.read_shift(2)+Vt.read_shift(2)+Vt.read_shift(2)+Vt.read_shift(2);ln!==0&&(Kt.mt=T(Vt,Vt.l-8)),Kt.start=Vt.read_shift(4,"i"),Kt.size=Vt.read_shift(4,"i"),Kt.size<0&&Kt.start<0&&(Kt.size=Kt.type=0,Kt.start=P,Kt.name=""),Kt.type===5?($e=Kt.start,Ne>0&&$e!==P&&(Te[$e].name="!StreamData")):Kt.size>=4096?(Kt.storage="fat",Te[Kt.start]===void 0&&(Te[Kt.start]=y(Ce,Kt.start,Te.fat_addrs,Te.ssz)),Te[Kt.start].name=Kt.name,Kt.content=Te[Kt.start].data.slice(0,Kt.size)):(Kt.storage="minifat",Kt.size<0?Kt.size=0:$e!==P&&Kt.start!==P&&Te[$e]&&(Kt.content=x(Kt,Te[$e].data,(Te[dt]||{}).data))),Kt.content&&Bo(Kt.content,0),je[Zt]=Kt,Ye.push(Kt)}}function T(he,Te){return new Date((Gc(he,Te+4)/1e7*Math.pow(2,32)+Gc(he,Te)/1e7-11644473600)*1e3)}function B(he,Te){return u(),d(c.readFileSync(he),Te)}function j(he,Te){var Ce=Te&&Te.type;switch(Ce||vn&&Buffer.isBuffer(he)&&(Ce="buffer"),Ce||"base64"){case"file":return B(he,Te);case"base64":return d(Yc(cu(he)),Te);case"binary":return d(Yc(he),Te)}return d(he,Te)}function E(he,Te){var Ce=Te||{},we=Ce.root||"Root Entry";if(he.FullPaths||(he.FullPaths=[]),he.FileIndex||(he.FileIndex=[]),he.FullPaths.length!==he.FileIndex.length)throw new Error("inconsistent CFB structure");he.FullPaths.length===0&&(he.FullPaths[0]=we+"/",he.FileIndex[0]={name:we,type:5}),Ce.CLSID&&(he.FileIndex[0].clsid=Ce.CLSID),N(he)}function N(he){var Te="Sh33tJ5";if(!Nr.find(he,"/"+Te)){var Ce=Ct(4);Ce[0]=55,Ce[1]=Ce[3]=50,Ce[2]=54,he.FileIndex.push({name:Te,type:2,content:Ce,size:4,L:69,R:69,C:69}),he.FullPaths.push(he.FullPaths[0]+Te),I(he)}}function I(he,Te){E(he);for(var Ce=!1,we=!1,Ne=he.FullPaths.length-1;Ne>=0;--Ne){var je=he.FileIndex[Ne];switch(je.type){case 0:we?Ce=!0:(he.FileIndex.pop(),he.FullPaths.pop());break;case 1:case 2:case 5:we=!0,isNaN(je.R*je.L*je.C)&&(Ce=!0),je.R>-1&&je.L>-1&&je.R==je.L&&(Ce=!0);break;default:Ce=!0;break}}if(!(!Ce&&!Te)){var Ye=new Date(1987,1,19),dt=0,$e=Object.create?Object.create(null):{},nt=[];for(Ne=0;Ne<he.FullPaths.length;++Ne)$e[he.FullPaths[Ne]]=!0,he.FileIndex[Ne].type!==0&&nt.push([he.FullPaths[Ne],he.FileIndex[Ne]]);for(Ne=0;Ne<nt.length;++Ne){var it=n(nt[Ne][0]);we=$e[it],we||(nt.push([it,{name:a(it).replace("/",""),type:1,clsid:V,ct:Ye,mt:Ye,content:null}]),$e[it]=!0)}for(nt.sort(function(Zt,Vt){return r(Zt[0],Vt[0])}),he.FullPaths=[],he.FileIndex=[],Ne=0;Ne<nt.length;++Ne)he.FullPaths[Ne]=nt[Ne][0],he.FileIndex[Ne]=nt[Ne][1];for(Ne=0;Ne<nt.length;++Ne){var Ot=he.FileIndex[Ne],zt=he.FullPaths[Ne];if(Ot.name=a(zt).replace("/",""),Ot.L=Ot.R=Ot.C=-(Ot.color=1),Ot.size=Ot.content?Ot.content.length:0,Ot.start=0,Ot.clsid=Ot.clsid||V,Ne===0)Ot.C=nt.length>1?1:-1,Ot.size=0,Ot.type=5;else if(zt.slice(-1)=="/"){for(dt=Ne+1;dt<nt.length&&n(he.FullPaths[dt])!=zt;++dt);for(Ot.C=dt>=nt.length?-1:dt,dt=Ne+1;dt<nt.length&&n(he.FullPaths[dt])!=n(zt);++dt);Ot.R=dt>=nt.length?-1:dt,Ot.type=1}else n(he.FullPaths[Ne+1]||"")==n(zt)&&(Ot.R=Ne+1),Ot.type=2}}}function L(he,Te){var Ce=Te||{};if(Ce.fileType=="mad")return bt(he,Ce);switch(I(he),Ce.fileType){case"zip":return Da(he,Ce)}var we=function(Zt){for(var Vt=0,Kt=0,Br=0;Br<Zt.FileIndex.length;++Br){var ln=Zt.FileIndex[Br];if(ln.content){var cn=ln.content.length;cn>0&&(cn<4096?Vt+=cn+63>>6:Kt+=cn+511>>9)}}for(var hn=Zt.FullPaths.length+3>>2,ys=Vt+7>>3,Po=Vt+127>>7,ws=ys+Kt+hn+Po,ci=ws+127>>7,Us=ci<=109?0:Math.ceil((ci-109)/127);ws+ci+Us+127>>7>ci;)Us=++ci<=109?0:Math.ceil((ci-109)/127);var Ni=[1,Us,ci,Po,hn,Kt,Vt,0];return Zt.FileIndex[0].size=Vt<<6,Ni[7]=(Zt.FileIndex[0].start=Ni[0]+Ni[1]+Ni[2]+Ni[3]+Ni[4]+Ni[5])+(Ni[6]+7>>3),Ni}(he),Ne=Ct(we[7]<<9),je=0,Ye=0;{for(je=0;je<8;++je)Ne.write_shift(1,W[je]);for(je=0;je<8;++je)Ne.write_shift(2,0);for(Ne.write_shift(2,62),Ne.write_shift(2,3),Ne.write_shift(2,65534),Ne.write_shift(2,9),Ne.write_shift(2,6),je=0;je<3;++je)Ne.write_shift(2,0);for(Ne.write_shift(4,0),Ne.write_shift(4,we[2]),Ne.write_shift(4,we[0]+we[1]+we[2]+we[3]-1),Ne.write_shift(4,0),Ne.write_shift(4,4096),Ne.write_shift(4,we[3]?we[0]+we[1]+we[2]-1:P),Ne.write_shift(4,we[3]),Ne.write_shift(-4,we[1]?we[0]-1:P),Ne.write_shift(4,we[1]),je=0;je<109;++je)Ne.write_shift(-4,je<we[2]?we[1]+je:-1)}if(we[1])for(Ye=0;Ye<we[1];++Ye){for(;je<236+Ye*127;++je)Ne.write_shift(-4,je<we[2]?we[1]+je:-1);Ne.write_shift(-4,Ye===we[1]-1?P:Ye+1)}var dt=function(Zt){for(Ye+=Zt;je<Ye-1;++je)Ne.write_shift(-4,je+1);Zt&&(++je,Ne.write_shift(-4,P))};for(Ye=je=0,Ye+=we[1];je<Ye;++je)Ne.write_shift(-4,G.DIFSECT);for(Ye+=we[2];je<Ye;++je)Ne.write_shift(-4,G.FATSECT);dt(we[3]),dt(we[4]);for(var $e=0,nt=0,it=he.FileIndex[0];$e<he.FileIndex.length;++$e)it=he.FileIndex[$e],it.content&&(nt=it.content.length,!(nt<4096)&&(it.start=Ye,dt(nt+511>>9)));for(dt(we[6]+7>>3);Ne.l&511;)Ne.write_shift(-4,G.ENDOFCHAIN);for(Ye=je=0,$e=0;$e<he.FileIndex.length;++$e)it=he.FileIndex[$e],it.content&&(nt=it.content.length,!(!nt||nt>=4096)&&(it.start=Ye,dt(nt+63>>6)));for(;Ne.l&511;)Ne.write_shift(-4,G.ENDOFCHAIN);for(je=0;je<we[4]<<2;++je){var Ot=he.FullPaths[je];if(!Ot||Ot.length===0){for($e=0;$e<17;++$e)Ne.write_shift(4,0);for($e=0;$e<3;++$e)Ne.write_shift(4,-1);for($e=0;$e<12;++$e)Ne.write_shift(4,0);continue}it=he.FileIndex[je],je===0&&(it.start=it.size?it.start-1:P);var zt=je===0&&Ce.root||it.name;if(nt=2*(zt.length+1),Ne.write_shift(64,zt,"utf16le"),Ne.write_shift(2,nt),Ne.write_shift(1,it.type),Ne.write_shift(1,it.color),Ne.write_shift(-4,it.L),Ne.write_shift(-4,it.R),Ne.write_shift(-4,it.C),it.clsid)Ne.write_shift(16,it.clsid,"hex");else for($e=0;$e<4;++$e)Ne.write_shift(4,0);Ne.write_shift(4,it.state||0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,it.start),Ne.write_shift(4,it.size),Ne.write_shift(4,0)}for(je=1;je<he.FileIndex.length;++je)if(it=he.FileIndex[je],it.size>=4096)if(Ne.l=it.start+1<<9,vn&&Buffer.isBuffer(it.content))it.content.copy(Ne,Ne.l,0,it.size),Ne.l+=it.size+511&-512;else{for($e=0;$e<it.size;++$e)Ne.write_shift(1,it.content[$e]);for(;$e&511;++$e)Ne.write_shift(1,0)}for(je=1;je<he.FileIndex.length;++je)if(it=he.FileIndex[je],it.size>0&&it.size<4096)if(vn&&Buffer.isBuffer(it.content))it.content.copy(Ne,Ne.l,0,it.size),Ne.l+=it.size+63&-64;else{for($e=0;$e<it.size;++$e)Ne.write_shift(1,it.content[$e]);for(;$e&63;++$e)Ne.write_shift(1,0)}if(vn)Ne.l=Ne.length;else for(;Ne.l<Ne.length;)Ne.write_shift(1,0);return Ne}function D(he,Te){var Ce=he.FullPaths.map(function($e){return $e.toUpperCase()}),we=Ce.map(function($e){var nt=$e.split("/");return nt[nt.length-($e.slice(-1)=="/"?2:1)]}),Ne=!1;Te.charCodeAt(0)===47?(Ne=!0,Te=Ce[0].slice(0,-1)+Te):Ne=Te.indexOf("/")!==-1;var je=Te.toUpperCase(),Ye=Ne===!0?Ce.indexOf(je):we.indexOf(je);if(Ye!==-1)return he.FileIndex[Ye];var dt=!je.match(Mw);for(je=je.replace(Rl,""),dt&&(je=je.replace(Mw,"!")),Ye=0;Ye<Ce.length;++Ye)if((dt?Ce[Ye].replace(Mw,"!"):Ce[Ye]).replace(Rl,"")==je||(dt?we[Ye].replace(Mw,"!"):we[Ye]).replace(Rl,"")==je)return he.FileIndex[Ye];return null}var k=64,P=-2,R="d0cf11e0a1b11ae1",W=[208,207,17,224,161,177,26,225],V="00000000000000000000000000000000",G={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:P,FREESECT:-1,HEADER_SIGNATURE:R,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:V,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function z(he,Te,Ce){u();var we=L(he,Ce);c.writeFileSync(Te,we)}function K(he){for(var Te=new Array(he.length),Ce=0;Ce<he.length;++Ce)Te[Ce]=String.fromCharCode(he[Ce]);return Te.join("")}function J(he,Te){var Ce=L(he,Te);switch(Te&&Te.type||"buffer"){case"file":return u(),c.writeFileSync(Te.filename,Ce),Ce;case"binary":return typeof Ce=="string"?Ce:K(Ce);case"base64":return lE(typeof Ce=="string"?Ce:K(Ce));case"buffer":if(vn)return Buffer.isBuffer(Ce)?Ce:m0(Ce);case"array":return typeof Ce=="string"?Yc(Ce):Ce}return Ce}var te;function M(he){try{var Te=he.InflateRaw,Ce=new Te;if(Ce._processChunk(new Uint8Array([3,0]),Ce._finishFlushFlag),Ce.bytesRead)te=he;else throw new Error("zlib does not expose bytesRead")}catch(we){console.error("cannot use native zlib: "+(we.message||we))}}function H(he,Te){if(!te)return Rr(he,Te);var Ce=te.InflateRaw,we=new Ce,Ne=we._processChunk(he.slice(he.l),we._finishFlushFlag);return he.l+=we.bytesRead,Ne}function Y(he){return te?te.deflateRawSync(he):Ht(he)}var Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ae=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],le=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ie(he){var Te=(he<<1|he<<11)&139536|(he<<5|he<<15)&558144;return(Te>>16|Te>>8|Te)&255}for(var ce=typeof Uint8Array<"u",Ae=ce?new Uint8Array(256):[],Fe=0;Fe<256;++Fe)Ae[Fe]=ie(Fe);function ne(he,Te){var Ce=Ae[he&255];return Te<=8?Ce>>>8-Te:(Ce=Ce<<8|Ae[he>>8&255],Te<=16?Ce>>>16-Te:(Ce=Ce<<8|Ae[he>>16&255],Ce>>>24-Te))}function _e(he,Te){var Ce=Te&7,we=Te>>>3;return(he[we]|(Ce<=6?0:he[we+1]<<8))>>>Ce&3}function Ie(he,Te){var Ce=Te&7,we=Te>>>3;return(he[we]|(Ce<=5?0:he[we+1]<<8))>>>Ce&7}function Se(he,Te){var Ce=Te&7,we=Te>>>3;return(he[we]|(Ce<=4?0:he[we+1]<<8))>>>Ce&15}function me(he,Te){var Ce=Te&7,we=Te>>>3;return(he[we]|(Ce<=3?0:he[we+1]<<8))>>>Ce&31}function Be(he,Te){var Ce=Te&7,we=Te>>>3;return(he[we]|(Ce<=1?0:he[we+1]<<8))>>>Ce&127}function Le(he,Te,Ce){var we=Te&7,Ne=Te>>>3,je=(1<<Ce)-1,Ye=he[Ne]>>>we;return Ce<8-we||(Ye|=he[Ne+1]<<8-we,Ce<16-we)||(Ye|=he[Ne+2]<<16-we,Ce<24-we)||(Ye|=he[Ne+3]<<24-we),Ye&je}function We(he,Te,Ce){var we=Te&7,Ne=Te>>>3;return we<=5?he[Ne]|=(Ce&7)<<we:(he[Ne]|=Ce<<we&255,he[Ne+1]=(Ce&7)>>8-we),Te+3}function be(he,Te,Ce){var we=Te&7,Ne=Te>>>3;return Ce=(Ce&1)<<we,he[Ne]|=Ce,Te+1}function Oe(he,Te,Ce){var we=Te&7,Ne=Te>>>3;return Ce<<=we,he[Ne]|=Ce&255,Ce>>>=8,he[Ne+1]=Ce,Te+8}function Pe(he,Te,Ce){var we=Te&7,Ne=Te>>>3;return Ce<<=we,he[Ne]|=Ce&255,Ce>>>=8,he[Ne+1]=Ce&255,he[Ne+2]=Ce>>>8,Te+16}function qe(he,Te){var Ce=he.length,we=2*Ce>Te?2*Ce:Te+5,Ne=0;if(Ce>=Te)return he;if(vn){var je=cX(we);if(he.copy)he.copy(je);else for(;Ne<he.length;++Ne)je[Ne]=he[Ne];return je}else if(ce){var Ye=new Uint8Array(we);if(Ye.set)Ye.set(he);else for(;Ne<Ce;++Ne)Ye[Ne]=he[Ne];return Ye}return he.length=we,he}function et(he){for(var Te=new Array(he),Ce=0;Ce<he;++Ce)Te[Ce]=0;return Te}function ct(he,Te,Ce){var we=1,Ne=0,je=0,Ye=0,dt=0,$e=he.length,nt=ce?new Uint16Array(32):et(32);for(je=0;je<32;++je)nt[je]=0;for(je=$e;je<Ce;++je)he[je]=0;$e=he.length;var it=ce?new Uint16Array($e):et($e);for(je=0;je<$e;++je)nt[Ne=he[je]]++,we<Ne&&(we=Ne),it[je]=0;for(nt[0]=0,je=1;je<=we;++je)nt[je+16]=dt=dt+nt[je-1]<<1;for(je=0;je<$e;++je)dt=he[je],dt!=0&&(it[je]=nt[dt+16]++);var Ot=0;for(je=0;je<$e;++je)if(Ot=he[je],Ot!=0)for(dt=ne(it[je],we)>>we-Ot,Ye=(1<<we+4-Ot)-1;Ye>=0;--Ye)Te[dt|Ye<<Ot]=Ot&15|je<<4;return we}var pt=ce?new Uint16Array(512):et(512),Ft=ce?new Uint16Array(32):et(32);if(!ce){for(var Ut=0;Ut<512;++Ut)pt[Ut]=0;for(Ut=0;Ut<32;++Ut)Ft[Ut]=0}(function(){for(var he=[],Te=0;Te<32;Te++)he.push(5);ct(he,Ft,32);var Ce=[];for(Te=0;Te<=143;Te++)Ce.push(8);for(;Te<=255;Te++)Ce.push(9);for(;Te<=279;Te++)Ce.push(7);for(;Te<=287;Te++)Ce.push(8);ct(Ce,pt,288)})();var Rt=function(){for(var Te=ce?new Uint8Array(32768):[],Ce=0,we=0;Ce<le.length-1;++Ce)for(;we<le[Ce+1];++we)Te[we]=Ce;for(;we<32768;++we)Te[we]=29;var Ne=ce?new Uint8Array(259):[];for(Ce=0,we=0;Ce<ae.length-1;++Ce)for(;we<ae[Ce+1];++we)Ne[we]=Ce;function je(dt,$e){for(var nt=0;nt<dt.length;){var it=Math.min(65535,dt.length-nt),Ot=nt+it==dt.length;for($e.write_shift(1,+Ot),$e.write_shift(2,it),$e.write_shift(2,~it&65535);it-- >0;)$e[$e.l++]=dt[nt++]}return $e.l}function Ye(dt,$e){for(var nt=0,it=0,Ot=ce?new Uint16Array(32768):[];it<dt.length;){var zt=Math.min(65535,dt.length-it);if(zt<10){for(nt=We($e,nt,+(it+zt==dt.length)),nt&7&&(nt+=8-(nt&7)),$e.l=nt/8|0,$e.write_shift(2,zt),$e.write_shift(2,~zt&65535);zt-- >0;)$e[$e.l++]=dt[it++];nt=$e.l*8;continue}nt=We($e,nt,+(it+zt==dt.length)+2);for(var Zt=0;zt-- >0;){var Vt=dt[it];Zt=(Zt<<5^Vt)&32767;var Kt=-1,Br=0;if((Kt=Ot[Zt])&&(Kt|=it&-32768,Kt>it&&(Kt-=32768),Kt<it))for(;dt[Kt+Br]==dt[it+Br]&&Br<250;)++Br;if(Br>2){Vt=Ne[Br],Vt<=22?nt=Oe($e,nt,Ae[Vt+1]>>1)-1:(Oe($e,nt,3),nt+=5,Oe($e,nt,Ae[Vt-23]>>5),nt+=3);var ln=Vt<8?0:Vt-4>>2;ln>0&&(Pe($e,nt,Br-ae[Vt]),nt+=ln),Vt=Te[it-Kt],nt=Oe($e,nt,Ae[Vt]>>3),nt-=3;var cn=Vt<4?0:Vt-2>>1;cn>0&&(Pe($e,nt,it-Kt-le[Vt]),nt+=cn);for(var hn=0;hn<Br;++hn)Ot[Zt]=it&32767,Zt=(Zt<<5^dt[it])&32767,++it;zt-=Br-1}else Vt<=143?Vt=Vt+48:nt=be($e,nt,1),nt=Oe($e,nt,Ae[Vt]),Ot[Zt]=it&32767,++it}nt=Oe($e,nt,0)-1}return $e.l=(nt+7)/8|0,$e.l}return function($e,nt){return $e.length<8?je($e,nt):Ye($e,nt)}}();function Ht(he){var Te=Ct(50+Math.floor(he.length*1.1)),Ce=Rt(he,Te);return Te.slice(0,Ce)}var yt=ce?new Uint16Array(32768):et(32768),jr=ce?new Uint16Array(32768):et(32768),rr=ce?new Uint16Array(128):et(128),on=1,kr=1;function Kr(he,Te){var Ce=me(he,Te)+257;Te+=5;var we=me(he,Te)+1;Te+=5;var Ne=Se(he,Te)+4;Te+=4;for(var je=0,Ye=ce?new Uint8Array(19):et(19),dt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],$e=1,nt=ce?new Uint8Array(8):et(8),it=ce?new Uint8Array(8):et(8),Ot=Ye.length,zt=0;zt<Ne;++zt)Ye[Z[zt]]=je=Ie(he,Te),$e<je&&($e=je),nt[je]++,Te+=3;var Zt=0;for(nt[0]=0,zt=1;zt<=$e;++zt)it[zt]=Zt=Zt+nt[zt-1]<<1;for(zt=0;zt<Ot;++zt)(Zt=Ye[zt])!=0&&(dt[zt]=it[Zt]++);var Vt=0;for(zt=0;zt<Ot;++zt)if(Vt=Ye[zt],Vt!=0){Zt=Ae[dt[zt]]>>8-Vt;for(var Kt=(1<<7-Vt)-1;Kt>=0;--Kt)rr[Zt|Kt<<Vt]=Vt&7|zt<<3}var Br=[];for($e=1;Br.length<Ce+we;)switch(Zt=rr[Be(he,Te)],Te+=Zt&7,Zt>>>=3){case 16:for(je=3+_e(he,Te),Te+=2,Zt=Br[Br.length-1];je-- >0;)Br.push(Zt);break;case 17:for(je=3+Ie(he,Te),Te+=3;je-- >0;)Br.push(0);break;case 18:for(je=11+Be(he,Te),Te+=7;je-- >0;)Br.push(0);break;default:Br.push(Zt),$e<Zt&&($e=Zt);break}var ln=Br.slice(0,Ce),cn=Br.slice(Ce);for(zt=Ce;zt<286;++zt)ln[zt]=0;for(zt=we;zt<30;++zt)cn[zt]=0;return on=ct(ln,yt,286),kr=ct(cn,jr,30),Te}function Fn(he,Te){if(he[0]==3&&!(he[1]&3))return[ip(Te),2];for(var Ce=0,we=0,Ne=cX(Te||1<<18),je=0,Ye=Ne.length>>>0,dt=0,$e=0;(we&1)==0;){if(we=Ie(he,Ce),Ce+=3,we>>>1)we>>1==1?(dt=9,$e=5):(Ce=Kr(he,Ce),dt=on,$e=kr);else{Ce&7&&(Ce+=8-(Ce&7));var nt=he[Ce>>>3]|he[(Ce>>>3)+1]<<8;if(Ce+=32,nt>0)for(!Te&&Ye<je+nt&&(Ne=qe(Ne,je+nt),Ye=Ne.length);nt-- >0;)Ne[je++]=he[Ce>>>3],Ce+=8;continue}for(;;){!Te&&Ye<je+32767&&(Ne=qe(Ne,je+32767),Ye=Ne.length);var it=Le(he,Ce,dt),Ot=we>>>1==1?pt[it]:yt[it];if(Ce+=Ot&15,Ot>>>=4,(Ot>>>8&255)===0)Ne[je++]=Ot;else{if(Ot==256)break;Ot-=257;var zt=Ot<8?0:Ot-4>>2;zt>5&&(zt=0);var Zt=je+ae[Ot];zt>0&&(Zt+=Le(he,Ce,zt),Ce+=zt),it=Le(he,Ce,$e),Ot=we>>>1==1?Ft[it]:jr[it],Ce+=Ot&15,Ot>>>=4;var Vt=Ot<4?0:Ot-2>>1,Kt=le[Ot];for(Vt>0&&(Kt+=Le(he,Ce,Vt),Ce+=Vt),!Te&&Ye<Zt&&(Ne=qe(Ne,Zt+100),Ye=Ne.length);je<Zt;)Ne[je]=Ne[je-Kt],++je}}}return Te?[Ne,Ce+7>>>3]:[Ne.slice(0,je),Ce+7>>>3]}function Rr(he,Te){var Ce=he.slice(he.l||0),we=Fn(Ce,Te);return he.l+=we[1],we[0]}function bs(he,Te){if(he)typeof console<"u"&&console.error(Te);else throw new Error(Te)}function pn(he,Te){var Ce=he;Bo(Ce,0);var we=[],Ne=[],je={FileIndex:we,FullPaths:Ne};E(je,{root:Te.root});for(var Ye=Ce.length-4;(Ce[Ye]!=80||Ce[Ye+1]!=75||Ce[Ye+2]!=5||Ce[Ye+3]!=6)&&Ye>=0;)--Ye;Ce.l=Ye+4,Ce.l+=4;var dt=Ce.read_shift(2);Ce.l+=6;var $e=Ce.read_shift(4);for(Ce.l=$e,Ye=0;Ye<dt;++Ye){Ce.l+=20;var nt=Ce.read_shift(4),it=Ce.read_shift(4),Ot=Ce.read_shift(2),zt=Ce.read_shift(2),Zt=Ce.read_shift(2);Ce.l+=8;var Vt=Ce.read_shift(4),Kt=o(Ce.slice(Ce.l+Ot,Ce.l+Ot+zt));Ce.l+=Ot+zt+Zt;var Br=Ce.l;Ce.l=Vt+4,da(Ce,nt,it,je,Kt),Ce.l=Br}return je}function da(he,Te,Ce,we,Ne){he.l+=2;var je=he.read_shift(2),Ye=he.read_shift(2),dt=i(he);if(je&8257)throw new Error("Unsupported ZIP encryption");for(var $e=he.read_shift(4),nt=he.read_shift(4),it=he.read_shift(4),Ot=he.read_shift(2),zt=he.read_shift(2),Zt="",Vt=0;Vt<Ot;++Vt)Zt+=String.fromCharCode(he[he.l++]);if(zt){var Kt=o(he.slice(he.l,he.l+zt));(Kt[21589]||{}).mt&&(dt=Kt[21589].mt),((Ne||{})[21589]||{}).mt&&(dt=Ne[21589].mt)}he.l+=zt;var Br=he.slice(he.l,he.l+nt);switch(Ye){case 8:Br=H(he,it);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ye)}var ln=!1;je&8&&($e=he.read_shift(4),$e==134695760&&($e=he.read_shift(4),ln=!0),nt=he.read_shift(4),it=he.read_shift(4)),nt!=Te&&bs(ln,"Bad compressed size: "+Te+" != "+nt),it!=Ce&&bs(ln,"Bad uncompressed size: "+Ce+" != "+it),vr(we,Zt,Br,{unsafe:!0,mt:dt})}function Da(he,Te){var Ce=Te||{},we=[],Ne=[],je=Ct(1),Ye=Ce.compression?8:0,dt=0,$e=0,nt=0,it=0,Ot=0,zt=he.FullPaths[0],Zt=zt,Vt=he.FileIndex[0],Kt=[],Br=0;for($e=1;$e<he.FullPaths.length;++$e)if(Zt=he.FullPaths[$e].slice(zt.length),Vt=he.FileIndex[$e],!(!Vt.size||!Vt.content||Zt=="Sh33tJ5")){var ln=it,cn=Ct(Zt.length);for(nt=0;nt<Zt.length;++nt)cn.write_shift(1,Zt.charCodeAt(nt)&127);cn=cn.slice(0,cn.l),Kt[Ot]=aGe.buf(Vt.content,0);var hn=Vt.content;Ye==8&&(hn=Y(hn)),je=Ct(30),je.write_shift(4,67324752),je.write_shift(2,20),je.write_shift(2,dt),je.write_shift(2,Ye),Vt.mt?s(je,Vt.mt):je.write_shift(4,0),je.write_shift(-4,Kt[Ot]),je.write_shift(4,hn.length),je.write_shift(4,Vt.content.length),je.write_shift(2,cn.length),je.write_shift(2,0),it+=je.length,we.push(je),it+=cn.length,we.push(cn),it+=hn.length,we.push(hn),je=Ct(46),je.write_shift(4,33639248),je.write_shift(2,0),je.write_shift(2,20),je.write_shift(2,dt),je.write_shift(2,Ye),je.write_shift(4,0),je.write_shift(-4,Kt[Ot]),je.write_shift(4,hn.length),je.write_shift(4,Vt.content.length),je.write_shift(2,cn.length),je.write_shift(2,0),je.write_shift(2,0),je.write_shift(2,0),je.write_shift(2,0),je.write_shift(4,0),je.write_shift(4,ln),Br+=je.l,Ne.push(je),Br+=cn.length,Ne.push(cn),++Ot}return je=Ct(22),je.write_shift(4,101010256),je.write_shift(2,0),je.write_shift(2,0),je.write_shift(2,Ot),je.write_shift(2,Ot),je.write_shift(4,Br),je.write_shift(4,it),je.write_shift(2,0),so([so(we),so(Ne),je])}var an={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function gr(he,Te){if(he.ctype)return he.ctype;var Ce=he.name||"",we=Ce.match(/\.([^\.]+)$/);return we&&an[we[1]]||Te&&(we=(Ce=Te).match(/[\.\\]([^\.\\])+$/),we&&an[we[1]])?an[we[1]]:"application/octet-stream"}function tt(he){for(var Te=lE(he),Ce=[],we=0;we<Te.length;we+=76)Ce.push(Te.slice(we,we+76));return Ce.join(`\r
`)+`\r
`}function gt(he){var Te=he.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(nt){var it=nt.charCodeAt(0).toString(16).toUpperCase();return"="+(it.length==1?"0"+it:it)});Te=Te.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Te.charAt(0)==`
`&&(Te="=0D"+Te.slice(1)),Te=Te.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Ce=[],we=Te.split(`\r
`),Ne=0;Ne<we.length;++Ne){var je=we[Ne];if(je.length==0){Ce.push("");continue}for(var Ye=0;Ye<je.length;){var dt=76,$e=je.slice(Ye,Ye+dt);$e.charAt(dt-1)=="="?dt--:$e.charAt(dt-2)=="="?dt-=2:$e.charAt(dt-3)=="="&&(dt-=3),$e=je.slice(Ye,Ye+dt),Ye+=dt,Ye<je.length&&($e+="="),Ce.push($e)}}return Ce.join(`\r
`)}function Je(he){for(var Te=[],Ce=0;Ce<he.length;++Ce){for(var we=he[Ce];Ce<=he.length&&we.charAt(we.length-1)=="=";)we=we.slice(0,we.length-1)+he[++Ce];Te.push(we)}for(var Ne=0;Ne<Te.length;++Ne)Te[Ne]=Te[Ne].replace(/[=][0-9A-Fa-f]{2}/g,function(je){return String.fromCharCode(parseInt(je.slice(1),16))});return Yc(Te.join(`\r
`))}function xt(he,Te,Ce){for(var we="",Ne="",je="",Ye,dt=0;dt<10;++dt){var $e=Te[dt];if(!$e||$e.match(/^\s*$/))break;var nt=$e.match(/^(.*?):\s*([^\s].*)$/);if(nt)switch(nt[1].toLowerCase()){case"content-location":we=nt[2].trim();break;case"content-type":je=nt[2].trim();break;case"content-transfer-encoding":Ne=nt[2].trim();break}}switch(++dt,Ne.toLowerCase()){case"base64":Ye=Yc(cu(Te.slice(dt).join("")));break;case"quoted-printable":Ye=Je(Te.slice(dt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Ne)}var it=vr(he,we.slice(Ce.length),Ye,{unsafe:!0});je&&(it.ctype=je)}function Et(he,Te){if(K(he.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Ce=Te&&Te.root||"",we=(vn&&Buffer.isBuffer(he)?he.toString("binary"):K(he)).split(`\r
`),Ne=0,je="";for(Ne=0;Ne<we.length;++Ne)if(je=we[Ne],!!/^Content-Location:/i.test(je)&&(je=je.slice(je.indexOf("file")),Ce||(Ce=je.slice(0,je.lastIndexOf("/")+1)),je.slice(0,Ce.length)!=Ce))for(;Ce.length>0&&(Ce=Ce.slice(0,Ce.length-1),Ce=Ce.slice(0,Ce.lastIndexOf("/")+1),je.slice(0,Ce.length)!=Ce););var Ye=(we[1]||"").match(/boundary="(.*?)"/);if(!Ye)throw new Error("MAD cannot find boundary");var dt="--"+(Ye[1]||""),$e=[],nt=[],it={FileIndex:$e,FullPaths:nt};E(it);var Ot,zt=0;for(Ne=0;Ne<we.length;++Ne){var Zt=we[Ne];Zt!==dt&&Zt!==dt+"--"||(zt++&&xt(it,we.slice(Ot,Ne),Ce),Ot=Ne)}return it}function bt(he,Te){var Ce=Te||{},we=Ce.boundary||"SheetJS";we="------="+we;for(var Ne=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+we.slice(2)+'"',"","",""],je=he.FullPaths[0],Ye=je,dt=he.FileIndex[0],$e=1;$e<he.FullPaths.length;++$e)if(Ye=he.FullPaths[$e].slice(je.length),dt=he.FileIndex[$e],!(!dt.size||!dt.content||Ye=="Sh33tJ5")){Ye=Ye.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Br){return"_x"+Br.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Br){return"_u"+Br.charCodeAt(0).toString(16)+"_"});for(var nt=dt.content,it=vn&&Buffer.isBuffer(nt)?nt.toString("binary"):K(nt),Ot=0,zt=Math.min(1024,it.length),Zt=0,Vt=0;Vt<=zt;++Vt)(Zt=it.charCodeAt(Vt))>=32&&Zt<128&&++Ot;var Kt=Ot>=zt*4/5;Ne.push(we),Ne.push("Content-Location: "+(Ce.root||"file:///C:/SheetJS/")+Ye),Ne.push("Content-Transfer-Encoding: "+(Kt?"quoted-printable":"base64")),Ne.push("Content-Type: "+gr(dt,Ye)),Ne.push(""),Ne.push(Kt?gt(it):tt(it))}return Ne.push(we+`--\r
`),Ne.join(`\r
`)}function ar(he){var Te={};return E(Te,he),Te}function vr(he,Te,Ce,we){var Ne=we&&we.unsafe;Ne||E(he);var je=!Ne&&Nr.find(he,Te);if(!je){var Ye=he.FullPaths[0];Te.slice(0,Ye.length)==Ye?Ye=Te:(Ye.slice(-1)!="/"&&(Ye+="/"),Ye=(Ye+Te).replace("//","/")),je={name:a(Te),type:2},he.FileIndex.push(je),he.FullPaths.push(Ye),Ne||Nr.utils.cfb_gc(he)}return je.content=Ce,je.size=Ce?Ce.length:0,we&&(we.CLSID&&(je.clsid=we.CLSID),we.mt&&(je.mt=we.mt),we.ct&&(je.ct=we.ct)),je}function Yr(he,Te){E(he);var Ce=Nr.find(he,Te);if(Ce){for(var we=0;we<he.FileIndex.length;++we)if(he.FileIndex[we]==Ce)return he.FileIndex.splice(we,1),he.FullPaths.splice(we,1),!0}return!1}function tn(he,Te,Ce){E(he);var we=Nr.find(he,Te);if(we){for(var Ne=0;Ne<he.FileIndex.length;++Ne)if(he.FileIndex[Ne]==we)return he.FileIndex[Ne].name=a(Ce),he.FullPaths[Ne]=Ce,!0}return!1}function Xr(he){I(he,!0)}return t.find=D,t.read=j,t.parse=d,t.write=J,t.writeFile=z,t.utils={cfb_new:ar,cfb_add:vr,cfb_del:Yr,cfb_mov:tn,cfb_gc:Xr,ReadShift:A2,CheckField:Fue,prep_blob:Bo,bconcat:so,use_zlib:M,_deflateRaw:Ht,_inflateRaw:Rr,consts:G},t}();function sGe(e){return typeof e=="string"?iT(e):Array.isArray(e)?j$e(e):e}function vC(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=iT(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?xA(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([sGe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=e,i.href=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=Cp(t)),o.write(t),o.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function iGe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function Ms(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function gX(e,t){for(var r=[],n=Ms(e),a=0;a!==n.length;++a)r[e[n[a]][t]]==null&&(r[e[n[a]][t]]=n[a]);return r}function lT(e){for(var t=[],r=Ms(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function cT(e){for(var t=[],r=Ms(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function oGe(e){for(var t=[],r=Ms(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var B4=new Date(1899,11,30,0,0,0);function Li(e,t){var r=e.getTime(),n=B4.getTime()+(e.getTimezoneOffset()-B4.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var fue=new Date,lGe=B4.getTime()+(fue.getTimezoneOffset()-B4.getTimezoneOffset())*6e4,xX=fue.getTimezoneOffset();function uT(e){var t=new Date;return t.setTime(e*24*60*60*1e3+lGe),t.getTimezoneOffset()!==xX&&t.setTime(t.getTime()+(t.getTimezoneOffset()-xX)*6e4),t}function cGe(e){var t=0,r=0,n=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(a[s],10)}return t}var vX=new Date("2017-02-19T19:06:09.000Z"),Aue=isNaN(vX.getFullYear())?new Date("2/19/17"):vX,uGe=Aue.getFullYear()==2017;function Ka(e,t){var r=new Date(e);if(uGe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(Aue.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function lx(e,t){if(vn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return xA(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return xA(eue(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return xA(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return xA(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function qa(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=qa(e[r]));return t}function Ds(e,t){for(var r="";r.length<t;)r+=e;return r}function af(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(t=Number(n)))?t/r:t}var dGe=["january","february","march","april","may","june","july","august","september","october","november","december"];function db(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),s=t.getDate();if(isNaN(s))return r;var i=e.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&dGe.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var fGe=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(e||typeof n=="string")return r.split(n);for(var s=r.split(n),i=[s[0]],o=1;o<s.length;++o)i.push(a),i.push(s[o]);return i}}();function hue(e){return e?e.content&&e.type?lx(e.content,!0):e.data?Lw(e.data):e.asNodeBuffer&&vn?Lw(e.asNodeBuffer().toString("binary")):e.asBinary?Lw(e.asBinary()):e._data&&e._data.getContent?Lw(lx(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function mue(e){if(!e)return null;if(e.data)return oX(e.data);if(e.asNodeBuffer&&vn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?oX(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function AGe(e){return e&&e.name.slice(-4)===".bin"?mue(e):hue(e)}function Gu(e,t){for(var r=e.FullPaths||Ms(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var i=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||a==i)return e.files?e.files[r[s]]:e.FileIndex[s]}return null}function kU(e,t){var r=Gu(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function xi(e,t,r){if(!r)return AGe(kU(e,t));if(!t)return null;try{return xi(e,t)}catch{return null}}function Jc(e,t,r){if(!r)return hue(kU(e,t));if(!t)return null;try{return Jc(e,t)}catch{return null}}function hGe(e,t,r){return mue(kU(e,t))}function bX(e){for(var t=e.FullPaths||Ms(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function fn(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return vn?n=m0(r):n=I$e(r),Nr.utils.cfb_add(e,t,n)}Nr.utils.cfb_add(e,t,r)}else e.file(t,r)}function BU(){return Nr.utils.cfb_new()}function pue(e,t){switch(t.type){case"base64":return Nr.read(e,{type:"base64"});case"binary":return Nr.read(e,{type:"binary"});case"buffer":case"array":return Nr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Uw(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var li=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,mGe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,yX=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,pGe=/<[^>]*>/g,bl=li.match(yX)?yX:pGe,gGe=/<\w*:/,xGe=/<(\/?)\w+:/;function Wr(e,t,r){for(var n={},a=0,s=0;a!==e.length&&!((s=e.charCodeAt(a))===32||s===10||s===13);++a);if(t||(n[0]=e.slice(0,a)),a===e.length)return n;var i=e.match(mGe),o=0,c="",u=0,d="",f="",h=1;if(i)for(u=0;u!=i.length;++u){for(f=i[u],s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(d=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(h=(a=f.charCodeAt(s+1))==34||a==39?1:0,c=f.slice(s+1+h,f.length-h),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=c,n[d.toLowerCase()]=c;else{var m=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(n[m]&&d.slice(o-3,o)=="ext")continue;n[m]=c,n[m.toLowerCase()]=c}}return n}function FA(e){return e.replace(xGe,"<$1")}var gue={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},TU=lT(gue),Qn=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(e,function(o,c){return gue[o]||String.fromCharCode(parseInt(c,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,c){return String.fromCharCode(parseInt(c,16))});var i=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,i)+r(a.slice(i+3))}}(),jU=/[&<>'"]/g,vGe=/[\u0000-\u0008\u000b-\u001f]/g;function wa(e){var t=e+"";return t.replace(jU,function(r){return TU[r]}).replace(vGe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function wX(e){return wa(e).replace(/ /g,"_x0020_")}var xue=/[\u0000-\u001f]/g;function IU(e){var t=e+"";return t.replace(jU,function(r){return TU[r]}).replace(/\n/g,"<br/>").replace(xue,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function bGe(e){var t=e+"";return t.replace(jU,function(r){return TU[r]}).replace(xue,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var EX=function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}}();function yGe(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function $a(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function G6(e){for(var t="",r=0,n=0,a=0,s=0,i=0,o=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=a&63,t+=String.fromCharCode(i);continue}if(s=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}i=e.charCodeAt(r++),o=((n&7)<<18|(a&63)<<12|(s&63)<<6|i&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function CX(e){var t=ip(2*e.length),r,n,a=1,s=0,i=0,o;for(n=0;n<e.length;n+=a)a=1,(o=e.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(n+1)&63),a=2):o<240?(r=(o&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(o&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(t[s++]=i&255,t[s++]=i>>>8,i=0),t[s++]=r%256,t[s++]=r>>>8;return t.slice(0,s).toString("ucs2")}function _X(e){return m0(e,"binary").toString("utf8")}var p5="foo bar bazâð£",Ba=vn&&(_X(p5)==G6(p5)&&_X||CX(p5)==G6(p5)&&CX)||G6,xA=vn?function(e){return m0(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},uE=function(){var e={};return function(r,n){var a=r+"|"+(n||"");return e[a]?e[a]:e[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),vue=function(){var e=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}}(),wGe=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),EGe=/<\/?(?:vt:)?variant>/g,CGe=/<(?:vt:)([^>]*)>([\s\S]*)</;function SX(e,t){var r=Wr(e),n=e.match(wGe(r.baseType))||[],a=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var i=s.replace(EGe,"").match(CGe);i&&a.push({v:Ba(i[2]),t:i[1]})}),a}var bue=/(^\s|\s$|\n)/;function To(e,t){return"<"+e+(t.match(bue)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function dE(e){return Ms(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function qt(e,t,r){return"<"+e+(r!=null?dE(r):"")+(t!=null?(t.match(bue)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function oP(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function _Ge(e,t){switch(typeof e){case"string":var r=qt("vt:lpwstr",wa(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return qt((e|0)==e?"vt:i4":"vt:r8",wa(String(e)));case"boolean":return qt("vt:bool",e?"true":"false")}if(e instanceof Date)return qt("vt:filetime",oP(e));throw new Error("Unable to serialize "+e)}function FU(e){if(vn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Ba(Cp(_U(e)));throw new Error("Bad input format: expected Buffer or string")}var fE=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Di={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Tx=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],$c={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function SGe(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,s=5;s>=0;--s)a=a*256+e[t+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function NGe(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,s=0,i=n?-t:t;isFinite(i)?i==0?a=s=0:(a=Math.floor(Math.log(i)/Math.LN2),s=i*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(t)?26985:0);for(var o=0;o<=5;++o,s/=256)e[r+o]=s&255;e[r+6]=(a&15)<<4|s&15,e[r+7]=a>>4|n}var NX=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,s=e[0][n].length;a<s;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},kX=vn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:m0(t)})):NX(e)}:NX,BX=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(Ih(e,a)));return n.join("").replace(Rl,"")},OU=vn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Rl,""):BX(e,t,r)}:BX,TX=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},yue=vn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):TX(e,t,r)}:TX,jX=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(Xv(e,a)));return n.join("")},bC=vn?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):jX(t,r,n)}:jX,wue=function(e,t){var r=Gc(e,t);return r>0?bC(e,t+4,t+4+r-1):""},Eue=wue,Cue=function(e,t){var r=Gc(e,t);return r>0?bC(e,t+4,t+4+r-1):""},_ue=Cue,Sue=function(e,t){var r=2*Gc(e,t);return r>0?bC(e,t+4,t+4+r-1):""},Nue=Sue,kue=function(t,r){var n=Gc(t,r);return n>0?OU(t,r+4,r+4+n):""},Bue=kue,Tue=function(e,t){var r=Gc(e,t);return r>0?bC(e,t+4,t+4+r):""},jue=Tue,Iue=function(e,t){return SGe(e,t)},T4=Iue,DU=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};vn&&(Eue=function(t,r){if(!Buffer.isBuffer(t))return wue(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},_ue=function(t,r){if(!Buffer.isBuffer(t))return Cue(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},Nue=function(t,r){if(!Buffer.isBuffer(t))return Sue(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},Bue=function(t,r){if(!Buffer.isBuffer(t))return kue(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},jue=function(t,r){if(!Buffer.isBuffer(t))return Tue(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},T4=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):Iue(t,r)},DU=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Xv=function(e,t){return e[t]},Ih=function(e,t){return e[t+1]*256+e[t]},kGe=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Gc=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},fg=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},BGe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function A2(e,t){var r="",n,a,s=[],i,o,c,u;switch(t){case"dbcs":if(u=this.l,vn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(Ih(this,u)),u+=2;e*=2;break;case"utf8":r=bC(this,this.l,this.l+e);break;case"utf16le":e*=2,r=OU(this,this.l,this.l+e);break;case"wstr":return A2.call(this,e,"dbcs");case"lpstr-ansi":r=Eue(this,this.l),e=4+Gc(this,this.l);break;case"lpstr-cp":r=_ue(this,this.l),e=4+Gc(this,this.l);break;case"lpwstr":r=Nue(this,this.l),e=4+2*Gc(this,this.l);break;case"lpp4":e=4+Gc(this,this.l),r=Bue(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Gc(this,this.l),r=jue(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(i=Xv(this,this.l+e++))!==0;)s.push(m5(i));r=s.join("");break;case"_wstr":for(e=0,r="";(i=Ih(this,this.l+e))!==0;)s.push(m5(i)),e+=2;e+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=Xv(this,u),this.l=u+1,o=A2.call(this,e-c,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(m5(Ih(this,u))),u+=2}r=s.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=Xv(this,u),this.l=u+1,o=A2.call(this,e-c,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(m5(Xv(this,u))),u+=1}r=s.join("");break;default:switch(e){case 1:return n=Xv(this,this.l),this.l++,n;case 2:return n=(t==="i"?kGe:Ih)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?fg:BGe)(this,this.l),this.l+=4,n):(a=Gc(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=T4(this,this.l):a=T4([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=yue(this,this.l,e);break}}return this.l+=e,r}var TGe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},jGe=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},IGe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function FGe(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)IGe(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var i=t.charCodeAt(a);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,TGe(this,t,this.l);break;case 8:if(n=8,r==="f"){NGe(this,t,this.l);break}case 16:break;case-4:n=4,jGe(this,t,this.l);break}return this.l+=n,this}function Fue(e,t){var r=yue(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Bo(e,t){e.l=t,e.read_shift=A2,e.chk=Fue,e.write_shift=FGe}function gl(e,t){e.l+=t}function Ct(e){var t=ip(e);return Bo(t,0),t}function p0(e,t,r){if(e){var n,a,s;Bo(e,e.l||0);for(var i=e.length,o=0,c=0;e.l<i;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var u=xE[o]||xE[65535];for(n=e.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=e.read_shift(1))&127)<<7*a;c=e.l+s;var d=u.f&&u.f(e,s,r);if(e.l=c,t(d,u,o))return}}}function mc(){var e=[],t=vn?256:2048,r=function(u){var d=Ct(u);return Bo(d,0),d},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,t)))},i=function(){return a(),so(e)},o=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(t)};return{next:s,push:o,end:i,_bufs:e}}function Lt(e,t,r,n){var a=+t,s;if(!isNaN(a)){n||(n=xE[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var i=e.next(s);a<=127?i.write_shift(1,a):(i.write_shift(1,(a&127)+128),i.write_shift(1,a>>7));for(var o=0;o!=4;++o)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&DU(r)&&e.push(r)}}function h2(e,t,r){var n=qa(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function IX(e,t,r){var n=qa(e);return n.s=h2(n.s,t.s,r),n.e=h2(n.e,t.s,r),n}function m2(e,t){if(e.cRel&&e.c<0)for(e=qa(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=qa(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=zr(e);return!e.cRel&&e.cRel!=null&&(r=PGe(r)),!e.rRel&&e.rRel!=null&&(r=OGe(r)),r}function K6(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+As(e.s.c)+":"+(e.e.cRel?"":"$")+As(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+ni(e.s.r)+":"+(e.e.rRel?"":"$")+ni(e.e.r):m2(e.s,t.biff)+":"+m2(e.e,t.biff)}function PU(e){return parseInt(DGe(e),10)-1}function ni(e){return""+(e+1)}function OGe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function DGe(e){return e.replace(/\$(\d+)$/,"$1")}function RU(e){for(var t=RGe(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function As(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function PGe(e){return e.replace(/^([A-Z])/,"$$$1")}function RGe(e){return e.replace(/^\$([A-Z])/,"$1")}function LGe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function hs(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function zr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function xc(e){var t=e.indexOf(":");return t==-1?{s:hs(e),e:hs(e)}:{s:hs(e.slice(0,t)),e:hs(e.slice(t+1))}}function sn(e,t){return typeof t>"u"||typeof t=="number"?sn(e.s,e.e):(typeof e!="string"&&(e=zr(e)),typeof t!="string"&&(t=zr(t)),e==t?e:e+":"+t)}function Vn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=e.length;for(r=0;n<s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===s||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function FX(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=dd(e.z,r?Li(t):t)}catch{}try{return e.w=dd((e.XF||{}).numFmtId||(r?14:0),r?Li(t):t)}catch{return""+t}}function a0(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?g0[e.v]||e.v:t==null?FX(e,e.v):FX(e,t))}function _p(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function Oue(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,s=e||(a?[]:{}),i=0,o=0;if(s&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?hs(n.origin):n.origin;i=c.r,o=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=Vn(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[f].length;++h)if(!(typeof t[f][h]>"u")){var m={v:t[f][h]},g=i+f,x=o+h;if(u.s.r>g&&(u.s.r=g),u.s.c>x&&(u.s.c=x),u.e.r<g&&(u.e.r=g),u.e.c<x&&(u.e.c=x),t[f][h]&&typeof t[f][h]=="object"&&!Array.isArray(t[f][h])&&!(t[f][h]instanceof Date))m=t[f][h];else if(Array.isArray(m.v)&&(m.f=t[f][h][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(n.nullError)m.t="e",m.v=0;else if(n.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=n.dateNF||Ur[14],n.cellDates?(m.t="d",m.w=dd(m.z,Li(m.v))):(m.t="n",m.v=Li(m.v),m.w=dd(m.z,m.v))):m.t="s";if(a)s[g]||(s[g]=[]),s[g][x]&&s[g][x].z&&(m.z=s[g][x].z),s[g][x]=m;else{var v=zr({c:x,r:g});s[v]&&s[v].z&&(m.z=s[v].z),s[v]=m}}}return u.s.c<1e7&&(s["!ref"]=sn(u)),s}function ay(e,t){return Oue(null,e,t)}function MGe(e){return e.read_shift(4,"i")}function sf(e,t){return t||(t=Ct(4)),t.write_shift(4,e),t}function ml(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function lo(e,t){var r=!1;return t==null&&(r=!0,t=Ct(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function UGe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function QGe(e,t){return t||(t=Ct(4)),t.write_shift(2,0),t.write_shift(2,0),t}function LU(e,t){var r=e.l,n=e.read_shift(1),a=ml(e),s=[],i={t:a,h:a};if((n&1)!==0){for(var o=e.read_shift(4),c=0;c!=o;++c)s.push(UGe(e));i.r=s}else i.r=[{ich:0,ifnt:0}];return e.l=r+t,i}function HGe(e,t){var r=!1;return t==null&&(r=!0,t=Ct(15+4*e.t.length)),t.write_shift(1,0),lo(e.t,t),r?t.slice(0,t.l):t}var VGe=LU;function zGe(e,t){var r=!1;return t==null&&(r=!0,t=Ct(23+4*e.t.length)),t.write_shift(1,1),lo(e.t,t),t.write_shift(4,1),QGe({},t),r?t.slice(0,t.l):t}function md(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function jx(e,t){return t==null&&(t=Ct(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Ix(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Fx(e,t){return t==null&&(t=Ct(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var $Ge=ml,Due=lo;function MU(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function j4(e,t){var r=!1;return t==null&&(r=!0,t=Ct(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var GGe=ml,lP=MU,UU=j4;function QU(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?T4([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):fg(t,0)>>2;return r?a/100:a}function Pue(e,t){t==null&&(t=Ct(4));var r=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function Rue(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function KGe(e,t){return t||(t=Ct(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var Ox=Rue,sy=KGe;function Al(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function cx(e,t){return(t||Ct(8)).write_shift(8,e,"f")}function qGe(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),s=e.read_shift(2,"i"),i=e.read_shift(1),o=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var u=Pg[a];u&&(t.rgb=hE(u));break;case 2:t.rgb=hE([i,o,c]);break;case 3:t.theme=a;break}return s!=0&&(t.tint=s>0?s/32767:s/32768),t}function I4(e,t){if(t||(t=Ct(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function WGe(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function XGe(e,t){t||(t=Ct(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function Lue(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function YGe(e){return Lue(e,1)}function JGe(e){return Lue(e,2)}var HU=2,nc=3,g5=11,OX=12,F4=19,x5=64,ZGe=65,eKe=71,tKe=4108,rKe=4126,ro=80,Mue=81,nKe=[ro,Mue],cP={1:{n:"CodePage",t:HU},2:{n:"Category",t:ro},3:{n:"PresentationFormat",t:ro},4:{n:"ByteCount",t:nc},5:{n:"LineCount",t:nc},6:{n:"ParagraphCount",t:nc},7:{n:"SlideCount",t:nc},8:{n:"NoteCount",t:nc},9:{n:"HiddenCount",t:nc},10:{n:"MultimediaClipCount",t:nc},11:{n:"ScaleCrop",t:g5},12:{n:"HeadingPairs",t:tKe},13:{n:"TitlesOfParts",t:rKe},14:{n:"Manager",t:ro},15:{n:"Company",t:ro},16:{n:"LinksUpToDate",t:g5},17:{n:"CharacterCount",t:nc},19:{n:"SharedDoc",t:g5},22:{n:"HyperlinksChanged",t:g5},23:{n:"AppVersion",t:nc,p:"version"},24:{n:"DigSig",t:ZGe},26:{n:"ContentType",t:ro},27:{n:"ContentStatus",t:ro},28:{n:"Language",t:ro},29:{n:"Version",t:ro},255:{},2147483648:{n:"Locale",t:F4},2147483651:{n:"Behavior",t:F4},1919054434:{}},uP={1:{n:"CodePage",t:HU},2:{n:"Title",t:ro},3:{n:"Subject",t:ro},4:{n:"Author",t:ro},5:{n:"Keywords",t:ro},6:{n:"Comments",t:ro},7:{n:"Template",t:ro},8:{n:"LastAuthor",t:ro},9:{n:"RevNumber",t:ro},10:{n:"EditTime",t:x5},11:{n:"LastPrinted",t:x5},12:{n:"CreatedDate",t:x5},13:{n:"ModifiedDate",t:x5},14:{n:"PageCount",t:nc},15:{n:"WordCount",t:nc},16:{n:"CharCount",t:nc},17:{n:"Thumbnail",t:eKe},18:{n:"Application",t:ro},19:{n:"DocSecurity",t:nc},255:{},2147483648:{n:"Locale",t:F4},2147483651:{n:"Behavior",t:F4},1919054434:{}},DX={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},aKe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function sKe(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var iKe=sKe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Pg=qa(iKe),g0={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Uue={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},dP={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},v5={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function VU(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function oKe(e){var t=VU();if(!e||!e.match)return t;var r={};if((e.match(bl)||[]).forEach(function(n){var a=Wr(n);switch(a[0].replace(gGe,"<")){case"<?xml":break;case"<Types":t.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":t[dP[a.ContentType]]!==void 0&&t[dP[a.ContentType]].push(a.PartName);break}}),t.xmlns!==Di.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function Que(e,t){var r=oGe(dP),n=[],a;n[n.length]=li,n[n.length]=qt("Types",null,{xmlns:Di.CT,"xmlns:xsd":Di.xsd,"xmlns:xsi":Di.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return qt("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){e[c]&&e[c].length>0&&(a=e[c][0],n[n.length]=qt("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:v5[c][t.bookType]||v5[c].xlsx}))},i=function(c){(e[c]||[]).forEach(function(u){n[n.length]=qt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:v5[c][t.bookType]||v5[c].xlsx})})},o=function(c){(e[c]||[]).forEach(function(u){n[n.length]=qt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return s("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Cn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function AE(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function p2(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(bl)||[]).forEach(function(a){var s=Wr(a);if(s[0]==="<Relationship"){var i={};i.Type=s.Type,i.Target=s.Target,i.Id=s.Id,s.TargetMode&&(i.TargetMode=s.TargetMode);var o=s.TargetMode==="External"?s.Target:Uw(s.Target,t);r[o]=i,n[s.Id]=i}}),r["!id"]=n,r}function B1(e){var t=[li,qt("Relationships",null,{xmlns:Di.RELS})];return Ms(e["!id"]).forEach(function(r){t[t.length]=qt("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function va(e,t,r,n,a,s){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,[Cn.HLINK,Cn.XPATH,Cn.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}var lKe="application/vnd.oasis.opendocument.spreadsheet";function cKe(e,t){for(var r=FU(e),n,a;n=fE.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=Wr(n[0],!1),a.path=="/"&&a.type!==lKe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function uKe(e){var t=[li];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function PX(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function dKe(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function fKe(e){var t=[li];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(PX(e[r][0],e[r][1])),t.push(dKe("",e[r][0]));return t.push(PX("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function Hue(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+_4.version+"</meta:generator></office:meta></office:document-meta>"}var ld=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],AKe=function(){for(var e=new Array(ld.length),t=0;t<ld.length;++t){var r=ld[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function Vue(e){var t={};e=Ba(e);for(var r=0;r<ld.length;++r){var n=ld[r],a=e.match(AKe[r]);a!=null&&a.length>0&&(t[n[1]]=Qn(a[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=Ka(t[n[1]]))}return t}function q6(e,t,r,n,a){a[e]!=null||t==null||t===""||(a[e]=t,t=wa(t),n[n.length]=r?qt(e,t,r):To(e,t))}function zue(e,t){var r=t||{},n=[li,qt("cp:coreProperties",null,{"xmlns:cp":Di.CORE_PROPS,"xmlns:dc":Di.dc,"xmlns:dcterms":Di.dcterms,"xmlns:dcmitype":Di.dcmitype,"xmlns:xsi":Di.xsi})],a={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&q6("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:oP(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&q6("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:oP(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=ld.length;++s){var i=ld[s],o=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:e?e[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&q6(i[0],o,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Rg=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],$ue=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Gue(e,t,r,n){var a=[];if(typeof e=="string")a=SX(e,n);else for(var s=0;s<e.length;++s)a=a.concat(e[s].map(function(d){return{v:d}}));var i=typeof t=="string"?SX(t,n).map(function(d){return d.v}):t,o=0,c=0;if(i.length>0)for(var u=0;u!==a.length;u+=2){switch(c=+a[u+1].v,a[u].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=i.slice(o,o+c);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":r.NamedRanges=c,r.DefinedNames=i.slice(o,o+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=i.slice(o,o+c);break}o+=c}}function hKe(e,t,r){var n={};return t||(t={}),e=Ba(e),Rg.forEach(function(a){var s=(e.match(uE(a[0]))||[])[1];switch(a[2]){case"string":s&&(t[a[1]]=Qn(s));break;case"bool":t[a[1]]=s==="true";break;case"raw":var i=e.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));i&&i.length>0&&(n[a[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&Gue(n.HeadingPairs,n.TitlesOfParts,t,r),t}function Kue(e){var t=[],r=qt;return e||(e={}),e.Application="SheetJS",t[t.length]=li,t[t.length]=qt("Properties",null,{xmlns:Di.EXT_PROPS,"xmlns:vt":Di.vt}),Rg.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=wa(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+wa(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var mKe=/<[^>]+>[^<]*/g;function pKe(e,t){var r={},n="",a=e.match(mKe);if(a)for(var s=0;s!=a.length;++s){var i=a[s],o=Wr(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Qn(o.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var c=i.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=Qn(d);break;case"bool":r[n]=$a(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=Ka(d);break;case"cy":case"error":r[n]=Qn(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,c)}}else if(i.slice(0,2)!=="</"){if(t.WTF)throw new Error(i)}}}return r}function que(e){var t=[li,qt("Properties",null,{xmlns:Di.CUST_PROPS,"xmlns:vt":Di.vt})];if(!e)return t.join("");var r=1;return Ms(e).forEach(function(a){++r,t[t.length]=qt("property",_Ge(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:wa(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var fP={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},W6;function gKe(e,t,r){W6||(W6=lT(fP)),t=W6[t]||t,e[t]=r}function xKe(e,t){var r=[];return Ms(fP).map(function(n){for(var a=0;a<ld.length;++a)if(ld[a][1]==n)return ld[a];for(a=0;a<Rg.length;++a)if(Rg[a][1]==n)return Rg[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(To(fP[n[1]]||n[1],a))}}),qt("DocumentProperties",r.join(""),{xmlns:$c.o})}function vKe(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&Ms(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)){for(var i=0;i<ld.length;++i)if(s==ld[i][1])return;for(i=0;i<Rg.length;++i)if(s==Rg[i][1])return;for(i=0;i<r.length;++i)if(s==r[i])return;var o=e[s],c="string";typeof o=="number"?(c="float",o=String(o)):o===!0||o===!1?(c="boolean",o=o?"1":"0"):o=String(o),a.push(qt(wX(s),o,{"dt:dt":c}))}}),t&&Ms(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)&&!(e&&Object.prototype.hasOwnProperty.call(e,s))){var i=t[s],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),a.push(qt(wX(s),i,{"dt:dt":o}))}}),"<"+n+' xmlns="'+$c.o+'">'+a.join("")+"</"+n+">"}function zU(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function bKe(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var i=Ct(8);return i.write_shift(4,n),i.write_shift(4,a),i}function Wue(e,t,r){var n=e.l,a=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return a}function Xue(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function Yue(e,t,r){return t===31?Xue(e):Wue(e,t,r)}function AP(e,t,r){return Yue(e,t,r===!1?0:4)}function yKe(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return Yue(e,t,0)}function wKe(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var a=e.l;r[n]=e.read_shift(0,"lpwstr").replace(Rl,""),e.l-a&2&&(e.l+=2)}return r}function EKe(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(Rl,"");return r}function CKe(e){var t=e.l,r=O4(e,Mue);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=O4(e,nc);return[r,n]}function _Ke(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(CKe(e));return r}function RX(e,t){for(var r=e.read_shift(4),n={},a=0;a!=r;++a){var s=e.read_shift(4),i=e.read_shift(4);n[s]=e.read_shift(i,t===1200?"utf16le":"utf8").replace(Rl,"").replace(Mw,"!"),t===1200&&i%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function Jue(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function SKe(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function O4(e,t,r){var n=e.read_shift(2),a,s=r||{};if(e.l+=2,t!==OX&&n!==t&&nKe.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===OX?n:t){case 2:return a=e.read_shift(2,"i"),s.raw||(e.l+=2),a;case 3:return a=e.read_shift(4,"i"),a;case 11:return e.read_shift(4)!==0;case 19:return a=e.read_shift(4),a;case 30:return Wue(e,n,4).replace(Rl,"");case 31:return Xue(e);case 64:return zU(e);case 65:return Jue(e);case 71:return SKe(e);case 80:return AP(e,n,!s.raw).replace(Rl,"");case 81:return yKe(e,n).replace(Rl,"");case 4108:return _Ke(e);case 4126:case 4127:return n==4127?wKe(e):EKe(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function LX(e,t){var r=Ct(4),n=Ct(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=Ct(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=bKe(t);break;case 31:case 80:for(n=Ct(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return so([r,n])}function MX(e,t){var r=e.l,n=e.read_shift(4),a=e.read_shift(4),s=[],i=0,o=0,c=-1,u={};for(i=0;i!=a;++i){var d=e.read_shift(4),f=e.read_shift(4);s[i]=[d,f+r]}s.sort(function(w,_){return w[1]-_[1]});var h={};for(i=0;i!=a;++i){if(e.l!==s[i][1]){var m=!0;if(i>0&&t)switch(t[s[i-1][0]].t){case 2:e.l+2===s[i][1]&&(e.l+=2,m=!1);break;case 80:e.l<=s[i][1]&&(e.l=s[i][1],m=!1);break;case 4108:e.l<=s[i][1]&&(e.l=s[i][1],m=!1);break}if((!t||i==0)&&e.l<=s[i][1]&&(m=!1,e.l=s[i][1]),m)throw new Error("Read Error: Expected address "+s[i][1]+" at "+e.l+" :"+i)}if(t){var g=t[s[i][0]];if(h[g.n]=O4(e,g.t,{raw:!0}),g.p==="version"&&(h[g.n]=String(h[g.n]>>16)+"."+("0000"+String(h[g.n]&65535)).slice(-4)),g.n=="CodePage")switch(h[g.n]){case 0:h[g.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Xd(o=h[g.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[g.n])}}else if(s[i][0]===1){if(o=h.CodePage=O4(e,HU),Xd(o),c!==-1){var x=e.l;e.l=s[c][1],u=RX(e,o),e.l=x}}else if(s[i][0]===0){if(o===0){c=i,e.l=s[i+1][1];continue}u=RX(e,o)}else{var v=u[s[i][0]],y;switch(e[e.l]){case 65:e.l+=4,y=Jue(e);break;case 30:e.l+=4,y=AP(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,y=AP(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,y=e.read_shift(4,"i");break;case 19:e.l+=4,y=e.read_shift(4);break;case 5:e.l+=4,y=e.read_shift(8,"f");break;case 11:e.l+=4,y=qs(e,4);break;case 64:e.l+=4,y=Ka(zU(e));break;default:throw new Error("unparsed value: "+e[e.l])}h[v]=y}}return e.l=r+n,h}var Zue=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function NKe(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function UX(e,t,r){var n=Ct(8),a=[],s=[],i=8,o=0,c=Ct(8),u=Ct(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),a.push(u),i+=8+c.length,!t){u=Ct(8),u.write_shift(4,0),a.unshift(u);var d=[Ct(4)];for(d[0].write_shift(4,e.length),o=0;o<e.length;++o){var f=e[o][0];for(c=Ct(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,o+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=so(d),s.unshift(c),i+=8+c.length}for(o=0;o<e.length;++o)if(!(t&&!t[e[o][0]])&&!(Zue.indexOf(e[o][0])>-1||$ue.indexOf(e[o][0])>-1)&&e[o][1]!=null){var h=e[o][1],m=0;if(t){m=+t[e[o][0]];var g=r[m];if(g.p=="version"&&typeof h=="string"){var x=h.split(".");h=(+x[0]<<16)+(+x[1]||0)}c=LX(g.t,h)}else{var v=NKe(h);v==-1&&(v=31,h=String(h)),c=LX(v,h)}s.push(c),u=Ct(8),u.write_shift(4,t?m:2+o),a.push(u),i+=8+c.length}var y=8*(s.length+1);for(o=0;o<s.length;++o)a[o].write_shift(4,y),y+=s[o].length;return n.write_shift(4,i),n.write_shift(4,s.length),so([n].concat(a).concat(s))}function QX(e,t,r){var n=e.content;if(!n)return{};Bo(n,0);var a,s,i,o,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==Nr.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),o=n.read_shift(4),a===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);a===2&&(i=n.read_shift(16),c=n.read_shift(4));var f=MX(n,t),h={SystemIdentifier:u};for(var m in f)h[m]=f[m];if(h.FMTID=s,a===1)return h;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var g;try{g=MX(n,null)}catch{}for(m in g)h[m]=g[m];return h.FMTID=[s,i],h}function HX(e,t,r,n,a,s){var i=Ct(a?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,Nr.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,a?2:1),i.write_shift(16,t,"hex"),i.write_shift(4,a?68:48);var c=UX(e,r,n);if(o.push(c),a){var u=UX(a,null,null);i.write_shift(16,s,"hex"),i.write_shift(4,68+c.length),o.push(u)}return so(o)}function im(e,t){return e.read_shift(t),null}function kKe(e,t){t||(t=Ct(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function BKe(e,t,r){for(var n=[],a=e.l+t;e.l<a;)n.push(r(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return n}function qs(e,t){return e.read_shift(t)===1}function Bl(e,t){return t||(t=Ct(2)),t.write_shift(2,+!!e),t}function vi(e){return e.read_shift(2,"u")}function qu(e,t){return t||(t=Ct(2)),t.write_shift(2,e),t}function ede(e,t){return BKe(e,t,vi)}function TKe(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function tde(e,t,r){return r||(r=Ct(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function yC(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=e.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var i=n?e.read_shift(n,a):"";return i}function jKe(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,a=r&8,s=1+(r&1),i=0,o,c={};a&&(i=e.read_shift(2)),n&&(o=e.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,u);return a&&(e.l+=4*i),n&&(e.l+=o),c.t=d,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function IKe(e){var t=e.t||"",r=Ct(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=Ct(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[r,n];return so(a)}function ux(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function wC(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):ux(e,n,r)}function Dx(e,t,r){if(r.biff>5)return wC(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function rde(e,t,r){return r||(r=Ct(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function FKe(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function OKe(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var a=e.read_shift((n?t-24:t)>>1,"utf16le").replace(Rl,"");return n&&(e.l+=24),a}function DKe(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=e.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=e.read_shift(s>>1,"utf16le").replace(Rl,"");return r+i}function PKe(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return OKe(e);case"0303000000000000c000000000000046":return DKe(e);default:throw new Error("Unsupported Moniker "+r)}}function b5(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(Rl,""):"";return r}function VX(e,t){t||(t=Ct(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function RKe(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=e.read_shift(2);e.l+=2;var s,i,o,c,u="",d,f;a&16&&(s=b5(e,r-e.l)),a&128&&(i=b5(e,r-e.l)),(a&257)===257&&(o=b5(e,r-e.l)),(a&257)===1&&(c=PKe(e,r-e.l)),a&8&&(u=b5(e,r-e.l)),a&32&&(d=e.read_shift(16)),a&64&&(f=zU(e)),e.l=r;var h=i||o||c||"";h&&u&&(h+="#"+u),h||(h="#"+u),a&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var m={Target:h};return d&&(m.guid=d),f&&(m.time=f),s&&(m.Tooltip=s),m}function LKe(e){var t=Ct(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}t.write_shift(4,2),t.write_shift(4,s);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)t.write_shift(4,i[r]);if(s==28)n=n.slice(1),VX(n,t);else if(s&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));var o=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),s&8&&VX(a>-1?n.slice(a+1):"",t)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function nde(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),a=e.read_shift(1);return[t,r,n,a]}function ade(e,t){var r=nde(e);return r[3]=0,r}function OA(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function dx(e,t,r,n){return n||(n=Ct(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function MKe(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function UKe(e,t,r){return t===0?"":Dx(e,t,r)}function QKe(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),s=e.read_shift(n,"i"),i=e.read_shift(n,"i");return[a,s,i]}function sde(e){var t=e.read_shift(2),r=QU(e);return[t,r]}function HKe(e,t,r){e.l+=4,t-=4;var n=e.l+t,a=yC(e,t,r),s=e.read_shift(2);if(n-=e.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return e.l+=s,a}function dT(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function ide(e,t){return t||(t=Ct(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function ode(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),a=e.read_shift(1);return{s:{c:n,r:t},e:{c:a,r}}}var VKe=ode;function lde(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function zKe(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function $Ke(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Zo(e){e.l+=2,e.l+=e.read_shift(2)}var GKe={0:Zo,4:Zo,5:Zo,6:Zo,7:$Ke,8:Zo,9:Zo,10:Zo,11:Zo,12:Zo,13:zKe,14:Zo,15:Zo,16:Zo,17:Zo,18:Zo,19:Zo,20:Zo,21:lde};function KKe(e,t){for(var r=e.l+t,n=[];e.l<r;){var a=e.read_shift(2);e.l-=2;try{n.push(GKe[a](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function y5(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function $U(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Ct(a);return s.write_shift(2,n),s.write_shift(2,t),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function qKe(e,t){return t===0||e.read_shift(2),1200}function WKe(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,a=Dx(e,0,r);return e.read_shift(t+n-e.l),a}function XKe(e,t){var r=!t||t.biff==8,n=Ct(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function YKe(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function JKe(e,t,r){var n=e.read_shift(4),a=e.read_shift(1)&3,s=e.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var i=yC(e,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:a,dt:s,name:i}}function ZKe(e,t){var r=!t||t.biff>=8?2:1,n=Ct(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function eqe(e,t){for(var r=e.l+t,n=e.read_shift(4),a=e.read_shift(4),s=[],i=0;i!=a&&e.l<r;++i)s.push(jKe(e));return s.Count=n,s.Unique=a,s}function tqe(e,t){var r=Ct(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=IKe(e[a]);var s=so([r].concat(n));return s.parts=[r.length].concat(n.map(function(i){return i.length})),s}function rqe(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function nqe(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function aqe(e){var t=MKe(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function sqe(e){return e.read_shift(2),e.read_shift(4)}function zX(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var a=e.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function iqe(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),c=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[n,a],Flags:s,CurTab:i,FirstTab:o,Selected:c,TabRatio:u}}function oqe(){var e=Ct(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function lqe(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function cqe(e){var t=Ct(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function uqe(){}function dqe(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=yC(e,0,r),n}function fqe(e,t){var r=e.name||"Arial",n=t&&t.biff==5,a=n?15+r.length:16+2*r.length,s=Ct(a);return s.write_shift(2,e.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function Aqe(e){var t=OA(e);return t.isst=e.read_shift(4),t}function hqe(e,t,r,n){var a=Ct(10);return dx(e,t,n,a),a.write_shift(4,r),a}function mqe(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,a=OA(e);r.biff==2&&e.l++;var s=wC(e,n-e.l,r);return a.val=s,a}function pqe(e,t,r,n,a){var s=!a||a.biff==8,i=Ct(8+ +s+(1+s)*r.length);return dx(e,t,n,i),i.write_shift(2,r.length),s&&i.write_shift(1,1),i.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),i}function gqe(e,t,r){var n=e.read_shift(2),a=Dx(e,0,r);return[n,a]}function xqe(e,t,r,n){var a=r&&r.biff==5;n||(n=Ct(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var vqe=Dx;function $X(e,t,r){var n=e.l+t,a=r.biff==8||!r.biff?4:2,s=e.read_shift(a),i=e.read_shift(a),o=e.read_shift(2),c=e.read_shift(2);return e.l=n,{s:{r:s,c:o},e:{r:i,c}}}function bqe(e,t){var r=t.biff==8||!t.biff?4:2,n=Ct(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function yqe(e){var t=e.read_shift(2),r=e.read_shift(2),n=sde(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function wqe(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(sde(e));if(e.l!==r)throw new Error("MulRK read error");var i=e.read_shift(2);if(s.length!=i-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:i,rkrec:s}}function Eqe(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var i=e.read_shift(2);if(s.length!=i-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:i,ixfe:s}}function Cqe(e,t,r,n){var a={},s=e.read_shift(4),i=e.read_shift(4),o=e.read_shift(4),c=e.read_shift(2);return a.patternType=aKe[o>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=i&15,a.dgRight=i>>4&15,a.dgTop=i>>8&15,a.dgBottom=i>>12&15,a.icvLeft=i>>16&127,a.icvRight=i>>23&127,a.grbitDiag=i>>30&3,a.icvTop=o&127,a.icvBottom=o>>7&127,a.icvDiag=o>>14&127,a.dgDiag=o>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function _qe(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=Cqe(e,t,n.fStyle,r),n}function GX(e,t,r,n){var a=r&&r.biff==5;n||(n=Ct(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function Sqe(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function Nqe(e){var t=Ct(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function KX(e,t,r){var n=OA(e);(r.biff==2||t==9)&&++e.l;var a=TKe(e);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function kqe(e,t,r,n,a,s){var i=Ct(8);return dx(e,t,n,i),tde(r,s,i),i}function Bqe(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=OA(e),a=Al(e);return n.val=a,n}function Tqe(e,t,r,n){var a=Ct(14);return dx(e,t,n,a),cx(r,a),a}var qX=UKe;function jqe(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var i=ux(e,s),o=[];n>e.l;)o.push(wC(e));return[s,a,i,o]}function WX(e,t,r){var n=e.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=HKe(e,t-2,r)),s.body=a||e.read_shift(t-2),typeof a=="string"&&(s.Name=a),s}var Iqe=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function XX(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(1),i=e.read_shift(1),o=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=ux(e,i,r);a&32&&(u=Iqe[u.charCodeAt(0)]);var d=n-e.l;r&&r.biff==2&&--d;var f=n==e.l||o===0||!(d>0)?[]:KJe(e,d,r,o);return{chKey:s,Name:u,itab:c,rgce:f}}function cde(e,t,r){if(r.biff<8)return Fqe(e,t,r);for(var n=[],a=e.l+t,s=e.read_shift(r.biff>8?4:2);s--!==0;)n.push(QKe(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function Fqe(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=yC(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function Oqe(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),a=e.read_shift(2),s=ux(e,n,r),i=ux(e,a,r);return[s,i]}function Dqe(e,t,r){var n=ode(e);e.l++;var a=e.read_shift(1);return t-=8,[qJe(e,t,r),a,n]}function YX(e,t,r){var n=VKe(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,$Je(e,t,r)]}function Pqe(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function Rqe(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=Dx(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:a},o,i,s]}}function Lqe(e,t,r){return Rqe(e,t,r)}function Mqe(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(dT(e));return r}function Uqe(e){var t=Ct(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)ide(e[r],t);return t}function Qqe(e,t,r){if(r&&r.biff<8)return Vqe(e,t,r);var n=lde(e),a=KKe(e,t-22,n[1]);return{cmo:n,ft:a}}var Hqe={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=r,{fmt:n}}};function Vqe(e,t,r){e.l+=4;var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var i=[];return i.push((Hqe[n]||gl)(e,t,r)),{cmo:[a,n,s],ft:i}}function zqe(e,t,r){var n=e.l,a="";try{e.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(s)==-1?e.l+=6:i=FKe(e,6,r);var o=e.read_shift(2);e.read_shift(2),vi(e,2);var c=e.read_shift(2);e.l+=c;for(var u=1;u<e.lens.length-1;++u){if(e.l-n!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],f=ux(e,e.lens[u+1]-e.lens[u]-1);if(a+=f,a.length>=(d?o:2*o))break}if(a.length!==o&&a.length!==o*2)throw new Error("cchText: "+o+" != "+a.length);return e.l=n+t,{t:a}}catch{return e.l=n+t,{t:a}}}function $qe(e,t){var r=dT(e);e.l+=16;var n=RKe(e,t-24);return[r,n]}function Gqe(e){var t=Ct(24),r=hs(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return so([t,LKe(e[1])])}function Kqe(e,t){e.read_shift(2);var r=dT(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(Rl,""),[r,n]}function qqe(e){var t=e[1].Tooltip,r=Ct(10+2*(t.length+1));r.write_shift(2,2048);var n=hs(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function Wqe(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=DX[r]||r,r=e.read_shift(2),t[1]=DX[r]||r,t}function Xqe(e){return e||(e=Ct(4)),e.write_shift(2,1),e.write_shift(2,1),e}function Yqe(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(ade(e));return r}function Jqe(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(ade(e));return r}function Zqe(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function ude(e,t,r){if(!r.cellStyles)return gl(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),s=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var u={s:a,e:s,w:i,ixfe:o,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function eWe(e,t){var r=Ct(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function tWe(e,t){var r={};return t<32||(e.l+=16,r.header=Al(e),r.footer=Al(e),e.l+=2),r}function rWe(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var a=e.read_shift(1);return e.l+=3,a&16&&(n.area=!0),n}function nWe(e){for(var t=Ct(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var aWe=OA,sWe=ede,iWe=wC;function oWe(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,a}function lWe(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=OA(e);++e.l;var a=Dx(e,t-7,r);return n.t="str",n.val=a,n}function cWe(e){var t=OA(e);++e.l;var r=Al(e);return t.t="n",t.val=r,t}function uWe(e,t,r){var n=Ct(15);return SC(n,e,t),n.write_shift(8,r,"f"),n}function dWe(e){var t=OA(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function fWe(e,t,r){var n=Ct(9);return SC(n,e,t),n.write_shift(2,r),n}function AWe(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function hWe(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function mWe(e,t,r){var n=e.l+t,a=OA(e),s=e.read_shift(2),i=ux(e,s,r);return e.l=n,a.t="str",a.val=i,a}var pWe=[2,3,48,49,131,139,140,245],hP=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=lT({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,c){var u=[],d=ip(1);switch(c.type){case"base64":d=Yc(cu(o));break;case"binary":d=Yc(o);break;case"buffer":case"array":d=o;break}Bo(d,0);var f=d.read_shift(1),h=!!(f&136),m=!1,g=!1;switch(f){case 2:break;case 3:break;case 48:m=!0,h=!0;break;case 49:m=!0,h=!0;break;case 131:break;case 139:break;case 140:g=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var x=0,v=521;f==2&&(x=d.read_shift(2)),d.l+=3,f!=2&&(x=d.read_shift(4)),x>1048576&&(x=1e6),f!=2&&(v=d.read_shift(2));var y=d.read_shift(2),w=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(w=e[d[d.l]]),d.l+=1,d.l+=2),g&&(d.l+=36);for(var _=[],T={},B=Math.min(d.length,f==2?521:v-10-(m?264:0)),j=g?32:11;d.l<B&&d[d.l]!=13;)switch(T={},T.name=oE.utils.decode(w,d.slice(d.l,d.l+j)).replace(/[\u0000\r\n].*$/g,""),d.l+=j,T.type=String.fromCharCode(d.read_shift(1)),f!=2&&!g&&(T.offset=d.read_shift(4)),T.len=d.read_shift(1),f==2&&(T.offset=d.read_shift(2)),T.dec=d.read_shift(1),T.name.length&&_.push(T),f!=2&&(d.l+=g?13:14),T.type){case"B":(!m||T.len!=8)&&c.WTF&&console.log("Skipping "+T.name+":"+T.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+T.name+":"+T.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+T.type)}if(d[d.l]!==13&&(d.l=v-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=v;var E=0,N=0;for(u[0]=[],N=0;N!=_.length;++N)u[0][N]=_[N].name;for(;x-- >0;){if(d[d.l]===42){d.l+=y;continue}for(++d.l,u[++E]=[],N=0,N=0;N!=_.length;++N){var I=d.slice(d.l,d.l+_[N].len);d.l+=_[N].len,Bo(I,0);var L=oE.utils.decode(w,I);switch(_[N].type){case"C":L.trim().length&&(u[E][N]=L.replace(/\s+$/,""));break;case"D":L.length===8?u[E][N]=new Date(+L.slice(0,4),+L.slice(4,6)-1,+L.slice(6,8)):u[E][N]=L;break;case"F":u[E][N]=parseFloat(L.trim());break;case"+":case"I":u[E][N]=g?I.read_shift(-4,"i")^2147483648:I.read_shift(4,"i");break;case"L":switch(L.trim().toUpperCase()){case"Y":case"T":u[E][N]=!0;break;case"N":case"F":u[E][N]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+L+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[E][N]="##MEMO##"+(g?parseInt(L.trim(),10):I.read_shift(4));break;case"N":L=L.replace(/\u0000/g,"").trim(),L&&L!="."&&(u[E][N]=+L||0);break;case"@":u[E][N]=new Date(I.read_shift(-8,"f")-621356832e5);break;case"T":u[E][N]=new Date((I.read_shift(4)-2440588)*864e5+I.read_shift(4));break;case"Y":u[E][N]=I.read_shift(4,"i")/1e4+I.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[E][N]=-I.read_shift(-8,"f");break;case"B":if(m&&_[N].len==8){u[E][N]=I.read_shift(8,"f");break}case"G":case"P":I.l+=_[N].len;break;case"0":if(_[N].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+_[N].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=_,u}function n(o,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=ay(r(o,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(o,c){try{return _p(n(o,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,c){var u=c||{};if(+u.codepage>=0&&Xd(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=mc(),f=R4(o,{header:1,raw:!0,cellDates:!0}),h=f[0],m=f.slice(1),g=o["!cols"]||[],x=0,v=0,y=0,w=1;for(x=0;x<h.length;++x){if(((g[x]||{}).DBF||{}).name){h[x]=g[x].DBF.name,++y;continue}if(h[x]!=null){if(++y,typeof h[x]=="number"&&(h[x]=h[x].toString(10)),typeof h[x]!="string")throw new Error("DBF Invalid column name "+h[x]+" |"+typeof h[x]+"|");if(h.indexOf(h[x])!==x){for(v=0;v<1024;++v)if(h.indexOf(h[x]+"_"+v)==-1){h[x]+="_"+v;break}}}}var _=Vn(o["!ref"]),T=[],B=[],j=[];for(x=0;x<=_.e.c-_.s.c;++x){var E="",N="",I=0,L=[];for(v=0;v<m.length;++v)m[v][x]!=null&&L.push(m[v][x]);if(L.length==0||h[x]==null){T[x]="?";continue}for(v=0;v<L.length;++v){switch(typeof L[v]){case"number":N="B";break;case"string":N="C";break;case"boolean":N="L";break;case"object":N=L[v]instanceof Date?"D":"C";break;default:N="C"}I=Math.max(I,String(L[v]).length),E=E&&E!=N?"C":N}I>250&&(I=250),N=((g[x]||{}).DBF||{}).type,N=="C"&&g[x].DBF.len>I&&(I=g[x].DBF.len),E=="B"&&N=="N"&&(E="N",j[x]=g[x].DBF.dec,I=g[x].DBF.len),B[x]=E=="C"||N=="N"?I:s[E]||0,w+=B[x],T[x]=E}var D=d.next(32);for(D.write_shift(4,318902576),D.write_shift(4,m.length),D.write_shift(2,296+32*y),D.write_shift(2,w),x=0;x<4;++x)D.write_shift(4,0);for(D.write_shift(4,0|(+t[Zce]||3)<<8),x=0,v=0;x<h.length;++x)if(h[x]!=null){var k=d.next(32),P=(h[x].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);k.write_shift(1,P,"sbcs"),k.write_shift(1,T[x]=="?"?"C":T[x],"sbcs"),k.write_shift(4,v),k.write_shift(1,B[x]||s[T[x]]||0),k.write_shift(1,j[x]||0),k.write_shift(1,2),k.write_shift(4,0),k.write_shift(1,0),k.write_shift(4,0),k.write_shift(4,0),v+=B[x]||s[T[x]]||0}var R=d.next(264);for(R.write_shift(4,13),x=0;x<65;++x)R.write_shift(4,0);for(x=0;x<m.length;++x){var W=d.next(w);for(W.write_shift(1,0),v=0;v<h.length;++v)if(h[v]!=null)switch(T[v]){case"L":W.write_shift(1,m[x][v]==null?63:m[x][v]?84:70);break;case"B":W.write_shift(8,m[x][v]||0,"f");break;case"N":var V="0";for(typeof m[x][v]=="number"&&(V=m[x][v].toFixed(j[v]||0)),y=0;y<B[v]-V.length;++y)W.write_shift(1,32);W.write_shift(1,V,"sbcs");break;case"D":m[x][v]?(W.write_shift(4,("0000"+m[x][v].getFullYear()).slice(-4),"sbcs"),W.write_shift(2,("00"+(m[x][v].getMonth()+1)).slice(-2),"sbcs"),W.write_shift(2,("00"+m[x][v].getDate()).slice(-2),"sbcs")):W.write_shift(8,"00000000","sbcs");break;case"C":var G=String(m[x][v]!=null?m[x][v]:"").slice(0,B[v]);for(W.write_shift(1,G,"sbcs"),y=0;y<B[v]-G.length;++y)W.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:i}}(),dde=function(){var e={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Ms(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,m){var g=e[m];return typeof g=="number"?lX(g):g},n=function(h,m,g){var x=m.charCodeAt(0)-32<<4|g.charCodeAt(0)-48;return x==59?h:lX(x)};e["|"]=254;function a(h,m){switch(m.type){case"base64":return s(cu(h),m);case"binary":return s(h,m);case"buffer":return s(vn&&Buffer.isBuffer(h)?h.toString("binary"):Cp(h),m);case"array":return s(lx(h),m)}throw new Error("Unrecognized type "+m.type)}function s(h,m){var g=h.split(/[\n\r]+/),x=-1,v=-1,y=0,w=0,_=[],T=[],B=null,j={},E=[],N=[],I=[],L=0,D;for(+m.codepage>=0&&Xd(+m.codepage);y!==g.length;++y){L=0;var k=g[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),P=k.replace(/;;/g,"\0").split(";").map(function(Z){return Z.replace(/\u0000/g,";")}),R=P[0],W;if(k.length>0)switch(R){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":P[1].charAt(0)=="P"&&T.push(k.slice(3).replace(/;;/g,";"));break;case"C":var V=!1,G=!1,z=!1,K=!1,J=-1,te=-1;for(w=1;w<P.length;++w)switch(P[w].charAt(0)){case"A":break;case"X":v=parseInt(P[w].slice(1))-1,G=!0;break;case"Y":for(x=parseInt(P[w].slice(1))-1,G||(v=0),D=_.length;D<=x;++D)_[D]=[];break;case"K":W=P[w].slice(1),W.charAt(0)==='"'?W=W.slice(1,W.length-1):W==="TRUE"?W=!0:W==="FALSE"?W=!1:isNaN(af(W))?isNaN(db(W).getDate())||(W=Ka(W)):(W=af(W),B!==null&&ry(B)&&(W=uT(W))),V=!0;break;case"E":K=!0;var M=T1(P[w].slice(1),{r:x,c:v});_[x][v]=[_[x][v],M];break;case"S":z=!0,_[x][v]=[_[x][v],"S5S"];break;case"G":break;case"R":J=parseInt(P[w].slice(1))-1;break;case"C":te=parseInt(P[w].slice(1))-1;break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+k)}if(V&&(_[x][v]&&_[x][v].length==2?_[x][v][0]=W:_[x][v]=W,B=null),z){if(K)throw new Error("SYLK shared formula cannot have own formula");var H=J>-1&&_[J][te];if(!H||!H[1])throw new Error("SYLK shared formula cannot find base");_[x][v][1]=Bde(H[1],{r:x-J,c:v-te})}break;case"F":var Y=0;for(w=1;w<P.length;++w)switch(P[w].charAt(0)){case"X":v=parseInt(P[w].slice(1))-1,++Y;break;case"Y":for(x=parseInt(P[w].slice(1))-1,D=_.length;D<=x;++D)_[D]=[];break;case"M":L=parseInt(P[w].slice(1))/20;break;case"F":break;case"G":break;case"P":B=T[parseInt(P[w].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(I=P[w].slice(1).split(" "),D=parseInt(I[0],10);D<=parseInt(I[1],10);++D)L=parseInt(I[2],10),N[D-1]=L===0?{hidden:!0}:{wch:L},op(N[D-1]);break;case"C":v=parseInt(P[w].slice(1))-1,N[v]||(N[v]={});break;case"R":x=parseInt(P[w].slice(1))-1,E[x]||(E[x]={}),L>0?(E[x].hpt=L,E[x].hpx=Ab(L)):L===0&&(E[x].hidden=!0);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+k)}Y<1&&(B=null);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+k)}}return E.length>0&&(j["!rows"]=E),N.length>0&&(j["!cols"]=N),m&&m.sheetRows&&(_=_.slice(0,m.sheetRows)),[_,j]}function i(h,m){var g=a(h,m),x=g[0],v=g[1],y=ay(x,m);return Ms(v).forEach(function(w){y[w]=v[w]}),y}function o(h,m){return _p(i(h,m),m)}function c(h,m,g,x){var v="C;Y"+(g+1)+";X"+(x+1)+";K";switch(h.t){case"n":v+=h.v||0,h.f&&!h.F&&(v+=";E"+YU(h.f,{r:g,c:x}));break;case"b":v+=h.v?"TRUE":"FALSE";break;case"e":v+=h.w||h.v;break;case"d":v+='"'+(h.w||h.v)+'"';break;case"s":v+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function u(h,m){m.forEach(function(g,x){var v="F;W"+(x+1)+" "+(x+1)+" ";g.hidden?v+="0":(typeof g.width=="number"&&!g.wpx&&(g.wpx=mE(g.width)),typeof g.wpx=="number"&&!g.wch&&(g.wch=pE(g.wpx)),typeof g.wch=="number"&&(v+=Math.round(g.wch))),v.charAt(v.length-1)!=" "&&h.push(v)})}function d(h,m){m.forEach(function(g,x){var v="F;";g.hidden?v+="M0;":g.hpt?v+="M"+20*g.hpt+";":g.hpx&&(v+="M"+20*gE(g.hpx)+";"),v.length>2&&h.push(v+"R"+(x+1))})}function f(h,m){var g=["ID;PWXL;N;E"],x=[],v=Vn(h["!ref"]),y,w=Array.isArray(h),_=`\r
`;g.push("P;PGeneral"),g.push("F;P0;DG0G8;M255"),h["!cols"]&&u(g,h["!cols"]),h["!rows"]&&d(g,h["!rows"]),g.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var T=v.s.r;T<=v.e.r;++T)for(var B=v.s.c;B<=v.e.c;++B){var j=zr({r:T,c:B});y=w?(h[T]||[])[B]:h[j],!(!y||y.v==null&&(!y.f||y.F))&&x.push(c(y,h,T,B))}return g.join(_)+_+x.join(_)+_+"E"+_}return{to_workbook:o,to_sheet:i,from_sheet:f}}(),fde=function(){function e(s,i){switch(i.type){case"base64":return t(cu(s),i);case"binary":return t(s,i);case"buffer":return t(vn&&Buffer.isBuffer(s)?s.toString("binary"):Cp(s),i);case"array":return t(lx(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){for(var o=s.split(`
`),c=-1,u=-1,d=0,f=[];d!==o.length;++d){if(o[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var h=o[d].trim().split(","),m=h[0],g=h[1];++d;for(var x=o[d]||"";(x.match(/["]/g)||[]).length&1&&d<o.length-1;)x+=`
`+o[++d];switch(x=x.trim(),+m){case-1:if(x==="BOT"){f[++c]=[],u=0;continue}else if(x!=="EOD")throw new Error("Unrecognized DIF special command "+x);break;case 0:x==="TRUE"?f[c][u]=!0:x==="FALSE"?f[c][u]=!1:isNaN(af(g))?isNaN(db(g).getDate())?f[c][u]=g:f[c][u]=Ka(g):f[c][u]=af(g),++u;break;case 1:x=x.slice(1,x.length-1),x=x.replace(/""/g,'"'),x&&x.match(/^=".*"$/)&&(x=x.slice(2,-1)),f[c][u++]=x!==""?x:null;break}if(x==="EOD")break}}return i&&i.sheetRows&&(f=f.slice(0,i.sheetRows)),f}function r(s,i){return ay(e(s,i),i)}function n(s,i){return _p(r(s,i),i)}var a=function(){var s=function(c,u,d,f,h){c.push(u),c.push(d+","+f),c.push('"'+h.replace(/"/g,'""')+'"')},i=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=Vn(c["!ref"]),f,h=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var m=d.s.r;m<=d.e.r;++m){i(u,-1,0,"BOT");for(var g=d.s.c;g<=d.e.c;++g){var x=zr({r:m,c:g});if(f=h?(c[m]||[])[g]:c[x],!f){i(u,1,0,"");continue}switch(f.t){case"n":var v=f.w;!v&&f.v!=null&&(v=f.v),v==null?f.f&&!f.F?i(u,1,0,"="+f.f):i(u,1,0,""):i(u,0,v,"V");break;case"b":i(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=dd(f.z||Ur[14],Li(Ka(f.v)))),i(u,0,f.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var y=`\r
`,w=u.join(y);return w}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),Ade=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var m=f.split(`
`),g=-1,x=-1,v=0,y=[];v!==m.length;++v){var w=m[v].trim().split(":");if(w[0]==="cell"){var _=hs(w[1]);if(y.length<=_.r)for(g=y.length;g<=_.r;++g)y[g]||(y[g]=[]);switch(g=_.r,x=_.c,w[2]){case"t":y[g][x]=e(w[3]);break;case"v":y[g][x]=+w[3];break;case"vtf":var T=w[w.length-1];case"vtc":switch(w[3]){case"nl":y[g][x]=!!+w[4];break;default:y[g][x]=+w[4];break}w[2]=="vtf"&&(y[g][x]=[y[g][x],T])}}}return h&&h.sheetRows&&(y=y.slice(0,h.sheetRows)),y}function n(f,h){return ay(r(f,h),h)}function a(f,h){return _p(n(f,h),h)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var h=[],m=[],g,x="",v=xc(f["!ref"]),y=Array.isArray(f),w=v.s.r;w<=v.e.r;++w)for(var _=v.s.c;_<=v.e.c;++_)if(x=zr({r:w,c:_}),g=y?(f[w]||[])[_]:f[x],!(!g||g.v==null||g.t==="z")){switch(m=["cell",x,"t"],g.t){case"s":case"str":m.push(t(g.v));break;case"n":g.f?(m[2]="vtf",m[3]="n",m[4]=g.v,m[5]=t(g.f)):(m[2]="v",m[3]=g.v);break;case"b":m[2]="vt"+(g.f?"f":"c"),m[3]="nl",m[4]=g.v?"1":"0",m[5]=t(g.f||(g.v?"TRUE":"FALSE"));break;case"d":var T=Li(Ka(g.v));m[2]="vtc",m[3]="nd",m[4]=""+T,m[5]=g.w||dd(g.z||Ur[14],T);break;case"e":continue}h.push(m.join(":"))}return h.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(f){return[s,i,o,i,u(f),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),fb=function(){function e(d,f,h,m,g){g.raw?f[h][m]=d:d===""||(d==="TRUE"?f[h][m]=!0:d==="FALSE"?f[h][m]=!1:isNaN(af(d))?isNaN(db(d).getDate())?f[h][m]=d:f[h][m]=Ka(d):f[h][m]=af(d))}function t(d,f){var h=f||{},m=[];if(!d||d.length===0)return m;for(var g=d.split(/[\r\n]/),x=g.length-1;x>=0&&g[x].length===0;)--x;for(var v=10,y=0,w=0;w<=x;++w)y=g[w].indexOf(" "),y==-1?y=g[w].length:y++,v=Math.max(v,y);for(w=0;w<=x;++w){m[w]=[];var _=0;for(e(g[w].slice(0,v).trim(),m,w,_,h),_=1;_<=(g[w].length-v)/10+1;++_)e(g[w].slice(v+(_-1)*10,v+_*10).trim(),m,w,_,h)}return h.sheetRows&&(m=m.slice(0,h.sheetRows)),m}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},h=!1,m=0,g=0;m<d.length;++m)(g=d.charCodeAt(m))==34?h=!h:!h&&g in r&&(f[g]=(f[g]||0)+1);g=[];for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&g.push([f[m],m]);if(!g.length){f=n;for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&g.push([f[m],m])}return g.sort(function(x,v){return x[0]-v[0]||n[x[1]]-n[v[1]]}),r[g.pop()[1]]||44}function s(d,f){var h=f||{},m="",g=h.dense?[]:{},x={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(m=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(m=d.charAt(4),d=d.slice(6)):m=a(d.slice(0,1024)):h&&h.FS?m=h.FS:m=a(d.slice(0,1024));var v=0,y=0,w=0,_=0,T=0,B=m.charCodeAt(0),j=!1,E=0,N=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var I=h.dateNF!=null?rGe(h.dateNF):null;function L(){var D=d.slice(_,T),k={};if(D.charAt(0)=='"'&&D.charAt(D.length-1)=='"'&&(D=D.slice(1,-1).replace(/""/g,'"')),D.length===0)k.t="z";else if(h.raw)k.t="s",k.v=D;else if(D.trim().length===0)k.t="s",k.v=D;else if(D.charCodeAt(0)==61)D.charCodeAt(1)==34&&D.charCodeAt(D.length-1)==34?(k.t="s",k.v=D.slice(2,-1).replace(/""/g,'"')):jYe(D)?(k.t="n",k.f=D.slice(1)):(k.t="s",k.v=D);else if(D=="TRUE")k.t="b",k.v=!0;else if(D=="FALSE")k.t="b",k.v=!1;else if(!isNaN(w=af(D)))k.t="n",h.cellText!==!1&&(k.w=D),k.v=w;else if(!isNaN(db(D).getDate())||I&&D.match(I)){k.z=h.dateNF||Ur[14];var P=0;I&&D.match(I)&&(D=nGe(D,h.dateNF,D.match(I)||[]),P=1),h.cellDates?(k.t="d",k.v=Ka(D,P)):(k.t="n",k.v=Li(Ka(D,P))),h.cellText!==!1&&(k.w=dd(k.z,k.v instanceof Date?Li(k.v):k.v)),h.cellNF||delete k.z}else k.t="s",k.v=D;if(k.t=="z"||(h.dense?(g[v]||(g[v]=[]),g[v][y]=k):g[zr({c:y,r:v})]=k),_=T+1,N=d.charCodeAt(_),x.e.c<y&&(x.e.c=y),x.e.r<v&&(x.e.r=v),E==B)++y;else if(y=0,++v,h.sheetRows&&h.sheetRows<=v)return!0}e:for(;T<d.length;++T)switch(E=d.charCodeAt(T)){case 34:N===34&&(j=!j);break;case B:case 10:case 13:if(!j&&L())break e;break}return T-_>0&&L(),g["!ref"]=sn(x),g}function i(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,f):ay(t(d,f),f)}function o(d,f){var h="",m=f.type=="string"?[0,0,0,0]:s7(d,f);switch(f.type){case"base64":h=cu(d);break;case"binary":h=d;break;case"buffer":f.codepage==65001?h=d.toString("utf8"):f.codepage&&typeof oE<"u"||(h=vn&&Buffer.isBuffer(d)?d.toString("binary"):Cp(d));break;case"array":h=lx(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+f.type)}return m[0]==239&&m[1]==187&&m[2]==191?h=Ba(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=Ba(h):f.type=="binary"&&typeof oE<"u",h.slice(0,19)=="socialcalc:version:"?Ade.to_sheet(f.type=="string"?h:Ba(h),f):i(h,f)}function c(d,f){return _p(o(d,f),f)}function u(d){for(var f=[],h=Vn(d["!ref"]),m,g=Array.isArray(d),x=h.s.r;x<=h.e.r;++x){for(var v=[],y=h.s.c;y<=h.e.c;++y){var w=zr({r:x,c:y});if(m=g?(d[x]||[])[y]:d[w],!m||m.v==null){v.push("          ");continue}for(var _=(m.w||(a0(m),m.w)||"").slice(0,10);_.length<10;)_+=" ";v.push(_+(y===0?" ":""))}f.push(v.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:u}}();function gWe(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var a=dde.to_workbook(e,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return fb.to_workbook(e,t)}}var Lg=function(){function e(M,H,Y){if(M){Bo(M,M.l||0);for(var Z=Y.Enum||J;M.l<M.length;){var ae=M.read_shift(2),le=Z[ae]||Z[65535],ie=M.read_shift(2),ce=M.l+ie,Ae=le.f&&le.f(M,ie,Y);if(M.l=ce,H(Ae,le,ae))return}}}function t(M,H){switch(H.type){case"base64":return r(Yc(cu(M)),H);case"binary":return r(Yc(M),H);case"buffer":case"array":return r(M,H)}throw"Unsupported type "+H.type}function r(M,H){if(!M)return M;var Y=H||{},Z=Y.dense?[]:{},ae="Sheet1",le="",ie=0,ce={},Ae=[],Fe=[],ne={s:{r:0,c:0},e:{r:0,c:0}},_e=Y.sheetRows||0;if(M[2]==0&&(M[3]==8||M[3]==9)&&M.length>=16&&M[14]==5&&M[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(M[2]==2)Y.Enum=J,e(M,function(Be,Le,We){switch(We){case 0:Y.vers=Be,Be>=4096&&(Y.qpro=!0);break;case 6:ne=Be;break;case 204:Be&&(le=Be);break;case 222:le=Be;break;case 15:case 51:Y.qpro||(Be[1].v=Be[1].v.slice(1));case 13:case 14:case 16:We==14&&(Be[2]&112)==112&&(Be[2]&15)>1&&(Be[2]&15)<15&&(Be[1].z=Y.dateNF||Ur[14],Y.cellDates&&(Be[1].t="d",Be[1].v=uT(Be[1].v))),Y.qpro&&Be[3]>ie&&(Z["!ref"]=sn(ne),ce[ae]=Z,Ae.push(ae),Z=Y.dense?[]:{},ne={s:{r:0,c:0},e:{r:0,c:0}},ie=Be[3],ae=le||"Sheet"+(ie+1),le="");var be=Y.dense?(Z[Be[0].r]||[])[Be[0].c]:Z[zr(Be[0])];if(be){be.t=Be[1].t,be.v=Be[1].v,Be[1].z!=null&&(be.z=Be[1].z),Be[1].f!=null&&(be.f=Be[1].f);break}Y.dense?(Z[Be[0].r]||(Z[Be[0].r]=[]),Z[Be[0].r][Be[0].c]=Be[1]):Z[zr(Be[0])]=Be[1];break}},Y);else if(M[2]==26||M[2]==14)Y.Enum=te,M[2]==14&&(Y.qpro=!0,M.l=0),e(M,function(Be,Le,We){switch(We){case 204:ae=Be;break;case 22:Be[1].v=Be[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Be[3]>ie&&(Z["!ref"]=sn(ne),ce[ae]=Z,Ae.push(ae),Z=Y.dense?[]:{},ne={s:{r:0,c:0},e:{r:0,c:0}},ie=Be[3],ae="Sheet"+(ie+1)),_e>0&&Be[0].r>=_e)break;Y.dense?(Z[Be[0].r]||(Z[Be[0].r]=[]),Z[Be[0].r][Be[0].c]=Be[1]):Z[zr(Be[0])]=Be[1],ne.e.c<Be[0].c&&(ne.e.c=Be[0].c),ne.e.r<Be[0].r&&(ne.e.r=Be[0].r);break;case 27:Be[14e3]&&(Fe[Be[14e3][0]]=Be[14e3][1]);break;case 1537:Fe[Be[0]]=Be[1],Be[0]==ie&&(ae=Be[1]);break}},Y);else throw new Error("Unrecognized LOTUS BOF "+M[2]);if(Z["!ref"]=sn(ne),ce[le||ae]=Z,Ae.push(le||ae),!Fe.length)return{SheetNames:Ae,Sheets:ce};for(var Ie={},Se=[],me=0;me<Fe.length;++me)ce[Ae[me]]?(Se.push(Fe[me]||Ae[me]),Ie[Fe[me]]=ce[Fe[me]]||ce[Ae[me]]):(Se.push(Fe[me]),Ie[Fe[me]]={"!ref":"A1"});return{SheetNames:Se,Sheets:Ie}}function n(M,H){var Y=H||{};if(+Y.codepage>=0&&Xd(+Y.codepage),Y.type=="string")throw new Error("Cannot write WK1 to JS string");var Z=mc(),ae=Vn(M["!ref"]),le=Array.isArray(M),ie=[];Wt(Z,0,s(1030)),Wt(Z,6,c(ae));for(var ce=Math.min(ae.e.r,8191),Ae=ae.s.r;Ae<=ce;++Ae)for(var Fe=ni(Ae),ne=ae.s.c;ne<=ae.e.c;++ne){Ae===ae.s.r&&(ie[ne]=As(ne));var _e=ie[ne]+Fe,Ie=le?(M[Ae]||[])[ne]:M[_e];if(!(!Ie||Ie.t=="z"))if(Ie.t=="n")(Ie.v|0)==Ie.v&&Ie.v>=-32768&&Ie.v<=32767?Wt(Z,13,m(Ae,ne,Ie.v)):Wt(Z,14,x(Ae,ne,Ie.v));else{var Se=a0(Ie);Wt(Z,15,f(Ae,ne,Se.slice(0,239)))}}return Wt(Z,1),Z.end()}function a(M,H){var Y=H||{};if(+Y.codepage>=0&&Xd(+Y.codepage),Y.type=="string")throw new Error("Cannot write WK3 to JS string");var Z=mc();Wt(Z,0,i(M));for(var ae=0,le=0;ae<M.SheetNames.length;++ae)(M.Sheets[M.SheetNames[ae]]||{})["!ref"]&&Wt(Z,27,K(M.SheetNames[ae],le++));var ie=0;for(ae=0;ae<M.SheetNames.length;++ae){var ce=M.Sheets[M.SheetNames[ae]];if(!(!ce||!ce["!ref"])){for(var Ae=Vn(ce["!ref"]),Fe=Array.isArray(ce),ne=[],_e=Math.min(Ae.e.r,8191),Ie=Ae.s.r;Ie<=_e;++Ie)for(var Se=ni(Ie),me=Ae.s.c;me<=Ae.e.c;++me){Ie===Ae.s.r&&(ne[me]=As(me));var Be=ne[me]+Se,Le=Fe?(ce[Ie]||[])[me]:ce[Be];if(!(!Le||Le.t=="z"))if(Le.t=="n")Wt(Z,23,L(Ie,me,ie,Le.v));else{var We=a0(Le);Wt(Z,22,E(Ie,me,ie,We.slice(0,239)))}}++ie}}return Wt(Z,1),Z.end()}function s(M){var H=Ct(2);return H.write_shift(2,M),H}function i(M){var H=Ct(26);H.write_shift(2,4096),H.write_shift(2,4),H.write_shift(4,0);for(var Y=0,Z=0,ae=0,le=0;le<M.SheetNames.length;++le){var ie=M.SheetNames[le],ce=M.Sheets[ie];if(!(!ce||!ce["!ref"])){++ae;var Ae=xc(ce["!ref"]);Y<Ae.e.r&&(Y=Ae.e.r),Z<Ae.e.c&&(Z=Ae.e.c)}}return Y>8191&&(Y=8191),H.write_shift(2,Y),H.write_shift(1,ae),H.write_shift(1,Z),H.write_shift(2,0),H.write_shift(2,0),H.write_shift(1,1),H.write_shift(1,2),H.write_shift(4,0),H.write_shift(4,0),H}function o(M,H,Y){var Z={s:{c:0,r:0},e:{c:0,r:0}};return H==8&&Y.qpro?(Z.s.c=M.read_shift(1),M.l++,Z.s.r=M.read_shift(2),Z.e.c=M.read_shift(1),M.l++,Z.e.r=M.read_shift(2),Z):(Z.s.c=M.read_shift(2),Z.s.r=M.read_shift(2),H==12&&Y.qpro&&(M.l+=2),Z.e.c=M.read_shift(2),Z.e.r=M.read_shift(2),H==12&&Y.qpro&&(M.l+=2),Z.s.c==65535&&(Z.s.c=Z.e.c=Z.s.r=Z.e.r=0),Z)}function c(M){var H=Ct(8);return H.write_shift(2,M.s.c),H.write_shift(2,M.s.r),H.write_shift(2,M.e.c),H.write_shift(2,M.e.r),H}function u(M,H,Y){var Z=[{c:0,r:0},{t:"n",v:0},0,0];return Y.qpro&&Y.vers!=20768?(Z[0].c=M.read_shift(1),Z[3]=M.read_shift(1),Z[0].r=M.read_shift(2),M.l+=2):(Z[2]=M.read_shift(1),Z[0].c=M.read_shift(2),Z[0].r=M.read_shift(2)),Z}function d(M,H,Y){var Z=M.l+H,ae=u(M,H,Y);if(ae[1].t="s",Y.vers==20768){M.l++;var le=M.read_shift(1);return ae[1].v=M.read_shift(le,"utf8"),ae}return Y.qpro&&M.l++,ae[1].v=M.read_shift(Z-M.l,"cstr"),ae}function f(M,H,Y){var Z=Ct(7+Y.length);Z.write_shift(1,255),Z.write_shift(2,H),Z.write_shift(2,M),Z.write_shift(1,39);for(var ae=0;ae<Z.length;++ae){var le=Y.charCodeAt(ae);Z.write_shift(1,le>=128?95:le)}return Z.write_shift(1,0),Z}function h(M,H,Y){var Z=u(M,H,Y);return Z[1].v=M.read_shift(2,"i"),Z}function m(M,H,Y){var Z=Ct(7);return Z.write_shift(1,255),Z.write_shift(2,H),Z.write_shift(2,M),Z.write_shift(2,Y,"i"),Z}function g(M,H,Y){var Z=u(M,H,Y);return Z[1].v=M.read_shift(8,"f"),Z}function x(M,H,Y){var Z=Ct(13);return Z.write_shift(1,255),Z.write_shift(2,H),Z.write_shift(2,M),Z.write_shift(8,Y,"f"),Z}function v(M,H,Y){var Z=M.l+H,ae=u(M,H,Y);if(ae[1].v=M.read_shift(8,"f"),Y.qpro)M.l=Z;else{var le=M.read_shift(2);T(M.slice(M.l,M.l+le),ae),M.l+=le}return ae}function y(M,H,Y){var Z=H&32768;return H&=-32769,H=(Z?M:0)+(H>=8192?H-16384:H),(Z?"":"$")+(Y?As(H):ni(H))}var w={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},_=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function T(M,H){Bo(M,0);for(var Y=[],Z=0,ae="",le="",ie="",ce="";M.l<M.length;){var Ae=M[M.l++];switch(Ae){case 0:Y.push(M.read_shift(8,"f"));break;case 1:le=y(H[0].c,M.read_shift(2),!0),ae=y(H[0].r,M.read_shift(2),!1),Y.push(le+ae);break;case 2:{var Fe=y(H[0].c,M.read_shift(2),!0),ne=y(H[0].r,M.read_shift(2),!1);le=y(H[0].c,M.read_shift(2),!0),ae=y(H[0].r,M.read_shift(2),!1),Y.push(Fe+ne+":"+le+ae)}break;case 3:if(M.l<M.length){console.error("WK1 premature formula end");return}break;case 4:Y.push("("+Y.pop()+")");break;case 5:Y.push(M.read_shift(2));break;case 6:{for(var _e="";Ae=M[M.l++];)_e+=String.fromCharCode(Ae);Y.push('"'+_e.replace(/"/g,'""')+'"')}break;case 8:Y.push("-"+Y.pop());break;case 23:Y.push("+"+Y.pop());break;case 22:Y.push("NOT("+Y.pop()+")");break;case 20:case 21:ce=Y.pop(),ie=Y.pop(),Y.push(["AND","OR"][Ae-20]+"("+ie+","+ce+")");break;default:if(Ae<32&&_[Ae])ce=Y.pop(),ie=Y.pop(),Y.push(ie+_[Ae]+ce);else if(w[Ae]){if(Z=w[Ae][1],Z==69&&(Z=M[M.l++]),Z>Y.length){console.error("WK1 bad formula parse 0x"+Ae.toString(16)+":|"+Y.join("|")+"|");return}var Ie=Y.slice(-Z);Y.length-=Z,Y.push(w[Ae][0]+"("+Ie.join(",")+")")}else return Ae<=7?console.error("WK1 invalid opcode "+Ae.toString(16)):Ae<=24?console.error("WK1 unsupported op "+Ae.toString(16)):Ae<=30?console.error("WK1 invalid opcode "+Ae.toString(16)):Ae<=115?console.error("WK1 unsupported function opcode "+Ae.toString(16)):console.error("WK1 unrecognized opcode "+Ae.toString(16))}}Y.length==1?H[1].f=""+Y[0]:console.error("WK1 bad formula parse |"+Y.join("|")+"|")}function B(M){var H=[{c:0,r:0},{t:"n",v:0},0];return H[0].r=M.read_shift(2),H[3]=M[M.l++],H[0].c=M[M.l++],H}function j(M,H){var Y=B(M);return Y[1].t="s",Y[1].v=M.read_shift(H-4,"cstr"),Y}function E(M,H,Y,Z){var ae=Ct(6+Z.length);ae.write_shift(2,M),ae.write_shift(1,Y),ae.write_shift(1,H),ae.write_shift(1,39);for(var le=0;le<Z.length;++le){var ie=Z.charCodeAt(le);ae.write_shift(1,ie>=128?95:ie)}return ae.write_shift(1,0),ae}function N(M,H){var Y=B(M);Y[1].v=M.read_shift(2);var Z=Y[1].v>>1;if(Y[1].v&1)switch(Z&7){case 0:Z=(Z>>3)*5e3;break;case 1:Z=(Z>>3)*500;break;case 2:Z=(Z>>3)/20;break;case 3:Z=(Z>>3)/200;break;case 4:Z=(Z>>3)/2e3;break;case 5:Z=(Z>>3)/2e4;break;case 6:Z=(Z>>3)/16;break;case 7:Z=(Z>>3)/64;break}return Y[1].v=Z,Y}function I(M,H){var Y=B(M),Z=M.read_shift(4),ae=M.read_shift(4),le=M.read_shift(2);if(le==65535)return Z===0&&ae===3221225472?(Y[1].t="e",Y[1].v=15):Z===0&&ae===3489660928?(Y[1].t="e",Y[1].v=42):Y[1].v=0,Y;var ie=le&32768;return le=(le&32767)-16446,Y[1].v=(1-ie*2)*(ae*Math.pow(2,le+32)+Z*Math.pow(2,le)),Y}function L(M,H,Y,Z){var ae=Ct(14);if(ae.write_shift(2,M),ae.write_shift(1,Y),ae.write_shift(1,H),Z==0)return ae.write_shift(4,0),ae.write_shift(4,0),ae.write_shift(2,65535),ae;var le=0,ie=0,ce=0,Ae=0;return Z<0&&(le=1,Z=-Z),ie=Math.log2(Z)|0,Z/=Math.pow(2,ie-31),Ae=Z>>>0,(Ae&2147483648)==0&&(Z/=2,++ie,Ae=Z>>>0),Z-=Ae,Ae|=2147483648,Ae>>>=0,Z*=Math.pow(2,32),ce=Z>>>0,ae.write_shift(4,ce),ae.write_shift(4,Ae),ie+=16383+(le?32768:0),ae.write_shift(2,ie),ae}function D(M,H){var Y=I(M);return M.l+=H-14,Y}function k(M,H){var Y=B(M),Z=M.read_shift(4);return Y[1].v=Z>>6,Y}function P(M,H){var Y=B(M),Z=M.read_shift(8,"f");return Y[1].v=Z,Y}function R(M,H){var Y=P(M);return M.l+=H-10,Y}function W(M,H){return M[M.l+H-1]==0?M.read_shift(H,"cstr"):""}function V(M,H){var Y=M[M.l++];Y>H-1&&(Y=H-1);for(var Z="";Z.length<Y;)Z+=String.fromCharCode(M[M.l++]);return Z}function G(M,H,Y){if(!(!Y.qpro||H<21)){var Z=M.read_shift(1);M.l+=17,M.l+=1,M.l+=2;var ae=M.read_shift(H-21,"cstr");return[Z,ae]}}function z(M,H){for(var Y={},Z=M.l+H;M.l<Z;){var ae=M.read_shift(2);if(ae==14e3){for(Y[ae]=[0,""],Y[ae][0]=M.read_shift(2);M[M.l];)Y[ae][1]+=String.fromCharCode(M[M.l]),M.l++;M.l++}}return Y}function K(M,H){var Y=Ct(5+M.length);Y.write_shift(2,14e3),Y.write_shift(2,H);for(var Z=0;Z<M.length;++Z){var ae=M.charCodeAt(Z);Y[Y.l++]=ae>127?95:ae}return Y[Y.l++]=0,Y}var J={0:{n:"BOF",f:vi},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:g},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:W},222:{n:"SHEETNAMELP",f:V},65535:{n:""}},te={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:j},23:{n:"NUMBER17",f:I},24:{n:"NUMBER18",f:N},25:{n:"FORMULA19",f:D},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:z},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:k},38:{n:"??"},39:{n:"NUMBER27",f:P},40:{n:"FORMULA28",f:R},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:W},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:G},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}}();function xWe(e){var t={},r=e.match(bl),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=Wr(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;t.cp=wU[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=s.val;break;case"<sz":t.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":s.rgb&&(t.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return t}var vWe=function(){var e=uE("t"),t=uE("rPr");function r(s){var i=s.match(e);if(!i)return{t:"s",v:""};var o={t:"s",v:Qn(i[1])},c=s.match(t);return c&&(o.s=xWe(c[1])),o}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(a).map(r).filter(function(o){return o.v})}}(),bWe=function(){var t=/(\r\n|\n)/g;function r(a,s,i){var o=[];a.u&&o.push("text-decoration: underline;"),a.uval&&o.push("text-underline-style:"+a.uval+";"),a.sz&&o.push("font-size:"+a.sz+"pt;"),a.outline&&o.push("text-effect: outline;"),a.shadow&&o.push("text-shadow: auto;"),s.push('<span style="'+o.join("")+'">'),a.b&&(s.push("<b>"),i.push("</b>")),a.i&&(s.push("<i>"),i.push("</i>")),a.strike&&(s.push("<s>"),i.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),i.push("</"+c+">")),i.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(t,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),yWe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,wWe=/<(?:\w+:)?r>/,EWe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function GU(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Qn(Ba(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Ba(e),r&&(n.h=IU(n.t))):e.match(wWe)&&(n.r=Ba(e),n.t=Qn(Ba((e.replace(EWe,"").match(yWe)||[]).join("").replace(bl,""))),r&&(n.h=bWe(vWe(n.r)))),n):{t:""}}var CWe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,_We=/<(?:\w+:)?(?:si|sstItem)>/g,SWe=/<\/(?:\w+:)?(?:si|sstItem)>/;function NWe(e,t){var r=[],n="";if(!e)return r;var a=e.match(CWe);if(a){n=a[2].replace(_We,"").split(SWe);for(var s=0;s!=n.length;++s){var i=GU(n[s].trim(),t);i!=null&&(r[r.length]=i)}a=Wr(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var kWe=/^\s|\s$|[\t\n\r]/;function hde(e,t){if(!t.bookSST)return"";var r=[li];r[r.length]=qt("sst",null,{xmlns:Tx[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(kWe)&&(s+=' xml:space="preserve"'),s+=">"+wa(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function BWe(e){return[e.read_shift(4),e.read_shift(4)]}function TWe(e,t){var r=[],n=!1;return p0(e,function(s,i,o){switch(o){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function jWe(e,t){return t||(t=Ct(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var IWe=HGe;function FWe(e){var t=mc();Lt(t,159,jWe(e));for(var r=0;r<e.length;++r)Lt(t,19,IWe(e[r]));return Lt(t,160),t.end()}function mde(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function Uh(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function OWe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=Uh(e,4),t.U=Uh(e,4),t.W=Uh(e,4),t}function DWe(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},a=e.read_shift(4),s=[];a-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=s,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function PWe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(DWe(e));return t}function RWe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function LWe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=Uh(e,4),t.U=Uh(e,4),t.W=Uh(e,4),t}function MWe(e){var t=LWe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function pde(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function gde(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function UWe(e){var t=Uh(e);switch(t.Minor){case 2:return[t.Minor,QWe(e)];case 3:return[t.Minor,HWe()];case 4:return[t.Minor,VWe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function QWe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=pde(e,r),a=gde(e,e.length-e.l);return{t:"Std",h:n,v:a}}function HWe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function VWe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(bl,function(s){var i=Wr(s);switch(FA(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){n[o]=i[o]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function zWe(e,t){var r={},n=r.EncryptionVersionInfo=Uh(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var a=e.read_shift(4);return t-=4,r.EncryptionHeader=pde(e,a),t-=a,r.EncryptionVerifier=gde(e,t),r}function $We(e){var t={},r=t.EncryptionVersionInfo=Uh(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function KU(e){var t=0,r,n=mde(e),a=n.length+1,s,i,o,c,u;for(r=ip(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)i=r[s],o=(t&16384)===0?0:1,c=t<<1&32767,u=o|c,t=u^i;return t^52811}var xde=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},a=function(i,o){return n(i^o)},s=function(i){for(var o=t[i.length-1],c=104,u=i.length-1;u>=0;--u)for(var d=i[u],f=0;f!=7;++f)d&64&&(o^=r[c]),d*=2,--c;return o};return function(i){for(var o=mde(i),c=s(o),u=o.length,d=ip(16),f=0;f!=16;++f)d[f]=0;var h,m,g;for((u&1)===1&&(h=c>>8,d[u]=a(e[0],h),--u,h=c&255,m=o[o.length-1],d[u]=a(m,h));u>0;)--u,h=c>>8,d[u]=a(o[u],h),--u,h=c&255,d[u]=a(o[u],h);for(u=15,g=15-o.length;g>0;)h=c>>8,d[u]=a(e[g],h),--u,--g,h=c&255,d[u]=a(o[u],h),--u,--g;return d}}(),GWe=function(e,t,r,n,a){a||(a=t),n||(n=xde(e));var s,i;for(s=0;s!=t.length;++s)i=t[s],i^=n[r],i=(i>>5|i<<3)&255,a[s]=i,++r;return[a,r,n]},KWe=function(e){var t=0,r=xde(e);return function(n){var a=GWe("",n,t,r);return t=a[1],a[0]}};function qWe(e,t,r,n){var a={key:vi(e),verificationBytes:vi(e)};return r.password&&(a.verifier=KU(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=KWe(r.password)),a}function WWe(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=$We(e):n.Data=zWe(e,t),n}function XWe(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?WWe(e,t-2,n):qWe(e,r.biff>=8?t:t-2,r,n),n}var vde=function(){function e(a,s){switch(s.type){case"base64":return t(cu(a),s);case"binary":return t(a,s);case"buffer":return t(vn&&Buffer.isBuffer(a)?a.toString("binary"):Cp(a),s);case"array":return t(lx(a),s)}throw new Error("Unrecognized type "+s.type)}function t(a,s){var i=s||{},o=i.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(o)&&(o[f]=[]);for(var h=/\\\w+\b/g,m=0,g,x=-1;g=h.exec(d);){switch(g[0]){case"\\cell":var v=d.slice(m,h.lastIndex-g[0].length);if(v[0]==" "&&(v=v.slice(1)),++x,v.length){var y={v,t:"s"};Array.isArray(o)?o[f][x]=y:o[zr({r:f,c:x})]=y}break}m=h.lastIndex}x>u.e.c&&(u.e.c=x)}),o["!ref"]=sn(u),o}function r(a,s){return _p(e(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],i=Vn(a["!ref"]),o,c=Array.isArray(a),u=i.s.r;u<=i.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var f=zr({r:u,c:d});o=c?(a[u]||[])[d]:a[f],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(a0(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function YWe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function hE(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function JWe(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.max(t,r,n),s=Math.min(t,r,n),i=a-s;if(i===0)return[0,0,t];var o=0,c=0,u=a+s;switch(c=i/(u>1?2-u:u),a){case t:o=((r-n)/i+6)%6;break;case r:o=(n-t)/i+2;break;case n:o=(t-r)/i+4;break}return[o/6,c,u/2]}function ZWe(e){var t=e[0],r=e[1],n=e[2],a=r*2*(n<.5?n:1-n),s=n-a/2,i=[s,s,s],o=6*t,c;if(r!==0)switch(o|0){case 0:case 6:c=a*o,i[0]+=a,i[1]+=c;break;case 1:c=a*(2-o),i[0]+=c,i[1]+=a;break;case 2:c=a*(o-2),i[1]+=a,i[2]+=c;break;case 3:c=a*(4-o),i[1]+=c,i[2]+=a;break;case 4:c=a*(o-4),i[2]+=a,i[0]+=c;break;case 5:c=a*(6-o),i[2]+=c,i[0]+=a;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function D4(e,t){if(t===0)return e;var r=JWe(YWe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),hE(ZWe(r))}var bde=6,eXe=15,tXe=1,ul=bde;function mE(e){return Math.floor((e+Math.round(128/ul)/256)*ul)}function pE(e){return Math.floor((e-5)/ul*100+.5)/100}function P4(e){return Math.round((e*ul+5)/ul*256)/256}function X6(e){return P4(pE(mE(e)))}function qU(e){var t=Math.abs(e-X6(e)),r=ul;if(t>.005)for(ul=tXe;ul<eXe;++ul)Math.abs(e-X6(e))<=t&&(t=Math.abs(e-X6(e)),r=ul);ul=r}function op(e){e.width?(e.wpx=mE(e.width),e.wch=pE(e.wpx),e.MDW=ul):e.wpx?(e.wch=pE(e.wpx),e.width=P4(e.wch),e.MDW=ul):typeof e.wch=="number"&&(e.width=P4(e.wch),e.wpx=mE(e.width),e.MDW=ul),e.customWidth&&delete e.customWidth}var rXe=96,yde=rXe;function gE(e){return e*96/yde}function Ab(e){return e*yde/96}var nXe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function aXe(e,t,r,n){t.Borders=[];var a={},s=!1;(e[0].match(bl)||[]).forEach(function(i){var o=Wr(i);switch(FA(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},o.diagonalUp&&(a.diagonalUp=$a(o.diagonalUp)),o.diagonalDown&&(a.diagonalDown=$a(o.diagonalDown)),t.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in borders")}})}function sXe(e,t,r,n){t.Fills=[];var a={},s=!1;(e[0].match(bl)||[]).forEach(function(i){var o=Wr(i);switch(FA(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},t.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":o.patternType&&(a.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),o.indexed&&(a.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(a.bgColor.theme=parseInt(o.theme,10)),o.tint&&(a.bgColor.tint=parseFloat(o.tint)),o.rgb&&(a.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),o.theme&&(a.fgColor.theme=parseInt(o.theme,10)),o.tint&&(a.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(a.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fills")}})}function iXe(e,t,r,n){t.Fonts=[];var a={},s=!1;(e[0].match(bl)||[]).forEach(function(i){var o=Wr(i);switch(FA(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(a),a={};break;case"<name":o.val&&(a.name=Ba(o.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=o.val?$a(o.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=o.val?$a(o.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(o.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=o.val?$a(o.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=o.val?$a(o.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=o.val?$a(o.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=o.val?$a(o.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=o.val?$a(o.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":o.val&&(a.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(a.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(a.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(a.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=wU[parseInt(o.val,10)];break;case"<color":if(a.color||(a.color={}),o.auto&&(a.color.auto=$a(o.auto)),o.rgb)a.color.rgb=o.rgb.slice(-6);else if(o.indexed){a.color.index=parseInt(o.indexed,10);var c=Pg[a.color.index];a.color.index==81&&(c=Pg[1]),c||(c=Pg[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else o.theme&&(a.color.theme=parseInt(o.theme,10),o.tint&&(a.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=D4(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fonts")}})}function oXe(e,t,r){t.NumberFmt=[];for(var n=Ms(Ur),a=0;a<n.length;++a)t.NumberFmt[n[a]]=Ur[n[a]];var s=e[0].match(bl);if(s)for(a=0;a<s.length;++a){var i=Wr(s[a]);switch(FA(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Qn(Ba(i.formatCode)),c=parseInt(i.numFmtId,10);if(t.NumberFmt[c]=o,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=o}Mh(o,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function lXe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=qt("numFmt",null,{numFmtId:n,formatCode:wa(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=qt("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var w5=["numFmtId","fillId","fontId","borderId","xfId"],E5=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function cXe(e,t,r){t.CellXf=[];var n,a=!1;(e[0].match(bl)||[]).forEach(function(s){var i=Wr(s),o=0;switch(FA(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],o=0;o<w5.length;++o)n[w5[o]]&&(n[w5[o]]=parseInt(n[w5[o]],10));for(o=0;o<E5.length;++o)n[E5[o]]&&(n[E5[o]]=$a(n[E5[o]]));if(t.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[o]){n.numFmtId=o;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};i.vertical&&(c.vertical=i.vertical),i.horizontal&&(c.horizontal=i.horizontal),i.textRotation!=null&&(c.textRotation=i.textRotation),i.indent&&(c.indent=i.indent),i.wrapText&&(c.wrapText=$a(i.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function uXe(e){var t=[];return t[t.length]=qt("cellXfs",null),e.forEach(function(r){t[t.length]=qt("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=qt("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var dXe=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,c,u){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=o.match(t))&&oXe(f,d,u),(f=o.match(a))&&iXe(f,d,c,u),(f=o.match(n))&&sXe(f,d,c,u),(f=o.match(s))&&aXe(f,d,c,u),(f=o.match(r))&&cXe(f,d,u),d}}();function wde(e,t){var r=[li,qt("styleSheet",null,{xmlns:Tx[0],"xmlns:vt":Di.vt})],n;return e.SSF&&(n=lXe(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=uXe(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function fXe(e,t){var r=e.read_shift(2),n=ml(e);return[r,n]}function AXe(e,t,r){r||(r=Ct(6+4*t.length)),r.write_shift(2,e),lo(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function hXe(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=WGe(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=e.read_shift(2);switch(s===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=e.read_shift(1);i!=0&&(n.underline=i);var o=e.read_shift(1);o>0&&(n.family=o);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=qGe(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=ml(e),n}function mXe(e,t){t||(t=Ct(153)),t.write_shift(2,e.sz*20),XGe(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),I4(e.color,t);var n=0;return n=2,t.write_shift(1,n),lo(e.name,t),t.length>t.l?t.slice(0,t.l):t}var pXe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Y6,gXe=gl;function JX(e,t){t||(t=Ct(84)),Y6||(Y6=lT(pXe));var r=Y6[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(I4({auto:1},t),I4({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function xXe(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}function Ede(e,t,r){r||(r=Ct(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function cw(e,t){return t||(t=Ct(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var vXe=gl;function bXe(e,t){return t||(t=Ct(51)),t.write_shift(1,0),cw(null,t),cw(null,t),cw(null,t),cw(null,t),cw(null,t),t.length>t.l?t.slice(0,t.l):t}function yXe(e,t){return t||(t=Ct(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),j4(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function wXe(e,t,r){var n=Ct(2052);return n.write_shift(4,e),j4(t,n),j4(r,n),n.length>n.l?n.slice(0,n.l):n}function EXe(e,t,r){var n={};n.NumberFmt=[];for(var a in Ur)n.NumberFmt[a]=Ur[a];n.CellXf=[],n.Fonts=[];var s=[],i=!1;return p0(e,function(c,u,d){switch(d){case 44:n.NumberFmt[c[0]]=c[1],Mh(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=D4(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:s.push(d),i=!0;break;case 38:s.pop(),i=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!i||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function CXe(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++r}),r!=0&&(Lt(e,615,sf(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Lt(e,44,AXe(a,t[a]))}),Lt(e,616))}}function _Xe(e){var t=1;Lt(e,611,sf(t)),Lt(e,43,mXe({sz:12,color:{theme:1},name:"Calibri",family:2})),Lt(e,612)}function SXe(e){var t=2;Lt(e,603,sf(t)),Lt(e,45,JX({patternType:"none"})),Lt(e,45,JX({patternType:"gray125"})),Lt(e,604)}function NXe(e){var t=1;Lt(e,613,sf(t)),Lt(e,46,bXe()),Lt(e,614)}function kXe(e){var t=1;Lt(e,626,sf(t)),Lt(e,47,Ede({numFmtId:0},65535)),Lt(e,627)}function BXe(e,t){Lt(e,617,sf(t.length)),t.forEach(function(r){Lt(e,47,Ede(r,0))}),Lt(e,618)}function TXe(e){var t=1;Lt(e,619,sf(t)),Lt(e,48,yXe({xfId:0,name:"Normal"})),Lt(e,620)}function jXe(e){var t=0;Lt(e,505,sf(t)),Lt(e,506)}function IXe(e){var t=0;Lt(e,508,wXe(t,"TableStyleMedium9","PivotStyleMedium4")),Lt(e,509)}function FXe(e,t){var r=mc();return Lt(r,278),CXe(r,e.SSF),_Xe(r),SXe(r),NXe(r),kXe(r),BXe(r,t.cellXfs),TXe(r),jXe(r),IXe(r),Lt(r,279),r.end()}var OXe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function DXe(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(bl)||[]).forEach(function(a){var s=Wr(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(t.themeElements.clrScheme[OXe.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function PXe(){}function RXe(){}var LXe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,MXe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,UXe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function QXe(e,t,r){t.themeElements={};var n;[["clrScheme",LXe,DXe],["fontScheme",MXe,PXe],["fmtScheme",UXe,RXe]].forEach(function(a){if(!(n=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,t,r)})}var HXe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function Cde(e,t){(!e||e.length===0)&&(e=WU());var r,n={};if(!(r=e.match(HXe)))throw new Error("themeElements not found in theme");return QXe(r[0],n,t),n.raw=e,n}function WU(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[li];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function VXe(e,t,r){var n=e.l+t,a=e.read_shift(4);if(a!==124226){if(!r.cellStyles){e.l=n;return}var s=e.slice(e.l);e.l=n;var i;try{i=pue(s,{type:"array"})}catch{return}var o=Jc(i,"theme/theme/theme1.xml",!0);if(o)return Cde(o,r)}}function zXe(e){return e.read_shift(4)}function $Xe(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=GXe(e,4);break;case 2:t.xclrValue=nde(e);break;case 3:t.xclrValue=zXe(e);break;case 4:e.l+=4;break}return e.l+=8,t}function GXe(e,t){return gl(e,t)}function KXe(e,t){return gl(e,t)}function qXe(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=$Xe(e);break;case 6:n[1]=KXe(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function WXe(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var a=e.read_shift(2),s=[];a-- >0;)s.push(qXe(e,r-e.l));return{ixfe:n,ext:s}}function XXe(e,t){t.forEach(function(r){r[0]})}function YXe(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:ml(e)}}function JXe(e){var t=Ct(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),lo(e.name,t),t.slice(0,t.l)}function ZXe(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function eYe(e){var t=Ct(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function tYe(e,t){var r=Ct(8+2*t.length);return r.write_shift(4,e),lo(t,r),r.slice(0,r.l)}function rYe(e){return e.l+=4,e.read_shift(4)!=0}function nYe(e,t){var r=Ct(8);return r.write_shift(4,e),r.write_shift(4,1),r}function aYe(e,t,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],i=!1,o=2;return p0(e,function(c,u,d){switch(d){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(f){o==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):o==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:o=c?1:0;break;case 338:o=2;break;case 35:s.push(d),i=!0;break;case 36:s.pop(),i=!1;break;default:if(!u.T){if(!i||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function sYe(){var e=mc();return Lt(e,332),Lt(e,334,sf(1)),Lt(e,335,JXe({name:"XLDAPR",version:12e4,flags:3496657072})),Lt(e,336),Lt(e,339,tYe(1,"XLDAPR")),Lt(e,52),Lt(e,35,sf(514)),Lt(e,4096,sf(0)),Lt(e,4097,qu(1)),Lt(e,36),Lt(e,53),Lt(e,340),Lt(e,337,nYe(1)),Lt(e,51,eYe([[1,0]])),Lt(e,338),Lt(e,333),e.end()}function iYe(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var a=!1,s=2,i;return e.replace(bl,function(o){var c=Wr(o);switch(FA(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(i=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):s==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return o}),n}function _de(){var e=[li];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function oYe(e){var t=[];if(!e)return t;var r=1;return(e.match(bl)||[]).forEach(function(n){var a=Wr(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,t.push(a);break}}),t}function lYe(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=zr(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function cYe(e,t,r){var n=[];return p0(e,function(s,i,o){switch(o){case 63:n.push(s);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function uYe(e,t,r,n){if(!e)return e;var a=n||{},s=!1;p0(e,function(o,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function dYe(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var i1=1024;function Sde(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[qt("xml",null,{"xmlns:v":$c.v,"xmlns:o":$c.o,"xmlns:x":$c.x,"xmlns:mv":$c.mv}).replace(/\/>/,">"),qt("o:shapelayout",qt("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),qt("v:shapetype",[qt("v:stroke",null,{joinstyle:"miter"}),qt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];i1<e*1e3;)i1+=1e3;return t.forEach(function(s){var i=hs(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var c=o.type=="gradient"?qt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=qt("v:fill",c,o),d={on:"t",obscured:"t"};++i1,a=a.concat(["<v:shape"+dE({id:"_x0000_s"+i1,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,qt("v:shadow",null,d),qt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",To("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),To("x:AutoFill","False"),To("x:Row",String(i.r)),To("x:Column",String(i.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function ZX(e,t,r,n){var a=Array.isArray(e),s;t.forEach(function(i){var o=hs(i.ref);if(a?(e[o.r]||(e[o.r]=[]),s=e[o.r][o.c]):s=e[i.ref],!s){s={t:"z"},a?e[o.r][o.c]=s:e[i.ref]=s;var c=Vn(e["!ref"]||"BDWGO1000001:A1");c.s.r>o.r&&(c.s.r=o.r),c.e.r<o.r&&(c.e.r=o.r),c.s.c>o.c&&(c.s.c=o.c),c.e.c<o.c&&(c.e.c=o.c);var u=sn(c);u!==e["!ref"]&&(e["!ref"]=u)}s.c||(s.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var f=s.c.length-1;f>=0;--f){if(!r&&s.c[f].T)return;r&&!s.c[f].T&&s.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}s.c.push(d)})}function fYe(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var s=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var c=Wr(o[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=hs(c.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!f&&!!f[1]&&GU(f[1])||{r:"",t:"",h:""};u.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),u.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=h.h),n.push(u)}}}}),n}function Nde(e){var t=[li,qt("comments",null,{xmlns:Tx[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var s=wa(a.a);r.indexOf(s)==-1&&(r.push(s),t.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(wa(c.a))),s.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)t.push(To("t",wa(s[0]||"")));else{for(var i=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)i+=`Reply:
    `+s[o]+`
`;t.push(To("t",wa(i)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function AYe(e,t){var r=[],n=!1,a={},s=0;return e.replace(bl,function(o,c){var u=Wr(o);switch(FA(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=c+o.length;break;case"</text>":a.t=e.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),r}function hYe(e,t,r){var n=[li,qt("ThreadedComments",null,{xmlns:Di.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var s="";(a[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&t.indexOf(i.a)==-1&&t.push(i.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?s=c.id:c.parentId=s,i.ID=c.id,i.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(i.a)).slice(-12)+"}"),n.push(qt("threadedComment",To("text",i.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function mYe(e,t){var r=[],n=!1;return e.replace(bl,function(s){var i=Wr(s);switch(FA(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return s}),r}function pYe(e){var t=[li,qt("personList",null,{xmlns:Di.TCMNT,"xmlns:x":Tx[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(qt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function gYe(e){var t={};t.iauthor=e.read_shift(4);var r=Ox(e);return t.rfx=r.s,t.ref=zr(r.s),e.l+=16,t}function xYe(e,t){return t==null&&(t=Ct(36)),t.write_shift(4,e[1].iauthor),sy(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var vYe=ml;function bYe(e){return lo(e.slice(0,54))}function yYe(e,t){var r=[],n=[],a={},s=!1;return p0(e,function(o,c,u){switch(u){case 632:n.push(o);break;case 635:a=o;break;case 637:a.t=o.t,a.h=o.h,a.r=o.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,t.sheetRows&&a.rfx&&t.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function wYe(e){var t=mc(),r=[];return Lt(t,628),Lt(t,630),e.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),Lt(t,632,bYe(a.a)))})}),Lt(t,631),Lt(t,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:hs(n[0]),e:hs(n[0])};Lt(t,635,xYe([s,a])),a.t&&a.t.length>0&&Lt(t,637,zGe(a)),Lt(t,636),delete a.iauthor})}),Lt(t,634),Lt(t,629),t.end()}var EYe="application/vnd.ms-office.vbaProject";function CYe(e){var t=Nr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Nr.utils.cfb_add(t,a,e.FileIndex[n].content)}}),Nr.write(t)}function _Ye(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&Nr.utils.cfb_add(e,a,t.FileIndex[n].content)}})}var kde=["xlsb","xlsm","xlam","biff8","xla"];function SYe(){return{"!type":"dialog"}}function NYe(){return{"!type":"dialog"}}function kYe(){return{"!type":"macro"}}function BYe(){return{"!type":"macro"}}var T1=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,s,i){var o=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return o?d+=t.c:--d,c?u+=t.r:--u,a+(o?"":"$")+As(d)+(c?"":"$")+ni(u)}return function(a,s){return t=s,a.replace(e,r)}}(),XU=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,YU=function(){return function(t,r){return t.replace(XU,function(n,a,s,i,o,c){var u=RU(i)-(s?0:r.c),d=PU(c)-(o?0:r.r),f=d==0?"":o?d+1:"["+d+"]",h=u==0?"":s?u+1:"["+u+"]";return a+"R"+f+"C"+h})}}();function Bde(e,t){return e.replace(XU,function(r,n,a,s,i,o){return n+(a=="$"?a+s:As(RU(s)+t.c))+(i=="$"?i+o:ni(PU(o)+t.r))})}function TYe(e,t,r){var n=xc(t),a=n.s,s=hs(r),i={r:s.r-a.r,c:s.c-a.c};return Bde(e,i)}function jYe(e){return e.length!=1}function eY(e){return e.replace(/_xlfn\./g,"")}function mi(e){e.l+=1}function lp(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function Tde(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return jde(e);r.biff==12&&(n=4)}var a=e.read_shift(n),s=e.read_shift(n),i=lp(e),o=lp(e);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function jde(e){var t=lp(e),r=lp(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function IYe(e,t,r){if(r.biff<8)return jde(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),s=lp(e),i=lp(e);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:i[0],cRel:i[1],rRel:i[2]}}}function Ide(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return FYe(e);var n=e.read_shift(r&&r.biff==12?4:2),a=lp(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function FYe(e){var t=lp(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function OYe(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function DYe(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return PYe(e);var a=e.read_shift(n>=12?4:2),s=e.read_shift(2),i=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;a>524287;)a-=1048576;if(i==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:i,rRel:o}}function PYe(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function RYe(e,t,r){var n=(e[e.l++]&96)>>5,a=Tde(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function LYe(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}var i=Tde(e,s,r);return[n,a,i]}function MYe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function UYe(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}return e.l+=s,[n,a]}function QYe(e,t,r){var n=(e[e.l++]&96)>>5,a=IYe(e,t-1,r);return[n,a]}function HYe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function tY(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function VYe(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function zYe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function $Ye(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function GYe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function KYe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function Fde(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function qYe(e){return e.read_shift(2),Fde(e)}function WYe(e){return e.read_shift(2),Fde(e)}function XYe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=Ide(e,0,r);return[n,a]}function YYe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=DYe(e,0,r);return[n,a]}function JYe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var s=Ide(e,0,r);return[n,a,s]}function ZYe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[rZe[a],Pde[a],n]}function eJe(e,t,r){var n=e[e.l++],a=e.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:tJe(e);return[a,(s[0]===0?Pde:tZe)[s[1]]]}function tJe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function rJe(e,t,r){e.l+=r&&r.biff==2?3:4}function nJe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function aJe(e){return e.l++,g0[e.read_shift(1)]}function sJe(e){return e.l++,e.read_shift(2)}function iJe(e){return e.l++,e.read_shift(1)!==0}function oJe(e){return e.l++,Al(e)}function lJe(e,t,r){return e.l++,yC(e,t-1,r)}function cJe(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=qs(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=g0[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Al(e);break;case 2:r[1]=Dx(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function uJe(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?Ox:dT)(e));return a}function dJe(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,i=[];s!=n&&(i[s]=[]);++s)for(var o=0;o!=a;++o)i[s][o]=cJe(e,r.biff);return i}function fJe(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,s]}function AJe(e,t,r){if(r.biff==5)return hJe(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),s=e.read_shift(4);return[n,a,s]}function hJe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function mJe(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function pJe(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function gJe(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function xJe(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return e.l+=s,[n,a]}var vJe=gl,bJe=gl,yJe=gl;function EC(e,t,r){return e.l+=2,[OYe(e)]}function JU(e){return e.l+=6,[]}var wJe=EC,EJe=JU,CJe=JU,_Je=EC;function Ode(e){return e.l+=2,[vi(e),e.read_shift(2)&1]}var SJe=EC,NJe=Ode,kJe=JU,BJe=EC,TJe=EC,jJe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function IJe(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),s=e.read_shift(2),i=jJe[r>>2&31];return{ixti:t,coltype:r&3,rt:i,idx:n,c:a,C:s}}function FJe(e){return e.l+=2,[e.read_shift(4)]}function OJe(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function DJe(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function PJe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function RJe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function LJe(e){return e.l+=4,[0,0]}var rY={1:{n:"PtgExp",f:nJe},2:{n:"PtgTbl",f:yJe},3:{n:"PtgAdd",f:mi},4:{n:"PtgSub",f:mi},5:{n:"PtgMul",f:mi},6:{n:"PtgDiv",f:mi},7:{n:"PtgPower",f:mi},8:{n:"PtgConcat",f:mi},9:{n:"PtgLt",f:mi},10:{n:"PtgLe",f:mi},11:{n:"PtgEq",f:mi},12:{n:"PtgGe",f:mi},13:{n:"PtgGt",f:mi},14:{n:"PtgNe",f:mi},15:{n:"PtgIsect",f:mi},16:{n:"PtgUnion",f:mi},17:{n:"PtgRange",f:mi},18:{n:"PtgUplus",f:mi},19:{n:"PtgUminus",f:mi},20:{n:"PtgPercent",f:mi},21:{n:"PtgParen",f:mi},22:{n:"PtgMissArg",f:mi},23:{n:"PtgStr",f:lJe},26:{n:"PtgSheet",f:OJe},27:{n:"PtgEndSheet",f:DJe},28:{n:"PtgErr",f:aJe},29:{n:"PtgBool",f:iJe},30:{n:"PtgInt",f:sJe},31:{n:"PtgNum",f:oJe},32:{n:"PtgArray",f:HYe},33:{n:"PtgFunc",f:ZYe},34:{n:"PtgFuncVar",f:eJe},35:{n:"PtgName",f:fJe},36:{n:"PtgRef",f:XYe},37:{n:"PtgArea",f:RYe},38:{n:"PtgMemArea",f:mJe},39:{n:"PtgMemErr",f:vJe},40:{n:"PtgMemNoMem",f:bJe},41:{n:"PtgMemFunc",f:pJe},42:{n:"PtgRefErr",f:gJe},43:{n:"PtgAreaErr",f:MYe},44:{n:"PtgRefN",f:YYe},45:{n:"PtgAreaN",f:QYe},46:{n:"PtgMemAreaN",f:PJe},47:{n:"PtgMemNoMemN",f:RJe},57:{n:"PtgNameX",f:AJe},58:{n:"PtgRef3d",f:JYe},59:{n:"PtgArea3d",f:LYe},60:{n:"PtgRefErr3d",f:xJe},61:{n:"PtgAreaErr3d",f:UYe},255:{}},MJe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},UJe={1:{n:"PtgElfLel",f:Ode},2:{n:"PtgElfRw",f:BJe},3:{n:"PtgElfCol",f:wJe},6:{n:"PtgElfRwV",f:TJe},7:{n:"PtgElfColV",f:_Je},10:{n:"PtgElfRadical",f:SJe},11:{n:"PtgElfRadicalS",f:kJe},13:{n:"PtgElfColS",f:EJe},15:{n:"PtgElfColSV",f:CJe},16:{n:"PtgElfRadicalLel",f:NJe},25:{n:"PtgList",f:IJe},29:{n:"PtgSxName",f:FJe},255:{}},QJe={0:{n:"PtgAttrNoop",f:LJe},1:{n:"PtgAttrSemi",f:KYe},2:{n:"PtgAttrIf",f:$Ye},4:{n:"PtgAttrChoose",f:VYe},8:{n:"PtgAttrGoto",f:zYe},16:{n:"PtgAttrSum",f:rJe},32:{n:"PtgAttrBaxcel",f:tY},33:{n:"PtgAttrBaxcel",f:tY},64:{n:"PtgAttrSpace",f:qYe},65:{n:"PtgAttrSpaceSemi",f:WYe},128:{n:"PtgAttrIfError",f:GYe},255:{}};function CC(e,t,r,n){if(n.biff<8)return gl(e,t);for(var a=e.l+t,s=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=dJe(e,0,n),s.push(r[i][1]);break;case"PtgMemArea":r[i][2]=uJe(e,r[i][1],n),s.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=e.read_shift(4),s.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return t=a-e.l,t!==0&&s.push(gl(e,t)),s}function _C(e,t,r){for(var n=e.l+t,a,s,i=[];n!=e.l;)t=n-e.l,s=e[e.l],a=rY[s]||rY[MJe[s]],(s===24||s===25)&&(a=(s===24?UJe:QJe)[e[e.l+1]]),!a||!a.f?gl(e,t):i.push([a.n,a.f(e,t,r)]);return i}function HJe(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],s=0;s<n.length;++s){var i=n[s];if(i)switch(i[0]){case 2:a.push('"'+i[1].replace(/"/g,'""')+'"');break;default:a.push(i[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var VJe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function zJe(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function Dde(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function nY(e,t,r){var n=Dde(e,t,r);return n=="#REF"?n:zJe(n,r)}function sl(e,t,r,n,a){var s=a&&a.biff||8,i={s:{c:0,r:0}},o=[],c,u,d,f=0,h=0,m,g="";if(!e[0]||!e[0][0])return"";for(var x=-1,v="",y=0,w=e[0].length;y<w;++y){var _=e[0][y];switch(_[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),u=o.pop(),x>=0){switch(e[0][x][1][0]){case 0:v=Ds(" ",e[0][x][1][1]);break;case 1:v=Ds("\r",e[0][x][1][1]);break;default:if(v="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}u=u+v,x=-1}o.push(u+VJe[_[0]]+c);break;case"PtgIsect":c=o.pop(),u=o.pop(),o.push(u+" "+c);break;case"PtgUnion":c=o.pop(),u=o.pop(),o.push(u+","+c);break;case"PtgRange":c=o.pop(),u=o.pop(),o.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=h2(_[1][1],i,a),o.push(m2(d,s));break;case"PtgRefN":d=r?h2(_[1][1],r,a):_[1][1],o.push(m2(d,s));break;case"PtgRef3d":f=_[1][1],d=h2(_[1][2],i,a),g=nY(n,f,a),o.push(g+"!"+m2(d,s));break;case"PtgFunc":case"PtgFuncVar":var T=_[1][0],B=_[1][1];T||(T=0),T&=127;var j=T==0?[]:o.slice(-T);o.length-=T,B==="User"&&(B=j.shift()),o.push(B+"("+j.join(",")+")");break;case"PtgBool":o.push(_[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(_[1]);break;case"PtgNum":o.push(String(_[1]));break;case"PtgStr":o.push('"'+_[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(_[1]);break;case"PtgAreaN":m=IX(_[1][1],r?{s:r}:i,a),o.push(K6(m,a));break;case"PtgArea":m=IX(_[1][1],i,a),o.push(K6(m,a));break;case"PtgArea3d":f=_[1][1],m=_[1][2],g=nY(n,f,a),o.push(g+"!"+K6(m,a));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=_[1][2];var E=(n.names||[])[h-1]||(n[0]||[])[h],N=E?E.Name:"SH33TJSNAME"+String(h);N&&N.slice(0,6)=="_xlfn."&&!a.xlfn&&(N=N.slice(6)),o.push(N);break;case"PtgNameX":var I=_[1][1];h=_[1][2];var L;if(a.biff<=5)I<0&&(I=-I),n[I]&&(L=n[I][h]);else{var D="";if(((n[I]||[])[0]||[])[0]==14849||(((n[I]||[])[0]||[])[0]==1025?n[I][h]&&n[I][h].itab>0&&(D=n.SheetNames[n[I][h].itab-1]+"!"):D=n.SheetNames[h-1]+"!"),n[I]&&n[I][h])D+=n[I][h].Name;else if(n[0]&&n[0][h])D+=n[0][h].Name;else{var k=(Dde(n,I,a)||"").split(";;");k[h-1]?D=k[h-1]:D+="SH33TJSERRX"}o.push(D);break}L||(L={Name:"SH33TJSERRY"}),o.push(L.Name);break;case"PtgParen":var P="(",R=")";if(x>=0){switch(v="",e[0][x][1][0]){case 2:P=Ds(" ",e[0][x][1][1])+P;break;case 3:P=Ds("\r",e[0][x][1][1])+P;break;case 4:R=Ds(" ",e[0][x][1][1])+R;break;case 5:R=Ds("\r",e[0][x][1][1])+R;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}x=-1}o.push(P+o.pop()+R);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:_[1][1],r:_[1][0]};var W={c:r.c,r:r.r};if(n.sharedf[zr(d)]){var V=n.sharedf[zr(d)];o.push(sl(V,i,W,n,a))}else{var G=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push(sl(u[1],i,W,n,a)),G=!0;break}G||o.push(_[1])}break;case"PtgArray":o.push("{"+HJe(_[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":x=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+_[1].idx+"[#"+_[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(_));default:throw new Error("Unrecognized Formula Token: "+String(_))}var z=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&x>=0&&z.indexOf(e[0][y][0])==-1){_=e[0][x];var K=!0;switch(_[1][0]){case 4:K=!1;case 0:v=Ds(" ",_[1][1]);break;case 5:K=!1;case 1:v=Ds("\r",_[1][1]);break;default:if(v="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+_[1][0])}o.push((K?v:"")+o.pop()+(K?"":v)),x=-1}}if(o.length>1&&a.WTF)throw new Error("bad formula stack");return o[0]}function $Je(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,i=e.read_shift(a);if(i==65535)return[[],gl(e,t-2)];var o=_C(e,i,r);return t!==i+a&&(s=CC(e,t-i-a,o,r)),e.l=n,[o,s]}function GJe(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,i=e.read_shift(a);if(i==65535)return[[],gl(e,t-2)];var o=_C(e,i,r);return t!==i+a&&(s=CC(e,t-i-a,o,r)),e.l=n,[o,s]}function KJe(e,t,r,n){var a=e.l+t,s=_C(e,n,r),i;return a!==e.l&&(i=CC(e,a-e.l,s,r)),[s,i]}function qJe(e,t,r){var n=e.l+t,a,s=e.read_shift(2),i=_C(e,s,r);return s==65535?[[],gl(e,t-2)]:(t!==s+2&&(a=CC(e,n-s-2,i,r)),[i,a])}function WJe(e){var t;if(Ih(e,e.l+6)!==65535)return[Al(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function XJe(e){if(e==null){var t=Ct(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return cx(e);return cx(0)}function J6(e,t,r){var n=e.l+t,a=OA(e);r.biff==2&&++e.l;var s=WJe(e),i=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=GJe(e,n-e.l,r);return{cell:a,val:s[0],formula:o,shared:i>>3&1,tt:s[1]}}function YJe(e,t,r,n,a){var s=dx(t,r,a),i=XJe(e.v),o=Ct(6),c=33;o.write_shift(2,c),o.write_shift(4,0);for(var u=Ct(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=so([s,i,o,u]);return f}function fT(e,t,r){var n=e.read_shift(4),a=_C(e,n,r),s=e.read_shift(4),i=s>0?CC(e,s,a,r):null;return[a,i]}var JJe=fT,AT=fT,ZJe=fT,eZe=fT,tZe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Pde={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},rZe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function aY(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function nZe(e){var t="of:="+e.replace(XU,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function Z6(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function aZe(e){return e.replace(/\./,"!")}var g2={},j1={},x2=typeof Map<"u";function ZU(e,t,r){var n=0,a=e.length;if(r){if(x2?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var s=x2?r.get(t):r[t];n<s.length;++n)if(e[s[n]].t===t)return e.Count++,s[n]}}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t},e.Count++,e.Unique++,r&&(x2?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function hT(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(ul=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=pE(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=P4(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function Mg(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function Sp(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],a=60,s=e.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){Mh(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}}for(a=0;a!=s;++a)if(e[a].numFmtId===n)return a;return e[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function Rde(e,t,r,n,a,s){try{n.cellNF&&(e.z=Ur[t])}catch(o){if(n.WTF)throw o}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Ka(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Ur[t]==null&&Mh(tGe[t]||"General",t),e.t==="e")e.w=e.w||g0[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=cE(e.v);else if(e.t==="d"){var i=Li(e.v);(i|0)===i?e.w=i.toString(10):e.w=cE(i)}else{if(e.v===void 0)return"";e.w=ox(e.v,j1)}else e.t==="d"?e.w=dd(t,Li(e.v),j1):e.w=dd(t,e.v,j1)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{e.s=s.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=D4(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=D4(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&s.Fills)throw o}}}function sZe(e,t,r){if(e&&e["!ref"]){var n=Vn(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function iZe(e,t){var r=Vn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=sn(r))}var oZe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,lZe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,cZe=/<(?:\w:)?hyperlink [^>]*>/mg,uZe=/"(\w*:\w*)"/,dZe=/<(?:\w:)?col\b[^>]*[\/]?>/g,fZe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,AZe=/<(?:\w:)?pageMargins[^>]*\/>/g,Lde=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,hZe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,mZe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function pZe(e,t,r,n,a,s,i){if(!e)return e;n||(n={"!id":{}});var o=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=e.match(lZe);f?(u=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):u=d=e;var h=u.match(Lde);h?e7(h[0],o,a,r):(h=u.match(hZe))&&xZe(h[0],h[1]||"",o,a,r);var m=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(m>0){var g=u.slice(m,m+50).match(uZe);g&&iZe(o,g[1])}var x=u.match(mZe);x&&x[1]&&jZe(x[1],a);var v=[];if(t.cellStyles){var y=u.match(dZe);y&&SZe(v,y)}f&&OZe(f[1],o,t,c,s,i);var w=d.match(fZe);w&&(o["!autofilter"]=kZe(w[0]));var _=[],T=d.match(oZe);if(T)for(m=0;m!=T.length;++m)_[m]=Vn(T[m].slice(T[m].indexOf('"')+1));var B=d.match(cZe);B&&EZe(o,B,n);var j=d.match(AZe);if(j&&(o["!margins"]=CZe(Wr(j[0]))),!o["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(o["!ref"]=sn(c)),t.sheetRows>0&&o["!ref"]){var E=Vn(o["!ref"]);t.sheetRows<=+E.e.r&&(E.e.r=t.sheetRows-1,E.e.r>c.e.r&&(E.e.r=c.e.r),E.e.r<E.s.r&&(E.s.r=E.e.r),E.e.c>c.e.c&&(E.e.c=c.e.c),E.e.c<E.s.c&&(E.s.c=E.e.c),o["!fullref"]=o["!ref"],o["!ref"]=sn(E))}return v.length>0&&(o["!cols"]=v),_.length>0&&(o["!merges"]=_),o}function gZe(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+sn(e[r])+'"/>';return t+"</mergeCells>"}function e7(e,t,r,n){var a=Wr(e);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=Qn(Ba(a.codeName)))}function xZe(e,t,r,n,a){e7(e.slice(0,e.indexOf(">")),r,n,a)}function vZe(e,t,r,n,a){var s=!1,i={},o=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,i.codeName=xA(wa(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),o=(o||"")+qt("outlinePr",null,u)}!s&&!o||(a[a.length]=qt("sheetPr",o,i))}var bZe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],yZe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function wZe(e){var t={sheet:1};return bZe.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),yZe.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=KU(e.password).toString(16).toUpperCase()),qt("sheetProtection",null,t)}function EZe(e,t,r){for(var n=Array.isArray(e),a=0;a!=t.length;++a){var s=Wr(Ba(t[a]),!0);if(!s.ref)return;var i=((r||{})["!id"]||[])[s.id];i?(s.Target=i.Target,s.location&&(s.Target+="#"+Qn(s.location))):(s.Target="#"+Qn(s.location),i={Target:s.Target,TargetMode:"Internal"}),s.Rel=i,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var o=Vn(s.ref),c=o.s.r;c<=o.e.r;++c)for(var u=o.s.c;u<=o.e.c;++u){var d=zr({c:u,r:c});n?(e[c]||(e[c]=[]),e[c][u]||(e[c][u]={t:"z",v:void 0}),e[c][u].l=s):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=s)}}}function CZe(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function _Ze(e){return Mg(e),qt("pageMargins",null,e)}function SZe(e,t){for(var r=!1,n=0;n!=t.length;++n){var a=Wr(t[n],!0);a.hidden&&(a.hidden=$a(a.hidden));var s=parseInt(a.min,10)-1,i=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,qU(a.width)),op(a);s<=i;)e[s++]=qa(a)}}function NZe(e,t){for(var r=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=qt("col",null,hT(a,n)));return r[r.length]="</cols>",r.join("")}function kZe(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function BZe(e,t,r,n){var a=typeof e.ref=="string"?e.ref:sn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,i=xc(a);i.s.r==i.e.r&&(i.e.r=xc(t["!ref"]).e.r,a=sn(i));for(var o=0;o<s.length;++o){var c=s[o];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),qt("autoFilter",null,{ref:a})}var TZe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function jZe(e,t){t.Views||(t.Views=[{}]),(e.match(TZe)||[]).forEach(function(r,n){var a=Wr(r);t.Views[n]||(t.Views[n]={}),+a.zoomScale&&(t.Views[n].zoom=+a.zoomScale),$a(a.rightToLeft)&&(t.Views[n].RTL=!0)})}function IZe(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),qt("sheetViews",qt("sheetView",null,a),{})}function FZe(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",s=e.t,i=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=g0[e.v];break;case"d":n&&n.cellDates?a=Ka(e.v,-1).toISOString():(e=qa(e),e.t="n",a=""+(e.v=Li(Ka(e.v)))),typeof e.z>"u"&&(e.z=Ur[14]);break;default:a=e.v;break}var o=To("v",wa(a)),c={r:t},u=Sp(n.cellXfs,e,n);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=To("v",""+ZU(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=s&&(e.t=s,e.v=i),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=qt("f",wa(e.f),d)+(e.v!=null?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),qt("c",o,c)}var OZe=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=uE("v"),i=uE("f");return function(c,u,d,f,h,m){for(var g=0,x="",v=[],y=[],w=0,_=0,T=0,B="",j,E,N=0,I=0,L,D,k=0,P=0,R=Array.isArray(m.CellXf),W,V=[],G=[],z=Array.isArray(u),K=[],J={},te=!1,M=!!d.sheetStubs,H=c.split(t),Y=0,Z=H.length;Y!=Z;++Y){x=H[Y].trim();var ae=x.length;if(ae!==0){var le=0;e:for(g=0;g<ae;++g)switch(x[g]){case">":if(x[g-1]!="/"){++g;break e}if(d&&d.cellStyles){if(E=Wr(x.slice(le,g),!0),N=E.r!=null?parseInt(E.r,10):N+1,I=-1,d.sheetRows&&d.sheetRows<N)continue;J={},te=!1,E.ht&&(te=!0,J.hpt=parseFloat(E.ht),J.hpx=Ab(J.hpt)),E.hidden=="1"&&(te=!0,J.hidden=!0),E.outlineLevel!=null&&(te=!0,J.level=+E.outlineLevel),te&&(K[N-1]=J)}break;case"<":le=g;break}if(le>=g)break;if(E=Wr(x.slice(le,g),!0),N=E.r!=null?parseInt(E.r,10):N+1,I=-1,!(d.sheetRows&&d.sheetRows<N)){f.s.r>N-1&&(f.s.r=N-1),f.e.r<N-1&&(f.e.r=N-1),d&&d.cellStyles&&(J={},te=!1,E.ht&&(te=!0,J.hpt=parseFloat(E.ht),J.hpx=Ab(J.hpt)),E.hidden=="1"&&(te=!0,J.hidden=!0),E.outlineLevel!=null&&(te=!0,J.level=+E.outlineLevel),te&&(K[N-1]=J)),v=x.slice(g).split(e);for(var ie=0;ie!=v.length&&v[ie].trim().charAt(0)=="<";++ie);for(v=v.slice(ie),g=0;g!=v.length;++g)if(x=v[g].trim(),x.length!==0){if(y=x.match(r),w=g,_=0,T=0,x="<c "+(x.slice(0,1)=="<"?">":"")+x,y!=null&&y.length===2){for(w=0,B=y[1],_=0;_!=B.length&&!((T=B.charCodeAt(_)-64)<1||T>26);++_)w=26*w+T;--w,I=w}else++I;for(_=0;_!=x.length&&x.charCodeAt(_)!==62;++_);if(++_,E=Wr(x.slice(0,_),!0),E.r||(E.r=zr({r:N-1,c:I})),B=x.slice(_),j={t:""},(y=B.match(s))!=null&&y[1]!==""&&(j.v=Qn(y[1])),d.cellFormula){if((y=B.match(i))!=null&&y[1]!==""){if(j.f=Qn(Ba(y[1])).replace(/\r\n/g,`
`),d.xlfn||(j.f=eY(j.f)),y[0].indexOf('t="array"')>-1)j.F=(B.match(a)||[])[1],j.F.indexOf(":")>-1&&V.push([Vn(j.F),j.F]);else if(y[0].indexOf('t="shared"')>-1){D=Wr(y[0]);var ce=Qn(Ba(y[1]));d.xlfn||(ce=eY(ce)),G[parseInt(D.si,10)]=[D,ce,E.r]}}else(y=B.match(/<f[^>]*\/>/))&&(D=Wr(y[0]),G[D.si]&&(j.f=TYe(G[D.si][1],G[D.si][2],E.r)));var Ae=hs(E.r);for(_=0;_<V.length;++_)Ae.r>=V[_][0].s.r&&Ae.r<=V[_][0].e.r&&Ae.c>=V[_][0].s.c&&Ae.c<=V[_][0].e.c&&(j.F=V[_][1])}if(E.t==null&&j.v===void 0)if(j.f||j.F)j.v=0,j.t="n";else if(M)j.t="z";else continue;else j.t=E.t||"n";switch(f.s.c>I&&(f.s.c=I),f.e.c<I&&(f.e.c=I),j.t){case"n":if(j.v==""||j.v==null){if(!M)continue;j.t="z"}else j.v=parseFloat(j.v);break;case"s":if(typeof j.v>"u"){if(!M)continue;j.t="z"}else L=g2[parseInt(j.v,10)],j.v=L.t,j.r=L.r,d.cellHTML&&(j.h=L.h);break;case"str":j.t="s",j.v=j.v!=null?Ba(j.v):"",d.cellHTML&&(j.h=IU(j.v));break;case"inlineStr":y=B.match(n),j.t="s",y!=null&&(L=GU(y[1]))?(j.v=L.t,d.cellHTML&&(j.h=L.h)):j.v="";break;case"b":j.v=$a(j.v);break;case"d":d.cellDates?j.v=Ka(j.v,1):(j.v=Li(Ka(j.v,1)),j.t="n");break;case"e":(!d||d.cellText!==!1)&&(j.w=j.v),j.v=Uue[j.v];break}if(k=P=0,W=null,R&&E.s!==void 0&&(W=m.CellXf[E.s],W!=null&&(W.numFmtId!=null&&(k=W.numFmtId),d.cellStyles&&W.fillId!=null&&(P=W.fillId))),Rde(j,k,P,d,h,m),d.cellDates&&R&&j.t=="n"&&ry(Ur[k])&&(j.t="d",j.v=uT(j.v)),E.cm&&d.xlmeta){var Fe=(d.xlmeta.Cell||[])[+E.cm-1];Fe&&Fe.type=="XLDAPR"&&(j.D=!0)}if(z){var ne=hs(E.r);u[ne.r]||(u[ne.r]=[]),u[ne.r][ne.c]=j}else u[E.r]=j}}}}K.length>0&&(u["!rows"]=K)}}();function DZe(e,t,r,n){var a=[],s=[],i=Vn(e["!ref"]),o="",c,u="",d=[],f=0,h=0,m=e["!rows"],g=Array.isArray(e),x={r:u},v,y=-1;for(h=i.s.c;h<=i.e.c;++h)d[h]=As(h);for(f=i.s.r;f<=i.e.r;++f){for(s=[],u=ni(f),h=i.s.c;h<=i.e.c;++h){c=d[h]+u;var w=g?(e[f]||[])[h]:e[c];w!==void 0&&(o=FZe(w,c,e,t))!=null&&s.push(o)}(s.length>0||m&&m[f])&&(x={r:u},m&&m[f]&&(v=m[f],v.hidden&&(x.hidden=1),y=-1,v.hpx?y=gE(v.hpx):v.hpt&&(y=v.hpt),y>-1&&(x.ht=y,x.customHeight=1),v.level&&(x.outlineLevel=v.level)),a[a.length]=qt("row",s.join(""),x))}if(m)for(;f<m.length;++f)m&&m[f]&&(x={r:f+1},v=m[f],v.hidden&&(x.hidden=1),y=-1,v.hpx?y=gE(v.hpx):v.hpt&&(y=v.hpt),y>-1&&(x.ht=y,x.customHeight=1),v.level&&(x.outlineLevel=v.level),a[a.length]=qt("row","",x));return a.join("")}function Mde(e,t,r,n){var a=[li,qt("worksheet",null,{xmlns:Tx[0],"xmlns:r":Di.r})],s=r.SheetNames[e],i=0,o="",c=r.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",d=Vn(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=sn(d)}n||(n={}),c["!comments"]=[];var f=[];vZe(c,r,e,t,a),a[a.length]=qt("dimension",null,{ref:u}),a[a.length]=IZe(c,t,e,r),t.sheetFormat&&(a[a.length]=qt("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=NZe(c,c["!cols"])),a[i=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(o=DZe(c,t),o.length>0&&(a[a.length]=o)),a.length>i+1&&(a[a.length]="</sheetData>",a[i]=a[i].replace("/>",">")),c["!protect"]&&(a[a.length]=wZe(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=BZe(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=gZe(c["!merges"]));var h=-1,m,g=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(x){x[1].Target&&(m={ref:x[0]},x[1].Target.charAt(0)!="#"&&(g=va(n,-1,wa(x[1].Target).replace(/#.*$/,""),Cn.HLINK),m["r:id"]="rId"+g),(h=x[1].Target.indexOf("#"))>-1&&(m.location=wa(x[1].Target.slice(h+1))),x[1].Tooltip&&(m.tooltip=wa(x[1].Tooltip)),a[a.length]=qt("hyperlink",null,m))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=_Ze(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=To("ignoredErrors",qt("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(g=va(n,-1,"../drawings/drawing"+(e+1)+".xml",Cn.DRAW),a[a.length]=qt("drawing",null,{"r:id":"rId"+g}),c["!drawing"]=f),c["!comments"].length>0&&(g=va(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Cn.VML),a[a.length]=qt("legacyDrawing",null,{"r:id":"rId"+g}),c["!legacy"]=g),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function PZe(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function RZe(e,t,r){var n=Ct(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var s=320;a.hpx?s=gE(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var i=0;a.level&&(i|=a.level),a.hidden&&(i|=16),(a.hpx||a.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var o=0,c=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,h=-1,m=d<<10;m<d+1<<10;++m){u.c=m;var g=Array.isArray(r)?(r[u.r]||[])[u.c]:r[zr(u)];g&&(f<0&&(f=m),h=m)}f<0||(++o,n.write_shift(4,f),n.write_shift(4,h))}var x=n.l;return n.l=c,n.write_shift(4,o),n.l=x,n.length>n.l?n.slice(0,n.l):n}function LZe(e,t,r,n){var a=RZe(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&Lt(e,0,a)}var MZe=Ox,UZe=sy;function QZe(){}function HZe(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=$Ge(e),r}function VZe(e,t,r){r==null&&(r=Ct(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return I4({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Due(e,r),r.slice(0,r.l)}function zZe(e){var t=md(e);return[t]}function $Ze(e,t,r){return r==null&&(r=Ct(8)),jx(t,r)}function GZe(e){var t=Ix(e);return[t]}function KZe(e,t,r){return r==null&&(r=Ct(4)),Fx(t,r)}function qZe(e){var t=md(e),r=e.read_shift(1);return[t,r,"b"]}function WZe(e,t,r){return r==null&&(r=Ct(9)),jx(t,r),r.write_shift(1,e.v?1:0),r}function XZe(e){var t=Ix(e),r=e.read_shift(1);return[t,r,"b"]}function YZe(e,t,r){return r==null&&(r=Ct(5)),Fx(t,r),r.write_shift(1,e.v?1:0),r}function JZe(e){var t=md(e),r=e.read_shift(1);return[t,r,"e"]}function ZZe(e,t,r){return r==null&&(r=Ct(9)),jx(t,r),r.write_shift(1,e.v),r}function eet(e){var t=Ix(e),r=e.read_shift(1);return[t,r,"e"]}function tet(e,t,r){return r==null&&(r=Ct(8)),Fx(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function ret(e){var t=md(e),r=e.read_shift(4);return[t,r,"s"]}function net(e,t,r){return r==null&&(r=Ct(12)),jx(t,r),r.write_shift(4,t.v),r}function aet(e){var t=Ix(e),r=e.read_shift(4);return[t,r,"s"]}function set(e,t,r){return r==null&&(r=Ct(8)),Fx(t,r),r.write_shift(4,t.v),r}function iet(e){var t=md(e),r=Al(e);return[t,r,"n"]}function oet(e,t,r){return r==null&&(r=Ct(16)),jx(t,r),cx(e.v,r),r}function Ude(e){var t=Ix(e),r=Al(e);return[t,r,"n"]}function cet(e,t,r){return r==null&&(r=Ct(12)),Fx(t,r),cx(e.v,r),r}function uet(e){var t=md(e),r=QU(e);return[t,r,"n"]}function det(e,t,r){return r==null&&(r=Ct(12)),jx(t,r),Pue(e.v,r),r}function fet(e){var t=Ix(e),r=QU(e);return[t,r,"n"]}function Aet(e,t,r){return r==null&&(r=Ct(8)),Fx(t,r),Pue(e.v,r),r}function het(e){var t=md(e),r=LU(e);return[t,r,"is"]}function met(e){var t=md(e),r=ml(e);return[t,r,"str"]}function pet(e,t,r){return r==null&&(r=Ct(12+4*e.v.length)),jx(t,r),lo(e.v,r),r.length>r.l?r.slice(0,r.l):r}function get(e){var t=Ix(e),r=ml(e);return[t,r,"str"]}function xet(e,t,r){return r==null&&(r=Ct(8+4*e.v.length)),Fx(t,r),lo(e.v,r),r.length>r.l?r.slice(0,r.l):r}function vet(e,t,r){var n=e.l+t,a=md(e);a.r=r["!row"];var s=e.read_shift(1),i=[a,s,"b"];if(r.cellFormula){e.l+=2;var o=AT(e,n-e.l,r);i[3]=sl(o,null,a,r.supbooks,r)}else e.l=n;return i}function bet(e,t,r){var n=e.l+t,a=md(e);a.r=r["!row"];var s=e.read_shift(1),i=[a,s,"e"];if(r.cellFormula){e.l+=2;var o=AT(e,n-e.l,r);i[3]=sl(o,null,a,r.supbooks,r)}else e.l=n;return i}function yet(e,t,r){var n=e.l+t,a=md(e);a.r=r["!row"];var s=Al(e),i=[a,s,"n"];if(r.cellFormula){e.l+=2;var o=AT(e,n-e.l,r);i[3]=sl(o,null,a,r.supbooks,r)}else e.l=n;return i}function wet(e,t,r){var n=e.l+t,a=md(e);a.r=r["!row"];var s=ml(e),i=[a,s,"str"];if(r.cellFormula){e.l+=2;var o=AT(e,n-e.l,r);i[3]=sl(o,null,a,r.supbooks,r)}else e.l=n;return i}var Eet=Ox,Cet=sy;function _et(e,t){return t==null&&(t=Ct(4)),t.write_shift(4,e),t}function Net(e,t){var r=e.l+t,n=Ox(e),a=MU(e),s=ml(e),i=ml(e),o=ml(e);e.l=r;var c={rfx:n,relId:a,loc:s,display:o};return i&&(c.Tooltip=i),c}function ket(e,t){var r=Ct(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));sy({s:hs(e[0]),e:hs(e[0])},r),UU("rId"+t,r);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return lo(a||"",r),lo(e[1].Tooltip||"",r),lo("",r),r.slice(0,r.l)}function Bet(){}function Tet(e,t,r){var n=e.l+t,a=Rue(e),s=e.read_shift(1),i=[a];if(i[2]=s,r.cellFormula){var o=JJe(e,n-e.l,r);i[1]=o}else e.l=n;return i}function jet(e,t,r){var n=e.l+t,a=Ox(e),s=[a];if(r.cellFormula){var i=eZe(e,n-e.l,r);s[1]=i,e.l=n}else e.l=n;return s}function Iet(e,t,r){r==null&&(r=Ct(18));var n=hT(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var Qde=["left","right","top","bottom","header","footer"];function Fet(e){var t={};return Qde.forEach(function(r){t[r]=Al(e)}),t}function Oet(e,t){return t==null&&(t=Ct(48)),Mg(e),Qde.forEach(function(r){cx(e[r],t)}),t}function Det(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function Pet(e,t,r){r==null&&(r=Ct(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function Ret(e){var t=Ct(24);return t.write_shift(4,4),t.write_shift(4,1),sy(e,t),t}function Let(e,t){return t==null&&(t=Ct(66)),t.write_shift(2,e.password?KU(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function Met(){}function Uet(){}function Qet(e,t,r,n,a,s,i){if(!e)return e;var o=t||{};n||(n={"!id":{}});var c=o.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,m,g,x,v,y,w,_,T,B,j=[];o.biff=12,o["!row"]=0;var E=0,N=!1,I=[],L={},D=o.supbooks||a.supbooks||[[]];if(D.sharedf=L,D.arrayf=I,D.SheetNames=a.SheetNames||a.Sheets.map(function(z){return z.name}),!o.supbooks&&(o.supbooks=D,a.Names))for(var k=0;k<a.Names.length;++k)D[0][k+1]=a.Names[k];var P=[],R=[],W=!1;xE[16]={n:"BrtShortReal",f:Ude};var V;if(p0(e,function(K,J,te){if(!h)switch(te){case 148:u=K;break;case 0:m=K,o.sheetRows&&o.sheetRows<=m.r&&(h=!0),T=ni(v=m.r),o["!row"]=m.r,(K.hidden||K.hpt||K.level!=null)&&(K.hpt&&(K.hpx=Ab(K.hpt)),R[K.r]=K);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(g={t:K[2]},K[2]){case"n":g.v=K[1];break;case"s":_=g2[K[1]],g.v=_.t,g.r=_.r;break;case"b":g.v=!!K[1];break;case"e":g.v=K[1],o.cellText!==!1&&(g.w=g0[g.v]);break;case"str":g.t="s",g.v=K[1];break;case"is":g.t="s",g.v=K[1].t;break}if((x=i.CellXf[K[0].iStyleRef])&&Rde(g,x.numFmtId,null,o,s,i),y=K[0].c==-1?y+1:K[0].c,o.dense?(c[v]||(c[v]=[]),c[v][y]=g):c[As(y)+T]=g,o.cellFormula){for(N=!1,E=0;E<I.length;++E){var M=I[E];m.r>=M[0].s.r&&m.r<=M[0].e.r&&y>=M[0].s.c&&y<=M[0].e.c&&(g.F=sn(M[0]),N=!0)}!N&&K.length>3&&(g.f=K[3])}if(d.s.r>m.r&&(d.s.r=m.r),d.s.c>y&&(d.s.c=y),d.e.r<m.r&&(d.e.r=m.r),d.e.c<y&&(d.e.c=y),o.cellDates&&x&&g.t=="n"&&ry(Ur[x.numFmtId])){var H=Eg(g.v);H&&(g.t="d",g.v=new Date(H.y,H.m-1,H.d,H.H,H.M,H.S,H.u))}V&&(V.type=="XLDAPR"&&(g.D=!0),V=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;g={t:"z",v:void 0},y=K[0].c==-1?y+1:K[0].c,o.dense?(c[v]||(c[v]=[]),c[v][y]=g):c[As(y)+T]=g,d.s.r>m.r&&(d.s.r=m.r),d.s.c>y&&(d.s.c=y),d.e.r<m.r&&(d.e.r=m.r),d.e.c<y&&(d.e.c=y),V&&(V.type=="XLDAPR"&&(g.D=!0),V=void 0);break;case 176:j.push(K);break;case 49:V=((o.xlmeta||{}).Cell||[])[K-1];break;case 494:var Y=n["!id"][K.relId];for(Y?(K.Target=Y.Target,K.loc&&(K.Target+="#"+K.loc),K.Rel=Y):K.relId==""&&(K.Target="#"+K.loc),v=K.rfx.s.r;v<=K.rfx.e.r;++v)for(y=K.rfx.s.c;y<=K.rfx.e.c;++y)o.dense?(c[v]||(c[v]=[]),c[v][y]||(c[v][y]={t:"z",v:void 0}),c[v][y].l=K):(w=zr({c:y,r:v}),c[w]||(c[w]={t:"z",v:void 0}),c[w].l=K);break;case 426:if(!o.cellFormula)break;I.push(K),B=o.dense?c[v][y]:c[As(y)+T],B.f=sl(K[1],d,{r:m.r,c:y},D,o),B.F=sn(K[0]);break;case 427:if(!o.cellFormula)break;L[zr(K[0].s)]=K[1],B=o.dense?c[v][y]:c[As(y)+T],B.f=sl(K[1],d,{r:m.r,c:y},D,o);break;case 60:if(!o.cellStyles)break;for(;K.e>=K.s;)P[K.e--]={width:K.w/256,hidden:!!(K.flags&1),level:K.level},W||(W=!0,qU(K.w/256)),op(P[K.e+1]);break;case 161:c["!autofilter"]={ref:sn(K)};break;case 476:c["!margins"]=K;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),K.name&&(a.Sheets[r].CodeName=K.name),(K.above||K.left)&&(c["!outline"]={above:K.above,left:K.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),K.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!J.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+te.toString(16))}}},o),delete o.supbooks,delete o["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=sn(u||d)),o.sheetRows&&c["!ref"]){var G=Vn(c["!ref"]);o.sheetRows<=+G.e.r&&(G.e.r=o.sheetRows-1,G.e.r>d.e.r&&(G.e.r=d.e.r),G.e.r<G.s.r&&(G.s.r=G.e.r),G.e.c>d.e.c&&(G.e.c=d.e.c),G.e.c<G.s.c&&(G.s.c=G.e.c),c["!fullref"]=c["!ref"],c["!ref"]=sn(G))}return j.length>0&&(c["!merges"]=j),P.length>0&&(c["!cols"]=P),R.length>0&&(c["!rows"]=R),c}function Het(e,t,r,n,a,s,i){if(t.v===void 0)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":t=qa(t),t.z=t.z||Ur[14],t.v=Li(Ka(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v;break}var c={r,c:n};switch(c.s=Sp(a.cellXfs,t,a),t.l&&s["!links"].push([zr(c),t.l]),t.c&&s["!comments"].push([zr(c),t.c]),t.t){case"s":case"str":return a.bookSST?(o=ZU(a.Strings,t.v,a.revStrings),c.t="s",c.v=o,i?Lt(e,18,set(t,c)):Lt(e,7,net(t,c))):(c.t="str",i?Lt(e,17,xet(t,c)):Lt(e,6,pet(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?i?Lt(e,13,Aet(t,c)):Lt(e,2,det(t,c)):i?Lt(e,16,cet(t,c)):Lt(e,5,oet(t,c)),!0;case"b":return c.t="b",i?Lt(e,15,YZe(t,c)):Lt(e,4,WZe(t,c)),!0;case"e":return c.t="e",i?Lt(e,14,tet(t,c)):Lt(e,3,ZZe(t,c)),!0}return i?Lt(e,12,KZe(t,c)):Lt(e,1,$Ze(t,c)),!0}function Vet(e,t,r,n){var a=Vn(t["!ref"]||"A1"),s,i="",o=[];Lt(e,145);var c=Array.isArray(t),u=a.e.r;t["!rows"]&&(u=Math.max(a.e.r,t["!rows"].length-1));for(var d=a.s.r;d<=u;++d){i=ni(d),LZe(e,t,a,d);var f=!1;if(d<=a.e.r)for(var h=a.s.c;h<=a.e.c;++h){d===a.s.r&&(o[h]=As(h)),s=o[h]+i;var m=c?(t[d]||[])[h]:t[s];if(!m){f=!1;continue}f=Het(e,m,d,h,n,t,f)}}Lt(e,146)}function zet(e,t){!t||!t["!merges"]||(Lt(e,177,_et(t["!merges"].length)),t["!merges"].forEach(function(r){Lt(e,176,Cet(r))}),Lt(e,178))}function $et(e,t){!t||!t["!cols"]||(Lt(e,390),t["!cols"].forEach(function(r,n){r&&Lt(e,60,Iet(n,r))}),Lt(e,391))}function Get(e,t){!t||!t["!ref"]||(Lt(e,648),Lt(e,649,Ret(Vn(t["!ref"]))),Lt(e,650))}function Ket(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var a=va(r,-1,n[1].Target.replace(/#.*$/,""),Cn.HLINK);Lt(e,494,ket(n,a))}}),delete t["!links"]}function qet(e,t,r,n){if(t["!comments"].length>0){var a=va(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Cn.VML);Lt(e,551,UU("rId"+a)),t["!legacy"]=a}}function Wet(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],s=typeof a.ref=="string"?a.ref:sn(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=xc(s);o.s.r==o.e.r&&(o.e.r=xc(t["!ref"]).e.r,s=sn(o));for(var c=0;c<i.length;++c){var u=i[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}c==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Lt(e,161,sy(Vn(s))),Lt(e,162)}}function Xet(e,t,r){Lt(e,133),Lt(e,137,Pet(t,r)),Lt(e,138),Lt(e,134)}function Yet(e,t){t["!protect"]&&Lt(e,535,Let(t["!protect"]))}function Jet(e,t,r,n){var a=mc(),s=r.SheetNames[e],i=r.Sheets[s]||{},o=s;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch{}var c=Vn(i["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Lt(a,129),(r.vbaraw||i["!outline"])&&Lt(a,147,VZe(o,i["!outline"])),Lt(a,148,UZe(c)),Xet(a,i,r.Workbook),$et(a,i),Vet(a,i,e,t),Yet(a,i),Wet(a,i,r,e),zet(a,i),Ket(a,i,n),i["!margins"]&&Lt(a,476,Oet(i["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&Get(a,i),qet(a,i,e,n),Lt(a,130),a.end()}function Zet(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var i=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(t[+i[1]]=r?+i[2]:i[2])});var a=Qn((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[t,a,n]}function ett(e,t,r,n,a,s){var i=s||{"!type":"chart"};if(!e)return s;var o=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var h=Zet(f);d.s.r=d.s.c=0,d.e.c=o,u=As(o),h[0].forEach(function(m,g){i[u+ni(g)]={t:"n",v:m,z:h[1]},c=g}),d.e.r<c&&(d.e.r=c),++o}),o>0&&(i["!ref"]=sn(d)),i}function ttt(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i,o=e.match(Lde);return o&&e7(o[0],s,a,r),(i=e.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=i[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function rtt(e,t){e.l+=10;var r=ml(e);return{name:r}}function ntt(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i=!1;return p0(e,function(c,u,d){switch(d){case 550:s["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var t7=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],att=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],stt=[],itt=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function sY(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],a=0;a!=t.length;++a){var s=t[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=$a(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function iY(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=$a(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function Hde(e){iY(e.WBProps,t7),iY(e.CalcPr,itt),sY(e.WBView,att),sY(e.Sheets,stt),j1.date1904=$a(e.WBProps.date1904)}function ott(e){return!e.Workbook||!e.Workbook.WBProps?"false":$a(e.Workbook.WBProps.date1904)?"true":"false"}var ltt="][*?/\\".split("");function Vde(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return ltt.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function ctt(e,t,r){e.forEach(function(n,a){Vde(n);for(var s=0;s<a;++s)if(n==e[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=t&&t[a]&&t[a].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function utt(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];ctt(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)sZe(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var dtt=/<\w+:workbook/;function ftt(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},i=0;if(e.replace(bl,function(c,u){var d=Wr(c);switch(FA(d[0])){case"<?xml":break;case"<workbook":c.match(dtt)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":t7.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=$a(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=Ba(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Qn(Ba(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=Ba(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),$a(d.hidden||"0")&&(s.Hidden=!0),i=u+c.length;break;case"</definedName>":s.Ref=Qn(Ba(e.slice(i,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),Tx.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return Hde(r),r}function zde(e){var t=[li];t[t.length]=qt("workbook",null,{xmlns:Tx[0],"xmlns:r":Di.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(t7.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=qt("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var i={name:wa(e.SheetNames[s].slice(0,31))};if(i.sheetId=""+(s+1),i["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}t[t.length]=qt("sheet",null,i)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var c={name:o.Name};o.Comment&&(c.comment=o.Comment),o.Sheet!=null&&(c.localSheetId=""+o.Sheet),o.Hidden&&(c.hidden="1"),o.Ref&&(t[t.length]=qt("definedName",wa(o.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function Att(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=lP(e),r.name=ml(e),r}function htt(e,t){return t||(t=Ct(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),UU(e.strRelID,t),lo(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function mtt(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?ml(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function ptt(e,t){t||(t=Ct(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),Due(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function gtt(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function xtt(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),s=GGe(e),i=ZJe(e,0,r),o=MU(e);e.l=n;var c={Name:s,Ptg:i};return a<268435455&&(c.Sheet=a),o&&(c.Comment=o),c}function vtt(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;t||(t={}),t.biff=12;var s=[],i=[[]];return i.SheetNames=[],i.XTI=[],xE[16]={n:"BrtFRTArchID$",f:gtt},p0(e,function(c,u,d){switch(d){case 156:i.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=sl(c.Ptg,null,null,i,t),delete t.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,c]):i[0]=[d,c],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(c),i.XTI=i.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),Hde(r),r.Names=s,r.supbooks=i,r}function btt(e,t){Lt(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Lt(e,156,htt(a))}Lt(e,144)}function ytt(e,t){t||(t=Ct(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return lo("SheetJS",t),lo(_4.version,t),lo(_4.version,t),lo("7262",t),t.length>t.l?t.slice(0,t.l):t}function wtt(e,t){t||(t=Ct(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function Ett(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(Lt(e,135),Lt(e,158,wtt(a)),Lt(e,136))}}function Ctt(e,t){var r=mc();return Lt(r,131),Lt(r,128,ytt()),Lt(r,153,ptt(e.Workbook&&e.Workbook.WBProps||null)),Ett(r,e),btt(r,e),Lt(r,132),r.end()}function _tt(e,t,r){return t.slice(-4)===".bin"?vtt(e,r):ftt(e,r)}function Stt(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?Qet(e,n,r,a,s,i,o):pZe(e,n,r,a,s,i,o)}function Ntt(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?ntt(e,n,r,a,s):ttt(e,n,r,a,s)}function ktt(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?kYe():BYe()}function Btt(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?SYe():NYe()}function Ttt(e,t,r,n){return t.slice(-4)===".bin"?EXe(e,r,n):dXe(e,r,n)}function jtt(e,t,r){return Cde(e,r)}function Itt(e,t,r){return t.slice(-4)===".bin"?TWe(e,r):NWe(e,r)}function Ftt(e,t,r){return t.slice(-4)===".bin"?yYe(e,r):fYe(e,r)}function Ott(e,t,r){return t.slice(-4)===".bin"?cYe(e):oYe(e)}function Dtt(e,t,r,n){return r.slice(-4)===".bin"?uYe(e,t,r,n):void 0}function Ptt(e,t,r){return t.slice(-4)===".bin"?aYe(e,t,r):iYe(e,t,r)}function Rtt(e,t,r){return(t.slice(-4)===".bin"?Ctt:zde)(e)}function Ltt(e,t,r,n,a){return(t.slice(-4)===".bin"?Jet:Mde)(e,r,n,a)}function Mtt(e,t,r){return(t.slice(-4)===".bin"?FXe:wde)(e,r)}function Utt(e,t,r){return(t.slice(-4)===".bin"?FWe:hde)(e,r)}function Qtt(e,t,r){return(t.slice(-4)===".bin"?wYe:Nde)(e)}function Htt(e){return(e.slice(-4)===".bin"?sYe:_de)()}var $de=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,Gde=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Qd(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=e.match($de),s,i,o,c;if(a)for(c=0;c!=a.length;++c)s=a[c].match(Gde),(i=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),n[o]=s[2].slice(1,s[2].length-1));return n}function Vtt(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match($de),a,s,i,o;if(n)for(o=0;o!=n.length;++o)a=n[o].match(Gde),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?i="xmlns"+a[1].slice(6):i=a[1].slice(s+1),r[i]=a[2].slice(1,a[2].length-1));return r}var v2;function ztt(e,t){var r=v2[e]||Qn(e);return r==="General"?ox(t):dd(r,t)}function $tt(e,t,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=$a(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=Ka(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Qn(t)]=a}function Gtt(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||g0[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=cE(e.v):e.w=ox(e.v):e.w=ztt(t||"General",e.v)}catch(s){if(r.WTF)throw s}try{var n=v2[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&ry(n)){var a=Eg(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function Ktt(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=nXe[n.Pattern]||n.Pattern)}e[t.ID]=t}function qtt(e,t,r,n,a,s,i,o,c,u){var d="General",f=n.StyleID,h={};u=u||{};var m=[],g=0;for(f===void 0&&o&&(f=o.StyleID),f===void 0&&i&&(f=i.StyleID);s[f]!==void 0&&(s[f].nf&&(d=s[f].nf),s[f].Interior&&m.push(s[f].Interior),!!s[f].Parent);)f=s[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=$a(e);break;case"String":n.t="s",n.r=EX(Qn(e)),n.v=e.indexOf("<")>-1?Qn(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(Ka(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=Qn(e):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=Uue[e],u.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=EX(t||e));break}if(Gtt(n,d,u),u.cellFormula!==!1)if(n.Formula){var x=Qn(n.Formula);x.charCodeAt(0)==61&&(x=x.slice(1)),n.f=T1(x,a),delete n.Formula,n.ArrayRange=="RC"?n.F=T1("RC:RC",a):n.ArrayRange&&(n.F=T1(n.ArrayRange,a),c.push([Vn(n.F),n.F]))}else for(g=0;g<c.length;++g)a.r>=c[g][0].s.r&&a.r<=c[g][0].e.r&&a.c>=c[g][0].s.c&&a.c<=c[g][0].e.c&&(n.F=c[g][1]);u.cellStyles&&(m.forEach(function(v){!h.patternType&&v.patternType&&(h.patternType=v.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function Wtt(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function eF(e,t){var r=t||{};ny();var n=Lw(FU(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Ba(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var i=qa(r);return i.type="string",fb.to_workbook(n,i)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Le){a.indexOf("<"+Le)>=0&&(s=!0)}),s)return Ort(n,r);v2={"General Number":"General","General Date":Ur[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Ur[15],"Short Date":Ur[14],"Long Time":Ur[19],"Medium Time":Ur[18],"Short Time":Ur[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Ur[2],Standard:Ur[4],Percent:Ur[10],Scientific:Ur[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,c=[],u,d={},f=[],h=r.dense?[]:{},m="",g={},x={},v=Qd('<Data ss:Type="String">'),y=0,w=0,_=0,T={s:{r:2e6,c:2e6},e:{r:0,c:0}},B={},j={},E="",N=0,I=[],L={},D={},k=0,P=[],R=[],W={},V=[],G,z=!1,K=[],J=[],te={},M=0,H=0,Y={Sheets:[],WBProps:{date1904:!1}},Z={};fE.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ae="";o=fE.exec(n);)switch(o[3]=(ae=o[3]).toLowerCase()){case"data":if(ae=="data"){if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break}if(c[c.length-1][1])break;o[1]==="/"?qtt(n.slice(y,o.index),E,v,c[c.length-1][0]=="comment"?W:g,{c:w,r:_},B,V[w],x,K,r):(E="",v=Qd(o[0]),y=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(R.length>0&&(g.c=R),(!r.sheetRows||r.sheetRows>_)&&g.v!==void 0&&(r.dense?(h[_]||(h[_]=[]),h[_][w]=g):h[As(w)+ni(_)]=g),g.HRef&&(g.l={Target:Qn(g.HRef)},g.HRefScreenTip&&(g.l.Tooltip=g.HRefScreenTip),delete g.HRef,delete g.HRefScreenTip),(g.MergeAcross||g.MergeDown)&&(M=w+(parseInt(g.MergeAcross,10)|0),H=_+(parseInt(g.MergeDown,10)|0),I.push({s:{c:w,r:_},e:{c:M,r:H}})),!r.sheetStubs)g.MergeAcross?w=M+1:++w;else if(g.MergeAcross||g.MergeDown){for(var le=w;le<=M;++le)for(var ie=_;ie<=H;++ie)(le>w||ie>_)&&(r.dense?(h[ie]||(h[ie]=[]),h[ie][le]={t:"z"}):h[As(le)+ni(ie)]={t:"z"});w=M+1}else++w;else g=Vtt(o[0]),g.Index&&(w=+g.Index-1),w<T.s.c&&(T.s.c=w),w>T.e.c&&(T.e.c=w),o[0].slice(-2)==="/>"&&++w,R=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(_<T.s.r&&(T.s.r=_),_>T.e.r&&(T.e.r=_),o[0].slice(-2)==="/>"&&(x=Qd(o[0]),x.Index&&(_=+x.Index-1)),w=0,++_):(x=Qd(o[0]),x.Index&&(_=+x.Index-1),te={},(x.AutoFitHeight=="0"||x.Height)&&(te.hpx=parseInt(x.Height,10),te.hpt=gE(te.hpx),J[_]=te),x.Hidden=="1"&&(te.hidden=!0,J[_]=te));break;case"worksheet":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));f.push(m),T.s.r<=T.e.r&&T.s.c<=T.e.c&&(h["!ref"]=sn(T),r.sheetRows&&r.sheetRows<=T.e.r&&(h["!fullref"]=h["!ref"],T.e.r=r.sheetRows-1,h["!ref"]=sn(T))),I.length&&(h["!merges"]=I),V.length>0&&(h["!cols"]=V),J.length>0&&(h["!rows"]=J),d[m]=h}else T={s:{r:2e6,c:2e6},e:{r:0,c:0}},_=w=0,c.push([o[3],!1]),u=Qd(o[0]),m=Qn(u.Name),h=r.dense?[]:{},I=[],K=[],J=[],Z={name:m,Hidden:0},Y.Sheets.push(Z);break;case"table":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;c.push([o[3],!1]),V=[],z=!1}break;case"style":o[1]==="/"?Ktt(B,j,r):j=Qd(o[0]);break;case"numberformat":j.nf=Qn(Qd(o[0]).Format||"General"),v2[j.nf]&&(j.nf=v2[j.nf]);for(var ce=0;ce!=392&&Ur[ce]!=j.nf;++ce);if(ce==392){for(ce=57;ce!=392;++ce)if(Ur[ce]==null){Mh(j.nf,ce);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(G=Qd(o[0]),G.Hidden&&(G.hidden=!0,delete G.Hidden),G.Width&&(G.wpx=parseInt(G.Width,10)),!z&&G.wpx>10){z=!0,ul=bde;for(var Ae=0;Ae<V.length;++Ae)V[Ae]&&op(V[Ae])}z&&op(G),V[G.Index-1||V.length]=G;for(var Fe=0;Fe<+G.Span;++Fe)V[V.length]=qa(G);break;case"namedrange":if(o[1]==="/")break;Y.Names||(Y.Names=[]);var ne=Wr(o[0]),_e={Name:ne.Name,Ref:T1(ne.RefersTo.slice(1),{r:0,c:0})};Y.Sheets.length>0&&(_e.Sheet=Y.Sheets.length-1),Y.Names.push(_e);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?E+=n.slice(N,o.index):N=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;j.Interior=Qd(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?gKe(L,ae,n.slice(k,o.index)):k=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else c.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));Wtt(W),R.push(W)}else c.push([o[3],!1]),u=Qd(o[0]),W={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var Ie=Qd(o[0]);h["!autofilter"]={ref:T1(Ie.Range).replace(/\$/g,"")},c.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"null":break;default:if(c.length==0&&o[3]=="document"||c.length==0&&o[3]=="uof")return dY(n,r);var Se=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Se=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Se=!1}break;case"excelworkbook":switch(o[3]){case"date1904":Y.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Se=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:Se=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(k,o.index)){case"SheetHidden":Z.Hidden=1;break;case"SheetVeryHidden":Z.Hidden=2;break}else k=o.index+o[0].length;break;case"header":h["!margins"]||Mg(h["!margins"]={},"xlml"),isNaN(+Wr(o[0]).Margin)||(h["!margins"].header=+Wr(o[0]).Margin);break;case"footer":h["!margins"]||Mg(h["!margins"]={},"xlml"),isNaN(+Wr(o[0]).Margin)||(h["!margins"].footer=+Wr(o[0]).Margin);break;case"pagemargins":var me=Wr(o[0]);h["!margins"]||Mg(h["!margins"]={},"xlml"),isNaN(+me.Top)||(h["!margins"].top=+me.Top),isNaN(+me.Left)||(h["!margins"].left=+me.Left),isNaN(+me.Right)||(h["!margins"].right=+me.Right),isNaN(+me.Bottom)||(h["!margins"].bottom=+me.Bottom);break;case"displayrighttoleft":Y.Views||(Y.Views=[]),Y.Views[0]||(Y.Views[0]={}),Y.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Se=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Se=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Se=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Se=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Se=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Se=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Se=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Se=!1}break;case"smarttags":break;default:Se=!1;break}if(Se||o[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?$tt(D,ae,P,n.slice(k,o.index)):(P=o,k=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+c.join("|")}var Be={};return!r.bookSheets&&!r.bookProps&&(Be.Sheets=d),Be.SheetNames=f,Be.Workbook=Y,Be.SSF=qa(Ur),Be.Props=L,Be.Custprops=D,Be}function mP(e,t){switch(n7(t=t||{}),t.type||"base64"){case"base64":return eF(cu(e),t);case"binary":case"buffer":case"file":return eF(e,t);case"array":return eF(Cp(e),t)}}function Xtt(e,t){var r=[];return e.Props&&r.push(xKe(e.Props,t)),e.Custprops&&r.push(vKe(e.Props,e.Custprops)),r.join("")}function Ytt(){return""}function Jtt(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var s=[];s.push(qt("NumberFormat",null,{"ss:Format":wa(Ur[n.numFmtId])}));var i={"ss:ID":"s"+(21+a)};r.push(qt("Style",s.join(""),i))}),qt("Styles",r.join(""))}function Kde(e){return qt("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+YU(e.Ref,{r:0,c:0})})}function Ztt(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(Kde(a)))}return qt("Names",r.join(""))}function ert(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],i=0;i<a.length;++i){var o=a[i];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||s.push(Kde(o)))}return s.join("")}function trt(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(qt("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(qt("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(qt("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(qt("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(To("ProtectContents","True")),e["!protect"].objects&&a.push(To("ProtectObjects","True")),e["!protect"].scenarios&&a.push(To("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(To("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(To("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){e["!protect"][i[0]]&&a.push("<"+i[1]+"/>")})),a.length==0?"":qt("WorksheetOptions",a.join(""),{xmlns:$c.x})}function rrt(e){return e.map(function(t){var r=yGe(t.t||""),n=qt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return qt("Comment",n,{"ss:Author":t.a})}).join("")}function nrt(e,t,r,n,a,s,i){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+wa(YU(e.f,i))),e.F&&e.F.slice(0,t.length)==t){var c=hs(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(c.r==i.r?"":"["+(c.r-i.r)+"]")+"C"+(c.c==i.c?"":"["+(c.c-i.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=wa(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=wa(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",h="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",h=String(e.v);break;case"b":f="Boolean",h=e.v?"1":"0";break;case"e":f="Error",h=g0[e.v];break;case"d":f="DateTime",h=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Ur[14]);break;case"s":f="String",h=bGe(e.v||"");break}var m=Sp(n.cellXfs,e,n);o["ss:StyleID"]="s"+(21+m),o["ss:Index"]=i.c+1;var g=e.v!=null?h:"",x=e.t=="z"?"":'<Data ss:Type="'+f+'">'+g+"</Data>";return(e.c||[]).length>0&&(x+=rrt(e.c)),qt("Cell",x,o)}function art(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Ab(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function srt(e,t,r,n){if(!e["!ref"])return"";var a=Vn(e["!ref"]),s=e["!merges"]||[],i=0,o=[];e["!cols"]&&e["!cols"].forEach(function(v,y){op(v);var w=!!v.width,_=hT(y,v),T={"ss:Index":y+1};w&&(T["ss:Width"]=mE(_.width)),v.hidden&&(T["ss:Hidden"]="1"),o.push(qt("Column",null,T))});for(var c=Array.isArray(e),u=a.s.r;u<=a.e.r;++u){for(var d=[art(u,(e["!rows"]||[])[u])],f=a.s.c;f<=a.e.c;++f){var h=!1;for(i=0;i!=s.length;++i)if(!(s[i].s.c>f)&&!(s[i].s.r>u)&&!(s[i].e.c<f)&&!(s[i].e.r<u)){(s[i].s.c!=f||s[i].s.r!=u)&&(h=!0);break}if(!h){var m={r:u,c:f},g=zr(m),x=c?(e[u]||[])[f]:e[g];d.push(nrt(x,g,e,t,r,n,m))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function irt(e,t,r){var n=[],a=r.SheetNames[e],s=r.Sheets[a],i=s?ert(s,t,e,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=s?srt(s,t,e,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(trt(s,t,e,r)),n.join("")}function ort(e,t){t||(t={}),e.SSF||(e.SSF=qa(Ur)),e.SSF&&(ny(),oT(e.SSF),t.revssf=cT(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],Sp(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(Xtt(e,t)),r.push(Ytt()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(qt("Worksheet",irt(n,t,e),{"ss:Name":wa(e.SheetNames[n])}));return r[2]=Jtt(e,t),r[3]=Ztt(e),li+qt("Workbook",r.join(""),{xmlns:$c.ss,"xmlns:o":$c.o,"xmlns:x":$c.x,"xmlns:ss":$c.ss,"xmlns:dt":$c.dt,"xmlns:html":$c.html})}function lrt(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=YGe(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=JGe(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var crt=[60,1084,2066,2165,2175];function urt(e,t,r,n,a){var s=n,i=[],o=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(o)}i.push(o),r.l+=s;for(var c=Ih(r,r.l),u=pP[c],d=0;u!=null&&crt.indexOf(c)>-1;)s=Ih(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),o=r.slice(d,r.l+4+s),i.push(o),r.l+=4+s,u=pP[c=Ih(r,r.l)];var f=so(i);Bo(f,0);var h=0;f.lens=[];for(var m=0;m<i.length;++m)f.lens.push(h),h+=i[m].length;if(f.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+n;return t.f(f,f.length,a)}function Yf(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Ur[n])}catch(s){if(t.WTF)throw s}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||g0[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=cE(e.v):e.w=ox(e.v):e.w=dd(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(s){if(t.WTF)throw s}if(t.cellDates&&n&&e.t=="n"&&ry(Ur[n]||String(n))){var a=Eg(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function C5(e,t,r){return{v:e,ixfe:t,t:r}}function drt(e,t){var r={opts:{}},n={},a=t.dense?[]:{},s={},i={},o=null,c=[],u="",d={},f,h="",m,g,x,v,y={},w=[],_,T,B=[],j=[],E={Sheets:[],WBProps:{date1904:!1},Views:[{}]},N={},I=function(Ht){return Ht<8?Pg[Ht]:Ht<64&&j[Ht-8]||Pg[Ht]},L=function(Ht,yt,jr){var rr=yt.XF.data;if(!(!rr||!rr.patternType||!jr||!jr.cellStyles)){yt.s={},yt.s.patternType=rr.patternType;var on;(on=hE(I(rr.icvFore)))&&(yt.s.fgColor={rgb:on}),(on=hE(I(rr.icvBack)))&&(yt.s.bgColor={rgb:on})}},D=function(Ht,yt,jr){if(!(te>1)&&!(jr.sheetRows&&Ht.r>=jr.sheetRows)){if(jr.cellStyles&&yt.XF&&yt.XF.data&&L(Ht,yt,jr),delete yt.ixfe,delete yt.XF,f=Ht,h=zr(Ht),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),Ht.r<i.s.r&&(i.s.r=Ht.r),Ht.c<i.s.c&&(i.s.c=Ht.c),Ht.r+1>i.e.r&&(i.e.r=Ht.r+1),Ht.c+1>i.e.c&&(i.e.c=Ht.c+1),jr.cellFormula&&yt.f){for(var rr=0;rr<w.length;++rr)if(!(w[rr][0].s.c>Ht.c||w[rr][0].s.r>Ht.r)&&!(w[rr][0].e.c<Ht.c||w[rr][0].e.r<Ht.r)){yt.F=sn(w[rr][0]),(w[rr][0].s.c!=Ht.c||w[rr][0].s.r!=Ht.r)&&delete yt.f,yt.f&&(yt.f=""+sl(w[rr][1],i,Ht,K,k));break}}jr.dense?(a[Ht.r]||(a[Ht.r]=[]),a[Ht.r][Ht.c]=yt):a[h]=yt}},k={enc:!1,sbcch:0,snames:[],sharedf:y,arrayf:w,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(k.password=t.password);var P,R=[],W=[],V=[],G=[],z=!1,K=[];K.SheetNames=k.snames,K.sharedf=k.sharedf,K.arrayf=k.arrayf,K.names=[],K.XTI=[];var J=0,te=0,M=0,H=[],Y=[],Z;k.codepage=1200,Xd(1200);for(var ae=!1;e.l<e.length-1;){var le=e.l,ie=e.read_shift(2);if(ie===0&&J===10)break;var ce=e.l===e.length?0:e.read_shift(2),Ae=pP[ie];if(Ae&&Ae.f){if(t.bookSheets&&J===133&&ie!==133)break;if(J=ie,Ae.r===2||Ae.r==12){var Fe=e.read_shift(2);if(ce-=2,!k.enc&&Fe!==ie&&((Fe&255)<<8|Fe>>8)!==ie)throw new Error("rt mismatch: "+Fe+"!="+ie);Ae.r==12&&(e.l+=10,ce-=10)}var ne={};if(ie===10?ne=Ae.f(e,ce,k):ne=urt(ie,Ae,e,ce,k),te==0&&[9,521,1033,2057].indexOf(J)===-1)continue;switch(ie){case 34:r.opts.Date1904=E.WBProps.date1904=ne;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(k.enc||(e.l=0),k.enc=ne,!t.password)throw new Error("File is password-protected");if(ne.valid==null)throw new Error("Encryption scheme unsupported");if(!ne.valid)throw new Error("Password is incorrect");break;case 92:k.lastuser=ne;break;case 66:var _e=Number(ne);switch(_e){case 21010:_e=1200;break;case 32768:_e=1e4;break;case 32769:_e=1252;break}Xd(k.codepage=_e),ae=!0;break;case 317:k.rrtabid=ne;break;case 25:k.winlocked=ne;break;case 439:r.opts.RefreshAll=ne;break;case 12:r.opts.CalcCount=ne;break;case 16:r.opts.CalcDelta=ne;break;case 17:r.opts.CalcIter=ne;break;case 13:r.opts.CalcMode=ne;break;case 14:r.opts.CalcPrecision=ne;break;case 95:r.opts.CalcSaveRecalc=ne;break;case 15:k.CalcRefMode=ne;break;case 2211:r.opts.FullCalc=ne;break;case 129:ne.fDialog&&(a["!type"]="dialog"),ne.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),ne.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:B.push(ne);break;case 430:K.push([ne]),K[K.length-1].XTI=[];break;case 35:case 547:K[K.length-1].push(ne);break;case 24:case 536:Z={Name:ne.Name,Ref:sl(ne.rgce,i,null,K,k)},ne.itab>0&&(Z.Sheet=ne.itab-1),K.names.push(Z),K[0]||(K[0]=[],K[0].XTI=[]),K[K.length-1].push(ne),ne.Name=="_xlnm._FilterDatabase"&&ne.itab>0&&ne.rgce&&ne.rgce[0]&&ne.rgce[0][0]&&ne.rgce[0][0][0]=="PtgArea3d"&&(Y[ne.itab-1]={ref:sn(ne.rgce[0][0][1][2])});break;case 22:k.ExternCount=ne;break;case 23:K.length==0&&(K[0]=[],K[0].XTI=[]),K[K.length-1].XTI=K[K.length-1].XTI.concat(ne),K.XTI=K.XTI.concat(ne);break;case 2196:if(k.biff<8)break;Z!=null&&(Z.Comment=ne[1]);break;case 18:a["!protect"]=ne;break;case 19:ne!==0&&k.WTF&&console.error("Password verifier: "+ne);break;case 133:s[ne.pos]=ne,k.snames.push(ne.name);break;case 10:{if(--te)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,a["!ref"]=sn(i),t.sheetRows&&t.sheetRows<=i.e.r){var Ie=i.e.r;i.e.r=t.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=sn(i),i.e.r=Ie}i.e.r++,i.e.c++}R.length>0&&(a["!merges"]=R),W.length>0&&(a["!objects"]=W),V.length>0&&(a["!cols"]=V),G.length>0&&(a["!rows"]=G),E.Sheets.push(N)}u===""?d=a:n[u]=a,a=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(k.biff===8&&(k.biff={9:2,521:3,1033:4}[ie]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ne.BIFFVer]||8),k.biffguess=ne.BIFFVer==0,ne.BIFFVer==0&&ne.dt==4096&&(k.biff=5,ae=!0,Xd(k.codepage=28591)),k.biff==8&&ne.BIFFVer==0&&ne.dt==16&&(k.biff=2),te++)break;if(a=t.dense?[]:{},k.biff<8&&!ae&&(ae=!0,Xd(k.codepage=t.codepage||1252)),k.biff<5||ne.BIFFVer==0&&ne.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var Se={pos:e.l-ce,name:u};s[Se.pos]=Se,k.snames.push(u)}else u=(s[le]||{name:""}).name;ne.dt==32&&(a["!type"]="chart"),ne.dt==64&&(a["!type"]="macro"),R=[],W=[],k.arrayf=w=[],V=[],G=[],z=!1,N={Hidden:(s[le]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(t.dense?(a[ne.r]||[])[ne.c]:a[zr({c:ne.c,r:ne.r})])&&++ne.c,_={ixfe:ne.ixfe,XF:B[ne.ixfe]||{},v:ne.val,t:"n"},M>0&&(_.z=H[_.ixfe>>8&63]),Yf(_,t,r.opts.Date1904),D({c:ne.c,r:ne.r},_,t);break;case 5:case 517:_={ixfe:ne.ixfe,XF:B[ne.ixfe],v:ne.val,t:ne.t},M>0&&(_.z=H[_.ixfe>>8&63]),Yf(_,t,r.opts.Date1904),D({c:ne.c,r:ne.r},_,t);break;case 638:_={ixfe:ne.ixfe,XF:B[ne.ixfe],v:ne.rknum,t:"n"},M>0&&(_.z=H[_.ixfe>>8&63]),Yf(_,t,r.opts.Date1904),D({c:ne.c,r:ne.r},_,t);break;case 189:for(var me=ne.c;me<=ne.C;++me){var Be=ne.rkrec[me-ne.c][0];_={ixfe:Be,XF:B[Be],v:ne.rkrec[me-ne.c][1],t:"n"},M>0&&(_.z=H[_.ixfe>>8&63]),Yf(_,t,r.opts.Date1904),D({c:me,r:ne.r},_,t)}break;case 6:case 518:case 1030:{if(ne.val=="String"){o=ne;break}if(_=C5(ne.val,ne.cell.ixfe,ne.tt),_.XF=B[_.ixfe],t.cellFormula){var Le=ne.formula;if(Le&&Le[0]&&Le[0][0]&&Le[0][0][0]=="PtgExp"){var We=Le[0][0][1][0],be=Le[0][0][1][1],Oe=zr({r:We,c:be});y[Oe]?_.f=""+sl(ne.formula,i,ne.cell,K,k):_.F=((t.dense?(a[We]||[])[be]:a[Oe])||{}).F}else _.f=""+sl(ne.formula,i,ne.cell,K,k)}M>0&&(_.z=H[_.ixfe>>8&63]),Yf(_,t,r.opts.Date1904),D(ne.cell,_,t),o=ne}break;case 7:case 519:if(o)o.val=ne,_=C5(ne,o.cell.ixfe,"s"),_.XF=B[_.ixfe],t.cellFormula&&(_.f=""+sl(o.formula,i,o.cell,K,k)),M>0&&(_.z=H[_.ixfe>>8&63]),Yf(_,t,r.opts.Date1904),D(o.cell,_,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{w.push(ne);var Pe=zr(ne[0].s);if(m=t.dense?(a[ne[0].s.r]||[])[ne[0].s.c]:a[Pe],t.cellFormula&&m){if(!o||!Pe||!m)break;m.f=""+sl(ne[1],i,ne[0],K,k),m.F=sn(ne[0])}}break;case 1212:{if(!t.cellFormula)break;if(h){if(!o)break;y[zr(o.cell)]=ne[0],m=t.dense?(a[o.cell.r]||[])[o.cell.c]:a[zr(o.cell)],(m||{}).f=""+sl(ne[0],i,f,K,k)}}break;case 253:_=C5(c[ne.isst].t,ne.ixfe,"s"),c[ne.isst].h&&(_.h=c[ne.isst].h),_.XF=B[_.ixfe],M>0&&(_.z=H[_.ixfe>>8&63]),Yf(_,t,r.opts.Date1904),D({c:ne.c,r:ne.r},_,t);break;case 513:t.sheetStubs&&(_={ixfe:ne.ixfe,XF:B[ne.ixfe],t:"z"},M>0&&(_.z=H[_.ixfe>>8&63]),Yf(_,t,r.opts.Date1904),D({c:ne.c,r:ne.r},_,t));break;case 190:if(t.sheetStubs)for(var qe=ne.c;qe<=ne.C;++qe){var et=ne.ixfe[qe-ne.c];_={ixfe:et,XF:B[et],t:"z"},M>0&&(_.z=H[_.ixfe>>8&63]),Yf(_,t,r.opts.Date1904),D({c:qe,r:ne.r},_,t)}break;case 214:case 516:case 4:_=C5(ne.val,ne.ixfe,"s"),_.XF=B[_.ixfe],M>0&&(_.z=H[_.ixfe>>8&63]),Yf(_,t,r.opts.Date1904),D({c:ne.c,r:ne.r},_,t);break;case 0:case 512:te===1&&(i=ne);break;case 252:c=ne;break;case 1054:if(k.biff==4){H[M++]=ne[1];for(var ct=0;ct<M+163&&Ur[ct]!=ne[1];++ct);ct>=163&&Mh(ne[1],M+163)}else Mh(ne[1],ne[0]);break;case 30:{H[M++]=ne;for(var pt=0;pt<M+163&&Ur[pt]!=ne;++pt);pt>=163&&Mh(ne,M+163)}break;case 229:R=R.concat(ne);break;case 93:W[ne.cmo[0]]=k.lastobj=ne;break;case 438:k.lastobj.TxO=ne;break;case 127:k.lastobj.ImData=ne;break;case 440:for(v=ne[0].s.r;v<=ne[0].e.r;++v)for(x=ne[0].s.c;x<=ne[0].e.c;++x)m=t.dense?(a[v]||[])[x]:a[zr({c:x,r:v})],m&&(m.l=ne[1]);break;case 2048:for(v=ne[0].s.r;v<=ne[0].e.r;++v)for(x=ne[0].s.c;x<=ne[0].e.c;++x)m=t.dense?(a[v]||[])[x]:a[zr({c:x,r:v})],m&&m.l&&(m.l.Tooltip=ne[1]);break;case 28:{if(k.biff<=5&&k.biff>=2)break;m=t.dense?(a[ne[0].r]||[])[ne[0].c]:a[zr(ne[0])];var Ft=W[ne[2]];m||(t.dense?(a[ne[0].r]||(a[ne[0].r]=[]),m=a[ne[0].r][ne[0].c]={t:"z"}):m=a[zr(ne[0])]={t:"z"},i.e.r=Math.max(i.e.r,ne[0].r),i.s.r=Math.min(i.s.r,ne[0].r),i.e.c=Math.max(i.e.c,ne[0].c),i.s.c=Math.min(i.s.c,ne[0].c)),m.c||(m.c=[]),g={a:ne[1],t:Ft.TxO.t},m.c.push(g)}break;case 2173:XXe(B[ne.ixfe],ne.ext);break;case 125:{if(!k.cellStyles)break;for(;ne.e>=ne.s;)V[ne.e--]={width:ne.w/256,level:ne.level||0,hidden:!!(ne.flags&1)},z||(z=!0,qU(ne.w/256)),op(V[ne.e+1])}break;case 520:{var Ut={};ne.level!=null&&(G[ne.r]=Ut,Ut.level=ne.level),ne.hidden&&(G[ne.r]=Ut,Ut.hidden=!0),ne.hpt&&(G[ne.r]=Ut,Ut.hpt=ne.hpt,Ut.hpx=Ab(ne.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||Mg(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[ie]]=ne;break;case 161:a["!margins"]||Mg(a["!margins"]={}),a["!margins"].header=ne.header,a["!margins"].footer=ne.footer;break;case 574:ne.RTL&&(E.Views[0].RTL=!0);break;case 146:j=ne;break;case 2198:P=ne;break;case 140:T=ne;break;case 442:u?N.CodeName=ne||N.name:E.WBProps.CodeName=ne||"ThisWorkbook";break}}else Ae||console.error("Missing Info for XLS Record 0x"+ie.toString(16)),e.l+=ce}return r.SheetNames=Ms(s).sort(function(Rt,Ht){return Number(Rt)-Number(Ht)}).map(function(Rt){return s[Rt].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&Y.forEach(function(Rt,Ht){r.Sheets[r.SheetNames[Ht]]["!autofilter"]=Rt}),r.Strings=c,r.SSF=qa(Ur),k.enc&&(r.Encryption=k.enc),P&&(r.Themes=P),r.Metadata={},T!==void 0&&(r.Metadata.Country=T),K.names.length>0&&(E.Names=K.names),r.Workbook=E,r}var b2={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function frt(e,t,r){var n=Nr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=QX(n,cP,b2.DSI);for(var s in a)t[s]=a[s]}catch(u){if(r.WTF)throw u}var i=Nr.find(e,"/!SummaryInformation");if(i&&i.size>0)try{var o=QX(i,uP,b2.SI);for(var c in o)t[c]==null&&(t[c]=o[c])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(Gue(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function Art(e,t){var r=[],n=[],a=[],s=0,i,o=gX(cP,"n"),c=gX(uP,"n");if(e.Props)for(i=Ms(e.Props),s=0;s<i.length;++s)(Object.prototype.hasOwnProperty.call(o,i[s])?r:Object.prototype.hasOwnProperty.call(c,i[s])?n:a).push([i[s],e.Props[i[s]]]);if(e.Custprops)for(i=Ms(e.Custprops),s=0;s<i.length;++s)Object.prototype.hasOwnProperty.call(e.Props||{},i[s])||(Object.prototype.hasOwnProperty.call(o,i[s])?r:Object.prototype.hasOwnProperty.call(c,i[s])?n:a).push([i[s],e.Custprops[i[s]]]);var u=[];for(s=0;s<a.length;++s)Zue.indexOf(a[s][0])>-1||$ue.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&Nr.utils.cfb_add(t,"/SummaryInformation",HX(n,b2.SI,c,uP)),(r.length||u.length)&&Nr.utils.cfb_add(t,"/DocumentSummaryInformation",HX(r,b2.DSI,o,cP,u.length?u:null,b2.UDI))}function qde(e,t){t||(t={}),n7(t),CU(),t.codepage&&EU(t.codepage);var r,n;if(e.FullPaths){if(Nr.find(e,"/encryption"))throw new Error("File is password-protected");r=Nr.find(e,"!CompObj"),n=Nr.find(e,"/Workbook")||Nr.find(e,"/Book")}else{switch(t.type){case"base64":e=Yc(cu(e));break;case"binary":e=Yc(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Bo(e,0),n={content:e}}var a,s;if(r&&lrt(r),t.bookProps&&!t.bookSheets)a={};else{var i=vn?"buffer":"array";if(n&&n.content)a=drt(n.content,t);else if((s=Nr.find(e,"PerfectOffice_MAIN"))&&s.content)a=Lg.to_workbook(s.content,(t.type=i,t));else if((s=Nr.find(e,"NativeContent_MAIN"))&&s.content)a=Lg.to_workbook(s.content,(t.type=i,t));else throw(s=Nr.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Nr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=CYe(e))}var o={};return e.FullPaths&&frt(e,o,t),a.Props=a.Custprops=o,t.bookFiles&&(a.cfb=e),a}function hrt(e,t){var r=t||{},n=Nr.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Nr.utils.cfb_add(n,a,Wde(e,r)),r.biff==8&&(e.Props||e.Custprops)&&Art(e,n),r.biff==8&&e.vbaraw&&_Ye(n,Nr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var xE={0:{f:PZe},1:{f:zZe},2:{f:uet},3:{f:JZe},4:{f:qZe},5:{f:iet},6:{f:met},7:{f:ret},8:{f:wet},9:{f:yet},10:{f:vet},11:{f:bet},12:{f:GZe},13:{f:fet},14:{f:eet},15:{f:XZe},16:{f:Ude},17:{f:get},18:{f:aet},19:{f:LU},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:xtt},40:{},42:{},43:{f:hXe},44:{f:fXe},45:{f:gXe},46:{f:vXe},47:{f:xXe},48:{},49:{f:MGe},50:{},51:{f:ZXe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:ude},62:{f:het},63:{f:lYe},64:{f:Met},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:gl,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Det},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:HZe},148:{f:MZe,p:16},151:{f:Bet},152:{},153:{f:mtt},154:{},155:{},156:{f:Att},157:{},158:{},159:{T:1,f:BWe},160:{T:-1},161:{T:1,f:Ox},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Eet},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:YXe},336:{T:-1},337:{f:rYe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:lP},357:{},358:{},359:{},360:{T:1},361:{},362:{f:cde},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Tet},427:{f:jet},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Fet},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:QZe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Net},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:lP},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:vYe},633:{T:1},634:{T:-1},635:{T:1,f:gYe},636:{T:-1},637:{f:VGe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:rtt},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Uet},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},pP={6:{f:J6},10:{f:im},12:{f:vi},13:{f:vi},14:{f:qs},15:{f:qs},16:{f:Al},17:{f:qs},18:{f:qs},19:{f:vi},20:{f:qX},21:{f:qX},23:{f:cde},24:{f:XX},25:{f:qs},26:{},27:{},28:{f:Lqe},29:{},34:{f:qs},35:{f:WX},38:{f:Al},39:{f:Al},40:{f:Al},41:{f:Al},42:{f:qs},43:{f:qs},47:{f:XWe},49:{f:dqe},51:{f:vi},60:{},61:{f:iqe},64:{f:qs},65:{f:uqe},66:{f:vi},77:{},80:{},81:{},82:{},85:{f:vi},89:{},90:{},91:{},92:{f:WKe},93:{f:Qqe},94:{},95:{f:qs},96:{},97:{},99:{f:qs},125:{f:ude},128:{f:Sqe},129:{f:YKe},130:{f:vi},131:{f:qs},132:{f:qs},133:{f:JKe},134:{},140:{f:Wqe},141:{f:vi},144:{},146:{f:Jqe},151:{},152:{},153:{},154:{},155:{},156:{f:vi},157:{},158:{},160:{f:sWe},161:{f:tWe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:wqe},190:{f:Eqe},193:{f:im},197:{},198:{},199:{},200:{},201:{},202:{f:qs},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:vi},220:{},221:{f:qs},222:{},224:{f:_qe},225:{f:qKe},226:{f:im},227:{},229:{f:Mqe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:eqe},253:{f:Aqe},255:{f:rqe},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:ede},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:qs},353:{f:im},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:jqe},431:{f:qs},432:{},433:{},434:{},437:{},438:{f:zqe},439:{f:qs},440:{f:$qe},441:{},442:{f:wC},443:{},444:{f:vi},445:{},446:{},448:{f:im},449:{f:sqe,r:2},450:{f:im},512:{f:$X},513:{f:aWe},515:{f:Bqe},516:{f:mqe},517:{f:KX},519:{f:iWe},520:{f:nqe},523:{},545:{f:YX},549:{f:zX},566:{},574:{f:lqe},638:{f:yqe},659:{},1048:{},1054:{f:gqe},1084:{},1212:{f:Dqe},2048:{f:Kqe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:y5},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:im},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Zqe,r:12},2173:{f:WXe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:qs,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:Oqe,r:12},2197:{},2198:{f:VXe,r:12},2199:{},2200:{},2201:{},2202:{f:Pqe,r:12},2203:{f:im},2204:{},2205:{},2206:{},2207:{},2211:{f:aqe},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:vi},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:rWe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Yqe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:$X},1:{},2:{f:dWe},3:{f:cWe},4:{f:lWe},5:{f:KX},7:{f:AWe},8:{},9:{f:y5},11:{},22:{f:vi},30:{f:vqe},31:{},32:{},33:{f:YX},36:{},37:{f:zX},50:{f:hWe},62:{},52:{},67:{},68:{f:vi},69:{},86:{},126:{},127:{f:oWe},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:mWe},223:{},234:{},354:{},421:{},518:{f:J6},521:{f:y5},536:{f:XX},547:{f:WX},561:{},579:{},1030:{f:J6},1033:{f:y5},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Wt(e,t,r,n){var a=t;if(!isNaN(a)){var s=n||(r||[]).length||0,i=e.next(4);i.write_shift(2,a),i.write_shift(2,s),s>0&&DU(r)&&e.push(r)}}function mrt(e,t,r,n){var a=(r||[]).length||0;if(a<=8224)return Wt(e,t,r,a);var s=t;if(!isNaN(s)){for(var i=r.parts||[],o=0,c=0,u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;var d=e.next(4);for(d.write_shift(2,s),d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<a;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function SC(e,t,r){return e||(e=Ct(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function prt(e,t,r,n){var a=Ct(9);return SC(a,e,t),tde(r,n||"b",a),a}function grt(e,t,r){var n=Ct(8+2*r.length);return SC(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function xrt(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?Li(Ka(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?Wt(e,2,fWe(r,n,a)):Wt(e,3,uWe(r,n,a));return;case"b":case"e":Wt(e,5,prt(r,n,t.v,t.t));return;case"s":case"str":Wt(e,4,grt(r,n,(t.v||"").slice(0,255)));return}Wt(e,1,SC(null,r,n))}function vrt(e,t,r,n){var a=Array.isArray(t),s=Vn(t["!ref"]||"A1"),i,o="",c=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),i=sn(s)}for(var u=s.s.r;u<=s.e.r;++u){o=ni(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(c[d]=As(d)),i=c[d]+o;var f=a?(t[u]||[])[d]:t[i];f&&xrt(e,f,u,d)}}}function brt(e,t){for(var r=t||{},n=mc(),a=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Wt(n,r.biff==4?1033:r.biff==3?521:9,$U(e,16,r)),vrt(n,e.Sheets[e.SheetNames[a]],a,r),Wt(n,10),n.end()}function yrt(e,t,r){Wt(e,49,fqe({sz:12,name:"Arial"},r))}function wrt(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Wt(e,1054,xqe(a,t[a],r))})}function Ert(e,t){var r=Ct(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Wt(e,2151,r),r=Ct(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),ide(Vn(t["!ref"]||"A1"),r),r.write_shift(4,4),Wt(e,2152,r)}function Crt(e,t){for(var r=0;r<16;++r)Wt(e,224,GX({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){Wt(e,224,GX(n,0,t))})}function _rt(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];Wt(e,440,Gqe(n)),n[1].Tooltip&&Wt(e,2048,qqe(n))}delete t["!links"]}function Srt(e,t){if(t){var r=0;t.forEach(function(n,a){++r<=256&&n&&Wt(e,125,eWe(hT(a,n),a))})}}function Nrt(e,t,r,n,a){var s=16+Sp(a.cellXfs,t,a);if(t.v==null&&!t.bf){Wt(e,513,dx(r,n,s));return}if(t.bf)Wt(e,6,YJe(t,r,n,a,s));else switch(t.t){case"d":case"n":var i=t.t=="d"?Li(Ka(t.v)):t.v;Wt(e,515,Tqe(r,n,i,s));break;case"b":case"e":Wt(e,517,kqe(r,n,t.v,s,a,t.t));break;case"s":case"str":if(a.bookSST){var o=ZU(a.Strings,t.v,a.revStrings);Wt(e,253,hqe(r,n,o,s))}else Wt(e,516,pqe(r,n,(t.v||"").slice(0,255),s,a));break;default:Wt(e,513,dx(r,n,s))}}function krt(e,t,r){var n=mc(),a=r.SheetNames[e],s=r.Sheets[a]||{},i=(r||{}).Workbook||{},o=(i.Sheets||[])[e]||{},c=Array.isArray(s),u=t.biff==8,d,f="",h=[],m=Vn(s["!ref"]||"A1"),g=u?65536:16384;if(m.e.c>255||m.e.r>=g){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,g-1)}Wt(n,2057,$U(r,16,t)),Wt(n,13,qu(1)),Wt(n,12,qu(100)),Wt(n,15,Bl(!0)),Wt(n,17,Bl(!1)),Wt(n,16,cx(.001)),Wt(n,95,Bl(!0)),Wt(n,42,Bl(!1)),Wt(n,43,Bl(!1)),Wt(n,130,qu(1)),Wt(n,128,Nqe()),Wt(n,131,Bl(!1)),Wt(n,132,Bl(!1)),u&&Srt(n,s["!cols"]),Wt(n,512,bqe(m,t)),u&&(s["!links"]=[]);for(var x=m.s.r;x<=m.e.r;++x){f=ni(x);for(var v=m.s.c;v<=m.e.c;++v){x===m.s.r&&(h[v]=As(v)),d=h[v]+f;var y=c?(s[x]||[])[v]:s[d];y&&(Nrt(n,y,x,v,t),u&&y.l&&s["!links"].push([d,y.l]))}}var w=o.CodeName||o.name||a;return u&&Wt(n,574,cqe((i.Views||[])[0])),u&&(s["!merges"]||[]).length&&Wt(n,229,Uqe(s["!merges"])),u&&_rt(n,s),Wt(n,442,rde(w)),u&&Ert(n,s),Wt(n,10),n.end()}function Brt(e,t,r){var n=mc(),a=(e||{}).Workbook||{},s=a.Sheets||[],i=a.WBProps||{},o=r.biff==8,c=r.biff==5;if(Wt(n,2057,$U(e,5,r)),r.bookType=="xla"&&Wt(n,135),Wt(n,225,o?qu(1200):null),Wt(n,193,kKe(2)),c&&Wt(n,191),c&&Wt(n,192),Wt(n,226),Wt(n,92,XKe("SheetJS",r)),Wt(n,66,qu(o?1200:1252)),o&&Wt(n,353,qu(0)),o&&Wt(n,448),Wt(n,317,nWe(e.SheetNames.length)),o&&e.vbaraw&&Wt(n,211),o&&e.vbaraw){var u=i.CodeName||"ThisWorkbook";Wt(n,442,rde(u))}Wt(n,156,qu(17)),Wt(n,25,Bl(!1)),Wt(n,18,Bl(!1)),Wt(n,19,qu(0)),o&&Wt(n,431,Bl(!1)),o&&Wt(n,444,qu(0)),Wt(n,61,oqe()),Wt(n,64,Bl(!1)),Wt(n,141,qu(0)),Wt(n,34,Bl(ott(e)=="true")),Wt(n,14,Bl(!0)),o&&Wt(n,439,Bl(!1)),Wt(n,218,qu(0)),yrt(n,e,r),wrt(n,e.SSF,r),Crt(n,r),o&&Wt(n,352,Bl(!1));var d=n.end(),f=mc();o&&Wt(f,140,Xqe()),o&&r.Strings&&mrt(f,252,tqe(r.Strings)),Wt(f,10);var h=f.end(),m=mc(),g=0,x=0;for(x=0;x<e.SheetNames.length;++x)g+=(o?12:11)+(o?2:1)*e.SheetNames[x].length;var v=d.length+g+h.length;for(x=0;x<e.SheetNames.length;++x){var y=s[x]||{};Wt(m,133,ZKe({pos:v,hs:y.Hidden||0,dt:0,name:e.SheetNames[x]},r)),v+=t[x].length}var w=m.end();if(g!=w.length)throw new Error("BS8 "+g+" != "+w.length);var _=[];return d.length&&_.push(d),w.length&&_.push(w),h.length&&_.push(h),so(_)}function Trt(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=qa(Ur)),e&&e.SSF&&(ny(),oT(e.SSF),r.revssf=cT(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,a7(r),r.cellXfs=[],Sp(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=krt(a,r,e);return n.unshift(Brt(e,n,r)),so(n)}function Wde(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var a=xc(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=t||{};switch(s.biff||2){case 8:case 5:return Trt(e,t);case 4:case 3:case 2:return brt(e,t)}throw new Error("invalid type "+s.bookType+" for BIFF")}function oY(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var a=e.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=e.match(/<\/table/i),i=a.index,o=s&&s.index||e.length,c=fGe(e.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,h=0,m={s:{r:1e7,c:1e7},e:{r:0,c:0}},g=[];for(i=0;i<c.length;++i){var x=c[i].trim(),v=x.slice(0,3).toLowerCase();if(v=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(v!="<td"&&v!="<th")){var y=x.split(/<\/t[dh]>/i);for(o=0;o<y.length;++o){var w=y[o].trim();if(w.match(/<t[dh]/i)){for(var _=w,T=0;_.charAt(0)=="<"&&(T=_.indexOf(">"))>-1;)_=_.slice(T+1);for(var B=0;B<g.length;++B){var j=g[B];j.s.c==d&&j.s.r<u&&u<=j.e.r&&(d=j.e.c+1,B=-1)}var E=Wr(w.slice(0,w.indexOf(">")));h=E.colspan?+E.colspan:1,((f=+E.rowspan)>1||h>1)&&g.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+h-1}});var N=E.t||E["data-t"]||"";if(!_.length){d+=h;continue}if(_=vue(_),m.s.r>u&&(m.s.r=u),m.e.r<u&&(m.e.r=u),m.s.c>d&&(m.s.c=d),m.e.c<d&&(m.e.c=d),!_.length){d+=h;continue}var I={t:"s",v:_};r.raw||!_.trim().length||N=="s"||(_==="TRUE"?I={t:"b",v:!0}:_==="FALSE"?I={t:"b",v:!1}:isNaN(af(_))?isNaN(db(_).getDate())||(I={t:"d",v:Ka(_)},r.cellDates||(I={t:"n",v:Li(I.v)}),I.z=r.dateNF||Ur[14]):I={t:"n",v:af(_)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=I):n[zr({r:u,c:d})]=I,d+=h}}}}return n["!ref"]=sn(m),g.length&&(n["!merges"]=g),n}function jrt(e,t,r,n){for(var a=e["!merges"]||[],s=[],i=t.s.c;i<=t.e.c;++i){for(var o=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>i)&&!(a[u].e.r<r||a[u].e.c<i)){if(a[u].s.r<r||a[u].s.c<i){o=-1;break}o=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(o<0)){var d=zr({r,c:i}),f=n.dense?(e[r]||[])[i]:e[d],h=f&&f.v!=null&&(f.h||IU(f.w||(a0(f),f.w)||""))||"",m={};o>1&&(m.rowspan=o),c>1&&(m.colspan=c),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(m["data-t"]=f&&f.t||"z",f.v!=null&&(m["data-v"]=f.v),f.z!=null&&(m["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),m.id=(n.id||"sjs")+"-"+d,s.push(qt("td",h,m))}}var g="<tr>";return g+s.join("")+"</tr>"}var Irt='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Frt="</body></html>";function Ort(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return _p(oY(r[0],t),t);var n=o7();return r.forEach(function(a,s){l7(n,oY(a,t),"Sheet"+(s+1))}),n}function Drt(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function Xde(e,t){var r=t||{},n=r.header!=null?r.header:Irt,a=r.footer!=null?r.footer:Frt,s=[n],i=xc(e["!ref"]);r.dense=Array.isArray(e),s.push(Drt(e,i,r));for(var o=i.s.r;o<=i.e.r;++o)s.push(jrt(e,i,o,r));return s.push("</table>"+a),s.join("")}function Yde(e,t,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var i=typeof n.origin=="string"?hs(n.origin):n.origin;a=i.r,s=i.c}var o=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(e["!ref"]){var d=xc(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],h=0,m=e["!rows"]||(e["!rows"]=[]),g=0,x=0,v=0,y=0,w=0,_=0;for(e["!cols"]||(e["!cols"]=[]);g<o.length&&x<c;++g){var T=o[g];if(lY(T)){if(n.display)continue;m[x]={hidden:!0}}var B=T.children;for(v=y=0;v<B.length;++v){var j=B[v];if(!(n.display&&lY(j))){var E=j.hasAttribute("data-v")?j.getAttribute("data-v"):j.hasAttribute("v")?j.getAttribute("v"):vue(j.innerHTML),N=j.getAttribute("data-z")||j.getAttribute("z");for(h=0;h<f.length;++h){var I=f[h];I.s.c==y+s&&I.s.r<x+a&&x+a<=I.e.r&&(y=I.e.c+1-s,h=-1)}_=+j.getAttribute("colspan")||1,((w=+j.getAttribute("rowspan")||1)>1||_>1)&&f.push({s:{r:x+a,c:y+s},e:{r:x+a+(w||1)-1,c:y+s+(_||1)-1}});var L={t:"s",v:E},D=j.getAttribute("data-t")||j.getAttribute("t")||"";E!=null&&(E.length==0?L.t=D||"z":n.raw||E.trim().length==0||D=="s"||(E==="TRUE"?L={t:"b",v:!0}:E==="FALSE"?L={t:"b",v:!1}:isNaN(af(E))?isNaN(db(E).getDate())||(L={t:"d",v:Ka(E)},n.cellDates||(L={t:"n",v:Li(L.v)}),L.z=n.dateNF||Ur[14]):L={t:"n",v:af(E)})),L.z===void 0&&N!=null&&(L.z=N);var k="",P=j.getElementsByTagName("A");if(P&&P.length)for(var R=0;R<P.length&&!(P[R].hasAttribute("href")&&(k=P[R].getAttribute("href"),k.charAt(0)!="#"));++R);k&&k.charAt(0)!="#"&&(L.l={Target:k}),n.dense?(e[x+a]||(e[x+a]=[]),e[x+a][y+s]=L):e[zr({c:y+s,r:x+a})]=L,u.e.c<y+s&&(u.e.c=y+s),y+=_}}++x}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,x-1+a),e["!ref"]=sn(u),x>=c&&(e["!fullref"]=sn((u.e.r=o.length-g+x-1+a,u))),e}function Jde(e,t){var r=t||{},n=r.dense?[]:{};return Yde(n,e,t)}function Prt(e,t){return _p(Jde(e,t),t)}function lY(e){var t="",r=Rrt(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function Rrt(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function Lrt(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Qn(t.replace(/<[^>]*>/g,""));return[r]}var cY={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function Zde(e,t){var r=t||{},n=FU(e),a=[],s,i,o={name:""},c="",u=0,d,f,h={},m=[],g=r.dense?[]:{},x,v,y={value:""},w="",_=0,T=[],B=-1,j=-1,E={s:{r:1e6,c:1e7},e:{r:0,c:0}},N=0,I={},L=[],D={},k=0,P=0,R=[],W=1,V=1,G=[],z={Names:[]},K={},J=["",""],te=[],M={},H="",Y=0,Z=!1,ae=!1,le=0;for(fE.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");x=fE.exec(n);)switch(x[3]=x[3].replace(/_.*$/,"")){case"table":case"工作表":x[1]==="/"?(E.e.c>=E.s.c&&E.e.r>=E.s.r?g["!ref"]=sn(E):g["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=E.e.r&&(g["!fullref"]=g["!ref"],E.e.r=r.sheetRows-1,g["!ref"]=sn(E)),L.length&&(g["!merges"]=L),R.length&&(g["!rows"]=R),d.name=d.名称||d.name,typeof JSON<"u"&&JSON.stringify(d),m.push(d.name),h[d.name]=g,ae=!1):x[0].charAt(x[0].length-2)!=="/"&&(d=Wr(x[0],!1),B=j=-1,E.s.r=E.s.c=1e7,E.e.r=E.e.c=0,g=r.dense?[]:{},L=[],R=[],ae=!0);break;case"table-row-group":x[1]==="/"?--N:++N;break;case"table-row":case"行":if(x[1]==="/"){B+=W,W=1;break}if(f=Wr(x[0],!1),f.行号?B=f.行号-1:B==-1&&(B=0),W=+f["number-rows-repeated"]||1,W<10)for(le=0;le<W;++le)N>0&&(R[B+le]={level:N});j=-1;break;case"covered-table-cell":x[1]!=="/"&&++j,r.sheetStubs&&(r.dense?(g[B]||(g[B]=[]),g[B][j]={t:"z"}):g[zr({r:B,c:j})]={t:"z"}),w="",T=[];break;case"table-cell":case"数据":if(x[0].charAt(x[0].length-2)==="/")++j,y=Wr(x[0],!1),V=parseInt(y["number-columns-repeated"]||"1",10),v={t:"z",v:null},y.formula&&r.cellFormula!=!1&&(v.f=aY(Qn(y.formula))),(y.数据类型||y["value-type"])=="string"&&(v.t="s",v.v=Qn(y["string-value"]||""),r.dense?(g[B]||(g[B]=[]),g[B][j]=v):g[zr({r:B,c:j})]=v),j+=V-1;else if(x[1]!=="/"){++j,w="",_=0,T=[],V=1;var ie=W?B+W-1:B;if(j>E.e.c&&(E.e.c=j),j<E.s.c&&(E.s.c=j),B<E.s.r&&(E.s.r=B),ie>E.e.r&&(E.e.r=ie),y=Wr(x[0],!1),te=[],M={},v={t:y.数据类型||y["value-type"],v:null},r.cellFormula)if(y.formula&&(y.formula=Qn(y.formula)),y["number-matrix-columns-spanned"]&&y["number-matrix-rows-spanned"]&&(k=parseInt(y["number-matrix-rows-spanned"],10)||0,P=parseInt(y["number-matrix-columns-spanned"],10)||0,D={s:{r:B,c:j},e:{r:B+k-1,c:j+P-1}},v.F=sn(D),G.push([D,v.F])),y.formula)v.f=aY(y.formula);else for(le=0;le<G.length;++le)B>=G[le][0].s.r&&B<=G[le][0].e.r&&j>=G[le][0].s.c&&j<=G[le][0].e.c&&(v.F=G[le][1]);switch((y["number-columns-spanned"]||y["number-rows-spanned"])&&(k=parseInt(y["number-rows-spanned"],10)||0,P=parseInt(y["number-columns-spanned"],10)||0,D={s:{r:B,c:j},e:{r:B+k-1,c:j+P-1}},L.push(D)),y["number-columns-repeated"]&&(V=parseInt(y["number-columns-repeated"],10)),v.t){case"boolean":v.t="b",v.v=$a(y["boolean-value"]);break;case"float":v.t="n",v.v=parseFloat(y.value);break;case"percentage":v.t="n",v.v=parseFloat(y.value);break;case"currency":v.t="n",v.v=parseFloat(y.value);break;case"date":v.t="d",v.v=Ka(y["date-value"]),r.cellDates||(v.t="n",v.v=Li(v.v)),v.z="m/d/yy";break;case"time":v.t="n",v.v=cGe(y["time-value"])/86400,r.cellDates&&(v.t="d",v.v=uT(v.v)),v.z="HH:MM:SS";break;case"number":v.t="n",v.v=parseFloat(y.数据数值);break;default:if(v.t==="string"||v.t==="text"||!v.t)v.t="s",y["string-value"]!=null&&(w=Qn(y["string-value"]),T=[]);else throw new Error("Unsupported value type "+v.t)}}else{if(Z=!1,v.t==="s"&&(v.v=w||"",T.length&&(v.R=T),Z=_==0),K.Target&&(v.l=K),te.length>0&&(v.c=te,te=[]),w&&r.cellText!==!1&&(v.w=w),Z&&(v.t="z",delete v.v),(!Z||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=B))for(var ce=0;ce<W;++ce){if(V=parseInt(y["number-columns-repeated"]||"1",10),r.dense)for(g[B+ce]||(g[B+ce]=[]),g[B+ce][j]=ce==0?v:qa(v);--V>0;)g[B+ce][j+V]=qa(v);else for(g[zr({r:B+ce,c:j})]=v;--V>0;)g[zr({r:B+ce,c:j+V})]=qa(v);E.e.c<=j&&(E.e.c=j)}V=parseInt(y["number-columns-repeated"]||"1",10),j+=V-1,V=0,v={},w="",T=[]}K={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!0]);break;case"annotation":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s;M.t=w,T.length&&(M.R=T),M.a=H,te.push(M)}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!1]);H="",Y=0,w="",_=0,T=[];break;case"creator":x[1]==="/"?H=n.slice(Y,x.index):Y=x.index+x[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!1]);w="",_=0,T=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(x[1]==="/"){if(I[o.name]=c,(s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&(c="",o=Wr(x[0],!1),a.push([x[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":i=Wr(x[0],!1),c+=cY[x[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":i=Wr(x[0],!1),c+=cY[x[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(x[0].slice(-2)==="/>")break;if(x[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,x.index);break}else u=x.index+x[0].length;break;case"named-range":i=Wr(x[0],!1),J=Z6(i["cell-range-address"]);var Ae={Name:i.name,Ref:J[0]+"!"+J[1]};ae&&(Ae.Sheet=m.length),z.Names.push(Ae);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(x[1]==="/"&&(!y||!y["string-value"])){var Fe=Lrt(n.slice(_,x.index));w=(w.length>0?w+`
`:"")+Fe[0]}else Wr(x[0],!1),_=x.index+x[0].length;break;case"s":break;case"database-range":if(x[1]==="/")break;try{J=Z6(Wr(x[0])["target-range-address"]),h[J[0]]["!autofilter"]={ref:J[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(x[1]!=="/"){if(K=Wr(x[0],!1),!K.href)break;K.Target=Qn(K.href),delete K.href,K.Target.charAt(0)=="#"&&K.Target.indexOf(".")>-1?(J=Z6(K.Target.slice(1)),K.Target="#"+J[0]+"!"+J[1]):K.Target.match(/^\.\.[\\\/]/)&&(K.Target=K.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(x[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(r.WTF)throw new Error(x)}}var ne={Sheets:h,SheetNames:m,Workbook:z};return r.bookSheets&&delete ne.Sheets,ne}function uY(e,t){t=t||{},Gu(e,"META-INF/manifest.xml")&&cKe(xi(e,"META-INF/manifest.xml"),t);var r=Jc(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=Zde(Ba(r),t);return Gu(e,"meta.xml")&&(n.Props=Vue(xi(e,"meta.xml"))),n}function dY(e,t){return Zde(e,t)}var Mrt=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+dE({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return li+t}}(),fY=function(){var e=function(s){return wa(s).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,i,o){var c=[];c.push('      <table:table table:name="'+wa(i.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,f=xc(s["!ref"]||"A1"),h=s["!merges"]||[],m=0,g=Array.isArray(s);if(s["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var x="",v=s["!rows"]||[];for(u=0;u<f.s.r;++u)x=v[u]?' table:style-name="ro'+v[u].ods+'"':"",c.push("        <table:table-row"+x+`></table:table-row>
`);for(;u<=f.e.r;++u){for(x=v[u]?' table:style-name="ro'+v[u].ods+'"':"",c.push("        <table:table-row"+x+`>
`),d=0;d<f.s.c;++d)c.push(t);for(;d<=f.e.c;++d){var y=!1,w={},_="";for(m=0;m!=h.length;++m)if(!(h[m].s.c>d)&&!(h[m].s.r>u)&&!(h[m].e.c<d)&&!(h[m].e.r<u)){(h[m].s.c!=d||h[m].s.r!=u)&&(y=!0),w["table:number-columns-spanned"]=h[m].e.c-h[m].s.c+1,w["table:number-rows-spanned"]=h[m].e.r-h[m].s.r+1;break}if(y){c.push(r);continue}var T=zr({r:u,c:d}),B=g?(s[u]||[])[d]:s[T];if(B&&B.f&&(w["table:formula"]=wa(nZe(B.f)),B.F&&B.F.slice(0,T.length)==T)){var j=xc(B.F);w["table:number-matrix-columns-spanned"]=j.e.c-j.s.c+1,w["table:number-matrix-rows-spanned"]=j.e.r-j.s.r+1}if(!B){c.push(t);continue}switch(B.t){case"b":_=B.v?"TRUE":"FALSE",w["office:value-type"]="boolean",w["office:boolean-value"]=B.v?"true":"false";break;case"n":_=B.w||String(B.v||0),w["office:value-type"]="float",w["office:value"]=B.v||0;break;case"s":case"str":_=B.v==null?"":B.v,w["office:value-type"]="string";break;case"d":_=B.w||Ka(B.v).toISOString(),w["office:value-type"]="date",w["office:date-value"]=Ka(B.v).toISOString(),w["table:style-name"]="ce1";break;default:c.push(t);continue}var E=e(_);if(B.l&&B.l.Target){var N=B.l.Target;N=N.charAt(0)=="#"?"#"+aZe(N.slice(1)):N,N.charAt(0)!="#"&&!N.match(/^\w+:/)&&(N="../"+N),E=qt("text:a",E,{"xlink:href":N.replace(/&/g,"&amp;")})}c.push("          "+qt("table:table-cell",qt("text:p",E,{}),w)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(s,i){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;op(f),f.ods=o;var h=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),s.push(`  </style:style>
`),++o}}});var c=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(i,o){var c=[li],u=dE({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=dE({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(Hue().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,i),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=i.SheetNames.length;++f)c.push(n(i.Sheets[i.SheetNames[f]],i,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),o.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function efe(e,t){if(t.bookType=="fods")return fY(e,t);var r=BU(),n="",a=[],s=[];return n="mimetype",fn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",fn(r,n,fY(e,t)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",fn(r,n,Mrt(e,t)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",fn(r,n,li+Hue()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",fn(r,n,fKe(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",fn(r,n,uKe(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function fx(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function gP(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Ba(Cp(e))}function Urt(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Yc(xA(e))}function Qrt(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function cp(e){var t=e.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function AY(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function Hrt(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,a=t+13;a>=t;--a)n=n*256+e[a];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function Vrt(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)e[t+s]=a&255;e[t+15]|=r>=0?0:128}function vE(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function xa(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Ls(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Xn(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=vE(e,r),s=a&7;a=Math.floor(a/8);var i=0,o;if(a==0)break;switch(s){case 0:{for(var c=r[0];e[r[0]++]>=128;);o=e.slice(c,r[0])}break;case 5:i=4,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=vE(e,r),o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:o,type:s};t[a]==null?t[a]=[u]:t[a].push(u)}return t}function wo(e){var t=[];return e.forEach(function(r,n){r.forEach(function(a){a.data&&(t.push(xa(n*8+a.type)),a.type==2&&t.push(xa(a.data.length)),t.push(a.data))})}),cp(t)}function r7(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function zu(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=vE(e,n),s=Xn(e.slice(n[0],n[0]+a));n[0]+=a;var i={id:Ls(s[1][0].data),messages:[]};s[2].forEach(function(o){var c=Xn(o.data),u=Ls(c[3][0].data);i.messages.push({meta:c,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=s[3])!=null&&t[0]&&(i.merge=Ls(s[3][0].data)>>>0>0),r.push(i)}return r}function Cv(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:xa(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:xa(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(i){a.push(i.data),i.meta[3]=[{type:0,data:xa(i.data.length)}],n[2].push({data:wo(i.meta),type:2})});var s=wo(n);t.push(xa(s.length)),t.push(s),a.forEach(function(i){return t.push(i)})}),cp(t)}function zrt(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=vE(t,r),a=[];r[0]<t.length;){var s=t[r[0]]&3;if(s==0){var i=t[r[0]++]>>2;if(i<60)++i;else{var o=i-59;i=t[r[0]],o>1&&(i|=t[r[0]+1]<<8),o>2&&(i|=t[r[0]+2]<<16),o>3&&(i|=t[r[0]+3]<<24),i>>>=0,i++,r[0]+=o}a.push(t.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var c=0,u=0;if(s==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,s==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[cp(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=cp(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function $u(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(zrt(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return cp(t)}function _v(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var s=xa(n),i=s.length;t.push(s),n<=60?(i++,t.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),i+=n,a[0]=0,a[1]=i&255,a[2]=i>>8&255,a[3]=i>>16&255,r+=n}return cp(t)}function $rt(e,t,r,n){var a=fx(e),s=a.getUint32(4,!0),i=(n>1?12:8)+AY(s&(n>1?3470:398))*4,o=-1,c=-1,u=NaN,d=new Date(2001,0,1);s&512&&(o=a.getUint32(i,!0),i+=4),i+=AY(s&(n>1?12288:4096))*4,s&16&&(c=a.getUint32(i,!0),i+=4),s&32&&(u=a.getFloat64(i,!0),i+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(i,!0)*1e3),i+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:t[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else if(c>-1)f={t:"s",v:t[c]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function Grt(e,t,r){var n=fx(e),a=n.getUint32(8,!0),s=12,i=-1,o=-1,c=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(c=Hrt(e,s),s+=16),a&2&&(u=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(o=n.getUint32(s,!0),s+=4),a&16&&(i=n.getUint32(s,!0),s+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[o]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(i>-1)f={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)))}return f}function tF(e,t){var r=new Uint8Array(32),n=fx(r),a=12,s=0;switch(r[0]=5,e.t){case"n":r[1]=2,Vrt(r,a,e.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),s|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,s,!0),r.slice(0,a)}function rF(e,t){var r=new Uint8Array(32),n=fx(r),a=12,s=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),s|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,s,!0),r.slice(0,a)}function Krt(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return $rt(e,t,r,e[0]);case 5:return Grt(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function al(e){var t=Xn(e);return vE(t[1][0].data)}function hY(e,t){var r=Xn(t.data),n=Ls(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(i){var o=Xn(i.data),c=Ls(o[1][0].data)>>>0;switch(n){case 1:s[c]=gP(o[3][0].data);break;case 8:{var u=e[al(o[9][0].data)][0],d=Xn(u.data),f=e[al(d[1][0].data)][0],h=Ls(f.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var m=Xn(f.data);s[c]=m[3].map(function(g){return gP(g.data)}).join("")}break}}),s}function qrt(e,t){var r,n,a,s,i,o,c,u,d,f,h,m,g,x,v=Xn(e),y=Ls(v[1][0].data)>>>0,w=Ls(v[2][0].data)>>>0,_=((n=(r=v[8])==null?void 0:r[0])==null?void 0:n.data)&&Ls(v[8][0].data)>0||!1,T,B;if((s=(a=v[7])==null?void 0:a[0])!=null&&s.data&&t!=0)T=(o=(i=v[7])==null?void 0:i[0])==null?void 0:o.data,B=(u=(c=v[6])==null?void 0:c[0])==null?void 0:u.data;else if((f=(d=v[4])==null?void 0:d[0])!=null&&f.data&&t!=1)T=(m=(h=v[4])==null?void 0:h[0])==null?void 0:m.data,B=(x=(g=v[3])==null?void 0:g[0])==null?void 0:x.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var j=_?4:1,E=fx(T),N=[],I=0;I<T.length/2;++I){var L=E.getUint16(I*2,!0);L<65535&&N.push([I,L])}if(N.length!=w)throw"Expected ".concat(w," cells, found ").concat(N.length);var D=[];for(I=0;I<N.length-1;++I)D[N[I][0]]=B.subarray(N[I][1]*j,N[I+1][1]*j);return N.length>=1&&(D[N[N.length-1][0]]=B.subarray(N[N.length-1][1]*j)),{R:y,cells:D}}function Wrt(e,t){var r,n=Xn(t.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?Ls(n[7][0].data)>>>0>0?1:0:-1,s=r7(n[5],function(i){return qrt(i,a)});return{nrows:Ls(n[4][0].data)>>>0,data:s.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(c,u){if(i[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));i[o.R][u]=c}),i},[])}}function Xrt(e,t,r){var n,a=Xn(t.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(Ls(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(Ls(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=sn(s);var i=Xn(a[4][0].data),o=hY(e,e[al(i[4][0].data)][0]),c=(n=i[17])!=null&&n[0]?hY(e,e[al(i[17][0].data)][0]):[],u=Xn(i[3][0].data),d=0;u[1].forEach(function(f){var h=Xn(f.data),m=e[al(h[2][0].data)][0],g=Ls(m.meta[1][0].data);if(g!=6002)throw new Error("6001 unexpected reference to ".concat(g));var x=Wrt(e,m);x.data.forEach(function(v,y){v.forEach(function(w,_){var T=zr({r:d+y,c:_}),B=Krt(w,o,c);B&&(r[T]=B)})}),d+=x.nrows})}function Yrt(e,t){var r=Xn(t.data),n={"!ref":"A1"},a=e[al(r[2][0].data)],s=Ls(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return Xrt(e,a[0],n),n}function Jrt(e,t){var r,n=Xn(t.data),a={name:(r=n[1])!=null&&r[0]?gP(n[1][0].data):"",sheets:[]},s=r7(n[2],al);return s.forEach(function(i){e[i].forEach(function(o){var c=Ls(o.meta[1][0].data);c==6e3&&a.sheets.push(Yrt(e,o))})}),a}function Zrt(e,t){var r=o7(),n=Xn(t.data),a=r7(n[1],al);if(a.forEach(function(s){e[s].forEach(function(i){var o=Ls(i.meta[1][0].data);if(o==2){var c=Jrt(e,i);c.sheets.forEach(function(u,d){l7(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function nF(e){var t,r,n,a,s={},i=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=$u(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=zu(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){s[f.id]=f.messages,i.push(f.id)})}}),!i.length)throw new Error("File has no messages");var o=((a=(n=(r=(t=s==null?void 0:s[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&Ls(s[1][0].meta[1][0].data)==1&&s[1][0];if(o||i.forEach(function(c){s[c].forEach(function(u){var d=Ls(u.meta[1][0].data)>>>0;if(d==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return Zrt(s,o)}function ent(e,t,r){var n,a,s,i;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(s=e[8])==null?void 0:s[0])==null?void 0:i.data)&&Ls(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var c=0,u=fx(e[7][0].data),d=0,f=[],h=fx(e[4][0].data),m=0,g=[],x=0;x<t.length;++x){if(t[x]==null){u.setUint16(x*2,65535,!0),h.setUint16(x*2,65535);continue}u.setUint16(x*2,d,!0),h.setUint16(x*2,m,!0);var v,y;switch(typeof t[x]){case"string":v=tF({t:"s",v:t[x]},r),y=rF({t:"s",v:t[x]},r);break;case"number":v=tF({t:"n",v:t[x]},r),y=rF({t:"n",v:t[x]},r);break;case"boolean":v=tF({t:"b",v:t[x]},r),y=rF({t:"b",v:t[x]},r);break;default:throw new Error("Unsupported value "+t[x])}f.push(v),d+=v.length,g.push(y),m+=y.length,++c}for(e[2][0].data=xa(c);x<e[7][0].data.length/2;++x)u.setUint16(x*2,65535,!0),h.setUint16(x*2,65535,!0);return e[6][0].data=cp(f),e[3][0].data=cp(g),c}function tnt(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=xc(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(sn(n)));var s=R4(r,{range:n,header:1}),i=["~Sh33tJ5~"];s.forEach(function(H){return H.forEach(function(Y){typeof Y=="string"&&i.push(Y)})});var o={},c=[],u=Nr.read(t.numbers,{type:"base64"});u.FileIndex.map(function(H,Y){return[H,u.FullPaths[Y]]}).forEach(function(H){var Y=H[0],Z=H[1];if(Y.type==2&&Y.name.match(/\.iwa/)){var ae=Y.content,le=$u(ae),ie=zu(le);ie.forEach(function(ce){c.push(ce.id),o[ce.id]={deps:[],location:Z,type:Ls(ce.messages[0].meta[1][0].data)}})}}),c.sort(function(H,Y){return H-Y});var d=c.filter(function(H){return H>1}).map(function(H){return[H,xa(H)]});u.FileIndex.map(function(H,Y){return[H,u.FullPaths[Y]]}).forEach(function(H){var Y=H[0];if(H[1],!!Y.name.match(/\.iwa/)){var Z=zu($u(Y.content));Z.forEach(function(ae){ae.messages.forEach(function(le){d.forEach(function(ie){ae.messages.some(function(ce){return Ls(ce.meta[1][0].data)!=11006&&Qrt(ce.data,ie[1])})&&o[ie[0]].deps.push(ae.id)})})})}});for(var f=Nr.find(u,o[1].location),h=zu($u(f.content)),m,g=0;g<h.length;++g){var x=h[g];x.id==1&&(m=x)}var v=al(Xn(m.messages[0].data)[1][0].data);for(f=Nr.find(u,o[v].location),h=zu($u(f.content)),g=0;g<h.length;++g)x=h[g],x.id==v&&(m=x);for(v=al(Xn(m.messages[0].data)[2][0].data),f=Nr.find(u,o[v].location),h=zu($u(f.content)),g=0;g<h.length;++g)x=h[g],x.id==v&&(m=x);for(v=al(Xn(m.messages[0].data)[2][0].data),f=Nr.find(u,o[v].location),h=zu($u(f.content)),g=0;g<h.length;++g)x=h[g],x.id==v&&(m=x);var y=Xn(m.messages[0].data);{y[6][0].data=xa(n.e.r+1),y[7][0].data=xa(n.e.c+1);var w=al(y[46][0].data),_=Nr.find(u,o[w].location),T=zu($u(_.content));{for(var B=0;B<T.length&&T[B].id!=w;++B);if(T[B].id!=w)throw"Bad ColumnRowUIDMapArchive";var j=Xn(T[B].messages[0].data);j[1]=[],j[2]=[],j[3]=[];for(var E=0;E<=n.e.c;++E){var N=[];N[1]=N[2]=[{type:0,data:xa(E+420690)}],j[1].push({type:2,data:wo(N)}),j[2].push({type:0,data:xa(E)}),j[3].push({type:0,data:xa(E)})}j[4]=[],j[5]=[],j[6]=[];for(var I=0;I<=n.e.r;++I)N=[],N[1]=N[2]=[{type:0,data:xa(I+726270)}],j[4].push({type:2,data:wo(N)}),j[5].push({type:0,data:xa(I)}),j[6].push({type:0,data:xa(I)});T[B].messages[0].data=wo(j)}_.content=_v(Cv(T)),_.size=_.content.length,delete y[46];var L=Xn(y[4][0].data);{L[7][0].data=xa(n.e.r+1);var D=Xn(L[1][0].data),k=al(D[2][0].data);_=Nr.find(u,o[k].location),T=zu($u(_.content));{if(T[0].id!=k)throw"Bad HeaderStorageBucket";var P=Xn(T[0].messages[0].data);for(I=0;I<s.length;++I){var R=Xn(P[2][0].data);R[1][0].data=xa(I),R[4][0].data=xa(s[I].length),P[2][I]={type:P[2][0].type,data:wo(R)}}T[0].messages[0].data=wo(P)}_.content=_v(Cv(T)),_.size=_.content.length;var W=al(L[2][0].data);_=Nr.find(u,o[W].location),T=zu($u(_.content));{if(T[0].id!=W)throw"Bad HeaderStorageBucket";for(P=Xn(T[0].messages[0].data),E=0;E<=n.e.c;++E)R=Xn(P[2][0].data),R[1][0].data=xa(E),R[4][0].data=xa(n.e.r+1),P[2][E]={type:P[2][0].type,data:wo(R)};T[0].messages[0].data=wo(P)}_.content=_v(Cv(T)),_.size=_.content.length;var V=al(L[4][0].data);(function(){for(var H=Nr.find(u,o[V].location),Y=zu($u(H.content)),Z,ae=0;ae<Y.length;++ae){var le=Y[ae];le.id==V&&(Z=le)}var ie=Xn(Z.messages[0].data);{ie[3]=[];var ce=[];i.forEach(function(ne,_e){ce[1]=[{type:0,data:xa(_e)}],ce[2]=[{type:0,data:xa(1)}],ce[3]=[{type:2,data:Urt(ne)}],ie[3].push({type:2,data:wo(ce)})})}Z.messages[0].data=wo(ie);var Ae=Cv(Y),Fe=_v(Ae);H.content=Fe,H.size=H.content.length})();var G=Xn(L[3][0].data);{var z=G[1][0];delete G[2];var K=Xn(z.data);{var J=al(K[2][0].data);(function(){for(var H=Nr.find(u,o[J].location),Y=zu($u(H.content)),Z,ae=0;ae<Y.length;++ae){var le=Y[ae];le.id==J&&(Z=le)}var ie=Xn(Z.messages[0].data);{delete ie[6],delete G[7];var ce=new Uint8Array(ie[5][0].data);ie[5]=[];for(var Ae=0,Fe=0;Fe<=n.e.r;++Fe){var ne=Xn(ce);Ae+=ent(ne,s[Fe],i),ne[1][0].data=xa(Fe),ie[5].push({data:wo(ne),type:2})}ie[1]=[{type:0,data:xa(n.e.c+1)}],ie[2]=[{type:0,data:xa(n.e.r+1)}],ie[3]=[{type:0,data:xa(Ae)}],ie[4]=[{type:0,data:xa(n.e.r+1)}]}Z.messages[0].data=wo(ie);var _e=Cv(Y),Ie=_v(_e);H.content=Ie,H.size=H.content.length})()}z.data=wo(K)}L[3][0].data=wo(G)}y[4][0].data=wo(L)}m.messages[0].data=wo(y);var te=Cv(h),M=_v(te);return f.content=M,f.size=f.content.length,u}function tfe(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function n7(e){tfe([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function a7(e){tfe([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function rnt(e){return Cn.WS.indexOf(e)>-1?"sheet":e==Cn.CS?"chart":e==Cn.DS?"dialog":e==Cn.MS?"macro":e&&e.length?e:"sheet"}function nnt(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,rnt(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function ant(e,t,r,n,a,s,i,o,c,u,d,f){try{s[n]=p2(Jc(e,r,!0),t);var h=xi(e,t),m;switch(o){case"sheet":m=Stt(h,t,a,c,s[n],u,d,f);break;case"chart":if(m=Ntt(h,t,a,c,s[n],u,d,f),!m||!m["!drawel"])break;var g=Uw(m["!drawel"].Target,t),x=AE(g),v=dYe(Jc(e,g,!0),p2(Jc(e,x,!0),g)),y=Uw(v,g),w=AE(y);m=ett(Jc(e,y,!0),y,c,p2(Jc(e,w,!0),y),u,m);break;case"macro":m=ktt(h,t,a,c,s[n],u,d,f);break;case"dialog":m=Btt(h,t,a,c,s[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+o)}i[n]=m;var _=[];s&&s[n]&&Ms(s[n]).forEach(function(T){var B="";if(s[n][T].Type==Cn.CMNT){B=Uw(s[n][T].Target,t);var j=Ftt(xi(e,B,!0),B,c);if(!j||!j.length)return;ZX(m,j,!1)}s[n][T].Type==Cn.TCMNT&&(B=Uw(s[n][T].Target,t),_=_.concat(AYe(xi(e,B,!0),c)))}),_&&_.length&&ZX(m,_,!0,c.people||[])}catch(T){if(c.WTF)throw T}}function Uu(e){return e.charAt(0)=="/"?e.slice(1):e}function snt(e,t){if(ny(),t=t||{},n7(t),Gu(e,"META-INF/manifest.xml")||Gu(e,"objectdata.xml"))return uY(e,t);if(Gu(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof nF<"u"){if(e.FileIndex)return nF(e);var r=Nr.utils.cfb_new();return bX(e).forEach(function(R){fn(r,R,hGe(e,R))}),nF(r)}throw new Error("Unsupported NUMBERS file")}if(!Gu(e,"[Content_Types].xml"))throw Gu(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Gu(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=bX(e),a=oKe(Jc(e,"[Content_Types].xml")),s=!1,i,o;if(a.workbooks.length===0&&(o="xl/workbook.xml",xi(e,o,!0)&&a.workbooks.push(o)),a.workbooks.length===0){if(o="xl/workbook.bin",!xi(e,o,!0))throw new Error("Could not find workbook");a.workbooks.push(o),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},u={};if(!t.bookSheets&&!t.bookProps){if(g2=[],a.sst)try{g2=Itt(xi(e,Uu(a.sst)),a.sst,t)}catch(R){if(t.WTF)throw R}t.cellStyles&&a.themes.length&&(c=jtt(Jc(e,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],t)),a.style&&(u=Ttt(xi(e,Uu(a.style)),a.style,c,t))}a.links.map(function(R){try{var W=p2(Jc(e,AE(Uu(R))),R);return Dtt(xi(e,Uu(R)),W,R,t)}catch{}});var d=_tt(xi(e,Uu(a.workbooks[0])),a.workbooks[0],t),f={},h="";a.coreprops.length&&(h=xi(e,Uu(a.coreprops[0]),!0),h&&(f=Vue(h)),a.extprops.length!==0&&(h=xi(e,Uu(a.extprops[0]),!0),h&&hKe(h,f,t)));var m={};(!t.bookSheets||t.bookProps)&&a.custprops.length!==0&&(h=Jc(e,Uu(a.custprops[0]),!0),h&&(m=pKe(h,t)));var g={};if((t.bookSheets||t.bookProps)&&(d.Sheets?i=d.Sheets.map(function(W){return W.name}):f.Worksheets&&f.SheetNames.length>0&&(i=f.SheetNames),t.bookProps&&(g.Props=f,g.Custprops=m),t.bookSheets&&typeof i<"u"&&(g.SheetNames=i),t.bookSheets?g.SheetNames:t.bookProps))return g;i={};var x={};t.bookDeps&&a.calcchain&&(x=Ott(xi(e,Uu(a.calcchain)),a.calcchain));var v=0,y={},w,_;{var T=d.Sheets;f.Worksheets=T.length,f.SheetNames=[];for(var B=0;B!=T.length;++B)f.SheetNames[B]=T[B].name}var j=s?"bin":"xml",E=a.workbooks[0].lastIndexOf("/"),N=(a.workbooks[0].slice(0,E+1)+"_rels/"+a.workbooks[0].slice(E+1)+".rels").replace(/^\//,"");Gu(e,N)||(N="xl/_rels/workbook."+j+".rels");var I=p2(Jc(e,N,!0),N.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(t.xlmeta=Ptt(xi(e,Uu(a.metadata[0])),a.metadata[0],t)),(a.people||[]).length>=1&&(t.people=mYe(xi(e,Uu(a.people[0])),t)),I&&(I=nnt(I,d.Sheets));var L=xi(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(v=0;v!=f.Worksheets;++v){var D="sheet";if(I&&I[v]?(w="xl/"+I[v][1].replace(/[\/]?xl\//,""),Gu(e,w)||(w=I[v][1]),Gu(e,w)||(w=N.replace(/_rels\/.*$/,"")+I[v][1]),D=I[v][2]):(w="xl/worksheets/sheet"+(v+1-L)+"."+j,w=w.replace(/sheet0\./,"sheet.")),_=w.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(v!=t.sheets)continue e;break;case"string":if(f.SheetNames[v].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var k=!1,P=0;P!=t.sheets.length;++P)typeof t.sheets[P]=="number"&&t.sheets[P]==v&&(k=1),typeof t.sheets[P]=="string"&&t.sheets[P].toLowerCase()==f.SheetNames[v].toLowerCase()&&(k=1);if(!k)continue e}}ant(e,w,_,f.SheetNames[v],v,y,i,D,t,d,c,u)}return g={Directory:a,Workbook:d,Props:f,Custprops:m,Deps:x,Sheets:i,SheetNames:f.SheetNames,Strings:g2,Styles:u,Themes:c,SSF:qa(Ur)},t&&t.bookFiles&&(e.files?(g.keys=n,g.files=e.files):(g.keys=[],g.files={},e.FullPaths.forEach(function(R,W){R=R.replace(/^Root Entry[\/]/,""),g.keys.push(R),g.files[R]=e.FileIndex[W]}))),t&&t.bookVBA&&(a.vba.length>0?g.vbaraw=xi(e,Uu(a.vba[0]),!0):a.defaults&&a.defaults.bin===EYe&&(g.vbaraw=xi(e,"xl/vbaProject.bin",!0))),g}function int(e,t){var r=t||{},n="Workbook",a=Nr.find(e,n);try{if(n="/!DataSpaces/Version",a=Nr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(OWe(a.content),n="/!DataSpaces/DataSpaceMap",a=Nr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=PWe(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=Nr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=RWe(a.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=Nr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);MWe(a.content)}catch{}if(n="/EncryptionInfo",a=Nr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=UWe(a.content);if(n="/EncryptedPackage",a=Nr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],a.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function ont(e,t){return t.bookType=="ods"?efe(e,t):t.bookType=="numbers"?tnt(e,t):t.bookType=="xlsb"?lnt(e,t):cnt(e,t)}function lnt(e,t){i1=1024,e&&!e.SSF&&(e.SSF=qa(Ur)),e&&e.SSF&&(ny(),oT(e.SSF),t.revssf=cT(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,x2?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=kde.indexOf(t.bookType)>-1,a=VU();a7(t=t||{});var s=BU(),i="",o=0;if(t.cellXfs=[],Sp(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",fn(s,i,zue(e.Props,t)),a.coreprops.push(i),va(t.rels,2,i,Cn.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,fn(s,i,Kue(e.Props)),a.extprops.push(i),va(t.rels,3,i,Cn.EXT_PROPS),e.Custprops!==e.Props&&Ms(e.Custprops||{}).length>0&&(i="docProps/custom.xml",fn(s,i,que(e.Custprops)),a.custprops.push(i),va(t.rels,4,i,Cn.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},f=e.Sheets[e.SheetNames[o-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,fn(s,i,Ltt(o-1,i,t,e,d)),a.sheets.push(i),va(t.wbrels,-1,"worksheets/sheet"+o+"."+r,Cn.WS[0])}if(f){var m=f["!comments"],g=!1,x="";m&&m.length>0&&(x="xl/comments"+o+"."+r,fn(s,x,Qtt(m,x)),a.comments.push(x),va(d,-1,"../comments"+o+"."+r,Cn.CMNT),g=!0),f["!legacy"]&&g&&fn(s,"xl/drawings/vmlDrawing"+o+".vml",Sde(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&fn(s,AE(i),B1(d))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,fn(s,i,Utt(t.Strings,i,t)),a.strs.push(i),va(t.wbrels,-1,"sharedStrings."+r,Cn.SST)),i="xl/workbook."+r,fn(s,i,Rtt(e,i)),a.workbooks.push(i),va(t.rels,1,i,Cn.WB),i="xl/theme/theme1.xml",fn(s,i,WU(e.Themes,t)),a.themes.push(i),va(t.wbrels,-1,"theme/theme1.xml",Cn.THEME),i="xl/styles."+r,fn(s,i,Mtt(e,i,t)),a.styles.push(i),va(t.wbrels,-1,"styles."+r,Cn.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",fn(s,i,e.vbaraw),a.vba.push(i),va(t.wbrels,-1,"vbaProject.bin",Cn.VBA)),i="xl/metadata."+r,fn(s,i,Htt(i)),a.metadata.push(i),va(t.wbrels,-1,"metadata."+r,Cn.XLMETA),fn(s,"[Content_Types].xml",Que(a,t)),fn(s,"_rels/.rels",B1(t.rels)),fn(s,"xl/_rels/workbook."+r+".rels",B1(t.wbrels)),delete t.revssf,delete t.ssf,s}function cnt(e,t){i1=1024,e&&!e.SSF&&(e.SSF=qa(Ur)),e&&e.SSF&&(ny(),oT(e.SSF),t.revssf=cT(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,x2?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=kde.indexOf(t.bookType)>-1,a=VU();a7(t=t||{});var s=BU(),i="",o=0;if(t.cellXfs=[],Sp(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",fn(s,i,zue(e.Props,t)),a.coreprops.push(i),va(t.rels,2,i,Cn.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,fn(s,i,Kue(e.Props)),a.extprops.push(i),va(t.rels,3,i,Cn.EXT_PROPS),e.Custprops!==e.Props&&Ms(e.Custprops||{}).length>0&&(i="docProps/custom.xml",fn(s,i,que(e.Custprops)),a.custprops.push(i),va(t.rels,4,i,Cn.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var f={"!id":{}},h=e.Sheets[e.SheetNames[o-1]],m=(h||{})["!type"]||"sheet";switch(m){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,fn(s,i,Mde(o-1,t,e,f)),a.sheets.push(i),va(t.wbrels,-1,"worksheets/sheet"+o+"."+r,Cn.WS[0])}if(h){var g=h["!comments"],x=!1,v="";if(g&&g.length>0){var y=!1;g.forEach(function(w){w[1].forEach(function(_){_.T==!0&&(y=!0)})}),y&&(v="xl/threadedComments/threadedComment"+o+"."+r,fn(s,v,hYe(g,d,t)),a.threadedcomments.push(v),va(f,-1,"../threadedComments/threadedComment"+o+"."+r,Cn.TCMNT)),v="xl/comments"+o+"."+r,fn(s,v,Nde(g)),a.comments.push(v),va(f,-1,"../comments"+o+"."+r,Cn.CMNT),x=!0}h["!legacy"]&&x&&fn(s,"xl/drawings/vmlDrawing"+o+".vml",Sde(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&fn(s,AE(i),B1(f))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,fn(s,i,hde(t.Strings,t)),a.strs.push(i),va(t.wbrels,-1,"sharedStrings."+r,Cn.SST)),i="xl/workbook."+r,fn(s,i,zde(e)),a.workbooks.push(i),va(t.rels,1,i,Cn.WB),i="xl/theme/theme1.xml",fn(s,i,WU(e.Themes,t)),a.themes.push(i),va(t.wbrels,-1,"theme/theme1.xml",Cn.THEME),i="xl/styles."+r,fn(s,i,wde(e,t)),a.styles.push(i),va(t.wbrels,-1,"styles."+r,Cn.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",fn(s,i,e.vbaraw),a.vba.push(i),va(t.wbrels,-1,"vbaProject.bin",Cn.VBA)),i="xl/metadata."+r,fn(s,i,_de()),a.metadata.push(i),va(t.wbrels,-1,"metadata."+r,Cn.XLMETA),d.length>1&&(i="xl/persons/person.xml",fn(s,i,pYe(d)),a.people.push(i),va(t.wbrels,-1,"persons/person.xml",Cn.PEOPLE)),fn(s,"[Content_Types].xml",Que(a,t)),fn(s,"_rels/.rels",B1(t.rels)),fn(s,"xl/_rels/workbook."+r+".rels",B1(t.wbrels)),delete t.revssf,delete t.ssf,s}function s7(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=cu(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function unt(e,t){return Nr.find(e,"EncryptedPackage")?int(e,t):qde(e,t)}function dnt(e,t){var r,n=e,a=t||{};return a.type||(a.type=vn&&Buffer.isBuffer(e)?"buffer":"base64"),r=pue(n,a),snt(r,a)}function rfe(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return mP(e.slice(r),t);default:break e}return fb.to_workbook(e,t)}function fnt(e,t){var r="",n=s7(e,t);switch(t.type){case"base64":r=cu(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=lx(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Ba(r)),t.type="binary",rfe(r,t)}function Ant(e,t){var r=e;return t.type=="base64"&&(r=cu(r)),r=oE.utils.decode(1200,r.slice(2),"str"),t.type="binary",rfe(r,t)}function hnt(e){return e.match(/[^\x00-\x7F]/)?xA(e):e}function aF(e,t,r,n){return n?(r.type="string",fb.to_workbook(e,r)):fb.to_workbook(t,r)}function bE(e,t){CU();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return bE(new Uint8Array(e),(r=qa(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),j1={},r.dateNF&&(j1.dateNF=r.dateNF),r.type||(r.type=vn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=vn?"buffer":"binary",n=iGe(e),typeof Uint8Array<"u"&&!vn&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=hnt(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return r=qa(r),r.type="array",bE(_U(n),r)}switch((a=s7(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return unt(Nr.read(n,r),r);break;case 9:if(a[1]<=8)return qde(n,r);break;case 60:return mP(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return gWe(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return fde.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?dnt(n,r):aF(e,n,r,s);case 239:return a[3]===60?mP(n,r):aF(e,n,r,s);case 255:if(a[1]===254)return Ant(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return Lg.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return Lg.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return hP.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return vde.to_workbook(n,r);break;case 10:case 13:case 32:return fnt(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return pWe.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?hP.to_workbook(n,r):aF(e,n,r,s)}function nfe(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return vC(t.file,Nr.write(e,{type:vn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Nr.write(e,t)}function mnt(e,t){var r=qa(t||{}),n=ont(e,r);return pnt(n,r)}function pnt(e,t){var r={},n=vn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?Nr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(iT(a))}return t.password&&typeof encrypt_agile<"u"?nfe(encrypt_agile(a,t.password),t):t.type==="file"?vC(t.file,a):t.type=="string"?Ba(a):a}function gnt(e,t){var r=t||{},n=hrt(e,r);return nfe(n,r)}function rA(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return lE(xA(n));case"binary":return xA(n);case"string":return e;case"file":return vC(t.file,n,"utf8");case"buffer":return vn?m0(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):rA(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function xnt(e,t){switch(t.type){case"base64":return lE(e);case"binary":return e;case"string":return e;case"file":return vC(t.file,e,"binary");case"buffer":return vn?m0(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function _5(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?lE(r):t.type=="string"?Ba(r):r;case"file":return vC(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function afe(e,t){CU(),utt(e);var r=qa(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=afe(e,r);return r.type="array",iT(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return rA(ort(e,r),r);case"slk":case"sylk":return rA(dde.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return rA(Xde(e.Sheets[e.SheetNames[a]],r),r);case"txt":return xnt(sfe(e.Sheets[e.SheetNames[a]],r),r);case"csv":return rA(i7(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return rA(fde.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return _5(hP.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return rA(fb.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return rA(vde.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return rA(Ade.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return rA(efe(e,r),r);case"wk1":return _5(Lg.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return _5(Lg.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),_5(Wde(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),gnt(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return mnt(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function vnt(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function mT(e,t,r){var n={};return n.type="file",n.file=t,vnt(n),afe(e,n)}function bnt(e,t,r,n,a,s,i,o){var c=ni(r),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,h=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!i||e[r])for(var m=t.s.c;m<=t.e.c;++m){var g=i?e[r][m]:e[n[m]+c];if(g===void 0||g.t===void 0){if(u===void 0)continue;s[m]!=null&&(h[s[m]]=u);continue}var x=g.v;switch(g.t){case"z":if(x==null)break;continue;case"e":x=x==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+g.t)}if(s[m]!=null){if(x==null)if(g.t=="e"&&x===null)h[s[m]]=null;else if(u!==void 0)h[s[m]]=u;else if(d&&x===null)h[s[m]]=null;else continue;else h[s[m]]=d&&(g.t!=="n"||g.t==="n"&&o.rawNumbers!==!1)?x:a0(g,x,o);x!=null&&(f=!1)}}return{row:h,isempty:f}}function R4(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],i=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=Vn(d);break;case"number":c=Vn(e["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var f=ni(c.s.r),h=[],m=[],g=0,x=0,v=Array.isArray(e),y=c.s.r,w=0,_={};v&&!e[y]&&(e[y]=[]);var T=u.skipHidden&&e["!cols"]||[],B=u.skipHidden&&e["!rows"]||[];for(w=c.s.c;w<=c.e.c;++w)if(!(T[w]||{}).hidden)switch(h[w]=As(w),r=v?e[y][w]:e[h[w]+f],n){case 1:s[w]=w-c.s.c;break;case 2:s[w]=h[w];break;case 3:s[w]=u.header[w-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=i=a0(r,null,u),x=_[i]||0,!x)_[i]=1;else{do o=i+"_"+x++;while(_[o]);_[i]=x,_[o]=1}s[w]=o}for(y=c.s.r+a;y<=c.e.r;++y)if(!(B[y]||{}).hidden){var j=bnt(e,c,y,h,n,s,v,u);(j.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(m[g++]=j.row)}return m.length=g,m}var mY=/"/g;function ynt(e,t,r,n,a,s,i,o){for(var c=!0,u=[],d="",f=ni(r),h=t.s.c;h<=t.e.c;++h)if(n[h]){var m=o.dense?(e[r]||[])[h]:e[n[h]+f];if(m==null)d="";else if(m.v!=null){c=!1,d=""+(o.rawNumbers&&m.t=="n"?m.v:a0(m,null,o));for(var g=0,x=0;g!==d.length;++g)if((x=d.charCodeAt(g))===a||x===s||x===34||o.forceQuotes){d='"'+d.replace(mY,'""')+'"';break}d=="ID"&&(d='"ID"')}else m.f!=null&&!m.F?(c=!1,d="="+m.f,d.indexOf(",")>=0&&(d='"'+d.replace(mY,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&c?null:u.join(i)}function i7(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=Vn(e["!ref"]),s=n.FS!==void 0?n.FS:",",i=s.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,c=o.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var h=n.skipHidden&&e["!cols"]||[],m=n.skipHidden&&e["!rows"]||[],g=a.s.c;g<=a.e.c;++g)(h[g]||{}).hidden||(f[g]=As(g));for(var x=0,v=a.s.r;v<=a.e.r;++v)(m[v]||{}).hidden||(d=ynt(e,a,v,f,i,c,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((x++?o:"")+d)));return delete n.dense,r.join("")}function sfe(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=i7(e,t);return r}function wnt(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=Vn(e["!ref"]),s="",i=[],o,c=[],u=Array.isArray(e);for(o=a.s.c;o<=a.e.c;++o)i[o]=As(o);for(var d=a.s.r;d<=a.e.r;++d)for(s=ni(d),o=a.s.c;o<=a.e.c;++o)if(t=i[o]+s,r=u?(e[d]||[])[o]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function ife(e,t,r){var n=r||{},a=+!n.skipHeader,s=e||{},i=0,o=0;if(s&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?hs(n.origin):n.origin;i=c.r,o=c.c}var u,d={s:{c:0,r:0},e:{c:o,r:i+t.length-1+a}};if(s["!ref"]){var f=Vn(s["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),i==-1&&(i=f.e.r+1,d.e.r=i+t.length-1+a)}else i==-1&&(i=0,d.e.r=t.length-1+a);var h=n.header||[],m=0;t.forEach(function(x,v){Ms(x).forEach(function(y){(m=h.indexOf(y))==-1&&(h[m=h.length]=y);var w=x[y],_="z",T="",B=zr({c:o+m,r:i+v+a});u=yE(s,B),w&&typeof w=="object"&&!(w instanceof Date)?s[B]=w:(typeof w=="number"?_="n":typeof w=="boolean"?_="b":typeof w=="string"?_="s":w instanceof Date?(_="d",n.cellDates||(_="n",w=Li(w)),T=n.dateNF||Ur[14]):w===null&&n.nullError&&(_="e",w=0),u?(u.t=_,u.v=w,delete u.w,delete u.R,T&&(u.z=T)):s[B]=u={t:_,v:w},T&&(u.z=T))})}),d.e.c=Math.max(d.e.c,o+h.length-1);var g=ni(i);if(a)for(m=0;m<h.length;++m)s[As(m+o)+g]={t:"s",v:h[m]};return s["!ref"]=sn(d),s}function Ent(e,t){return ife(null,e,t)}function yE(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=hs(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?yE(e,zr(t)):yE(e,zr({r:t,c:r||0}))}function Cnt(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function o7(){return{SheetNames:[],Sheets:{}}}function l7(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var i=s&&s[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=i+a)!=-1;++a);}if(Vde(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function _nt(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=Cnt(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function Snt(e,t){return e.z=t,e}function ofe(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function Nnt(e,t,r){return ofe(e,"#"+t,r)}function knt(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function Bnt(e,t,r,n){for(var a=typeof t!="string"?t:Vn(t),s=typeof t=="string"?t:sn(t),i=a.s.r;i<=a.e.r;++i)for(var o=a.s.c;o<=a.e.c;++o){var c=yE(e,i,o);c.t="n",c.F=s,delete c.v,i==a.s.r&&o==a.s.c&&(c.f=r,n&&(c.D=!0))}return e}var Ol={encode_col:As,encode_row:ni,encode_cell:zr,encode_range:sn,decode_col:RU,decode_row:PU,split_cell:LGe,decode_cell:hs,decode_range:xc,format_cell:a0,sheet_add_aoa:Oue,sheet_add_json:ife,sheet_add_dom:Yde,aoa_to_sheet:ay,json_to_sheet:Ent,table_to_sheet:Jde,table_to_book:Prt,sheet_to_csv:i7,sheet_to_txt:sfe,sheet_to_json:R4,sheet_to_html:Xde,sheet_to_formulae:wnt,sheet_to_row_object_array:R4,sheet_get_cell:yE,book_new:o7,book_append_sheet:l7,book_set_sheet_visibility:_nt,cell_set_number_format:Snt,cell_set_hyperlink:ofe,cell_set_internal_link:Nnt,cell_add_comment:knt,sheet_set_array_formula:Bnt,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Tnt=async()=>{try{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let n=0,a=0;const s=[];for(const c of r)try{const u=wt(Fr,c),d=await Hn(u),f=d.size;n+=f,s.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:f});let h=0;d.docs.forEach(m=>{const g=m.data();g.createdAt&&new Date(g.createdAt)>=t&&h++}),a+=h}catch(u){console.warn(`Error accediendo a colección ${c}:`,u),s.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:0})}const i=[];try{const c=wt(Fr,"apiLogs"),u=new Date(e.getTime()-10080*60*1e3),d=$t(c,Qr("timestamp",">=",u.toISOString()),xr("timestamp","desc")),f=await Hn(d),h={};f.docs.forEach(m=>{const g=m.data(),x=new Date(g.timestamp).toLocaleDateString("es-CL");h[x]=(h[x]||0)+1}),Object.entries(h).sort(([m],[g])=>new Date(m).getTime()-new Date(g).getTime()).forEach(([m,g])=>{i.push({label:m,value:g})})}catch(c){console.warn("Error calculando actividad diaria:",c)}const o=Math.floor(a*2.5);return{documentsCreatedToday:a,readsToday:o,writesToday:a,totalDocuments:n,collectionsActivity:s.sort((c,u)=>u.value-c.value),dailyActivity:i}}catch(e){return console.error("Error al obtener estadísticas de Firestore:",e),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},pY=500,Sv=({title:e,value:t,description:r,alert:n})=>l.jsxs("div",{className:`p-5 rounded-xl border ${n?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),l.jsx("p",{className:`text-3xl font-bold mt-2 ${n?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:t}),r&&l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]}),sF=({title:e,data:t,colorClass:r})=>{const n=S.useMemo(()=>Math.max(...t.map(a=>a.value),1),[t]);return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),l.jsx("div",{className:"space-y-4",children:t.length>0?t.map(a=>l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:a.label}),l.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:a.value})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:l.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${a.value/n*100}%`}})})]},a.label)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},jnt=()=>{const[e,t]=S.useState([]),[r,n]=S.useState(!0),[a,s]=S.useState(null),[i,o]=S.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]});S.useEffect(()=>{n(!0);const f=bVe(g=>{t(g),n(!1)}),h=async()=>{try{const g=await Tnt();o(g)}catch(g){console.error("Error al cargar estadísticas de Firestore:",g)}};h();const m=setInterval(h,300*1e3);return()=>{f(),clearInterval(m)}},[]);const{stats:c,userStats:u,moduleStats:d}=S.useMemo(()=>{const f=new Date,h=new Date(f.getFullYear(),f.getMonth(),f.getDate()).getTime(),m=h-f.getDay()*24*60*60*1e3,g=new Date(f.getFullYear(),f.getMonth(),1).getTime(),x={today:0,week:0,month:0},v={},y={};e.forEach(T=>{const B=new Date(T.timestamp).getTime();B>=h&&x.today++,B>=m&&x.week++,B>=g&&x.month++;const j=T.userEmail||"Desconocido";v[j]||(v[j]={email:j,today:0,month:0,total:0}),v[j].total++,B>=h&&v[j].today++,B>=g&&v[j].month++,y[T.module]=(y[T.module]||0)+1});const w=Object.values(v).sort((T,B)=>B.total-T.total),_=Object.entries(y).map(([T,B])=>({label:T,value:B})).sort((T,B)=>B.value-T.value);return{stats:x,userStats:w,moduleStats:_}},[e]);return l.jsxs("div",{className:"space-y-8",children:[a&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),r&&l.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadísticas..."}),!r&&e.length===0&&l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsx(Sv,{title:"Llamadas Hoy",value:r?"--":c.today,description:`Límite recomendado: ${pY}`,alert:c.today>pY}),l.jsx(Sv,{title:"Llamadas esta Semana",value:r?"--":c.week}),l.jsx(Sv,{title:"Llamadas este Mes",value:r?"--":c.month})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[l.jsx(sF,{title:"Uso por Módulo",data:d,colorClass:"bg-sky-500"}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),l.jsx("div",{className:"overflow-x-auto max-h-96",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),l.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),l.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),l.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&u.length>0?u.map(f=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:f.email}),l.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.today}),l.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.month}),l.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:f.total})]},f.email)):l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:r?"Cargando...":"No hay registros."})})})]})})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadísticas de uso de Firestore (simuladas)."}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsx(Sv,{title:"Documentos Creados (Hoy)",value:i.documentsCreatedToday,description:"Nuevos documentos"}),l.jsx(Sv,{title:"Lecturas de Firestore (Hoy)",value:i.readsToday,description:"Operaciones de lectura"}),l.jsx(Sv,{title:"Total de Documentos",value:i.totalDocuments,description:"En todas las colecciones"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[l.jsx(sF,{title:"Actividad por Colección",data:i.collectionsActivity,colorClass:"bg-green-500"}),l.jsx(sF,{title:"Actividad Diaria (Últimos 7 días)",data:i.dailyActivity,colorClass:"bg-purple-500"})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Int="type.googleapis.com/google.protobuf.Int64Value",Fnt="type.googleapis.com/google.protobuf.UInt64Value";function lfe(e,t){const r={};for(const n in e)e.hasOwnProperty(n)&&(r[n]=t(e[n]));return r}function L4(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(t=>L4(t));if(typeof e=="function"||typeof e=="object")return lfe(e,t=>L4(t));throw new Error("Data cannot be encoded in JSON: "+e)}function hb(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case Int:case Fnt:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(t=>hb(t)):typeof e=="function"||typeof e=="object"?lfe(e,t=>hb(t)):e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c7="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gY={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class dc extends ff{constructor(t,r,n){super(`${c7}/${t}`,r||""),this.details=n,Object.setPrototypeOf(this,dc.prototype)}}function Ont(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function M4(e,t){let r=Ont(e),n=r,a;try{const s=t&&t.error;if(s){const i=s.status;if(typeof i=="string"){if(!gY[i])return new dc("internal","internal");r=gY[i],n=i}const o=s.message;typeof o=="string"&&(n=o),a=s.details,a!==void 0&&(a=hb(a))}}catch{}return r==="ok"?null:new dc(r,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dnt{constructor(t,r,n,a){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Kc(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||r.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||a==null||a.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const t=await this.auth.getToken();return t==null?void 0:t.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(t){const r=await this.getAuthToken(),n=await this.getMessagingToken(),a=await this.getAppCheckToken(t);return{authToken:r,messagingToken:n,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP="us-central1",Pnt=/^data: (.*?)(?:\n|$)/;function Rnt(e){let t=null;return{promise:new Promise((r,n)=>{t=setTimeout(()=>{n(new dc("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}class Lnt{constructor(t,r,n,a,s=xP,i=(...o)=>fetch(...o)){this.app=t,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new Dnt(t,r,n,a),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(s);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=xP}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(t){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${r}.cloudfunctions.net/${t}`}}function Mnt(e,t,r){const n=l0(t);e.emulatorOrigin=`http${n?"s":""}://${t}:${r}`,n&&(vk(e.emulatorOrigin),bk("Functions",!0))}function Unt(e,t,r){const n=a=>Hnt(e,t,a,{});return n.stream=(a,s)=>znt(e,t,a,s),n}async function Qnt(e,t,r,n){r["Content-Type"]="application/json";let a;try{a=await n(e,{method:"POST",body:JSON.stringify(t),headers:r})}catch{return{status:0,json:null}}let s=null;try{s=await a.json()}catch{}return{status:a.status,json:s}}async function cfe(e,t){const r={},n=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return n.authToken&&(r.Authorization="Bearer "+n.authToken),n.messagingToken&&(r["Firebase-Instance-ID-Token"]=n.messagingToken),n.appCheckToken!==null&&(r["X-Firebase-AppCheck"]=n.appCheckToken),r}function Hnt(e,t,r,n){const a=e._url(t);return Vnt(e,a,r,n)}async function Vnt(e,t,r,n){r=L4(r);const a={data:r},s=await cfe(e,n),i=n.timeout||7e4,o=Rnt(i),c=await Promise.race([Qnt(t,a,s,e.fetchImpl),o.promise,e.cancelAllRequests]);if(o.cancel(),!c)throw new dc("cancelled","Firebase Functions instance was deleted.");const u=M4(c.status,c.json);if(u)throw u;if(!c.json)throw new dc("internal","Response is not valid JSON object.");let d=c.json.data;if(typeof d>"u"&&(d=c.json.result),typeof d>"u")throw new dc("internal","Response is missing data field.");return{data:hb(d)}}function znt(e,t,r,n){const a=e._url(t);return $nt(e,a,r,n||{})}async function $nt(e,t,r,n){var h;r=L4(r);const a={data:r},s=await cfe(e,n);s["Content-Type"]="application/json",s.Accept="text/event-stream";let i;try{i=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(a),headers:s,signal:n==null?void 0:n.signal})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const x=new dc("cancelled","Request was cancelled.");return{data:Promise.reject(x),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(x)}}}}}}const g=M4(0,null);return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}let o,c;const u=new Promise((m,g)=>{o=m,c=g});(h=n==null?void 0:n.signal)==null||h.addEventListener("abort",()=>{const m=new dc("cancelled","Request was cancelled.");c(m)});const d=i.body.getReader(),f=Gnt(d,o,c,n==null?void 0:n.signal);return{stream:{[Symbol.asyncIterator](){const m=f.getReader();return{async next(){const{value:g,done:x}=await m.read();return{value:g,done:x}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:u}}function Gnt(e,t,r,n){const a=(i,o)=>{const c=i.match(Pnt);if(!c)return;const u=c[1];try{const d=JSON.parse(u);if("result"in d){t(hb(d.result));return}if("message"in d){o.enqueue(hb(d.message));return}if("error"in d){const f=M4(0,d);o.error(f),r(f);return}}catch(d){if(d instanceof dc){o.error(d),r(d);return}}},s=new TextDecoder;return new ReadableStream({start(i){let o="";return c();async function c(){if(n!=null&&n.aborted){const u=new dc("cancelled","Request was cancelled");return i.error(u),r(u),Promise.resolve()}try{const{value:u,done:d}=await e.read();if(d){o.trim()&&a(o.trim(),i),i.close();return}if(n!=null&&n.aborted){const h=new dc("cancelled","Request was cancelled");i.error(h),r(h),await e.cancel();return}o+=s.decode(u,{stream:!0});const f=o.split(`
`);o=f.pop()||"";for(const h of f)h.trim()&&a(h.trim(),i);return c()}catch(u){const d=u instanceof dc?u:M4(0,null);i.error(d),r(d)}}},cancel(){return e.cancel()}})}const xY="@firebase/functions",vY="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Knt="auth-internal",qnt="app-check-internal",Wnt="messaging-internal";function Xnt(e){const t=(r,{instanceIdentifier:n})=>{const a=r.getProvider("app").getImmediate(),s=r.getProvider(Knt),i=r.getProvider(Wnt),o=r.getProvider(qnt);return new Lnt(a,s,i,o,n)};Gm(new Vh(c7,t,"PUBLIC").setMultipleInstances(!0)),sd(xY,vY,e),sd(xY,vY,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(e=yk(),t=xP){const n=OE(Jn(e),c7).getImmediate({identifier:t}),a=SR("functions");return a&&Ynt(n,...a),n}function Ynt(e,t,r){Mnt(Jn(e),t,r)}function Nv(e,t,r){return Unt(Jn(e),t)}Xnt();const bY=wt(Fr,"usuarios");async function ufe(){try{console.log("🔍 [DEBUG] Obteniendo usuarios de Firestore..."),console.log("🔍 [DEBUG] Collection ref:",bY);const e=await Hn(bY);if(console.log(`📊 [DEBUG] Encontrados ${e.docs.length} documentos en la colección usuarios`),e.empty)return console.log("⚠️  [DEBUG] La colección usuarios está vacía"),[];const t=e.docs.map(r=>{const n=r.data();return console.log("👤 [DEBUG] Usuario encontrado:",{id:r.id,...n}),{id:r.id,...n}});return console.log("✅ [DEBUG] Usuarios procesados correctamente:",t.length),console.log("✅ [DEBUG] Lista completa de usuarios:",t),t}catch(e){throw console.error("❌ [DEBUG] Error al obtener usuarios:",e),console.error("❌ [DEBUG] Error details:",{code:e.code,message:e.message,stack:e.stack}),e}}const yY=Object.values(Jt),iF=e=>e?e.trim().toLowerCase().replace(/°/g,"º").replace(/\s+(medio|básico|basico)/g,"").replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º").replace(/^(\d)(?![º])/,"$1º").replace(/\s+/g,"").toUpperCase():"",Jnt=()=>{const[e,t]=S.useState([]),[r,n]=S.useState(!1),[a,s]=S.useState("Usuarios"),[i,o]=S.useState({nombreCompleto:"",email:"",rut:"",profile:Jt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[c,u]=S.useState(null),[d,f]=S.useState(""),[h,m]=S.useState(""),[g,x]=S.useState(""),[v,y]=S.useState(null),[w,_]=S.useState(null),[T,B]=S.useState(null),j=S.useCallback(async()=>{n(!0);try{const z=await ufe();t(z)}catch(z){console.error("Error al cargar usuarios",z),y("No se pudieron cargar los usuarios.")}finally{n(!1)}},[]);S.useEffect(()=>{j()},[j]);const E=S.useCallback(z=>{const{name:K,value:J}=z.target;o(te=>({...te,[K]:J,curso:K==="profile"&&J!==Jt.ESTUDIANTE?"":te.curso,cursos:K==="profile"&&J!==Jt.PROFESORADO?[]:te.cursos,asignaturas:K==="profile"&&J!==Jt.PROFESORADO?[]:te.asignaturas}))},[]),N=S.useCallback((z,K)=>{o(J=>{const te=J[z]||[],M=te.includes(K)?te.filter(H=>H!==K):[...te,K];return{...J,[z]:M}})},[]),I=S.useCallback(()=>{o({nombreCompleto:"",email:"",rut:"",profile:Jt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),u(null),y(null)},[]),L=S.useCallback(async z=>{z.preventDefault(),y(null);const{nombreCompleto:K,email:J,profile:te,curso:M,password:H}=i;if(!K.trim()||!J.trim()){y("Nombre Completo y Email son obligatorios.");return}if(te===Jt.ESTUDIANTE&&!M){y('El campo "Curso" es obligatorio para Estudiantes.');return}if(!c&&!(H!=null&&H.trim())){y("La contraseña es obligatoria al crear un nuevo usuario.");return}const Y=uw();try{if(c){const Z=Nv(Y,"updateUser"),ae={...i,password:(H==null?void 0:H.trim())||void 0,curso:te===Jt.ESTUDIANTE?iF(M||""):void 0};await Z(ae)}else{const Z=Nv(Y,"createUser"),ae={...i,curso:te===Jt.ESTUDIANTE?iF(M||""):void 0};await Z(ae)}await j(),I()}catch(Z){console.error("Error al guardar usuario:",Z),y(Z.message||"Error al guardar el usuario.")}},[i,c,j,I]),D=S.useCallback(z=>{u(z.email),o({nombreCompleto:z.nombreCompleto,email:z.email,rut:z.rut||"",profile:z.profile,password:"",curso:z.curso||"",cursos:z.cursos||[],asignaturas:z.asignaturas||[]}),setTimeout(()=>{const K=document.querySelector("form");K&&K.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[]),k=S.useCallback(async z=>{if(window.confirm(`¿Está seguro de que desea eliminar al usuario ${z}? Esta acción es irreversible.`))try{const K=uw();await Nv(K,"deleteUser")({email:z}),await j()}catch(K){console.error("Error al eliminar usuario:",K),y(K.message||"No se pudo borrar el usuario.")}},[j]),P=async z=>{var H;const K=(H=z.target.files)==null?void 0:H[0];if(!K)return;_({message:"Procesando archivo...",isError:!1});const J=uw(),te=Nv(J,"createUser"),M=new FileReader;M.onload=async Y=>{var Z;try{const ae=new Uint8Array((Z=Y.target)==null?void 0:Z.result),le=bE(ae,{type:"array"}),ie=le.Sheets[le.SheetNames[0]],ce=Ol.sheet_to_json(ie);if(ce.length===0){_({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const Ae=ce.map(Se=>{const me=Se.Nombre||Se.nombre,Be=Se.Correo||Se.correo||Se.Email||Se.email,Le=Se.Curso||Se.curso,We=Se.RUT||Se.rut;return!me||!Be||!Le?Promise.resolve({email:Be||"Sin email",error:"Datos incompletos"}):te({nombreCompleto:String(me).trim(),email:String(Be).trim(),profile:Jt.ESTUDIANTE,curso:iF(String(Le).trim()),rut:We?String(We).trim():"",password:"recoleta"}).catch(be=>({email:Be,error:be.message}))}),Fe=await Promise.all(Ae),ne=Fe.filter(Se=>!Se.error).length,_e=Fe.filter(Se=>Se.error);let Ie=`Carga completada. ${ne} estudiantes agregados.`;_e.length>0&&(Ie+=` ${_e.length} fallaron.`,console.error("Errores en carga masiva:",_e)),_({message:Ie,isError:_e.length>0}),await j()}catch(ae){_({message:`Error: ${ae.message}`,isError:!0})}},M.readAsArrayBuffer(K),z.target.value=""},R=async z=>{var H;const K=(H=z.target.files)==null?void 0:H[0];if(!K)return;B({message:"Procesando archivo...",isError:!1});const J=uw(),te=Nv(J,"createUser"),M=new FileReader;M.onload=async Y=>{var Z;try{const ae=new Uint8Array((Z=Y.target)==null?void 0:Z.result),le=bE(ae,{type:"array"}),ie=le.Sheets[le.SheetNames[0]],ce=Ol.sheet_to_json(ie);if(ce.length===0){B({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const Ae=ce.map(Se=>{const me=Se.Nombre||Se.nombre,Be=Se.Correo||Se.correo||Se.Email||Se.email,Le=Se.Perfil||Se.perfil||Se.Profile||Se.profile,We=Se.RUT||Se.rut;return!me||!Be||!Le?Promise.resolve({email:Be||"Sin email",error:"Datos incompletos"}):te({nombreCompleto:String(me).trim(),email:String(Be).trim(),profile:Le,rut:We?String(We).trim():"",password:"recoleta"}).catch(be=>({email:Be,error:be.message}))}),Fe=await Promise.all(Ae),ne=Fe.filter(Se=>!Se.error).length,_e=Fe.filter(Se=>Se.error);let Ie=`Carga completada. ${ne} usuarios agregados.`;_e.length>0&&(Ie+=` ${_e.length} fallaron.`,console.error("Errores en carga masiva:",_e)),B({message:Ie,isError:_e.length>0}),await j()}catch(ae){B({message:`Error: ${ae.message}`,isError:!0})}},M.readAsArrayBuffer(K),z.target.value=""},W="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",V=S.useMemo(()=>Array.from(new Set(e.filter(z=>z.profile===Jt.ESTUDIANTE&&z.curso).map(z=>z.curso))).sort(),[e]),G=S.useMemo(()=>e.filter(z=>(d===""||z.nombreCompleto.toLowerCase().includes(d.toLowerCase())||z.email.toLowerCase().includes(d.toLowerCase()))&&(h===""||z.profile===h)&&(g===""||z.curso===g)),[e,d,h,g]);return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administración"}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>s("Usuarios"),className:`${a==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestión de Usuarios"}),l.jsx("button",{onClick:()=>s("Monitor de Uso"),className:`${a==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),a==="Usuarios"&&l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Estudiantes (Excel)"}),l.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:P,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Curso"}),w&&l.jsx("p",{className:`text-sm mt-2 ${w.isError?"text-red-600":"text-green-600"}`,children:w.message})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Personal (Excel)"}),l.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:R,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Perfil"}),T&&l.jsx("p",{className:`text-sm mt-2 ${T.isError?"text-red-600":"text-green-600"}`,children:T.message})]})]})]}),l.jsxs("div",{id:"formulario-usuario",className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:c?"Editando usuario":"Agregar nuevo usuario"}),l.jsxs("form",{onSubmit:L,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),l.jsx("input",{type:"text",name:"nombreCompleto",value:i.nombreCompleto,onChange:E,className:W,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),l.jsx("input",{type:"email",name:"email",value:i.email,onChange:E,className:W,required:!0,readOnly:!!c})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contraseña"}),l.jsx("input",{type:"password",name:"password",value:i.password||"",onChange:E,placeholder:c?"Dejar en blanco para no cambiar":"Contraseña temporal",className:W})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),l.jsx("input",{type:"text",name:"rut",value:i.rut||"",onChange:E,placeholder:"12.345.678-9",className:W})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),l.jsx("select",{name:"profile",value:i.profile,onChange:E,className:W,required:!0,children:yY.map(z=>l.jsx("option",{value:z,children:z},z))})]}),i.profile===Jt.ESTUDIANTE&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),l.jsxs("select",{name:"curso",value:i.curso,onChange:E,className:W,required:!0,children:[l.jsx("option",{value:"",children:"Seleccione un curso"}),Ac.map(z=>l.jsx("option",{value:z,children:z},z))]})]})]}),i.profile===Jt.PROFESORADO&&l.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-l-4 border-blue-400",children:[l.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[l.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📚"}),"Asignación de Cursos"]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:Ac.map(z=>{var K;return l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-blue-50 dark:hover:bg-blue-800/20",children:[l.jsx("input",{type:"checkbox",checked:((K=i.cursos)==null?void 0:K.includes(z))||!1,onChange:()=>N("cursos",z),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),l.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:z})]},z)})})]}),i.profile===Jt.PROFESORADO&&l.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border-l-4 border-green-400",children:[l.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[l.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📖"}),"Asignación de Asignaturas"]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:jo.map(z=>{var K;return l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-green-50 dark:hover:bg-green-800/20",children:[l.jsx("input",{type:"checkbox",checked:((K=i.asignaturas)==null?void 0:K.includes(z))||!1,onChange:()=>N("asignaturas",z),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),l.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:z})]},z)})})]}),v&&l.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:v}),l.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4 flex-wrap",children:[c&&l.jsx("button",{type:"button",onClick:I,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),l.jsx("button",{type:"button",onClick:async()=>{try{console.log("🔧 Agregando custom claim...");const z=uw(),J=await Nv(z,"addCustomClaim")({email:"fernando.sagredo@industrialderecoleta.cl",profile:"SUBDIRECCION"});console.log("✅ Custom claim agregado:",J),y("✅ Custom claim agregado exitosamente")}catch(z){console.error("❌ Error al agregar custom claim:",z),y(`Error: ${z.message}`)}},className:"bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 text-sm",children:"🔧 Claim"}),l.jsx("button",{type:"button",onClick:async()=>{var z,K,J,te,M;try{const{auth:H}=await ub(async()=>{const{auth:ae}=await Promise.resolve().then(()=>Ene);return{auth:ae}},void 0);console.log("🔍 Usuario actual:",(z=H.currentUser)==null?void 0:z.email);const Y=await((K=H.currentUser)==null?void 0:K.getIdToken(!0));console.log("🔑 Token refreshed:",!!Y);const Z=await((J=H.currentUser)==null?void 0:J.getIdTokenResult());console.log("📋 Claims completos:",Z==null?void 0:Z.claims),console.log("👤 Profile claim:",(te=Z==null?void 0:Z.claims)==null?void 0:te.profile),((M=Z==null?void 0:Z.claims)==null?void 0:M.profile)==="SUBDIRECCION"?y("✅ Custom claim FUNCIONANDO - Ya puedes crear/editar usuarios"):y(`❌ Custom claim faltante. Claims: ${JSON.stringify(Z==null?void 0:Z.claims)}`)}catch(H){console.error("❌ Error verificando token:",H),y(`Error verificando token: ${H.message}`)}},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 text-sm",children:"🔍 Token"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:c?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[l.jsx("div",{children:l.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:d,onChange:z=>f(z.target.value),className:W})}),l.jsx("div",{children:l.jsxs("select",{value:h,onChange:z=>m(z.target.value),className:W,children:[l.jsx("option",{value:"",children:"Todos los perfiles"}),yY.map(z=>l.jsx("option",{value:z,children:z},z))]})}),l.jsx("div",{children:l.jsxs("select",{value:g,onChange:z=>x(z.target.value),className:W,children:[l.jsx("option",{value:"",children:"Todos los cursos"}),V.map(z=>l.jsx("option",{value:z,children:z},z))]})})]}),r?l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-slate-500",children:"Cargando usuarios..."})}):l.jsxs("div",{className:"overflow-x-auto",children:[l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Nombre"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Email"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Perfil"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Curso/Asignaciones"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:G.map(z=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:z.nombreCompleto}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:z.email}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:l.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${z.profile===Jt.ESTUDIANTE?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":z.profile===Jt.PROFESORADO?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:z.profile})}),l.jsxs("td",{className:"px-4 py-4 text-sm text-slate-500 dark:text-slate-300",children:[z.profile===Jt.ESTUDIANTE&&l.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-700 rounded dark:bg-slate-600 dark:text-slate-300",children:z.curso||"Sin curso"}),z.profile===Jt.PROFESORADO&&l.jsxs("div",{className:"space-y-1",children:[z.cursos&&z.cursos.length>0&&l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Cursos:"}),l.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[z.cursos.slice(0,3).map(K=>l.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded dark:bg-blue-900 dark:text-blue-300",children:K},K)),z.cursos.length>3&&l.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",z.cursos.length-3]})]})]}),z.asignaturas&&z.asignaturas.length>0&&l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Asignaturas:"}),l.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[z.asignaturas.slice(0,2).map(K=>l.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-green-100 text-green-700 rounded dark:bg-green-900 dark:text-green-300",children:K},K)),z.asignaturas.length>2&&l.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",z.asignaturas.length-2]})]})]}),(!z.cursos||z.cursos.length===0)&&(!z.asignaturas||z.asignaturas.length===0)&&l.jsx("span",{className:"text-xs text-slate-400 italic",children:"Sin asignaciones"})]}),z.profile!==Jt.ESTUDIANTE&&z.profile!==Jt.PROFESORADO&&l.jsx("span",{className:"text-xs text-slate-400",children:"-"})]}),l.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[l.jsx("button",{onClick:()=>D(z),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),l.jsx("button",{onClick:()=>k(z.email),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},z.email))})]}),G.length===0&&l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:e.length===0?"No hay usuarios registrados.":"No se encontraron usuarios con los filtros aplicados."})})]})]})]}),a==="Monitor de Uso"&&l.jsx(jnt,{})]})},mb="seguimiento_dual_records",Znt=e=>{const t=e.data(),r=n=>n&&typeof n.toDate=="function"?n.toDate().toISOString().split("T")[0]:n;return{id:e.id,...t,fechaDesvinculacion:r(t.fechaDesvinculacion),fecha1raSupervision1erSemestre:r(t.fecha1raSupervision1erSemestre),fecha2daSupervision1erSemestre:r(t.fecha2daSupervision1erSemestre),fecha1raSupervision2doSemestre:r(t.fecha1raSupervision2doSemestre),fecha2daSupervision2doSemestre:r(t.fecha2daSupervision2doSemestre),fechaSupervisionExcepcional:r(t.fechaSupervisionExcepcional)}},eat=e=>{const t=$t(wt(ht,mb),xr("nombreEstudiante","asc"));return pr(t,n=>{const a=n.docs.map(s=>Znt(s));e(a)},n=>{console.error("Error al suscribirse a los registros de seguimiento:",n),e([])})},U4=e=>{const t={...e};return["fechaDesvinculacion","fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaSupervisionExcepcional"].forEach(n=>{t[n]&&typeof t[n]=="string"&&(t[n]=ir.fromDate(new Date(t[n]+"T00:00:00")))}),t},tat=async e=>{try{const t=U4(e);return(await _n(wt(ht,mb),t)).id}catch(t){throw console.error("Error al crear el registro:",t),new Error("No se pudo crear el registro de seguimiento.")}},wY=async(e,t)=>{try{const r=cr(ht,mb,e),n=U4(t);await Mi(r,n,{merge:!0})}catch(r){throw console.error("Error al actualizar el registro:",r),new Error("No se pudo actualizar el registro.")}},rat=async e=>{try{const t=cr(ht,mb,e);await is(t)}catch(t){throw console.error("Error al eliminar el registro:",t),new Error("No se pudo eliminar el registro.")}},nat=async e=>{const t=yx(ht),r=wt(ht,mb);let n=0,a=0;for(const s of e){const i=$t(r,Qr("rutEstudiante","==",s.rutEstudiante)),o=await Hn(i);if(o.empty){const c=cr(r);t.set(c,U4(s)),a++}else{const c=o.docs[0].id,u=cr(ht,mb,c);t.set(u,U4(s),{merge:!0}),n++}}return await t.commit(),{updated:n,created:a}},aat={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},sat=e=>{if(!e||e===""||e==="N/A"||e==="Pendiente")return null;try{if(typeof e=="number"){const t=new Date(1900,0,1),r=new Date(t.getTime()+(e-2)*24*60*60*1e3);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}if(e instanceof Date)return isNaN(e.getTime())?null:e.toISOString().split("T")[0];if(typeof e=="string"){const t=e.trim();if(t==="")return null;const r=new Date(t);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}return null}catch(t){return console.warn("Error parsing date:",e,t),null}},iat=e=>{if(typeof e=="boolean")return e;if(typeof e=="string"){const t=e.toLowerCase().trim();return["true","verdadero","sí","si","yes","1","x"].includes(t)}return typeof e=="number"?e===1:!1},oat=({record:e,onSave:t,onClose:r})=>{const[n,a]=S.useState(e),s="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",i=c=>{const{name:u,value:d,type:f,checked:h}=c.target;a(m=>({...m,[u]:f==="checkbox"?h:d}))},o=()=>{t(n)};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:r,children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-12 h-12 object-contain"}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisión"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:e.nombreEstudiante})]})]}),l.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[l.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[l.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`f1s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),l.jsx("input",{id:`f1s1-${e.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:n.fecha1raSupervision1erSemestre||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!n.realizada1raSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`f2s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),l.jsx("input",{id:`f2s1-${e.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:n.fecha2daSupervision1erSemestre||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!n.realizada2daSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]})]})]}),l.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[l.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`f1s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),l.jsx("input",{id:`f1s2-${e.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:n.fecha1raSupervision2doSemestre||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!n.realizada1raSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`f2s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),l.jsx("input",{id:`f2s2-${e.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:n.fecha2daSupervision2doSemestre||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!n.realizada2daSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]})]})]}),l.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[l.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisión Excepcional"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`fex-${e.id}`,className:"text-sm font-medium",children:"Fecha Supervisión"}),l.jsx("input",{id:`fex-${e.id}`,type:"date",name:"fechaSupervisionExcepcional",value:n.fechaSupervisionExcepcional||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!n.realizadaSupervisionExcepcional,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]})]})]}),l.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[l.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Guía (Empresa)"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:`mg-nombre-${e.id}`,className:"text-sm font-medium",children:"Nombre Maestro Guía"}),l.jsx("input",{id:`mg-nombre-${e.id}`,type:"text",name:"nombreMaestroGuia",value:n.nombreMaestroGuia||"",onChange:i,className:s+" mt-1"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:`mg-contacto-${e.id}`,className:"text-sm font-medium",children:"Contacto (Email/Teléfono)"}),l.jsx("input",{id:`mg-contacto-${e.id}`,type:"text",name:"contactoMaestroGuia",value:n.contactoMaestroGuia||"",onChange:i,className:s+" mt-1"})]})]})]})]})]}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:r,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),l.jsx("button",{type:"button",onClick:o,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},lat=()=>{const[e,t]=S.useState([]),[r,n]=S.useState(!0),a=S.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:kg[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:B3[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[s,i]=S.useState(a),[o,c]=S.useState(null),[u,d]=S.useState(""),[f,h]=S.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[m,g]=S.useState(null),[x,v]=S.useState(null),[y,w]=S.useState(!1),[_,T]=S.useState(null);S.useEffect(()=>{n(!0);const z=eat(K=>{t(K),n(!1)});return()=>z()},[]);const B=S.useCallback(z=>{const{name:K,value:J}=z.target;i(te=>({...te,[K]:J}))},[]),j=S.useCallback(z=>{const{name:K,value:J}=z.target;h(te=>({...te,[K]:J}))},[]),E=S.useCallback(()=>{i(a),c(null),g(null)},[a]),N=async z=>{z.preventDefault(),g(null);const J=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(te=>{var M;return!((M=s[te])!=null&&M.trim())});if(J){g(`El campo '${J}' es obligatorio.`);return}try{o?await wY(o,s):await tat(s),E()}catch(te){console.error(te),g("No se pudo guardar el registro.")}},I=S.useCallback(z=>{window.scrollTo({top:0,behavior:"smooth"}),c(z.id),i(z)},[]),L=async z=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await rat(z)}catch(K){console.error(K),g("No se pudo eliminar el registro.")}},D=z=>{T(z),w(!0)},k=()=>{T(null),w(!1)},P=async z=>{try{await wY(z.id,z),k()}catch(K){console.error(K),alert("No se pudieron guardar los cambios de supervisión.")}},R=()=>{const z=["Nombre","RUT","Curso 2025","Profesor Tutor","1° Visita 1° Semestre","Realizada 1° Visita S1","2° Visita 1° Semestre","Realizada 2° Visita S1","Visita Emergencia 1° Semestre","3° Visita","Realizada 3° Visita S2","4° Visita","Realizada 4° Visita S2","Empresa","RUT-Empresa","Dirección","Comuna","Estado","Fecha de Desvinculación","Motivo Desvinculación","Maestro Guía","Correo maestro guía"],K=Ol.aoa_to_sheet([z]),J=Ol.book_new();Ol.book_append_sheet(J,K,"Plantilla"),mT(J,"Plantilla_Seguimiento_Dual.xlsx")},W=z=>{var te;const K=(te=z.target.files)==null?void 0:te[0];if(!K)return;v({message:"Procesando archivo...",isError:!1});const J=new FileReader;J.onload=async M=>{var H;try{const Y=new Uint8Array((H=M.target)==null?void 0:H.result),Z=bE(Y,{type:"array",cellDates:!0,dateNF:"yyyy-mm-dd"}),ae=Z.SheetNames[0],le=Z.Sheets[ae],ie=Ol.sheet_to_json(le,{raw:!1,dateNF:"yyyy-mm-dd"});if(ie.length===0)throw new Error("El archivo está vacío.");const ce={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1° visita 1° semestre":"fecha1raSupervision1erSemestre","realizada 1° visita s1":"realizada1raSupervision1erSemestre","2° visita 1° semestre":"fecha2daSupervision1erSemestre","realizada 2° visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1° semestre":"fechaSupervisionExcepcional","3° visita":"fecha1raSupervision2doSemestre","realizada 3° visita s2":"realizada1raSupervision2doSemestre","4° visita":"fecha2daSupervision2doSemestre","realizada 4° visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",dirección:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculación":"fechaDesvinculacion","motivo desvinculación":"motivoDesvinculacion","maestro guía":"nombreMaestroGuia","correo maestro guía":"contactoMaestroGuia"},Ae=Object.keys(ie[0]).map(Ie=>Ie.trim().toLowerCase()),ne=["nombre","rut","curso 2025","empresa","estado"].find(Ie=>!Ae.includes(Ie));if(ne)throw new Error(`Falta la columna requerida: '${ne}'`);const _e=ie.map((Ie,Se)=>{try{const me={};for(const Be in Ie){const Le=ce[Be.trim().toLowerCase()];if(Le){let We=Ie[Be];["fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fechaSupervisionExcepcional","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaDesvinculacion"].includes(Le)?(We=sat(We),We&&(me[Le]=We)):Le.includes("realizada")?me[Le]=iat(We):We!=null&&We!==""&&(me[Le]=String(We).trim())}}return!me.nombreEstudiante||!me.rutEstudiante?(console.warn(`Fila ${Se+2}: Faltan campos requeridos`),null):me}catch(me){return console.error(`Error procesando fila ${Se+2}:`,me),null}}).filter(Ie=>Ie!==null);if(console.log("Registros procesados:",_e),_e.length>0){const{updated:Ie,created:Se}=await nat(_e);v({message:`Carga exitosa. ${Se} registros creados, ${Ie} actualizados.`,isError:!1})}else v({message:"No se encontraron registros válidos para procesar. Verifique el formato del archivo.",isError:!0})}catch(Y){console.error("Error completo:",Y),v({message:`Error al procesar el archivo: ${Y.message}. Verifique que las fechas estén en formato correcto.`,isError:!0})}},J.readAsArrayBuffer(K)},V="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",G=S.useMemo(()=>e.filter(z=>(u===""||z.nombreEstudiante.toLowerCase().includes(u.toLowerCase())||z.nombreEmpresa.toLowerCase().includes(u.toLowerCase())||z.rutEstudiante.includes(u))&&(f.curso===""||z.curso===f.curso)&&(f.empresa===""||z.nombreEmpresa===f.empresa)&&(f.estado===""||z.estado===f.estado)&&(f.comuna===""||z.comuna===f.comuna)&&(f.profesor===""||z.profesorTutorEmpresa===f.profesor)).sort((z,K)=>z.nombreEstudiante.localeCompare(K.nombreEstudiante)),[e,u,f]);return S.useMemo(()=>{const z=new Set,K=new Set;return e.forEach(J=>{J.nombreEmpresa&&z.add(J.nombreEmpresa),J.comuna&&K.add(J.comuna)}),{empresas:Array.from(z).sort(),comunas:Array.from(K).sort()}},[e]),r?l.jsx("div",{className:"text-center py-10",children:"Cargando registros..."}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestión Pedagógica LIR",className:"w-12 h-12 object-contain"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Práctica Dual"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:o?"Editando registro existente.":"Registre un nuevo estudiante en práctica."})]})]}),l.jsxs("form",{onSubmit:N,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),l.jsx("input",{type:"text",name:"nombreEstudiante",value:s.nombreEstudiante,onChange:B,className:V,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),l.jsx("input",{type:"text",name:"rutEstudiante",value:s.rutEstudiante,onChange:B,className:V,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),l.jsx("select",{name:"curso",value:s.curso,onChange:B,className:V,required:!0,children:kg.map(z=>l.jsx("option",{value:z,children:z},z))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),l.jsxs("select",{name:"profesorTutorEmpresa",value:s.profesorTutorEmpresa,onChange:B,className:V,children:[l.jsx("option",{value:"",children:"Seleccione un profesor"}),PO.map(z=>l.jsx("option",{value:z,children:z},z))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),l.jsx("input",{type:"text",name:"nombreEmpresa",value:s.nombreEmpresa,onChange:B,className:V,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),l.jsx("input",{type:"text",name:"rutEmpresa",value:s.rutEmpresa,onChange:B,className:V})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Dirección Empresa"}),l.jsx("input",{type:"text",name:"direccionEmpresa",value:s.direccionEmpresa,onChange:B,className:V})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),l.jsx("input",{type:"text",name:"comuna",value:s.comuna,onChange:B,className:V})]}),l.jsxs("div",{className:"lg:col-span-4",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),l.jsx("select",{name:"estado",value:s.estado,onChange:B,className:V,children:B3.map(z=>l.jsx("option",{value:z,children:z},z))})]})]}),s.estado==="Desvinculado"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculación"}),l.jsx("input",{type:"date",name:"fechaDesvinculacion",value:s.fechaDesvinculacion||"",onChange:B,className:`${V} border-red-300`})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculación"}),l.jsx("input",{type:"text",name:"motivoDesvinculacion",value:s.motivoDesvinculacion||"",onChange:B,className:`${V} border-red-300`})]})]}),m&&l.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:m}),l.jsxs("div",{className:"flex justify-end items-center gap-4",children:[o&&l.jsx("button",{type:"button",onClick:E,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:o?"Actualizar":"Agregar"})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Carga Masiva"})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[l.jsx("button",{onClick:R,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),l.jsx("input",{type:"file",onChange:W,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),x&&l.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${x.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:x.message})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Estudiantes"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[l.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:u,onChange:z=>d(z.target.value),className:`${V} md:col-span-2 lg:col-span-1`}),l.jsxs("select",{name:"curso",value:f.curso,onChange:j,className:V,children:[l.jsx("option",{value:"",children:"Todos los Cursos"}),kg.map(z=>l.jsx("option",{children:z},z))]}),l.jsxs("select",{name:"estado",value:f.estado,onChange:j,className:V,children:[l.jsx("option",{value:"",children:"Todos los Estados"}),B3.map(z=>l.jsx("option",{children:z},z))]}),l.jsxs("select",{name:"profesor",value:f.profesor,onChange:j,className:V,children:[l.jsx("option",{value:"",children:"Todos los Profesores"}),PO.map(z=>l.jsx("option",{children:z},z))]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:G.map(z=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[l.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[l.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:z.nombreEstudiante}),l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:z.curso})]}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:z.nombreEmpresa}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:z.profesorTutorEmpresa}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${aat[z.estado]}`,children:z.estado})}),l.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[l.jsx("button",{onClick:()=>D(z),className:"text-blue-600 hover:underline",children:"Supervisión"}),l.jsx("button",{onClick:()=>I(z),className:"text-yellow-600 hover:underline",children:"Editar"}),l.jsx("button",{onClick:()=>L(z.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},z.id))})]})})]}),y&&_&&l.jsx(oat,{record:_,onClose:k,onSave:P})]})},dfe="actividades_remotas",ffe="respuestas_actividades",Afe="pruebas_estandarizadas",cat="usuarios",hfe=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(typeof e=="object"){if(typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if("seconds"in e&&"nanoseconds"in e){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}}return null},u7=e=>{const t=hfe(e);return t?t.toISOString():void 0},Q4=e=>{const t=hfe(e);return t?t.toISOString().split("T")[0]:void 0},mfe=e=>{if(!e)return null;const t=new Date(`${e}T00:00:00`);return isNaN(t.getTime())?null:ir.fromDate(t)},pfe=e=>ir.fromDate(new Date(e||new Date().toISOString())),uat=e=>!!e&&/^data:/.test(e),wE=e=>{if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(wE);const t={};return Object.entries(e).forEach(([r,n])=>{n!==void 0&&(t[r]=wE(n))}),t},dat=e=>{const t=e.match(/^data:(.*?);base64,(.*)$/);if(!t)throw new Error("Data URL inválida");const r=t[1]||"application/octet-stream",n=t[2];let a="";if(typeof atob=="function")a=atob(n);else{const o=typeof Buffer<"u"?Buffer:null;if(o)a=o.from(n,"base64").toString("binary");else throw new Error("No hay decodificador base64 disponible")}const s=a.length,i=new Uint8Array(s);for(let o=0;o<s;o++)i[o]=a.charCodeAt(o);return{bytes:i,contentType:r}},fat=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:u7(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:Q4(t.plazoEntrega)||Q4(new Date)}},Aat=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCompletado:u7(t.fechaCompletado)||new Date().toISOString()}},hat=e=>{const t=e.data()||{};return{id:e.id,...t}},mat=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:u7(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:Q4(t.plazoEntrega)||Q4(new Date)}},pat=e=>{const t=$t(wt(ht,dfe),xr("fechaCreacion","desc"));return pr(t,r=>e(r.docs.map(fat)),r=>{console.error("subscribeToActividades error:",r),e([])})},gat=(e,t)=>{const r=wt(ht,ffe),n=$t(r,xr("fechaCompletado","desc"));return pr(n,a=>e(a.docs.map(Aat)),a=>{console.error("subscribeToRespuestas error:",a),e([])})},xat=e=>{const t=$t(wt(ht,cat),xr("nombreCompleto","asc"));return pr(t,r=>e(r.docs.map(hat)),r=>{console.error("subscribeToAllUsers error:",r),e([])})},vat=e=>{const t=$t(wt(ht,Afe),xr("fechaCreacion","desc"));return pr(t,r=>e(r.docs.map(mat)),r=>{console.error("subscribeToPruebasEstandarizadas error:",r),e([])})},bat=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:n,...a}=e||{},s=wE({...a,fechaCreacion:pfe(r),plazoEntrega:mfe(n)});return(await _n(wt(ht,dfe),s)).id},yat=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:n,...a}=e||{},s=wE({...a,fechaCreacion:pfe(r),plazoEntrega:mfe(n)});return(await _n(wt(ht,Afe),s)).id},wat=async(e,t)=>{const r=wE(t);await du(cr(ht,ffe,e),r)},Eat=(e,t)=>{if(!t||t<=0)return"1.0";const n=t*.6;let a;return e>=n?a=4+3*(e-n)/(t-n+1e-9):a=1+3*e/(n+1e-9),a=Math.max(1,Math.min(7,a)),a.toFixed(1)},Cat=async(e,t,r)=>{const{bytes:n,contentType:a}=dat(e),s=Date.now(),i=t.replace(/\s+/g,"_"),c=`recursos/${r!=="—"?r:"general"}/${s}/${i}`,u=$E(d5e,c);await BL(u,n,{contentType:a});const d=await Yk(u);return{nombre:t,url:d}},_at=async e=>{var s;const t=e.nivel||"general",r=((s=e.recursos)==null?void 0:s.archivos)||[],n=await Promise.all(r.map(async(i,o)=>{if(uat(i==null?void 0:i.url)){const c=(i==null?void 0:i.nombre)||`archivo_${o}.bin`;return Cat(i.url,c,t)}return{nombre:(i==null?void 0:i.nombre)||`archivo_${o}`,url:i==null?void 0:i.url}})),a={...e,recursos:{...e.recursos||{},archivos:n}};return bat(a)},dw=e=>e?new Date(e).toLocaleDateString("es-CL"):"",Sat=e=>e?new Date(e).toLocaleString("es-CL"):"",Nat=e=>new Promise((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(String(n.result)),n.onerror=a=>r(a)}),gfe=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(n=>n.includes("punto")||n.includes("Punto")||n.includes("Factor")||n.includes("factor")||n.includes("Criterio")||n.includes("criterio")||n.includes("Aspecto")||n.includes("aspecto"))&&(console.warn(`🚨 OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},gi=(e,t)=>{if(t&&gfe(e,t),e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(a=>gi(a,`${t}-array-item`)).join(", ");if(Object.keys(e).some(a=>a.includes("punto")||a.includes("Punto")||a.includes("Factor")||a.includes("factor")||a.includes("Criterio")||a.includes("criterio")))return"[Rúbrica de evaluación]";const n=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const a of n)if(e[a]&&typeof e[a]=="string")return e[a];try{const a=JSON.stringify(e);return a.length>100?"[Objeto complejo]":a}catch{return"[Objeto no serializable]"}}return String(e)},tc=(e,t,...r)=>{if(gfe(e,`extractTextSafely-${t}`),!e)return"";for(const n of r)if(e[n]){const a=gi(e[n],`${t}-${n}`);if(a&&a!=="[Objeto complejo]"&&a!=="[Objeto no serializable]")return a}return typeof e=="string"?e:"[Sin contenido disponible]"},La=({content:e,context:t="unknown"})=>{try{const r=gi(e,`UltraSafeRenderer-${t}`);return l.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),l.jsx("span",{children:"[Error al mostrar contenido]"})}},oF={Quiz:[5,10,15],"Términos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de Lectura":[1,2,3,4,5]},lF=["Localizar información","Interpretar y relacionar","Reflexionar","Extraer información explícita","Realizar inferencias","Interpretar el sentido global del texto","Evaluar contenido y forma"],kat=()=>{const[e,t]=S.useState([]),[r,n]=S.useState([]),[a,s]=S.useState([]),[i,o]=S.useState([]),[c,u]=S.useState(null),[d,f]=S.useState(null),[h,m]=S.useState(!1),[g,x]=S.useState(!1),[v,y]=S.useState(!1),[w,_]=S.useState(!1),[T,B]=S.useState(!1),[j,E]=S.useState(!0),[N,I]=S.useState(null),[L,D]=S.useState(""),[k,P]=S.useState(null),[R,W]=S.useState(null),[V,G]=S.useState([]),[z,K]=S.useState("carpetas"),[J,te]=S.useState(null),[M,H]=S.useState(null),[Y,Z]=S.useState([]),[ae,le]=S.useState(""),ie={asignatura:jo[0],nivel:"—",contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},[ce,Ae]=S.useState(ie),Fe={asignatura:jo[0],nivel:"—",contenido:"",objetivosAprendizaje:"",plazoEntrega:new Date().toISOString().split("T")[0],cursosDestino:[],estudiantesDestino:[],duracionMinutos:90},[ne,_e]=S.useState(Fe);S.useEffect(()=>{E(!0);const tt=pat(t),gt=vat(n),Je=gat(s),xt=xat(Et=>{o(Et),E(!1)});return()=>{tt(),gt(),Je(),xt()}},[]);const Ie=tt=>{Ae(gt=>({...gt,[tt.target.name]:tt.target.value}))},Se=tt=>{_e(gt=>({...gt,[tt.target.name]:tt.target.value}))},me=tt=>{Ae(gt=>({...gt,recursos:{...gt.recursos,[tt.target.name]:tt.target.value}}))},Be=tt=>{tt.target.files&&G(Array.from(tt.target.files))},Le=tt=>{Ae(gt=>{const Je=gt.tipos.includes(tt)?gt.tipos.filter(Et=>Et!==tt):[...gt.tipos,tt],xt={...gt.cantidadPreguntas};return Je.includes(tt)?xt[tt]||(xt[tt]=oF[tt][0]):delete xt[tt],{...gt,tipos:Je,cantidadPreguntas:xt}})},We=(tt,gt)=>{Ae(Je=>({...Je,cantidadPreguntas:{...Je.cantidadPreguntas,[tt]:gt}}))},be=(tt,gt=!1)=>{(gt?_e:Ae)(xt=>{const Et=xt.estudiantesDestino||[],bt=Et.includes(tt)?Et.filter(ar=>ar!==tt):[...Et,tt];return{...xt,estudiantesDestino:bt}})},Oe=()=>{const{tipos:tt,contenido:gt,asignatura:Je,nivel:xt,cantidadPreguntas:Et}=ce;let bt=`Eres un experto diseñador de actividades pedagógicas. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${gt}"
Asignatura: ${Je}
Nivel: ${xt}

Genera los siguientes elementos:
- introduccion: breve y motivadora
- actividades: objeto con propiedades por tipo:
`;return tt.forEach(ar=>{const vr=Et[ar]||oF[ar][0];switch(ar){case"Quiz":bt+=`- "Quiz": Array de ${vr} objetos { pregunta, opciones[4], respuestaCorrecta, puntaje(1) }
`;break;case"Comprensión de Lectura":bt+=`- "Comprensión de Lectura": Objeto { texto(150-200 palabras), preguntas: Array de ${vr} { pregunta, opciones[4], respuestaCorrecta, puntaje } }
`;break;case"Términos Pareados":bt+=`- "Términos Pareados": Array de ${vr} { concepto, definicion }
`;break;case"Desarrollo":bt+=`- "Desarrollo": Array de ${vr} { pregunta, rubrica }
`;break}}),bt},Pe=()=>{const{contenido:tt,objetivosAprendizaje:gt,asignatura:Je,nivel:xt}=ne;return`Eres experto en evaluación educativa y diseño de pruebas SIMCE.
Responde SOLO con JSON válido.

INFORMACIÓN:
- Asignatura: ${Je}
- Nivel: ${xt}
- Contenido: ${tt}
- Objetivos: ${gt}

{
  "titulo": "Título",
  "instrucciones": "Instrucciones",
  "textos": [
    {
      "id": 1,
      "titulo": "Título del texto",
      "contenido": "200-300 palabras",
      "tipo": "narrativo",
      "palabras": 250
    }
  ],
  "preguntas": [
    {
      "numero": 1,
      "pregunta": "Enunciado",
      "opciones": ["Opción A", "Opción B", "Opción C", "Opción D"],
      "respuestaCorrecta": "A",
      "habilidad": "Localizar información",
      "justificacion": "Breve explicación",
      "textoId": 1
    }
  ]
}

Reglas:
- ${Je==="Lenguaje y Comunicación"||Je==="Lengua y Literatura"?"3-4 textos de distintos tipos":"2-3 textos informativos"}
- Exactamente 30 preguntas numeradas 1..30
- 4 opciones por pregunta (A-D)
- Habilidades válidas: ${lF.join(", ")}
- Para preguntas basadas en textos: incluir "textoId"
- Sin comentarios fuera del JSON`};function qe(tt,gt){if(tt==="Desarrollo"&&Array.isArray(gt))return gt.map((Je,xt)=>{if(typeof Je=="string"){const Et=Je.match(/^(.*?)(?:R[úu]brica:|RUBRICA:|Rubrica:)(.*)$/is);return Et?{pregunta:tc(Et[1],`desarrollo-pregunta-${xt}`),rubrica:tc(Et[2],`desarrollo-rubrica-${xt}`)}:{pregunta:tc(Je,`desarrollo-pregunta-simple-${xt}`),rubrica:""}}if(Je&&typeof Je=="object"){const Et=tc(Je,`desarrollo-obj-pregunta-${xt}`,"pregunta","Pregunta","texto");let bt="";if(Je.rubrica||Je.Rubrica||Je.rúbrica||Je.Rúbrica){const ar=Je.rubrica||Je.Rubrica||Je.rúbrica||Je.Rúbrica;bt=gi(ar,`desarrollo-rubrica-${xt}`)}return{pregunta:Et,rubrica:bt}}return{pregunta:gi(Je,`desarrollo-fallback-${xt}`),rubrica:""}});if(tt==="Términos Pareados"&&Array.isArray(gt))return gt.map((Je,xt)=>{if(typeof Je=="string"){const Et=Je.match(/^(.+?)[\s:-–]+(.+)$/);return Et?{id:xt,concepto:tc(Et[1],`pareados-concepto-${xt}`),definicion:tc(Et[2],`pareados-definicion-${xt}`)}:{id:xt,concepto:tc(Je,`pareados-concepto-simple-${xt}`),definicion:""}}return Je&&typeof Je=="object"?{id:xt,concepto:tc(Je,`pareados-obj-concepto-${xt}`,"concepto","termino"),definicion:tc(Je,`pareados-obj-definicion-${xt}`,"definicion","significado")}:{id:xt,concepto:gi(Je,`pareados-fallback-${xt}`),definicion:""}});if(tt==="Comprensión de Lectura"){if(gt&&typeof gt=="object"&&!Array.isArray(gt)&&Array.isArray(gt.preguntas))return{texto:tc(gt,"comprension-texto","texto"),preguntas:gt.preguntas.map((Je,xt)=>({pregunta:tc(Je,`comprension-pregunta-${xt}`,"pregunta"),opciones:Array.isArray(Je.opciones)?Je.opciones.map(Et=>gi(Et,`comprension-opcion-${xt}`)):[],respuestaCorrecta:gi(Je.respuestaCorrecta,`comprension-respuesta-${xt}`),puntaje:typeof Je.puntaje=="number"?Je.puntaje:1}))};if(Array.isArray(gt)){const Je=gt.map((Et,bt)=>tc(Et,`comprension-bloque-${bt}`,"texto")).join(`

---

`),xt=gt.flatMap(Et=>Array.isArray(Et.preguntas)?Et.preguntas:[]);return{texto:Je,preguntas:xt.map((Et,bt)=>({pregunta:tc(Et,`comprension-combined-pregunta-${bt}`,"pregunta"),opciones:Array.isArray(Et.opciones)?Et.opciones.map(ar=>gi(ar,`comprension-combined-opcion-${bt}`)):[],respuestaCorrecta:gi(Et.respuestaCorrecta,`comprension-combined-respuesta-${bt}`),puntaje:typeof Et.puntaje=="number"?Et.puntaje:1}))}}}return tt==="Quiz"&&Array.isArray(gt)?gt.map((Je,xt)=>({pregunta:tc(Je,`quiz-pregunta-${xt}`,"pregunta"),opciones:Array.isArray(Je.opciones)?Je.opciones.map(Et=>gi(Et,`quiz-opcion-${xt}`)):[],respuestaCorrecta:gi(Je.respuestaCorrecta,`quiz-respuesta-${xt}`),puntaje:typeof Je.puntaje=="number"?Je.puntaje:1})):gt}const et=async tt=>{var gt;if(tt.preventDefault(),!ce.contenido.trim()||ce.tipos.length===0){I("Contenido y al menos un tipo de actividad son obligatorios.");return}y(!0),I(null);try{const Je=await Promise.all(V.map(async we=>({nombre:we.name,url:await Nat(we)}))),xt="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",bt=new ps(xt).getGenerativeModel({model:"gemini-1.5-flash-latest"}),ar=Oe();let tn=await(await(await bt.generateContent(ar)).response).text();tn=tn.replace(/```json\s*/gi,"").replace(/```\s*$/g,"");const Xr=tn.match(/\{[\s\S]*\}/);if(!Xr)throw new Error("La IA no devolvió JSON válido.");const he=JSON.parse(Xr[0]),Te={};for(const we of ce.tipos){const Ne=(gt=he.actividades)==null?void 0:gt[we];Te[we]=qe(we,Ne)}const Ce={id:"",fechaCreacion:new Date().toISOString(),...ce,recursos:{...ce.recursos,archivos:Je},introduccion:gi(he.introduccion,"introduccion")||"Actividad generada para reforzar el aprendizaje.",generatedContent:Te};P(Ce)}catch(Je){I(`Error al generar la actividad: ${(Je==null?void 0:Je.message)||Je}`)}finally{y(!1)}},ct=async tt=>{if(tt.preventDefault(),!ne.contenido.trim()||!ne.objetivosAprendizaje.trim()){I("Contenido y objetivos de aprendizaje son obligatorios.");return}y(!0),I(null);try{const gt="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",xt=new ps(gt).getGenerativeModel({model:"gemini-1.5-flash-latest"}),Et=Pe();let vr=await(await(await xt.generateContent(Et)).response).text();vr=vr.replace(/```json\s*/gi,"").replace(/```\s*$/g,"").replace(/\/\/.*$/gm,"").replace(/\/\*[\s\S]*?\*\//g,"").trim();const Yr=vr.match(/\{[\s\S]*\}/);if(!Yr)throw new Error("No se encontró JSON válido en la respuesta.");const tn=Yr[0].replace(/,(\s*[}\]])/g,"$1"),Xr=JSON.parse(tn);if(!Xr.preguntas||!Array.isArray(Xr.preguntas))throw new Error("La respuesta de la IA no contiene un array de preguntas válido");const he=(Xr.textos||[]).map((we,Ne)=>({id:we.id||Ne+1,titulo:gi(we.titulo,`texto-titulo-${Ne}`)||`Texto ${Ne+1}`,contenido:gi(we.contenido,`texto-contenido-${Ne}`)||"Contenido no disponible",tipo:["narrativo","informativo","argumentativo","poetico"].includes(we.tipo)?we.tipo:"informativo",palabras:we.palabras||(we.contenido?String(we.contenido).split(" ").length:0)})),Te=Xr.preguntas.slice(0,30).map((we,Ne)=>({numero:we.numero||Ne+1,pregunta:gi(we.pregunta,`pregunta-${Ne}`)||`Pregunta ${Ne+1}`,opciones:Array.isArray(we.opciones)&&we.opciones.length>=4?we.opciones.slice(0,4).map((je,Ye)=>gi(je,`pregunta-opcion-${Ne}-${Ye}`)):["A","B","C","D"],respuestaCorrecta:["A","B","C","D"].includes(we.respuestaCorrecta)?we.respuestaCorrecta:"A",habilidad:lF.includes(we.habilidad)?we.habilidad:lF[0],justificacion:gi(we.justificacion,`justificacion-${Ne}`)||"Justificación no disponible",...we.textoId&&typeof we.textoId=="number"?{textoId:we.textoId}:{}})),Ce={id:"",fechaCreacion:new Date().toISOString(),...ne,titulo:gi(Xr.titulo,"prueba-titulo")||`Prueba ${ne.asignatura}`,instrucciones:gi(Xr.instrucciones,"prueba-instrucciones")||"Lee y responde.",textos:he,preguntas:Te};W(Ce)}catch(gt){I(`Error al generar la prueba: ${(gt==null?void 0:gt.message)||gt}`)}finally{y(!1)}},pt=async()=>{if(k)try{_(!0),await _at(k),Ae(ie),G([]),m(!1),P(null)}catch(tt){console.error("Error al guardar la actividad con archivos:",tt),I("No se pudo guardar la actividad. Revisa los archivos adjuntos.")}finally{_(!1)}},Ft=async()=>{if(R)try{_(!0);const tt={...R,cursosDestino:R.cursosDestino||[],estudiantesDestino:R.estudiantesDestino||[],textos:R.textos||[],preguntas:R.preguntas.map(gt=>({...gt,textoId:gt.textoId||null}))};await yat(tt),_e(Fe),x(!1),W(null)}catch(tt){console.error("Error al guardar la prueba:",tt),I("No se pudo guardar la prueba.")}finally{_(!1)}},Ut=S.useMemo(()=>{var Je,xt,Et;const tt=c||d;if(!tt||!i.length)return[];const gt=new Map;return!((Je=tt.cursosDestino)!=null&&Je.length)&&!((xt=tt.estudiantesDestino)!=null&&xt.length)?[]:((Et=tt.estudiantesDestino)!=null&&Et.length&&i.filter(bt=>bt.profile===Jt.ESTUDIANTE&&tt.estudiantesDestino.includes(bt.nombreCompleto)).forEach(bt=>gt.set(bt.id,bt)),Array.from(gt.values()).sort((bt,ar)=>bt.nombreCompleto.localeCompare(ar.nombreCompleto)))},[c,d,i]),Rt=S.useMemo(()=>{const tt=(c==null?void 0:c.id)||(d==null?void 0:d.id);return a.filter(gt=>gt.actividadId===tt)},[a,c,d]),Ht=S.useMemo(()=>i.filter(tt=>tt.profile===Jt.ESTUDIANTE).sort((tt,gt)=>tt.nombreCompleto.localeCompare(gt.nombreCompleto)),[i]),yt=S.useMemo(()=>L.trim()?Ht.filter(tt=>tt.nombreCompleto.toLowerCase().includes(L.toLowerCase())):Ht,[Ht,L]),jr=S.useMemo(()=>{const tt=new Set;return e.forEach(gt=>{(gt.estudiantesDestino||[]).forEach(Je=>{const xt=i.find(Et=>Et.profile===Jt.ESTUDIANTE&&Et.nombreCompleto===Je);xt&&tt.add(xt.id)})}),r.forEach(gt=>{(gt.estudiantesDestino||[]).forEach(Je=>{const xt=i.find(Et=>Et.profile===Jt.ESTUDIANTE&&Et.nombreCompleto===Je);xt&&tt.add(xt.id)})}),a.forEach(gt=>tt.add(gt.estudianteId)),i.filter(gt=>gt.profile===Jt.ESTUDIANTE&&tt.has(gt.id)).sort((gt,Je)=>gt.nombreCompleto.localeCompare(Je.nombreCompleto))},[e,r,a,i]),rr=S.useMemo(()=>i.find(tt=>tt.id===J)||null,[i,J]),on=S.useMemo(()=>{if(!rr)return{asignadas:[],respuestas:[]};const tt=[...e.filter(Je=>(Je.estudiantesDestino||[]).includes(rr.nombreCompleto)).map(Je=>({tipo:"Actividad",item:Je})),...r.filter(Je=>(Je.estudiantesDestino||[]).includes(rr.nombreCompleto)).map(Je=>({tipo:"Prueba",item:Je}))],gt=a.filter(Je=>Je.estudianteId===rr.id);return{asignadas:tt,respuestas:gt}},[rr,e,r,a]),kr=()=>l.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[["carpetas","actividades","pruebas"].map(tt=>l.jsxs("button",{onClick:()=>{K(tt),u(null),f(null),te(null)},className:`inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition
            ${z===tt?"bg-amber-500 text-white shadow":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:[tt==="carpetas"&&l.jsx(sz,{size:18}),tt==="actividades"&&l.jsx(nf,{size:18}),tt==="pruebas"&&l.jsx(uCe,{size:18}),tt==="carpetas"?"Carpetas de Estudiantes":tt==="actividades"?"Actividades Remotas":"Pruebas Estandarizadas"]},tt)),l.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[l.jsxs("div",{className:"relative",children:[l.jsx(Zk,{className:"absolute left-3 top-1/2 -translate-y-1/2 opacity-60",size:18}),l.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:L,onChange:tt=>D(tt.target.value),className:"pl-10 pr-3 py-2 rounded-xl bg-white border border-slate-200 focus:outline-none focus:ring-2 focus:ring-amber-400"})]}),z==="actividades"&&!k&&!c&&l.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-semibold py-2 px-3 rounded-xl hover:bg-amber-600",children:[l.jsx(G_,{size:18})," Nueva"]}),z==="pruebas"&&!R&&!d&&l.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-semibold py-2 px-3 rounded-xl hover:bg-amber-600",children:[l.jsx(G_,{size:18})," Nueva"]})]})]}),Kr=()=>{const tt=L?yt:jr;return tt.length?l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-4",children:tt.map(gt=>{const Je=a.filter(bt=>bt.estudianteId===gt.id),xt=Je.length,Et=e.filter(bt=>(bt.estudiantesDestino||[]).includes(gt.nombreCompleto)).length+r.filter(bt=>(bt.estudiantesDestino||[]).includes(gt.nombreCompleto)).length;return l.jsxs("button",{onClick:()=>te(gt.id),className:"group text-left rounded-2xl border border-slate-200 bg-white hover:shadow-md transition overflow-hidden",children:[l.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gradient-to-br from-amber-50 to-white",children:[l.jsx("div",{className:"rounded-xl p-3 bg-amber-100 text-amber-700",children:l.jsx(sz,{})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("p",{className:"font-semibold text-slate-800 truncate",children:gt.nombreCompleto}),l.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:[l.jsx(U2,{size:14})," ",gt.curso||"—"]})]})]}),l.jsxs("div",{className:"p-4 grid grid-cols-3 text-center text-sm text-slate-600",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold",children:Et}),l.jsx("p",{className:"text-xs",children:"Asignadas"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold",children:xt}),l.jsx("p",{className:"text-xs",children:"Entregas"})]}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(Em,{size:16,className:"opacity-70"}),l.jsx("span",{className:"text-xs mt-1",children:Je.length?dw(Je.sort((bt,ar)=>(bt.fechaCompletado||"").localeCompare(ar.fechaCompletado||"")).slice(-1)[0].fechaCompletado):"—"})]})]})]},gt.id)})}):l.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow text-center text-slate-500",children:"No hay estudiantes asignados aún."})},Fn=()=>{if(!rr)return null;const{asignadas:tt,respuestas:gt}=on;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsxs("button",{onClick:()=>te(null),className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900",children:[l.jsx($_,{size:18})," Volver"]}),l.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Historial — ",rr.nombreCompleto]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Tipo"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Título / Asignatura"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Plazo"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:tt.map(({tipo:Je,item:xt})=>{var vr;const Et=gt.find(Yr=>Yr.actividadId===xt.id),bt=Je==="Actividad"?`${xt.asignatura} — ${(vr=xt.tipos)==null?void 0:vr.join(", ")}`:xt.titulo,ar=xt.plazoEntrega?dw(xt.plazoEntrega):"—";return l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"px-4 py-3 text-sm",children:Je}),l.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:l.jsx(La,{content:bt,context:"hist-titulo"})}),l.jsx("td",{className:"px-4 py-3 text-sm",children:ar}),l.jsx("td",{className:"px-4 py-3 text-sm",children:Et?l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:[l.jsx(io,{size:14})," Completado"]}):l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:[l.jsx(Em,{size:14})," Pendiente"]})}),l.jsx("td",{className:"px-4 py-3 text-sm",children:Et?`${Et.puntaje}/${Et.puntajeMaximo}`:"—"}),l.jsx("td",{className:"px-4 py-3 text-sm font-semibold",children:Et?Et.nota:"—"})]},xt.id)})})]})})]})},Rr=()=>{var tt,gt,Je;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:c?l.jsxs(l.Fragment,{children:[l.jsx(La,{content:c.asignatura,context:"actividad-asignatura"})," - ",c.tipos.join(", ")]}):l.jsx(La,{content:(d==null?void 0:d.titulo)||"Prueba Estandarizada",context:"prueba-titulo"})}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Plazo:"," ",dw((c==null?void 0:c.plazoEntrega)||(d==null?void 0:d.plazoEntrega)),d&&` | Duración: ${d.duracionMinutos} min`]})]}),l.jsxs("button",{onClick:()=>{u(null),f(null)},className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[l.jsx($_,{size:18})," Volver al listado"]})]}),l.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Resultados de Estudiantes"}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"}),((tt=c==null?void 0:c.tipos)==null?void 0:tt.includes("Desarrollo"))&&l.jsx("th",{className:"px-4 py-3"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Ut.map(xt=>{var bt;const Et=Rt.find(ar=>ar.estudianteId===xt.id);return l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:xt.nombreCompleto}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:Et?l.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):l.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:Et?`${Et.puntaje}/${Et.puntajeMaximo}`:"-"}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-bold",children:Et?l.jsx("span",{className:parseFloat(Et.nota)>=4?"text-green-600":"text-red-600",children:Et.nota}):"-"}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:Et?Sat(Et.fechaCompletado):"-"}),((bt=c==null?void 0:c.tipos)==null?void 0:bt.includes("Desarrollo"))&&l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:Et?l.jsx("button",{onClick:()=>{var vr,Yr,tn;H(Et);const ar=Array.from({length:((Yr=(vr=c.generatedContent)==null?void 0:vr.Desarrollo)==null?void 0:Yr.length)||0},(Xr,he)=>({index:he,puntaje:0,observacion:""}));Z(ar),le(((tn=Et==null?void 0:Et.revisionDocente)==null?void 0:tn.observacionesGenerales)||"")},className:"text-blue-600 hover:text-blue-800 font-semibold",children:"Revisar Desarrollo"}):l.jsx("span",{className:"text-slate-400",children:"-"})})]},xt.id)})})]})})]}),M&&((gt=c==null?void 0:c.tipos)==null?void 0:gt.includes("Desarrollo"))&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl p-6 shadow-xl",children:[l.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Revisión de Desarrollo — ",(M==null?void 0:M.estudianteNombre)||""]}),l.jsx("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto",children:(((Je=c.generatedContent)==null?void 0:Je.Desarrollo)||[]).map((xt,Et)=>{var bt,ar;return l.jsxs("div",{className:"p-3 border rounded-lg",children:[l.jsxs("p",{className:"font-semibold",children:[Et+1,". ",l.jsx(La,{content:xt.pregunta,context:`revision-pregunta-${Et}`})]}),xt.rubrica&&l.jsxs("p",{className:"text-xs text-slate-600 mt-2 bg-slate-50 p-2 rounded",children:[l.jsx("strong",{children:"Rúbrica:"})," ",l.jsx(La,{content:xt.rubrica,context:`revision-rubrica-${Et}`})]}),l.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[l.jsx("label",{className:"text-sm text-slate-700",children:"Puntaje:"}),l.jsx("input",{type:"number",min:0,step:.5,value:((bt=Y[Et])==null?void 0:bt.puntaje)??0,onChange:vr=>{const Yr=Number(vr.target.value)||0;Z(tn=>{const Xr=[...tn];return Xr[Et]={...Xr[Et]||{index:Et,puntaje:0},puntaje:Yr},Xr})},className:"w-24 border-slate-300 rounded-md"}),l.jsx("input",{type:"text",placeholder:"Observación (opcional)",value:((ar=Y[Et])==null?void 0:ar.observacion)||"",onChange:vr=>{const Yr=vr.target.value;Z(tn=>{const Xr=[...tn];return Xr[Et]={...Xr[Et]||{index:Et,puntaje:0},observacion:Yr},Xr})},className:"flex-1 border-slate-300 rounded-md"})]})]},Et)})}),l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Observaciones Generales"}),l.jsx("textarea",{rows:3,value:ae,onChange:xt=>le(xt.target.value),className:"w-full border-slate-300 rounded-md"})]}),l.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>{H(null),Z([]),le("")},className:"px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:"Cancelar"}),l.jsx("button",{onClick:async()=>{if(M)try{B(!0);const xt=Number(M.puntaje)||0,Et=Number(M.puntajeMaximo)||0,bt=(Y||[]).reduce((Yr,tn)=>Yr+(Number(tn.puntaje)||0),0),ar=xt+bt,vr=Eat(ar,Et);await wat(M.id,{puntaje:ar,puntajeMaximo:Et,nota:vr,revisionDocente:{completada:!0,observacionesGenerales:ae||"",detalle:Y||[],puntajeDocente:bt}}),H(null),Z([]),le("")}catch(xt){console.error("Error guardando revisión:",xt),I("No se pudo guardar la revisión del docente.")}finally{B(!1)}},disabled:T,className:"px-4 py-2 rounded-lg bg-amber-600 text-white hover:bg-amber-700 disabled:bg-amber-400",children:T?"Guardando...":"Guardar Revisión"})]})]})})]})},bs=()=>{var tt,gt;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Actividad Remota"}),l.jsxs("button",{onClick:()=>m(!1),className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[l.jsx($_,{size:18})," Volver"]})]}),l.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generará una actividad."}),l.jsxs("form",{onSubmit:et,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),l.jsx("select",{name:"asignatura",value:ce.asignatura,onChange:Ie,className:"w-full border-slate-300 rounded-md shadow-sm",children:jo.map(Je=>l.jsx("option",{value:Je,children:Je},Je))})]}),l.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Recursos (Opcional)"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones"}),l.jsx("textarea",{name:"instrucciones",value:(tt=ce.recursos)==null?void 0:tt.instrucciones,onChange:me,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Ej: Lee y luego responde..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces"}),l.jsx("textarea",{name:"enlaces",value:(gt=ce.recursos)==null?void 0:gt.enlaces,onChange:me,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Pega un enlace por línea..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos"}),l.jsx("input",{type:"file",multiple:!0,onChange:Be,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),l.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios (Sólo estudiantes)"}),l.jsxs("div",{children:[l.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:L,onChange:Je=>D(Je.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-56 overflow-y-auto p-2 bg-white rounded",children:(L?yt:Ht).map(Je=>{var xt;return l.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:(xt=ce.estudiantesDestino)==null?void 0:xt.includes(Je.nombreCompleto),onChange:()=>be(Je.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:Je.nombreCompleto,children:Je.nombreCompleto})]},Je.id)})})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("textarea",{name:"contenido",value:ce.contenido,onChange:Ie,required:!0,rows:4,placeholder:"Temas, conceptos clave o texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),l.jsx("input",{type:"date",name:"plazoEntrega",value:ce.plazoEntrega,onChange:Ie,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),l.jsx("div",{className:"space-y-3",children:_Ee.map(Je=>l.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:ce.tipos.includes(Je),onChange:()=>Le(Je),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:Je})]}),ce.tipos.includes(Je)&&l.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[l.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),oF[Je].map(xt=>l.jsx("button",{type:"button",onClick:()=>We(Je,xt),className:`px-3 py-1 rounded-full font-semibold text-xs ${ce.cantidadPreguntas[Je]===xt?"bg-amber-500 text-white":"bg-slate-200"}`,children:xt},xt))]})]},Je))})]})]}),N&&l.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-2",children:N}),l.jsx("div",{className:"pt-2 text-right",children:l.jsxs("button",{type:"submit",disabled:v,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 inline-flex items-center justify-center gap-2",children:[v?l.jsx(Em,{className:"animate-spin",size:18}):null,v?"Generando...":"Generar y Previsualizar"]})})]})]})},pn=()=>{var tt;return l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización de la Actividad"}),l.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo está correcto, confirma para asignar."}),l.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[l.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[l.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introducción para el Estudiante"}),l.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:l.jsx(La,{content:k==null?void 0:k.introduccion,context:"preview-introduccion"})})]}),(k==null?void 0:k.recursos)&&(k.recursos.instrucciones||k.recursos.enlaces||((tt=k.recursos.archivos)==null?void 0:tt.length))&&l.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[l.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),l.jsxs("div",{className:"space-y-3",children:[k.recursos.instrucciones&&l.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:l.jsx(La,{content:k.recursos.instrucciones,context:"preview-instrucciones"})}),k.recursos.enlaces&&l.jsx("div",{children:k.recursos.enlaces.split(`
`).map((gt,Je)=>gt.trim()&&l.jsx("a",{href:gt,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:gt},Je))}),k.recursos.archivos&&k.recursos.archivos.length>0&&l.jsx("ul",{className:"list-disc list-inside",children:k.recursos.archivos.map(gt=>l.jsx("li",{className:"text-slate-700",children:gt.nombre},gt.nombre))})]})]}),k==null?void 0:k.tipos.map(gt=>{const Je=k.generatedContent[gt];return Je?l.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:gt}),l.jsxs("div",{className:"space-y-4 text-sm",children:[gt==="Quiz"&&Array.isArray(Je)&&Je.map((xt,Et)=>l.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[l.jsxs("p",{className:"font-semibold",children:[Et+1,". ",l.jsx(La,{content:xt.pregunta,context:`preview-quiz-pregunta-${Et}`})]}),l.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:xt.opciones.map((bt,ar)=>l.jsxs("li",{children:[l.jsxs("strong",{children:[String.fromCharCode(65+ar),"."]})," ",l.jsx(La,{content:bt,context:`preview-quiz-opcion-${Et}-${ar}`})]},ar))}),l.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",l.jsx(La,{content:xt.respuestaCorrecta,context:`preview-quiz-respuesta-${Et}`})]})]},Et)),gt==="Comprensión de Lectura"&&Je&&typeof Je=="object"&&"preguntas"in Je&&Array.isArray(Je.preguntas)&&l.jsxs("div",{children:[l.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-3 rounded-md mb-4",children:l.jsx(La,{content:Je.texto,context:"preview-lectura-texto"})}),Je.preguntas.map((xt,Et)=>l.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[l.jsxs("p",{className:"font-semibold",children:[Et+1,". ",l.jsx(La,{content:xt.pregunta,context:`preview-lectura-pregunta-${Et}`})]}),l.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:xt.opciones.map((bt,ar)=>l.jsxs("li",{children:[l.jsxs("strong",{children:[String.fromCharCode(65+ar),"."]})," ",l.jsx(La,{content:bt,context:`preview-lectura-opcion-${Et}-${ar}`})]},ar))}),l.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",l.jsx(La,{content:xt.respuestaCorrecta,context:`preview-lectura-respuesta-${Et}`})]})]},Et))]}),gt==="Términos Pareados"&&Array.isArray(Je)&&l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border border-slate-200",children:[l.jsx("thead",{className:"bg-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Concepto"}),l.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Definición"})]})}),l.jsx("tbody",{children:Je.map((xt,Et)=>l.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-slate-50",children:[l.jsx("td",{className:"p-2 align-top font-semibold text-slate-800",children:l.jsx(La,{content:xt.concepto,context:`preview-pareado-concepto-${Et}`})}),l.jsx("td",{className:"p-2 align-top text-slate-700",children:l.jsx(La,{content:xt.definicion,context:`preview-pareado-definicion-${Et}`})})]},xt.id))})]})}),gt==="Desarrollo"&&Array.isArray(Je)&&Je.map((xt,Et)=>l.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[l.jsxs("p",{className:"font-semibold",children:[Et+1,". ",l.jsx(La,{content:xt.pregunta,context:`preview-desarrollo-pregunta-${Et}`})]}),l.jsxs("p",{className:"text-sm text-slate-600 mt-2 p-2 bg-slate-100 rounded-md",children:[l.jsx("strong",{className:"font-semibold",children:"Rúbrica:"})," ",l.jsx(La,{content:xt.rubrica,context:`preview-desarrollo-rubrica-${Et}`})]})]},Et))]})]},gt):null})]}),l.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[l.jsx("button",{onClick:()=>P(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),l.jsx("button",{onClick:pt,disabled:w,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:w?"Guardando...":"Confirmar y Asignar"})]})]})},da=()=>l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify_between items-start",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Prueba Estandarizada"}),l.jsxs("button",{onClick:()=>x(!1),className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[l.jsx($_,{size:18})," Volver"]})]}),l.jsxs("form",{onSubmit:ct,className:"space-y-6 mt-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),l.jsx("select",{name:"asignatura",value:ne.asignatura,onChange:Se,className:"w-full border-slate-300 rounded-md shadow-sm",children:jo.map(tt=>l.jsx("option",{value:tt,children:tt},tt))})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Objetivos de Aprendizaje"}),l.jsx("textarea",{name:"objetivosAprendizaje",value:ne.objetivosAprendizaje,onChange:Se,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Describe OA o contenidos evaluados..."})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Contenido Base"}),l.jsx("textarea",{name:"contenido",value:ne.contenido,onChange:Se,rows:4,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),l.jsx("input",{type:"date",name:"plazoEntrega",value:ne.plazoEntrega,onChange:Se,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),l.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios (Sólo estudiantes)"}),l.jsxs("div",{children:[l.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:L,onChange:tt=>D(tt.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-56 overflow-y-auto p-2 bg-white rounded",children:(L?yt:Ht).map(tt=>{var gt;return l.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:(gt=ne.estudiantesDestino)==null?void 0:gt.includes(tt.nombreCompleto),onChange:()=>be(tt.nombreCompleto,!0),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:tt.nombreCompleto,children:tt.nombreCompleto})]},tt.id)})})]})]})]}),N&&l.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:N}),l.jsx("div",{className:"text-right",children:l.jsxs("button",{type:"submit",disabled:v,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 inline-flex items-center gap-2",children:[v?l.jsx(Em,{className:"animate-spin",size:18}):null,v?"Generando...":"Generar y Previsualizar"]})})]})]}),Da=()=>{var tt,gt;return l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización Prueba"}),l.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa y confirma."}),l.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[l.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[l.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:l.jsx(La,{content:R==null?void 0:R.titulo,context:"preview-prueba-titulo"})}),l.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:l.jsx(La,{content:R==null?void 0:R.instrucciones,context:"preview-prueba-instrucciones"})})]}),(tt=R==null?void 0:R.textos)!=null&&tt.length?l.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[l.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Textos"}),l.jsx("ol",{className:"space-y-2 list-decimal list-inside",children:R.textos.map((Je,xt)=>l.jsxs("li",{children:[l.jsxs("p",{className:"font-semibold",children:[l.jsx(La,{content:Je.titulo,context:`preview-texto-titulo-${xt}`}),l.jsxs("span",{className:"text-xs text-slate-500",children:["(",Je.tipo,")"]})]}),l.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap mt-1",children:l.jsx(La,{content:Je.contenido,context:`preview-texto-contenido-${xt}`})})]},Je.id))})]}):null,(gt=R==null?void 0:R.preguntas)!=null&&gt.length?l.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"Preguntas (muestra)"}),R.preguntas.slice(0,10).map((Je,xt)=>l.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[l.jsxs("p",{className:"font-semibold",children:[Je.numero,". ",l.jsx(La,{content:Je.pregunta,context:`preview-pregunta-texto-${xt}`})]}),l.jsx("ul",{className:"list-disc pl-6 text-sm mt-1",children:Je.opciones.map((Et,bt)=>l.jsx("li",{children:l.jsx(La,{content:Et,context:`preview-pregunta-opcion-${xt}-${bt}`})},bt))}),l.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-1",children:["Correcta: ",Je.respuestaCorrecta]})]},Je.numero))]}):null]}),l.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[l.jsx("button",{onClick:()=>W(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),l.jsx("button",{onClick:Ft,disabled:w,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:w?"Guardando...":"Confirmar y Asignar"})]})]})},an=()=>l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),l.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:[l.jsx(G_,{size:18})," Crear Nueva"]})]}),l.jsx("div",{className:"space-y-4",children:e.length>0?e.map(tt=>{var xt;const gt=[];(xt=tt.estudiantesDestino)!=null&&xt.length&&gt.push(`Estudiantes: ${tt.estudiantesDestino.length}`);const Je=gt.length?gt.join(" | "):"Estudiantes seleccionados";return l.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-bold text-slate-800",children:[l.jsx(La,{content:tt.asignatura,context:`lista-asignatura-${tt.id}`})," — ",tt.tipos.join(", ")]}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",Je," | Creado: ",dw(tt.fechaCreacion)]})]}),l.jsx("button",{onClick:()=>u(tt),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},tt.id)}):l.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Use "Crear Nueva".'})})]}),gr=()=>l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Pruebas Estandarizadas"}),l.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:[l.jsx(G_,{size:18})," Crear Nueva"]})]}),l.jsx("div",{className:"space-y-4",children:r.length>0?r.map(tt=>l.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800",children:l.jsx(La,{content:tt.titulo,context:`lista-prueba-titulo-${tt.id}`})}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Creado: ",dw(tt.fechaCreacion)]})]}),l.jsx("button",{onClick:()=>f(tt),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},tt.id)):l.jsx("p",{className:"text-slate-500 text-center py-6",children:"No hay pruebas creadas."})})]});return j?l.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):l.jsxs("div",{className:"animate-fade-in",children:[kr(),J?Fn():R?Da():k?pn():c||d?Rr():z==="pruebas"?g?da():gr():z==="actividades"?h?bs():an():Kr()]})},Bat="actividades_remotas",d7="respuestas_actividades",xfe=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(e&&typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if(e&&typeof e.seconds=="number"&&typeof e.nanoseconds=="number"){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}return null},EY=e=>{const t=xfe(e);return t?t.toISOString():void 0},Tat=e=>{const t=xfe(e);return t?t.toISOString().split("T")[0]:void 0},f7=e=>{const t=e.data();return{id:e.id,...t,fechaCreacion:EY(t.fechaCreacion)||t.fechaCreacion,plazoEntrega:Tat(t.plazoEntrega)||t.plazoEntrega,fechaCompletado:EY(t.fechaCompletado)||t.fechaCompletado}},pb=(e,t)=>{var n,a;console.error(`❌ Error en ${t}:`,e);const r={name:"FirestoreError",message:e.message||"Error desconocido",code:e.code};return e.code==="failed-precondition"&&((n=e.message)!=null&&n.includes("requires an index"))?(r.message="Se requiere configurar un índice en la base de datos. Contacta al administrador.",console.log("🔗 Enlace para crear índice:",(a=e.message.match(/https:\/\/[^\s]+/))==null?void 0:a[0])):e.code==="permission-denied"?r.message="No tienes permisos para acceder a estos datos.":e.code==="unavailable"&&(r.message="Servicio temporalmente no disponible. Intenta nuevamente."),r},jat=e=>new Promise(t=>setTimeout(t,e)),Iat=async(e,t=3,r="operación")=>{for(let n=1;n<=t;n++)try{return await e()}catch(a){if(console.log(`⚠️ Intento ${n} falló en ${r}:`,a.code||a.message),n===t)throw a;if(["unavailable","deadline-exceeded","internal"].includes(a.code)){const s=Math.pow(2,n)*1e3;console.log(`⏱️ Reintentando en ${s}ms...`),await jat(s)}else throw a}throw new Error("Max retries exceeded")},Fat=(e,t,r)=>{console.log("🔔 Suscribiéndose a actividades disponibles para:",e.nombreCompleto);const n=$t(wt(ht,Bat),xr("fechaCreacion","desc"));return pr(n,{next:s=>{try{console.log("📋 Actividades recibidas desde Firestore:",s.docs.length);const o=s.docs.map(c=>f7(c)).filter(c=>{var u,d,f,h,m;if(!((u=c.cursosDestino)!=null&&u.length)&&!((d=c.estudiantesDestino)!=null&&d.length)){const g=c.nivel.charAt(0);return(f=e.curso)==null?void 0:f.startsWith(g)}return!!((h=c.cursosDestino)!=null&&h.includes(e.curso||"")||(m=c.estudiantesDestino)!=null&&m.includes(e.nombreCompleto))});console.log("✅ Actividades filtradas para el estudiante:",o.length),t(o)}catch(i){console.error("❌ Error procesando datos de actividades:",i);const o=pb(i,"procesamiento de actividades");r==null||r(o)}},error:s=>{const i=pb(s,"suscripción a actividades");r==null||r(i)}})},Oat=(e,t,r)=>{console.log("🔔 Suscribiéndose a respuestas del estudiante:",e);const n=$t(wt(ht,d7),Qr("estudianteId","==",e),xr("fechaCompletado","desc"));return pr(n,{next:s=>{try{console.log("📝 Respuestas recibidas desde Firestore:",s.docs.length);const i=s.docs.map(o=>{var u;const c=f7(o);return console.log(`📄 Respuesta ${o.id}:`,{actividadId:c.actividadId,puntaje:c.puntaje,nota:c.nota,requiereRevision:c.requiereRevisionDocente,revisionCompletada:(u=c.revisionDocente)==null?void 0:u.completada,fechaCompletado:c.fechaCompletado}),c});console.log("✅ Enviando respuestas procesadas al componente:",i.length),t(i)}catch(i){console.error("❌ Error procesando respuestas:",i);const o=pb(i,"procesamiento de respuestas");r==null||r(o)}},error:s=>{var o;const i=pb(s,"suscripción a respuestas");if(s.code==="failed-precondition"&&((o=s.message)!=null&&o.includes("requires an index")))return console.log("⚠️ Error de índice detectado, intentando consulta alternativa..."),Dat(e,t,r);r==null||r(i)}})},Dat=(e,t,r)=>{console.log("🔄 Usando consulta alternativa sin ordenamiento...");const n=$t(wt(ht,d7),Qr("estudianteId","==",e));return pr(n,{next:s=>{try{console.log("📝 Respuestas recibidas (consulta alternativa):",s.docs.length);const i=s.docs.map(o=>f7(o)).sort((o,c)=>new Date(c.fechaCompletado).getTime()-new Date(o.fechaCompletado).getTime());console.log("✅ Respuestas ordenadas manualmente:",i.length),t(i)}catch(i){console.error("❌ Error procesando respuestas (alternativa):",i);const o=pb(i,"procesamiento de respuestas alternativo");r==null||r(o)}},error:s=>{const i=pb(s,"suscripción alternativa a respuestas");r==null||r(i)}})},Pat=async e=>Iat(async()=>{console.log("💾 Guardando respuesta de actividad:",{actividadId:e.actividadId,estudianteId:e.estudianteId,puntaje:e.puntaje,nota:e.nota});const t={...e,fechaCompletado:ir.fromDate(new Date(e.fechaCompletado))},r=await _n(wt(ht,d7),t);return console.log("✅ Respuesta guardada exitosamente con ID:",r.id),r.id},3,"guardado de respuesta"),Rat=.6,Lat=(e,t,r=Rat,n=2)=>{if(!t||t<=0)return n.toFixed(1);const a=t*r;let s;return e>=a?s=4+3*(e-a)/(t-a+1e-9):s=1+3*e/(a+1e-9),s=Math.max(n,Math.min(7,s)),s.toFixed(1)},vP=({className:e="w-5 h-5"})=>l.jsxs("svg",{className:`animate-spin ${e}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Mat=async(e,t,r=3)=>{var i;const n="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",s=new ps(n).getGenerativeModel({model:"gemini-1.5-flash-latest"});for(let o=1;o<=r;o++)try{console.log(`🤖 Intento ${o} de generar feedback con IA`);const c=Qat(e,t);let f=(await(await s.generateContent(c)).response).text().trim();f=f.replace(/```json\s*/gi,"").replace(/```\s*$/g,"");const h=f.match(/\{[\s\S]*\}$/);try{const m=JSON.parse(h?h[0]:f);return console.log(`✅ Feedback generado exitosamente en intento ${o}`),m}catch(m){throw console.warn(`⚠️ Error al parsear JSON en intento ${o}:`,m),new Error("JSON parsing failed")}}catch(c){if(console.log(`❌ Error en intento ${o}:`,c.message),(i=c.message)!=null&&i.includes("503")&&o<r){const u=Math.pow(2,o)*1e3;console.log(`⏱️ Esperando ${u}ms antes del siguiente intento...`),await new Promise(d=>setTimeout(d,u));continue}if(o===r)return console.log("🚫 Todos los intentos fallaron. Procediendo sin IA."),null}return null},Uat=async(e,t,r)=>{console.log("💾 Iniciando guardado de respuesta...");try{const n=await Pat(e);console.log("✅ Respuesta base guardada con ID:",n);const a={id:n,...e};try{const s=await Mat(t,r);if(s){const{updateDoc:i,doc:o}=await ub(async()=>{const{updateDoc:u,doc:d}=await Promise.resolve().then(()=>Fwe);return{updateDoc:u,doc:d}},void 0),{db:c}=await ub(async()=>{const{db:u}=await Promise.resolve().then(()=>Ene);return{db:u}},void 0);return await i(o(c,"respuestas_actividades",n),{retroalimentacionAI:s}),console.log("🤖 Feedback de IA agregado exitosamente"),{...a,retroalimentacionAI:s}}return a}catch(s){return console.warn("⚠️ No se pudo generar feedback de IA, pero la respuesta fue guardada:",s),a}}catch(n){throw console.error("❌ Error crítico al guardar respuesta:",n),n}},Fo=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(n=>["comprension","analisis","argumentacion","creatividad","claridad","precision","organizacion"].includes(n))&&(console.warn(`🚨 OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},Js=(e,t)=>{if(t&&Fo(e,t),e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(a=>Js(a,`${t}-array-item`)).join(", ");const r=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const a of r)if(e[a]&&typeof e[a]=="string")return e[a];if(Object.keys(e).some(a=>["comprension","analisis","argumentacion","creatividad","claridad","precision"].includes(a)))return"[Criterios de evaluación]";try{const a=JSON.stringify(e);return a.length>100?"[Objeto complejo]":a}catch{return"[Objeto no serializable]"}}return String(e)},Jd=(e,t,...r)=>{if(Fo(e,`extractTextSafely-${t}`),!e)return"";for(const a of r)if(e[a]){const s=Js(e[a],`${t}-${a}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}const n=["texto","pregunta","enunciado","contenido","descripcion","value","label"];for(const a of n)if(e[a]){const s=Js(e[a],`${t}-${a}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}return typeof e=="string"?e:"[Sin contenido disponible]"},bi=({content:e,context:t="unknown"})=>{try{const r=Js(e,`UltraSafeRenderer-${t}`);return l.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),l.jsx("span",{children:"[Error al mostrar contenido]"})}};function CY(e){if(console.log("🔍 Normalizando lectura:",e),Fo(e,"normalizeLectura-input"),!e)return{texto:"",preguntas:[]};const t=(r,n)=>{Fo(r,`normalizeQuestion-${n}`);const a=Array.isArray(r==null?void 0:r.opciones)?r.opciones.map((s,i)=>Js(s,`opcion-${n}-${i}`)).filter(Boolean):[];return{pregunta:Jd(r,`pregunta-${n}`,"pregunta","texto"),opciones:a,respuestaCorrecta:Js(r==null?void 0:r.respuestaCorrecta,`respuestaCorrecta-${n}`),puntaje:typeof(r==null?void 0:r.puntaje)=="number"?r.puntaje:1}};if(!Array.isArray(e)&&Array.isArray(e.preguntas)){const r=e;return{texto:Jd(r,"lectura-texto","texto"),preguntas:(r.preguntas||[]).map(t)}}if(Array.isArray(e)){const r=e.map((a,s)=>Jd(a,`lectura-bloque-${s}`,"texto")).filter(Boolean).join(`

---

`),n=e.flatMap((a,s)=>(Fo(a,`lectura-bloque-preguntas-${s}`),Array.isArray(a==null?void 0:a.preguntas)?a.preguntas:[])).map(t);return{texto:r,preguntas:n}}return{texto:"",preguntas:[]}}function _Y(e){return console.log("🔍 Normalizando pareados:",e),Fo(e,"normalizePareados-input"),e?!Array.isArray(e)&&Array.isArray(e.pares)?e.pares.map((t,r)=>(Fo(t,`pareado-${r}`),{izquierda:Jd(t,`pareado-izq-${r}`,"izquierda","concepto"),derecha:Jd(t,`pareado-der-${r}`,"derecha","definicion"),puntaje:typeof(t==null?void 0:t.puntaje)=="number"?t.puntaje:1})):Array.isArray(e)?e.map((t,r)=>(Fo(t,`pareado-array-${r}`),{izquierda:Jd(t,`pareado-concepto-${r}`,"concepto","izquierda"),derecha:Jd(t,`pareado-definicion-${r}`,"definicion","derecha"),puntaje:1})):[]:[]}function SY(e){return console.log("🔍 Normalizando desarrollo:",e),Fo(e,"normalizeDesarrollo-input"),e?!Array.isArray(e)&&Array.isArray(e.preguntas)?e.preguntas.map((t,r)=>(Fo(t,`desarrollo-pregunta-${r}`),{enunciado:Jd(t,`desarrollo-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):Array.isArray(e)?e.map((t,r)=>(Fo(t,`desarrollo-array-${r}`),t!=null&&t.rubrica&&typeof t.rubrica=="object"&&console.warn(`🚨 Rubrica detectada como objeto en item ${r}, ignorando`,t.rubrica),{enunciado:Jd(t,`desarrollo-array-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):[]:[]}const Qat=(e,t)=>{const r=t.items.filter(i=>i.esCorrecta===!1),n=t.items.filter(i=>i.tipo==="Desarrollo"),a=r.map(i=>`- Pregunta: "${Js(i.pregunta,"feedback-prompt-pregunta")}"
  - Respuesta del estudiante: "${Js(i.respuestaUsuario,"feedback-prompt-respuesta")}"
  - Respuesta correcta: "${Js(i.respuestaCorrecta,"feedback-prompt-correcta")}"`).join(`
`),s=n.map(i=>`- Pregunta abierta: "${Js(i.pregunta,"feedback-prompt-desarrollo-pregunta")}"
  - Respuesta del estudiante: """${Js(i.respuestaUsuario,"feedback-prompt-desarrollo-respuesta")}"""`).join(`
`);return`
Eres tutor pedagógico. Actividad de "${Js(e.asignatura,"feedback-prompt-asignatura")}" sobre "${Js(e.contenido,"feedback-prompt-contenido")}".
Devuelve SOLO un JSON con esta forma:

{
  "logros": "1 párrafo motivador, reconociendo aciertos",
  "desafios": [
    { "pregunta": "...", "explicacionDelError": "≤50 palabras, por qué la correcta es adecuada" }
  ],
  "comentariosDesarrollo": [
    { "pregunta": "...", "retroalimentacionBreve": "≤60 palabras, concreta y constructiva. No asignes nota." }
  ]
}

ERRORES (alternativa / lectura / pareados):
${a||"- Sin errores de alternativa."}

RESPUESTAS DE DESARROLLO:
${s||"- Sin preguntas de desarrollo."}
`.trim()},Hat=({actividad:e,onComplete:t,currentUser:r})=>{const[n,a]=S.useState({}),[s,i]=S.useState(!1),o=(u,d)=>{const f={...n,[u]:d};a(f)},c=async()=>{i(!0);let u=0,d=0;const f={items:[]};e.tipos.forEach(m=>{const g=e.generatedContent[m],x=n[m];if(console.log(`🔍 Procesando tipo: ${m}`,g),Fo(g,`handleSubmit-${m}`),!!g){if((m==="Quiz"||m==="Comprensión de Lectura")&&(m==="Quiz"?Array.isArray(g)?g.map((y,w)=>(Fo(y,`quiz-question-${w}`),{pregunta:Jd(y,`quiz-pregunta-${w}`,"pregunta"),opciones:Array.isArray(y==null?void 0:y.opciones)?y.opciones.map((_,T)=>Js(_,`quiz-opcion-${w}-${T}`)):[],respuestaCorrecta:Js(y==null?void 0:y.respuestaCorrecta,`quiz-respuesta-${w}`),puntaje:typeof(y==null?void 0:y.puntaje)=="number"?y.puntaje:1})):[]:CY(g).preguntas).forEach((y,w)=>{const _=x==null?void 0:x[w],T=_===y.respuestaCorrecta,B=y.puntaje??1;T&&(u+=B),d+=B,f.items.push({pregunta:y.pregunta,respuestaUsuario:Js(_,`feedback-respuesta-${w}`)||"No respondida",respuestaCorrecta:y.respuestaCorrecta,esCorrecta:T,puntajeObtenido:T?B:0,tipo:m})}),m==="Términos Pareados"){const v=_Y(g),y=x||{};v.forEach((w,_)=>{const T=y[_],B=T===w.derecha,j=w.puntaje??1;B&&(u+=j),d+=j,f.items.push({pregunta:`${w.izquierda} → ¿?`,respuestaUsuario:Js(T,`pareado-feedback-${_}`)||"No respondida",respuestaCorrecta:w.derecha,esCorrecta:B,puntajeObtenido:B?j:0,tipo:m})})}if(m==="Desarrollo"){const v=SY(g),y=x||{};v.forEach((w,_)=>{const T=Js(y[_],`desarrollo-feedback-${_}`).trim();f.items.push({pregunta:w.enunciado,respuestaUsuario:T||"No respondida",respuestaCorrecta:"Revisión docente",esCorrecta:null,puntajeObtenido:0,tipo:m})})}}});const h={puntaje:u,puntajeMaximo:d,respuestas:n,nota:Lat(u,d),requiereRevisionDocente:e.tipos.includes("Desarrollo")};t(h,f)};return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[l.jsx("h2",{className:"text-2xl font-bold text-sky-800 mb-2",children:l.jsx(bi,{content:e.asignatura,context:"actividad-asignatura"})}),l.jsx("div",{className:"text-slate-700 whitespace-pre-wrap",children:l.jsx(bi,{content:e.introduccion,context:"actividad-introduccion"})})]}),e.tipos.map(u=>{const d=e.generatedContent[u];if(console.log(`🔍 Renderizando tipo: ${u}`,d),Fo(d,`render-${u}`),!d)return null;switch(u){case"Quiz":{const f=Array.isArray(d)?d.map((h,m)=>(Fo(h,`render-quiz-question-${m}`),{pregunta:Jd(h,`render-quiz-pregunta-${m}`,"pregunta"),opciones:Array.isArray(h==null?void 0:h.opciones)?h.opciones.map((g,x)=>Js(g,`render-quiz-opcion-${m}-${x}`)):[],respuestaCorrecta:Js(h==null?void 0:h.respuestaCorrecta,`render-quiz-respuesta-${m}`),puntaje:typeof(h==null?void 0:h.puntaje)=="number"?h.puntaje:1})):[];return l.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Quiz"}),l.jsx("div",{className:"space-y-6",children:f.map((h,m)=>l.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[l.jsxs("p",{className:"font-semibold text-slate-800",children:[m+1,". ",l.jsx(bi,{content:h.pregunta,context:`quiz-pregunta-${m}`})]}),l.jsx("div",{className:"mt-2 space-y-2",children:h.opciones.map((g,x)=>{var v;return l.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[l.jsx("input",{type:"radio",name:`q-${u}-${m}`,value:g,checked:((v=n[u])==null?void 0:v[m])===g,onChange:()=>o(u,{...n[u]||{},[m]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),l.jsx("span",{children:l.jsx(bi,{content:g,context:`quiz-opcion-${m}-${x}`})})]},x)})})]},m))})]},u)}case"Comprensión de Lectura":{const f=CY(d);return l.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Comprensión de Lectura"}),l.jsx("div",{className:"mb-6 p-4 rounded bg-slate-50 border whitespace-pre-wrap",children:l.jsx(bi,{content:f.texto,context:"lectura-texto"})}),l.jsx("div",{className:"space-y-6",children:f.preguntas.map((h,m)=>l.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[l.jsxs("p",{className:"font-semibold text-slate-800",children:[m+1,". ",l.jsx(bi,{content:h.pregunta,context:`lectura-pregunta-${m}`})]}),l.jsx("div",{className:"mt-2 space-y-2",children:h.opciones.map((g,x)=>{var v;return l.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[l.jsx("input",{type:"radio",name:`q-${u}-${m}`,value:g,checked:((v=n[u])==null?void 0:v[m])===g,onChange:()=>o(u,{...n[u]||{},[m]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),l.jsx("span",{children:l.jsx(bi,{content:g,context:`lectura-opcion-${m}-${x}`})})]},x)})})]},m))})]},u)}case"Términos Pareados":{const f=_Y(d),h=n[u]||{},m=[...new Set(f.map(g=>g.derecha))];for(let g=m.length-1;g>0;g--){const x=Math.floor(Math.random()*(g+1));[m[g],m[x]]=[m[x],m[g]]}return l.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Términos Pareados"}),l.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:f.map((g,x)=>l.jsxs("div",{className:"p-3 rounded border bg-slate-50",children:[l.jsxs("p",{className:"font-semibold text-slate-800 mb-2",children:[x+1,". ",l.jsx(bi,{content:g.izquierda,context:`pareado-izq-${x}`})]}),l.jsxs("select",{className:"w-full border rounded p-2 bg-white",value:h[x]??"",onChange:v=>o(u,{...h,[x]:v.target.value}),children:[l.jsx("option",{value:"",children:"— Selecciona la pareja —"}),m.map((v,y)=>l.jsx("option",{value:v,children:Js(v,`pareado-opcion-${x}-${y}`)},y))]})]},`${g.izquierda}-${x}`))})]},u)}case"Desarrollo":{const f=SY(d),h=n[u]||{};return l.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Preguntas de Desarrollo"}),l.jsx("div",{className:"space-y-6",children:f.map((m,g)=>l.jsxs("div",{className:"space-y-2",children:[l.jsxs("p",{className:"font-semibold text-slate-800",children:[g+1,". ",l.jsx(bi,{content:m.enunciado,context:`desarrollo-enunciado-${g}`})]}),l.jsx("textarea",{className:"w-full min-h-[120px] border rounded p-3",placeholder:"Escribe tu respuesta…",value:h[g]??"",onChange:x=>o(u,{...h,[g]:x.target.value})})]},g))}),l.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Este apartado será revisado y calificado por tu profesor/a."})]},u)}default:return null}}),l.jsx("div",{className:"text-right mt-8 flex justify-end gap-4",children:l.jsxs("button",{onClick:c,disabled:s,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:[s?l.jsx(vP,{className:"w-5 h-5 mr-2"}):null,s?"Evaluando...":"Entregar Actividad"]})})]})},Vat=({currentUser:e})=>{var I,L,D;const[t,r]=S.useState(!0),[n,a]=S.useState("list"),[s,i]=S.useState(!1),[o,c]=S.useState([]),[u,d]=S.useState([]),[f,h]=S.useState(null),[m,g]=S.useState(null),[x,v]=S.useState(null),[y,w]=S.useState("connecting");S.useEffect(()=>{console.log("🚀 Iniciando carga de datos para usuario:",e.nombreCompleto);let k=!1,P=!1,R=!1,W=!1;const V=()=>{(k||R)&&(P||W)&&(R&&W?(w("error"),v("Error al cargar datos. Verifica tu conexión e intenta nuevamente.")):w("connected"),r(!1),console.log("✅ Carga completada - Actividades:",k,"Respuestas:",P))},G=Fat(e,K=>{console.log("📋 Actividades recibidas:",K.length),K.forEach((J,te)=>{console.log(`  ${te+1}. ${J.asignatura} (ID: ${J.id})`),Fo(J,`actividad-${te}`)}),c(K),k=!0,V()},K=>{console.error("❌ Error en suscripción de actividades:",K),R=!0,V()}),z=Oat(e.id,K=>{console.log("📝 Respuestas del estudiante recibidas:",K.length),K.forEach((J,te)=>{var M;console.log(`  ${te+1}. Actividad ${J.actividadId} - Nota: ${J.nota} - Fecha: ${J.fechaCompletado}`),(M=J.revisionDocente)!=null&&M.completada&&console.log("    ✅ Con revisión docente completada"),Fo(J,`respuesta-${te}`)}),d(K),P=!0,V()},K=>{var J;console.error("❌ Error en suscripción de respuestas:",K),(J=K.message)!=null&&J.includes("requires an index")&&(console.log("⚠️ Detectado error de índice, intentando consulta alternativa..."),v("Se detectó un problema de configuración. Las actividades completadas pueden no mostrarse correctamente hasta que se resuelva.")),W=!0,V()});return()=>{console.log("🧹 Limpiando subscripciones"),G==null||G(),z==null||z()}},[e]),S.useEffect(()=>{t||console.log("🔄 ESTADO ACTUALIZADO:",{actividades:o.length,respuestas:u.length,vista:n,conexion:y})},[o.length,u.length,n,y,t]);const _=k=>{console.log("🔍 Iniciando actividad:",k.asignatura),h(k),a("activity"),v(null)},T=k=>{console.log("🔍 Viendo resultado:",k.actividadId);const P=o.find(R=>R.id===k.actividadId);P?(h(P),g(k),a("result"),v(null)):v("No se pudieron cargar los detalles de esta actividad completada.")},B=S.useCallback(async(k,P)=>{if(!f)return;console.log("🚀 COMPLETANDO ACTIVIDAD:",{actividadId:f.id,estudianteId:e.id,puntaje:k.puntaje,nota:k.nota}),a("result"),i(!0),v(null);const R={actividadId:f.id,estudianteId:e.id,fechaCompletado:new Date().toISOString(),...k,retroalimentacionDetallada:P};console.log("💾 Guardando respuesta...");try{const W=await Uat(R,f,P);console.log("✅ Respuesta completada con ID:",W.id),g(W),setTimeout(()=>{console.log("🔄 Datos sincronizados")},1500)}catch(W){console.error("❌ Error crítico al completar actividad:",W),v("Ocurrió un error al guardar tu actividad. Por favor, intenta nuevamente. Si el problema persiste, contacta a tu profesor."),g({id:"error-temp",...R,retroalimentacionAI:{logros:"Tu actividad fue completada pero hubo un problema técnico al generar el resumen.",desafios:[],comentariosDesarrollo:[]}})}finally{i(!1)}},[f,e.id]),j=S.useMemo(()=>{if(u.length===0)return new Set;const k=new Set(u.map(P=>P.actividadId));return console.log("🎯 IDs completados calculados:",k.size),k},[u]),E=S.useMemo(()=>{if(o.length===0)return[];const k=o.filter(P=>!j.has(P.id));return console.log("⏳ Actividades pendientes:",k.length),k},[o,j]),N=S.useMemo(()=>{if(u.length===0)return[];const k=u.map(P=>{const R=o.find(W=>W.id===P.actividadId);return{...P,asignatura:(R==null?void 0:R.asignatura)||"Actividad no disponible",tipos:(R==null?void 0:R.tipos)||[]}}).sort((P,R)=>new Date(R.fechaCompletado).getTime()-new Date(P.fechaCompletado).getTime());return console.log("📖 Historial preparado:",k.length),k},[u,o]);return t?l.jsxs("div",{className:"flex flex-col justify-center items-center h-64 space-y-4",children:[l.jsx(vP,{className:"w-8 h-8 text-slate-500"}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-slate-500",children:"Cargando actividades..."}),l.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Estado: ",y==="connecting"?"Conectando...":y==="connected"?"Conectado":"Error de conexión"]})]})]}):y==="error"&&o.length===0&&u.length===0?l.jsxs("div",{className:"text-center py-12 border-2 border-red-200 rounded-lg bg-red-50",children:[l.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),l.jsx("h3",{className:"text-xl font-semibold text-red-700 mb-2",children:"Error de Conexión"}),l.jsx("p",{className:"text-red-600 mb-4",children:"No se pudieron cargar las actividades."}),l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700",children:"Reintentar"})]}):n==="activity"&&f?l.jsx(Hat,{actividad:f,onComplete:B,currentUser:e}):n==="result"&&m?(console.log("🔍 Renderizando resultado:",m),l.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Resultados de la Actividad"}),l.jsxs("div",{className:"flex items-baseline gap-4 mb-6 p-4 bg-slate-50 rounded-lg border",children:[l.jsxs("p",{className:"text-lg text-slate-600",children:["Puntaje: ",l.jsxs("span",{className:"font-bold text-2xl text-slate-800",children:[m.puntaje," / ",m.puntajeMaximo]})]}),l.jsxs("p",{className:"text-lg text-slate-600",children:["Nota: ",l.jsx("span",{className:`font-bold text-2xl ${parseFloat(m.nota)>=4?"text-green-600":"text-red-600"}`,children:m.nota})]})]}),x&&l.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:l.jsxs("p",{className:"text-red-700 font-medium",children:["⚠️ ",x]})}),s&&l.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-blue-50 border border-blue-200 rounded-lg text-center mb-6",children:[l.jsx(vP,{className:"w-8 h-8 text-blue-500"}),l.jsx("p",{className:"mt-3 font-semibold text-blue-700",children:"Generando resumen personalizado..."}),l.jsx("p",{className:"mt-1 text-sm text-blue-600",children:"Esto puede tomar unos segundos"})]}),m.retroalimentacionAI&&!s&&l.jsxs("div",{className:"p-6 bg-blue-50 border border-blue-200 rounded-lg space-y-4 mb-6",children:[l.jsx("h2",{className:"text-2xl font-semibold text-blue-800",children:"Resumen de tu Desempeño 💡"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-green-700",children:"✅ Principales Logros"}),l.jsx("p",{className:"text-slate-700 mt-1",children:l.jsx(bi,{content:m.retroalimentacionAI.logros,context:"feedback-logros"})})]}),((I=m.retroalimentacionAI.desafios)==null?void 0:I.length)>0&&l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-amber-700",children:"🎯 Áreas de Mejora"}),l.jsx("div",{className:"space-y-3 mt-2",children:m.retroalimentacionAI.desafios.map((k,P)=>l.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[l.jsx("p",{className:"font-semibold text-slate-800",children:l.jsx(bi,{content:k.pregunta,context:`feedback-desafio-pregunta-${P}`})}),l.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:l.jsx(bi,{content:k.explicacionDelError,context:`feedback-desafio-explicacion-${P}`})})]},P))})]}),((D=(L=m.retroalimentacionAI)==null?void 0:L.comentariosDesarrollo)==null?void 0:D.length)>0&&l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-sky-700",children:"📝 Retroalimentación de Desarrollo"}),l.jsx("div",{className:"space-y-3 mt-2",children:m.retroalimentacionAI.comentariosDesarrollo.map((k,P)=>l.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[l.jsx("p",{className:"font-semibold text-slate-800",children:l.jsx(bi,{content:k.pregunta,context:`feedback-desarrollo-pregunta-${P}`})}),l.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:l.jsx(bi,{content:k.retroalimentacionBreve,context:`feedback-desarrollo-retro-${P}`})})]},P))})]})]}),m.retroalimentacionDetallada&&l.jsxs("div",{className:"space-y-4 mb-6",children:[l.jsx("h2",{className:"text-2xl font-semibold text-slate-700",children:"Revisión Detallada"}),m.retroalimentacionDetallada.items.map((k,P)=>{const R=k.esCorrecta===null,W=R?"border-slate-400 bg-slate-50":k.esCorrecta?"border-green-500 bg-green-50":"border-red-500 bg-red-50",V=R?"🕓":k.esCorrecta?"✅":"❌";return l.jsxs("div",{className:`p-4 border-l-4 rounded-r-lg ${W}`,children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("p",{className:"font-semibold text-slate-800 flex-1 pr-4",children:[P+1,". ",l.jsx(bi,{content:k.pregunta,context:`feedback-item-pregunta-${P}`})]}),l.jsx("span",{className:"font-bold text-lg",children:V})]}),l.jsxs("div",{className:"mt-2 text-sm pl-4",children:[l.jsxs("p",{className:"text-slate-700",children:["Tu respuesta: ",l.jsx("span",{className:"font-medium",children:l.jsx(bi,{content:k.respuestaUsuario,context:`feedback-item-respuesta-${P}`})})]}),!R&&!k.esCorrecta&&l.jsxs("p",{className:"text-slate-700",children:["Respuesta correcta: ",l.jsx("span",{className:"font-medium text-green-700",children:l.jsx(bi,{content:k.respuestaCorrecta,context:`feedback-item-correcta-${P}`})})]}),R&&l.jsx("p",{className:"text-slate-600 italic",children:"Pendiente de revisión docente."})]})]},P)})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:()=>{a("list"),h(null),g(null),v(null)},className:"flex-1 bg-slate-800 text-white font-bold py-3 rounded-lg hover:bg-slate-700 transition-colors",children:"Volver a Actividades"}),f&&l.jsx("button",{onClick:()=>{a("activity"),g(null),v(null)},className:"flex-1 bg-amber-600 text-white font-bold py-3 rounded-lg hover:bg-amber-700 transition-colors",children:"Repetir Actividad"})]})]})):l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md space-y-10",children:[x&&l.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:l.jsxs("p",{className:"text-amber-800",children:["⚠️ ",x]})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Actividades Pendientes"}),l.jsx("p",{className:"text-slate-500 mb-6",children:"Completa las actividades asignadas por tus profesores."}),l.jsx("div",{className:"space-y-4",children:E.length>0?E.map(k=>l.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 flex flex-col sm:flex-row justify-between sm:items-center gap-4 hover:bg-slate-100 transition-colors",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-bold text-slate-800",children:[l.jsx(bi,{content:k.asignatura,context:`actividad-asignatura-${k.id}`})," - ",k.tipos.join(", ")]}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",l.jsx(bi,{content:typeof k.plazoEntrega=="string"?k.plazoEntrega:"",context:`actividad-plazo-${k.id}`})]})]}),l.jsx("button",{onClick:()=>_(k),className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 w-full sm:w-auto transition-colors",children:"Comenzar"})]},k.id)):l.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[l.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),l.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"¡Todo al día!"}),l.jsx("p",{className:"text-slate-500 mt-1",children:"No tienes actividades pendientes."})]})})]}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Historial de Actividades"}),l.jsx("p",{className:"text-slate-500 mb-6",children:"Revisa tus resultados y la retroalimentación de las actividades completadas."}),l.jsx("div",{className:"space-y-4",children:N.length>0?N.map(k=>l.jsxs("div",{className:"p-4 border rounded-lg bg-white flex flex-col sm:flex-row justify-between sm:items-center gap-4 shadow-sm hover:shadow-md transition-shadow",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-bold text-slate-800",children:[l.jsx(bi,{content:k.asignatura,context:`completada-asignatura-${k.id}`})," - ",k.tipos.join(", ")]}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Completado: ",new Date(k.fechaCompletado).toLocaleDateString("es-CL")]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("p",{className:"text-sm font-semibold",children:["Nota: ",l.jsx("span",{className:`font-bold text-lg ${parseFloat(k.nota)>=4?"text-green-600":"text-red-600"}`,children:k.nota})]}),l.jsx("button",{onClick:()=>T(k),className:"bg-sky-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-sky-700 w-full sm:w-auto transition-colors",children:"Ver Resultados"})]})]},k.id)):l.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[l.jsx("div",{className:"text-6xl mb-4",children:"📚"}),l.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"Aún no hay historial"}),l.jsx("p",{className:"text-slate-500 mt-1",children:"Tus actividades completadas aparecerán aquí."})]})})]})]})},pT="estudiantes_inclusion",zat="usuarios",vfe=e=>{const t=e.data();return{id:e.id,...t}},$at=e=>{const t=$t(wt(ht,pT));return pr(t,n=>{const a=n.docs.map(s=>vfe(s));e(a)},n=>{console.error("Error al suscribirse a estudiantes de inclusión:",n),e([])})},Gat=e=>{const t=$t(wt(ht,zat));return pr(t,n=>{const a=n.docs.map(s=>vfe(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},Kat=async e=>{try{return(await _n(wt(ht,pT),e)).id}catch(t){throw console.error("Error al agregar estudiante a inclusión:",t),new Error("No se pudo agregar al estudiante.")}},qat=async(e,t)=>{try{const{id:r,...n}=t,a=cr(ht,pT,e);await Mi(a,n)}catch(r){throw console.error("Error al actualizar estudiante de inclusión:",r),new Error("No se pudo actualizar la ficha del estudiante.")}},Wat=async e=>{try{const t=cr(ht,pT,e);await is(t)}catch(t){throw console.error("Error al eliminar estudiante de inclusión:",t),new Error("No se pudo eliminar al estudiante.")}},Xat=({estudiantes:e})=>{const t=S.useMemo(()=>{const o=e.reduce((c,u)=>(c[u.curso]=(c[u.curso]||0)+1,c),{});return Object.entries(o).map(([c,u])=>({curso:c,cantidad:u})).sort((c,u)=>c.curso.localeCompare(u.curso))},[e]),r=S.useMemo(()=>{const o=e.reduce((c,u)=>{var f;const d=((f=u.curso.match(/\d+/))==null?void 0:f[0])||"Sin nivel";return c[d]=(c[d]||0)+1,c},{});return Object.entries(o).map(([c,u])=>({nivel:c,cantidad:u})).sort((c,u)=>c.nivel==="Sin nivel"?1:u.nivel==="Sin nivel"?-1:parseInt(c.nivel)-parseInt(u.nivel))},[e]),n=S.useMemo(()=>{const o=e.reduce((c,u)=>(c[u.dificultad]=(c[u.dificultad]||0)+1,c),{});return Object.entries(o).map(([c,u])=>({diagnostico:c,cantidad:u})).sort((c,u)=>u.cantidad-c.cantidad)},[e]),a=S.useMemo(()=>{const o=e.reduce((u,d)=>{var f;return u+(((f=d.intervenciones)==null?void 0:f.length)||0)},0),c=e.length>0?(o/e.length).toFixed(1):"0";return{total:o,promedio:c}},[e]),s=S.useMemo(()=>e.reduce((o,c)=>o+(c.alertas||[]).filter(u=>!u.resuelta).length,0),[e]),i=Math.max(0,...t.map(o=>o.cantidad),...r.map(o=>o.cantidad),...n.map(o=>o.cantidad));return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Dashboard PIE"}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.length}),l.jsx("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:"Total Estudiantes"})]}),l.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:a.total}),l.jsx("div",{className:"text-sm text-green-800 dark:text-green-300",children:"Intervenciones"})]}),l.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:s}),l.jsx("div",{className:"text-sm text-yellow-800 dark:text-yellow-300",children:"Alertas Pendientes"})]}),l.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:a.promedio}),l.jsx("div",{className:"text-sm text-purple-800 dark:text-purple-300",children:"Promedio Intervenciones"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Curso"}),l.jsx("div",{className:"space-y-2",children:t.map(({curso:o,cantidad:c})=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:o}),l.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:l.jsx("div",{className:"bg-blue-500 h-full transition-all duration-500",style:{width:`${i?c/i*100:0}%`}})}),l.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},o))})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Nivel"}),l.jsx("div",{className:"space-y-2",children:r.map(({nivel:o,cantidad:c})=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:[o,"°"]}),l.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:l.jsx("div",{className:"bg-green-500 h-full transition-all duration-500",style:{width:`${i?c/i*100:0}%`}})}),l.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},o))})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Diagnóstico"}),l.jsx("div",{className:"space-y-2",children:n.map(({diagnostico:o,cantidad:c})=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-16 text-right truncate",title:o,children:o}),l.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:l.jsx("div",{className:"bg-purple-500 h-full transition-all duration-500",style:{width:`${i?c/i*100:0}%`}})}),l.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},o))})]})]})]})},NY=({estudiantesDisponibles:e,onSelect:t})=>{const[r,n]=S.useState(""),[a,s]=S.useState(""),[i,o]=S.useState(!1),c=S.useMemo(()=>e.filter(f=>{const h=f.nombreCompleto.toLowerCase().includes(r.toLowerCase()),m=a===""||f.curso===a;return h&&m}).sort((f,h)=>f.nombreCompleto.localeCompare(h.nombreCompleto)),[e,r,a]),u=S.useMemo(()=>[...new Set(e.map(h=>h.curso).filter(Boolean))].sort(),[e]),d=f=>{t(f),n(""),s(""),o(!1)};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante al PIE"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Buscar por nombre"}),l.jsx("input",{type:"text",placeholder:"Escriba el nombre del estudiante...",value:r,onChange:f=>{n(f.target.value),o(f.target.value.length>0||a!=="")},onFocus:()=>o(r.length>0||a!==""),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Filtrar por curso"}),l.jsxs("select",{value:a,onChange:f=>{s(f.target.value),o(r.length>0||f.target.value!=="")},className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todos los cursos"}),u.map(f=>l.jsx("option",{value:f,children:f},f))]})]})]}),l.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[l.jsxs("span",{children:["Estudiantes disponibles: ",e.length]}),l.jsxs("span",{children:["Resultados filtrados: ",c.length]})]}),l.jsx("button",{onClick:()=>o(!i),className:"w-full bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200 py-2 px-4 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:i?"Ocultar resultados":`Ver ${c.length} estudiantes disponibles`}),i&&l.jsx("div",{className:"border dark:border-slate-600 rounded-lg max-h-80 overflow-y-auto",children:c.length===0?l.jsx("div",{className:"p-4 text-center text-slate-500 dark:text-slate-400",children:r||a?"No se encontraron estudiantes con los criterios de búsqueda.":"No hay estudiantes disponibles."}):l.jsx("div",{className:"divide-y dark:divide-slate-600",children:c.map(f=>l.jsx("div",{className:"p-3 hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>d(f),children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:f.nombreCompleto}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:f.curso})]}),l.jsx("button",{className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 text-xl",children:"➕"})]})},f.id))})}),r&&c.length===1&&l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[l.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mb-2",children:"💡 ¡Solo hay un resultado! Haga clic para agregarlo directamente:"}),l.jsxs("button",{onClick:()=>d(c[0]),className:"text-sm bg-blue-500 text-white px-3 py-1.5 rounded-md hover:bg-blue-600 transition-colors",children:["Agregar a ",c[0].nombreCompleto]})]})]})]})},Yat=({student:e,onClose:t,onConfirm:r})=>{const[n,a]=S.useState(_N[0]),s=()=>r(e,n);return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:i=>i.stopPropagation(),children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",e.nombreCompleto," al PIE"]}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),l.jsx("select",{id:"dificultad",value:n,onChange:i=>a(i.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:_N.map(i=>l.jsx("option",{value:i,children:i},i))})]}),l.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),l.jsx("button",{type:"button",onClick:s,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Confirmar e Ingresar"})]})]})})},Jat=({student:e,onClose:t,onSave:r,profesores:n,getDocenteEmail:a})=>{const[s,i]=S.useState("intervenciones"),[o,c]=S.useState(e);S.useEffect(()=>c(e),[e]);const[u,d]=S.useState(null),f={responsable:"",accion:"",observaciones:""},[h,m]=S.useState(f),[g,x]=S.useState({trimestre:"T1",meta:""}),[v,y]=S.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[w,_]=S.useState(null),[T,B]=S.useState(!1),j={motivo:"",acuerdos:"",asistentes:""},[E,N]=S.useState(j),I=()=>{r(o),t()},L=async()=>{var Se;if(!h.responsable||!h.accion){alert("Responsable y Acción son campos obligatorios.");return}let ne,_e=!1;u?ne=(o.intervenciones||[]).map(me=>me.id===u.id?{...me,...h}:me):(_e=!0,ne=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...h},...o.intervenciones||[]]);const Ie=ne.sort((me,Be)=>new Date(Be.fecha).getTime()-new Date(me.fecha).getTime());if(c(me=>({...me,intervenciones:Ie})),_e)try{await a5e({docenteNombre:h.responsable,docenteEmail:a?a(h.responsable):void 0,docenteEmailLower:(Se=a?a(h.responsable):void 0)==null?void 0:Se.toLowerCase(),tipo:"nueva_intervencion",titulo:"📋 Nueva Intervención Asignada",mensaje:`Se te ha asignado una nueva intervención para el estudiante ${o.nombre}. Acción: ${h.accion}`,estudianteNombre:o.nombre,estudianteId:o.id,accionRequerida:h.accion}),alert(`✅ Intervención registrada y notificación enviada a ${h.responsable}`)}catch(me){console.error("Error al crear notificación:",me),alert("⚠️ Intervención guardada, pero no se pudo enviar la notificación al docente.")}m(f),d(null)},D=ne=>{d(ne),m({responsable:ne.responsable,accion:ne.accion,observaciones:ne.observaciones})},k=ne=>{window.confirm("¿Eliminar esta intervención?")&&c(_e=>({..._e,intervenciones:(_e.intervenciones||[]).filter(Ie=>Ie.id!==ne)}))},P=ne=>{const{name:_e,value:Ie}=ne.target;c(Se=>({...Se,[_e]:Ie,fechaActualizacionApoyos:new Date().toISOString()}))},R=()=>{if(!g.meta.trim())return;const ne={...g,id:crypto.randomUUID(),cumplida:!1};c(_e=>({..._e,metasProgreso:[..._e.metasProgreso||[],ne]})),x({trimestre:"T1",meta:""})},W=ne=>{c(_e=>({..._e,metasProgreso:(_e.metasProgreso||[]).map(Ie=>Ie.id===ne?{...Ie,cumplida:!Ie.cumplida}:Ie)}))},V=ne=>{c(_e=>({..._e,metasProgreso:(_e.metasProgreso||[]).filter(Ie=>Ie.id!==ne)}))},G=S.useMemo(()=>{const ne=o.metasProgreso||[];if(ne.length===0)return{percent:0,color:"bg-slate-300"};const _e=ne.filter(me=>me.cumplida).length,Ie=Math.round(_e/ne.length*100),Se=Ie<40?"bg-red-500":Ie<75?"bg-yellow-500":"bg-green-500";return{percent:Ie,color:Se}},[o.metasProgreso]),z=S.useMemo(()=>{if(!o.fechaActualizacionApoyos)return!0;const ne=new Date(o.fechaActualizacionApoyos),_e=new Date;return _e.setMonth(_e.getMonth()-3),ne<_e},[o.fechaActualizacionApoyos]),K=()=>{if(!v.titulo.trim()||!v.fecha)return;const ne={...v,id:crypto.randomUUID(),resuelta:!1};c(_e=>({..._e,alertas:[..._e.alertas||[],ne].sort((Ie,Se)=>new Date(Ie.fecha).getTime()-new Date(Se.fecha).getTime())})),y({titulo:"",fecha:new Date().toISOString()})},J=ne=>{c(_e=>({..._e,alertas:(_e.alertas||[]).map(Ie=>Ie.id===ne?{...Ie,resuelta:!Ie.resuelta}:Ie)}))},te=ne=>{c(_e=>({..._e,alertas:(_e.alertas||[]).filter(Ie=>Ie.id!==ne)}))},M=ne=>{ne.target.files&&ne.target.files[0]&&_(ne.target.files[0])},H=()=>{if(!w)return;B(!0);const ne=new FileReader;ne.readAsDataURL(w),ne.onloadend=()=>{const _e={id:crypto.randomUUID(),nombre:w.name,url:ne.result,fechaSubida:new Date().toISOString()};c(Ie=>({...Ie,archivos:[_e,...Ie.archivos||[]]})),_(null),B(!1)},ne.onerror=()=>{alert("Error al leer el archivo."),B(!1)}},Y=ne=>{window.confirm("¿Eliminar este archivo?")&&c(_e=>({..._e,archivos:(_e.archivos||[]).filter(Ie=>Ie.id!==ne)}))},Z=()=>{if(!E.motivo.trim()||!E.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const ne={...E,id:crypto.randomUUID(),fecha:new Date().toISOString()};c(_e=>({..._e,reuniones:[ne,..._e.reuniones||[]].sort((Ie,Se)=>new Date(Se.fecha).getTime()-new Date(Ie.fecha).getTime())})),N(j)},ae=ne=>{window.confirm("¿Eliminar este registro de reunión?")&&c(_e=>({..._e,reuniones:(_e.reuniones||[]).filter(Ie=>Ie.id!==ne)}))},le=()=>{var be,Oe,Pe;const ne=new br("p","mm","a4"),_e=20,Ie=ne.internal.pageSize.getWidth(),Se=ne.internal.pageSize.getHeight();let me=_e;const Be=qe=>{qe.setFontSize(10),qe.setTextColor(100),qe.text("Ficha de Seguimiento - Módulo Inclusión",_e,15)};Be(ne),ne.setFontSize(18),ne.setFont("helvetica","bold"),ne.setTextColor(40),ne.text(o.nombre,_e,me+10),me+=15,ne.setFontSize(11),ne.setFont("helvetica","normal"),ne.setTextColor(80),ne.text(`Curso: ${o.curso}`,_e,me),ne.text(`Dificultad: ${o.dificultad}`,_e,me+6),me+=15;const Le=qe=>{me+qe>Se-_e&&(ne.addPage(),Be(ne),me=_e)},We=qe=>{Le(15),ne.setFontSize(14),ne.setFont("helvetica","bold"),ne.text(qe,_e,me),me+=10};if((be=o.intervenciones)!=null&&be.length&&(We("Historial de Intervenciones"),Io(ne,{startY:me,head:[["Fecha","Responsable","Acción","Observaciones"]],body:o.intervenciones.map(qe=>[new Date(qe.fecha).toLocaleDateString("es-CL"),qe.responsable,qe.accion,qe.observaciones||""]),theme:"grid",didDrawPage:()=>Be(ne)}),me=ne.lastAutoTable.finalY+10),o.adaptacionesCurriculares||o.apoyosRecibidos){Le(30),We("Seguimiento y Apoyos"),ne.setFontSize(11),ne.setFont("helvetica","normal");const qe=`Adaptaciones: ${o.adaptacionesCurriculares||"No registradas."}
Apoyos: ${o.apoyosRecibidos||"No registrados."}`,et=ne.splitTextToSize(qe,Ie-_e*2);ne.text(et,_e,me),me+=et.length*5+10}(Oe=o.metasProgreso)!=null&&Oe.length&&(Le(30),We("Metas de Progreso"),Io(ne,{startY:me,head:[["Trimestre","Meta","Estado"]],body:o.metasProgreso.map(qe=>[qe.trimestre,qe.meta,qe.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:()=>Be(ne)}),me=ne.lastAutoTable.finalY+10),(Pe=o.reuniones)!=null&&Pe.length&&(We("Reuniones con Apoderados"),Io(ne,{startY:me,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:o.reuniones.map(qe=>[new Date(qe.fecha).toLocaleDateString("es-CL"),qe.motivo,qe.acuerdos||"",qe.asistentes]),theme:"grid",didDrawPage:()=>Be(ne)})),ne.save(`Ficha_Inclusion_${o.nombre.replace(/\s/g,"_")}.pdf`)},ie=()=>l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:u?"Editando Intervención":"Registrar Nueva Intervención"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Responsable ",!u&&"(Se enviará notificación automática)"]}),l.jsxs("select",{value:h.responsable,onChange:ne=>m(_e=>({..._e,responsable:ne.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione Responsable..."}),n.map(ne=>l.jsx("option",{value:ne,children:ne},ne))]}),h.responsable&&!u&&l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-sm text-blue-800 dark:text-blue-200",children:["🔔 Se enviará una notificación a ",h.responsable," cuando se guarde la intervención"]})]}),l.jsx("textarea",{value:h.accion,onChange:ne=>m(_e=>({..._e,accion:ne.target.value})),placeholder:"Acción realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("textarea",{value:h.observaciones,onChange:ne=>m(_e=>({..._e,observaciones:ne.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsxs("div",{className:"flex justify-end gap-2",children:[u&&l.jsx("button",{onClick:()=>{d(null),m(f)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar Edición"}),l.jsx("button",{onClick:L,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!h.responsable||!h.accion,children:u?"Actualizar":"Guardar y Notificar"})]})]}),l.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(o.intervenciones||[]).map(ne=>l.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:ne.accion}),ne.observaciones&&l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:ne.observaciones}),l.jsxs("div",{className:"flex items-center justify-between mt-2",children:[l.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[new Date(ne.fecha).toLocaleString("es-CL")," - ",ne.responsable]}),l.jsx("span",{className:"text-xs bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300 px-2 py-1 rounded-full",children:"✓ Notificado"})]})]}),l.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[l.jsx("button",{onClick:()=>D(ne),className:"text-blue-500 hover:text-blue-700 p-1 rounded transition-colors",title:"Editar intervención",children:"✏️"}),l.jsx("button",{onClick:()=>k(ne.id),className:"text-red-500 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar intervención",children:"🗑️"})]})]})},ne.id)),(!o.intervenciones||o.intervenciones.length===0)&&l.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-4xl mb-2",children:"📋"}),l.jsx("p",{children:"No hay intervenciones registradas"}),l.jsx("p",{className:"text-sm",children:"Registra la primera intervención arriba"})]})]})]}),ce=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),z&&l.jsx("span",{title:"Información no actualizada en los últimos 3 meses",className:"text-yellow-500 text-xl cursor-help",children:"⚠️"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),l.jsx("textarea",{name:"adaptacionesCurriculares",value:o.adaptacionesCurriculares||"",onChange:P,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe las adaptaciones curriculares implementadas..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),l.jsx("textarea",{name:"apoyosRecibidos",value:o.apoyosRecibidos||"",onChange:P,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe los apoyos que recibe el estudiante..."})]})]}),l.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",G.percent,"%"]}),l.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:l.jsx("div",{className:`${G.color} h-4 rounded-full transition-all duration-500`,style:{width:`${G.percent}%`}})})]}),l.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[l.jsxs("select",{value:g.trimestre,onChange:ne=>x(_e=>({..._e,trimestre:ne.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"T1",children:"T1"}),l.jsx("option",{value:"T2",children:"T2"}),l.jsx("option",{value:"T3",children:"T3"})]}),l.jsx("input",{value:g.meta,onChange:ne=>x(_e=>({..._e,meta:ne.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:R,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",disabled:!g.meta.trim(),children:"Agregar"})]}),l.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[(o.metasProgreso||[]).map(ne=>l.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[l.jsx("input",{type:"checkbox",checked:ne.cumplida,onChange:()=>W(ne.id),className:"h-5 w-5 rounded text-amber-500"}),l.jsxs("span",{className:`flex-grow text-sm ${ne.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[l.jsxs("strong",{children:[ne.trimestre,":"]})," ",ne.meta]}),l.jsx("button",{onClick:()=>V(ne.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar meta",children:"🗑️"})]},ne.id)),(!o.metasProgreso||o.metasProgreso.length===0)&&l.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-3xl mb-2",children:"🎯"}),l.jsx("p",{children:"No hay metas definidas"}),l.jsx("p",{className:"text-sm",children:"Agrega la primera meta trimestral"})]})]})]})]}),Ae=()=>l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),l.jsx("input",{type:"text",value:v.titulo,onChange:ne=>y(_e=>({..._e,titulo:ne.target.value})),placeholder:"Título de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),l.jsx("input",{type:"date",value:new Date(v.fecha).toISOString().slice(0,10),onChange:ne=>y(_e=>({..._e,fecha:ne.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),l.jsx("button",{onClick:K,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md hover:bg-amber-600 transition-colors",disabled:!v.titulo.trim()||!v.fecha,children:"Agendar"})]}),l.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(o.alertas||[]).map(ne=>l.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[l.jsx("input",{type:"checkbox",checked:ne.resuelta,onChange:()=>J(ne.id),className:"h-5 w-5 rounded text-amber-500"}),l.jsxs("span",{className:`flex-grow text-sm ${ne.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[ne.titulo," (",new Date(ne.fecha+"T12:00:00").toLocaleDateString("es-CL"),")"]}),l.jsx("button",{onClick:()=>te(ne.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar alerta",children:"🗑️"})]},ne.id)),(!o.alertas||o.alertas.length===0)&&l.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-3xl mb-2",children:"🔔"}),l.jsx("p",{children:"No hay alertas programadas"})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),l.jsx("input",{type:"file",onChange:M,className:"w-full text-sm",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.txt"}),l.jsx("button",{onClick:H,disabled:!w||T,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400 hover:bg-blue-600 transition-colors",children:T?"Subiendo...":"Subir"}),w&&l.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:["Archivo seleccionado: ",w.name]})]}),l.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(o.archivos||[]).map(ne=>l.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[l.jsxs("a",{href:ne.url,download:ne.nombre,className:"text-sm text-blue-600 hover:underline truncate flex-grow",title:ne.nombre,children:["📎 ",ne.nombre]}),l.jsx("button",{onClick:()=>Y(ne.id),className:"text-red-500 text-sm ml-2 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar archivo",children:"🗑️"})]},ne.id)),(!o.archivos||o.archivos.length===0)&&l.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-3xl mb-2",children:"📁"}),l.jsx("p",{children:"No hay archivos adjuntos"})]})]})]})]}),Fe=()=>l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunión"}),l.jsx("input",{value:E.motivo,onChange:ne=>N(_e=>({..._e,motivo:ne.target.value})),placeholder:"Motivo de la reunión...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("textarea",{value:E.acuerdos,onChange:ne=>N(_e=>({..._e,acuerdos:ne.target.value})),placeholder:"Acuerdos tomados en la reunión...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("input",{value:E.asistentes,onChange:ne=>N(_e=>({..._e,asistentes:ne.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("div",{className:"text-right",children:l.jsx("button",{onClick:Z,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!E.motivo.trim()||!E.asistentes.trim(),children:"Guardar Reunión"})})]}),l.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(o.reuniones||[]).map(ne=>l.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:ne.motivo}),ne.acuerdos&&l.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:[l.jsx("strong",{children:"Acuerdos:"})," ",ne.acuerdos]}),l.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(ne.fecha).toLocaleString("es-CL")," - Asistentes: ",ne.asistentes]})]}),l.jsx("button",{onClick:()=>ae(ne.id),className:"text-red-500 flex-shrink-0 ml-4 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar reunión",children:"🗑️"})]})},ne.id)),(!o.reuniones||o.reuniones.length===0)&&l.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-4xl mb-2",children:"👥"}),l.jsx("p",{children:"No hay reuniones registradas"}),l.jsx("p",{className:"text-sm",children:"Registra la primera reunión con apoderados"})]})]})]});return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:ne=>ne.stopPropagation(),children:[l.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",e.nombre]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.curso," - ",e.dificultad]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:le,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200 transition-colors",children:"📄 Exportar PDF"}),l.jsx("button",{onClick:t,className:"text-2xl text-slate-500 hover:text-slate-800 dark:hover:text-slate-200 transition-colors",children:"×"})]})]}),l.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:l.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(ne=>l.jsx("button",{onClick:()=>i(ne),className:`${s===ne?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize transition-colors`,children:ne==="alertas"?"Alertas y Archivos":ne==="seguimiento"?"Seguimiento y Metas":ne},ne))})}),l.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[s==="intervenciones"&&ie(),s==="seguimiento"&&ce(),s==="reuniones"&&Fe(),s==="alertas"&&Ae()]}),l.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[l.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors",children:"Cerrar"}),l.jsx("button",{onClick:I,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Guardar Cambios y Cerrar"})]})]})})},kY=({currentUser:e})=>{const[t,r]=S.useState([]),[n,a]=S.useState([]),[s,i]=S.useState(!0),[o,c]=S.useState(null),[u,d]=S.useState(null),[f,h]=S.useState(""),[m,g]=S.useState(""),[x,v]=S.useState(""),[y,w]=S.useState("dashboard");S.useEffect(()=>{i(!0);const L=$at(k=>{r(k),i(!1)}),D=Gat(k=>a(k));return()=>{L(),D()}},[]);const _=async(L,D)=>{if(t.some(P=>P.nombre===L.nombreCompleto)){alert("Este estudiante ya está en el programa de inclusión.");return}const k={nombre:L.nombreCompleto,curso:L.curso||"",dificultad:D,intervenciones:[],metasProgreso:[],alertas:[],archivos:[],reuniones:[],adaptacionesCurriculares:"",apoyosRecibidos:"",fechaActualizacionApoyos:new Date().toISOString()};try{await Kat(k),alert(`✅ ${L.nombreCompleto} ha sido agregado exitosamente al programa PIE`)}catch(P){console.error("Error al agregar estudiante:",P),alert("Hubo un error al agregar al estudiante al programa.")}},T=async L=>{try{await qat(L.id,L)}catch(D){console.error("Error al actualizar la ficha:",D),alert("Hubo un error al guardar los cambios en la ficha.")}},B=async L=>{if(window.confirm("¿Está seguro de que desea eliminar a este estudiante del programa de inclusión? Esta acción es irreversible."))try{await Wat(L),(o==null?void 0:o.id)===L&&c(null),alert("✅ Estudiante eliminado del programa PIE")}catch(D){console.error("Error al eliminar estudiante:",D),alert("Hubo un error al eliminar al estudiante.")}},j=L=>{const D=N;if(D.length===0){alert("No hay datos para exportar.");return}const k=D.map(P=>{var R;return{Nombre:P.nombre,Curso:P.curso,Dificultad:P.dificultad,"N° Intervenciones":((R=P.intervenciones)==null?void 0:R.length)||0,"Alertas Pendientes":(P.alertas||[]).filter(W=>!W.resuelta).length,"Metas Cumplidas":(P.metasProgreso||[]).filter(W=>W.cumplida).length,"Total Metas":(P.metasProgreso||[]).length,"Última Actualización":P.fechaActualizacionApoyos?new Date(P.fechaActualizacionApoyos).toLocaleDateString("es-CL"):"No registrada"}});if(L==="xlsx"){const P=Ol.json_to_sheet(k),R=Ol.book_new();Ol.book_append_sheet(R,P,"Estudiantes_Inclusion"),mT(R,"Estudiantes_Inclusion.xlsx"),alert("✅ Archivo Excel exportado exitosamente")}else{const P=new br;P.text("Listado de Estudiantes - Programa de Inclusión",14,15),Io(P,{startY:20,head:[Object.keys(k[0])],body:k.map(Object.values)}),P.save("Estudiantes_Inclusion.pdf"),alert("✅ Archivo PDF exportado exitosamente")}},E=S.useMemo(()=>n.filter(L=>{var D;return L.profile===Jt.ESTUDIANTE&&(((D=e.cursos)==null?void 0:D.includes(L.curso||""))||e.profile===Jt.SUBDIRECCION)}).filter(L=>!t.some(D=>D.nombre===L.nombreCompleto)),[n,t,e]),N=S.useMemo(()=>t.filter(L=>L.nombre.toLowerCase().includes(f.toLowerCase())&&(m===""||L.curso===m)&&(x===""||L.dificultad===x)).sort((L,D)=>L.nombre.localeCompare(D.nombre)),[t,f,m,x]),I=S.useMemo(()=>n.filter(L=>L.profile===Jt.PROFESORADO).map(L=>L.nombreCompleto).sort(),[n]);return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusión Escolar (PIE)"}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>w("dashboard"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="dashboard"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:"📊 Dashboard"}),l.jsx("button",{onClick:()=>w("lista"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="lista"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:"📋 Lista de Estudiantes"})]})]}),s?l.jsxs("div",{className:"text-center py-10",children:[l.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-500"}),l.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Cargando datos del programa..."})]}):l.jsxs(l.Fragment,{children:[y==="dashboard"&&l.jsxs("div",{className:"space-y-8",children:[l.jsx(Xat,{estudiantes:t}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes Recientes (",Math.min(5,t.length),")"]}),l.jsx("button",{onClick:()=>w("lista"),className:"text-sm text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Ver todos →"})]}),l.jsxs("div",{className:"space-y-3",children:[t.slice(0,5).map(L=>l.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center hover:shadow-sm transition-shadow",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:L.nombre}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[L.curso," - ",L.dificultad]})]}),l.jsx("button",{onClick:()=>c(L),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm transition-colors",children:"Ver Ficha"})]},L.id)),t.length===0&&l.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-6xl mb-4",children:"📚"}),l.jsx("p",{className:"text-lg font-medium mb-2",children:"No hay estudiantes en el programa PIE"}),l.jsx("p",{className:"text-sm",children:"Comienza agregando estudiantes desde la nómina"})]})]})]}),l.jsx(NY,{estudiantesDisponibles:E,onSelect:L=>d(L)})]})]}),y==="lista"&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes en PIE (",N.length,")"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>j("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg hover:bg-green-200 transition-colors",children:"📊 Excel"}),l.jsx("button",{onClick:()=>j("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg hover:bg-red-200 transition-colors",children:"📄 PDF"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Buscar estudiante"}),l.jsx("input",{type:"text",placeholder:"Nombre del estudiante...",value:f,onChange:L=>h(L.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por curso"}),l.jsxs("select",{value:m,onChange:L=>g(L.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todos los Cursos"}),Ac.map(L=>l.jsx("option",{value:L,children:L},L))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por diagnóstico"}),l.jsxs("select",{value:x,onChange:L=>v(L.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todas las Dificultades"}),_N.map(L=>l.jsx("option",{value:L,children:L},L))]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4 text-xs",children:[l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-center",children:[l.jsx("div",{className:"font-bold text-blue-600",children:N.length}),l.jsx("div",{className:"text-blue-800 dark:text-blue-300",children:"Mostrando"})]}),l.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-2 rounded text-center",children:[l.jsx("div",{className:"font-bold text-green-600",children:t.length}),l.jsx("div",{className:"text-green-800 dark:text-green-300",children:"Total"})]}),l.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded text-center",children:[l.jsx("div",{className:"font-bold text-yellow-600",children:t.reduce((L,D)=>L+(D.alertas||[]).filter(k=>!k.resuelta).length,0)}),l.jsx("div",{className:"text-yellow-800 dark:text-yellow-300",children:"Alertas"})]}),l.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-2 rounded text-center",children:[l.jsx("div",{className:"font-bold text-purple-600",children:new Set(t.map(L=>L.curso)).size}),l.jsx("div",{className:"text-purple-800 dark:text-purple-300",children:"Cursos"})]})]}),l.jsxs("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:[N.map(L=>{var D;return l.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 hover:shadow-md transition-shadow",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:L.nombre}),(L.alertas||[]).filter(k=>!k.resuelta).length>0&&l.jsxs("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full",children:[(L.alertas||[]).filter(k=>!k.resuelta).length," alertas"]})]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:[L.curso," - ",L.dificultad]}),l.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-600 dark:text-slate-300",children:[l.jsxs("span",{children:[((D=L.intervenciones)==null?void 0:D.length)||0," intervenciones"]}),l.jsxs("span",{children:[(L.metasProgreso||[]).filter(k=>k.cumplida).length," metas cumplidas"]}),L.fechaActualizacionApoyos&&l.jsxs("span",{children:["Últ. actualización: ",new Date(L.fechaActualizacionApoyos).toLocaleDateString("es-CL")]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[l.jsx("button",{onClick:()=>c(L),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm px-3 py-1 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:"Ver Ficha"}),l.jsx("button",{onClick:()=>B(L.id),title:"Eliminar del programa",className:"text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors",children:"🗑️"})]})]})},L.id)}),N.length===0&&l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),l.jsx("p",{className:"text-lg font-medium text-slate-600 dark:text-slate-400 mb-2",children:f||m||x?"No se encontraron estudiantes con esos criterios":"No hay estudiantes en el programa PIE"}),(f||m||x)&&l.jsx("button",{onClick:()=>{h(""),g(""),v("")},className:"text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Limpiar filtros"})]})]})]}),l.jsx(NY,{estudiantesDisponibles:E,onSelect:L=>d(L)})]})]}),u&&l.jsx(Yat,{student:u,onClose:()=>d(null),onConfirm:(L,D)=>{_(L,D),d(null)}}),o&&l.jsx(Jat,{student:o,onClose:()=>c(null),onSave:T,profesores:I})]})},bfe="asistencia_dual",Zat=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaHora:((n=(r=t.fechaHora)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaHora}},est=(e,t)=>{const r=$t(wt(ht,bfe),Qr("emailEstudiante","==",e),xr("fechaHora","desc"));return pr(r,a=>{const s=a.docs.map(i=>Zat(i));t(s)},a=>{console.error("Error subscribing to personal attendance:",a),t([])})},tst=async e=>{try{const t={...e,fechaHora:ir.fromDate(new Date(e.fechaHora))};await _n(wt(ht,bfe),t)}catch(t){throw console.error("Error adding attendance record:",t),new Error("Could not save the attendance record.")}},rst=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),nst=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm-3.707-4.293a1 1 0 001.414 1.414L10 12.414l2.293 2.293a1 1 0 001.414-1.414L11.414 11l2.293-2.293a1 1 0 00-1.414-1.414L10 9.586 7.707 7.293a1 1 0 00-1.414 1.414L8.586 11 6.293 13.293a1 1 0 000 1.414z",clipRule:"evenodd"})}),ast=({currentUser:e})=>{const[t,r]=S.useState(e.curso||""),[n,a]=S.useState([]),[s,i]=S.useState(!1),[o,c]=S.useState(!0),[u,d]=S.useState(null);S.useEffect(()=>{if(!e.email){c(!1);return}c(!0);const h=est(e.email,m=>{a(m),c(!1)});return()=>h()},[e.email]);const f=h=>{if(!t){d({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}i(!0),d(null),navigator.geolocation.getCurrentPosition(async m=>{const g={nombreEstudiante:e.nombreCompleto,emailEstudiante:e.email,curso:t,tipo:h,fechaHora:new Date().toISOString(),ubicacion:{latitud:m.coords.latitude,longitud:m.coords.longitude}};try{await tst(g),d({text:`¡Marca de ${h} registrada con éxito!`,type:"success"})}catch(x){console.error("Error saving record to Firestore:",x),d({text:"No se pudo guardar el registro en la nube.",type:"error"})}finally{i(!1)}},m=>{console.error("Geolocation error:",m);let g="No se pudo obtener la ubicación.";switch(m.code){case m.PERMISSION_DENIED:g="Permiso de ubicación denegado. Por favor, habilite la ubicación en su navegador y dispositivo.";break;case m.POSITION_UNAVAILABLE:g="La información de ubicación no está disponible en este momento. Verifique su conexión y GPS.";break;case m.TIMEOUT:g="La solicitud de ubicación ha tardado demasiado. Inténtelo de nuevo en un lugar con mejor señal.";break;default:g=`Ocurrió un error desconocido al obtener la ubicación (código: ${m.code}).`;break}d({text:g,type:"error"}),i(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Asistencia a Empresa"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Registre su entrada y salida de la empresa de práctica."}),l.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione su curso"}),l.jsxs("select",{id:"curso",value:t,onChange:h=>r(h.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2 dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"-- Mi curso --"}),kg.map(h=>l.jsx("option",{value:h,children:h},h))]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[l.jsx("button",{onClick:()=>f("Entrada"),disabled:s||!t,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),l.jsx("button",{onClick:()=>f("Salida"),disabled:s||!t,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),s&&l.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-400 pt-4 flex items-center justify-center gap-2",children:[l.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l.jsx("span",{children:"Obteniendo ubicación..."})]}),u&&l.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${u.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.text})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Mi Historial de Asistencia"}),l.jsx("div",{className:"overflow-x-auto max-h-96",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha y Hora"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tipo"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o?l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"Cargando historial..."})}):n.length>0?n.map(h=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(h.fechaHora).toLocaleString("es-CL")}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:l.jsxs("span",{className:`px-3 py-1 inline-flex items-center gap-1.5 text-xs leading-5 font-semibold rounded-full ${h.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[h.tipo==="Entrada"?l.jsx(rst,{}):l.jsx(nst,{}),h.tipo]})}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:h.curso})]},h.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},sst=async()=>{try{console.log("🔍 Debugging users collection...");const e=wt(Fr,"users"),t=$t(e,tf(10)),r=await Hn(t),n={exists:!0,totalDocs:r.size,sampleDocs:[],fieldAnalysis:{}},a=new Set;return r.forEach((s,i)=>{const o=s.data(),c={id:s.id,data:o,fields:Object.keys(o)};n.sampleDocs.push(c),Object.keys(o).forEach(u=>a.add(u))}),n.fieldAnalysis={allFields:Array.from(a),commonFields:Array.from(a).filter(s=>n.sampleDocs.filter(o=>s in o.data).length>n.sampleDocs.length*.5)},console.log("Users collection debug result:",n),n}catch(e){return console.error("Error debugging users collection:",e),{exists:!1,error:e instanceof Error?e.message:"Unknown error"}}},ist=async(e,t)=>{var c,u,d;const r=new Date(e,t,1),n=new Date(e,t+1,0,23,59,59,999),a=ir.fromDate(r),s=ir.fromDate(n),i=["asistenciaDual","asistenciaEmpresa","asistencia","attendance","checkins"],o={};for(const f of i)try{const h=wt(Fr,f);try{const m=$t(h,Qr("fechaHora",">=",a),Qr("fechaHora","<=",s)),g=await Hn(m);o[f]={exists:!0,hasDateField:!0,count:g.size,sampleDoc:((c=g.docs[0])==null?void 0:c.data())||null}}catch{const g=["fecha","timestamp","createdAt"];let x=!1;for(const v of g)try{const y=$t(h,Qr(v,">=",a),Qr(v,"<=",s)),w=await Hn(y);o[f]={exists:!0,hasDateField:v,count:w.size,sampleDoc:((u=w.docs[0])==null?void 0:u.data())||null},x=!0;break}catch{continue}if(!x){const v=$t(h,xr("__name__"),tf(5)),y=await Hn(v);o[f]={exists:!0,hasDateField:!1,count:y.size,sampleDoc:((d=y.docs[0])==null?void 0:d.data())||null,note:"No date field found for filtering"}}}}catch(h){o[f]={exists:!1,error:h instanceof Error?h.message:"Unknown error"}}return console.log("Debug Asistencia Collections:",o),o},ost=(e,t,r,n)=>{try{const a=new Date(e,t,1);a.setHours(0,0,0,0);const s=new Date(e,t+1,0);s.setHours(23,59,59,999),console.log(`🔍 Buscando registros entre: ${a.toISOString()} y ${s.toISOString()}`),console.log(`📅 Mes actual: ${e}-${(t+1).toString().padStart(2,"0")}`);const i=ir.fromDate(a),o=ir.fromDate(s),c=[],u=new Map,d=()=>{const h=Array.from(u.values());console.log(`📊 Total registros encontrados: ${h.length}`),h.length>0&&console.log("📅 Registros por día:",h.reduce((m,g)=>{let x;g.fechaHora instanceof Date?x=g.fechaHora:typeof g.fechaHora=="string"?x=new Date(g.fechaHora):x=new Date;const v=x.getDate();return m[v]=(m[v]||0)+1,m},{})),r(h)};return["asistencia_dual","asistenciaEmpresa","asistencia_empresa","asistenciaDual","asistencia"].forEach(h=>{try{console.log(`🔍 Configurando suscripción para: ${h}`);const m=wt(Fr,h),g=$t(m,Qr("fechaHora",">=",i),Qr("fechaHora","<=",o),xr("fechaHora","desc")),x=pr(g,v=>{console.log(`📋 ${h}: ${v.size} documentos encontrados con filtro`),v.size>0?(console.log(`✅ Registros encontrados en ${h}:`),Array.from(u.keys()).filter(w=>w.startsWith(`${h}_`)).forEach(w=>u.delete(w)),v.docs.forEach((w,_)=>{var T;if(_<5){const B=w.data();let j;(T=B.fechaHora)!=null&&T.toDate?j=B.fechaHora.toDate():typeof B.fechaHora=="string"?j=new Date(B.fechaHora):j=new Date,console.log(`   ${_+1}. ${B.emailEstudiante} - ${j.toLocaleString()} - ${B.tipo}`),console.log(`      📅 Fecha original: ${B.fechaHora} (tipo: ${typeof B.fechaHora})`)}}),v.forEach(w=>{var E;const _=w.data();let T;(E=_.fechaHora)!=null&&E.toDate?T=_.fechaHora.toDate():typeof _.fechaHora=="string"?T=new Date(_.fechaHora):_.fechaHora instanceof Date?T=_.fechaHora:_.fechaHora?T=new Date(_.fechaHora):T=new Date;const B={id:w.id,emailEstudiante:_.emailEstudiante||_.email||"",nombreEstudiante:_.nombreEstudiante||_.nombre||"",curso:_.curso||"",fechaHora:T,tipo:_.tipo,ubicacion:_.ubicacion||null,observaciones:_.observaciones||"",..._},j=`${h}_${w.id}`;u.set(j,B)}),d()):console.log(`⚪ ${h}: vacía, manteniendo datos existentes`)},v=>{console.warn(`⚠️ Error con filtro en ${h}:`,v),console.log(`🔄 Intentando estrategia alternativa en ${h}...`);const y=$t(m,tf(200)),w=pr(y,T=>{if(console.log(`📋 ${h} (sin filtro): ${T.size} documentos`),T.size>0){const j=T.docs[0].data();console.log(`📄 Estructura en ${h}:`,Object.keys(j)),console.log("📄 Primer documento:",j)}const B=T.docs.filter(j=>{var I;const E=j.data();if(!E.fechaHora)return!1;let N;return(I=E.fechaHora)!=null&&I.toDate?N=E.fechaHora.toDate():typeof E.fechaHora=="string"?N=new Date(E.fechaHora):E.fechaHora instanceof Date?N=E.fechaHora:N=new Date(E.fechaHora),N>=a&&N<=s});console.log(`📅 ${h}: ${B.length} registros después de filtro manual`),B.length>0&&(Array.from(u.keys()).filter(E=>E.startsWith(`${h}_`)).forEach(E=>u.delete(E)),B.forEach(E=>{var k;const N=E.data();let I;(k=N.fechaHora)!=null&&k.toDate?I=N.fechaHora.toDate():typeof N.fechaHora=="string"?I=new Date(N.fechaHora):N.fechaHora instanceof Date?I=N.fechaHora:I=new Date(N.fechaHora);const L={id:E.id,emailEstudiante:N.emailEstudiante||N.email||"",nombreEstudiante:N.nombreEstudiante||N.nombre||"",curso:N.curso||"",fechaHora:I,tipo:N.tipo,ubicacion:N.ubicacion||null,observaciones:N.observaciones||"",...N},D=`${h}_${E.id}`;u.set(D,L)}),d())}),_=c.findIndex(T=>T===x);_>=0?c[_]=w:c.push(w)});c.push(x)}catch(m){console.warn(`❌ Error configurando ${h}:`,m)}}),()=>{c.forEach(h=>{try{h()}catch(m){console.warn("Error unsubscribing:",m)}})}}catch(a){return console.error("Error setting up subscribeToAsistenciaByMonth:",a),n&&n(new Error(`Error al configurar suscripción: ${a instanceof Error?a.message:"Error desconocido"}`)),()=>{}}},lst=(e,t)=>{try{console.log("🔍 Buscando usuarios en múltiples colecciones...");const r=["usuarios","users"],n=[],a=new Map,s=()=>{const o=Array.from(a.values());console.log(`📊 Total usuarios encontrados: ${o.length}`);const c=o.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log("👥 Usuarios por perfil:",c);const u=o.filter(d=>d.profile===Jt.ESTUDIANTE);console.log(`🎓 Estudiantes encontrados: ${u.length}`),u.forEach(d=>{console.log(`   - ${d.nombreCompleto} (${d.curso}) - ${d.email}`)}),e(o)};let i=!1;return r.forEach(o=>{try{const c=wt(Fr,o),u=$t(c),d=pr(u,f=>{f.size>0?(console.log(`✅ Encontrados ${f.size} usuarios en colección: ${o}`),i=!0,Array.from(a.keys()).filter(m=>m.startsWith(`${o}_`)).forEach(m=>a.delete(m)),f.forEach(m=>{var g,x,v,y;try{const w=m.data(),_=w.email||w.userEmail||w.mail||w.correo||"",T=w.nombreCompleto||w.displayName||w.name||w.nombre||w.fullName||"",B=w.curso||w.course||w.class||w.grade||"";let j=w.profile||w.role||w.tipo||w.userType||Jt.ESTUDIANTE;if(typeof j=="string"){const I=j.toLowerCase();I.includes("estudiante")||I.includes("student")||I.includes("alumno")?j=Jt.ESTUDIANTE:I.includes("coordinador")||I.includes("coordinator")?j=Jt.COORDINADOR_TP:I.includes("profesor")||I.includes("teacher")||I.includes("docente")?j=Jt.PROFESOR:(I.includes("subdireccion")||I.includes("subdir"))&&(j=Jt.COORDINADOR_TP)}const E={id:m.id,email:_,nombreCompleto:T,curso:B,profile:j,activo:w.activo!==!1,fechaCreacion:((x=(g=w.fechaCreacion)==null?void 0:g.toDate)==null?void 0:x.call(g))||new Date(w.fechaCreacion)||new Date,ultimaActividad:((y=(v=w.ultimaActividad)==null?void 0:v.toDate)==null?void 0:y.call(v))||new Date(w.ultimaActividad)||new Date,...w},N=`${o}_${m.id}`;a.set(N,E)}catch(w){console.warn(`Error procesando documento ${m.id} en ${o}:`,w)}}),s()):console.log(`⚪ Colección ${o}: vacía`)},f=>{console.warn(`⚠️ Error en colección ${o}:`,f)});n.push(d)}catch(c){console.warn(`❌ Error configurando ${o}:`,c)}}),setTimeout(()=>{i||(console.error("❌ No se encontraron usuarios en ninguna colección"),t&&t(new Error("No se encontraron colecciones de usuarios con datos")))},3e3),()=>{n.forEach(o=>{try{o()}catch(c){console.warn("Error unsubscribing:",c)}})}}catch(r){return console.error("Error setting up multi-collection users subscription:",r),t&&t(new Error(`Error al configurar suscripción multi-colección: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},cst=(e,t)=>{try{console.log("Setting up users subscription...");const r=wt(Fr,"users"),n=$t(r);return pr(n,s=>{console.log(`Raw users snapshot size: ${s.size}`);const i=[];s.forEach(d=>{var f,h,m,g;try{const x=d.data();console.log(`Processing user doc ${d.id}:`,x);const v=x.email||x.userEmail||x.mail||"",y=x.nombreCompleto||x.displayName||x.name||x.nombre||"",w=x.curso||x.course||x.class||"";let _=x.profile||x.role||x.tipo||Jt.ESTUDIANTE;if(typeof _=="string"){const B=_.toLowerCase();B.includes("estudiante")||B.includes("student")||B.includes("alumno")?_=Jt.ESTUDIANTE:B.includes("coordinador")||B.includes("coordinator")?_=Jt.COORDINADOR_TP:B.includes("profesor")||B.includes("teacher")||B.includes("docente")?_=Jt.PROFESOR:(B.includes("subdireccion")||B.includes("subdir"))&&(_=Jt.COORDINADOR_TP)}const T={id:d.id,email:v,nombreCompleto:y,curso:w,profile:_,activo:x.activo!==!1,fechaCreacion:((h=(f=x.fechaCreacion)==null?void 0:f.toDate)==null?void 0:h.call(f))||new Date(x.fechaCreacion)||new Date,ultimaActividad:((g=(m=x.ultimaActividad)==null?void 0:m.toDate)==null?void 0:g.call(m))||new Date(x.ultimaActividad)||new Date,...x};i.push(T)}catch(x){console.warn(`Error processing user document ${d.id}:`,x)}}),i.sort((d,f)=>d.nombreCompleto.localeCompare(f.nombreCompleto)),console.log(`Processed ${i.length} users successfully`);const o=i.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log("Users by profile:",o);const c=i.filter(d=>d.profile===Jt.ESTUDIANTE);console.log(`Estudiantes: ${c.length}`);const u=c.filter(d=>d.curso);console.log(`Estudiantes con curso: ${u.length}`),e(i)},s=>{console.error("Error in subscribeToAllUsers:",s),t&&t(new Error(`Error al cargar usuarios: ${s.message}`))})}catch(r){return console.error("Error setting up subscribeToAllUsers:",r),t&&t(new Error(`Error al configurar suscripción de usuarios: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},S5=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},ust=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),dst=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H9.5l3.5 3.5L11.59 18 6 12.41 11.59 7 13 8.41 9.5 11H17v2z"})}),fst=()=>{const[e,t]=S.useState([]),[r,n]=S.useState([]),[a,s]=S.useState(!0),[i,o]=S.useState(null),[c,u]=S.useState(new Date),[d,f]=S.useState("todos"),[h,m]=S.useState("");S.useEffect(()=>{s(!0),o(null);const j=c.getFullYear(),E=c.getMonth();console.log("=== INICIANDO CARGA DE DATOS ==="),console.log("Año:",j,"Mes:",E);let N=!1,I=!1;const L=()=>{N&&I&&(console.log("=== CARGA COMPLETA ==="),s(!1))};(async()=>{console.log("🧪 INICIANDO PRUEBA DIRECTA SIMPLE...");try{const k=wt(Fr,"asistencia_dual"),P=$t(k,tf(5)),R=await Hn(P);if(console.log(`✅ asistencia_dual - Documentos encontrados: ${R.size}`),R.size>0)R.docs.forEach((W,V)=>{const G=W.data();console.log(`   ${V+1}. ${W.id.slice(0,8)} - ${G.emailEstudiante} - ${G.tipo}`),console.log("      Fecha original:",G.fechaHora),console.log("      Todos los campos:",Object.keys(G))});else{console.log("❌ No se encontraron documentos en asistencia_dual");const W=["asistenciaEmpresa","asistencia_empresa"];for(const V of W)try{const G=wt(Fr,V),z=$t(G,tf(3)),K=await Hn(z);if(console.log(`📋 ${V}: ${K.size} documentos`),K.size>0){const J=K.docs[0].data();console.log("   Estructura:",Object.keys(J)),console.log("   Email:",J.emailEstudiante||J.email),console.log("   Fecha:",J.fechaHora||J.fecha)}}catch(G){console.log(`❌ ${V}: ${G instanceof Error?G.message:"Error"}`)}}}catch(k){console.error("❌ Error en prueba directa:",k),k.code==="permission-denied"?(console.log("🔒 PROBLEMA: Permisos de Firestore denegados"),console.log("💡 Ve a Firebase Console → Firestore → Rules y verifica los permisos")):k.code==="failed-precondition"&&(console.log("📊 PROBLEMA: Faltan índices en Firestore"),console.log("💡 Ve a Firebase Console → Firestore → Indexes"))}})(),ist(j,E).then(k=>{console.log("🔍 Debug info for collections:",k),Object.entries(k).forEach(([P,R])=>{if(R.exists&&R.totalDocs>0){if(console.log(`
📋 COLECCIÓN ${P.toUpperCase()}:`),console.log(`   📊 Total documentos: ${R.totalDocs}`),console.log(`   📅 Documentos del período: ${R.count}`),console.log(`   🔑 Campo de fecha: ${R.hasDateField}`),R.sampleDoc){console.log("   📄 Documento ejemplo:",R.sampleDoc);const W=R.sampleDoc,V=W.emailEstudiante||W.email||W.userEmail||W.correo||"NO ENCONTRADO",G=W.tipo||W.type||W.action||W.tipoRegistro||"NO ENCONTRADO",z=W.fechaHora||W.fecha||W.timestamp||W.createdAt||"NO ENCONTRADO";console.log(`   📧 Email estudiante: ${V}`),console.log(`   📝 Tipo registro: ${G}`),console.log(`   📅 Fecha: ${z}`),console.log("   🗂️ Todos los campos:",Object.keys(W))}R.filteredDocs&&R.filteredDocs.length>0&&(console.log("   📋 Registros del período encontrados:",R.filteredDocs.length),R.filteredDocs.forEach((W,V)=>{V<3&&console.log(`      ${V+1}. ID: ${W.id}`,W.data)}))}else R.exists?console.log(`⚪ Colección ${P}: vacía`):console.log(`❌ Colección ${P}: no existe`)})}).catch(k=>{console.error("Debug error:",k)}),sst().then(k=>{console.log("🔍 Debug info for users:",k),(!k.exists||k.totalDocs===0)&&(console.log('⚠️ Colección "users" vacía o no existe. Buscando alternativas...'),["usuarios","estudiantes","profiles","accounts","members"].forEach(async R=>{var W;try{const V=wt(Fr,R),G=$t(V,tf(5)),z=await Hn(G);z.size>0?(console.log(`✅ Encontrada colección alternativa: ${R} con ${z.size} documentos`),console.log("Documento muestra:",(W=z.docs[0])==null?void 0:W.data())):console.log(`❌ Colección ${R}: vacía`)}catch{console.log(`❌ Colección ${R}: no existe`)}}))}).catch(k=>{console.error("Users debug error:",k)});try{console.log("Configurando suscripción a asistencia...");const k=ost(j,E,R=>{if(console.log("✅ Received registros:",R.length),R.length>0){console.log("📋 ANÁLISIS DE REGISTROS RECIBIDOS:"),console.log("Sample registro:",R[0]);const W=[...new Set(R.map(te=>te.emailEstudiante).filter(Boolean))];console.log("📧 Emails de estudiantes en registros:",W);const V=[...new Set(R.map(te=>te.tipo).filter(Boolean))];console.log("📝 Tipos de registro encontrados:",V);const G=R.reduce((te,M)=>{const H=new Date(M.fechaHora).getDate();return te[H]||(te[H]=[]),te[H].push(M),te},{});console.log("📅 Registros por día del mes:",Object.keys(G).map(te=>({dia:parseInt(te),cantidad:G[parseInt(te)].length})));const z=r.map(te=>te.email).filter(Boolean);console.log("👥 Emails de estudiantes cargados:",z);const K=W.filter(te=>z.includes(te)),J=W.filter(te=>!z.includes(te));console.log("✅ Emails que coinciden:",K),console.log("❌ Emails que NO coinciden:",J)}else console.log("⚠️ No se encontraron registros de asistencia para el período");t(R),N=!0,L()},R=>{console.error("❌ Error fetching asistencia:",R),o("Error al cargar datos de asistencia: "+R.message),N=!0,L()});console.log("Configurando suscripción a usuarios...");const P=lst(R=>{if(console.log("✅ Received users (multi-collection):",R.length),R.length>0){console.log("Sample user:",R[0]);const W=R.filter(V=>V.profile===Jt.ESTUDIANTE&&V.curso);console.log("Dual students found:",W.length),W.forEach(V=>{console.log(`- ${V.nombreCompleto} (${V.curso}) - ${V.email}`)})}n(R),I=!0,L()},R=>{console.error("❌ Error fetching users (multi-collection):",R),console.log("🔄 Intentando con función original de usuarios...");const W=cst(V=>{console.log("✅ Received users (fallback):",V.length),n(V),I=!0,L()},V=>{console.error("❌ Error en fallback también:",V),o("Error al cargar estudiantes: "+R.message),I=!0,L()})});return()=>{console.log("Limpiando suscripciones..."),k&&k(),P&&P()}}catch(k){console.error("❌ Error setting up subscriptions:",k),o("Error al inicializar conexiones: "+(k instanceof Error?k.message:"Error desconocido")),s(!1)}},[c]);const{monthDays:g,monthName:x,year:v}=S.useMemo(()=>{const j=c.getFullYear(),E=c.getMonth();return{monthDays:new Date(j,E+1,0).getDate(),monthName:c.toLocaleString("es-CL",{month:"long"}),year:j}},[c]),y=S.useMemo(()=>{let j=r.filter(E=>E.profile===Jt.ESTUDIANTE&&E.curso&&kg.includes(S5(E.curso)));if(d!=="todos"&&(j=j.filter(E=>S5(E.curso||"")===d)),h&&(j=j.filter(E=>E.nombreCompleto.toLowerCase().includes(h.toLowerCase()))),e.length>0){const E=[...new Set(e.map(L=>L.emailEstudiante).filter(Boolean))],N=j.map(L=>L.email),I=E.filter(L=>!N.includes(L));if(I.length>0){console.log("📝 Agregando estudiantes faltantes con registros:",I);const D=I.map(k=>{const P=e.find(R=>R.emailEstudiante===k);return{id:k,email:k,nombreCompleto:(P==null?void 0:P.nombreEstudiante)||k.split("@")[0],curso:(P==null?void 0:P.curso)||"3ºC",profile:Jt.ESTUDIANTE,activo:!0,fechaCreacion:new Date,ultimaActividad:new Date}}).filter(k=>{const P=d==="todos"||S5(k.curso)===d,R=!h||k.nombreCompleto.toLowerCase().includes(h.toLowerCase());return P&&R&&kg.includes(S5(k.curso))});j=[...j,...D]}}return console.log(`👥 Estudiantes filtrados para mostrar: ${j.length}`),j.forEach(E=>{console.log(`   - ${E.nombreCompleto} (${E.curso}) - ${E.email}`)}),j.sort((E,N)=>E.nombreCompleto.localeCompare(N.nombreCompleto))},[r,d,h,e]),w=S.useMemo(()=>{console.log("🔄 Procesando datos de asistencia para la tabla..."),console.log(`📊 Total registros a procesar: ${e.length}`),console.log(`👥 Estudiantes disponibles: ${y.length}`);const j=new Map;return e.length===0?(console.log("⚠️ No hay registros para procesar aún"),j):(e.forEach((E,N)=>{const I=E.emailEstudiante;if(!I)return;let L;if(E.fechaHora instanceof Date)L=E.fechaHora;else if(E.fechaHora&&typeof E.fechaHora=="object"&&"toDate"in E.fechaHora)L=E.fechaHora.toDate();else if(typeof E.fechaHora=="string")L=new Date(E.fechaHora);else{console.warn("Fecha no válida en registro:",E);return}const D=L.getDate(),k=L.getMonth(),P=L.getFullYear();N<3&&console.log(`📅 Registro ${N+1}:`,{email:I,tipo:E.tipo,fechaOriginal:E.fechaHora,fechaProcesada:L.toLocaleString(),año:P,mes:k,día:D}),j.has(I)||j.set(I,new Map);const R=j.get(I);R.has(D)||R.set(D,{});const W=R.get(D);E.tipo==="Entrada"?(!W.entrada||L<new Date(W.entrada.fechaHora))&&(W.entrada=E):E.tipo==="Salida"&&(!W.salida||L>new Date(W.salida.fechaHora))&&(W.salida=E)}),console.log("📋 Datos de asistencia procesados:",{estudiantesConRegistros:j.size,estudiantes:Array.from(j.keys()),registrosPorEstudiante:Array.from(j.entries()).map(([E,N])=>({email:E,dias:Array.from(N.keys()),totalRegistros:Array.from(N.values()).reduce((I,L)=>I+(L.entrada?1:0)+(L.salida?1:0),0)}))}),j)},[e]),_=j=>{u(E=>{const N=new Date(E);return N.setMonth(N.getMonth()+j),N})},T=j=>{j!=null&&j.latitud&&(j!=null&&j.longitud)&&window.open(`https://www.google.com/maps?q=${j.latitud},${j.longitud}`,"_blank")},B=["D","L","M","M","J","V","S"];return i?l.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:l.jsx("div",{className:"text-red-600 bg-red-100 dark:bg-red-900/30 p-4 rounded-md",children:i})}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[l.jsx("button",{onClick:()=>_(-1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes anterior",children:"←"}),l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${x} ${v}`}),l.jsx("button",{onClick:()=>_(1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes siguiente",children:"→"})]}),l.jsxs("select",{value:d,onChange:j=>f(j.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"todos",children:"Todos los Cursos"}),kg.map(j=>l.jsx("option",{value:j,children:j},j))]}),l.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:h,onChange:j=>m(j.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a?l.jsxs("div",{className:"text-center text-amber-600 py-10",children:[l.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mb-4"}),l.jsx("div",{children:"Cargando datos de asistencia..."})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:g},(j,E)=>{const I=new Date(v,c.getMonth(),E+1).getDay(),L=I===0||I===6;return l.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${L?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[l.jsx("div",{className:"font-semibold",children:B[I]}),l.jsx("div",{children:E+1})]},E)})]})}),l.jsx("tbody",{children:y.length>0?y.map(j=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[l.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:j.nombreCompleto}),Array.from({length:g},(E,N)=>{var P;const I=N+1,L=(P=w.get(j.email))==null?void 0:P.get(I),D=new Date(v,c.getMonth(),N+1),k=D.getDay()===0||D.getDay()===6;return j.email==="alexis.robles@industrialderecoleta.cl"&&I===2&&console.log("🔍 Verificando día 2 para Alexis:",{email:j.email,day:I,hasDataForStudent:w.has(j.email),studentDayRecords:L,allAttendanceKeys:Array.from(w.keys()),daysForStudent:w.get(j.email)?Array.from(w.get(j.email).keys()):[]}),l.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${k?"bg-slate-100 dark:bg-slate-700/50":""}`,children:l.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(L==null?void 0:L.entrada)&&l.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var R;return T((R=L.entrada)==null?void 0:R.ubicacion)},children:[l.jsx(ust,{}),l.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(L.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]}),(L==null?void 0:L.salida)&&l.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var R;return T((R=L.salida)==null?void 0:R.ubicacion)},children:[l.jsx(dst,{}),l.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(L.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]})]})},I)})]},j.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:g+1,className:"text-center p-8 text-slate-500",children:"No hay estudiantes en el curso seleccionado o que coincidan con la búsqueda."})})})]})})]})},gT="evaluaciones_formativas",xT="calificaciones_formativas",A7="trabajos_grupales_formativos",Ast="usuarios",h7=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},hst=(e,t,r)=>{const n=$t(wt(ht,gT),Qr("curso","==",e),Qr("asignatura","==",t),xr("fecha","asc"));return pr(n,a=>{r(a.docs.map(s=>h7(s)))},a=>{console.error("Error al suscribirse a evaluaciones:",a),r([])})},mst=async(e,t)=>{const r=yx(ht),n=cr(wt(ht,gT));r.set(n,{...e,fecha:ir.fromDate(new Date(e.fecha+"T00:00:00"))});const a=cr(ht,xT,n.id);return r.set(a,t),await r.commit(),n.id},pst=async(e,t)=>{const r=cr(ht,gT,e);await Mi(r,t,{merge:!0})},gst=async e=>{const t=yx(ht);t.delete(cr(ht,gT,e)),t.delete(cr(ht,xT,e)),await t.commit()},xst=(e,t)=>{if(e.length===0)return t({}),()=>{};const r=e.map(n=>{const a=cr(ht,xT,n);return pr(a,s=>{s.exists()&&t({[n]:s.data()})})});return()=>r.forEach(n=>n())},vst=async(e,t)=>{const r=cr(ht,xT,e);await Mi(r,t,{merge:!0})},bst=(e,t,r)=>{const n=$t(wt(ht,A7),Qr("curso","==",e),Qr("asignatura","==",t),xr("fechaPresentacion","desc"));return pr(n,a=>{r(a.docs.map(s=>h7(s)))},a=>{console.error("Error al suscribirse a trabajos grupales:",a),r([])})},yst=async e=>{const t={...e,fechaPresentacion:ir.fromDate(new Date(e.fechaPresentacion+"T00:00:00"))};await _n(wt(ht,A7),t)},wst=async(e,t)=>{const r=cr(ht,A7,e);await Mi(r,t,{merge:!0})},Est=e=>{const t=$t(wt(ht,Ast));return pr(t,r=>{e(r.docs.map(n=>h7(n)))},r=>{console.error("Error al suscribirse a usuarios:",r),e([])})},yfe=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},o1={"Lengua y Literatura":"📚",Matemática:"➗",Inglés:"🇬🇧",Filosofía:"🤔","Historia y Geografía":"🌍","Educación Ciudadana":"🏛️",Ciencias:"🔬","Ciencias para la Ciudadanía":"💡",Artes:"🎨",Música:"🎵","Educación Física":"🏃‍♂️",Orientación:"🧭","Mecánica Industrial":"⚙️","Mecánica Automotriz":"🚗",Emprendimiento:"💼",Tecnología:"💻","Pensamiento Lógico":"🧠","Competencia Lectora":"📖",Default:"✏️"},wfe=e=>e.startsWith("1º")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:e.startsWith("2º")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:e.startsWith("3º")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:e.startsWith("4º")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},Cst=({cursos:e,onSelect:t})=>l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),e.length>0?l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:e.map(r=>{const n=wfe(r);return l.jsxs("div",{className:"space-y-2 text-center",children:[l.jsxs("button",{onClick:()=>t(r),className:`relative w-full h-48 rounded-md shadow-lg ${n.bg} ${n.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[l.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${n.spine} rounded-l-md`}),l.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${n.text}`,children:[l.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:r.slice(0,2)}),l.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:r.slice(2)})]})]}),l.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:r})]},r)})}):l.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[l.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),l.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),_st=({curso:e,asignaturas:t,onSelect:r,onBack:n})=>{const a=wfe(e);return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[l.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:"← Volver a Cursos"}),l.jsxs("div",{className:`p-2 rounded-md ${a.bg} ${a.text} font-bold`,children:["Libro de Clases: ",e]})]}),l.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),t.length>0?l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:t.map(s=>l.jsxs("button",{onClick:()=>r(s),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[l.jsx("span",{className:"text-2xl",children:o1[s]||o1.Default}),l.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:s})]},s))}):l.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[l.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),l.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},Sst=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=S.useState([]),[i,o]=S.useState({}),[c,u]=S.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[d,f]=S.useState(null),[h,m]=S.useState(null),[g,x]=S.useState(!0),v=S.useMemo(()=>r.filter(N=>N.profile===Jt.ESTUDIANTE&&yfe(N.curso||"")===e).map(N=>N.nombreCompleto).sort((N,I)=>N.localeCompare(I)),[r,e]);S.useEffect(()=>{x(!0);const N=hst(e,t,I=>{s(I);const L=I.map(k=>k.id),D=xst(L,k=>{o(P=>({...P,...k}))});return x(!1),()=>D()});return()=>N()},[e,t]);const y=N=>{const{name:I,value:L}=N.target;d?f(D=>D?{...D,[I]:L}:null):u(D=>({...D,[I]:L}))},w=async N=>{if(N.preventDefault(),m(null),!c.nombreActividad.trim()){m("El nombre de la actividad es obligatorio.");return}const I={asignatura:t,curso:e,...c},L=v.reduce((D,k)=>(D[k]="trabajado",D),{});try{await mst(I,L),u({fecha:new Date().toISOString().split("T")[0],nombreActividad:""})}catch(D){console.error(D),m("No se pudo crear la evaluación.")}},_=(N,I)=>{var P;const L=((P=i[N])==null?void 0:P[I])||"trabajado";let D;L==="trabajado"?D="no trabajado":L==="no trabajado"?D="ausente":D="trabajado";const k={...i,[N]:{...i[N]||{},[I]:D}};o(k),vst(N,{[I]:D}).catch(R=>{console.error("Error updating grade:",R)})},T=N=>f(N),B=async()=>{if(d)try{await pst(d.id,{nombreActividad:d.nombreActividad,fecha:d.fecha}),f(null)}catch(N){console.error(N),m("No se pudo guardar la edición.")}},j=async N=>{if(window.confirm("¿Eliminar esta evaluación y todas sus calificaciones?"))try{await gst(N)}catch(I){console.error(I),m("No se pudo eliminar la evaluación.")}},E=S.useCallback(N=>{if(a.length===0)return"-";let I=0,L=0;return a.forEach(D=>{var P;const k=(P=i[D.id])==null?void 0:P[N];k==="trabajado"?(I+=7,L++):k==="no trabajado"&&(I+=2,L++)}),L===0?"-":(I/L).toFixed(1)},[i,a]);return g?l.jsx("div",{className:"text-center py-10",children:"Cargando calificaciones..."}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),l.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),l.jsxs("form",{onSubmit:w,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluación"}),l.jsxs("div",{className:"w-full",children:[l.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),l.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:c.nombreActividad,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{className:"w-full",children:[l.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),l.jsx("input",{id:"fecha",type:"date",name:"fecha",value:c.fecha,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx("div",{className:"w-full",children:l.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),h&&l.jsx("p",{className:"text-red-500 text-sm col-span-full",children:h})]}),l.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),a.map(N=>l.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(d==null?void 0:d.id)===N.id?l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("input",{type:"text",name:"nombreActividad",value:d.nombreActividad,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),l.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),l.jsx("button",{onClick:B,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:"✓"})]}):l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"font-semibold",children:N.nombreActividad}),l.jsx("span",{className:"font-normal text-slate-500",children:N.fecha}),l.jsxs("div",{className:"flex gap-2 mt-1",children:[l.jsx("button",{onClick:()=>T(N),className:"text-blue-500 hover:text-blue-700",children:"✏️"}),l.jsx("button",{onClick:()=>j(N.id),className:"text-red-500 hover:text-red-700",children:"🗑️"})]})]})},N.id)),l.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:v.map(N=>l.jsxs("tr",{children:[l.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:N}),a.map(I=>{var k;const L=(k=i[I.id])==null?void 0:k[N];let D;return L==="trabajado"?D=o1[t]||o1.Default:L==="no trabajado"?D="❌":L==="ausente"?D="A":D=o1[t]||o1.Default,l.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:l.jsx("button",{onClick:()=>_(I.id,N),className:`text-3xl transition-opacity duration-200 ${L==="trabajado"?"opacity-100":L==="no trabajado"?"opacity-40":L==="ausente"?"opacity-100 text-red-500 font-bold":"opacity-100"}`,children:D})},I.id)}),l.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:E(N)})]},N))})]})})]})},Nst=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=S.useState([]),[i,o]=S.useState(null),[c,u]=S.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[d,f]=S.useState({}),[h,m]=S.useState(2),g=S.useMemo(()=>r.filter(T=>T.profile===Jt.ESTUDIANTE&&yfe(T.curso||"")===e).sort((T,B)=>T.nombreCompleto.localeCompare(B.nombreCompleto)),[r,e]);S.useEffect(()=>{const T=bst(e,t,s);return()=>T()},[e,t]),S.useEffect(()=>{if(i){const T={};i.grupos.forEach(B=>{B.integrantes.forEach(j=>{T[j.nombre]={groupNumber:String(B.numero),role:j.rol||""}})}),f(T)}else f({})},[i]);const x=async T=>{if(T.preventDefault(),!c.nombre.trim())return;const B={curso:e,asignatura:t,nombreActividad:c.nombre,fechaPresentacion:c.fecha,grupos:[]};try{await yst(B),u({nombre:"",fecha:new Date().toISOString().split("T")[0]})}catch(j){console.error(j),alert("No se pudo crear la actividad grupal.")}},v=async()=>{if(!i)return;const T=new Map;for(const j of g){const E=d[j.nombreCompleto];if(E&&E.groupNumber){const N=parseInt(E.groupNumber,10);isNaN(N)||(T.has(N)||T.set(N,[]),T.get(N).push({nombre:j.nombreCompleto,rol:E.role||""}))}}const B=Array.from(T.entries()).map(([j,E])=>({numero:j,integrantes:E})).sort((j,E)=>j.numero-E.numero);try{await wst(i.id,{grupos:B}),alert("Grupos guardados con éxito.")}catch(j){console.error(j),alert("No se pudieron guardar los grupos.")}},y=()=>{if(h<2){alert("Debe haber al menos 2 grupos.");return}const T=[...g].sort(()=>Math.random()-.5),B={};T.forEach((j,E)=>{var N;B[j.nombreCompleto]={groupNumber:String(E%h+1),role:((N=d[j.nombreCompleto])==null?void 0:N.role)||""}}),f(B)},w=(T,B,j)=>{f(E=>({...E,[T]:{...E[T]||{groupNumber:"",role:""},[B]:j}}))},_=S.useMemo(()=>{const T=new Map;return Object.entries(d).forEach(([B,j])=>{j.groupNumber&&(T.has(j.groupNumber)||T.set(j.groupNumber,[]),T.get(j.groupNumber).push({nombre:B,rol:j.role}))}),Array.from(T.entries()).sort((B,j)=>parseInt(B[0])-parseInt(j[0]))},[d]);return i?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("button",{onClick:()=>o(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a Actividades"}),l.jsx("h2",{className:"text-2xl font-bold",children:i.nombreActividad})]}),l.jsx("button",{onClick:v,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"md:col-span-1 space-y-4",children:[l.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignación"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"number",value:h,onChange:T=>m(parseInt(T.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),l.jsx("button",{onClick:y,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),l.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Nómina del Curso"}),l.jsx("table",{className:"w-full text-sm",children:l.jsx("tbody",{children:g.map(T=>{var B;return l.jsxs("tr",{children:[l.jsx("td",{className:"py-1 pr-2",children:T.nombreCompleto}),l.jsx("td",{className:"py-1",children:l.jsx("input",{type:"number",value:((B=d[T.nombreCompleto])==null?void 0:B.groupNumber)||"",onChange:j=>w(T.nombreCompleto,"groupNumber",j.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N°"})})]},T.id)})})})]})]}),l.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:_.map(([T,B])=>l.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[l.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",T]}),l.jsx("ul",{className:"space-y-2",children:B.map(j=>l.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[l.jsx("span",{className:"flex-1 truncate",children:j.nombre}),l.jsxs("select",{value:j.rol||"",onChange:E=>w(j.nombre,"role",E.target.value),className:"p-1 border rounded text-xs w-32",children:[l.jsx("option",{value:"",children:"-- Asignar Rol --"}),Sne.map(E=>l.jsx("option",{value:E,children:E},E))]})]},j.nombre))})]},T))})]})]})]}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),l.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),l.jsxs("form",{onSubmit:x,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[l.jsx("input",{value:c.nombre,onChange:T=>u({...c,nombre:T.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),l.jsx("input",{type:"date",value:c.fecha,onChange:T=>u({...c,fecha:T.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),a.map(T=>l.jsxs("button",{onClick:()=>o(T),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[l.jsx("p",{className:"font-bold",children:T.nombreActividad}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",T.fechaPresentacion]})]},T.id))]})]})},kst=({currentUser:e})=>{const[t,r]=S.useState("calificaciones"),[n,a]=S.useState(null),[s,i]=S.useState(null),[o,c]=S.useState([]),[u,d]=S.useState(!0);S.useEffect(()=>{d(!0);const x=Est(v=>{c(v),d(!1)});return()=>x()},[]);const f=S.useMemo(()=>e.cursos||[],[e.cursos]),h=S.useMemo(()=>e.asignaturas||[],[e.asignaturas]),m=({tab:x,label:v})=>l.jsx("button",{onClick:()=>r(x),className:`${t===x?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:v}),g=()=>{if(u)return l.jsx("div",{className:"text-center py-10",children:"Cargando datos de usuario..."});if(!n)return l.jsx(Cst,{cursos:f,onSelect:a});if(!s)return l.jsx(_st,{curso:n,asignaturas:h,onSelect:i,onBack:()=>a(null)});if(t==="calificaciones")return l.jsx(Sst,{curso:n,asignatura:s,allUsers:o,onBack:()=>i(null)});if(t==="grupos")return l.jsx(Nst,{curso:n,asignatura:s,allUsers:o,onBack:()=>i(null)})};return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx(m,{tab:"calificaciones",label:"Calificaciones"}),l.jsx(m,{tab:"grupos",label:"Trabajos Grupales"})]})}),l.jsx("div",{className:"mt-6",children:g()})]})};function Bst(e){return e.map(t=>{const[r,n]=t.minuto.split("-").map(Number),a=t.accionesEstudiantes.length>0?t.accionesEstudiantes.split(" ").length/(n-r):0;return{minuto:r,participacion:Math.min(100,a*10)}})}function Tst(e){const t=new Map,r={preguntas_abiertas:/(?:pregunt[aó]|cu[áa]l|qu[ée]|c[óo]mo|por qu[ée]|explica)/gi,interrogacion_sucesiva:/(?:entonces|y luego|qu[ée] m[áa]s|profundiza|explica mejor)/gi,ejemplos_contextualizados:/(?:ejemplo|caso|situaci[óo]n|contexto real|en la vida)/gi,feedback_inmediato:/(?:bien|correcto|exacto|muy bien|as[íi] es|mejorar[íi]a)/gi};for(const[n,a]of Object.entries(r)){const s=e.match(a);t.set(n,s?s.length:0)}return t}async function jst(e,t){var i;const r={stats:{docenteId:e.docenteInfo||"",curso:e.cursoInfo||"",asignatura:e.asignaturaInfo||"",conteo_observaciones:1,uso_preguntas_abiertas_pct:0,uso_interrogacion_sucesiva_pct:0,uso_ejemplos_contextualizados_pct:0,feedback_inmediato_pct:0,min_interaccion:0,min_explicacion:0,participacion_promedio:0},charts:{participacion_por_minuto:[],estrategias_frecuencia:[],indicadores_cumplimiento:[],nube_palabras:[]},summary:{fortalezas:[],mejoras:[],recomendaciones:[]},alerts:[],traza:{modelo:"gemini-2.5-flash-lite",version_prompt:"v1"}};if(e.detallesObservacion){r.charts.participacion_por_minuto=Bst(e.detallesObservacion);let o=0,c=0;e.detallesObservacion.forEach(u=>{const[d,f]=u.minuto.split("-").map(Number),h=f-d;u.accionesEstudiantes.length>u.accionesDocente.length?o+=h:c+=h}),r.stats.min_interaccion=o,r.stats.min_explicacion=c}const n=new Map;let a=0;(i=e.detallesObservacion)==null||i.forEach(o=>{Tst(o.accionesDocente).forEach((u,d)=>{n.set(d,(n.get(d)||0)+u)}),a+=o.accionesDocente.length}),n.forEach((o,c)=>{const u=a>0?o/a*100:0;switch(r.charts.estrategias_frecuencia.push({estrategia:c,porcentaje:Math.round(u*100)/100,conteo:o}),c){case"preguntas_abiertas":r.stats.uso_preguntas_abiertas_pct=u;break;case"interrogacion_sucesiva":r.stats.uso_interrogacion_sucesiva_pct=u;break;case"ejemplos_contextualizados":r.stats.uso_ejemplos_contextualizados_pct=u;break;case"feedback_inmediato":r.stats.feedback_inmediato_pct=u;break}}),r.charts.participacion_por_minuto.length>0&&(r.stats.participacion_promedio=r.charts.participacion_por_minuto.reduce((o,c)=>o+c.participacion,0)/r.charts.participacion_por_minuto.length);const s=[...n.entries()].sort(([,o],[,c])=>c-o);return r.summary.fortalezas=s.slice(0,3).map(([o])=>{switch(o){case"preguntas_abiertas":return"Uso efectivo de preguntas abiertas para promover el pensamiento crítico";case"interrogacion_sucesiva":return"Buena secuencia de preguntas para profundizar la comprensión";case"ejemplos_contextualizados":return"Excelente uso de ejemplos contextualizados";case"feedback_inmediato":return"Retroalimentación inmediata y efectiva";default:return`Buen uso de ${o.replace(/_/g," ")}`}}),r.summary.mejoras=s.slice(-3).map(([o])=>{switch(o){case"preguntas_abiertas":return"Aumentar el uso de preguntas abiertas";case"interrogacion_sucesiva":return"Desarrollar más secuencias de preguntas";case"ejemplos_contextualizados":return"Incorporar más ejemplos contextualizados";case"feedback_inmediato":return"Proporcionar más retroalimentación inmediata";default:return`Incrementar el uso de ${o.replace(/_/g," ")}`}}),r.summary.recomendaciones=r.summary.mejoras.map(o=>o.includes("preguntas abiertas")?"Preparar 2-3 preguntas desafiantes por segmento de clase":o.includes("secuencias de preguntas")?'Implementar la técnica de "¿Por qué?" en cascada':o.includes("ejemplos contextualizados")?"Vincular cada concepto con situaciones de la vida real":"Establecer puntos de verificación cada 10-15 minutos"),r.stats.participacion_promedio<30&&r.alerts.push("Baja participación estudiantil detectada"),r.stats.min_explicacion>r.stats.min_interaccion*2&&r.alerts.push("Alto tiempo de explicación vs. interacción"),r}const Ist=({acompanamientos:e,ciclosOPR:t,standaloneCiclos:r})=>{const[n,a]=S.useState(null),[s,i]=S.useState(null),[o,c]=S.useState(!1),u=e.length,d=Object.values(t).reduce((y,w)=>y+w.length,0)+r.length,f=[...Object.values(t).flat(),...r],h=new Set([...e.map(y=>y.docente),...f.map(y=>y.docenteInfo)]).size,m=f.reduce((y,w)=>{const _=new Date(w.fecha).toLocaleDateString("es-ES",{month:"long"});return y[_]=(y[_]||0)+1,y},{}),g=f.reduce((y,w)=>(w.asignaturaInfo&&(y[w.asignaturaInfo]=(y[w.asignaturaInfo]||0)+1),y),{}),x=Object.entries(g).sort(([,y],[,w])=>w-y).slice(0,5);f.reduce((y,w)=>{if(!w.horaInicio||!w.horaTermino)return y;const _=new Date("2000/01/01 "+w.horaInicio),B=(new Date("2000/01/01 "+w.horaTermino).getTime()-_.getTime())/(1e3*60);return y+B},0)/f.length;const v=f.filter(y=>{var w,_,T;return((w=y.retroalimentacion)==null?void 0:w.exito)&&((_=y.retroalimentacion)==null?void 0:_.modelo)&&((T=y.retroalimentacion)==null?void 0:T.foco)}).length;return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/50 rounded-lg",children:l.jsx(nf,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Acompañamientos"}),l.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u})]})]})}),l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/50 rounded-lg",children:l.jsx(ug,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Ciclos OPR"}),l.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:d})]})]})}),l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:l.jsx(hc,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docentes Observados"}),l.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:h})]})]})}),l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/50 rounded-lg",children:l.jsx(io,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Retroalimentación Completa"}),l.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:v})]})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[l.jsx(id,{className:"w-5 h-5 text-indigo-600"}),"Ciclos por Mes"]}),l.jsx("div",{className:"space-y-2",children:Object.entries(m).map(([y,w])=>l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 capitalize",children:y}),l.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:w})]}),l.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-2 bg-indigo-600 dark:bg-indigo-500 rounded-full",style:{width:`${w/d*100}%`}})})]})},y))})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[l.jsx(L2,{className:"w-5 h-5 text-purple-600"}),"Análisis Inteligente"]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-2",children:"Seleccionar Ciclo OPR para Análisis"}),l.jsxs("select",{className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",value:(s==null?void 0:s.id)||"",onChange:y=>{const w=f.find(_=>_.id===y.target.value);i(w||null)},children:[l.jsx("option",{value:"",children:"Seleccione un ciclo..."}),f.map(y=>l.jsxs("option",{value:y.id,children:[y.docenteInfo," - ",new Date(y.fecha).toLocaleDateString()]},y.id))]})]}),s&&!n&&l.jsx("button",{onClick:async()=>{c(!0);try{const y=f.filter(_=>_.docenteInfo===s.docenteInfo&&_.id!==s.id),w=await jst(s,y);a(w)}catch(y){console.error("Error al analizar ciclo:",y)}finally{c(!1)}},className:"w-full py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors flex items-center justify-center gap-2",disabled:o,children:o?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Analizando..."]}):l.jsxs(l.Fragment,{children:[l.jsx(L2,{className:"w-4 h-4"}),"Analizar Ciclo"]})}),n&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[l.jsx("h4",{className:"text-sm font-medium text-purple-700 dark:text-purple-300 mb-2",children:"Participación"}),l.jsxs("div",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:[n.stats.participacion_promedio.toFixed(1),"%"]})]}),l.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[l.jsx("h4",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 mb-2",children:"Interacción vs Explicación"}),l.jsxs("div",{className:"text-lg font-medium text-blue-900 dark:text-blue-100",children:[n.stats.min_interaccion,"min / ",n.stats.min_explicacion,"min"]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("h4",{className:"text-sm font-medium text-green-700 dark:text-green-300 mb-2 flex items-center gap-1",children:[l.jsx(io,{className:"w-4 h-4"})," Fortalezas"]}),l.jsx("ul",{className:"space-y-2",children:n.summary.fortalezas.map((y,w)=>l.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[l.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),y]},w))})]}),l.jsxs("div",{children:[l.jsxs("h4",{className:"text-sm font-medium text-amber-700 dark:text-amber-300 mb-2 flex items-center gap-1",children:[l.jsx(K1,{className:"w-4 h-4"})," Áreas de Mejora"]}),l.jsx("ul",{className:"space-y-2",children:n.summary.mejoras.map((y,w)=>l.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[l.jsx("span",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full"}),y]},w))})]})]}),n.alerts.length>0&&l.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[l.jsxs("h4",{className:"text-sm font-medium text-red-700 dark:text-red-300 mb-2 flex items-center gap-1",children:[l.jsx(rf,{className:"w-4 h-4"})," Alertas"]}),l.jsx("ul",{className:"space-y-2",children:n.alerts.map((y,w)=>l.jsxs("li",{className:"text-sm text-red-600 dark:text-red-300 flex items-center gap-2",children:[l.jsx("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full"}),y]},w))})]}),l.jsxs("div",{children:[l.jsxs("h4",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 mb-2 flex items-center gap-1",children:[l.jsx(BN,{className:"w-4 h-4"})," Recomendaciones"]}),l.jsx("ul",{className:"space-y-2",children:n.summary.recomendaciones.map((y,w)=>l.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[l.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),y]},w))})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[l.jsx(df,{className:"w-5 h-5 text-amber-600"}),"Asignaturas Más Observadas"]}),l.jsx("div",{className:"space-y-2",children:x.map(([y,w])=>l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:y}),l.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:w})]}),l.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-2 bg-amber-600 dark:bg-amber-500 rounded-full",style:{width:`${w/Math.max(...Object.values(g))*100}%`}})})]})},y))})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[l.jsx(BN,{className:"w-5 h-5 text-blue-600"}),"Últimos Ciclos OPR"]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docente"}),l.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Fecha"}),l.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Asignatura"}),l.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Estado"})]})}),l.jsx("tbody",{children:f.sort((y,w)=>new Date(w.fecha).getTime()-new Date(y.fecha).getTime()).slice(0,5).map(y=>{var w;return l.jsxs("tr",{className:"border-t dark:border-slate-700",children:[l.jsx("td",{className:"py-2 px-3 text-sm text-slate-900 dark:text-slate-300",children:y.docenteInfo}),l.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:new Date(y.fecha).toLocaleDateString()}),l.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:y.asignaturaInfo}),l.jsx("td",{className:"py-2 px-3",children:(w=y.retroalimentacion)!=null&&w.exito?l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded",children:[l.jsx(io,{className:"w-3 h-3"})," Completado"]}):l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 rounded",children:[l.jsx(K1,{className:"w-3 h-3"})," En proceso"]})})]},y.id)})})]})})]})]})},Efe=TL(),NC="acompanamientos",up="ciclos_opr",dp=e=>{if(!e)return new Date().toISOString().split("T")[0];if(typeof e=="string")return e.includes("T")?e.split("T")[0]:e;if(typeof(e==null?void 0:e.toDate)=="function")return e.toDate().toISOString().split("T")[0];try{return new Date(e).toISOString().split("T")[0]}catch{return new Date().toISOString().split("T")[0]}},Cfe=e=>{const t=e.lastIndexOf("."),r=t>0?e.substring(0,t):e,n=t>0?e.substring(t):"";return r.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"").substring(0,50)+n.toLowerCase()},Fst=(e,t,r)=>{const n=(e||"general").replace(/[^a-zA-Z0-9-]/g,"_"),a=(t||"temp").replace(/[^a-zA-Z0-9-]/g,"_"),s=Cfe(r);return`videos_opr/${n}/${a}/${s}`},Ost=async(e,t,r)=>{try{if(!MO.currentUser)throw new Error("Usuario no autenticado. Por favor, inicia sesión nuevamente.");if(!e)throw new Error("No se proporcionó un archivo válido.");const n=["video/mp4","video/quicktime","video/x-msvideo","video/x-m4v"],a=500*1024*1024;if(e.size>a)throw new Error(`El archivo es demasiado grande. Máximo permitido: ${(a/1024/1024).toFixed(0)}MB`);if(!n.includes(e.type))throw new Error("Tipo de archivo no permitido. Solo se aceptan MP4, MOV, AVI o M4V.");let s="";const i=(t||"").split("/");if(i.length>=4&&i[0]==="videos_opr"){const d=i[1],f=i[2],h=i.slice(3).join("/");s=Fst(d,f,h)}else{const d=Date.now(),f=Cfe(e.name);s=`videos_opr/general/${d}_${f}`}const o=$E(Efe,s),c={contentType:e.type,cacheControl:"public, max-age=31536000",customMetadata:{originalName:e.name,uploadedBy:MO.currentUser.uid,uploadDate:new Date().toISOString(),fileSize:String(e.size)}},u=X2e(o,e,c);return new Promise((d,f)=>{let h=-1;u.on("state_changed",m=>{const g=m.bytesTransferred/m.totalBytes*100,x=Math.floor(g);r&&x!==h&&(h=x,r(x))},m=>{let g="Error desconocido durante la subida.";switch(m==null?void 0:m.code){case"storage/unauthorized":g="No tienes permisos para subir archivos. Verifica las reglas de Firebase Storage.";break;case"storage/canceled":g="La subida fue cancelada por el usuario.";break;case"storage/quota-exceeded":g="Se agotó el espacio de almacenamiento disponible.";break;case"storage/retry-limit-exceeded":g="Se agotaron los reintentos. Verifica tu conexión a internet.";break;default:m!=null&&m.message&&(g=m.message);break}f(new Error(g))},async()=>{try{const m=await Yk(u.snapshot.ref);d(m)}catch{f(new Error("El archivo se subió, pero no se pudo obtener la URL de descarga."))}})})}catch(n){const a=(n==null?void 0:n.message)||"Error inesperado al procesar el archivo.";throw new Error(a)}},m7=async e=>{try{const t=$E(Efe,e),{items:r,prefixes:n}=await Y2e(t);await Promise.all(r.map(a=>J2e(a))),await Promise.all(n.map(a=>m7(a.fullPath)))}catch{}},Dst=async()=>{try{const e=$t(wt(ht,NC),xr("fecha","desc"));return(await Hn(e)).docs.map(n=>{const a=n.data();return{id:n.id,...a,fecha:dp(a==null?void 0:a.fecha)}}).sort((n,a)=>n.fecha<a.fecha?1:n.fecha>a.fecha?-1:0)}catch{throw new Error("No se pudieron cargar los acompañamientos")}},Pst=async e=>{try{const t={...e,fecha:ir.fromDate(new Date(e.fecha)),fechaCreacion:ir.now()},r=await _n(wt(ht,NC),t);return{...e,id:r.id,fecha:dp(e.fecha)}}catch{throw new Error("No se pudo crear el acompañamiento")}},Rst=async(e,t)=>{try{const r={...t,...t.fecha?{fecha:ir.fromDate(new Date(t.fecha))}:{},fechaModificacion:ir.now()};await du(cr(ht,NC,e),r)}catch{throw new Error("No se pudo actualizar el acompañamiento")}},Lst=async e=>{try{const t=$t(wt(ht,up),Qr("acompanamientoId","==",e)),r=await Hn(t),n=yx(ht);r.forEach(a=>n.delete(cr(ht,up,a.id))),await n.commit(),await m7(`videos_opr/${e}`),await is(cr(ht,NC,e))}catch{throw new Error("No se pudo eliminar el acompañamiento y sus datos asociados")}},BY=async e=>{var t;try{if(!(e!=null&&e.fecha))throw new Error("Falta fecha al crear ciclo OPR.");const r={...e,acompanamientoId:String(e.acompanamientoId||""),fecha:ir.fromDate(new Date(e.fecha)),fechaCreacion:ir.now()};(t=e==null?void 0:e.seguimiento)!=null&&t.fecha&&(r.seguimiento={...e.seguimiento,fecha:ir.fromDate(new Date(e.seguimiento.fecha))});const n=await _n(wt(ht,up),r);return{...e,id:n.id,acompanamientoId:String(e.acompanamientoId||""),fecha:dp(e.fecha)}}catch{throw new Error("No se pudo crear el ciclo OPR")}},Mst=async(e,t)=>{var r;try{const n={...t};t.fecha&&(n.fecha=ir.fromDate(new Date(t.fecha))),(r=t.seguimiento)!=null&&r.fecha&&(n.seguimiento={...t.seguimiento,fecha:ir.fromDate(new Date(t.seguimiento.fecha))}),n.fechaModificacion=ir.now(),await du(cr(ht,up,e),n)}catch{throw new Error("No se pudo actualizar el ciclo OPR")}},Ust=async e=>{try{const t=$t(wt(ht,up),Qr("acompanamientoId","==",e),xr("fecha","desc"));return(await Hn(t)).docs.map(a=>{var o;const s=a.data(),i={id:a.id,...s,fecha:dp(s==null?void 0:s.fecha)};return(o=s==null?void 0:s.seguimiento)!=null&&o.fecha&&(i.seguimiento={...s.seguimiento,fecha:dp(s.seguimiento.fecha)}),i})}catch{throw new Error("No se pudieron cargar los ciclos OPR. Revisa el índice compuesto (acompanamientoId + fecha).")}},Qst=async()=>{try{const e=$t(wt(ht,up),Qr("acompanamientoId","==",""),xr("fecha","desc"));return(await Hn(e)).docs.map(n=>{var i;const a=n.data(),s={id:n.id,...a,fecha:dp(a==null?void 0:a.fecha)};return(i=a==null?void 0:a.seguimiento)!=null&&i.fecha&&(s.seguimiento={...a.seguimiento,fecha:dp(a.seguimiento.fecha)}),s})}catch(e){throw console.error("Error fetching standalone OPR cycles:",e),new Error("No se pudieron cargar los ciclos OPR independientes.")}},TY=async e=>{try{const t=await bx(cr(ht,up,e));if(!t.exists())return;const r=t.data(),n=(r==null?void 0:r.acompanamientoId)||"general";await m7(`videos_opr/${n}/${e}`),await is(cr(ht,up,e))}catch{throw new Error("No se pudo eliminar el ciclo OPR")}},Hst=async e=>{try{const t=$t(wt(ht,NC),Qr("docente","==",e),xr("fecha","desc"));return(await Hn(t)).docs.map(n=>{const a=n.data();return{id:n.id,...a,fecha:dp(a==null?void 0:a.fecha)}})}catch{throw new Error("No se pudieron cargar los acompañamientos del docente")}},Vst=async e=>{try{const t=$t(wt(ht,"rubricas_personalizadas"),Qr("docente","==",e)),r=await Hn(t);if(r.empty)return null;const n=r.docs[0].data();return(n==null?void 0:n.rubrica)??null}catch{return null}},zst=async()=>await ufe(),$st=({label:e,onFileChange:t,onLinkChange:r,uploadedUrl:n,onRemove:a,isUploading:s,accept:i="video/mp4,video/quicktime,video/avi,video/mov",error:o,progress:c=0,allowLink:u=!1})=>{const[d,f]=S.useState(!1),[h,m]=S.useState(!1),[g,x]=S.useState(""),v=`file-upload-${e.replace(/\s+/g,"-")}`,y=E=>{E.preventDefault(),E.stopPropagation(),E.type==="dragenter"||E.type==="dragover"?f(!0):E.type==="dragleave"&&f(!1)},w=E=>{if(E.preventDefault(),E.stopPropagation(),f(!1),E.dataTransfer.files&&E.dataTransfer.files[0]&&!s){const N=E.dataTransfer.files[0];T(N)}},_=E=>{if(E.target.files&&E.target.files[0]&&!s){const N=E.target.files[0];T(N)}},T=E=>{if(E.size>524288e3){alert(`El archivo es demasiado grande. Tamaño máximo: ${524288e3/1024/1024}MB`);return}if(!["video/mp4","video/quicktime","video/avi","video/mov"].includes(E.type)){alert("Solo se aceptan archivos de video (MP4, MOV, AVI, QuickTime)");return}t(E)},B=()=>o?"bg-red-500":c===100?"bg-green-500":"bg-blue-500",j=()=>{if(!(!g||!r)){if(!g.startsWith("http://")&&!g.startsWith("https://")){alert("Por favor ingresa una URL válida que comience con http:// o https://");return}r(g),m(!1),x("")}};return l.jsxs("div",{className:"w-full",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300",children:e}),u&&!n&&!s&&l.jsx("button",{type:"button",onClick:()=>m(!h),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400",children:h?"Cancelar":"Insertar enlace"})]}),h&&l.jsxs("div",{className:"flex gap-2 mb-4",children:[l.jsx("input",{type:"url",value:g,onChange:E=>x(E.target.value),placeholder:"https://...",className:"flex-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{type:"button",onClick:j,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Guardar"})]}),n?l.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-md bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700",children:[l.jsx(io,{className:"w-5 h-5 text-green-600"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-green-700 dark:text-green-300 hover:underline font-medium",children:n.startsWith("http")?"Ver video enlazado":"Ver video cargado"}),l.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:n.startsWith("http")?"Enlace guardado exitosamente":"Video subido exitosamente"})]}),l.jsx("button",{type:"button",onClick:a,className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar video",children:l.jsx(Do,{className:"w-4 h-4"})})]}):l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:`relative border-2 border-dashed rounded-lg transition-colors ${d?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":s?"border-amber-400 bg-amber-50 dark:bg-amber-900/20":o?"border-red-400 bg-red-50 dark:bg-red-900/20":"border-slate-300 dark:border-slate-600 hover:border-slate-400 dark:hover:border-slate-500"} ${s?"cursor-not-allowed":"cursor-pointer"}`,onDragEnter:y,onDragLeave:y,onDragOver:y,onDrop:w,onClick:()=>{var E;return!s&&((E=document.getElementById(v))==null?void 0:E.click())},children:[l.jsx("div",{className:"flex flex-col items-center justify-center p-6",children:s?l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mx-auto mb-2"}),l.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 font-medium",children:"Subiendo video..."}),l.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1",children:[c.toFixed(1),"% completado"]})]}):o?l.jsxs("div",{className:"text-center",children:[l.jsx(rf,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),l.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 font-medium",children:"Error al subir"}),l.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Haz clic para intentar nuevamente"})]}):l.jsxs("div",{className:"text-center",children:[l.jsx(KE,{className:"h-8 w-8 text-slate-400 mx-auto mb-2"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 font-medium",children:"Arrastra un video aquí"}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"o haz clic para seleccionar"}),l.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-2",children:"MP4, MOV, AVI (máx. 500MB)"})]})}),l.jsx("input",{id:v,type:"file",onChange:_,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:s,accept:i,style:{display:"none"}})]}),s&&l.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:l.jsx("div",{className:`${B()} h-2 rounded-full transition-all duration-300`,style:{width:`${c}%`}})}),o&&l.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:[l.jsx(rf,{className:"w-4 h-4 text-red-500"}),l.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:o})]})]})]})},Gst=({acompanamiento:e,cicloToEdit:t,onSave:r,onCancel:n,profesores:a})=>{const[s,i]=S.useState(!1),[o,c]=S.useState({}),[u,d]=S.useState({}),[f,h]=S.useState({}),[m,g]=S.useState({docente:e.docente||"",curso:e.curso||"",asignatura:e.asignatura||""}),x=S.useMemo(()=>({registroN:1,nombreCiclo:"",fecha:new Date().toISOString().split("T")[0],horaInicio:"",horaTermino:"",videoObservacionUrl:"",detallesObservacion:[{id:`row_${Date.now()}`,minuto:"0-5",accionesDocente:"",accionesEstudiantes:"",actividades:""}],retroalimentacion:{exito:"",foco:"",elementosIdentificar:""},planificacion:{preparacion:"",objetivo:"",actividad:"",tiempo:""},seguimiento:{fecha:"",curso:m.curso||"",profesor:m.docente||"",firma:""},acompanamientoId:e.id&&!e.id.startsWith("temp-")?e.id:""}),[e,m]),[v,y]=S.useState(t||x);S.useEffect(()=>{t?(y(t),(t.acompanamientoId===""||!t.acompanamientoId)&&g({docente:t.docenteInfo||"",curso:t.cursoInfo||"",asignatura:t.asignaturaInfo||""})):y(x)},[t,x]);const w=P=>{const{name:R,value:W}=P.target,V=R.split(".");V.length>1?y(G=>{const z=JSON.parse(JSON.stringify(G));let K=z;for(let J=0;J<V.length-1;J++)K=K[V[J]];return K[V[V.length-1]]=W,z}):y(G=>({...G,[R]:W}))},_=(P,R,W)=>{y(V=>({...V,detallesObservacion:V.detallesObservacion.map(G=>G.id===P?{...G,[R]:W}:G)}))},T=()=>{const P=v.detallesObservacion[v.detallesObservacion.length-1],R=P&&parseInt(P.minuto.split("-")[1],10)||0,W=`${R+1}-${R+5}`;y(V=>({...V,detallesObservacion:[...V.detallesObservacion,{id:`row_${Date.now()}`,minuto:W,accionesDocente:"",accionesEstudiantes:"",actividades:""}]}))},B=P=>{y(R=>({...R,detallesObservacion:R.detallesObservacion.filter(W=>W.id!==P)}))},j=async(P,R)=>{h(W=>({...W,[P]:null})),c(W=>({...W,[P]:!0})),d(W=>({...W,[P]:0}));try{const W=Date.now(),V=R.name.toLowerCase().replace(/[^a-z0-9.]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,""),G=e.id&&!e.id.startsWith("temp-")?e.id.replace(/[^a-zA-Z0-9-]/g,"_"):"general",z=v.id?v.id.replace(/[^a-zA-Z0-9-]/g,"_"):"temp",K=`videos_opr/${G}/${z}/${W}_${V}`,J=await Ost(R,K,te=>{d(M=>({...M,[P]:te}))});E(P,J),d(te=>({...te,[P]:100}))}catch(W){const V=(W==null?void 0:W.message)||"Error desconocido al subir el archivo";h(G=>({...G,[P]:V})),alert(`Error al subir el video: ${V}`)}finally{c(W=>({...W,[P]:!1})),setTimeout(()=>{d(W=>({...W,[P]:0}))},2e3)}},E=(P,R)=>{const W=P.split(".");W.length>1?y(V=>{const G=JSON.parse(JSON.stringify(V));let z=G;for(let K=0;K<W.length-1;K++)z=z[W[K]];return z[W[W.length-1]]=R,G}):y(V=>({...V,[P]:R}))},N=P=>{const R=P.split(".");R.length>1?y(W=>{const V=JSON.parse(JSON.stringify(W));let G=V;for(let z=0;z<R.length-1;z++)G=G[R[z]];return G[R[R.length-1]]="",V}):y(W=>({...W,[P]:""})),h(W=>({...W,[P]:null})),d(W=>({...W,[P]:0}))},I=async(P,R,W)=>{if(!W||!W.trim())return W;const V=`Mejora la redacción del siguiente texto con un tono técnico-pedagógico propio de informes educativos. Mantén el sentido original y NO agregues información nueva ni ejemplos inventados. Devuélvelo como un texto breve, claro y directo. Texto (${R}):

"""${W}"""`;try{return(await P.generateContent(V)).response.text()}catch(G){return console.error(`Error improving text for ${R}:`,G),W}},L=async()=>{var P,R;i(!0);try{const W="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",G=new ps(W).getGenerativeModel({model:"gemini-1.5-flash-latest"}),z=v.retroalimentacion,K=v.planificacion,J=await Promise.all([I(G,"Éxito",z.exito),I(G,"Modelo",z.modelo),I(G,"Foco",z.foco),I(G,"Elementos a identificar",z.elementosIdentificar),I(G,"Brecha - Preguntas",((P=z.brecha)==null?void 0:P.preguntas)||""),I(G,"Brecha - Indicadores",((R=z.brecha)==null?void 0:R.indicadores)||""),I(G,"Planificación - Preparación",K.preparacion),I(G,"Planificación - Objetivo",K.objetivo),I(G,"Planificación - Actividad",K.actividad),I(G,"Planificación - Tiempo",K.tiempo)]);y(te=>({...te,retroalimentacion:{...te.retroalimentacion,exito:J[0],modelo:J[1],foco:J[2],elementosIdentificar:J[3],brecha:{...te.retroalimentacion.brecha,preguntas:J[4],indicadores:J[5]}},planificacion:{...te.planificacion,preparacion:J[6],objetivo:J[7],actividad:J[8],tiempo:J[9]}})),alert("Textos mejorados exitosamente con IA")}catch(W){console.error(W),alert("No se pudo mejorar la redacción. Intenta nuevamente.")}finally{i(!1)}},D=()=>{const P=new br,R=P.internal.pageSize.getWidth(),W=15,V=R-W*2;let G=20;const z=M=>{G>260&&(P.addPage(),G=20),P.setFontSize(14),P.setFont("helvetica","bold"),P.text(M,W,G),G+=10},K=(M,H="")=>{if(!M)return;G>270&&(P.addPage(),G=20),P.setFontSize(10),P.setFont("helvetica","bold"),P.text(H,W,G),P.setFont("helvetica","normal");const Y=P.splitTextToSize(M,V-(H?15:0));P.text(Y,W+(H?15:0),G),G+=Y.length*5+4};P.setFontSize(18),P.setFont("helvetica","bold"),P.text("Informe de Ciclo OPR",R/2,G,{align:"center"}),G+=15,z("1. Datos Generales");const J=[["Docente:",m.docente],["Curso:",m.curso],["Asignatura:",m.asignatura],["Fecha:",new Date(v.fecha).toLocaleDateString("es-CL")],["Hora:",`${v.horaInicio} - ${v.horaTermino}`],["Ciclo:",v.nombreCiclo]];Io(P,{body:J,startY:G,theme:"plain",styles:{fontSize:10},columnStyles:{0:{fontStyle:"bold"}}}),G=P.lastAutoTable.finalY+10,z("2. Registro Detallado de Observación");const te=v.detallesObservacion.map(M=>[M.minuto,M.accionesDocente,M.accionesEstudiantes,M.actividades]);Io(P,{head:[["Minuto","Acciones del Docente","Acciones de Estudiantes","Actividades"]],body:te,startY:G,theme:"grid",headStyles:{fillColor:[41,128,185],textColor:255},styles:{fontSize:9,cellPadding:2},didDrawPage:M=>{var H;G=((H=M.cursor)==null?void 0:H.y)||20}}),G=P.lastAutoTable.finalY+10,z("3. Retroalimentación Docente"),K(v.retroalimentacion.exito,"Éxito:"),K(v.retroalimentacion.modelo,"Modelo:"),K(v.retroalimentacion.foco,"Foco:"),K(v.retroalimentacion.elementosIdentificar,"Elementos a Identificar:"),G+=5,P.setFontSize(11),P.setFont("helvetica","bold"),P.text("Análisis de Brecha",W,G),G+=7,K(`${v.retroalimentacion.brecha.minutoInicial} a ${v.retroalimentacion.brecha.minutoFinal}`,"Minutos:"),K(v.retroalimentacion.brecha.preguntas,"Preguntas:"),K(v.retroalimentacion.brecha.indicadores,"Indicadores:"),z("4. Planificación de Práctica"),K(v.planificacion.preparacion,"Preparación:"),K(v.planificacion.objetivo,"Objetivo:"),K(v.planificacion.actividad,"Actividad:"),K(v.planificacion.tiempo,"Tiempo:"),z("5. Seguimiento"),K(new Date(v.seguimiento.fecha).toLocaleDateString("es-CL"),"Fecha:"),K(v.seguimiento.firma,"Firma (Registrado por):"),P.save(`Informe_OPR_${m.docente}_${v.fecha}.pdf`)},k=async P=>{if(P.preventDefault(),!m.docente||!m.curso||!m.asignatura){alert("Por favor, complete Docente, Curso y Asignatura");return}if(!v.nombreCiclo||!v.fecha){alert("Por favor, complete el nombre del ciclo y la fecha");return}const R={...v,docenteInfo:m.docente,cursoInfo:m.curso,asignaturaInfo:m.asignatura,seguimiento:{...v.seguimiento,profesor:m.docente,curso:m.curso}};try{await r(R)}catch(W){console.error("Error al guardar ciclo OPR:",W),alert("Error al guardar el ciclo OPR. Intenta nuevamente.")}};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-lg animate-fade-in",children:[(!e.id||e.id.startsWith("temp-"))&&l.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-slate-50 dark:bg-slate-900/30",children:[l.jsx("h4",{className:"text-lg font-semibold mb-3 text-slate-700 dark:text-slate-300",children:"Datos Básicos del Ciclo OPR"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),l.jsxs("select",{value:m.docente,onChange:P=>g(R=>({...R,docente:P.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[l.jsx("option",{value:"",children:"Seleccione un curso"}),Ac.map(P=>l.jsx("option",{value:P,children:P},P))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsxs("select",{value:m.asignatura,onChange:P=>g(R=>({...R,asignatura:P.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[l.jsx("option",{value:"",children:"Seleccione una asignatura"}),jo.map(P=>l.jsx("option",{value:P,children:P},P))]})]})]})]}),l.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-blue-50 dark:bg-blue-900/30",children:[l.jsx("h4",{className:"text-lg font-semibold mb-2 text-blue-700 dark:text-blue-300",children:"Asistente IA del Ciclo OPR"}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[l.jsxs("button",{type:"button",onClick:L,className:"bg-blue-500 hover:bg-blue-600 disabled:bg-blue-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:s,children:[l.jsx(LL,{className:"w-4 h-4"}),s?"Mejorando redacción...":"Mejorar Redacción del Ciclo"]}),l.jsxs("button",{type:"button",onClick:D,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[l.jsx(Zm,{className:"w-4 h-4"}),"Descargar Informe PDF"]})]}),l.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Usa la IA para mejorar la redacción de los textos ya escritos. Luego, descarga el informe completo en PDF."})]}),l.jsxs("form",{onSubmit:k,className:"space-y-8",children:[l.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:[t?"Editando":"Nuevo"," Ciclo OPR"]}),l.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[l.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[l.jsx(ug,{className:"w-5 h-5 text-amber-500"})," Datos Generales"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsx("input",{type:"text",name:"nombreCiclo",value:v.nombreCiclo,onChange:w,placeholder:"Nombre o N° del Ciclo",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),l.jsx("input",{type:"date",name:"fecha",value:v.fecha,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),l.jsx("input",{type:"number",name:"registroN",value:v.registroN,onChange:w,placeholder:"Registro de Observación N°",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",min:1}),l.jsx("input",{type:"time",name:"horaInicio",value:v.horaInicio,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("input",{type:"time",name:"horaTermino",value:v.horaTermino,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx($st,{label:"Video de observación de clase",onFileChange:P=>j("videoObservacionUrl",P),onLinkChange:P=>E("videoObservacionUrl",P),uploadedUrl:v.videoObservacionUrl,onRemove:()=>N("videoObservacionUrl"),isUploading:!!o.videoObservacionUrl,error:f.videoObservacionUrl,progress:u.videoObservacionUrl||0,allowLink:!0})]}),l.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[l.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[l.jsx(Xg,{className:"w-5 h-5 text-blue-500"})," Registro Detallado de Observación"]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b dark:border-slate-600",children:[l.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Minuto"}),l.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones del Docente"}),l.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones de Estudiantes"}),l.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Actividades"}),l.jsx("th",{className:"p-2"})]})}),l.jsx("tbody",{children:v.detallesObservacion.map(P=>l.jsxs("tr",{className:"border-b dark:border-slate-700",children:[l.jsx("td",{className:"p-2",children:l.jsx("input",{type:"text",value:P.minuto,onChange:R=>_(P.id,"minuto",R.target.value),className:"w-24 border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"0-5"})}),l.jsx("td",{className:"p-2",children:l.jsx("textarea",{value:P.accionesDocente,onChange:R=>_(P.id,"accionesDocente",R.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones del docente..."})}),l.jsx("td",{className:"p-2",children:l.jsx("textarea",{value:P.accionesEstudiantes,onChange:R=>_(P.id,"accionesEstudiantes",R.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones de estudiantes..."})}),l.jsx("td",{className:"p-2",children:l.jsx("textarea",{value:P.actividades,onChange:R=>_(P.id,"actividades",R.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir actividades realizadas..."})}),l.jsx("td",{className:"p-2",children:v.detallesObservacion.length>1&&l.jsx("button",{type:"button",onClick:()=>B(P.id),className:"text-red-500 hover:text-red-700 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar fila",children:l.jsx(Do,{className:"w-4 h-4"})})})]},P.id))})]})}),l.jsxs("button",{type:"button",onClick:T,className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 flex items-center gap-1 transition-colors",children:[l.jsx(LO,{className:"w-4 h-4"})," Agregar Fila"]})]}),l.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[l.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[l.jsx(Ine,{className:"w-5 h-5 text-green-600"})," Retroalimentación Docente"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Éxito"}),l.jsx("textarea",{name:"retroalimentacion.exito",value:v.retroalimentacion.exito,onChange:w,placeholder:"Describir los aspectos exitosos observados en la clase...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Modelo"}),l.jsx("textarea",{name:"retroalimentacion.modelo",value:v.retroalimentacion.modelo,onChange:w,placeholder:"Modelo pedagógico o metodología observada...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Foco"}),l.jsx("textarea",{name:"retroalimentacion.foco",value:v.retroalimentacion.foco,onChange:w,placeholder:"Foco principal de la observación y retroalimentación...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Elementos a Identificar"}),l.jsx("textarea",{name:"retroalimentacion.elementosIdentificar",value:v.retroalimentacion.elementosIdentificar,onChange:w,placeholder:"Elementos específicos que el docente debe identificar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),l.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[l.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[l.jsx(aCe,{className:"w-5 h-5 text-purple-600"})," Planificación de Práctica y Seguimiento"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Preparación"}),l.jsx("textarea",{name:"planificacion.preparacion",value:v.planificacion.preparacion,onChange:w,placeholder:"Aspectos de preparación para la próxima práctica...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Objetivo"}),l.jsx("textarea",{name:"planificacion.objetivo",value:v.planificacion.objetivo,onChange:w,placeholder:"Objetivo específico para la siguiente observación...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Actividad"}),l.jsx("textarea",{name:"planificacion.actividad",value:v.planificacion.actividad,onChange:w,placeholder:"Actividades específicas a implementar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tiempo"}),l.jsx("input",{type:"text",name:"planificacion.tiempo",value:v.planificacion.tiempo,onChange:w,placeholder:"Tiempo estimado o cronograma...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("div",{className:"p-4 border rounded-md dark:border-slate-600 bg-slate-50 dark:bg-slate-800/50 space-y-3",children:[l.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[l.jsx(hc,{className:"w-4 h-4 text-purple-500"}),"Seguimiento"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de seguimiento"}),l.jsx("input",{type:"date",name:"seguimiento.fecha",value:v.seguimiento.fecha,onChange:w,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Registrado por"}),l.jsx("input",{type:"text",name:"seguimiento.firma",value:v.seguimiento.firma,onChange:w,placeholder:"Nombre de quien registra el seguimiento...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]})]}),l.jsxs("div",{className:"flex justify-end gap-4 mt-8 pt-6 border-t dark:border-slate-700",children:[l.jsx("button",{type:"button",onClick:n,className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),l.jsxs("button",{type:"submit",className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-amber-400 transition-colors flex items-center gap-2",disabled:Object.values(o).some(Boolean),children:[Object.values(o).some(Boolean)&&l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Guardar Ciclo OPR"]})]})]})]})},Kst=()=>{const[e,t]=S.useState([]),[r,n]=S.useState([]),[a,s]=S.useState(!0),[i,o]=S.useState(!0),[c,u]=S.useState(null),[d,f]=S.useState("list"),[h,m]=S.useState(null),[g,x]=S.useState(null),[v,y]=S.useState("general"),[w,_]=S.useState(!1),[T,B]=S.useState({}),[j,E]=S.useState([]),N=a2,I=S.useMemo(()=>({fecha:new Date().toISOString().split("T")[0],docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[L,D]=S.useState(I),k=S.useCallback(async()=>{s(!0),u(null);try{const ae=await Dst();t(ae)}catch(ae){u("No se pudieron cargar los registros de acompañamiento."),console.error("❌ Error al cargar acompañamientos:",ae)}finally{s(!1)}},[]),P=S.useCallback(async()=>{o(!0);try{const le=(await zst()).filter(ie=>ie.profile==="PROFESORADO").map(ie=>ie.nombreCompleto).sort();n(le)}catch(ae){u("No se pudo cargar la lista de profesores."),console.error("❌ Error al cargar profesores:",ae)}finally{o(!1)}},[]),R=S.useCallback(async()=>{try{const ae={};for(const le of e)if(le.id)try{const ie=await Ust(le.id);ie.length>0&&(ae[le.id]=ie)}catch(ie){console.error(`Error loading OPR cycles for ${le.id}:`,ie)}try{const le=await Qst();E(le)}catch(le){console.error("Error loading standalone OPR cycles:",le),E([])}B(ae)}catch(ae){console.error("Error fetching OPR cycles:",ae)}},[e]);S.useEffect(()=>{k(),P()},[k,P]),S.useEffect(()=>{e.length>0&&R()},[e,R]);const W=(ae,le)=>{if(x(ae),le)D(le),m(le.id);else{const ie={id:"temp-"+Date.now(),fecha:ae.fecha,docente:ae.docenteInfo||"",curso:ae.cursoInfo||"",asignatura:ae.asignaturaInfo||"",rubricaResultados:{},planificacionFutura:"",createdAt:new Date().toISOString(),observacionesGenerales:"",retroalimentacionConsolidada:""};D(ie),m(null)}f("form"),y("opr"),u(null)},V=async()=>{if(!("docente"in L)||!L.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar la retroalimentación.');return}_(!0),u(null);try{const ae="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",ie=new ps(ae).getGenerativeModel({model:"gemini-2.5-flash"}),ce=Object.entries(L.rubricaResultados||{}).map(([_e,Ie])=>`- ${_e}: Nivel ${Ie}`).join(`
`),Ae=`
Eres un asesor pedagógico experto. Redacta una retroalimentación consolidada y constructiva para un docente.
Contexto de la observación:
- Docente: ${L.docente}
- Asignatura: ${L.asignatura}
- Curso: ${L.curso}
- Resultados de la pauta de observación (rúbrica):
${ce||"No se completó la pauta."}
- Observaciones adicionales del evaluador:
${L.observacionesGenerales||"Sin observaciones adicionales."}

Basado en esta información, tu texto debe:
1. Iniciar con un reconocimiento positivo.
2. Mencionar 1 o 2 fortalezas clave observadas.
3. Identificar 1 o 2 áreas de mejora concretas, con un tono de sugerencia.
4. Concluir con una frase motivadora.
La respuesta debe ser solo el texto de la retroalimentación.
      `,ne=(await ie.generateContent(Ae)).response.text();D(_e=>({..._e,retroalimentacionConsolidada:ne})),alert("Retroalimentación generada exitosamente con IA.")}catch(ae){console.error("❌ Error al generar retroalimentación:",ae);const le=ae.message||"No se pudo generar la retroalimentación automática.";u(le),alert(`Error: ${le}`)}finally{_(!1)}},G=async ae=>{if(ae.preventDefault(),!("docente"in L)||!L.docente||!L.curso||!L.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}u(null);try{if(h)await Rst(h,L),alert("¡Acompañamiento actualizado correctamente!");else{const le=await Pst(L);m(le.id),D(le),alert("¡Acompañamiento guardado correctamente! Ahora puedes agregar Ciclos OPR.")}await k()}catch(le){const ie=(le==null?void 0:le.message)??"Error al guardar el registro de acompañamiento.";u(ie),console.error("❌ Error al guardar:",le),alert(`Error: ${ie}`)}},z=()=>{D(I),m(null),x(null),f("form"),y("general"),u(null)},K=ae=>{D(ae),m(ae.id),x(null),f("form"),y("general"),u(null)},J=async ae=>{if(window.confirm("¿Está seguro de que desea eliminar este registro? Esta acción no se puede deshacer."))try{await Lst(ae),await k(),alert("Registro eliminado exitosamente.")}catch(le){const ie="No se pudo eliminar el registro.";u(ie),console.error("❌ Error al eliminar:",le),alert(`Error: ${ie}`)}},te=(ae,le)=>{D(ie=>({...ie,rubricaResultados:{...ie.rubricaResultados||{},[ae]:le}}))},M=()=>{var ae;if(!("docente"in L)||!L.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar el PDF.');return}try{const le=new br,ie=le.internal.pageSize.getWidth(),ce=le.internal.pageSize.getHeight(),Ae=20,Fe=ie-Ae*2,ne=(Be,Le)=>Le+Be>ce-Ae,_e=()=>{const Be=le.getNumberOfPages();for(let Le=1;Le<=Be;Le++)le.setPage(Le),le.setFontSize(9),le.setTextColor(128),le.text(`pág. ${Le} de ${Be}`,ie-Ae,ce-10,{align:"right"})};let Ie=Ae;le.setFontSize(16),le.setFont("helvetica","bold"),le.text("INFORME DE ACOMPAÑAMIENTO DOCENTE",ie/2,Ie,{align:"center"}),Ie+=15;const Se=40;if(Io(le,{startY:Ie,head:[],body:[["Docente:",L.docente],["Curso:",L.curso],["Asignatura:",L.asignatura],["Fecha:",new Date(L.fecha).toLocaleDateString("es-CL")],["Bloques:",L.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:4},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:120}},margin:{left:Ae,right:Ae}}),Ie=le.lastAutoTable.finalY+10,Object.keys(L.rubricaResultados||{}).length>0){le.setFontSize(14),le.setFont("helvetica","bold"),le.text("Evaluación por Indicadores",Ae,Ie),Ie+=10;const Be=Object.entries(L.rubricaResultados).map(([Le,We])=>{let be;switch(We){case 1:be="Débil";break;case 2:be="Incipiente";break;case 3:be="Satisfactorio";break;case 4:be="Avanzado";break;default:be="No evaluado"}return[Le,be,We]});Io(le,{startY:Ie,head:[["Indicador","Nivel de Logro","Puntuación"]],body:Be,theme:"grid",styles:{fontSize:10,cellPadding:6,lineColor:[200,200,200],lineWidth:.1,valign:"middle"},headStyles:{fillColor:[41,128,185],textColor:255,fontSize:11,fontStyle:"bold",halign:"left"},columnStyles:{0:{cellWidth:100},1:{cellWidth:40},2:{cellWidth:30,halign:"center"}},alternateRowStyles:{fillColor:[245,247,250]},margin:{left:Ae,right:Ae}})}le.addPage(),Ie=Ae,le.setFontSize(14),le.setFont("helvetica","bold"),le.text("Observaciones Generales y Sugerencias de Mejora",Ae,Ie),Ie+=15,L.observacionesGenerales&&(le.setFontSize(12),le.setFont("helvetica","bold"),le.text("Fortalezas:",Ae,Ie),Ie+=10,le.setFont("helvetica","normal"),le.setFontSize(11),le.splitTextToSize(L.observacionesGenerales,Fe).forEach(Le=>{ne(7,Ie)&&(le.addPage(),Ie=Ae),le.text(Le,Ae,Ie,{align:"justify"}),Ie+=7}),Ie+=10),L.retroalimentacionConsolidada&&(ne(50,Ie)&&(le.addPage(),Ie=Ae),le.setFontSize(12),le.setFont("helvetica","bold"),le.text("Sugerencias de mejora:",Ae,Ie),Ie+=10,le.setFont("helvetica","normal"),le.setFontSize(11),le.splitTextToSize(L.retroalimentacionConsolidada,Fe).forEach(Le=>{ne(7,Ie)&&(le.addPage(),Ie=Ae),le.text(Le,Ae,Ie,{align:"justify"}),Ie+=7})),_e();const me=`Informe_Acompanamiento_${(ae=L.docente)==null?void 0:ae.replace(/\s+/g,"_")}_${L.curso}_${new Date().toISOString().split("T")[0]}.pdf`;le.save(me)}catch(le){console.error("❌ Error al generar PDF:",le),alert("Error al generar el PDF. Intenta nuevamente.")}},H=ae=>{D(le=>({...le,[ae.target.name]:ae.target.value}))},Y=()=>l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Módulo de Acompañamiento Docente"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>{z(),y("general")},className:"bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-600 flex items-center gap-2 transition-colors",children:[l.jsx(LO,{className:"w-5 h-5"})," Acompañamiento General"]}),l.jsxs("button",{onClick:()=>{D(I),m(null),x(null),f("form"),y("opr"),u(null)},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 flex items-center gap-2 transition-colors",children:[l.jsx(LO,{className:"w-5 h-5"})," Ciclo OPR Independiente"]})]})]}),c&&l.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(rf,{className:"w-5 h-5 text-red-500"}),l.jsx("p",{className:"text-red-700 dark:text-red-300",children:c})]})}),l.jsxs("div",{className:"mb-8",children:[l.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-4",children:[l.jsx(Wd,{className:"w-6 h-6 text-amber-500"})," Acompañamientos Generales"]}),l.jsxs("div",{className:"space-y-3",children:[a&&l.jsxs("div",{className:"flex items-center justify-center p-8",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600"}),l.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando registros..."})]}),!a&&e.filter(ae=>ae.id).length>0?l.jsx("div",{className:"grid gap-3",children:e.filter(ae=>ae.id).map(ae=>l.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:shadow-md transition-shadow",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(hc,{className:"w-4 h-4 text-amber-500"}),l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:ae.docente})]}),l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Curso:"})," ",ae.curso," •"," ",l.jsx("span",{className:"font-medium",children:"Asignatura:"})," ",ae.asignatura]}),l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(ae.fecha).toLocaleDateString("es-CL")]}),ae.bloques&&l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Bloques:"})," ",ae.bloques]}),ae.retroalimentacionConsolidada&&l.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[l.jsx(io,{className:"w-3 h-3"}),"Con retroalimentación IA"]}),T[ae.id]&&T[ae.id].length>0&&l.jsxs("p",{className:"text-blue-600 dark:text-blue-400 flex items-center gap-1",children:[l.jsx(ug,{className:"w-3 h-3"}),T[ae.id].length," Ciclo",T[ae.id].length>1?"s":""," OPR"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx("button",{onClick:()=>{K(ae),y("general")},className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm px-3 py-1 rounded border border-green-300 hover:bg-green-50 dark:hover:bg-green-900/20 transition-colors",children:"Ver/Editar"}),l.jsx("button",{onClick:()=>{K(ae),y("opr")},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"+ Ciclo OPR"}),l.jsx("button",{onClick:()=>J(ae.id),title:"Eliminar registro",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:l.jsx(Do,{className:"w-4 h-4"})})]})]}),T[ae.id]&&T[ae.id].length>0&&l.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-600",children:[l.jsxs("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2 flex items-center gap-1",children:[l.jsx(ug,{className:"w-4 h-4 text-blue-500"}),"Ciclos OPR Asociados"]}),l.jsx("div",{className:"space-y-2",children:T[ae.id].map(le=>l.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-300",children:le.nombreCiclo||`Registro N° ${le.registroN}`}),l.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:[new Date(le.fecha).toLocaleDateString("es-CL"),le.horaInicio&&le.horaTermino&&l.jsxs("span",{children:[" • ",le.horaInicio," - ",le.horaTermino]})]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:()=>{const ie=e.find(ce=>ce.id===ae.id);W(le,ie)},className:"text-blue-600 hover:text-blue-800 text-xs px-2 py-1 rounded border border-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",children:"Editar"}),l.jsx("button",{onClick:async()=>{if(window.confirm("¿Seguro que desea eliminar este Ciclo OPR?"))try{await TY(le.id),await R(),alert("Ciclo OPR eliminado exitosamente")}catch(ie){console.error("Error deleting OPR cycle:",ie),alert("Error al eliminar el ciclo OPR")}},className:"text-red-600 hover:text-red-800 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",title:"Eliminar ciclo OPR",children:l.jsx(Do,{className:"w-3 h-3"})})]})]},le.id))})]})]},ae.id))}):!a&&l.jsxs("div",{className:"text-center p-12 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[l.jsx(nf,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg font-medium",children:"No hay acompañamientos generales registrados"}),l.jsx("p",{className:"text-slate-400 dark:text-slate-500 text-sm mt-2",children:"Crea tu primer acompañamiento usando el botón superior"})]})]})]}),j.length>0&&l.jsxs("div",{className:"mb-8",children:[l.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-4",children:[l.jsx(ug,{className:"w-6 h-6 text-blue-500"})," Ciclos OPR Independientes"]}),l.jsx("div",{className:"space-y-3",children:j.map(ae=>l.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:shadow-md transition-shadow",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(ug,{className:"w-4 h-4 text-blue-500"}),l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:ae.nombreCiclo||`Registro N° ${ae.registroN}`})]}),l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Docente:"})," ",ae.docenteInfo||"No especificado"," •"," ",l.jsx("span",{className:"font-medium",children:"Curso:"})," ",ae.cursoInfo||"No especificado"]}),l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(ae.fecha).toLocaleDateString("es-CL"),ae.horaInicio&&ae.horaTermino&&l.jsxs("span",{children:[" • ",ae.horaInicio," - ",ae.horaTermino]})]}),ae.videoObservacionUrl&&l.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[l.jsx(io,{className:"w-3 h-3"}),"Con video de observación"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx("button",{onClick:()=>{W(ae)},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"Ver/Editar"}),l.jsx("button",{onClick:async()=>{if(window.confirm("¿Seguro que desea eliminar este Ciclo OPR?"))try{await TY(ae.id),await R(),alert("Ciclo OPR eliminado exitosamente")}catch(le){console.error("Error deleting standalone OPR cycle:",le),alert("Error al eliminar el ciclo OPR")}},title:"Eliminar ciclo OPR",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:l.jsx(Do,{className:"w-4 h-4"})})]})]})},ae.id))})]})]}),Z=()=>{const ae=h?e.find(ie=>ie.id===h):null,le={id:"temp-"+Date.now(),fecha:new Date().toISOString(),docente:"docente"in L&&L.docente||"",curso:"curso"in L&&L.curso||"",asignatura:"asignatura"in L&&L.asignatura||"",planificacionFutura:"",createdAt:new Date().toISOString(),rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""};return l.jsxs("div",{className:"animate-fade-in",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:v==="general"?h?"Editando Acompañamiento General":"Nuevo Acompañamiento General":g?"Editando Ciclo OPR":"Nuevo Ciclo OPR"}),l.jsx("button",{type:"button",onClick:()=>{f("list"),x(null)},className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex items-center gap-2 px-4 py-2 rounded-lg border hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"← Volver al listado"})]}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:l.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>y("general"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${v==="general"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx(nf,{className:"w-4 h-4"}),"Acompañamiento General"]})}),l.jsx("button",{onClick:()=>y("opr"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${v==="opr"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx(ug,{className:"w-4 h-4"}),"Ciclos OPR"]})}),l.jsx("button",{onClick:()=>y("dashboard"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${v==="dashboard"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx(Wd,{className:"w-4 h-4"}),"Dashboard"]})})]})}),c&&l.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(rf,{className:"w-5 h-5 text-red-500"}),l.jsx("p",{className:"text-red-700 dark:text-red-300",children:c})]})}),v==="dashboard"&&l.jsx("div",{className:"animate-fade-in",children:l.jsx(Ist,{acompanamientos:e,ciclosOPR:T,standaloneCiclos:j})}),v==="general"&&l.jsxs("form",{onSubmit:G,className:"space-y-8",children:[l.jsxs("div",{className:"p-4 border rounded-lg bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800",children:[l.jsxs("h4",{className:"text-lg font-semibold mb-3 text-green-700 dark:text-green-300 flex items-center gap-2",children:[l.jsx(bS,{className:"w-5 h-5"}),"Asistente IA - Informe General"]}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[l.jsxs("button",{type:"button",onClick:V,className:"bg-green-500 hover:bg-green-600 disabled:bg-green-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:w,children:[l.jsx(LL,{className:"w-4 h-4"}),w?"Generando...":"Generar Retroalimentación con IA"]}),l.jsxs("button",{type:"button",onClick:M,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[l.jsx(Zm,{className:"w-4 h-4"}),"Crear Informe PDF"]})]}),l.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Completa la observación y rúbrica, luego genera automáticamente la retroalimentación. Finalmente, crea el informe en PDF."}),"retroalimentacionConsolidada"in L&&L.retroalimentacionConsolidada&&l.jsxs("div",{className:"mt-4 p-4 bg-white dark:bg-slate-800 rounded-md shadow-sm border",children:[l.jsxs("h5",{className:"font-semibold text-sm mb-2 text-green-700 dark:text-green-300 flex items-center gap-2",children:[l.jsx(io,{className:"w-4 h-4"}),"Retroalimentación Consolidada Generada:"]}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700 rounded p-3",children:l.jsx("textarea",{readOnly:!0,rows:8,value:L.retroalimentacionConsolidada,className:"w-full text-sm text-slate-700 dark:text-slate-300 bg-transparent border-none p-0 resize-none focus:ring-0"})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-800/50 dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente *"}),l.jsxs("select",{name:"docente",value:"docente"in L?L.docente:"",onChange:H,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:i,children:[l.jsx("option",{value:"",children:i?"Cargando profesores...":"Seleccione un docente"}),r.map(ie=>l.jsx("option",{value:ie,children:ie},ie))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso *"}),l.jsxs("select",{name:"curso",value:"curso"in L?L.curso:"",onChange:H,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione un curso"}),Ac.map(ie=>l.jsx("option",{value:ie,children:ie},ie))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura *"}),l.jsxs("select",{name:"asignatura",value:"asignatura"in L?L.asignatura:"",onChange:H,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione una asignatura"}),jo.map(ie=>l.jsx("option",{value:ie,children:ie},ie))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),l.jsx("input",{type:"text",name:"bloques",value:"bloques"in L?L.bloques:"",onChange:H,placeholder:"Ej: 3-4, 1-2",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Observaciones Generales"}),l.jsx("textarea",{name:"observacionesGenerales",value:"observacionesGenerales"in L?L.observacionesGenerales:"",onChange:H,rows:4,placeholder:"Ingrese sus observaciones sobre la clase, metodología utilizada, participación de estudiantes, recursos empleados, etc...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsxs("h4",{className:"text-lg font-semibold mb-4 text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[l.jsx(Wd,{className:"w-5 h-5 text-amber-500"}),"Pauta de Observación - Rúbrica de Evaluación"]}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:"Haga clic en el nivel correspondiente para cada criterio observado durante la clase."}),l.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Débil (1)"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:N.map(ie=>l.jsx(Ze.Fragment,{children:ie.criteria.map((ce,Ae)=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[Ae===0&&l.jsx("td",{rowSpan:ie.criteria.length,className:"px-4 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600 bg-slate-50 dark:bg-slate-800",children:ie.domain}),l.jsx("td",{className:"px-4 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:ce.name}),ce.levels.map((Fe,ne)=>{const _e=ne+1,Ie="rubricaResultados"in L&&L.rubricaResultados[ce.name]===_e,Se=Ie?"bg-amber-100 dark:bg-amber-900/30 border-amber-300 dark:border-amber-700":"hover:bg-amber-50 dark:hover:bg-slate-700";return l.jsx("td",{onClick:()=>te(ce.name,_e),className:`px-4 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${Se} ${Ie?"ring-1 ring-amber-400":""}`,title:`Seleccionar nivel ${_e} para ${ce.name}`,children:l.jsxs("div",{className:"text-xs leading-relaxed",children:[Ie&&l.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[l.jsx(io,{className:"w-3 h-3 text-amber-600"}),l.jsx("span",{className:"font-semibold text-amber-700 dark:text-amber-400",children:"Seleccionado"})]}),Fe]})},_e)})]},ce.name))},ie.domain))})]})}),Object.keys(L.rubricaResultados||{}).length>0&&l.jsxs("div",{className:"mt-4 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800",children:[l.jsxs("h5",{className:"font-semibold text-amber-800 dark:text-amber-300 mb-2 flex items-center gap-2",children:[l.jsx(Wd,{className:"w-4 h-4"}),"Resumen de Evaluación (",Object.keys(L.rubricaResultados).length," criterios evaluados)"]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:Object.entries(L.rubricaResultados).map(([ie,ce])=>l.jsxs("div",{className:"flex justify-between items-center py-1",children:[l.jsxs("span",{className:"text-slate-700 dark:text-slate-300 truncate pr-2",children:[ie,":"]}),l.jsxs("span",{className:`font-semibold px-2 py-1 rounded text-xs ${ce===1?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":ce===2?"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300":ce===3?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"}`,children:["Nivel ",ce]})]},ie))})]})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t dark:border-slate-700",children:[l.jsx("button",{type:"button",onClick:()=>f("list"),className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),l.jsxs("button",{type:"submit",className:"bg-amber-500 hover:bg-amber-600 disabled:bg-amber-400 text-white font-bold py-2 px-6 rounded-lg transition-colors flex items-center gap-2",disabled:w,children:[w&&l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),h?"Actualizar":"Guardar"," Acompañamiento"]})]})]}),v==="opr"&&l.jsx(Gst,{acompanamiento:ae||le,cicloToEdit:g,profesores:r,onSave:async ie=>{try{const ce=(ae==null?void 0:ae.id)||typeof ie.acompanamientoId=="string"&&ie.acompanamientoId||void 0;if(g&&g.id)await Mst(g.id,ie),alert("Ciclo OPR actualizado exitosamente");else{if(!ce||String(ce).startsWith("temp-")){const Ae={...ie,acompanamientoId:""};await BY(Ae)}else{const Ae={...ie,acompanamientoId:String(ce)};await BY(Ae)}alert("Ciclo OPR guardado exitosamente")}x(null),await k(),await R(),f("list")}catch(ce){console.error("❌ Error al guardar ciclo OPR:",ce);const Ae=ce.message||"Error desconocido al guardar el ciclo OPR";u(Ae),alert(`Error al guardar el ciclo OPR: ${Ae}`)}},onCancel:()=>{x(null),f("list")}})]})};return a||i?l.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mb-4"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 font-medium",children:"Cargando módulo de acompañamiento..."}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-500 text-sm mt-2",children:[a&&"Cargando registros...",i&&" Cargando profesores..."]})]})})}):l.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d==="list"?Y():Z()})})},p7="mensajes_internos",qst="usuarios",_fe="mensajes_read_status",Sfe=e=>{var r,n;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fecha}},Wst=(e,t)=>{const r=$t(wt(ht,p7),Qr("participants","array-contains",e),xr("fecha","desc"));return pr(r,a=>{const s=a.docs.map(i=>Sfe(i));t(s)},a=>{console.error("Error al suscribirse a los mensajes:",a),t([])})},Xst=async e=>{try{const t={...e,participants:[e.de,e.para],fecha:ir.fromDate(new Date)};await _n(wt(ht,p7),t)}catch(t){throw console.error("Error al enviar el mensaje:",t),new Error("No se pudo enviar el mensaje.")}},Yst=async e=>{try{const t=cr(ht,p7,e);await is(t)}catch(t){throw console.error("Error al eliminar el mensaje:",t),new Error("No se pudo eliminar el mensaje.")}},Jst=(e,t)=>{const r=cr(ht,_fe,e);return pr(r,a=>{a.exists()?t(a.data()):t({announcements:[],messages:[]})},a=>{console.error("Error al suscribirse al estado de lectura:",a),t({announcements:[],messages:[]})})},Zst=async(e,t)=>{try{const r=cr(ht,_fe,e);await Mi(r,{messages:rne(t)},{merge:!0})}catch(r){throw console.error("Error al marcar mensaje como leído:",r),new Error("No se pudo actualizar el estado de lectura.")}},eit=e=>{const t=$t(wt(ht,qst),xr("nombreCompleto","asc"));return pr(t,n=>{const a=n.docs.map(s=>Sfe(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},tit=({currentUser:e,refreshUnreadCount:t})=>{const[r,n]=S.useState("inbox"),[a,s]=S.useState([]),[i,o]=S.useState([]),[c,u]=S.useState(null),[d,f]=S.useState({announcements:[],messages:[]}),[h,m]=S.useState(!0),g={para:"",asunto:"",cuerpo:""},[x,v]=S.useState(g);S.useEffect(()=>{if(!e.id||!e.email){m(!1);return}m(!0);const E=Wst(e.email,L=>{s(L),m(!1)}),N=eit(o),I=Jst(e.id,L=>{f(L),t()});return()=>{E(),N(),I()}},[e.id,e.email,t]);const y=E=>{u(E),r==="inbox"&&!d.messages.includes(E.id)&&Zst(e.id,E.id).catch(N=>{console.error("Failed to mark message as read:",N)})},w=async E=>{if(E.preventDefault(),!x.para||!x.asunto.trim()||!x.cuerpo.trim()){alert("Destinatario, asunto y cuerpo son obligatorios.");return}const N={de:e.email,para:x.para,asunto:x.asunto,cuerpo:x.cuerpo};try{await Xst(N),v(g),n("sent")}catch(I){console.error("Error sending message:",I),alert("No se pudo enviar el mensaje. Inténtelo de nuevo.")}},_=async E=>{if(window.confirm("¿Está seguro de que desea eliminar este mensaje? Esta acción es irreversible."))try{await Yst(E),u(null)}catch(N){console.error("Error deleting message:",N),alert("No se pudo eliminar el mensaje.")}},T=E=>{v({para:E.de,asunto:`Re: ${E.asunto}`,cuerpo:`

--- Mensaje Original ---
De: ${E.de}
Fecha: ${new Date(E.fecha).toLocaleString("es-CL")}

${E.cuerpo}`}),n("compose")},B=S.useMemo(()=>a.filter(E=>E.para===e.email),[a,e.email]),j=S.useMemo(()=>a.filter(E=>E.de===e.email),[a,e.email]);return h?l.jsx("div",{className:"flex items-center justify-center h-full",children:"Cargando mensajería..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-md flex overflow-hidden min-h-[75vh]",children:[l.jsxs("aside",{className:"w-1/4 md:w-1/5 border-r bg-slate-50 dark:bg-slate-800 flex flex-col",children:[l.jsx("div",{className:"p-4 border-b dark:border-slate-700",children:l.jsx("button",{onClick:()=>{n("compose"),u(null),v(g)},className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Redactar"})}),l.jsxs("nav",{className:"p-2 space-y-1",children:[l.jsx("button",{onClick:()=>{n("inbox"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="inbox"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Recibidos"}),l.jsx("button",{onClick:()=>{n("sent"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="sent"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Enviados"})]})]}),r!=="compose"&&l.jsx("div",{className:"w-1/3 md:w-2/5 border-r dark:border-slate-700 overflow-y-auto",children:(r==="inbox"?B:j).map(E=>{const N=r==="inbox"&&!d.messages.includes(E.id);return l.jsxs("div",{onClick:()=>y(E),className:`p-4 border-b dark:border-slate-700 cursor-pointer ${(c==null?void 0:c.id)===E.id?"bg-amber-50 dark:bg-amber-900/20":"hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsx("p",{className:`font-bold truncate ${N?"text-slate-800 dark:text-slate-200":"text-slate-600 dark:text-slate-400"}`,children:r==="inbox"?E.de:`Para: ${E.para}`}),N&&l.jsx("span",{className:"h-2.5 w-2.5 bg-blue-500 rounded-full flex-shrink-0 ml-2 mt-1"})]}),l.jsx("p",{className:`truncate text-sm ${N?"text-slate-700 dark:text-slate-300 font-semibold":"text-slate-500 dark:text-slate-400"}`,children:E.asunto}),l.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:new Date(E.fecha).toLocaleString("es-CL")})]},E.id)})}),l.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:r==="compose"?l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Nuevo Mensaje"}),l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"para",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Para:"}),l.jsxs("select",{id:"para",value:x.para,onChange:E=>v({...x,para:E.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione un destinatario..."}),i.filter(E=>E.email!==e.email).map(E=>l.jsxs("option",{value:E.email,children:[E.nombreCompleto," (",E.email,")"]},E.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asunto:"}),l.jsx("input",{type:"text",id:"asunto",value:x.asunto,onChange:E=>v({...x,asunto:E.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"cuerpo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cuerpo del Mensaje:"}),l.jsx("textarea",{id:"cuerpo",value:x.cuerpo,onChange:E=>v({...x,cuerpo:E.target.value}),required:!0,rows:12,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx("div",{className:"text-right",children:l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Enviar Mensaje"})})]})]}):c?l.jsxs("div",{children:[l.jsxs("div",{className:"border-b dark:border-slate-700 pb-4 mb-4",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:c.asunto}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[l.jsx("strong",{children:"De:"})," ",c.de," ",l.jsx("br",{}),l.jsx("strong",{children:"Para:"})," ",c.para," ",l.jsx("br",{}),l.jsx("strong",{children:"Fecha:"})," ",new Date(c.fecha).toLocaleString("es-CL")]})]}),l.jsx("div",{className:"whitespace-pre-wrap text-slate-700 dark:text-slate-300",children:c.cuerpo}),l.jsxs("div",{className:"mt-8 pt-4 border-t dark:border-slate-700 flex gap-2",children:[r==="inbox"&&l.jsx("button",{onClick:()=>T(c),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Responder"}),l.jsx("button",{onClick:()=>_(c.id),className:"bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-200 dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900/60",children:"Eliminar"})]})]}):l.jsx("div",{className:"flex items-center justify-center h-full text-center text-slate-500 dark:text-slate-400",children:l.jsx("p",{children:"Seleccione un mensaje para leerlo."})})})]})},vT="proyectos_interdisciplinarios",g7="entregas_interdisciplinarias",rit="usuarios",x7=e=>{const t=e.data();return{id:e.id,...t}},nit=e=>({...e,contenidosPorAsignatura:Array.isArray(e==null?void 0:e.contenidosPorAsignatura)?e.contenidosPorAsignatura:[],actividades:Array.isArray(e==null?void 0:e.actividades)?e.actividades:[],fechasClave:Array.isArray(e==null?void 0:e.fechasClave)?e.fechasClave:[],tareas:Array.isArray(e==null?void 0:e.tareas)?e.tareas:[],docentesResponsables:Array.isArray(e==null?void 0:e.docentesResponsables)?e.docentesResponsables:[e==null?void 0:e.docentesResponsables].filter(Boolean)}),ait=e=>{const t=$t(wt(ht,vT),xr("nombreProyecto","asc"));return pr(t,n=>{try{const a=n.docs.map(s=>nit(x7(s)));e(a)}catch(a){console.error("Error parseando planificaciones:",a),e([])}},n=>{console.error("Error al suscribirse a las planificaciones:",n),e([])})},sit=async e=>{const t={...e,contenidosPorAsignatura:Array.isArray(e.contenidosPorAsignatura)?e.contenidosPorAsignatura:[],actividades:Array.isArray(e.actividades)?e.actividades:[],fechasClave:Array.isArray(e.fechasClave)?e.fechasClave:[],tareas:Array.isArray(e.tareas)?e.tareas:[],docentesResponsables:Array.isArray(e.docentesResponsables)?e.docentesResponsables:[e.docentesResponsables].filter(Boolean),createdAt:ir.now(),updatedAt:ir.now()};return(await _n(wt(ht,vT),t)).id},jY=async(e,t)=>{const{id:r,...n}=t,a=cr(ht,vT,e);await Mi(a,{...n,contenidosPorAsignatura:Array.isArray(n==null?void 0:n.contenidosPorAsignatura)?n.contenidosPorAsignatura:(n==null?void 0:n.contenidosPorAsignatura)===void 0?void 0:[],actividades:Array.isArray(n==null?void 0:n.actividades)?n.actividades:(n==null?void 0:n.actividades)===void 0?void 0:[],fechasClave:Array.isArray(n==null?void 0:n.fechasClave)?n.fechasClave:(n==null?void 0:n.fechasClave)===void 0?void 0:[],tareas:Array.isArray(n==null?void 0:n.tareas)?n.tareas:(n==null?void 0:n.tareas)===void 0?void 0:[],docentesResponsables:Array.isArray(n==null?void 0:n.docentesResponsables)?n.docentesResponsables:(n==null?void 0:n.docentesResponsables)===void 0?void 0:[n==null?void 0:n.docentesResponsables].filter(Boolean),updatedAt:ir.now()},{merge:!0})},iit=async e=>{const t=cr(ht,vT,e),r=$t(wt(ht,g7),Qr("planificacionId","==",e)),n=await Hn(r),a=yx(ht);n.forEach(s=>a.delete(s.ref)),a.delete(t),await a.commit()},oit=(e,t)=>{const r=$t(wt(ht,g7),Qr("planificacionId","==",e));return pr(r,a=>{const s=a.docs.map(i=>x7(i));t(s)},a=>{console.error("Error al suscribirse a las entregas:",a),t([])})},IY=async(e,t)=>{const r=cr(ht,g7,e);await Mi(r,{feedbackProfesor:t,fechaFeedback:ir.fromDate(new Date)},{merge:!0})},Nfe=e=>{const t=$t(wt(ht,rit));return pr(t,n=>{const a=n.docs.map(s=>x7(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},bP={Recordar:["Enumerar","Definir","Identificar","Nombrar","Reconocer","Reproducir"],Comprender:["Explicar","Interpretar","Resumir","Parafrasear","Ejemplificar","Clasificar"],Aplicar:["Ejecutar","Implementar","Usar","Demostrar","Operar","Programar"],Analizar:["Diferenciar","Organizar","Atribuir","Comparar","Deconstruir","Delinear"],Evaluar:["Comprobar","Criticar","Revisar","Formular hipótesis","Experimentar","Juzgar"],Crear:["Generar","Planificar","Producir","Diseñar","Construir","Idear"]},y2=({href:e})=>{if(!e)return l.jsx("span",{className:"text-slate-400",children:"—"});const t=e.startsWith("http")?e:`https://${e}`;return l.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[l.jsx(t_e,{className:"w-4 h-4"}),l.jsx("span",{className:"truncate max-w-[180px] md:max-w-[260px]",children:e})]})},Zp=({icon:e,label:t,children:r,aiButton:n,className:a=""})=>l.jsxs("div",{className:`bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 ${a}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-lg",children:e}),l.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:t})]}),n]}),r]}),lit=({planificaciones:e,onActivityUpdate:t})=>{const[r,n]=S.useState(null),a=S.useMemo(()=>e.map(c=>{const u=[];return(c.actividades||[]).forEach(d=>u.push({...d,planId:c.id,type:"activity"})),(c.fechasClave||[]).forEach(d=>u.push({id:d.id,planId:c.id,type:"keyDate",nombre:d.nombre,fechaInicio:d.fecha,fechaFin:d.fecha,responsables:c.docentesResponsables.join(", "),asignaturaPrincipal:"Milestone",recursoUrl:d.recursoUrl})),u.sort((d,f)=>new Date(d.fechaInicio).getTime()-new Date(f.fechaInicio).getTime()),{plan:c,items:u}}),[e]),s=S.useCallback(c=>{if(c.type==="keyDate")return{text:"Fecha Clave",color:"bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300"};const u=new Date;u.setHours(0,0,0,0);const d=new Date(`${c.fechaInicio}T00:00:00`),f=new Date(`${c.fechaFin}T00:00:00`);return f<u?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:d<=u&&f>=u?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300"}},[]),i=({name:c})=>{const u=(c||"").split(" ").map(d=>d[0]).join("").toUpperCase();return l.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 text-white flex items-center justify-center font-semibold text-sm ring-2 ring-white dark:ring-slate-800 shadow-sm",children:u.slice(0,2)})},o=({data:c,onClose:u,onSave:d})=>{const[f,h]=S.useState(c.activity),m=x=>h({...f,[x.target.name]:x.target.value}),g=()=>{d(c.planId,f),u()};return l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-2xl p-8",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:l.jsx(One,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),l.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Editar Actividad"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Nombre"}),l.jsx("input",{name:"nombre",value:f.nombre,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Responsables"}),l.jsx("input",{name:"responsables",value:f.responsables,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Inicio"}),l.jsx("input",{type:"date",name:"fechaInicio",value:f.fechaInicio,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Fin"}),l.jsx("input",{type:"date",name:"fechaFin",value:f.fechaFin,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Recurso (enlace)"}),l.jsx("input",{name:"recursoUrl",placeholder:"https://...",value:f.recursoUrl||"",onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]})]}),l.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[l.jsx("button",{onClick:u,className:"px-4 py-2 bg-slate-200 rounded-lg",children:"Cancelar"}),l.jsx("button",{onClick:g,className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"Guardar"})]})]})})};return!a.length||a.every(c=>c.items.length===0)?l.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:l.jsxs("div",{className:"text-center py-12",children:[l.jsx(rf,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"No hay actividades para mostrar"})]})}):l.jsxs("div",{className:"space-y-8",children:[a.map(({plan:c,items:u})=>l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsx("div",{className:"flex items-center justify-between mb-6",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/50 rounded-xl",children:l.jsx(Em,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-200",children:c.nombreProyecto}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cronograma del proyecto"})]})]})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b-2 border-slate-200 dark:border-slate-700",children:[l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Tarea"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Estado"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Inicio"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Fin"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Recurso"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Asignado"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:u.map(d=>{const f=s(d),h=d.type==="activity";return l.jsxs("tr",{className:`${h?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":""}`,onClick:()=>h&&n({planId:d.planId,activity:d}),children:[l.jsx("td",{className:"px-6 py-4 font-semibold",children:d.nombre}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("span",{className:`px-3 py-1 inline-flex text-sm font-semibold rounded-full ${f.color}`,children:f.text})}),l.jsx("td",{className:"px-6 py-4",children:d.fechaInicio}),l.jsx("td",{className:"px-6 py-4",children:d.fechaFin}),l.jsx("td",{className:"px-6 py-4",children:l.jsx(y2,{href:d.recursoUrl})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx(i,{name:d.responsables||"Sin asignar"})})]},d.id)})})]})})]},c.id)),r&&l.jsx(o,{data:r,onClose:()=>n(null),onSave:t})]})},cit=({planificaciones:e,onBack:t})=>{const r=S.useMemo(()=>{const c={},u={};return e.forEach(d=>{var f;(f=d.contenidosPorAsignatura)==null||f.forEach(h=>{var m;(m=h.habilidades)==null||m.forEach(g=>{c[g]=(c[g]||0)+1,Object.entries(bP).forEach(([x,v])=>{v.includes(g)&&(u[x]=(u[x]||0)+1)})})})}),{habilidadesCount:c,categoriaCount:u}},[e]),n=S.useMemo(()=>{const c={},u={};return e.forEach(d=>{var f;d.asignaturas.forEach(h=>{u[h]=(u[h]||0)+1}),(f=d.contenidosPorAsignatura)==null||f.forEach(h=>{h.contenidos&&h.contenidos.toLowerCase().split(/[\s,.-]+/).filter(g=>g.length>3).filter(g=>!["para","con","por","las","los","una","del","que","este","esta","son","como","más","desde","hasta","entre"].includes(g)).forEach(g=>{c[g]=(c[g]||0)+1})})}),{palabrasCount:c,asignaturasCount:u}},[e]),a=S.useMemo(()=>{const c=e.length,u=e.reduce((h,m)=>{var g;return h+(((g=m.actividades)==null?void 0:g.length)||0)},0),d=e.reduce((h,m)=>{var g;return h+(((g=m.tareas)==null?void 0:g.length)||0)},0),f=new Set(e.flatMap(h=>h.asignaturas)).size;return{totalProyectos:c,totalActividades:u,totalTareas:d,asignaturasUnicas:f}},[e]),s=({data:c,title:u})=>{const d=Object.entries(c);if(!d.length)return null;const f=d.sort((m,g)=>g[1]-m[1]).slice(0,20),h=Math.max(...f.map(([,m])=>m));return h?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:u}),l.jsx("div",{className:"flex flex-wrap gap-2 justify-center min-h-[100px]",children:f.map(([m,g])=>{const x=Math.max(.8,g/h*2),v=Math.max(.6,g/h);return l.jsx("span",{className:"inline-block px-3 py-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full font-semibold transition-transform hover:scale-110",style:{fontSize:`${x}rem`,opacity:v},title:`${m}: ${g} veces`,children:m},m)})})]}):null},i=({data:c})=>{const u=Object.values(c),d=u.length?Math.max(...u):0,f={Recordar:"bg-red-500",Comprender:"bg-orange-500",Aplicar:"bg-yellow-500",Analizar:"bg-green-500",Evaluar:"bg-blue-500",Crear:"bg-purple-500"};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/50 rounded-lg",children:l.jsx(L2,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Taxonomía de Bloom"})]}),l.jsx("div",{className:"space-y-4",children:Object.keys(bP).map(h=>{const m=c[h]||0,g=d>0?m/d*100:0,x=f[h]||"bg-slate-400";return l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:h}),l.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[m," habilidades"]})]}),l.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:l.jsx("div",{className:`h-3 rounded-full ${x} transition-all duration-500`,style:{width:`${g}%`}})})]},h)})})]})},o=({icon:c,title:u,value:d,description:f,color:h})=>l.jsxs("div",{className:`bg-gradient-to-br ${h} p-6 rounded-2xl shadow-lg text-white`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:c}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:d}),l.jsx("div",{className:"text-white/80 text-sm",children:u})]})]}),l.jsx("p",{className:"text-white/90 text-sm",children:f})]});return l.jsxs("div",{className:"space-y-8",children:[l.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-teal-600 rounded-xl",children:l.jsx(BN,{className:"w-8 h-8 text-white"})}),l.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-green-600 to-teal-600 bg-clip-text text-transparent",children:"Dashboard Analítico"})]}),l.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Análisis de habilidades y contenidos desarrollados"})]}),l.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[l.jsx(M2,{className:"w-4 h-4"})," Volver a Proyectos"]})]})}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(o,{icon:l.jsx(Yg,{className:"w-8 h-8"}),title:"Proyectos",value:a.totalProyectos,description:"Proyectos interdisciplinarios creados",color:"from-blue-500 to-blue-600"}),l.jsx(o,{icon:l.jsx(QEe,{className:"w-8 h-8"}),title:"Actividades",value:a.totalActividades,description:"Actividades planificadas en total",color:"from-green-500 to-green-600"}),l.jsx(o,{icon:l.jsx(nf,{className:"w-8 h-8"}),title:"Tareas",value:a.totalTareas,description:"Tareas asignadas a estudiantes",color:"from-purple-500 to-purple-600"}),l.jsx(o,{icon:l.jsx(df,{className:"w-8 h-8"}),title:"Asignaturas",value:a.asignaturasUnicas,description:"Asignaturas involucradas",color:"from-orange-500 to-orange-600"})]}),l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[l.jsx(i,{data:r.categoriaCount}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:l.jsx(Bne,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Distribución de Asignaturas"})]}),l.jsx("div",{className:"space-y-3",children:Object.entries(n.asignaturasCount).sort(([,c],[,u])=>u-c).map(([c,u])=>{const d=Math.max(...Object.values(n.asignaturasCount)),f=d>0?u/d*100:0;return l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 text-sm",children:c}),l.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:[u," proyecto",u!==1?"s":""]})]}),l.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:l.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 transition-all duration-500",style:{width:`${f}%`}})})]},c)})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[l.jsx(s,{data:n.palabrasCount,title:"Contenidos Más Frecuentes"}),l.jsx(s,{data:r.habilidadesCount,title:"Habilidades Más Desarrolladas"})]})]})},uit=({plan:e,onBack:t,availableTeachers:r})=>{var g,x;const[n,a]=S.useState([]),[s,i]=S.useState([]),[o,c]=S.useState(((g=e.tareas)==null?void 0:g[0])||null),[u,d]=S.useState(null);S.useEffect(()=>{const v=Nfe(a),y=oit(e.id,i);return()=>{v(),y()}},[e.id]);const f=S.useMemo(()=>n.filter(v=>v.profile===Jt.ESTUDIANTE&&e.cursos.includes(v.curso||"")).sort((v,y)=>(v.nombreCompleto||"").localeCompare(y.nombreCompleto||"")),[n,e.cursos]),h=async v=>{d(v.id);const y="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",w=`Eres un profesor asistente. Genera una retroalimentación breve (2-3 frases) para la entrega de un estudiante.
Instrucciones de la tarea: "${o==null?void 0:o.instrucciones}"
Comentario del estudiante: "${v.observacionesEstudiante||"Sin comentarios."}"`.trim();try{const E=(await(await new ps(y).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(w)).response).text().replace(/(\*\*|\*)/g,"");await IY(v.id,E)}catch(_){console.error(_),alert("No se pudo generar la retroalimentación.")}finally{d(null)}},m=v=>v.map(y=>{var w;return((w=r.find(_=>_.id===y))==null?void 0:w.nombreCompleto)||y}).join(", ");return o?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Entregas de Tareas"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:e.nombreProyecto}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-500 mt-1",children:["Profesores: ",m(e.docentesResponsables)]})]}),l.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[l.jsx(M2,{className:"w-4 h-4"})," Volver a Proyectos"]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Seleccionar Tarea:"}),l.jsx("select",{value:o.id,onChange:v=>{var y;return c(((y=e.tareas)==null?void 0:y.find(w=>w.id===v.target.value))||null)},className:"w-full sm:w-auto p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:(x=e.tareas)==null?void 0:x.map(v=>l.jsxs("option",{value:v.id,children:["Tarea ",v.numero,": ",v.instrucciones]},v.id))})]}),l.jsx("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:f.map(v=>{const y=s.find(w=>w.tareaId===o.id&&w.estudianteId===v.id);return l.jsxs("div",{className:"p-6 border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[l.jsxs("div",{className:"flex items-start justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold",children:(v.nombreCompleto||"NA").split(" ").map(w=>w[0]).join("").toUpperCase().slice(0,2)}),l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:v.nombreCompleto}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:v.curso})]})]}),l.jsx("div",{className:"flex items-center gap-2",children:y!=null&&y.completada?l.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300 rounded-full text-sm font-semibold",children:[l.jsx(DL,{className:"w-4 h-4"})," Entregado"]}):l.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 dark:bg-red-900/50 text-red-800 dark:text-red-300 rounded-full text-sm font-semibold",children:[l.jsx(rf,{className:"w-4 h-4"})," Pendiente"]})})]}),y?l.jsxs("div",{className:"space-y-4",children:[y.observacionesEstudiante&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Comentario del estudiante:"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 bg-white dark:bg-slate-800 p-3 rounded-md border border-slate-200 dark:border-slate-600",children:y.observacionesEstudiante})]}),y.enlaceUrl&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Enlace entregado:"}),l.jsx(y2,{href:y.enlaceUrl})]}),y.archivoAdjunto&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Archivo adjunto:"}),l.jsxs("a",{href:y.archivoAdjunto.url,download:y.archivoAdjunto.nombre,className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium",children:[l.jsx(Zm,{className:"w-4 h-4"})," ",y.archivoAdjunto.nombre]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Retroalimentación del profesor:"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("textarea",{placeholder:"Escribir retroalimentación...",defaultValue:y.feedbackProfesor||"",onBlur:w=>IY(y.id,w.target.value),rows:3,className:"flex-1 p-3 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm resize-none"},y.id),l.jsx("button",{onClick:()=>h(y),disabled:u===y.id,className:"p-3 rounded-md bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar Feedback con IA",children:u===y.id?l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):l.jsx(Bg,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})})]})]})]}):l.jsxs("div",{className:"text-center py-6",children:[l.jsx(rf,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"El estudiante aún no ha realizado la entrega"})]})]},v.id)})})]}):l.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:l.jsxs("div",{className:"text-center",children:[l.jsx(rf,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),l.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Este proyecto no tiene tareas asignadas"}),l.jsxs("button",{onClick:t,className:"mt-4 inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold",children:[l.jsx(M2,{className:"w-4 h-4"})," Volver a Proyectos"]})]})})},dit=({descripcion:e,asignaturas:t,docentes:r,onObjetivos:n,onIndicadores:a,onEstructura:s,availableTeachers:i})=>{const[o,c]=S.useState(null),u="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",d=h=>h.map(m=>{var g;return((g=i.find(x=>x.id===m))==null?void 0:g.nombreCompleto)||m}).join(", "),f=async h=>{var m,g,x;if(!e.trim()){alert("Ingrese una descripción del proyecto.");return}c(h);try{const y=new ps(u).getGenerativeModel({model:"gemini-1.5-flash-latest"});if(h==="obj"){const w=`Genera 3 a 5 objetivos de aprendizaje claros y medibles.
Descripción: "${e}"
Asignaturas: "${t.join(", ")}"
Formato: lista con guiones.`,_=await y.generateContent(w);n(_.response.text().replace(/(\*\*|\*)/g,""))}else if(h==="ind"){const w=`Genera 5 a 7 indicadores de logro observables.
Descripción: "${e}"
Asignaturas: "${t.join(", ")}"
Formato: lista con guiones.`,_=await y.generateContent(w);a(_.response.text().replace(/(\*\*|\*)/g,""))}else{const w=`Devuelve SOLO un JSON válido (sin backticks) con claves: actividades, fechasClave y tareas para un proyecto escolar.
Descripción: "${e}"
Docentes responsables: "${d(r)}"
Asignaturas: "${t.join(", ")}"
Estructura:
- actividades: 3 a 5 objetos { "nombre", "fechaInicio" (YYYY-MM-DD), "fechaFin" (YYYY-MM-DD), "responsables", "recursoUrl" }
- fechasClave: 2 a 3 objetos { "nombre", "fecha" (YYYY-MM-DD), "recursoUrl" }
- tareas: 2 a 3 objetos { "instrucciones", "fechaEntrega" (YYYY-MM-DD), "recursoUrl" }`,T=(await y.generateContent(w)).response.text().replace(/^```json\s*|```\s*$/g,""),B=JSON.parse(T);s({actividades:(m=B.actividades)==null?void 0:m.map(j=>({...j,id:crypto.randomUUID()})),fechasClave:(g=B.fechasClave)==null?void 0:g.map(j=>({id:crypto.randomUUID(),nombre:j.nombre,fecha:j.fecha,recursoUrl:j.recursoUrl})),tareas:(x=B.tareas)==null?void 0:x.map((j,E)=>({...j,id:crypto.randomUUID(),numero:E+1}))})}}catch(v){console.error(v),alert("No se pudo completar la generación con IA.")}finally{c(null)}};return l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",onClick:()=>f("obj"),disabled:o!==null,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar objetivos con IA",children:o==="obj"?l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):l.jsx(Bg,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),l.jsx("button",{type:"button",onClick:()=>f("ind"),disabled:o!==null,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar indicadores con IA",children:o==="ind"?l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):l.jsx(Bg,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),l.jsx("button",{type:"button",onClick:()=>f("est"),disabled:o!==null,className:"inline-flex items-center gap-2 bg-gradient-to-r from-sky-500 to-blue-600 text-white font-semibold py-2 px-3 rounded-lg disabled:from-slate-400 disabled:to-slate-500 disabled:cursor-not-allowed hover:from-sky-600 hover:to-blue-700 transition-all duration-200 shadow-lg",children:o==="est"?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"})," ",l.jsx("span",{children:"Generando..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(Bg,{className:"w-4 h-4"})," ",l.jsx("span",{children:"Estructura IA"})]})})]})},fit=({initialPlan:e,onSave:t,onCancel:r,availableTeachers:n})=>{const[a,s]=S.useState(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[i,o]=S.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:"",recursoUrl:""}),[c,u]=S.useState({nombre:"",fecha:"",recursoUrl:""}),[d,f]=S.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""});S.useEffect(()=>{s(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[e]);const h=w=>s(_=>({..._,[w.target.name]:w.target.value})),m=(w,_,T)=>s(B=>({...B,contenidosPorAsignatura:B.contenidosPorAsignatura.map(j=>j.asignatura===w?{...j,[_]:T}:j)})),g=(w,_)=>s(T=>({...T,contenidosPorAsignatura:T.contenidosPorAsignatura.map(B=>B.asignatura===w?{...B,habilidades:B.habilidades.includes(_)?B.habilidades.filter(j=>j!==_):[...B.habilidades,_]}:B)})),x=()=>{if(!i.nombre||!i.fechaInicio||!i.fechaFin){alert("Nombre y fechas son obligatorios.");return}s(w=>({...w,actividades:[...w.actividades||[],{...i,id:crypto.randomUUID()}]})),o({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:"",recursoUrl:""})},v=()=>{!c.nombre||!c.fecha||(s(w=>({...w,fechasClave:[...w.fechasClave||[],{...c,id:crypto.randomUUID()}]})),u({nombre:"",fecha:"",recursoUrl:""}))},y=()=>{var _;if(!d.instrucciones||!d.fechaEntrega){alert("Instrucciones y fecha son obligatorios.");return}const w={id:crypto.randomUUID(),numero:(((_=a.tareas)==null?void 0:_.length)||0)+1,...d};s(T=>({...T,tareas:[...T.tareas||[],w]})),f({instrucciones:"",fechaEntrega:"",recursoUrl:""})};return l.jsxs("div",{className:"max-w-6xl mx-auto p-4 sm:p-6 lg:p-8 space-y-8",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[l.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl",children:l.jsx(Yg,{className:"w-10 h-10 text-white"})}),l.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:e?"Editando Proyecto":"Nuevo Proyecto Interdisciplinario"})]}),l.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Diseñe experiencias de aprendizaje colaborativo e innovador"})]}),l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsx(Zp,{icon:l.jsx(nf,{className:"w-6 h-6 text-slate-600"}),label:"Información del Proyecto",aiButton:l.jsx(dit,{descripcion:a.descripcionProyecto,asignaturas:a.asignaturas,docentes:a.docentesResponsables,availableTeachers:[],onObjetivos:w=>s(_=>({..._,objetivos:w})),onIndicadores:w=>s(_=>({..._,indicadoresLogro:w})),onEstructura:w=>s(_=>{var T,B,j;return{..._,actividades:(T=w.actividades)!=null&&T.length?w.actividades:_.actividades,fechasClave:(B=w.fechasClave)!=null&&B.length?w.fechasClave:_.fechasClave,tareas:(j=w.tareas)!=null&&j.length?w.tareas:_.tareas}})}),children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Nombre del Proyecto"}),l.jsx("input",{name:"nombreProyecto",value:a.nombreProyecto,onChange:h,placeholder:"Ingrese el nombre del proyecto...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-lg font-semibold"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Descripción del Proyecto"}),l.jsx("textarea",{name:"descripcionProyecto",value:a.descripcionProyecto,onChange:h,placeholder:"Detalle metodología, producto final y propósito...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})]})]})}),l.jsx(Zp,{icon:l.jsx(hc,{className:"w-6 h-6 text-slate-600"}),label:"Profesores Responsables",children:l.jsx("div",{className:"space-y-3",children:l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-60 overflow-y-auto",children:n.map(w=>l.jsx("button",{type:"button",onClick:()=>{s(_=>({..._,docentesResponsables:_.docentesResponsables.includes(w.id)?_.docentesResponsables.filter(T=>T!==w.id):[..._.docentesResponsables,w.id]}))},className:`p-3 rounded-lg text-left transition-all duration-200 ${a.docentesResponsables.includes(w.id)?"bg-blue-100 border-2 border-blue-500 text-blue-800 dark:bg-blue-900/50 dark:border-blue-400 dark:text-blue-300":"bg-slate-50 border-2 border-slate-200 hover:border-slate-300 dark:bg-slate-700 dark:border-slate-600 dark:hover:border-slate-500"}`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm ${a.docentesResponsables.includes(w.id)?"bg-blue-500 text-white":"bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-300"}`,children:l.jsx(U2,{className:"w-5 h-5"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-sm",children:w.nombreCompleto}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:w.email})]})]})},w.id))})})}),l.jsx(Zp,{icon:l.jsx(SN,{className:"w-6 h-6 text-slate-600"}),label:"Cursos Participantes",children:l.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-3",children:Ac.map(w=>l.jsx("button",{type:"button",onClick:()=>{s(_=>({..._,cursos:_.cursos.includes(w)?_.cursos.filter(T=>T!==w):[..._.cursos,w]}))},className:`p-3 rounded-lg text-center text-sm font-semibold transition-all duration-200 ${a.cursos.includes(w)?"bg-amber-500 text-white shadow-lg scale-105":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:w},w))})})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsx(Zp,{icon:l.jsx(df,{className:"w-6 h-6 text-slate-600"}),label:"Asignaturas y Contenidos",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Seleccionar Asignaturas:"}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:jo.map(w=>l.jsx("button",{type:"button",onClick:()=>{s(_=>{const T=_.asignaturas,B=T.includes(w)?T.filter(E=>E!==w):[...T,w];let j=_.contenidosPorAsignatura;return B.includes(w)&&!T.includes(w)&&(j=[...j,{asignatura:w,contenidos:"",habilidades:[]}]),!B.includes(w)&&T.includes(w)&&(j=j.filter(E=>E.asignatura!==w)),{..._,asignaturas:B,contenidosPorAsignatura:j}})},className:`p-2 rounded-lg text-left text-sm font-medium transition-all duration-200 ${a.asignaturas.includes(w)?"bg-green-500 text-white shadow-md":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:w},w))})]}),a.contenidosPorAsignatura.length>0&&l.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[l.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Contenidos y Habilidades por Asignatura:"}),a.contenidosPorAsignatura.map(w=>l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[l.jsxs("h5",{className:"font-bold text-slate-800 dark:text-slate-200 mb-3 flex items-center gap-2",children:[l.jsx(df,{className:"w-4 h-4"})," ",w.asignatura]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Contenidos a trabajar:"}),l.jsx("textarea",{value:w.contenidos,onChange:_=>m(w.asignatura,"contenidos",_.target.value),placeholder:`Detalle los contenidos específicos de ${w.asignatura}...`,className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm min-h-[80px] resize-none"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Habilidades según Taxonomía de Bloom:"}),l.jsx("div",{className:"space-y-2",children:Object.entries(bP).map(([_,T])=>l.jsxs("div",{className:"border border-slate-200 dark:border-slate-600 rounded-md p-2",children:[l.jsxs("h6",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 mb-1",children:[_,":"]}),l.jsx("div",{className:"flex flex-wrap gap-1",children:T.map(B=>l.jsx("button",{type:"button",onClick:()=>g(w.asignatura,B),className:`px-2 py-1 rounded-md text-xs font-medium transition-colors ${w.habilidades.includes(B)?"bg-blue-500 text-white":"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-500"}`,children:B},B))})]},_))}),w.habilidades.length>0&&l.jsxs("div",{className:"mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:[l.jsx("p",{className:"text-xs font-semibold text-blue-800 dark:text-blue-300 mb-1",children:"Habilidades seleccionadas:"}),l.jsx("div",{className:"flex flex-wrap gap-1",children:w.habilidades.map(_=>l.jsx("span",{className:"px-2 py-0.5 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 rounded text-xs",children:_},_))})]})]})]})]},w.asignatura))]})]})}),l.jsx(Zp,{icon:l.jsx(K1,{className:"w-6 h-6 text-slate-600"}),label:"Objetivos de Aprendizaje",children:l.jsx("textarea",{name:"objetivos",value:a.objetivos,onChange:h,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})}),l.jsx(Zp,{icon:l.jsx(Wd,{className:"w-6 h-6 text-slate-600"}),label:"Indicadores de Éxito",children:l.jsx("textarea",{name:"indicadoresLogro",value:a.indicadoresLogro,onChange:h,placeholder:"Liste los indicadores de logro...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})}),l.jsxs(Zp,{icon:l.jsx(id,{className:"w-6 h-6 text-slate-600"}),label:"Planificación y Cronograma",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(Em,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),l.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Proyecto"})]}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[l.jsxs("div",{className:"lg:col-span-3",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre"}),l.jsx("input",{value:i.nombre,onChange:w=>o({...i,nombre:w.target.value}),placeholder:"Nombre de la actividad",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{className:"lg:col-span-2",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Inicio"}),l.jsx("input",{type:"date",value:i.fechaInicio,onChange:w=>o({...i,fechaInicio:w.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{className:"lg:col-span-2",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fin"}),l.jsx("input",{type:"date",value:i.fechaFin,onChange:w=>o({...i,fechaFin:w.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{className:"lg:col-span-3",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),l.jsx("input",{value:i.recursoUrl||"",onChange:w=>o({...i,recursoUrl:w.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsx("div",{className:"lg:col-span-2",children:l.jsxs("button",{type:"button",onClick:x,className:"w-full bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:[l.jsx(od,{className:"w-4 h-4"})," Agregar"]})})]}),!!a.actividades.length&&l.jsxs("div",{className:"mt-4",children:[l.jsx("h5",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Actividades Agregadas:"}),l.jsx("div",{className:"space-y-2",children:a.actividades.map(w=>l.jsx("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm",children:l.jsxs("div",{className:"flex justify-between items-center gap-2",children:[l.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:w.nombre}),l.jsxs("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:[w.fechaInicio," - ",w.fechaFin]}),l.jsx(y2,{href:w.recursoUrl})]})},w.id))})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(DL,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),l.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Fechas Clave (Hitos)"})]}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-3 items-end",children:[l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre del Hito"}),l.jsx("input",{value:c.nombre,onChange:w=>u({...c,nombre:w.target.value}),placeholder:"Nombre del hito",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha"}),l.jsx("input",{type:"date",value:c.fecha,onChange:w=>u({...c,fecha:w.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{className:"sm:col-span-1",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),l.jsx("input",{value:c.recursoUrl||"",onChange:w=>u({...c,recursoUrl:w.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("button",{type:"button",onClick:v,className:"bg-green-600 hover:bg-green-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:[l.jsx(od,{className:"w-4 h-4"})," Agregar"]})]}),!!a.fechasClave.length&&l.jsxs("div",{className:"mt-4",children:[l.jsx("h5",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Fechas Clave Agregadas:"}),l.jsx("div",{className:"space-y-2",children:a.fechasClave.map(w=>l.jsx("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm",children:l.jsxs("div",{className:"flex justify-between items-center gap-2",children:[l.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:w.nombre}),l.jsx("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:w.fecha}),l.jsx(y2,{href:w.recursoUrl})]})},w.id))})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(L2,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),l.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Tareas para Estudiantes"})]}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[l.jsxs("div",{className:"lg:col-span-5",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Instrucciones de la Tarea"}),l.jsx("input",{value:d.instrucciones,onChange:w=>f({...d,instrucciones:w.target.value}),placeholder:"Descripción detallada de la tarea",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{className:"lg:col-span-3",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de Entrega"}),l.jsx("input",{type:"date",value:d.fechaEntrega,onChange:w=>f({...d,fechaEntrega:w.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{className:"lg:col-span-3",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),l.jsx("input",{value:d.recursoUrl||"",onChange:w=>f({...d,recursoUrl:w.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsx("div",{className:"lg:col-span-1",children:l.jsxs("button",{type:"button",onClick:y,className:"w-full bg-purple-600 hover:bg-purple-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:[l.jsx(od,{className:"w-4 h-4"})," Agregar"]})})]}),!!a.tareas.length&&l.jsxs("div",{className:"mt-4",children:[l.jsx("h5",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Tareas Agregadas:"}),l.jsx("div",{className:"space-y-2",children:a.tareas.map(w=>l.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600",children:l.jsxs("div",{className:"flex justify-between items-start gap-2",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("span",{className:"inline-block bg-purple-100 dark:bg-purple-900/50 text-purple-800 dark:text-purple-300 text-xs font-bold px-2 py-1 rounded mb-1",children:["Tarea #",w.numero]}),l.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:w.instrucciones})]}),l.jsxs("div",{className:"text-right space-y-1",children:[l.jsx("span",{className:"block text-slate-500 dark:text-slate-400 text-xs",children:w.fechaEntrega}),"recursoUrl"in w?l.jsx(y2,{href:w.recursoUrl}):l.jsx("span",{className:"text-slate-400 text-xs",children:"—"})]})]})},w.id))})]})]})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-4 pt-8 border-t border-slate-200 dark:border-slate-700",children:[l.jsx("button",{onClick:r,className:"px-8 py-3 bg-slate-200 text-slate-700 rounded-lg font-semibold hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors order-2 sm:order-1",children:"Cancelar"}),l.jsx("button",{onClick:()=>t(a),className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg order-1 sm:order-2",children:e?"Guardar Cambios":"Crear Proyecto"})]})]})]})]})]})},FY=()=>{const[e,t]=S.useState([]),[r,n]=S.useState([]),[a,s]=S.useState(!0),[i,o]=S.useState("list"),[c,u]=S.useState(null),[d,f]=S.useState(null),[h,m]=S.useState(null),[g,x]=S.useState("all"),v=S.useMemo(()=>g==="all"?e:e.filter(N=>N.id===g),[e,g]);S.useEffect(()=>{s(!0);const N=Nfe(L=>{const D=L.filter(k=>k.profile===Jt.PROFESORADO);n(D)}),I=ait(L=>{const D=L.map(k=>({...k,docentesResponsables:Array.isArray(k.docentesResponsables)?k.docentesResponsables:[k.docentesResponsables].filter(Boolean),contenidosPorAsignatura:k.contenidosPorAsignatura||[],actividades:k.actividades||[],fechasClave:k.fechasClave||[]}));t(D),s(!1)});return()=>{N(),I()}},[]);const y=S.useCallback(async(N,I)=>{const L=e.find(k=>k.id===N);if(!L)return;const D={...L,actividades:(L.actividades||[]).map(k=>k.id===I.id?I:k)};await jY(N,D)},[e]),w=async N=>{try{const I=N.id&&String(N.id).length>0,L={...N};if(I){const{id:D,...k}=L;await jY(N.id,k)}else delete L.id,await sit(L);o("list"),u(null)}catch(I){console.error("Error al guardar la planificación:",I),alert("No se pudo guardar la planificación.")}},_=N=>{u(N),o("form")},T=async N=>{if(!N){alert("Error: ID inválido.");return}if(window.confirm("¿Está seguro de eliminar esta planificación?"))try{await iit(N)}catch(I){console.error(I),alert("No se pudo eliminar la planificación.")}},B=()=>{u(null),o("form")},j=async N=>{f(N.id);const I=new br("p","mm","a4"),L=15,k=I.internal.pageSize.getWidth()-L*2;let P=L+20;I.setFont("helvetica","bold"),I.setFontSize(22),I.setTextColor(0);const R=I.splitTextToSize(N.nombreProyecto,k);I.text(R,L,P),P+=R.length*8+10,Io(I,{startY:P,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},(G=>G.map(z=>{var K;return((K=r.find(J=>J.id===z))==null?void 0:K.nombreCompleto)||z}).join(", "))(N.docentesResponsables)],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},N.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},N.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:11,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold"}}}),P=I.lastAutoTable.finalY+15;const V=(G,z)=>{if(!z||Array.isArray(z)&&!z.length||typeof z=="string"&&!z.trim())return;const K=Array.isArray(z)?z.join(", "):String(z),J=I.splitTextToSize(K,k);I.setFont("helvetica","bold"),I.setFontSize(14),I.setTextColor(40),I.text(G,L,P),P+=8,I.setFont("helvetica","normal"),I.setFontSize(11),I.setTextColor(80),I.text(J,L,P),P+=J.length*5+10};if(V("Descripción del Proyecto",N.descripcionProyecto),V("Objetivos de Aprendizaje",N.objetivos),V("Indicadores de Logro",N.indicadoresLogro),N.contenidosPorAsignatura&&N.contenidosPorAsignatura.length>0&&(I.setFont("helvetica","bold"),I.setFontSize(14),I.text("Contenidos por Asignatura",L,P),P+=10,N.contenidosPorAsignatura.forEach(G=>{var z;if(I.setFont("helvetica","bold"),I.setFontSize(11),I.text(`${G.asignatura}:`,L,P),P+=6,I.setFont("helvetica","normal"),I.setFontSize(11),G.contenidos){const K=I.splitTextToSize(`Contenidos: ${G.contenidos}`,k-10);I.text(K,L+5,P),P+=K.length*5+3}if((z=G.habilidades)!=null&&z.length){const K=`Habilidades: ${G.habilidades.join(", ")}`,J=I.splitTextToSize(K,k-10);I.text(J,L+5,P),P+=J.length*5+8}}),P+=10),N.actividades&&N.actividades.length>0&&(I.setFont("helvetica","bold"),I.setFontSize(14),I.text("Actividades",L,P),P+=10,Io(I,{startY:P,head:[["Actividad","Inicio","Fin","Recurso"]],body:N.actividades.map(G=>[G.nombre,G.fechaInicio,G.fechaFin,G.recursoUrl||"—"]),theme:"striped"}),P=I.lastAutoTable.finalY+10),N.fechasClave&&N.fechasClave.length>0&&(I.setFont("helvetica","bold"),I.setFontSize(14),I.text("Fechas Clave",L,P),P+=10,Io(I,{startY:P,head:[["Hito","Fecha","Recurso"]],body:N.fechasClave.map(G=>[G.nombre,G.fecha,G.recursoUrl||"—"]),theme:"striped"}),P=I.lastAutoTable.finalY+10),N.tareas&&N.tareas.length>0){const G=N.tareas.map(z=>[String(z.numero||""),z.instrucciones,z.fechaEntrega,z.recursoUrl||"—"]);I.setFont("helvetica","bold"),I.setFontSize(14),I.text("Tareas para Estudiantes",L,P),P+=10,Io(I,{startY:P,head:[["#","Instrucciones","Entrega","Recurso"]],body:G,theme:"striped",headStyles:{fillColor:[52,73,94]}})}I.save(`Proyecto_${N.nombreProyecto.replace(/\s/g,"_")}.pdf`),f(null)},E=N=>N.map(I=>{var L;return((L=r.find(D=>D.id===I))==null?void 0:L.nombreCompleto)||I}).join(", ");return a?l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Cargando proyectos..."})]})}):h?l.jsx(uit,{plan:h,onBack:()=>m(null),availableTeachers:r}):i==="dashboard"?l.jsxs("div",{className:"space-y-8",children:[l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",onClick:()=>o("list"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Proyectos"}),l.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl font-semibold bg-gradient-to-r from-green-600 to-teal-600 text-white shadow",children:"Dashboard"})]})}),l.jsx(cit,{planificaciones:e,onBack:()=>o("list")})]}):i==="form"?l.jsxs("div",{className:"space-y-8",children:[l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",onClick:()=>{o("list"),u(null)},className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Proyectos"}),l.jsx("button",{type:"button",onClick:()=>o("dashboard"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Dashboard"})]})}),l.jsx(fit,{initialPlan:c,onSave:w,onCancel:()=>{o("list"),u(null)},availableTeachers:r})]}):l.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl font-semibold bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow",children:"Proyectos"}),l.jsx("button",{type:"button",onClick:()=>o("dashboard"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Dashboard"})]})}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl",children:l.jsx(Yg,{className:"w-8 h-8 text-white"})}),l.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Proyectos Interdisciplinarios"})]}),l.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Gestione experiencias de aprendizaje colaborativo e innovador"})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("button",{type:"button",onClick:()=>o("dashboard"),className:"inline-flex items-center gap-3 bg-gradient-to-r from-green-600 to-teal-600 text-white font-bold py-3 px-6 rounded-lg hover:from-green-700 hover:to-teal-700 transition-all duration-200 shadow-lg",children:[l.jsx(BN,{className:"w-5 h-5"})," Ver Dashboard"]}),l.jsxs("button",{type:"button",onClick:B,className:"inline-flex items-center gap-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold py-3 px-6 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg",children:[l.jsx(od,{className:"w-5 h-5"})," Crear Nuevo Proyecto"]})]})]}),e.length===0?l.jsxs("div",{className:"text-center py-16",children:[l.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:l.jsx(Yg,{className:"w-12 h-12 text-slate-400"})}),l.jsx("h3",{className:"text-xl font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"No hay proyectos creados"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-500 mb-6",children:"Comience creando su primer proyecto interdisciplinario"}),l.jsxs("button",{type:"button",onClick:B,className:"inline-flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:[l.jsx(od,{className:"w-4 h-4"})," Crear Primer Proyecto"]})]}):l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:e.map(N=>l.jsxs("div",{className:"group bg-slate-50 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 rounded-xl p-6 hover:shadow-lg transition-all duration-200 hover:border-blue-300 dark:hover:border-blue-600",children:[l.jsx("div",{className:"flex justify-between items-start mb-4",children:l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-slate-200 mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:N.nombreProyecto}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[l.jsx(SN,{className:"w-4 h-4"}),l.jsxs("span",{children:["Cursos: ",N.cursos.join(", ")]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[l.jsx(hc,{className:"w-4 h-4"}),l.jsxs("span",{children:["Profesores: ",E(N.docentesResponsables)]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[l.jsx(df,{className:"w-4 h-4"}),l.jsxs("span",{children:["Asignaturas: ",N.asignaturas.length]})]})]})]})}),!!N.descripcionProyecto&&l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4 line-clamp-3",children:N.descripcionProyecto}),l.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-200 dark:border-slate-600",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{type:"button",onClick:()=>m(N),className:"inline-flex items-center gap-1 text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm transition-colors",title:"Ver entregas de estudiantes",children:[l.jsx(DL,{className:"w-4 h-4"})," Entregas"]}),l.jsxs("button",{type:"button",onClick:()=>j(N),disabled:d===N.id,className:"inline-flex items-center gap-1 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm transition-colors disabled:opacity-50",title:"Exportar a PDF",children:[d===N.id?l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}):l.jsx(Zm,{className:"w-4 h-4"}),"PDF"]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:()=>_(N),className:"p-2 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-lg transition-colors",title:"Editar proyecto",children:l.jsx(One,{className:"w-4 h-4"})}),l.jsx("button",{type:"button",onClick:()=>T(N.id),className:"p-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-lg transition-colors",title:"Eliminar proyecto",children:l.jsx(Do,{className:"w-4 h-4"})})]})]})]},N.id))})]}),e.length>0&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(JCe,{className:"w-5 h-5 text-slate-600"}),l.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Cronograma (Gantt)"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-sm text-slate-600",children:"Proyecto:"}),l.jsxs("select",{value:g,onChange:N=>x(N.target.value),className:"p-2 border border-slate-300 rounded-lg bg-white dark:bg-slate-700 text-sm",children:[l.jsx("option",{value:"all",children:"Todos"}),e.map(N=>l.jsx("option",{value:N.id,children:N.nombreProyecto},N.id))]})]})]}),l.jsx("div",{id:"gantt-container-vertical",children:l.jsx(lit,{planificaciones:v,onActivityUpdate:y})})]})]})},gb="panol_maquinas",kC="panol_registros",Ait=e=>{const t=$t(wt(ht,gb),xr("nombre","asc"));return pr(t,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));e(n)})},hit=e=>{const t=$t(wt(ht,kC),xr("fecha","desc"));return pr(t,r=>{const n=r.docs.map(a=>{const s=a.data();return{id:a.id,fecha:s.fecha,curso:s.curso,profesorResponsable:s.profesorResponsable,maquinaId:s.maquinaId,totalHoras:s.totalHoras,observaciones:s.observaciones||""}});e(n)})},mit=async e=>(await _n(wt(ht,gb),{...e,createdAt:Ri(),updatedAt:Ri()})).id,pit=async(e,t)=>{await du(cr(ht,gb,e),{...t,updatedAt:Ri()})},git=async e=>{const t=$t(wt(ht,kC),Qr("maquinaId","==",e));if(!(await Hn(t)).empty)throw new Error("No se puede eliminar una máquina con registros de uso. Elimine los registros primero.");await is(cr(ht,gb,e))},xit=async e=>(await _n(wt(ht,kC),{...e,createdAt:Ri(),updatedAt:Ri()})).id,vit=async(e,t)=>{await du(cr(ht,kC,e),{...t,updatedAt:Ri()})},bit=async e=>{await is(cr(ht,kC,e))},yit=async()=>{if(!(await Hn(wt(ht,gb))).empty)return;const t=yx(ht);[{nombre:"Torno",especialidad:"Industrial"},{nombre:"Fresadora",especialidad:"Industrial"},{nombre:"Rectificadora",especialidad:"Industrial"},{nombre:"Soldadora MIG",especialidad:"Industrial"},{nombre:"Soldadora TIG",especialidad:"Industrial"},{nombre:"Torno CNC",especialidad:"Industrial"},{nombre:"Elevador",especialidad:"Automotriz"},{nombre:"Compresor",especialidad:"Automotriz"},{nombre:"Rectificadora",especialidad:"Automotriz"},{nombre:"Maqueta de motor",especialidad:"Automotriz"},{nombre:"Maqueta hidráulica",especialidad:"Automotriz"}].forEach(n=>{const a=cr(wt(ht,gb));t.set(a,{...n,createdAt:Ri(),updatedAt:Ri()})}),await t.commit()},wit=()=>{var W;const[e,t]=S.useState([]),[r,n]=S.useState([]),a={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[s,i]=S.useState(a),[o,c]=S.useState(null),u={nombre:"",especialidad:"Industrial"},[d,f]=S.useState(u),[h,m]=S.useState(null),[g,x]=S.useState({maquinaId:"",curso:"",profesor:"",fecha:""});S.useEffect(()=>{yit().catch(console.error);const V=Ait(t),G=hit(n);return()=>{V&&V(),G&&G()}},[]);const v=async V=>{if(V.preventDefault(),!!d.nombre.trim())try{h?await pit(h.id,{...d}):await mit({...d}),f(u),m(null)}catch(G){alert(G.message||"Error al guardar máquina")}},y=S.useCallback(async V=>{try{await git(V)}catch(G){alert(G.message||"Error al eliminar máquina")}},[]),w=async V=>{V.preventDefault();const G=o||s;if(!G.curso||!G.profesorResponsable.trim()||!G.maquinaId||Number(G.totalHoras)<=0){alert("Curso, Profesor, Máquina y un Total de Horas mayor a cero son obligatorios.");return}try{if(o){const{id:z,...K}=o;await vit(z,K)}else await xit({...s});i(a),c(null)}catch(z){alert(z.message||"Error al guardar registro")}},_=S.useCallback(async V=>{try{await bit(V)}catch(G){alert(G.message||"Error al eliminar registro")}},[]),T=S.useMemo(()=>r.filter(V=>(g.maquinaId===""||V.maquinaId===g.maquinaId)&&(g.curso===""||V.curso===g.curso)&&(g.profesor===""||V.profesorResponsable.toLowerCase().includes(g.profesor.toLowerCase()))&&(g.fecha===""||V.fecha===g.fecha)).sort((V,G)=>new Date(G.fecha).getTime()-new Date(V.fecha).getTime()),[r,g]),B=S.useMemo(()=>new Map(e.map(V=>[V.id,V])),[e]),j=S.useMemo(()=>T.reduce((V,G)=>V+(Number(G.totalHoras)||0),0),[T]),E=S.useMemo(()=>{const V=new Map;T.forEach(z=>{var J;const K=((J=B.get(z.maquinaId))==null?void 0:J.nombre)||"N/A";V.set(K,(V.get(K)||0)+(Number(z.totalHoras)||0))});const G=Array.from(V.entries()).map(([z,K])=>({maquina:z,horas:Number(K.toFixed(2))}));return G.sort((z,K)=>K.horas-z.horas),G},[T,B]),N=()=>{const V=T.map(K=>{var J,te;return{Fecha:K.fecha,Curso:K.curso,Profesor:K.profesorResponsable,Máquina:((J=B.get(K.maquinaId))==null?void 0:J.nombre)||"N/A",Especialidad:((te=B.get(K.maquinaId))==null?void 0:te.especialidad)||"N/A","Total Horas":K.totalHoras,Observaciones:K.observaciones}}),G=Ol.json_to_sheet(V),z=Ol.book_new();Ol.book_append_sheet(z,G,"RegistrosPañol"),mT(z,"Registros_Pañol.xlsx")},I=()=>{const V=new br;Io(V,{head:[["Fecha","Curso","Profesor","Máquina","Especialidad","Total Horas","Observaciones"]],body:T.map(G=>{var z,K;return[G.fecha,G.curso,G.profesorResponsable,((z=B.get(G.maquinaId))==null?void 0:z.nombre)||"N/A",((K=B.get(G.maquinaId))==null?void 0:K.especialidad)||"N/A",G.totalHoras,G.observaciones]}),margin:{top:24,right:10,bottom:20,left:10},didDrawPage:G=>{V.setFontSize(12),V.setFont("helvetica","bold"),V.text("LICEO INDUSTRIAL DE RECOLETA",G.settings.margin.left,14),V.setFontSize(10),V.setFont("helvetica","normal"),V.text("Informe de Registros de Pañol",G.settings.margin.left,20)}}),V.save("Registros_Pañol.pdf")},L="w-full border border-slate-300 rounded-xl px-3 py-2 shadow-sm focus:ring-2 focus:ring-indigo-500/30 focus:border-indigo-400 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100 dark:placeholder-slate-400",D=(V,G)=>l.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${G}`,children:V}),k=({icon:V,label:G,value:z,accent:K="from-indigo-500 to-sky-500"})=>l.jsxs("div",{className:"relative rounded-2xl p-4 shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[l.jsx("div",{className:`absolute inset-0 bg-gradient-to-tr ${K} opacity-10`}),l.jsxs("div",{className:"relative flex items-center gap-3 bg-white/70 dark:bg-slate-800/60 rounded-xl p-3",children:[l.jsx("div",{className:"p-2 rounded-xl bg-white dark:bg-slate-700 shadow",children:V}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:G}),l.jsx("div",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:z})]})]})]}),P=({title:V,icon:G,children:z,right:K,accent:J="from-indigo-600/10 via-sky-500/10 to-emerald-500/10"})=>l.jsxs("section",{className:"rounded-2xl p-6 shadow-sm border border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 relative overflow-hidden",children:[l.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${J}`}),l.jsxs("div",{className:"relative",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h2",{className:"flex items-center gap-2 text-lg font-bold text-slate-800 dark:text-slate-100",children:[G," ",l.jsx("span",{children:V})]}),K]}),z]})]}),R=()=>{const V=o||s,G=o?c:i;return l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4 items-end",children:[l.jsxs("div",{className:"lg:col-span-1",children:[l.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(id,{size:16})," Fecha"]}),l.jsx("input",{name:"fecha",type:"date",value:V.fecha,onChange:z=>G({...V,fecha:z.target.value}),className:L,required:!0})]}),l.jsxs("div",{className:"lg:col-span-1",children:[l.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(hc,{size:16})," Curso"]}),l.jsxs("select",{name:"curso",value:V.curso,onChange:z=>G({...V,curso:z.target.value}),className:L,required:!0,children:[l.jsx("option",{value:"",children:"Curso"}),Ac.map(z=>l.jsx("option",{children:z},z))]})]}),l.jsxs("div",{className:"lg:col-span-1",children:[l.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(df,{size:16})," Profesor"]}),l.jsxs("select",{name:"profesorResponsable",value:V.profesorResponsable,onChange:z=>G({...V,profesorResponsable:z.target.value}),className:L,required:!0,children:[l.jsx("option",{value:"",children:"Profesor Responsable"}),PO.map(z=>l.jsx("option",{value:z,children:z},z))]})]}),l.jsxs("div",{className:"lg:col-span-1",children:[l.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(bS,{size:16})," Máquina"]}),l.jsxs("select",{name:"maquinaId",value:V.maquinaId,onChange:z=>G({...V,maquinaId:z.target.value}),className:L,required:!0,children:[l.jsx("option",{value:"",children:"Máquina"}),e.map(z=>l.jsx("option",{value:z.id,children:z.nombre},z.id))]})]}),l.jsxs("div",{className:"lg:col-span-1",children:[l.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(NN,{size:16})," Total de Horas"]}),l.jsx("input",{name:"totalHoras",type:"number",value:V.totalHoras,onChange:z=>G({...V,totalHoras:Number(z.target.value)}),className:L,required:!0,min:.5,step:.5})]}),l.jsxs("div",{className:"lg:col-span-6",children:[l.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),l.jsx("textarea",{name:"observaciones",value:V.observaciones,onChange:z=>G({...V,observaciones:z.target.value}),placeholder:"Observaciones...",className:L+" min-h-[40px]",rows:2})]})]}),l.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o&&l.jsxs("button",{type:"button",onClick:()=>c(null),className:"inline-flex items-center gap-2 bg-white text-slate-700 border border-slate-200 dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700 font-medium py-2 px-4 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:[l.jsx(TN,{size:16})," Cancelar"]}),l.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-4 rounded-xl hover:bg-indigo-500 transition",children:[o?l.jsx(qh,{size:16}):l.jsx(od,{size:16}),o?"Actualizar":"Registrar"]})]})]})};return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("header",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 via-sky-500 to-emerald-500",children:"Pañol: Registro de Uso de Máquinas"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Administra máquinas, registra usos y exporta informes (Firestore)."})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:N,className:"inline-flex items-center gap-2 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100 border border-slate-200 dark:border-slate-800 px-3 py-2 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition",title:"Exportar a Excel",children:[l.jsx(ICe,{size:18})," Excel"]}),l.jsxs("button",{onClick:I,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-3 py-2 rounded-xl hover:bg-emerald-500 transition",title:"Exportar a PDF",children:[l.jsx(nf,{size:18})," PDF"]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsx(k,{icon:l.jsx(bS,{className:"w-5 h-5 text-indigo-600"}),label:"Máquinas registradas",value:e.length,accent:"from-indigo-500 to-sky-500"}),l.jsx(k,{icon:l.jsx(nf,{className:"w-5 h-5 text-sky-600"}),label:"Registros",value:T.length,accent:"from-sky-500 to-cyan-500"}),l.jsx(k,{icon:l.jsx(NN,{className:"w-5 h-5 text-emerald-600"}),label:"Horas totales (filtradas)",value:j.toFixed(1),accent:"from-emerald-500 to-lime-500"}),l.jsx(k,{icon:l.jsx(id,{className:"w-5 h-5 text-amber-600"}),label:"Última actualización",value:(W=r[0])!=null&&W.fecha?new Date(r[0].fecha).toLocaleDateString():"—",accent:"from-amber-500 to-rose-400"})]}),l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[l.jsx("div",{className:"xl:col-span-3",children:l.jsx(P,{title:o?`Editando registro #${o.id.slice(0,4)}`:"Nuevo registro de uso",icon:l.jsx(CCe,{size:18}),children:l.jsx(R,{})})}),l.jsx("div",{className:"xl:col-span-2 order-1 xl:order-none",children:l.jsx(P,{title:"Uso por máquina (horas)",icon:l.jsx(Wd,{size:18}),accent:"from-indigo-600/10 via-sky-500/10 to-amber-500/10",right:l.jsx("div",{className:"flex gap-2 items-center",children:D(`${E.length} máquinas`,"bg-indigo-50 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-200")}),children:l.jsx("div",{className:"h-[320px] w-full",children:l.jsx(Th,{width:"100%",height:"100%",children:l.jsxs(sE,{data:E,margin:{top:8,right:16,bottom:8,left:0},children:[l.jsx(aE,{strokeDasharray:"3 3"}),l.jsx(sx,{dataKey:"maquina",tick:{fontSize:12},interval:0,angle:0,height:50}),l.jsx(ix,{}),l.jsx(Bh,{}),l.jsx(Qb,{}),l.jsx(lb,{dataKey:"horas",name:"Horas",fill:"#6366F1",radius:[6,6,0,0]})]})})})})}),l.jsx("div",{className:"xl:col-span-1 order-2 xl:order-none",children:l.jsxs(P,{title:"Administrar máquinas",icon:l.jsx(bS,{size:18}),accent:"from-emerald-600/10 via-sky-500/10 to-indigo-600/10",children:[l.jsxs("form",{onSubmit:v,className:"grid grid-cols-1 md:grid-cols-5 gap-2 mb-4",children:[l.jsx("input",{value:d.nombre,onChange:V=>f({...d,nombre:V.target.value}),placeholder:"Nombre máquina",className:L+" md:col-span-2"}),l.jsxs("select",{value:d.especialidad,onChange:V=>f({...d,especialidad:V.target.value}),className:L+" md:col-span-2",children:[l.jsx("option",{value:"Industrial",children:"Industrial"}),l.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),l.jsxs("button",{type:"submit",className:"inline-flex items-center justify-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-3 rounded-xl hover:bg-indigo-500 transition md:col-span-1",children:[h?l.jsx(qh,{size:16}):l.jsx(od,{size:16}),h?"Guardar":"Agregar"]})]}),l.jsx("ul",{className:"space-y-2 max-h-72 overflow-y-auto pr-1",children:e.map(V=>l.jsxs("li",{className:"flex justify-between items-center bg-gradient-to-r from-slate-50 to-white dark:from-slate-800/60 dark:to-slate-800/30 border border-slate-200 dark:border-slate-700 p-3 rounded-xl",children:[l.jsxs("div",{className:"space-y-0.5",children:[l.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-100",children:V.nombre}),l.jsx("div",{className:"text-xs",children:V.especialidad==="Industrial"?D("Industrial","bg-indigo-50 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-200"):D("Automotriz","bg-emerald-50 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-200")})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>{m(V),f(V)},className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",title:"Editar",children:l.jsx(RO,{size:16,className:"text-blue-600"})}),l.jsx("button",{onClick:()=>y(V.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",title:"Eliminar",children:l.jsx(Do,{size:16,className:"text-red-600"})})]})]},V.id))})]})}),l.jsx("div",{className:"xl:col-span-2 order-3",children:l.jsxs(P,{title:"Historial de uso",icon:l.jsx(nf,{size:18}),accent:"from-rose-500/10 via-amber-400/10 to-indigo-500/10",right:l.jsx("div",{className:"flex items-center gap-2",children:l.jsx(PL,{size:16,className:"text-slate-600"})}),children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[l.jsx("input",{type:"date",value:g.fecha,onChange:V=>x({...g,fecha:V.target.value}),className:L,placeholder:"Fecha"}),l.jsxs("select",{value:g.curso,onChange:V=>x({...g,curso:V.target.value}),className:L,children:[l.jsx("option",{value:"",children:"Todos los Cursos"}),Ac.map(V=>l.jsx("option",{children:V},V))]}),l.jsxs("select",{value:g.maquinaId,onChange:V=>x({...g,maquinaId:V.target.value}),className:L,children:[l.jsx("option",{value:"",children:"Todas las Máquinas"}),e.map(V=>l.jsx("option",{value:V.id,children:V.nombre},V.id))]}),l.jsxs("div",{className:"relative",children:[l.jsx(Zk,{size:16,className:"absolute left-3 top-2.5 text-slate-400"}),l.jsx("input",{value:g.profesor,onChange:V=>x({...g,profesor:V.target.value}),placeholder:"Buscar profesor...",className:L+" pl-9"})]})]}),l.jsx("div",{className:"max-h-[420px] overflow-y-auto border border-slate-200 dark:border-slate-800 rounded-xl",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-800",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 sticky top-0 z-10",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Fecha"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Máquina"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Profesor / Curso"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Total Horas"}),l.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-600 uppercase",children:"Acciones"})]})}),l.jsxs("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-800",children:[T.map(V=>{var G;return l.jsxs("tr",{className:"hover:bg-slate-50/60 dark:hover:bg-slate-800/50 transition",children:[l.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:V.fecha}),l.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((G=B.get(V.maquinaId))==null?void 0:G.nombre)||"N/A"}),l.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[V.profesorResponsable," ",l.jsxs("span",{className:"text-slate-400",children:["(",V.curso,")"]})]}),l.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:V.totalHoras}),l.jsxs("td",{className:"px-3 py-2 text-center",children:[l.jsx("button",{onClick:()=>c(V),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",title:"Editar",children:l.jsx(RO,{size:16,className:"text-blue-600"})}),l.jsx("button",{onClick:()=>_(V.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",title:"Eliminar",children:l.jsx(Do,{size:16,className:"text-red-600"})})]})]},V.id)}),T.length===0&&l.jsx("tr",{children:l.jsx("td",{className:"px-3 py-6 text-center text-sm text-slate-500",colSpan:5,children:"No hay registros que coincidan con los filtros."})})]})]})})]})})]})]})};function Ml(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let r=0,n;r<e.length;r++)(n=Ml(e[r]))!==""&&(t+=(t&&" ")+n);else for(let r in e)e[r]&&(t+=(t&&" ")+r);return t}const Eit={},OY=e=>{let t;const r=new Set,n=(d,f)=>{const h=typeof d=="function"?d(t):d;if(!Object.is(h,t)){const m=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),r.forEach(g=>g(t,m))}},a=()=>t,c={setState:n,getState:a,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(Eit?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(n,a,c);return c},Cit=e=>e?OY(e):OY,{useDebugValue:_it}=Ze,{useSyncExternalStoreWithSelector:Sit}=rje,Nit=e=>e;function kfe(e,t=Nit,r){const n=Sit(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return _it(n),n}const DY=(e,t)=>{const r=Cit(e),n=(a,s=t)=>kfe(r,a,s);return Object.assign(n,r),n},kit=(e,t)=>e?DY(e,t):DY;function xl(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,a]of e)if(!Object.is(a,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}var Bit={value:()=>{}};function bT(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new FS(r)}function FS(e){this._=e}function Tit(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}FS.prototype=bT.prototype={constructor:FS,on:function(e,t){var r=this._,n=Tit(e+"",r),a,s=-1,i=n.length;if(arguments.length<2){for(;++s<i;)if((a=(e=n[s]).type)&&(a=jit(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(a=(e=n[s]).type)r[a]=PY(r[a],e.name,t);else if(t==null)for(a in r)r[a]=PY(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new FS(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function jit(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function PY(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=Bit,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var yP="http://www.w3.org/1999/xhtml";const RY={svg:"http://www.w3.org/2000/svg",xhtml:yP,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function yT(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),RY.hasOwnProperty(t)?{space:RY[t],local:e}:e}function Iit(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===yP&&t.documentElement.namespaceURI===yP?t.createElement(e):t.createElementNS(r,e)}}function Fit(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Bfe(e){var t=yT(e);return(t.local?Fit:Iit)(t)}function Oit(){}function v7(e){return e==null?Oit:function(){return this.querySelector(e)}}function Dit(e){typeof e!="function"&&(e=v7(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,o=n[a]=new Array(i),c,u,d=0;d<i;++d)(c=s[d])&&(u=e.call(c,c.__data__,d,s))&&("__data__"in c&&(u.__data__=c.__data__),o[d]=u);return new uu(n,this._parents)}function Pit(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Rit(){return[]}function Tfe(e){return e==null?Rit:function(){return this.querySelectorAll(e)}}function Lit(e){return function(){return Pit(e.apply(this,arguments))}}function Mit(e){typeof e=="function"?e=Lit(e):e=Tfe(e);for(var t=this._groups,r=t.length,n=[],a=[],s=0;s<r;++s)for(var i=t[s],o=i.length,c,u=0;u<o;++u)(c=i[u])&&(n.push(e.call(c,c.__data__,u,i)),a.push(c));return new uu(n,a)}function jfe(e){return function(){return this.matches(e)}}function Ife(e){return function(t){return t.matches(e)}}var Uit=Array.prototype.find;function Qit(e){return function(){return Uit.call(this.children,e)}}function Hit(){return this.firstElementChild}function Vit(e){return this.select(e==null?Hit:Qit(typeof e=="function"?e:Ife(e)))}var zit=Array.prototype.filter;function $it(){return Array.from(this.children)}function Git(e){return function(){return zit.call(this.children,e)}}function Kit(e){return this.selectAll(e==null?$it:Git(typeof e=="function"?e:Ife(e)))}function qit(e){typeof e!="function"&&(e=jfe(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,o=n[a]=[],c,u=0;u<i;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&o.push(c);return new uu(n,this._parents)}function Ffe(e){return new Array(e.length)}function Wit(){return new uu(this._enter||this._groups.map(Ffe),this._parents)}function H4(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}H4.prototype={constructor:H4,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Xit(e){return function(){return e}}function Yit(e,t,r,n,a,s){for(var i=0,o,c=t.length,u=s.length;i<u;++i)(o=t[i])?(o.__data__=s[i],n[i]=o):r[i]=new H4(e,s[i]);for(;i<c;++i)(o=t[i])&&(a[i]=o)}function Jit(e,t,r,n,a,s,i){var o,c,u=new Map,d=t.length,f=s.length,h=new Array(d),m;for(o=0;o<d;++o)(c=t[o])&&(h[o]=m=i.call(c,c.__data__,o,t)+"",u.has(m)?a[o]=c:u.set(m,c));for(o=0;o<f;++o)m=i.call(e,s[o],o,s)+"",(c=u.get(m))?(n[o]=c,c.__data__=s[o],u.delete(m)):r[o]=new H4(e,s[o]);for(o=0;o<d;++o)(c=t[o])&&u.get(h[o])===c&&(a[o]=c)}function Zit(e){return e.__data__}function eot(e,t){if(!arguments.length)return Array.from(this,Zit);var r=t?Jit:Yit,n=this._parents,a=this._groups;typeof e!="function"&&(e=Xit(e));for(var s=a.length,i=new Array(s),o=new Array(s),c=new Array(s),u=0;u<s;++u){var d=n[u],f=a[u],h=f.length,m=tot(e.call(d,d&&d.__data__,u,n)),g=m.length,x=o[u]=new Array(g),v=i[u]=new Array(g),y=c[u]=new Array(h);r(d,f,x,v,y,m,t);for(var w=0,_=0,T,B;w<g;++w)if(T=x[w]){for(w>=_&&(_=w+1);!(B=v[_])&&++_<g;);T._next=B||null}}return i=new uu(i,n),i._enter=o,i._exit=c,i}function tot(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function rot(){return new uu(this._exit||this._groups.map(Ffe),this._parents)}function not(e,t,r){var n=this.enter(),a=this,s=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),r==null?s.remove():r(s),n&&a?n.merge(a).order():a}function aot(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,a=r.length,s=n.length,i=Math.min(a,s),o=new Array(a),c=0;c<i;++c)for(var u=r[c],d=n[c],f=u.length,h=o[c]=new Array(f),m,g=0;g<f;++g)(m=u[g]||d[g])&&(h[g]=m);for(;c<a;++c)o[c]=r[c];return new uu(o,this._parents)}function sot(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],a=n.length-1,s=n[a],i;--a>=0;)(i=n[a])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function iot(e){e||(e=oot);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var r=this._groups,n=r.length,a=new Array(n),s=0;s<n;++s){for(var i=r[s],o=i.length,c=a[s]=new Array(o),u,d=0;d<o;++d)(u=i[d])&&(c[d]=u);c.sort(t)}return new uu(a,this._parents).order()}function oot(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function lot(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function cot(){return Array.from(this)}function uot(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length;a<s;++a){var i=n[a];if(i)return i}return null}function dot(){let e=0;for(const t of this)++e;return e}function fot(){return!this.node()}function Aot(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var a=t[r],s=0,i=a.length,o;s<i;++s)(o=a[s])&&e.call(o,o.__data__,s,a);return this}function hot(e){return function(){this.removeAttribute(e)}}function mot(e){return function(){this.removeAttributeNS(e.space,e.local)}}function pot(e,t){return function(){this.setAttribute(e,t)}}function got(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function xot(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function vot(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function bot(e,t){var r=yT(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?mot:hot:typeof t=="function"?r.local?vot:xot:r.local?got:pot)(r,t))}function Ofe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function yot(e){return function(){this.style.removeProperty(e)}}function wot(e,t,r){return function(){this.style.setProperty(e,t,r)}}function Eot(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function Cot(e,t,r){return arguments.length>1?this.each((t==null?yot:typeof t=="function"?Eot:wot)(e,t,r??"")):xb(this.node(),e)}function xb(e,t){return e.style.getPropertyValue(t)||Ofe(e).getComputedStyle(e,null).getPropertyValue(t)}function _ot(e){return function(){delete this[e]}}function Sot(e,t){return function(){this[e]=t}}function Not(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function kot(e,t){return arguments.length>1?this.each((t==null?_ot:typeof t=="function"?Not:Sot)(e,t)):this.node()[e]}function Dfe(e){return e.trim().split(/^|\s+/)}function b7(e){return e.classList||new Pfe(e)}function Pfe(e){this._node=e,this._names=Dfe(e.getAttribute("class")||"")}Pfe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Rfe(e,t){for(var r=b7(e),n=-1,a=t.length;++n<a;)r.add(t[n])}function Lfe(e,t){for(var r=b7(e),n=-1,a=t.length;++n<a;)r.remove(t[n])}function Bot(e){return function(){Rfe(this,e)}}function Tot(e){return function(){Lfe(this,e)}}function jot(e,t){return function(){(t.apply(this,arguments)?Rfe:Lfe)(this,e)}}function Iot(e,t){var r=Dfe(e+"");if(arguments.length<2){for(var n=b7(this.node()),a=-1,s=r.length;++a<s;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof t=="function"?jot:t?Bot:Tot)(r,t))}function Fot(){this.textContent=""}function Oot(e){return function(){this.textContent=e}}function Dot(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Pot(e){return arguments.length?this.each(e==null?Fot:(typeof e=="function"?Dot:Oot)(e)):this.node().textContent}function Rot(){this.innerHTML=""}function Lot(e){return function(){this.innerHTML=e}}function Mot(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Uot(e){return arguments.length?this.each(e==null?Rot:(typeof e=="function"?Mot:Lot)(e)):this.node().innerHTML}function Qot(){this.nextSibling&&this.parentNode.appendChild(this)}function Hot(){return this.each(Qot)}function Vot(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function zot(){return this.each(Vot)}function $ot(e){var t=typeof e=="function"?e:Bfe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Got(){return null}function Kot(e,t){var r=typeof e=="function"?e:Bfe(e),n=t==null?Got:typeof t=="function"?t:v7(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function qot(){var e=this.parentNode;e&&e.removeChild(this)}function Wot(){return this.each(qot)}function Xot(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Yot(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Jot(e){return this.select(e?Yot:Xot)}function Zot(e){return arguments.length?this.property("__data__",e):this.node().__data__}function elt(e){return function(t){e.call(this,t,this.__data__)}}function tlt(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function rlt(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,a=t.length,s;r<a;++r)s=t[r],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++n]=s;++n?t.length=n:delete this.__on}}}function nlt(e,t,r){return function(){var n=this.__on,a,s=elt(t);if(n){for(var i=0,o=n.length;i<o;++i)if((a=n[i]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=r),a.value=t;return}}this.addEventListener(e.type,s,r),a={type:e.type,name:e.name,value:t,listener:s,options:r},n?n.push(a):this.__on=[a]}}function alt(e,t,r){var n=tlt(e+""),a,s=n.length,i;if(arguments.length<2){var o=this.node().__on;if(o){for(var c=0,u=o.length,d;c<u;++c)for(a=0,d=o[c];a<s;++a)if((i=n[a]).type===d.type&&i.name===d.name)return d.value}return}for(o=t?nlt:rlt,a=0;a<s;++a)this.each(o(n[a],t,r));return this}function Mfe(e,t,r){var n=Ofe(e),a=n.CustomEvent;typeof a=="function"?a=new a(t,r):(a=n.document.createEvent("Event"),r?(a.initEvent(t,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function slt(e,t){return function(){return Mfe(this,e,t)}}function ilt(e,t){return function(){return Mfe(this,e,t.apply(this,arguments))}}function olt(e,t){return this.each((typeof t=="function"?ilt:slt)(e,t))}function*llt(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length,i;a<s;++a)(i=n[a])&&(yield i)}var Ufe=[null];function uu(e,t){this._groups=e,this._parents=t}function BC(){return new uu([[document.documentElement]],Ufe)}function clt(){return this}uu.prototype=BC.prototype={constructor:uu,select:Dit,selectAll:Mit,selectChild:Vit,selectChildren:Kit,filter:qit,data:eot,enter:Wit,exit:rot,join:not,merge:aot,selection:clt,order:sot,sort:iot,call:lot,nodes:cot,node:uot,size:dot,empty:fot,each:Aot,attr:bot,style:Cot,property:kot,classed:Iot,text:Pot,html:Uot,raise:Hot,lower:zot,append:$ot,insert:Kot,remove:Wot,clone:Jot,datum:Zot,on:alt,dispatch:olt,[Symbol.iterator]:llt};function Zu(e){return typeof e=="string"?new uu([[document.querySelector(e)]],[document.documentElement]):new uu([[e]],Ufe)}function ult(e){let t;for(;t=e.sourceEvent;)e=t;return e}function aA(e,t){if(e=ult(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const dlt={passive:!1},EE={capture:!0,passive:!1};function cF(e){e.stopImmediatePropagation()}function I1(e){e.preventDefault(),e.stopImmediatePropagation()}function Qfe(e){var t=e.document.documentElement,r=Zu(e).on("dragstart.drag",I1,EE);"onselectstart"in t?r.on("selectstart.drag",I1,EE):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Hfe(e,t){var r=e.document.documentElement,n=Zu(e).on("dragstart.drag",null);t&&(n.on("click.drag",I1,EE),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const N5=e=>()=>e;function wP(e,{sourceEvent:t,subject:r,target:n,identifier:a,active:s,x:i,y:o,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}wP.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function flt(e){return!e.ctrlKey&&!e.button}function Alt(){return this.parentNode}function hlt(e,t){return t??{x:e.x,y:e.y}}function mlt(){return navigator.maxTouchPoints||"ontouchstart"in this}function plt(){var e=flt,t=Alt,r=hlt,n=mlt,a={},s=bT("start","drag","end"),i=0,o,c,u,d,f=0;function h(T){T.on("mousedown.drag",m).filter(n).on("touchstart.drag",v).on("touchmove.drag",y,dlt).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(T,B){if(!(d||!e.call(this,T,B))){var j=_(this,t.call(this,T,B),T,B,"mouse");j&&(Zu(T.view).on("mousemove.drag",g,EE).on("mouseup.drag",x,EE),Qfe(T.view),cF(T),u=!1,o=T.clientX,c=T.clientY,j("start",T))}}function g(T){if(I1(T),!u){var B=T.clientX-o,j=T.clientY-c;u=B*B+j*j>f}a.mouse("drag",T)}function x(T){Zu(T.view).on("mousemove.drag mouseup.drag",null),Hfe(T.view,u),I1(T),a.mouse("end",T)}function v(T,B){if(e.call(this,T,B)){var j=T.changedTouches,E=t.call(this,T,B),N=j.length,I,L;for(I=0;I<N;++I)(L=_(this,E,T,B,j[I].identifier,j[I]))&&(cF(T),L("start",T,j[I]))}}function y(T){var B=T.changedTouches,j=B.length,E,N;for(E=0;E<j;++E)(N=a[B[E].identifier])&&(I1(T),N("drag",T,B[E]))}function w(T){var B=T.changedTouches,j=B.length,E,N;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),E=0;E<j;++E)(N=a[B[E].identifier])&&(cF(T),N("end",T,B[E]))}function _(T,B,j,E,N,I){var L=s.copy(),D=aA(I||j,B),k,P,R;if((R=r.call(T,new wP("beforestart",{sourceEvent:j,target:h,identifier:N,active:i,x:D[0],y:D[1],dx:0,dy:0,dispatch:L}),E))!=null)return k=R.x-D[0]||0,P=R.y-D[1]||0,function W(V,G,z){var K=D,J;switch(V){case"start":a[N]=W,J=i++;break;case"end":delete a[N],--i;case"drag":D=aA(z||G,B),J=i;break}L.call(V,T,new wP(V,{sourceEvent:G,subject:R,target:h,identifier:N,active:J,x:D[0]+k,y:D[1]+P,dx:D[0]-K[0],dy:D[1]-K[1],dispatch:L}),E)}}return h.filter=function(T){return arguments.length?(e=typeof T=="function"?T:N5(!!T),h):e},h.container=function(T){return arguments.length?(t=typeof T=="function"?T:N5(T),h):t},h.subject=function(T){return arguments.length?(r=typeof T=="function"?T:N5(T),h):r},h.touchable=function(T){return arguments.length?(n=typeof T=="function"?T:N5(!!T),h):n},h.on=function(){var T=s.on.apply(s,arguments);return T===s?h:T},h.clickDistance=function(T){return arguments.length?(f=(T=+T)*T,h):Math.sqrt(f)},h}var vb=0,Qw=0,fw=0,Vfe=1e3,V4,Hw,z4=0,Ax=0,wT=0,CE=typeof performance=="object"&&performance.now?performance:Date,zfe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function y7(){return Ax||(zfe(glt),Ax=CE.now()+wT)}function glt(){Ax=0}function $4(){this._call=this._time=this._next=null}$4.prototype=$fe.prototype={constructor:$4,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?y7():+r)+(t==null?0:+t),!this._next&&Hw!==this&&(Hw?Hw._next=this:V4=this,Hw=this),this._call=e,this._time=r,EP()},stop:function(){this._call&&(this._call=null,this._time=1/0,EP())}};function $fe(e,t,r){var n=new $4;return n.restart(e,t,r),n}function xlt(){y7(),++vb;for(var e=V4,t;e;)(t=Ax-e._time)>=0&&e._call.call(void 0,t),e=e._next;--vb}function LY(){Ax=(z4=CE.now())+wT,vb=Qw=0;try{xlt()}finally{vb=0,blt(),Ax=0}}function vlt(){var e=CE.now(),t=e-z4;t>Vfe&&(wT-=t,z4=e)}function blt(){for(var e,t=V4,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:V4=r);Hw=e,EP(n)}function EP(e){if(!vb){Qw&&(Qw=clearTimeout(Qw));var t=e-Ax;t>24?(e<1/0&&(Qw=setTimeout(LY,e-CE.now()-wT)),fw&&(fw=clearInterval(fw))):(fw||(z4=CE.now(),fw=setInterval(vlt,Vfe)),vb=1,zfe(LY))}}function MY(e,t,r){var n=new $4;return t=t==null?0:+t,n.restart(a=>{n.stop(),e(a+t)},t,r),n}var ylt=bT("start","end","cancel","interrupt"),wlt=[],Gfe=0,UY=1,CP=2,OS=3,QY=4,_P=5,DS=6;function ET(e,t,r,n,a,s){var i=e.__transition;if(!i)e.__transition={};else if(r in i)return;Elt(e,r,{name:t,index:n,group:a,on:ylt,tween:wlt,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Gfe})}function w7(e,t){var r=gf(e,t);if(r.state>Gfe)throw new Error("too late; already scheduled");return r}function DA(e,t){var r=gf(e,t);if(r.state>OS)throw new Error("too late; already running");return r}function gf(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function Elt(e,t,r){var n=e.__transition,a;n[t]=r,r.timer=$fe(s,0,r.time);function s(u){r.state=UY,r.timer.restart(i,r.delay,r.time),r.delay<=u&&i(u-r.delay)}function i(u){var d,f,h,m;if(r.state!==UY)return c();for(d in n)if(m=n[d],m.name===r.name){if(m.state===OS)return MY(i);m.state===QY?(m.state=DS,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete n[d]):+d<t&&(m.state=DS,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete n[d])}if(MY(function(){r.state===OS&&(r.state=QY,r.timer.restart(o,r.delay,r.time),o(u))}),r.state=CP,r.on.call("start",e,e.__data__,r.index,r.group),r.state===CP){for(r.state=OS,a=new Array(h=r.tween.length),d=0,f=-1;d<h;++d)(m=r.tween[d].value.call(e,e.__data__,r.index,r.group))&&(a[++f]=m);a.length=f+1}}function o(u){for(var d=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(c),r.state=_P,1),f=-1,h=a.length;++f<h;)a[f].call(e,d);r.state===_P&&(r.on.call("end",e,e.__data__,r.index,r.group),c())}function c(){r.state=DS,r.timer.stop(),delete n[t];for(var u in n)return;delete e.__transition}}function PS(e,t){var r=e.__transition,n,a,s=!0,i;if(r){t=t==null?null:t+"";for(i in r){if((n=r[i]).name!==t){s=!1;continue}a=n.state>CP&&n.state<_P,n.state=DS,n.timer.stop(),n.on.call(a?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[i]}s&&delete e.__transition}}function Clt(e){return this.each(function(){PS(this,e)})}function _lt(e,t){var r,n;return function(){var a=DA(this,e),s=a.tween;if(s!==r){n=r=s;for(var i=0,o=n.length;i<o;++i)if(n[i].name===t){n=n.slice(),n.splice(i,1);break}}a.tween=n}}function Slt(e,t,r){var n,a;if(typeof r!="function")throw new Error;return function(){var s=DA(this,e),i=s.tween;if(i!==n){a=(n=i).slice();for(var o={name:t,value:r},c=0,u=a.length;c<u;++c)if(a[c].name===t){a[c]=o;break}c===u&&a.push(o)}s.tween=a}}function Nlt(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=gf(this.node(),r).tween,a=0,s=n.length,i;a<s;++a)if((i=n[a]).name===e)return i.value;return null}return this.each((t==null?_lt:Slt)(r,e,t))}function E7(e,t,r){var n=e._id;return e.each(function(){var a=DA(this,n);(a.value||(a.value={}))[t]=r.apply(this,arguments)}),function(a){return gf(a,n).value[t]}}function Kfe(e,t){var r;return(typeof t=="number"?zd:t instanceof nx?n4:(r=nx(t))?(t=r,n4):cie)(e,t)}function klt(e){return function(){this.removeAttribute(e)}}function Blt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Tlt(e,t,r){var n,a=r+"",s;return function(){var i=this.getAttribute(e);return i===a?null:i===n?s:s=t(n=i,r)}}function jlt(e,t,r){var n,a=r+"",s;return function(){var i=this.getAttributeNS(e.space,e.local);return i===a?null:i===n?s:s=t(n=i,r)}}function Ilt(e,t,r){var n,a,s;return function(){var i,o=r(this),c;return o==null?void this.removeAttribute(e):(i=this.getAttribute(e),c=o+"",i===c?null:i===n&&c===a?s:(a=c,s=t(n=i,o)))}}function Flt(e,t,r){var n,a,s;return function(){var i,o=r(this),c;return o==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),c=o+"",i===c?null:i===n&&c===a?s:(a=c,s=t(n=i,o)))}}function Olt(e,t){var r=yT(e),n=r==="transform"?_Fe:Kfe;return this.attrTween(e,typeof t=="function"?(r.local?Flt:Ilt)(r,n,E7(this,"attr."+e,t)):t==null?(r.local?Blt:klt)(r):(r.local?jlt:Tlt)(r,n,t))}function Dlt(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function Plt(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function Rlt(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&Plt(e,s)),r}return a._value=t,a}function Llt(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&Dlt(e,s)),r}return a._value=t,a}function Mlt(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=yT(e);return this.tween(r,(n.local?Rlt:Llt)(n,t))}function Ult(e,t){return function(){w7(this,e).delay=+t.apply(this,arguments)}}function Qlt(e,t){return t=+t,function(){w7(this,e).delay=t}}function Hlt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ult:Qlt)(t,e)):gf(this.node(),t).delay}function Vlt(e,t){return function(){DA(this,e).duration=+t.apply(this,arguments)}}function zlt(e,t){return t=+t,function(){DA(this,e).duration=t}}function $lt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Vlt:zlt)(t,e)):gf(this.node(),t).duration}function Glt(e,t){if(typeof t!="function")throw new Error;return function(){DA(this,e).ease=t}}function Klt(e){var t=this._id;return arguments.length?this.each(Glt(t,e)):gf(this.node(),t).ease}function qlt(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;DA(this,e).ease=r}}function Wlt(e){if(typeof e!="function")throw new Error;return this.each(qlt(this._id,e))}function Xlt(e){typeof e!="function"&&(e=jfe(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,o=n[a]=[],c,u=0;u<i;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&o.push(c);return new s0(n,this._parents,this._name,this._id)}function Ylt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,a=r.length,s=Math.min(n,a),i=new Array(n),o=0;o<s;++o)for(var c=t[o],u=r[o],d=c.length,f=i[o]=new Array(d),h,m=0;m<d;++m)(h=c[m]||u[m])&&(f[m]=h);for(;o<n;++o)i[o]=t[o];return new s0(i,this._parents,this._name,this._id)}function Jlt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function Zlt(e,t,r){var n,a,s=Jlt(t)?w7:DA;return function(){var i=s(this,e),o=i.on;o!==n&&(a=(n=o).copy()).on(t,r),i.on=a}}function ect(e,t){var r=this._id;return arguments.length<2?gf(this.node(),r).on.on(e):this.each(Zlt(r,e,t))}function tct(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function rct(){return this.on("end.remove",tct(this._id))}function nct(e){var t=this._name,r=this._id;typeof e!="function"&&(e=v7(e));for(var n=this._groups,a=n.length,s=new Array(a),i=0;i<a;++i)for(var o=n[i],c=o.length,u=s[i]=new Array(c),d,f,h=0;h<c;++h)(d=o[h])&&(f=e.call(d,d.__data__,h,o))&&("__data__"in d&&(f.__data__=d.__data__),u[h]=f,ET(u[h],t,r,h,u,gf(d,r)));return new s0(s,this._parents,t,r)}function act(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Tfe(e));for(var n=this._groups,a=n.length,s=[],i=[],o=0;o<a;++o)for(var c=n[o],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var h=e.call(d,d.__data__,f,c),m,g=gf(d,r),x=0,v=h.length;x<v;++x)(m=h[x])&&ET(m,t,r,x,h,g);s.push(h),i.push(d)}return new s0(s,i,t,r)}var sct=BC.prototype.constructor;function ict(){return new sct(this._groups,this._parents)}function oct(e,t){var r,n,a;return function(){var s=xb(this,e),i=(this.style.removeProperty(e),xb(this,e));return s===i?null:s===r&&i===n?a:a=t(r=s,n=i)}}function qfe(e){return function(){this.style.removeProperty(e)}}function lct(e,t,r){var n,a=r+"",s;return function(){var i=xb(this,e);return i===a?null:i===n?s:s=t(n=i,r)}}function cct(e,t,r){var n,a,s;return function(){var i=xb(this,e),o=r(this),c=o+"";return o==null&&(c=o=(this.style.removeProperty(e),xb(this,e))),i===c?null:i===n&&c===a?s:(a=c,s=t(n=i,o))}}function uct(e,t){var r,n,a,s="style."+t,i="end."+s,o;return function(){var c=DA(this,e),u=c.on,d=c.value[s]==null?o||(o=qfe(t)):void 0;(u!==r||a!==d)&&(n=(r=u).copy()).on(i,a=d),c.on=n}}function dct(e,t,r){var n=(e+="")=="transform"?CFe:Kfe;return t==null?this.styleTween(e,oct(e,n)).on("end.style."+e,qfe(e)):typeof t=="function"?this.styleTween(e,cct(e,n,E7(this,"style."+e,t))).each(uct(this._id,e)):this.styleTween(e,lct(e,n,t),r).on("end.style."+e,null)}function fct(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function Act(e,t,r){var n,a;function s(){var i=t.apply(this,arguments);return i!==a&&(n=(a=i)&&fct(e,i,r)),n}return s._value=t,s}function hct(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,Act(e,t,r??""))}function mct(e){return function(){this.textContent=e}}function pct(e){return function(){var t=e(this);this.textContent=t??""}}function gct(e){return this.tween("text",typeof e=="function"?pct(E7(this,"text",e)):mct(e==null?"":e+""))}function xct(e){return function(t){this.textContent=e.call(this,t)}}function vct(e){var t,r;function n(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&xct(a)),t}return n._value=e,n}function bct(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,vct(e))}function yct(){for(var e=this._name,t=this._id,r=Wfe(),n=this._groups,a=n.length,s=0;s<a;++s)for(var i=n[s],o=i.length,c,u=0;u<o;++u)if(c=i[u]){var d=gf(c,t);ET(c,e,r,u,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new s0(n,this._parents,e,r)}function wct(){var e,t,r=this,n=r._id,a=r.size();return new Promise(function(s,i){var o={value:i},c={value:function(){--a===0&&s()}};r.each(function(){var u=DA(this,n),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(c)),u.on=t}),a===0&&s()})}var Ect=0;function s0(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function Wfe(){return++Ect}var ph=BC.prototype;s0.prototype={constructor:s0,select:nct,selectAll:act,selectChild:ph.selectChild,selectChildren:ph.selectChildren,filter:Xlt,merge:Ylt,selection:ict,transition:yct,call:ph.call,nodes:ph.nodes,node:ph.node,size:ph.size,empty:ph.empty,each:ph.each,on:ect,attr:Olt,attrTween:Mlt,style:dct,styleTween:hct,text:gct,textTween:bct,remove:rct,tween:Nlt,delay:Hlt,duration:$lt,ease:Klt,easeVarying:Wlt,end:wct,[Symbol.iterator]:ph[Symbol.iterator]};function Cct(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var _ct={time:null,delay:0,duration:250,ease:Cct};function Sct(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function Nct(e){var t,r;e instanceof s0?(t=e._id,e=e._name):(t=Wfe(),(r=_ct).time=y7(),e=e==null?null:e+"");for(var n=this._groups,a=n.length,s=0;s<a;++s)for(var i=n[s],o=i.length,c,u=0;u<o;++u)(c=i[u])&&ET(c,e,t,u,i,r||Sct(c,t));return new s0(n,this._parents,e,t)}BC.prototype.interrupt=Clt;BC.prototype.transition=Nct;const k5=e=>()=>e;function kct(e,{sourceEvent:t,target:r,transform:n,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:a}})}function Fh(e,t,r){this.k=e,this.x=t,this.y=r}Fh.prototype={constructor:Fh,scale:function(e){return e===1?this:new Fh(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Fh(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Um=new Fh(1,0,0);Fh.prototype;function uF(e){e.stopImmediatePropagation()}function Aw(e){e.preventDefault(),e.stopImmediatePropagation()}function Bct(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Tct(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function HY(){return this.__zoom||Um}function jct(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Ict(){return navigator.maxTouchPoints||"ontouchstart"in this}function Fct(e,t,r){var n=e.invertX(t[0][0])-r[0][0],a=e.invertX(t[1][0])-r[1][0],s=e.invertY(t[0][1])-r[0][1],i=e.invertY(t[1][1])-r[1][1];return e.translate(a>n?(n+a)/2:Math.min(0,n)||Math.max(0,a),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function Oct(){var e=Bct,t=Tct,r=Fct,n=jct,a=Ict,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],o=250,c=BFe,u=bT("start","zoom","end"),d,f,h,m=500,g=150,x=0,v=10;function y(R){R.property("__zoom",HY).on("wheel.zoom",N,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",L).filter(a).on("touchstart.zoom",D).on("touchmove.zoom",k).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(R,W,V,G){var z=R.selection?R.selection():R;z.property("__zoom",HY),R!==z?B(R,W,V,G):z.interrupt().each(function(){j(this,arguments).event(G).start().zoom(null,typeof W=="function"?W.apply(this,arguments):W).end()})},y.scaleBy=function(R,W,V,G){y.scaleTo(R,function(){var z=this.__zoom.k,K=typeof W=="function"?W.apply(this,arguments):W;return z*K},V,G)},y.scaleTo=function(R,W,V,G){y.transform(R,function(){var z=t.apply(this,arguments),K=this.__zoom,J=V==null?T(z):typeof V=="function"?V.apply(this,arguments):V,te=K.invert(J),M=typeof W=="function"?W.apply(this,arguments):W;return r(_(w(K,M),J,te),z,i)},V,G)},y.translateBy=function(R,W,V,G){y.transform(R,function(){return r(this.__zoom.translate(typeof W=="function"?W.apply(this,arguments):W,typeof V=="function"?V.apply(this,arguments):V),t.apply(this,arguments),i)},null,G)},y.translateTo=function(R,W,V,G,z){y.transform(R,function(){var K=t.apply(this,arguments),J=this.__zoom,te=G==null?T(K):typeof G=="function"?G.apply(this,arguments):G;return r(Um.translate(te[0],te[1]).scale(J.k).translate(typeof W=="function"?-W.apply(this,arguments):-W,typeof V=="function"?-V.apply(this,arguments):-V),K,i)},G,z)};function w(R,W){return W=Math.max(s[0],Math.min(s[1],W)),W===R.k?R:new Fh(W,R.x,R.y)}function _(R,W,V){var G=W[0]-V[0]*R.k,z=W[1]-V[1]*R.k;return G===R.x&&z===R.y?R:new Fh(R.k,G,z)}function T(R){return[(+R[0][0]+ +R[1][0])/2,(+R[0][1]+ +R[1][1])/2]}function B(R,W,V,G){R.on("start.zoom",function(){j(this,arguments).event(G).start()}).on("interrupt.zoom end.zoom",function(){j(this,arguments).event(G).end()}).tween("zoom",function(){var z=this,K=arguments,J=j(z,K).event(G),te=t.apply(z,K),M=V==null?T(te):typeof V=="function"?V.apply(z,K):V,H=Math.max(te[1][0]-te[0][0],te[1][1]-te[0][1]),Y=z.__zoom,Z=typeof W=="function"?W.apply(z,K):W,ae=c(Y.invert(M).concat(H/Y.k),Z.invert(M).concat(H/Z.k));return function(le){if(le===1)le=Z;else{var ie=ae(le),ce=H/ie[2];le=new Fh(ce,M[0]-ie[0]*ce,M[1]-ie[1]*ce)}J.zoom(null,le)}})}function j(R,W,V){return!V&&R.__zooming||new E(R,W)}function E(R,W){this.that=R,this.args=W,this.active=0,this.sourceEvent=null,this.extent=t.apply(R,W),this.taps=0}E.prototype={event:function(R){return R&&(this.sourceEvent=R),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(R,W){return this.mouse&&R!=="mouse"&&(this.mouse[1]=W.invert(this.mouse[0])),this.touch0&&R!=="touch"&&(this.touch0[1]=W.invert(this.touch0[0])),this.touch1&&R!=="touch"&&(this.touch1[1]=W.invert(this.touch1[0])),this.that.__zoom=W,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(R){var W=Zu(this.that).datum();u.call(R,this.that,new kct(R,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:u}),W)}};function N(R,...W){if(!e.apply(this,arguments))return;var V=j(this,W).event(R),G=this.__zoom,z=Math.max(s[0],Math.min(s[1],G.k*Math.pow(2,n.apply(this,arguments)))),K=aA(R);if(V.wheel)(V.mouse[0][0]!==K[0]||V.mouse[0][1]!==K[1])&&(V.mouse[1]=G.invert(V.mouse[0]=K)),clearTimeout(V.wheel);else{if(G.k===z)return;V.mouse=[K,G.invert(K)],PS(this),V.start()}Aw(R),V.wheel=setTimeout(J,g),V.zoom("mouse",r(_(w(G,z),V.mouse[0],V.mouse[1]),V.extent,i));function J(){V.wheel=null,V.end()}}function I(R,...W){if(h||!e.apply(this,arguments))return;var V=R.currentTarget,G=j(this,W,!0).event(R),z=Zu(R.view).on("mousemove.zoom",M,!0).on("mouseup.zoom",H,!0),K=aA(R,V),J=R.clientX,te=R.clientY;Qfe(R.view),uF(R),G.mouse=[K,this.__zoom.invert(K)],PS(this),G.start();function M(Y){if(Aw(Y),!G.moved){var Z=Y.clientX-J,ae=Y.clientY-te;G.moved=Z*Z+ae*ae>x}G.event(Y).zoom("mouse",r(_(G.that.__zoom,G.mouse[0]=aA(Y,V),G.mouse[1]),G.extent,i))}function H(Y){z.on("mousemove.zoom mouseup.zoom",null),Hfe(Y.view,G.moved),Aw(Y),G.event(Y).end()}}function L(R,...W){if(e.apply(this,arguments)){var V=this.__zoom,G=aA(R.changedTouches?R.changedTouches[0]:R,this),z=V.invert(G),K=V.k*(R.shiftKey?.5:2),J=r(_(w(V,K),G,z),t.apply(this,W),i);Aw(R),o>0?Zu(this).transition().duration(o).call(B,J,G,R):Zu(this).call(y.transform,J,G,R)}}function D(R,...W){if(e.apply(this,arguments)){var V=R.touches,G=V.length,z=j(this,W,R.changedTouches.length===G).event(R),K,J,te,M;for(uF(R),J=0;J<G;++J)te=V[J],M=aA(te,this),M=[M,this.__zoom.invert(M),te.identifier],z.touch0?!z.touch1&&z.touch0[2]!==M[2]&&(z.touch1=M,z.taps=0):(z.touch0=M,K=!0,z.taps=1+!!d);d&&(d=clearTimeout(d)),K&&(z.taps<2&&(f=M[0],d=setTimeout(function(){d=null},m)),PS(this),z.start())}}function k(R,...W){if(this.__zooming){var V=j(this,W).event(R),G=R.changedTouches,z=G.length,K,J,te,M;for(Aw(R),K=0;K<z;++K)J=G[K],te=aA(J,this),V.touch0&&V.touch0[2]===J.identifier?V.touch0[0]=te:V.touch1&&V.touch1[2]===J.identifier&&(V.touch1[0]=te);if(J=V.that.__zoom,V.touch1){var H=V.touch0[0],Y=V.touch0[1],Z=V.touch1[0],ae=V.touch1[1],le=(le=Z[0]-H[0])*le+(le=Z[1]-H[1])*le,ie=(ie=ae[0]-Y[0])*ie+(ie=ae[1]-Y[1])*ie;J=w(J,Math.sqrt(le/ie)),te=[(H[0]+Z[0])/2,(H[1]+Z[1])/2],M=[(Y[0]+ae[0])/2,(Y[1]+ae[1])/2]}else if(V.touch0)te=V.touch0[0],M=V.touch0[1];else return;V.zoom("touch",r(_(J,te,M),V.extent,i))}}function P(R,...W){if(this.__zooming){var V=j(this,W).event(R),G=R.changedTouches,z=G.length,K,J;for(uF(R),h&&clearTimeout(h),h=setTimeout(function(){h=null},m),K=0;K<z;++K)J=G[K],V.touch0&&V.touch0[2]===J.identifier?delete V.touch0:V.touch1&&V.touch1[2]===J.identifier&&delete V.touch1;if(V.touch1&&!V.touch0&&(V.touch0=V.touch1,delete V.touch1),V.touch0)V.touch0[1]=this.__zoom.invert(V.touch0[0]);else if(V.end(),V.taps===2&&(J=aA(J,this),Math.hypot(f[0]-J[0],f[1]-J[1])<v)){var te=Zu(this).on("dblclick.zoom");te&&te.apply(this,arguments)}}}return y.wheelDelta=function(R){return arguments.length?(n=typeof R=="function"?R:k5(+R),y):n},y.filter=function(R){return arguments.length?(e=typeof R=="function"?R:k5(!!R),y):e},y.touchable=function(R){return arguments.length?(a=typeof R=="function"?R:k5(!!R),y):a},y.extent=function(R){return arguments.length?(t=typeof R=="function"?R:k5([[+R[0][0],+R[0][1]],[+R[1][0],+R[1][1]]]),y):t},y.scaleExtent=function(R){return arguments.length?(s[0]=+R[0],s[1]=+R[1],y):[s[0],s[1]]},y.translateExtent=function(R){return arguments.length?(i[0][0]=+R[0][0],i[1][0]=+R[1][0],i[0][1]=+R[0][1],i[1][1]=+R[1][1],y):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},y.constrain=function(R){return arguments.length?(r=R,y):r},y.duration=function(R){return arguments.length?(o=+R,y):o},y.interpolate=function(R){return arguments.length?(c=R,y):c},y.on=function(){var R=u.on.apply(u,arguments);return R===u?y:R},y.clickDistance=function(R){return arguments.length?(x=(R=+R)*R,y):Math.sqrt(x)},y.tapDistance=function(R){return arguments.length?(v=+R,y):v},y}const CT=S.createContext(null),Dct=CT.Provider,i0={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Xfe=i0.error001();function xs(e,t){const r=S.useContext(CT);if(r===null)throw new Error(Xfe);return kfe(r,e,t)}const fo=()=>{const e=S.useContext(CT);if(e===null)throw new Error(Xfe);return S.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},Pct=e=>e.userSelectionActive?"none":"all";function Yfe({position:e,children:t,className:r,style:n,...a}){const s=xs(Pct),i=`${e}`.split("-");return Ze.createElement("div",{className:Ml(["react-flow__panel",r,...i]),style:{...n,pointerEvents:s},...a},t)}function Rct({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:Ze.createElement(Yfe,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},Ze.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Lct=({x:e,y:t,label:r,labelStyle:n={},labelShowBg:a=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:o=2,children:c,className:u,...d})=>{const f=S.useRef(null),[h,m]=S.useState({x:0,y:0,width:0,height:0}),g=Ml(["react-flow__edge-textwrapper",u]);return S.useEffect(()=>{if(f.current){const x=f.current.getBBox();m({x:x.x,y:x.y,width:x.width,height:x.height})}},[r]),typeof r>"u"||!r?null:Ze.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:g,visibility:h.width?"visible":"hidden",...d},a&&Ze.createElement("rect",{width:h.width+2*i[0],x:-i[0],y:-i[1],height:h.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:o,ry:o}),Ze.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:f,style:n},r),c)};var Mct=S.memo(Lct);const C7=e=>({width:e.offsetWidth,height:e.offsetHeight}),bb=(e,t=0,r=1)=>Math.min(Math.max(e,t),r),_7=(e={x:0,y:0},t)=>({x:bb(e.x,t[0][0],t[1][0]),y:bb(e.y,t[0][1],t[1][1])}),VY=(e,t,r)=>e<t?bb(Math.abs(e-t),1,50)/50:e>r?-bb(Math.abs(e-r),1,50)/50:0,Jfe=(e,t)=>{const r=VY(e.x,35,t.width-35)*20,n=VY(e.y,35,t.height-35)*20;return[r,n]},Zfe=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Uct=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),S7=({x:e,y:t,width:r,height:n})=>({x:e,y:t,x2:e+r,y2:t+n}),Qct=({x:e,y:t,x2:r,y2:n})=>({x:e,y:t,width:r-e,height:n-t}),zY=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),SP=(e,t)=>{const r=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),n=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(r*n)},Hct=e=>rd(e.width)&&rd(e.height)&&rd(e.x)&&rd(e.y),rd=e=>!isNaN(e)&&isFinite(e),Ps=Symbol.for("internals"),eAe=["Enter"," ","Escape"],Vct=(e,t)=>{},zct=e=>"nativeEvent"in e;function NP(e){var a,s;const t=zct(e)?e.nativeEvent:e,r=((s=(a=t.composedPath)==null?void 0:a.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const tAe=e=>"clientX"in e,Qm=(e,t)=>{var s,i;const r=tAe(e),n=r?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,a=r?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:n-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},G4=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},TC=({id:e,path:t,labelX:r,labelY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:m=20})=>Ze.createElement(Ze.Fragment,null,Ze.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:h}),m&&Ze.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}),a&&rd(r)&&rd(n)?Ze.createElement(Mct,{x:r,y:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u}):null);TC.displayName="BaseEdge";function hw(e,t,r){return r===void 0?r:n=>{const a=t().edges.find(s=>s.id===e);a&&r(n,{...a})}}function rAe({sourceX:e,sourceY:t,targetX:r,targetY:n}){const a=Math.abs(r-e)/2,s=r<e?r+a:r-a,i=Math.abs(n-t)/2,o=n<t?n+i:n-i;return[s,o,a,i]}function nAe({sourceX:e,sourceY:t,targetX:r,targetY:n,sourceControlX:a,sourceControlY:s,targetControlX:i,targetControlY:o}){const c=e*.125+a*.375+i*.375+r*.125,u=t*.125+s*.375+o*.375+n*.125,d=Math.abs(c-e),f=Math.abs(u-t);return[c,u,d,f]}var hx;(function(e){e.Strict="strict",e.Loose="loose"})(hx||(hx={}));var Cg;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Cg||(Cg={}));var _E;(function(e){e.Partial="partial",e.Full="full"})(_E||(_E={}));var bm;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(bm||(bm={}));var K4;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(K4||(K4={}));var _r;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(_r||(_r={}));function $Y({pos:e,x1:t,y1:r,x2:n,y2:a}){return e===_r.Left||e===_r.Right?[.5*(t+n),r]:[t,.5*(r+a)]}function aAe({sourceX:e,sourceY:t,sourcePosition:r=_r.Bottom,targetX:n,targetY:a,targetPosition:s=_r.Top}){const[i,o]=$Y({pos:r,x1:e,y1:t,x2:n,y2:a}),[c,u]=$Y({pos:s,x1:n,y1:a,x2:e,y2:t}),[d,f,h,m]=nAe({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:i,sourceControlY:o,targetControlX:c,targetControlY:u});return[`M${e},${t} C${i},${o} ${c},${u} ${n},${a}`,d,f,h,m]}const N7=S.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=_r.Bottom,targetPosition:s=_r.Top,label:i,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:m,markerStart:g,interactionWidth:x})=>{const[v,y,w]=aAe({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s});return Ze.createElement(TC,{path:v,labelX:y,labelY:w,label:i,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:m,markerStart:g,interactionWidth:x})});N7.displayName="SimpleBezierEdge";const GY={[_r.Left]:{x:-1,y:0},[_r.Right]:{x:1,y:0},[_r.Top]:{x:0,y:-1},[_r.Bottom]:{x:0,y:1}},$ct=({source:e,sourcePosition:t=_r.Bottom,target:r})=>t===_r.Left||t===_r.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},KY=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Gct({source:e,sourcePosition:t=_r.Bottom,target:r,targetPosition:n=_r.Top,center:a,offset:s}){const i=GY[t],o=GY[n],c={x:e.x+i.x*s,y:e.y+i.y*s},u={x:r.x+o.x*s,y:r.y+o.y*s},d=$ct({source:c,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",h=d[f];let m=[],g,x;const v={x:0,y:0},y={x:0,y:0},[w,_,T,B]=rAe({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(i[f]*o[f]===-1){g=a.x??w,x=a.y??_;const E=[{x:g,y:c.y},{x:g,y:u.y}],N=[{x:c.x,y:x},{x:u.x,y:x}];i[f]===h?m=f==="x"?E:N:m=f==="x"?N:E}else{const E=[{x:c.x,y:u.y}],N=[{x:u.x,y:c.y}];if(f==="x"?m=i.x===h?N:E:m=i.y===h?E:N,t===n){const P=Math.abs(e[f]-r[f]);if(P<=s){const R=Math.min(s-1,s-P);i[f]===h?v[f]=(c[f]>e[f]?-1:1)*R:y[f]=(u[f]>r[f]?-1:1)*R}}if(t!==n){const P=f==="x"?"y":"x",R=i[f]===o[P],W=c[P]>u[P],V=c[P]<u[P];(i[f]===1&&(!R&&W||R&&V)||i[f]!==1&&(!R&&V||R&&W))&&(m=f==="x"?E:N)}const I={x:c.x+v.x,y:c.y+v.y},L={x:u.x+y.x,y:u.y+y.y},D=Math.max(Math.abs(I.x-m[0].x),Math.abs(L.x-m[0].x)),k=Math.max(Math.abs(I.y-m[0].y),Math.abs(L.y-m[0].y));D>=k?(g=(I.x+L.x)/2,x=m[0].y):(g=m[0].x,x=(I.y+L.y)/2)}return[[e,{x:c.x+v.x,y:c.y+v.y},...m,{x:u.x+y.x,y:u.y+y.y},r],g,x,T,B]}function Kct(e,t,r,n){const a=Math.min(KY(e,t)/2,KY(t,r)/2,n),{x:s,y:i}=t;if(e.x===s&&s===r.x||e.y===i&&i===r.y)return`L${s} ${i}`;if(e.y===i){const u=e.x<r.x?-1:1,d=e.y<r.y?1:-1;return`L ${s+a*u},${i}Q ${s},${i} ${s},${i+a*d}`}const o=e.x<r.x?1:-1,c=e.y<r.y?-1:1;return`L ${s},${i+a*c}Q ${s},${i} ${s+a*o},${i}`}function kP({sourceX:e,sourceY:t,sourcePosition:r=_r.Bottom,targetX:n,targetY:a,targetPosition:s=_r.Top,borderRadius:i=5,centerX:o,centerY:c,offset:u=20}){const[d,f,h,m,g]=Gct({source:{x:e,y:t},sourcePosition:r,target:{x:n,y:a},targetPosition:s,center:{x:o,y:c},offset:u});return[d.reduce((v,y,w)=>{let _="";return w>0&&w<d.length-1?_=Kct(d[w-1],y,d[w+1],i):_=`${w===0?"M":"L"}${y.x} ${y.y}`,v+=_,v},""),f,h,m,g]}const _T=S.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u,style:d,sourcePosition:f=_r.Bottom,targetPosition:h=_r.Top,markerEnd:m,markerStart:g,pathOptions:x,interactionWidth:v})=>{const[y,w,_]=kP({sourceX:e,sourceY:t,sourcePosition:f,targetX:r,targetY:n,targetPosition:h,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset});return Ze.createElement(TC,{path:y,labelX:w,labelY:_,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:m,markerStart:g,interactionWidth:v})});_T.displayName="SmoothStepEdge";const k7=S.memo(e=>{var t;return Ze.createElement(_T,{...e,pathOptions:S.useMemo(()=>{var r;return{borderRadius:0,offset:(r=e.pathOptions)==null?void 0:r.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});k7.displayName="StepEdge";function qct({sourceX:e,sourceY:t,targetX:r,targetY:n}){const[a,s,i,o]=rAe({sourceX:e,sourceY:t,targetX:r,targetY:n});return[`M ${e},${t}L ${r},${n}`,a,s,i,o]}const B7=S.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:m})=>{const[g,x,v]=qct({sourceX:e,sourceY:t,targetX:r,targetY:n});return Ze.createElement(TC,{path:g,labelX:x,labelY:v,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:m})});B7.displayName="StraightEdge";function B5(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function qY({pos:e,x1:t,y1:r,x2:n,y2:a,c:s}){switch(e){case _r.Left:return[t-B5(t-n,s),r];case _r.Right:return[t+B5(n-t,s),r];case _r.Top:return[t,r-B5(r-a,s)];case _r.Bottom:return[t,r+B5(a-r,s)]}}function sAe({sourceX:e,sourceY:t,sourcePosition:r=_r.Bottom,targetX:n,targetY:a,targetPosition:s=_r.Top,curvature:i=.25}){const[o,c]=qY({pos:r,x1:e,y1:t,x2:n,y2:a,c:i}),[u,d]=qY({pos:s,x1:n,y1:a,x2:e,y2:t,c:i}),[f,h,m,g]=nAe({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:o,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${o},${c} ${u},${d} ${n},${a}`,f,h,m,g]}const q4=S.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=_r.Bottom,targetPosition:s=_r.Top,label:i,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:m,markerStart:g,pathOptions:x,interactionWidth:v})=>{const[y,w,_]=sAe({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s,curvature:x==null?void 0:x.curvature});return Ze.createElement(TC,{path:y,labelX:w,labelY:_,label:i,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:m,markerStart:g,interactionWidth:v})});q4.displayName="BezierEdge";const T7=S.createContext(null),Wct=T7.Provider;T7.Consumer;const Xct=()=>S.useContext(T7),Yct=e=>"id"in e&&"source"in e&&"target"in e,Jct=({source:e,sourceHandle:t,target:r,targetHandle:n})=>`reactflow__edge-${e}${t||""}-${r}${n||""}`,BP=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`,Zct=(e,t)=>t.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),eut=(e,t)=>{if(!e.source||!e.target)return t;let r;return Yct(e)?r={...e}:r={...e,id:Jct(e)},Zct(r,t)?t:t.concat(r)},TP=({x:e,y:t},[r,n,a],s,[i,o])=>{const c={x:(e-r)/a,y:(t-n)/a};return s?{x:i*Math.round(c.x/i),y:o*Math.round(c.y/o)}:c},iAe=({x:e,y:t},[r,n,a])=>({x:e*a+r,y:t*a+n}),F1=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(e.width??0)*t[0],n=(e.height??0)*t[1],a={x:e.position.x-r,y:e.position.y-n};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-n}:a}},j7=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((n,a)=>{const{x:s,y:i}=F1(a,t).positionAbsolute;return Uct(n,S7({x:s,y:i,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Qct(r)},oAe=(e,t,[r,n,a]=[0,0,1],s=!1,i=!1,o=[0,0])=>{const c={x:(t.x-r)/a,y:(t.y-n)/a,width:t.width/a,height:t.height/a},u=[];return e.forEach(d=>{const{width:f,height:h,selectable:m=!0,hidden:g=!1}=d;if(i&&!m||g)return!1;const{positionAbsolute:x}=F1(d,o),v={x:x.x,y:x.y,width:f||0,height:h||0},y=SP(c,v),w=typeof f>"u"||typeof h>"u"||f===null||h===null,_=s&&y>0,T=(f||0)*(h||0);(w||_||y>=T||d.dragging)&&u.push(d)}),u},lAe=(e,t)=>{const r=e.map(n=>n.id);return t.filter(n=>r.includes(n.source)||r.includes(n.target))},cAe=(e,t,r,n,a,s=.1)=>{const i=t/(e.width*(1+s)),o=r/(e.height*(1+s)),c=Math.min(i,o),u=bb(c,n,a),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*u,m=r/2-f*u;return{x:h,y:m,zoom:u}},lg=(e,t=0)=>e.transition().duration(t);function WY(e,t,r,n){return(t[r]||[]).reduce((a,s)=>{var i,o;return`${e.id}-${s.id}-${r}`!==n&&a.push({id:s.id||null,type:r,nodeId:e.id,x:(((i=e.positionAbsolute)==null?void 0:i.x)??0)+s.x+s.width/2,y:(((o=e.positionAbsolute)==null?void 0:o.y)??0)+s.y+s.height/2}),a},[])}function tut(e,t,r,n,a,s){const{x:i,y:o}=Qm(e),u=t.elementsFromPoint(i,o).find(g=>g.classList.contains("react-flow__handle"));if(u){const g=u.getAttribute("data-nodeid");if(g){const x=I7(void 0,u),v=u.getAttribute("data-handleid"),y=s({nodeId:g,id:v,type:x});if(y){const w=a.find(_=>_.nodeId===g&&_.type===x&&_.id===v);return{handle:{id:v,type:x,nodeId:g,x:(w==null?void 0:w.x)||r.x,y:(w==null?void 0:w.y)||r.y},validHandleResult:y}}}}let d=[],f=1/0;if(a.forEach(g=>{const x=Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);if(x<=n){const v=s(g);x<=f&&(x<f?d=[{handle:g,validHandleResult:v}]:x===f&&d.push({handle:g,validHandleResult:v}),f=x)}}),!d.length)return{handle:null,validHandleResult:uAe()};if(d.length===1)return d[0];const h=d.some(({validHandleResult:g})=>g.isValid),m=d.some(({handle:g})=>g.type==="target");return d.find(({handle:g,validHandleResult:x})=>m?g.type==="target":h?x.isValid:!0)||d[0]}const rut={source:null,target:null,sourceHandle:null,targetHandle:null},uAe=()=>({handleDomNode:null,isValid:!1,connection:rut,endHandle:null});function dAe(e,t,r,n,a,s,i){const o=a==="target",c=i.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...uAe(),handleDomNode:c};if(c){const d=I7(void 0,c),f=c.getAttribute("data-nodeid"),h=c.getAttribute("data-handleid"),m=c.classList.contains("connectable"),g=c.classList.contains("connectableend"),x={source:o?f:r,sourceHandle:o?h:n,target:o?r:f,targetHandle:o?n:h};u.connection=x,m&&g&&(t===hx.Strict?o&&d==="source"||!o&&d==="target":f!==r||h!==n)&&(u.endHandle={nodeId:f,handleId:h,type:d},u.isValid=s(x))}return u}function nut({nodes:e,nodeId:t,handleId:r,handleType:n}){return e.reduce((a,s)=>{if(s[Ps]){const{handleBounds:i}=s[Ps];let o=[],c=[];i&&(o=WY(s,i,"source",`${t}-${r}-${n}`),c=WY(s,i,"target",`${t}-${r}-${n}`)),a.push(...o,...c)}return a},[])}function I7(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function dF(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function aut(e,t){let r=null;return t?r="valid":e&&!t&&(r="invalid"),r}function fAe({event:e,handleId:t,nodeId:r,onConnect:n,isTarget:a,getState:s,setState:i,isValidConnection:o,edgeUpdaterType:c,onReconnectEnd:u}){const d=Zfe(e.target),{connectionMode:f,domNode:h,autoPanOnConnect:m,connectionRadius:g,onConnectStart:x,panBy:v,getNodes:y,cancelConnection:w}=s();let _=0,T;const{x:B,y:j}=Qm(e),E=d==null?void 0:d.elementFromPoint(B,j),N=I7(c,E),I=h==null?void 0:h.getBoundingClientRect();if(!I||!N)return;let L,D=Qm(e,I),k=!1,P=null,R=!1,W=null;const V=nut({nodes:y(),nodeId:r,handleId:t,handleType:N}),G=()=>{if(!m)return;const[J,te]=Jfe(D,I);v({x:J,y:te}),_=requestAnimationFrame(G)};i({connectionPosition:D,connectionStatus:null,connectionNodeId:r,connectionHandleId:t,connectionHandleType:N,connectionStartHandle:{nodeId:r,handleId:t,type:N},connectionEndHandle:null}),x==null||x(e,{nodeId:r,handleId:t,handleType:N});function z(J){const{transform:te}=s();D=Qm(J,I);const{handle:M,validHandleResult:H}=tut(J,d,TP(D,te,!1,[1,1]),g,V,Y=>dAe(Y,f,r,t,a?"target":"source",o,d));if(T=M,k||(G(),k=!0),W=H.handleDomNode,P=H.connection,R=H.isValid,i({connectionPosition:T&&R?iAe({x:T.x,y:T.y},te):D,connectionStatus:aut(!!T,R),connectionEndHandle:H.endHandle}),!T&&!R&&!W)return dF(L);P.source!==P.target&&W&&(dF(L),L=W,W.classList.add("connecting","react-flow__handle-connecting"),W.classList.toggle("valid",R),W.classList.toggle("react-flow__handle-valid",R))}function K(J){var te,M;(T||W)&&P&&R&&(n==null||n(P)),(M=(te=s()).onConnectEnd)==null||M.call(te,J),c&&(u==null||u(J)),dF(L),w(),cancelAnimationFrame(_),k=!1,R=!1,P=null,W=null,d.removeEventListener("mousemove",z),d.removeEventListener("mouseup",K),d.removeEventListener("touchmove",z),d.removeEventListener("touchend",K)}d.addEventListener("mousemove",z),d.addEventListener("mouseup",K),d.addEventListener("touchmove",z),d.addEventListener("touchend",K)}const XY=()=>!0,sut=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),iut=(e,t,r)=>n=>{const{connectionStartHandle:a,connectionEndHandle:s,connectionClickStartHandle:i}=n;return{connecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===r||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===r,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===r}},AAe=S.forwardRef(({type:e="source",position:t=_r.Top,isValidConnection:r,isConnectable:n=!0,isConnectableStart:a=!0,isConnectableEnd:s=!0,id:i,onConnect:o,children:c,className:u,onMouseDown:d,onTouchStart:f,...h},m)=>{var I,L;const g=i||null,x=e==="target",v=fo(),y=Xct(),{connectOnClick:w,noPanClassName:_}=xs(sut,xl),{connecting:T,clickConnecting:B}=xs(iut(y,g,e),xl);y||(L=(I=v.getState()).onError)==null||L.call(I,"010",i0.error010());const j=D=>{const{defaultEdgeOptions:k,onConnect:P,hasDefaultEdges:R}=v.getState(),W={...k,...D};if(R){const{edges:V,setEdges:G}=v.getState();G(eut(W,V))}P==null||P(W),o==null||o(W)},E=D=>{if(!y)return;const k=tAe(D);a&&(k&&D.button===0||!k)&&fAe({event:D,handleId:g,nodeId:y,onConnect:j,isTarget:x,getState:v.getState,setState:v.setState,isValidConnection:r||v.getState().isValidConnection||XY}),k?d==null||d(D):f==null||f(D)},N=D=>{const{onClickConnectStart:k,onClickConnectEnd:P,connectionClickStartHandle:R,connectionMode:W,isValidConnection:V}=v.getState();if(!y||!R&&!a)return;if(!R){k==null||k(D,{nodeId:y,handleId:g,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:y,type:e,handleId:g}});return}const G=Zfe(D.target),z=r||V||XY,{connection:K,isValid:J}=dAe({nodeId:y,id:g,type:e},W,R.nodeId,R.handleId||null,R.type,z,G);J&&j(K),P==null||P(D),v.setState({connectionClickStartHandle:null})};return Ze.createElement("div",{"data-handleid":g,"data-nodeid":y,"data-handlepos":t,"data-id":`${y}-${g}-${e}`,className:Ml(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",_,u,{source:!x,target:x,connectable:n,connectablestart:a,connectableend:s,connecting:B,connectionindicator:n&&(a&&!T||s&&T)}]),onMouseDown:E,onTouchStart:E,onClick:w?N:void 0,ref:m,...h},c)});AAe.displayName="Handle";var yb=S.memo(AAe);const hAe=({data:e,isConnectable:t,targetPosition:r=_r.Top,sourcePosition:n=_r.Bottom})=>Ze.createElement(Ze.Fragment,null,Ze.createElement(yb,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label,Ze.createElement(yb,{type:"source",position:n,isConnectable:t}));hAe.displayName="DefaultNode";var jP=S.memo(hAe);const mAe=({data:e,isConnectable:t,sourcePosition:r=_r.Bottom})=>Ze.createElement(Ze.Fragment,null,e==null?void 0:e.label,Ze.createElement(yb,{type:"source",position:r,isConnectable:t}));mAe.displayName="InputNode";var pAe=S.memo(mAe);const gAe=({data:e,isConnectable:t,targetPosition:r=_r.Top})=>Ze.createElement(Ze.Fragment,null,Ze.createElement(yb,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label);gAe.displayName="OutputNode";var xAe=S.memo(gAe);const F7=()=>null;F7.displayName="GroupNode";const out=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),T5=e=>e.id;function lut(e,t){return xl(e.selectedNodes.map(T5),t.selectedNodes.map(T5))&&xl(e.selectedEdges.map(T5),t.selectedEdges.map(T5))}const vAe=S.memo(({onSelectionChange:e})=>{const t=fo(),{selectedNodes:r,selectedEdges:n}=xs(out,lut);return S.useEffect(()=>{const a={nodes:r,edges:n};e==null||e(a),t.getState().onSelectionChange.forEach(s=>s(a))},[r,n,e]),null});vAe.displayName="SelectionListener";const cut=e=>!!e.onSelectionChange;function uut({onSelectionChange:e}){const t=xs(cut);return e||t?Ze.createElement(vAe,{onSelectionChange:e}):null}const dut=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function kv(e,t){S.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function En(e,t,r){S.useEffect(()=>{typeof t<"u"&&r({[e]:t})},[t])}const fut=({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:a,onConnectStart:s,onConnectEnd:i,onClickConnectStart:o,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:h,edgesUpdatable:m,elevateNodesOnSelect:g,minZoom:x,maxZoom:v,nodeExtent:y,onNodesChange:w,onEdgesChange:_,elementsSelectable:T,connectionMode:B,snapGrid:j,snapToGrid:E,translateExtent:N,connectOnClick:I,defaultEdgeOptions:L,fitView:D,fitViewOptions:k,onNodesDelete:P,onEdgesDelete:R,onNodeDrag:W,onNodeDragStart:V,onNodeDragStop:G,onSelectionDrag:z,onSelectionDragStart:K,onSelectionDragStop:J,noPanClassName:te,nodeOrigin:M,rfId:H,autoPanOnConnect:Y,autoPanOnNodeDrag:Z,onError:ae,connectionRadius:le,isValidConnection:ie,nodeDragThreshold:ce})=>{const{setNodes:Ae,setEdges:Fe,setDefaultNodesAndEdges:ne,setMinZoom:_e,setMaxZoom:Ie,setTranslateExtent:Se,setNodeExtent:me,reset:Be}=xs(dut,xl),Le=fo();return S.useEffect(()=>{const We=n==null?void 0:n.map(be=>({...be,...L}));return ne(r,We),()=>{Be()}},[]),En("defaultEdgeOptions",L,Le.setState),En("connectionMode",B,Le.setState),En("onConnect",a,Le.setState),En("onConnectStart",s,Le.setState),En("onConnectEnd",i,Le.setState),En("onClickConnectStart",o,Le.setState),En("onClickConnectEnd",c,Le.setState),En("nodesDraggable",u,Le.setState),En("nodesConnectable",d,Le.setState),En("nodesFocusable",f,Le.setState),En("edgesFocusable",h,Le.setState),En("edgesUpdatable",m,Le.setState),En("elementsSelectable",T,Le.setState),En("elevateNodesOnSelect",g,Le.setState),En("snapToGrid",E,Le.setState),En("snapGrid",j,Le.setState),En("onNodesChange",w,Le.setState),En("onEdgesChange",_,Le.setState),En("connectOnClick",I,Le.setState),En("fitViewOnInit",D,Le.setState),En("fitViewOnInitOptions",k,Le.setState),En("onNodesDelete",P,Le.setState),En("onEdgesDelete",R,Le.setState),En("onNodeDrag",W,Le.setState),En("onNodeDragStart",V,Le.setState),En("onNodeDragStop",G,Le.setState),En("onSelectionDrag",z,Le.setState),En("onSelectionDragStart",K,Le.setState),En("onSelectionDragStop",J,Le.setState),En("noPanClassName",te,Le.setState),En("nodeOrigin",M,Le.setState),En("rfId",H,Le.setState),En("autoPanOnConnect",Y,Le.setState),En("autoPanOnNodeDrag",Z,Le.setState),En("onError",ae,Le.setState),En("connectionRadius",le,Le.setState),En("isValidConnection",ie,Le.setState),En("nodeDragThreshold",ce,Le.setState),kv(e,Ae),kv(t,Fe),kv(x,_e),kv(v,Ie),kv(N,Se),kv(y,me),null},YY={display:"none"},Aut={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},bAe="react-flow__node-desc",yAe="react-flow__edge-desc",hut="react-flow__aria-live",mut=e=>e.ariaLiveMessage;function put({rfId:e}){const t=xs(mut);return Ze.createElement("div",{id:`${hut}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Aut},t)}function gut({rfId:e,disableKeyboardA11y:t}){return Ze.createElement(Ze.Fragment,null,Ze.createElement("div",{id:`${bAe}-${e}`,style:YY},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),Ze.createElement("div",{id:`${yAe}-${e}`,style:YY},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&Ze.createElement(put,{rfId:e}))}var SE=(e=null,t={actInsideInputWithModifier:!0})=>{const[r,n]=S.useState(!1),a=S.useRef(!1),s=S.useRef(new Set([])),[i,o]=S.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=u.reduce((f,h)=>f.concat(...h),[]);return[u,d]}return[[],[]]},[e]);return S.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const d=m=>{if(a.current=m.ctrlKey||m.metaKey||m.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&NP(m))return!1;const x=ZY(m.code,o);s.current.add(m[x]),JY(i,s.current,!1)&&(m.preventDefault(),n(!0))},f=m=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&NP(m))return!1;const x=ZY(m.code,o);JY(i,s.current,!0)?(n(!1),s.current.clear()):s.current.delete(m[x]),m.key==="Meta"&&s.current.clear(),a.current=!1},h=()=>{s.current.clear(),n(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",h),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",h)}}},[e,n]),r};function JY(e,t,r){return e.filter(n=>r||n.length===t.size).some(n=>n.every(a=>t.has(a)))}function ZY(e,t){return t.includes(e)?"code":"key"}function wAe(e,t,r,n){var o,c;const a=e.parentNode||e.parentId;if(!a)return r;const s=t.get(a),i=F1(s,n);return wAe(s,t,{x:(r.x??0)+i.x,y:(r.y??0)+i.y,z:(((o=s[Ps])==null?void 0:o.z)??0)>(r.z??0)?((c=s[Ps])==null?void 0:c.z)??0:r.z??0},n)}function EAe(e,t,r){e.forEach(n=>{var s;const a=n.parentNode||n.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||r!=null&&r[n.id]){const{x:i,y:o,z:c}=wAe(n,e,{...n.position,z:((s=n[Ps])==null?void 0:s.z)??0},t);n.positionAbsolute={x:i,y:o},n[Ps].z=c,r!=null&&r[n.id]&&(n[Ps].isParent=!0)}})}function fF(e,t,r,n){const a=new Map,s={},i=n?1e3:0;return e.forEach(o=>{var m;const c=(rd(o.zIndex)?o.zIndex:0)+(o.selected?i:0),u=t.get(o.id),d={...o,positionAbsolute:{x:o.position.x,y:o.position.y}},f=o.parentNode||o.parentId;f&&(s[f]=!0);const h=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==o.type;Object.defineProperty(d,Ps,{enumerable:!1,value:{handleBounds:h||(m=u==null?void 0:u[Ps])==null?void 0:m.handleBounds,z:c}}),a.set(o.id,d)}),EAe(a,r,s),a}function CAe(e,t={}){const{getNodes:r,width:n,height:a,minZoom:s,maxZoom:i,d3Zoom:o,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:f}=e(),h=t.initial&&!u&&d;if(o&&c&&(h||!t.initial)){const g=r().filter(v=>{var w;const y=t.includeHiddenNodes?v.width&&v.height:!v.hidden;return(w=t.nodes)!=null&&w.length?y&&t.nodes.some(_=>_.id===v.id):y}),x=g.every(v=>v.width&&v.height);if(g.length>0&&x){const v=j7(g,f),{x:y,y:w,zoom:_}=cAe(v,n,a,t.minZoom??s,t.maxZoom??i,t.padding??.1),T=Um.translate(y,w).scale(_);return typeof t.duration=="number"&&t.duration>0?o.transform(lg(c,t.duration),T):o.transform(c,T),!0}}return!1}function xut(e,t){return e.forEach(r=>{const n=t.get(r.id);n&&t.set(n.id,{...n,[Ps]:n[Ps],selected:r.selected})}),new Map(t)}function vut(e,t){return t.map(r=>{const n=e.find(a=>a.id===r.id);return n&&(r.selected=n.selected),r})}function j5({changedNodes:e,changedEdges:t,get:r,set:n}){const{nodeInternals:a,edges:s,onNodesChange:i,onEdgesChange:o,hasDefaultNodes:c,hasDefaultEdges:u}=r();e!=null&&e.length&&(c&&n({nodeInternals:xut(e,a)}),i==null||i(e)),t!=null&&t.length&&(u&&n({edges:vut(t,s)}),o==null||o(t))}const Bv=()=>{},but={zoomIn:Bv,zoomOut:Bv,zoomTo:Bv,getZoom:()=>1,setViewport:Bv,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Bv,fitBounds:Bv,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},yut=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),wut=()=>{const e=fo(),{d3Zoom:t,d3Selection:r}=xs(yut,xl);return S.useMemo(()=>r&&t?{zoomIn:a=>t.scaleBy(lg(r,a==null?void 0:a.duration),1.2),zoomOut:a=>t.scaleBy(lg(r,a==null?void 0:a.duration),1/1.2),zoomTo:(a,s)=>t.scaleTo(lg(r,s==null?void 0:s.duration),a),getZoom:()=>e.getState().transform[2],setViewport:(a,s)=>{const[i,o,c]=e.getState().transform,u=Um.translate(a.x??i,a.y??o).scale(a.zoom??c);t.transform(lg(r,s==null?void 0:s.duration),u)},getViewport:()=>{const[a,s,i]=e.getState().transform;return{x:a,y:s,zoom:i}},fitView:a=>CAe(e.getState,a),setCenter:(a,s,i)=>{const{width:o,height:c,maxZoom:u}=e.getState(),d=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:u,f=o/2-a*d,h=c/2-s*d,m=Um.translate(f,h).scale(d);t.transform(lg(r,i==null?void 0:i.duration),m)},fitBounds:(a,s)=>{const{width:i,height:o,minZoom:c,maxZoom:u}=e.getState(),{x:d,y:f,zoom:h}=cAe(a,i,o,c,u,(s==null?void 0:s.padding)??.1),m=Um.translate(d,f).scale(h);t.transform(lg(r,s==null?void 0:s.duration),m)},project:a=>{const{transform:s,snapToGrid:i,snapGrid:o}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),TP(a,s,i,o)},screenToFlowPosition:a=>{const{transform:s,snapToGrid:i,snapGrid:o,domNode:c}=e.getState();if(!c)return a;const{x:u,y:d}=c.getBoundingClientRect(),f={x:a.x-u,y:a.y-d};return TP(f,s,i,o)},flowToScreenPosition:a=>{const{transform:s,domNode:i}=e.getState();if(!i)return a;const{x:o,y:c}=i.getBoundingClientRect(),u=iAe(a,s);return{x:u.x+o,y:u.y+c}},viewportInitialized:!0}:but,[t,r])};function ST(){const e=wut(),t=fo(),r=S.useCallback(()=>t.getState().getNodes().map(x=>({...x})),[]),n=S.useCallback(x=>t.getState().nodeInternals.get(x),[]),a=S.useCallback(()=>{const{edges:x=[]}=t.getState();return x.map(v=>({...v}))},[]),s=S.useCallback(x=>{const{edges:v=[]}=t.getState();return v.find(y=>y.id===x)},[]),i=S.useCallback(x=>{const{getNodes:v,setNodes:y,hasDefaultNodes:w,onNodesChange:_}=t.getState(),T=v(),B=typeof x=="function"?x(T):x;if(w)y(B);else if(_){const j=B.length===0?T.map(E=>({type:"remove",id:E.id})):B.map(E=>({item:E,type:"reset"}));_(j)}},[]),o=S.useCallback(x=>{const{edges:v=[],setEdges:y,hasDefaultEdges:w,onEdgesChange:_}=t.getState(),T=typeof x=="function"?x(v):x;if(w)y(T);else if(_){const B=T.length===0?v.map(j=>({type:"remove",id:j.id})):T.map(j=>({item:j,type:"reset"}));_(B)}},[]),c=S.useCallback(x=>{const v=Array.isArray(x)?x:[x],{getNodes:y,setNodes:w,hasDefaultNodes:_,onNodesChange:T}=t.getState();if(_){const j=[...y(),...v];w(j)}else if(T){const B=v.map(j=>({item:j,type:"add"}));T(B)}},[]),u=S.useCallback(x=>{const v=Array.isArray(x)?x:[x],{edges:y=[],setEdges:w,hasDefaultEdges:_,onEdgesChange:T}=t.getState();if(_)w([...y,...v]);else if(T){const B=v.map(j=>({item:j,type:"add"}));T(B)}},[]),d=S.useCallback(()=>{const{getNodes:x,edges:v=[],transform:y}=t.getState(),[w,_,T]=y;return{nodes:x().map(B=>({...B})),edges:v.map(B=>({...B})),viewport:{x:w,y:_,zoom:T}}},[]),f=S.useCallback(({nodes:x,edges:v})=>{const{nodeInternals:y,getNodes:w,edges:_,hasDefaultNodes:T,hasDefaultEdges:B,onNodesDelete:j,onEdgesDelete:E,onNodesChange:N,onEdgesChange:I}=t.getState(),L=(x||[]).map(W=>W.id),D=(v||[]).map(W=>W.id),k=w().reduce((W,V)=>{const G=V.parentNode||V.parentId,z=!L.includes(V.id)&&G&&W.find(J=>J.id===G);return(typeof V.deletable=="boolean"?V.deletable:!0)&&(L.includes(V.id)||z)&&W.push(V),W},[]),P=_.filter(W=>typeof W.deletable=="boolean"?W.deletable:!0),R=P.filter(W=>D.includes(W.id));if(k||R){const W=lAe(k,P),V=[...R,...W],G=V.reduce((z,K)=>(z.includes(K.id)||z.push(K.id),z),[]);if((B||T)&&(B&&t.setState({edges:_.filter(z=>!G.includes(z.id))}),T&&(k.forEach(z=>{y.delete(z.id)}),t.setState({nodeInternals:new Map(y)}))),G.length>0&&(E==null||E(V),I&&I(G.map(z=>({id:z,type:"remove"})))),k.length>0&&(j==null||j(k),N)){const z=k.map(K=>({id:K.id,type:"remove"}));N(z)}}},[]),h=S.useCallback(x=>{const v=Hct(x),y=v?null:t.getState().nodeInternals.get(x.id);return!v&&!y?[null,null,v]:[v?x:zY(y),y,v]},[]),m=S.useCallback((x,v=!0,y)=>{const[w,_,T]=h(x);return w?(y||t.getState().getNodes()).filter(B=>{if(!T&&(B.id===_.id||!B.positionAbsolute))return!1;const j=zY(B),E=SP(j,w);return v&&E>0||E>=w.width*w.height}):[]},[]),g=S.useCallback((x,v,y=!0)=>{const[w]=h(x);if(!w)return!1;const _=SP(w,v);return y&&_>0||_>=w.width*w.height},[]);return S.useMemo(()=>({...e,getNodes:r,getNode:n,getEdges:a,getEdge:s,setNodes:i,setEdges:o,addNodes:c,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:m,isNodeIntersecting:g}),[e,r,n,a,s,i,o,c,u,d,f,m,g])}const Eut={actInsideInputWithModifier:!1};var Cut=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const r=fo(),{deleteElements:n}=ST(),a=SE(e,Eut),s=SE(t);S.useEffect(()=>{if(a){const{edges:i,getNodes:o}=r.getState(),c=o().filter(d=>d.selected),u=i.filter(d=>d.selected);n({nodes:c,edges:u}),r.setState({nodesSelectionActive:!1})}},[a]),S.useEffect(()=>{r.setState({multiSelectionActive:s})},[s])};function _ut(e){const t=fo();S.useEffect(()=>{let r;const n=()=>{var s,i;if(!e.current)return;const a=C7(e.current);(a.height===0||a.width===0)&&((i=(s=t.getState()).onError)==null||i.call(s,"004",i0.error004())),t.setState({width:a.width||500,height:a.height||500})};return n(),window.addEventListener("resize",n),e.current&&(r=new ResizeObserver(()=>n()),r.observe(e.current)),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}},[])}const O7={position:"absolute",width:"100%",height:"100%",top:0,left:0},Sut=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,I5=e=>({x:e.x,y:e.y,zoom:e.k}),Tv=(e,t)=>e.target.closest(`.${t}`),eJ=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),tJ=e=>{const t=e.ctrlKey&&G4()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Nut=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),kut=({onMove:e,onMoveStart:t,onMoveEnd:r,onPaneContextMenu:n,zoomOnScroll:a=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:o=.5,panOnScrollMode:c=Cg.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:h,translateExtent:m,minZoom:g,maxZoom:x,zoomActivationKeyCode:v,preventScrolling:y=!0,children:w,noWheelClassName:_,noPanClassName:T})=>{const B=S.useRef(),j=fo(),E=S.useRef(!1),N=S.useRef(!1),I=S.useRef(null),L=S.useRef({x:0,y:0,zoom:0}),{d3Zoom:D,d3Selection:k,d3ZoomHandler:P,userSelectionActive:R}=xs(Nut,xl),W=SE(v),V=S.useRef(0),G=S.useRef(!1),z=S.useRef();return _ut(I),S.useEffect(()=>{if(I.current){const K=I.current.getBoundingClientRect(),J=Oct().scaleExtent([g,x]).translateExtent(m),te=Zu(I.current).call(J),M=Um.translate(h.x,h.y).scale(bb(h.zoom,g,x)),H=[[0,0],[K.width,K.height]],Y=J.constrain()(M,H,m);J.transform(te,Y),J.wheelDelta(tJ),j.setState({d3Zoom:J,d3Selection:te,d3ZoomHandler:te.on("wheel.zoom"),transform:[Y.x,Y.y,Y.k],domNode:I.current.closest(".react-flow")})}},[]),S.useEffect(()=>{k&&D&&(i&&!W&&!R?k.on("wheel.zoom",K=>{if(Tv(K,_))return!1;K.preventDefault(),K.stopImmediatePropagation();const J=k.property("__zoom").k||1;if(K.ctrlKey&&s){const ie=aA(K),ce=tJ(K),Ae=J*Math.pow(2,ce);D.scaleTo(k,Ae,ie,K);return}const te=K.deltaMode===1?20:1;let M=c===Cg.Vertical?0:K.deltaX*te,H=c===Cg.Horizontal?0:K.deltaY*te;!G4()&&K.shiftKey&&c!==Cg.Vertical&&(M=K.deltaY*te,H=0),D.translateBy(k,-(M/J)*o,-(H/J)*o,{internal:!0});const Y=I5(k.property("__zoom")),{onViewportChangeStart:Z,onViewportChange:ae,onViewportChangeEnd:le}=j.getState();clearTimeout(z.current),G.current||(G.current=!0,t==null||t(K,Y),Z==null||Z(Y)),G.current&&(e==null||e(K,Y),ae==null||ae(Y),z.current=setTimeout(()=>{r==null||r(K,Y),le==null||le(Y),G.current=!1},150))},{passive:!1}):typeof P<"u"&&k.on("wheel.zoom",function(K,J){if(!y&&K.type==="wheel"&&!K.ctrlKey||Tv(K,_))return null;K.preventDefault(),P.call(this,K,J)},{passive:!1}))},[R,i,c,k,D,P,W,s,y,_,t,e,r]),S.useEffect(()=>{D&&D.on("start",K=>{var M,H;if(!K.sourceEvent||K.sourceEvent.internal)return null;V.current=(M=K.sourceEvent)==null?void 0:M.button;const{onViewportChangeStart:J}=j.getState(),te=I5(K.transform);E.current=!0,L.current=te,((H=K.sourceEvent)==null?void 0:H.type)==="mousedown"&&j.setState({paneDragging:!0}),J==null||J(te),t==null||t(K.sourceEvent,te)})},[D,t]),S.useEffect(()=>{D&&(R&&!E.current?D.on("zoom",null):R||D.on("zoom",K=>{var te;const{onViewportChange:J}=j.getState();if(j.setState({transform:[K.transform.x,K.transform.y,K.transform.k]}),N.current=!!(n&&eJ(f,V.current??0)),(e||J)&&!((te=K.sourceEvent)!=null&&te.internal)){const M=I5(K.transform);J==null||J(M),e==null||e(K.sourceEvent,M)}}))},[R,D,e,f,n]),S.useEffect(()=>{D&&D.on("end",K=>{if(!K.sourceEvent||K.sourceEvent.internal)return null;const{onViewportChangeEnd:J}=j.getState();if(E.current=!1,j.setState({paneDragging:!1}),n&&eJ(f,V.current??0)&&!N.current&&n(K.sourceEvent),N.current=!1,(r||J)&&Sut(L.current,K.transform)){const te=I5(K.transform);L.current=te,clearTimeout(B.current),B.current=setTimeout(()=>{J==null||J(te),r==null||r(K.sourceEvent,te)},i?150:0)}})},[D,i,f,r,n]),S.useEffect(()=>{D&&D.filter(K=>{const J=W||a,te=s&&K.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&K.button===1&&K.type==="mousedown"&&(Tv(K,"react-flow__node")||Tv(K,"react-flow__edge")))return!0;if(!f&&!J&&!i&&!u&&!s||R||!u&&K.type==="dblclick"||Tv(K,_)&&K.type==="wheel"||Tv(K,T)&&(K.type!=="wheel"||i&&K.type==="wheel"&&!W)||!s&&K.ctrlKey&&K.type==="wheel"||!J&&!i&&!te&&K.type==="wheel"||!f&&(K.type==="mousedown"||K.type==="touchstart")||Array.isArray(f)&&!f.includes(K.button)&&K.type==="mousedown")return!1;const M=Array.isArray(f)&&f.includes(K.button)||!K.button||K.button<=1;return(!K.ctrlKey||K.type==="wheel")&&M})},[R,D,a,s,i,u,f,d,W]),Ze.createElement("div",{className:"react-flow__renderer",ref:I,style:O7},w)},But=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Tut(){const{userSelectionActive:e,userSelectionRect:t}=xs(But,xl);return e&&t?Ze.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function rJ(e,t){const r=t.parentNode||t.parentId,n=e.find(a=>a.id===r);if(n){const a=t.position.x+t.width-n.width,s=t.position.y+t.height-n.height;if(a>0||s>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,a>0&&(n.style.width+=a),s>0&&(n.style.height+=s),t.position.x<0){const i=Math.abs(t.position.x);n.position.x=n.position.x-i,n.style.width+=i,t.position.x=0}if(t.position.y<0){const i=Math.abs(t.position.y);n.position.y=n.position.y-i,n.style.height+=i,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function _Ae(e,t){if(e.some(n=>n.type==="reset"))return e.filter(n=>n.type==="reset").map(n=>n.item);const r=e.filter(n=>n.type==="add").map(n=>n.item);return t.reduce((n,a)=>{const s=e.filter(o=>o.id===a.id);if(s.length===0)return n.push(a),n;const i={...a};for(const o of s)if(o)switch(o.type){case"select":{i.selected=o.selected;break}case"position":{typeof o.position<"u"&&(i.position=o.position),typeof o.positionAbsolute<"u"&&(i.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(i.dragging=o.dragging),i.expandParent&&rJ(n,i);break}case"dimensions":{typeof o.dimensions<"u"&&(i.width=o.dimensions.width,i.height=o.dimensions.height),typeof o.updateStyle<"u"&&(i.style={...i.style||{},...o.dimensions}),typeof o.resizing=="boolean"&&(i.resizing=o.resizing),i.expandParent&&rJ(n,i);break}case"remove":return n}return n.push(i),n},r)}function SAe(e,t){return _Ae(e,t)}function jut(e,t){return _Ae(e,t)}const Am=(e,t)=>({id:e,type:"select",selected:t});function l1(e,t){return e.reduce((r,n)=>{const a=t.includes(n.id);return!n.selected&&a?(n.selected=!0,r.push(Am(n.id,!0))):n.selected&&!a&&(n.selected=!1,r.push(Am(n.id,!1))),r},[])}const AF=(e,t)=>r=>{r.target===t.current&&(e==null||e(r))},Iut=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),NAe=S.memo(({isSelecting:e,selectionMode:t=_E.Full,panOnDrag:r,onSelectionStart:n,onSelectionEnd:a,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:o,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:d,children:f})=>{const h=S.useRef(null),m=fo(),g=S.useRef(0),x=S.useRef(0),v=S.useRef(),{userSelectionActive:y,elementsSelectable:w,dragging:_}=xs(Iut,xl),T=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,x.current=0},B=P=>{s==null||s(P),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},j=P=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){P.preventDefault();return}i==null||i(P)},E=o?P=>o(P):void 0,N=P=>{const{resetSelectedElements:R,domNode:W}=m.getState();if(v.current=W==null?void 0:W.getBoundingClientRect(),!w||!e||P.button!==0||P.target!==h.current||!v.current)return;const{x:V,y:G}=Qm(P,v.current);R(),m.setState({userSelectionRect:{width:0,height:0,startX:V,startY:G,x:V,y:G}}),n==null||n(P)},I=P=>{const{userSelectionRect:R,nodeInternals:W,edges:V,transform:G,onNodesChange:z,onEdgesChange:K,nodeOrigin:J,getNodes:te}=m.getState();if(!e||!v.current||!R)return;m.setState({userSelectionActive:!0,nodesSelectionActive:!1});const M=Qm(P,v.current),H=R.startX??0,Y=R.startY??0,Z={...R,x:M.x<H?M.x:H,y:M.y<Y?M.y:Y,width:Math.abs(M.x-H),height:Math.abs(M.y-Y)},ae=te(),le=oAe(W,Z,G,t===_E.Partial,!0,J),ie=lAe(le,V).map(Ae=>Ae.id),ce=le.map(Ae=>Ae.id);if(g.current!==ce.length){g.current=ce.length;const Ae=l1(ae,ce);Ae.length&&(z==null||z(Ae))}if(x.current!==ie.length){x.current=ie.length;const Ae=l1(V,ie);Ae.length&&(K==null||K(Ae))}m.setState({userSelectionRect:Z})},L=P=>{if(P.button!==0)return;const{userSelectionRect:R}=m.getState();!y&&R&&P.target===h.current&&(B==null||B(P)),m.setState({nodesSelectionActive:g.current>0}),T(),a==null||a(P)},D=P=>{y&&(m.setState({nodesSelectionActive:g.current>0}),a==null||a(P)),T()},k=w&&(e||y);return Ze.createElement("div",{className:Ml(["react-flow__pane",{dragging:_,selection:e}]),onClick:k?void 0:AF(B,h),onContextMenu:AF(j,h),onWheel:AF(E,h),onMouseEnter:k?void 0:c,onMouseDown:k?N:void 0,onMouseMove:k?I:u,onMouseUp:k?L:void 0,onMouseLeave:k?D:d,ref:h,style:O7},f,Ze.createElement(Tut,null))});NAe.displayName="Pane";function kAe(e,t){const r=e.parentNode||e.parentId;if(!r)return!1;const n=t.get(r);return n?n.selected?!0:kAe(n,t):!1}function nJ(e,t,r){let n=e;do{if(n!=null&&n.matches(t))return!0;if(n===r.current)return!1;n=n.parentElement}while(n);return!1}function Fut(e,t,r,n){return Array.from(e.values()).filter(a=>(a.selected||a.id===n)&&(!a.parentNode||a.parentId||!kAe(a,e))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>{var s,i;return{id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((s=a.positionAbsolute)==null?void 0:s.x)??0),y:r.y-(((i=a.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}})}function Out(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function BAe(e,t,r,n,a=[0,0],s){const i=Out(e,e.extent||n);let o=i;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=r.get(c),{x:h,y:m}=F1(f,a).positionAbsolute;o=f&&rd(h)&&rd(m)&&rd(f.width)&&rd(f.height)?[[h+e.width*a[0],m+e.height*a[1]],[h+f.width-e.width+e.width*a[0],m+f.height-e.height+e.height*a[1]]]:o}else s==null||s("005",i0.error005()),o=i;else if(e.extent&&c&&e.extent!=="parent"){const f=r.get(c),{x:h,y:m}=F1(f,a).positionAbsolute;o=[[e.extent[0][0]+h,e.extent[0][1]+m],[e.extent[1][0]+h,e.extent[1][1]+m]]}let u={x:0,y:0};if(c){const f=r.get(c);u=F1(f,a).positionAbsolute}const d=o&&o!=="parent"?_7(t,o):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function hF({nodeId:e,dragItems:t,nodeInternals:r}){const n=t.map(a=>({...r.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[e?n.find(a=>a.id===e):n[0],n]}const aJ=(e,t,r,n)=>{const a=t.querySelectorAll(e);if(!a||!a.length)return null;const s=Array.from(a),i=t.getBoundingClientRect(),o={x:i.width*n[0],y:i.height*n[1]};return s.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-i.left-o.x)/r,y:(u.top-i.top-o.y)/r,...C7(c)}})};function mw(e,t,r){return r===void 0?r:n=>{const a=t().nodeInternals.get(e);a&&r(n,{...a})}}function IP({id:e,store:t,unselect:r=!1,nodeRef:n}){const{addSelectedNodes:a,unselectNodesAndEdges:s,multiSelectionActive:i,nodeInternals:o,onError:c}=t.getState(),u=o.get(e);if(!u){c==null||c("012",i0.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(r||u.selected&&i)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=n==null?void 0:n.current)==null?void 0:d.blur()})):a([e])}function Dut(){const e=fo();return S.useCallback(({sourceEvent:r})=>{const{transform:n,snapGrid:a,snapToGrid:s}=e.getState(),i=r.touches?r.touches[0].clientX:r.clientX,o=r.touches?r.touches[0].clientY:r.clientY,c={x:(i-n[0])/n[2],y:(o-n[1])/n[2]};return{xSnapped:s?a[0]*Math.round(c.x/a[0]):c.x,ySnapped:s?a[1]*Math.round(c.y/a[1]):c.y,...c}},[])}function mF(e){return(t,r,n)=>e==null?void 0:e(t,n)}function TAe({nodeRef:e,disabled:t=!1,noDragClassName:r,handleSelector:n,nodeId:a,isSelectable:s,selectNodesOnDrag:i}){const o=fo(),[c,u]=S.useState(!1),d=S.useRef([]),f=S.useRef({x:null,y:null}),h=S.useRef(0),m=S.useRef(null),g=S.useRef({x:0,y:0}),x=S.useRef(null),v=S.useRef(!1),y=S.useRef(!1),w=S.useRef(!1),_=Dut();return S.useEffect(()=>{if(e!=null&&e.current){const T=Zu(e.current),B=({x:N,y:I})=>{const{nodeInternals:L,onNodeDrag:D,onSelectionDrag:k,updateNodePositions:P,nodeExtent:R,snapGrid:W,snapToGrid:V,nodeOrigin:G,onError:z}=o.getState();f.current={x:N,y:I};let K=!1,J={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&R){const M=j7(d.current,G);J=S7(M)}if(d.current=d.current.map(M=>{const H={x:N-M.distance.x,y:I-M.distance.y};V&&(H.x=W[0]*Math.round(H.x/W[0]),H.y=W[1]*Math.round(H.y/W[1]));const Y=[[R[0][0],R[0][1]],[R[1][0],R[1][1]]];d.current.length>1&&R&&!M.extent&&(Y[0][0]=M.positionAbsolute.x-J.x+R[0][0],Y[1][0]=M.positionAbsolute.x+(M.width??0)-J.x2+R[1][0],Y[0][1]=M.positionAbsolute.y-J.y+R[0][1],Y[1][1]=M.positionAbsolute.y+(M.height??0)-J.y2+R[1][1]);const Z=BAe(M,H,L,Y,G,z);return K=K||M.position.x!==Z.position.x||M.position.y!==Z.position.y,M.position=Z.position,M.positionAbsolute=Z.positionAbsolute,M}),!K)return;P(d.current,!0,!0),u(!0);const te=a?D:mF(k);if(te&&x.current){const[M,H]=hF({nodeId:a,dragItems:d.current,nodeInternals:L});te(x.current,M,H)}},j=()=>{if(!m.current)return;const[N,I]=Jfe(g.current,m.current);if(N!==0||I!==0){const{transform:L,panBy:D}=o.getState();f.current.x=(f.current.x??0)-N/L[2],f.current.y=(f.current.y??0)-I/L[2],D({x:N,y:I})&&B(f.current)}h.current=requestAnimationFrame(j)},E=N=>{var G;const{nodeInternals:I,multiSelectionActive:L,nodesDraggable:D,unselectNodesAndEdges:k,onNodeDragStart:P,onSelectionDragStart:R}=o.getState();y.current=!0;const W=a?P:mF(R);(!i||!s)&&!L&&a&&((G=I.get(a))!=null&&G.selected||k()),a&&s&&i&&IP({id:a,store:o,nodeRef:e});const V=_(N);if(f.current=V,d.current=Fut(I,D,V,a),W&&d.current){const[z,K]=hF({nodeId:a,dragItems:d.current,nodeInternals:I});W(N.sourceEvent,z,K)}};if(t)T.on(".drag",null);else{const N=plt().on("start",I=>{const{domNode:L,nodeDragThreshold:D}=o.getState();D===0&&E(I),w.current=!1;const k=_(I);f.current=k,m.current=(L==null?void 0:L.getBoundingClientRect())||null,g.current=Qm(I.sourceEvent,m.current)}).on("drag",I=>{var P,R;const L=_(I),{autoPanOnNodeDrag:D,nodeDragThreshold:k}=o.getState();if(I.sourceEvent.type==="touchmove"&&I.sourceEvent.touches.length>1&&(w.current=!0),!w.current){if(!v.current&&y.current&&D&&(v.current=!0,j()),!y.current){const W=L.xSnapped-(((P=f==null?void 0:f.current)==null?void 0:P.x)??0),V=L.ySnapped-(((R=f==null?void 0:f.current)==null?void 0:R.y)??0);Math.sqrt(W*W+V*V)>k&&E(I)}(f.current.x!==L.xSnapped||f.current.y!==L.ySnapped)&&d.current&&y.current&&(x.current=I.sourceEvent,g.current=Qm(I.sourceEvent,m.current),B(L))}}).on("end",I=>{if(!(!y.current||w.current)&&(u(!1),v.current=!1,y.current=!1,cancelAnimationFrame(h.current),d.current)){const{updateNodePositions:L,nodeInternals:D,onNodeDragStop:k,onSelectionDragStop:P}=o.getState(),R=a?k:mF(P);if(L(d.current,!1,!1),R){const[W,V]=hF({nodeId:a,dragItems:d.current,nodeInternals:D});R(I.sourceEvent,W,V)}}}).filter(I=>{const L=I.target;return!I.button&&(!r||!nJ(L,`.${r}`,e))&&(!n||nJ(L,n,e))});return T.call(N),()=>{T.on(".drag",null)}}}},[e,t,r,n,s,o,a,i,_]),c}function jAe(){const e=fo();return S.useCallback(r=>{const{nodeInternals:n,nodeExtent:a,updateNodePositions:s,getNodes:i,snapToGrid:o,snapGrid:c,onError:u,nodesDraggable:d}=e.getState(),f=i().filter(w=>w.selected&&(w.draggable||d&&typeof w.draggable>"u")),h=o?c[0]:5,m=o?c[1]:5,g=r.isShiftPressed?4:1,x=r.x*h*g,v=r.y*m*g,y=f.map(w=>{if(w.positionAbsolute){const _={x:w.positionAbsolute.x+x,y:w.positionAbsolute.y+v};o&&(_.x=c[0]*Math.round(_.x/c[0]),_.y=c[1]*Math.round(_.y/c[1]));const{positionAbsolute:T,position:B}=BAe(w,_,n,a,void 0,u);w.position=B,w.positionAbsolute=T}return w});s(y,!0,!1)},[])}const O1={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var pw=e=>{const t=({id:r,type:n,data:a,xPos:s,yPos:i,xPosOrigin:o,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:f,onMouseMove:h,onMouseLeave:m,onContextMenu:g,onDoubleClick:x,style:v,className:y,isDraggable:w,isSelectable:_,isConnectable:T,isFocusable:B,selectNodesOnDrag:j,sourcePosition:E,targetPosition:N,hidden:I,resizeObserver:L,dragHandle:D,zIndex:k,isParent:P,noDragClassName:R,noPanClassName:W,initialized:V,disableKeyboardA11y:G,ariaLabel:z,rfId:K,hasHandleBounds:J})=>{const te=fo(),M=S.useRef(null),H=S.useRef(null),Y=S.useRef(E),Z=S.useRef(N),ae=S.useRef(n),le=_||w||d||f||h||m,ie=jAe(),ce=mw(r,te.getState,f),Ae=mw(r,te.getState,h),Fe=mw(r,te.getState,m),ne=mw(r,te.getState,g),_e=mw(r,te.getState,x),Ie=Be=>{const{nodeDragThreshold:Le}=te.getState();if(_&&(!j||!w||Le>0)&&IP({id:r,store:te,nodeRef:M}),d){const We=te.getState().nodeInternals.get(r);We&&d(Be,{...We})}},Se=Be=>{if(!NP(Be)&&!G)if(eAe.includes(Be.key)&&_){const Le=Be.key==="Escape";IP({id:r,store:te,unselect:Le,nodeRef:M})}else w&&u&&Object.prototype.hasOwnProperty.call(O1,Be.key)&&(te.setState({ariaLiveMessage:`Moved selected node ${Be.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~i}`}),ie({x:O1[Be.key].x,y:O1[Be.key].y,isShiftPressed:Be.shiftKey}))};S.useEffect(()=>()=>{H.current&&(L==null||L.unobserve(H.current),H.current=null)},[]),S.useEffect(()=>{if(M.current&&!I){const Be=M.current;(!V||!J||H.current!==Be)&&(H.current&&(L==null||L.unobserve(H.current)),L==null||L.observe(Be),H.current=Be)}},[I,V,J]),S.useEffect(()=>{const Be=ae.current!==n,Le=Y.current!==E,We=Z.current!==N;M.current&&(Be||Le||We)&&(Be&&(ae.current=n),Le&&(Y.current=E),We&&(Z.current=N),te.getState().updateNodeDimensions([{id:r,nodeElement:M.current,forceUpdate:!0}]))},[r,n,E,N]);const me=TAe({nodeRef:M,disabled:I||!w,noDragClassName:R,handleSelector:D,nodeId:r,isSelectable:_,selectNodesOnDrag:j});return I?null:Ze.createElement("div",{className:Ml(["react-flow__node",`react-flow__node-${n}`,{[W]:w},y,{selected:u,selectable:_,parent:P,dragging:me}]),ref:M,style:{zIndex:k,transform:`translate(${o}px,${c}px)`,pointerEvents:le?"all":"none",visibility:V?"visible":"hidden",...v},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:ce,onMouseMove:Ae,onMouseLeave:Fe,onContextMenu:ne,onClick:Ie,onDoubleClick:_e,onKeyDown:B?Se:void 0,tabIndex:B?0:void 0,role:B?"button":void 0,"aria-describedby":G?void 0:`${bAe}-${K}`,"aria-label":z},Ze.createElement(Wct,{value:r},Ze.createElement(e,{id:r,data:a,type:n,xPos:s,yPos:i,selected:u,isConnectable:T,sourcePosition:E,targetPosition:N,dragging:me,dragHandle:D,zIndex:k})))};return t.displayName="NodeWrapper",S.memo(t)};const Put=e=>{const t=e.getNodes().filter(r=>r.selected);return{...j7(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function Rut({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:r}){const n=fo(),{width:a,height:s,x:i,y:o,transformString:c,userSelectionActive:u}=xs(Put,xl),d=jAe(),f=S.useRef(null);if(S.useEffect(()=>{var g;r||(g=f.current)==null||g.focus({preventScroll:!0})},[r]),TAe({nodeRef:f}),u||!a||!s)return null;const h=e?g=>{const x=n.getState().getNodes().filter(v=>v.selected);e(g,x)}:void 0,m=g=>{Object.prototype.hasOwnProperty.call(O1,g.key)&&d({x:O1[g.key].x,y:O1[g.key].y,isShiftPressed:g.shiftKey})};return Ze.createElement("div",{className:Ml(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},Ze.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:r?void 0:-1,onKeyDown:r?void 0:m,style:{width:a,height:s,top:o,left:i}}))}var Lut=S.memo(Rut);const Mut=e=>e.nodesSelectionActive,IAe=({children:e,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:o,onMove:c,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:h,selectionMode:m,onSelectionStart:g,onSelectionEnd:x,multiSelectionKeyCode:v,panActivationKeyCode:y,zoomActivationKeyCode:w,elementsSelectable:_,zoomOnScroll:T,zoomOnPinch:B,panOnScroll:j,panOnScrollSpeed:E,panOnScrollMode:N,zoomOnDoubleClick:I,panOnDrag:L,defaultViewport:D,translateExtent:k,minZoom:P,maxZoom:R,preventScrolling:W,onSelectionContextMenu:V,noWheelClassName:G,noPanClassName:z,disableKeyboardA11y:K})=>{const J=xs(Mut),te=SE(f),M=SE(y),H=M||L,Y=M||j,Z=te||h&&H!==!0;return Cut({deleteKeyCode:o,multiSelectionKeyCode:v}),Ze.createElement(kut,{onMove:c,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:_,zoomOnScroll:T,zoomOnPinch:B,panOnScroll:Y,panOnScrollSpeed:E,panOnScrollMode:N,zoomOnDoubleClick:I,panOnDrag:!te&&H,defaultViewport:D,translateExtent:k,minZoom:P,maxZoom:R,zoomActivationKeyCode:w,preventScrolling:W,noWheelClassName:G,noPanClassName:z},Ze.createElement(NAe,{onSelectionStart:g,onSelectionEnd:x,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:H,isSelecting:!!Z,selectionMode:m},e,J&&Ze.createElement(Lut,{onSelectionContextMenu:V,noPanClassName:z,disableKeyboardA11y:K})))};IAe.displayName="FlowRenderer";var Uut=S.memo(IAe);function Qut(e){return xs(S.useCallback(r=>e?oAe(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[e]))}function Hut(e){const t={input:pw(e.input||pAe),default:pw(e.default||jP),output:pw(e.output||xAe),group:pw(e.group||F7)},r={},n=Object.keys(e).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,s)=>(a[s]=pw(e[s]||jP),a),r);return{...t,...n}}const Vut=({x:e,y:t,width:r,height:n,origin:a})=>!r||!n?{x:e,y:t}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:t}:{x:e-r*a[0],y:t-n*a[1]},zut=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),FAe=e=>{const{nodesDraggable:t,nodesConnectable:r,nodesFocusable:n,elementsSelectable:a,updateNodeDimensions:s,onError:i}=xs(zut,xl),o=Qut(e.onlyRenderVisibleElements),c=S.useRef(),u=S.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(f=>{const h=f.map(m=>({id:m.target.getAttribute("data-id"),nodeElement:m.target,forceUpdate:!0}));s(h)});return c.current=d,d},[]);return S.useEffect(()=>()=>{var d;(d=c==null?void 0:c.current)==null||d.disconnect()},[]),Ze.createElement("div",{className:"react-flow__nodes",style:O7},o.map(d=>{var B,j,E;let f=d.type||"default";e.nodeTypes[f]||(i==null||i("003",i0.error003(f)),f="default");const h=e.nodeTypes[f]||e.nodeTypes.default,m=!!(d.draggable||t&&typeof d.draggable>"u"),g=!!(d.selectable||a&&typeof d.selectable>"u"),x=!!(d.connectable||r&&typeof d.connectable>"u"),v=!!(d.focusable||n&&typeof d.focusable>"u"),y=e.nodeExtent?_7(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,w=(y==null?void 0:y.x)??0,_=(y==null?void 0:y.y)??0,T=Vut({x:w,y:_,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return Ze.createElement(h,{key:d.id,id:d.id,className:d.className,style:d.style,type:f,data:d.data,sourcePosition:d.sourcePosition||_r.Bottom,targetPosition:d.targetPosition||_r.Top,hidden:d.hidden,xPos:w,yPos:_,xPosOrigin:T.x,yPosOrigin:T.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:m,isSelectable:g,isConnectable:x,isFocusable:v,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((B=d[Ps])==null?void 0:B.z)??0,isParent:!!((j=d[Ps])!=null&&j.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((E=d[Ps])!=null&&E.handleBounds)})}))};FAe.displayName="NodeRenderer";var $ut=S.memo(FAe);const Gut=(e,t,r)=>r===_r.Left?e-t:r===_r.Right?e+t:e,Kut=(e,t,r)=>r===_r.Top?e-t:r===_r.Bottom?e+t:e,sJ="react-flow__edgeupdater",iJ=({position:e,centerX:t,centerY:r,radius:n=10,onMouseDown:a,onMouseEnter:s,onMouseOut:i,type:o})=>Ze.createElement("circle",{onMouseDown:a,onMouseEnter:s,onMouseOut:i,className:Ml([sJ,`${sJ}-${o}`]),cx:Gut(t,n,e),cy:Kut(r,n,e),r:n,stroke:"transparent",fill:"transparent"}),qut=()=>!0;var jv=e=>{const t=({id:r,className:n,type:a,data:s,onClick:i,onEdgeDoubleClick:o,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:x,style:v,source:y,target:w,sourceX:_,sourceY:T,targetX:B,targetY:j,sourcePosition:E,targetPosition:N,elementsSelectable:I,hidden:L,sourceHandleId:D,targetHandleId:k,onContextMenu:P,onMouseEnter:R,onMouseMove:W,onMouseLeave:V,reconnectRadius:G,onReconnect:z,onReconnectStart:K,onReconnectEnd:J,markerEnd:te,markerStart:M,rfId:H,ariaLabel:Y,isFocusable:Z,isReconnectable:ae,pathOptions:le,interactionWidth:ie,disableKeyboardA11y:ce})=>{const Ae=S.useRef(null),[Fe,ne]=S.useState(!1),[_e,Ie]=S.useState(!1),Se=fo(),me=S.useMemo(()=>`url('#${BP(M,H)}')`,[M,H]),Be=S.useMemo(()=>`url('#${BP(te,H)}')`,[te,H]);if(L)return null;const Le=yt=>{var Fn;const{edges:jr,addSelectedEdges:rr,unselectNodesAndEdges:on,multiSelectionActive:kr}=Se.getState(),Kr=jr.find(Rr=>Rr.id===r);Kr&&(I&&(Se.setState({nodesSelectionActive:!1}),Kr.selected&&kr?(on({nodes:[],edges:[Kr]}),(Fn=Ae.current)==null||Fn.blur()):rr([r])),i&&i(yt,Kr))},We=hw(r,Se.getState,o),be=hw(r,Se.getState,P),Oe=hw(r,Se.getState,R),Pe=hw(r,Se.getState,W),qe=hw(r,Se.getState,V),et=(yt,jr)=>{if(yt.button!==0)return;const{edges:rr,isValidConnection:on}=Se.getState(),kr=jr?w:y,Kr=(jr?k:D)||null,Fn=jr?"target":"source",Rr=on||qut,bs=jr,pn=rr.find(an=>an.id===r);Ie(!0),K==null||K(yt,pn,Fn);const da=an=>{Ie(!1),J==null||J(an,pn,Fn)};fAe({event:yt,handleId:Kr,nodeId:kr,onConnect:an=>z==null?void 0:z(pn,an),isTarget:bs,getState:Se.getState,setState:Se.setState,isValidConnection:Rr,edgeUpdaterType:Fn,onReconnectEnd:da})},ct=yt=>et(yt,!0),pt=yt=>et(yt,!1),Ft=()=>ne(!0),Ut=()=>ne(!1),Rt=!I&&!i,Ht=yt=>{var jr;if(!ce&&eAe.includes(yt.key)&&I){const{unselectNodesAndEdges:rr,addSelectedEdges:on,edges:kr}=Se.getState();yt.key==="Escape"?((jr=Ae.current)==null||jr.blur(),rr({edges:[kr.find(Fn=>Fn.id===r)]})):on([r])}};return Ze.createElement("g",{className:Ml(["react-flow__edge",`react-flow__edge-${a}`,n,{selected:c,animated:u,inactive:Rt,updating:Fe}]),onClick:Le,onDoubleClick:We,onContextMenu:be,onMouseEnter:Oe,onMouseMove:Pe,onMouseLeave:qe,onKeyDown:Z?Ht:void 0,tabIndex:Z?0:void 0,role:Z?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":Y===null?void 0:Y||`Edge from ${y} to ${w}`,"aria-describedby":Z?`${yAe}-${H}`:void 0,ref:Ae},!_e&&Ze.createElement(e,{id:r,source:y,target:w,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:x,data:s,style:v,sourceX:_,sourceY:T,targetX:B,targetY:j,sourcePosition:E,targetPosition:N,sourceHandleId:D,targetHandleId:k,markerStart:me,markerEnd:Be,pathOptions:le,interactionWidth:ie}),ae&&Ze.createElement(Ze.Fragment,null,(ae==="source"||ae===!0)&&Ze.createElement(iJ,{position:E,centerX:_,centerY:T,radius:G,onMouseDown:ct,onMouseEnter:Ft,onMouseOut:Ut,type:"source"}),(ae==="target"||ae===!0)&&Ze.createElement(iJ,{position:N,centerX:B,centerY:j,radius:G,onMouseDown:pt,onMouseEnter:Ft,onMouseOut:Ut,type:"target"})))};return t.displayName="EdgeWrapper",S.memo(t)};function Wut(e){const t={default:jv(e.default||q4),straight:jv(e.bezier||B7),step:jv(e.step||k7),smoothstep:jv(e.step||_T),simplebezier:jv(e.simplebezier||N7)},r={},n=Object.keys(e).filter(a=>!["default","bezier"].includes(a)).reduce((a,s)=>(a[s]=jv(e[s]||q4),a),r);return{...t,...n}}function oJ(e,t,r=null){const n=((r==null?void 0:r.x)||0)+t.x,a=((r==null?void 0:r.y)||0)+t.y,s=(r==null?void 0:r.width)||t.width,i=(r==null?void 0:r.height)||t.height;switch(e){case _r.Top:return{x:n+s/2,y:a};case _r.Right:return{x:n+s,y:a+i/2};case _r.Bottom:return{x:n+s/2,y:a+i};case _r.Left:return{x:n,y:a+i/2}}}function lJ(e,t){return e?e.length===1||!t?e[0]:t&&e.find(r=>r.id===t)||null:null}const Xut=(e,t,r,n,a,s)=>{const i=oJ(r,e,t),o=oJ(s,n,a);return{sourceX:i.x,sourceY:i.y,targetX:o.x,targetY:o.y}};function Yut({sourcePos:e,targetPos:t,sourceWidth:r,sourceHeight:n,targetWidth:a,targetHeight:s,width:i,height:o,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+r,t.x+a),y2:Math.max(e.y+n,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=S7({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:i/c[2],height:o/c[2]}),f=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),h=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(f*h)>0}function cJ(e){var n,a,s,i,o;const t=((n=e==null?void 0:e[Ps])==null?void 0:n.handleBounds)||null,r=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)||0,y:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!r]}const Jut=[{level:0,isMaxLevel:!0,edges:[]}];function Zut(e,t,r=!1){let n=-1;const a=e.reduce((i,o)=>{var d,f;const c=rd(o.zIndex);let u=c?o.zIndex:0;if(r){const h=t.get(o.target),m=t.get(o.source),g=o.selected||(h==null?void 0:h.selected)||(m==null?void 0:m.selected),x=Math.max(((d=m==null?void 0:m[Ps])==null?void 0:d.z)||0,((f=h==null?void 0:h[Ps])==null?void 0:f.z)||0,1e3);u=(c?o.zIndex:0)+(g?x:0)}return i[u]?i[u].push(o):i[u]=[o],n=u>n?u:n,i},{}),s=Object.entries(a).map(([i,o])=>{const c=+i;return{edges:o,level:c,isMaxLevel:c===n}});return s.length===0?Jut:s}function edt(e,t,r){const n=xs(S.useCallback(a=>e?a.edges.filter(s=>{const i=t.get(s.source),o=t.get(s.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&Yut({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:o.width,targetHeight:o.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[e,t]));return Zut(n,t,r)}const tdt=({color:e="none",strokeWidth:t=1})=>Ze.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),rdt=({color:e="none",strokeWidth:t=1})=>Ze.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),uJ={[K4.Arrow]:tdt,[K4.ArrowClosed]:rdt};function ndt(e){const t=fo();return S.useMemo(()=>{var a,s;return Object.prototype.hasOwnProperty.call(uJ,e)?uJ[e]:((s=(a=t.getState()).onError)==null||s.call(a,"009",i0.error009(e)),null)},[e])}const adt=({id:e,type:t,color:r,width:n=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:o="auto-start-reverse"})=>{const c=ndt(t);return c?Ze.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${n}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:o,refX:"0",refY:"0"},Ze.createElement(c,{color:r,strokeWidth:i})):null},sdt=({defaultColor:e,rfId:t})=>r=>{const n=[];return r.edges.reduce((a,s)=>([s.markerStart,s.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const o=BP(i,t);n.includes(o)||(a.push({id:o,color:i.color||e,...i}),n.push(o))}}),a),[]).sort((a,s)=>a.id.localeCompare(s.id))},OAe=({defaultColor:e,rfId:t})=>{const r=xs(S.useCallback(sdt({defaultColor:e,rfId:t}),[e,t]),(n,a)=>!(n.length!==a.length||n.some((s,i)=>s.id!==a[i].id)));return Ze.createElement("defs",null,r.map(n=>Ze.createElement(adt,{id:n.id,key:n.id,type:n.type,color:n.color,width:n.width,height:n.height,markerUnits:n.markerUnits,strokeWidth:n.strokeWidth,orient:n.orient})))};OAe.displayName="MarkerDefinitions";var idt=S.memo(OAe);const odt=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),DAe=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:r,rfId:n,edgeTypes:a,noPanClassName:s,onEdgeContextMenu:i,onEdgeMouseEnter:o,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:m,onReconnectEnd:g,reconnectRadius:x,children:v,disableKeyboardA11y:y})=>{const{edgesFocusable:w,edgesUpdatable:_,elementsSelectable:T,width:B,height:j,connectionMode:E,nodeInternals:N,onError:I}=xs(odt,xl),L=edt(t,N,r);return B?Ze.createElement(Ze.Fragment,null,L.map(({level:D,edges:k,isMaxLevel:P})=>Ze.createElement("svg",{key:D,style:{zIndex:D},width:B,height:j,className:"react-flow__edges react-flow__container"},P&&Ze.createElement(idt,{defaultColor:e,rfId:n}),Ze.createElement("g",null,k.map(R=>{const[W,V,G]=cJ(N.get(R.source)),[z,K,J]=cJ(N.get(R.target));if(!G||!J)return null;let te=R.type||"default";a[te]||(I==null||I("011",i0.error011(te)),te="default");const M=a[te]||a.default,H=E===hx.Strict?K.target:(K.target??[]).concat(K.source??[]),Y=lJ(V.source,R.sourceHandle),Z=lJ(H,R.targetHandle),ae=(Y==null?void 0:Y.position)||_r.Bottom,le=(Z==null?void 0:Z.position)||_r.Top,ie=!!(R.focusable||w&&typeof R.focusable>"u"),ce=R.reconnectable||R.updatable,Ae=typeof h<"u"&&(ce||_&&typeof ce>"u");if(!Y||!Z)return I==null||I("008",i0.error008(Y,R)),null;const{sourceX:Fe,sourceY:ne,targetX:_e,targetY:Ie}=Xut(W,Y,ae,z,Z,le);return Ze.createElement(M,{key:R.id,id:R.id,className:Ml([R.className,s]),type:te,data:R.data,selected:!!R.selected,animated:!!R.animated,hidden:!!R.hidden,label:R.label,labelStyle:R.labelStyle,labelShowBg:R.labelShowBg,labelBgStyle:R.labelBgStyle,labelBgPadding:R.labelBgPadding,labelBgBorderRadius:R.labelBgBorderRadius,style:R.style,source:R.source,target:R.target,sourceHandleId:R.sourceHandle,targetHandleId:R.targetHandle,markerEnd:R.markerEnd,markerStart:R.markerStart,sourceX:Fe,sourceY:ne,targetX:_e,targetY:Ie,sourcePosition:ae,targetPosition:le,elementsSelectable:T,onContextMenu:i,onMouseEnter:o,onMouseMove:c,onMouseLeave:u,onClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:m,onReconnectEnd:g,reconnectRadius:x,rfId:n,ariaLabel:R.ariaLabel,isFocusable:ie,isReconnectable:Ae,pathOptions:"pathOptions"in R?R.pathOptions:void 0,interactionWidth:R.interactionWidth,disableKeyboardA11y:y})})))),v):null};DAe.displayName="EdgeRenderer";var ldt=S.memo(DAe);const cdt=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function udt({children:e}){const t=xs(cdt);return Ze.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function ddt(e){const t=ST(),r=S.useRef(!1);S.useEffect(()=>{!r.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),r.current=!0)},[e,t.viewportInitialized])}const fdt={[_r.Left]:_r.Right,[_r.Right]:_r.Left,[_r.Top]:_r.Bottom,[_r.Bottom]:_r.Top},PAe=({nodeId:e,handleType:t,style:r,type:n=bm.Bezier,CustomComponent:a,connectionStatus:s})=>{var j,E,N;const{fromNode:i,handleId:o,toX:c,toY:u,connectionMode:d}=xs(S.useCallback(I=>({fromNode:I.nodeInternals.get(e),handleId:I.connectionHandleId,toX:(I.connectionPosition.x-I.transform[0])/I.transform[2],toY:(I.connectionPosition.y-I.transform[1])/I.transform[2],connectionMode:I.connectionMode}),[e]),xl),f=(j=i==null?void 0:i[Ps])==null?void 0:j.handleBounds;let h=f==null?void 0:f[t];if(d===hx.Loose&&(h=h||(f==null?void 0:f[t==="source"?"target":"source"])),!i||!h)return null;const m=o?h.find(I=>I.id===o):h[0],g=m?m.x+m.width/2:(i.width??0)/2,x=m?m.y+m.height/2:i.height??0,v=(((E=i.positionAbsolute)==null?void 0:E.x)??0)+g,y=(((N=i.positionAbsolute)==null?void 0:N.y)??0)+x,w=m==null?void 0:m.position,_=w?fdt[w]:null;if(!w||!_)return null;if(a)return Ze.createElement(a,{connectionLineType:n,connectionLineStyle:r,fromNode:i,fromHandle:m,fromX:v,fromY:y,toX:c,toY:u,fromPosition:w,toPosition:_,connectionStatus:s});let T="";const B={sourceX:v,sourceY:y,sourcePosition:w,targetX:c,targetY:u,targetPosition:_};return n===bm.Bezier?[T]=sAe(B):n===bm.Step?[T]=kP({...B,borderRadius:0}):n===bm.SmoothStep?[T]=kP(B):n===bm.SimpleBezier?[T]=aAe(B):T=`M${v},${y} ${c},${u}`,Ze.createElement("path",{d:T,fill:"none",className:"react-flow__connection-path",style:r})};PAe.displayName="ConnectionLine";const Adt=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function hdt({containerStyle:e,style:t,type:r,component:n}){const{nodeId:a,handleType:s,nodesConnectable:i,width:o,height:c,connectionStatus:u}=xs(Adt,xl);return!(a&&s&&o&&i)?null:Ze.createElement("svg",{style:e,width:o,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},Ze.createElement("g",{className:Ml(["react-flow__connection",u])},Ze.createElement(PAe,{nodeId:a,handleType:s,style:t,type:r,CustomComponent:n,connectionStatus:u})))}function dJ(e,t){return S.useRef(null),fo(),S.useMemo(()=>t(e),[e])}const RAe=({nodeTypes:e,edgeTypes:t,onMove:r,onMoveStart:n,onMoveEnd:a,onInit:s,onNodeClick:i,onEdgeClick:o,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:m,onSelectionContextMenu:g,onSelectionStart:x,onSelectionEnd:v,connectionLineType:y,connectionLineStyle:w,connectionLineComponent:_,connectionLineContainerStyle:T,selectionKeyCode:B,selectionOnDrag:j,selectionMode:E,multiSelectionKeyCode:N,panActivationKeyCode:I,zoomActivationKeyCode:L,deleteKeyCode:D,onlyRenderVisibleElements:k,elementsSelectable:P,selectNodesOnDrag:R,defaultViewport:W,translateExtent:V,minZoom:G,maxZoom:z,preventScrolling:K,defaultMarkerColor:J,zoomOnScroll:te,zoomOnPinch:M,panOnScroll:H,panOnScrollSpeed:Y,panOnScrollMode:Z,zoomOnDoubleClick:ae,panOnDrag:le,onPaneClick:ie,onPaneMouseEnter:ce,onPaneMouseMove:Ae,onPaneMouseLeave:Fe,onPaneScroll:ne,onPaneContextMenu:_e,onEdgeContextMenu:Ie,onEdgeMouseEnter:Se,onEdgeMouseMove:me,onEdgeMouseLeave:Be,onReconnect:Le,onReconnectStart:We,onReconnectEnd:be,reconnectRadius:Oe,noDragClassName:Pe,noWheelClassName:qe,noPanClassName:et,elevateEdgesOnSelect:ct,disableKeyboardA11y:pt,nodeOrigin:Ft,nodeExtent:Ut,rfId:Rt})=>{const Ht=dJ(e,Hut),yt=dJ(t,Wut);return ddt(s),Ze.createElement(Uut,{onPaneClick:ie,onPaneMouseEnter:ce,onPaneMouseMove:Ae,onPaneMouseLeave:Fe,onPaneContextMenu:_e,onPaneScroll:ne,deleteKeyCode:D,selectionKeyCode:B,selectionOnDrag:j,selectionMode:E,onSelectionStart:x,onSelectionEnd:v,multiSelectionKeyCode:N,panActivationKeyCode:I,zoomActivationKeyCode:L,elementsSelectable:P,onMove:r,onMoveStart:n,onMoveEnd:a,zoomOnScroll:te,zoomOnPinch:M,zoomOnDoubleClick:ae,panOnScroll:H,panOnScrollSpeed:Y,panOnScrollMode:Z,panOnDrag:le,defaultViewport:W,translateExtent:V,minZoom:G,maxZoom:z,onSelectionContextMenu:g,preventScrolling:K,noDragClassName:Pe,noWheelClassName:qe,noPanClassName:et,disableKeyboardA11y:pt},Ze.createElement(udt,null,Ze.createElement(ldt,{edgeTypes:yt,onEdgeClick:o,onEdgeDoubleClick:u,onlyRenderVisibleElements:k,onEdgeContextMenu:Ie,onEdgeMouseEnter:Se,onEdgeMouseMove:me,onEdgeMouseLeave:Be,onReconnect:Le,onReconnectStart:We,onReconnectEnd:be,reconnectRadius:Oe,defaultMarkerColor:J,noPanClassName:et,elevateEdgesOnSelect:!!ct,disableKeyboardA11y:pt,rfId:Rt},Ze.createElement(hdt,{style:w,type:y,component:_,containerStyle:T})),Ze.createElement("div",{className:"react-flow__edgelabel-renderer"}),Ze.createElement($ut,{nodeTypes:Ht,onNodeClick:i,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:m,selectNodesOnDrag:R,onlyRenderVisibleElements:k,noPanClassName:et,noDragClassName:Pe,disableKeyboardA11y:pt,nodeOrigin:Ft,nodeExtent:Ut,rfId:Rt})))};RAe.displayName="GraphView";var mdt=S.memo(RAe);const FP=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],om={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:FP,nodeExtent:FP,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:hx.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Vct,isValidConnection:void 0},pdt=()=>kit((e,t)=>({...om,setNodes:r=>{const{nodeInternals:n,nodeOrigin:a,elevateNodesOnSelect:s}=t();e({nodeInternals:fF(r,n,a,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:n={}}=t();e({edges:r.map(a=>({...n,...a}))})},setDefaultNodesAndEdges:(r,n)=>{const a=typeof r<"u",s=typeof n<"u",i=a?fF(r,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:s?n:[],hasDefaultNodes:a,hasDefaultEdges:s})},updateNodeDimensions:r=>{const{onNodesChange:n,nodeInternals:a,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:o,domNode:c,nodeOrigin:u}=t(),d=c==null?void 0:c.querySelector(".react-flow__viewport");if(!d)return;const f=window.getComputedStyle(d),{m22:h}=new window.DOMMatrixReadOnly(f.transform),m=r.reduce((x,v)=>{const y=a.get(v.id);if(y!=null&&y.hidden)a.set(y.id,{...y,[Ps]:{...y[Ps],handleBounds:void 0}});else if(y){const w=C7(v.nodeElement);!!(w.width&&w.height&&(y.width!==w.width||y.height!==w.height||v.forceUpdate))&&(a.set(y.id,{...y,[Ps]:{...y[Ps],handleBounds:{source:aJ(".source",v.nodeElement,h,u),target:aJ(".target",v.nodeElement,h,u)}},...w}),x.push({id:y.id,type:"dimensions",dimensions:w}))}return x},[]);EAe(a,u);const g=i||s&&!i&&CAe(t,{initial:!0,...o});e({nodeInternals:new Map(a),fitViewOnInitDone:g}),(m==null?void 0:m.length)>0&&(n==null||n(m))},updateNodePositions:(r,n=!0,a=!1)=>{const{triggerNodeChanges:s}=t(),i=r.map(o=>{const c={id:o.id,type:"position",dragging:a};return n&&(c.positionAbsolute=o.positionAbsolute,c.position=o.position),c});s(i)},triggerNodeChanges:r=>{const{onNodesChange:n,nodeInternals:a,hasDefaultNodes:s,nodeOrigin:i,getNodes:o,elevateNodesOnSelect:c}=t();if(r!=null&&r.length){if(s){const u=SAe(r,o()),d=fF(u,a,i,c);e({nodeInternals:d})}n==null||n(r)}},addSelectedNodes:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let i,o=null;n?i=r.map(c=>Am(c,!0)):(i=l1(s(),r),o=l1(a,[])),j5({changedNodes:i,changedEdges:o,get:t,set:e})},addSelectedEdges:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let i,o=null;n?i=r.map(c=>Am(c,!0)):(i=l1(a,r),o=l1(s(),[])),j5({changedNodes:o,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:r,edges:n}={})=>{const{edges:a,getNodes:s}=t(),i=r||s(),o=n||a,c=i.map(d=>(d.selected=!1,Am(d.id,!1))),u=o.map(d=>Am(d.id,!1));j5({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:r=>{const{d3Zoom:n,maxZoom:a}=t();n==null||n.scaleExtent([r,a]),e({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:n,minZoom:a}=t();n==null||n.scaleExtent([a,r]),e({maxZoom:r})},setTranslateExtent:r=>{var n;(n=t().d3Zoom)==null||n.translateExtent(r),e({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:n}=t(),s=n().filter(o=>o.selected).map(o=>Am(o.id,!1)),i=r.filter(o=>o.selected).map(o=>Am(o.id,!1));j5({changedNodes:s,changedEdges:i,get:t,set:e})},setNodeExtent:r=>{const{nodeInternals:n}=t();n.forEach(a=>{a.positionAbsolute=_7(a.position,r)}),e({nodeExtent:r,nodeInternals:new Map(n)})},panBy:r=>{const{transform:n,width:a,height:s,d3Zoom:i,d3Selection:o,translateExtent:c}=t();if(!i||!o||!r.x&&!r.y)return!1;const u=Um.translate(n[0]+r.x,n[1]+r.y).scale(n[2]),d=[[0,0],[a,s]],f=i==null?void 0:i.constrain()(u,d,c);return i.transform(o,f),n[0]!==f.x||n[1]!==f.y||n[2]!==f.k},cancelConnection:()=>e({connectionNodeId:om.connectionNodeId,connectionHandleId:om.connectionHandleId,connectionHandleType:om.connectionHandleType,connectionStatus:om.connectionStatus,connectionStartHandle:om.connectionStartHandle,connectionEndHandle:om.connectionEndHandle}),reset:()=>e({...om})}),Object.is),D7=({children:e})=>{const t=S.useRef(null);return t.current||(t.current=pdt()),Ze.createElement(Dct,{value:t.current},e)};D7.displayName="ReactFlowProvider";const LAe=({children:e})=>S.useContext(CT)?Ze.createElement(Ze.Fragment,null,e):Ze.createElement(D7,null,e);LAe.displayName="ReactFlowWrapper";const gdt={input:pAe,default:jP,output:xAe,group:F7},xdt={default:q4,straight:B7,step:k7,smoothstep:_T,simplebezier:N7},vdt=[0,0],bdt=[15,15],ydt={x:0,y:0,zoom:1},wdt={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},MAe=S.forwardRef(({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,className:a,nodeTypes:s=gdt,edgeTypes:i=xdt,onNodeClick:o,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onConnect:m,onConnectStart:g,onConnectEnd:x,onClickConnectStart:v,onClickConnectEnd:y,onNodeMouseEnter:w,onNodeMouseMove:_,onNodeMouseLeave:T,onNodeContextMenu:B,onNodeDoubleClick:j,onNodeDragStart:E,onNodeDrag:N,onNodeDragStop:I,onNodesDelete:L,onEdgesDelete:D,onSelectionChange:k,onSelectionDragStart:P,onSelectionDrag:R,onSelectionDragStop:W,onSelectionContextMenu:V,onSelectionStart:G,onSelectionEnd:z,connectionMode:K=hx.Strict,connectionLineType:J=bm.Bezier,connectionLineStyle:te,connectionLineComponent:M,connectionLineContainerStyle:H,deleteKeyCode:Y="Backspace",selectionKeyCode:Z="Shift",selectionOnDrag:ae=!1,selectionMode:le=_E.Full,panActivationKeyCode:ie="Space",multiSelectionKeyCode:ce=G4()?"Meta":"Control",zoomActivationKeyCode:Ae=G4()?"Meta":"Control",snapToGrid:Fe=!1,snapGrid:ne=bdt,onlyRenderVisibleElements:_e=!1,selectNodesOnDrag:Ie=!0,nodesDraggable:Se,nodesConnectable:me,nodesFocusable:Be,nodeOrigin:Le=vdt,edgesFocusable:We,edgesUpdatable:be,elementsSelectable:Oe,defaultViewport:Pe=ydt,minZoom:qe=.5,maxZoom:et=2,translateExtent:ct=FP,preventScrolling:pt=!0,nodeExtent:Ft,defaultMarkerColor:Ut="#b1b1b7",zoomOnScroll:Rt=!0,zoomOnPinch:Ht=!0,panOnScroll:yt=!1,panOnScrollSpeed:jr=.5,panOnScrollMode:rr=Cg.Free,zoomOnDoubleClick:on=!0,panOnDrag:kr=!0,onPaneClick:Kr,onPaneMouseEnter:Fn,onPaneMouseMove:Rr,onPaneMouseLeave:bs,onPaneScroll:pn,onPaneContextMenu:da,children:Da,onEdgeContextMenu:an,onEdgeDoubleClick:gr,onEdgeMouseEnter:tt,onEdgeMouseMove:gt,onEdgeMouseLeave:Je,onEdgeUpdate:xt,onEdgeUpdateStart:Et,onEdgeUpdateEnd:bt,onReconnect:ar,onReconnectStart:vr,onReconnectEnd:Yr,reconnectRadius:tn=10,edgeUpdaterRadius:Xr=10,onNodesChange:he,onEdgesChange:Te,noDragClassName:Ce="nodrag",noWheelClassName:we="nowheel",noPanClassName:Ne="nopan",fitView:je=!1,fitViewOptions:Ye,connectOnClick:dt=!0,attributionPosition:$e,proOptions:nt,defaultEdgeOptions:it,elevateNodesOnSelect:Ot=!0,elevateEdgesOnSelect:zt=!1,disableKeyboardA11y:Zt=!1,autoPanOnConnect:Vt=!0,autoPanOnNodeDrag:Kt=!0,connectionRadius:Br=20,isValidConnection:ln,onError:cn,style:hn,id:ys,nodeDragThreshold:Po,...ws},ci)=>{const Us=ys||"1";return Ze.createElement("div",{...ws,style:{...hn,...wdt},ref:ci,className:Ml(["react-flow",a]),"data-testid":"rf__wrapper",id:ys},Ze.createElement(LAe,null,Ze.createElement(mdt,{onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onNodeClick:o,onEdgeClick:c,onNodeMouseEnter:w,onNodeMouseMove:_,onNodeMouseLeave:T,onNodeContextMenu:B,onNodeDoubleClick:j,nodeTypes:s,edgeTypes:i,connectionLineType:J,connectionLineStyle:te,connectionLineComponent:M,connectionLineContainerStyle:H,selectionKeyCode:Z,selectionOnDrag:ae,selectionMode:le,deleteKeyCode:Y,multiSelectionKeyCode:ce,panActivationKeyCode:ie,zoomActivationKeyCode:Ae,onlyRenderVisibleElements:_e,selectNodesOnDrag:Ie,defaultViewport:Pe,translateExtent:ct,minZoom:qe,maxZoom:et,preventScrolling:pt,zoomOnScroll:Rt,zoomOnPinch:Ht,zoomOnDoubleClick:on,panOnScroll:yt,panOnScrollSpeed:jr,panOnScrollMode:rr,panOnDrag:kr,onPaneClick:Kr,onPaneMouseEnter:Fn,onPaneMouseMove:Rr,onPaneMouseLeave:bs,onPaneScroll:pn,onPaneContextMenu:da,onSelectionContextMenu:V,onSelectionStart:G,onSelectionEnd:z,onEdgeContextMenu:an,onEdgeDoubleClick:gr,onEdgeMouseEnter:tt,onEdgeMouseMove:gt,onEdgeMouseLeave:Je,onReconnect:ar??xt,onReconnectStart:vr??Et,onReconnectEnd:Yr??bt,reconnectRadius:tn??Xr,defaultMarkerColor:Ut,noDragClassName:Ce,noWheelClassName:we,noPanClassName:Ne,elevateEdgesOnSelect:zt,rfId:Us,disableKeyboardA11y:Zt,nodeOrigin:Le,nodeExtent:Ft}),Ze.createElement(fut,{nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:m,onConnectStart:g,onConnectEnd:x,onClickConnectStart:v,onClickConnectEnd:y,nodesDraggable:Se,nodesConnectable:me,nodesFocusable:Be,edgesFocusable:We,edgesUpdatable:be,elementsSelectable:Oe,elevateNodesOnSelect:Ot,minZoom:qe,maxZoom:et,nodeExtent:Ft,onNodesChange:he,onEdgesChange:Te,snapToGrid:Fe,snapGrid:ne,connectionMode:K,translateExtent:ct,connectOnClick:dt,defaultEdgeOptions:it,fitView:je,fitViewOptions:Ye,onNodesDelete:L,onEdgesDelete:D,onNodeDragStart:E,onNodeDrag:N,onNodeDragStop:I,onSelectionDrag:R,onSelectionDragStart:P,onSelectionDragStop:W,noPanClassName:Ne,nodeOrigin:Le,rfId:Us,autoPanOnConnect:Vt,autoPanOnNodeDrag:Kt,onError:cn,connectionRadius:Br,isValidConnection:ln,nodeDragThreshold:Po}),Ze.createElement(uut,{onSelectionChange:k}),Da,Ze.createElement(Rct,{proOptions:nt,position:$e}),Ze.createElement(gut,{rfId:Us,disableKeyboardA11y:Zt})))});MAe.displayName="ReactFlow";function UAe(e){return t=>{const[r,n]=S.useState(t),a=S.useCallback(s=>n(i=>e(s,i)),[]);return[r,n,a]}}const Edt=UAe(SAe),Cdt=UAe(jut);function _dt(){return Ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},Ze.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Sdt(){return Ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},Ze.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Ndt(){return Ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},Ze.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function kdt(){return Ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Ze.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Bdt(){return Ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Ze.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Vw=({children:e,className:t,...r})=>Ze.createElement("button",{type:"button",className:Ml(["react-flow__controls-button",t]),...r},e);Vw.displayName="ControlButton";const Tdt=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),QAe=({style:e,showZoom:t=!0,showFitView:r=!0,showInteractive:n=!0,fitViewOptions:a,onZoomIn:s,onZoomOut:i,onFitView:o,onInteractiveChange:c,className:u,children:d,position:f="bottom-left"})=>{const h=fo(),[m,g]=S.useState(!1),{isInteractive:x,minZoomReached:v,maxZoomReached:y}=xs(Tdt,xl),{zoomIn:w,zoomOut:_,fitView:T}=ST();if(S.useEffect(()=>{g(!0)},[]),!m)return null;const B=()=>{w(),s==null||s()},j=()=>{_(),i==null||i()},E=()=>{T(a),o==null||o()},N=()=>{h.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),c==null||c(!x)};return Ze.createElement(Yfe,{className:Ml(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&Ze.createElement(Ze.Fragment,null,Ze.createElement(Vw,{onClick:B,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},Ze.createElement(_dt,null)),Ze.createElement(Vw,{onClick:j,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:v},Ze.createElement(Sdt,null))),r&&Ze.createElement(Vw,{className:"react-flow__controls-fitview",onClick:E,title:"fit view","aria-label":"fit view"},Ze.createElement(Ndt,null)),n&&Ze.createElement(Vw,{className:"react-flow__controls-interactive",onClick:N,title:"toggle interactivity","aria-label":"toggle interactivity"},x?Ze.createElement(Bdt,null):Ze.createElement(kdt,null)),d)};QAe.displayName="Controls";var jdt=S.memo(QAe),of;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(of||(of={}));function Idt({color:e,dimensions:t,lineWidth:r}){return Ze.createElement("path",{stroke:e,strokeWidth:r,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function Fdt({color:e,radius:t}){return Ze.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const Odt={[of.Dots]:"#91919a",[of.Lines]:"#eee",[of.Cross]:"#e2e2e2"},Ddt={[of.Dots]:1,[of.Lines]:1,[of.Cross]:6},Pdt=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function HAe({id:e,variant:t=of.Dots,gap:r=20,size:n,lineWidth:a=1,offset:s=2,color:i,style:o,className:c}){const u=S.useRef(null),{transform:d,patternId:f}=xs(Pdt,xl),h=i||Odt[t],m=n||Ddt[t],g=t===of.Dots,x=t===of.Cross,v=Array.isArray(r)?r:[r,r],y=[v[0]*d[2]||1,v[1]*d[2]||1],w=m*d[2],_=x?[w,w]:y,T=g?[w/s,w/s]:[_[0]/s,_[1]/s];return Ze.createElement("svg",{className:Ml(["react-flow__background",c]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},Ze.createElement("pattern",{id:f+e,x:d[0]%y[0],y:d[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${T[0]},-${T[1]})`},g?Ze.createElement(Fdt,{color:h,radius:w/s}):Ze.createElement(Idt,{dimensions:_,color:h,lineWidth:a})),Ze.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}HAe.displayName="Background";var Rdt=S.memo(HAe);function Ldt(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),n=r.createElement("base"),a=r.createElement("a");return r.head.appendChild(n),r.body.appendChild(a),t&&(n.href=t),a.href=e,a.href}const Mdt=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function Hm(e){const t=[];for(let r=0,n=e.length;r<n;r++)t.push(e[r]);return t}let Iv=null;function VAe(e={}){return Iv||(e.includeStyleProperties?(Iv=e.includeStyleProperties,Iv):(Iv=Hm(window.getComputedStyle(document.documentElement)),Iv))}function W4(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function Udt(e){const t=W4(e,"border-left-width"),r=W4(e,"border-right-width");return e.clientWidth+t+r}function Qdt(e){const t=W4(e,"border-top-width"),r=W4(e,"border-bottom-width");return e.clientHeight+t+r}function zAe(e,t={}){const r=t.width||Udt(e),n=t.height||Qdt(e);return{width:r,height:n}}function Hdt(){let e,t;try{t=process}catch{}const r=t&&t.env?t.env.devicePixelRatio:null;return r&&(e=parseInt(r,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const Uc=16384;function Vdt(e){(e.width>Uc||e.height>Uc)&&(e.width>Uc&&e.height>Uc?e.width>e.height?(e.height*=Uc/e.width,e.width=Uc):(e.width*=Uc/e.height,e.height=Uc):e.width>Uc?(e.height*=Uc/e.width,e.width=Uc):(e.width*=Uc/e.height,e.height=Uc))}function X4(e){return new Promise((t,r)=>{const n=new Image;n.onload=()=>{n.decode().then(()=>{requestAnimationFrame(()=>t(n))})},n.onerror=r,n.crossOrigin="anonymous",n.decoding="async",n.src=e})}async function zdt(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function $dt(e,t,r){const n="http://www.w3.org/2000/svg",a=document.createElementNS(n,"svg"),s=document.createElementNS(n,"foreignObject");return a.setAttribute("width",`${t}`),a.setAttribute("height",`${r}`),a.setAttribute("viewBox",`0 0 ${t} ${r}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),a.appendChild(s),s.appendChild(e),zdt(a)}const pc=(e,t)=>{if(e instanceof t)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===t.name||pc(r,t)};function Gdt(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function Kdt(e,t){return VAe(t).map(r=>{const n=e.getPropertyValue(r),a=e.getPropertyPriority(r);return`${r}: ${n}${a?" !important":""};`}).join(" ")}function qdt(e,t,r,n){const a=`.${e}:${t}`,s=r.cssText?Gdt(r):Kdt(r,n);return document.createTextNode(`${a}{${s}}`)}function fJ(e,t,r,n){const a=window.getComputedStyle(e,r),s=a.getPropertyValue("content");if(s===""||s==="none")return;const i=Mdt();try{t.className=`${t.className} ${i}`}catch{return}const o=document.createElement("style");o.appendChild(qdt(i,r,a,n)),t.appendChild(o)}function Wdt(e,t,r){fJ(e,t,":before",r),fJ(e,t,":after",r)}const AJ="application/font-woff",hJ="image/jpeg",Xdt={woff:AJ,woff2:AJ,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:hJ,jpeg:hJ,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Ydt(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function P7(e){const t=Ydt(e).toLowerCase();return Xdt[t]||""}function Jdt(e){return e.split(/,/)[1]}function OP(e){return e.search(/^(data:)/)!==-1}function Zdt(e,t){return`data:${t};base64,${e}`}async function $Ae(e,t,r){const n=await fetch(e,t);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const a=await n.blob();return new Promise((s,i)=>{const o=new FileReader;o.onerror=i,o.onloadend=()=>{try{s(r({res:n,result:o.result}))}catch(c){i(c)}},o.readAsDataURL(a)})}const pF={};function eft(e,t,r){let n=e.replace(/\?.*/,"");return r&&(n=e),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),t?`[${t}]${n}`:n}async function R7(e,t,r){const n=eft(e,t,r.includeQueryParams);if(pF[n]!=null)return pF[n];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let a;try{const s=await $Ae(e,r.fetchRequestInit,({res:i,result:o})=>(t||(t=i.headers.get("Content-Type")||""),Jdt(o)));a=Zdt(s,t)}catch(s){a=r.imagePlaceholder||"";let i=`Failed to fetch resource: ${e}`;s&&(i=typeof s=="string"?s:s.message),i&&console.warn(i)}return pF[n]=a,a}async function tft(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):X4(t)}async function rft(e,t){if(e.currentSrc){const s=document.createElement("canvas"),i=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,i==null||i.drawImage(e,0,0,s.width,s.height);const o=s.toDataURL();return X4(o)}const r=e.poster,n=P7(r),a=await R7(r,n,t);return X4(a)}async function nft(e,t){var r;try{if(!((r=e==null?void 0:e.contentDocument)===null||r===void 0)&&r.body)return await NT(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function aft(e,t){return pc(e,HTMLCanvasElement)?tft(e):pc(e,HTMLVideoElement)?rft(e,t):pc(e,HTMLIFrameElement)?nft(e,t):e.cloneNode(GAe(e))}const sft=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",GAe=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function ift(e,t,r){var n,a;if(GAe(t))return t;let s=[];return sft(e)&&e.assignedNodes?s=Hm(e.assignedNodes()):pc(e,HTMLIFrameElement)&&(!((n=e.contentDocument)===null||n===void 0)&&n.body)?s=Hm(e.contentDocument.body.childNodes):s=Hm(((a=e.shadowRoot)!==null&&a!==void 0?a:e).childNodes),s.length===0||pc(e,HTMLVideoElement)||await s.reduce((i,o)=>i.then(()=>NT(o,r)).then(c=>{c&&t.appendChild(c)}),Promise.resolve()),t}function oft(e,t,r){const n=t.style;if(!n)return;const a=window.getComputedStyle(e);a.cssText?(n.cssText=a.cssText,n.transformOrigin=a.transformOrigin):VAe(r).forEach(s=>{let i=a.getPropertyValue(s);s==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),pc(e,HTMLIFrameElement)&&s==="display"&&i==="inline"&&(i="block"),s==="d"&&t.getAttribute("d")&&(i=`path(${t.getAttribute("d")})`),n.setProperty(s,i,a.getPropertyPriority(s))})}function lft(e,t){pc(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),pc(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function cft(e,t){if(pc(e,HTMLSelectElement)){const r=t,n=Array.from(r.children).find(a=>e.value===a.getAttribute("value"));n&&n.setAttribute("selected","")}}function uft(e,t,r){return pc(t,Element)&&(oft(e,t,r),Wdt(e,t,r),lft(e,t),cft(e,t)),t}async function dft(e,t){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const n={};for(let s=0;s<r.length;s++){const o=r[s].getAttribute("xlink:href");if(o){const c=e.querySelector(o),u=document.querySelector(o);!c&&u&&!n[o]&&(n[o]=await NT(u,t,!0))}}const a=Object.values(n);if(a.length){const s="http://www.w3.org/1999/xhtml",i=document.createElementNS(s,"svg");i.setAttribute("xmlns",s),i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.style.display="none";const o=document.createElementNS(s,"defs");i.appendChild(o);for(let c=0;c<a.length;c++)o.appendChild(a[c]);e.appendChild(i)}return e}async function NT(e,t,r){return!r&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(n=>aft(n,t)).then(n=>ift(e,n,t)).then(n=>uft(e,n,t)).then(n=>dft(n,t))}const KAe=/url\((['"]?)([^'"]+?)\1\)/g,fft=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Aft=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function hft(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function mft(e){const t=[];return e.replace(KAe,(r,n,a)=>(t.push(a),r)),t.filter(r=>!OP(r))}async function pft(e,t,r,n,a){try{const s=r?Ldt(t,r):t,i=P7(t);let o;return a||(o=await R7(s,i,n)),e.replace(hft(t),`$1${o}$3`)}catch{}return e}function gft(e,{preferredFontFormat:t}){return t?e.replace(Aft,r=>{for(;;){const[n,,a]=fft.exec(r)||[];if(!a)return"";if(a===t)return`src: ${n};`}}):e}function qAe(e){return e.search(KAe)!==-1}async function WAe(e,t,r){if(!qAe(e))return e;const n=gft(e,r);return mft(n).reduce((s,i)=>s.then(o=>pft(o,i,t,r)),Promise.resolve(n))}async function Fv(e,t,r){var n;const a=(n=t.style)===null||n===void 0?void 0:n.getPropertyValue(e);if(a){const s=await WAe(a,null,r);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function xft(e,t){await Fv("background",e,t)||await Fv("background-image",e,t),await Fv("mask",e,t)||await Fv("-webkit-mask",e,t)||await Fv("mask-image",e,t)||await Fv("-webkit-mask-image",e,t)}async function vft(e,t){const r=pc(e,HTMLImageElement);if(!(r&&!OP(e.src))&&!(pc(e,SVGImageElement)&&!OP(e.href.baseVal)))return;const n=r?e.src:e.href.baseVal,a=await R7(n,P7(n),t);await new Promise((s,i)=>{e.onload=s,e.onerror=t.onImageErrorHandler?(...c)=>{try{s(t.onImageErrorHandler(...c))}catch(u){i(u)}}:i;const o=e;o.decode&&(o.decode=s),o.loading==="lazy"&&(o.loading="eager"),r?(e.srcset="",e.src=a):e.href.baseVal=a})}async function bft(e,t){const n=Hm(e.childNodes).map(a=>XAe(a,t));await Promise.all(n).then(()=>e)}async function XAe(e,t){pc(e,Element)&&(await xft(e,t),await vft(e,t),await bft(e,t))}function yft(e,t){const{style:r}=e;t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.width&&(r.width=`${t.width}px`),t.height&&(r.height=`${t.height}px`);const n=t.style;return n!=null&&Object.keys(n).forEach(a=>{r[a]=n[a]}),e}const mJ={};async function pJ(e){let t=mJ[e];if(t!=null)return t;const n=await(await fetch(e)).text();return t={url:e,cssText:n},mJ[e]=t,t}async function gJ(e,t){let r=e.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,s=(r.match(/url\([^)]+\)/g)||[]).map(async i=>{let o=i.replace(n,"$1");return o.startsWith("https://")||(o=new URL(o,e.url).href),$Ae(o,t.fetchRequestInit,({result:c})=>(r=r.replace(i,`url(${c})`),[i,c]))});return Promise.all(s).then(()=>r)}function xJ(e){if(e==null)return[];const t=[],r=/(\/\*[\s\S]*?\*\/)/gi;let n=e.replace(r,"");const a=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const c=a.exec(n);if(c===null)break;t.push(c[0])}n=n.replace(a,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(i,"gi");for(;;){let c=s.exec(n);if(c===null){if(c=o.exec(n),c===null)break;s.lastIndex=o.lastIndex}else o.lastIndex=s.lastIndex;t.push(c[0])}return t}async function wft(e,t){const r=[],n=[];return e.forEach(a=>{if("cssRules"in a)try{Hm(a.cssRules||[]).forEach((s,i)=>{if(s.type===CSSRule.IMPORT_RULE){let o=i+1;const c=s.href,u=pJ(c).then(d=>gJ(d,t)).then(d=>xJ(d).forEach(f=>{try{a.insertRule(f,f.startsWith("@import")?o+=1:a.cssRules.length)}catch(h){console.error("Error inserting rule from remote css",{rule:f,error:h})}})).catch(d=>{console.error("Error loading remote css",d.toString())});n.push(u)}})}catch(s){const i=e.find(o=>o.href==null)||document.styleSheets[0];a.href!=null&&n.push(pJ(a.href).then(o=>gJ(o,t)).then(o=>xJ(o).forEach(c=>{i.insertRule(c,i.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",s)}}),Promise.all(n).then(()=>(e.forEach(a=>{if("cssRules"in a)try{Hm(a.cssRules||[]).forEach(s=>{r.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${a.href}`,s)}}),r))}function Eft(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>qAe(t.style.getPropertyValue("src")))}async function Cft(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=Hm(e.ownerDocument.styleSheets),n=await wft(r,t);return Eft(n)}function YAe(e){return e.trim().replace(/["']/g,"")}function _ft(e){const t=new Set;function r(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(s=>{t.add(YAe(s))}),Array.from(n.children).forEach(s=>{s instanceof HTMLElement&&r(s)})}return r(e),t}async function Sft(e,t){const r=await Cft(e,t),n=_ft(e);return(await Promise.all(r.filter(s=>n.has(YAe(s.style.fontFamily))).map(s=>{const i=s.parentStyleSheet?s.parentStyleSheet.href:null;return WAe(s.cssText,i,t)}))).join(`
`)}async function Nft(e,t){const r=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await Sft(e,t);if(r){const n=document.createElement("style"),a=document.createTextNode(r);n.appendChild(a),e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}}async function kft(e,t={}){const{width:r,height:n}=zAe(e,t),a=await NT(e,t,!0);return await Nft(a,t),await XAe(a,t),yft(a,t),await $dt(a,r,n)}async function Bft(e,t={}){const{width:r,height:n}=zAe(e,t),a=await kft(e,t),s=await X4(a),i=document.createElement("canvas"),o=i.getContext("2d"),c=t.pixelRatio||Hdt(),u=t.canvasWidth||r,d=t.canvasHeight||n;return i.width=u*c,i.height=d*c,t.skipAutoScale||Vdt(i),i.style.width=`${u}`,i.style.height=`${d}`,t.backgroundColor&&(o.fillStyle=t.backgroundColor,o.fillRect(0,0,i.width,i.height)),o.drawImage(s,0,0,i.width,i.height),i}async function kT(e,t={}){return(await Bft(e,t)).toDataURL()}const JAe="recursos_crucigramas",BT="recursos_lineas_de_tiempo",TT="recursos_mapas_mentales",ZAe="recursos_sopas_de_letras",jT=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,createdAt:((s=(a=t.createdAt)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.createdAt}},Tft=e=>{const t=$t(wt(ht,JAe),xr("fechaCreacion","desc"));return pr(t,r=>{const n=r.docs.map(a=>jT(a));e(n)},r=>{console.error("Error al suscribirse a los crucigramas:",r),e([])})},jft=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:ir.fromDate(new Date)};return(await _n(wt(ht,JAe),r)).id}catch(r){throw console.error("Error al guardar el crucigrama:",r),new Error("No se pudo guardar el crucigrama.")}},Ift=e=>{const t=$t(wt(ht,BT),xr("createdAt","desc"));return pr(t,r=>{const n=r.docs.map(a=>jT(a));e(n)},r=>{console.error("Error al suscribirse a las líneas de tiempo:",r),e([])})},Fft=async(e,t)=>{try{const{id:r,...n}=e,a=cr(ht,BT,r);await Mi(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:ir.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar la línea de tiempo:",r),new Error("No se pudo guardar la línea de tiempo.")}},Oft=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:ir.fromDate(new Date)};return(await _n(wt(ht,BT),r)).id}catch(r){throw console.error("Error al crear la línea de tiempo:",r),new Error("No se pudo crear la línea de tiempo.")}},Dft=async e=>{try{const t=cr(ht,BT,e);await is(t)}catch(t){throw console.error("Error al eliminar la línea de tiempo:",t),new Error("No se pudo eliminar la línea de tiempo.")}},Pft=e=>{const t=$t(wt(ht,TT),xr("createdAt","desc"));return pr(t,r=>{const n=r.docs.map(a=>jT(a));e(n)},r=>{console.error("Error al suscribirse a los mapas mentales:",r),e([])})},Rft=async(e,t)=>{try{const{id:r,...n}=e,a=cr(ht,TT,r);await Mi(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:ir.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar el mapa mental:",r),new Error("No se pudo guardar el mapa mental.")}},Lft=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:ir.fromDate(new Date)};return(await _n(wt(ht,TT),r)).id}catch(r){throw console.error("Error al crear el mapa mental:",r),new Error("No se pudo crear el mapa mental.")}},Mft=async e=>{try{const t=cr(ht,TT,e);await is(t)}catch(t){throw console.error("Error al eliminar el mapa mental:",t),new Error("No se pudo eliminar el mapa mental.")}},Uft=e=>{const t=$t(wt(ht,ZAe),xr("createdAt","desc"));return pr(t,r=>{const n=r.docs.map(a=>jT(a));e(n)},r=>{console.error("Error al suscribirse a las sopas de letras:",r),e([])})},Qft=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:ir.fromDate(new Date)};return(await _n(wt(ht,ZAe),r)).id}catch(r){throw console.error("Error al guardar la sopa de letras:",r),new Error("No se pudo guardar la sopa de letras.")}},Hft=()=>l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Vft=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),zft=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),$ft=({data:e})=>{const t={"Concepto Clave":"bg-blue-100 border-blue-300 dark:bg-blue-900/30 dark:border-blue-700","Ejemplo Práctico":"bg-green-100 border-green-300 dark:bg-green-900/30 dark:border-green-700","Dato Interesante":"bg-yellow-100 border-yellow-300 dark:bg-yellow-900/30 dark:border-yellow-700","Pregunta Abierta":"bg-purple-100 border-purple-300 dark:bg-purple-900/30 dark:border-purple-700",default:"bg-white border-slate-300 dark:bg-slate-800 dark:border-slate-600"},r=t[e.type||"default"]||t.default;return l.jsxs("div",{className:`p-3 rounded-lg shadow-md border-2 ${r} flex items-center gap-3 min-w-[180px]`,children:[l.jsx(yb,{type:"target",position:_r.Left,className:"w-2 h-2 !bg-slate-400"}),l.jsx("span",{className:"text-xl",children:e.icon||"🧠"}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm",children:e.label}),e.type&&l.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:e.type})]}),l.jsx(yb,{type:"source",position:_r.Right,className:"w-2 h-2 !bg-slate-400"})]})},DP=(e,t)=>!e.children||e.children.length===0?t:e.children.reduce((r,n)=>r+DP(n,t),0),PP=(e,t="tree")=>{const r=[],n=[];if(t==="tree"){const i=(o,c,u)=>{r.push({id:o.id,position:{x:c*280,y:u},data:{label:o.label,icon:o.icon,type:o.type},type:"custom"});const d=DP(o,100);let f=u-d/2+100/2;(o.children||[]).forEach(h=>{const m=DP(h,100),g=f+m/2-100/2;n.push({id:`e-${o.id}-${h.id}`,source:o.id,target:h.id,type:"smoothstep",animated:!0}),i(h,c+1,g),f+=m})};i(e,0,0)}else{r.push({id:e.id,position:{x:0,y:0},data:{label:e.label,icon:e.icon,type:e.type},type:"custom"});const i=300,o=500;(e.children||[]).forEach((c,u)=>{const d=u/e.children.length*2*Math.PI;r.push({id:c.id,position:{x:i*Math.cos(d),y:i*Math.sin(d)},data:{label:c.label,icon:c.icon,type:c.type},type:"custom"}),n.push({id:`e-${e.id}-${c.id}`,source:e.id,target:c.id,type:"smoothstep"}),(c.children||[]).forEach((f,h)=>{const m=d+(h-(c.children.length-1)/2)*.25;r.push({id:f.id,position:{x:o*Math.cos(m),y:o*Math.sin(m)},data:{label:f.label,icon:f.icon,type:f.type},type:"custom"}),n.push({id:`e-${c.id}-${f.id}`,source:c.id,target:f.id,type:"smoothstep"})})})}return{nodes:r,edges:n}},ehe=({node:e,onUpdate:t,onAddChild:r,onDelete:n,level:a=0})=>{const s=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],i=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return l.jsxs("div",{className:`pl-4 ${a>0?"border-l "+i[a-1%i.length]:""}`,children:[l.jsx("div",{className:`p-2 rounded-lg my-1 ${s[a%s.length]}`,children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"text",value:e.label,onChange:o=>t(e.id,o.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),l.jsx("button",{onClick:()=>r(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"➕"}),a>0&&l.jsx("button",{onClick:()=>n(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"🗑️"})]})}),(e.children||[]).map(o=>l.jsx(ehe,{node:o,onUpdate:t,onAddChild:r,onDelete:n,level:a+1},o.id))]})},Gft={custom:$ft},Kft=({mapData:e,onBack:t,onSave:r})=>{const[n,a]=S.useState(e.treeData),[s,i]=S.useState("tree"),[o,c]=S.useState(!1),[u,d,f]=Edt([]),[h,m,g]=Cdt([]),{fitView:x}=ST();S.useEffect(()=>{const{nodes:B,edges:j}=PP(n,s);d(B),m(j),setTimeout(()=>x({duration:300}),50)},[n,s,d,m,x]);const v=(B,j)=>{const E=JSON.parse(JSON.stringify(n)),N=I=>I.id===B?(I.label=j,!0):(I.children||[]).some(N);N(E),a(E)},y=B=>{const j=JSON.parse(JSON.stringify(n)),E=N=>N.id===B?(N.children||(N.children=[]),N.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):(N.children||[]).some(E);E(j),a(j)},w=B=>{const j=JSON.parse(JSON.stringify(n)),E=N=>{const I=(N.children||[]).findIndex(L=>L.id===B);return I!==-1?(N.children.splice(I,1),!0):(N.children||[]).some(E)};E(j),a(j)},_=()=>{c(!0);const{nodes:B,edges:j}=PP(n,s);r({...e,treeData:n,nodes:B,edges:j}),setTimeout(()=>c(!1),1e3)},T=async B=>{const j=document.querySelector(".react-flow");j&&kT(j,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(E=>{{const N=document.createElement("a");N.download=`${e.tema}.png`,N.href=E,N.click()}}).catch(E=>console.error("oops, something went wrong!",E))};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:e.tema}),l.jsx("button",{onClick:t,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:"← Volver a la lista"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsx("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:l.jsxs(MAe,{nodes:u,edges:h,onNodesChange:f,onEdgesChange:g,fitView:!0,nodeTypes:Gft,children:[l.jsx(jdt,{}),l.jsx(Rdt,{})]})}),l.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),l.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[l.jsxs("button",{onClick:()=>i("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[l.jsx(Vft,{})," Vista en árbol"]}),l.jsxs("button",{onClick:()=>i("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[l.jsx(zft,{})," Vista central"]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:l.jsx(ehe,{node:n,onUpdate:v,onAddChild:y,onDelete:w})}),l.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[l.jsx("button",{onClick:()=>T(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),l.jsx("button",{onClick:_,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:o?"Guardado!":"Guardar"})]})]})]})]})},qft=({onBack:e,currentUser:t})=>{const[r,n]=S.useState("list"),[a,s]=S.useState([]),[i,o]=S.useState(null),[c,u]=S.useState(!1),[d,f]=S.useState(!0),[h,m]=S.useState(""),[g,x]=S.useState(""),[v,y]=S.useState("");S.useEffect(()=>{f(!0);const E=Pft(N=>{s(N),f(!1)});return()=>E()},[]);const w=async E=>{if(E.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}u(!0);const N="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",I=`
            Basado en el tema central "${h}", y considerando el contenido adicional "${v}", genera una estructura jerárquica para un mapa mental con al menos 3 niveles de profundidad.
            
            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            
            La estructura del JSON debe ser un objeto raíz con las siguientes claves:
            - "label": El tema central ("${h}").
            - "icon": Un emoji que represente el tema.
            - "type": La categoría, que para el nodo raíz debe ser "Concepto Clave".
            - "children": Un array de 2 a 4 nodos hijos.

            Cada nodo hijo (y sus descendientes) debe tener esta misma estructura:
            - "label": El texto del subtema.
            - "icon": Un emoji representativo.
            - "type": Una categoría descriptiva (ej: "Concepto Clave", "Ejemplo Práctico", "Dato Interesante", "Pregunta Abierta").
            - "children": Un array de nodos hijos, o un array vacío si es un nodo final.
        `;try{const W=(await(await new ps(N).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(I)).response).text().replace(/^```json\s*|```\s*$/g,""),V=JSON.parse(W),G=H=>({id:crypto.randomUUID(),label:H.label||"Sin etiqueta",icon:H.icon||"🧠",type:H.type||"default",children:(H.children||[]).map(G)}),z=G(V),{nodes:K,edges:J}=PP(z),te={tema:h,nivel:g,treeData:z,nodes:K,edges:J},M=await Lft(te,t);o({...te,id:M,createdAt:new Date().toISOString()}),n("editor")}catch(L){console.error("AI Generation Error:",L),alert("Hubo un error al generar el mapa mental. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{u(!1)}},_=async E=>{try{await Rft(E,t)}catch(N){console.error("Error saving mind map:",N),alert("No se pudo guardar el mapa mental.")}},T=E=>{o(E),n("editor")},B=async E=>{if(window.confirm("¿Eliminar este mapa mental?"))try{await Mft(E)}catch(N){console.error("Error deleting mind map:",N),alert("No se pudo eliminar el mapa mental.")}},j=()=>{switch(r){case"editor":return i?l.jsx(D7,{children:l.jsx(Kft,{mapData:i,onBack:()=>n("list"),onSave:_})}):null;case"config":return l.jsxs("div",{className:"max-w-2xl mx-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),l.jsx("button",{onClick:()=>n("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver"})]}),l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",id:"tema",value:h,onChange:E=>m(E.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),l.jsx("textarea",{id:"contenido",value:v,onChange:E=>y(E.target.value),rows:4,placeholder:"Añade más detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:c?l.jsx(Hft,{}):"Generar Mapa con IA"})})]})]});case"list":default:return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),l.jsx("button",{onClick:()=>n("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.length>0?a.map(E=>l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[l.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:E.tema}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(E.createdAt).toLocaleDateString("es-CL")]}),l.jsxs("div",{className:"mt-4 flex gap-2",children:[l.jsx("button",{onClick:()=>T(E),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),l.jsx("button",{onClick:()=>B(E.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},E.id)):l.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningún mapa mental todavía."})})]})}};return d?l.jsx("div",{className:"text-center py-10",children:"Cargando mapas mentales..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsx("span",{className:"text-4xl",children:"🧠"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),l.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),j()]})},Wft=()=>l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Xft=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Yft=({onBack:e,currentUser:t})=>{const[r,n]=S.useState([]),[a,s]=S.useState("Media"),[i,o]=S.useState(10),[c,u]=S.useState(!1),[d,f]=S.useState(Array(10).fill("")),[h,m]=S.useState(""),[g,x]=S.useState(null),[v,y]=S.useState({ai:!1,puzzle:!1,data:!0}),w=S.useRef(null);S.useEffect(()=>{y(D=>({...D,data:!0}));const L=Uft(D=>{n(D),y(k=>({...k,data:!1}))});return()=>L()},[]),S.useEffect(()=>{f(L=>{const D=Array(i).fill("");for(let k=0;k<Math.min(L.length,i);k++)D[k]=L[k];return D})},[i]);const _=(L,D)=>{const k=[...d];k[L]=D,f(k)},T=async()=>{if(h.trim()){y(L=>({...L,ai:!0}));try{const L="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",k=new ps(L).getGenerativeModel({model:"gemini-1.5-flash-latest"}),P=`
                Genera una lista de ${i} palabras clave en español, estrictamente relacionadas con el tema "${h}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una sola clave: "palabras".
                El valor de "palabras" debe ser un array de ${i} strings.
                Cada string en el array debe ser una sola palabra, sin espacios ni caracteres especiales.
            `,G=(await(await k.generateContent(P)).response).text().replace(/^```json\s*|```\s*$/g,""),z=JSON.parse(G);if(!z.palabras||!Array.isArray(z.palabras))throw new Error("La respuesta de la IA no contiene el array 'palabras' esperado.");const J=[...z.palabras.map(te=>te.toUpperCase().replace(/[^A-ZÑ]/g,"")).slice(0,i)];for(;J.length<i;)J.push("");f(J)}catch(L){console.error("Error generating words with AI:",L),alert("No se pudieron generar las palabras. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{y(L=>({...L,ai:!1}))}}},B=(L,D,k,P,R,W)=>{for(let V=0;V<L.length;V++){const G=k+V*R.y,z=P+V*R.x;if(G<0||G>=W||z<0||z>=W||D[G][z]&&D[G][z]!==L[V])return!1}return!0},j=(L,D,k,P,R)=>{for(let W=0;W<L.length;W++)D[k+W*R.y][P+W*R.x]=L[W]},E=async()=>{y(G=>({...G,puzzle:!0})),x(null),await new Promise(G=>setTimeout(G,100));const L=d.map(G=>G.toUpperCase().replace(/[^A-ZÑ]/g,"")).filter(Boolean);if(L.length===0){alert("Por favor, ingrese al menos una palabra válida."),y(G=>({...G,puzzle:!1}));return}const D=Math.max(...L.map(G=>G.length));let k=Math.max(D,L.length)+2;a==="Media"&&(k+=3),a==="Difícil"&&(k+=5),k=Math.min(Math.max(k,10),25);const P=Array(k).fill(null).map(()=>Array(k).fill(null)),R=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];a!=="Fácil"&&R.push({x:1,y:-1}),a==="Difícil"&&R.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const G of L.sort((z,K)=>K.length-z.length)){let z=!1;for(let K=0;K<100;K++){const J=R[Math.floor(Math.random()*R.length)],te=Math.floor(Math.random()*k),M=Math.floor(Math.random()*k);if(B(G,P,te,M,J,k)){j(G,P,te,M,J),z=!0;break}}z||console.warn(`No se pudo colocar la palabra: ${G}`)}const W=P.map(G=>G.map(z=>z||"ABCDEFGHIJKLMNOPQRSTUVWXYZÑ"[Math.floor(Math.random()*27)])),V={tema:h||"Personalizado",grid:W.map(G=>G.join("")),words:L.sort()};try{const G=await Qft(V,t);x({...V,id:G,createdAt:new Date().toISOString()})}catch(G){console.error("Error saving puzzle:",G),alert("No se pudo guardar la sopa de letras.")}finally{y(G=>({...G,puzzle:!1}))}},N=()=>{w.current&&kT(w.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(L=>{const D=document.createElement("a");D.download="sopa-de-letras.png",D.href=L,D.click()}).catch(L=>{console.error("oops, something went wrong!",L),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})},I=()=>{var k;if(!g)return null;const L=((k=g.grid[0])==null?void 0:k.length)||1,D=g.grid.join("").split("");return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{ref:w,className:"p-6 bg-white",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[l.jsx("div",{className:"md:col-span-2",children:l.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${L}, minmax(0, 1fr))`},children:D.map((P,R)=>l.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:P},R))})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),l.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:g.words.map(P=>l.jsx("li",{children:P},P))})]})]})}),l.jsxs("div",{className:"flex justify-end gap-4",children:[l.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),l.jsx("button",{onClick:N,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})};return v.data?l.jsx("div",{className:"text-center py-10",children:"Cargando..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-4xl",children:"🅰️"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),l.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),!g&&l.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),l.jsxs("select",{value:a,onChange:L=>s(L.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{children:"Fácil"}),l.jsx("option",{children:"Media"}),l.jsx("option",{children:"Difícil"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(L=>l.jsx("button",{onClick:()=>{o(L),u(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!c&&i===L?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:L},L)),l.jsx("button",{onClick:()=>u(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${c?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),c&&l.jsx("input",{type:"number",value:i,onChange:L=>o(parseInt(L.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:L=>m(L.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:T,disabled:v.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:v.ai?l.jsx(Wft,{}):l.jsxs(l.Fragment,{children:[l.jsx(Xft,{}),l.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:d.map((L,D)=>l.jsx("input",{type:"text",value:L,onChange:k=>_(D,k.target.value),placeholder:`Palabra ${D+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},D))})]}),l.jsx("div",{className:"text-right pt-4",children:l.jsx("button",{onClick:E,disabled:v.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:v.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),g&&I()]})},Jft=()=>l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Zft=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),eAt=({timeline:e,onSave:t,onBack:r})=>{const[n,a]=S.useState(e),[s,i]=S.useState(null),o=S.useRef(null),c=(m,g,x)=>{a(v=>({...v,events:v.events.map(y=>y.id===m?{...y,[g]:x}:y)}))},u=()=>{const m={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:"🗓️"},g=[...n.events,m].sort((x,v)=>parseInt(x.date)-parseInt(v.date));a(x=>({...x,events:g}))},d=m=>{a(g=>({...g,events:g.events.filter(x=>x.id!==m)}))},f=async m=>{if(!m.description.trim()){alert("Escribe al menos una idea en la descripción para que la IA la complete.");return}i(m.id);const g="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",x=`
            Para una línea de tiempo sobre "${n.tema}", toma la siguiente idea para un hito y mejórala.
            Idea del usuario: "${m.description}"

            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional, con tres claves:
            1. "date": El año o fecha más precisa y relevante para esta idea.
            2. "description": Una descripción concisa (máximo 15 palabras) para la línea de tiempo.
            3. "icon": Un único emoji que represente el hito.
        `;try{const B=(await(await new ps(g).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(x)).response).text().replace(/^```json\s*|```\s*$/g,""),j=JSON.parse(B);a(E=>({...E,events:E.events.map(N=>N.id===m.id?{...N,date:j.date,description:j.description,icon:j.icon}:N).sort((N,I)=>parseInt(N.date)-parseInt(I.date))}))}catch(v){console.error("Error al generar descripción del hito:",v),alert("No se pudo autocompletar el hito.")}finally{i(null)}},h=()=>{o.current&&kT(o.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(m=>{const g=document.createElement("a");g.download=`linea-tiempo-${n.tema.replace(/\s+/g,"_")}.png`,g.href=m,g.click()}).catch(m=>{console.error("Error al generar la imagen:",m),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:n.tema}),l.jsx("button",{onClick:r,className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver a la lista"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:l.jsxs("div",{ref:o,className:"relative p-10",children:[l.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),l.jsx("div",{className:"relative",children:n.events.sort((m,g)=>parseInt(m.date)-parseInt(g.date)).map((m,g)=>{const x=g%2===0;return l.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[l.jsx("div",{className:"w-1/2",children:x&&l.jsx("div",{className:"text-right pr-8",children:l.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[l.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:m.icon}),l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:m.date}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:m.description})]})})}),l.jsx("div",{className:"z-10 flex-shrink-0",children:l.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),l.jsx("div",{className:"w-1/2",children:!x&&l.jsx("div",{className:"text-left pl-8",children:l.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[l.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:m.icon}),l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:m.date}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:m.description})]})})})]},m.id)})})]})}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),l.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:n.events.map(m=>l.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[l.jsx("input",{type:"text",value:m.date,onChange:g=>c(m.id,"date",g.target.value),placeholder:"Año/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx("textarea",{value:m.description,onChange:g=>c(m.id,"description",g.target.value),placeholder:"Descripción",rows:2,className:"flex-grow w-full bg-transparent text-sm dark:text-slate-300"}),l.jsx("button",{onClick:()=>f(m),disabled:s===m.id,className:"p-2 rounded-md bg-slate-100 hover:bg-slate-200 dark:bg-slate-600 dark:hover:bg-slate-500 disabled:opacity-50",title:"Autocompletar con IA",children:s===m.id?l.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"}):l.jsx(Zft,{})})]}),l.jsx("button",{onClick:()=>d(m.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},m.id))}),l.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[l.jsx("button",{onClick:u,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Añadir Hito"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:h,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),l.jsx("button",{onClick:()=>t(n),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},tAt=({onBack:e,currentUser:t})=>{const[r,n]=S.useState("list"),[a,s]=S.useState([]),[i,o]=S.useState(null),[c,u]=S.useState(!1),[d,f]=S.useState(!0),[h,m]=S.useState(""),[g,x]=S.useState(""),[v,y]=S.useState("");S.useEffect(()=>{f(!0);const B=Ift(j=>{s(j),f(!1)});return()=>B()},[]);const w=async B=>{if(B.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}u(!0);const j="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",E=g&&v?`entre ${g} y ${v}`:g?`a partir de ${g}`:v?`hasta ${v}`:"",N=`
            Genera una línea de tiempo sobre el tema "${h}" ${E}.
            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            El objeto debe tener una clave "events", que es un array de 5 a 10 objetos.
            Cada objeto en el array "events" debe tener tres claves:
            1. "date": Un string con la fecha o el año del hito.
            2. "description": Un string con la descripción breve del hito (máximo 15 palabras).
            3. "icon": Un string con un único emoji que represente el hito.
            Ordena los eventos cronológicamente.
        `;try{const R=(await(await new ps(j).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(N)).response).text().replace(/^```json\s*|```\s*$/g,""),W=JSON.parse(R);if(!W.events||!Array.isArray(W.events))throw new Error("La respuesta de la IA no tiene el formato de eventos esperado.");const V={tema:h,fechaInicio:g,fechaFin:v,events:W.events.map(z=>({id:crypto.randomUUID(),date:z.date||"Sin fecha",description:z.description||"Sin descripción",icon:z.icon||"🗓️"}))},G=await Oft(V,t);o({...V,id:G,createdAt:new Date().toISOString()}),n("editor")}catch(I){console.error("AI Generation Error:",I),alert("Hubo un error al generar la línea de tiempo. Por favor, revisa el formato del tema o inténtalo de nuevo.")}finally{u(!1)}},_=async B=>{try{await Fft(B,t),n("list"),o(null)}catch(j){console.error("Error saving timeline:",j),alert("No se pudo guardar la línea de tiempo.")}},T=async B=>{if(window.confirm("¿Eliminar esta línea de tiempo?"))try{await Dft(B)}catch(j){console.error("Error deleting timeline:",j),alert("No se pudo eliminar la línea de tiempo.")}};return r==="editor"&&i?l.jsx(eAt,{timeline:i,onSave:_,onBack:()=>n("list")}):d?l.jsx("div",{className:"text-center py-10",children:"Cargando líneas de tiempo..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-4xl",children:"🕒"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo"}),l.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),l.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Línea de Tiempo"}),l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",id:"tema",value:h,onChange:B=>m(B.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),l.jsx("input",{type:"text",id:"fechaInicio",value:g,onChange:B=>x(B.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Término (Opcional)"}),l.jsx("input",{type:"text",id:"fechaFin",value:v,onChange:B=>y(B.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),l.jsx("div",{className:"text-right",children:l.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:c?l.jsx(Jft,{}):"Generar con IA"})})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo Guardadas"}),a.length>0?a.map(B=>l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:B.tema}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(B.createdAt).toLocaleDateString("es-CL")]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>{o(B),n("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),l.jsx("button",{onClick:()=>T(B.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},B.id)):l.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay líneas de tiempo guardadas."})]})]})},rAt=()=>l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),vJ=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),nAt=({onBack:e,currentUser:t})=>{const[r,n]=S.useState([]),[a,s]=S.useState(10),[i,o]=S.useState(!1),[c,u]=S.useState(Array(10).fill("")),[d,f]=S.useState(Array(10).fill("")),[h,m]=S.useState(""),[g,x]=S.useState(null),[v,y]=S.useState(!1),[w,_]=S.useState({ai:!1,puzzle:!1,data:!0}),[T,B]=S.useState(null),j=S.useRef(null);S.useEffect(()=>{_(W=>({...W,data:!0}));const R=Tft(W=>{const V=W.map(G=>{const{grid_flat:z,grid_width:K,...J}=G,te=[];if(z&&K>0)for(let M=0;M<z.length;M+=K)te.push(z.slice(M,M+K));return{...J,grid:te}});n(V),_(G=>({...G,data:!1}))});return()=>R()},[]),S.useEffect(()=>{const R=a;u(W=>Array.from({length:R},(V,G)=>W[G]||"")),f(W=>Array.from({length:R},(V,G)=>W[G]||""))},[a]);const E=(R,W)=>{const V=[...c];V[R]=W,u(V)},N=(R,W)=>{const V=[...d];V[R]=W,f(V)},I=async()=>{if(h.trim()){_(R=>({...R,ai:!0}));try{const R="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",V=new ps(R).getGenerativeModel({model:"gemini-1.5-flash-latest"}),G=`
                Genera una lista de ${a} palabras y sus pistas correspondientes para un crucigrama, basado en el tema "${h}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una clave "items", que es un array de ${a} objetos.
                Cada objeto en el array "items" debe tener dos claves:
                1. "word": Un string con la palabra (sin espacios y en mayúsculas).
                2. "clue": Un string con la pista para esa palabra.
            `;let te=(await(await V.generateContent(G)).response).text().replace(/^```json\s*|```\s*$/g,"").trim();const M=te.indexOf("{"),H=te.lastIndexOf("}");M!==-1&&H!==-1&&(te=te.substring(M,H+1)),te=te.replace(/},\s*([\r\n\s]*){/g,"}__SPLIT__{"),te.includes("__SPLIT__")&&(te=te.replace(/("items"\s*:\s*\[)([\s\S]*?)(\])/m,(le,ie,ce,Ae)=>{const Fe=ce.split("__SPLIT__").map(ne=>ne.trim().replace(/,$/,""));return ie+Fe.join(",")+Ae})),te=te.replace(/,\s*]/g,"]");let Y;try{Y=JSON.parse(te)}catch{console.error("Respuesta IA no es JSON válido:",te),alert("La respuesta de la IA no es un JSON válido. Intenta de nuevo o ajusta el tema."),_(ie=>({...ie,ai:!1}));return}if(!Y.items||!Array.isArray(Y.items))throw new Error("La respuesta de la IA no contiene la lista de 'items' esperada.");const Z=Y.items.map(le=>(le.word||"").toUpperCase().replace(/\s/g,"")),ae=Y.items.map(le=>le.clue||"");u(Array.from({length:a},(le,ie)=>Z[ie]||"")),f(Array.from({length:a},(le,ie)=>ae[ie]||""))}catch(R){console.error("Error generating words/clues with AI:",R),alert("No se pudieron generar las palabras y pistas. Inténtelo de nuevo.")}finally{_(R=>({...R,ai:!1}))}}},L=async R=>{const W=c[R];if(!W||!W.trim()){alert("Por favor, escribe una palabra antes de generar su pista.");return}B(R);try{const V="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",z=new ps(V).getGenerativeModel({model:"gemini-1.5-flash-latest"}),K=`Para un crucigrama con el tema "${h||"general"}", genera una pista concisa y creativa para la palabra "${W}". La respuesta debe ser un único objeto JSON válido sin texto adicional, con una sola clave: "clue".`,H=(await(await z.generateContent(K)).response).text().replace(/^```json\s*|```\s*$/g,""),Y=JSON.parse(H);Y.clue&&N(R,Y.clue)}catch(V){console.error("Error generating clue with AI:",V),alert("No se pudo generar la pista.")}finally{B(null)}},D=S.useCallback(()=>{try{const R=c.map((Be,Le)=>({word:Be.toUpperCase().replace(/[^A-ZÑ]/g,""),clue:d[Le]})).filter(Be=>Be.word.length>0);if(R.length===0)return alert("Por favor, ingrese al menos una palabra válida."),null;R.sort((Be,Le)=>Le.word.length-Be.word.length);const W=R[0].word.length,V=Math.max(W,R.length)*2;let G=Array.from({length:V},()=>Array(V).fill(null));const z=[],K=R.shift(),J=Math.floor(V/2),te=Math.floor((V-K.word.length)/2);for(let Be=0;Be<K.word.length;Be++)G[J][te+Be]=K.word[Be];z.push({word:K.word,clue:K.clue,direction:"across",row:J,col:te});for(const Be of R){let Le={score:-1,row:-1,col:-1,direction:"across"};for(const We of z)for(let be=0;be<We.word.length;be++)for(let Oe=0;Oe<Be.word.length;Oe++)if(We.word[be]===Be.word[Oe]){let Pe=0,qe,et,ct;We.direction==="across"?(ct="down",qe=We.row-Oe,et=We.col+be):(ct="across",qe=We.row+be,et=We.col-Oe);let pt=!0;for(let Ft=0;Ft<Be.word.length;Ft++){const Ut=qe+(ct==="down"?Ft:0),Rt=et+(ct==="across"?Ft:0);if(Ut<0||Ut>=V||Rt<0||Rt>=V){pt=!1;break}const Ht=G[Ut][Rt],yt=Ut===We.row+(We.direction==="down"?be:0)&&Rt===We.col+(We.direction==="across"?be:0);if(Ht&&!yt){pt=!1;break}if(Ht&&yt&&Ht!==Be.word[Oe]){pt=!1;break}if(!yt){if(ct==="across"&&(Ut>0&&G[Ut-1][Rt]||Ut<V-1&&G[Ut+1][Rt])){pt=!1;break}if(ct==="down"&&(Rt>0&&G[Ut][Rt-1]||Rt<V-1&&G[Ut][Rt+1])){pt=!1;break}}Ht&&Pe++}pt&&Pe>Le.score&&(Le={score:Pe,row:qe,col:et,direction:ct})}if(Le.score>-1){for(let We=0;We<Be.word.length;We++){const be=Le.row+(Le.direction==="down"?We:0),Oe=Le.col+(Le.direction==="across"?We:0);G[be][Oe]=Be.word[We]}z.push({word:Be.word,clue:Be.clue,direction:Le.direction,row:Le.row,col:Le.col})}}let M=V,H=-1,Y=V,Z=-1;z.forEach(Be=>{M=Math.min(M,Be.row),H=Math.max(H,Be.row+(Be.direction==="down"?Be.word.length-1:0)),Y=Math.min(Y,Be.col),Z=Math.max(Z,Be.col+(Be.direction==="across"?Be.word.length-1:0))}),H===-1&&(M=z[0].row,H=z[0].row,Y=z[0].col,Z=z[0].col+z[0].word.length-1);const ae=1,le=Math.max(0,M-ae),ie=Math.min(V,H+1+ae),ce=Math.max(0,Y-ae),Ae=Math.min(V,Z+1+ae),Fe=G.slice(le,ie).map(Be=>Be.slice(ce,Ae)),ne=z.map(Be=>({...Be,row:Be.row-le,col:Be.col-ce})).sort((Be,Le)=>Be.row-Le.row||Be.col-Le.col);let _e=1;const Ie=[],Se=new Map;ne.forEach(Be=>{const Le=`${Be.row},${Be.col}`;Se.has(Le)||Se.set(Le,_e++),Ie.push({...Be,number:Se.get(Le)})});const me=Fe.map(Be=>Be.map(Le=>({char:Le,number:null})));return Ie.forEach(Be=>{const Le=`${Be.row},${Be.col}`;me[Be.row]&&me[Be.row][Be.col]!==void 0&&(me[Be.row][Be.col].number=Se.get(Le))}),{grid:me,clues:{across:Ie.filter(Be=>Be.direction==="across").sort((Be,Le)=>Be.number-Le.number),down:Ie.filter(Be=>Be.direction==="down").sort((Be,Le)=>Be.number-Le.number)}}}catch(R){return console.error("Error generating crossword grid:",R),alert("Ocurrió un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[c,d]),k=async()=>{var W;_(V=>({...V,puzzle:!0})),x(null),await new Promise(V=>setTimeout(V,100));const R=D();if(R){const V={creadorId:t.id,creadorNombre:t.nombreCompleto,tema:h||"Personalizado",grid:R.grid,clues:R.clues},{grid:G,...z}=V,K={...z,grid_flat:G.flat().map(J=>J.char||""),grid_width:((W=G[0])==null?void 0:W.length)||0};try{const J=await jft(K,t);x({...V,id:J,fechaCreacion:new Date().toISOString()})}catch(J){console.error("Error saving puzzle:",J),alert("No se pudo guardar el crucigrama en la base de datos.")}}_(V=>({...V,puzzle:!1}))},P=()=>{j.current&&(y(!1),setTimeout(()=>{kT(j.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(R=>{const W=document.createElement("a");W.download="crucigrama.png",W.href=R,W.click()}).catch(R=>console.error("Error generating image",R))},100))};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-4xl",children:"✏️"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),l.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),g?l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{ref:j,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[l.jsx("div",{children:l.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${g.grid[0].length}, 2rem)`},children:g.grid.flat().map((R,W)=>l.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:R.char?"white":"black"},children:[R.number&&l.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:R.number}),v&&R.char&&l.jsx("span",{children:R.char})]},W))})}),l.jsxs("div",{className:"text-sm",children:[l.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),l.jsx("ul",{className:"space-y-1",children:g.clues.across.map(R=>l.jsxs("li",{children:[l.jsxs("strong",{children:[R.number,"."]})," ",R.clue]},`${R.word}-${R.clue}`))}),l.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),l.jsx("ul",{className:"space-y-1",children:g.clues.down.map(R=>l.jsxs("li",{children:[l.jsxs("strong",{children:[R.number,"."]})," ",R.clue]},`${R.word}-${R.clue}`))})]})]})}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("label",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",checked:v,onChange:()=>y(!v),className:"h-5 w-5 rounded"}),l.jsx("span",{children:"Mostrar Solución"})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),l.jsx("button",{onClick:P,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):l.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(R=>l.jsx("button",{onClick:()=>{s(R),o(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!i&&a===R?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:R},R)),l.jsx("button",{onClick:()=>o(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${i?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),i&&l.jsx("input",{type:"number",value:a,onChange:R=>s(parseInt(R.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:R=>m(R.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:I,disabled:w.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:w.ai?l.jsx(rAt,{}):l.jsxs(l.Fragment,{children:[l.jsx(vJ,{}),l.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),l.jsx("div",{className:"space-y-3",children:Array.from({length:a}).map((R,W)=>l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[l.jsx("input",{type:"text",value:c[W],onChange:V=>E(W,V.target.value),placeholder:`Palabra ${W+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[l.jsx("textarea",{value:d[W],onChange:V=>N(W,V.target.value),placeholder:`Pista ${W+1}`,rows:1,className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:()=>L(W),disabled:T===W,className:"p-2 bg-slate-200 dark:bg-slate-600 rounded-md hover:bg-slate-300 disabled:opacity-50",title:"Generar Pista con IA",children:T===W?l.jsx("div",{className:"w-5 h-5 border-2 border-slate-400 border-t-amber-500 rounded-full animate-spin"}):l.jsx(vJ,{})})]})]},W))}),l.jsx("div",{className:"text-right pt-4",children:l.jsx("button",{onClick:k,disabled:w.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:w.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},aAt=()=>{const[e,t]=S.useState(null),[r,n]=S.useState(!0);return S.useEffect(()=>{const a=cte(MO,async s=>{if(s&&s.email)try{const i=await Cne(s.email);t(i)}catch(i){console.error("Error al obtener el perfil del usuario:",i),t(null)}else t(null);n(!1)});return()=>a()},[]),{currentUser:e,loading:r}},sAt=[{id:"sopaDeLetras",icon:"🅰️",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"🧠",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"✏️",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"🕒",nombre:"Líneas de Tiempo",descripcion:"Construye líneas de tiempo para comprender procesos, hechos históricos o secuencias."}],iAt=({recurso:e,onClick:t})=>l.jsxs("button",{onClick:t,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[l.jsx("div",{className:"text-6xl mb-4",children:e.icon}),l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:e.nombre}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:e.descripcion})]}),oAt=()=>{const[e,t]=S.useState("menu"),{currentUser:r}=aAt(),n=()=>e!=="menu"&&!r?l.jsx("div",{className:"text-center p-8",children:"Cargando información de usuario..."}):e==="mapasMentales"?l.jsx(qft,{onBack:()=>t("menu"),currentUser:r}):e==="sopaDeLetras"?l.jsx(Yft,{onBack:()=>t("menu"),currentUser:r}):e==="lineasDeTiempo"?l.jsx(tAt,{onBack:()=>t("menu"),currentUser:r}):e==="crucigramas"?l.jsx(nAt,{onBack:()=>t("menu"),currentUser:r}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:sAt.map(a=>l.jsx(iAt,{recurso:a,onClick:()=>t(a.id)},a.id))})]});return l.jsx("div",{className:"animate-fade-in space-y-6",children:n()})},lAt="evaluaciones_formativas",cAt="calificaciones_formativas",the="trabajos_grupales_formativos",rhe=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},uAt=(e,t)=>{const r=$t(wt(ht,lAt),Qr("curso","==",e));return pr(r,n=>{t(n.docs.map(a=>rhe(a)))},n=>{console.error("Error subscribing to student evaluations:",n),t([])})},dAt=e=>{const t=$t(wt(ht,cAt));return pr(t,r=>{const n={};r.forEach(a=>{n[a.id]=a.data()}),e(n)},r=>{console.error("Error subscribing to grades:",r),e({})})},fAt=(e,t)=>{const r=$t(wt(ht,the),Qr("curso","==",e));return pr(r,n=>{t(n.docs.map(a=>rhe(a)))},n=>{console.error("Error subscribing to group projects:",n),t([])})},AAt=async e=>{try{const{id:t,...r}=e,n=cr(ht,the,t);await Mi(n,r)}catch(t){throw console.error("Error updating group project:",t),new Error("Could not update group project.")}},hAt=({currentUser:e})=>{const[t,r]=S.useState([]),[n,a]=S.useState({}),[s,i]=S.useState([]),[o,c]=S.useState(!0),[u,d]=S.useState(null),[f,h]=S.useState(!1),[m,g]=S.useState(null),x=S.useRef(null);S.useEffect(()=>{if(!e.curso){c(!1);return}c(!0);const T=uAt(e.curso,r),B=dAt(a),j=fAt(e.curso,E=>{i(E),c(!1)});return()=>{T(),B(),j()}},[e.curso]);const v=S.useMemo(()=>{if(!e.curso)return[];const B=t.filter(j=>j.curso===e.curso).reduce((j,E)=>((j[E.asignatura]=j[E.asignatura]||[]).push(E),j),{});return Object.entries(B).map(([j,E])=>{let N=0,I=0;const L=E.map(k=>{var W;const P=(W=n[k.id])==null?void 0:W[e.nombreCompleto];let R="No Trabajado";return P==="trabajado"?(N+=7,I++,R="Trabajado"):P==="no trabajado"&&(N+=2,I++,R="No Trabajado"),{id:k.id,nombreActividad:k.nombreActividad,fecha:k.fecha,estado:R}}).filter(k=>{var P;return(P=n[k.id])==null?void 0:P[e.nombreCompleto]}),D=I>0?(N/I).toFixed(1):"N/A";return{asignatura:j,promedio:D,actividades:L.sort((k,P)=>new Date(P.fecha).getTime()-new Date(k.fecha).getTime())}}).filter(j=>j.actividades.length>0).sort((j,E)=>j.asignatura.localeCompare(E.asignatura))},[t,n,e]);S.useEffect(()=>{if(v.reduce((I,L)=>I+L.actividades.length,0)===0){d(null);return}const B=v.reduce((I,L)=>{const D=parseFloat(L.promedio);return isNaN(D)?I:I+D},0),j=v.length>0?B/v.length:0,E=V_.find(I=>j>=I.promedioMin&&j<=I.promedioMax)||null,N=V_.filter(I=>j>=I.promedioMin);if(d({puntajeTotal:0,promedio:j,rangoActual:E,insigniasGanadas:N}),x.current!==null){const I=V_.find(L=>x.current>=L.promedioMin&&x.current<=L.promedioMax)||null;E&&(!I||E.nombre!==I.nombre)&&g(E)}x.current=j},[v]);const y=S.useMemo(()=>e.curso?s.filter(T=>T.curso===e.curso).map(T=>{const B=T.grupos.find(j=>j.integrantes.some(E=>E.nombre===e.nombreCompleto));return B?{...T,miGrupo:B}:null}).filter(T=>T!==null).sort((T,B)=>new Date(B.fechaPresentacion).getTime()-new Date(T.fechaPresentacion).getTime()):[],[s,e]),w=async(T,B)=>{const j=s.find(N=>N.id===T);if(!j)return;const E={...j,grupos:j.grupos.map(N=>N.integrantes.some(L=>L.nombre===e.nombreCompleto)?{...N,integrantes:N.integrantes.map(L=>L.nombre===e.nombreCompleto?{...L,rol:B||void 0}:L)}:N)};try{await AAt(E)}catch(N){console.error("Error updating role:",N),alert("No se pudo actualizar el rol.")}},_=T=>{const B=parseFloat(T);return isNaN(B)?"bg-slate-400":B<4?"bg-red-500":B<5.5?"bg-yellow-500":"bg-green-500"};return o?l.jsx("div",{className:"text-center py-10",children:"Cargando tu rendimiento..."}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[m&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>g(null),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:T=>T.stopPropagation(),children:[l.jsx("div",{className:"text-8xl animate-bounce",children:m.emoji}),l.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"¡Subiste de Rango!"}),l.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:m.nombre}),l.jsx("p",{className:"text-slate-600 mt-4",children:m.mensaje}),l.jsx("button",{onClick:()=>g(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"¡Genial!"})]})}),f&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>h(!1),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:T=>T.stopPropagation(),children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),l.jsx("div",{className:"overflow-y-auto space-y-3",children:V_.map(T=>{const B=u==null?void 0:u.insigniasGanadas.some(j=>j.nombre===T.nombre);return l.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${B?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[l.jsx("div",{className:"text-5xl",children:T.emoji}),l.jsxs("div",{children:[l.jsx("h3",{className:`font-bold ${B?"text-amber-700":"text-slate-600"}`,children:T.nombre}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",T.promedioMin," y ",T.promedioMax]})]})]},T.nombre)})})]})}),l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),l.jsx("p",{className:"text-slate-500 mb-6",children:"Aquí puedes ver un resumen de tu trabajo en clases por cada asignatura."}),u&&u.rangoActual&&l.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),l.jsx("h2",{className:"text-3xl font-bold",children:u.rangoActual.nombre}),l.jsx("button",{onClick:()=>h(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-7xl",children:u.rangoActual.emoji}),l.jsx("p",{className:"font-bold text-2xl mt-2",children:u.promedio.toFixed(1)}),l.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),v.length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(T=>l.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800",children:T.asignatura}),l.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),l.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${_(T.promedio)}`,children:T.promedio})]}),l.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),T.actividades.map(B=>l.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-700",children:B.nombreActividad}),l.jsx("p",{className:"text-xs text-slate-500",children:new Date(B.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),l.jsx("span",{className:`font-semibold ${B.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:B.estado==="Trabajado"?"✅ Trabajado":"❌ No Trabajado"})]},B.id))]})]},T.asignatura))}):l.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[l.jsx("span",{className:"text-5xl",children:"📊"}),l.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Aún sin registros"}),l.jsx("p",{className:"text-slate-500 mt-2",children:"Todavía no tienes evaluaciones formativas registradas por tus profesores."})]})]}),y.length>0&&l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),l.jsx("div",{className:"space-y-4",children:y.map(T=>{const B=T.miGrupo.integrantes.filter(E=>E.nombre!==e.nombreCompleto&&E.rol).map(E=>E.rol),j=Sne.filter(E=>!B.includes(E));return l.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[l.jsx("h3",{className:"font-bold text-slate-800",children:T.nombreActividad}),l.jsxs("p",{className:"text-sm text-slate-500",children:[T.asignatura," - Presentación: ",new Date(T.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),l.jsxs("div",{className:"mt-3 pt-3 border-t",children:[l.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",T.miGrupo.numero]}),l.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:T.miGrupo.integrantes.map(E=>l.jsxs("li",{className:"grid grid-cols-2 items-center",children:[l.jsx("span",{className:E.nombre===e.nombreCompleto?"font-bold":"",children:E.nombre}),E.nombre===e.nombreCompleto?l.jsxs("select",{value:E.rol||"",onChange:N=>w(T.id,N.target.value),className:"text-sm p-1 border rounded w-full",children:[l.jsx("option",{value:"",children:"-- Seleccionar rol --"}),E.rol&&!j.includes(E.rol)&&l.jsx("option",{value:E.rol,children:E.rol}),j.map(N=>l.jsx("option",{value:N,children:N},N))]}):l.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:E.rol||"Sin rol"})]},E.nombre))})]})]},T.id)})})]})]})},mAt="proyectos_interdisciplinarios",nhe="entregas_interdisciplinarias",ahe=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaCompletado:((s=(a=t.fechaCompletado)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaCompletado}},pAt=(e,t)=>{const r=$t(wt(ht,mAt),Qr("cursos","array-contains",e));return pr(r,n=>{const a=n.docs.map(s=>ahe(s));t(a)},n=>{console.error("Error al suscribirse a los proyectos:",n),t([])})},gAt=(e,t)=>{const r=$t(wt(ht,nhe),Qr("estudianteId","==",e));return pr(r,n=>{const a=n.docs.map(s=>ahe(s));t(a)},n=>{console.error("Error al suscribirse a las entregas:",n),t([])})},xAt=async e=>{try{const{id:t,...r}=e,n=cr(ht,nhe,t),a={...r,fechaCompletado:ir.fromDate(new Date(r.fechaCompletado||Date.now()))};await Mi(n,a,{merge:!0})}catch(t){throw console.error("Error al actualizar la entrega:",t),new Error("No se pudo guardar la entrega.")}},vAt=({currentUser:e})=>{const[t,r]=S.useState([]),[n,a]=S.useState([]),[s,i]=S.useState(null),[o,c]=S.useState(!0);S.useEffect(()=>{if(!e.curso||!e.id){c(!1);return}c(!0);const f=pAt(e.curso,r),h=gAt(e.id,m=>{a(m),c(!1)});return()=>{f(),h()}},[e.curso,e.id]);const u=async f=>{try{await xAt(f)}catch(h){console.error("Failed to update submission:",h),alert("Hubo un error al guardar tu entrega.")}},d=({plan:f,tarea:h})=>{const m=S.useMemo(()=>{const B=n.find(j=>j.planificacionId===f.id&&j.tareaId===h.id);return B||{id:`${f.id}_${h.id}_${e.id}`,planificacionId:f.id,tareaId:h.id,estudianteId:e.id,estudianteNombre:e.nombreCompleto,completada:!1}},[f.id,h.id,n]),[g,x]=S.useState(!1),[v,y]=S.useState({observaciones:m.observacionesEstudiante||"",enlace:m.enlaceUrl||""}),w=B=>{var E;const j=(E=B.target.files)==null?void 0:E[0];j&&(alert(`Simulación: Archivo "${j.name}" listo para subir.`),u({...m,archivoAdjunto:{nombre:j.name,url:`simulated/path/${j.name}`},fechaCompletado:new Date().toISOString()}))},_=()=>{u({...m,observacionesEstudiante:v.observaciones,enlaceUrl:v.enlace,fechaCompletado:new Date().toISOString()})},T=()=>{u({...m,completada:!m.completada,fechaCompletado:new Date().toISOString()})};return l.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("input",{type:"checkbox",checked:m.completada,onChange:T,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("p",{className:`font-semibold ${m.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",h.numero,": ",h.instrucciones]}),l.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",h.fechaEntrega]}),h.recursoUrl&&l.jsx("a",{href:h.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),l.jsx("button",{onClick:()=>x(!g),className:"text-sm font-semibold",children:g?"Ocultar":"Entregar"})]}),g&&l.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[l.jsx("textarea",{value:v.observaciones,onChange:B=>y({...v,observaciones:B.target.value}),onBlur:_,placeholder:"Añadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),l.jsx("input",{type:"url",value:v.enlace,onChange:B=>y({...v,enlace:B.target.value}),onBlur:_,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),l.jsx("input",{type:"file",onChange:w,className:"text-sm"}),m.archivoAdjunto&&l.jsxs("p",{className:"text-xs text-green-600",children:["✓ Archivo subido: ",m.archivoAdjunto.nombre]})]}),m.feedbackProfesor&&l.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[l.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentación del profesor:"}),l.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:m.feedbackProfesor})]})]})};return o?l.jsx("div",{className:"text-center py-10",children:"Cargando tus proyectos..."}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),t.length>0?t.map(f=>{const h=f.tareas||[],g=n.filter(v=>v.planificacionId===f.id).filter(v=>v.completada).length,x=h.length>0?g/h.length*100:0;return l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[l.jsxs("button",{onClick:()=>i(s===f.id?null:f.id),className:"w-full text-left",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:f.nombreProyecto}),l.jsxs("div",{className:"mt-2 space-y-1",children:[l.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[l.jsx("span",{children:"Progreso"}),l.jsxs("span",{children:[Math.round(x),"%"]})]}),l.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:l.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${x}%`}})})]})]}),s===f.id&&l.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:h.length>0?h.map(v=>l.jsx(d,{plan:f,tarea:v},v.id)):l.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto aún no tiene tareas asignadas."})})]},f.id)}):l.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[l.jsx("span",{className:"text-5xl",children:"🎉"}),l.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"¡Todo al día!"}),l.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},bAt=({data:e})=>l.jsx("div",{className:"space-y-4",children:e.map((r,n)=>l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:r.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),l.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[r.value.toFixed(2)," / 4.00"]})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:l.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${r.value/4*100}%`}})})]},r.label+n))}),yAt=({currentUser:e})=>{const[t,r]=S.useState([]),[n,a]=S.useState(!1),[s,i]=S.useState(null),[o,c]=S.useState(null),[u,d]=S.useState(a2),f=S.useCallback(async()=>{a(!0);try{const v=(await Hst(e.nombreCompleto)).sort((y,w)=>new Date(w.fecha).getTime()-new Date(y.fecha).getTime());r(v),i(null)}catch(x){console.error("Error al cargar acompañamientos desde Firestore",x),i("No se pudieron cargar tus acompañamientos desde la nube.")}finally{a(!1)}},[e.nombreCompleto]),h=S.useCallback(async()=>{try{const x=await Vst();x&&d(x)}catch(x){console.error("Error al cargar rúbrica personalizada",x)}},[]);S.useEffect(()=>{f(),h()},[f,h]);const m=S.useMemo(()=>{if(!o)return[];const x={};return u.forEach(v=>{x[v.domain]={total:0,count:0},v.criteria.forEach(y=>{const w=o.rubricaResultados[y.name];w&&(x[v.domain].total+=w,x[v.domain].count++)})}),Object.entries(x).map(([v,y])=>({label:v,value:y.count>0?y.total/y.count:0}))},[o,u]),g=x=>{const v=new br;v.setFont("helvetica","bold"),v.setFontSize(10),v.setTextColor(100),v.text("LICEO INDUSTRIAL DE RECOLETA",v.internal.pageSize.getWidth()/2,15,{align:"center"}),v.setFont("helvetica","bold"),v.setFontSize(16),v.setTextColor(40),v.text("Informe de Acompañamiento Docente",v.internal.pageSize.getWidth()/2,25,{align:"center"}),v.setFontSize(12),v.setFont("helvetica","normal"),Io(v,{startY:35,body:[["Docente:",x.docente],["Fecha:",new Date(x.fecha).toLocaleDateString("es-CL")],["Asignatura:",x.asignatura],["Curso:",x.curso],["Bloques:",x.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let y=v.lastAutoTable.finalY+15;if(Object.keys(x.rubricaResultados).length>0){const T=[],B=["Débil","Incipiente","Satisfactorio","Avanzado"];u.forEach(j=>{T.push([{content:j.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),j.criteria.forEach(E=>{const N=x.rubricaResultados[E.name],I=N?B[N-1]:"No evaluado";T.push([E.name,I])})}),Io(v,{startY:y,head:[["Indicador","Nivel de Logro"]],body:T,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),y=v.lastAutoTable.finalY+15}const w=(T,B)=>{if(!B)return;y>250&&(v.addPage(),y=20,v.setFont("helvetica","bold"),v.setFontSize(10),v.setTextColor(100),v.text("LICEO INDUSTRIAL DE RECOLETA",v.internal.pageSize.getWidth()/2,15,{align:"center"}),y=25),v.setFont("helvetica","bold"),v.setFontSize(14),v.setTextColor(40),v.text(T,14,y),y+=8,v.setFont("helvetica","normal"),v.setFontSize(11),v.setTextColor(60);const j=v.splitTextToSize(B.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);v.text(j,14,y),y+=j.length*5+10};w("Observaciones Generales",x.observacionesGenerales),w("Retroalimentación Consolidada",x.retroalimentacionConsolidada);const _=v.getNumberOfPages();for(let T=1;T<=_;T++)v.setPage(T),v.setFontSize(8),v.setTextColor(128),v.text(`Página ${T} de ${_}`,v.internal.pageSize.getWidth()/2,v.internal.pageSize.getHeight()-10,{align:"center"});v.save(`Acompanamiento_${e.nombreCompleto.replace(/\s/g,"_")}_${new Date(x.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return o?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("button",{onClick:()=>c(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a mi historial"}),l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompañamiento"}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(o.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",o.curso," - ",o.asignatura]})]}),l.jsxs("button",{onClick:()=>g(o),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[l.jsx(_ne,{})," Exportar PDF"]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsx("div",{className:"lg:col-span-2 space-y-6",children:l.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[l.jsx("h3",{children:"Retroalimentación Consolidada (IA)"}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:l.jsx("p",{className:"whitespace-pre-wrap",children:o.retroalimentacionConsolidada||"No se ha generado retroalimentación."})}),l.jsx("h3",{children:"Observaciones Generales"}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:l.jsx("p",{className:"whitespace-pre-wrap",children:o.observacionesGenerales||"Sin observaciones."})})]})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeño por Dominio"}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:l.jsx(bAt,{data:m})})]})]})]}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompañamientos"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aquí encontrarás el historial de tus observaciones de clase y la retroalimentación asociada."}),n&&l.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompañamientos desde la nube..."}),s&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),!n&&t.length===0&&l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompañamientos registrados en la nube."}),l.jsx("div",{className:"space-y-4",children:!n&&t.length>0?t.map(x=>l.jsx("button",{onClick:()=>c(x),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[x.curso," - ",x.asignatura]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(x.fecha).toLocaleDateString("es-CL"),x.bloques&&` | Bloques: ${x.bloques}`]}),Object.keys(x.rubricaResultados).length>0&&l.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(x.rubricaResultados).length," criterios"]})]}),l.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},x.id)):!n&&l.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[l.jsx("span",{className:"text-5xl",children:"👍"}),l.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Aún no tienes acompañamientos de clase registrados."})]})})]})},wAt=e=>{console.log("🔄 Iniciando suscripción a todas las planificaciones...");try{const t=wt(Fr,"planificaciones"),r=$t(t,xr("fechaCreacion","desc"));return pr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Todas las planificaciones cargadas:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar todas las planificaciones:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a todas las planificaciones:",t),t}},EAt=(e,t)=>{if(console.log("🔄 Iniciando suscripción a planificaciones del usuario:",e),!e)throw console.error("❌ userId no proporcionado"),new Error("userId es requerido");try{const r=wt(Fr,"planificaciones"),n=$t(r,Qr("userId","==",e),xr("fechaCreacion","desc"));return pr(n,s=>{const i=[];s.forEach(o=>{const c=o.data();i.push({id:o.id,...c})}),console.log("✅ Planificaciones del usuario cargadas:",i.length),t(i)},s=>{throw console.error("❌ Error al cargar planificaciones del usuario:",s),s})}catch(r){throw console.error("❌ Error al configurar suscripción a planificaciones del usuario:",r),r}};function CAt(e){for(var t=e.length/6|0,r=new Array(t),n=0;n<t;)r[n]="#"+e.slice(n*6,++n*6);return r}const _At=CAt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var SAt={value:function(){}};function she(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new RS(r)}function RS(e){this._=e}function NAt(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}RS.prototype=she.prototype={constructor:RS,on:function(e,t){var r=this._,n=NAt(e+"",r),a,s=-1,i=n.length;if(arguments.length<2){for(;++s<i;)if((a=(e=n[s]).type)&&(a=kAt(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(a=(e=n[s]).type)r[a]=bJ(r[a],e.name,t);else if(t==null)for(a in r)r[a]=bJ(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new RS(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function kAt(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function bJ(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=SAt,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}const BAt=Object.freeze(Object.defineProperty({__proto__:null,dispatch:she},Symbol.toStringTag,{value:"Module"})),TAt=ype(BAt);var gF,yJ;function jAt(){if(yJ)return gF;yJ=1;const e=TAt.dispatch,t=Math.PI/180,r={archimedean:x,rectangular:v},n=64,a=2048;gF=function(){var T=[256,256],B=s,j=i,E=c,N=o,I=o,L=u,D=d,k=x,P=[],R=1/0,W=e("word","end"),V=null,G=Math.random,z={},K=w;z.canvas=function(M){return arguments.length?(K=_(M),z):K},z.start=function(){var M=J(K()),H=y((T[0]>>5)*T[1]),Y=null,Z=P.length,ae=-1,le=[],ie=P.map(function(Ae,Fe){return Ae.text=B.call(this,Ae,Fe),Ae.font=j.call(this,Ae,Fe),Ae.style=N.call(this,Ae,Fe),Ae.weight=I.call(this,Ae,Fe),Ae.rotate=L.call(this,Ae,Fe),Ae.size=~~E.call(this,Ae,Fe),Ae.padding=D.call(this,Ae,Fe),Ae}).sort(function(Ae,Fe){return Fe.size-Ae.size});return V&&clearInterval(V),V=setInterval(ce,0),ce(),z;function ce(){for(var Ae=Date.now();Date.now()-Ae<R&&++ae<Z&&V;){var Fe=ie[ae];Fe.x=T[0]*(G()+.5)>>1,Fe.y=T[1]*(G()+.5)>>1,f(M,Fe,ie,ae),Fe.hasText&&te(H,Fe,Y)&&(le.push(Fe),W.call("word",z,Fe),Y?m(Y,Fe):Y=[{x:Fe.x+Fe.x0,y:Fe.y+Fe.y0},{x:Fe.x+Fe.x1,y:Fe.y+Fe.y1}],Fe.x-=T[0]>>1,Fe.y-=T[1]>>1)}ae>=Z&&(z.stop(),W.call("end",z,le,Y))}},z.stop=function(){V&&(clearInterval(V),V=null);for(const M of P)delete M.sprite;return z};function J(M){const H=M.getContext("2d",{willReadFrequently:!0});M.width=M.height=1;const Y=Math.sqrt(H.getImageData(0,0,1,1).data.length>>2);return M.width=(n<<5)/Y,M.height=a/Y,H.fillStyle=H.strokeStyle="red",{context:H,ratio:Y}}function te(M,H,Y){T[0],T[1];for(var Z=H.x,ae=H.y,le=Math.sqrt(T[0]*T[0]+T[1]*T[1]),ie=k(T),ce=G()<.5?1:-1,Ae=-ce,Fe,ne,_e;(Fe=ie(Ae+=ce))&&(ne=~~Fe[0],_e=~~Fe[1],!(Math.min(Math.abs(ne),Math.abs(_e))>=le));)if(H.x=Z+ne,H.y=ae+_e,!(H.x+H.x0<0||H.y+H.y0<0||H.x+H.x1>T[0]||H.y+H.y1>T[1])&&(!Y||g(H,Y))&&!h(H,M,T[0])){for(var Ie=H.sprite,Se=H.width>>5,me=T[0]>>5,Be=H.x-(Se<<4),Le=Be&127,We=32-Le,be=H.y1-H.y0,Oe=(H.y+H.y0)*me+(Be>>5),Pe,qe=0;qe<be;qe++){Pe=0;for(var et=0;et<=Se;et++)M[Oe+et]|=Pe<<We|(et<Se?(Pe=Ie[qe*Se+et])>>>Le:0);Oe+=me}return!0}return!1}return z.timeInterval=function(M){return arguments.length?(R=M??1/0,z):R},z.words=function(M){return arguments.length?(P=M,z):P},z.size=function(M){return arguments.length?(T=[+M[0],+M[1]],z):T},z.font=function(M){return arguments.length?(j=_(M),z):j},z.fontStyle=function(M){return arguments.length?(N=_(M),z):N},z.fontWeight=function(M){return arguments.length?(I=_(M),z):I},z.rotate=function(M){return arguments.length?(L=_(M),z):L},z.text=function(M){return arguments.length?(B=_(M),z):B},z.spiral=function(M){return arguments.length?(k=r[M]||M,z):k},z.fontSize=function(M){return arguments.length?(E=_(M),z):E},z.padding=function(M){return arguments.length?(D=_(M),z):D},z.random=function(M){return arguments.length?(G=M,z):G},z.on=function(){var M=W.on.apply(W,arguments);return M===W?z:M},z};function s(T){return T.text}function i(){return"serif"}function o(){return"normal"}function c(T){return Math.sqrt(T.value)}function u(){return(~~(random()*6)-3)*30}function d(){return 1}function f(T,B,j,E){if(!B.sprite){var N=T.context,I=T.ratio;N.clearRect(0,0,(n<<5)/I,a/I);var L=0,D=0,k=0,P=j.length;for(--E;++E<P;){B=j[E],N.save(),N.font=B.style+" "+B.weight+" "+~~((B.size+1)/I)+"px "+B.font;const Fe=N.measureText(B.text),ne=-Math.floor(Fe.width/2);let _e=(Fe.width+1)*I,Ie=B.size<<1;if(B.rotate){var R=Math.sin(B.rotate*t),W=Math.cos(B.rotate*t),V=_e*W,G=_e*R,z=Ie*W,K=Ie*R;_e=Math.max(Math.abs(V+K),Math.abs(V-K))+31>>5<<5,Ie=~~Math.max(Math.abs(G+z),Math.abs(G-z))}else _e=_e+31>>5<<5;if(Ie>k&&(k=Ie),L+_e>=n<<5&&(L=0,D+=k,k=0),D+Ie>=a)break;N.translate((L+(_e>>1))/I,(D+(Ie>>1))/I),B.rotate&&N.rotate(B.rotate*t),N.fillText(B.text,ne,0),B.padding&&(N.lineWidth=2*B.padding,N.strokeText(B.text,ne,0)),N.restore(),B.width=_e,B.height=Ie,B.xoff=L,B.yoff=D,B.x1=_e>>1,B.y1=Ie>>1,B.x0=-B.x1,B.y0=-B.y1,B.hasText=!0,L+=_e}for(var J=N.getImageData(0,0,(n<<5)/I,a/I).data,te=[];--E>=0;)if(B=j[E],!!B.hasText){for(var M=B.width,H=M>>5,Y=B.y1-B.y0,Z=0;Z<Y*H;Z++)te[Z]=0;if(L=B.xoff,L==null)return;D=B.yoff;for(var ae=0,le=-1,ie=0;ie<Y;ie++){for(var Z=0;Z<M;Z++){var ce=H*ie+(Z>>5),Ae=J[(D+ie)*(n<<5)+(L+Z)<<2]?1<<31-Z%32:0;te[ce]|=Ae,ae|=Ae}ae?le=ie:(B.y0++,Y--,ie--,D++)}B.y1=B.y0+le,B.sprite=te.slice(0,(B.y1-B.y0)*H)}}}function h(T,B,j){j>>=5;for(var E=T.sprite,N=T.width>>5,I=T.x-(N<<4),L=I&127,D=32-L,k=T.y1-T.y0,P=(T.y+T.y0)*j+(I>>5),R,W=0;W<k;W++){R=0;for(var V=0;V<=N;V++)if((R<<D|(V<N?(R=E[W*N+V])>>>L:0))&B[P+V])return!0;P+=j}return!1}function m(T,B){var j=T[0],E=T[1];B.x+B.x0<j.x&&(j.x=B.x+B.x0),B.y+B.y0<j.y&&(j.y=B.y+B.y0),B.x+B.x1>E.x&&(E.x=B.x+B.x1),B.y+B.y1>E.y&&(E.y=B.y+B.y1)}function g(T,B){return T.x+T.x1>B[0].x&&T.x+T.x0<B[1].x&&T.y+T.y1>B[0].y&&T.y+T.y0<B[1].y}function x(T){var B=T[0]/T[1];return function(j){return[B*(j*=.1)*Math.cos(j),j*Math.sin(j)]}}function v(T){var B=4,j=B*T[0]/T[1],E=0,N=0;return function(I){var L=I<0?-1:1;switch(Math.sqrt(1+4*L*I)-L&3){case 0:E+=j;break;case 1:N+=B;break;case 2:E-=j;break;default:N-=B;break}return[E,N]}}function y(T){for(var B=[],j=-1;++j<T;)B[j]=0;return B}function w(){return document.createElement("canvas")}function _(T){return typeof T=="function"?T:function(){return T}}return gF}var IAt=jAt();const FAt=Ll(IAt),OAt=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),DAt=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),PAt=()=>l.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),RAt=e=>{const[t,r]=S.useState([]),[n,a]=S.useState(!0),[s,i]=S.useState(null),o=S.useMemo(()=>(e==null?void 0:e.profile)==="SUBDIRECCION",[e]);return S.useEffect(()=>{if(!(e!=null&&e.email)&&!(e!=null&&e.id)){i("Usuario no autenticado"),a(!1);return}try{let c;const u=d=>{r(d),a(!1),i(null)};if(o)c=wAt(u);else{const d=e.email||e.id||"";c=EAt(u,d)}return c}catch(c){i(c instanceof Error?c.message:"Error al conectar con la base de datos"),a(!1)}},[e,o]),{planificaciones:t,loading:n,error:s,canViewAllPlans:o}},LAt=({plan:e,onClose:t})=>l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:r=>r.stopPropagation(),children:[l.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreUnidad}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.asignatura," | ",e.nivel," | Autor: ",e.autor||"N/A"]})]}),l.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:l.jsx(DAt,{})})]}),l.jsxs("main",{className:"p-6 flex-1 overflow-y-auto space-y-6",children:[l.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),l.jsxs("p",{className:"mt-2",children:[l.jsx("strong",{children:"Indicadores de Evaluación:"})," ",e.indicadoresEvaluacion]}),l.jsx("div",{className:"mt-3",children:l.jsxs("span",{className:"inline-block bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-3 py-1 rounded-full text-sm font-semibold",children:["Avance de la Unidad: ",typeof e.progreso=="number"?`${e.progreso}%`:"No registrado"]})})]}),l.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",e.detallesLeccion.length,")"]}),l.jsx("div",{className:"space-y-3 max-h-[30vh] overflow-y-auto pr-2",children:e.detallesLeccion.map((r,n)=>l.jsxs("div",{className:"p-3 border dark:border-slate-700 rounded-md bg-white dark:bg-slate-800",children:[l.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",n+1,": ",r.actividades]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[l.jsxs("span",{children:[l.jsx("strong",{children:"Objetivo:"})," ",r.objetivosAprendizaje]}),l.jsxs("span",{children:[l.jsx("strong",{children:"Contenidos:"})," ",r.contenidosConceptuales]})]})]},n))}),e.reflexionUnidad&&l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2 mt-6",children:"Reflexión Docente"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-slate-100 dark:bg-slate-800 rounded-lg mt-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades Desarrolladas (Priorizadas)"}),e.reflexionUnidad.ordenHabilidades&&e.reflexionUnidad.ordenHabilidades.length>0?l.jsx("ul",{className:"space-y-2",children:e.reflexionUnidad.ordenHabilidades.map((r,n)=>l.jsxs("li",{className:"p-2 bg-white dark:bg-slate-700 rounded-md flex items-center gap-2 shadow-sm",children:[l.jsxs("span",{className:"font-bold text-amber-500",children:[n+1,"."]})," ",r]},r))}):l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No priorizadas."})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Fortalezas"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.fortalezas||"N/A"})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Mejoras"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.mejoras||"N/A"})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Desafíos"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.debilidades||"N/A"})]})]})]})]})]})]})}),wJ=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],MAt=["1º Medio","2º Medio","3º Medio","4º Medio"],UAt=({words:e})=>{const t=S.useRef(null);return S.useEffect(()=>{if(!e.length||!t.current)return;const r=Zu(t.current);r.selectAll("*").remove();const n=FAt().size([500,350]).words(e.map(s=>({...s}))).padding(5).rotate(()=>(~~(Math.random()*6)-3)*15).font("Impact").fontSize(s=>Math.sqrt(s.value)*12).on("end",a);n.start();function a(s){r.attr("width",n.size()[0]).attr("height",n.size()[1]).append("g").attr("transform",`translate(${n.size()[0]/2},${n.size()[1]/2})`).selectAll("text").data(s).enter().append("text").style("font-size",i=>`${i.size}px`).style("font-family","Impact").style("fill",(i,o)=>BB(_At)(o.toString())).attr("text-anchor","middle").attr("transform",i=>`translate(${[i.x,i.y]})rotate(${i.rotate})`).text(i=>i.text)}},[e]),l.jsx("svg",{ref:t})},QAt=({planificaciones:e})=>{const[t,r]=S.useState("todos"),[n,a]=S.useState("todos"),s=S.useMemo(()=>["todos",...Array.from(new Set(e.map(d=>d.asignatura)))],[e]),i=S.useMemo(()=>e.filter(d=>(t==="todos"||d.nivel===t)&&(n==="todos"||d.asignatura===n)&&d.reflexionUnidad),[e,t,n]),o=S.useMemo(()=>{const d=wJ.reduce((f,h)=>({...f,[h]:0}),{});return i.forEach(f=>{var h,m;return(m=(h=f.reflexionUnidad)==null?void 0:h.ordenHabilidades)==null?void 0:m.forEach((g,x)=>{d[g]!==void 0&&(d[g]+=wJ.length-x)})}),Object.entries(d).map(([f,h])=>({text:f,value:h})).sort((f,h)=>h.value-f.value)},[i]),c=S.useMemo(()=>{const d=new Set(["y","e","o","u","de","la","el","los","las","un","una","unos","unas","a","con","que","se","del","al","no","si","fue","es","son","muy","mas","lo","como","sus","para","por","este","esta","actividad","clase","alumnos","estudiantes"]),h=(i.map(m=>{var g,x;return`${((g=m.reflexionUnidad)==null?void 0:g.fortalezas)||""} ${((x=m.reflexionUnidad)==null?void 0:x.debilidades)||""}`}).join(" ").toLowerCase().match(/\b(\w{4,})\b/g)||[]).reduce((m,g)=>(d.has(g)||(m[g]=(m[g]||0)+1),m),{});return Object.entries(h).map(([m,g])=>({text:m,value:g})).sort((m,g)=>g.value-m.value).slice(0,50)},[i]),u="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600";return l.jsxs("div",{className:"animate-fade-in",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),l.jsxs("select",{value:t,onChange:d=>r(d.target.value),className:u,children:[l.jsx("option",{value:"todos",children:"Todos los Niveles"}),MAt.map(d=>l.jsx("option",{value:d,children:d},d))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsx("select",{value:n,onChange:d=>a(d.target.value),className:u,children:s.map(d=>l.jsx("option",{value:d,children:d==="todos"?"Todas las Asignaturas":d},d))})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Ranking de Habilidades"}),o.every(d=>d.value===0)?l.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos"}):l.jsx("ul",{className:"space-y-3",children:o.map((d,f)=>l.jsxs("li",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"font-bold text-lg text-amber-500 w-6 text-center",children:f+1}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:d.text}),l.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5",children:l.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${d.value/(o[0].value||1)*100}%`}})})]})]},d.text))})]}),l.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg flex flex-col items-center justify-center",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nube de Contenidos"}),c.length>0?l.jsx(UAt,{words:c}):l.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos suficientes"})]})]})]})},HAt=({currentUser:e})=>{const{planificaciones:t,loading:r,error:n,canViewAllPlans:a}=RAt(e),[s,i]=S.useState("seguimiento"),[o,c]=S.useState("1º"),[u,d]=S.useState(null),[f,h]=S.useState(null),m=S.useMemo(()=>{const v={"1º":"1º Medio","2º":"2º Medio","3º":"3º Medio","4º":"4º Medio"};return t.filter(y=>y.nivel===v[o]&&y.tipo==="Unidad")},[t,o]),g=[{key:"1º",label:"1º Medio"},{key:"2º",label:"2º Medio"},{key:"3º",label:"3º Medio"},{key:"4º",label:"4º Medio"}];if(!(e!=null&&e.id))return l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{children:"Usuario no autenticado."})});if(r)return l.jsxs("div",{className:"text-center py-8 flex justify-center items-center gap-3",children:[l.jsx(PAt,{}),l.jsx("span",{children:"Cargando planificaciones..."})]});if(n)return l.jsx("div",{className:"text-center py-8",children:l.jsxs("p",{className:"text-red-500",children:["Error: ",n]})});const x=()=>l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:l.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:g.map(v=>l.jsx("button",{onClick:()=>c(v.key),className:`${o===v.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg`,children:v.label},v.key))})}),m.length===0?l.jsx("div",{className:"text-center py-12",children:l.jsx("p",{className:"text-slate-500",children:"No hay planificaciones de unidad para este nivel."})}):l.jsx("div",{className:"space-y-4",children:jo.map(v=>{const y=m.filter(_=>_.asignatura===v);if(y.length===0)return null;const w=u===v;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[l.jsxs("button",{onClick:()=>d(w?null:v),className:"w-full flex justify-between items-center p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:v}),l.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 py-1 rounded-full text-xs font-medium",children:[y.length," unidad",y.length>1?"es":""]})]}),l.jsx("span",{className:`transform transition-transform ${w?"rotate-180":""}`,children:l.jsx(OAt,{})})]}),w&&l.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:l.jsx("ul",{className:"space-y-3",children:y.map(_=>l.jsx("li",{children:l.jsxs("button",{onClick:()=>h(_),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 group",children:[l.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200 group-hover:text-amber-600",children:_.nombreUnidad}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Autor: ",_.autor||"N/A"]})]})},_.id))})})]},v)})})]});return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento Curricular"}),a&&l.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"👑 Vista administrativa"})]}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:l.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>i("seguimiento"),className:`${s==="seguimiento"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Seguimiento por Nivel"}),l.jsx("button",{onClick:()=>i("analisis"),className:`${s==="analisis"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Análisis de Reflexiones"})]})}),s==="seguimiento"&&x(),s==="analisis"&&l.jsx(QAt,{planificaciones:t.filter(v=>v.tipo==="Unidad")})]}),f&&l.jsx(LAt,{plan:f,onClose:()=>h(null)})]})},IT="analisisTaxonomicos",VAt=async()=>{try{const e=$t(wt(Fr,IT),xr("uploadDate","desc"));return(await Hn(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener todos los análisis:",e),new Error("No se pudieron cargar los análisis taxonómicos")}},zAt=async e=>{if(!e)return[];try{const t=$t(wt(Fr,IT),Qr("userId","==",e),xr("uploadDate","desc"));return(await Hn(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener análisis por usuario:",t),new Error("No se pudieron cargar los análisis del usuario")}},$At=async e=>{try{return{id:(await _n(wt(Fr,IT),e)).id,...e}}catch(t){throw console.error("Error al crear análisis:",t),new Error("No se pudo crear el análisis taxonómico")}},GAt=async e=>{try{const t=cr(Fr,IT,e);await is(t)}catch(t){throw console.error("Error al eliminar análisis:",t,"ID:",e),new Error("No se pudo eliminar el análisis taxonómico")}},EJ=["1º Medio","2º Medio","3º Medio","4º Medio"],gh=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],Ov={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},KAt=()=>l.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),qAt=({currentUser:e})=>{const[t,r]=S.useState([]),[n,a]=S.useState(!1),[s,i]=S.useState(null),[o,c]=S.useState(null),[u,d]=S.useState(""),[f,h]=S.useState(!1),[m,g]=S.useState(null),[x,v]=S.useState(null),[y,w]=S.useState(""),[_,T]=S.useState(""),[B,j]=S.useState(""),[E,N]=S.useState(""),[I,L]=S.useState("resumen"),D=S.useCallback(async()=>{if(e!=null&&e.id){a(!0);try{const K=e.profile==="SUBDIRECCION"?await VAt():await zAt(e.id);r(K),i(null)}catch(K){console.error("Error al cargar análisis:",K),i("No se pudieron cargar los análisis.")}finally{a(!1)}}},[e]);S.useEffect(()=>{D()},[D]);const k=async K=>{var te;const J=(te=K.target.files)==null?void 0:te[0];if(J){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(J.type)){i("Por favor, suba un archivo PDF o DOCX válido.");return}g(J),d(J.name),i(null);const H=new FileReader;H.onloadend=()=>{var Z;const Y=(Z=H.result)==null?void 0:Z.split(",")[1];if(!Y){i("No se pudo procesar el archivo. Puede que esté vacío o corrupto."),v(null);return}v({mimeType:J.type,data:Y})},H.onerror=()=>i("Error al leer el archivo."),H.readAsDataURL(J)}},P=async()=>{if(!u.trim()||!x){i("Debe subir un documento y asignarle un nombre para analizar.");return}if(!y||!_){i("Seleccione Nivel y Asignatura antes de analizar.");return}h(!0),i(null);const K=`
            Eres un experto en pedagogía y en la Taxonomía de Bloom. Analiza el siguiente documento de una evaluación educativa.
            Tu tarea es:
            1. Identificar cada pregunta o ítem de evaluación en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonomía de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados. El JSON debe ser válido.
        `,J={type:"object",properties:{analysisResults:{type:"array",items:{type:"object",properties:{question:{type:"string"},habilidadBloom:{type:"string",enum:gh}},required:["question","habilidadBloom"]}},summary:{type:"object",properties:gh.reduce((te,M)=>({...te,[M]:{type:"number"}}),{})}},required:["analysisResults","summary"]};try{cb("Análisis Taxonómico",e);const te="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",H=new ps(te).getGenerativeModel({model:"gemini-1.5-pro",generationConfig:{responseMimeType:"application/json",responseSchema:J}}),Y={inlineData:{mimeType:x.mimeType,data:x.data}},ae=(await H.generateContent([K,Y])).response.text();let le;try{le=JSON.parse(ae)}catch(Ae){throw console.error("Error al parsear JSON:",Ae),console.error("Respuesta recibida (no es JSON válido):",ae),new Error("La respuesta de la IA no tuvo un formato válido. Intente de nuevo.")}const ie={documentName:u,uploadDate:new Date().toISOString(),userId:e.id,analysisResults:le.analysisResults,summary:le.summary,nivel:y,asignatura:_},ce=await $At(ie);await D(),c(ce),d(""),g(null),v(null),w(""),T("")}catch(te){console.error(te);const M=te instanceof Error?te.message:"Hubo un error al analizar el documento.";i(M)}finally{h(!1)}},R=async K=>{if(window.confirm("¿Está seguro de eliminar este análisis?"))try{await GAt(K),await D(),(o==null?void 0:o.id)===K&&c(null)}catch{i("No se pudo eliminar el análisis.")}},W=S.useMemo(()=>t.filter(K=>{const J=B?K.nivel===B:!0,te=E?K.asignatura===E:!0;return J&&te}),[t,B,E]),V=S.useMemo(()=>{const K={Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0};W.forEach(te=>{gh.forEach(M=>{var Y;const H=((Y=te.summary)==null?void 0:Y[M])||0;K[M]+=H})});const J=Object.values(K).reduce((te,M)=>te+M,0);return{acc:K,total:J}},[W]),G=S.useMemo(()=>{const K=new Map;W.forEach(te=>{const M=te.asignatura||"Sin asignatura";K.has(M)||K.set(M,{Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0});const H=K.get(M);gh.forEach(Y=>{var Z;H[Y]+=((Z=te.summary)==null?void 0:Z[Y])||0})});const J=Array.from(K.entries()).map(([te,M])=>({asignatura:te,counts:M,total:Object.values(M).reduce((H,Y)=>H+Y,0)}));return J.sort((te,M)=>M.total-te.total),J},[W]),z=S.useMemo(()=>o?Object.values(o.summary).reduce((K,J)=>K+(J||0),0):0,[o]);return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Análisis Taxonomico de Evaluaciones"}),s&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),l.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:l.jsxs("div",{className:"space-y-1 text-center",children:[l.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:l.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),l.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[l.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500",children:[l.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:k,accept:".pdf,.doc,.docx"}),l.jsx("span",{children:"Cargue un archivo"})]}),l.jsx("p",{className:"pl-1",children:"o arrástrelo aquí"})]}),l.jsx("p",{className:"text-xs text-slate-500",children:m?m.name:"PDF, DOCX hasta 10MB"})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),l.jsxs("select",{value:y,onChange:K=>w(K.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione"}),EJ.map(K=>l.jsx("option",{value:K,children:K},K))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsxs("select",{value:_,onChange:K=>T(K.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione"}),jo.map(K=>l.jsx("option",{value:K,children:K},K))]})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento"}),l.jsx("input",{type:"text",id:"documentName",value:u,onChange:K=>d(K.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx("button",{onClick:P,disabled:f||!x,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:f?l.jsx(KAt,{}):"Analizar con IA"})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Análisis"}),n?l.jsx("p",{className:"text-sm text-slate-500",children:"Cargando..."}):t.length===0?l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay análisis guardados."}):l.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:t.map(K=>l.jsxs("button",{onClick:()=>c(K),className:`w-full text-left p-3 rounded-md border ${(o==null?void 0:o.id)===K.id?"bg-amber-100 border-amber-300":"bg-slate-50 hover:bg-slate-100"}`,children:[l.jsx("p",{className:"font-semibold truncate",children:K.documentName}),l.jsx("p",{className:"text-xs text-slate-500",children:new Date(K.uploadDate).toLocaleString("es-CL")}),(K.nivel||K.asignatura)&&l.jsxs("p",{className:"text-xs text-slate-500",children:[K.nivel||"Nivel s/i"," • ",K.asignatura||"Asignatura s/i"]})]},K.id))})]})]}),l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-md",children:l.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Nivel"}),l.jsxs("select",{value:B,onChange:K=>j(K.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todos"}),EJ.map(K=>l.jsx("option",{value:K,children:K},K))]})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Asignatura"}),l.jsxs("select",{value:E,onChange:K=>N(K.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todas"}),jo.map(K=>l.jsx("option",{value:K,children:K},K))]})]}),l.jsx("button",{type:"button",onClick:()=>{j(""),N("")},className:"px-4 py-2 rounded-md bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-800 dark:text-slate-200 font-semibold",children:"Limpiar filtros"})]})}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md",children:[l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 px-4",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>L("resumen"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${I==="resumen"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Resumen Global"}),l.jsx("button",{onClick:()=>L("comparacion"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${I==="comparacion"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Comparación por Asignatura"})]})}),I==="resumen"?l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Resumen Global de Habilidades"}),l.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[W.length," análisis considerados"]})]}),l.jsx("div",{className:"space-y-3",children:gh.map(K=>{const J=V.acc[K],te=V.total>0?J/V.total*100:0;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:K}),l.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[J," (",te.toFixed(0),"%)"]})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:l.jsx("div",{className:`${Ov[K]} h-4 rounded-full`,style:{width:`${te}%`}})})]},K)})}),l.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-3 gap-3",children:gh.map(K=>l.jsxs("div",{className:"flex items-center justify-between px-3 py-2 rounded-lg border dark:border-slate-700",children:[l.jsx("span",{className:"text-sm",children:K}),l.jsx("span",{className:`text-xs font-bold text-white px-2 py-1 rounded ${Ov[K]}`,children:V.acc[K]})]},K))})]}):l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Comparación por Asignatura"}),l.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[G.length," asignaturas comparadas"]})]}),G.length===0?l.jsx("div",{className:"text-sm text-slate-500",children:"No hay datos con los filtros actuales."}):l.jsx("div",{className:"space-y-5",children:G.map(K=>{const J=K.total||1;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:K.asignatura}),l.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:[K.total," ítems"]})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-5 overflow-hidden flex",children:gh.map(te=>{const M=K.counts[te]||0,H=M/J*100;return l.jsx("div",{className:`${Ov[te]} h-5`,style:{width:`${H}%`},title:`${te}: ${M} (${H.toFixed(0)}%)`},te)})}),l.jsx("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2",children:gh.map(te=>l.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-300",children:[l.jsx("span",{className:`inline-block w-3 h-3 rounded ${Ov[te]}`}),l.jsx("span",{children:te})]},te))})]},K.asignatura)})})]})]}),l.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:o?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:o.documentName}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(o.uploadDate).toLocaleString("es-CL"),(o.nivel||o.asignatura)&&l.jsxs(l.Fragment,{children:[" ","• ",o.nivel||"Nivel s/i"," • ",o.asignatura||"Asignatura s/i"]})]})]}),l.jsx("button",{onClick:()=>R(o.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado del Documento (",z," preguntas)"]}),l.jsx("div",{className:"space-y-3",children:gh.map(K=>{const J=o.summary[K]||0,te=z>0?J/z*100:0;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:K}),l.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[J," (",te.toFixed(0),"%)"]})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:l.jsx("div",{className:`${Ov[K]} h-4 rounded-full`,style:{width:`${te}%`}})})]},K)})})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Análisis"}),l.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / Ítem"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o.analysisResults.map((K,J)=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:K.question}),l.jsx("td",{className:"px-4 py-3 text-sm",children:l.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${Ov[K.habilidadBloom]}`,children:K.habilidadBloom})})]},J))})]})})]})]}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-8",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Análisis"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo análisis o seleccione uno del historial para ver los resultados aquí."})]})})]})]})]})},Y4="empresas_practicas",WAt="usuarios",L7="rutas_supervision",M7=e=>{const t=e.data();return{id:e.id,...t}};async function XAt(e){const r=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(e)}&key=AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4&region=CL`;try{const a=await(await fetch(r)).json();return a.status==="OK"&&a.results[0]?a.results[0].geometry.location:null}catch(n){return console.error("Error en la llamada a la API de Geocodificación:",n),null}}const YAt=e=>{const t=$t(wt(ht,Y4),xr("nombre","asc"));return pr(t,r=>{const n=r.docs.map(a=>M7(a));e(n)},r=>console.error("Error al suscribirse a empresas:",r))},JAt=async e=>{const t=e.calificaciones.reduce((n,a)=>n+(a.score||0),0),r={...e,puntajeTotal:t};if(e.direccion){const n=await XAt(e.direccion);n&&(r.coordenadas=n)}if("id"in e&&e.id){const{id:n,...a}=r,s=cr(ht,Y4,n);return await Mi(s,a,{merge:!0}),n}else return(await _n(wt(ht,Y4),{...r,createdAt:Ri()})).id},ZAt=async e=>{const t=cr(ht,Y4,e);await is(t)},eht=e=>{const t=$t(wt(ht,WAt),Qr("profile","==","PROFESORADO"),xr("nombreCompleto","asc"));return pr(t,r=>{const n=r.docs.map(a=>M7(a));e(n)},r=>console.error("Error al suscribirse a profesores:",r))},tht=async e=>(await _n(wt(ht,L7),{...e,createdAt:Ri()})).id,rht=e=>{const t=$t(wt(ht,L7),xr("createdAt","desc"));return pr(t,r=>{const n=r.docs.map(a=>M7(a));e(n)},r=>console.error("Error al suscribirse a rutas guardadas:",r))},nht=async e=>{const t=cr(ht,L7,e);await is(t)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ug=function(){return Ug=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Ug.apply(this,arguments)};function aht(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(u){try{c(n.next(u))}catch(d){s(d)}}function o(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){var d;u.done?a(u.value):(d=u.value,d instanceof r?d:new r(function(f){f(d)})).then(i,o)}c((n=n.apply(e,[])).next())})}function sht(e,t){var r,n,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(u){return function(d){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&d[0]?n.return:d[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,d[1])).done)return a;switch(n=0,a&&(d=[2&d[0],a.value]),d[0]){case 0:case 1:a=d;break;case 4:return i.label++,{value:d[1],done:!1};case 5:i.label++,n=d[1],d=[0];continue;case 7:d=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!((a=a.length>0&&a[a.length-1])||d[0]!==6&&d[0]!==2)){i=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){i.label=d[1];break}if(d[0]===6&&i.label<a[1]){i.label=a[1],a=d;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(d);break}a[2]&&i.ops.pop(),i.trys.pop();continue}d=t.call(e,i)}catch(f){d=[6,f],n=0}finally{r=a=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([c,u])}}}function Mr(){return Mr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mr.apply(this,arguments)}function Qg(e){return Qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qg(e)}function ihe(e){var t=function(r,n){if(Qg(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n);if(Qg(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}(e,"string");return Qg(t)==="symbol"?t:String(t)}function c1(e,t,r){return(t=ihe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Cr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CJ(Object(r),!0).forEach(function(n){c1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _J(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ihe(n.key),n)}}function RP(e,t){return RP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},RP(e,t)}function J4(e){return J4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},J4(e)}function iht(e,t){if(t&&(Qg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(e)}function oht(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,n=J4(e);if(t){var a=J4(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return iht(this,r)}}function LP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ohe(e,t){if(e){if(typeof e=="string")return LP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?LP(e,t):void 0}}function U7(e){return function(t){if(Array.isArray(t))return LP(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||ohe(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var lht=function(){function e(r){var n=this;this._insertTag=function(a){var s;s=n.tags.length===0?n.insertionPoint?n.insertionPoint.nextSibling:n.prepend?n.container.firstChild:n.before:n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(a,s),n.tags.push(a)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(s){var i=document.createElement("style");return i.setAttribute("data-emotion",s.key),s.nonce!==void 0&&i.setAttribute("nonce",s.nonce),i.appendChild(document.createTextNode("")),i.setAttribute("data-s",""),i}(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var a=function(s){if(s.sheet)return s.sheet;for(var i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].ownerNode===s)return document.styleSheets[i]}(n);try{a.insertRule(r,a.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),Qu="-ms-",SJ="-moz-",ta="-webkit-",Q7="decl",lhe="@keyframes",cht=Math.abs,FT=String.fromCharCode,uht=Object.assign;function che(e){return e.trim()}function la(e,t,r){return e.replace(t,r)}function MP(e,t){return e.indexOf(t)}function Co(e,t){return 0|e.charCodeAt(t)}function NE(e,t,r){return e.slice(t,r)}function lA(e){return e.length}function H7(e){return e.length}function F5(e,t){return t.push(e),e}var OT=1,wb=1,uhe=0,vc=0,wi=0,iy="";function DT(e,t,r,n,a,s,i){return{value:e,root:t,parent:r,type:n,props:a,children:s,line:OT,column:wb,length:i,return:""}}function gw(e,t){return uht(DT("",null,null,"",null,null,0),e,{length:-e.length},t)}function au(){return wi=vc<uhe?Co(iy,vc++):0,wb++,wi===10&&(wb=1,OT++),wi}function kA(){return Co(iy,vc)}function LS(){return vc}function jC(e,t){return NE(iy,e,t)}function kE(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function dhe(e){return OT=wb=1,uhe=lA(iy=e),vc=0,[]}function fhe(e){return iy="",e}function MS(e){return che(jC(vc-1,UP(e===91?e+2:e===40?e+1:e)))}function dht(e){for(;(wi=kA())&&wi<33;)au();return kE(e)>2||kE(wi)>3?"":" "}function fht(e,t){for(;--t&&au()&&!(wi<48||wi>102||wi>57&&wi<65||wi>70&&wi<97););return jC(e,LS()+(t<6&&kA()==32&&au()==32))}function UP(e){for(;au();)switch(wi){case e:return vc;case 34:case 39:e!==34&&e!==39&&UP(wi);break;case 40:e===41&&UP(e);break;case 92:au()}return vc}function Aht(e,t){for(;au()&&e+wi!==57&&(e+wi!==84||kA()!==47););return"/*"+jC(t,vc-1)+"*"+FT(e===47?e:au())}function hht(e){for(;!kE(kA());)au();return jC(e,vc)}function NJ(e){return fhe(US("",null,null,null,[""],e=dhe(e),0,[0],e))}function US(e,t,r,n,a,s,i,o,c){for(var u=0,d=0,f=i,h=0,m=0,g=0,x=1,v=1,y=1,w=0,_="",T=a,B=s,j=n,E=_;v;)switch(g=w,w=au()){case 40:if(g!=108&&Co(E,f-1)==58){MP(E+=la(MS(w),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:E+=MS(w);break;case 9:case 10:case 13:case 32:E+=dht(g);break;case 92:E+=fht(LS()-1,7);continue;case 47:switch(kA()){case 42:case 47:F5(mht(Aht(au(),LS()),t,r),c);break;default:E+="/"}break;case 123*x:o[u++]=lA(E)*y;case 125*x:case 59:case 0:switch(w){case 0:case 125:v=0;case 59+d:m>0&&lA(E)-f&&F5(m>32?BJ(E+";",n,r,f-1):BJ(la(E," ","")+";",n,r,f-2),c);break;case 59:E+=";";default:if(F5(j=kJ(E,t,r,u,d,a,o,_,T=[],B=[],f),s),w===123)if(d===0)US(E,t,j,j,T,s,f,o,B);else switch(h===99&&Co(E,3)===110?100:h){case 100:case 109:case 115:US(e,j,j,n&&F5(kJ(e,j,j,0,0,a,o,_,a,T=[],f),B),a,B,f,o,n?T:B);break;default:US(E,j,j,j,[""],B,0,o,B)}}u=d=m=0,x=y=1,_=E="",f=i;break;case 58:f=1+lA(E),m=g;default:if(x<1){if(w==123)--x;else if(w==125&&x++==0&&(wi=vc>0?Co(iy,--vc):0,wb--,wi===10&&(wb=1,OT--),wi==125))continue}switch(E+=FT(w),w*x){case 38:y=d>0?1:(E+="\f",-1);break;case 44:o[u++]=(lA(E)-1)*y,y=1;break;case 64:kA()===45&&(E+=MS(au())),h=kA(),d=f=lA(_=E+=hht(LS())),w++;break;case 45:g===45&&lA(E)==2&&(x=0)}}return s}function kJ(e,t,r,n,a,s,i,o,c,u,d){for(var f=a-1,h=a===0?s:[""],m=H7(h),g=0,x=0,v=0;g<n;++g)for(var y=0,w=NE(e,f+1,f=cht(x=i[g])),_=e;y<m;++y)(_=che(x>0?h[y]+" "+w:la(w,/&\f/g,h[y])))&&(c[v++]=_);return DT(e,t,r,a===0?"rule":o,c,u,d)}function mht(e,t,r){return DT(e,t,r,"comm",FT(wi),NE(e,2,-2),0)}function BJ(e,t,r,n){return DT(e,t,r,Q7,NE(e,0,n),NE(e,n+1,-1),n)}function Hg(e,t){for(var r="",n=H7(e),a=0;a<n;a++)r+=t(e[a],a,e,t)||"";return r}function TJ(e,t,r,n){switch(e.type){case"@import":case Q7:return e.return=e.return||e.value;case"comm":return"";case lhe:return e.return=e.value+"{"+Hg(e.children,n)+"}";case"rule":e.value=e.props.join(",")}return lA(r=Hg(e.children,n))?e.return=e.value+"{"+r+"}":""}function jJ(e){var t=H7(e);return function(r,n,a,s){for(var i="",o=0;o<t;o++)i+=e[o](r,n,a,s)||"";return i}}function pht(e){return function(t){t.root||(t=t.return)&&e(t)}}function Ahe(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var ght=function(e,t,r){for(var n=0,a=0;n=a,a=kA(),n===38&&a===12&&(t[r]=1),!kE(a);)au();return jC(e,vc)},xht=function(e,t){return fhe(function(r,n){var a=-1,s=44;do switch(kE(s)){case 0:s===38&&kA()===12&&(n[a]=1),r[a]+=ght(vc-1,n,a);break;case 2:r[a]+=MS(s);break;case 4:if(s===44){r[++a]=kA()===58?"&\f":"",n[a]=r[a].length;break}default:r[a]+=FT(s)}while(s=au());return r}(dhe(e),t))},IJ=new WeakMap,vht=function(e){if(e.type==="rule"&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(!(r=r.parent))return;if((e.props.length!==1||t.charCodeAt(0)===58||IJ.get(r))&&!n){IJ.set(e,!0);for(var a=[],s=xht(t,a),i=r.props,o=0,c=0;o<s.length;o++)for(var u=0;u<i.length;u++,c++)e.props[c]=a[o]?s[o].replace(/&\f/g,i[u]):i[u]+" "+s[o]}}},bht=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function hhe(e,t){switch(function(r,n){return 45^Co(r,0)?(((n<<2^Co(r,0))<<2^Co(r,1))<<2^Co(r,2))<<2^Co(r,3):0}(e,t)){case 5103:return ta+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ta+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return ta+e+SJ+e+Qu+e+e;case 6828:case 4268:return ta+e+Qu+e+e;case 6165:return ta+e+Qu+"flex-"+e+e;case 5187:return ta+e+la(e,/(\w+).+(:[^]+)/,ta+"box-$1$2-ms-flex-$1$2")+e;case 5443:return ta+e+Qu+"flex-item-"+la(e,/flex-|-self/,"")+e;case 4675:return ta+e+Qu+"flex-line-pack"+la(e,/align-content|flex-|-self/,"")+e;case 5548:return ta+e+Qu+la(e,"shrink","negative")+e;case 5292:return ta+e+Qu+la(e,"basis","preferred-size")+e;case 6060:return ta+"box-"+la(e,"-grow","")+ta+e+Qu+la(e,"grow","positive")+e;case 4554:return ta+la(e,/([^-])(transform)/g,"$1"+ta+"$2")+e;case 6187:return la(la(la(e,/(zoom-|grab)/,ta+"$1"),/(image-set)/,ta+"$1"),e,"")+e;case 5495:case 3959:return la(e,/(image-set\([^]*)/,ta+"$1$`$1");case 4968:return la(la(e,/(.+:)(flex-)?(.*)/,ta+"box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+ta+e+e;case 4095:case 3583:case 4068:case 2532:return la(e,/(.+)-inline(.+)/,ta+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(lA(e)-1-t>6)switch(Co(e,t+1)){case 109:if(Co(e,t+4)!==45)break;case 102:return la(e,/(.+:)(.+)-([^]+)/,"$1"+ta+"$2-$3$1"+SJ+(Co(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~MP(e,"stretch")?hhe(la(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Co(e,t+1)!==115)break;case 6444:switch(Co(e,lA(e)-3-(~MP(e,"!important")&&10))){case 107:return la(e,":",":"+ta)+e;case 101:return la(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ta+(Co(e,14)===45?"inline-":"")+"box$3$1"+ta+"$2$3$1-ms-$2box$3")+e}break;case 5936:switch(Co(e,t+11)){case 114:return ta+e+Qu+la(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return ta+e+Qu+la(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return ta+e+Qu+la(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return ta+e+Qu+e+e}return e}var FJ,O5,QS=typeof document<"u",yht=QS?void 0:(FJ=function(){return Ahe(function(){var e={};return function(t){return e[t]}})},O5=new WeakMap,function(e){if(O5.has(e))return O5.get(e);var t=FJ(e);return O5.set(e,t),t}),wht=[function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case Q7:e.return=hhe(e.value,e.length);break;case lhe:return Hg([gw(e,{value:la(e.value,"@","@"+ta)})],n);case"rule":if(e.length)return function(a,s){return a.map(s).join("")}(e.props,function(a){switch(function(s,i){return(s=i.exec(s))?s[0]:s}(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Hg([gw(e,{props:[la(a,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return Hg([gw(e,{props:[la(a,/:(plac\w+)/,":"+ta+"input-$1")]}),gw(e,{props:[la(a,/:(plac\w+)/,":-moz-$1")]}),gw(e,{props:[la(a,/:(plac\w+)/,"-ms-input-$1")]})],n)}return""})}}],mhe=function(e){var t=e.key;if(QS&&t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(y){y.getAttribute("data-emotion").indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var n=e.stylisPlugins||wht,a,s,i={},o=[];QS&&(a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(y){for(var w=y.getAttribute("data-emotion").split(" "),_=1;_<w.length;_++)i[w[_]]=!0;o.push(y)}));var c=[vht,bht];if(QS){var u,d=[TJ,pht(function(y){u.insert(y)})],f=jJ(c.concat(n,d));s=function(y,w,_,T){u=_,Hg(NJ(y?y+"{"+w.styles+"}":w.styles),f),T&&(v.inserted[w.name]=!0)}}else{var h=[TJ],m=jJ(c.concat(n,h)),g=yht(n)(t),x=function(y,w){var _=w.name;return g[_]===void 0&&(g[_]=Hg(NJ(y?y+"{"+w.styles+"}":w.styles),m)),g[_]};s=function(y,w,_,T){var B=w.name,j=x(y,w);return v.compat===void 0?(T&&(v.inserted[B]=!0),j):T?void(v.inserted[B]=j):j}}var v={key:t,sheet:new lht({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:s};return v.sheet.hydrate(o),v};function ua(e,t,r){return e(r={path:t,exports:{},require:function(n,a){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(a==null&&r.path)}},r.exports),r.exports}var Ao=typeof Symbol=="function"&&Symbol.for,QP=Ao?Symbol.for("react.element"):60103,HP=Ao?Symbol.for("react.portal"):60106,HS=Ao?Symbol.for("react.fragment"):60107,VS=Ao?Symbol.for("react.strict_mode"):60108,zS=Ao?Symbol.for("react.profiler"):60114,$S=Ao?Symbol.for("react.provider"):60109,GS=Ao?Symbol.for("react.context"):60110,VP=Ao?Symbol.for("react.async_mode"):60111,Z4=Ao?Symbol.for("react.concurrent_mode"):60111,KS=Ao?Symbol.for("react.forward_ref"):60112,qS=Ao?Symbol.for("react.suspense"):60113,Eht=Ao?Symbol.for("react.suspense_list"):60120,WS=Ao?Symbol.for("react.memo"):60115,XS=Ao?Symbol.for("react.lazy"):60116,Cht=Ao?Symbol.for("react.block"):60121,_ht=Ao?Symbol.for("react.fundamental"):60117,Sht=Ao?Symbol.for("react.responder"):60118,Nht=Ao?Symbol.for("react.scope"):60119;function Qc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case QP:switch(e=e.type){case VP:case Z4:case HS:case zS:case VS:case qS:return e;default:switch(e=e&&e.$$typeof){case GS:case KS:case XS:case WS:case $S:return e;default:return t}}case HP:return t}}}function OJ(e){return Qc(e)===Z4}var kht={AsyncMode:VP,ConcurrentMode:Z4,ContextConsumer:GS,ContextProvider:$S,Element:QP,ForwardRef:KS,Fragment:HS,Lazy:XS,Memo:WS,Portal:HP,Profiler:zS,StrictMode:VS,Suspense:qS,isAsyncMode:function(e){return OJ(e)||Qc(e)===VP},isConcurrentMode:OJ,isContextConsumer:function(e){return Qc(e)===GS},isContextProvider:function(e){return Qc(e)===$S},isElement:function(e){return typeof e=="object"&&e!==null&&e.$$typeof===QP},isForwardRef:function(e){return Qc(e)===KS},isFragment:function(e){return Qc(e)===HS},isLazy:function(e){return Qc(e)===XS},isMemo:function(e){return Qc(e)===WS},isPortal:function(e){return Qc(e)===HP},isProfiler:function(e){return Qc(e)===zS},isStrictMode:function(e){return Qc(e)===VS},isSuspense:function(e){return Qc(e)===qS},isValidElementType:function(e){return typeof e=="string"||typeof e=="function"||e===HS||e===Z4||e===zS||e===VS||e===qS||e===Eht||typeof e=="object"&&e!==null&&(e.$$typeof===XS||e.$$typeof===WS||e.$$typeof===$S||e.$$typeof===GS||e.$$typeof===KS||e.$$typeof===_ht||e.$$typeof===Sht||e.$$typeof===Nht||e.$$typeof===Cht)},typeOf:Qc};ua(function(e,t){});var DJ=ua(function(e){e.exports=kht}),PJ={};PJ[DJ.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},PJ[DJ.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var zP=typeof document<"u";function phe(e,t,r){var n="";return r.split(" ").forEach(function(a){e[a]!==void 0?t.push(e[a]+";"):n+=a+" "}),n}var V7=function(e,t,r){var n=e.key+"-"+t.name;(r===!1||zP===!1&&e.compat!==void 0)&&e.registered[n]===void 0&&(e.registered[n]=t.styles)},z7=function(e,t,r){V7(e,t,r);var n=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var a="",s=t;do{var i=e.insert(t===s?"."+n:"",s,e.sheet,!0);zP||i===void 0||(a+=i),s=s.next}while(s!==void 0);if(!zP&&a.length!==0)return a}},Bht={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Tht=/[A-Z]|^ms/g,jht=/_EMO_([^_]+?)_([^]*?)_EMO_/g,ghe=function(e){return e.charCodeAt(1)===45},RJ=function(e){return e!=null&&typeof e!="boolean"},xF=Ahe(function(e){return ghe(e)?e:e.replace(Tht,"-$&").toLowerCase()}),LJ=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(jht,function(r,n,a){return cA={name:n,styles:a,next:cA},n})}return Bht[e]===1||ghe(e)||typeof t!="number"||t===0?t:t+"px"};function w2(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":if(r.anim===1)return cA={name:r.name,styles:r.styles,next:cA},r.name;if(r.styles!==void 0){var n=r.next;if(n!==void 0)for(;n!==void 0;)cA={name:n.name,styles:n.styles,next:cA},n=n.next;var a=r.styles+";";return a}return function(c,u,d){var f="";if(Array.isArray(d))for(var h=0;h<d.length;h++)f+=w2(c,u,d[h])+";";else for(var m in d){var g=d[m];if(typeof g!="object")u!=null&&u[g]!==void 0?f+=m+"{"+u[g]+"}":RJ(g)&&(f+=xF(m)+":"+LJ(m,g)+";");else if(!Array.isArray(g)||typeof g[0]!="string"||u!=null&&u[g[0]]!==void 0){var x=w2(c,u,g);switch(m){case"animation":case"animationName":f+=xF(m)+":"+x+";";break;default:f+=m+"{"+x+"}"}}else for(var v=0;v<g.length;v++)RJ(g[v])&&(f+=xF(m)+":"+LJ(m,g[v])+";")}return f}(e,t,r);case"function":if(e!==void 0){var s=cA,i=r(e);return cA=s,w2(e,t,i)}break}if(t==null)return r;var o=t[r];return o!==void 0?o:r}var cA,MJ=/label:\s*([^\s;\n{]+)\s*(;|$)/g,PT=function(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,a="";cA=void 0;var s=e[0];s==null||s.raw===void 0?(n=!1,a+=w2(r,t,s)):a+=s[0];for(var i=1;i<e.length;i++)a+=w2(r,t,e[i]),n&&(a+=s[i]);MJ.lastIndex=0;for(var o,c="";(o=MJ.exec(a))!==null;)c+="-"+o[1];var u=function(d){for(var f,h=0,m=0,g=d.length;g>=4;++m,g-=4)f=1540483477*(65535&(f=255&d.charCodeAt(m)|(255&d.charCodeAt(++m))<<8|(255&d.charCodeAt(++m))<<16|(255&d.charCodeAt(++m))<<24))+(59797*(f>>>16)<<16),h=1540483477*(65535&(f^=f>>>24))+(59797*(f>>>16)<<16)^1540483477*(65535&h)+(59797*(h>>>16)<<16);switch(g){case 3:h^=(255&d.charCodeAt(m+2))<<16;case 2:h^=(255&d.charCodeAt(m+1))<<8;case 1:h=1540483477*(65535&(h^=255&d.charCodeAt(m)))+(59797*(h>>>16)<<16)}return(((h=1540483477*(65535&(h^=h>>>13))+(59797*(h>>>16)<<16))^h>>>15)>>>0).toString(36)}(a)+c;return{name:u,styles:a,next:cA}},Iht=typeof document<"u",Fht=function(e){return e()},xhe=!!S.useInsertionEffect&&S.useInsertionEffect,vhe=Iht&&xhe||Fht,UJ=xhe||S.useLayoutEffect,D1=typeof document<"u",$7={}.hasOwnProperty,ek=S.createContext(typeof HTMLElement<"u"?mhe({key:"css"}):null);ek.Provider;var RT=function(e){return S.forwardRef(function(t,r){var n=S.useContext(ek);return e(t,n,r)})};D1||(RT=function(e){return function(t){var r=S.useContext(ek);return r===null?(r=mhe({key:"css"}),S.createElement(ek.Provider,{value:r},e(t,r))):e(t,r)}});var G7=S.createContext({}),$P="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Oht=function(e,t){var r={};for(var n in t)$7.call(t,n)&&(r[n]=t[n]);return r[$P]=e,r},Dht=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;V7(t,r,n);var a=vhe(function(){return z7(t,r,n)});if(!D1&&a!==void 0){for(var s,i=r.name,o=r.next;o!==void 0;)i+=" "+o.name,o=o.next;return S.createElement("style",((s={})["data-emotion"]=t.key+" "+i,s.dangerouslySetInnerHTML={__html:a},s.nonce=t.sheet.nonce,s))}return null},Pht=RT(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var a=e[$P],s=[n],i="";typeof e.className=="string"?i=phe(t.registered,s,e.className):e.className!=null&&(i=e.className+" ");var o=PT(s,void 0,S.useContext(G7));i+=t.key+"-"+o.name;var c={};for(var u in e)!$7.call(e,u)||u==="css"||u===$P||(c[u]=e[u]);return c.ref=r,c.className=i,S.createElement(S.Fragment,null,S.createElement(Dht,{cache:t,serialized:o,isStringTag:typeof a=="string"}),S.createElement(a,c))});ua(function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])}return r},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});var Ir=function(e,t){var r=arguments;if(t==null||!$7.call(t,"css"))return S.createElement.apply(void 0,r);var n=r.length,a=new Array(n);a[0]=Pht,a[1]=Oht(e,t);for(var s=2;s<n;s++)a[s]=r[s];return S.createElement.apply(null,a)};RT(function(e,t){var r=e.styles,n=PT([r],void 0,S.useContext(G7));if(!D1){for(var a,s=n.name,i=n.styles,o=n.next;o!==void 0;)s+=" "+o.name,i+=o.styles,o=o.next;var c=t.compat===!0,u=t.insert("",{name:s,styles:i},t.sheet,c);return c?null:S.createElement("style",((a={})["data-emotion"]=t.key+"-global "+s,a.dangerouslySetInnerHTML={__html:u},a.nonce=t.sheet.nonce,a))}var d=S.useRef();return UJ(function(){var f=t.key+"-global",h=new t.sheet.constructor({key:f,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),m=!1,g=document.querySelector('style[data-emotion="'+f+" "+n.name+'"]');return t.sheet.tags.length&&(h.before=t.sheet.tags[0]),g!==null&&(m=!0,g.setAttribute("data-emotion",f),h.hydrate([g])),d.current=[h,m],function(){h.flush()}},[t]),UJ(function(){var f=d.current,h=f[0];if(f[1])f[1]=!1;else{if(n.next!==void 0&&z7(t,n.next,!0),h.tags.length){var m=h.tags[h.tags.length-1].nextElementSibling;h.before=m,h.flush()}t.insert("",n,h,!1)}},[t,n.name]),null});function K7(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return PT(t)}var Rht=function e(t){for(var r=t.length,n=0,a="";n<r;n++){var s=t[n];if(s!=null){var i=void 0;switch(typeof s){case"boolean":break;case"object":if(Array.isArray(s))i=e(s);else for(var o in i="",s)s[o]&&o&&(i&&(i+=" "),i+=o);break;default:i=s}i&&(a&&(a+=" "),a+=i)}}return a};function Lht(e,t,r){var n=[],a=phe(e,n,r);return n.length<2?r:a+t(n)}var Mht=function(e){var t,r=e.cache,n=e.serializedArr,a=vhe(function(){for(var s="",i=0;i<n.length;i++){var o=z7(r,n[i],!1);D1||o===void 0||(s+=o)}if(!D1)return s});return D1||a.length===0?null:S.createElement("style",((t={})["data-emotion"]=r.key+" "+n.map(function(s){return s.name}).join(" "),t.dangerouslySetInnerHTML={__html:a},t.nonce=r.sheet.nonce,t))};RT(function(e,t){var r=[],n=function(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];var u=PT(o,t.registered);return r.push(u),V7(t,u,!1),t.key+"-"+u.name},a={css:n,cx:function(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return Lht(t.registered,n,Rht(o))},theme:S.useContext(G7)},s=e.children(a);return S.createElement(S.Fragment,null,S.createElement(Mht,{cache:t,serializedArr:r}),s)});function Zi(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,n){var a=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(a!=null){var s,i,o,c,u=[],d=!0,f=!1;try{if(o=(a=a.call(r)).next,n===0){if(Object(a)!==a)return;d=!1}else for(;!(d=(s=o.call(a)).done)&&(u.push(s.value),u.length!==n);d=!0);}catch(h){f=!0,i=h}finally{try{if(!d&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(f)throw i}}return u}}(e,t)||ohe(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function AA(e,t){if(e==null)return{};var r,n,a=function(i,o){if(i==null)return{};var c,u,d={},f=Object.keys(i);for(u=0;u<f.length;u++)c=f[u],o.indexOf(c)>=0||(d[c]=i[c]);return d}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Qh(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function bhe(e){return Qh(e).getComputedStyle(e)}const D5=Math.round;function yhe(e){return Ehe(e)?(e.nodeName||"").toLowerCase():""}let P5;function whe(e){return e instanceof Qh(e).HTMLElement}function YS(e){return e instanceof Qh(e).Element}function Ehe(e){return e instanceof Qh(e).Node}function QJ(e){return typeof ShadowRoot>"u"?!1:e instanceof Qh(e).ShadowRoot||e instanceof ShadowRoot}function Che(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=bhe(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function Uht(){return/^((?!chrome|android).)*safari/i.test(function(){if(P5)return P5;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(P5=e.brands.map(t=>t.brand+"/"+t.version).join(" "),P5):navigator.userAgent}())}function _he(e){return YS(e)?e:e.contextElement}const She={x:1,y:1};function HJ(e){const t=_he(e);if(!whe(t))return She;const r=t.getBoundingClientRect(),{width:n,height:a,fallback:s}=function(c){const u=bhe(c);let d=parseFloat(u.width),f=parseFloat(u.height);const h=c.offsetWidth,m=c.offsetHeight,g=D5(d)!==h||D5(f)!==m;return g&&(d=h,f=m),{width:d,height:f,fallback:g}}(t);let i=(s?D5(r.width):r.width)/n,o=(s?D5(r.height):r.height)/a;return i&&Number.isFinite(i)||(i=1),o&&Number.isFinite(o)||(o=1),{x:i,y:o}}function VJ(e,t,r,n){var a,s;t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),o=_he(e);let c=She;t&&(c=HJ(e));const u=o?Qh(o):window,d=Uht()&&r;let f=(i.left+(d&&((a=u.visualViewport)==null?void 0:a.offsetLeft)||0))/c.x,h=(i.top+(d&&((s=u.visualViewport)==null?void 0:s.offsetTop)||0))/c.y,m=i.width/c.x,g=i.height/c.y;if(o){const x=Qh(o),v=n;let y=x.frameElement;for(;y&&n&&v!==x;){const w=HJ(y),_=y.getBoundingClientRect(),T=getComputedStyle(y);_.x+=(y.clientLeft+parseFloat(T.paddingLeft))*w.x,_.y+=(y.clientTop+parseFloat(T.paddingTop))*w.y,f*=w.x,h*=w.y,m*=w.x,g*=w.y,f+=_.x,h+=_.y,y=Qh(y).frameElement}}return{width:m,height:g,top:h,right:f+m,bottom:h+g,left:f,x:f,y:h}}function Qht(e){if(yhe(e)==="html")return e;const t=e.assignedSlot||e.parentNode||QJ(e)&&e.host||function(r){return((Ehe(r)?r.ownerDocument:r.document)||window.document).documentElement}(e);return QJ(t)?t.host:t}function Nhe(e){const t=Qht(e);return function(r){return["html","body","#document"].includes(yhe(r))}(t)?t.ownerDocument.body:whe(t)&&Che(t)?t:Nhe(t)}function JS(e,t){var r;t===void 0&&(t=[]);const n=Nhe(e),a=n===((r=e.ownerDocument)==null?void 0:r.body),s=Qh(n);return a?t.concat(s,s.visualViewport||[],Che(n)?n:[]):t.concat(n,JS(n))}var GP=typeof document<"u"?S.useLayoutEffect:S.useEffect,Hht=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],tk=function(){};function Vht(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function zht(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];var s=[].concat(n);if(t&&e)for(var i in t)t.hasOwnProperty(i)&&t[i]&&s.push("".concat(Vht(e,i)));return s.filter(function(o){return o}).map(function(o){return String(o).trim()}).join(" ")}var zJ=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):Qg(e)==="object"&&e!==null?[e]:[];var t},$J=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,Cr({},AA(e,Hht))},Is=function(e,t,r){var n=e.cx,a=e.getStyles,s=e.getClassNames,i=e.className;return{css:a(t,e),className:n(r??{},s(t,e),i)}};function LT(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function khe(e){return LT(e)?window.pageYOffset:e.scrollTop}function rk(e,t){LT(e)?window.scrollTo(0,t):e.scrollTop=t}function $ht(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t}function R5(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:tk,a=khe(e),s=t-a,i=10,o=0;function c(){var u=$ht(o+=i,a,s,r);rk(e,u),o<r?window.requestAnimationFrame(c):n(e)}c()}function GJ(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),a=t.offsetHeight/3;n.bottom+a>r.bottom?rk(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+a,e.scrollHeight)):n.top-a<r.top&&rk(e,Math.max(t.offsetTop-a,0))}function KJ(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}var Bhe=!1,Ght={get passive(){return Bhe=!0}},L5=typeof window<"u"?window:{};L5.addEventListener&&L5.removeEventListener&&(L5.addEventListener("p",tk,Ght),L5.removeEventListener("p",tk,!1));var Kht=Bhe;function qht(e){return e!=null}function M5(e,t,r){return e?t:r}var Wht=["children","innerProps"],Xht=["children","innerProps"];function Yht(e){var t=e.maxHeight,r=e.menuEl,n=e.minHeight,a=e.placement,s=e.shouldScroll,i=e.isFixedPosition,o=e.controlHeight,c=function(W){var V=getComputedStyle(W),G=V.position==="absolute",z=/(auto|scroll)/;if(V.position==="fixed")return document.documentElement;for(var K=W;K=K.parentElement;)if(V=getComputedStyle(K),(!G||V.position!=="static")&&z.test(V.overflow+V.overflowY+V.overflowX))return K;return document.documentElement}(r),u={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return u;var d,f=c.getBoundingClientRect().height,h=r.getBoundingClientRect(),m=h.bottom,g=h.height,x=h.top,v=r.offsetParent.getBoundingClientRect().top,y=i||LT(d=c)?window.innerHeight:d.clientHeight,w=khe(c),_=parseInt(getComputedStyle(r).marginBottom,10),T=parseInt(getComputedStyle(r).marginTop,10),B=v-T,j=y-x,E=B+w,N=f-w-x,I=m-y+w+_,L=w+x-T,D=160;switch(a){case"auto":case"bottom":if(j>=g)return{placement:"bottom",maxHeight:t};if(N>=g&&!i)return s&&R5(c,I,D),{placement:"bottom",maxHeight:t};if(!i&&N>=n||i&&j>=n)return s&&R5(c,I,D),{placement:"bottom",maxHeight:i?j-_:N-_};if(a==="auto"||i){var k=t,P=i?B:E;return P>=n&&(k=Math.min(P-_-o,t)),{placement:"top",maxHeight:k}}if(a==="bottom")return s&&rk(c,I),{placement:"bottom",maxHeight:t};break;case"top":if(B>=g)return{placement:"top",maxHeight:t};if(E>=g&&!i)return s&&R5(c,L,D),{placement:"top",maxHeight:t};if(!i&&E>=n||i&&B>=n){var R=t;return(!i&&E>=n||i&&B>=n)&&(R=i?B-T:E-T),s&&R5(c,L,D),{placement:"top",maxHeight:R}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(a,'".'))}return u}var qJ,The=function(e){return e==="auto"?"bottom":e},jhe=S.createContext(null),Jht=function(e){var t=e.children,r=e.minMenuHeight,n=e.maxMenuHeight,a=e.menuPlacement,s=e.menuPosition,i=e.menuShouldScrollIntoView,o=e.theme,c=(S.useContext(jhe)||{}).setPortalPlacement,u=S.useRef(null),d=Zi(S.useState(n),2),f=d[0],h=d[1],m=Zi(S.useState(null),2),g=m[0],x=m[1],v=o.spacing.controlHeight;return GP(function(){var y=u.current;if(y){var w=s==="fixed",_=Yht({maxHeight:n,menuEl:y,minHeight:r,placement:a,shouldScroll:i&&!w,isFixedPosition:w,controlHeight:v});h(_.maxHeight),x(_.placement),c==null||c(_.placement)}},[n,a,s,i,r,c,v]),t({ref:u,placerProps:Cr(Cr({},e),{},{placement:g||The(a),maxHeight:f})})},Zht=function(e){var t=e.children,r=e.innerRef,n=e.innerProps;return Ir("div",Mr({},Is(e,"menu",{menu:!0}),{ref:r},n),t)},Ihe=function(e,t){var r=e.theme,n=r.spacing.baseUnit,a=r.colors;return Cr({textAlign:"center"},t?{}:{color:a.neutral40,padding:"".concat(2*n,"px ").concat(3*n,"px")})},e0t=Ihe,t0t=Ihe,r0t=["size"],n0t=["innerProps","isRtl","size"],vF,bF,a0t={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},Fhe=function(e){var t=e.size,r=AA(e,r0t);return Ir("svg",Mr({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:a0t},r))},yF=function(e){return Ir(Fhe,Mr({size:20},e),Ir("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},WJ=function(e){return Ir(Fhe,Mr({size:20},e),Ir("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},Ohe=function(e,t){var r=e.isFocused,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return Cr({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*a,":hover":{color:r?s.neutral80:s.neutral40}})},s0t=Ohe,i0t=Ohe,o0t=function(){var e=K7.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(qJ||(vF=[`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`],bF||(bF=vF.slice(0)),qJ=Object.freeze(Object.defineProperties(vF,{raw:{value:Object.freeze(bF)}})))),wF=function(e){var t=e.delay,r=e.offset;return Ir("span",{css:K7({animation:"".concat(o0t," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},l0t=function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.innerRef,s=e.innerProps,i=e.menuIsOpen;return Ir("div",Mr({ref:a},Is(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":n,"control--menu-is-open":i}),s,{"aria-disabled":r||void 0}),t)},c0t=["data"],u0t=function(e){var t=e.children,r=e.cx,n=e.getStyles,a=e.getClassNames,s=e.Heading,i=e.headingProps,o=e.innerProps,c=e.label,u=e.theme,d=e.selectProps;return Ir("div",Mr({},Is(e,"group",{group:!0}),o),Ir(s,Mr({},i,{selectProps:d,theme:u,getStyles:n,getClassNames:a,cx:r}),c),Ir("div",null,t))},d0t=["innerRef","isDisabled","isHidden","inputClassName"],Dhe={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},f0t={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Cr({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},Dhe)},A0t=function(e){return Cr({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},Dhe)},XJ=function(e){var t=e.children,r=e.innerProps;return Ir("div",r,t)},h0t=function(e){var t=e.children,r=e.components,n=e.data,a=e.innerProps,s=e.isDisabled,i=e.removeProps,o=e.selectProps,c=r.Container,u=r.Label,d=r.Remove;return Ir(c,{data:n,innerProps:Cr(Cr({},Is(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),a),selectProps:o},Ir(u,{data:n,innerProps:Cr({},Is(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:o},t),Ir(d,{data:n,innerProps:Cr(Cr({},Is(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},i),selectProps:o}))},m0t={ClearIndicator:function(e){var t=e.children,r=e.innerProps;return Ir("div",Mr({},Is(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||Ir(yF,null))},Control:l0t,DropdownIndicator:function(e){var t=e.children,r=e.innerProps;return Ir("div",Mr({},Is(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||Ir(WJ,null))},DownChevron:WJ,CrossIcon:yF,Group:u0t,GroupHeading:function(e){var t=$J(e);t.data;var r=AA(t,c0t);return Ir("div",Mr({},Is(e,"groupHeading",{"group-heading":!0}),r))},IndicatorsContainer:function(e){var t=e.children,r=e.innerProps;return Ir("div",Mr({},Is(e,"indicatorsContainer",{indicators:!0}),r),t)},IndicatorSeparator:function(e){var t=e.innerProps;return Ir("span",Mr({},t,Is(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(e){var t=e.cx,r=e.value,n=$J(e),a=n.innerRef,s=n.isDisabled,i=n.isHidden,o=n.inputClassName,c=AA(n,d0t);return Ir("div",Mr({},Is(e,"input",{"input-container":!0}),{"data-value":r||""}),Ir("input",Mr({className:t({input:!0},o),ref:a,style:A0t(i),disabled:s},c)))},LoadingIndicator:function(e){var t=e.innerProps,r=e.isRtl,n=e.size,a=n===void 0?4:n,s=AA(e,n0t);return Ir("div",Mr({},Is(Cr(Cr({},s),{},{innerProps:t,isRtl:r,size:a}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),Ir(wF,{delay:0,offset:r}),Ir(wF,{delay:160,offset:!0}),Ir(wF,{delay:320,offset:!r}))},Menu:Zht,MenuList:function(e){var t=e.children,r=e.innerProps,n=e.innerRef,a=e.isMulti;return Ir("div",Mr({},Is(e,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:n},r),t)},MenuPortal:function(e){var t=e.appendTo,r=e.children,n=e.controlElement,a=e.innerProps,s=e.menuPlacement,i=e.menuPosition,o=S.useRef(null),c=S.useRef(null),u=Zi(S.useState(The(s)),2),d=u[0],f=u[1],h=S.useMemo(function(){return{setPortalPlacement:f}},[]),m=Zi(S.useState(null),2),g=m[0],x=m[1],v=S.useCallback(function(){if(n){var T=function(E){var N=E.getBoundingClientRect();return{bottom:N.bottom,height:N.height,left:N.left,right:N.right,top:N.top,width:N.width}}(n),B=i==="fixed"?0:window.pageYOffset,j=T[d]+B;j===(g==null?void 0:g.offset)&&T.left===(g==null?void 0:g.rect.left)&&T.width===(g==null?void 0:g.rect.width)||x({offset:j,rect:T})}},[n,i,d,g==null?void 0:g.offset,g==null?void 0:g.rect.left,g==null?void 0:g.rect.width]);GP(function(){v()},[v]);var y=S.useCallback(function(){typeof c.current=="function"&&(c.current(),c.current=null),n&&o.current&&(c.current=function(T,B,j,E){E===void 0&&(E={});const{ancestorScroll:N=!0,ancestorResize:I=!0,elementResize:L=!0,animationFrame:D=!1}=E,k=N&&!D,P=k||I?[...YS(T)?JS(T):T.contextElement?JS(T.contextElement):[],...JS(B)]:[];P.forEach(G=>{k&&G.addEventListener("scroll",j,{passive:!0}),I&&G.addEventListener("resize",j)});let R,W=null;if(L){let G=!0;W=new ResizeObserver(()=>{G||j(),G=!1}),YS(T)&&!D&&W.observe(T),YS(T)||!T.contextElement||D||W.observe(T.contextElement),W.observe(B)}let V=D?VJ(T):null;return D&&function G(){const z=VJ(T);!V||z.x===V.x&&z.y===V.y&&z.width===V.width&&z.height===V.height||j(),V=z,R=requestAnimationFrame(G)}(),j(),()=>{var G;P.forEach(z=>{k&&z.removeEventListener("scroll",j),I&&z.removeEventListener("resize",j)}),(G=W)==null||G.disconnect(),W=null,D&&cancelAnimationFrame(R)}}(n,o.current,v,{elementResize:"ResizeObserver"in window}))},[n,v]);GP(function(){y()},[y]);var w=S.useCallback(function(T){o.current=T,y()},[y]);if(!t&&i!=="fixed"||!g)return null;var _=Ir("div",Mr({ref:w},Is(Cr(Cr({},e),{},{offset:g.offset,position:i,rect:g.rect}),"menuPortal",{"menu-portal":!0}),a),r);return Ir(jhe.Provider,{value:h},t?r8.createPortal(_,t):_)},LoadingMessage:function(e){var t=e.children,r=t===void 0?"Loading...":t,n=e.innerProps,a=AA(e,Xht);return Ir("div",Mr({},Is(Cr(Cr({},a),{},{children:r,innerProps:n}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),n),r)},NoOptionsMessage:function(e){var t=e.children,r=t===void 0?"No options":t,n=e.innerProps,a=AA(e,Wht);return Ir("div",Mr({},Is(Cr(Cr({},a),{},{children:r,innerProps:n}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),n),r)},MultiValue:h0t,MultiValueContainer:XJ,MultiValueLabel:XJ,MultiValueRemove:function(e){var t=e.children,r=e.innerProps;return Ir("div",Mr({role:"button"},r),t||Ir(yF,{size:14}))},Option:function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.innerRef,i=e.innerProps;return Ir("div",Mr({},Is(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":n,"option--is-selected":a}),{ref:s,"aria-disabled":r},i),t)},Placeholder:function(e){var t=e.children,r=e.innerProps;return Ir("div",Mr({},Is(e,"placeholder",{placeholder:!0}),r),t)},SelectContainer:function(e){var t=e.children,r=e.innerProps,n=e.isDisabled,a=e.isRtl;return Ir("div",Mr({},Is(e,"container",{"--is-disabled":n,"--is-rtl":a}),r),t)},SingleValue:function(e){var t=e.children,r=e.isDisabled,n=e.innerProps;return Ir("div",Mr({},Is(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),n),t)},ValueContainer:function(e){var t=e.children,r=e.innerProps,n=e.isMulti,a=e.hasValue;return Ir("div",Mr({},Is(e,"valueContainer",{"value-container":!0,"value-container--is-multi":n,"value-container--has-value":a}),r),t)}},YJ=Number.isNaN||function(e){return typeof e=="number"&&e!=e};function p0t(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(n=e[r],a=t[r],!(n===a||YJ(n)&&YJ(a)))return!1;var n,a;return!0}for(var g0t={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},JJ=function(e){return Ir("span",Mr({css:g0t},e))},x0t={guidance:function(e){var t=e.isSearchable,r=e.isMulti,n=e.tabSelectsValue,a=e.context,s=e.isInitialFocus;switch(a){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(n?", press Tab to select the option and exit the menu":"",".");case"input":return s?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,n=r===void 0?"":r,a=e.labels,s=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(n,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(a.length>1?"s":""," ").concat(a.join(","),", selected.");case"select-option":return"option ".concat(n,s?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,n=e.options,a=e.label,s=a===void 0?"":a,i=e.selectValue,o=e.isDisabled,c=e.isSelected,u=e.isAppleDevice,d=function(m,g){return m&&m.length?"".concat(m.indexOf(g)+1," of ").concat(m.length):""};if(t==="value"&&i)return"value ".concat(s," focused, ").concat(d(i,r),".");if(t==="menu"&&u){var f=o?" disabled":"",h="".concat(c?" selected":"").concat(f);return"".concat(s).concat(h,", ").concat(d(n,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},v0t=function(e){var t=e.ariaSelection,r=e.focusedOption,n=e.focusedValue,a=e.focusableOptions,s=e.isFocused,i=e.selectValue,o=e.selectProps,c=e.id,u=e.isAppleDevice,d=o.ariaLiveMessages,f=o.getOptionLabel,h=o.inputValue,m=o.isMulti,g=o.isOptionDisabled,x=o.isSearchable,v=o.menuIsOpen,y=o.options,w=o.screenReaderStatus,_=o.tabSelectsValue,T=o.isLoading,B=o["aria-label"],j=o["aria-live"],E=S.useMemo(function(){return Cr(Cr({},x0t),d||{})},[d]),N=S.useMemo(function(){var R,W="";if(t&&E.onChange){var V=t.option,G=t.options,z=t.removedValue,K=t.removedValues,J=t.value,te=z||V||(R=J,Array.isArray(R)?null:R),M=te?f(te):"",H=G||K||void 0,Y=H?H.map(f):[],Z=Cr({isDisabled:te&&g(te,i),label:M,labels:Y},t);W=E.onChange(Z)}return W},[t,E,g,i,f]),I=S.useMemo(function(){var R="",W=r||n,V=!!(r&&i&&i.includes(r));if(W&&E.onFocus){var G={focused:W,label:f(W),isDisabled:g(W,i),isSelected:V,options:a,context:W===r?"menu":"value",selectValue:i,isAppleDevice:u};R=E.onFocus(G)}return R},[r,n,f,g,E,a,i,u]),L=S.useMemo(function(){var R="";if(v&&y.length&&!T&&E.onFilter){var W=w({count:a.length});R=E.onFilter({inputValue:h,resultsMessage:W})}return R},[a,h,v,E,y,w,T]),D=(t==null?void 0:t.action)==="initial-input-focus",k=S.useMemo(function(){var R="";if(E.guidance){var W=n?"value":v?"menu":"input";R=E.guidance({"aria-label":B,context:W,isDisabled:r&&g(r,i),isMulti:m,isSearchable:x,tabSelectsValue:_,isInitialFocus:D})}return R},[B,r,n,m,g,x,v,E,i,_,D]),P=Ir(S.Fragment,null,Ir("span",{id:"aria-selection"},N),Ir("span",{id:"aria-focused"},I),Ir("span",{id:"aria-results"},L),Ir("span",{id:"aria-guidance"},k));return Ir(S.Fragment,null,Ir(JJ,{id:c},D&&P),Ir(JJ,{"aria-live":j,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},s&&!D&&P))},EF=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],b0t=new RegExp("["+EF.map(function(e){return e.letters}).join("")+"]","g"),Phe={},CF=0;CF<EF.length;CF++)for(var _F=EF[CF],SF=0;SF<_F.letters.length;SF++)Phe[_F.letters[SF]]=_F.base;var Rhe=function(e){return e.replace(b0t,function(t){return Phe[t]})},y0t=function(e,t){t===void 0&&(t=p0t);var r=null;function n(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;var i=e.apply(this,a);return r={lastResult:i,lastArgs:a,lastThis:this},i}return n.clear=function(){r=null},n}(Rhe),ZJ=function(e){return e.replace(/^\s+|\s+$/g,"")},w0t=function(e){return"".concat(e.label," ").concat(e.value)},E0t=["innerRef"];function C0t(e){var t=e.innerRef,r=function(n){for(var a=arguments.length,s=new Array(a>1?a-1:0),i=1;i<a;i++)s[i-1]=arguments[i];var o=Object.entries(n).filter(function(c){var u=Zi(c,1)[0];return!s.includes(u)});return o.reduce(function(c,u){var d=Zi(u,2),f=d[0],h=d[1];return c[f]=h,c},{})}(AA(e,E0t),"onExited","in","enter","exit","appear");return Ir("input",Mr({ref:t},r,{css:K7({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var eZ=["boxSizing","height","overflow","paddingRight","position"],tZ={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function rZ(e){e.preventDefault()}function nZ(e){e.stopPropagation()}function aZ(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function sZ(){return"ontouchstart"in window||navigator.maxTouchPoints}var iZ=!(typeof window>"u"||!window.document||!window.document.createElement),xw=0,Dv={capture:!1,passive:!1},_0t=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},S0t={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function N0t(e){var t=e.children,r=e.lockEnabled,n=e.captureEnabled,a=function(i){var o=i.isEnabled,c=i.onBottomArrive,u=i.onBottomLeave,d=i.onTopArrive,f=i.onTopLeave,h=S.useRef(!1),m=S.useRef(!1),g=S.useRef(0),x=S.useRef(null),v=S.useCallback(function(j,E){if(x.current!==null){var N=x.current,I=N.scrollTop,L=N.scrollHeight,D=N.clientHeight,k=x.current,P=E>0,R=L-D-I,W=!1;R>E&&h.current&&(u&&u(j),h.current=!1),P&&m.current&&(f&&f(j),m.current=!1),P&&E>R?(c&&!h.current&&c(j),k.scrollTop=L,W=!0,h.current=!0):!P&&-E>I&&(d&&!m.current&&d(j),k.scrollTop=0,W=!0,m.current=!0),W&&function(V){V.cancelable&&V.preventDefault(),V.stopPropagation()}(j)}},[c,u,d,f]),y=S.useCallback(function(j){v(j,j.deltaY)},[v]),w=S.useCallback(function(j){g.current=j.changedTouches[0].clientY},[]),_=S.useCallback(function(j){var E=g.current-j.changedTouches[0].clientY;v(j,E)},[v]),T=S.useCallback(function(j){if(j){var E=!!Kht&&{passive:!1};j.addEventListener("wheel",y,E),j.addEventListener("touchstart",w,E),j.addEventListener("touchmove",_,E)}},[_,w,y]),B=S.useCallback(function(j){j&&(j.removeEventListener("wheel",y,!1),j.removeEventListener("touchstart",w,!1),j.removeEventListener("touchmove",_,!1))},[_,w,y]);return S.useEffect(function(){if(o){var j=x.current;return T(j),function(){B(j)}}},[o,T,B]),function(j){x.current=j}}({isEnabled:n===void 0||n,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),s=function(i){var o=i.isEnabled,c=i.accountForScrollbars,u=c===void 0||c,d=S.useRef({}),f=S.useRef(null),h=S.useCallback(function(g){if(iZ){var x=document.body,v=x&&x.style;if(u&&eZ.forEach(function(T){var B=v&&v[T];d.current[T]=B}),u&&xw<1){var y=parseInt(d.current.paddingRight,10)||0,w=document.body?document.body.clientWidth:0,_=window.innerWidth-w+y||0;Object.keys(tZ).forEach(function(T){var B=tZ[T];v&&(v[T]=B)}),v&&(v.paddingRight="".concat(_,"px"))}x&&sZ()&&(x.addEventListener("touchmove",rZ,Dv),g&&(g.addEventListener("touchstart",aZ,Dv),g.addEventListener("touchmove",nZ,Dv))),xw+=1}},[u]),m=S.useCallback(function(g){if(iZ){var x=document.body,v=x&&x.style;xw=Math.max(xw-1,0),u&&xw<1&&eZ.forEach(function(y){var w=d.current[y];v&&(v[y]=w)}),x&&sZ()&&(x.removeEventListener("touchmove",rZ,Dv),g&&(g.removeEventListener("touchstart",aZ,Dv),g.removeEventListener("touchmove",nZ,Dv)))}},[u]);return S.useEffect(function(){if(o){var g=f.current;return h(g),function(){m(g)}}},[o,h,m]),function(g){f.current=g}}({isEnabled:r});return Ir(S.Fragment,null,r&&Ir("div",{onClick:_0t,css:S0t}),t(function(i){a(i),s(i)}))}var k0t={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},B0t=function(e){var t=e.name,r=e.onFocus;return Ir("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:k0t,value:"",onChange:function(){}})};function KP(e){var t;return typeof window<"u"&&window.navigator!=null&&e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform)}function Lhe(){return KP(/^Mac/i)}function T0t(){return KP(/^iPhone/i)||KP(/^iPad/i)||Lhe()&&navigator.maxTouchPoints>1}var j0t,I0t={clearIndicator:i0t,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.theme,s=a.colors,i=a.borderRadius;return Cr({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?s.neutral5:s.neutral0,borderColor:r?s.neutral10:n?s.primary:s.neutral20,borderRadius:i,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:n?s.primary:s.neutral30}})},dropdownIndicator:s0t,group:function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:2*r.baseUnit,paddingTop:2*r.baseUnit}},groupHeading:function(e,t){var r=e.theme,n=r.colors,a=r.spacing;return Cr({label:"group",cursor:"default",display:"block"},t?{}:{color:n.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*a.baseUnit,paddingRight:3*a.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return Cr({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?s.neutral10:s.neutral20,marginBottom:2*a,marginTop:2*a})},input:function(e,t){var r=e.isDisabled,n=e.value,a=e.theme,s=a.spacing,i=a.colors;return Cr(Cr({visibility:r?"hidden":"visible",transform:n?"translateZ(0)":""},f0t),t?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:i.neutral80})},loadingIndicator:function(e,t){var r=e.isFocused,n=e.size,a=e.theme,s=a.colors,i=a.spacing.baseUnit;return Cr({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*i})},loadingMessage:t0t,menu:function(e,t){var r,n=e.placement,a=e.theme,s=a.borderRadius,i=a.spacing,o=a.colors;return Cr((c1(r={label:"menu"},function(c){return c?{bottom:"top",top:"bottom"}[c]:"bottom"}(n),"100%"),c1(r,"position","absolute"),c1(r,"width","100%"),c1(r,"zIndex",1),r),t?{}:{backgroundColor:o.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:i.menuGutter,marginTop:i.menuGutter})},menuList:function(e,t){var r=e.maxHeight,n=e.theme.spacing.baseUnit;return Cr({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:n,paddingTop:n})},menuPortal:function(e){var t=e.rect,r=e.offset,n=e.position;return{left:t.left,position:n,top:r,width:t.width,zIndex:1}},multiValue:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors;return Cr({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:s.neutral10,borderRadius:a/2,margin:n.baseUnit/2})},multiValueLabel:function(e,t){var r=e.theme,n=r.borderRadius,a=r.colors,s=e.cropWithEllipsis;return Cr({overflow:"hidden",textOverflow:s||s===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:n/2,color:a.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors,i=e.isFocused;return Cr({alignItems:"center",display:"flex"},t?{}:{borderRadius:a/2,backgroundColor:i?s.dangerLight:void 0,paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},noOptionsMessage:e0t,option:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.theme,i=s.spacing,o=s.colors;return Cr({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:a?o.primary:n?o.primary25:"transparent",color:r?o.neutral20:a?o.neutral0:"inherit",padding:"".concat(2*i.baseUnit,"px ").concat(3*i.baseUnit,"px"),":active":{backgroundColor:r?void 0:a?o.primary:o.primary50}})},placeholder:function(e,t){var r=e.theme,n=r.spacing,a=r.colors;return Cr({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:a.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2})},singleValue:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing,s=n.colors;return Cr({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?s.neutral40:s.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},valueContainer:function(e,t){var r=e.theme.spacing,n=e.isMulti,a=e.hasValue,s=e.selectProps.controlShouldRenderValue;return Cr({alignItems:"center",display:n&&a&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(2*r.baseUnit,"px")})}},NF={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},F0t={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:KJ(),captureMenuScroll:!KJ(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){if(e.data.__isNew__)return!0;var r=Cr({ignoreCase:!0,ignoreAccents:!0,stringify:w0t,trim:!0,matchFrom:"any"},j0t),n=r.ignoreCase,a=r.ignoreAccents,s=r.stringify,i=r.trim,o=r.matchFrom,c=i?ZJ(t):t,u=i?ZJ(s(e)):s(e);return n&&(c=c.toLowerCase(),u=u.toLowerCase()),a&&(c=y0t(c),u=Rhe(u)),o==="start"?u.substr(0,c.length)===c:u.indexOf(c)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function oZ(e,t,r,n){return{type:"option",data:t,isDisabled:Uhe(e,t,r),isSelected:Qhe(e,t,r),label:Mhe(e,t),value:nk(e,t),index:n}}function U5(e,t){return e.options.map(function(r,n){if("options"in r){var a=r.options.map(function(i,o){return oZ(e,i,t,o)}).filter(function(i){return uZ(e,i)});return a.length>0?{type:"group",data:r,options:a,index:n}:void 0}var s=oZ(e,r,t,n);return uZ(e,s)?s:void 0}).filter(qht)}function lZ(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,U7(r.options.map(function(n){return n.data}))):t.push(r.data),t},[])}function cZ(e,t){return e.reduce(function(r,n){return n.type==="group"?r.push.apply(r,U7(n.options.map(function(a){return{data:a.data,id:"".concat(t,"-").concat(n.index,"-").concat(a.index)}}))):r.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),r},[])}function uZ(e,t){var r=e.inputValue,n=r===void 0?"":r,a=t.data,s=t.isSelected,i=t.label,o=t.value;return(!Vhe(e)||!s)&&Hhe(e,{label:i,value:o,data:a},n)}var kF=function(e,t){var r;return((r=e.find(function(n){return n.data===t}))===null||r===void 0?void 0:r.id)||null},Mhe=function(e,t){return e.getOptionLabel(t)},nk=function(e,t){return e.getOptionValue(t)};function Uhe(e,t,r){return typeof e.isOptionDisabled=="function"&&e.isOptionDisabled(t,r)}function Qhe(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var n=nk(e,t);return r.some(function(a){return nk(e,a)===n})}function Hhe(e,t,r){return!e.filterOption||e.filterOption(t,r)}var Vhe=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},O0t=1,zhe=function(e){(function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),o&&RP(i,o)})(s,S.Component);var t,r,n,a=oht(s);function s(i){var o;if(function(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}(this,s),(o=a.call(this,i)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},o.blockOptionHover=!1,o.isComposing=!1,o.commonProps=void 0,o.initialTouchX=0,o.initialTouchY=0,o.openAfterFocus=!1,o.scrollToFocusedOptionOnUpdate=!1,o.userIsDragging=void 0,o.isAppleDevice=Lhe()||T0t(),o.controlRef=null,o.getControlRef=function(f){o.controlRef=f},o.focusedOptionRef=null,o.getFocusedOptionRef=function(f){o.focusedOptionRef=f},o.menuListRef=null,o.getMenuListRef=function(f){o.menuListRef=f},o.inputRef=null,o.getInputRef=function(f){o.inputRef=f},o.focus=o.focusInput,o.blur=o.blurInput,o.onChange=function(f,h){var m=o.props,g=m.onChange,x=m.name;h.name=x,o.ariaOnChange(f,h),g(f,h)},o.setValue=function(f,h,m){var g=o.props,x=g.closeMenuOnSelect,v=g.isMulti,y=g.inputValue;o.onInputChange("",{action:"set-value",prevInputValue:y}),x&&(o.setState({inputIsHiddenAfterUpdate:!v}),o.onMenuClose()),o.setState({clearFocusValueOnUpdate:!0}),o.onChange(f,{action:h,option:m})},o.selectOption=function(f){var h=o.props,m=h.blurInputOnSelect,g=h.isMulti,x=h.name,v=o.state.selectValue,y=g&&o.isOptionSelected(f,v),w=o.isOptionDisabled(f,v);if(y){var _=o.getOptionValue(f);o.setValue(v.filter(function(T){return o.getOptionValue(T)!==_}),"deselect-option",f)}else{if(w)return void o.ariaOnChange(f,{action:"select-option",option:f,name:x});g?o.setValue([].concat(U7(v),[f]),"select-option",f):o.setValue(f,"select-option")}m&&o.blurInput()},o.removeValue=function(f){var h=o.props.isMulti,m=o.state.selectValue,g=o.getOptionValue(f),x=m.filter(function(y){return o.getOptionValue(y)!==g}),v=M5(h,x,x[0]||null);o.onChange(v,{action:"remove-value",removedValue:f}),o.focusInput()},o.clearValue=function(){var f=o.state.selectValue;o.onChange(M5(o.props.isMulti,[],null),{action:"clear",removedValues:f})},o.popValue=function(){var f=o.props.isMulti,h=o.state.selectValue,m=h[h.length-1],g=h.slice(0,h.length-1),x=M5(f,g,g[0]||null);o.onChange(x,{action:"pop-value",removedValue:m})},o.getFocusedOptionId=function(f){return kF(o.state.focusableOptionsWithIds,f)},o.getFocusableOptionsWithIds=function(){return cZ(U5(o.props,o.state.selectValue),o.getElementId("option"))},o.getValue=function(){return o.state.selectValue},o.cx=function(){for(var f=arguments.length,h=new Array(f),m=0;m<f;m++)h[m]=arguments[m];return zht.apply(void 0,[o.props.classNamePrefix].concat(h))},o.getOptionLabel=function(f){return Mhe(o.props,f)},o.getOptionValue=function(f){return nk(o.props,f)},o.getStyles=function(f,h){var m=o.props.unstyled,g=I0t[f](h,m);g.boxSizing="border-box";var x=o.props.styles[f];return x?x(g,h):g},o.getClassNames=function(f,h){var m,g;return(m=(g=o.props.classNames)[f])===null||m===void 0?void 0:m.call(g,h)},o.getElementId=function(f){return"".concat(o.state.instancePrefix,"-").concat(f)},o.getComponents=function(){return f=o.props,Cr(Cr({},m0t),f.components);var f},o.buildCategorizedOptions=function(){return U5(o.props,o.state.selectValue)},o.getCategorizedOptions=function(){return o.props.menuIsOpen?o.buildCategorizedOptions():[]},o.buildFocusableOptions=function(){return lZ(o.buildCategorizedOptions())},o.getFocusableOptions=function(){return o.props.menuIsOpen?o.buildFocusableOptions():[]},o.ariaOnChange=function(f,h){o.setState({ariaSelection:Cr({value:f},h)})},o.onMenuMouseDown=function(f){f.button===0&&(f.stopPropagation(),f.preventDefault(),o.focusInput())},o.onMenuMouseMove=function(f){o.blockOptionHover=!1},o.onControlMouseDown=function(f){if(!f.defaultPrevented){var h=o.props.openMenuOnClick;o.state.isFocused?o.props.menuIsOpen?f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&o.onMenuClose():h&&o.openMenu("first"):(h&&(o.openAfterFocus=!0),o.focusInput()),f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&f.preventDefault()}},o.onDropdownIndicatorMouseDown=function(f){if(!(f&&f.type==="mousedown"&&f.button!==0||o.props.isDisabled)){var h=o.props,m=h.isMulti,g=h.menuIsOpen;o.focusInput(),g?(o.setState({inputIsHiddenAfterUpdate:!m}),o.onMenuClose()):o.openMenu("first"),f.preventDefault()}},o.onClearIndicatorMouseDown=function(f){f&&f.type==="mousedown"&&f.button!==0||(o.clearValue(),f.preventDefault(),o.openAfterFocus=!1,f.type==="touchend"?o.focusInput():setTimeout(function(){return o.focusInput()}))},o.onScroll=function(f){typeof o.props.closeMenuOnScroll=="boolean"?f.target instanceof HTMLElement&&LT(f.target)&&o.props.onMenuClose():typeof o.props.closeMenuOnScroll=="function"&&o.props.closeMenuOnScroll(f)&&o.props.onMenuClose()},o.onCompositionStart=function(){o.isComposing=!0},o.onCompositionEnd=function(){o.isComposing=!1},o.onTouchStart=function(f){var h=f.touches,m=h&&h.item(0);m&&(o.initialTouchX=m.clientX,o.initialTouchY=m.clientY,o.userIsDragging=!1)},o.onTouchMove=function(f){var h=f.touches,m=h&&h.item(0);if(m){var g=Math.abs(m.clientX-o.initialTouchX),x=Math.abs(m.clientY-o.initialTouchY);o.userIsDragging=g>5||x>5}},o.onTouchEnd=function(f){o.userIsDragging||(o.controlRef&&!o.controlRef.contains(f.target)&&o.menuListRef&&!o.menuListRef.contains(f.target)&&o.blurInput(),o.initialTouchX=0,o.initialTouchY=0)},o.onControlTouchEnd=function(f){o.userIsDragging||o.onControlMouseDown(f)},o.onClearIndicatorTouchEnd=function(f){o.userIsDragging||o.onClearIndicatorMouseDown(f)},o.onDropdownIndicatorTouchEnd=function(f){o.userIsDragging||o.onDropdownIndicatorMouseDown(f)},o.handleInputChange=function(f){var h=o.props.inputValue,m=f.currentTarget.value;o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange(m,{action:"input-change",prevInputValue:h}),o.props.menuIsOpen||o.onMenuOpen()},o.onInputFocus=function(f){o.props.onFocus&&o.props.onFocus(f),o.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(o.openAfterFocus||o.props.openMenuOnFocus)&&o.openMenu("first"),o.openAfterFocus=!1},o.onInputBlur=function(f){var h=o.props.inputValue;o.menuListRef&&o.menuListRef.contains(document.activeElement)?o.inputRef.focus():(o.props.onBlur&&o.props.onBlur(f),o.onInputChange("",{action:"input-blur",prevInputValue:h}),o.onMenuClose(),o.setState({focusedValue:null,isFocused:!1}))},o.onOptionHover=function(f){if(!o.blockOptionHover&&o.state.focusedOption!==f){var h=o.getFocusableOptions().indexOf(f);o.setState({focusedOption:f,focusedOptionId:h>-1?o.getFocusedOptionId(f):null})}},o.shouldHideSelectedOptions=function(){return Vhe(o.props)},o.onValueInputFocus=function(f){f.preventDefault(),f.stopPropagation(),o.focus()},o.onKeyDown=function(f){var h=o.props,m=h.isMulti,g=h.backspaceRemovesValue,x=h.escapeClearsValue,v=h.inputValue,y=h.isClearable,w=h.isDisabled,_=h.menuIsOpen,T=h.onKeyDown,B=h.tabSelectsValue,j=h.openMenuOnFocus,E=o.state,N=E.focusedOption,I=E.focusedValue,L=E.selectValue;if(!(w||typeof T=="function"&&(T(f),f.defaultPrevented))){switch(o.blockOptionHover=!0,f.key){case"ArrowLeft":if(!m||v)return;o.focusValue("previous");break;case"ArrowRight":if(!m||v)return;o.focusValue("next");break;case"Delete":case"Backspace":if(v)return;if(I)o.removeValue(I);else{if(!g)return;m?o.popValue():y&&o.clearValue()}break;case"Tab":if(o.isComposing||f.shiftKey||!_||!B||!N||j&&o.isOptionSelected(N,L))return;o.selectOption(N);break;case"Enter":if(f.keyCode===229)break;if(_){if(!N||o.isComposing)return;o.selectOption(N);break}return;case"Escape":_?(o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange("",{action:"menu-close",prevInputValue:v}),o.onMenuClose()):y&&x&&o.clearValue();break;case" ":if(v)return;if(!_){o.openMenu("first");break}if(!N)return;o.selectOption(N);break;case"ArrowUp":_?o.focusOption("up"):o.openMenu("last");break;case"ArrowDown":_?o.focusOption("down"):o.openMenu("first");break;case"PageUp":if(!_)return;o.focusOption("pageup");break;case"PageDown":if(!_)return;o.focusOption("pagedown");break;case"Home":if(!_)return;o.focusOption("first");break;case"End":if(!_)return;o.focusOption("last");break;default:return}f.preventDefault()}},o.state.instancePrefix="react-select-"+(o.props.instanceId||++O0t),o.state.selectValue=zJ(i.value),i.menuIsOpen&&o.state.selectValue.length){var c=o.getFocusableOptionsWithIds(),u=o.buildFocusableOptions(),d=u.indexOf(o.state.selectValue[0]);o.state.focusableOptionsWithIds=c,o.state.focusedOption=u[d],o.state.focusedOptionId=kF(c,u[d])}return o}return t=s,r=[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&GJ(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(i){var o=this.props,c=o.isDisabled,u=o.menuIsOpen,d=this.state.isFocused;(d&&!c&&i.isDisabled||d&&u&&!i.menuIsOpen)&&this.focusInput(),d&&c&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):d||c||!i.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(GJ(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,o){this.props.onInputChange(i,o)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var o=this,c=this.state,u=c.selectValue,d=c.isFocused,f=this.buildFocusableOptions(),h=i==="first"?0:f.length-1;if(!this.props.isMulti){var m=f.indexOf(u[0]);m>-1&&(h=m)}this.scrollToFocusedOptionOnUpdate=!(d&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:f[h],focusedOptionId:this.getFocusedOptionId(f[h])},function(){return o.onMenuOpen()})}},{key:"focusValue",value:function(i){var o=this.state,c=o.selectValue,u=o.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var d=c.indexOf(u);u||(d=-1);var f=c.length-1,h=-1;if(c.length){switch(i){case"previous":h=d===0?0:d===-1?f:d-1;break;case"next":d>-1&&d<f&&(h=d+1)}this.setState({inputIsHidden:h!==-1,focusedValue:c[h]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",o=this.props.pageSize,c=this.state.focusedOption,u=this.getFocusableOptions();if(u.length){var d=0,f=u.indexOf(c);c||(f=-1),i==="up"?d=f>0?f-1:u.length-1:i==="down"?d=(f+1)%u.length:i==="pageup"?(d=f-o)<0&&(d=0):i==="pagedown"?(d=f+o)>u.length-1&&(d=u.length-1):i==="last"&&(d=u.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:u[d],focusedValue:null,focusedOptionId:this.getFocusedOptionId(u[d])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(NF):Cr(Cr({},NF),this.props.theme):NF}},{key:"getCommonProps",value:function(){var i=this.clearValue,o=this.cx,c=this.getStyles,u=this.getClassNames,d=this.getValue,f=this.selectOption,h=this.setValue,m=this.props,g=m.isMulti,x=m.isRtl,v=m.options;return{clearValue:i,cx:o,getStyles:c,getClassNames:u,getValue:d,hasValue:this.hasValue(),isMulti:g,isRtl:x,options:v,selectOption:f,selectProps:m,setValue:h,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,o=i.isClearable,c=i.isMulti;return o===void 0?c:o}},{key:"isOptionDisabled",value:function(i,o){return Uhe(this.props,i,o)}},{key:"isOptionSelected",value:function(i,o){return Qhe(this.props,i,o)}},{key:"filterOption",value:function(i,o){return Hhe(this.props,i,o)}},{key:"formatOptionLabel",value:function(i,o){if(typeof this.props.formatOptionLabel=="function"){var c=this.props.inputValue,u=this.state.selectValue;return this.props.formatOptionLabel(i,{context:o,inputValue:c,selectValue:u})}return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,o=i.isDisabled,c=i.isSearchable,u=i.inputId,d=i.inputValue,f=i.tabIndex,h=i.form,m=i.menuIsOpen,g=i.required,x=this.getComponents().Input,v=this.state,y=v.inputIsHidden,w=v.ariaSelection,_=this.commonProps,T=u||this.getElementId("input"),B=Cr(Cr(Cr({"aria-autocomplete":"list","aria-expanded":m,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":g,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},m&&{"aria-controls":this.getElementId("listbox")}),!c&&{"aria-readonly":!0}),this.hasValue()?(w==null?void 0:w.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return c?S.createElement(x,Mr({},_,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:T,innerRef:this.getInputRef,isDisabled:o,isHidden:y,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:f,form:h,type:"text",value:d},B)):S.createElement(C0t,Mr({id:T,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:tk,onFocus:this.onInputFocus,disabled:o,tabIndex:f,inputMode:"none",form:h,value:""},B))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,o=this.getComponents(),c=o.MultiValue,u=o.MultiValueContainer,d=o.MultiValueLabel,f=o.MultiValueRemove,h=o.SingleValue,m=o.Placeholder,g=this.commonProps,x=this.props,v=x.controlShouldRenderValue,y=x.isDisabled,w=x.isMulti,_=x.inputValue,T=x.placeholder,B=this.state,j=B.selectValue,E=B.focusedValue,N=B.isFocused;if(!this.hasValue()||!v)return _?null:S.createElement(m,Mr({},g,{key:"placeholder",isDisabled:y,isFocused:N,innerProps:{id:this.getElementId("placeholder")}}),T);if(w)return j.map(function(L,D){var k=L===E,P="".concat(i.getOptionLabel(L),"-").concat(i.getOptionValue(L));return S.createElement(c,Mr({},g,{components:{Container:u,Label:d,Remove:f},isFocused:k,isDisabled:y,key:P,index:D,removeProps:{onClick:function(){return i.removeValue(L)},onTouchEnd:function(){return i.removeValue(L)},onMouseDown:function(R){R.preventDefault()}},data:L}),i.formatOptionLabel(L,"value"))});if(_)return null;var I=j[0];return S.createElement(h,Mr({},g,{data:I,isDisabled:y}),this.formatOptionLabel(I,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents().ClearIndicator,o=this.commonProps,c=this.props,u=c.isDisabled,d=c.isLoading,f=this.state.isFocused;if(!this.isClearable()||!i||u||!this.hasValue()||d)return null;var h={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return S.createElement(i,Mr({},o,{innerProps:h,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents().LoadingIndicator,o=this.commonProps,c=this.props,u=c.isDisabled,d=c.isLoading,f=this.state.isFocused;return i&&d?S.createElement(i,Mr({},o,{innerProps:{"aria-hidden":"true"},isDisabled:u,isFocused:f})):null}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),o=i.DropdownIndicator,c=i.IndicatorSeparator;if(!o||!c)return null;var u=this.commonProps,d=this.props.isDisabled,f=this.state.isFocused;return S.createElement(c,Mr({},u,{isDisabled:d,isFocused:f}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents().DropdownIndicator;if(!i)return null;var o=this.commonProps,c=this.props.isDisabled,u=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return S.createElement(i,Mr({},o,{innerProps:d,isDisabled:c,isFocused:u}))}},{key:"renderMenu",value:function(){var i=this,o=this.getComponents(),c=o.Group,u=o.GroupHeading,d=o.Menu,f=o.MenuList,h=o.MenuPortal,m=o.LoadingMessage,g=o.NoOptionsMessage,x=o.Option,v=this.commonProps,y=this.state.focusedOption,w=this.props,_=w.captureMenuScroll,T=w.inputValue,B=w.isLoading,j=w.loadingMessage,E=w.minMenuHeight,N=w.maxMenuHeight,I=w.menuIsOpen,L=w.menuPlacement,D=w.menuPosition,k=w.menuPortalTarget,P=w.menuShouldBlockScroll,R=w.menuShouldScrollIntoView,W=w.noOptionsMessage,V=w.onMenuScrollToTop,G=w.onMenuScrollToBottom;if(!I)return null;var z,K=function(Y,Z){var ae=Y.type,le=Y.data,ie=Y.isDisabled,ce=Y.isSelected,Ae=Y.label,Fe=Y.value,ne=y===le,_e=ie?void 0:function(){return i.onOptionHover(le)},Ie=ie?void 0:function(){return i.selectOption(le)},Se="".concat(i.getElementId("option"),"-").concat(Z),me={id:Se,onClick:Ie,onMouseMove:_e,onMouseOver:_e,tabIndex:-1,role:"option","aria-selected":i.isAppleDevice?void 0:ce};return S.createElement(x,Mr({},v,{innerProps:me,data:le,isDisabled:ie,isSelected:ce,key:Se,label:Ae,type:ae,value:Fe,isFocused:ne,innerRef:ne?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(Y.data,"menu"))};if(this.hasOptions())z=this.getCategorizedOptions().map(function(Y){if(Y.type==="group"){var Z=Y.data,ae=Y.options,le=Y.index,ie="".concat(i.getElementId("group"),"-").concat(le),ce="".concat(ie,"-heading");return S.createElement(c,Mr({},v,{key:ie,data:Z,options:ae,Heading:u,headingProps:{id:ce,data:Y.data},label:i.formatGroupLabel(Y.data)}),Y.options.map(function(Ae){return K(Ae,"".concat(le,"-").concat(Ae.index))}))}if(Y.type==="option")return K(Y,"".concat(Y.index))});else if(B){var J=j({inputValue:T});if(J===null)return null;z=S.createElement(m,v,J)}else{var te=W({inputValue:T});if(te===null)return null;z=S.createElement(g,v,te)}var M={minMenuHeight:E,maxMenuHeight:N,menuPlacement:L,menuPosition:D,menuShouldScrollIntoView:R},H=S.createElement(Jht,Mr({},v,M),function(Y){var Z=Y.ref,ae=Y.placerProps,le=ae.placement,ie=ae.maxHeight;return S.createElement(d,Mr({},v,M,{innerRef:Z,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:B,placement:le}),S.createElement(N0t,{captureEnabled:_,onTopArrive:V,onBottomArrive:G,lockEnabled:P},function(ce){return S.createElement(f,Mr({},v,{innerRef:function(Ae){i.getMenuListRef(Ae),ce(Ae)},innerProps:{role:"listbox","aria-multiselectable":v.isMulti,id:i.getElementId("listbox")},isLoading:B,maxHeight:ie,focusedOption:y}),z)}))});return k||D==="fixed"?S.createElement(h,Mr({},v,{appendTo:k,controlElement:this.controlRef,menuPlacement:L,menuPosition:D}),H):H}},{key:"renderFormField",value:function(){var i=this,o=this.props,c=o.delimiter,u=o.isDisabled,d=o.isMulti,f=o.name,h=o.required,m=this.state.selectValue;if(h&&!this.hasValue()&&!u)return S.createElement(B0t,{name:f,onFocus:this.onValueInputFocus});if(f&&!u){if(d){if(c){var g=m.map(function(y){return i.getOptionValue(y)}).join(c);return S.createElement("input",{name:f,type:"hidden",value:g})}var x=m.length>0?m.map(function(y,w){return S.createElement("input",{key:"i-".concat(w),name:f,type:"hidden",value:i.getOptionValue(y)})}):S.createElement("input",{name:f,type:"hidden",value:""});return S.createElement("div",null,x)}var v=m[0]?this.getOptionValue(m[0]):"";return S.createElement("input",{name:f,type:"hidden",value:v})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,o=this.state,c=o.ariaSelection,u=o.focusedOption,d=o.focusedValue,f=o.isFocused,h=o.selectValue,m=this.getFocusableOptions();return S.createElement(v0t,Mr({},i,{id:this.getElementId("live-region"),ariaSelection:c,focusedOption:u,focusedValue:d,isFocused:f,selectValue:h,focusableOptions:m,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),o=i.Control,c=i.IndicatorsContainer,u=i.SelectContainer,d=i.ValueContainer,f=this.props,h=f.className,m=f.id,g=f.isDisabled,x=f.menuIsOpen,v=this.state.isFocused,y=this.commonProps=this.getCommonProps();return S.createElement(u,Mr({},y,{className:h,innerProps:{id:m,onKeyDown:this.onKeyDown},isDisabled:g,isFocused:v}),this.renderLiveRegion(),S.createElement(o,Mr({},y,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:g,isFocused:v,menuIsOpen:x}),S.createElement(d,Mr({},y,{isDisabled:g}),this.renderPlaceholderOrValue(),this.renderInput()),S.createElement(c,Mr({},y,{isDisabled:g}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],n=[{key:"getDerivedStateFromProps",value:function(i,o){var c=o.prevProps,u=o.clearFocusValueOnUpdate,d=o.inputIsHiddenAfterUpdate,f=o.ariaSelection,h=o.isFocused,m=o.prevWasFocused,g=o.instancePrefix,x=i.options,v=i.value,y=i.menuIsOpen,w=i.inputValue,_=i.isMulti,T=zJ(v),B={};if(c&&(v!==c.value||x!==c.options||y!==c.menuIsOpen||w!==c.inputValue)){var j=y?function(P,R){return lZ(U5(P,R))}(i,T):[],E=y?cZ(U5(i,T),"".concat(g,"-option")):[],N=u?function(P,R){var W=P.focusedValue,V=P.selectValue.indexOf(W);if(V>-1){if(R.indexOf(W)>-1)return W;if(V<R.length)return R[V]}return null}(o,T):null,I=function(P,R){var W=P.focusedOption;return W&&R.indexOf(W)>-1?W:R[0]}(o,j);B={selectValue:T,focusedOption:I,focusedOptionId:kF(E,I),focusableOptionsWithIds:E,focusedValue:N,clearFocusValueOnUpdate:!1}}var L=d!=null&&i!==c?{inputIsHidden:d,inputIsHiddenAfterUpdate:void 0}:{},D=f,k=h&&m;return h&&!k&&(D={value:M5(_,T,T[0]||null),options:T,action:"initial-input-focus"},k=!m),(f==null?void 0:f.action)==="initial-input-focus"&&(D=null),Cr(Cr(Cr({},B),L),{},{prevProps:i,ariaSelection:D,prevWasFocused:k})}}],r&&_J(t.prototype,r),n&&_J(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}();zhe.defaultProps=F0t;var D0t=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"],P0t=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"],q7=ua(function(e){function t(r){return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),R0t=ua(function(e){var t=q7.default;e.exports=function(r,n){if(t(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n||"default");if(t(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)},e.exports.__esModule=!0,e.exports.default=e.exports}),$he=ua(function(e){var t=q7.default;e.exports=function(r){var n=R0t(r,"string");return t(n)==="symbol"?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports}),L0t=ua(function(e){e.exports=function(t,r,n){return(r=$he(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t},e.exports.__esModule=!0,e.exports.default=e.exports});ua(function(e){function t(r,n){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);n&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),a.push.apply(a,s)}return a}e.exports=function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?t(Object(a),!0).forEach(function(s){L0t(r,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(a,s))})}return r},e.exports.__esModule=!0,e.exports.default=e.exports}),ua(function(e){e.exports=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}),ua(function(e){function t(r,n){for(var a=0;a<n.length;a++){var s=n[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,$he(s.key),s)}}e.exports=function(r,n,a){return n&&t(r.prototype,n),a&&t(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r},e.exports.__esModule=!0,e.exports.default=e.exports});var M0t=ua(function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});ua(function(e){e.exports=function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&M0t(t,r)},e.exports.__esModule=!0,e.exports.default=e.exports});var dZ=ua(function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),U0t=ua(function(e){e.exports=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}},e.exports.__esModule=!0,e.exports.default=e.exports}),Q0t=ua(function(e){e.exports=function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},e.exports.__esModule=!0,e.exports.default=e.exports}),H0t=ua(function(e){var t=q7.default;e.exports=function(r,n){if(n&&(t(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Q0t(r)},e.exports.__esModule=!0,e.exports.default=e.exports});ua(function(e){e.exports=function(t){var r=U0t();return function(){var n,a=dZ(t);if(r){var s=dZ(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return H0t(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports});var qP=ua(function(e){e.exports=function(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a},e.exports.__esModule=!0,e.exports.default=e.exports}),V0t=ua(function(e){e.exports=function(t){if(Array.isArray(t))return qP(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),z0t=ua(function(e){e.exports=function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),Ghe=ua(function(e){e.exports=function(t,r){if(t){if(typeof t=="string")return qP(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qP(t,r):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}),$0t=ua(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});ua(function(e){e.exports=function(t){return V0t(t)||z0t(t)||Ghe(t)||$0t()},e.exports.__esModule=!0,e.exports.default=e.exports});var G0t=ua(function(e){e.exports=function(t){if(Array.isArray(t))return t},e.exports.__esModule=!0,e.exports.default=e.exports}),K0t=ua(function(e){e.exports=function(t,r){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,s,i,o,c=[],u=!0,d=!1;try{if(i=(n=n.call(t)).next,r===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=i.call(n)).done)&&(c.push(a.value),c.length!==r);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return c}},e.exports.__esModule=!0,e.exports.default=e.exports}),q0t=ua(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});ua(function(e){e.exports=function(t,r){return G0t(t)||K0t(t,r)||Ghe(t,r)||q0t()},e.exports.__esModule=!0,e.exports.default=e.exports});var W0t=ua(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s={},i=Object.keys(t);for(a=0;a<i.length;a++)n=i[a],r.indexOf(n)>=0||(s[n]=t[n]);return s},e.exports.__esModule=!0,e.exports.default=e.exports});ua(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s=W0t(t,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s},e.exports.__esModule=!0,e.exports.default=e.exports}),ua(function(e){e.exports=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))},e.exports.__esModule=!0,e.exports.default=e.exports});var X0t=S.forwardRef(function(e,t){var r=function(a){var s=a.defaultOptions,i=s!==void 0&&s,o=a.cacheOptions,c=o!==void 0&&o,u=a.loadOptions;a.options;var d=a.isLoading,f=d!==void 0&&d,h=a.onInputChange,m=a.filterOption,g=m===void 0?null:m,x=AA(a,P0t),v=x.inputValue,y=S.useRef(void 0),w=S.useRef(!1),_=Zi(S.useState(Array.isArray(i)?i:void 0),2),T=_[0],B=_[1],j=Zi(S.useState(v!==void 0?v:""),2),E=j[0],N=j[1],I=Zi(S.useState(i===!0),2),L=I[0],D=I[1],k=Zi(S.useState(void 0),2),P=k[0],R=k[1],W=Zi(S.useState([]),2),V=W[0],G=W[1],z=Zi(S.useState(!1),2),K=z[0],J=z[1],te=Zi(S.useState({}),2),M=te[0],H=te[1],Y=Zi(S.useState(void 0),2),Z=Y[0],ae=Y[1],le=Zi(S.useState(void 0),2),ie=le[0],ce=le[1];c!==ie&&(H({}),ce(c)),i!==Z&&(B(Array.isArray(i)?i:void 0),ae(i)),S.useEffect(function(){return w.current=!0,function(){w.current=!1}},[]);var Ae=S.useCallback(function(_e,Ie){if(!u)return Ie();var Se=u(_e,Ie);Se&&typeof Se.then=="function"&&Se.then(Ie,function(){return Ie()})},[u]);S.useEffect(function(){i===!0&&Ae(E,function(_e){w.current&&(B(_e||[]),D(!!y.current))})},[]);var Fe=S.useCallback(function(_e,Ie){var Se=function(Be,Le,We){if(We){var be=We(Be,Le);if(typeof be=="string")return be}return Be}(_e,Ie,h);if(!Se)return y.current=void 0,N(""),R(""),G([]),D(!1),void J(!1);if(c&&M[Se])N(Se),R(Se),G(M[Se]),D(!1),J(!1);else{var me=y.current={};N(Se),D(!0),J(!P),Ae(Se,function(Be){w&&me===y.current&&(y.current=void 0,D(!1),R(Se),G(Be||[]),J(!1),H(Be?Cr(Cr({},M),{},c1({},Se,Be)):M))})}},[c,Ae,P,M,h]),ne=K?[]:E&&P?V:T||[];return Cr(Cr({},x),{},{options:ne,isLoading:L||f,onInputChange:Fe,filterOption:g})}(e),n=function(a){var s=a.defaultInputValue,i=s===void 0?"":s,o=a.defaultMenuIsOpen,c=o!==void 0&&o,u=a.defaultValue,d=u===void 0?null:u,f=a.inputValue,h=a.menuIsOpen,m=a.onChange,g=a.onInputChange,x=a.onMenuClose,v=a.onMenuOpen,y=a.value,w=AA(a,D0t),_=Zi(S.useState(f!==void 0?f:i),2),T=_[0],B=_[1],j=Zi(S.useState(h!==void 0?h:c),2),E=j[0],N=j[1],I=Zi(S.useState(y!==void 0?y:d),2),L=I[0],D=I[1],k=S.useCallback(function(K,J){typeof m=="function"&&m(K,J),D(K)},[m]),P=S.useCallback(function(K,J){var te;typeof g=="function"&&(te=g(K,J)),B(te!==void 0?te:K)},[g]),R=S.useCallback(function(){typeof v=="function"&&v(),N(!0)},[v]),W=S.useCallback(function(){typeof x=="function"&&x(),N(!1)},[x]),V=f!==void 0?f:T,G=h!==void 0?h:E,z=y!==void 0?y:L;return Cr(Cr({},w),{},{inputValue:V,menuIsOpen:G,onChange:k,onInputChange:P,onMenuClose:W,onMenuOpen:R,value:z})}(r);return S.createElement(zhe,Mr({ref:t},n))}),Y0t=X0t,J0t=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,a,s;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(a=n;a--!=0;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(a=n;a--!=0;)if(!Object.prototype.hasOwnProperty.call(r,s[a]))return!1;for(a=n;a--!=0;){var i=s[a];if(!e(t[i],r[i]))return!1}return!0}return t!=t&&r!=r},u1;(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"})(u1||(u1={}));class Ag{constructor({apiKey:t,authReferrerPolicy:r,channel:n,client:a,id:s="__googleMapsScriptId",language:i,libraries:o=[],mapIds:c,nonce:u,region:d,retries:f=3,url:h="https://maps.googleapis.com/maps/api/js",version:m}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=r,this.channel=n,this.client=a,this.id=s||"__googleMapsScriptId",this.language=i,this.libraries=o,this.mapIds=c,this.nonce=u,this.region=d,this.retries=f,this.url=h,this.version=m,Ag.instance){if(!J0t(this.options,Ag.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(Ag.instance.options)}`);return Ag.instance}Ag.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?u1.FAILURE:this.done?u1.SUCCESS:this.loading?u1.LOADING:u1.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+=`?callback=${this.CALLBACK}`,this.apiKey&&(t+=`&key=${this.apiKey}`),this.channel&&(t+=`&channel=${this.channel}`),this.client&&(t+=`&client=${this.client}`),this.libraries.length>0&&(t+=`&libraries=${this.libraries.join(",")}`),this.language&&(t+=`&language=${this.language}`),this.region&&(t+=`&region=${this.region}`),this.version&&(t+=`&v=${this.version}`),this.mapIds&&(t+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(t+=`&auth_referrer_policy=${this.authReferrerPolicy}`),t}deleteScript(){const t=document.getElementById(this.id);t&&t.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((t,r)=>{this.loadCallback(n=>{n?r(n.error):t(window.google)})})}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const t=this.createUrl(),r=document.createElement("script");r.id=this.id,r.type="text/javascript",r.src=t,r.onerror=this.loadErrorCallback.bind(this),r.defer=!0,r.async=!0,this.nonce&&(r.nonce=this.nonce),document.head.appendChild(r)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const r=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${r} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=t,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(t=>{t(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}var Z0t=function(e,t,r){var n,a=e.bounds,s=e.location,i=function(c,u){var d={};for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&u.indexOf(f)<0&&(d[f]=c[f]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var h=0;for(f=Object.getOwnPropertySymbols(c);h<f.length;h++)u.indexOf(f[h])<0&&Object.prototype.propertyIsEnumerable.call(c,f[h])&&(d[f[h]]=c[f[h]])}return d}(e,["bounds","location"]),o=Ug({input:t},i);return r&&(o.sessionToken=r),a&&(o.bounds=new((n=google.maps.LatLngBounds).bind.apply(n,function(){for(var c=0,u=0,d=arguments.length;u<d;u++)c+=arguments[u].length;var f=Array(c),h=0;for(u=0;u<d;u++)for(var m=arguments[u],g=0,x=m.length;g<x;g++,h++)f[h]=m[g];return f}([void 0],a)))),s&&(o.location=new google.maps.LatLng(s)),o},emt=function(e){var t=e.autocompletionRequest,r=e.debounce,n=e.minLengthAutocomplete,a=e.placesService,s=e.sessionToken,i=e.withSessionToken,o=function(c,u,d){d===void 0&&(d={});var f=d.maxWait,h=S.useRef(null),m=S.useRef([]),g=d.leading,x=d.trailing===void 0||d.trailing,v=S.useRef(!1),y=S.useRef(null),w=S.useRef(!1),_=S.useRef(c);_.current=c;var T=S.useCallback(function(){clearTimeout(y.current),clearTimeout(h.current),h.current=null,m.current=[],y.current=null,v.current=!1},[]);S.useEffect(function(){return w.current=!1,function(){w.current=!0}},[]);var B=S.useCallback(function(){for(var E=[],N=0;N<arguments.length;N++)E[N]=arguments[N];m.current=E,clearTimeout(y.current),v.current&&(v.current=!1),y.current||!g||v.current||(_.current.apply(_,E),v.current=!0),y.current=setTimeout(function(){var I=!0;g&&v.current&&(I=!1),T(),!w.current&&x&&I&&_.current.apply(_,E)},u),f&&!h.current&&x&&(h.current=setTimeout(function(){var I=m.current;T(),w.current||_.current.apply(null,I)},f))},[f,u,T,g,x]),j=S.useCallback(function(){y.current&&(_.current.apply(null,m.current),T())},[T]);return[B,T,j]}(function(c,u){if(!a)return u([]);if(c.length<n)return u([]);var d=Ug({},t);a.getPlacePredictions(Z0t(d,c,i&&s),function(f){u((f||[]).map(function(h){return{label:h.description,value:h}}))})},r)[0];return o},fZ=S.forwardRef(function(e,t){var r,n,a,s,i,o,c,u,d=function(x){var v=x.apiKey,y=x.apiOptions,w=x.onLoadFailed,_=S.useState(void 0),T=_[0],B=_[1],j=S.useState(void 0),E=j[0],N=j[1],I=function(){if(!window.google)throw new Error("[react-google-places-autocomplete]: Google script not loaded");if(!window.google.maps)throw new Error("[react-google-places-autocomplete]: Google maps script not loaded");if(!window.google.maps.places)throw new Error("[react-google-places-autocomplete]: Google maps places script not loaded");B(new window.google.maps.places.AutocompleteService),N(new google.maps.places.AutocompleteSessionToken)};return S.useEffect(function(){v?aht(void 0,void 0,void 0,function(){var L;return sht(this,function(D){switch(D.label){case 0:if(!v)return[2];D.label=1;case 1:return D.trys.push([1,4,,5]),window.google&&window.google.maps&&window.google.maps.places?[3,3]:[4,new Ag(Ug({apiKey:v},Ug({libraries:["places"]},y))).load()];case 2:D.sent(),D.label=3;case 3:return I(),[3,5];case 4:return L=D.sent(),typeof w=="function"&&w(L),[3,5];case 5:return[2]}})}):I()},[]),{placesService:T,sessionToken:E,setSessionToken:N}}({apiKey:(r=e.apiKey)!==null&&r!==void 0?r:"",apiOptions:(n=e.apiOptions)!==null&&n!==void 0?n:{},onLoadFailed:(a=e.onLoadFailed)!==null&&a!==void 0?a:console.error}),f=d.placesService,h=d.sessionToken,m=d.setSessionToken,g=emt({autocompletionRequest:(s=e.autocompletionRequest)!==null&&s!==void 0?s:{},debounce:(i=e.debounce)!==null&&i!==void 0?i:300,minLengthAutocomplete:(o=e.minLengthAutocomplete)!==null&&o!==void 0?o:0,placesService:f,sessionToken:h,withSessionToken:(c=e.withSessionToken)!==null&&c!==void 0&&c});return S.useImperativeHandle(t,function(){return{getSessionToken:function(){return h},refreshSessionToken:function(){m(new google.maps.places.AutocompleteSessionToken)}}},[h]),Ze.createElement(Y0t,Ug({},(u=e.selectProps)!==null&&u!==void 0?u:{},{loadOptions:g,getOptionValue:function(x){return x.value.place_id}}))});/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var WP=function(e,t){return WP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},WP(e,t)};function xf(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");WP(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var XP=function(){return XP=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},XP.apply(this,arguments)};function Sl(e,t,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function o(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?s(d.value):a(d.value).then(o,c)}u((n=n.apply(e,[])).next())})}function tl(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Q5(e,t,r){if(arguments.length===2)for(var n=0,a=t.length,s;n<a;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||t)}var o0=function(){function e(t,r,n,a){this.left=t,this.top=r,this.width=n,this.height=a}return e.prototype.add=function(t,r,n,a){return new e(this.left+t,this.top+r,this.width+n,this.height+a)},e.fromClientRect=function(t,r){return new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(t,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),MT=function(e,t){return o0.fromClientRect(e,t.getBoundingClientRect())},tmt=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),a=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new o0(0,0,n,a)},UT=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},Xs=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=e[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},AZ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rmt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var H5=0;H5<AZ.length;H5++)rmt[AZ.charCodeAt(H5)]=H5;var hZ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",zw=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var V5=0;V5<hZ.length;V5++)zw[hZ.charCodeAt(V5)]=V5;var nmt=function(e){var t=e.length*.75,r=e.length,n,a=0,s,i,o,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=zw[e.charCodeAt(n)],i=zw[e.charCodeAt(n+1)],o=zw[e.charCodeAt(n+2)],c=zw[e.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|o>>2,d[a++]=(o&3)<<6|c&63;return u},amt=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},smt=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},Vg=5,W7=11,BF=2,imt=W7-Vg,Khe=65536>>Vg,omt=1<<Vg,TF=omt-1,lmt=1024>>Vg,cmt=Khe+lmt,umt=cmt,dmt=32,fmt=umt+dmt,Amt=65536>>W7,hmt=1<<imt,mmt=hmt-1,mZ=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},pmt=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},gmt=function(e,t){var r=nmt(e),n=Array.isArray(r)?smt(r):new Uint32Array(r),a=Array.isArray(r)?amt(r):new Uint16Array(r),s=24,i=mZ(a,s/2,n[4]/2),o=n[5]===2?mZ(a,(s+n[4])/2):pmt(n,Math.ceil((s+n[4])/4));return new xmt(n[0],n[1],n[2],n[3],i,o)},xmt=function(){function e(t,r,n,a,s,i){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>Vg],r=(r<<BF)+(t&TF),this.data[r];if(t<=65535)return r=this.index[Khe+(t-55296>>Vg)],r=(r<<BF)+(t&TF),this.data[r];if(t<this.highStart)return r=fmt-Amt+(t>>W7),r=this.index[r],r+=t>>Vg&mmt,r=this.index[r],r=(r<<BF)+(t&TF),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),pZ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",vmt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var z5=0;z5<pZ.length;z5++)vmt[pZ.charCodeAt(z5)]=z5;var bmt="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",gZ=50,ymt=1,qhe=2,Whe=3,wmt=4,Emt=5,xZ=7,Xhe=8,vZ=9,km=10,YP=11,bZ=12,JP=13,Cmt=14,$w=15,ZP=16,$5=17,vw=18,_mt=19,yZ=20,eR=21,bw=22,jF=23,Pv=24,Hc=25,Gw=26,Kw=27,Rv=28,Smt=29,hg=30,Nmt=31,G5=32,K5=33,tR=34,rR=35,nR=36,BE=37,aR=38,ZS=39,eN=40,IF=41,Yhe=42,kmt=43,Bmt=[9001,65288],Jhe="!",kn="×",q5="÷",sR=gmt(bmt),xh=[hg,nR],iR=[ymt,qhe,Whe,Emt],Zhe=[km,Xhe],wZ=[Kw,Gw],Tmt=iR.concat(Zhe),EZ=[aR,ZS,eN,tR,rR],jmt=[$w,JP],Imt=function(e,t){t===void 0&&(t="strict");var r=[],n=[],a=[];return e.forEach(function(s,i){var o=sR.get(s);if(o>gZ?(a.push(!0),o-=gZ):a.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(i),r.push(ZP);if(o===wmt||o===YP){if(i===0)return n.push(i),r.push(hg);var c=r[i-1];return Tmt.indexOf(c)===-1?(n.push(n[i-1]),r.push(c)):(n.push(i),r.push(hg))}if(n.push(i),o===Nmt)return r.push(t==="strict"?eR:BE);if(o===Yhe||o===Smt)return r.push(hg);if(o===kmt)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(BE):r.push(hg);r.push(o)}),[n,r,a]},FF=function(e,t,r,n){var a=n[r];if(Array.isArray(e)?e.indexOf(a)!==-1:e===a)for(var s=r;s<=n.length;){s++;var i=n[s];if(i===t)return!0;if(i!==km)break}if(a===km)for(var s=r;s>0;){s--;var o=n[s];if(Array.isArray(e)?e.indexOf(o)!==-1:e===o)for(var c=r;c<=n.length;){c++;var i=n[c];if(i===t)return!0;if(i!==km)break}if(o!==km)break}return!1},CZ=function(e,t){for(var r=e;r>=0;){var n=t[r];if(n===km)r--;else return n}return 0},Fmt=function(e,t,r,n,a){if(r[n]===0)return kn;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return kn;var i=s-1,o=s+1,c=t[s],u=i>=0?t[i]:0,d=t[o];if(c===qhe&&d===Whe)return kn;if(iR.indexOf(c)!==-1)return Jhe;if(iR.indexOf(d)!==-1||Zhe.indexOf(d)!==-1)return kn;if(CZ(s,t)===Xhe)return q5;if(sR.get(e[s])===YP||(c===G5||c===K5)&&sR.get(e[o])===YP||c===xZ||d===xZ||c===vZ||[km,JP,$w].indexOf(c)===-1&&d===vZ||[$5,vw,_mt,Pv,Rv].indexOf(d)!==-1||CZ(s,t)===bw||FF(jF,bw,s,t)||FF([$5,vw],eR,s,t)||FF(bZ,bZ,s,t))return kn;if(c===km)return q5;if(c===jF||d===jF)return kn;if(d===ZP||c===ZP)return q5;if([JP,$w,eR].indexOf(d)!==-1||c===Cmt||u===nR&&jmt.indexOf(c)!==-1||c===Rv&&d===nR||d===yZ||xh.indexOf(d)!==-1&&c===Hc||xh.indexOf(c)!==-1&&d===Hc||c===Kw&&[BE,G5,K5].indexOf(d)!==-1||[BE,G5,K5].indexOf(c)!==-1&&d===Gw||xh.indexOf(c)!==-1&&wZ.indexOf(d)!==-1||wZ.indexOf(c)!==-1&&xh.indexOf(d)!==-1||[Kw,Gw].indexOf(c)!==-1&&(d===Hc||[bw,$w].indexOf(d)!==-1&&t[o+1]===Hc)||[bw,$w].indexOf(c)!==-1&&d===Hc||c===Hc&&[Hc,Rv,Pv].indexOf(d)!==-1)return kn;if([Hc,Rv,Pv,$5,vw].indexOf(d)!==-1)for(var f=s;f>=0;){var h=t[f];if(h===Hc)return kn;if([Rv,Pv].indexOf(h)!==-1)f--;else break}if([Kw,Gw].indexOf(d)!==-1)for(var f=[$5,vw].indexOf(c)!==-1?i:s;f>=0;){var h=t[f];if(h===Hc)return kn;if([Rv,Pv].indexOf(h)!==-1)f--;else break}if(aR===c&&[aR,ZS,tR,rR].indexOf(d)!==-1||[ZS,tR].indexOf(c)!==-1&&[ZS,eN].indexOf(d)!==-1||[eN,rR].indexOf(c)!==-1&&d===eN||EZ.indexOf(c)!==-1&&[yZ,Gw].indexOf(d)!==-1||EZ.indexOf(d)!==-1&&c===Kw||xh.indexOf(c)!==-1&&xh.indexOf(d)!==-1||c===Pv&&xh.indexOf(d)!==-1||xh.concat(Hc).indexOf(c)!==-1&&d===bw&&Bmt.indexOf(e[o])===-1||xh.concat(Hc).indexOf(d)!==-1&&c===vw)return kn;if(c===IF&&d===IF){for(var m=r[s],g=1;m>0&&(m--,t[m]===IF);)g++;if(g%2!==0)return kn}return c===G5&&d===K5?kn:q5},Omt=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=Imt(e,t.lineBreak),n=r[0],a=r[1],s=r[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(a=a.map(function(o){return[Hc,hg,Yhe].indexOf(o)!==-1?BE:o}));var i=t.wordBreak==="keep-all"?s.map(function(o,c){return o&&e[c]>=19968&&e[c]<=40959}):void 0;return[n,a,i]},Dmt=function(){function e(t,r,n,a){this.codePoints=t,this.required=r===Jhe,this.start=n,this.end=a}return e.prototype.slice=function(){return Xs.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),Pmt=function(e,t){var r=UT(e),n=Omt(r,t),a=n[0],s=n[1],i=n[2],o=r.length,c=0,u=0;return{next:function(){if(u>=o)return{done:!0,value:null};for(var d=kn;u<o&&(d=Fmt(r,s,a,++u,i))===kn;);if(d!==kn||u===o){var f=new Dmt(r,d,c,u);return c=u,{value:f,done:!1}}return{done:!0,value:null}}}},Rmt=1,Lmt=2,IC=4,_Z=8,ak=10,SZ=47,E2=92,Mmt=9,Umt=32,W5=34,yw=61,Qmt=35,Hmt=36,Vmt=37,X5=39,Y5=40,ww=41,zmt=95,oc=45,$mt=33,Gmt=60,Kmt=62,qmt=64,Wmt=91,Xmt=93,Ymt=61,Jmt=123,J5=63,Zmt=125,NZ=124,ept=126,tpt=128,kZ=65533,OF=42,_g=43,rpt=44,npt=58,apt=59,TE=46,spt=0,ipt=8,opt=11,lpt=14,cpt=31,upt=127,Jf=-1,e0e=48,t0e=97,r0e=101,dpt=102,fpt=117,Apt=122,n0e=65,a0e=69,s0e=70,hpt=85,mpt=90,il=function(e){return e>=e0e&&e<=57},ppt=function(e){return e>=55296&&e<=57343},Lv=function(e){return il(e)||e>=n0e&&e<=s0e||e>=t0e&&e<=dpt},gpt=function(e){return e>=t0e&&e<=Apt},xpt=function(e){return e>=n0e&&e<=mpt},vpt=function(e){return gpt(e)||xpt(e)},bpt=function(e){return e>=tpt},Z5=function(e){return e===ak||e===Mmt||e===Umt},sk=function(e){return vpt(e)||bpt(e)||e===zmt},BZ=function(e){return sk(e)||il(e)||e===oc},ypt=function(e){return e>=spt&&e<=ipt||e===opt||e>=lpt&&e<=cpt||e===upt},hm=function(e,t){return e!==E2?!1:t!==ak},eS=function(e,t,r){return e===oc?sk(t)||hm(t,r):sk(e)?!0:!!(e===E2&&hm(e,t))},DF=function(e,t,r){return e===_g||e===oc?il(t)?!0:t===TE&&il(r):il(e===TE?t:e)},wpt=function(e){var t=0,r=1;(e[t]===_g||e[t]===oc)&&(e[t]===oc&&(r=-1),t++);for(var n=[];il(e[t]);)n.push(e[t++]);var a=n.length?parseInt(Xs.apply(void 0,n),10):0;e[t]===TE&&t++;for(var s=[];il(e[t]);)s.push(e[t++]);var i=s.length,o=i?parseInt(Xs.apply(void 0,s),10):0;(e[t]===a0e||e[t]===r0e)&&t++;var c=1;(e[t]===_g||e[t]===oc)&&(e[t]===oc&&(c=-1),t++);for(var u=[];il(e[t]);)u.push(e[t++]);var d=u.length?parseInt(Xs.apply(void 0,u),10):0;return r*(a+o*Math.pow(10,-i))*Math.pow(10,c*d)},Ept={type:2},Cpt={type:3},_pt={type:4},Spt={type:13},Npt={type:8},kpt={type:21},Bpt={type:9},Tpt={type:10},jpt={type:11},Ipt={type:12},Fpt={type:14},tS={type:23},Opt={type:1},Dpt={type:25},Ppt={type:24},Rpt={type:26},Lpt={type:27},Mpt={type:28},Upt={type:29},Qpt={type:31},oR={type:32},i0e=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(UT(t))},e.prototype.read=function(){for(var t=[],r=this.consumeToken();r!==oR;)t.push(r),r=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case W5:return this.consumeStringToken(W5);case Qmt:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(BZ(r)||hm(n,a)){var s=eS(r,n,a)?Lmt:Rmt,i=this.consumeName();return{type:5,value:i,flags:s}}break;case Hmt:if(this.peekCodePoint(0)===yw)return this.consumeCodePoint(),Spt;break;case X5:return this.consumeStringToken(X5);case Y5:return Ept;case ww:return Cpt;case OF:if(this.peekCodePoint(0)===yw)return this.consumeCodePoint(),Fpt;break;case _g:if(DF(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case rpt:return _pt;case oc:var o=t,c=this.peekCodePoint(0),u=this.peekCodePoint(1);if(DF(o,c,u))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(eS(o,c,u))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(c===oc&&u===Kmt)return this.consumeCodePoint(),this.consumeCodePoint(),Ppt;break;case TE:if(DF(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case SZ:if(this.peekCodePoint(0)===OF)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===OF&&(d=this.consumeCodePoint(),d===SZ))return this.consumeToken();if(d===Jf)return this.consumeToken()}break;case npt:return Rpt;case apt:return Lpt;case Gmt:if(this.peekCodePoint(0)===$mt&&this.peekCodePoint(1)===oc&&this.peekCodePoint(2)===oc)return this.consumeCodePoint(),this.consumeCodePoint(),Dpt;break;case qmt:var f=this.peekCodePoint(0),h=this.peekCodePoint(1),m=this.peekCodePoint(2);if(eS(f,h,m)){var i=this.consumeName();return{type:7,value:i}}break;case Wmt:return Mpt;case E2:if(hm(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case Xmt:return Upt;case Ymt:if(this.peekCodePoint(0)===yw)return this.consumeCodePoint(),Npt;break;case Jmt:return jpt;case Zmt:return Ipt;case fpt:case hpt:var g=this.peekCodePoint(0),x=this.peekCodePoint(1);return g===_g&&(Lv(x)||x===J5)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case NZ:if(this.peekCodePoint(0)===yw)return this.consumeCodePoint(),Bpt;if(this.peekCodePoint(0)===NZ)return this.consumeCodePoint(),kpt;break;case ept:if(this.peekCodePoint(0)===yw)return this.consumeCodePoint(),Tpt;break;case Jf:return oR}return Z5(t)?(this.consumeWhiteSpace(),Qpt):il(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):sk(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:Xs(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],r=this.consumeCodePoint();Lv(r)&&t.length<6;)t.push(r),r=this.consumeCodePoint();for(var n=!1;r===J5&&t.length<6;)t.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(Xs.apply(void 0,t.map(function(c){return c===J5?e0e:c})),16),s=parseInt(Xs.apply(void 0,t.map(function(c){return c===J5?s0e:c})),16);return{type:30,start:a,end:s}}var i=parseInt(Xs.apply(void 0,t),16);if(this.peekCodePoint(0)===oc&&Lv(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];Lv(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var s=parseInt(Xs.apply(void 0,o),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===Y5?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Y5?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Jf)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===X5||r===W5){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Jf||this.peekCodePoint(0)===ww)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),tS)}for(;;){var a=this.consumeCodePoint();if(a===Jf||a===ww)return{type:22,value:Xs.apply(void 0,t)};if(Z5(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Jf||this.peekCodePoint(0)===ww?(this.consumeCodePoint(),{type:22,value:Xs.apply(void 0,t)}):(this.consumeBadUrlRemnants(),tS);if(a===W5||a===X5||a===Y5||ypt(a))return this.consumeBadUrlRemnants(),tS;if(a===E2)if(hm(a,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),tS;else t.push(a)}},e.prototype.consumeWhiteSpace=function(){for(;Z5(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===ww||t===Jf)return;hm(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var r=5e4,n="";t>0;){var a=Math.min(r,t);n+=Xs.apply(void 0,this._value.splice(0,a)),t-=a}return this._value.shift(),n},e.prototype.consumeStringToken=function(t){var r="",n=0;do{var a=this._value[n];if(a===Jf||a===void 0||a===t)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===ak)return this._value.splice(0,n),Opt;if(a===E2){var s=this._value[n+1];s!==Jf&&s!==void 0&&(s===ak?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):hm(a,s)&&(r+=this.consumeStringSlice(n),r+=Xs(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},e.prototype.consumeNumber=function(){var t=[],r=IC,n=this.peekCodePoint(0);for((n===_g||n===oc)&&t.push(this.consumeCodePoint());il(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===TE&&il(a))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=_Z;il(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===a0e||n===r0e)&&((a===_g||a===oc)&&il(s)||il(a)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=_Z;il(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[wpt(t),r]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),r=t[0],n=t[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(eS(a,s,i)){var o=this.consumeName();return{type:15,number:r,flags:n,unit:o}}return a===Vmt?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(Lv(t)){for(var r=Xs(t);Lv(this.peekCodePoint(0))&&r.length<6;)r+=Xs(this.consumeCodePoint());Z5(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||ppt(n)||n>1114111?kZ:n}return t===Jf?kZ:t},e.prototype.consumeName=function(){for(var t="";;){var r=this.consumeCodePoint();if(BZ(r))t+=Xs(r);else if(hm(r,this.peekCodePoint(0)))t+=Xs(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),t}},e}(),o0e=function(){function e(t){this._tokens=t}return e.create=function(t){var r=new i0e;return r.write(t),new e(r.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var r=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var r=this.consumeComponentValue();if(r.type===32)return t;t.push(r),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var r={type:t,values:[]},n=this.consumeToken();;){if(n.type===32||Vpt(n,t))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var r={name:t.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?oR:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),FC=function(e){return e.type===15},oy=function(e){return e.type===17},ka=function(e){return e.type===20},Hpt=function(e){return e.type===0},lR=function(e,t){return ka(e)&&e.value===t},l0e=function(e){return e.type!==31},Eb=function(e){return e.type!==31&&e.type!==4},PA=function(e){var t=[],r=[];return e.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&t.push(r),t},Vpt=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},fp=function(e){return e.type===17||e.type===15},Ei=function(e){return e.type===16||fp(e)},c0e=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Oo={type:17,number:0,flags:IC},X7={type:16,number:50,flags:IC},Bm={type:16,number:100,flags:IC},qw=function(e,t,r){var n=e[0],a=e[1];return[Qa(n,t),Qa(typeof a<"u"?a:n,r)]},Qa=function(e,t){if(e.type===16)return e.number/100*t;if(FC(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},u0e="deg",d0e="grad",f0e="rad",A0e="turn",QT={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case u0e:return Math.PI*t.number/180;case d0e:return Math.PI/200*t.number;case f0e:return t.number;case A0e:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},h0e=function(e){return e.type===15&&(e.unit===u0e||e.unit===d0e||e.unit===f0e||e.unit===A0e)},m0e=function(e){var t=e.filter(ka).map(function(r){return r.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Oo,Oo];case"to top":case"bottom":return nd(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Oo,Bm];case"to right":case"left":return nd(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Bm,Bm];case"to bottom":case"top":return nd(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Bm,Oo];case"to left":case"right":return nd(270)}return 0},nd=function(e){return Math.PI*e/180},Vm={name:"color",parse:function(e,t){if(t.type===18){var r=zpt[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(e,t.values)}if(t.type===5){if(t.value.length===3){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3);return Tm(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(t.value.length===4){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3),i=t.value.substring(3,4);return Tm(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(t.value.length===6){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6);return Tm(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(t.value.length===8){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6),i=t.value.substring(6,8);return Tm(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(i,16)/255)}}if(t.type===20){var o=Hh[t.value.toUpperCase()];if(typeof o<"u")return o}return Hh.TRANSPARENT}},zm=function(e){return(255&e)===0},Ji=function(e){var t=255&e,r=255&e>>8,n=255&e>>16,a=255&e>>24;return t<255?"rgba("+a+","+n+","+r+","+t/255+")":"rgb("+a+","+n+","+r+")"},Tm=function(e,t,r,n){return(e<<24|t<<16|r<<8|Math.round(n*255)<<0)>>>0},TZ=function(e,t){if(e.type===17)return e.number;if(e.type===16){var r=t===3?1:255;return t===3?e.number/100*r:Math.round(e.number/100*r)}return 0},jZ=function(e,t){var r=t.filter(Eb);if(r.length===3){var n=r.map(TZ),a=n[0],s=n[1],i=n[2];return Tm(a,s,i,1)}if(r.length===4){var o=r.map(TZ),a=o[0],s=o[1],i=o[2],c=o[3];return Tm(a,s,i,c)}return 0};function PF(e,t,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(t-e)*r*6+e:r<1/2?t:r<2/3?(t-e)*6*(2/3-r)+e:e}var IZ=function(e,t){var r=t.filter(Eb),n=r[0],a=r[1],s=r[2],i=r[3],o=(n.type===17?nd(n.number):QT.parse(e,n))/(Math.PI*2),c=Ei(a)?a.number/100:0,u=Ei(s)?s.number/100:0,d=typeof i<"u"&&Ei(i)?Qa(i,1):1;if(c===0)return Tm(u*255,u*255,u*255,1);var f=u<=.5?u*(c+1):u+c-u*c,h=u*2-f,m=PF(h,f,o+1/3),g=PF(h,f,o),x=PF(h,f,o-1/3);return Tm(m*255,g*255,x*255,d)},zpt={hsl:IZ,hsla:IZ,rgb:jZ,rgba:jZ},C2=function(e,t){return Vm.parse(e,o0e.create(t).parseComponentValue())},Hh={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},$pt={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(ka(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Gpt={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},HT=function(e,t){var r=Vm.parse(e,t[0]),n=t[1];return n&&Ei(n)?{color:r,stop:n}:{color:r,stop:null}},FZ=function(e,t){var r=e[0],n=e[e.length-1];r.stop===null&&(r.stop=Oo),n.stop===null&&(n.stop=Bm);for(var a=[],s=0,i=0;i<e.length;i++){var o=e[i].stop;if(o!==null){var c=Qa(o,t);c>s?a.push(c):a.push(s),s=c}else a.push(null)}for(var u=null,i=0;i<a.length;i++){var d=a[i];if(d===null)u===null&&(u=i);else if(u!==null){for(var f=i-u,h=a[u-1],m=(d-h)/(f+1),g=1;g<=f;g++)a[u+g-1]=m*g;u=null}}return e.map(function(x,v){var y=x.color;return{color:y,stop:Math.max(Math.min(1,a[v]/t),0)}})},Kpt=function(e,t,r){var n=t/2,a=r/2,s=Qa(e[0],t)-n,i=a-Qa(e[1],r);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},qpt=function(e,t,r){var n=typeof e=="number"?e:Kpt(e,t,r),a=Math.abs(t*Math.sin(n))+Math.abs(r*Math.cos(n)),s=t/2,i=r/2,o=a/2,c=Math.sin(n-Math.PI/2)*o,u=Math.cos(n-Math.PI/2)*o;return[a,s-u,s+u,i-c,i+c]},Hd=function(e,t){return Math.sqrt(e*e+t*t)},OZ=function(e,t,r,n,a){var s=[[0,0],[0,t],[e,0],[e,t]];return s.reduce(function(i,o){var c=o[0],u=o[1],d=Hd(r-c,n-u);return(a?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:o,optimumDistance:d}:i},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},Wpt=function(e,t,r,n,a){var s=0,i=0;switch(e.size){case 0:e.shape===0?s=i=Math.min(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.min(Math.abs(t),Math.abs(t-n)),i=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(e.shape===0)s=i=Math.min(Hd(t,r),Hd(t,r-a),Hd(t-n,r),Hd(t-n,r-a));else if(e.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(t),Math.abs(t-n)),c=OZ(n,a,t,r,!0),u=c[0],d=c[1];s=Hd(u-t,(d-r)/o),i=o*s}break;case 1:e.shape===0?s=i=Math.max(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.max(Math.abs(t),Math.abs(t-n)),i=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(e.shape===0)s=i=Math.max(Hd(t,r),Hd(t,r-a),Hd(t-n,r),Hd(t-n,r-a));else if(e.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(t),Math.abs(t-n)),f=OZ(n,a,t,r,!1),u=f[0],d=f[1];s=Hd(u-t,(d-r)/o),i=o*s}break}return Array.isArray(e.size)&&(s=Qa(e.size[0],n),i=e.size.length===2?Qa(e.size[1],a):s),[s,i]},Xpt=function(e,t){var r=nd(180),n=[];return PA(t).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&i.value==="to"){r=m0e(a);return}else if(h0e(i)){r=QT.parse(e,i);return}}var o=HT(e,a);n.push(o)}),{angle:r,stops:n,type:1}},rS=function(e,t){var r=nd(180),n=[];return PA(t).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=m0e(a);return}else if(h0e(i)){r=(QT.parse(e,i)+nd(270))%nd(360);return}}var o=HT(e,a);n.push(o)}),{angle:r,stops:n,type:1}},Ypt=function(e,t){var r=nd(180),n=[],a=1,s=0,i=3,o=[];return PA(t).forEach(function(c,u){var d=c[0];if(u===0){if(ka(d)&&d.value==="linear"){a=1;return}else if(ka(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var f=Vm.parse(e,d.values[0]);n.push({stop:Oo,color:f})}else if(d.name==="to"){var f=Vm.parse(e,d.values[0]);n.push({stop:Bm,color:f})}else if(d.name==="color-stop"){var h=d.values.filter(Eb);if(h.length===2){var f=Vm.parse(e,h[1]),m=h[0];oy(m)&&n.push({stop:{type:16,number:m.number*100,flags:m.flags},color:f})}}}}),a===1?{angle:(r+nd(180))%nd(360),stops:n,type:a}:{size:i,shape:s,stops:n,position:o,type:a}},p0e="closest-side",g0e="farthest-side",x0e="closest-corner",v0e="farthest-corner",b0e="circle",y0e="ellipse",w0e="cover",E0e="contain",Jpt=function(e,t){var r=0,n=3,a=[],s=[];return PA(t).forEach(function(i,o){var c=!0;if(o===0){var u=!1;c=i.reduce(function(f,h){if(u)if(ka(h))switch(h.value){case"center":return s.push(X7),f;case"top":case"left":return s.push(Oo),f;case"right":case"bottom":return s.push(Bm),f}else(Ei(h)||fp(h))&&s.push(h);else if(ka(h))switch(h.value){case b0e:return r=0,!1;case y0e:return r=1,!1;case"at":return u=!0,!1;case p0e:return n=0,!1;case w0e:case g0e:return n=1,!1;case E0e:case x0e:return n=2,!1;case v0e:return n=3,!1}else if(fp(h)||Ei(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return f},c)}if(c){var d=HT(e,i);a.push(d)}}),{size:n,shape:r,stops:a,position:s,type:2}},nS=function(e,t){var r=0,n=3,a=[],s=[];return PA(t).forEach(function(i,o){var c=!0;if(o===0?c=i.reduce(function(d,f){if(ka(f))switch(f.value){case"center":return s.push(X7),!1;case"top":case"left":return s.push(Oo),!1;case"right":case"bottom":return s.push(Bm),!1}else if(Ei(f)||fp(f))return s.push(f),!1;return d},c):o===1&&(c=i.reduce(function(d,f){if(ka(f))switch(f.value){case b0e:return r=0,!1;case y0e:return r=1,!1;case E0e:case p0e:return n=0,!1;case g0e:return n=1,!1;case x0e:return n=2,!1;case w0e:case v0e:return n=3,!1}else if(fp(f)||Ei(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return d},c)),c){var u=HT(e,i);a.push(u)}}),{size:n,shape:r,stops:a,position:s,type:2}},Zpt=function(e){return e.type===1},egt=function(e){return e.type===2},Y7={name:"image",parse:function(e,t){if(t.type===22){var r={url:t.value,type:0};return e.cache.addImage(t.value),r}if(t.type===18){var n=C0e[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return n(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function tgt(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!C0e[e.name])}var C0e={"linear-gradient":Xpt,"-moz-linear-gradient":rS,"-ms-linear-gradient":rS,"-o-linear-gradient":rS,"-webkit-linear-gradient":rS,"radial-gradient":Jpt,"-moz-radial-gradient":nS,"-ms-radial-gradient":nS,"-o-radial-gradient":nS,"-webkit-radial-gradient":nS,"-webkit-gradient":Ypt},rgt={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t.filter(function(n){return Eb(n)&&tgt(n)}).map(function(n){return Y7.parse(e,n)})}},ngt={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(ka(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},agt={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return PA(t).map(function(r){return r.filter(Ei)}).map(c0e)}},sgt={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return PA(t).map(function(r){return r.filter(ka).map(function(n){return n.value}).join(" ")}).map(igt)}},igt=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},P1;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(P1||(P1={}));var ogt={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return PA(t).map(function(r){return r.filter(lgt)})}},lgt=function(e){return ka(e)||Ei(e)},VT=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},cgt=VT("top"),ugt=VT("right"),dgt=VT("bottom"),fgt=VT("left"),zT=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,r){return c0e(r.filter(Ei))}}},Agt=zT("top-left"),hgt=zT("top-right"),mgt=zT("bottom-right"),pgt=zT("bottom-left"),$T=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},ggt=$T("top"),xgt=$T("right"),vgt=$T("bottom"),bgt=$T("left"),GT=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,r){return FC(r)?r.number:0}}},ygt=GT("top"),wgt=GT("right"),Egt=GT("bottom"),Cgt=GT("left"),_gt={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Sgt={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},Ngt={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(ka).reduce(function(r,n){return r|kgt(n.value)},0)}},kgt=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Bgt={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Tgt={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},ik;(function(e){e.NORMAL="normal",e.STRICT="strict"})(ik||(ik={}));var jgt={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return ik.STRICT;case"normal":default:return ik.NORMAL}}},Igt={name:"line-height",initialValue:"normal",prefix:!1,type:4},DZ=function(e,t){return ka(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:Ei(e)?Qa(e,t):t},Fgt={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:Y7.parse(e,t)}},Ogt={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},cR={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},KT=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},Dgt=KT("top"),Pgt=KT("right"),Rgt=KT("bottom"),Lgt=KT("left"),Mgt={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(ka).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Ugt={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},qT=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Qgt=qT("top"),Hgt=qT("right"),Vgt=qT("bottom"),zgt=qT("left"),$gt={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Ggt={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Kgt={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&lR(t[0],"none")?[]:PA(t).map(function(r){for(var n={color:Hh.TRANSPARENT,offsetX:Oo,offsetY:Oo,blur:Oo},a=0,s=0;s<r.length;s++){var i=r[s];fp(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:n.blur=i,a++):n.color=Vm.parse(e,i)}return n})}},qgt={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Wgt={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var r=Jgt[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},Xgt=function(e){var t=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return t.length===6?t:null},Ygt=function(e){var t=e.filter(function(c){return c.type===17}).map(function(c){return c.number}),r=t[0],n=t[1];t[2],t[3];var a=t[4],s=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var i=t[12],o=t[13];return t[14],t[15],t.length===16?[r,n,a,s,i,o]:null},Jgt={matrix:Xgt,matrix3d:Ygt},PZ={type:16,number:50,flags:IC},Zgt=[PZ,PZ],ext={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var r=t.filter(Ei);return r.length!==2?Zgt:[r[0],r[1]]}},txt={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},_2;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(_2||(_2={}));var rxt={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return _2.BREAK_ALL;case"keep-all":return _2.KEEP_ALL;case"normal":default:return _2.NORMAL}}},nxt={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(oy(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},_0e={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},axt={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return oy(t)?t.number:1}},sxt={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},ixt={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(ka).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},oxt={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var r=[],n=[];return t.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},lxt={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},cxt={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(oy(t))return t.number;if(ka(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},uxt={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(ka).map(function(r){return r.value})}},dxt={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Oi=function(e,t){return(e&t)!==0},fxt={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t}},Axt={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=t.filter(l0e),s=0;s<a.length;s++){var i=a[s],o=a[s+1];if(i.type===20){var c=o&&oy(o)?o.number:1;n.push({counter:i.value,increment:c})}}return n}},hxt={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var r=[],n=t.filter(l0e),a=0;a<n.length;a++){var s=n[a],i=n[a+1];if(ka(s)&&s.value!=="none"){var o=i&&oy(i)?i.number:0;r.push({counter:s.value,reset:o})}}return r}},mxt={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(FC).map(function(r){return _0e.parse(e,r)})}},pxt={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;var n=[],a=t.filter(Hpt);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var i=a[s].value,o=a[s+1].value;n.push({open:i,close:o})}return n}},RZ=function(e,t,r){if(!e)return"";var n=e[Math.min(t,e.length-1)];return n?r?n.open:n.close:""},gxt={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&lR(t[0],"none")?[]:PA(t).map(function(r){for(var n={color:255,offsetX:Oo,offsetY:Oo,blur:Oo,spread:Oo,inset:!1},a=0,s=0;s<r.length;s++){var i=r[s];lR(i,"inset")?n.inset=!0:fp(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:a===2?n.blur=i:n.spread=i,a++):n.color=Vm.parse(e,i)}return n})}},xxt={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var r=[0,1,2],n=[];return t.filter(ka).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},vxt={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},bxt={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return FC(t)?t.number:0}},yxt=function(){function e(t,r){var n,a;this.animationDuration=lr(t,mxt,r.animationDuration),this.backgroundClip=lr(t,$pt,r.backgroundClip),this.backgroundColor=lr(t,Gpt,r.backgroundColor),this.backgroundImage=lr(t,rgt,r.backgroundImage),this.backgroundOrigin=lr(t,ngt,r.backgroundOrigin),this.backgroundPosition=lr(t,agt,r.backgroundPosition),this.backgroundRepeat=lr(t,sgt,r.backgroundRepeat),this.backgroundSize=lr(t,ogt,r.backgroundSize),this.borderTopColor=lr(t,cgt,r.borderTopColor),this.borderRightColor=lr(t,ugt,r.borderRightColor),this.borderBottomColor=lr(t,dgt,r.borderBottomColor),this.borderLeftColor=lr(t,fgt,r.borderLeftColor),this.borderTopLeftRadius=lr(t,Agt,r.borderTopLeftRadius),this.borderTopRightRadius=lr(t,hgt,r.borderTopRightRadius),this.borderBottomRightRadius=lr(t,mgt,r.borderBottomRightRadius),this.borderBottomLeftRadius=lr(t,pgt,r.borderBottomLeftRadius),this.borderTopStyle=lr(t,ggt,r.borderTopStyle),this.borderRightStyle=lr(t,xgt,r.borderRightStyle),this.borderBottomStyle=lr(t,vgt,r.borderBottomStyle),this.borderLeftStyle=lr(t,bgt,r.borderLeftStyle),this.borderTopWidth=lr(t,ygt,r.borderTopWidth),this.borderRightWidth=lr(t,wgt,r.borderRightWidth),this.borderBottomWidth=lr(t,Egt,r.borderBottomWidth),this.borderLeftWidth=lr(t,Cgt,r.borderLeftWidth),this.boxShadow=lr(t,gxt,r.boxShadow),this.color=lr(t,_gt,r.color),this.direction=lr(t,Sgt,r.direction),this.display=lr(t,Ngt,r.display),this.float=lr(t,Bgt,r.cssFloat),this.fontFamily=lr(t,oxt,r.fontFamily),this.fontSize=lr(t,lxt,r.fontSize),this.fontStyle=lr(t,dxt,r.fontStyle),this.fontVariant=lr(t,uxt,r.fontVariant),this.fontWeight=lr(t,cxt,r.fontWeight),this.letterSpacing=lr(t,Tgt,r.letterSpacing),this.lineBreak=lr(t,jgt,r.lineBreak),this.lineHeight=lr(t,Igt,r.lineHeight),this.listStyleImage=lr(t,Fgt,r.listStyleImage),this.listStylePosition=lr(t,Ogt,r.listStylePosition),this.listStyleType=lr(t,cR,r.listStyleType),this.marginTop=lr(t,Dgt,r.marginTop),this.marginRight=lr(t,Pgt,r.marginRight),this.marginBottom=lr(t,Rgt,r.marginBottom),this.marginLeft=lr(t,Lgt,r.marginLeft),this.opacity=lr(t,axt,r.opacity);var s=lr(t,Mgt,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=lr(t,Ugt,r.overflowWrap),this.paddingTop=lr(t,Qgt,r.paddingTop),this.paddingRight=lr(t,Hgt,r.paddingRight),this.paddingBottom=lr(t,Vgt,r.paddingBottom),this.paddingLeft=lr(t,zgt,r.paddingLeft),this.paintOrder=lr(t,xxt,r.paintOrder),this.position=lr(t,Ggt,r.position),this.textAlign=lr(t,$gt,r.textAlign),this.textDecorationColor=lr(t,sxt,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=lr(t,ixt,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=lr(t,Kgt,r.textShadow),this.textTransform=lr(t,qgt,r.textTransform),this.transform=lr(t,Wgt,r.transform),this.transformOrigin=lr(t,ext,r.transformOrigin),this.visibility=lr(t,txt,r.visibility),this.webkitTextStrokeColor=lr(t,vxt,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=lr(t,bxt,r.webkitTextStrokeWidth),this.wordBreak=lr(t,rxt,r.wordBreak),this.zIndex=lr(t,nxt,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return zm(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return Oi(this.display,4)||Oi(this.display,33554432)||Oi(this.display,268435456)||Oi(this.display,536870912)||Oi(this.display,67108864)||Oi(this.display,134217728)},e}(),wxt=function(){function e(t,r){this.content=lr(t,fxt,r.content),this.quotes=lr(t,pxt,r.quotes)}return e}(),LZ=function(){function e(t,r){this.counterIncrement=lr(t,Axt,r.counterIncrement),this.counterReset=lr(t,hxt,r.counterReset)}return e}(),lr=function(e,t,r){var n=new i0e,a=r!==null&&typeof r<"u"?r.toString():t.initialValue;n.write(a);var s=new o0e(n.read());switch(t.type){case 2:var i=s.parseComponentValue();return t.parse(e,ka(i)?i.value:t.initialValue);case 0:return t.parse(e,s.parseComponentValue());case 1:return t.parse(e,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(t.format){case"angle":return QT.parse(e,s.parseComponentValue());case"color":return Vm.parse(e,s.parseComponentValue());case"image":return Y7.parse(e,s.parseComponentValue());case"length":var o=s.parseComponentValue();return fp(o)?o:Oo;case"length-percentage":var c=s.parseComponentValue();return Ei(c)?c:Oo;case"time":return _0e.parse(e,s.parseComponentValue())}break}},Ext="data-html2canvas-debug",Cxt=function(e){var t=e.getAttribute(Ext);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},uR=function(e,t){var r=Cxt(e);return r===1||t===r},RA=function(){function e(t,r){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,uR(r,3))debugger;this.styles=new yxt(t,window.getComputedStyle(r,null)),AR(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=MT(this.context,r),uR(r,4)&&(this.flags|=16)}return e}(),_xt="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",MZ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ww=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var aS=0;aS<MZ.length;aS++)Ww[MZ.charCodeAt(aS)]=aS;var Sxt=function(e){var t=e.length*.75,r=e.length,n,a=0,s,i,o,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=Ww[e.charCodeAt(n)],i=Ww[e.charCodeAt(n+1)],o=Ww[e.charCodeAt(n+2)],c=Ww[e.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|o>>2,d[a++]=(o&3)<<6|c&63;return u},Nxt=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},kxt=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},zg=5,J7=11,RF=2,Bxt=J7-zg,S0e=65536>>zg,Txt=1<<zg,LF=Txt-1,jxt=1024>>zg,Ixt=S0e+jxt,Fxt=Ixt,Oxt=32,Dxt=Fxt+Oxt,Pxt=65536>>J7,Rxt=1<<Bxt,Lxt=Rxt-1,UZ=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},Mxt=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},Uxt=function(e,t){var r=Sxt(e),n=Array.isArray(r)?kxt(r):new Uint32Array(r),a=Array.isArray(r)?Nxt(r):new Uint16Array(r),s=24,i=UZ(a,s/2,n[4]/2),o=n[5]===2?UZ(a,(s+n[4])/2):Mxt(n,Math.ceil((s+n[4])/4));return new Qxt(n[0],n[1],n[2],n[3],i,o)},Qxt=function(){function e(t,r,n,a,s,i){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>zg],r=(r<<RF)+(t&LF),this.data[r];if(t<=65535)return r=this.index[S0e+(t-55296>>zg)],r=(r<<RF)+(t&LF),this.data[r];if(t<this.highStart)return r=Dxt-Pxt+(t>>J7),r=this.index[r],r+=t>>zg&Lxt,r=this.index[r],r=(r<<RF)+(t&LF),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),QZ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Hxt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var sS=0;sS<QZ.length;sS++)Hxt[QZ.charCodeAt(sS)]=sS;var Vxt=1,MF=2,UF=3,HZ=4,VZ=5,zxt=7,zZ=8,QF=9,HF=10,$Z=11,GZ=12,KZ=13,qZ=14,VF=15,$xt=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},Gxt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=e[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},Kxt=Uxt(_xt),Ku="×",zF="÷",qxt=function(e){return Kxt.get(e)},Wxt=function(e,t,r){var n=r-2,a=t[n],s=t[r-1],i=t[r];if(s===MF&&i===UF)return Ku;if(s===MF||s===UF||s===HZ||i===MF||i===UF||i===HZ)return zF;if(s===zZ&&[zZ,QF,$Z,GZ].indexOf(i)!==-1||(s===$Z||s===QF)&&(i===QF||i===HF)||(s===GZ||s===HF)&&i===HF||i===KZ||i===VZ||i===zxt||s===Vxt)return Ku;if(s===KZ&&i===qZ){for(;a===VZ;)a=t[--n];if(a===qZ)return Ku}if(s===VF&&i===VF){for(var o=0;a===VF;)o++,a=t[--n];if(o%2===0)return Ku}return zF},Xxt=function(e){var t=$xt(e),r=t.length,n=0,a=0,s=t.map(qxt);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=Ku;n<r&&(i=Wxt(t,s,++n))===Ku;);if(i!==Ku||n===r){var o=Gxt.apply(null,t.slice(a,n));return a=n,{value:o,done:!1}}return{done:!0,value:null}}}},Yxt=function(e){for(var t=Xxt(e),r=[],n;!(n=t.next()).done;)n.value&&r.push(n.value.slice());return r},Jxt=function(e){var t=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height=t+"px",n.style.display="block",e.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(e.body.removeChild(n),s===t)return!0}}return!1},Zxt=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var r=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=t.firstChild,a=UT(n.data).map(function(c){return Xs(c)}),s=0,i={},o=a.every(function(c,u){r.setStart(n,s),r.setEnd(n,s+c.length);var d=r.getBoundingClientRect();s+=c.length;var f=d.x>i.x||d.y>i.y;return i=d,u===0?!0:f});return e.body.removeChild(t),o},evt=function(){return typeof new Image().crossOrigin<"u"},tvt=function(){return typeof new XMLHttpRequest().responseType=="string"},rvt=function(e){var t=new Image,r=e.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),r.toDataURL()}catch{return!1}return!0},WZ=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},nvt=function(e){var t=e.createElement("canvas"),r=100;t.width=r,t.height=r;var n=t.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=t.toDataURL();a.src=s;var i=dR(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),XZ(i).then(function(o){n.drawImage(o,0,0);var c=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=e.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",WZ(c)?XZ(dR(r,r,0,0,u)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),WZ(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},dR=function(e,t,r,n,a){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",e.toString()),i.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(a),i},XZ=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){return t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},_o={get SUPPORT_RANGE_BOUNDS(){var e=Jxt(document);return Object.defineProperty(_o,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=_o.SUPPORT_RANGE_BOUNDS&&Zxt(document);return Object.defineProperty(_o,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=rvt(document);return Object.defineProperty(_o,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?nvt(document):Promise.resolve(!1);return Object.defineProperty(_o,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=evt();return Object.defineProperty(_o,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=tvt();return Object.defineProperty(_o,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(_o,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(_o,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},S2=function(){function e(t,r){this.text=t,this.bounds=r}return e}(),avt=function(e,t,r,n){var a=ovt(t,r),s=[],i=0;return a.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(_o.SUPPORT_RANGE_BOUNDS){var c=YZ(n,i,o.length).getClientRects();if(c.length>1){var u=Z7(o),d=0;u.forEach(function(h){s.push(new S2(h,o0.fromDOMRectList(e,YZ(n,d+i,h.length).getClientRects()))),d+=h.length})}else s.push(new S2(o,o0.fromDOMRectList(e,c)))}else{var f=n.splitText(o.length);s.push(new S2(o,svt(e,n))),n=f}else _o.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));i+=o.length}),s},svt=function(e,t){var r=t.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var a=t.parentNode;if(a){a.replaceChild(n,t);var s=MT(e,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return o0.EMPTY},YZ=function(e,t,r){var n=e.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(e,t),a.setEnd(e,t+r),a},Z7=function(e){if(_o.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(r){return r.segment})}return Yxt(e)},ivt=function(e,t){if(_o.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(n){return n.segment})}return cvt(e,t)},ovt=function(e,t){return t.letterSpacing!==0?Z7(e):ivt(e,t)},lvt=[32,160,4961,65792,65793,4153,4241],cvt=function(e,t){for(var r=Pmt(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),n=[],a,s=function(){if(a.value){var i=a.value.slice(),o=UT(i),c="";o.forEach(function(u){lvt.indexOf(u)===-1?c+=Xs(u):(c.length&&n.push(c),n.push(Xs(u)),c="")}),c.length&&n.push(c)}};!(a=r.next()).done;)s();return n},uvt=function(){function e(t,r,n){this.text=dvt(r.data,n.textTransform),this.textBounds=avt(t,this.text,n,r)}return e}(),dvt=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(fvt,Avt);case 2:return e.toUpperCase();default:return e}},fvt=/(^|\s|:|-|\(|\))([a-z])/g,Avt=function(e,t,r){return e.length>0?t+r.toUpperCase():e},N0e=function(e){xf(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return t}(RA),k0e=function(e){xf(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return t}(RA),B0e=function(e){xf(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=new XMLSerializer,i=MT(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return t}(RA),T0e=function(e){xf(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(RA),fR=function(e){xf(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return t}(RA),hvt=[{type:15,flags:0,unit:"px",number:3}],mvt=[{type:16,flags:0,number:50}],pvt=function(e){return e.width>e.height?new o0(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new o0(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},gvt=function(e){var t=e.type===xvt?new Array(e.value.length+1).join("•"):e.value;return t.length===0?e.placeholder||"":t},ok="checkbox",lk="radio",xvt="password",JZ=707406591,e9=function(e){xf(t,e);function t(r,n){var a=e.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=gvt(n),(a.type===ok||a.type===lk)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=pvt(a.bounds)),a.type){case ok:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=hvt;break;case lk:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=mvt;break}return a}return t}(RA),j0e=function(e){xf(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return t}(RA),I0e=function(e){xf(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(RA),F0e=function(e){xf(t,e);function t(r,n){var a=e.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=D0e(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?C2(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):Hh.TRANSPARENT,i=n.contentWindow.document.body?C2(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):Hh.TRANSPARENT;a.backgroundColor=zm(s)?zm(i)?a.styles.backgroundColor:i:s}}catch{}return a}return t}(RA),vvt=["OL","UL","MENU"],tN=function(e,t,r,n){for(var a=t.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,P0e(a)&&a.data.trim().length>0)r.textNodes.push(new uvt(e,a,r.styles));else if(d1(a))if(U0e(a)&&a.assignedNodes)a.assignedNodes().forEach(function(o){return tN(e,o,r,n)});else{var i=O0e(e,a);i.styles.isVisible()&&(bvt(a,i,n)?i.flags|=4:yvt(i.styles)&&(i.flags|=2),vvt.indexOf(a.tagName)!==-1&&(i.flags|=8),r.elements.push(i),a.slot,a.shadowRoot?tN(e,a.shadowRoot,i,n):!ck(a)&&!R0e(a)&&!uk(a)&&tN(e,a,i,n))}},O0e=function(e,t){return hR(t)?new N0e(e,t):L0e(t)?new k0e(e,t):R0e(t)?new B0e(e,t):wvt(t)?new T0e(e,t):Evt(t)?new fR(e,t):Cvt(t)?new e9(e,t):uk(t)?new j0e(e,t):ck(t)?new I0e(e,t):M0e(t)?new F0e(e,t):new RA(e,t)},D0e=function(e,t){var r=O0e(e,t);return r.flags|=4,tN(e,t,r,r),r},bvt=function(e,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||t9(e)&&r.styles.isTransparent()},yvt=function(e){return e.isPositioned()||e.isFloating()},P0e=function(e){return e.nodeType===Node.TEXT_NODE},d1=function(e){return e.nodeType===Node.ELEMENT_NODE},AR=function(e){return d1(e)&&typeof e.style<"u"&&!rN(e)},rN=function(e){return typeof e.className=="object"},wvt=function(e){return e.tagName==="LI"},Evt=function(e){return e.tagName==="OL"},Cvt=function(e){return e.tagName==="INPUT"},_vt=function(e){return e.tagName==="HTML"},R0e=function(e){return e.tagName==="svg"},t9=function(e){return e.tagName==="BODY"},L0e=function(e){return e.tagName==="CANVAS"},ZZ=function(e){return e.tagName==="VIDEO"},hR=function(e){return e.tagName==="IMG"},M0e=function(e){return e.tagName==="IFRAME"},eee=function(e){return e.tagName==="STYLE"},Svt=function(e){return e.tagName==="SCRIPT"},ck=function(e){return e.tagName==="TEXTAREA"},uk=function(e){return e.tagName==="SELECT"},U0e=function(e){return e.tagName==="SLOT"},tee=function(e){return e.tagName.indexOf("-")>0},Nvt=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var r=this.counters[t];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(t){var r=this.counters[t];return r||[]},e.prototype.pop=function(t){var r=this;t.forEach(function(n){return r.counters[n].pop()})},e.prototype.parse=function(t){var r=this,n=t.counterIncrement,a=t.counterReset,s=!0;n!==null&&n.forEach(function(o){var c=r.counters[o.counter];c&&o.increment!==0&&(s=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=o.increment)});var i=[];return s&&a.forEach(function(o){var c=r.counters[o.counter];i.push(o.counter),c||(c=r.counters[o.counter]=[]),c.push(o.reset)}),i},e}(),ree={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},nee={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},kvt={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},Bvt={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},Mv=function(e,t,r,n,a,s){return e<t||e>r?jE(e,a,s.length>0):n.integers.reduce(function(i,o,c){for(;e>=o;)e-=o,i+=n.values[c];return i},"")+s},Q0e=function(e,t,r,n){var a="";do r||e--,a=n(e)+a,e/=t;while(e*t>=t);return a},Ks=function(e,t,r,n,a){var s=r-t+1;return(e<0?"-":"")+(Q0e(Math.abs(e),s,n,function(i){return Xs(Math.floor(i%s)+t)})+a)},eg=function(e,t,r){r===void 0&&(r=". ");var n=t.length;return Q0e(Math.abs(e),n,!1,function(a){return t[Math.floor(a%n)]})+r},Yv=1,cm=2,um=4,Xw=8,vh=function(e,t,r,n,a,s){if(e<-9999||e>9999)return jE(e,4,a.length>0);var i=Math.abs(e),o=a;if(i===0)return t[0]+o;for(var c=0;i>0&&c<=4;c++){var u=i%10;u===0&&Oi(s,Yv)&&o!==""?o=t[u]+o:u>1||u===1&&c===0||u===1&&c===1&&Oi(s,cm)||u===1&&c===1&&Oi(s,um)&&e>100||u===1&&c>1&&Oi(s,Xw)?o=t[u]+(c>0?r[c-1]:"")+o:u===1&&c>0&&(o=r[c-1]+o),i=Math.floor(i/10)}return(e<0?n:"")+o},aee="十百千萬",see="拾佰仟萬",iee="マイナス",$F="마이너스",jE=function(e,t,r){var n=r?". ":"",a=r?"、":"",s=r?", ":"",i=r?" ":"";switch(t){case 0:return"•"+i;case 1:return"◦"+i;case 2:return"◾"+i;case 5:var o=Ks(e,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return eg(e,"〇一二三四五六七八九",a);case 6:return Mv(e,1,3999,ree,3,n).toLowerCase();case 7:return Mv(e,1,3999,ree,3,n);case 8:return Ks(e,945,969,!1,n);case 9:return Ks(e,97,122,!1,n);case 10:return Ks(e,65,90,!1,n);case 11:return Ks(e,1632,1641,!0,n);case 12:case 49:return Mv(e,1,9999,nee,3,n);case 35:return Mv(e,1,9999,nee,3,n).toLowerCase();case 13:return Ks(e,2534,2543,!0,n);case 14:case 30:return Ks(e,6112,6121,!0,n);case 15:return eg(e,"子丑寅卯辰巳午未申酉戌亥",a);case 16:return eg(e,"甲乙丙丁戊己庚辛壬癸",a);case 17:case 48:return vh(e,"零一二三四五六七八九",aee,"負",a,cm|um|Xw);case 47:return vh(e,"零壹貳參肆伍陸柒捌玖",see,"負",a,Yv|cm|um|Xw);case 42:return vh(e,"零一二三四五六七八九",aee,"负",a,cm|um|Xw);case 41:return vh(e,"零壹贰叁肆伍陆柒捌玖",see,"负",a,Yv|cm|um|Xw);case 26:return vh(e,"〇一二三四五六七八九","十百千万",iee,a,0);case 25:return vh(e,"零壱弐参四伍六七八九","拾百千万",iee,a,Yv|cm|um);case 31:return vh(e,"영일이삼사오육칠팔구","십백천만",$F,s,Yv|cm|um);case 33:return vh(e,"零一二三四五六七八九","十百千萬",$F,s,0);case 32:return vh(e,"零壹貳參四五六七八九","拾百千",$F,s,Yv|cm|um);case 18:return Ks(e,2406,2415,!0,n);case 20:return Mv(e,1,19999,Bvt,3,n);case 21:return Ks(e,2790,2799,!0,n);case 22:return Ks(e,2662,2671,!0,n);case 22:return Mv(e,1,10999,kvt,3,n);case 23:return eg(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return eg(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Ks(e,3302,3311,!0,n);case 28:return eg(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",a);case 29:return eg(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",a);case 34:return Ks(e,3792,3801,!0,n);case 37:return Ks(e,6160,6169,!0,n);case 38:return Ks(e,4160,4169,!0,n);case 39:return Ks(e,2918,2927,!0,n);case 40:return Ks(e,1776,1785,!0,n);case 43:return Ks(e,3046,3055,!0,n);case 44:return Ks(e,3174,3183,!0,n);case 45:return Ks(e,3664,3673,!0,n);case 46:return Ks(e,3872,3881,!0,n);case 3:default:return Ks(e,48,57,!0,n)}},H0e="data-html2canvas-ignore",oee=function(){function e(t,r,n){if(this.context=t,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new Nvt,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,r){var n=this,a=Tvt(t,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=t.defaultView.pageXOffset,i=t.defaultView.pageYOffset,o=a.contentWindow,c=o.document,u=Fvt(a).then(function(){return Sl(n,void 0,void 0,function(){var d,f;return tl(this,function(h){switch(h.label){case 0:return this.scrolledElements.forEach(Rvt),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:h.sent(),h.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Ivt(c)]:[3,4];case 3:h.sent(),h.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,f)}).then(function(){return a})]:[2,a]}})})});return c.open(),c.write(Dvt(document.doctype)+"<html></html>"),Pvt(this.referenceElement.ownerDocument,s,i),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},e.prototype.createElementClone=function(t){if(uR(t,2))debugger;if(L0e(t))return this.createCanvasClone(t);if(ZZ(t))return this.createVideoClone(t);if(eee(t))return this.createStyleClone(t);var r=t.cloneNode(!1);return hR(r)&&(hR(t)&&t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),tee(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(t){var r=document.createElement("html2canvascustomelement");return GF(t.style,r),r},e.prototype.createStyleClone=function(t){try{var r=t.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),a=t.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var r;if(this.options.inlineImages&&t.ownerDocument){var n=t.ownerDocument.createElement("img");try{return n.src=t.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var a=t.cloneNode(!1);try{a.width=t.width,a.height=t.height;var s=t.getContext("2d"),i=a.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,t.width,t.height),0,0);else{var o=(r=t.getContext("webgl2"))!==null&&r!==void 0?r:t.getContext("webgl");if(o){var c=o.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}i.drawImage(t,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return a},e.prototype.createVideoClone=function(t){var r=t.ownerDocument.createElement("canvas");r.width=t.offsetWidth,r.height=t.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(t,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var a=t.ownerDocument.createElement("canvas");return a.width=t.offsetWidth,a.height=t.offsetHeight,a},e.prototype.appendChildNode=function(t,r,n){(!d1(r)||!Svt(r)&&!r.hasAttribute(H0e)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!d1(r)||!eee(r))&&t.appendChild(this.cloneNode(r,n))},e.prototype.cloneChildNodes=function(t,r,n){for(var a=this,s=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;s;s=s.nextSibling)if(d1(s)&&U0e(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(o){return a.appendChildNode(r,o,n)})}else this.appendChildNode(r,s,n)},e.prototype.cloneNode=function(t,r){if(P0e(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var n=t.ownerDocument.defaultView;if(n&&d1(t)&&(AR(t)||rN(t))){var a=this.createElementClone(t);a.style.transitionProperty="none";var s=n.getComputedStyle(t),i=n.getComputedStyle(t,":before"),o=n.getComputedStyle(t,":after");this.referenceElement===t&&AR(a)&&(this.clonedReferenceElement=a),t9(a)&&Uvt(a);var c=this.counters.parse(new LZ(this.context,s)),u=this.resolvePseudoContent(t,a,i,N2.BEFORE);tee(t)&&(r=!0),ZZ(t)||this.cloneChildNodes(t,a,r),u&&a.insertBefore(u,a.firstChild);var d=this.resolvePseudoContent(t,a,o,N2.AFTER);return d&&a.appendChild(d),this.counters.pop(c),(s&&(this.options.copyStyles||rN(t))&&!M0e(t)||r)&&GF(s,a),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([a,t.scrollLeft,t.scrollTop]),(ck(t)||uk(t))&&(ck(a)||uk(a))&&(a.value=t.value),a}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,r,n,a){var s=this;if(n){var i=n.content,o=r.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new LZ(this.context,n));var c=new wxt(this.context,n),u=o.createElement("html2canvaspseudoelement");GF(n,u),c.content.forEach(function(f){if(f.type===0)u.appendChild(o.createTextNode(f.value));else if(f.type===22){var h=o.createElement("img");h.src=f.value,h.style.opacity="1",u.appendChild(h)}else if(f.type===18){if(f.name==="attr"){var m=f.values.filter(ka);m.length&&u.appendChild(o.createTextNode(t.getAttribute(m[0].value)||""))}else if(f.name==="counter"){var g=f.values.filter(Eb),x=g[0],v=g[1];if(x&&ka(x)){var y=s.counters.getCounterValue(x.value),w=v&&ka(v)?cR.parse(s.context,v.value):3;u.appendChild(o.createTextNode(jE(y,w,!1)))}}else if(f.name==="counters"){var _=f.values.filter(Eb),x=_[0],T=_[1],v=_[2];if(x&&ka(x)){var B=s.counters.getCounterValues(x.value),j=v&&ka(v)?cR.parse(s.context,v.value):3,E=T&&T.type===0?T.value:"",N=B.map(function(D){return jE(D,j,!1)}).join(E);u.appendChild(o.createTextNode(N))}}}else if(f.type===20)switch(f.value){case"open-quote":u.appendChild(o.createTextNode(RZ(c.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(o.createTextNode(RZ(c.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(o.createTextNode(f.value))}}),u.className=mR+" "+pR;var d=a===N2.BEFORE?" "+mR:" "+pR;return rN(r)?r.className.baseValue+=d:r.className+=d,u}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),N2;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(N2||(N2={}));var Tvt=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(H0e,"true"),e.body.appendChild(r),r},jvt=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},Ivt=function(e){return Promise.all([].slice.call(e.images,0).map(jvt))},Fvt=function(e){return new Promise(function(t,r){var n=e.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=e.onload=function(){n.onload=e.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),t(e))},50)}})},Ovt=["all","d","content"],GF=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e.item(r);Ovt.indexOf(n)===-1&&t.style.setProperty(n,e.getPropertyValue(n))}return t},Dvt=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},Pvt=function(e,t,r){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,r)},Rvt=function(e){var t=e[0],r=e[1],n=e[2];t.scrollLeft=r,t.scrollTop=n},Lvt=":before",Mvt=":after",mR="___html2canvas___pseudoelement_before",pR="___html2canvas___pseudoelement_after",lee=`{
    content: "" !important;
    display: none !important;
}`,Uvt=function(e){Qvt(e,"."+mR+Lvt+lee+`
         .`+pR+Mvt+lee)},Qvt=function(e,t){var r=e.ownerDocument;if(r){var n=r.createElement("style");n.textContent=t,e.appendChild(n)}},V0e=function(){function e(){}return e.getOrigin=function(t){var r=e._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),Hvt=function(){function e(t,r){this.context=t,this._options=r,this._cache={}}return e.prototype.addImage=function(t){var r=Promise.resolve();return this.has(t)||(qF(t)||Gvt(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),r},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return Sl(this,void 0,void 0,function(){var r,n,a,s,i=this;return tl(this,function(o){switch(o.label){case 0:return r=V0e.isSameOrigin(t),n=!KF(t)&&this._options.useCORS===!0&&_o.SUPPORT_CORS_IMAGES&&!r,a=!KF(t)&&!r&&!qF(t)&&typeof this._options.proxy=="string"&&_o.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!KF(t)&&!qF(t)&&!a&&!n?[2]:(s=t,a?[4,this.proxy(s)]:[3,2]);case 1:s=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(c,u){var d=new Image;d.onload=function(){return c(d)},d.onerror=u,(Kvt(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return c(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=t.substring(0,256);return new Promise(function(s,i){var o=_o.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(o==="text")s(c.response);else{var f=new FileReader;f.addEventListener("load",function(){return s(f.result)},!1),f.addEventListener("error",function(h){return i(h)},!1),f.readAsDataURL(c.response)}else i("Failed to proxy resource "+a+" with status code "+c.status)},c.onerror=i;var u=n.indexOf("?")>-1?"&":"?";if(c.open("GET",""+n+u+"url="+encodeURIComponent(t)+"&responseType="+o),o!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=o),r._options.imageTimeout){var d=r._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+a)}}c.send()})},e}(),Vvt=/^data:image\/svg\+xml/i,zvt=/^data:image\/.*;base64,/i,$vt=/^data:image\/.*/i,Gvt=function(e){return _o.SUPPORT_SVG_DRAWING||!qvt(e)},KF=function(e){return $vt.test(e)},Kvt=function(e){return zvt.test(e)},qF=function(e){return e.substr(0,4)==="blob"},qvt=function(e){return e.substr(-3).toLowerCase()==="svg"||Vvt.test(e)},sr=function(){function e(t,r){this.type=0,this.x=t,this.y=r}return e.prototype.add=function(t,r){return new e(this.x+t,this.y+r)},e}(),Uv=function(e,t,r){return new sr(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},iS=function(){function e(t,r,n,a){this.type=1,this.start=t,this.startControl=r,this.endControl=n,this.end=a}return e.prototype.subdivide=function(t,r){var n=Uv(this.start,this.startControl,t),a=Uv(this.startControl,this.endControl,t),s=Uv(this.endControl,this.end,t),i=Uv(n,a,t),o=Uv(a,s,t),c=Uv(i,o,t);return r?new e(this.start,n,i,c):new e(c,o,s,this.end)},e.prototype.add=function(t,r){return new e(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Ju=function(e){return e.type===1},Wvt=function(){function e(t){var r=t.styles,n=t.bounds,a=qw(r.borderTopLeftRadius,n.width,n.height),s=a[0],i=a[1],o=qw(r.borderTopRightRadius,n.width,n.height),c=o[0],u=o[1],d=qw(r.borderBottomRightRadius,n.width,n.height),f=d[0],h=d[1],m=qw(r.borderBottomLeftRadius,n.width,n.height),g=m[0],x=m[1],v=[];v.push((s+c)/n.width),v.push((g+f)/n.width),v.push((i+x)/n.height),v.push((u+h)/n.height);var y=Math.max.apply(Math,v);y>1&&(s/=y,i/=y,c/=y,u/=y,f/=y,h/=y,g/=y,x/=y);var w=n.width-c,_=n.height-h,T=n.width-f,B=n.height-x,j=r.borderTopWidth,E=r.borderRightWidth,N=r.borderBottomWidth,I=r.borderLeftWidth,L=Qa(r.paddingTop,t.bounds.width),D=Qa(r.paddingRight,t.bounds.width),k=Qa(r.paddingBottom,t.bounds.width),P=Qa(r.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?rs(n.left+I/3,n.top+j/3,s-I/3,i-j/3,oa.TOP_LEFT):new sr(n.left+I/3,n.top+j/3),this.topRightBorderDoubleOuterBox=s>0||i>0?rs(n.left+w,n.top+j/3,c-E/3,u-j/3,oa.TOP_RIGHT):new sr(n.left+n.width-E/3,n.top+j/3),this.bottomRightBorderDoubleOuterBox=f>0||h>0?rs(n.left+T,n.top+_,f-E/3,h-N/3,oa.BOTTOM_RIGHT):new sr(n.left+n.width-E/3,n.top+n.height-N/3),this.bottomLeftBorderDoubleOuterBox=g>0||x>0?rs(n.left+I/3,n.top+B,g-I/3,x-N/3,oa.BOTTOM_LEFT):new sr(n.left+I/3,n.top+n.height-N/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?rs(n.left+I*2/3,n.top+j*2/3,s-I*2/3,i-j*2/3,oa.TOP_LEFT):new sr(n.left+I*2/3,n.top+j*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?rs(n.left+w,n.top+j*2/3,c-E*2/3,u-j*2/3,oa.TOP_RIGHT):new sr(n.left+n.width-E*2/3,n.top+j*2/3),this.bottomRightBorderDoubleInnerBox=f>0||h>0?rs(n.left+T,n.top+_,f-E*2/3,h-N*2/3,oa.BOTTOM_RIGHT):new sr(n.left+n.width-E*2/3,n.top+n.height-N*2/3),this.bottomLeftBorderDoubleInnerBox=g>0||x>0?rs(n.left+I*2/3,n.top+B,g-I*2/3,x-N*2/3,oa.BOTTOM_LEFT):new sr(n.left+I*2/3,n.top+n.height-N*2/3),this.topLeftBorderStroke=s>0||i>0?rs(n.left+I/2,n.top+j/2,s-I/2,i-j/2,oa.TOP_LEFT):new sr(n.left+I/2,n.top+j/2),this.topRightBorderStroke=s>0||i>0?rs(n.left+w,n.top+j/2,c-E/2,u-j/2,oa.TOP_RIGHT):new sr(n.left+n.width-E/2,n.top+j/2),this.bottomRightBorderStroke=f>0||h>0?rs(n.left+T,n.top+_,f-E/2,h-N/2,oa.BOTTOM_RIGHT):new sr(n.left+n.width-E/2,n.top+n.height-N/2),this.bottomLeftBorderStroke=g>0||x>0?rs(n.left+I/2,n.top+B,g-I/2,x-N/2,oa.BOTTOM_LEFT):new sr(n.left+I/2,n.top+n.height-N/2),this.topLeftBorderBox=s>0||i>0?rs(n.left,n.top,s,i,oa.TOP_LEFT):new sr(n.left,n.top),this.topRightBorderBox=c>0||u>0?rs(n.left+w,n.top,c,u,oa.TOP_RIGHT):new sr(n.left+n.width,n.top),this.bottomRightBorderBox=f>0||h>0?rs(n.left+T,n.top+_,f,h,oa.BOTTOM_RIGHT):new sr(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=g>0||x>0?rs(n.left,n.top+B,g,x,oa.BOTTOM_LEFT):new sr(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||i>0?rs(n.left+I,n.top+j,Math.max(0,s-I),Math.max(0,i-j),oa.TOP_LEFT):new sr(n.left+I,n.top+j),this.topRightPaddingBox=c>0||u>0?rs(n.left+Math.min(w,n.width-E),n.top+j,w>n.width+E?0:Math.max(0,c-E),Math.max(0,u-j),oa.TOP_RIGHT):new sr(n.left+n.width-E,n.top+j),this.bottomRightPaddingBox=f>0||h>0?rs(n.left+Math.min(T,n.width-I),n.top+Math.min(_,n.height-N),Math.max(0,f-E),Math.max(0,h-N),oa.BOTTOM_RIGHT):new sr(n.left+n.width-E,n.top+n.height-N),this.bottomLeftPaddingBox=g>0||x>0?rs(n.left+I,n.top+Math.min(B,n.height-N),Math.max(0,g-I),Math.max(0,x-N),oa.BOTTOM_LEFT):new sr(n.left+I,n.top+n.height-N),this.topLeftContentBox=s>0||i>0?rs(n.left+I+P,n.top+j+L,Math.max(0,s-(I+P)),Math.max(0,i-(j+L)),oa.TOP_LEFT):new sr(n.left+I+P,n.top+j+L),this.topRightContentBox=c>0||u>0?rs(n.left+Math.min(w,n.width+I+P),n.top+j+L,w>n.width+I+P?0:c-I+P,u-(j+L),oa.TOP_RIGHT):new sr(n.left+n.width-(E+D),n.top+j+L),this.bottomRightContentBox=f>0||h>0?rs(n.left+Math.min(T,n.width-(I+P)),n.top+Math.min(_,n.height+j+L),Math.max(0,f-(E+D)),h-(N+k),oa.BOTTOM_RIGHT):new sr(n.left+n.width-(E+D),n.top+n.height-(N+k)),this.bottomLeftContentBox=g>0||x>0?rs(n.left+I+P,n.top+B,Math.max(0,g-(I+P)),x-(N+k),oa.BOTTOM_LEFT):new sr(n.left+I+P,n.top+n.height-(N+k))}return e}(),oa;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(oa||(oa={}));var rs=function(e,t,r,n,a){var s=4*((Math.sqrt(2)-1)/3),i=r*s,o=n*s,c=e+r,u=t+n;switch(a){case oa.TOP_LEFT:return new iS(new sr(e,u),new sr(e,u-o),new sr(c-i,t),new sr(c,t));case oa.TOP_RIGHT:return new iS(new sr(e,t),new sr(e+i,t),new sr(c,u-o),new sr(c,u));case oa.BOTTOM_RIGHT:return new iS(new sr(c,t),new sr(c,t+o),new sr(e+i,u),new sr(e,u));case oa.BOTTOM_LEFT:default:return new iS(new sr(c,u),new sr(c-i,u),new sr(e,t+o),new sr(e,t))}},dk=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},Xvt=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},fk=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},Yvt=function(){function e(t,r,n){this.offsetX=t,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return e}(),oS=function(){function e(t,r){this.path=t,this.target=r,this.type=1}return e}(),Jvt=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),Zvt=function(e){return e.type===0},z0e=function(e){return e.type===1},e1t=function(e){return e.type===2},cee=function(e,t){return e.length===t.length?e.some(function(r,n){return r===t[n]}):!1},t1t=function(e,t,r,n,a){return e.map(function(s,i){switch(i){case 0:return s.add(t,r);case 1:return s.add(t+n,r);case 2:return s.add(t+n,r+a);case 3:return s.add(t,r+a)}return s})},$0e=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),G0e=function(){function e(t,r){if(this.container=t,this.parent=r,this.effects=[],this.curves=new Wvt(this.container),this.container.styles.opacity<1&&this.effects.push(new Jvt(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new Yvt(n,a,s))}if(this.container.styles.overflowX!==0){var i=dk(this.curves),o=fk(this.curves);cee(i,o)?this.effects.push(new oS(i,6)):(this.effects.push(new oS(i,2)),this.effects.push(new oS(o,4)))}}return e.prototype.getEffects=function(t){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(c){return!z0e(c)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=dk(n.curves),o=fk(n.curves);cee(i,o)||a.unshift(new oS(o,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(c){return Oi(c.target,t)})},e}(),gR=function(e,t,r,n){e.container.elements.forEach(function(a){var s=Oi(a.flags,4),i=Oi(a.flags,2),o=new G0e(a,e);Oi(a.styles.display,2048)&&n.push(o);var c=Oi(a.flags,8)?[]:n;if(s||i){var u=s||a.styles.isPositioned()?r:t,d=new $0e(o);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var f=a.styles.zIndex.order;if(f<0){var h=0;u.negativeZIndex.some(function(g,x){return f>g.element.container.styles.zIndex.order?(h=x,!1):h>0}),u.negativeZIndex.splice(h,0,d)}else if(f>0){var m=0;u.positiveZIndex.some(function(g,x){return f>=g.element.container.styles.zIndex.order?(m=x+1,!1):m>0}),u.positiveZIndex.splice(m,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);gR(o,d,s?d:r,c)}else a.styles.isInlineLevel()?t.inlineLevel.push(o):t.nonInlineLevel.push(o),gR(o,t,r,c);Oi(a.flags,8)&&K0e(a,c)})},K0e=function(e,t){for(var r=e instanceof fR?e.start:1,n=e instanceof fR?e.reversed:!1,a=0;a<t.length;a++){var s=t[a];s.container instanceof T0e&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=jE(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},r1t=function(e){var t=new G0e(e,null),r=new $0e(t),n=[];return gR(t,r,r,n),K0e(t.container,n),r},uee=function(e,t){switch(t){case 0:return ad(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return ad(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return ad(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return ad(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},n1t=function(e,t){switch(t){case 0:return ad(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return ad(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return ad(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return ad(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},a1t=function(e,t){switch(t){case 0:return ad(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return ad(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return ad(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return ad(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},s1t=function(e,t){switch(t){case 0:return lS(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return lS(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return lS(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return lS(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},lS=function(e,t){var r=[];return Ju(e)?r.push(e.subdivide(.5,!1)):r.push(e),Ju(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},ad=function(e,t,r,n){var a=[];return Ju(e)?a.push(e.subdivide(.5,!1)):a.push(e),Ju(r)?a.push(r.subdivide(.5,!0)):a.push(r),Ju(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),Ju(t)?a.push(t.subdivide(.5,!1).reverse()):a.push(t),a},q0e=function(e){var t=e.bounds,r=e.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},Ak=function(e){var t=e.styles,r=e.bounds,n=Qa(t.paddingLeft,r.width),a=Qa(t.paddingRight,r.width),s=Qa(t.paddingTop,r.width),i=Qa(t.paddingBottom,r.width);return r.add(n+t.borderLeftWidth,s+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+n+a),-(t.borderTopWidth+t.borderBottomWidth+s+i))},i1t=function(e,t){return e===0?t.bounds:e===2?Ak(t):q0e(t)},o1t=function(e,t){return e===0?t.bounds:e===2?Ak(t):q0e(t)},WF=function(e,t,r){var n=i1t(Jv(e.styles.backgroundOrigin,t),e),a=o1t(Jv(e.styles.backgroundClip,t),e),s=l1t(Jv(e.styles.backgroundSize,t),r,n),i=s[0],o=s[1],c=qw(Jv(e.styles.backgroundPosition,t),n.width-i,n.height-o),u=c1t(Jv(e.styles.backgroundRepeat,t),c,s,n,a),d=Math.round(n.left+c[0]),f=Math.round(n.top+c[1]);return[u,d,f,i,o]},Qv=function(e){return ka(e)&&e.value===P1.AUTO},cS=function(e){return typeof e=="number"},l1t=function(e,t,r){var n=t[0],a=t[1],s=t[2],i=e[0],o=e[1];if(!i)return[0,0];if(Ei(i)&&o&&Ei(o))return[Qa(i,r.width),Qa(o,r.height)];var c=cS(s);if(ka(i)&&(i.value===P1.CONTAIN||i.value===P1.COVER)){if(cS(s)){var u=r.width/r.height;return u<s!=(i.value===P1.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=cS(n),f=cS(a),h=d||f;if(Qv(i)&&(!o||Qv(o))){if(d&&f)return[n,a];if(!c&&!h)return[r.width,r.height];if(h&&c){var m=d?n:a*s,g=f?a:n/s;return[m,g]}var x=d?n:r.width,v=f?a:r.height;return[x,v]}if(c){var y=0,w=0;return Ei(i)?y=Qa(i,r.width):Ei(o)&&(w=Qa(o,r.height)),Qv(i)?y=w*s:(!o||Qv(o))&&(w=y/s),[y,w]}var _=null,T=null;if(Ei(i)?_=Qa(i,r.width):o&&Ei(o)&&(T=Qa(o,r.height)),_!==null&&(!o||Qv(o))&&(T=d&&f?_/n*a:r.height),T!==null&&Qv(i)&&(_=d&&f?T/a*n:r.width),_!==null&&T!==null)return[_,T];throw new Error("Unable to calculate background-size for element")},Jv=function(e,t){var r=e[t];return typeof r>"u"?e[0]:r},c1t=function(e,t,r,n,a){var s=t[0],i=t[1],o=r[0],c=r[1];switch(e){case 2:return[new sr(Math.round(n.left),Math.round(n.top+i)),new sr(Math.round(n.left+n.width),Math.round(n.top+i)),new sr(Math.round(n.left+n.width),Math.round(c+n.top+i)),new sr(Math.round(n.left),Math.round(c+n.top+i))];case 3:return[new sr(Math.round(n.left+s),Math.round(n.top)),new sr(Math.round(n.left+s+o),Math.round(n.top)),new sr(Math.round(n.left+s+o),Math.round(n.height+n.top)),new sr(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new sr(Math.round(n.left+s),Math.round(n.top+i)),new sr(Math.round(n.left+s+o),Math.round(n.top+i)),new sr(Math.round(n.left+s+o),Math.round(n.top+i+c)),new sr(Math.round(n.left+s),Math.round(n.top+i+c))];default:return[new sr(Math.round(a.left),Math.round(a.top)),new sr(Math.round(a.left+a.width),Math.round(a.top)),new sr(Math.round(a.left+a.width),Math.round(a.height+a.top)),new sr(Math.round(a.left),Math.round(a.height+a.top))]}},u1t="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",dee="Hidden Text",d1t=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=t,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),a.src=u1t,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(dee)),n.appendChild(s),n.appendChild(a);var o=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(dee)),n.style.lineHeight="normal",a.style.verticalAlign="super";var c=a.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:o,middle:c}},e.prototype.getMetrics=function(t,r){var n=t+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(t,r)),this._data[n]},e}(),W0e=function(){function e(t,r){this.context=t,this.options=r}return e}(),f1t=1e4,A1t=function(e){xf(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new d1t(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return t.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},t.prototype.applyEffect=function(r){this.ctx.save(),e1t(r)&&(this.ctx.globalAlpha=r.opacity),Zvt(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),z0e(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(r){return Sl(this,void 0,void 0,function(){var n;return tl(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(r){return Sl(this,void 0,void 0,function(){return tl(this,function(n){switch(n.label){case 0:if(Oi(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var i=Z7(r.text);i.reduce(function(o,c){return s.ctx.fillText(c,o,r.bounds.top+a),o+s.ctx.measureText(c).width},r.bounds.left)}},t.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),a=x1t(r.fontFamily).join(", "),s=FC(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},t.prototype.renderTextNode=function(r,n){return Sl(this,void 0,void 0,function(){var a,s,i,o,c,u,d,f,h=this;return tl(this,function(m){return a=this.createFontStyle(n),s=a[0],i=a[1],o=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(i,o),u=c.baseline,d=c.middle,f=n.paintOrder,r.textBounds.forEach(function(g){f.forEach(function(x){switch(x){case 0:h.ctx.fillStyle=Ji(n.color),h.renderTextWithLetterSpacing(g,n.letterSpacing,u);var v=n.textShadow;v.length&&g.text.trim().length&&(v.slice(0).reverse().forEach(function(y){h.ctx.shadowColor=Ji(y.color),h.ctx.shadowOffsetX=y.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=y.offsetY.number*h.options.scale,h.ctx.shadowBlur=y.blur.number,h.renderTextWithLetterSpacing(g,n.letterSpacing,u)}),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),n.textDecorationLine.length&&(h.ctx.fillStyle=Ji(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(y){switch(y){case 1:h.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top+u),g.bounds.width,1);break;case 2:h.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top),g.bounds.width,1);break;case 3:h.ctx.fillRect(g.bounds.left,Math.ceil(g.bounds.top+d),g.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&g.text.trim().length&&(h.ctx.strokeStyle=Ji(n.webkitTextStrokeColor),h.ctx.lineWidth=n.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(g.text,g.bounds.left,g.bounds.top+u)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=Ak(r),i=fk(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(r){return Sl(this,void 0,void 0,function(){var n,a,s,i,o,c,w,w,u,d,f,h,T,m,g,B,x,v,y,w,_,T,B;return tl(this,function(j){switch(j.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,i=0,o=n.textNodes,j.label=1;case 1:return i<o.length?(c=o[i],[4,this.renderTextNode(c,s)]):[3,4];case 2:j.sent(),j.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof N0e))return[3,8];j.label=5;case 5:return j.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return w=j.sent(),this.renderReplacedElement(n,a,w),[3,8];case 7:return j.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof k0e&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof B0e))return[3,12];j.label=9;case 9:return j.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return w=j.sent(),this.renderReplacedElement(n,a,w),[3,12];case 11:return j.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof F0e&&n.tree?(u=new t(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=j.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),j.label=14;case 14:if(n instanceof e9&&(f=Math.min(n.bounds.width,n.bounds.height),n.type===ok?n.checked&&(this.ctx.save(),this.path([new sr(n.bounds.left+f*.39363,n.bounds.top+f*.79),new sr(n.bounds.left+f*.16,n.bounds.top+f*.5549),new sr(n.bounds.left+f*.27347,n.bounds.top+f*.44071),new sr(n.bounds.left+f*.39694,n.bounds.top+f*.5649),new sr(n.bounds.left+f*.72983,n.bounds.top+f*.23),new sr(n.bounds.left+f*.84,n.bounds.top+f*.34085),new sr(n.bounds.left+f*.39363,n.bounds.top+f*.79)]),this.ctx.fillStyle=Ji(JZ),this.ctx.fill(),this.ctx.restore()):n.type===lk&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+f/2,n.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=Ji(JZ),this.ctx.fill(),this.ctx.restore())),h1t(n)&&n.value.length){switch(h=this.createFontStyle(s),T=h[0],m=h[1],g=this.fontMetrics.getMetrics(T,m).baseline,this.ctx.font=T,this.ctx.fillStyle=Ji(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=p1t(n.styles.textAlign),B=Ak(n),x=0,n.styles.textAlign){case 1:x+=B.width/2;break;case 2:x+=B.width;break}v=B.add(x,0,0,-B.height/2+1),this.ctx.save(),this.path([new sr(B.left,B.top),new sr(B.left+B.width,B.top),new sr(B.left+B.width,B.top+B.height),new sr(B.left,B.top+B.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new S2(n.value,v),s.letterSpacing,g),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Oi(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(y=n.styles.listStyleImage,y.type!==0)return[3,18];w=void 0,_=y.url,j.label=15;case 15:return j.trys.push([15,17,,18]),[4,this.context.cache.match(_)];case 16:return w=j.sent(),this.ctx.drawImage(w,n.bounds.left-(w.width+10),n.bounds.top),[3,18];case 17:return j.sent(),this.context.logger.error("Error loading list-style-image "+_),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(T=this.createFontStyle(s)[0],this.ctx.font=T,this.ctx.fillStyle=Ji(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",B=new o0(n.bounds.left,n.bounds.top+Qa(n.styles.paddingTop,n.bounds.width),n.bounds.width,DZ(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new S2(r.listValue,B),s.letterSpacing,DZ(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),j.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(r){return Sl(this,void 0,void 0,function(){var n,a,y,s,i,y,o,c,y,u,d,y,f,h,y,m,g,y,x,v,y;return tl(this,function(w){switch(w.label){case 0:if(Oi(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:w.sent(),n=0,a=r.negativeZIndex,w.label=2;case 2:return n<a.length?(y=a[n],[4,this.renderStack(y)]):[3,5];case 3:w.sent(),w.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:w.sent(),s=0,i=r.nonInlineLevel,w.label=7;case 7:return s<i.length?(y=i[s],[4,this.renderNode(y)]):[3,10];case 8:w.sent(),w.label=9;case 9:return s++,[3,7];case 10:o=0,c=r.nonPositionedFloats,w.label=11;case 11:return o<c.length?(y=c[o],[4,this.renderStack(y)]):[3,14];case 12:w.sent(),w.label=13;case 13:return o++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,w.label=15;case 15:return u<d.length?(y=d[u],[4,this.renderStack(y)]):[3,18];case 16:w.sent(),w.label=17;case 17:return u++,[3,15];case 18:f=0,h=r.inlineLevel,w.label=19;case 19:return f<h.length?(y=h[f],[4,this.renderNode(y)]):[3,22];case 20:w.sent(),w.label=21;case 21:return f++,[3,19];case 22:m=0,g=r.zeroOrAutoZIndexOrTransformedOrOpacity,w.label=23;case 23:return m<g.length?(y=g[m],[4,this.renderStack(y)]):[3,26];case 24:w.sent(),w.label=25;case 25:return m++,[3,23];case 26:x=0,v=r.positiveZIndex,w.label=27;case 27:return x<v.length?(y=v[x],[4,this.renderStack(y)]):[3,30];case 28:w.sent(),w.label=29;case 29:return x++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},t.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var i=Ju(a)?a.start:a;s===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),Ju(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},t.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},t.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,o=i.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,a);var c=o.getContext("2d");return c.drawImage(r,0,0,r.width,r.height,0,0,n,a),o},t.prototype.renderBackgroundImage=function(r){return Sl(this,void 0,void 0,function(){var n,a,s,i,o,c;return tl(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var f,h,m,L,V,G,P,R,N,g,L,V,G,P,R,x,v,y,w,_,T,B,j,E,N,I,L,D,k,P,R,W,V,G,z,K,J,te,M,H,Y,Z;return tl(this,function(ae){switch(ae.label){case 0:if(d.type!==0)return[3,5];f=void 0,h=d.url,ae.label=1;case 1:return ae.trys.push([1,3,,4]),[4,s.context.cache.match(h)];case 2:return f=ae.sent(),[3,4];case 3:return ae.sent(),s.context.logger.error("Error loading background-image "+h),[3,4];case 4:return f&&(m=WF(r,n,[f.width,f.height,f.width/f.height]),L=m[0],V=m[1],G=m[2],P=m[3],R=m[4],N=s.ctx.createPattern(s.resizeImage(f,P,R),"repeat"),s.renderRepeat(L,N,V,G)),[3,6];case 5:Zpt(d)?(g=WF(r,n,[null,null,null]),L=g[0],V=g[1],G=g[2],P=g[3],R=g[4],x=qpt(d.angle,P,R),v=x[0],y=x[1],w=x[2],_=x[3],T=x[4],B=document.createElement("canvas"),B.width=P,B.height=R,j=B.getContext("2d"),E=j.createLinearGradient(y,_,w,T),FZ(d.stops,v).forEach(function(le){return E.addColorStop(le.stop,Ji(le.color))}),j.fillStyle=E,j.fillRect(0,0,P,R),P>0&&R>0&&(N=s.ctx.createPattern(B,"repeat"),s.renderRepeat(L,N,V,G))):egt(d)&&(I=WF(r,n,[null,null,null]),L=I[0],D=I[1],k=I[2],P=I[3],R=I[4],W=d.position.length===0?[X7]:d.position,V=Qa(W[0],P),G=Qa(W[W.length-1],R),z=Wpt(d,V,G,P,R),K=z[0],J=z[1],K>0&&J>0&&(te=s.ctx.createRadialGradient(D+V,k+G,0,D+V,k+G,K),FZ(d.stops,K*2).forEach(function(le){return te.addColorStop(le.stop,Ji(le.color))}),s.path(L),s.ctx.fillStyle=te,K!==J?(M=r.bounds.left+.5*r.bounds.width,H=r.bounds.top+.5*r.bounds.height,Y=J/K,Z=1/Y,s.ctx.save(),s.ctx.translate(M,H),s.ctx.transform(1,0,0,Y,0,0),s.ctx.translate(-M,-H),s.ctx.fillRect(D,Z*(k-H)+H,P,R*Z),s.ctx.restore()):s.ctx.fill())),ae.label=6;case 6:return n--,[2]}})},s=this,i=0,o=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return i<o.length?(c=o[i],[5,a(c)]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(r,n,a){return Sl(this,void 0,void 0,function(){return tl(this,function(s){return this.path(uee(a,n)),this.ctx.fillStyle=Ji(r),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(r,n,a,s){return Sl(this,void 0,void 0,function(){var i,o;return tl(this,function(c){switch(c.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return c.sent(),[2];case 2:return i=n1t(s,a),this.path(i),this.ctx.fillStyle=Ji(r),this.ctx.fill(),o=a1t(s,a),this.path(o),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(r){return Sl(this,void 0,void 0,function(){var n,a,s,i,o,c,u,d,f=this;return tl(this,function(h){switch(h.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!zm(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=m1t(Jv(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),zm(n.backgroundColor)||(this.ctx.fillStyle=Ji(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(m){f.ctx.save();var g=dk(r.curves),x=m.inset?0:f1t,v=t1t(g,-x+(m.inset?1:-1)*m.spread.number,(m.inset?1:-1)*m.spread.number,m.spread.number*(m.inset?-2:2),m.spread.number*(m.inset?-2:2));m.inset?(f.path(g),f.ctx.clip(),f.mask(v)):(f.mask(g),f.ctx.clip(),f.path(v)),f.ctx.shadowOffsetX=m.offsetX.number+x,f.ctx.shadowOffsetY=m.offsetY.number,f.ctx.shadowColor=Ji(m.color),f.ctx.shadowBlur=m.blur.number,f.ctx.fillStyle=m.inset?Ji(m.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),h.label=2;case 2:o=0,c=0,u=s,h.label=3;case 3:return c<u.length?(d=u[c],d.style!==0&&!zm(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,3)];case 6:return h.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,r.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,r.curves)];case 10:h.sent(),h.label=11;case 11:o++,h.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(r,n,a,s,i){return Sl(this,void 0,void 0,function(){var o,c,u,d,f,h,m,g,x,v,y,w,_,T,B,j,B,j;return tl(this,function(E){return this.ctx.save(),o=s1t(s,a),c=uee(s,a),i===2&&(this.path(c),this.ctx.clip()),Ju(c[0])?(u=c[0].start.x,d=c[0].start.y):(u=c[0].x,d=c[0].y),Ju(c[1])?(f=c[1].end.x,h=c[1].end.y):(f=c[1].x,h=c[1].y),a===0||a===2?m=Math.abs(u-f):m=Math.abs(d-h),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(c.slice(0,2)),g=n<3?n*3:n*2,x=n<3?n*2:n,i===3&&(g=n,x=n),v=!0,m<=g*2?v=!1:m<=g*2+x?(y=m/(2*g+x),g*=y,x*=y):(w=Math.floor((m+x)/(g+x)),_=(m-w*g)/(w-1),T=(m-(w+1)*g)/w,x=T<=0||Math.abs(x-_)<Math.abs(x-T)?_:T),v&&(i===3?this.ctx.setLineDash([0,g+x]):this.ctx.setLineDash([g,x])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Ji(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Ju(c[0])&&(B=c[3],j=c[0],this.ctx.beginPath(),this.formatPath([new sr(B.end.x,B.end.y),new sr(j.start.x,j.start.y)]),this.ctx.stroke()),Ju(c[1])&&(B=c[1],j=c[2],this.ctx.beginPath(),this.formatPath([new sr(B.end.x,B.end.y),new sr(j.start.x,j.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(r){return Sl(this,void 0,void 0,function(){var n;return tl(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Ji(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=r1t(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(W0e),h1t=function(e){return e instanceof I0e||e instanceof j0e?!0:e instanceof e9&&e.type!==lk&&e.type!==ok},m1t=function(e,t){switch(e){case 0:return dk(t);case 2:return Xvt(t);case 1:default:return fk(t)}},p1t=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},g1t=["-apple-system","system-ui"],x1t=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return g1t.indexOf(t)===-1}):e},v1t=function(e){xf(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return t.prototype.render=function(r){return Sl(this,void 0,void 0,function(){var n,a;return tl(this,function(s){switch(s.label){case 0:return n=dR(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,b1t(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Ji(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(W0e),b1t=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},y1t=function(){function e(t){var r=t.id,n=t.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Q5([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Q5([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Q5([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Q5([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),w1t=function(){function e(t,r){var n;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new y1t({id:this.instanceName,enabled:t.logging}),this.cache=(n=t.cache)!==null&&n!==void 0?n:new Hvt(this,t)}return e.instanceCount=1,e}(),xR=function(e,t){return t===void 0&&(t={}),E1t(e,t)};typeof window<"u"&&V0e.setContext(window);var E1t=function(e,t){return Sl(void 0,void 0,void 0,function(){var r,n,a,s,i,o,c,u,d,f,h,m,g,x,v,y,w,_,T,B,E,j,E,N,I,L,D,k,P,R,W,V,G,z,K,J,te,M,H,Y;return tl(this,function(Z){switch(Z.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(N=t.allowTaint)!==null&&N!==void 0?N:!1,imageTimeout:(I=t.imageTimeout)!==null&&I!==void 0?I:15e3,proxy:t.proxy,useCORS:(L=t.useCORS)!==null&&L!==void 0?L:!1},s=XP({logging:(D=t.logging)!==null&&D!==void 0?D:!0,cache:t.cache},a),i={windowWidth:(k=t.windowWidth)!==null&&k!==void 0?k:n.innerWidth,windowHeight:(P=t.windowHeight)!==null&&P!==void 0?P:n.innerHeight,scrollX:(R=t.scrollX)!==null&&R!==void 0?R:n.pageXOffset,scrollY:(W=t.scrollY)!==null&&W!==void 0?W:n.pageYOffset},o=new o0(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),c=new w1t(s,o),u=(V=t.foreignObjectRendering)!==null&&V!==void 0?V:!1,d={allowTaint:(G=t.allowTaint)!==null&&G!==void 0?G:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:u,copyStyles:u},c.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),f=new oee(c,e,d),h=f.clonedReferenceElement,h?[4,f.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return m=Z.sent(),g=t9(h)||_vt(h)?tmt(h.ownerDocument):MT(c,h),x=g.width,v=g.height,y=g.left,w=g.top,_=C1t(c,h,t.backgroundColor),T={canvas:t.canvas,backgroundColor:_,scale:(K=(z=t.scale)!==null&&z!==void 0?z:n.devicePixelRatio)!==null&&K!==void 0?K:1,x:((J=t.x)!==null&&J!==void 0?J:0)+y,y:((te=t.y)!==null&&te!==void 0?te:0)+w,width:(M=t.width)!==null&&M!==void 0?M:Math.ceil(x),height:(H=t.height)!==null&&H!==void 0?H:Math.ceil(v)},u?(c.logger.debug("Document cloned, using foreign object rendering"),E=new v1t(c,T),[4,E.render(h)]):[3,3];case 2:return B=Z.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+y+","+w+" with size "+x+"x"+v+" using computed rendering"),c.logger.debug("Starting DOM parsing"),j=D0e(c,h),_===j.styles.backgroundColor&&(j.styles.backgroundColor=Hh.TRANSPARENT),c.logger.debug("Starting renderer for element at "+T.x+","+T.y+" with size "+T.width+"x"+T.height),E=new A1t(c,T),[4,E.render(j)];case 4:B=Z.sent(),Z.label=5;case 5:return(!((Y=t.removeContainer)!==null&&Y!==void 0)||Y)&&(oee.destroy(m)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,B]}})})},C1t=function(e,t,r){var n=t.ownerDocument,a=n.documentElement?C2(e,getComputedStyle(n.documentElement).backgroundColor):Hh.TRANSPARENT,s=n.body?C2(e,getComputedStyle(n.body).backgroundColor):Hh.TRANSPARENT,i=typeof r=="string"?C2(e,r):r===null?Hh.TRANSPARENT:4294967295;return t===n.documentElement?zm(a)?zm(s)?i:s:a:i};const _1t=Object.freeze(Object.defineProperty({__proto__:null,default:xR},Symbol.toStringTag,{value:"Module"})),S1t=e=>{const[t,r]=S.useState(!1),[n,a]=S.useState(null);return S.useEffect(()=>{const s="google-maps-script";if(document.getElementById(s)||window.google){r(!0);return}const i=document.createElement("script");i.id=s,i.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places,directions&loading=async`,i.async=!0,i.defer=!0,i.onload=()=>r(!0),i.onerror=()=>a(new Error("No se pudo cargar Google Maps.")),document.head.appendChild(i)},[e]),{isLoaded:t,error:n}},X0e=[{elemento:"Cumplimiento legal y formalidad"},{elemento:"Contrato o convenio formal de práctica"},{elemento:"Ambiente laboral y clima organizacional"},{elemento:"Supervisión y mentoría"},{elemento:"Oportunidades de aprendizaje"},{elemento:"Recursos y herramientas disponibles"},{elemento:"Seguridad y salud ocupacional"},{elemento:"Comunicación interna"}],N1t=["Mecánica Industrial","Mecánica Automotriz"],k1t=()=>({nombre:"",rut:"",direccion:"",contacto:"",email:"",area:"",cupos:1,coordenadas:null,calificaciones:X0e.map(e=>({...e,score:null})),estudiantesAsignados:[],docenteSupervisor:void 0}),fee=({empresas:e,isLoaded:t,route:r})=>{const n=S.useRef(null),a=S.useRef(null),s=S.useRef([]),i=S.useRef(null),o=e.filter(c=>{var u,d;return((u=c.coordenadas)==null?void 0:u.lat)&&((d=c.coordenadas)==null?void 0:d.lng)});return S.useEffect(()=>{!t||!n.current||!window.google||(a.current||(a.current=new window.google.maps.Map(n.current,{center:{lat:-33.4489,lng:-70.6693},zoom:11})),i.current||(i.current=new window.google.maps.DirectionsRenderer),s.current.forEach(c=>c.setMap(null)),s.current=[],i.current.setMap(null),r?(i.current.setMap(a.current),i.current.setDirections(r)):o.forEach(c=>{const u=new window.google.maps.Marker({position:{lat:c.coordenadas.lat,lng:c.coordenadas.lng},map:a.current,title:c.nombre}),d=new window.google.maps.InfoWindow({content:`<div style="font-weight: bold;">${c.nombre}</div><div>${c.direccion}</div>`});u.addListener("click",()=>{d.open(a.current,u)}),s.current.push(u)}))},[o,t,r]),l.jsxs("div",{className:"relative",id:"map-container-for-pdf",children:[l.jsx("div",{ref:n,className:"h-[600px] w-full rounded-lg border"}),!r&&o.length===0&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-90 rounded-lg",children:l.jsx("div",{className:"text-center p-6",children:l.jsx("p",{className:"text-gray-600 text-lg",children:"📍 No hay empresas geo-localizadas"})})})]})},B1t=({route:e,travelMode:t})=>{const a=t==="TRANSIT"?45:30,s=e.routes[0].legs.reduce((f,h)=>{var m;return f+(((m=h.duration)==null?void 0:m.value)||0)},0),o=(e.routes[0].legs.length>1?e.routes[0].legs.length-1:0)*a*60,c=s+o,u=e.routes[0].legs.reduce((f,h)=>{var m;return f+(((m=h.distance)==null?void 0:m.value)||0)},0),d=t==="DRIVING"?u/1e3/12*1300:0;return l.jsxs("div",{className:"mt-6 p-4 border rounded-lg bg-slate-50",id:"route-details-for-pdf",children:[l.jsx("h3",{className:"text-xl font-bold mb-3",children:"Detalles de la Ruta"}),l.jsx("div",{className:"space-y-4",children:e.routes[0].legs.map((f,h)=>{var m,g,x;return l.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsxs("h4",{className:"font-bold text-lg",children:["Tramo ",h+1,": ",f.start_address.split(",")[0]," → ",f.end_address.split(",")[0]]}),l.jsxs("div",{className:"text-sm text-gray-600",children:[(m=f.duration)==null?void 0:m.text," • ",(g=f.distance)==null?void 0:g.text]})]}),t==="TRANSIT"&&l.jsx("div",{className:"space-y-3",children:(x=f.steps)==null?void 0:x.map((v,y)=>v.transit&&l.jsxs("div",{className:"flex items-start gap-2 text-sm py-1",children:[l.jsx("span",{className:"text-lg",children:"🚌"}),l.jsx("span",{dangerouslySetInnerHTML:{__html:v.instructions}})]},y))})]},h)})}),l.jsxs("div",{className:"mt-4 pt-4 border-t font-bold text-right",children:[l.jsxs("p",{children:["Tiempo de viaje: ",Math.round(s/60)," min"]}),l.jsxs("p",{children:["Tiempo en paradas: ",Math.round(o/60)," min"]}),l.jsxs("p",{className:"text-lg",children:["Duración Total Estimada: ",Math.round(c/60)," min"]}),l.jsxs("p",{children:["Distancia Total: ",(u/1e3).toFixed(1)," km"]}),t==="DRIVING"&&l.jsxs("p",{className:"text-green-600",children:["Costo Bencina Aprox: $",d.toLocaleString("es-CL",{maximumFractionDigits:0})]})]})]})},Aee=async e=>window.google?new Promise(t=>{new window.google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:e,fields:["geometry"]},(n,a)=>{var s;a===window.google.maps.places.PlacesServiceStatus.OK&&((s=n==null?void 0:n.geometry)!=null&&s.location)?t({lat:n.geometry.location.lat(),lng:n.geometry.location.lng()}):t(null)})}):null,T1t=({data:e})=>{const t=["#0088FE","#00C49F","#FFBB28","#FF8042"];return l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[l.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Especialidad"}),l.jsx(Th,{width:"100%",height:300,children:l.jsxs(hU,{children:[l.jsx(YB,{data:e.porEspecialidad,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",label:!0,children:e.porEspecialidad.map((r,n)=>l.jsx(np,{fill:t[n%t.length]},`cell-${n}`))}),l.jsx(Bh,{})]})})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[l.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Supervisor"}),l.jsx(Th,{width:"100%",height:300,children:l.jsxs(sE,{data:e.porSupervisor,layout:"vertical",children:[l.jsx(aE,{strokeDasharray:"3 3"}),l.jsx(sx,{type:"number"}),l.jsx(ix,{type:"category",dataKey:"name",width:150}),l.jsx(Bh,{}),l.jsx(lb,{dataKey:"value",fill:"#82ca9d",name:"Empresas"})]})})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 lg:col-span-3",children:[l.jsx("h3",{className:"font-bold mb-4",children:"Distribución por Comuna"}),l.jsx(Th,{width:"100%",height:300,children:l.jsxs(sE,{data:e.porComuna,children:[l.jsx(aE,{strokeDasharray:"3 3"}),l.jsx(sx,{dataKey:"name"}),l.jsx(ix,{}),l.jsx(Bh,{}),l.jsx(lb,{dataKey:"value",fill:"#8884d8",name:"Empresas"})]})})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[l.jsx("h3",{className:"font-bold mb-4",children:"Calificación por Ámbito"}),l.jsx(Th,{width:"100%",height:300,children:l.jsxs(UHe,{cx:"50%",cy:"50%",outerRadius:"80%",data:e.calificacionPorAmbito,children:[l.jsx(ble,{}),l.jsx(XB,{dataKey:"subject"}),l.jsx(qB,{angle:30,domain:[0,5]}),l.jsx(oU,{name:"Promedio",dataKey:"A",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6}),l.jsx(Bh,{})]})})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[l.jsx("h3",{className:"font-bold mb-4",children:"Ranking de Empresas"}),l.jsx("div",{className:"overflow-y-auto max-h-[300px]",children:l.jsx("ul",{className:"space-y-2",children:e.ranking.map((r,n)=>l.jsxs("li",{className:"flex items-center justify-between p-2 rounded-lg bg-slate-50",children:[l.jsxs("span",{className:"font-semibold",children:[n+1,". ",r.nombre]}),l.jsxs("span",{className:"font-bold text-amber-500",children:[r.promedio.toFixed(1)," ★"]})]},r.id))})})]})]})},j1t=()=>{const[e,t]=S.useState([]),[r,n]=S.useState([]),[a,s]=S.useState("list"),[i,o]=S.useState(null),[c,u]=S.useState(!0),[d,f]=S.useState(null),[h,m]=S.useState(null),[g,x]=S.useState(null),[v,y]=S.useState([]),[w,_]=S.useState(null),[T,B]=S.useState(!1),[j,E]=S.useState("DRIVING"),[N,I]=S.useState(""),[L,D]=S.useState([]),k="AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4",{isLoaded:P}=S1t(k);S.useEffect(()=>{u(!0);const ie=YAt(t),ce=eht(n),Ae=rht(D);return u(!1),()=>{ie(),ce(),Ae()}},[]);const R=S.useMemo(()=>{const ie=e.reduce((_e,Ie)=>{const Se=Ie.area||"Sin especificar";return _e[Se]=(_e[Se]||0)+1,_e},{}),ce=e.reduce((_e,Ie)=>{var me;const Se=((me=Ie.docenteSupervisor)==null?void 0:me.nombreCompleto)||"Sin asignar";return _e[Se]=(_e[Se]||0)+1,_e},{}),Ae=e.reduce((_e,Ie)=>{const Se=Ie.direccion.split(",").map(Be=>Be.trim()),me=Se.length>1?Se[1]:"Desconocida";return _e[me]=(_e[me]||0)+1,_e},{}),Fe=X0e.map(_e=>{const Ie=e.flatMap(me=>{var Be;return(Be=me.calificaciones.find(Le=>Le.elemento===_e.elemento))==null?void 0:Be.score}).filter(me=>me!=null),Se=Ie.length>0?Ie.reduce((me,Be)=>me+Be,0)/Ie.length:0;return{subject:_e.elemento.split(" ")[0],A:Se,fullMark:5}}),ne=e.map(_e=>{const Ie=_e.calificaciones.map(me=>me.score).filter(me=>me!=null),Se=Ie.length>0?Ie.reduce((me,Be)=>me+Be,0)/Ie.length:0;return{..._e,promedio:Se}}).filter(_e=>_e.promedio>0).sort((_e,Ie)=>Ie.promedio-_e.promedio);return{porEspecialidad:Object.entries(ie).map(([_e,Ie])=>({name:_e,value:Ie})),porSupervisor:Object.entries(ce).map(([_e,Ie])=>({name:_e,value:Ie})),porComuna:Object.entries(Ae).map(([_e,Ie])=>({name:_e,value:Ie})),calificacionPorAmbito:Fe,ranking:ne}},[e]),W=async()=>{if(i)try{await JAt(i),s("list"),o(null),f(null)}catch{alert("No se pudo guardar la empresa.")}},V=async ie=>{window.confirm("¿Está seguro de eliminar esta empresa?")&&await ZAt(ie)},G=(ie,ce)=>{o(Ae=>Ae?{...Ae,[ie]:ce}:null)},z=async ie=>{var ce;if(f(ie),(ce=ie==null?void 0:ie.value)!=null&&ce.place_id&&P){const Ae=await Aee(ie.value.place_id);G("direccion",ie.label||""),G("coordenadas",Ae)}else G("direccion",(ie==null?void 0:ie.label)||"")},K=ie=>{o(JSON.parse(JSON.stringify(ie))),ie.direccion&&f({label:ie.direccion,value:{description:ie.direccion}}),s("form")},J=async ie=>{var ce;if(m(ie),(ce=ie==null?void 0:ie.value)!=null&&ce.place_id&&P){const Ae=await Aee(ie.value.place_id);x(Ae)}},te=ie=>{y(ce=>ce.some(Ae=>Ae.id===ie.id)?ce.filter(Ae=>Ae.id!==ie.id):[...ce,ie])},M=()=>{if(!g||v.length===0||!P)return;B(!0);const ie=new window.google.maps.DirectionsService,ce=v.filter(Ae=>Ae.coordenadas).map(Ae=>({location:Ae.coordenadas,stopover:!0}));ie.route({origin:g,destination:g,waypoints:ce,optimizeWaypoints:!0,travelMode:window.google.maps.TravelMode[j]},(Ae,Fe)=>{B(!1),Fe===window.google.maps.DirectionsStatus.OK&&Ae?_(Ae):alert("No se pudo calcular la ruta: "+Fe)})},H=()=>{_(null),m(null),x(null),y([]),I("")},Y=async()=>{if(!N||!h||!g||v.length===0){alert("Por favor, asigna un nombre a la ruta y asegúrate de tener un punto de partida y empresas seleccionadas.");return}const ie={nombre:N,startPoint:{label:h.label,coords:g},empresas:v.map(ce=>({id:ce.id,nombre:ce.nombre,coordenadas:ce.coordenadas})),travelMode:j};try{await tht(ie),alert("Ruta guardada con éxito."),s("saved-routes")}catch{alert("Error al guardar la ruta.")}},Z=async()=>{const ie=document.getElementById("map-container-for-pdf"),ce=document.getElementById("route-details-for-pdf");if(!ie||!ce)return;const Ae=new br("p","mm","a4"),Fe=Ae.internal.pageSize.getWidth();Ae.text(`Ruta de Supervisión: ${N||"Sin nombre"}`,10,15),Ae.setFontSize(10),Ae.text(`Fecha: ${new Date().toLocaleDateString("es-CL")}`,10,22);const _e=(await xR(ie,{useCORS:!0})).toDataURL("image/png");Ae.addImage(_e,"PNG",10,30,Fe-20,100);const Se=(await xR(ce)).toDataURL("image/png"),me=Ae.getImageProperties(Se),Be=me.height*(Fe-20)/me.width;Ae.addImage(Se,"PNG",10,135,Fe-20,Be),Ae.save(`ruta-${N||"supervision"}.pdf`)},ae=ie=>{m({label:ie.startPoint.label,value:null}),x(ie.startPoint.coords),y(ie.empresas),E(ie.travelMode),I(ie.nombre),s("route")},le=async ie=>{window.confirm("¿Estás seguro de que quieres eliminar esta ruta guardada?")&&(await nht(ie),alert("Ruta eliminada."))};return c?l.jsx("div",{className:"text-center p-8",children:"Cargando..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Gestión de Empresas"}),l.jsxs("div",{className:"flex items-center gap-4",children:[a!=="list"&&l.jsx("button",{onClick:()=>{s("list"),f(null),o(null),H()},className:"font-semibold hover:text-blue-600",children:"← Volver al listado"}),a==="list"&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>s("dashboard"),title:"Dashboard",className:"bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",children:[l.jsx(jne,{size:18})," Dashboard"]}),l.jsx("button",{onClick:()=>s("saved-routes"),title:"Rutas Guardadas",className:"bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Rutas Guardadas"}),l.jsx("button",{onClick:()=>s("route"),title:"Ruta de Supervisión",className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Ruta de Supervisión"}),l.jsx("button",{onClick:()=>s("map"),title:"Vista de Mapa",className:"bg-slate-200 hover:bg-slate-300 p-2 rounded-lg transition-colors",children:"🗺️"}),l.jsx("button",{onClick:()=>{o(k1t()),s("form")},className:"bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Crear Empresa"})]})]})]}),a==="dashboard"&&l.jsx(T1t,{data:R}),a==="saved-routes"&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Rutas de Supervisión Guardadas"}),l.jsx("div",{className:"space-y-3",children:L.length===0?l.jsx("p",{className:"text-gray-500",children:"No tienes rutas guardadas."}):L.map(ie=>l.jsxs("div",{className:"p-4 border rounded-lg flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold",children:ie.nombre}),l.jsxs("p",{className:"text-sm text-slate-500",children:[ie.empresas.length," paradas"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>ae(ie),className:"bg-blue-500 text-white px-3 py-1 rounded-md text-sm",children:"Cargar"}),l.jsx("button",{onClick:()=>le(ie.id),className:"bg-red-500 text-white px-3 py-1 rounded-md text-sm",children:"Eliminar"})]})]},ie.id))})]}),a==="route"&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Planificador de Ruta de Supervisión"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"1. Ingresa un nombre para la ruta"}),l.jsx("input",{type:"text",value:N,onChange:ie=>I(ie.target.value),placeholder:"Ej: Supervisión Zona Norte",className:"input-style w-full"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"2. Ingresa el punto de partida"}),l.jsx(fZ,{apiKey:k,selectProps:{value:h,onChange:J,placeholder:"Buscar dirección de partida..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"3. Elige el modo de transporte"}),l.jsxs("div",{className:"flex gap-4 rounded-lg bg-slate-100 p-1",children:[l.jsx("button",{onClick:()=>E("DRIVING"),className:`w-full py-2 rounded-md transition ${j==="DRIVING"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Automóvil"}),l.jsx("button",{onClick:()=>E("TRANSIT"),className:`w-full py-2 rounded-md transition ${j==="TRANSIT"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Transporte Público"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"4. Selecciona las empresas a visitar"}),l.jsx("div",{className:"max-h-48 overflow-y-auto border rounded-lg p-2 space-y-2",children:e.filter(ie=>ie.coordenadas).map(ie=>l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:`route-${ie.id}`,checked:v.some(ce=>ce.id===ie.id),onChange:()=>te(ie),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),l.jsx("label",{htmlFor:`route-${ie.id}`,className:"ml-3 text-sm text-gray-700",children:ie.nombre})]},ie.id))})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx("button",{onClick:M,disabled:!g||v.length===0||T,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:T?"Calculando...":"Visualizar Ruta"}),l.jsx("button",{onClick:Y,disabled:!N||!g||v.length===0,className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Guardar Ruta"}),l.jsx("button",{onClick:Z,disabled:!w,className:"w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Exportar PDF"}),l.jsx("button",{onClick:H,className:"w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 rounded-lg transition-colors",children:"Limpiar"})]})]}),l.jsx("div",{children:l.jsx(fee,{empresas:v,isLoaded:P,route:w})})]}),w&&l.jsx(B1t,{route:w,travelMode:j})]}),a==="map"&&l.jsx(fee,{empresas:e,isLoaded:P}),a==="list"&&l.jsx("div",{className:"space-y-3",children:e.length===0?l.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay empresas registradas."}):e.map(ie=>{var ce;return l.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-lg",children:ie.nombre}),l.jsxs("p",{className:"text-sm text-slate-500",children:[ie.rut," | ",ie.direccion]}),l.jsxs("p",{className:"text-sm text-slate-600",children:["Área: ",ie.area||"No especificada"," | Cupos: ",ie.cupos," | Supervisor: ",((ce=ie.docenteSupervisor)==null?void 0:ce.nombreCompleto)||"Ninguno"]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:()=>K(ie),className:"text-sm font-semibold text-blue-600 hover:text-blue-800",children:"Editar"}),l.jsx("button",{onClick:()=>V(ie.id),className:"text-sm text-red-500 hover:text-red-700",children:"Eliminar"})]})]})},ie.id)})}),a==="form"&&i&&l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"id"in i?"Editando Empresa":"Nueva Empresa"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(rCe,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsx("input",{value:i.nombre,onChange:ie=>G("nombre",ie.target.value),placeholder:"Nombre Empresa",className:"input-style pl-10",required:!0})]}),l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(QCe,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsx("input",{value:i.rut,onChange:ie=>G("rut",ie.target.value),placeholder:"RUT Empresa",className:"input-style pl-10",required:!0})]}),l.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[l.jsx(kN,{className:"absolute left-3 top-5 -translate-y-1/2 w-5 h-5 text-slate-400 z-10"}),l.jsx("div",{className:"w-full pl-10",children:l.jsx(fZ,{apiKey:k,selectProps:{value:d,onChange:z,placeholder:"Buscar dirección..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})})]}),l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(U2,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsx("input",{value:i.contacto,onChange:ie=>G("contacto",ie.target.value),placeholder:"Contacto",className:"input-style pl-10"})]}),l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(s_e,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsx("input",{type:"email",value:i.email||"",onChange:ie=>G("email",ie.target.value),placeholder:"Correo electrónico",className:"input-style pl-10"})]}),l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(hc,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsx("input",{type:"number",value:i.cupos,onChange:ie=>G("cupos",parseInt(ie.target.value)||1),placeholder:"N° de cupos",className:"input-style pl-10",min:"1"})]}),l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(kne,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsxs("select",{value:i.area||"",onChange:ie=>G("area",ie.target.value),className:"input-style pl-10 w-full",children:[l.jsx("option",{value:"",disabled:!0,children:"Seleccione un área"}),N1t.map(ie=>l.jsx("option",{value:ie,children:ie},ie))]})]}),l.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[l.jsx(U2,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsxs("select",{value:i.docenteSupervisor?JSON.stringify(i.docenteSupervisor):"",onChange:ie=>{const ce=ie.target.value;G("docenteSupervisor",ce?JSON.parse(ce):void 0)},className:"input-style pl-10 w-full",children:[l.jsx("option",{value:"",children:"Sin supervisor asignado"}),r.map(ie=>l.jsx("option",{value:JSON.stringify({id:ie.id,nombre:ie.nombreCompleto}),children:ie.nombreCompleto},ie.id))]})]})]}),l.jsxs("div",{className:"space-y-4 pt-4",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Evaluación de la Empresa"}),i.calificaciones.map((ie,ce)=>l.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border",children:[l.jsx(M_e,{className:"w-5 h-5 text-slate-400"}),l.jsx("span",{className:"flex-1 text-sm font-medium text-gray-700",children:ie.elemento}),l.jsxs("select",{value:ie.score||"",onChange:Ae=>{const Fe=[...i.calificaciones];Fe[ce].score=Ae.target.value?parseInt(Ae.target.value):null,G("calificaciones",Fe)},className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[l.jsx("option",{value:"",children:"Sin calificar"}),[1,2,3,4,5].map(Ae=>l.jsx("option",{value:Ae,children:Ae},Ae))]})]},ce))]}),l.jsx("div",{className:"pt-6",children:l.jsx("button",{onClick:W,className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-3 rounded-lg transition-colors",disabled:!i.nombre||!i.rut,children:"Guardar Empresa"})})]})]})},r9="dpd_actividades",Y0e="dpd_respuestas",I1t="usuarios";function F1t(e,{includeArchived:t=!1}={}){const r=wt(ht,r9),n=t?$t(r,xr("createdAt","desc")):$t(r,Qr("isArchived","==",!1),xr("createdAt","desc"));return pr(n,a=>{const s=a.docs.map(i=>({id:i.id,...i.data()}));e(s)})}async function O1t(e){const t=wt(ht,r9);return(await _n(t,{...e,isArchived:!1,createdAt:Ri(),updatedAt:Ri()})).id}async function D1t(e){const t=cr(ht,r9,e);await is(t)}function P1t(e,t){const r=wt(ht,Y0e),n=$t(r,Qr("activityId","==",e),xr("createdAt","desc"));return pr(n,a=>{const s=a.docs.map(i=>({id:i.id,...i.data()}));t(s)})}async function R1t(e){const t=wt(ht,Y0e);return(await _n(t,{...e,createdAt:Ri()})).id}function L1t(e,t){const r=wt(ht,I1t),n=$t(r,Qr("profile","in",e));return pr(n,a=>{const s=a.docs.map(i=>{const o=i.data();return{id:i.id,nombre:(o==null?void 0:o.displayName)||(o==null?void 0:o.name)||(o==null?void 0:o.email)||"Sin nombre",profile:o==null?void 0:o.profile,email:o==null?void 0:o.email}});t(s)})}function J0e(e){return(e||"").trim().split(/\s+/).filter(Boolean).length}const M1t=[{model:"gemini-2.5-flash-lite",generationConfig:{temperature:.7,maxOutputTokens:1024}},{model:"gemini-1.5-pro",generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:1024}}],U1t=()=>{const e="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";try{return new ps(e)}catch(t){return console.error("Error al inicializar Gemini:",t),null}};async function Q1t(e,t){try{const r=e.getGenerativeModel(t);return await r.generateContent("test"),r}catch(r){return console.warn(`Modelo ${t.model} no disponible:`,r),null}}async function Z0e(){const e=U1t();if(!e)return null;for(const t of M1t){const r=await Q1t(e,t);if(r)return console.log(`Usando modelo ${t.model}`),r}return console.error("No se encontró ningún modelo de Gemini disponible"),null}function eme(e){try{const t=e.trim().replace(/^```json/i,"").replace(/^```/i,"").replace(/```$/i,"");return JSON.parse(t)}catch{return null}}function H1t(e){const t=[...e];for(let r=t.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[t[r],t[n]]=[t[n],t[r]]}return t}async function V1t(e,t=3){var n;const r=await Z0e();if(!r)return XF(e,t);try{const a=`Genera ${t} preguntas de selección múltiple sobre el tema "${e}".
    Para cada pregunta, proporciona:
    1. Un enunciado claro y conciso
    2. 4 opciones de respuesta plausibles
    
    Devuelve las preguntas en formato JSON como este:
    {
      "preguntas": [
        {
          "enunciado": "¿Pregunta 1?",
          "opciones": ["Opción 1", "Opción 2", "Opción 3", "Opción 4"]
        }
      ]
    }`,i=(await r.generateContent(a)).response.text(),o=eme(i);return(n=o==null?void 0:o.preguntas)!=null&&n.length?o.preguntas.slice(0,t):(console.warn("Formato inesperado de respuesta:",i),XF(e,t))}catch(a){return console.error("Error al generar preguntas:",a),XF(e,t)}}async function z1t(e,t=30){var n;const r=await Z0e();if(!r)return YF(e);try{const a=e.filter(u=>u&&u.trim());if(a.length===0)return[];const s=`Analiza estas respuestas y extrae los conceptos clave con su relevancia:
    ${a.join(`
---
`)}
    
    Responde en formato JSON:
    {
      "keywords": [
        { "keyword": "concepto1", "score": 0.9 },
        { "keyword": "concepto2", "score": 0.8 }
      ]
    }
    
    Incluye hasta ${t} conceptos más relevantes.`,o=(await r.generateContent(s)).response.text(),c=eme(o);return(n=c==null?void 0:c.keywords)!=null&&n.length?c.keywords.filter(u=>u.keyword&&typeof u.score=="number").slice(0,t):(console.warn("Formato inesperado de respuesta:",o),YF(e))}catch(a){return console.error("Error al analizar respuestas:",a),YF(e)}}function XF(e,t){const r=["Totalmente de acuerdo","De acuerdo","Neutral","En desacuerdo","Totalmente en desacuerdo"];return Array(t).fill(null).map((n,a)=>({enunciado:`Pregunta ${a+1} sobre ${e}`,opciones:H1t(r).slice(0,4)}))}function YF(e){const t=new Set(["el","la","los","las","un","una","unos","unas","de","del","a","ante","con","en","para","por","sobre","y","o","pero","si","no","que","cual","quien","como"]),r={},n=e.join(" ").toLowerCase().split(/\W+/).filter(a=>a.length>3&&!t.has(a));for(const a of n)r[a]=(r[a]||0)+1;return Object.entries(r).sort(([,a],[,s])=>s-a).slice(0,20).map(([a,s])=>({keyword:a,score:Math.min(1,s/n.length)}))}const hk=500,hee=()=>({titulo:"",dimension:"Liderazgo Curricular",subdimension:"Planificación y organización del currículo",creadorPerfil:"PROFESORADO",creadorId:"",creadorNombre:"",preguntas:[],aiTema:"",aiCantidad:3}),Ew=Ze.memo(({title:e,icon:t,right:r,children:n})=>l.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-4 md:p-6 shadow-sm",children:[l.jsxs("header",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[t,e]}),r]}),n]})),$1t=Ze.memo(({value:e,onChange:t,canCreate:r})=>{const n=(a,s)=>l.jsx("button",{onClick:()=>t(a),className:`px-3 py-1.5 rounded-lg text-sm border transition ${e===a?"bg-indigo-600 text-white border-indigo-600":"bg-white hover:bg-indigo-50"}`,disabled:a==="crear"&&!r,title:a==="crear"&&!r?"Tu perfil no crea actividades":"",children:s},a);return l.jsxs("div",{className:"flex items-center gap-2",children:[n("responder","Responder"),n("dashboard","Dashboard"),n("crear","Nueva actividad")]})}),G1t=Ze.memo(({items:e,selectedId:t,onSelect:r,canDelete:n,onDelete:a})=>e.length?l.jsx("ul",{className:"space-y-2",children:e.map(s=>{const i=s.id===t;return l.jsxs("li",{children:[l.jsxs("button",{onClick:()=>r(s.id),className:`w-full flex items-center justify-between gap-2 rounded-xl border px-3 py-2 text-left transition ${i?"border-indigo-600 bg-indigo-600 text-white":"border-slate-200 bg-white hover:bg-indigo-50"}`,title:`${s.titulo} • ${s.dimension} / ${s.subdimension}`,children:[l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(Xg,{className:"w-4 h-4"}),l.jsx("span",{className:"font-medium",children:s.titulo})]}),l.jsx(OL,{className:"w-4 h-4 opacity-70"})]}),n(s)&&l.jsx("button",{onClick:()=>a(s.id,s.titulo),className:"mt-1 text-xs text-red-600 hover:underline",title:"Eliminar actividad",children:"Eliminar"})]},s.id)})}):l.jsxs("div",{className:"p-4 text-sm text-slate-500 flex items-center gap-2",children:[l.jsx(DCe,{className:"w-4 h-4"})," Aún no hay actividades creadas."]})),JF=Ze.memo(({label:e,value:t,pill:r})=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"text-slate-500",children:[e,":"]}),r?l.jsx("span",{className:"px-2 py-0.5 rounded-full bg-indigo-50 text-indigo-700 text-xs",children:t}):l.jsx("span",{className:"font-medium",children:t})]})),K1t=Ze.memo(({label:e,value:t,total:r=0})=>{const n=r>0?t/r*100:t>0?100:0,a=n>=75?"from-emerald-500":n>=50?"from-blue-500":n>=25?"from-amber-500":"from-rose-500";return l.jsxs("div",{className:"relative mt-1",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("span",{className:"text-sm font-medium text-slate-700",children:e}),l.jsx("span",{className:"text-sm font-medium text-slate-700",children:t})]}),l.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5",children:l.jsx("div",{className:`h-2.5 rounded-full bg-gradient-to-r ${a} to-transparent transition-all duration-500`,style:{width:`${Math.min(100,n)}%`}})})]})}),q1t=Ze.memo(({option:e,options:t,onChangeText:r,onDelete:n})=>{const a=S.useCallback(i=>r(e.id,i.target.value),[e.id,r]),s=S.useCallback(()=>n(e.id),[e.id,n]);return l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{value:e.text,onChange:a,className:"flex-1 border rounded-lg px-3 py-1.5",placeholder:`Opción ${t.findIndex(i=>i.id===e.id)+1}`}),l.jsx("button",{onClick:s,className:"text-red-600 hover:text-red-700",title:"Eliminar opción",children:l.jsx(Do,{className:"w-4 h-4"})})]})}),W1t=Ze.memo(({q:e,index:t,onRemove:r,onPatch:n})=>{const a=S.useCallback(f=>n(e.id,{enunciado:f.target.value}),[e.id,n]),s=S.useCallback(f=>n(e.id,{maxPalabras:parseInt(f.target.value||"500")}),[e.id,n]),i=S.useCallback(f=>n(e.id,{multiple:f.target.checked}),[e.id,n]),o=S.useCallback(()=>n(e.id,{opciones:[...e.opciones,{id:crypto.randomUUID(),text:""}]}),[e.id,e.opciones,n]),c=S.useCallback((f,h)=>{n(e.id,{opciones:e.opciones.map(m=>m.id===f?{...m,text:h}:m)})},[e.id,e.opciones,n]),u=S.useCallback(f=>n(e.id,{opciones:e.opciones.filter(h=>h.id!==f)}),[e.id,e.opciones,n]),d=S.useCallback(()=>r(e.id),[e.id,r]);return l.jsxs("div",{className:"border rounded-xl p-3",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("span",{className:"text-sm text-slate-600",children:["#",t+1," • ",e.tipo==="abierta"?"Abierta":"Selección múltiple"]}),l.jsx("button",{onClick:d,className:"text-red-600 hover:text-red-700",title:"Eliminar",children:l.jsx(Do,{className:"w-4 h-4"})})]}),l.jsx("input",{value:e.enunciado,onChange:a,className:"w-full border rounded-lg px-3 py-2 mb-2",placeholder:"Escribe el enunciado de la pregunta"}),e.tipo==="abierta"?l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("label",{className:"text-sm",children:"Máx. palabras"}),l.jsx("input",{type:"number",min:50,max:1e3,value:e.maxPalabras||hk,onChange:s,className:"w-24 border rounded-lg px-2 py-1"})]}):l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[l.jsx("input",{type:"checkbox",checked:e.multiple??!0,onChange:i})," Permitir selección múltiple"]}),e.opciones.map(f=>l.jsx(q1t,{option:f,options:e.opciones,onChangeText:c,onDelete:u},f.id)),l.jsx("button",{onClick:o,className:"text-sm text-sky-700 hover:underline",children:"+ Añadir opción"})]})]})}),X1t=Ze.memo(({q:e,respuestas:t,onChange:r})=>{var i,o;const n=S.useCallback(c=>r(e,c.target.value),[e,r]);if(e.tipo==="abierta"){const c=((i=t[e.id])==null?void 0:i.valorTexto)||"";return l.jsxs("div",{className:"border rounded-xl p-3",children:[l.jsx("p",{className:"font-medium mb-2",children:e.enunciado}),l.jsx("textarea",{rows:5,value:c,onChange:n,placeholder:`Máximo ${e.maxPalabras||hk} palabras…`,className:"w-full border rounded-lg px-3 py-2"}),l.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[J0e(c)," / ",e.maxPalabras||hk," palabras"]})]})}const a=((o=t[e.id])==null?void 0:o.seleccionados)||[],s=c=>{let u=new Set(a);a.includes(c)?u.delete(c):e.multiple?u.add(c):u=new Set([c]),r(e,Array.from(u))};return l.jsxs("div",{className:"border rounded-xl p-3",children:[l.jsx("p",{className:"font-medium mb-2",children:e.enunciado}),l.jsx("div",{className:"flex flex-col gap-2",children:(e.opciones||[]).map((c,u)=>{const d=a.includes(c);return l.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:e.multiple?"checkbox":"radio",name:e.multiple?`answer-${e.id}[]`:`answer-${e.id}`,checked:d,onChange:()=>s(c)}),l.jsx("span",{children:c})]},`${e.id}-${u}`)})})]})}),Y1t=({currentUser:e})=>{var M;const[t,r]=S.useState("responder"),[n,a]=S.useState([]),[s,i]=S.useState(""),[o,c]=S.useState(""),[u,d]=S.useState(hee()),f=S.useCallback(H=>d(Y=>({...Y,...H})),[]),[h,m]=S.useState([]),[g,x]=S.useState({}),[v,y]=S.useState([]),w=tz.includes(e==null?void 0:e.profile)||(e==null?void 0:e.isAdmin);S.useEffect(()=>{const H=F1t(Y=>{a(Y),i(Z=>{var ae;return Z||(((ae=Y[0])==null?void 0:ae.id)??"")})});return()=>H()},[]),S.useEffect(()=>{const H=L1t(["PROFESORADO","SUBDIRECCION"],Y=>{m(Y),d(Z=>{if(Z.creadorId)return Z;const ae=Y.find(le=>le.id===(e==null?void 0:e.uid));return ae?{...Z,creadorId:ae.id,creadorNombre:ae.nombre,creadorPerfil:ae.profile||Z.creadorPerfil}:Z})});return()=>H()},[e]),S.useEffect(()=>{if(!s)return;const H=P1t(s,y);return()=>H()},[s]);const _=S.useMemo(()=>n.find(H=>H.id===s),[n,s]);S.useMemo(()=>Eh[u.dimension]||[],[u.dimension]),S.useEffect(()=>{d(H=>{const Y=Eh[H.dimension]||[],Z=Y.includes(H.subdimension)?H.subdimension:Y[0]||"";return Z===H.subdimension?H:{...H,subdimension:Z}})},[u.dimension]);const T=S.useCallback(()=>{const H={id:crypto.randomUUID(),tipo:"abierta",enunciado:"Escribe aquí tu pregunta abierta",maxPalabras:hk};d(Y=>({...Y,preguntas:[...Y.preguntas,H]}))},[]),B=S.useCallback(()=>{const H={id:crypto.randomUUID(),tipo:"seleccion_multiple",enunciado:"Selecciona la(s) opción(es) que corresponda(n)",opciones:[{id:crypto.randomUUID(),text:"Opción 1"},{id:crypto.randomUUID(),text:"Opción 2"},{id:crypto.randomUUID(),text:"Opción 3"},{id:crypto.randomUUID(),text:"Opción 4"}],multiple:!0};d(Y=>({...Y,preguntas:[...Y.preguntas,H]}))},[]),j=S.useCallback((H,Y)=>{d(Z=>({...Z,preguntas:Z.preguntas.map(ae=>ae.id===H?{...ae,...Y}:ae)}))},[]),E=S.useCallback(H=>{d(Y=>({...Y,preguntas:Y.preguntas.filter(Z=>Z.id!==H)}))},[]),[N,I]=S.useState(!1),L=S.useCallback(async()=>{if(!(!u.aiTema||u.aiCantidad<1)){I(!0);try{const Y=(await V1t(u.aiTema,u.aiCantidad)).map(Z=>({id:crypto.randomUUID(),tipo:"seleccion_multiple",enunciado:Z.enunciado,opciones:Z.opciones.slice(0,5).map(ae=>({id:crypto.randomUUID(),text:ae})),multiple:!0}));d(Z=>({...Z,preguntas:[...Z.preguntas,...Y]}))}finally{I(!1)}}},[u.aiTema,u.aiCantidad]),[D,k]=S.useState([]);S.useEffect(()=>{(async()=>{var Z;if(!_)return;const Y=[];for(const ae of v)if(ae.respuestas)for(const[le,ie]of Object.entries(ae.respuestas)){const ce=_.preguntas.find(Fe=>Fe.id===le);if(!ce||ce.tipo!=="abierta")continue;const Ae=ie;Ae.tipo==="abierta"&&((Z=Ae.valorTexto)!=null&&Z.trim())&&Y.push(Ae.valorTexto.trim())}if(console.log("Respuestas abiertas encontradas:",Y.length),Y.length>0)try{const ae=await z1t(Y,30);console.log("Keywords generadas:",ae),k(ae)}catch(ae){console.error("Error al extraer keywords:",ae),k([])}else k([])})()},[_,v]);const P=S.useMemo(()=>{if(!_)return{};const H={};for(const Y of _.preguntas)Y.tipo==="seleccion_multiple"&&(H[Y.id]={},(Y.opciones||[]).forEach(Z=>H[Y.id][Z]=0));for(const Y of v)for(const[Z,ae]of Object.entries(Y.respuestas||{})){const le=ae;if((le==null?void 0:le.tipo)==="seleccion_multiple")for(const ie of le.seleccionados||[])H[Z]||(H[Z]={}),H[Z][ie]=(H[Z][ie]||0)+1}return H},[_,v]),R=S.useCallback(H=>H.map(Y=>Y.tipo==="abierta"?Y:{...Y,opciones:Y.opciones.map(Z=>Z.text)}),[]),W=S.useCallback(()=>d(hee()),[]),V=S.useCallback(async()=>{if(!u.titulo.trim())return alert("Debes ingresar un título");if(!u.creadorId)return alert("Debes seleccionar un creador");const H={titulo:u.titulo,dimension:u.dimension,subdimension:u.subdimension,creadorId:u.creadorId,creadorNombre:u.creadorNombre,creadorPerfil:u.creadorPerfil,preguntas:R(u.preguntas)},Y=await O1t(H);W(),i(Y),r("responder")},[u,R,W]),G=S.useCallback(async(H,Y)=>{var ae;if(window.confirm(`¿Eliminar "${Y}"?
Se eliminarán la actividad, sus preguntas y respuestas. Esta acción no se puede deshacer.`)){if(await D1t(H),s===H){const le=n.filter(ie=>ie.id!==H);i(((ae=le[0])==null?void 0:ae.id)||""),le.length||r("crear")}alert("Actividad eliminada.")}},[s,n]),z=S.useCallback(async()=>{if(!_||!v.length)return;const H=new br("p","mm","a4"),Y=20;let Z=Y;H.setFontSize(20),H.text(`Informe: ${_.titulo}`,Y,Z),Z+=10,H.setFontSize(12),H.text(`Dimensión: ${_.dimension}`,Y,Z+=10),H.text(`Subdimensión: ${_.subdimension}`,Y,Z+=7),H.text(`Creador: ${_.creadorNombre} (${_.creadorPerfil})`,Y,Z+=7),H.text(`Total de respuestas: ${v.length}`,Y,Z+=7),Z+=10;for(const ae of _.preguntas){if(Z>250&&(H.addPage(),Z=Y),H.setFontSize(14),H.text(`Pregunta: ${ae.enunciado}`,Y,Z+=10),Z+=5,H.setFontSize(12),ae.tipo==="seleccion_multiple"){const le=P[ae.id]||{},ie=v.length;Object.entries(le).forEach(([ce,Ae])=>{const Fe=ie>0?Math.round(Ae/ie*100):0;H.text(`${ce}: ${Ae} respuestas (${Fe}%)`,Y+5,Z+=7)})}else{H.text("Respuestas:",Y,Z+=7);for(const le of v){const ie=le.respuestas[ae.id];if((ie==null?void 0:ie.tipo)==="abierta"&&ie.valorTexto){Z>250&&(H.addPage(),Z=Y),H.text(`${le.userNombre}:`,Y+5,Z+=7);const ce=H.splitTextToSize(ie.valorTexto,170);H.text(ce,Y+10,Z+=7),Z+=ce.length*7}}}Z+=10}if(D.length>0){Z>250&&(H.addPage(),Z=Y),H.setFontSize(14),H.text("Conceptos clave detectados:",Y,Z+=10),H.setFontSize(12);const ae=D.map(ie=>`${ie.keyword} (${Math.round(ie.score*100)}%)`).join(", "),le=H.splitTextToSize(ae,170);H.text(le,Y,Z+=7)}H.save(`informe_${_.titulo.replace(/\s+/g,"_")}.pdf`)},[_,v,P,D]),K=S.useCallback(H=>{const Y=e==null?void 0:e.isAdmin,Z=H.creadorId===(e==null?void 0:e.uid);return w&&(Y||Z)},[e,w]),J=S.useCallback((H,Y)=>{x(Z=>({...Z,[H.id]:H.tipo==="abierta"?{tipo:"abierta",valorTexto:Y}:{tipo:"seleccion_multiple",seleccionados:Y}}))},[]),te=S.useCallback(async()=>{if(_){for(const H of _.preguntas){const Y=g[H.id];if(Y&&H.tipo==="abierta"&&H.maxPalabras){const Z=J0e(Y.valorTexto||"");if(Z>H.maxPalabras)return alert(`La respuesta a "${H.enunciado}" supera el máximo de ${H.maxPalabras} palabras (${Z}).`)}}await R1t({activityId:_.id,userId:(e==null?void 0:e.uid)||"anon",userNombre:(e==null?void 0:e.displayName)||(e==null?void 0:e.name)||"Anónimo",respuestas:g}),x({}),alert("¡Respuestas enviadas!")}},[_,g,e]);return l.jsxs("div",{className:"w-full max-w-7xl mx-auto p-4 md:p-6 space-y-6",children:[l.jsxs("header",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(RL,{className:"w-7 h-7 text-indigo-600"}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Desarrollo Profesional Docente"}),l.jsx("p",{className:"text-sm text-slate-600",children:"Crea sesiones, responde y explora insights en tiempo real."})]})]}),l.jsx($1t,{value:t,onChange:r,canCreate:w})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[l.jsx("aside",{className:"lg:col-span-4 xl:col-span-3",children:l.jsx(Ew,{title:"Actividades",icon:l.jsx(Xg,{className:"w-5 h-5 text-indigo-600"}),children:l.jsx(G1t,{items:n,selectedId:s,onSelect:H=>{i(H),r("responder")},canDelete:K,onDelete:G})})}),l.jsxs("main",{className:"lg:col-span-8 xl:col-span-9 space-y-6",children:[t==="crear"&&w&&l.jsxs(Ew,{title:"Nueva actividad / sesión",icon:l.jsx(oz,{className:"w-5 h-5 text-indigo-600"}),right:l.jsxs("button",{onClick:V,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[l.jsx(qh,{className:"w-4 h-4"}),"Guardar"]}),children:[l.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Título"}),l.jsx("input",{value:u.titulo,onChange:H=>f({titulo:H.target.value}),placeholder:"Ej: Comunidades de aprendizaje 1",className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Área de trabajo (Dimensión PME)"}),l.jsx("select",{value:u.dimension,onChange:H=>f({dimension:H.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:Object.keys(Eh).map(H=>l.jsx("option",{value:H,children:H},H))}),l.jsx("select",{value:u.subdimension,onChange:H=>f({subdimension:H.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:(Eh[u.dimension]||[]).map(H=>l.jsx("option",{value:H,children:H},H))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Creador • Perfil"}),l.jsx("select",{value:u.creadorPerfil,onChange:H=>f({creadorPerfil:H.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:tz.map(H=>l.jsx("option",{value:H,children:H},H))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Creador • Usuario"}),l.jsxs("select",{value:u.creadorId,onChange:H=>{const Y=H.target.value,Z=h.find(ae=>ae.id===Y);f({creadorId:Y,creadorNombre:(Z==null?void 0:Z.nombre)||""})},className:"w-full border rounded-lg px-3 py-2 bg-white",children:[l.jsx("option",{value:"",children:"Seleccione…"}),h.filter(H=>H.profile===u.creadorPerfil).map(H=>l.jsx("option",{value:H.id,children:H.nombre},H.id))]})]})]}),l.jsxs("div",{className:"mt-6",children:[l.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[l.jsx(Ine,{className:"w-4 h-4"})," Preguntas"]}),l.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[l.jsxs("button",{onClick:T,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90",children:[l.jsx(od,{className:"w-4 h-4"})," Abierta"]}),l.jsxs("button",{onClick:B,className:"inline-flex items-center gap-2 bg-sky-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90",children:[l.jsx(od,{className:"w-4 h-4"})," Selección múltiple"]}),l.jsxs("div",{className:"ms-auto flex items-center gap-2",children:[l.jsxs("div",{className:"hidden md:inline-flex items-center gap-1 text-slate-500 text-xs",children:[l.jsx(t5e,{className:"w-4 h-4"})," IA"]}),l.jsx("input",{value:u.aiTema,onChange:H=>f({aiTema:H.target.value}),placeholder:"Tema para IA (p. ej., evaluación formativa)",className:"border rounded-lg px-3 py-1.5"}),l.jsx("input",{type:"number",min:1,max:10,value:u.aiCantidad,onChange:H=>f({aiCantidad:parseInt(H.target.value||"1")}),className:"w-20 border rounded-lg px-3 py-1.5"}),l.jsxs("button",{onClick:L,disabled:N||!u.aiTema,className:"inline-flex items-center gap-2 bg-fuchsia-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90 disabled:opacity-50",children:[l.jsx(Bg,{className:"w-4 h-4"}),N?"Generando…":"Generar con IA"]})]})]}),l.jsxs("div",{className:"space-y-4",children:[u.preguntas.map((H,Y)=>l.jsx(W1t,{q:H,index:Y,onRemove:E,onPatch:j},H.id)),u.preguntas.length===0&&l.jsxs("div",{className:"text-sm text-slate-500 flex items-center gap-2",children:[l.jsx(io,{className:"w-4 h-4"}),"Añade preguntas abiertas o de selección múltiple (o usa IA)."]})]})]})]}),t==="responder"&&_&&l.jsx(Ew,{title:`Responder: ${_.titulo}`,icon:l.jsx(hc,{className:"w-5 h-5 text-indigo-600"}),right:l.jsxs("button",{onClick:te,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[l.jsx(qh,{className:"w-4 h-4"}),"Enviar respuestas"]}),children:l.jsxs("div",{className:"grid gap-4",children:[l.jsxs("div",{className:"grid md:grid-cols-3 gap-3 text-sm",children:[l.jsx(JF,{pill:!0,label:"Dimensión",value:_.dimension}),l.jsx(JF,{pill:!0,label:"Subdimensión",value:_.subdimension}),l.jsx(JF,{pill:!0,label:"Creador",value:`${_.creadorNombre} • ${_.creadorPerfil}`})]}),_.preguntas.map(H=>l.jsx(X1t,{q:H,respuestas:g,onChange:J},H.id))]})}),t==="respuestas_individuales"&&_&&l.jsx(Ew,{title:`Respuestas individuales: ${_.titulo}`,icon:l.jsx(hc,{className:"w-5 h-5 text-indigo-600"}),right:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:z,disabled:!v.length,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:v.length?"Descargar informe en PDF":"No hay respuestas para generar informe",children:[l.jsx(Zm,{className:"w-4 h-4"}),"Descargar informe"]}),l.jsxs("button",{onClick:()=>{c(""),r("dashboard")},className:"inline-flex items-center gap-2 bg-slate-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[l.jsx(Wd,{className:"w-4 h-4"}),"Volver al dashboard"]})]}),children:l.jsxs("div",{className:"grid md:grid-cols-12 gap-6",children:[l.jsx("div",{className:"md:col-span-4 lg:col-span-3",children:l.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[l.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2",children:[l.jsx(Wy,{className:"w-5 h-5 text-indigo-600"}),"Usuarios (",v.length,")"]}),l.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto pr-2",children:v.length>0?v.map(H=>{var Y;return l.jsxs("button",{onClick:()=>c(H.userId),className:`w-full text-left p-3 rounded-lg transition-all duration-200 ${o===H.userId?"bg-indigo-50 text-indigo-700 font-medium border border-indigo-200 shadow-sm":"hover:bg-slate-50 border border-transparent"}`,children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"p-1.5 bg-indigo-100 rounded-lg",children:l.jsx(Wy,{className:"w-4 h-4 text-indigo-600"})}),l.jsx("span",{className:"font-medium",children:H.userNombre})]}),l.jsxs("div",{className:"text-xs text-slate-500 mt-2 flex items-center gap-1.5",children:[l.jsx(id,{className:"w-3.5 h-3.5"}),new Date(((Y=H.createdAt)==null?void 0:Y.seconds)*1e3).toLocaleDateString()]})]},H.userId)}):l.jsxs("div",{className:"text-center py-8 text-slate-500",children:[l.jsx(Wy,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{className:"text-sm",children:"No hay respuestas todavía"})]})})]})}),l.jsx("div",{className:"md:col-span-8 lg:col-span-9",children:o?l.jsxs(l.Fragment,{children:[l.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2 text-lg",children:[l.jsx(oz,{className:"w-5 h-5 text-indigo-600"}),"Respuestas de:"," ",l.jsx("span",{className:"text-indigo-600",children:(M=v.find(H=>H.userId===o))==null?void 0:M.userNombre})]}),l.jsx("div",{className:"space-y-6",children:_.preguntas.map(H=>{var ae;const Y=v.find(le=>le.userId===o),Z=(ae=Y==null?void 0:Y.respuestas)==null?void 0:ae[H.id];return console.log("Respuesta encontrada:",{preguntaId:H.id,tipo:H.tipo,respuesta:Z}),l.jsxs("div",{className:"bg-white p-6 border border-slate-200 rounded-xl shadow-sm",children:[l.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[l.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg shrink-0",children:H.tipo==="abierta"?l.jsx(lz,{className:"w-5 h-5 text-indigo-600"}):l.jsx(s2,{className:"w-5 h-5 text-indigo-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-900",children:H.enunciado}),l.jsx("p",{className:"text-sm text-slate-500 mt-1",children:H.tipo==="abierta"?"Respuesta abierta":"Selección múltiple"})]})]}),H.tipo==="abierta"?(Z==null?void 0:Z.tipo)==="abierta"&&Z.valorTexto?l.jsx("div",{className:"mt-3 bg-slate-50 rounded-lg p-4",children:l.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:Z.valorTexto})}):l.jsx("p",{className:"text-slate-500 italic mt-3",children:"Sin respuesta"}):l.jsxs("div",{className:"space-y-2 mt-3",children:[(H.opciones||[]).map(le=>{const ce=((Z==null?void 0:Z.tipo)==="seleccion_multiple"?Z.seleccionados||[]:[]).includes(le.text);return l.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-all ${ce?"border-indigo-200 bg-indigo-50 text-indigo-700 shadow-sm":"border-slate-200 text-slate-500"}`,children:[l.jsx("div",{className:"flex-shrink-0",children:ce?l.jsx(io,{className:"w-4 h-4 text-indigo-600"}):l.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 rounded-full"})}),l.jsx("span",{className:"text-sm",children:typeof le=="string"?le:le.text})]},typeof le=="string"?le:le.id)}),!Z&&l.jsx("p",{className:"text-slate-500 italic mt-1 text-sm",children:"Sin respuesta"})]})]},H.id)})})]}):l.jsx("div",{className:"text-center text-slate-500 py-12",children:"Selecciona un usuario para ver sus respuestas"})})]})}),t==="dashboard"&&_&&l.jsxs(Ew,{title:`Dashboard: ${_.titulo}`,icon:l.jsx(L2,{className:"w-5 h-5 text-indigo-600"}),right:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:()=>r("respuestas_individuales"),className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors",children:[l.jsx(Wy,{className:"w-4 h-4"}),"Ver respuestas individuales"]}),K(_)&&l.jsxs("button",{onClick:()=>G(_.id,_.titulo),className:"inline-flex items-center gap-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:[l.jsx(Do,{className:"w-4 h-4"}),"Eliminar actividad"]})]}),children:[l.jsx("div",{className:"mb-6",children:l.jsxs("button",{onClick:z,disabled:!v.length,className:"w-full md:w-auto inline-flex items-center justify-center gap-2 bg-emerald-600 text-white px-6 py-3 rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-lg font-medium",title:v.length?"Descargar informe en PDF":"No hay respuestas para generar informe",children:[l.jsx(Zm,{className:"w-5 h-5"}),"Descargar Informe Global"]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[l.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:l.jsx(Wy,{className:"w-5 h-5 text-indigo-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-slate-500",children:"Total respuestas"}),l.jsx("p",{className:"text-xl font-semibold",children:v.length})]})]})}),l.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:l.jsx(s2,{className:"w-5 h-5 text-emerald-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-slate-500",children:"Preguntas"}),l.jsx("p",{className:"text-xl font-semibold",children:_.preguntas.length})]})]})}),l.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:l.jsx(Yg,{className:"w-5 h-5 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-slate-500",children:"Creador"}),l.jsx("p",{className:"text-sm font-medium truncate",children:_.creadorNombre})]})]})}),l.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:l.jsx(id,{className:"w-5 h-5 text-purple-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-slate-500",children:"Fecha"}),l.jsx("p",{className:"text-sm font-medium",children:(()=>{const H=_.createdAt,Y=H!=null&&H.toDate?H.toDate():H!=null&&H.seconds?new Date(H.seconds*1e3):H?new Date(H):null;return Y?Y.toLocaleDateString():"No disponible"})()})]})]})})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(Bne,{className:"w-5 h-5 text-indigo-600"}),l.jsx("h4",{className:"font-semibold",children:"Resultados de selección múltiple"})]}),l.jsxs("div",{className:"space-y-4",children:[_.preguntas.filter(H=>H.tipo==="seleccion_multiple").map(H=>l.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[l.jsx("p",{className:"font-medium mb-3 text-slate-700",children:H.enunciado}),Object.entries(P[H.id]||{}).map(([Y,Z])=>l.jsx(K1t,{label:Y,value:Z},Y)),l.jsxs("div",{className:"text-xs text-slate-500 mt-2 flex items-center gap-1",children:[l.jsx(K1,{className:"w-4 h-4"}),"Total respuestas: ",v.length]})]},H.id)),_.preguntas.filter(H=>H.tipo==="seleccion_multiple").length===0&&l.jsxs("div",{className:"text-center py-8 text-slate-500",children:[l.jsx(s2,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{className:"text-sm",children:"No hay preguntas de selección múltiple en esta actividad."})]})]})]}),l.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(YEe,{className:"w-5 h-5 text-indigo-600"}),l.jsx("h4",{className:"font-semibold",children:"Conceptos clave (IA)"})]}),D.length?l.jsx("div",{className:"flex flex-wrap gap-2",children:D.map(H=>l.jsx("span",{className:"rounded-full px-3 py-1.5 text-sm bg-gradient-to-r from-indigo-50 to-purple-50 text-indigo-700 border border-indigo-100 shadow-sm transition-transform hover:scale-105",style:{fontSize:`${12+Math.round(H.score*18)}px`},children:H.keyword},H.keyword))}):l.jsxs("div",{className:"text-center py-8 text-slate-500",children:[l.jsx(lz,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{className:"text-sm",children:"Aún no hay suficientes respuestas abiertas para mostrar conceptos."})]})]})]})]})]})]})]})};var OC=e=>e.type==="checkbox",Sg=e=>e instanceof Date,Tl=e=>e==null;const tme=e=>typeof e=="object";var ai=e=>!Tl(e)&&!Array.isArray(e)&&tme(e)&&!Sg(e),J1t=e=>ai(e)&&e.target?OC(e.target)?e.target.checked:e.target.value:e,Z1t=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,ebt=(e,t)=>e.has(Z1t(t)),tbt=e=>{const t=e.constructor&&e.constructor.prototype;return ai(t)&&t.hasOwnProperty("isPrototypeOf")},n9=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ns(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(n9&&(e instanceof Blob||n))&&(r||ai(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!tbt(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=ns(e[a]));else return e;return t}var WT=e=>/^\w*$/.test(e),as=e=>e===void 0,XT=e=>Array.isArray(e)?e.filter(Boolean):[],a9=e=>XT(e.replace(/["|']|\]/g,"").split(/\.|\[/)),ur=(e,t,r)=>{if(!t||!ai(e))return r;const n=(WT(t)?[t]:a9(t)).reduce((a,s)=>Tl(a)?a:a[s],e);return as(n)||n===e?as(e[t])?r:e[t]:n},sA=e=>typeof e=="boolean",Ma=(e,t,r)=>{let n=-1;const a=WT(t)?[t]:a9(t),s=a.length,i=s-1;for(;++n<s;){const o=a[n];let c=r;if(n!==i){const u=e[o];c=ai(u)||Array.isArray(u)?u:isNaN(+a[n+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;e[o]=c,e=e[o]}};const mee={BLUR:"blur",FOCUS_OUT:"focusout"},ed={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},bh={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},rme=Ze.createContext(null);rme.displayName="HookFormContext";const rbt=()=>Ze.useContext(rme);var nbt=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(a,s,{get:()=>{const i=s;return t._proxyFormState[i]!==ed.all&&(t._proxyFormState[i]=!n||ed.all),e[i]}});return a};const nme=typeof window<"u"?Ze.useLayoutEffect:Ze.useEffect;var vA=e=>typeof e=="string",abt=(e,t,r,n,a)=>vA(e)?(n&&t.watch.add(e),ur(r,e,a)):Array.isArray(e)?e.map(s=>(n&&t.watch.add(s),ur(r,s))):(n&&(t.watchAll=!0),r),vR=e=>Tl(e)||!tme(e);function ym(e,t,r=new WeakSet){if(vR(e)||vR(t))return e===t;if(Sg(e)&&Sg(t))return e.getTime()===t.getTime();const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const s of n){const i=e[s];if(!a.includes(s))return!1;if(s!=="ref"){const o=t[s];if(Sg(i)&&Sg(o)||ai(i)&&ai(o)||Array.isArray(i)&&Array.isArray(o)?!ym(i,o,r):i!==o)return!1}}return!0}var sbt=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},fc=e=>Array.isArray(e)?e:[e],pee=()=>{let e=[];return{get observers(){return e},next:a=>{for(const s of e)s.next&&s.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(s=>s!==a)}}),unsubscribe:()=>{e=[]}}},Nl=e=>ai(e)&&!Object.keys(e).length,s9=e=>e.type==="file",Kd=e=>typeof e=="function",mk=e=>{if(!n9)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},ame=e=>e.type==="select-multiple",i9=e=>e.type==="radio",ibt=e=>i9(e)||OC(e),ZF=e=>mk(e)&&e.isConnected;function obt(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=as(e)?n++:e[t[n++]];return e}function lbt(e){for(const t in e)if(e.hasOwnProperty(t)&&!as(e[t]))return!1;return!0}function Ws(e,t){const r=Array.isArray(t)?t:WT(t)?[t]:a9(t),n=r.length===1?e:obt(e,r),a=r.length-1,s=r[a];return n&&delete n[s],a!==0&&(ai(n)&&Nl(n)||Array.isArray(n)&&lbt(n))&&Ws(e,r.slice(0,-1)),e}var sme=e=>{for(const t in e)if(Kd(e[t]))return!0;return!1};function pk(e,t={}){const r=Array.isArray(e);if(ai(e)||r)for(const n in e)Array.isArray(e[n])||ai(e[n])&&!sme(e[n])?(t[n]=Array.isArray(e[n])?[]:{},pk(e[n],t[n])):Tl(e[n])||(t[n]=!0);return t}function ime(e,t,r){const n=Array.isArray(e);if(ai(e)||n)for(const a in e)Array.isArray(e[a])||ai(e[a])&&!sme(e[a])?as(t)||vR(r[a])?r[a]=Array.isArray(e[a])?pk(e[a],[]):{...pk(e[a])}:ime(e[a],Tl(t)?{}:t[a],r[a]):r[a]=!ym(e[a],t[a]);return r}var Cw=(e,t)=>ime(e,t,pk(t));const gee={value:!1,isValid:!1},xee={value:!0,isValid:!0};var ome=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!as(e[0].attributes.value)?as(e[0].value)||e[0].value===""?xee:{value:e[0].value,isValid:!0}:xee:gee}return gee},lme=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>as(e)?e:t?e===""?NaN:e&&+e:r&&vA(e)?new Date(e):n?n(e):e;const vee={isValid:!1,value:null};var cme=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,vee):vee;function bee(e){const t=e.ref;return s9(t)?t.files:i9(t)?cme(e.refs).value:ame(t)?[...t.selectedOptions].map(({value:r})=>r):OC(t)?ome(e.refs).value:lme(as(t.value)?e.ref.value:t.value,e)}var cbt=(e,t,r,n)=>{const a={};for(const s of e){const i=ur(t,s);i&&Ma(a,s,i._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},gk=e=>e instanceof RegExp,_w=e=>as(e)?e:gk(e)?e.source:ai(e)?gk(e.value)?e.value.source:e.value:e,f1=e=>({isOnSubmit:!e||e===ed.onSubmit,isOnBlur:e===ed.onBlur,isOnChange:e===ed.onChange,isOnAll:e===ed.all,isOnTouch:e===ed.onTouched});const yee="AsyncFunction";var ubt=e=>!!e&&!!e.validate&&!!(Kd(e.validate)&&e.validate.constructor.name===yee||ai(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===yee)),dbt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),bR=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const R1=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const s=ur(e,a);if(s){const{_f:i,...o}=s;if(i){if(i.refs&&i.refs[0]&&t(i.refs[0],a)&&!n)return!0;if(i.ref&&t(i.ref,i.name)&&!n)return!0;if(R1(o,t))break}else if(ai(o)&&R1(o,t))break}}};function wee(e,t,r){const n=ur(e,r);if(n||WT(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const s=a.join("."),i=ur(t,s),o=ur(e,s);if(i&&!Array.isArray(i)&&r!==s)return{name:r};if(o&&o.type)return{name:s,error:o};if(o&&o.root&&o.root.type)return{name:`${s}.root`,error:o.root};a.pop()}return{name:r}}var fbt=(e,t,r,n)=>{r(e);const{name:a,...s}=e;return Nl(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(i=>t[i]===(!n||ed.all))},Abt=(e,t,r)=>!e||!t||e===t||fc(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),hbt=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,mbt=(e,t)=>!XT(ur(e,t)).length&&Ws(e,t),ume=(e,t,r)=>{const n=fc(ur(e,r));return Ma(n,"root",t[r]),Ma(e,r,n),e},nN=e=>vA(e);function Eee(e,t,r="validate"){if(nN(e)||Array.isArray(e)&&e.every(nN)||sA(e)&&!e)return{type:r,message:nN(e)?e:"",ref:t}}var Hv=e=>ai(e)&&!gk(e)?e:{value:e,message:""},yR=async(e,t,r,n,a,s)=>{const{ref:i,refs:o,required:c,maxLength:u,minLength:d,min:f,max:h,pattern:m,validate:g,name:x,valueAsNumber:v,mount:y}=e._f,w=ur(r,x);if(!y||t.has(x))return{};const _=o?o[0]:i,T=k=>{a&&_.reportValidity&&(_.setCustomValidity(sA(k)?"":k||""),_.reportValidity())},B={},j=i9(i),E=OC(i),N=j||E,I=(v||s9(i))&&as(i.value)&&as(w)||mk(i)&&i.value===""||w===""||Array.isArray(w)&&!w.length,L=sbt.bind(null,x,n,B),D=(k,P,R,W=bh.maxLength,V=bh.minLength)=>{const G=k?P:R;B[x]={type:k?W:V,message:G,ref:i,...L(k?W:V,G)}};if(s?!Array.isArray(w)||!w.length:c&&(!N&&(I||Tl(w))||sA(w)&&!w||E&&!ome(o).isValid||j&&!cme(o).isValid)){const{value:k,message:P}=nN(c)?{value:!!c,message:c}:Hv(c);if(k&&(B[x]={type:bh.required,message:P,ref:_,...L(bh.required,P)},!n))return T(P),B}if(!I&&(!Tl(f)||!Tl(h))){let k,P;const R=Hv(h),W=Hv(f);if(!Tl(w)&&!isNaN(w)){const V=i.valueAsNumber||w&&+w;Tl(R.value)||(k=V>R.value),Tl(W.value)||(P=V<W.value)}else{const V=i.valueAsDate||new Date(w),G=J=>new Date(new Date().toDateString()+" "+J),z=i.type=="time",K=i.type=="week";vA(R.value)&&w&&(k=z?G(w)>G(R.value):K?w>R.value:V>new Date(R.value)),vA(W.value)&&w&&(P=z?G(w)<G(W.value):K?w<W.value:V<new Date(W.value))}if((k||P)&&(D(!!k,R.message,W.message,bh.max,bh.min),!n))return T(B[x].message),B}if((u||d)&&!I&&(vA(w)||s&&Array.isArray(w))){const k=Hv(u),P=Hv(d),R=!Tl(k.value)&&w.length>+k.value,W=!Tl(P.value)&&w.length<+P.value;if((R||W)&&(D(R,k.message,P.message),!n))return T(B[x].message),B}if(m&&!I&&vA(w)){const{value:k,message:P}=Hv(m);if(gk(k)&&!w.match(k)&&(B[x]={type:bh.pattern,message:P,ref:i,...L(bh.pattern,P)},!n))return T(P),B}if(g){if(Kd(g)){const k=await g(w,r),P=Eee(k,_);if(P&&(B[x]={...P,...L(bh.validate,P.message)},!n))return T(P.message),B}else if(ai(g)){let k={};for(const P in g){if(!Nl(k)&&!n)break;const R=Eee(await g[P](w,r),_,P);R&&(k={...R,...L(P,R.message)},T(R.message),n&&(B[x]=k))}if(!Nl(k)&&(B[x]={ref:_,...k},!n))return B}}return T(!0),B};const pbt={mode:ed.onSubmit,reValidateMode:ed.onChange,shouldFocusError:!0};function gbt(e={}){let t={...pbt,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Kd(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},a=ai(t.defaultValues)||ai(t.values)?ns(t.defaultValues||t.values)||{}:{},s=t.shouldUnregister?{}:ns(a),i={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const h={array:pee(),state:pee()},m=t.criteriaMode===ed.all,g=be=>Oe=>{clearTimeout(u),u=setTimeout(be,Oe)},x=async be=>{if(!t.disabled&&(d.isValid||f.isValid||be)){const Oe=t.resolver?Nl((await E()).errors):await I(n,!0);Oe!==r.isValid&&h.state.next({isValid:Oe})}},v=(be,Oe)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((be||Array.from(o.mount)).forEach(Pe=>{Pe&&(Oe?Ma(r.validatingFields,Pe,Oe):Ws(r.validatingFields,Pe))}),h.state.next({validatingFields:r.validatingFields,isValidating:!Nl(r.validatingFields)}))},y=(be,Oe=[],Pe,qe,et=!0,ct=!0)=>{if(qe&&Pe&&!t.disabled){if(i.action=!0,ct&&Array.isArray(ur(n,be))){const pt=Pe(ur(n,be),qe.argA,qe.argB);et&&Ma(n,be,pt)}if(ct&&Array.isArray(ur(r.errors,be))){const pt=Pe(ur(r.errors,be),qe.argA,qe.argB);et&&Ma(r.errors,be,pt),mbt(r.errors,be)}if((d.touchedFields||f.touchedFields)&&ct&&Array.isArray(ur(r.touchedFields,be))){const pt=Pe(ur(r.touchedFields,be),qe.argA,qe.argB);et&&Ma(r.touchedFields,be,pt)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Cw(a,s)),h.state.next({name:be,isDirty:D(be,Oe),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Ma(s,be,Oe)},w=(be,Oe)=>{Ma(r.errors,be,Oe),h.state.next({errors:r.errors})},_=be=>{r.errors=be,h.state.next({errors:r.errors,isValid:!1})},T=(be,Oe,Pe,qe)=>{const et=ur(n,be);if(et){const ct=ur(s,be,as(Pe)?ur(a,be):Pe);as(ct)||qe&&qe.defaultChecked||Oe?Ma(s,be,Oe?ct:bee(et._f)):R(be,ct),i.mount&&x()}},B=(be,Oe,Pe,qe,et)=>{let ct=!1,pt=!1;const Ft={name:be};if(!t.disabled){if(!Pe||qe){(d.isDirty||f.isDirty)&&(pt=r.isDirty,r.isDirty=Ft.isDirty=D(),ct=pt!==Ft.isDirty);const Ut=ym(ur(a,be),Oe);pt=!!ur(r.dirtyFields,be),Ut?Ws(r.dirtyFields,be):Ma(r.dirtyFields,be,!0),Ft.dirtyFields=r.dirtyFields,ct=ct||(d.dirtyFields||f.dirtyFields)&&pt!==!Ut}if(Pe){const Ut=ur(r.touchedFields,be);Ut||(Ma(r.touchedFields,be,Pe),Ft.touchedFields=r.touchedFields,ct=ct||(d.touchedFields||f.touchedFields)&&Ut!==Pe)}ct&&et&&h.state.next(Ft)}return ct?Ft:{}},j=(be,Oe,Pe,qe)=>{const et=ur(r.errors,be),ct=(d.isValid||f.isValid)&&sA(Oe)&&r.isValid!==Oe;if(t.delayError&&Pe?(c=g(()=>w(be,Pe)),c(t.delayError)):(clearTimeout(u),c=null,Pe?Ma(r.errors,be,Pe):Ws(r.errors,be)),(Pe?!ym(et,Pe):et)||!Nl(qe)||ct){const pt={...qe,...ct&&sA(Oe)?{isValid:Oe}:{},errors:r.errors,name:be};r={...r,...pt},h.state.next(pt)}},E=async be=>{v(be,!0);const Oe=await t.resolver(s,t.context,cbt(be||o.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return v(be),Oe},N=async be=>{const{errors:Oe}=await E(be);if(be)for(const Pe of be){const qe=ur(Oe,Pe);qe?Ma(r.errors,Pe,qe):Ws(r.errors,Pe)}else r.errors=Oe;return Oe},I=async(be,Oe,Pe={valid:!0})=>{for(const qe in be){const et=be[qe];if(et){const{_f:ct,...pt}=et;if(ct){const Ft=o.array.has(ct.name),Ut=et._f&&ubt(et._f);Ut&&d.validatingFields&&v([qe],!0);const Rt=await yR(et,o.disabled,s,m,t.shouldUseNativeValidation&&!Oe,Ft);if(Ut&&d.validatingFields&&v([qe]),Rt[ct.name]&&(Pe.valid=!1,Oe))break;!Oe&&(ur(Rt,ct.name)?Ft?ume(r.errors,Rt,ct.name):Ma(r.errors,ct.name,Rt[ct.name]):Ws(r.errors,ct.name))}!Nl(pt)&&await I(pt,Oe,Pe)}}return Pe.valid},L=()=>{for(const be of o.unMount){const Oe=ur(n,be);Oe&&(Oe._f.refs?Oe._f.refs.every(Pe=>!ZF(Pe)):!ZF(Oe._f.ref))&&le(be)}o.unMount=new Set},D=(be,Oe)=>!t.disabled&&(be&&Oe&&Ma(s,be,Oe),!ym(J(),a)),k=(be,Oe,Pe)=>abt(be,o,{...i.mount?s:as(Oe)?a:vA(be)?{[be]:Oe}:Oe},Pe,Oe),P=be=>XT(ur(i.mount?s:a,be,t.shouldUnregister?ur(a,be,[]):[])),R=(be,Oe,Pe={})=>{const qe=ur(n,be);let et=Oe;if(qe){const ct=qe._f;ct&&(!ct.disabled&&Ma(s,be,lme(Oe,ct)),et=mk(ct.ref)&&Tl(Oe)?"":Oe,ame(ct.ref)?[...ct.ref.options].forEach(pt=>pt.selected=et.includes(pt.value)):ct.refs?OC(ct.ref)?ct.refs.forEach(pt=>{(!pt.defaultChecked||!pt.disabled)&&(Array.isArray(et)?pt.checked=!!et.find(Ft=>Ft===pt.value):pt.checked=et===pt.value||!!et)}):ct.refs.forEach(pt=>pt.checked=pt.value===et):s9(ct.ref)?ct.ref.value="":(ct.ref.value=et,ct.ref.type||h.state.next({name:be,values:ns(s)})))}(Pe.shouldDirty||Pe.shouldTouch)&&B(be,et,Pe.shouldTouch,Pe.shouldDirty,!0),Pe.shouldValidate&&K(be)},W=(be,Oe,Pe)=>{for(const qe in Oe){if(!Oe.hasOwnProperty(qe))return;const et=Oe[qe],ct=be+"."+qe,pt=ur(n,ct);(o.array.has(be)||ai(et)||pt&&!pt._f)&&!Sg(et)?W(ct,et,Pe):R(ct,et,Pe)}},V=(be,Oe,Pe={})=>{const qe=ur(n,be),et=o.array.has(be),ct=ns(Oe);Ma(s,be,ct),et?(h.array.next({name:be,values:ns(s)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&Pe.shouldDirty&&h.state.next({name:be,dirtyFields:Cw(a,s),isDirty:D(be,ct)})):qe&&!qe._f&&!Tl(ct)?W(be,ct,Pe):R(be,ct,Pe),bR(be,o)&&h.state.next({...r,name:be}),h.state.next({name:i.mount?be:void 0,values:ns(s)})},G=async be=>{i.mount=!0;const Oe=be.target;let Pe=Oe.name,qe=!0;const et=ur(n,Pe),ct=Ut=>{qe=Number.isNaN(Ut)||Sg(Ut)&&isNaN(Ut.getTime())||ym(Ut,ur(s,Pe,Ut))},pt=f1(t.mode),Ft=f1(t.reValidateMode);if(et){let Ut,Rt;const Ht=Oe.type?bee(et._f):J1t(be),yt=be.type===mee.BLUR||be.type===mee.FOCUS_OUT,jr=!dbt(et._f)&&!t.resolver&&!ur(r.errors,Pe)&&!et._f.deps||hbt(yt,ur(r.touchedFields,Pe),r.isSubmitted,Ft,pt),rr=bR(Pe,o,yt);Ma(s,Pe,Ht),yt?(!Oe||!Oe.readOnly)&&(et._f.onBlur&&et._f.onBlur(be),c&&c(0)):et._f.onChange&&et._f.onChange(be);const on=B(Pe,Ht,yt),kr=!Nl(on)||rr;if(!yt&&h.state.next({name:Pe,type:be.type,values:ns(s)}),jr)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?yt&&x():yt||x()),kr&&h.state.next({name:Pe,...rr?{}:on});if(!yt&&rr&&h.state.next({...r}),t.resolver){const{errors:Kr}=await E([Pe]);if(ct(Ht),qe){const Fn=wee(r.errors,n,Pe),Rr=wee(Kr,n,Fn.name||Pe);Ut=Rr.error,Pe=Rr.name,Rt=Nl(Kr)}}else v([Pe],!0),Ut=(await yR(et,o.disabled,s,m,t.shouldUseNativeValidation))[Pe],v([Pe]),ct(Ht),qe&&(Ut?Rt=!1:(d.isValid||f.isValid)&&(Rt=await I(n,!0)));qe&&(et._f.deps&&K(et._f.deps),j(Pe,Rt,Ut,on))}},z=(be,Oe)=>{if(ur(r.errors,Oe)&&be.focus)return be.focus(),1},K=async(be,Oe={})=>{let Pe,qe;const et=fc(be);if(t.resolver){const ct=await N(as(be)?be:et);Pe=Nl(ct),qe=be?!et.some(pt=>ur(ct,pt)):Pe}else be?(qe=(await Promise.all(et.map(async ct=>{const pt=ur(n,ct);return await I(pt&&pt._f?{[ct]:pt}:pt)}))).every(Boolean),!(!qe&&!r.isValid)&&x()):qe=Pe=await I(n);return h.state.next({...!vA(be)||(d.isValid||f.isValid)&&Pe!==r.isValid?{}:{name:be},...t.resolver||!be?{isValid:Pe}:{},errors:r.errors}),Oe.shouldFocus&&!qe&&R1(n,z,be?et:o.mount),qe},J=be=>{const Oe={...i.mount?s:a};return as(be)?Oe:vA(be)?ur(Oe,be):be.map(Pe=>ur(Oe,Pe))},te=(be,Oe)=>({invalid:!!ur((Oe||r).errors,be),isDirty:!!ur((Oe||r).dirtyFields,be),error:ur((Oe||r).errors,be),isValidating:!!ur(r.validatingFields,be),isTouched:!!ur((Oe||r).touchedFields,be)}),M=be=>{be&&fc(be).forEach(Oe=>Ws(r.errors,Oe)),h.state.next({errors:be?r.errors:{}})},H=(be,Oe,Pe)=>{const qe=(ur(n,be,{_f:{}})._f||{}).ref,et=ur(r.errors,be)||{},{ref:ct,message:pt,type:Ft,...Ut}=et;Ma(r.errors,be,{...Ut,...Oe,ref:qe}),h.state.next({name:be,errors:r.errors,isValid:!1}),Pe&&Pe.shouldFocus&&qe&&qe.focus&&qe.focus()},Y=(be,Oe)=>Kd(be)?h.state.subscribe({next:Pe=>"values"in Pe&&be(k(void 0,Oe),Pe)}):k(be,Oe,!0),Z=be=>h.state.subscribe({next:Oe=>{Abt(be.name,Oe.name,be.exact)&&fbt(Oe,be.formState||d,Be,be.reRenderRoot)&&be.callback({values:{...s},...r,...Oe,defaultValues:a})}}).unsubscribe,ae=be=>(i.mount=!0,f={...f,...be.formState},Z({...be,formState:f})),le=(be,Oe={})=>{for(const Pe of be?fc(be):o.mount)o.mount.delete(Pe),o.array.delete(Pe),Oe.keepValue||(Ws(n,Pe),Ws(s,Pe)),!Oe.keepError&&Ws(r.errors,Pe),!Oe.keepDirty&&Ws(r.dirtyFields,Pe),!Oe.keepTouched&&Ws(r.touchedFields,Pe),!Oe.keepIsValidating&&Ws(r.validatingFields,Pe),!t.shouldUnregister&&!Oe.keepDefaultValue&&Ws(a,Pe);h.state.next({values:ns(s)}),h.state.next({...r,...Oe.keepDirty?{isDirty:D()}:{}}),!Oe.keepIsValid&&x()},ie=({disabled:be,name:Oe})=>{(sA(be)&&i.mount||be||o.disabled.has(Oe))&&(be?o.disabled.add(Oe):o.disabled.delete(Oe))},ce=(be,Oe={})=>{let Pe=ur(n,be);const qe=sA(Oe.disabled)||sA(t.disabled);return Ma(n,be,{...Pe||{},_f:{...Pe&&Pe._f?Pe._f:{ref:{name:be}},name:be,mount:!0,...Oe}}),o.mount.add(be),Pe?ie({disabled:sA(Oe.disabled)?Oe.disabled:t.disabled,name:be}):T(be,!0,Oe.value),{...qe?{disabled:Oe.disabled||t.disabled}:{},...t.progressive?{required:!!Oe.required,min:_w(Oe.min),max:_w(Oe.max),minLength:_w(Oe.minLength),maxLength:_w(Oe.maxLength),pattern:_w(Oe.pattern)}:{},name:be,onChange:G,onBlur:G,ref:et=>{if(et){ce(be,Oe),Pe=ur(n,be);const ct=as(et.value)&&et.querySelectorAll&&et.querySelectorAll("input,select,textarea")[0]||et,pt=ibt(ct),Ft=Pe._f.refs||[];if(pt?Ft.find(Ut=>Ut===ct):ct===Pe._f.ref)return;Ma(n,be,{_f:{...Pe._f,...pt?{refs:[...Ft.filter(ZF),ct,...Array.isArray(ur(a,be))?[{}]:[]],ref:{type:ct.type,name:be}}:{ref:ct}}}),T(be,!1,void 0,ct)}else Pe=ur(n,be,{}),Pe._f&&(Pe._f.mount=!1),(t.shouldUnregister||Oe.shouldUnregister)&&!(ebt(o.array,be)&&i.action)&&o.unMount.add(be)}}},Ae=()=>t.shouldFocusError&&R1(n,z,o.mount),Fe=be=>{sA(be)&&(h.state.next({disabled:be}),R1(n,(Oe,Pe)=>{const qe=ur(n,Pe);qe&&(Oe.disabled=qe._f.disabled||be,Array.isArray(qe._f.refs)&&qe._f.refs.forEach(et=>{et.disabled=qe._f.disabled||be}))},0,!1))},ne=(be,Oe)=>async Pe=>{let qe;Pe&&(Pe.preventDefault&&Pe.preventDefault(),Pe.persist&&Pe.persist());let et=ns(s);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:ct,values:pt}=await E();r.errors=ct,et=ns(pt)}else await I(n);if(o.disabled.size)for(const ct of o.disabled)Ws(et,ct);if(Ws(r.errors,"root"),Nl(r.errors)){h.state.next({errors:{}});try{await be(et,Pe)}catch(ct){qe=ct}}else Oe&&await Oe({...r.errors},Pe),Ae(),setTimeout(Ae);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Nl(r.errors)&&!qe,submitCount:r.submitCount+1,errors:r.errors}),qe)throw qe},_e=(be,Oe={})=>{ur(n,be)&&(as(Oe.defaultValue)?V(be,ns(ur(a,be))):(V(be,Oe.defaultValue),Ma(a,be,ns(Oe.defaultValue))),Oe.keepTouched||Ws(r.touchedFields,be),Oe.keepDirty||(Ws(r.dirtyFields,be),r.isDirty=Oe.defaultValue?D(be,ns(ur(a,be))):D()),Oe.keepError||(Ws(r.errors,be),d.isValid&&x()),h.state.next({...r}))},Ie=(be,Oe={})=>{const Pe=be?ns(be):a,qe=ns(Pe),et=Nl(be),ct=et?a:qe;if(Oe.keepDefaultValues||(a=Pe),!Oe.keepValues){if(Oe.keepDirtyValues){const pt=new Set([...o.mount,...Object.keys(Cw(a,s))]);for(const Ft of Array.from(pt))ur(r.dirtyFields,Ft)?Ma(ct,Ft,ur(s,Ft)):V(Ft,ur(ct,Ft))}else{if(n9&&as(be))for(const pt of o.mount){const Ft=ur(n,pt);if(Ft&&Ft._f){const Ut=Array.isArray(Ft._f.refs)?Ft._f.refs[0]:Ft._f.ref;if(mk(Ut)){const Rt=Ut.closest("form");if(Rt){Rt.reset();break}}}}if(Oe.keepFieldsRef)for(const pt of o.mount)V(pt,ur(ct,pt));else n={}}s=t.shouldUnregister?Oe.keepDefaultValues?ns(a):{}:ns(ct),h.array.next({values:{...ct}}),h.state.next({values:{...ct}})}o={mount:Oe.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!d.isValid||!!Oe.keepIsValid||!!Oe.keepDirtyValues,i.watch=!!t.shouldUnregister,h.state.next({submitCount:Oe.keepSubmitCount?r.submitCount:0,isDirty:et?!1:Oe.keepDirty?r.isDirty:!!(Oe.keepDefaultValues&&!ym(be,a)),isSubmitted:Oe.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:et?{}:Oe.keepDirtyValues?Oe.keepDefaultValues&&s?Cw(a,s):r.dirtyFields:Oe.keepDefaultValues&&be?Cw(a,be):Oe.keepDirty?r.dirtyFields:{},touchedFields:Oe.keepTouched?r.touchedFields:{},errors:Oe.keepErrors?r.errors:{},isSubmitSuccessful:Oe.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},Se=(be,Oe)=>Ie(Kd(be)?be(s):be,Oe),me=(be,Oe={})=>{const Pe=ur(n,be),qe=Pe&&Pe._f;if(qe){const et=qe.refs?qe.refs[0]:qe.ref;et.focus&&(et.focus(),Oe.shouldSelect&&Kd(et.select)&&et.select())}},Be=be=>{r={...r,...be}},We={control:{register:ce,unregister:le,getFieldState:te,handleSubmit:ne,setError:H,_subscribe:Z,_runSchema:E,_focusError:Ae,_getWatch:k,_getDirty:D,_setValid:x,_setFieldArray:y,_setDisabledField:ie,_setErrors:_,_getFieldArray:P,_reset:Ie,_resetDefaultValues:()=>Kd(t.defaultValues)&&t.defaultValues().then(be=>{Se(be,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:L,_disableForm:Fe,_subjects:h,_proxyFormState:d,get _fields(){return n},get _formValues(){return s},get _state(){return i},set _state(be){i=be},get _defaultValues(){return a},get _names(){return o},set _names(be){o=be},get _formState(){return r},get _options(){return t},set _options(be){t={...t,...be}}},subscribe:ae,trigger:K,register:ce,handleSubmit:ne,watch:Y,setValue:V,getValues:J,reset:Se,resetField:_e,clearErrors:M,unregister:le,setError:H,setFocus:me,getFieldState:te};return{...We,formControl:We}}var lm=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=(Math.random()*16+e)%16|0;return(t=="x"?r:r&3|8).toString(16)})},eO=(e,t,r={})=>r.shouldFocus||as(r.shouldFocus)?r.focusName||`${e}.${as(r.focusIndex)?t:r.focusIndex}.`:"",tO=(e,t)=>[...e,...fc(t)],rO=e=>Array.isArray(e)?e.map(()=>{}):void 0;function nO(e,t,r){return[...e.slice(0,t),...fc(r),...e.slice(t)]}var aO=(e,t,r)=>Array.isArray(e)?(as(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[],sO=(e,t)=>[...fc(t),...fc(e)];function xbt(e,t){let r=0;const n=[...e];for(const a of t)n.splice(a-r,1),r++;return XT(n).length?n:[]}var iO=(e,t)=>as(t)?[]:xbt(e,fc(t).sort((r,n)=>r-n)),oO=(e,t,r)=>{[e[t],e[r]]=[e[r],e[t]]},Cee=(e,t,r)=>(e[t]=r,e);function vbt(e){const t=rbt(),{control:r=t.control,name:n,keyName:a="id",shouldUnregister:s,rules:i}=e,[o,c]=Ze.useState(r._getFieldArray(n)),u=Ze.useRef(r._getFieldArray(n).map(lm)),d=Ze.useRef(o),f=Ze.useRef(!1);d.current=o,r._names.array.add(n),Ze.useMemo(()=>i&&r.register(n,i),[r,i,n]),nme(()=>r._subjects.array.subscribe({next:({values:B,name:j})=>{if(j===n||!j){const E=ur(B,n);Array.isArray(E)&&(c(E),u.current=E.map(lm))}}}).unsubscribe,[r,n]);const h=Ze.useCallback(B=>{f.current=!0,r._setFieldArray(n,B)},[r,n]),m=(B,j)=>{const E=fc(ns(B)),N=tO(r._getFieldArray(n),E);r._names.focus=eO(n,N.length-1,j),u.current=tO(u.current,E.map(lm)),h(N),c(N),r._setFieldArray(n,N,tO,{argA:rO(B)})},g=(B,j)=>{const E=fc(ns(B)),N=sO(r._getFieldArray(n),E);r._names.focus=eO(n,0,j),u.current=sO(u.current,E.map(lm)),h(N),c(N),r._setFieldArray(n,N,sO,{argA:rO(B)})},x=B=>{const j=iO(r._getFieldArray(n),B);u.current=iO(u.current,B),h(j),c(j),!Array.isArray(ur(r._fields,n))&&Ma(r._fields,n,void 0),r._setFieldArray(n,j,iO,{argA:B})},v=(B,j,E)=>{const N=fc(ns(j)),I=nO(r._getFieldArray(n),B,N);r._names.focus=eO(n,B,E),u.current=nO(u.current,B,N.map(lm)),h(I),c(I),r._setFieldArray(n,I,nO,{argA:B,argB:rO(j)})},y=(B,j)=>{const E=r._getFieldArray(n);oO(E,B,j),oO(u.current,B,j),h(E),c(E),r._setFieldArray(n,E,oO,{argA:B,argB:j},!1)},w=(B,j)=>{const E=r._getFieldArray(n);aO(E,B,j),aO(u.current,B,j),h(E),c(E),r._setFieldArray(n,E,aO,{argA:B,argB:j},!1)},_=(B,j)=>{const E=ns(j),N=Cee(r._getFieldArray(n),B,E);u.current=[...N].map((I,L)=>!I||L===B?lm():u.current[L]),h(N),c([...N]),r._setFieldArray(n,N,Cee,{argA:B,argB:E},!0,!1)},T=B=>{const j=fc(ns(B));u.current=j.map(lm),h([...j]),c([...j]),r._setFieldArray(n,[...j],E=>E,{},!0,!1)};return Ze.useEffect(()=>{if(r._state.action=!1,bR(n,r._names)&&r._subjects.state.next({...r._formState}),f.current&&(!f1(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!f1(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(B=>{const j=ur(B.errors,n),E=ur(r._formState.errors,n);(E?!j&&E.type||j&&(E.type!==j.type||E.message!==j.message):j&&j.type)&&(j?Ma(r._formState.errors,n,j):Ws(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{const B=ur(r._fields,n);B&&B._f&&!(f1(r._options.reValidateMode).isOnSubmit&&f1(r._options.mode).isOnSubmit)&&yR(B,r._names.disabled,r._formValues,r._options.criteriaMode===ed.all,r._options.shouldUseNativeValidation,!0).then(j=>!Nl(j)&&r._subjects.state.next({errors:ume(r._formState.errors,j,n)}))}r._subjects.state.next({name:n,values:ns(r._formValues)}),r._names.focus&&R1(r._fields,(B,j)=>{if(r._names.focus&&j.startsWith(r._names.focus)&&B.focus)return B.focus(),1}),r._names.focus="",r._setValid(),f.current=!1},[o,n,r]),Ze.useEffect(()=>(!ur(r._formValues,n)&&r._setFieldArray(n),()=>{const B=(j,E)=>{const N=ur(r._fields,j);N&&N._f&&(N._f.mount=E)};r._options.shouldUnregister||s?r.unregister(n):B(n,!1)}),[n,r,a,s]),{swap:Ze.useCallback(y,[h,n,r]),move:Ze.useCallback(w,[h,n,r]),prepend:Ze.useCallback(g,[h,n,r]),append:Ze.useCallback(m,[h,n,r]),remove:Ze.useCallback(x,[h,n,r]),insert:Ze.useCallback(v,[h,n,r]),update:Ze.useCallback(_,[h,n,r]),replace:Ze.useCallback(T,[h,n,r]),fields:Ze.useMemo(()=>o.map((B,j)=>({...B,[a]:u.current[j]||lm()})),[o,a])}}function bbt(e={}){const t=Ze.useRef(void 0),r=Ze.useRef(void 0),[n,a]=Ze.useState({isDirty:!1,isValidating:!1,isLoading:Kd(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Kd(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!Kd(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:i,...o}=gbt(e);t.current={...o,formState:n}}const s=t.current.control;return s._options=e,nme(()=>{const i=s._subscribe({formState:s._proxyFormState,callback:()=>a({...s._formState}),reRenderRoot:!0});return a(o=>({...o,isReady:!0})),s._formState.isReady=!0,i},[s]),Ze.useEffect(()=>s._disableForm(e.disabled),[s,e.disabled]),Ze.useEffect(()=>{e.mode&&(s._options.mode=e.mode),e.reValidateMode&&(s._options.reValidateMode=e.reValidateMode)},[s,e.mode,e.reValidateMode]),Ze.useEffect(()=>{e.errors&&(s._setErrors(e.errors),s._focusError())},[s,e.errors]),Ze.useEffect(()=>{e.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,e.shouldUnregister]),Ze.useEffect(()=>{if(s._proxyFormState.isDirty){const i=s._getDirty();i!==n.isDirty&&s._subjects.state.next({isDirty:i})}},[s,n.isDirty]),Ze.useEffect(()=>{e.values&&!ym(e.values,r.current)?(s._reset(e.values,{keepFieldsRef:!0,...s._options.resetOptions}),r.current=e.values,a(i=>({...i}))):s._resetDefaultValues()},[s,e.values]),Ze.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),t.current.formState=nbt(n,s),t.current}const wR=wt(Fr,"alternancias");async function ybt(e){return(await _n(wR,{...e,createdAt:Ri(),updatedAt:Ri()})).id}async function wbt({especialidad:e,pageSize:t=10,lastDoc:r}){let n=$t(wR,xr("createdAt","desc"),tf(t));e&&(n=$t(wR,Qr("especialidad","==",e),xr("createdAt","desc"),tf(t))),r&&(n=$t(n,Yre(r)));const a=await Hn(n);return{items:a.docs.map(i=>({id:i.id,...i.data()})),lastDoc:a.docs[a.docs.length-1]}}async function Ebt(e,t){const r=cr(Fr,"alternancias",e);await du(r,{...t,updatedAt:Ri()})}async function Cbt(e){const t=cr(Fr,"alternancias",e);await is(t)}async function _bt(e,t,r){const n=wt(Fr,"alternancias",e,t);await _n(n,{...r,createdAt:Ri()})}async function Sbt(e,t){const r=`alternancias/${e}/evidencias/${Date.now()}_${t.name}`,n=$E(IL,r);await BL(n,t);const a=await Yk(n);return await _bt(e,"evidencias",{url:a,path:r,nombre:t.name}),{url:a,path:r}}const tg=({title:e,icon:t,children:r,accent:n="indigo"})=>{const a={indigo:"border-indigo-200 bg-indigo-50/60",emerald:"border-emerald-200 bg-emerald-50/60",amber:"border-amber-200 bg-amber-50/60",sky:"border-sky-200 bg-sky-50/60",slate:"border-slate-200 bg-white/70"};return l.jsxs("div",{className:`rounded-2xl border ${a[n]} p-4 md:p-5 shadow-sm`,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx("div",{className:"inline-flex items-center justify-center w-9 h-9 rounded-xl bg-white shadow-sm border border-slate-200",children:t}),l.jsx("h2",{className:"text-lg md:text-xl font-semibold text-slate-800",children:e})]}),r]})},Zf=({children:e,hint:t})=>l.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[l.jsx("span",{className:"text-sm font-medium text-slate-700",children:e}),t&&l.jsx("span",{className:"text-[11px] text-slate-500",children:t})]}),uS=({children:e,tone:t="indigo"})=>{const r={indigo:"bg-indigo-100 text-indigo-700 border-indigo-200",emerald:"bg-emerald-100 text-emerald-700 border-emerald-200",amber:"bg-amber-100 text-amber-800 border-amber-200",sky:"bg-sky-100 text-sky-700 border-sky-200"};return l.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${r[t]}`,children:e})},rg=({title:e,onClick:t,tone:r="neutral",children:n,type:a="button",disabled:s})=>{const i={primary:"bg-indigo-600 hover:bg-indigo-700 text-white border border-indigo-700 shadow-sm",danger:"bg-rose-600 hover:bg-rose-700 text-white border border-rose-700 shadow-sm",warning:"bg-amber-500 hover:bg-amber-600 text-white border border-amber-600 shadow-sm",success:"bg-emerald-600 hover:bg-emerald-700 text-white border border-emerald-700 shadow-sm",neutral:"bg-white hover:bg-slate-50 text-slate-700 border border-slate-200 shadow-sm"};return l.jsx("button",{type:a,title:e,onClick:t,disabled:s,className:`inline-flex items-center gap-2 px-3 py-2 rounded-xl text-sm transition ${i[r]} disabled:opacity-60`,children:n})},Nbt=({currentUser:e})=>{const[t,r]=S.useState([]),[n,a]=S.useState(null),[s,i]=S.useState(!1),{register:o,control:c,handleSubmit:u,reset:d,watch:f,setValue:h,formState:{isSubmitting:m}}=bbt({defaultValues:{especialidad:"",curso:[],institucion:"",modulos:[],tipoAlternancia:[],fundamentacion:"",actividades:[],equipo:[],contrapartes:[],tutores:[],analisisCurricular:""}}),g=vbt({control:c,name:"actividades"}),x=["COORDINACION_TP","SUBDIRECCION"],v=((e==null?void 0:e.role)||"").toString().trim().toUpperCase();if(!(!v||x.some(R=>v.includes(R))))return l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"rounded-xl border border-rose-200 bg-rose-50/60 p-4 text-rose-700 flex items-center gap-2",children:[l.jsx(O_e,{className:"w-5 h-5"}),"Acceso no autorizado"]})});const w=R=>(R||"").replace(/\s*[-–]\s*\d+\s*horas?$/i,"").trim(),_=(R,W)=>{var V;return!R||!W?[]:((V=jEe[R])==null?void 0:V[W])??[]},T=f("especialidad"),B=f("modulos")||[],j=S.useMemo(()=>T?kEe[T]??[]:[],[T]),E=S.useMemo(()=>T?TEe[T]??[]:[],[T]);S.useEffect(()=>{h("curso",[]),h("modulos",[]);const R=[...f("actividades")||[]].map(W=>({...W,modulo:"",oa:""}));h("actividades",R)},[T]),S.useEffect(()=>{const R=[...f("actividades")||[]].map(W=>W.modulo&&!B.includes(W.modulo)?{...W,modulo:"",oa:""}:W);h("actividades",R)},[B]);const N=async()=>{i(!0);const{items:R}=await wbt({});r(R),i(!1)};S.useEffect(()=>{N()},[]);const I=async R=>{n?await Ebt(n,{...R}):await ybt({...R,createdBy:(e==null?void 0:e.email)||"desconocido"}),d(),a(null),await N()},L=R=>{const W=Array.isArray(R.curso)?R.curso:R.curso?[R.curso]:[],V=Array.isArray(R.modulos)?R.modulos.map(z=>w(z)):[],G=Array.isArray(R.actividades)?R.actividades.map(z=>({...z,modulo:z!=null&&z.modulo?w(z.modulo):"",oa:(z==null?void 0:z.oa)||""})):[];d({...R,curso:W,modulos:V,actividades:G}),a(R.id),window.scrollTo({top:0,behavior:"smooth"})},D=async R=>{confirm("¿Eliminar esta alternancia?")&&(await Cbt(R),await N())},k=async(R,W)=>{await Sbt(R,W),alert("Evidencia subida correctamente")},P=R=>{const W=Array.from(R.currentTarget.selectedOptions).map(V=>V.value);h("curso",W,{shouldDirty:!0})};return l.jsxs("div",{className:"p-4 md:p-6",children:[l.jsx("div",{className:"mb-6 rounded-2xl bg-gradient-to-r from-indigo-600 via-sky-600 to-emerald-600 text-white p-5 shadow-sm",children:l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-11 h-11 rounded-xl bg-white/10 flex items-center justify-center",children:l.jsx(kne,{className:"w-6 h-6"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl md:text-2xl font-semibold",children:"Formación por Alternancia"}),l.jsx("p",{className:"text-white/90 text-sm",children:"Registra planes, actividades y evidencias. Interfaz moderna, responsiva y con íconos."})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(rg,{title:"Nuevo plan",onClick:()=>{d(),a(null)},tone:"neutral",children:[l.jsx(TN,{className:"w-4 h-4"}),"Limpiar"]}),l.jsxs(rg,{title:"Guardar",type:"submit",tone:"success",disabled:m,children:[m?l.jsx(Cm,{className:"w-4 h-4 animate-spin"}):l.jsx(qh,{className:"w-4 h-4"}),"Guardar"]})]})]})}),l.jsx(tg,{title:"Planes guardados",icon:l.jsx(Xg,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:s?l.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[l.jsx(Cm,{className:"w-4 h-4 animate-spin"})," Cargando…"]}):t.length===0?l.jsx("p",{className:"text-slate-500 text-sm",children:"No hay alternancias registradas"}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:t.map(R=>l.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm hover:shadow-md transition",children:l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex items-center gap-2 text-slate-800 font-semibold",children:[l.jsx(T3,{className:"w-4 h-4 text-indigo-600"}),R.especialidad]}),l.jsxs("div",{className:"text-sm text-slate-600 flex flex-wrap gap-2",children:[l.jsx(uS,{tone:"indigo",children:Array.isArray(R.curso)?R.curso.join(", "):R.curso}),l.jsx(uS,{tone:"sky",children:R.institucion}),(Array.isArray(R.tipoAlternancia)?R.tipoAlternancia:[]).slice(0,2).map(W=>l.jsx(uS,{tone:"emerald",children:W},W))]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-1 rounded-xl bg-amber-500 hover:bg-amber-600 text-white text-xs px-3 py-2 transition",children:[l.jsx(KE,{className:"w-4 h-4"}),l.jsx("input",{type:"file",className:"hidden",onChange:W=>W.target.files&&k(R.id,W.target.files[0])}),"Evidencia"]}),l.jsxs(rg,{title:"Editar",onClick:()=>L(R),children:[l.jsx(RO,{className:"w-4 h-4"})," Editar"]}),l.jsxs(rg,{title:"Eliminar",onClick:()=>D(R.id),tone:"danger",children:[l.jsx(Do,{className:"w-4 h-4"})," Eliminar"]})]})]})},R.id))})}),l.jsxs("form",{onSubmit:u(I),className:"mt-6 space-y-5",children:[l.jsx(tg,{title:"Contexto de la Alternancia",icon:l.jsx(SN,{className:"w-5 h-5 text-indigo-700"}),accent:"indigo",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx(Zf,{children:"Especialidad"}),l.jsxs("div",{className:"relative",children:[l.jsx(T3,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),l.jsxs("select",{...o("especialidad"),className:"w-full appearance-none rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-indigo-100",children:[l.jsx("option",{value:"",children:"Selecciona…"}),SEe.map(R=>l.jsx("option",{value:R,children:R},R))]})]})]}),l.jsxs("div",{children:[l.jsx(Zf,{children:"Institución"}),l.jsxs("div",{className:"relative",children:[l.jsx(SN,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),l.jsxs("select",{...o("institucion"),className:"w-full appearance-none rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-sky-100",children:[l.jsx("option",{value:"",children:"Selecciona…"}),NEe.map(R=>l.jsx("option",{value:R,children:R},R))]})]})]}),l.jsxs("div",{children:[l.jsx(Zf,{hint:"Ctrl/Cmd + clic para seleccionar múltiples cursos.",children:"Cursos"}),l.jsxs("div",{className:"relative",children:[l.jsx(hc,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),l.jsx("select",{multiple:!0,size:4,...o("curso"),onChange:P,className:"w-full min-h-[120px] rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-emerald-100 disabled:opacity-50",disabled:!T,children:T?j.map(R=>l.jsx("option",{value:R,children:R},R)):l.jsx("option",{value:"",children:"Elige especialidad primero"})})]}),l.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:(f("curso")||[]).map(R=>l.jsx(uS,{tone:"sky",children:R},R))})]})]})}),l.jsx(tg,{title:"Módulos implicados",icon:l.jsx(RL,{className:"w-5 h-5 text-emerald-700"}),accent:"emerald",children:T?l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:E.map(R=>l.jsxs("label",{className:"flex items-start gap-2 rounded-xl border border-emerald-200 bg-white p-3 shadow-sm hover:shadow transition",children:[l.jsx("input",{type:"checkbox",value:R,className:"mt-1 accent-emerald-600",...o("modulos")}),l.jsx("span",{className:"text-sm text-slate-700",children:R})]},R))}):l.jsx("p",{className:"text-sm text-slate-500",children:"Elige una especialidad para ver los módulos."})}),l.jsx(tg,{title:"Tipo de Alternancia",icon:l.jsx(s2,{className:"w-5 h-5 text-amber-700"}),accent:"amber",children:l.jsx("div",{className:"flex gap-3 flex-wrap",children:BEe.map(R=>l.jsxs("label",{className:"inline-flex items-center gap-2 rounded-full border border-amber-200 bg-white px-3 py-2 text-sm shadow-sm hover:shadow transition",children:[l.jsx("input",{type:"checkbox",value:R,className:"accent-amber-600",...o("tipoAlternancia")}),l.jsx("span",{className:"text-slate-700",children:R})]},R))})}),l.jsx(tg,{title:"Fundamentación técnico‑pedagógica",icon:l.jsx(qEe,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:l.jsx("textarea",{...o("fundamentacion"),className:"w-full rounded-xl border border-slate-300 bg-white p-3 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-slate-100",rows:4,placeholder:"Describe brevemente la finalidad pedagógica, vínculos curriculares y el aporte para los estudiantes."})}),l.jsx(tg,{title:"Plan de actividades",icon:l.jsx(Xg,{className:"w-5 h-5 text-indigo-700"}),accent:"indigo",children:l.jsxs("div",{className:"space-y-3",children:[g.fields.map((R,W)=>{const V=f(`actividades.${W}.modulo`)||"",G=_(T,V);return l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 shadow-sm",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2",children:[l.jsxs("div",{className:"relative",children:[l.jsx(Zf,{children:"Fecha"}),l.jsx(id,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),l.jsx("input",{type:"date",placeholder:"Fecha",...o(`actividades.${W}.fecha`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]}),l.jsxs("div",{children:[l.jsx(Zf,{children:"Tipo"}),l.jsx("input",{placeholder:"Pasantía, visita, taller...",...o(`actividades.${W}.tipo`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm"})]}),l.jsxs("div",{children:[l.jsx(Zf,{children:"Actividad"}),l.jsx("input",{placeholder:"Descripción breve",...o(`actividades.${W}.actividad`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm"})]}),l.jsxs("div",{className:"relative",children:[l.jsx(Zf,{children:"Lugar"}),l.jsx(kN,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),l.jsx("input",{placeholder:"Empresa/IP/CFT/Lab",...o(`actividades.${W}.lugar`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]}),l.jsxs("div",{className:"relative",children:[l.jsx(Zf,{children:"Evidencias"}),l.jsx(SCe,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),l.jsx("input",{placeholder:"Informe, fotos, lista asistencia...",...o(`actividades.${W}.evidencias`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]})]}),l.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:[l.jsxs("div",{children:[l.jsx(Zf,{children:"Módulo"}),l.jsxs("select",{...o(`actividades.${W}.modulo`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm disabled:opacity-50",disabled:!T||B.length===0,children:[l.jsx("option",{value:"",children:!T&&"Elige especialidad arriba"||B.length===0&&"Selecciona módulos arriba"||"Selecciona…"}),B.map(z=>l.jsx("option",{value:z,children:z},z))]})]}),l.jsxs("div",{children:[l.jsx(Zf,{children:"Objetivo de Aprendizaje (OA)"}),l.jsxs("select",{...o(`actividades.${W}.oa`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm disabled:opacity-50",disabled:!V||G.length===0,children:[l.jsx("option",{value:"",children:V?G.length===0?"Sin OA definidos para este módulo":"Selecciona…":"Selecciona módulo primero"}),G.map(z=>l.jsx("option",{value:z,children:z},z))]})]})]}),l.jsx("div",{className:"mt-3 flex justify-end",children:l.jsxs(rg,{title:"Eliminar fila",onClick:()=>g.remove(W),tone:"danger",children:[l.jsx(Do,{className:"w-4 h-4"}),"Eliminar actividad"]})})]},R.id)}),l.jsxs(rg,{title:"Agregar actividad",onClick:()=>g.append({fecha:"",tipo:"",actividad:"",lugar:"",evidencias:"",modulo:"",oa:""}),tone:"primary",children:[l.jsx(od,{className:"w-4 h-4"})," Agregar actividad"]})]})}),l.jsx(tg,{title:"Análisis Curricular",icon:l.jsx(T3,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:l.jsx("textarea",{...o("analisisCurricular"),className:"w-full rounded-xl border border-slate-300 bg-white p-3 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-slate-100",rows:4,placeholder:"Módulos implicados + OA/AE asociados + distribución de horas (liceo/otro lugar)."})}),l.jsx("div",{className:"flex items-center justify-end gap-2",children:l.jsxs(rg,{title:"Guardar",type:"submit",tone:"success",disabled:m,children:[m?l.jsx(Cm,{className:"w-4 h-4 animate-spin"}):l.jsx(io,{className:"w-4 h-4"}),"Guardar"]})})]})]})},ER=["INCIPIENTE","EN_DESARROLLO","LOGRADO","SOBRESALIENTE"],kbt={INCIPIENTE:25},Bbt=["AULA","TALLER","EMPRESA"],_ee={escalaMin:1,escalaMax:7,porcentajeAprobacion:60,notaAprobacion:4,regla:"lineal"},Tbt="tp_especialidades",jbt="tp_modulos",Ibt="tp_resultados_aprendizaje",Fbt="tp_criterios_evaluacion",CR="tp_rubricas",dme="tp_evidencias",fme="tp_evaluaciones_comp",_R="config_evaluacion/competencias",See=()=>Date.now(),Ame=async()=>{const e=await bx(cr(Fr,_R));return e.exists()?e.data():(await Mi(cr(Fr,_R),_ee),_ee)},Obt=(e,t)=>{const{escalaMin:r,escalaMax:n,porcentajeAprobacion:a,notaAprobacion:s}=t;if(e<=a){const i=(s-r)/(a-0||1);return Number((r+i*(e-0)).toFixed(1))}else{const i=(n-s)/(100-a||1);return Number((s+i*(e-a)).toFixed(1))}},Dbt=async(e,t)=>{const r=await Ame();let n=0,a=0;Object.entries(t).forEach(([o,c])=>{a+=c;const u=e[o],d=(u==null?void 0:u.puntaje)??kbt.INCIPIENTE;n+=d*c/100});const s=a?n/a*100:0,i=Obt(s,r);return{puntajeTotal:n,porcentaje:s,nota:i}},Pbt=e=>{const t=$t(wt(Fr,Tbt),xr("nombre"));return pr(t,r=>{e(r.docs.map(n=>({id:n.id,...n.data()})))})},Rbt=async e=>{const t=$t(wt(Fr,jbt),Qr("especialidadId","==",e),xr("nombre"));return(await Hn(t)).docs.map(n=>({id:n.id,...n.data()}))},Lbt=async e=>{const t=$t(wt(Fr,Ibt),Qr("moduloId","==",e),xr("codigo"));return(await Hn(t)).docs.map(n=>({id:n.id,...n.data()}))},Mbt=async e=>{const t=$t(wt(Fr,Fbt),Qr("raId","==",e),xr("codigo"));return(await Hn(t)).docs.map(n=>({id:n.id,...n.data()}))},Ubt=async e=>e.id?(await du(cr(Fr,CR,e.id),{...e,updatedAt:See()}),e.id):(await _n(wt(Fr,CR),{...e,updatedAt:See()})).id,hme=async e=>{const t=$t(wt(Fr,CR),Qr("raId","==",e)),n=(await Hn(t)).docs[0];return n?{id:n.id,...n.data()}:null},Qbt=async(e,t)=>{const r=$E(IL,t),n=await BL(r,e);return{url:await Yk(n.ref),path:n.ref.fullPath}},Hbt=e=>_n(wt(Fr,dme),e),Vbt=(e,t)=>{const r=$t(wt(Fr,dme),Qr("raId","==",e),xr("fecha","desc"));return pr(r,n=>{t(n.docs.map(a=>({id:a.id,...a.data()})))})},zbt=async e=>{const t=await hme(e.raId),r=(t==null?void 0:t.ponderacionCE)??{},{puntajeTotal:n,porcentaje:a,nota:s}=await Dbt(e.ceIdScores,r);return _n(wt(Fr,fme),{...e,puntajeTotal:n,porcentaje:a,nota:s})},$bt=(e,t)=>{const r=$t(wt(Fr,fme),Qr("raId","==",e),xr("fecha","desc"));return pr(r,n=>{t(n.docs.map(a=>({id:a.id,...a.data()})))})},Gbt=async e=>{const t=await Ame();await Mi(cr(Fr,_R),{...t,...e},{merge:!0})},Kbt=({raId:e,ces:t,rubrica:r,onSaved:n,currentUserId:a})=>{const[s,i]=S.useState(null);if(S.useEffect(()=>{i(e?r??{id:"",raId:e,niveles:ER,descriptores:[],ponderacionCE:Object.fromEntries(t.map(f=>[f.id,f.peso])),updatedAt:Date.now(),createdBy:a}:null)},[e,r,t,a]),!e)return l.jsx("div",{children:"Selecciona un RA para editar su rúbrica."});if(!s)return null;const o=(f,h)=>{i(m=>m&&{...m,ponderacionCE:{...m.ponderacionCE,[f]:h}})},c=(f,h,m)=>{i(g=>{if(!g)return g;const x=g.descriptores.filter(v=>!(v.ceId===f&&v.nivel===h));return{...g,descriptores:[...x,{ceId:f,nivel:h,descriptor:m,puntaje:h==="SOBRESALIENTE"?100:h==="LOGRADO"?75:h==="EN_DESARROLLO"?50:25}]}})},u=S.useMemo(()=>Object.values(s.ponderacionCE).reduce((f,h)=>f+(Number(h)||0),0),[s.ponderacionCE]),d=async()=>{const f=await Ubt(s);n==null||n(f)};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Rúbrica por CE (debe sumar 100%)"}),l.jsxs("div",{className:`px-2 py-1 rounded-full text-xs ${u===100?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"}`,children:["Total: ",u,"%"]})]}),l.jsx("div",{className:"space-y-4",children:t.map(f=>l.jsxs("div",{className:"border rounded-xl p-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"font-semibold text-slate-800",children:[f.codigo," — ",f.descriptor]}),l.jsxs("div",{className:"text-xs text-slate-500",children:["Evidencia esperada: ",f.evidenciaEsperada||"—"]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-xs text-slate-500",children:"Peso"}),l.jsx("input",{type:"number",className:"w-20 border rounded-lg px-2 py-1",value:s.ponderacionCE[f.id]??0,onChange:h=>o(f.id,Number(h.target.value))}),l.jsx("span",{className:"text-xs text-slate-500",children:"%"})]})]}),l.jsx("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3",children:ER.map(h=>{const m=s.descriptores.find(g=>g.ceId===f.id&&g.nivel===h);return l.jsxs("div",{className:"bg-slate-50 border rounded-lg p-3",children:[l.jsx("div",{className:"text-xs font-medium text-slate-600 mb-1",children:h.replace("_"," ")}),l.jsx("textarea",{className:"w-full border rounded-lg px-2 py-1 text-sm",rows:2,value:(m==null?void 0:m.descriptor)||"",onChange:g=>c(f.id,h,g.target.value),placeholder:"Descriptor observable y medible…"})]},h)})})]},f.id))}),l.jsx("div",{className:"flex justify-end",children:l.jsxs("button",{onClick:d,className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl px-4 py-2",children:[l.jsx(qh,{className:"w-4 h-4"}),l.jsx("span",{children:"Guardar rúbrica"})]})})]})},qbt=({raId:e,currentUser:t,evidencias:r})=>{const[n,a]=S.useState(""),[s,i]=S.useState(""),[o,c]=S.useState("AULA"),[u,d]=S.useState(null),[f,h]=S.useState(""),[m,g]=S.useState(!1);if(!e)return l.jsx("div",{children:"Selecciona una RA para gestionar evidencias."});const x=async()=>{if(!(!u||!n)){g(!0);try{const v=u.name.split(".").pop(),y=`evidencias/${e}/${n}/${Date.now()}.${v}`,{url:w,path:_}=await Qbt(u,y);await Hbt({estudianteId:n,raId:e,ceId:s||void 0,url:w,tipo:Wbt(u.name),fecha:Date.now(),autorId:t.id,contexto:o,observaciones:f,storagePath:_}),d(null),h(""),a(""),i("")}finally{g(!1)}}};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-3",children:[l.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"Estudiante (ID)",value:n,onChange:v=>a(v.target.value)}),l.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"CE (opcional)",value:s,onChange:v=>i(v.target.value)}),l.jsxs("select",{className:"border rounded-xl px-3 py-2",value:o,onChange:v=>c(v.target.value),children:[l.jsx("option",{value:"AULA",children:"AULA"}),l.jsx("option",{value:"TALLER",children:"TALLER"}),l.jsx("option",{value:"EMPRESA",children:"EMPRESA"})]}),l.jsx("input",{type:"file",onChange:v=>{var y;return d(((y=v.target.files)==null?void 0:y[0])||null)},className:"border rounded-xl px-3 py-2"})]}),l.jsx("textarea",{className:"w-full border rounded-xl px-3 py-2",rows:2,placeholder:"Observaciones…",value:f,onChange:v=>h(v.target.value)}),l.jsxs("button",{onClick:x,disabled:m||!u||!n,className:`flex items-center gap-2 rounded-xl px-4 py-2 ${m||!u||!n?"bg-slate-200 text-slate-500":"bg-indigo-600 hover:bg-indigo-700 text-white"}`,children:[l.jsx(KE,{className:"w-4 h-4"}),l.jsx("span",{children:"Subir evidencia"})]}),l.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3",children:r.map(v=>l.jsxs("a",{href:v.url,target:"_blank",rel:"noreferrer",className:"border rounded-xl p-3 hover:shadow",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[Xbt(v.tipo),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium",children:new Date(v.fecha).toLocaleString()}),l.jsxs("div",{className:"text-xs text-slate-500",children:[v.contexto," — Est.: ",v.estudianteId]})]})]}),v.observaciones&&l.jsx("div",{className:"text-xs text-slate-600 mt-2",children:v.observaciones})]},v.id))})]})},Wbt=e=>{var r;const t=(r=e.split(".").pop())==null?void 0:r.toLowerCase();return["png","jpg","jpeg","webp","gif"].includes(t||"")?"imagen":["mp4","mov","avi","mkv","webm"].includes(t||"")?"video":["pdf","doc","docx","ppt","pptx","xls","xlsx","txt","csv"].includes(t||"")?"documento":"otro"},Xbt=e=>{switch(e){case"imagen":return l.jsx(zCe,{className:"w-5 h-5 text-rose-600"});case"video":return l.jsx(TCe,{className:"w-5 h-5 text-indigo-600"});case"documento":return l.jsx(nf,{className:"w-5 h-5 text-emerald-600"});default:return l.jsx(KE,{className:"w-5 h-5 text-slate-500"})}},Nee=["#6366F1","#22C55E","#F59E0B","#EF4444","#14B8A6","#8B5CF6","#F43F5E"],Ybt=({raId:e})=>{const[t,r]=S.useState([]);if(S.useEffect(()=>{if(!e){r([]);return}const i=$bt(e,r);return()=>i()},[e]),!e)return l.jsx("div",{children:"Selecciona una RA para visualizar el dashboard."});const n=S.useMemo(()=>{const i={};return t.forEach(o=>{const c=o.curso||"—";i[c]||(i[c]={curso:c,promedio:0,n:0}),i[c].promedio+=o.nota,i[c].n+=1}),Object.values(i).map(o=>({curso:o.curso,promedio:Number((o.promedio/(o.n||1)).toFixed(2)),n:o.n}))},[t]),a=S.useMemo(()=>{const i={"1.0-3.9":0,"4.0-4.9":0,"5.0-5.9":0,"6.0-7.0":0};return t.forEach(o=>{o.nota<4?i["1.0-3.9"]++:o.nota<5?i["4.0-4.9"]++:o.nota<6?i["5.0-5.9"]++:i["6.0-7.0"]++}),Object.entries(i).map(([o,c])=>({rango:o,value:c}))},[t]),s=()=>{const i=t.map(u=>({id:u.id,estudianteId:u.estudianteId,curso:u.curso,raId:u.raId,porcentaje:u.porcentaje,nota:u.nota,fecha:new Date(u.fecha).toISOString(),contexto:u.contexto})),o=Ol.book_new(),c=Ol.json_to_sheet(i);Ol.book_append_sheet(o,c,"Evaluaciones_RA"),mT(o,`evaluaciones_${e}.xlsx`)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("h3",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[l.jsx(Wd,{className:"w-5 h-5 text-indigo-600"}),"Resumen de logro por curso"]}),l.jsxs("button",{onClick:s,className:"flex items-center gap-2 border rounded-xl px-3 py-2 hover:bg-slate-50",children:[l.jsx(Zm,{className:"w-4 h-4"}),l.jsx("span",{children:"Descargar CSV"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsx("div",{className:"h-72 border rounded-xl p-3",children:l.jsx(Th,{width:"100%",height:"100%",children:l.jsxs(sE,{data:n,children:[l.jsx(sx,{dataKey:"curso"}),l.jsx(ix,{domain:[1,7]}),l.jsx(Bh,{}),l.jsx(lb,{dataKey:"promedio"})]})})}),l.jsx("div",{className:"h-72 border rounded-xl p-3",children:l.jsx(Th,{width:"100%",height:"100%",children:l.jsxs(hU,{children:[l.jsx(YB,{data:a,dataKey:"value",nameKey:"rango",outerRadius:90,label:!0,children:a.map((i,o)=>l.jsx(np,{fill:Nee[o%Nee.length]},`c-${o}`))}),l.jsx(Bh,{}),l.jsx(Qb,{})]})})})]}),l.jsx("div",{className:"text-xs text-slate-500",children:"Nota: los promedios consideran la conversión lineal configurable (Decreto 67)."})]})},Sw=({active:e,onClick:t,icon:r,label:n})=>l.jsxs("button",{onClick:t,className:`flex items-center gap-2 px-3 py-2 rounded-full transition 
    ${e?"bg-indigo-600 text-white shadow":"bg-white text-slate-700 hover:bg-slate-100 border"}`,children:[r,l.jsx("span",{className:"font-medium",children:n})]}),Vv=({children:e,className:t})=>l.jsx("div",{className:`bg-white rounded-2xl shadow-sm border p-4 ${t||""}`,children:e}),Jbt=({currentUser:e})=>{const[t,r]=S.useState("planificacion"),[n,a]=S.useState([]),[s,i]=S.useState([]),[o,c]=S.useState([]),[u,d]=S.useState([]),[f,h]=S.useState({}),[m,g]=S.useState(null),[x,v]=S.useState([]);S.useEffect(()=>{const w=Pbt(a);return()=>w()},[]),S.useEffect(()=>{f.especialidadId?Rbt(f.especialidadId).then(i):i([]),h(w=>({...w,moduloId:void 0,raId:void 0})),c([]),d([]),g(null)},[f.especialidadId]),S.useEffect(()=>{f.moduloId?Lbt(f.moduloId).then(c):c([]),h(w=>({...w,raId:void 0})),d([]),g(null)},[f.moduloId]),S.useEffect(()=>{if(f.raId){Mbt(f.raId).then(d),hme(f.raId).then(g);const w=Vbt(f.raId,v);return()=>w()}else d([]),g(null),v([])},[f.raId]);const y=f.raId&&u.length>0;return l.jsxs("div",{className:"w-full min-h-screen bg-slate-50",children:[l.jsx("div",{className:"sticky top-0 z-10 bg-white border-b",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(RL,{className:"w-6 h-6 text-indigo-600"}),l.jsx("h1",{className:"text-xl font-semibold text-slate-800",children:"Evaluación por Competencias EMTP"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Sw,{active:t==="planificacion",onClick:()=>r("planificacion"),icon:l.jsx(Xg,{className:"w-4 h-4"}),label:"Planificar"}),l.jsx(Sw,{active:t==="evaluar",onClick:()=>r("evaluar"),icon:l.jsx(S_e,{className:"w-4 h-4"}),label:"Evaluar"}),l.jsx(Sw,{active:t==="evidencias",onClick:()=>r("evidencias"),icon:l.jsx(KE,{className:"w-4 h-4"}),label:"Evidencias"}),l.jsx(Sw,{active:t==="dashboard",onClick:()=>r("dashboard"),icon:l.jsx(Wd,{className:"w-4 h-4"}),label:"Dashboard"}),l.jsx(Sw,{active:t==="config",onClick:()=>r("config"),icon:l.jsx(I_e,{className:"w-4 h-4"}),label:"Config"})]})]})}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-6",children:[l.jsx(Vv,{children:l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-slate-500",children:"Especialidad"}),l.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:f.especialidadId||"",onChange:w=>h({especialidadId:w.target.value}),children:[l.jsx("option",{value:"",children:"— Selecciona —"}),n.map(w=>l.jsx("option",{value:w.id,children:w.nombre},w.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-slate-500",children:"Módulo"}),l.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:f.moduloId||"",onChange:w=>h(_=>({..._,moduloId:w.target.value})),children:[l.jsx("option",{value:"",children:"— Selecciona —"}),s.map(w=>l.jsx("option",{value:w.id,children:w.nombre},w.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-slate-500",children:"Resultado de Aprendizaje (RA)"}),l.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:f.raId||"",onChange:w=>h(_=>({..._,raId:w.target.value})),children:[l.jsx("option",{value:"",children:"— Selecciona —"}),o.map(w=>l.jsxs("option",{value:w.id,children:[w.codigo," — ",w.enunciado.slice(0,60),w.enunciado.length>60?"…":""]},w.id))]})]})]})}),t==="planificacion"&&l.jsx(Vv,{children:l.jsx(Kbt,{raId:f.raId,ces:u,rubrica:m,onSaved:w=>{},currentUserId:e.id})}),t==="evaluar"&&l.jsxs(Vv,{children:[!y&&l.jsx("div",{className:"text-slate-600",children:"Selecciona una RA con criterios (CE) para comenzar a evaluar."}),y&&l.jsx(Zbt,{raId:f.raId,ces:u,currentUser:e})]}),t==="evidencias"&&l.jsx(Vv,{children:l.jsx(qbt,{raId:f.raId,currentUser:e,evidencias:x})}),t==="dashboard"&&l.jsx(Vv,{children:l.jsx(Ybt,{raId:f.raId})}),t==="config"&&l.jsx(Vv,{children:l.jsx(eyt,{})})]})]})},Zbt=({raId:e,ces:t,currentUser:r})=>{const[n,a]=S.useState(""),[s,i]=S.useState(r.curso||""),[o,c]=S.useState("AULA"),[u,d]=S.useState(""),[f,h]=S.useState({}),m=(v,y,w)=>{h(_=>({..._,[v]:{nivel:y,puntaje:w}}))},g=n&&Object.keys(f).length===t.length,x=async()=>{const v={estudianteId:n,curso:s,raId:e,ceIdScores:f,evaluadorId:r.id,fecha:Date.now(),contexto:o,retroalimentacion:u};await zbt(v),d(""),h({}),a("")};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-slate-500",children:"Estudiante (ID)"}),l.jsx("input",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:n,onChange:v=>a(v.target.value),placeholder:"rut_o_uid"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-slate-500",children:"Curso"}),l.jsx("input",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:s,onChange:v=>i(v.target.value),placeholder:"p.ej. 3ºB"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-slate-500",children:"Contexto"}),l.jsx("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:o,onChange:v=>c(v.target.value),children:Bbt.map(v=>l.jsx("option",{value:v,children:v},v))})]}),l.jsx("div",{className:"flex items-end",children:l.jsxs("button",{disabled:!g,onClick:x,className:`w-full flex items-center justify-center gap-2 rounded-xl px-3 py-2 transition ${g?"bg-emerald-600 hover:bg-emerald-700 text-white":"bg-slate-200 text-slate-500 cursor-not-allowed"}`,children:[l.jsx(io,{className:"w-4 h-4"}),l.jsx("span",{children:"Guardar evaluación"})]})})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:t.map(v=>l.jsxs("div",{className:"border rounded-xl p-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("h4",{className:"font-semibold text-slate-800",children:[v.codigo," — ",v.descriptor]}),l.jsxs("span",{className:"text-xs text-slate-500",children:["Peso ",v.peso,"%"]})]}),l.jsx("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-4 gap-2",children:ER.map(y=>{var w;return l.jsx("button",{onClick:()=>m(v.id,y,y==="SOBRESALIENTE"?100:y==="LOGRADO"?75:y==="EN_DESARROLLO"?50:25),className:`px-3 py-2 rounded-lg border text-sm ${((w=f[v.id])==null?void 0:w.nivel)===y?"bg-indigo-600 text-white":"bg-white hover:bg-slate-50"}`,children:y.replace("_"," ")},y)})})]},v.id))}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-slate-500",children:"Retroalimentación formativa"}),l.jsx("textarea",{value:u,onChange:v=>d(v.target.value),className:"mt-1 w-full border rounded-xl px-3 py-2",rows:3,placeholder:"Sugerencias específicas para mejorar..."})]})]})},eyt=()=>{const[e,t]=S.useState(60),[r,n]=S.useState(4),a=async()=>{await Gbt({porcentajeAprobacion:e,notaAprobacion:r})};return l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-slate-500",children:"Porcentaje de aprobación (%)"}),l.jsx("input",{type:"number",className:"mt-1 w-full border rounded-xl px-3 py-2",value:e,onChange:s=>t(Number(s.target.value))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-slate-500",children:"Nota de aprobación"}),l.jsx("input",{type:"number",step:"0.1",className:"mt-1 w-full border rounded-xl px-3 py-2",value:r,onChange:s=>n(Number(s.target.value))})]}),l.jsx("button",{onClick:a,className:"self-end bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl px-4 py-2",children:"Guardar"})]})},tyt=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},ryt=({currentUser:e,onLogout:t,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,unreadMessagesCount:s,refreshUnreadCount:i})=>{const o=e.profile,c=S.useMemo(()=>{const T=EEe[o]||[];return o!==Jt.ESTUDIANTE?T:T.filter(B=>{if(B.name==="Asistencia a Empresa"){const j=tyt(e.curso||"");return j.startsWith("3º")||j.startsWith("4º")}return!0})},[o,e.curso]),[u,d]=S.useState(null),[f,h]=S.useState(!1),[m,g]=S.useState(!1),x=S.useRef([]);S.useEffect(()=>{c&&c.length>0?d(c[0]):d(null)},[o,c]);const v=S.useCallback(T=>{d(T),window.innerWidth<768&&h(!1)},[]),y=S.useCallback(T=>{const B=c.find(j=>j.name===T);B&&v(B)},[c,v]),w=()=>l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center h-20 px-4 border-b border-white/10 bg-[#121926]",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-400 flex items-center justify-center shadow-inner",children:l.jsx("span",{className:"text-slate-900 inline-flex items-center justify-center",children:l.jsx(oEe,{className:"w-5 h-5"})})}),!m&&l.jsx("span",{className:"text-white font-extrabold text-xl tracking-tight",children:"Gestión LIR"})]}),l.jsx("button",{type:"button",onClick:()=>g(T=>!T),className:"ml-auto w-9 h-9 inline-flex items-center justify-center rounded-full hover:bg-white/10 transition",title:m?"Expandir":"Colapsar",children:m?l.jsx(OL,{className:"w-5 h-5 text-slate-200"}):l.jsx(M2,{className:"w-5 h-5 text-slate-200"})})]}),l.jsx("nav",{className:"flex-1 overflow-y-auto p-3 bg-[#1B2433]",onKeyDown:T=>{var j,E,N;const B=x.current.findIndex(I=>I===document.activeElement);if(T.key==="ArrowDown"){T.preventDefault();const I=Math.min(B===-1?0:B+1,x.current.length-1);(j=x.current[I])==null||j.focus()}else if(T.key==="ArrowUp"){T.preventDefault();const I=Math.max(B===-1?0:B-1,0);(E=x.current[I])==null||E.focus()}else T.key==="Enter"&&B>=0&&((N=x.current[B])==null||N.click())},children:l.jsx("div",{className:"space-y-1",children:c.map((T,B)=>{const j=(u==null?void 0:u.name)===T.name;return l.jsxs("button",{ref:E=>x.current[B]=E,onClick:()=>v(T),className:`w-full group flex items-center ${m?"justify-center px-2":"justify-start px-4"} gap-3 py-3 rounded-2xl transition-all
                  ${j?"bg-amber-400 text-slate-900 font-bold shadow-md":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:m?T.name:void 0,children:[l.jsx("span",{className:`shrink-0 ${j?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:T.icon}),!m&&l.jsx("span",{className:"text-[1.05rem] leading-tight whitespace-normal break-words text-left",children:T.name})]},T.name)})})})]}),_=()=>{if(!u)return l.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-md h-full w-full flex items-center justify-center",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"Seleccione un módulo del menú para comenzar."})});if(u.name==="Calendario Académico")return l.jsx(AVe,{profile:o});if(u.name==="Muro de Anuncios")return l.jsx(xVe,{currentUser:e});if(u.name==="Mensajería Interna")return l.jsx(tit,{currentUser:e,refreshUnreadCount:i});if(u.name==="Generador de Actas")return l.jsx(SVe,{});if(u.name==="Desarrollo Profesional")return l.jsx(Y1t,{currentUser:e});if(o===Jt.SUBDIRECCION){if(u.name==="Dashboard")return l.jsx(O5e,{currentUser:e});if(u.name==="Administración")return l.jsx(Jnt,{});if(u.name==="Seguimiento Curricular")return l.jsx(HAt,{currentUser:e});if(u.name==="Acompañamiento docente")return l.jsx(Kst,{currentUser:e});if(u.name==="Análisis Taxonómico")return l.jsx(qAt,{currentUser:e});if(u.name==="Interdisciplinario")return l.jsx(FY,{});if(u.name==="Registro de inasistencias y reemplazos docentes")return l.jsx(B5e,{currentUser:e});if(u.name==="Crear horarios")return l.jsx(vBe,{});if(u.name==="Seguimiento de acciones pedagógicas")return l.jsx(GHe,{});if(u.name==="Inclusión")return l.jsx(kY,{currentUser:e})}if(o===Jt.PROFESORADO){if(u.name==="Planificación")return l.jsx(sVe,{currentUser:e});if(u.name==="Mis Acompañamientos")return l.jsx(yAt,{currentUser:e});if(u.name==="Recursos de Aprendizaje")return l.jsx(oAt,{});if(u.name==="Análisis Taxonómico")return l.jsx(AnalisisTaxonómico,{currentUser:e});if(u.name==="Interdisciplinario")return l.jsx(FY,{});if(u.name==="Inclusión")return l.jsx(kY,{currentUser:e});if(u.name==="Actividades Remotas")return l.jsx(kat,{});if(u.name==="Evaluación de Aprendizajes")return l.jsx(N$e,{});if(u.name==="Evaluaciones Formativas")return l.jsx(kst,{currentUser:e});if(u.name==="Evaluación de Competencias")return l.jsx(Jbt,{currentUser:e})}if(o===Jt.COORDINACION_TP){if(u.name==="Seguimiento Dual")return l.jsx(lat,{});if(u.name==="Asistencia Dual")return l.jsx(fst,{});if(u.name==="Pañol")return l.jsx(wit,{});if(u.name==="Gestión de Empresas")return l.jsx(j1t,{});if(u.name==="Alternancia TP")return l.jsx(Nbt,{})}if(o===Jt.ESTUDIANTE){if(u.name==="Auto-aprendizaje")return l.jsx(Vat,{currentUser:e});if(u.name==="Evaluación Formativa")return l.jsx(hAt,{currentUser:e});if(u.name==="Tareas Interdisciplinarias")return l.jsx(vAt,{currentUser:e});if(u.name==="Asistencia a Empresa")return l.jsx(ast,{currentUser:e})}return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-md h-full w-full animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:u.name}),l.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:l.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aquí irá la funcionalidad de ",l.jsx("span",{className:"font-semibold",children:u.name}),"."]})})]})};return l.jsxs("div",{className:"h-screen flex flex-col bg-gradient-to-b from-slate-100 to-slate-50 dark:from-slate-950 dark:to-slate-900",children:[l.jsx(c5e,{currentUser:e,onLogout:t,onNavigate:y,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,toggleSidebar:()=>h(T=>!T),unreadMessagesCount:s,refreshUnreadCount:i}),l.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[f&&l.jsx("div",{onClick:()=>h(!1),className:"fixed inset-0 bg-black/40 backdrop-blur-[1px] z-20 md:hidden"}),l.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 ${m?"w-16":"w-72"} 
          bg-[#0F1724] text-white flex flex-col transform md:translate-x-0
          ${f?"translate-x-0":"-translate-x-full"} md:translate-x-0
          transition-all duration-300 ease-in-out border-r border-white/10`,children:l.jsx(w,{})}),l.jsx("main",{className:"flex-1 overflow-y-auto",children:l.jsxs("div",{className:"relative p-5 md:p-8 space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{className:"md:hidden inline-flex items-center justify-center w-10 h-10 rounded-xl bg-white dark:bg-slate-800 shadow hover:shadow-md transition",onClick:()=>h(!0),title:"Abrir menú",children:l.jsx(u_e,{className:"w-5 h-5"})}),(u==null?void 0:u.icon)&&l.jsx("span",{className:"inline-flex items-center justify-center w-10 h-10 rounded-xl bg-white dark:bg-slate-800 shadow",children:u.icon}),l.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-slate-800 dark:text-slate-100",children:(u==null?void 0:u.name)??"Dashboard"})]})}),l.jsx("div",{className:"min-h-[60vh]",children:_()})]})})]})]})},nyt=({onSelectProfile:e,isAdminView:t=!1})=>l.jsxs("div",{className:`relative flex flex-col items-center justify-center min-h-screen p-6 overflow-hidden
                    bg-gradient-to-br from-blue-50 via-blue-100 to-yellow-50
                    dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[l.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[l.jsx("div",{className:`absolute -top-24 -left-16 h-72 w-72 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-yellow-300 to-yellow-200
                        dark:from-yellow-400/20 dark:to-yellow-500/20`}),l.jsx("div",{className:`absolute top-40 -right-10 h-80 w-80 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-blue-300 to-sky-300
                        dark:from-blue-500/20 dark:to-sky-500/20`}),l.jsx("div",{className:`absolute bottom-0 left-1/2 -translate-x-1/2 h-96 w-96 rounded-full blur-3xl opacity-30
                        bg-gradient-to-tr from-sky-200 to-blue-200
                        dark:from-sky-500/20 dark:to-blue-500/20`})]}),l.jsxs("div",{className:"text-center mb-10",children:[l.jsx("div",{className:"mb-4 flex justify-center items-center",children:l.jsx(FL,{})}),l.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-100 mt-2 drop-shadow-sm",children:"Gestión Pedagógica LIR"}),l.jsx("p",{className:"text-slate-700/80 dark:text-slate-300/80 mt-2 text-lg",children:t?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:wEe.map(r=>l.jsxs("button",{onClick:()=>e(r.id),className:`group relative overflow-hidden p-8 rounded-2xl
                       bg-white/10 dark:bg-white/5
                       backdrop-blur-xl border border-white/30 dark:border-white/10
                       shadow-lg hover:shadow-2xl hover:-translate-y-1.5
                       transition-all duration-300 ease-out
                       focus:outline-none focus:ring-4 focus:ring-yellow-400/40`,children:[l.jsx("div",{className:`pointer-events-none absolute inset-0 opacity-0 group-hover:opacity-100
                            transition-opacity duration-300
                            bg-gradient-to-br from-white/40 to-transparent`}),l.jsx("div",{className:"text-slate-800 dark:text-slate-200 group-hover:text-yellow-500 transition-colors duration-300",children:r.icon}),l.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-900 dark:text-slate-100 drop-shadow-[0_1px_0_rgba(0,0,0,0.1)]",children:r.label})]},r.id))}),l.jsxs("footer",{className:"absolute bottom-4 text-slate-600 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]}),ayt=()=>{const[e,t]=S.useState(null),[r,n]=S.useState(null),[a,s]=S.useState(!0),[i,o]=S.useState(null),[c,u]=S.useState(!1),[d,f]=S.useState(null);S.useEffect(()=>{const w=cte(GE,async _=>{if(t(_),_)try{const T=await Cne(_.email);T?(n(T),T.profile===Jt.SUBDIRECCION&&u(!0)):(o("Usuario no encontrado en la base de datos. Contacte al administrador."),await C3())}catch{o("Error al conectar con la base de datos."),await C3()}else n(null),f(null),u(!1),o(null);s(!1)});return()=>w()},[]);const h=async(w,_)=>{if(o(null),!w.trim()||!_.trim()){o("Por favor ingrese email y contraseña");return}try{await nEe(w.trim(),_)}catch(T){switch(T.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":o("Credenciales inválidas. Verifique su email y contraseña.");break;case"auth/too-many-requests":o("Demasiados intentos fallidos. Intente más tarde.");break;case"auth/network-request-failed":o("Error de conexión. Verifique su internet.");break;default:o("Ocurrió un error al intentar iniciar sesión.")}}},m=async w=>{try{await aEe(w)}catch(_){console.error("Error al enviar email de recuperación:",_)}},g=w=>{f(w),u(!1)},x=()=>{u(!0),f(null)},v=async()=>{try{await C3()}catch(w){console.error("Error al cerrar sesión:",w)}};if(a)return l.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"mb-4 flex justify-center items-center",children:l.jsx(FL,{})}),l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicación..."})]})});if(!e||!r)return l.jsx(IEe,{onLoginAttempt:h,onForgotPasswordRequest:m,error:i});if(c&&r.profile===Jt.SUBDIRECCION)return l.jsx(nyt,{onSelectProfile:g,isAdminView:!0});const y=d||r.profile;return l.jsx(ryt,{currentUser:{...r,profile:y},onLogout:v,onChangeProfile:r.profile===Jt.SUBDIRECCION?x:void 0,canChangeProfile:r.profile===Jt.SUBDIRECCION})},mme=document.getElementById("root");if(!mme)throw new Error("Could not find root element to mount to");const syt=jpe.createRoot(mme);syt.render(l.jsx(Ze.StrictMode,{children:l.jsx(ayt,{})}));export{ya as _,oyt as c,Ll as g};
